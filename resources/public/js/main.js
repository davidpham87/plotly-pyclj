var shadow$provide = {};
(function(){
shadow$provide[0]=function(Re,Df,Xf,Vd){function b(L){if(null===L||"object"!==typeof L)return null;L=z&&L[z]||L["@@iterator"];return"function"===typeof L?L:null}function N(L,H,M){this.props=L;this.context=H;this.refs=D;this.updater=M||B}function G(){}function p(L,H,M){this.props=L;this.context=H;this.refs=D;this.updater=M||B}function n(L,H,M){var Q,Z={},ca=null,W=null;if(null!=H)for(Q in void 0!==H.ref&&(W=H.ref),void 0!==H.key&&(ca=""+H.key),H)y.call(H,Q)&&!J.hasOwnProperty(Q)&&(Z[Q]=H[Q]);var T=
arguments.length-2;if(1===T)Z.children=M;else if(1<T){for(var U=Array(T),ha=0;ha<T;ha++)U[ha]=arguments[ha+2];Z.children=U}if(L&&L.defaultProps)for(Q in T=L.defaultProps,T)void 0===Z[Q]&&(Z[Q]=T[Q]);return{$$typeof:c,type:L,key:ca,ref:W,props:Z,_owner:F.current}}function k(L,H){return{$$typeof:c,type:L.type,key:H,ref:L.ref,props:L.props,_owner:L._owner}}function m(L){return"object"===typeof L&&null!==L&&L.$$typeof===c}function a(L){var H={"\x3d":"\x3d0",":":"\x3d2"};return"$"+L.replace(/[=:]/g,function(M){return H[M]})}
function g(L,H){return"object"===typeof L&&null!==L&&null!=L.key?a(""+L.key):H.toString(36)}function h(L,H,M,Q,Z){var ca=typeof L;if("undefined"===ca||"boolean"===ca)L=null;var W=!1;if(null===L)W=!0;else switch(ca){case "string":case "number":W=!0;break;case "object":switch(L.$$typeof){case c:case d:W=!0}}if(W)return W=L,Z=Z(W),L=""===Q?"."+g(W,0):Q,v(Z)?(M="",null!=L&&(M=L.replace(K,"$\x26/")+"/"),h(Z,H,M,"",function(ha){return ha})):null!=Z&&(m(Z)&&(Z=k(Z,M+(!Z.key||W&&W.key===Z.key?"":(""+Z.key).replace(K,
"$\x26/")+"/")+L)),H.push(Z)),1;W=0;Q=""===Q?".":Q+":";if(v(L))for(var T=0;T<L.length;T++){ca=L[T];var U=Q+g(ca,T);W+=h(ca,H,M,U,Z)}else if(U=b(L),"function"===typeof U)for(L=U.call(L),T=0;!(ca=L.next()).done;)ca=ca.value,U=Q+g(ca,T++),W+=h(ca,H,M,U,Z);else if("object"===ca)throw H=String(L),Error("Objects are not valid as a React child (found: "+("[object Object]"===H?"object with keys {"+Object.keys(L).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");
return W}function r(L,H,M){if(null==L)return L;var Q=[],Z=0;h(L,Q,"","",function(ca){return H.call(M,ca,Z++)});return Q}function l(L){if(-1===L._status){var H=L._result;H=H();H.then(function(M){if(0===L._status||-1===L._status)L._status=1,L._result=M},function(M){if(0===L._status||-1===L._status)L._status=2,L._result=M});-1===L._status&&(L._status=0,L._result=H)}if(1===L._status)return L._result.default;throw L._result;}var c=Symbol.for("react.element"),d=Symbol.for("react.portal");Re=Symbol.for("react.fragment");
Df=Symbol.for("react.strict_mode");Xf=Symbol.for("react.profiler");var e=Symbol.for("react.provider"),f=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),t=Symbol.for("react.suspense"),w=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),z=Symbol.iterator,B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,D={};N.prototype.isReactComponent={};N.prototype.setState=function(L,H){if("object"!==typeof L&&
"function"!==typeof L&&null!=L)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,H,"setState")};N.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};G.prototype=N.prototype;var C=p.prototype=new G;C.constructor=p;A(C,N.prototype);C.isPureReactComponent=!0;var v=Array.isArray,y=Object.prototype.hasOwnProperty,F={current:null},J={key:!0,ref:!0,
__self:!0,__source:!0},K=/\/+/g,O={current:null},I={transition:null};C={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:I,ReactCurrentOwner:F};Vd.Children={map:r,forEach:function(L,H,M){r(L,function(){H.apply(this,arguments)},M)},count:function(L){var H=0;r(L,function(){H++});return H},toArray:function(L){return r(L,function(H){return H})||[]},only:function(L){if(!m(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};Vd.Component=N;Vd.Fragment=Re;Vd.Profiler=
Xf;Vd.PureComponent=p;Vd.StrictMode=Df;Vd.Suspense=t;Vd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=C;Vd.cloneElement=function(L,H,M){if(null===L||void 0===L)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var Q=A({},L.props),Z=L.key,ca=L.ref,W=L._owner;if(null!=H){void 0!==H.ref&&(ca=H.ref,W=F.current);void 0!==H.key&&(Z=""+H.key);if(L.type&&L.type.defaultProps)var T=L.type.defaultProps;for(U in H)y.call(H,U)&&!J.hasOwnProperty(U)&&(Q[U]=
void 0===H[U]&&void 0!==T?T[U]:H[U])}var U=arguments.length-2;if(1===U)Q.children=M;else if(1<U){T=Array(U);for(var ha=0;ha<U;ha++)T[ha]=arguments[ha+2];Q.children=T}return{$$typeof:c,type:L.type,key:Z,ref:ca,props:Q,_owner:W}};Vd.createContext=function(L){L={$$typeof:f,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null};L.Provider={$$typeof:e,_context:L};return L.Consumer=L};Vd.createElement=n;Vd.createFactory=function(L){var H=n.bind(null,
L);H.type=L;return H};Vd.createRef=function(){return{current:null}};Vd.forwardRef=function(L){return{$$typeof:q,render:L}};Vd.isValidElement=m;Vd.lazy=function(L){return{$$typeof:x,_payload:{_status:-1,_result:L},_init:l}};Vd.memo=function(L,H){return{$$typeof:w,type:L,compare:void 0===H?null:H}};Vd.startTransition=function(L){var H=I.transition;I.transition={};try{L()}finally{I.transition=H}};Vd.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.");};Vd.useCallback=
function(L,H){return O.current.useCallback(L,H)};Vd.useContext=function(L){return O.current.useContext(L)};Vd.useDebugValue=function(){};Vd.useDeferredValue=function(L){return O.current.useDeferredValue(L)};Vd.useEffect=function(L,H){return O.current.useEffect(L,H)};Vd.useId=function(){return O.current.useId()};Vd.useImperativeHandle=function(L,H,M){return O.current.useImperativeHandle(L,H,M)};Vd.useInsertionEffect=function(L,H){return O.current.useInsertionEffect(L,H)};Vd.useLayoutEffect=function(L,
H){return O.current.useLayoutEffect(L,H)};Vd.useMemo=function(L,H){return O.current.useMemo(L,H)};Vd.useReducer=function(L,H,M){return O.current.useReducer(L,H,M)};Vd.useRef=function(L){return O.current.useRef(L)};Vd.useState=function(L){return O.current.useState(L)};Vd.useSyncExternalStore=function(L,H,M){return O.current.useSyncExternalStore(L,H,M)};Vd.useTransition=function(){return O.current.useTransition()};Vd.version="18.2.0"};
shadow$provide[2]=function(Re,Df,Xf,Vd){Xf.exports=Df(0)};
shadow$provide[7]=function(Re,Df,Xf,Vd){Xf.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"};
shadow$provide[11]=function(Re,Df,Xf,Vd){function b(){}function N(){}var G=Df(7);N.resetWarningCache=b;Xf.exports=function(){function p(m,a,g,h,r,l){if(l!==G)throw m=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types"),m.name="Invariant Violation",m;}function n(){return p}p.isRequired=p;var k={array:p,bigint:p,bool:p,func:p,number:p,object:p,string:p,symbol:p,any:p,arrayOf:n,
element:p,elementType:p,instanceOf:n,node:p,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:N,resetWarningCache:b};return k.PropTypes=k}};
shadow$provide[12]=function(Re,Df,Xf,Vd){Xf.exports=Df(11)()};
shadow$provide[13]=function(Re,Df,Xf,Vd){function b(f){"@babel/helpers - typeof";return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(q){return typeof q}:function(q){return q&&"function"==typeof Symbol&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q},b(f)}function N(f){if("function"!==typeof WeakMap)return null;var q=new WeakMap,t=new WeakMap;return(N=function(w){return w?t:q})(f)}function G(f,q){for(var t=0;t<q.length;t++){var w=q[t];w.enumerable=w.enumerable||
!1;w.configurable=!0;"value"in w&&(w.writable=!0);Object.defineProperty(f,w.key,w)}}function p(f,q,t){q&&G(f.prototype,q);t&&G(f,t);Object.defineProperty(f,"prototype",{writable:!1});return f}function n(f,q){if("function"!==typeof q&&null!==q)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(q&&q.prototype,{constructor:{value:f,writable:!0,configurable:!0}});Object.defineProperty(f,"prototype",{writable:!1});q&&k(f,q)}function k(f,q){k=Object.setPrototypeOf?
Object.setPrototypeOf.bind():function(t,w){t.__proto__=w;return t};return k(f,q)}function m(f){var q=g();return function(){var t=h(f);if(q){var w=h(this).constructor;t=Reflect.construct(t,arguments,w)}else t=t.apply(this,arguments);if(!t||"object"!==b(t)&&"function"!==typeof t){if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");t=a(this)}return t}}function a(f){if(void 0===f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return f}function g(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(f){return!1}}function h(f){h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(q){return q.__proto__||Object.getPrototypeOf(q)};return h(f)}Object.defineProperty(Vd,"__esModule",{value:!0});Vd["default"]=function(f){var q=function(t){function w(z){if(!(this instanceof
w))throw new TypeError("Cannot call a class as a function");z=x.call(this,z);z.p=Promise.resolve();z.resizeHandler=null;z.handlers={};z.syncWindowResize=z.syncWindowResize.bind(a(z));z.syncEventHandlers=z.syncEventHandlers.bind(a(z));z.attachUpdateEvents=z.attachUpdateEvents.bind(a(z));z.getRef=z.getRef.bind(a(z));z.handleUpdate=z.handleUpdate.bind(a(z));z.figureCallback=z.figureCallback.bind(a(z));z.updatePlotly=z.updatePlotly.bind(a(z));return z}n(w,t);var x=m(w);p(w,[{key:"updatePlotly",value:function(z,
B,A){var D=this;this.p=this.p.then(function(){if(!D.unmounting){if(!D.el)throw Error("Missing element reference");return f.react(D.el,{data:D.props.data,layout:D.props.layout,config:D.props.config,frames:D.props.frames})}}).then(function(){D.unmounting||(D.syncWindowResize(z),D.syncEventHandlers(),D.figureCallback(B),A&&D.attachUpdateEvents())})["catch"](function(C){if(D.props.onError)D.props.onError(C)})}},{key:"componentDidMount",value:function(){this.unmounting=!1;this.updatePlotly(!0,this.props.onInitialized,
!0)}},{key:"componentDidUpdate",value:function(z){this.unmounting=!1;var B=z.frames&&z.frames.length?z.frames.length:0,A=this.props.frames&&this.props.frames.length?this.props.frames.length:0,D=void 0!==z.revision,C=z.revision!==this.props.revision;(z.layout!==this.props.layout||z.data!==this.props.data||z.config!==this.props.config||A!==B||D&&(!D||C))&&this.updatePlotly(!1,this.props.onUpdate,!1)}},{key:"componentWillUnmount",value:function(){this.unmounting=!0;this.figureCallback(this.props.onPurge);
this.resizeHandler&&e&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null);this.removeUpdateEvents();f.purge(this.el)}},{key:"attachUpdateEvents",value:function(){var z=this;this.el&&this.el.removeListener&&d.forEach(function(B){z.el.on(B,z.handleUpdate)})}},{key:"removeUpdateEvents",value:function(){var z=this;this.el&&this.el.removeListener&&d.forEach(function(B){z.el.removeListener(B,z.handleUpdate)})}},{key:"handleUpdate",value:function(){this.figureCallback(this.props.onUpdate)}},
{key:"figureCallback",value:function(z){if("function"===typeof z){var B=this.el;z({data:B.data,layout:B.layout,frames:this.el._transitionData?this.el._transitionData._frames:null},this.el)}}},{key:"syncWindowResize",value:function(z){var B=this;e&&(this.props.useResizeHandler&&!this.resizeHandler?(this.resizeHandler=function(){return f.Plots.resize(B.el)},window.addEventListener("resize",this.resizeHandler),z&&this.resizeHandler()):!this.props.useResizeHandler&&this.resizeHandler&&(window.removeEventListener("resize",
this.resizeHandler),this.resizeHandler=null))}},{key:"getRef",value:function(z){this.el=z;this.props.debug&&e&&(window.gd=this.el)}},{key:"syncEventHandlers",value:function(){var z=this;c.forEach(function(B){var A=z.props["on"+B],D=z.handlers[B],C=!!D;A&&!C?z.addEventHandler(B,A):!A&&C?z.removeEventHandler(B):A&&C&&A!==D&&(z.removeEventHandler(B),z.addEventHandler(B,A))})}},{key:"addEventHandler",value:function(z,B){this.handlers[z]=B;this.el.on(this.getPlotlyEventName(z),this.handlers[z])}},{key:"removeEventHandler",
value:function(z){this.el.removeListener(this.getPlotlyEventName(z),this.handlers[z]);delete this.handlers[z]}},{key:"getPlotlyEventName",value:function(z){return"plotly_"+z.toLowerCase()}},{key:"render",value:function(){return r["default"].createElement("div",{id:this.props.divId,style:this.props.style,ref:this.getRef,className:this.props.className})}}]);return w}(r.Component);q.propTypes={data:l["default"].arrayOf(l["default"].object),config:l["default"].object,layout:l["default"].object,frames:l["default"].arrayOf(l["default"].object),
revision:l["default"].number,onInitialized:l["default"].func,onPurge:l["default"].func,onError:l["default"].func,onUpdate:l["default"].func,debug:l["default"].bool,style:l["default"].object,className:l["default"].string,useResizeHandler:l["default"].bool,divId:l["default"].string};c.forEach(function(t){q.propTypes["on"+t]=l["default"].func});q.defaultProps={debug:!1,useResizeHandler:!1,data:[],style:{position:"relative",display:"inline-block"}};return q};var r=function(f,q){if(!q&&f&&f.__esModule)return f;
if(null===f||"object"!==b(f)&&"function"!==typeof f)return{"default":f};if((q=N(q))&&q.has(f))return q.get(f);var t={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor,x;for(x in f)if("default"!==x&&Object.prototype.hasOwnProperty.call(f,x)){var z=w?Object.getOwnPropertyDescriptor(f,x):null;z&&(z.get||z.set)?Object.defineProperty(t,x,z):t[x]=f[x]}t["default"]=f;q&&q.set(f,t);return t}(Df(2)),l=function(f){return f&&f.__esModule?f:{"default":f}}(Df(12)),c="AfterExport AfterPlot Animated AnimatingFrame AnimationInterrupted AutoSize BeforeExport BeforeHover ButtonClicked Click ClickAnnotation Deselect DoubleClick Framework Hover LegendClick LegendDoubleClick Relayout Relayouting Restyle Redraw Selected Selecting SliderChange SliderEnd SliderStart SunburstClick Transitioning TransitionInterrupted Unhover WebGlContextLost".split(" "),
d="plotly_restyle plotly_redraw plotly_relayout plotly_relayouting plotly_doubleclick plotly_animated plotly_sunburstclick".split(" "),e="undefined"!==typeof window};
shadow$provide[14]=function(Re,Df,Xf,Vd){(function(b){"object"===typeof Vd&&"undefined"!==typeof Xf?Xf.exports=b():"function"===typeof define&&define.amd?define([],b):("undefined"!==typeof window?window:"undefined"!==typeof Re?Re:"undefined"!==typeof self?self:this).Plotly=b()})(function(){return function(){function b(N,G,p){function n(a,g){if(!G[a]){if(!N[a]){var h="function"==typeof Df&&Df;if(!g&&h)return h(a,!0);if(k)return k(a,!0);g=Error("Cannot find module '"+a+"'");throw g.code="MODULE_NOT_FOUND",
g;}g=G[a]={exports:{}};N[a][0].call(g.exports,function(r){return n(N[a][1][r]||r)},g,g.exports,b,N,G,p)}return G[a].exports}for(var k="function"==typeof Df&&Df,m=0;m<p.length;m++)n(p[m]);return n}return b}()({1:[function(b,N,G){b=b("../src/lib");N={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;",
"X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;",
"X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;",
"X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover\x3e:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;",
"X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;",
"X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;",
"X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;",
"X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:#fff;","X .select-outline-2":"stroke:#000;stroke-dasharray:2px 2px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;",
"Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var p in N)G=p.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier"),b.addStyleRule(G,N[p])},{"../src/lib":803}],2:[function(b,N,G){N.exports=b("../src/transforms/aggregate")},{"../src/transforms/aggregate":1399}],3:[function(b,N,G){N.exports=
b("../src/traces/bar")},{"../src/traces/bar":949}],4:[function(b,N,G){N.exports=b("../src/traces/barpolar")},{"../src/traces/barpolar":962}],5:[function(b,N,G){N.exports=b("../src/traces/box")},{"../src/traces/box":972}],6:[function(b,N,G){N.exports=b("../src/components/calendars")},{"../src/components/calendars":664}],7:[function(b,N,G){N.exports=b("../src/traces/candlestick")},{"../src/traces/candlestick":981}],8:[function(b,N,G){N.exports=b("../src/traces/carpet")},{"../src/traces/carpet":1E3}],
9:[function(b,N,G){N.exports=b("../src/traces/choropleth")},{"../src/traces/choropleth":1014}],10:[function(b,N,G){N.exports=b("../src/traces/choroplethmapbox")},{"../src/traces/choroplethmapbox":1021}],11:[function(b,N,G){N.exports=b("../src/traces/cone")},{"../src/traces/cone":1027}],12:[function(b,N,G){N.exports=b("../src/traces/contour")},{"../src/traces/contour":1042}],13:[function(b,N,G){N.exports=b("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":1053}],14:[function(b,N,G){N.exports=
b("../src/core")},{"../src/core":781}],15:[function(b,N,G){N.exports=b("../src/traces/densitymapbox")},{"../src/traces/densitymapbox":1061}],16:[function(b,N,G){N.exports=b("../src/transforms/filter")},{"../src/transforms/filter":1400}],17:[function(b,N,G){N.exports=b("../src/traces/funnel")},{"../src/traces/funnel":1071}],18:[function(b,N,G){N.exports=b("../src/traces/funnelarea")},{"../src/traces/funnelarea":1080}],19:[function(b,N,G){N.exports=b("../src/transforms/groupby")},{"../src/transforms/groupby":1401}],
20:[function(b,N,G){N.exports=b("../src/traces/heatmap")},{"../src/traces/heatmap":1093}],21:[function(b,N,G){N.exports=b("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":1103}],22:[function(b,N,G){N.exports=b("../src/traces/histogram")},{"../src/traces/histogram":1115}],23:[function(b,N,G){N.exports=b("../src/traces/histogram2d")},{"../src/traces/histogram2d":1121}],24:[function(b,N,G){N.exports=b("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":1125}],25:[function(b,
N,G){N.exports=b("../src/traces/icicle")},{"../src/traces/icicle":1131}],26:[function(b,N,G){N.exports=b("../src/traces/image")},{"../src/traces/image":1144}],27:[function(b,N,G){G=b("./core");G.register([b("./bar"),b("./box"),b("./heatmap"),b("./histogram"),b("./histogram2d"),b("./histogram2dcontour"),b("./contour"),b("./scatterternary"),b("./violin"),b("./funnel"),b("./waterfall"),b("./image"),b("./pie"),b("./sunburst"),b("./treemap"),b("./icicle"),b("./funnelarea"),b("./scatter3d"),b("./surface"),
b("./isosurface"),b("./volume"),b("./mesh3d"),b("./cone"),b("./streamtube"),b("./scattergeo"),b("./choropleth"),b("./scattergl"),b("./splom"),b("./pointcloud"),b("./heatmapgl"),b("./parcoords"),b("./parcats"),b("./scattermapbox"),b("./choroplethmapbox"),b("./densitymapbox"),b("./sankey"),b("./indicator"),b("./table"),b("./carpet"),b("./scattercarpet"),b("./contourcarpet"),b("./ohlc"),b("./candlestick"),b("./scatterpolar"),b("./scatterpolargl"),b("./barpolar"),b("./aggregate"),b("./filter"),b("./groupby"),
b("./sort"),b("./calendars")]);N.exports=G},{"./aggregate":2,"./bar":3,"./barpolar":4,"./box":5,"./calendars":6,"./candlestick":7,"./carpet":8,"./choropleth":9,"./choroplethmapbox":10,"./cone":11,"./contour":12,"./contourcarpet":13,"./core":14,"./densitymapbox":15,"./filter":16,"./funnel":17,"./funnelarea":18,"./groupby":19,"./heatmap":20,"./heatmapgl":21,"./histogram":22,"./histogram2d":23,"./histogram2dcontour":24,"./icicle":25,"./image":26,"./indicator":28,"./isosurface":29,"./mesh3d":30,"./ohlc":31,
"./parcats":32,"./parcoords":33,"./pie":34,"./pointcloud":35,"./sankey":36,"./scatter3d":37,"./scattercarpet":38,"./scattergeo":39,"./scattergl":40,"./scattermapbox":41,"./scatterpolar":42,"./scatterpolargl":43,"./scatterternary":44,"./sort":45,"./splom":46,"./streamtube":47,"./sunburst":48,"./surface":49,"./table":50,"./treemap":51,"./violin":52,"./volume":53,"./waterfall":54}],28:[function(b,N,G){N.exports=b("../src/traces/indicator")},{"../src/traces/indicator":1152}],29:[function(b,N,G){N.exports=
b("../src/traces/isosurface")},{"../src/traces/isosurface":1158}],30:[function(b,N,G){N.exports=b("../src/traces/mesh3d")},{"../src/traces/mesh3d":1163}],31:[function(b,N,G){N.exports=b("../src/traces/ohlc")},{"../src/traces/ohlc":1168}],32:[function(b,N,G){N.exports=b("../src/traces/parcats")},{"../src/traces/parcats":1177}],33:[function(b,N,G){N.exports=b("../src/traces/parcoords")},{"../src/traces/parcoords":1187}],34:[function(b,N,G){N.exports=b("../src/traces/pie")},{"../src/traces/pie":1198}],
35:[function(b,N,G){N.exports=b("../src/traces/pointcloud")},{"../src/traces/pointcloud":1207}],36:[function(b,N,G){N.exports=b("../src/traces/sankey")},{"../src/traces/sankey":1213}],37:[function(b,N,G){N.exports=b("../src/traces/scatter3d")},{"../src/traces/scatter3d":1251}],38:[function(b,N,G){N.exports=b("../src/traces/scattercarpet")},{"../src/traces/scattercarpet":1258}],39:[function(b,N,G){N.exports=b("../src/traces/scattergeo")},{"../src/traces/scattergeo":1266}],40:[function(b,N,G){N.exports=
b("../src/traces/scattergl")},{"../src/traces/scattergl":1279}],41:[function(b,N,G){N.exports=b("../src/traces/scattermapbox")},{"../src/traces/scattermapbox":1289}],42:[function(b,N,G){N.exports=b("../src/traces/scatterpolar")},{"../src/traces/scatterpolar":1297}],43:[function(b,N,G){N.exports=b("../src/traces/scatterpolargl")},{"../src/traces/scatterpolargl":1304}],44:[function(b,N,G){N.exports=b("../src/traces/scatterternary")},{"../src/traces/scatterternary":1312}],45:[function(b,N,G){N.exports=
b("../src/transforms/sort")},{"../src/transforms/sort":1403}],46:[function(b,N,G){N.exports=b("../src/traces/splom")},{"../src/traces/splom":1321}],47:[function(b,N,G){N.exports=b("../src/traces/streamtube")},{"../src/traces/streamtube":1329}],48:[function(b,N,G){N.exports=b("../src/traces/sunburst")},{"../src/traces/sunburst":1337}],49:[function(b,N,G){N.exports=b("../src/traces/surface")},{"../src/traces/surface":1346}],50:[function(b,N,G){N.exports=b("../src/traces/table")},{"../src/traces/table":1354}],
51:[function(b,N,G){N.exports=b("../src/traces/treemap")},{"../src/traces/treemap":1365}],52:[function(b,N,G){N.exports=b("../src/traces/violin")},{"../src/traces/violin":1378}],53:[function(b,N,G){N.exports=b("../src/traces/volume")},{"../src/traces/volume":1386}],54:[function(b,N,G){N.exports=b("../src/traces/waterfall")},{"../src/traces/waterfall":1394}],55:[function(b,N,G){function p(g,h){this._controllerNames=Object.keys(g);this._controllerList=this._controllerNames.map(function(r){return g[r]});
this._mode=h;this._active=g[h];this._active||(this._mode="turntable",this._active=g.turntable);this.modes=this._controllerNames;this.computedMatrix=this._active.computedMatrix;this.computedEye=this._active.computedEye;this.computedUp=this._active.computedUp;this.computedCenter=this._active.computedCenter;this.computedRadius=this._active.computedRadius}N.exports=function(g){g=g||{};var h=g.eye||[0,0,1],r=g.center||[0,0,0],l=g.up||[0,1,0],c=g.distanceLimits||[0,Infinity];g=g.mode||"turntable";var d=
n(),e=k(),f=m();d.setDistanceLimits(c[0],c[1]);d.lookAt(0,h,r,l);e.setDistanceLimits(c[0],c[1]);e.lookAt(0,h,r,l);f.setDistanceLimits(c[0],c[1]);f.lookAt(0,h,r,l);return new p({turntable:d,orbit:e,matrix:f},g)};var n=b("turntable-camera-controller"),k=b("orbit-camera-controller"),m=b("matrix-camera-controller"),a=p.prototype;[["flush",1],["idle",1],["lookAt",4],["rotate",4],["pan",4],["translate",4],["setMatrix",2],["setDistanceLimits",2],["setDistance",2]].forEach(function(g){for(var h=g[0],r=[],
l=0;l<g[1];++l)r.push("a"+l);g="var cc\x3dthis._controllerList;for(var i\x3d0;i\x3ccc.length;++i){cc[i]."+g[0]+"("+r.join()+")}";a[h]=Function.apply(null,r.concat(g))});a.recalcMatrix=function(g){this._active.recalcMatrix(g)};a.getDistance=function(g){return this._active.getDistance(g)};a.getDistanceLimits=function(g){return this._active.getDistanceLimits(g)};a.lastT=function(){return this._active.lastT()};a.setMode=function(g){if(g!==this._mode){var h=this._controllerNames.indexOf(g);if(!(0>h)){var r=
this._active;h=this._controllerList[h];var l=Math.max(r.lastT(),h.lastT());r.recalcMatrix(l);h.setMatrix(l,r.computedMatrix);this._active=h;this._mode=g;this.computedMatrix=this._active.computedMatrix;this.computedEye=this._active.computedEye;this.computedUp=this._active.computedUp;this.computedCenter=this._active.computedCenter;this.computedRadius=this._active.computedRadius}}};a.getMode=function(){return this._mode}},{"matrix-camera-controller":468,"orbit-camera-controller":489,"turntable-camera-controller":603}],
56:[function(b,N,G){(function(p,n){"object"===typeof G&&"undefined"!==typeof N?n(G,b("d3-array"),b("d3-collection"),b("d3-shape"),b("elementary-circuits-directed-graph")):n(p.d3=p.d3||{},p.d3,p.d3,p.d3,null)})(this,function(p,n,k,m,a){function g(ma){return ma.target.depth}function h(ma,ia){return ma.sourceLinks.length?ma.depth:ia-1}function r(ma){return function(){return ma}}function l(ma,ia){return d(ma.source,ia.source)||ma.index-ia.index}function c(ma,ia){return d(ma.target,ia.target)||ma.index-
ia.index}function d(ma,ia){return ma.partOfCycle===ia.partOfCycle?ma.y0-ia.y0:"top"===ma.circularLinkType||"bottom"===ia.circularLinkType?-1:1}function e(ma){return ma.value}function f(ma){return(ma.y0+ma.y1)/2}function q(ma){return f(ma.source)}function t(ma){return f(ma.target)}function w(ma){return ma.index}function x(ma){return ma.nodes}function z(ma){return ma.links}function B(ma,ia){ma=ma.get(ia);if(!ma)throw Error("missing: "+ia);return ma}function A(ma,ia,oa){var xa=0;if(null===oa){var ra=
[];for(ia=0;ia<ma.links.length;ia++){var la=ma.links[ia],ka=la.source.index;la=la.target.index;ra[ka]||(ra[ka]=[]);ra[la]||(ra[la]=[]);-1===ra[ka].indexOf(la)&&ra[ka].push(la)}ra=a(ra);ra.sort(function(qa,ta){return qa.length-ta.length});var na={};for(ia=0;ia<ra.length;ia++)ka=ra[ia].slice(-2),na[ka[0]]||(na[ka[0]]={}),na[ka[0]][ka[1]]=!0;ma.links.forEach(function(qa){var ta=qa.target.index,za=qa.source.index;ta===za||na[za]&&na[za][ta]?(qa.circular=!0,qa.circularLinkID=xa,xa+=1):qa.circular=!1})}else ma.links.forEach(function(qa){qa.source[oa]<
qa.target[oa]?qa.circular=!1:(qa.circular=!0,qa.circularLinkID=xa,xa+=1)})}function D(ma,ia){var oa=0,xa=0;ma.links.forEach(function(ra){ra.circular&&(ra.circularLinkType=ra.source.circularLinkType||ra.target.circularLinkType?ra.source.circularLinkType?ra.source.circularLinkType:ra.target.circularLinkType:oa<xa?"top":"bottom","top"==ra.circularLinkType?oa+=1:xa+=1,ma.nodes.forEach(function(la){if(ia(la)==ia(ra.source)||ia(la)==ia(ra.target))la.circularLinkType=ra.circularLinkType}))});ma.links.forEach(function(ra){ra.circular&&
(ra.source.circularLinkType==ra.target.circularLinkType&&(ra.circularLinkType=ra.source.circularLinkType),Y(ra,ia)&&(ra.circularLinkType=ra.source.circularLinkType))})}function C(ma){return Math.atan(Math.abs(ma.target.x0-ma.source.x1)/Math.abs(ma.y1-ma.y0))}function v(ma,ia){var oa=0;ma.sourceLinks.forEach(function(ra){oa=ra.circular&&!Y(ra,ia)?oa+1:oa});var xa=0;ma.targetLinks.forEach(function(ra){xa=ra.circular&&!Y(ra,ia)?xa+1:xa});return oa+xa}function y(ma){var ia=0;ma.source.sourceLinks.forEach(function(xa){ia=
xa.circular?ia+1:ia});var oa=0;ma.target.targetLinks.forEach(function(xa){oa=xa.circular?oa+1:oa});return 1<ia||1<oa?!1:!0}function F(ma,ia,oa){ma.sort(K);ma.forEach(function(xa,ra){var la=0;if(!Y(xa,oa)||!y(xa)){var ka=0;for(ka;ka<ra;ka++){var na=ma[ra];var qa=ma[ka];na=na.source.column<qa.target.column?!1:na.target.column>qa.source.column?!1:!0;na&&(na=ma[ka].circularPathData.verticalBuffer+ma[ka].width/2+ia,la=na>la?na:la)}}xa.circularPathData.verticalBuffer=la+xa.width/2});return ma}function J(ma,
ia,oa,xa){var ra=n.min(ma.links,function(ka){return ka.source.y0});ma.links.forEach(function(ka){ka.circular&&(ka.circularPathData={})});var la=ma.links.filter(function(ka){return"top"==ka.circularLinkType});F(la,ia,xa);la=ma.links.filter(function(ka){return"bottom"==ka.circularLinkType});F(la,ia,xa);ma.links.forEach(function(ka){if(ka.circular){ka.circularPathData.arcRadius=ka.width+10;ka.circularPathData.leftNodeBuffer=5;ka.circularPathData.rightNodeBuffer=5;ka.circularPathData.sourceWidth=ka.source.x1-
ka.source.x0;ka.circularPathData.sourceX=ka.source.x0+ka.circularPathData.sourceWidth;ka.circularPathData.targetX=ka.target.x0;ka.circularPathData.sourceY=ka.y0;ka.circularPathData.targetY=ka.y1;if(Y(ka,xa)&&y(ka))ka.circularPathData.leftSmallArcRadius=10+ka.width/2,ka.circularPathData.leftLargeArcRadius=10+ka.width/2,ka.circularPathData.rightSmallArcRadius=10+ka.width/2,ka.circularPathData.rightLargeArcRadius=10+ka.width/2,"bottom"==ka.circularLinkType?(ka.circularPathData.verticalFullExtent=ka.source.y1+
25+ka.circularPathData.verticalBuffer,ka.circularPathData.verticalLeftInnerExtent=ka.circularPathData.verticalFullExtent-ka.circularPathData.leftLargeArcRadius,ka.circularPathData.verticalRightInnerExtent=ka.circularPathData.verticalFullExtent-ka.circularPathData.rightLargeArcRadius):(ka.circularPathData.verticalFullExtent=ka.source.y0-25-ka.circularPathData.verticalBuffer,ka.circularPathData.verticalLeftInnerExtent=ka.circularPathData.verticalFullExtent+ka.circularPathData.leftLargeArcRadius,ka.circularPathData.verticalRightInnerExtent=
ka.circularPathData.verticalFullExtent+ka.circularPathData.rightLargeArcRadius);else{var na=ka.source.column,qa=ka.circularLinkType,ta=ma.links.filter(function(Ia){return Ia.source.column==na&&Ia.circularLinkType==qa});"bottom"==ka.circularLinkType?ta.sort(I):ta.sort(O);var za=0;ta.forEach(function(Ia,Xa){Ia.circularLinkID==ka.circularLinkID&&(ka.circularPathData.leftSmallArcRadius=10+ka.width/2+za,ka.circularPathData.leftLargeArcRadius=10+ka.width/2+Xa*ia+za);za+=Ia.width});na=ka.target.column;ta=
ma.links.filter(function(Ia){return Ia.target.column==na&&Ia.circularLinkType==qa});"bottom"==ka.circularLinkType?ta.sort(H):ta.sort(L);za=0;ta.forEach(function(Ia,Xa){Ia.circularLinkID==ka.circularLinkID&&(ka.circularPathData.rightSmallArcRadius=10+ka.width/2+za,ka.circularPathData.rightLargeArcRadius=10+ka.width/2+Xa*ia+za);za+=Ia.width});"bottom"==ka.circularLinkType?(ka.circularPathData.verticalFullExtent=Math.max(oa,ka.source.y1,ka.target.y1)+25+ka.circularPathData.verticalBuffer,ka.circularPathData.verticalLeftInnerExtent=
ka.circularPathData.verticalFullExtent-ka.circularPathData.leftLargeArcRadius,ka.circularPathData.verticalRightInnerExtent=ka.circularPathData.verticalFullExtent-ka.circularPathData.rightLargeArcRadius):(ka.circularPathData.verticalFullExtent=ra-25-ka.circularPathData.verticalBuffer,ka.circularPathData.verticalLeftInnerExtent=ka.circularPathData.verticalFullExtent+ka.circularPathData.leftLargeArcRadius,ka.circularPathData.verticalRightInnerExtent=ka.circularPathData.verticalFullExtent+ka.circularPathData.rightLargeArcRadius)}ka.circularPathData.leftInnerExtent=
ka.circularPathData.sourceX+ka.circularPathData.leftNodeBuffer;ka.circularPathData.rightInnerExtent=ka.circularPathData.targetX-ka.circularPathData.rightNodeBuffer;ka.circularPathData.leftFullExtent=ka.circularPathData.sourceX+ka.circularPathData.leftLargeArcRadius+ka.circularPathData.leftNodeBuffer;ka.circularPathData.rightFullExtent=ka.circularPathData.targetX-ka.circularPathData.rightLargeArcRadius-ka.circularPathData.rightNodeBuffer}ka.circular?ka.path="top"==ka.circularLinkType?"M"+ka.circularPathData.sourceX+
" "+ka.circularPathData.sourceY+" L"+ka.circularPathData.leftInnerExtent+" "+ka.circularPathData.sourceY+" A"+ka.circularPathData.leftLargeArcRadius+" "+ka.circularPathData.leftSmallArcRadius+" 0 0 0 "+ka.circularPathData.leftFullExtent+" "+(ka.circularPathData.sourceY-ka.circularPathData.leftSmallArcRadius)+" L"+ka.circularPathData.leftFullExtent+" "+ka.circularPathData.verticalLeftInnerExtent+" A"+ka.circularPathData.leftLargeArcRadius+" "+ka.circularPathData.leftLargeArcRadius+" 0 0 0 "+ka.circularPathData.leftInnerExtent+
" "+ka.circularPathData.verticalFullExtent+" L"+ka.circularPathData.rightInnerExtent+" "+ka.circularPathData.verticalFullExtent+" A"+ka.circularPathData.rightLargeArcRadius+" "+ka.circularPathData.rightLargeArcRadius+" 0 0 0 "+ka.circularPathData.rightFullExtent+" "+ka.circularPathData.verticalRightInnerExtent+" L"+ka.circularPathData.rightFullExtent+" "+(ka.circularPathData.targetY-ka.circularPathData.rightSmallArcRadius)+" A"+ka.circularPathData.rightLargeArcRadius+" "+ka.circularPathData.rightSmallArcRadius+
" 0 0 0 "+ka.circularPathData.rightInnerExtent+" "+ka.circularPathData.targetY+" L"+ka.circularPathData.targetX+" "+ka.circularPathData.targetY:"M"+ka.circularPathData.sourceX+" "+ka.circularPathData.sourceY+" L"+ka.circularPathData.leftInnerExtent+" "+ka.circularPathData.sourceY+" A"+ka.circularPathData.leftLargeArcRadius+" "+ka.circularPathData.leftSmallArcRadius+" 0 0 1 "+ka.circularPathData.leftFullExtent+" "+(ka.circularPathData.sourceY+ka.circularPathData.leftSmallArcRadius)+" L"+ka.circularPathData.leftFullExtent+
" "+ka.circularPathData.verticalLeftInnerExtent+" A"+ka.circularPathData.leftLargeArcRadius+" "+ka.circularPathData.leftLargeArcRadius+" 0 0 1 "+ka.circularPathData.leftInnerExtent+" "+ka.circularPathData.verticalFullExtent+" L"+ka.circularPathData.rightInnerExtent+" "+ka.circularPathData.verticalFullExtent+" A"+ka.circularPathData.rightLargeArcRadius+" "+ka.circularPathData.rightLargeArcRadius+" 0 0 1 "+ka.circularPathData.rightFullExtent+" "+ka.circularPathData.verticalRightInnerExtent+" L"+ka.circularPathData.rightFullExtent+
" "+(ka.circularPathData.targetY+ka.circularPathData.rightSmallArcRadius)+" A"+ka.circularPathData.rightLargeArcRadius+" "+ka.circularPathData.rightSmallArcRadius+" 0 0 1 "+ka.circularPathData.rightInnerExtent+" "+ka.circularPathData.targetY+" L"+ka.circularPathData.targetX+" "+ka.circularPathData.targetY:(ta=m.linkHorizontal().source(function(Ia){return[Ia.source.x0+(Ia.source.x1-Ia.source.x0),Ia.y0]}).target(function(Ia){return[Ia.target.x0,Ia.y1]}),ka.path=ta(ka))})}function K(ma,ia){return M(ma)==
M(ia)?"bottom"==ma.circularLinkType?I(ma,ia):O(ma,ia):M(ia)-M(ma)}function O(ma,ia){return ma.y0-ia.y0}function I(ma,ia){return ia.y0-ma.y0}function L(ma,ia){return ma.y1-ia.y1}function H(ma,ia){return ia.y1-ma.y1}function M(ma){return ma.target.column-ma.source.column}function Q(ma,ia){var oa=C(ma);ia=(ia.target.x0-ia.source.x1)/Math.tan(oa);return"up"==ha(ma)?ma.y1+ia:ma.y1-ia}function Z(ma,ia){var oa=C(ma);ia=(ia.target.x0-ia.source.x1)/Math.tan(oa);return"up"==ha(ma)?ma.y1-ia:ma.y1+ia}function ca(ma,
ia,oa,xa){ma.links.forEach(function(ra){if(!ra.circular&&1<ra.target.column-ra.source.column){var la=ra.source.column+1,ka=ra.target.column-1,na=1,qa=ka-la+1;for(na=1;la<=ka;la++,na++)ma.nodes.forEach(function(ta){if(ta.column==la){var za=na/(qa+1),Ia=Math.pow(1-za,3)*ra.y0+3*za*Math.pow(1-za,2)*ra.y0+3*Math.pow(za,2)*(1-za)*ra.y1+Math.pow(za,3)*ra.y1;za=Ia-ra.width/2;Ia+=ra.width/2;if(za>ta.y0&&za<ta.y1){var Xa=ta.y1-za+10;Xa="bottom"==ta.circularLinkType?Xa:-Xa;ta=W(ta,Xa,ia,oa);ma.nodes.forEach(function($a){xa($a)!=
xa(ta)&&$a.column==ta.column&&(ta.y0>$a.y0&&ta.y0<$a.y1||ta.y1>$a.y0&&ta.y1<$a.y1||ta.y0<$a.y0&&ta.y1>$a.y1)&&W($a,Xa,ia,oa)})}else Ia>ta.y0&&Ia<ta.y1?(Xa=Ia-ta.y0+10,ta=W(ta,Xa,ia,oa),ma.nodes.forEach(function($a){xa($a)!=xa(ta)&&$a.column==ta.column&&$a.y0<ta.y1&&$a.y1>ta.y1&&W($a,Xa,ia,oa)})):za<ta.y0&&Ia>ta.y1&&(Xa=Ia-ta.y0+10,ta=W(ta,Xa,ia,oa),ma.nodes.forEach(function($a){xa($a)!=xa(ta)&&$a.column==ta.column&&$a.y0<ta.y1&&$a.y1>ta.y1&&W($a,Xa,ia,oa)}))}})}})}function W(ma,ia,oa,xa){ma.y0+ia>=
oa&&ma.y1+ia<=xa&&(ma.y0+=ia,ma.y1+=ia,ma.targetLinks.forEach(function(ra){ra.y1+=ia}),ma.sourceLinks.forEach(function(ra){ra.y0+=ia}));return ma}function T(ma,ia,oa,xa){ma.nodes.forEach(function(ra){xa&&ra.y+(ra.y1-ra.y0)>ia&&(ra.y-=ra.y+(ra.y1-ra.y0)-ia);var la=ma.links.filter(function(qa){return oa(qa.source)==oa(ra)}),ka=la.length;1<ka&&la.sort(function(qa,ta){if(!qa.circular&&!ta.circular)if(qa.target.column!=ta.target.column&&ha(qa)==ha(ta)){if(qa.target.column>ta.target.column)return ta=Z(ta,
qa),qa.y1-ta;if(ta.target.column>qa.target.column)return Z(qa,ta)-ta.y1}else return qa.y1-ta.y1;if(qa.circular&&!ta.circular)return"top"==qa.circularLinkType?-1:1;if(ta.circular&&!qa.circular)return"top"==ta.circularLinkType?1:-1;if(qa.circular&&ta.circular)return qa.circularLinkType===ta.circularLinkType&&"top"==qa.circularLinkType?qa.target.column===ta.target.column?qa.target.y1-ta.target.y1:ta.target.column-qa.target.column:qa.circularLinkType===ta.circularLinkType&&"bottom"==qa.circularLinkType?
qa.target.column===ta.target.column?ta.target.y1-qa.target.y1:qa.target.column-ta.target.column:"top"==qa.circularLinkType?-1:1});var na=ra.y0;la.forEach(function(qa){qa.y0=na+qa.width/2;na+=qa.width});la.forEach(function(qa,ta){if("bottom"==qa.circularLinkType){ta+=1;var za=0;for(ta;ta<ka;ta++)za+=la[ta].width;qa.y0=ra.y1-za-qa.width/2}})})}function U(ma,ia,oa){ma.nodes.forEach(function(xa){var ra=ma.links.filter(function(na){return oa(na.target)==oa(xa)}),la=ra.length;1<la&&ra.sort(function(na,
qa){if(!na.circular&&!qa.circular)if(na.source.column!=qa.source.column&&ha(na)==ha(qa)){if(qa.source.column<na.source.column)return qa=Q(qa,na),na.y0-qa;if(na.source.column<qa.source.column)return Q(na,qa)-qa.y0}else return na.y0-qa.y0;if(na.circular&&!qa.circular)return"top"==na.circularLinkType?-1:1;if(qa.circular&&!na.circular)return"top"==qa.circularLinkType?1:-1;if(na.circular&&qa.circular)return na.circularLinkType===qa.circularLinkType&&"top"==na.circularLinkType?na.source.column===qa.source.column?
na.source.y1-qa.source.y1:na.source.column-qa.source.column:na.circularLinkType===qa.circularLinkType&&"bottom"==na.circularLinkType?na.source.column===qa.source.column?na.source.y1-qa.source.y1:qa.source.column-na.source.column:"top"==na.circularLinkType?-1:1});var ka=xa.y0;ra.forEach(function(na){na.y1=ka+na.width/2;ka+=na.width});ra.forEach(function(na,qa){if("bottom"==na.circularLinkType){qa+=1;var ta=0;for(qa;qa<la;qa++)ta+=ra[qa].width;na.y1=xa.y1-ta-na.width/2}})})}function ha(ma){return 0<
ma.y0-ma.y1?"up":"down"}function Y(ma,ia){return ia(ma.source)==ia(ma.target)}function ba(ma,ia,oa){var xa=ma.nodes;ma=ma.links;var ra=!1,la=!1;ma.forEach(function(ta){"top"==ta.circularLinkType?ra=!0:"bottom"==ta.circularLinkType&&(la=!0)});if(0==ra||0==la){var ka=n.min(xa,function(ta){return ta.y0}),na=n.max(xa,function(ta){return ta.y1}),qa=(oa-ia)/(na-ka);xa.forEach(function(ta){var za=(ta.y1-ta.y0)*qa;ta.y0=(ta.y0-ka)*qa;ta.y1=ta.y0+za});ma.forEach(function(ta){ta.y0=(ta.y0-ka)*qa;ta.y1=(ta.y1-
ka)*qa;ta.width*=qa})}}a=a&&a.hasOwnProperty("default")?a["default"]:a;var ja="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(ma){return typeof ma}:function(ma){return ma&&"function"===typeof Symbol&&ma.constructor===Symbol&&ma!==Symbol.prototype?"symbol":typeof ma};p.sankeyCircular=function(){function ma(){var rb={nodes:jb.apply(null,arguments),links:vb.apply(null,arguments)};ia(rb);A(rb,gb,wb);oa(rb);la(rb);D(rb,gb);ka(rb,qb,gb);na(rb);for(var Ab=0;4>Ab;Ab++)T(rb,Ia,gb),U(rb,
Ia,gb),ca(rb,ta,Ia,gb),T(rb,Ia,gb),U(rb,Ia,gb);ba(rb,ta,Ia);J(rb,Bb,Ia,gb);return rb}function ia(rb){rb.nodes.forEach(function(Ma,La){Ma.index=La;Ma.sourceLinks=[];Ma.targetLinks=[]});var Ab=k.map(rb.nodes,gb);rb.links.forEach(function(Ma,La){Ma.index=La;La=Ma.source;var ya=Ma.target;"object"!==("undefined"===typeof La?"undefined":ja(La))&&(La=Ma.source=B(Ab,La));"object"!==("undefined"===typeof ya?"undefined":ja(ya))&&(ya=Ma.target=B(Ab,ya));La.sourceLinks.push(Ma);ya.targetLinks.push(Ma)});return rb}
function oa(rb){rb.nodes.forEach(function(Ab){Ab.partOfCycle=!1;Ab.value=Math.max(n.sum(Ab.sourceLinks,e),n.sum(Ab.targetLinks,e));Ab.sourceLinks.forEach(function(Ma){Ma.circular&&(Ab.partOfCycle=!0,Ab.circularLinkType=Ma.circularLinkType)});Ab.targetLinks.forEach(function(Ma){Ma.circular&&(Ab.partOfCycle=!0,Ab.circularLinkType=Ma.circularLinkType)})})}function xa(rb){var Ab=0,Ma=0,La=0,ya=0,Aa=n.max(rb.nodes,function(Ka){return Ka.column});rb.links.forEach(function(Ka){Ka.circular&&("top"==Ka.circularLinkType?
Ab+=Ka.width:Ma+=Ka.width,0==Ka.target.column&&(ya+=Ka.width),Ka.source.column==Aa&&(La+=Ka.width))});Ab=0<Ab?Ab+25+10:Ab;Ma=0<Ma?Ma+25+10:Ma;La=0<La?La+25+10:La;ya=0<ya?ya+25+10:ya;return{top:Ab,bottom:Ma,left:ya,right:La}}function ra(rb,Ab){var Ma=n.max(rb.nodes,function(Aa){return Aa.column}),La=za-qa,ya=Ia-ta;La/=La+Ab.right+Ab.left;ya/=ya+Ab.top+Ab.bottom;qa=qa*La+Ab.left;za=0==Ab.right?za:za*La;ta=ta*ya+Ab.top;Ia*=ya;rb.nodes.forEach(function(Aa){Aa.x0=qa+(za-qa-Xa)/Ma*Aa.column;Aa.x1=Aa.x0+
Xa});return ya}function la(rb){var Ab;var Ma=rb.nodes;var La=[];for(Ab=0;Ma.length;++Ab,Ma=La,La=[])Ma.forEach(function(ya){ya.depth=Ab;ya.sourceLinks.forEach(function(Aa){0>La.indexOf(Aa.target)&&!Aa.circular&&La.push(Aa.target)})});Ma=rb.nodes;La=[];for(Ab=0;Ma.length;++Ab,Ma=La,La=[])Ma.forEach(function(ya){ya.height=Ab;ya.targetLinks.forEach(function(Aa){0>La.indexOf(Aa.source)&&!Aa.circular&&La.push(Aa.source)})});rb.nodes.forEach(function(ya){ya.column=Math.floor(sb.call(null,ya,Ab))})}function ka(rb,
Ab,Ma){function La(Ta,bb){var cb=Aa.length;Aa.forEach(function(Eb){var Pb=Eb.length,fc=Eb[0].depth;Eb.forEach(function(pb){if((pb.sourceLinks.length||pb.targetLinks.length)&&!(pb.partOfCycle&&0<v(pb,bb)))if(0==fc&&1==Pb){var Db=pb.y1-pb.y0;pb.y0=Ia/2-Db/2;pb.y1=Ia/2+Db/2}else if(fc==cb-1&&1==Pb)Db=pb.y1-pb.y0,pb.y0=Ia/2-Db/2,pb.y1=Ia/2+Db/2;else{Db=n.mean(pb.sourceLinks,t);var Rb=n.mean(pb.targetLinks,q);Db=((Db&&Rb?(Db+Rb)/2:Db||Rb)-f(pb))*Ta;pb.y0+=Db;pb.y1+=Db}})})}function ya(){Aa.forEach(function(Ta){var bb=
ta,cb=Ta.length,Eb;Ta.sort(d);for(Eb=0;Eb<cb;++Eb){var Pb=Ta[Eb];var fc=bb-Pb.y0;0<fc&&(Pb.y0+=fc,Pb.y1+=fc);bb=Pb.y1+$a}fc=bb-$a-Ia;if(0<fc)for(bb=Pb.y0-=fc,Pb.y1-=fc,Eb=cb-2;0<=Eb;--Eb)Pb=Ta[Eb],fc=Pb.y1+$a-bb,0<fc&&(Pb.y0-=fc,Pb.y1-=fc),bb=Pb.y0})}var Aa=k.nest().key(function(Ta){return Ta.column}).sortKeys(n.ascending).entries(rb.nodes).map(function(Ta){return Ta.values});(function(Ta){if(ub){var bb=Infinity;Aa.forEach(function(fc){fc=Ia*ub/(fc.length+1);bb=fc<bb?fc:bb});$a=bb}var cb=n.min(Aa,
function(fc){return(Ia-ta-(fc.length-1)*$a)/n.sum(fc,e)});cb*=.3;rb.links.forEach(function(fc){fc.width=fc.value*cb});var Eb=xa(rb),Pb=ra(rb,Eb);cb*=Pb;rb.links.forEach(function(fc){fc.width=fc.value*cb});Aa.forEach(function(fc){var pb=fc.length;fc.forEach(function(Db,Rb){Db.depth==Aa.length-1&&1==pb?Db.y0=Ia/2-Db.value*cb:0==Db.depth&&1==pb?Db.y0=Ia/2-Db.value*cb:Db.partOfCycle?0==v(Db,Ta)?Db.y0=Ia/2+Rb:Db.y0="top"==Db.circularLinkType?ta+Rb:Ia-Db.value*cb-Rb:Db.y0=0==Eb.top||0==Eb.bottom?(Ia-ta)/
pb*Rb:(Ia-ta)/2-pb/2+Rb;Db.y1=Db.y0+Db.value*cb})})})(Ma);ya();for(var Ka=1;0<Ab;--Ab)La(Ka*=.99,Ma),ya()}function na(rb){rb.nodes.forEach(function(Ab){Ab.sourceLinks.sort(c);Ab.targetLinks.sort(l)});rb.nodes.forEach(function(Ab){var Ma=Ab.y0,La=Ma,ya=Ab.y1,Aa=ya;Ab.sourceLinks.forEach(function(Ka){Ka.circular?(Ka.y0=ya-Ka.width/2,ya-=Ka.width):(Ka.y0=Ma+Ka.width/2,Ma+=Ka.width)});Ab.targetLinks.forEach(function(Ka){Ka.circular?(Ka.y1=Aa-Ka.width/2,Aa-=Ka.width):(Ka.y1=La+Ka.width/2,La+=Ka.width)})})}
var qa=0,ta=0,za=1,Ia=1,Xa=24,$a,gb=w,sb=h,jb=x,vb=z,qb=32,Bb=2,ub,wb=null;ma.nodeId=function(rb){return arguments.length?(gb="function"===typeof rb?rb:r(rb),ma):gb};ma.nodeAlign=function(rb){return arguments.length?(sb="function"===typeof rb?rb:r(rb),ma):sb};ma.nodeWidth=function(rb){return arguments.length?(Xa=+rb,ma):Xa};ma.nodePadding=function(rb){return arguments.length?($a=+rb,ma):$a};ma.nodes=function(rb){return arguments.length?(jb="function"===typeof rb?rb:r(rb),ma):jb};ma.links=function(rb){return arguments.length?
(vb="function"===typeof rb?rb:r(rb),ma):vb};ma.size=function(rb){return arguments.length?(qa=ta=0,za=+rb[0],Ia=+rb[1],ma):[za-qa,Ia-ta]};ma.extent=function(rb){return arguments.length?(qa=+rb[0][0],za=+rb[1][0],ta=+rb[0][1],Ia=+rb[1][1],ma):[[qa,ta],[za,Ia]]};ma.iterations=function(rb){return arguments.length?(qb=+rb,ma):qb};ma.circularLinkGap=function(rb){return arguments.length?(Bb=+rb,ma):Bb};ma.nodePaddingRatio=function(rb){return arguments.length?(ub=+rb,ma):ub};ma.sortNodes=function(rb){return arguments.length?
(wb=rb,ma):wb};ma.update=function(rb){D(rb,gb);na(rb);rb.links.forEach(function(Ab){Ab.circular&&(Ab.circularLinkType=Ab.y0+Ab.y1<Ia?"top":"bottom",Ab.source.circularLinkType=Ab.circularLinkType,Ab.target.circularLinkType=Ab.circularLinkType)});T(rb,Ia,gb,!1);U(rb,Ia,gb);J(rb,Bb,Ia,gb);return rb};return ma};p.sankeyCenter=function(ma){return ma.targetLinks.length?ma.depth:ma.sourceLinks.length?n.min(ma.sourceLinks,g)-1:0};p.sankeyLeft=function(ma){return ma.depth};p.sankeyRight=function(ma,ia){return ia-
1-ma.height};p.sankeyJustify=h;Object.defineProperty(p,"__esModule",{value:!0})})},{"d3-array":162,"d3-collection":163,"d3-shape":174,"elementary-circuits-directed-graph":188}],57:[function(b,N,G){(function(p,n){"object"===typeof G&&"undefined"!==typeof N?n(G,b("d3-array"),b("d3-collection"),b("d3-shape")):n(p.d3=p.d3||{},p.d3,p.d3,p.d3)})(this,function(p,n,k,m){function a(D){return D.target.depth}function g(D,C){return D.sourceLinks.length?D.depth:C-1}function h(D){return function(){return D}}function r(D,
C){return c(D.source,C.source)||D.index-C.index}function l(D,C){return c(D.target,C.target)||D.index-C.index}function c(D,C){return D.y0-C.y0}function d(D){return D.value}function e(D){return(D.y0+D.y1)/2}function f(D){return e(D.source)*D.value}function q(D){return e(D.target)*D.value}function t(D){return D.index}function w(D){return D.nodes}function x(D){return D.links}function z(D,C){D=D.get(C);if(!D)throw Error("missing: "+C);return D}function B(D){return[D.source.x1,D.y0]}function A(D){return[D.target.x0,
D.y1]}p.sankey=function(){function D(){var ha={nodes:ca.apply(null,arguments),links:W.apply(null,arguments)};C(ha);v(ha);y(ha);F(ha,T);J(ha);return ha}function C(ha){ha.nodes.forEach(function(ba,ja){ba.index=ja;ba.sourceLinks=[];ba.targetLinks=[]});var Y=k.map(ha.nodes,Q);ha.links.forEach(function(ba,ja){ba.index=ja;ja=ba.source;var ma=ba.target;"object"!==typeof ja&&(ja=ba.source=z(Y,ja));"object"!==typeof ma&&(ma=ba.target=z(Y,ma));ja.sourceLinks.push(ba);ma.targetLinks.push(ba)})}function v(ha){ha.nodes.forEach(function(Y){Y.value=
Math.max(n.sum(Y.sourceLinks,d),n.sum(Y.targetLinks,d))})}function y(ha){var Y;var ba=ha.nodes;var ja=[];for(Y=0;ba.length;++Y,ba=ja,ja=[])ba.forEach(function(ia){ia.depth=Y;ia.sourceLinks.forEach(function(oa){0>ja.indexOf(oa.target)&&ja.push(oa.target)})});ba=ha.nodes;ja=[];for(Y=0;ba.length;++Y,ba=ja,ja=[])ba.forEach(function(ia){ia.height=Y;ia.targetLinks.forEach(function(oa){0>ja.indexOf(oa.source)&&ja.push(oa.source)})});var ma=(I-K-H)/(Y-1);ha.nodes.forEach(function(ia){ia.x1=(ia.x0=K+Math.max(0,
Math.min(Y-1,Math.floor(Z.call(null,ia,Y))))*ma)+H})}function F(ha){function Y(xa){ma.forEach(function(ra){ra.forEach(function(la){if(la.targetLinks.length){var ka=(n.sum(la.targetLinks,f)/n.sum(la.targetLinks,d)-e(la))*xa;la.y0+=ka;la.y1+=ka}})})}function ba(xa){ma.slice().reverse().forEach(function(ra){ra.forEach(function(la){if(la.sourceLinks.length){var ka=(n.sum(la.sourceLinks,q)/n.sum(la.sourceLinks,d)-e(la))*xa;la.y0+=ka;la.y1+=ka}})})}function ja(){ma.forEach(function(xa){var ra=O,la=xa.length,
ka;xa.sort(c);for(ka=0;ka<la;++ka){var na=xa[ka];var qa=ra-na.y0;0<qa&&(na.y0+=qa,na.y1+=qa);ra=na.y1+M}qa=ra-M-L;if(0<qa)for(ra=na.y0-=qa,na.y1-=qa,ka=la-2;0<=ka;--ka)na=xa[ka],qa=na.y1+M-ra,0<qa&&(na.y0-=qa,na.y1-=qa),ra=na.y0})}var ma=k.nest().key(function(xa){return xa.x0}).sortKeys(n.ascending).entries(ha.nodes).map(function(xa){return xa.values});(function(){var xa=n.max(ma,function(la){return la.length});xa=U*(L-O)/(xa-1);M>xa&&(M=xa);var ra=n.min(ma,function(la){return(L-O-(la.length-1)*M)/
n.sum(la,d)});ma.forEach(function(la){la.forEach(function(ka,na){ka.y1=(ka.y0=na)+ka.value*ra})});ha.links.forEach(function(la){la.width=la.value*ra})})();ja();for(var ia=1,oa=T;0<oa;--oa)ba(ia*=.99),ja(),Y(ia),ja()}function J(ha){ha.nodes.forEach(function(Y){Y.sourceLinks.sort(l);Y.targetLinks.sort(r)});ha.nodes.forEach(function(Y){var ba=Y.y0,ja=ba;Y.sourceLinks.forEach(function(ma){ma.y0=ba+ma.width/2;ba+=ma.width});Y.targetLinks.forEach(function(ma){ma.y1=ja+ma.width/2;ja+=ma.width})})}var K=
0,O=0,I=1,L=1,H=24,M=8,Q=t,Z=g,ca=w,W=x,T=32,U=2/3;D.update=function(ha){J(ha);return ha};D.nodeId=function(ha){return arguments.length?(Q="function"===typeof ha?ha:h(ha),D):Q};D.nodeAlign=function(ha){return arguments.length?(Z="function"===typeof ha?ha:h(ha),D):Z};D.nodeWidth=function(ha){return arguments.length?(H=+ha,D):H};D.nodePadding=function(ha){return arguments.length?(M=+ha,D):M};D.nodes=function(ha){return arguments.length?(ca="function"===typeof ha?ha:h(ha),D):ca};D.links=function(ha){return arguments.length?
(W="function"===typeof ha?ha:h(ha),D):W};D.size=function(ha){return arguments.length?(K=O=0,I=+ha[0],L=+ha[1],D):[I-K,L-O]};D.extent=function(ha){return arguments.length?(K=+ha[0][0],I=+ha[1][0],O=+ha[0][1],L=+ha[1][1],D):[[K,O],[I,L]]};D.iterations=function(ha){return arguments.length?(T=+ha,D):T};return D};p.sankeyCenter=function(D){return D.targetLinks.length?D.depth:D.sourceLinks.length?n.min(D.sourceLinks,a)-1:0};p.sankeyLeft=function(D){return D.depth};p.sankeyRight=function(D,C){return C-1-
D.height};p.sankeyJustify=g;p.sankeyLinkHorizontal=function(){return m.linkHorizontal().source(B).target(A)};Object.defineProperty(p,"__esModule",{value:!0})})},{"d3-array":162,"d3-collection":163,"d3-shape":174}],58:[function(b,N,G){!function(){function p(da){return da&&(da.ownerDocument&&da.ownerDocument.defaultView||da.document&&da||da.defaultView)}function n(da,ua){return da<ua?-1:da>ua?1:da>=ua?0:NaN}function k(da){return null===da?NaN:+da}function m(da){return!isNaN(da)}function a(da){return{left:function(ua,
Ba,Fa,Na){3>arguments.length&&(Fa=0);4>arguments.length&&(Na=ua.length);for(;Fa<Na;){var Wa=Fa+Na>>>1;0>da(ua[Wa],Ba)?Fa=Wa+1:Na=Wa}return Fa},right:function(ua,Ba,Fa,Na){3>arguments.length&&(Fa=0);4>arguments.length&&(Na=ua.length);for(;Fa<Na;){var Wa=Fa+Na>>>1;0<da(ua[Wa],Ba)?Na=Wa:Fa=Wa+1}return Fa}}}function g(da){return da.length}function h(da,ua){for(var Ba in ua)Object.defineProperty(da.prototype,Ba,{value:ua[Ba],enumerable:!1})}function r(){this._=Object.create(null)}function l(da){return"__proto__"===
(da+="")||"\x00"===da[0]?"\x00"+da:da}function c(da){return"\x00"===(da+="")[0]?da.slice(1):da}function d(da){return l(da)in this._}function e(da){return(da=l(da))in this._&&delete this._[da]}function f(){var da=[],ua;for(ua in this._)da.push(c(ua));return da}function q(){var da=0,ua;for(ua in this._)++da;return da}function t(){for(var da in this._)return!1;return!0}function w(){this._=Object.create(null)}function x(da){return da}function z(da,ua,Ba){return function(){var Fa=Ba.apply(ua,arguments);
return Fa===ua?da:Fa}}function B(da,ua){if(ua in da)return ua;ua=ua.charAt(0).toUpperCase()+ua.slice(1);for(var Ba=0,Fa=Kd.length;Ba<Fa;++Ba){var Na=Kd[Ba]+ua;if(Na in da)return Na}}function A(){}function D(){}function C(da){function ua(){for(var Na=Ba,Wa=-1,ob=Na.length,hb;++Wa<ob;)(hb=Na[Wa].on)&&hb.apply(this,arguments);return da}var Ba=[],Fa=new r;ua.on=function(Na,Wa){var ob=Fa.get(Na),hb;if(2>arguments.length)return ob&&ob.on;ob&&(ob.on=null,Ba=Ba.slice(0,hb=Ba.indexOf(ob)).concat(Ba.slice(hb+
1)),Fa.remove(Na));Wa&&Ba.push(Fa.set(Na,{on:Wa}));return da};return ua}function v(){Qa.event.preventDefault()}function y(){for(var da=Qa.event,ua;ua=da.sourceEvent;)da=ua;return da}function F(da){for(var ua=new D,Ba=0,Fa=arguments.length;++Ba<Fa;)ua[arguments[Ba]]=C(ua);ua.of=function(Na,Wa){return function(ob){try{var hb=ob.sourceEvent=Qa.event;ob.target=da;Qa.event=ob;ua[ob.type].apply(Na,Wa)}finally{Qa.event=hb}}};return ua}function J(da){fe(da,le);return da}function K(da){return"function"===
typeof da?da:function(){return ae(da,this)}}function O(da){return"function"===typeof da?da:function(){return gf(da,this)}}function I(da,ua){function Ba(){this.removeAttribute(da)}function Fa(){this.removeAttributeNS(da.space,da.local)}function Na(){this.setAttribute(da,ua)}function Wa(){this.setAttributeNS(da.space,da.local,ua)}function ob(){var fb=ua.apply(this,arguments);null==fb?this.removeAttribute(da):this.setAttribute(da,fb)}function hb(){var fb=ua.apply(this,arguments);null==fb?this.removeAttributeNS(da.space,
da.local):this.setAttributeNS(da.space,da.local,fb)}da=Qa.ns.qualify(da);return null==ua?da.local?Fa:Ba:"function"===typeof ua?da.local?hb:ob:da.local?Wa:Na}function L(da){return new RegExp("(?:^|\\s+)"+Qa.requote(da)+"(?:\\s+|$)","g")}function H(da,ua){function Ba(){for(var Wa=-1;++Wa<Na;)da[Wa](this,ua)}function Fa(){for(var Wa=-1,ob=ua.apply(this,arguments);++Wa<Na;)da[Wa](this,ob)}da=(da+"").trim().split(/^|\s+/).map(M);var Na=da.length;return"function"===typeof ua?Fa:Ba}function M(da){var ua=
L(da);return function(Ba,Fa){if(Na=Ba.classList)return Fa?Na.add(da):Na.remove(da);var Na=Ba.getAttribute("class")||"";Fa?(ua.lastIndex=0,ua.test(Na)||Ba.setAttribute("class",(Na+" "+da).trim().replace(/\s+/g," "))):Ba.setAttribute("class",Na.replace(ua," ").trim().replace(/\s+/g," "))}}function Q(da,ua,Ba){function Fa(){this.style.removeProperty(da)}function Na(){this.style.setProperty(da,ua,Ba)}function Wa(){var ob=ua.apply(this,arguments);null==ob?this.style.removeProperty(da):this.style.setProperty(da,
ob,Ba)}return null==ua?Fa:"function"===typeof ua?Wa:Na}function Z(da,ua){function Ba(){delete this[da]}function Fa(){this[da]=ua}function Na(){var Wa=ua.apply(this,arguments);null==Wa?delete this[da]:this[da]=Wa}return null==ua?Ba:"function"===typeof ua?Na:Fa}function ca(da){function ua(){var Fa=this.ownerDocument,Na=this.namespaceURI;return"http://www.w3.org/1999/xhtml"===Na&&"http://www.w3.org/1999/xhtml"===Fa.documentElement.namespaceURI?Fa.createElement(da):Fa.createElementNS(Na,da)}function Ba(){return this.ownerDocument.createElementNS(da.space,
da.local)}return"function"===typeof da?da:(da=Qa.ns.qualify(da)).local?Ba:ua}function W(){var da=this.parentNode;da&&da.removeChild(this)}function T(da){return function(){return Te(this,da)}}function U(da){arguments.length||(da=n);return function(ua,Ba){return ua&&Ba?da(ua.__data__,Ba.__data__):!ua-!Ba}}function ha(da,ua){for(var Ba=0,Fa=da.length;Ba<Fa;Ba++)for(var Na=da[Ba],Wa=0,ob=Na.length,hb;Wa<ob;Wa++)(hb=Na[Wa])&&ua(hb,Wa,Ba);return da}function Y(da){fe(da,ge);return da}function ba(da){var ua,
Ba;return function(Fa,Na,Wa){Fa=da[Wa].update;var ob=Fa.length;Wa!=Ba&&(Ba=Wa,ua=0);for(Na>=ua&&(ua=Na+1);!(Na=Fa[ua])&&++ua<ob;);return Na}}function ja(da,ua,Ba){function Fa(){var Fb=this[ob];Fb&&(this.removeEventListener(da,Fb,Fb.$),delete this[ob])}function Na(){var Fb=fb(ua,bc(arguments));Fa.call(this);this.addEventListener(da,this[ob]=Fb,Fb.$=Ba);Fb._=ua}function Wa(){var Fb=new RegExp("^__on([^.]+)"+Qa.requote(da)+"$"),Tb,nc;for(nc in this)if(Tb=nc.match(Fb)){var kc=this[nc];this.removeEventListener(Tb[1],
kc,kc.$);delete this[nc]}}var ob="__on"+da,hb=da.indexOf("."),fb=ma;0<hb&&(da=da.slice(0,hb));var xb=Ge.get(da);xb&&(da=xb,fb=ia);return hb?ua?Na:Fa:ua?A:Wa}function ma(da,ua){return function(Ba){var Fa=Qa.event;Qa.event=Ba;ua[0]=this.__data__;try{da.apply(this,ua)}finally{Qa.event=Fa}}}function ia(da,ua){var Ba=ma(da,ua);return function(Fa){var Na=Fa.relatedTarget;Na&&(Na===this||Na.compareDocumentPosition(this)&8)||Ba.call(this,Fa)}}function oa(da){var ua=".dragsuppress-"+ ++Cf,Ba="click"+ua,Fa=
Qa.select(p(da)).on("touchmove"+ua,v).on("dragstart"+ua,v).on("selectstart"+ua,v);null==nf&&(nf="onselectstart"in da?!1:B(da.style,"userSelect"));if(nf){var Na=(da&&(da.ownerDocument||da.document||da).documentElement).style,Wa=Na[nf];Na[nf]="none"}return function(ob){Fa.on(ua,null);nf&&(Na[nf]=Wa);if(ob){var hb=function(){Fa.on(Ba,null)};Fa.on(Ba,function(){v();hb()},!0);setTimeout(hb,0)}}}function xa(da,ua){ua.changedTouches&&(ua=ua.changedTouches[0]);var Ba=da.ownerSVGElement||da;if(Ba.createSVGPoint){var Fa=
Ba.createSVGPoint();if(0>If&&(Ba=p(da),Ba.scrollX||Ba.scrollY)){Ba=Qa.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var Na=Ba[0][0].getScreenCTM();If=!(Na.f||Na.e);Ba.remove()}If?(Fa.x=ua.pageX,Fa.y=ua.pageY):(Fa.x=ua.clientX,Fa.y=ua.clientY);Fa=Fa.matrixTransform(da.getScreenCTM().inverse());return[Fa.x,Fa.y]}Fa=da.getBoundingClientRect();return[ua.clientX-Fa.left-da.clientLeft,ua.clientY-Fa.top-da.clientTop]}function ra(){return Qa.event.changedTouches[0].identifier}
function la(da,ua,Ba){return(ua[0]-da[0])*(Ba[1]-da[1])-(ua[1]-da[1])*(Ba[0]-da[0])}function ka(da){return 1<da?eg:-1>da?-eg:Math.asin(da)}function na(da){return((da=Math.exp(da))+1/da)/2}function qa(){}function ta(da,ua,Ba){return this instanceof ta?void(this.h=+da,this.s=+ua,this.l=+Ba):2>arguments.length?da instanceof ta?new ta(da.h,da.s,da.l):rb(""+da,Ab,ta):new ta(da,ua,Ba)}function za(da,ua,Ba){function Fa(ob){360<ob?ob-=360:0>ob&&(ob+=360);return 60>ob?Wa+(Na-Wa)*ob/60:180>ob?Na:240>ob?Wa+
(Na-Wa)*(240-ob)/60:Wa}da=isNaN(da)?0:0>(da%=360)?da+360:da;ua=isNaN(ua)?0:0>ua?0:1<ua?1:ua;Ba=0>Ba?0:1<Ba?1:Ba;var Na=.5>=Ba?Ba*(1+ua):Ba+ua-Ba*ua;var Wa=2*Ba-Na;return new Bb(Math.round(255*Fa(da+120)),Math.round(255*Fa(da)),Math.round(255*Fa(da-120)))}function Ia(da,ua,Ba){return this instanceof Ia?void(this.h=+da,this.c=+ua,this.l=+Ba):2>arguments.length?da instanceof Ia?new Ia(da.h,da.c,da.l):da instanceof $a?sb(da.l,da.a,da.b):sb((da=Ma((da=Qa.rgb(da)).r,da.g,da.b)).l,da.a,da.b):new Ia(da,ua,
Ba)}function Xa(da,ua,Ba){isNaN(da)&&(da=0);isNaN(ua)&&(ua=0);return new $a(Ba,Math.cos(da*=tg)*ua,Math.sin(da)*ua)}function $a(da,ua,Ba){return this instanceof $a?void(this.l=+da,this.a=+ua,this.b=+Ba):2>arguments.length?da instanceof $a?new $a(da.l,da.a,da.b):da instanceof Ia?Xa(da.h,da.c,da.l):Ma((da=Bb(da)).r,da.g,da.b):new $a(da,ua,Ba)}function gb(da,ua,Ba){da=(da+16)/116;Ba=da-Ba/200;ua=jb(da+ua/500)*uh;da=jb(da)*Ji;Ba=jb(Ba)*Vh;return new Bb(qb(3.2404542*ua-1.5371385*da-.4985314*Ba),qb(-.969266*
ua+1.8760108*da+.041556*Ba),qb(.0556434*ua-.2040259*da+1.0572252*Ba))}function sb(da,ua,Ba){return 0<da?new Ia(Math.atan2(Ba,ua)*Sf,Math.sqrt(ua*ua+Ba*Ba),da):new Ia(NaN,NaN,da)}function jb(da){return.206893034<da?da*da*da:(da-4/29)/7.787037}function vb(da){return.008856<da?Math.pow(da,1/3):7.787037*da+4/29}function qb(da){return Math.round(255*(.00304>=da?12.92*da:1.055*Math.pow(da,1/2.4)-.055))}function Bb(da,ua,Ba){return this instanceof Bb?void(this.r=~~da,this.g=~~ua,this.b=~~Ba):2>arguments.length?
da instanceof Bb?new Bb(da.r,da.g,da.b):rb(""+da,Bb,za):new Bb(da,ua,Ba)}function ub(da){return new Bb(da>>16,da>>8&255,da&255)+""}function wb(da){return 16>da?"0"+Math.max(0,da).toString(16):Math.min(255,da).toString(16)}function rb(da,ua,Ba){var Fa=0,Na=0,Wa=0,ob;if(ob=/([a-z]+)\((.*)\)/.exec(da=da.toLowerCase())){var hb=ob[2].split(",");switch(ob[1]){case "hsl":return Ba(parseFloat(hb[0]),parseFloat(hb[1])/100,parseFloat(hb[2])/100);case "rgb":return ua(ya(hb[0]),ya(hb[1]),ya(hb[2]))}}if(Ba=kg.get(da))return ua(Ba.r,
Ba.g,Ba.b);null==da||"#"!==da.charAt(0)||isNaN(Ba=parseInt(da.slice(1),16))||(4===da.length?(Fa=(Ba&3840)>>4,Fa|=Fa>>4,Na=Ba&240,Na|=Na>>4,Wa=Ba&15,Wa|=Wa<<4):7===da.length&&(Fa=(Ba&16711680)>>16,Na=(Ba&65280)>>8,Wa=Ba&255));return ua(Fa,Na,Wa)}function Ab(da,ua,Ba){var Fa=Math.min(da/=255,ua/=255,Ba/=255),Na=Math.max(da,ua,Ba),Wa=Na-Fa,ob=(Na+Fa)/2;Wa?(Fa=.5>ob?Wa/(Na+Fa):Wa/(2-Na-Fa),da=60*(da==Na?(ua-Ba)/Wa+(ua<Ba?6:0):ua==Na?(Ba-da)/Wa+2:(da-ua)/Wa+4)):(da=NaN,Fa=0<ob&&1>ob?0:da);return new ta(da,
Fa,ob)}function Ma(da,ua,Ba){da=La(da);ua=La(ua);Ba=La(Ba);var Fa=vb((.4124564*da+.3575761*ua+.1804375*Ba)/uh),Na=vb((.2126729*da+.7151522*ua+.072175*Ba)/Ji);da=vb((.0193339*da+.119192*ua+.9503041*Ba)/Vh);return $a(116*Na-16,500*(Fa-Na),200*(Na-da))}function La(da){return.04045>=(da/=255)?da/12.92:Math.pow((da+.055)/1.055,2.4)}function ya(da){var ua=parseFloat(da);return"%"===da.charAt(da.length-1)?Math.round(2.55*ua):ua}function Aa(da){return"function"===typeof da?da:function(){return da}}function Ka(da){return function(ua,
Ba,Fa){2===arguments.length&&"function"===typeof Ba&&(Fa=Ba,Ba=null);return Ta(ua,Ba,da,Fa)}}function Ta(da,ua,Ba,Fa){function Na(){var Fb=fb.status,Tb;if(Tb=!Fb)Tb=(Tb=fb.responseType)&&"text"!==Tb?fb.response:fb.responseText;if(Tb||200<=Fb&&300>Fb||304===Fb){try{var nc=Ba.call(Wa,fb)}catch(kc){ob.error.call(Wa,kc);return}ob.load.call(Wa,nc)}else ob.error.call(Wa,fb)}var Wa={},ob=Qa.dispatch("beforesend","progress","load","error"),hb={},fb=new XMLHttpRequest,xb=null;!self.XDomainRequest||"withCredentials"in
fb||!/^(http(s)?:)?\/\//.test(da)||(fb=new XDomainRequest);"onload"in fb?fb.onload=fb.onerror=Na:fb.onreadystatechange=function(){3<fb.readyState&&Na()};fb.onprogress=function(Fb){var Tb=Qa.event;Qa.event=Fb;try{ob.progress.call(Wa,fb)}finally{Qa.event=Tb}};Wa.header=function(Fb,Tb){Fb=(Fb+"").toLowerCase();if(2>arguments.length)return hb[Fb];null==Tb?delete hb[Fb]:hb[Fb]=Tb+"";return Wa};Wa.mimeType=function(Fb){if(!arguments.length)return ua;ua=null==Fb?null:Fb+"";return Wa};Wa.responseType=function(Fb){if(!arguments.length)return xb;
xb=Fb;return Wa};Wa.response=function(Fb){Ba=Fb;return Wa};["get","post"].forEach(function(Fb){Wa[Fb]=function(){return Wa.send.apply(Wa,[Fb].concat(bc(arguments)))}});Wa.send=function(Fb,Tb,nc){2===arguments.length&&"function"===typeof Tb&&(nc=Tb,Tb=null);fb.open(Fb,da,!0);null==ua||"accept"in hb||(hb.accept=ua+",*/*");if(fb.setRequestHeader)for(var kc in hb)fb.setRequestHeader(kc,hb[kc]);null!=ua&&fb.overrideMimeType&&fb.overrideMimeType(ua);null!=xb&&(fb.responseType=xb);if(null!=nc)Wa.on("error",
nc).on("load",function(Cc){nc(null,Cc)});ob.beforesend.call(Wa,fb);fb.send(null==Tb?null:Tb);return Wa};Wa.abort=function(){fb.abort();return Wa};Qa.rebind(Wa,ob,"on");return null==Fa?Wa:Wa.get(bb(Fa))}function bb(da){return 1===da.length?function(ua,Ba){da(null==ua?Ba:null)}:da}function cb(da,ua,Ba){var Fa=arguments.length;2>Fa&&(ua=0);3>Fa&&(Ba=Date.now());Fa={c:da,t:Ba+ua,n:null};Rg?Rg.n=Fa:ci=Fa;Rg=Fa;di||(Mh=clearTimeout(Mh),di=1,ri(Eb));return Fa}function Eb(){var da=Pb();da=fc()-da;24<da?(isFinite(da)&&
(clearTimeout(Mh),Mh=setTimeout(Eb,da)),di=0):(di=1,ri(Eb))}function Pb(){for(var da=Date.now(),ua=ci;ua;)da>=ua.t&&ua.c(da-ua.t)&&(ua.c=null),ua=ua.n;return da}function fc(){for(var da,ua=ci,Ba=Infinity;ua;)ua.c?(ua.t<Ba&&(Ba=ua.t),ua=(da=ua).n):ua=da?da.n=ua.n:ci=ua.n;Rg=da;return Ba}function pb(da){return da[0]}function Db(da){return da[1]}function Rb(da){for(var ua=da.length,Ba=[0,1],Fa=2,Na=2;Na<ua;Na++){for(;1<Fa&&0>=la(da[Ba[Fa-2]],da[Ba[Fa-1]],da[Na]);)--Fa;Ba[Fa++]=Na}return Ba.slice(0,Fa)}
function xc(da,ua){return da[0]-ua[0]||da[1]-ua[1]}function Ic(da,ua,Ba){return(Ba[0]-ua[0])*(da[1]-ua[1])<(Ba[1]-ua[1])*(da[0]-ua[0])}function Ja(da,ua,Ba,Fa){var Na=da[0],Wa=Ba[0],ob=ua[0]-Na,hb=Fa[0]-Wa;da=da[1];Ba=Ba[1];ua=ua[1]-da;Fa=Fa[1]-Ba;Wa=(hb*(da-Ba)-Fa*(Na-Wa))/(Fa*ob-hb*ua);return[Na+Wa*ob,da+Wa*ua]}function Pa(da){var ua=da[0];da=da[da.length-1];return!(ua[0]-da[0]||ua[1]-da[1])}function db(){zc(this);this.edge=this.site=this.circle=null}function Jb(da){var ua=Dg.pop()||new db;ua.site=
da;return ua}function Gb(da){dc(da);Ue.remove(da);Dg.push(da);zc(da)}function cc(da,ua){var Ba=da.site,Fa=Ba.x,Na=Ba.y,Wa=Na-ua;if(!Wa)return Fa;da=da.P;if(!da)return-Infinity;Ba=da.site;da=Ba.x;Ba=Ba.y;ua=Ba-ua;if(!ua)return da;var ob=da-Fa,hb=1/Wa-1/ua,fb=ob/ua;return hb?(-fb+Math.sqrt(fb*fb-2*hb*(ob*ob/(-2*ua)-Ba+ua/2+Na-Wa/2)))/hb+Fa:(Fa+da)/2}function uc(da){this.site=da;this.edges=[]}function fd(da,ua){return ua.angle-da.angle}function kb(){zc(this);this.x=this.y=this.arc=this.site=this.cy=
null}function Qb(da){var ua=da.P,Ba=da.N;if(ua&&Ba){var Fa=ua.site;ua=da.site;var Na=Ba.site;if(Fa!==Na){Ba=ua.x;var Wa=ua.y,ob=Fa.x-Ba,hb=Fa.y-Wa;Fa=Na.x-Ba;Na=Na.y-Wa;var fb=2*(ob*Na-hb*Fa);if(!(-1E-12<=fb)){var xb=ob*ob+hb*hb,Fb=Fa*Fa+Na*Na;hb=(Na*xb-hb*Fb)/fb;ob=(ob*Fb-Fa*xb)/fb;Na=ob+Wa;Wa=si.pop()||new kb;Wa.arc=da;Wa.site=ua;Wa.x=hb+Ba;Wa.y=Na+Math.sqrt(hb*hb+ob*ob);Wa.cy=Na;da.circle=Wa;da=null;for(ua=ti._;ua;)if(Wa.y<ua.y||Wa.y===ua.y&&Wa.x<=ua.x)if(ua.L)ua=ua.L;else{da=ua.P;break}else if(ua.R)ua=
ua.R;else{da=ua;break}ti.insert(da,Wa);da||(Sg=Wa)}}}}function dc(da){var ua=da.circle;ua&&(ua.P||(Sg=ua.N),ti.remove(ua),si.push(ua),zc(ua),da.circle=null)}function Ec(da,ua,Ba,Fa){return function(Na){var Wa=Na.a,ob=Na.b,hb=Wa.x;Wa=Wa.y;var fb=0,xb=1,Fb=ob.x-hb;ob=ob.y-Wa;var Tb=da-hb;if(Fb||!(0<Tb)){Tb/=Fb;if(0>Fb){if(Tb<fb)return;Tb<xb&&(xb=Tb)}else if(0<Fb){if(Tb>xb)return;Tb>fb&&(fb=Tb)}Tb=Ba-hb;if(Fb||!(0>Tb)){Tb/=Fb;if(0>Fb){if(Tb>xb)return;Tb>fb&&(fb=Tb)}else if(0<Fb){if(Tb<fb)return;Tb<xb&&
(xb=Tb)}Tb=ua-Wa;if(ob||!(0<Tb)){Tb/=ob;if(0>ob){if(Tb<fb)return;Tb<xb&&(xb=Tb)}else if(0<ob){if(Tb>xb)return;Tb>fb&&(fb=Tb)}Tb=Fa-Wa;if(ob||!(0>Tb)){Tb/=ob;if(0>ob){if(Tb>xb)return;Tb>fb&&(fb=Tb)}else if(0<ob){if(Tb<fb)return;Tb<xb&&(xb=Tb)}0<fb&&(Na.a={x:hb+fb*Fb,y:Wa+fb*ob});1>xb&&(Na.b={x:hb+xb*Fb,y:Wa+xb*ob});return Na}}}}}}function Qc(da,ua){var Ba=da.b;if(Ba)return!0;var Fa=da.a;Ba=ua[0][0];var Na=ua[1][0],Wa=ua[0][1];ua=ua[1][1];var ob=da.l,hb=da.r,fb=ob.x;ob=ob.y;var xb=hb.x;hb=hb.y;var Fb=
(fb+xb)/2;if(hb===ob){if(Fb<Ba||Fb>=Na)return;if(fb>xb){if(!Fa)Fa={x:Fb,y:Wa};else if(Fa.y>=ua)return;Ba={x:Fb,y:ua}}else{if(!Fa)Fa={x:Fb,y:ua};else if(Fa.y<Wa)return;Ba={x:Fb,y:Wa}}}else{var Tb=(fb-xb)/(hb-ob);Fb=(ob+hb)/2-Tb*Fb;if(-1>Tb||1<Tb)if(fb>xb){if(!Fa)Fa={x:(Wa-Fb)/Tb,y:Wa};else if(Fa.y>=ua)return;Ba={x:(ua-Fb)/Tb,y:ua}}else{if(!Fa)Fa={x:(ua-Fb)/Tb,y:ua};else if(Fa.y<Wa)return;Ba={x:(Wa-Fb)/Tb,y:Wa}}else if(ob<hb){if(!Fa)Fa={x:Ba,y:Tb*Ba+Fb};else if(Fa.x>=Na)return;Ba={x:Na,y:Tb*Na+Fb}}else{if(!Fa)Fa=
{x:Na,y:Tb*Na+Fb};else if(Fa.x<Ba)return;Ba={x:Ba,y:Tb*Ba+Fb}}}da.a=Fa;da.b=Ba;return!0}function Tc(da,ua){this.l=da;this.r=ua;this.a=this.b=null}function tb(da,ua,Ba,Fa){var Na=new Tc(da,ua);ui.push(Na);Ba&&Ib(Na,da,ua,Ba);Fa&&Ib(Na,ua,da,Fa);zg[da.i].edges.push(new sc(Na,da,ua));zg[ua.i].edges.push(new sc(Na,ua,da));return Na}function Ib(da,ua,Ba,Fa){da.a||da.b?da.l===Ba?da.b=Fa:da.a=Fa:(da.a=Fa,da.l=ua,da.r=Ba)}function sc(da,ua,Ba){var Fa=da.a,Na=da.b;this.edge=da;this.site=ua;this.angle=Ba?Math.atan2(Ba.y-
ua.y,Ba.x-ua.x):da.l===ua?Math.atan2(Na.x-Fa.x,Fa.y-Na.y):Math.atan2(Fa.x-Na.x,Na.y-Fa.y)}function pc(){this._=null}function zc(da){da.U=da.C=da.L=da.R=da.P=da.N=null}function Wb(da,ua){var Ba=ua.R,Fa=ua.U;Fa?Fa.L===ua?Fa.L=Ba:Fa.R=Ba:da._=Ba;Ba.U=Fa;ua.U=Ba;ua.R=Ba.L;ua.R&&(ua.R.U=ua);Ba.L=ua}function Ub(da,ua){var Ba=ua.L,Fa=ua.U;Fa?Fa.L===ua?Fa.L=Ba:Fa.R=Ba:da._=Ba;Ba.U=Fa;ua.U=Ba;ua.L=Ba.R;ua.L&&(ua.L.U=ua);Ba.R=ua}function yb(da){for(;da.L;)da=da.L;return da}function ac(da,ua){var Ba=da.sort(Vb).pop(),
Fa;ui=[];zg=Array(da.length);Ue=new pc;for(ti=new pc;;){var Na=Sg;if(Ba&&(!Na||Ba.y<Na.y||Ba.y===Na.y&&Ba.x<Na.x)){if(Ba.x!==Fa||Ba.y!==Wa){zg[Ba.i]=new uc(Ba);var Wa=Fa=void 0;Na=Ba;for(var ob=Na.x,hb=Na.y,fb=Ue._;fb;){var xb=cc(fb,hb)-ob;if(1E-6<xb)fb=fb.L;else{var Fb=fb;var Tb=hb;var nc=Fb.N;nc?Tb=cc(nc,Tb):(Fb=Fb.site,Tb=Fb.y===Tb?Fb.x:Infinity);Tb=ob-Tb;if(1E-6<Tb){if(!fb.R){Wa=fb;break}fb=fb.R}else{-1E-6<xb?(Wa=fb.P,Fa=fb):-1E-6<Tb?(Wa=fb,Fa=fb.N):Wa=Fa=fb;break}}}xb=Jb(Na);Ue.insert(Wa,xb);
if(Wa||Fa)if(Wa===Fa)dc(Wa),Fa=Jb(Wa.site),Ue.insert(xb,Fa),xb.edge=Fa.edge=tb(Wa.site,xb.site),Qb(Wa),Qb(Fa);else if(Fa){dc(Wa);dc(Fa);ob=Wa.site;fb=ob.x;Tb=ob.y;Fb=Na.x-fb;nc=Na.y-Tb;hb=Fa.site;var kc=hb.x-fb,Cc=hb.y-Tb,Oc=2*(Fb*Cc-nc*kc),Gc=Fb*Fb+nc*nc,Yc=kc*kc+Cc*Cc;fb={x:(Cc*Gc-nc*Yc)/Oc+fb,y:(Fb*Yc-kc*Gc)/Oc+Tb};Ib(Fa.edge,ob,hb,fb);xb.edge=tb(ob,Na,null,fb);Fa.edge=tb(Na,hb,null,fb);Qb(Wa);Qb(Fa)}else xb.edge=tb(Wa.site,xb.site);Fa=Ba.x;Wa=Ba.y}Ba=da.pop()}else if(Na){hb=Na.arc;Na=hb.circle;
ob=Na.x;fb=Na.cy;Na={x:ob,y:fb};Fb=hb.P;Tb=hb.N;xb=[hb];Gb(hb);for(hb=Fb;hb.circle&&1E-6>xd(ob-hb.circle.x)&&1E-6>xd(fb-hb.circle.cy);)Fb=hb.P,xb.unshift(hb),Gb(hb),hb=Fb;xb.unshift(hb);dc(hb);for(Fb=Tb;Fb.circle&&1E-6>xd(ob-Fb.circle.x)&&1E-6>xd(fb-Fb.circle.cy);)Tb=Fb.N,xb.push(Fb),Gb(Fb),Fb=Tb;xb.push(Fb);dc(Fb);fb=xb.length;for(ob=1;ob<fb;++ob)Fb=xb[ob],hb=xb[ob-1],Ib(Fb.edge,hb.site,Fb.site,Na);hb=xb[0];Fb=xb[fb-1];Fb.edge=tb(hb.site,Fb.site,null,Na);Qb(hb);Qb(Fb)}else break}if(ua){da=ui;Ba=
Ec(ua[0][0],ua[0][1],ua[1][0],ua[1][1]);for(Fa=da.length;Fa--;)if(Wa=da[Fa],!Qc(Wa,ua)||!Ba(Wa)||1E-6>xd(Wa.a.x-Wa.b.x)&&1E-6>xd(Wa.a.y-Wa.b.y))Wa.a=Wa.b=null,da.splice(Fa,1);da=ua[0][0];Ba=ua[1][0];Fa=ua[0][1];ua=ua[1][1];Wa=zg;for(Na=Wa.length;Na--;)if((xb=Wa[Na])&&xb.prepare())for(hb=xb.edges,fb=hb.length,ob=0;ob<fb;)if(Gc=hb[ob].end(),Cc=Gc.x,Oc=Gc.y,Tb=hb[++ob%fb].start(),kc=Tb.x,Yc=Tb.y,1E-6<xd(Cc-kc)||1E-6<xd(Oc-Yc))Tb=hb,Fb=Tb.splice,nc=ob,kc=1E-6>xd(Cc-da)&&1E-6<ua-Oc?{x:da,y:1E-6>xd(kc-
da)?Yc:ua}:1E-6>xd(Oc-ua)&&1E-6<Ba-Cc?{x:1E-6>xd(Yc-ua)?kc:Ba,y:ua}:1E-6>xd(Cc-Ba)&&1E-6<Oc-Fa?{x:Ba,y:1E-6>xd(kc-Ba)?Yc:Fa}:1E-6>xd(Oc-Fa)&&1E-6<Cc-da?{x:1E-6>xd(Yc-Fa)?kc:da,y:Fa}:null,Cc=new Tc(xb.site,null),Cc.a=Gc,Cc.b=kc,ui.push(Cc),Fb.call(Tb,nc,0,new sc(Cc,xb.site,null)),++fb}ua={cells:zg,edges:ui};Ue=ti=ui=zg=null;return ua}function Vb(da,ua){return ua.y-da.y||ua.x-da.x}function mc(da){return da.x}function tc(da){return da.y}function Uc(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}
function kd(da,ua,Ba,Fa,Na,Wa){if(!da(ua,Ba,Fa,Na,Wa)){var ob=.5*(Ba+Na),hb=.5*(Fa+Wa);ua=ua.nodes;ua[0]&&kd(da,ua[0],Ba,Fa,ob,hb);ua[1]&&kd(da,ua[1],ob,Fa,Na,hb);ua[2]&&kd(da,ua[2],Ba,hb,ob,Wa);ua[3]&&kd(da,ua[3],ob,hb,Na,Wa)}}function Bd(da,ua,Ba,Fa,Na,Wa,ob){var hb=Infinity,fb;(function Oc(Fb,Tb,nc,kc,Cc){if(!(Tb>Wa||nc>ob||kc<Fa||Cc<Na)){if(Gc=Fb.point){var Gc,Yc=ua-Fb.x,ld=Ba-Fb.y;Yc=Yc*Yc+ld*ld;Yc<hb&&(Yc=Math.sqrt(hb=Yc),Fa=ua-Yc,Na=Ba-Yc,Wa=ua+Yc,ob=Ba+Yc,fb=Gc)}Gc=Fb.nodes;Yc=.5*(Tb+kc);
ld=.5*(nc+Cc);for(var pd=(Ba>=ld)<<1|ua>=Yc,sd=pd+4;pd<sd;++pd)if(Fb=Gc[pd&3])switch(pd&3){case 0:Oc(Fb,Tb,nc,Yc,ld);break;case 1:Oc(Fb,Yc,nc,kc,ld);break;case 2:Oc(Fb,Tb,ld,Yc,Cc);break;case 3:Oc(Fb,Yc,ld,kc,Cc)}}})(da,Fa,Na,Wa,ob);return fb}function Fd(da,ua){da=Qa.rgb(da);ua=Qa.rgb(ua);var Ba=da.r,Fa=da.g,Na=da.b,Wa=ua.r-Ba,ob=ua.g-Fa,hb=ua.b-Na;return function(fb){return"#"+wb(Math.round(Ba+Wa*fb))+wb(Math.round(Fa+ob*fb))+wb(Math.round(Na+hb*fb))}}function yd(da,ua){var Ba={},Fa={},Na;for(Na in da)Na in
ua?Ba[Na]=Nc(da[Na],ua[Na]):Fa[Na]=da[Na];for(Na in ua)Na in da||(Fa[Na]=ua[Na]);return function(Wa){for(Na in Ba)Fa[Na]=Ba[Na](Wa);return Fa}}function Lc(da,ua){da=+da;ua=+ua;return function(Ba){return da*(1-Ba)+ua*Ba}}function cd(da,ua){var Ba=S.lastIndex=X.lastIndex=0,Fa,Na,Wa,ob=-1,hb=[],fb=[];da+="";for(ua+="";(Fa=S.exec(da))&&(Na=X.exec(ua));)(Wa=Na.index)>Ba&&(Wa=ua.slice(Ba,Wa),hb[ob]?hb[ob]+=Wa:hb[++ob]=Wa),(Fa=Fa[0])===(Na=Na[0])?hb[ob]?hb[ob]+=Na:hb[++ob]=Na:(hb[++ob]=null,fb.push({i:ob,
x:Lc(Fa,Na)})),Ba=X.lastIndex;Ba<ua.length&&(Wa=ua.slice(Ba),hb[ob]?hb[ob]+=Wa:hb[++ob]=Wa);return 2>hb.length?fb[0]?(ua=fb[0].x,function(xb){return ua(xb)+""}):function(){return ua}:(ua=fb.length,function(xb){for(var Fb=0,Tb;Fb<ua;++Fb)hb[(Tb=fb[Fb]).i]=Tb.x(xb);return hb.join("")})}function Nc(da,ua){for(var Ba=Qa.interpolators.length,Fa;0<=--Ba&&!(Fa=Qa.interpolators[Ba](da,ua)););return Fa}function Xc(da,ua){var Ba=[],Fa=[],Na=da.length,Wa=ua.length,ob=Math.min(da.length,ua.length),hb;for(hb=
0;hb<ob;++hb)Ba.push(Nc(da[hb],ua[hb]));for(;hb<Na;++hb)Fa[hb]=da[hb];for(;hb<Wa;++hb)Fa[hb]=ua[hb];return function(fb){for(hb=0;hb<ob;++hb)Fa[hb]=Ba[hb](fb);return Fa}}function Zc(da){return function(ua){return 0>=ua?0:1<=ua?1:da(ua)}}function Sc(da){return function(ua){return 1-da(1-ua)}}function id(da){return function(ua){return.5*(.5>ua?da(2*ua):2-da(2-2*ua))}}function Nd(da){return da*da}function Rd(da){return da*da*da}function Wd(da){if(0>=da)return 0;if(1<=da)return 1;var ua=da*da,Ba=ua*da;
return 4*(.5>da?Ba:3*(da-ua)+Ba-.75)}function Se(da){return 1-Math.cos(da*eg)}function Ne(da){return Math.pow(2,10*(da-1))}function te(da){return 1-Math.sqrt(1-da*da)}function qf(da){return da<1/2.75?7.5625*da*da:da<2/2.75?7.5625*(da-=1.5/2.75)*da+.75:da<2.5/2.75?7.5625*(da-=2.25/2.75)*da+.9375:7.5625*(da-=2.625/2.75)*da+.984375}function sf(da,ua){ua-=da;return function(Ba){return Math.round(da+ua*Ba)}}function of(da){var ua=[da.a,da.b],Ba=[da.c,da.d],Fa=vf(ua),Na=ua[0]*Ba[0]+ua[1]*Ba[1],Wa=-Na;Ba[0]+=
Wa*ua[0];Ba[1]+=Wa*ua[1];Wa=vf(Ba)||0;ua[0]*Ba[1]<Ba[0]*ua[1]&&(ua[0]*=-1,ua[1]*=-1,Fa*=-1,Na*=-1);this.rotate=(Fa?Math.atan2(ua[1],ua[0]):Math.atan2(-Ba[0],Ba[1]))*Sf;this.translate=[da.e,da.f];this.scale=[Fa,Wa];this.skew=Wa?Math.atan2(Na,Wa)*Sf:0}function vf(da){var ua=Math.sqrt(da[0]*da[0]+da[1]*da[1]);ua&&(da[0]/=ua,da[1]/=ua);return ua}function Bf(da){return da.length?da.pop()+",":""}function Sd(da,ua,Ba,Fa){da[0]!==ua[0]||da[1]!==ua[1]?(Ba=Ba.push("translate(",null,",",null,")"),Fa.push({i:Ba-
4,x:Lc(da[0],ua[0])},{i:Ba-2,x:Lc(da[1],ua[1])})):(ua[0]||ua[1])&&Ba.push("translate("+ua+")")}function De(da,ua,Ba,Fa){da!==ua?(180<da-ua?ua+=360:180<ua-da&&(da+=360),Fa.push({i:Ba.push(Bf(Ba)+"rotate(",null,")")-2,x:Lc(da,ua)})):ua&&Ba.push(Bf(Ba)+"rotate("+ua+")")}function hf(da,ua,Ba,Fa){da!==ua?Fa.push({i:Ba.push(Bf(Ba)+"skewX(",null,")")-2,x:Lc(da,ua)}):ua&&Ba.push(Bf(Ba)+"skewX("+ua+")")}function bf(da,ua,Ba,Fa){da[0]!==ua[0]||da[1]!==ua[1]?(Ba=Ba.push(Bf(Ba)+"scale(",null,",",null,")"),Fa.push({i:Ba-
4,x:Lc(da[0],ua[0])},{i:Ba-2,x:Lc(da[1],ua[1])})):1===ua[0]&&1===ua[1]||Ba.push(Bf(Ba)+"scale("+ua+")")}function Qe(da,ua){var Ba=[],Fa=[];da=Qa.transform(da);ua=Qa.transform(ua);Sd(da.translate,ua.translate,Ba,Fa);De(da.rotate,ua.rotate,Ba,Fa);hf(da.skew,ua.skew,Ba,Fa);bf(da.scale,ua.scale,Ba,Fa);da=ua=null;return function(Na){for(var Wa=-1,ob=Fa.length,hb;++Wa<ob;)Ba[(hb=Fa[Wa]).i]=hb.x(Na);return Ba.join("")}}function He(da,ua){ua=(ua-=da=+da)||1/ua;return function(Ba){return(Ba-da)/ua}}function $e(da,
ua){ua=(ua-=da=+da)||1/ua;return function(Ba){return Math.max(0,Math.min(1,(Ba-da)/ua))}}function df(da){for(var ua=[],Ba=da.parent;null!=Ba;)ua.push(da),da=Ba,Ba=Ba.parent;ua.push(da);return ua}function Rc(da){da.fixed|=2}function Gd(da){da.fixed&=-7}function Mb(da){da.fixed|=4;da.px=da.x;da.py=da.y}function $b(da){da.fixed&=-5}function Mc(da,ua,Ba){var Fa=0,Na=0;da.charge=0;if(!da.leaf)for(var Wa=da.nodes,ob=Wa.length,hb=-1,fb;++hb<ob;)fb=Wa[hb],null!=fb&&(Mc(fb,ua,Ba),da.charge+=fb.charge,Fa+=
fb.charge*fb.cx,Na+=fb.charge*fb.cy);da.point&&(da.leaf||(da.point.x+=Math.random()-.5,da.point.y+=Math.random()-.5),ua*=Ba[da.point.index],da.charge+=da.pointCharge=ua,Fa+=ua*da.point.x,Na+=ua*da.point.y);da.cx=Fa/da.charge;da.cy=Na/da.charge}function Hd(da,ua){Qa.rebind(da,ua,"sort","children","value");da.nodes=da;da.links=oe;return da}function qd(da,ua){for(var Ba=[da];null!=(da=Ba.pop());)if(ua(da),(Na=da.children)&&(Fa=Na.length))for(var Fa,Na;0<=--Fa;)Ba.push(Na[Fa])}function qe(da,ua){for(var Ba=
[da],Fa=[];null!=(da=Ba.pop());)if(Fa.push(da),(Wa=da.children)&&(Na=Wa.length)){da=-1;for(var Na,Wa;++da<Na;)Ba.push(Wa[da])}for(;null!=(da=Fa.pop());)ua(da)}function Id(da){return da.children}function ue(da){return da.value}function Be(da,ua){return ua.value-da.value}function oe(da){return Qa.merge(da.map(function(ua){return(ua.children||[]).map(function(Ba){return{source:ua,target:Ba}})}))}function zb(da){return da.x}function qc(da){return da.y}function Yb(da,ua,Ba){da.y0=ua;da.y=Ba}function Bc(da){return Qa.range(da.length)}
function bd(da){var ua=-1;da=da[0].length;for(var Ba=[];++ua<da;)Ba[ua]=0;return Ba}function ed(da){for(var ua=1,Ba=0,Fa=da[0][1],Na,Wa=da.length;ua<Wa;++ua)(Na=da[ua][1])>Fa&&(Ba=ua,Fa=Na);return Ba}function Vc(da){return da.reduce(Pc,0)}function Pc(da,ua){return da+ua[1]}function yc(da,ua){return vc(da,Math.ceil(Math.log(ua.length)/Math.LN2+1))}function vc(da,ua){var Ba=-1,Fa=+da[0];da=(da[1]-Fa)/ua;for(var Na=[];++Ba<=ua;)Na[Ba]=da*Ba+Fa;return Na}function oc(da){return[Qa.min(da),Qa.max(da)]}
function vd(da,ua){return da.value-ua.value}function Qd(da,ua){var Ba=da._pack_next;da._pack_next=ua;ua._pack_prev=da;ua._pack_next=Ba;Ba._pack_prev=ua}function Yd(da,ua){da._pack_next=ua;ua._pack_prev=da}function xe(da,ua){var Ba=ua.x-da.x,Fa=ua.y-da.y;da=da.r+ua.r;return.999*da*da>Ba*Ba+Fa*Fa}function Td(da){function ua(Yc){Fa=Math.min(Yc.x-Yc.r,Fa);Na=Math.max(Yc.x+Yc.r,Na);Wa=Math.min(Yc.y-Yc.r,Wa);ob=Math.max(Yc.y+Yc.r,ob)}if((Ba=da.children)&&(Fb=Ba.length)){var Ba,Fa=Infinity,Na=-Infinity,
Wa=Infinity,ob=-Infinity,hb,fb,xb,Fb;Ba.forEach(Oe);var Tb=Ba[0];Tb.x=-Tb.r;Tb.y=0;ua(Tb);if(1<Fb){var nc=Ba[1];nc.x=nc.r;nc.y=0;ua(nc);if(2<Fb){var kc=Ba[2];Me(Tb,nc,kc);ua(kc);Qd(Tb,kc);Tb._pack_prev=kc;Qd(kc,nc);nc=Tb._pack_next;for(hb=3;hb<Fb;hb++){Me(Tb,nc,kc=Ba[hb]);var Cc=0,Oc=1,Gc=1;for(fb=nc._pack_next;fb!==nc;fb=fb._pack_next,Oc++)if(xe(fb,kc)){Cc=1;break}if(1==Cc)for(xb=Tb._pack_prev;xb!==fb._pack_prev&&!xe(xb,kc);xb=xb._pack_prev,Gc++);Cc?(Oc<Gc||Oc==Gc&&nc.r<Tb.r?Yd(Tb,nc=fb):Yd(Tb=xb,
nc),hb--):(Qd(Tb,kc),nc=kc,ua(kc))}}}Tb=(Fa+Na)/2;nc=(Wa+ob)/2;for(hb=fb=0;hb<Fb;hb++)kc=Ba[hb],kc.x-=Tb,kc.y-=nc,fb=Math.max(fb,kc.r+Math.sqrt(kc.x*kc.x+kc.y*kc.y));da.r=fb;Ba.forEach(Ve)}}function Oe(da){da._pack_next=da._pack_prev=da}function Ve(da){delete da._pack_next;delete da._pack_prev}function wf(da,ua,Ba,Fa){var Na=da.children;da.x=ua+=Fa*da.x;da.y=Ba+=Fa*da.y;da.r*=Fa;if(Na){da=-1;for(var Wa=Na.length;++da<Wa;)wf(Na[da],ua,Ba,Fa)}}function Me(da,ua,Ba){var Fa=da.r+Ba.r,Na=ua.x-da.x,Wa=
ua.y-da.y;if(Fa&&(Na||Wa)){ua=ua.r+Ba.r;var ob=Na*Na+Wa*Wa;ua*=ua;Fa*=Fa;var hb=.5+(Fa-ua)/(2*ob),fb=Math.sqrt(Math.max(0,2*ua*(Fa+ob)-(Fa-=ob)*Fa-ua*ua))/(2*ob);Ba.x=da.x+hb*Na+fb*Wa;Ba.y=da.y+hb*Wa-fb*Na}else Ba.x=da.x+Fa,Ba.y=da.y}function Af(da,ua){return da.parent==ua.parent?1:2}function ug(da){var ua=da.children;return ua.length?ua[0]:da.t}function vg(da){var ua=da.children,Ba;return(Ba=ua.length)?ua[Ba-1]:da.t}function Gg(da){return 1+Qa.max(da,function(ua){return ua.y})}function ih(da){return da.reduce(function(ua,
Ba){return ua+Ba.x},0)/da.length}function Nh(da){var ua=da.children;return ua&&ua.length?Nh(ua[0]):da}function qh(da){var ua=da.children,Ba;return ua&&(Ba=ua.length)?qh(ua[Ba-1]):da}function Yg(da){return{x:da.x,y:da.y,dx:da.dx,dy:da.dy}}function jh(da,ua){var Ba=da.x+ua[3],Fa=da.y+ua[0],Na=da.dx-ua[1]-ua[3];da=da.dy-ua[0]-ua[2];0>Na&&(Ba+=Na/2,Na=0);0>da&&(Fa+=da/2,da=0);return{x:Ba,y:Fa,dx:Na,dy:da}}function kh(da){var ua=da[0];da=da[da.length-1];return ua<da?[ua,da]:[da,ua]}function fh(da){return da.rangeExtent?
da.rangeExtent():kh(da.range())}function ei(da,ua,Ba,Fa){var Na=Ba(da[0],da[1]),Wa=Fa(ua[0],ua[1]);return function(ob){return Wa(Na(ob))}}function gh(da,ua){var Ba=0,Fa=da.length-1,Na=da[Ba],Wa=da[Fa];if(Wa<Na){var ob=Ba;Ba=Fa;Fa=ob;ob=Na;Na=Wa;Wa=ob}da[Ba]=ua.floor(Na);da[Fa]=ua.ceil(Wa);return da}function ng(da){return da?{floor:function(ua){return Math.floor(ua/da)*da},ceil:function(ua){return Math.ceil(ua/da)*da}}:Kc}function Zf(da,ua,Ba,Fa){var Na=[],Wa=[],ob=0,hb=Math.min(da.length,ua.length)-
1;da[hb]<da[0]&&(da=da.slice().reverse(),ua=ua.slice().reverse());for(;++ob<=hb;)Na.push(Ba(da[ob-1],da[ob])),Wa.push(Fa(ua[ob-1],ua[ob]));return function(fb){var xb=Qa.bisect(da,fb,1,hb)-1;return Wa[xb](Na[xb](fb))}}function og(da,ua,Ba,Fa){function Na(){var fb=2<Math.min(da.length,ua.length)?Zf:ei,xb=Fa?$e:He;ob=fb(da,ua,xb,Ba);hb=fb(ua,da,xb,Nc);return Wa}function Wa(fb){return ob(fb)}var ob,hb;Wa.invert=function(fb){return hb(fb)};Wa.domain=function(fb){if(!arguments.length)return da;da=fb.map(Number);
return Na()};Wa.range=function(fb){if(!arguments.length)return ua;ua=fb;return Na()};Wa.rangeRound=function(fb){return Wa.range(fb).interpolate(sf)};Wa.clamp=function(fb){if(!arguments.length)return Fa;Fa=fb;return Na()};Wa.interpolate=function(fb){if(!arguments.length)return Ba;Ba=fb;return Na()};Wa.ticks=function(fb){return Qa.range.apply(Qa,rh(da,fb))};Wa.tickFormat=function(fb,xb){return d3_scale_linearTickFormat(da,fb,xb)};Wa.nice=function(fb){Tg(da,fb);return Na()};Wa.copy=function(){return og(da,
ua,Ba,Fa)};return Na()}function Hg(da,ua){return Qa.rebind(da,ua,"range","rangeRound","interpolate","clamp")}function Tg(da,ua){gh(da,ng(rh(da,ua)[2]));gh(da,ng(rh(da,ua)[2]));return da}function rh(da,ua){null==ua&&(ua=10);da=kh(da);var Ba=da[1]-da[0],Fa=Math.pow(10,Math.floor(Math.log(Ba/ua)/Math.LN10));ua=ua/Ba*Fa;.15>=ua?Fa*=10:.35>=ua?Fa*=5:.75>=ua&&(Fa*=2);da[0]=Math.ceil(da[0]/Fa)*Fa;da[1]=Math.floor(da[1]/Fa)*Fa+.5*Fa;da[2]=Fa;return da}function hh(da,ua,Ba,Fa){function Na(hb){return(Ba?Math.log(0>
hb?0:hb):-Math.log(0<hb?0:-hb))/Math.log(ua)}function Wa(hb){return Ba?Math.pow(ua,hb):-Math.pow(ua,-hb)}function ob(hb){return da(Na(hb))}ob.invert=function(hb){return Wa(da.invert(hb))};ob.domain=function(hb){if(!arguments.length)return Fa;Ba=0<=hb[0];da.domain((Fa=hb.map(Number)).map(Na));return ob};ob.base=function(hb){if(!arguments.length)return ua;ua=+hb;da.domain(Fa.map(Na));return ob};ob.nice=function(){var hb=gh(Fa.map(Na),Ba?Math:$c);da.domain(hb);Fa=hb.map(Wa);return ob};ob.ticks=function(){var hb=
kh(Fa),fb=[],xb=hb[0];hb=hb[1];var Fb=Math.floor(Na(xb)),Tb=Math.ceil(Na(hb)),nc=ua%1?2:ua;if(isFinite(Tb-Fb)){if(Ba){for(;Fb<Tb;Fb++)for(var kc=1;kc<nc;kc++)fb.push(Wa(Fb)*kc);fb.push(Wa(Fb))}else for(fb.push(Wa(Fb));Fb++<Tb;)for(kc=nc-1;0<kc;kc--)fb.push(Wa(Fb)*kc);for(Fb=0;fb[Fb]<xb;Fb++);for(Tb=fb.length;fb[Tb-1]>hb;Tb--);fb=fb.slice(Fb,Tb)}return fb};ob.copy=function(){return hh(da.copy(),ua,Ba,Fa)};return Hg(ob,da)}function lh(da,ua,Ba){function Fa(ob){return da(Na(ob))}var Na=Kf(ua),Wa=Kf(1/
ua);Fa.invert=function(ob){return Wa(da.invert(ob))};Fa.domain=function(ob){if(!arguments.length)return Ba;da.domain((Ba=ob.map(Number)).map(Na));return Fa};Fa.ticks=function(ob){return Qa.range.apply(Qa,rh(Ba,ob))};Fa.tickFormat=function(ob,hb){return d3_scale_linearTickFormat(Ba,ob,hb)};Fa.nice=function(ob){return Fa.domain(Tg(Ba,ob))};Fa.exponent=function(ob){if(!arguments.length)return ua;Na=Kf(ua=ob);Wa=Kf(1/ua);da.domain(Ba.map(Na));return Fa};Fa.copy=function(){return lh(da.copy(),ua,Ba)};
return Hg(Fa,da)}function Kf(da){return function(ua){return 0>ua?-Math.pow(-ua,da):Math.pow(ua,da)}}function Zg(da,ua){function Ba(hb){return Wa[((Na.get(hb)||("range"===ua.t?Na.set(hb,da.push(hb)):NaN))-1)%Wa.length]}function Fa(hb,fb){return Qa.range(da.length).map(function(xb){return hb+fb*xb})}var Na,Wa,ob;Ba.domain=function(hb){if(!arguments.length)return da;da=[];Na=new r;for(var fb=-1,xb=hb.length,Fb;++fb<xb;)Na.has(Fb=hb[fb])||Na.set(Fb,da.push(Fb));return Ba[ua.t].apply(Ba,ua.a)};Ba.range=
function(hb){if(!arguments.length)return Wa;Wa=hb;ob=0;ua={t:"range",a:arguments};return Ba};Ba.rangePoints=function(hb,fb){2>arguments.length&&(fb=0);var xb=hb[0],Fb=hb[1],Tb=2>da.length?(xb=(xb+Fb)/2,0):(Fb-xb)/(da.length-1+fb);Wa=Fa(xb+Tb*fb/2,Tb);ob=0;ua={t:"rangePoints",a:arguments};return Ba};Ba.rangeRoundPoints=function(hb,fb){2>arguments.length&&(fb=0);var xb=hb[0],Fb=hb[1],Tb=2>da.length?(xb=Fb=Math.round((xb+Fb)/2),0):(Fb-xb)/(da.length-1+fb)|0;Wa=Fa(xb+Math.round(Tb*fb/2+(Fb-xb-(da.length-
1+fb)*Tb)/2),Tb);ob=0;ua={t:"rangeRoundPoints",a:arguments};return Ba};Ba.rangeBands=function(hb,fb,xb){2>arguments.length&&(fb=0);3>arguments.length&&(xb=fb);var Fb=hb[1]<hb[0],Tb=hb[Fb-0],nc=(hb[1-Fb]-Tb)/(da.length-fb+2*xb);Wa=Fa(Tb+nc*xb,nc);Fb&&Wa.reverse();ob=nc*(1-fb);ua={t:"rangeBands",a:arguments};return Ba};Ba.rangeRoundBands=function(hb,fb,xb){2>arguments.length&&(fb=0);3>arguments.length&&(xb=fb);var Fb=hb[1]<hb[0],Tb=hb[Fb-0],nc=hb[1-Fb],kc=Math.floor((nc-Tb)/(da.length-fb+2*xb));Wa=
Fa(Tb+Math.round((nc-Tb-(da.length-fb)*kc)/2),kc);Fb&&Wa.reverse();ob=Math.round(kc*(1-fb));ua={t:"rangeRoundBands",a:arguments};return Ba};Ba.rangeBand=function(){return ob};Ba.rangeExtent=function(){return kh(ua.a[0])};Ba.copy=function(){return Zg(da,ua)};return Ba.domain(da)}function $f(da,ua){function Ba(){var Wa=0,ob=ua.length;for(Na=[];++Wa<ob;)Na[Wa-1]=Qa.quantile(da,Wa/ob);return Fa}function Fa(Wa){if(!isNaN(Wa=+Wa))return ua[Qa.bisect(Na,Wa)]}var Na;Fa.domain=function(Wa){if(!arguments.length)return da;
da=Wa.map(k).filter(m).sort(n);return Ba()};Fa.range=function(Wa){if(!arguments.length)return ua;ua=Wa;return Ba()};Fa.quantiles=function(){return Na};Fa.invertExtent=function(Wa){Wa=ua.indexOf(Wa);return 0>Wa?[NaN,NaN]:[0<Wa?Na[Wa-1]:da[0],Wa<Na.length?Na[Wa]:da[da.length-1]]};Fa.copy=function(){return $f(da,ua)};return Ba()}function Nf(da,ua,Ba){function Fa(hb){return Ba[Math.max(0,Math.min(ob,Math.floor(Wa*(hb-da))))]}function Na(){Wa=Ba.length/(ua-da);ob=Ba.length-1;return Fa}var Wa,ob;Fa.domain=
function(hb){if(!arguments.length)return[da,ua];da=+hb[0];ua=+hb[hb.length-1];return Na()};Fa.range=function(hb){if(!arguments.length)return Ba;Ba=hb;return Na()};Fa.invertExtent=function(hb){hb=Ba.indexOf(hb);hb=0>hb?NaN:hb/Wa+da;return[hb,hb+1/Wa]};Fa.copy=function(){return Nf(da,ua,Ba)};return Na()}function vh(da,ua){function Ba(Fa){if(Fa<=Fa)return ua[Qa.bisect(da,Fa)]}Ba.domain=function(Fa){if(!arguments.length)return da;da=Fa;return Ba};Ba.range=function(Fa){if(!arguments.length)return ua;ua=
Fa;return Ba};Ba.invertExtent=function(Fa){Fa=ua.indexOf(Fa);return[da[Fa-1],da[Fa]]};Ba.copy=function(){return vh(da,ua)};return Ba}function mh(da){function ua(Ba){return+Ba}ua.invert=ua;ua.domain=ua.range=function(Ba){if(!arguments.length)return da;da=Ba.map(ua);return ua};ua.ticks=function(Ba){return Qa.range.apply(Qa,rh(da,Ba))};ua.tickFormat=function(Ba,Fa){return d3_scale_linearTickFormat(da,Ba,Fa)};ua.copy=function(){return mh(da)};return ua}function Gh(){return 0}function ag(da){return da.innerRadius}
function wg(da){return da.outerRadius}function nh(da){return da.startAngle}function wh(da){return da.endAngle}function Ha(da){return da&&da.padAngle}function Ga(da,ua,Ba,Fa){return 0<(da-Ba)*ua-(ua-Fa)*da?0:1}function Oa(da,ua,Ba,Fa,Na){var Wa=da[0]-ua[0],ob=da[1]-ua[1];Na=(Na?Fa:-Fa)/Math.sqrt(Wa*Wa+ob*ob);ob*=Na;Wa*=-Na;var hb=da[0]+ob,fb=da[1]+Wa,xb=ua[0]+ob,Fb=ua[1]+Wa;da=(hb+xb)/2;ua=(fb+Fb)/2;Na=xb-hb;var Tb=Fb-fb,nc=Na*Na+Tb*Tb;Fa=Ba-Fa;Fb=hb*Fb-xb*fb;var kc=(0>Tb?-1:1)*Math.sqrt(Math.max(0,
Fa*Fa*nc-Fb*Fb));hb=(Fb*Tb-Na*kc)/nc;fb=(-Fb*Na-Tb*kc)/nc;xb=(Fb*Tb+Na*kc)/nc;Na=(-Fb*Na+Tb*kc)/nc;Tb=hb-da;nc=fb-ua;da=xb-da;ua=Na-ua;Tb*Tb+nc*nc>da*da+ua*ua&&(hb=xb,fb=Na);return[[hb-ob,fb-Wa],[hb*Ba/Fa,fb*Ba/Fa]]}function Sa(){return!0}function eb(da){function ua(fb){function xb(){Fb.push("M",Wa(da(Tb),hb))}for(var Fb=[],Tb=[],nc=-1,kc=fb.length,Cc,Oc=Aa(Ba),Gc=Aa(Fa);++nc<kc;)Na.call(this,Cc=fb[nc],nc)?Tb.push([+Oc.call(this,Cc,nc),+Gc.call(this,Cc,nc)]):Tb.length&&(xb(),Tb=[]);Tb.length&&xb();
return Fb.length?Fb.join(""):null}var Ba=pb,Fa=Db,Na=Sa,Wa=lb,ob=Wa.key,hb=.7;ua.x=function(fb){if(!arguments.length)return Ba;Ba=fb;return ua};ua.y=function(fb){if(!arguments.length)return Fa;Fa=fb;return ua};ua.defined=function(fb){if(!arguments.length)return Na;Na=fb;return ua};ua.interpolate=function(fb){if(!arguments.length)return ob;ob="function"===typeof fb?Wa=fb:(Wa=he.get(fb)||lb).key;return ua};ua.tension=function(fb){if(!arguments.length)return hb;hb=fb;return ua};return ua}function lb(da){return 1<
da.length?da.join("L"):da+"Z"}function Cb(da){return da.join("L")+"Z"}function Zb(da){for(var ua=0,Ba=da.length,Fa=da[0],Na=[Fa[0],",",Fa[1]];++ua<Ba;)Na.push("V",(Fa=da[ua])[1],"H",Fa[0]);return Na.join("")}function Lb(da){for(var ua=0,Ba=da.length,Fa=da[0],Na=[Fa[0],",",Fa[1]];++ua<Ba;)Na.push("H",(Fa=da[ua])[0],"V",Fa[1]);return Na.join("")}function ec(da,ua){if(1>ua.length||da.length!=ua.length&&da.length!=ua.length+2)return lb(da);var Ba=da.length!=ua.length,Fa="",Na=da[0],Wa=da[1],ob=ua[0],
hb=ob,fb=1;Ba&&(Fa+="Q"+(Wa[0]-2*ob[0]/3)+","+(Wa[1]-2*ob[1]/3)+","+Wa[0]+","+Wa[1],Na=da[1],fb=2);if(1<ua.length)for(hb=ua[1],Wa=da[fb],fb++,Fa+="C"+(Na[0]+ob[0])+","+(Na[1]+ob[1])+","+(Wa[0]-hb[0])+","+(Wa[1]-hb[1])+","+Wa[0]+","+Wa[1],Na=2;Na<ua.length;Na++,fb++)Wa=da[fb],hb=ua[Na],Fa+="S"+(Wa[0]-hb[0])+","+(Wa[1]-hb[1])+","+Wa[0]+","+Wa[1];Ba&&(da=da[fb],Fa+="Q"+(Wa[0]+2*hb[0]/3)+","+(Wa[1]+2*hb[1]/3)+","+da[0]+","+da[1]);return Fa}function hc(da,ua){var Ba=[];ua=(1-ua)/2;for(var Fa,Na=da[0],
Wa=da[1],ob=1,hb=da.length;++ob<hb;)Fa=Na,Na=Wa,Wa=da[ob],Ba.push([ua*(Wa[0]-Fa[0]),ua*(Wa[1]-Fa[1])]);return Ba}function rc(da){if(3>da.length)return lb(da);var ua=1,Ba=da.length,Fa=da[0],Na=Fa[0],Wa=Fa[1],ob=[Na,Na,Na,(Fa=da[1])[0]],hb=[Wa,Wa,Wa,Fa[1]];Na=[Na,",",Wa,"L",Fc(ve,ob),",",Fc(ve,hb)];for(da.push(da[Ba-1]);++ua<=Ba;)Fa=da[ua],ob.shift(),ob.push(Fa[0]),hb.shift(),hb.push(Fa[1]),jd(Na,ob,hb);da.pop();Na.push("L",Fa);return Na.join("")}function Fc(da,ua){return da[0]*ua[0]+da[1]*ua[1]+da[2]*
ua[2]+da[3]*ua[3]}function jd(da,ua,Ba){da.push("C",Fc(de,ua),",",Fc(de,Ba),",",Fc(me,ua),",",Fc(me,Ba),",",Fc(ve,ua),",",Fc(ve,Ba))}function Dd(da,ua){return(ua[1]-da[1])/(ua[0]-da[0])}function ye(da){for(var ua,Ba=-1,Fa=da.length,Na,Wa;++Ba<Fa;)ua=da[Ba],Na=ua[0],Wa=ua[1]-eg,ua[0]=Na*Math.cos(Wa),ua[1]=Na*Math.sin(Wa);return da}function Ae(da){function ua(nc){function kc(){Cc.push("M",hb(da(Gc),Tb),Fb,xb(da(Oc.reverse()),Tb),"Z")}for(var Cc=[],Oc=[],Gc=[],Yc=-1,ld=nc.length,pd,sd=Aa(Ba),Md=Aa(Na),
zd=Ba===Fa?function(){return ce}:Aa(Fa),ee=Na===Wa?function(){return je}:Aa(Wa),ce,je;++Yc<ld;)ob.call(this,pd=nc[Yc],Yc)?(Oc.push([ce=+sd.call(this,pd,Yc),je=+Md.call(this,pd,Yc)]),Gc.push([+zd.call(this,pd,Yc),+ee.call(this,pd,Yc)])):Oc.length&&(kc(),Oc=[],Gc=[]);Oc.length&&kc();return Cc.length?Cc.join(""):null}var Ba=pb,Fa=pb,Na=0,Wa=Db,ob=Sa,hb=lb,fb=hb.key,xb=hb,Fb="L",Tb=.7;ua.x=function(nc){if(!arguments.length)return Fa;Ba=Fa=nc;return ua};ua.x0=function(nc){if(!arguments.length)return Ba;
Ba=nc;return ua};ua.x1=function(nc){if(!arguments.length)return Fa;Fa=nc;return ua};ua.y=function(nc){if(!arguments.length)return Wa;Na=Wa=nc;return ua};ua.y0=function(nc){if(!arguments.length)return Na;Na=nc;return ua};ua.y1=function(nc){if(!arguments.length)return Wa;Wa=nc;return ua};ua.defined=function(nc){if(!arguments.length)return ob;ob=nc;return ua};ua.interpolate=function(nc){if(!arguments.length)return fb;fb="function"===typeof nc?hb=nc:(hb=he.get(nc)||lb).key;xb=hb.reverse||hb;Fb=hb.closed?
"M":"L";return ua};ua.tension=function(nc){if(!arguments.length)return Tb;Tb=nc;return ua};return ua}function Xe(da){return da.source}function Vf(da){return da.target}function Je(da){return da.radius}function Tf(da){return[da.x,da.y]}function Mf(da){return function(){var ua=da.apply(this,arguments),Ba=ua[0];ua=ua[1]-eg;return[Ba*Math.cos(ua),Ba*Math.sin(ua)]}}function tf(){return 64}function $g(){return"circle"}function Kg(da){da=Math.sqrt(da/af);return"M0,"+da+"A"+da+","+da+" 0 1,1 0,"+-da+"A"+da+
","+da+" 0 1,1 0,"+da+"Z"}function Ug(da){return function(){var ua,Ba,Fa;(ua=this[da])&&(Fa=ua[Ba=ua.active])&&(Fa.timer.c=null,Fa.timer.t=NaN,--ua.count?delete ua[Ba]:delete this[da],ua.active+=.5,Fa.event&&Fa.event.interrupt.call(this,this.__data__,Fa.index))}}function Ff(da,ua,Ba){fe(da,Ke);da.namespace=ua;da.id=Ba;return da}function Lf(da,ua,Ba,Fa){var Na=da.id,Wa=da.namespace;return ha(da,"function"===typeof Ba?function(ob,hb,fb){ob[Wa][Na].tween.set(ua,Fa(Ba.call(ob,ob.__data__,hb,fb)))}:(Ba=
Fa(Ba),function(ob){ob[Wa][Na].tween.set(ua,Ba)}))}function oh(da){null==da&&(da="");return function(){this.textContent=da}}function Wh(da){return null==da?"__transition__":"__transition_"+da+"__"}function Hh(da,ua,Ba,Fa,Na){function Wa(Oc){var Gc=xb.delay;Cc.t=Gc+kc;if(Gc<=Oc)return ob(Oc-Gc);Cc.c=ob}function ob(Oc){var Gc=fb.active,Yc=fb[Gc];Yc&&(Yc.timer.c=null,Yc.timer.t=NaN,--fb.count,delete fb[Gc],Yc.event&&Yc.event.interrupt.call(da,da.__data__,Yc.index));for(var ld in fb)+ld<Fa&&(Gc=fb[ld],
Gc.timer.c=null,Gc.timer.t=NaN,--fb.count,delete fb[ld]);Cc.c=hb;cb(function(){Cc.c&&hb(Oc||1)&&(Cc.c=null,Cc.t=NaN);return 1},0,kc);fb.active=Fa;xb.event&&xb.event.start.call(da,da.__data__,ua);nc=[];xb.tween.forEach(function(pd,sd){(sd=sd.call(da,da.__data__,ua))&&nc.push(sd)});Tb=xb.ease;Fb=xb.duration}function hb(Oc){Oc/=Fb;for(var Gc=Tb(Oc),Yc=nc.length;0<Yc;)nc[--Yc].call(da,Gc);if(1<=Oc)return xb.event&&xb.event.end.call(da,da.__data__,ua),--fb.count?delete fb[Fa]:delete da[Ba],1}var fb=da[Ba]||
(da[Ba]={active:0,count:0}),xb=fb[Fa],Fb,Tb,nc;if(!xb){var kc=Na.time;var Cc=cb(Wa,0,kc);xb=fb[Fa]={tween:new r,time:kc,timer:Cc,delay:Na.delay,duration:Na.duration,ease:Na.ease,index:ua};Na=null;++fb.count}}function vi(da,ua,Ba){da.attr("transform",function(Fa){var Na=ua(Fa);return"translate("+(isFinite(Na)?Na:Ba(Fa))+",0)"})}function wi(da,ua,Ba){da.attr("transform",function(Fa){var Na=ua(Fa);return"translate(0,"+(isFinite(Na)?Na:Ba(Fa))+")"})}function Oh(da){return JSON.parse(da.responseText)}
function Ya(da){var ua=gc.createRange();ua.selectNode(gc.body);return ua.createContextualFragment(da.responseText)}var Qa={version:"3.8.0"},Ob=[].slice,bc=function(da){return Ob.call(da)},gc=self.document;if(gc)try{bc(gc.documentElement.childNodes)[0].nodeType}catch(da){bc=function(ua){for(var Ba=ua.length,Fa=Array(Ba);Ba--;)Fa[Ba]=ua[Ba];return Fa}}Date.now||(Date.now=function(){return+new Date});if(gc)try{gc.createElement("DIV").style.setProperty("opacity",0,"")}catch(da){var dd=this.Element.prototype,
md=dd.setAttribute,gd=dd.setAttributeNS,nd=this.CSSStyleDeclaration.prototype,rd=nd.setProperty;dd.setAttribute=function(ua,Ba){md.call(this,ua,Ba+"")};dd.setAttributeNS=function(ua,Ba,Fa){gd.call(this,ua,Ba,Fa+"")};nd.setProperty=function(ua,Ba,Fa){rd.call(this,ua,Ba+"",Fa)}}Qa.ascending=n;Qa.descending=function(da,ua){return ua<da?-1:ua>da?1:ua>=da?0:NaN};Qa.min=function(da,ua){var Ba=-1,Fa=da.length,Na;if(1===arguments.length){for(;++Ba<Fa;)if(null!=(Na=da[Ba])&&Na>=Na){var Wa=Na;break}for(;++Ba<
Fa;)null!=(Na=da[Ba])&&Wa>Na&&(Wa=Na)}else{for(;++Ba<Fa;)if(null!=(Na=ua.call(da,da[Ba],Ba))&&Na>=Na){Wa=Na;break}for(;++Ba<Fa;)null!=(Na=ua.call(da,da[Ba],Ba))&&Wa>Na&&(Wa=Na)}return Wa};Qa.max=function(da,ua){var Ba=-1,Fa=da.length,Na;if(1===arguments.length){for(;++Ba<Fa;)if(null!=(Na=da[Ba])&&Na>=Na){var Wa=Na;break}for(;++Ba<Fa;)null!=(Na=da[Ba])&&Na>Wa&&(Wa=Na)}else{for(;++Ba<Fa;)if(null!=(Na=ua.call(da,da[Ba],Ba))&&Na>=Na){Wa=Na;break}for(;++Ba<Fa;)null!=(Na=ua.call(da,da[Ba],Ba))&&Na>Wa&&
(Wa=Na)}return Wa};Qa.extent=function(da,ua){var Ba=-1,Fa=da.length,Na,Wa;if(1===arguments.length){for(;++Ba<Fa;)if(null!=(Na=da[Ba])&&Na>=Na){var ob=Wa=Na;break}for(;++Ba<Fa;)null!=(Na=da[Ba])&&(ob>Na&&(ob=Na),Wa<Na&&(Wa=Na))}else{for(;++Ba<Fa;)if(null!=(Na=ua.call(da,da[Ba],Ba))&&Na>=Na){ob=Wa=Na;break}for(;++Ba<Fa;)null!=(Na=ua.call(da,da[Ba],Ba))&&(ob>Na&&(ob=Na),Wa<Na&&(Wa=Na))}return[ob,Wa]};Qa.sum=function(da,ua){var Ba=0,Fa=da.length,Na,Wa=-1;if(1===arguments.length)for(;++Wa<Fa;)isNaN(Na=
+da[Wa])||(Ba+=Na);else for(;++Wa<Fa;)isNaN(Na=+ua.call(da,da[Wa],Wa))||(Ba+=Na);return Ba};Qa.mean=function(da,ua){var Ba=0,Fa=da.length,Na,Wa=-1,ob=Fa;if(1===arguments.length)for(;++Wa<Fa;)isNaN(Na=k(da[Wa]))?--ob:Ba+=Na;else for(;++Wa<Fa;)isNaN(Na=k(ua.call(da,da[Wa],Wa)))?--ob:Ba+=Na;if(ob)return Ba/ob};Qa.quantile=function(da,ua){var Ba=(da.length-1)*ua+1;ua=Math.floor(Ba);var Fa=+da[ua-1];return(Ba-=ua)?Fa+Ba*(da[ua]-Fa):Fa};Qa.median=function(da,ua){var Ba=[],Fa=da.length,Na,Wa=-1;if(1===arguments.length)for(;++Wa<
Fa;)isNaN(Na=k(da[Wa]))||Ba.push(Na);else for(;++Wa<Fa;)isNaN(Na=k(ua.call(da,da[Wa],Wa)))||Ba.push(Na);if(Ba.length)return Qa.quantile(Ba.sort(n),.5)};Qa.variance=function(da,ua){var Ba=da.length,Fa=0,Na,Wa=0,ob=-1,hb=0;if(1===arguments.length)for(;++ob<Ba;){if(!isNaN(Na=k(da[ob]))){var fb=Na-Fa;Fa+=fb/++hb;Wa+=fb*(Na-Fa)}}else for(;++ob<Ba;)isNaN(Na=k(ua.call(da,da[ob],ob)))||(fb=Na-Fa,Fa+=fb/++hb,Wa+=fb*(Na-Fa));if(1<hb)return Wa/(hb-1)};Qa.deviation=function(){var da=Qa.variance.apply(this,arguments);
return da?Math.sqrt(da):da};var Od=a(n);Qa.bisectLeft=Od.left;Qa.bisect=Qa.bisectRight=Od.right;Qa.bisector=function(da){return a(1===da.length?function(ua,Ba){return n(da(ua),Ba)}:da)};Qa.shuffle=function(da,ua,Ba){3>(Fa=arguments.length)&&(Ba=da.length,2>Fa&&(ua=0));for(var Fa=Ba-ua,Na,Wa;Fa;)Wa=Math.random()*Fa--|0,Na=da[Fa+ua],da[Fa+ua]=da[Wa+ua],da[Wa+ua]=Na;return da};Qa.permute=function(da,ua){for(var Ba=ua.length,Fa=Array(Ba);Ba--;)Fa[Ba]=da[ua[Ba]];return Fa};Qa.pairs=function(da){for(var ua=
0,Ba=da.length-1,Fa=da[0],Na=Array(0>Ba?0:Ba);ua<Ba;)Na[ua]=[Fa,Fa=da[++ua]];return Na};Qa.transpose=function(da){if(!(Wa=da.length))return[];for(var ua=-1,Ba=Qa.min(da,g),Fa=Array(Ba);++ua<Ba;)for(var Na=-1,Wa,ob=Fa[ua]=Array(Wa);++Na<Wa;)ob[Na]=da[Na][ua];return Fa};Qa.zip=function(){return Qa.transpose(arguments)};Qa.keys=function(da){var ua=[],Ba;for(Ba in da)ua.push(Ba);return ua};Qa.values=function(da){var ua=[],Ba;for(Ba in da)ua.push(da[Ba]);return ua};Qa.entries=function(da){var ua=[],Ba;
for(Ba in da)ua.push({key:Ba,value:da[Ba]});return ua};Qa.merge=function(da){var ua=da.length;var Ba=-1;for(var Fa=0,Na,Wa;++Ba<ua;)Fa+=da[Ba].length;for(Na=Array(Fa);0<=--ua;)for(Wa=da[ua],Ba=Wa.length;0<=--Ba;)Na[--Fa]=Wa[Ba];return Na};var xd=Math.abs;Qa.range=function(da,ua,Ba){3>arguments.length&&(Ba=1,2>arguments.length&&(ua=da,da=0));if(Infinity===(ua-da)/Ba)throw Error("infinite range");var Fa=[];var Na=xd(Ba);for(var Wa=1;Na*Wa%1;)Wa*=10;Na=Wa;Wa=-1;var ob;da*=Na;ua*=Na;Ba*=Na;if(0>Ba)for(;(ob=
da+Ba*++Wa)>ua;)Fa.push(ob/Na);else for(;(ob=da+Ba*++Wa)<ua;)Fa.push(ob/Na);return Fa};Qa.map=function(da,ua){var Ba=new r;if(da instanceof r)da.forEach(function(ob,hb){Ba.set(ob,hb)});else if(Array.isArray(da)){var Fa=-1,Na=da.length,Wa;if(1===arguments.length)for(;++Fa<Na;)Ba.set(Fa,da[Fa]);else for(;++Fa<Na;)Ba.set(ua.call(da,Wa=da[Fa],Fa),Wa)}else for(Fa in da)Ba.set(Fa,da[Fa]);return Ba};h(r,{has:d,get:function(da){return this._[l(da)]},set:function(da,ua){return this._[l(da)]=ua},remove:e,keys:f,
values:function(){var da=[],ua;for(ua in this._)da.push(this._[ua]);return da},entries:function(){var da=[],ua;for(ua in this._)da.push({key:c(ua),value:this._[ua]});return da},size:q,empty:t,forEach:function(da){for(var ua in this._)da.call(this,c(ua),this._[ua])}});Qa.nest=function(){function da(hb,fb,xb){if(xb>=Fa.length)return ob?ob.call(Ba,fb):Wa?fb.sort(Wa):fb;for(var Fb=-1,Tb=fb.length,nc=Fa[xb++],kc,Cc,Oc=new r,Gc;++Fb<Tb;)(Gc=Oc.get(kc=nc(Cc=fb[Fb])))?Gc.push(Cc):Oc.set(kc,[Cc]);hb?(Cc=hb(),
fb=function(Yc,ld){Cc.set(Yc,da(hb,ld,xb))}):(Cc={},fb=function(Yc,ld){Cc[Yc]=da(hb,ld,xb)});Oc.forEach(fb);return Cc}function ua(hb,fb){if(fb>=Fa.length)return hb;var xb=[],Fb=Na[fb++];hb.forEach(function(Tb,nc){xb.push({key:Tb,values:ua(nc,fb)})});return Fb?xb.sort(function(Tb,nc){return Fb(Tb.key,nc.key)}):xb}var Ba={},Fa=[],Na=[],Wa,ob;Ba.map=function(hb,fb){return da(fb,hb,0)};Ba.entries=function(hb){return ua(da(Qa.map,hb,0),0)};Ba.key=function(hb){Fa.push(hb);return Ba};Ba.sortKeys=function(hb){Na[Fa.length-
1]=hb;return Ba};Ba.sortValues=function(hb){Wa=hb;return Ba};Ba.rollup=function(hb){ob=hb;return Ba};return Ba};Qa.set=function(da){var ua=new w;if(da)for(var Ba=0,Fa=da.length;Ba<Fa;++Ba)ua.add(da[Ba]);return ua};h(w,{has:d,add:function(da){this._[l(da+="")]=!0;return da},remove:e,values:f,size:q,empty:t,forEach:function(da){for(var ua in this._)da.call(this,c(ua))}});Qa.behavior={};Qa.rebind=function(da,ua){for(var Ba=1,Fa=arguments.length,Na;++Ba<Fa;)da[Na=arguments[Ba]]=z(da,ua,ua[Na]);return da};
var Kd="webkit ms moz Moz o O".split(" ");Qa.dispatch=function(){for(var da=new D,ua=-1,Ba=arguments.length;++ua<Ba;)da[arguments[ua]]=C(da);return da};D.prototype.on=function(da,ua){var Ba=da.indexOf("."),Fa="";0<=Ba&&(Fa=da.slice(Ba+1),da=da.slice(0,Ba));if(da)return 2>arguments.length?this[da].on(Fa):this[da].on(Fa,ua);if(2===arguments.length){if(null==ua)for(da in this)if(this.hasOwnProperty(da))this[da].on(Fa,null);return this}};Qa.event=null;Qa.requote=function(da){return da.replace($d,"\\$\x26")};
var $d=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,fe={}.__proto__?function(da,ua){da.__proto__=ua}:function(da,ua){for(var Ba in ua)da[Ba]=ua[Ba]},ae=function(da,ua){return ua.querySelector(da)},gf=function(da,ua){return ua.querySelectorAll(da)},Te=function(da,ua){var Ba=da.matches||da[B(da,"matchesSelector")];Te=function(Fa,Na){return Ba.call(Fa,Na)};return Te(da,ua)};"function"===typeof Sizzle&&(ae=function(da,ua){return Sizzle(da,ua)[0]||null},gf=Sizzle,Te=Sizzle.matchesSelector);Qa.selection=function(){return Qa.select(gc.documentElement)};
var le=Qa.selection.prototype=[];le.select=function(da){var ua=[],Ba,Fa,Na,Wa;da=K(da);for(var ob=-1,hb=this.length;++ob<hb;){ua.push(Ba=[]);Ba.parentNode=(Na=this[ob]).parentNode;for(var fb=-1,xb=Na.length;++fb<xb;)(Wa=Na[fb])?(Ba.push(Fa=da.call(Wa,Wa.__data__,fb,ob)),Fa&&"__data__"in Wa&&(Fa.__data__=Wa.__data__)):Ba.push(null)}return J(ua)};le.selectAll=function(da){var ua=[],Ba,Fa;da=O(da);for(var Na=-1,Wa=this.length;++Na<Wa;)for(var ob=this[Na],hb=-1,fb=ob.length;++hb<fb;)if(Fa=ob[hb])ua.push(Ba=
bc(da.call(Fa,Fa.__data__,hb,Na))),Ba.parentNode=Fa;return J(ua)};var pe={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};Qa.ns={prefix:pe,qualify:function(da){var ua=da.indexOf(":"),Ba=da;0<=ua&&"xmlns"!==(Ba=da.slice(0,ua))&&(da=da.slice(ua+1));return pe.hasOwnProperty(Ba)?{space:pe[Ba],local:da}:da}};le.attr=function(da,ua){if(2>arguments.length){if("string"===
typeof da){var Ba=this.node();da=Qa.ns.qualify(da);return da.local?Ba.getAttributeNS(da.space,da.local):Ba.getAttribute(da)}for(ua in da)this.each(I(ua,da[ua]));return this}return this.each(I(da,ua))};le.classed=function(da,ua){if(2>arguments.length){if("string"===typeof da){var Ba=this.node(),Fa=(da=(da+"").trim().split(/^|\s+/)).length,Na=-1;if(ua=Ba.classList)for(;++Na<Fa;){if(!ua.contains(da[Na]))return!1}else for(ua=Ba.getAttribute("class");++Na<Fa;)if(!L(da[Na]).test(ua))return!1;return!0}for(ua in da)this.each(H(ua,
da[ua]));return this}return this.each(H(da,ua))};le.style=function(da,ua,Ba){var Fa=arguments.length;if(3>Fa){if("string"!==typeof da){2>Fa&&(ua="");for(Ba in da)this.each(Q(Ba,da[Ba],ua));return this}if(2>Fa)return Fa=this.node(),p(Fa).getComputedStyle(Fa,null).getPropertyValue(da);Ba=""}return this.each(Q(da,ua,Ba))};le.property=function(da,ua){if(2>arguments.length){if("string"===typeof da)return this.node()[da];for(ua in da)this.each(Z(ua,da[ua]));return this}return this.each(Z(da,ua))};le.text=
function(da){return arguments.length?this.each("function"===typeof da?function(){var ua=da.apply(this,arguments);this.textContent=null==ua?"":ua}:null==da?function(){this.textContent=""}:function(){this.textContent=da}):this.node().textContent};le.html=function(da){return arguments.length?this.each("function"===typeof da?function(){var ua=da.apply(this,arguments);this.innerHTML=null==ua?"":ua}:null==da?function(){this.innerHTML=""}:function(){this.innerHTML=da}):this.node().innerHTML};le.append=function(da){da=
ca(da);return this.select(function(){return this.appendChild(da.apply(this,arguments))})};le.insert=function(da,ua){da=ca(da);ua=K(ua);return this.select(function(){return this.insertBefore(da.apply(this,arguments),ua.apply(this,arguments)||null)})};le.remove=function(){return this.each(W)};le.data=function(da,ua){function Ba(Fb,Tb){var nc,kc=Fb.length,Cc=Tb.length,Oc=Math.min(kc,Cc),Gc=Array(Cc),Yc=Array(Cc),ld=Array(kc),pd,sd;if(ua){Oc=new r;var Md=Array(kc),zd;for(nc=-1;++nc<kc;)if(pd=Fb[nc])Oc.has(zd=
ua.call(pd,pd.__data__,nc))?ld[nc]=pd:Oc.set(zd,pd),Md[nc]=zd;for(nc=-1;++nc<Cc;)(pd=Oc.get(zd=ua.call(Tb,sd=Tb[nc],nc)))?!0!==pd&&(Gc[nc]=pd,pd.__data__=sd):Yc[nc]={__data__:sd},Oc.set(zd,!0);for(nc=-1;++nc<kc;)nc in Md&&!0!==Oc.get(Md[nc])&&(ld[nc]=Fb[nc])}else{for(nc=-1;++nc<Oc;)pd=Fb[nc],sd=Tb[nc],pd?(pd.__data__=sd,Gc[nc]=pd):Yc[nc]={__data__:sd};for(;nc<Cc;++nc)Yc[nc]={__data__:Tb[nc]};for(;nc<kc;++nc)ld[nc]=Fb[nc]}Yc.update=Gc;Yc.parentNode=Gc.parentNode=ld.parentNode=Fb.parentNode;hb.push(Yc);
fb.push(Gc);xb.push(ld)}var Fa=-1,Na=this.length,Wa,ob;if(!arguments.length){for(da=Array(Na=(Wa=this[0]).length);++Fa<Na;)if(ob=Wa[Fa])da[Fa]=ob.__data__;return da}var hb=Y([]),fb=J([]),xb=J([]);if("function"===typeof da)for(;++Fa<Na;)Ba(Wa=this[Fa],da.call(Wa,Wa.parentNode.__data__,Fa));else for(;++Fa<Na;)Ba(Wa=this[Fa],da);fb.enter=function(){return hb};fb.exit=function(){return xb};return fb};le.datum=function(da){return arguments.length?this.property("__data__",da):this.property("__data__")};
le.filter=function(da){var ua=[],Ba,Fa,Na;"function"!==typeof da&&(da=T(da));for(var Wa=0,ob=this.length;Wa<ob;Wa++){ua.push(Ba=[]);Ba.parentNode=(Fa=this[Wa]).parentNode;for(var hb=0,fb=Fa.length;hb<fb;hb++)(Na=Fa[hb])&&da.call(Na,Na.__data__,hb,Wa)&&Ba.push(Na)}return J(ua)};le.order=function(){for(var da=-1,ua=this.length;++da<ua;)for(var Ba=this[da],Fa=Ba.length-1,Na=Ba[Fa],Wa;0<=--Fa;)if(Wa=Ba[Fa])Na&&Na!==Wa.nextSibling&&Na.parentNode.insertBefore(Wa,Na),Na=Wa;return this};le.sort=function(da){da=
U.apply(this,arguments);for(var ua=-1,Ba=this.length;++ua<Ba;)this[ua].sort(da);return this.order()};le.each=function(da){return ha(this,function(ua,Ba,Fa){da.call(ua,ua.__data__,Ba,Fa)})};le.call=function(da){var ua=bc(arguments);da.apply(ua[0]=this,ua);return this};le.empty=function(){return!this.node()};le.node=function(){for(var da=0,ua=this.length;da<ua;da++)for(var Ba=this[da],Fa=0,Na=Ba.length;Fa<Na;Fa++){var Wa=Ba[Fa];if(Wa)return Wa}return null};le.size=function(){var da=0;ha(this,function(){++da});
return da};var ge=[];Qa.selection.enter=Y;Qa.selection.enter.prototype=ge;ge.append=le.append;ge.empty=le.empty;ge.node=le.node;ge.call=le.call;ge.size=le.size;ge.select=function(da){for(var ua=[],Ba,Fa,Na,Wa,ob,hb=-1,fb=this.length;++hb<fb;){Na=(Wa=this[hb]).update;ua.push(Ba=[]);Ba.parentNode=Wa.parentNode;for(var xb=-1,Fb=Wa.length;++xb<Fb;)(ob=Wa[xb])?(Ba.push(Na[xb]=Fa=da.call(Wa.parentNode,ob.__data__,xb,hb)),Fa.__data__=ob.__data__):Ba.push(null)}return J(ua)};ge.insert=function(da,ua){2>arguments.length&&
(ua=ba(this));return le.insert.call(this,da,ua)};Qa.select=function(da){if("string"===typeof da){var ua=[ae(da,gc)];ua.parentNode=gc.documentElement}else ua=[da],ua.parentNode=da&&(da.ownerDocument||da.document||da).documentElement;return J([ua])};Qa.selectAll=function(da){"string"===typeof da?(da=bc(gf(da,gc)),da.parentNode=gc.documentElement):(da=bc(da),da.parentNode=null);return J([da])};le.on=function(da,ua,Ba){var Fa=arguments.length;if(3>Fa){if("string"!==typeof da){2>Fa&&(ua=!1);for(Ba in da)this.each(ja(Ba,
da[Ba],ua));return this}if(2>Fa)return(Fa=this.node()["__on"+da])&&Fa._;Ba=!1}return this.each(ja(da,ua,Ba))};var Ge=Qa.map({mouseenter:"mouseover",mouseleave:"mouseout"});gc&&Ge.forEach(function(da){"on"+da in gc&&Ge.remove(da)});var nf,Cf=0;Qa.mouse=function(da){return xa(da,y())};var If=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;Qa.touch=function(da,ua,Ba){3>arguments.length&&(Ba=ua,ua=y().changedTouches);if(ua)for(var Fa=0,Na=ua.length,Wa;Fa<Na;++Fa)if((Wa=ua[Fa]).identifier===
Ba)return xa(da,Wa)};Qa.behavior.drag=function(){function da(){this.on("mousedown.drag",Na).on("touchstart.drag",Wa)}function ua(ob,hb,fb,xb,Fb){return function(){var Tb=Qa.event.target.correspondingElement||Qa.event.target,nc=this.parentNode,kc=Ba.of(this,arguments),Cc=0,Oc=ob(),Gc=".drag"+(null==Oc?"":"-"+Oc),Yc=Qa.select(fb(Tb)).on(xb+Gc,function(){var Md=hb(nc,Oc);if(Md){var zd=Md[0]-pd[0];var ee=Md[1]-pd[1];Cc|=zd|ee;pd=Md;kc({type:"drag",x:Md[0]+sd[0],y:Md[1]+sd[1],dx:zd,dy:ee})}}).on(Fb+Gc,
function(){hb(nc,Oc)&&(Yc.on(xb+Gc,null).on(Fb+Gc,null),ld(Cc),kc({type:"dragend"}))}),ld=oa(Tb),pd=hb(nc,Oc);if(Fa){var sd=Fa.apply(this,arguments);sd=[sd.x-pd[0],sd.y-pd[1]]}else sd=[0,0];kc({type:"dragstart"})}}var Ba=F(da,"drag","dragstart","dragend"),Fa=null,Na=ua(A,Qa.mouse,p,"mousemove","mouseup"),Wa=ua(ra,Qa.touch,x,"touchmove","touchend");da.origin=function(ob){if(!arguments.length)return Fa;Fa=ob;return da};return Qa.rebind(da,Ba,"on")};Qa.touches=function(da,ua){2>arguments.length&&(ua=
y().touches);return ua?bc(ua).map(function(Ba){var Fa=xa(da,Ba);Fa.identifier=Ba.identifier;return Fa}):[]};var af=Math.PI,Ye=2*af,hg=Ye-1E-6,eg=af/2,tg=af/180,Sf=180/af,Ie=Math.SQRT2;Qa.interpolateZoom=function(da,ua){var Ba=da[0],Fa=da[1],Na=da[2];da=ua[2];var Wa=ua[0]-Ba,ob=ua[1]-Fa,hb=Wa*Wa+ob*ob;if(1E-12>hb){var fb=Math.log(da/Na)/Ie;da=function(Tb){return[Ba+Tb*Wa,Fa+Tb*ob,Na*Math.exp(Ie*Tb*fb)]}}else{var xb=Math.sqrt(hb);ua=(da*da-Na*Na+4*hb)/(4*Na*xb);da=(da*da-Na*Na-4*hb)/(4*da*xb);var Fb=
Math.log(Math.sqrt(ua*ua+1)-ua);fb=(Math.log(Math.sqrt(da*da+1)-da)-Fb)/Ie;da=function(Tb){Tb*=fb;var nc=na(Fb),kc=Ie*Tb+Fb;var Cc=((kc=Math.exp(2*kc))-1)/(kc+1);var Oc=Fb;kc=((Oc=Math.exp(Oc))-1/Oc)/2;Cc=Na/(2*xb)*(nc*Cc-kc);return[Ba+Cc*Wa,Fa+Cc*ob,Na*nc/na(Ie*Tb+Fb)]}}da.duration=1E3*fb;return da};Qa.behavior.zoom=function(){function da(Pd){Pd.on("mousedown.zoom",xb).on(ah+".zoom",Tb).on("dblclick.zoom",nc).on("touchstart.zoom",Fb)}function ua(Pd){return[(Pd[0]-kc.x)/kc.k,(Pd[1]-kc.y)/kc.k]}function Ba(Pd){kc.k=
Math.max(ld[0],Math.min(ld[1],Pd))}function Fa(Pd,mf){mf=[mf[0]*kc.k+kc.x,mf[1]*kc.k+kc.y];kc.x+=Pd[0]-mf[0];kc.y+=Pd[1]-mf[1]}function Na(Pd,mf,Uf,xf){Pd.__chart__={x:kc.x,y:kc.y,k:kc.k};Ba(Math.pow(2,xf));Fa(Oc=mf,Uf);Pd=Qa.select(Pd);0<pd&&(Pd=Pd.transition().duration(pd));Pd.call(da.event)}function Wa(){je&&je.domain(ce.range().map(function(Pd){return(Pd-kc.x)/kc.k}).map(ce.invert));re&&re.domain(lf.range().map(function(Pd){return(Pd-kc.y)/kc.k}).map(lf.invert))}function ob(Pd){sd++||Pd({type:"zoomstart"})}
function hb(Pd){Wa();Pd({type:"zoom",scale:kc.k,translate:[kc.x,kc.y]})}function fb(Pd){--sd||(Pd({type:"zoomend"}),Oc=null)}function xb(){var Pd=this,mf=ee.of(Pd,arguments),Uf=0,xf=Qa.select(p(Pd)).on("mousemove.zoom",function(){Uf=1;Fa(Qa.mouse(Pd),Jf);hb(mf)}).on("mouseup.zoom",function(){xf.on("mousemove.zoom",null).on("mouseup.zoom",null);Gf(Uf);fb(mf)}),Jf=ua(Qa.mouse(Pd)),Gf=oa(Pd);jf.call(Pd);ob(mf)}function Fb(){function Pd(){var lg=Qa.touches(Jf);pg=kc.k;lg.forEach(function(bg){bg.identifier in
Ef&&(Ef[bg.identifier]=ua(bg))});return lg}function mf(){var lg=Qa.event.target;Qa.select(lg).on(bh,Uf).on(xi,xf);hj.push(lg);lg=Qa.event.changedTouches;for(var bg=0,ph=lg.length;bg<ph;++bg)Ef[lg[bg].identifier]=null;bg=Pd();ph=Date.now();1===bg.length?(500>ph-zd&&(lg=bg[0],Na(Jf,lg,Ef[lg.identifier],Math.floor(Math.log(kc.k)/Math.LN2)+1),v()),zd=ph):1<bg.length&&(lg=bg[0],ph=bg[1],bg=lg[0]-ph[0],lg=lg[1]-ph[1],fg=bg*bg+lg*lg)}function Uf(){var lg=Qa.touches(Jf),bg;jf.call(Jf);for(var ph=0,Wj=lg.length;ph<
Wj;++ph,bg=null){var xh=lg[ph];if(bg=Ef[xh.identifier]){if(ij)break;var fi=xh;var ij=bg}}if(bg){var Ag=(Ag=xh[0]-fi[0])*Ag+(Ag=xh[1]-fi[1])*Ag;lg=fg&&Math.sqrt(Ag/fg);fi=[(fi[0]+xh[0])/2,(fi[1]+xh[1])/2];ij=[(ij[0]+bg[0])/2,(ij[1]+bg[1])/2];Ba(lg*pg)}zd=null;Fa(fi,ij);hb(Gf)}function xf(){if(Qa.event.touches.length){for(var lg=Qa.event.changedTouches,bg=0,ph=lg.length;bg<ph;++bg)delete Ef[lg[bg].identifier];for(var Wj in Ef)return void Pd()}Qa.selectAll(hj).on(rg,null);xg.on("mousedown.zoom",xb).on("touchstart.zoom",
Fb);Ki();fb(Gf)}var Jf=this,Gf=ee.of(Jf,arguments),Ef={},fg=0,pg,rg=".zoom-"+Qa.event.changedTouches[0].identifier,bh="touchmove"+rg,xi="touchend"+rg,hj=[],xg=Qa.select(Jf),Ki=oa(Jf);mf();ob(Gf);xg.on("mousedown.zoom",null).on("touchstart.zoom",mf)}function Tb(){var Pd=ee.of(this,arguments);Md?clearTimeout(Md):(jf.call(this),Cc=ua(Oc=Gc||Qa.mouse(this)),ob(Pd));Md=setTimeout(function(){Md=null;fb(Pd)},50);v();Ba(Math.pow(2,.002*Eg())*kc.k);Fa(Oc,Cc);hb(Pd)}function nc(){var Pd=Qa.mouse(this),mf=Math.log(kc.k)/
Math.LN2;Na(this,Pd,ua(Pd),Qa.event.shiftKey?Math.ceil(mf)-1:Math.floor(mf)+1)}var kc={x:0,y:0,k:1},Cc,Oc,Gc,Yc=[960,500],ld=Of,pd=250,sd=0,Md,zd,ee=F(da,"zoomstart","zoom","zoomend"),ce,je,lf,re;ah||(ah="onwheel"in gc?(Eg=function(){return-Qa.event.deltaY*(Qa.event.deltaMode?120:1)},"wheel"):"onmousewheel"in gc?(Eg=function(){return Qa.event.wheelDelta},"mousewheel"):(Eg=function(){return-Qa.event.detail},"MozMousePixelScroll"));da.event=function(Pd){Pd.each(function(){var mf=ee.of(this,arguments),
Uf=kc;pf?Qa.select(this).transition().each("start.zoom",function(){kc=this.__chart__||{x:0,y:0,k:1};ob(mf)}).tween("zoom:zoom",function(){var xf=Yc[0],Jf=Yc[1],Gf=Oc?Oc[0]:xf/2,Ef=Oc?Oc[1]:Jf/2,fg=Qa.interpolateZoom([(Gf-kc.x)/kc.k,(Ef-kc.y)/kc.k,xf/kc.k],[(Gf-Uf.x)/Uf.k,(Ef-Uf.y)/Uf.k,xf/Uf.k]);return function(pg){pg=fg(pg);var rg=xf/pg[2];this.__chart__=kc={x:Gf-pg[0]*rg,y:Ef-pg[1]*rg,k:rg};hb(mf)}}).each("interrupt.zoom",function(){fb(mf)}).each("end.zoom",function(){fb(mf)}):(this.__chart__=kc,
ob(mf),hb(mf),fb(mf))})};da.translate=function(Pd){if(!arguments.length)return[kc.x,kc.y];kc={x:+Pd[0],y:+Pd[1],k:kc.k};Wa();return da};da.scale=function(Pd){if(!arguments.length)return kc.k;kc={x:kc.x,y:kc.y,k:null};Ba(+Pd);Wa();return da};da.scaleExtent=function(Pd){if(!arguments.length)return ld;ld=null==Pd?Of:[+Pd[0],+Pd[1]];return da};da.center=function(Pd){if(!arguments.length)return Gc;Gc=Pd&&[+Pd[0],+Pd[1]];return da};da.size=function(Pd){if(!arguments.length)return Yc;Yc=Pd&&[+Pd[0],+Pd[1]];
return da};da.duration=function(Pd){if(!arguments.length)return pd;pd=+Pd;return da};da.x=function(Pd){if(!arguments.length)return je;je=Pd;ce=Pd.copy();kc={x:0,y:0,k:1};return da};da.y=function(Pd){if(!arguments.length)return re;re=Pd;lf=Pd.copy();kc={x:0,y:0,k:1};return da};return Qa.rebind(da,ee,"on")};var Of=[0,Infinity],Eg,ah;Qa.color=qa;qa.prototype.toString=function(){return this.rgb()+""};Qa.hsl=ta;var Wi=ta.prototype=new qa;Wi.brighter=function(da){da=Math.pow(.7,arguments.length?da:1);return new ta(this.h,
this.s,this.l/da)};Wi.darker=function(da){da=Math.pow(.7,arguments.length?da:1);return new ta(this.h,this.s,da*this.l)};Wi.rgb=function(){return za(this.h,this.s,this.l)};Qa.hcl=Ia;var Li=Ia.prototype=new qa;Li.brighter=function(da){return new Ia(this.h,this.c,Math.min(100,this.l+Xi*(arguments.length?da:1)))};Li.darker=function(da){return new Ia(this.h,this.c,Math.max(0,this.l-Xi*(arguments.length?da:1)))};Li.rgb=function(){return Xa(this.h,this.c,this.l).rgb()};Qa.lab=$a;var Xi=18,uh=.95047,Ji=1,
Vh=1.08883,jj=$a.prototype=new qa;jj.brighter=function(da){return new $a(Math.min(100,this.l+Xi*(arguments.length?da:1)),this.a,this.b)};jj.darker=function(da){return new $a(Math.max(0,this.l-Xi*(arguments.length?da:1)),this.a,this.b)};jj.rgb=function(){return gb(this.l,this.a,this.b)};Qa.rgb=Bb;var yh=Bb.prototype=new qa;yh.brighter=function(da){da=Math.pow(.7,arguments.length?da:1);var ua=this.r,Ba=this.g,Fa=this.b;if(!ua&&!Ba&&!Fa)return new Bb(30,30,30);ua&&30>ua&&(ua=30);Ba&&30>Ba&&(Ba=30);Fa&&
30>Fa&&(Fa=30);return new Bb(Math.min(255,ua/da),Math.min(255,Ba/da),Math.min(255,Fa/da))};yh.darker=function(da){da=Math.pow(.7,arguments.length?da:1);return new Bb(da*this.r,da*this.g,da*this.b)};yh.hsl=function(){return Ab(this.r,this.g,this.b)};yh.toString=function(){return"#"+wb(this.r)+wb(this.g)+wb(this.b)};var kg=Qa.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,
brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,
darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,
lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,
mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,
rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});kg.forEach(function(da,
ua){kg.set(da,new Bb(ua>>16,ua>>8&255,ua&255))});Qa.functor=Aa;Qa.xhr=Ka(x);Qa.dsv=function(da,ua){function Ba(xb,Fb,Tb){3>arguments.length&&(Tb=Fb,Fb=null);var nc=Ta(xb,ua,null==Fb?Fa:Na(Fb),Tb);nc.row=function(kc){return arguments.length?nc.response(null==(Fb=kc)?Fa:Na(kc)):Fb};return nc}function Fa(xb){return Ba.parse(xb.responseText)}function Na(xb){return function(Fb){return Ba.parse(Fb.responseText,xb)}}function Wa(xb){return xb.map(ob).join(da)}function ob(xb){return hb.test(xb)?'"'+xb.replace(/"/g,
'""')+'"':xb}var hb=new RegExp('["'+da+"\n]"),fb=da.charCodeAt(0);Ba.parse=function(xb,Fb){var Tb;return Ba.parseRows(xb,function(nc,kc){if(Tb)return Tb(nc,kc-1);var Cc=function(Oc){for(var Gc={},Yc=nc.length,ld=0;ld<Yc;++ld)Gc[nc[ld]]=Oc[ld];return Gc};Tb=Fb?function(Oc,Gc){return Fb(Cc(Oc),Gc)}:Cc})};Ba.parseRows=function(xb,Fb){function Tb(){if(Gc>=Oc)return kc;if(pd)return pd=!1,nc;var Md=Gc;if(34===xb.charCodeAt(Md)){for(var zd=Md;zd++<Oc;)if(34===xb.charCodeAt(zd)){if(34!==xb.charCodeAt(zd+
1))break;++zd}Gc=zd+2;var ee=xb.charCodeAt(zd+1);13===ee?(pd=!0,10===xb.charCodeAt(zd+2)&&++Gc):10===ee&&(pd=!0);return xb.slice(Md+1,zd).replace(/""/g,'"')}for(;Gc<Oc;){ee=xb.charCodeAt(Gc++);zd=1;if(10===ee)pd=!0;else if(13===ee)pd=!0,10===xb.charCodeAt(Gc)&&(++Gc,++zd);else if(ee!==fb)continue;return xb.slice(Md,Gc-zd)}return xb.slice(Md)}for(var nc={},kc={},Cc=[],Oc=xb.length,Gc=0,Yc=0,ld,pd;(ld=Tb())!==kc;){for(var sd=[];ld!==nc&&ld!==kc;)sd.push(ld),ld=Tb();Fb&&null==(sd=Fb(sd,Yc++))||Cc.push(sd)}return Cc};
Ba.format=function(xb){if(Array.isArray(xb[0]))return Ba.formatRows(xb);var Fb=new w,Tb=[];xb.forEach(function(nc){for(var kc in nc)Fb.has(kc)||Tb.push(Fb.add(kc))});return[Tb.map(ob).join(da)].concat(xb.map(function(nc){return Tb.map(function(kc){return ob(nc[kc])}).join(da)})).join("\n")};Ba.formatRows=function(xb){return xb.map(Wa).join("\n")};return Ba};Qa.csv=Qa.dsv(",","text/csv");Qa.tsv=Qa.dsv("\t","text/tab-separated-values");var ci,Rg,di,Mh,ri=this[B(this,"requestAnimationFrame")]||function(da){setTimeout(da,
17)};Qa.timer=function(){cb.apply(this,arguments)};Qa.timer.flush=function(){Pb();fc()};Qa.round=function(da,ua){return ua?Math.round(da*(ua=Math.pow(10,ua)))/ua:Math.round(da)};Qa.geom={};Qa.geom.hull=function(da){function ua(Na){if(3>Na.length)return[];var Wa=Aa(Ba),ob=Aa(Fa),hb,fb=Na.length,xb=[],Fb=[];for(hb=0;hb<fb;hb++)xb.push([+Wa.call(this,Na[hb],hb),+ob.call(this,Na[hb],hb),hb]);xb.sort(xc);for(hb=0;hb<fb;hb++)Fb.push([xb[hb][0],-xb[hb][1]]);Wa=Rb(xb);Fb=Rb(Fb);ob=Fb[0]===Wa[0];fb=Fb[Fb.length-
1]===Wa[Wa.length-1];var Tb=[];for(hb=Wa.length-1;0<=hb;--hb)Tb.push(Na[xb[Wa[hb]][2]]);for(hb=+ob;hb<Fb.length-fb;++hb)Tb.push(Na[xb[Fb[hb]][2]]);return Tb}var Ba=pb,Fa=Db;if(arguments.length)return ua(da);ua.x=function(Na){return arguments.length?(Ba=Na,ua):Ba};ua.y=function(Na){return arguments.length?(Fa=Na,ua):Fa};return ua};Qa.geom.polygon=function(da){fe(da,Ph);return da};var Ph=Qa.geom.polygon.prototype=[];Ph.area=function(){for(var da=-1,ua=this.length,Ba,Fa=this[ua-1],Na=0;++da<ua;)Ba=Fa,
Fa=this[da],Na+=Ba[1]*Fa[0]-Ba[0]*Fa[1];return.5*Na};Ph.centroid=function(da){var ua=-1,Ba=this.length,Fa=0,Na=0,Wa=this[Ba-1];for(arguments.length||(da=-1/(6*this.area()));++ua<Ba;){var ob=Wa;Wa=this[ua];var hb=ob[0]*Wa[1]-Wa[0]*ob[1];Fa+=(ob[0]+Wa[0])*hb;Na+=(ob[1]+Wa[1])*hb}return[Fa*da,Na*da]};Ph.clip=function(da){for(var ua,Ba=Pa(da),Fa=-1,Na=this.length-Pa(this),Wa,ob,hb=this[Na-1],fb,xb,Fb;++Fa<Na;){ua=da.slice();da.length=0;fb=this[Fa];xb=ua[(ob=ua.length-Ba)-1];for(Wa=-1;++Wa<ob;)Fb=ua[Wa],
Ic(Fb,hb,fb)?(Ic(xb,hb,fb)||da.push(Ja(xb,Fb,hb,fb)),da.push(Fb)):Ic(xb,hb,fb)&&da.push(Ja(xb,Fb,hb,fb)),xb=Fb;Ba&&da.push(da[0]);hb=fb}return da};var ui,zg,Ue,Dg=[],Sg,ti,si=[];uc.prototype.prepare=function(){for(var da=this.edges,ua=da.length,Ba;ua--;)Ba=da[ua].edge,Ba.b&&Ba.a||da.splice(ua,1);da.sort(fd);return da.length};sc.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};pc.prototype={insert:function(da,
ua){var Ba;if(da){ua.P=da;if(ua.N=da.N)da.N.P=ua;da.N=ua;if(da.R){for(da=da.R;da.L;)da=da.L;da.L=ua}else da.R=ua;var Fa=da}else this._?(da=yb(this._),ua.P=null,ua.N=da,da.P=da.L=ua,Fa=da):(ua.P=ua.N=null,this._=ua,Fa=null);ua.L=ua.R=null;ua.U=Fa;ua.C=!0;for(da=ua;Fa&&Fa.C;)ua=Fa.U,Fa===ua.L?(Ba=ua.R)&&Ba.C?(Fa.C=Ba.C=!1,ua.C=!0,da=ua):(da===Fa.R&&(Wb(this,Fa),da=Fa,Fa=da.U),Fa.C=!1,ua.C=!0,Ub(this,ua)):(Ba=ua.L)&&Ba.C?(Fa.C=Ba.C=!1,ua.C=!0,da=ua):(da===Fa.L&&(Ub(this,Fa),da=Fa,Fa=da.U),Fa.C=!1,ua.C=
!0,Wb(this,ua)),Fa=da.U;this._.C=!1},remove:function(da){da.N&&(da.N.P=da.P);da.P&&(da.P.N=da.N);da.N=da.P=null;var ua=da.U,Ba=da.L,Fa=da.R;var Na=Ba?Fa?yb(Fa):Ba:Fa;ua?ua.L===da?ua.L=Na:ua.R=Na:this._=Na;if(Ba&&Fa){var Wa=Na.C;Na.C=da.C;Na.L=Ba;Ba.U=Na;Na!==Fa?(ua=Na.U,Na.U=da.U,da=Na.R,ua.L=da,Na.R=Fa,Fa.U=Na):(Na.U=ua,ua=Na,da=Na.R)}else Wa=da.C,da=Na;da&&(da.U=ua);if(!Wa)if(da&&da.C)da.C=!1;else{do{if(da===this._)break;if(da===ua.L){if(da=ua.R,da.C&&(da.C=!1,ua.C=!0,Wb(this,ua),da=ua.R),da.L&&
da.L.C||da.R&&da.R.C){da.R&&da.R.C||(da.L.C=!1,da.C=!0,Ub(this,da),da=ua.R);da.C=ua.C;ua.C=da.R.C=!1;Wb(this,ua);da=this._;break}}else if(da=ua.L,da.C&&(da.C=!1,ua.C=!0,Ub(this,ua),da=ua.L),da.L&&da.L.C||da.R&&da.R.C){da.L&&da.L.C||(da.R.C=!1,da.C=!0,Wb(this,da),da=ua.L);da.C=ua.C;ua.C=da.L.C=!1;Ub(this,ua);da=this._;break}da.C=!0;da=ua;ua=ua.U}while(!da.C);da&&(da.C=!1)}}};Qa.geom.voronoi=function(da){function ua(fb){var xb=Array(fb.length),Fb=hb[0][0],Tb=hb[0][1],nc=hb[1][0],kc=hb[1][1];ac(Ba(fb),
hb).cells.forEach(function(Cc,Oc){var Gc=Cc.edges;Cc=Cc.site;(xb[Oc]=Gc.length?Gc.map(function(Yc){Yc=Yc.start();return[Yc.x,Yc.y]}):Cc.x>=Fb&&Cc.x<=nc&&Cc.y>=Tb&&Cc.y<=kc?[[Fb,kc],[nc,kc],[nc,Tb],[Fb,Tb]]:[]).point=fb[Oc]});return xb}function Ba(fb){return fb.map(function(xb,Fb){return{x:1E-6*Math.round(Wa(xb,Fb)/1E-6),y:1E-6*Math.round(ob(xb,Fb)/1E-6),i:Fb}})}var Fa=pb,Na=Db,Wa=Fa,ob=Na,hb=mb;if(da)return ua(da);ua.links=function(fb){return ac(Ba(fb)).edges.filter(function(xb){return xb.l&&xb.r}).map(function(xb){return{source:fb[xb.l.i],
target:fb[xb.r.i]}})};ua.triangles=function(fb){var xb=[];ac(Ba(fb)).cells.forEach(function(Fb,Tb){var nc=Fb.site;Fb=Fb.edges.sort(fd);var kc=-1,Cc=Fb.length,Oc=Fb[Cc-1].edge;for(Oc=Oc.l===nc?Oc.r:Oc.l;++kc<Cc;){var Gc=Oc;Oc=Fb[kc].edge;Oc=Oc.l===nc?Oc.r:Oc.l;Tb<Gc.i&&Tb<Oc.i&&0>(nc.x-Oc.x)*(Gc.y-nc.y)-(nc.x-Gc.x)*(Oc.y-nc.y)&&xb.push([fb[Tb],fb[Gc.i],fb[Oc.i]])}});return xb};ua.x=function(fb){return arguments.length?(Wa=Aa(Fa=fb),ua):Fa};ua.y=function(fb){return arguments.length?(ob=Aa(Na=fb),ua):
Na};ua.clipExtent=function(fb){if(!arguments.length)return hb===mb?null:hb;hb=null==fb?mb:fb;return ua};ua.size=function(fb){return arguments.length?ua.clipExtent(fb&&[[0,0],fb]):hb===mb?null:hb&&hb[1]};return ua};var mb=[[-1E6,-1E6],[1E6,1E6]];Qa.geom.delaunay=function(da){return Qa.geom.voronoi().triangles(da)};Qa.geom.quadtree=function(da,ua,Ba,Fa,Na){function Wa(xb){function Fb(je,lf,re,Pd,mf,Uf,xf,Jf){if(!isNaN(re)&&!isNaN(Pd))if(je.leaf){var Gf=je.x,Ef=je.y;if(null!=Gf){if(!(.01>xd(Gf-re)+xd(Ef-
Pd))){var fg=je.point;je.x=je.y=je.point=null;Tb(je,fg,Gf,Ef,mf,Uf,xf,Jf)}Tb(je,lf,re,Pd,mf,Uf,xf,Jf)}else je.x=re,je.y=Pd,je.point=lf}else Tb(je,lf,re,Pd,mf,Uf,xf,Jf)}function Tb(je,lf,re,Pd,mf,Uf,xf,Jf){var Gf=.5*(mf+xf),Ef=.5*(Uf+Jf),fg=re>=Gf,pg=Pd>=Ef,rg=pg<<1|fg;je.leaf=!1;je=je.nodes[rg]||(je.nodes[rg]=Uc());fg?mf=Gf:xf=Gf;pg?Uf=Ef:Jf=Ef;Fb(je,lf,re,Pd,mf,Uf,xf,Jf)}var nc=Aa(ob),kc=Aa(hb),Cc;if(null!=ua){var Oc=ua;var Gc=Ba;var Yc=Fa;var ld=Na}else{Yc=ld=-(Oc=Gc=Infinity);var pd=[];var sd=
[];var Md=xb.length;if(fb)for(Cc=0;Cc<Md;++Cc){var zd=xb[Cc];zd.x<Oc&&(Oc=zd.x);zd.y<Gc&&(Gc=zd.y);zd.x>Yc&&(Yc=zd.x);zd.y>ld&&(ld=zd.y);pd.push(zd.x);sd.push(zd.y)}else for(Cc=0;Cc<Md;++Cc){var ee=+nc(zd=xb[Cc],Cc);zd=+kc(zd,Cc);ee<Oc&&(Oc=ee);zd<Gc&&(Gc=zd);ee>Yc&&(Yc=ee);zd>ld&&(ld=zd);pd.push(ee);sd.push(zd)}}ee=Yc-Oc;zd=ld-Gc;ee>zd?ld=Gc+ee:Yc=Oc+zd;var ce=Uc();ce.add=function(je){Fb(ce,je,+nc(je,++Cc),+kc(je,Cc),Oc,Gc,Yc,ld)};ce.visit=function(je){kd(je,ce,Oc,Gc,Yc,ld)};ce.find=function(je){return Bd(ce,
je[0],je[1],Oc,Gc,Yc,ld)};Cc=-1;if(null==ua){for(;++Cc<Md;)Fb(ce,xb[Cc],pd[Cc],sd[Cc],Oc,Gc,Yc,ld);--Cc}else xb.forEach(ce.add);pd=sd=xb=zd=null;return ce}var ob=pb,hb=Db,fb;if(fb=arguments.length)return ob=mc,hb=tc,3===fb&&(Na=Ba,Fa=ua,Ba=ua=0),Wa(da);Wa.x=function(xb){return arguments.length?(ob=xb,Wa):ob};Wa.y=function(xb){return arguments.length?(hb=xb,Wa):hb};Wa.extent=function(xb){if(!arguments.length)return null==ua?null:[[ua,Ba],[Fa,Na]];null==xb?ua=Ba=Fa=Na=null:(ua=+xb[0][0],Ba=+xb[0][1],
Fa=+xb[1][0],Na=+xb[1][1]);return Wa};Wa.size=function(xb){if(!arguments.length)return null==ua?null:[Fa-ua,Na-Ba];null==xb?ua=Ba=Fa=Na=null:(ua=Ba=0,Fa=+xb[0],Na=+xb[1]);return Wa};return Wa};Qa.interpolateRgb=Fd;Qa.interpolateObject=yd;Qa.interpolateNumber=Lc;Qa.interpolateString=cd;var S=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,X=new RegExp(S.source,"g");Qa.interpolate=Nc;Qa.interpolators=[function(da,ua){var Ba=typeof ua;return("string"===Ba?kg.has(ua.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(ua)?
Fd:cd:ua instanceof qa?Fd:Array.isArray(ua)?Xc:"object"===Ba&&isNaN(ua)?yd:Lc)(da,ua)}];Qa.interpolateArray=Xc;var V=function(){return x},ea=Qa.map({linear:V,poly:function(da){return function(ua){return Math.pow(ua,da)}},quad:function(){return Nd},cubic:function(){return Rd},sin:function(){return Se},exp:function(){return Ne},circle:function(){return te},elastic:function(da,ua){2>arguments.length&&(ua=.45);if(arguments.length)var Ba=ua/Ye*Math.asin(1/da);else da=1,Ba=ua/4;return function(Fa){return 1+
da*Math.pow(2,-10*Fa)*Math.sin((Fa-Ba)*Ye/ua)}},back:function(da){da||(da=1.70158);return function(ua){return ua*ua*((da+1)*ua-da)}},bounce:function(){return qf}}),va=Qa.map({"in":x,out:Sc,"in-out":id,"out-in":function(da){return id(Sc(da))}});Qa.ease=function(da){var ua=da.indexOf("-"),Ba=0<=ua?da.slice(0,ua):da;ua=0<=ua?da.slice(ua+1):"in";Ba=ea.get(Ba)||V;ua=va.get(ua)||x;return Zc(ua(Ba.apply(null,Ob.call(arguments,1))))};Qa.interpolateHcl=function(da,ua){da=Qa.hcl(da);ua=Qa.hcl(ua);var Ba=da.h,
Fa=da.c,Na=da.l,Wa=ua.h-Ba,ob=ua.c-Fa,hb=ua.l-Na;isNaN(ob)&&(ob=0,Fa=isNaN(Fa)?ua.c:Fa);isNaN(Wa)?(Wa=0,Ba=isNaN(Ba)?ua.h:Ba):180<Wa?Wa-=360:-180>Wa&&(Wa+=360);return function(fb){return Xa(Ba+Wa*fb,Fa+ob*fb,Na+hb*fb)+""}};Qa.interpolateHsl=function(da,ua){da=Qa.hsl(da);ua=Qa.hsl(ua);var Ba=da.h,Fa=da.s,Na=da.l,Wa=ua.h-Ba,ob=ua.s-Fa,hb=ua.l-Na;isNaN(ob)&&(ob=0,Fa=isNaN(Fa)?ua.s:Fa);isNaN(Wa)?(Wa=0,Ba=isNaN(Ba)?ua.h:Ba):180<Wa?Wa-=360:-180>Wa&&(Wa+=360);return function(fb){return za(Ba+Wa*fb,Fa+ob*
fb,Na+hb*fb)+""}};Qa.interpolateLab=function(da,ua){da=Qa.lab(da);ua=Qa.lab(ua);var Ba=da.l,Fa=da.a,Na=da.b,Wa=ua.l-Ba,ob=ua.a-Fa,hb=ua.b-Na;return function(fb){return gb(Ba+Wa*fb,Fa+ob*fb,Na+hb*fb)+""}};Qa.interpolateRound=sf;Qa.transform=function(da){var ua=gc.createElementNS(Qa.ns.prefix.svg,"g");return(Qa.transform=function(Ba){if(null!=Ba){ua.setAttribute("transform",Ba);var Fa=ua.transform.baseVal.consolidate()}return new of(Fa?Fa.matrix:Da)})(da)};of.prototype.toString=function(){return"translate("+
this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Da={a:1,b:0,c:0,d:1,e:0,f:0};Qa.interpolateTransform=Qe;Qa.layout={};Qa.layout.bundle=function(){return function(da){for(var ua=[],Ba=-1,Fa=da.length;++Ba<Fa;){var Na=ua,Wa=Na.push,ob=da[Ba],hb=ob.source;ob=ob.target;var fb=ob;if(hb===fb)var xb=hb;else{xb=df(hb);fb=df(fb);for(var Fb=xb.pop(),Tb=fb.pop(),nc=null;Fb===Tb;)nc=Fb,Fb=xb.pop(),Tb=fb.pop();xb=nc}for(fb=[hb];hb!==xb;)hb=hb.parent,fb.push(hb);for(hb=fb.length;ob!==
xb;)fb.splice(hb,0,ob),ob=ob.parent;Wa.call(Na,fb)}return ua}};Qa.layout.chord=function(){function da(){var Tb={},nc=[],kc=Qa.range(ob),Cc=[],Oc,Gc;Fa=[];Na=[];var Yc=0;for(Oc=-1;++Oc<ob;){var ld=0;for(Gc=-1;++Gc<ob;)ld+=Wa[Oc][Gc];nc.push(ld);Cc.push(Qa.range(ob));Yc+=ld}fb&&kc.sort(function(je,lf){return fb(nc[je],nc[lf])});xb&&Cc.forEach(function(je,lf){je.sort(function(re,Pd){return xb(Wa[lf][re],Wa[lf][Pd])})});Yc=(Ye-hb*ob)/Yc;ld=0;for(Oc=-1;++Oc<ob;){var pd=ld;for(Gc=-1;++Gc<ob;){var sd=kc[Oc],
Md=Cc[sd][Gc],zd=Wa[sd][Md],ee=ld,ce=ld+=zd*Yc;Tb[sd+"-"+Md]={index:sd,subindex:Md,startAngle:ee,endAngle:ce,value:zd}}Na[sd]={index:sd,startAngle:pd,endAngle:ld,value:nc[sd]};ld+=hb}for(Oc=-1;++Oc<ob;)for(Gc=Oc-1;++Gc<ob;)kc=Tb[Oc+"-"+Gc],Cc=Tb[Gc+"-"+Oc],(kc.value||Cc.value)&&Fa.push(kc.value<Cc.value?{source:Cc,target:kc}:{source:kc,target:Cc});Fb&&ua()}function ua(){Fa.sort(function(Tb,nc){return Fb((Tb.source.value+Tb.target.value)/2,(nc.source.value+nc.target.value)/2)})}var Ba={},Fa,Na,Wa,
ob,hb=0,fb,xb,Fb;Ba.matrix=function(Tb){if(!arguments.length)return Wa;ob=(Wa=Tb)&&Wa.length;Fa=Na=null;return Ba};Ba.padding=function(Tb){if(!arguments.length)return hb;hb=Tb;Fa=Na=null;return Ba};Ba.sortGroups=function(Tb){if(!arguments.length)return fb;fb=Tb;Fa=Na=null;return Ba};Ba.sortSubgroups=function(Tb){if(!arguments.length)return xb;xb=Tb;Fa=null;return Ba};Ba.sortChords=function(Tb){if(!arguments.length)return Fb;Fb=Tb;Fa&&ua();return Ba};Ba.chords=function(){Fa||da();return Fa};Ba.groups=
function(){Na||da();return Na};return Ba};Qa.layout.force=function(){function da(sd){return function(Md,zd,ee,ce){if(Md.point!==sd){ee=Md.cx-sd.x;var je=Md.cy-sd.y;zd=ce-zd;ce=ee*ee+je*je;if(zd*zd/Cc<ce)return ce<nc&&(zd=Md.charge/ce,sd.px-=ee*zd,sd.py-=je*zd),!0;Md.point&&ce&&ce<nc&&(zd=Md.pointCharge/ce,sd.px-=ee*zd,sd.py-=je*zd)}return!Md.charge}}function ua(sd){sd.px=Qa.event.x;sd.py=Qa.event.y;Ba.resume()}var Ba={},Fa=Qa.dispatch("start","tick","end"),Na,Wa=[1,1],ob,hb,fb=.9,xb=Ra,Fb=nb,Tb=-30,
nc=Nb,kc=.1,Cc=.64,Oc=[],Gc=[],Yc,ld,pd;Ba.tick=function(){if(.005>(hb*=.99))return Na=null,Fa.end({type:"end",alpha:hb=0}),!0;var sd=Oc.length,Md=Gc.length,zd,ee;for(zd=0;zd<Md;++zd){var ce=Gc[zd];var je=ce.source;var lf=ce.target;var re=lf.x-je.x;var Pd=lf.y-je.y;if(ee=re*re+Pd*Pd)ee=hb*ld[zd]*((ee=Math.sqrt(ee))-Yc[zd])/ee,re*=ee,Pd*=ee,lf.x-=re*(ee=je.weight+lf.weight?je.weight/(je.weight+lf.weight):.5),lf.y-=Pd*ee,je.x+=re*(ee=1-ee),je.y+=Pd*ee}if(ee=hb*kc)if(re=Wa[0]/2,Pd=Wa[1]/2,zd=-1,ee)for(;++zd<
sd;)ce=Oc[zd],ce.x+=(re-ce.x)*ee,ce.y+=(Pd-ce.y)*ee;if(Tb)for(Mc(Md=Qa.geom.quadtree(Oc),hb,pd),zd=-1;++zd<sd;)(ce=Oc[zd]).fixed||Md.visit(da(ce));for(zd=-1;++zd<sd;)ce=Oc[zd],ce.fixed?(ce.x=ce.px,ce.y=ce.py):(ce.x-=(ce.px-(ce.px=ce.x))*fb,ce.y-=(ce.py-(ce.py=ce.y))*fb);Fa.tick({type:"tick",alpha:hb})};Ba.nodes=function(sd){if(!arguments.length)return Oc;Oc=sd;return Ba};Ba.links=function(sd){if(!arguments.length)return Gc;Gc=sd;return Ba};Ba.size=function(sd){if(!arguments.length)return Wa;Wa=sd;
return Ba};Ba.linkDistance=function(sd){if(!arguments.length)return xb;xb="function"===typeof sd?sd:+sd;return Ba};Ba.distance=Ba.linkDistance;Ba.linkStrength=function(sd){if(!arguments.length)return Fb;Fb="function"===typeof sd?sd:+sd;return Ba};Ba.friction=function(sd){if(!arguments.length)return fb;fb=+sd;return Ba};Ba.charge=function(sd){if(!arguments.length)return Tb;Tb="function"===typeof sd?sd:+sd;return Ba};Ba.chargeDistance=function(sd){if(!arguments.length)return Math.sqrt(nc);nc=sd*sd;
return Ba};Ba.gravity=function(sd){if(!arguments.length)return kc;kc=+sd;return Ba};Ba.theta=function(sd){if(!arguments.length)return Math.sqrt(Cc);Cc=sd*sd;return Ba};Ba.alpha=function(sd){if(!arguments.length)return hb;sd=+sd;hb?0<sd?hb=sd:(Na.c=null,Na.t=NaN,Na=null,Fa.end({type:"end",alpha:hb=0})):0<sd&&(Fa.start({type:"start",alpha:hb=sd}),Na=cb(Ba.tick));return Ba};Ba.start=function(){function sd(Pd,mf){if(!lf){lf=Array(zd);for(xf=0;xf<zd;++xf)lf[xf]=[];for(xf=0;xf<ee;++xf){var Uf=Gc[xf];lf[Uf.source.index].push(Uf.target);
lf[Uf.target.index].push(Uf.source)}}Uf=lf[Md];for(var xf=-1,Jf=Uf.length,Gf;++xf<Jf;)if(!isNaN(Gf=Uf[xf][Pd]))return Gf;return Math.random()*mf}var Md,zd=Oc.length,ee=Gc.length,ce=Wa[0],je=Wa[1],lf,re;for(Md=0;Md<zd;++Md)(re=Oc[Md]).index=Md,re.weight=0;for(Md=0;Md<ee;++Md)re=Gc[Md],"number"==typeof re.source&&(re.source=Oc[re.source]),"number"==typeof re.target&&(re.target=Oc[re.target]),++re.source.weight,++re.target.weight;for(Md=0;Md<zd;++Md)re=Oc[Md],isNaN(re.x)&&(re.x=sd("x",ce)),isNaN(re.y)&&
(re.y=sd("y",je)),isNaN(re.px)&&(re.px=re.x),isNaN(re.py)&&(re.py=re.y);Yc=[];if("function"===typeof xb)for(Md=0;Md<ee;++Md)Yc[Md]=+xb.call(this,Gc[Md],Md);else for(Md=0;Md<ee;++Md)Yc[Md]=xb;ld=[];if("function"===typeof Fb)for(Md=0;Md<ee;++Md)ld[Md]=+Fb.call(this,Gc[Md],Md);else for(Md=0;Md<ee;++Md)ld[Md]=Fb;pd=[];if("function"===typeof Tb)for(Md=0;Md<zd;++Md)pd[Md]=+Tb.call(this,Oc[Md],Md);else for(Md=0;Md<zd;++Md)pd[Md]=Tb;return Ba.resume()};Ba.resume=function(){return Ba.alpha(.1)};Ba.stop=function(){return Ba.alpha(0)};
Ba.drag=function(){ob||(ob=Qa.behavior.drag().origin(x).on("dragstart.force",Rc).on("drag.force",ua).on("dragend.force",Gd));if(!arguments.length)return ob;this.on("mouseover.force",Mb).on("mouseout.force",$b).call(ob)};return Qa.rebind(Ba,Fa,"on")};var Ra=20,nb=1,Nb=Infinity;Qa.layout.hierarchy=function(){function da(Na){var Wa=[Na],ob=[],hb;for(Na.depth=0;null!=(hb=Wa.pop());)if(ob.push(hb),(xb=Ba.call(da,hb,hb.depth))&&(fb=xb.length)){for(var fb,xb,Fb;0<=--fb;)Wa.push(Fb=xb[fb]),Fb.parent=hb,Fb.depth=
hb.depth+1;Fa&&(hb.value=0);hb.children=xb}else Fa&&(hb.value=+Fa.call(da,hb,hb.depth)||0),delete hb.children;qe(Na,function(Tb){var nc,kc;ua&&(nc=Tb.children)&&nc.sort(ua);Fa&&(kc=Tb.parent)&&(kc.value+=Tb.value)});return ob}var ua=Be,Ba=Id,Fa=ue;da.sort=function(Na){if(!arguments.length)return ua;ua=Na;return da};da.children=function(Na){if(!arguments.length)return Ba;Ba=Na;return da};da.value=function(Na){if(!arguments.length)return Fa;Fa=Na;return da};da.revalue=function(Na){Fa&&(qd(Na,function(Wa){Wa.children&&
(Wa.value=0)}),qe(Na,function(Wa){var ob;Wa.children||(Wa.value=+Fa.call(da,Wa,Wa.depth)||0);if(ob=Wa.parent)ob.value+=Wa.value}));return Na};return da};Qa.layout.partition=function(){function da(Wa,ob,hb,fb){var xb=Wa.children;Wa.x=ob;Wa.y=Wa.depth*fb;Wa.dx=hb;Wa.dy=fb;if(xb&&(Tb=xb.length)){var Fb=-1,Tb,nc;for(hb=Wa.value?hb/Wa.value:0;++Fb<Tb;)da(nc=xb[Fb],ob,Wa=nc.value*hb,fb),ob+=Wa}}function ua(Wa){Wa=Wa.children;var ob=0;if(Wa&&(fb=Wa.length))for(var hb=-1,fb;++hb<fb;)ob=Math.max(ob,ua(Wa[hb]));
return 1+ob}function Ba(Wa,ob){Wa=Fa.call(this,Wa,ob);da(Wa[0],0,Na[0],Na[1]/ua(Wa[0]));return Wa}var Fa=Qa.layout.hierarchy(),Na=[1,1];Ba.size=function(Wa){if(!arguments.length)return Na;Na=Wa;return Ba};return Hd(Ba,Fa)};Qa.layout.pie=function(){function da(ob){var hb=ob.length,fb=ob.map(function(Yc,ld){return+ua.call(da,Yc,ld)}),xb=+("function"===typeof Fa?Fa.apply(this,arguments):Fa),Fb=("function"===typeof Na?Na.apply(this,arguments):Na)-xb,Tb=Math.min(Math.abs(Fb)/hb,+("function"===typeof Wa?
Wa.apply(this,arguments):Wa)),nc=Tb*(0>Fb?-1:1),kc=Qa.sum(fb),Cc=kc?(Fb-hb*nc)/kc:0;hb=Qa.range(hb);var Oc=[],Gc;null!=Ba&&hb.sort(Ba===Xb?function(Yc,ld){return fb[ld]-fb[Yc]}:function(Yc,ld){return Ba(ob[Yc],ob[ld])});hb.forEach(function(Yc){Oc[Yc]={data:ob[Yc],value:Gc=fb[Yc],startAngle:xb,endAngle:xb+=Gc*Cc+nc,padAngle:Tb}});return Oc}var ua=Number,Ba=Xb,Fa=0,Na=Ye,Wa=0;da.value=function(ob){if(!arguments.length)return ua;ua=ob;return da};da.sort=function(ob){if(!arguments.length)return Ba;Ba=
ob;return da};da.startAngle=function(ob){if(!arguments.length)return Fa;Fa=ob;return da};da.endAngle=function(ob){if(!arguments.length)return Na;Na=ob;return da};da.padAngle=function(ob){if(!arguments.length)return Wa;Wa=ob;return da};return da};var Xb={};Qa.layout.stack=function(){function da(hb,fb){if(!(nc=hb.length))return hb;var xb=hb.map(function(Gc,Yc){return ua.call(da,Gc,Yc)}),Fb=xb.map(function(Gc){return Gc.map(function(Yc,ld){return[Wa.call(da,Yc,ld),ob.call(da,Yc,ld)]})}),Tb=Ba.call(da,
Fb,fb);xb=Qa.permute(xb,Tb);Fb=Qa.permute(Fb,Tb);fb=Fa.call(da,Fb,fb);Tb=xb[0].length;var nc,kc,Cc,Oc;for(Cc=0;Cc<Tb;++Cc)for(Na.call(da,xb[0][Cc],Oc=fb[Cc],Fb[0][Cc][1]),kc=1;kc<nc;++kc)Na.call(da,xb[kc][Cc],Oc+=Fb[kc-1][Cc][1],Fb[kc][Cc][1]);return hb}var ua=x,Ba=Bc,Fa=bd,Na=Yb,Wa=zb,ob=qc;da.values=function(hb){if(!arguments.length)return ua;ua=hb;return da};da.order=function(hb){if(!arguments.length)return Ba;Ba="function"===typeof hb?hb:jc.get(hb)||Bc;return da};da.offset=function(hb){if(!arguments.length)return Fa;
Fa="function"===typeof hb?hb:Jc.get(hb)||bd;return da};da.x=function(hb){if(!arguments.length)return Wa;Wa=hb;return da};da.y=function(hb){if(!arguments.length)return ob;ob=hb;return da};da.out=function(hb){if(!arguments.length)return Na;Na=hb;return da};return da};var jc=Qa.map({"inside-out":function(da){var ua=da.length,Ba=da.map(ed),Fa=da.map(Vc),Na=Qa.range(ua).sort(function(Fb,Tb){return Ba[Fb]-Ba[Tb]}),Wa=0,ob=0,hb=[],fb=[];for(da=0;da<ua;++da){var xb=Na[da];Wa<ob?(Wa+=Fa[xb],hb.push(xb)):(ob+=
Fa[xb],fb.push(xb))}return fb.reverse().concat(hb)},reverse:function(da){return Qa.range(da.length).reverse()},"default":Bc}),Jc=Qa.map({silhouette:function(da){var ua=da.length,Ba=da[0].length,Fa=[],Na=0,Wa,ob,hb,fb=[];for(ob=0;ob<Ba;++ob){for(hb=Wa=0;Wa<ua;Wa++)hb+=da[Wa][ob][1];hb>Na&&(Na=hb);Fa.push(hb)}for(ob=0;ob<Ba;++ob)fb[ob]=(Na-Fa[ob])/2;return fb},wiggle:function(da){var ua=da.length,Ba=da[0],Fa=Ba.length,Na,Wa,ob,hb,fb,xb,Fb,Tb=[];Tb[0]=xb=Fb=0;for(Wa=1;Wa<Fa;++Wa){for(ob=Na=0;Na<ua;++Na)ob+=
da[Na][Wa][1];var nc=Na=0;for(fb=Ba[Wa][0]-Ba[Wa-1][0];Na<ua;++Na){var kc=0;for(hb=(da[Na][Wa][1]-da[Na][Wa-1][1])/(2*fb);kc<Na;++kc)hb+=(da[kc][Wa][1]-da[kc][Wa-1][1])/fb;nc+=hb*da[Na][Wa][1]}Tb[Wa]=xb-=ob?nc/ob*fb:0;xb<Fb&&(Fb=xb)}for(Wa=0;Wa<Fa;++Wa)Tb[Wa]-=Fb;return Tb},expand:function(da){var ua=da.length,Ba=da[0].length,Fa=1/ua,Na,Wa,ob,hb=[];for(Wa=0;Wa<Ba;++Wa){for(ob=Na=0;Na<ua;Na++)ob+=da[Na][Wa][1];if(ob)for(Na=0;Na<ua;Na++)da[Na][Wa][1]/=ob;else for(Na=0;Na<ua;Na++)da[Na][Wa][1]=Fa}for(Wa=
0;Wa<Ba;++Wa)hb[Wa]=0;return hb},zero:bd});Qa.layout.histogram=function(){function da(Wa,ob){var hb=[],fb=Wa.map(Ba,this),xb=Fa.call(this,fb,ob),Fb=Na.call(this,xb,fb,ob);ob=-1;for(var Tb=fb.length,nc=Fb.length-1,kc=ua?1:1/Tb;++ob<nc;){var Cc=hb[ob]=[];Cc.dx=Fb[ob+1]-(Cc.x=Fb[ob]);Cc.y=0}if(0<nc)for(ob=-1;++ob<Tb;)Cc=fb[ob],Cc>=xb[0]&&Cc<=xb[1]&&(Cc=hb[Qa.bisect(Fb,Cc,1,nc)-1],Cc.y+=kc,Cc.push(Wa[ob]));return hb}var ua=!0,Ba=Number,Fa=oc,Na=yc;da.value=function(Wa){if(!arguments.length)return Ba;
Ba=Wa;return da};da.range=function(Wa){if(!arguments.length)return Fa;Fa=Aa(Wa);return da};da.bins=function(Wa){if(!arguments.length)return Na;Na="number"===typeof Wa?function(ob){return vc(ob,Wa)}:Aa(Wa);return da};da.frequency=function(Wa){if(!arguments.length)return ua;ua=!!Wa;return da};return da};Qa.layout.pack=function(){function da(Wa,ob){Wa=ua.call(this,Wa,ob);ob=Wa[0];var hb=Fa[0],fb=Fa[1],xb=null==Na?Math.sqrt:"function"===typeof Na?Na:function(){return Na};ob.x=ob.y=0;qe(ob,function(Tb){Tb.r=
+xb(Tb.value)});qe(ob,Td);if(Ba){var Fb=Ba*(Na?1:Math.max(2*ob.r/hb,2*ob.r/fb))/2;qe(ob,function(Tb){Tb.r+=Fb});qe(ob,Td);qe(ob,function(Tb){Tb.r-=Fb})}wf(ob,hb/2,fb/2,Na?1:1/Math.max(2*ob.r/hb,2*ob.r/fb));return Wa}var ua=Qa.layout.hierarchy().sort(vd),Ba=0,Fa=[1,1],Na;da.size=function(Wa){if(!arguments.length)return Fa;Fa=Wa;return da};da.radius=function(Wa){if(!arguments.length)return Na;Na=null==Wa||"function"===typeof Wa?Wa:+Wa;return da};da.padding=function(Wa){if(!arguments.length)return Ba;
Ba=+Wa;return da};return Hd(da,ua)};Qa.layout.tree=function(){function da(xb,Fb){xb=Wa.call(this,xb,Fb);Fb=xb[0];var Tb=ua(Fb);qe(Tb,Ba);Tb.parent.m=-Tb.z;qd(Tb,Fa);if(fb)qd(Fb,Na);else{var nc=Fb,kc=Fb,Cc=Fb;qd(Fb,function(ld){ld.x<nc.x&&(nc=ld);ld.x>kc.x&&(kc=ld);ld.depth>Cc.depth&&(Cc=ld)});var Oc=ob(nc,kc)/2-nc.x,Gc=hb[0]/(kc.x+ob(kc,nc)/2+Oc),Yc=hb[1]/(Cc.depth||1);qd(Fb,function(ld){ld.x=(ld.x+Oc)*Gc;ld.y=ld.depth*Yc})}return xb}function ua(xb){xb={A:null,children:[xb]};for(var Fb=[xb],Tb;null!=
(Tb=Fb.pop());)for(var nc=Tb.children,kc,Cc=0,Oc=nc.length;Cc<Oc;++Cc)Fb.push((nc[Cc]=kc={_:nc[Cc],parent:Tb,children:(kc=nc[Cc].children)&&kc.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:Cc}).a=kc);return xb.children[0]}function Ba(xb){var Fb=xb.children,Tb=xb.parent.children,nc=xb.i?Tb[xb.i-1]:null;if(Fb.length){for(var kc=0,Cc=0,Oc=xb.children,Gc=Oc.length,Yc;0<=--Gc;)Yc=Oc[Gc],Yc.z+=kc,Yc.m+=kc,kc+=Yc.s+(Cc+=Yc.c);Fb=(Fb[0].z+Fb[Fb.length-1].z)/2;nc?(xb.z=nc.z+ob(xb._,nc._),xb.m=xb.z-Fb):
xb.z=Fb}else nc&&(xb.z=nc.z+ob(xb._,nc._));Fb=xb.parent;Tb=xb.parent.A||Tb[0];if(nc){Cc=kc=xb;Oc=kc.parent.children[0];Gc=kc.m;Yc=Cc.m;for(var ld=nc.m,pd=Oc.m,sd;nc=vg(nc),kc=ug(kc),nc&&kc;){Oc=ug(Oc);Cc=vg(Cc);Cc.a=xb;sd=nc.z+ld-kc.z-Gc+ob(nc._,kc._);if(0<sd){var Md=nc.a.parent===xb.parent?nc.a:Tb,zd=xb,ee=sd,ce=ee/(zd.i-Md.i);zd.c-=ce;zd.s+=ee;Md.c+=ce;zd.z+=ee;zd.m+=ee;Gc+=sd;Yc+=sd}ld+=nc.m;Gc+=kc.m;pd+=Oc.m;Yc+=Cc.m}nc&&!vg(Cc)&&(Cc.t=nc,Cc.m+=ld-Yc);kc&&!ug(Oc)&&(Oc.t=kc,Oc.m+=Gc-pd,Tb=xb)}Fb.A=
Tb}function Fa(xb){xb._.x=xb.z+xb.parent.m;xb.m+=xb.parent.m}function Na(xb){xb.x*=hb[0];xb.y=xb.depth*hb[1]}var Wa=Qa.layout.hierarchy().sort(null).value(null),ob=Af,hb=[1,1],fb=null;da.separation=function(xb){if(!arguments.length)return ob;ob=xb;return da};da.size=function(xb){if(!arguments.length)return fb?null:hb;fb=null==(hb=xb)?Na:null;return da};da.nodeSize=function(xb){if(!arguments.length)return fb?hb:null;fb=null==(hb=xb)?null:Na;return da};return Hd(da,Wa)};Qa.layout.cluster=function(){function da(Wa,
ob){Wa=ua.call(this,Wa,ob);var hb=Wa[0],fb,xb=0;qe(hb,function(kc){var Cc=kc.children;Cc&&Cc.length?(kc.x=ih(Cc),kc.y=Gg(Cc)):(kc.x=fb?xb+=Ba(kc,fb):0,kc.y=0,fb=kc)});ob=Nh(hb);var Fb=qh(hb),Tb=ob.x-Ba(ob,Fb)/2,nc=Fb.x+Ba(Fb,ob)/2;qe(hb,Na?function(kc){kc.x=(kc.x-hb.x)*Fa[0];kc.y=(hb.y-kc.y)*Fa[1]}:function(kc){kc.x=(kc.x-Tb)/(nc-Tb)*Fa[0];kc.y=(1-(hb.y?kc.y/hb.y:1))*Fa[1]});return Wa}var ua=Qa.layout.hierarchy().sort(null).value(null),Ba=Af,Fa=[1,1],Na=!1;da.separation=function(Wa){if(!arguments.length)return Ba;
Ba=Wa;return da};da.size=function(Wa){if(!arguments.length)return Na?null:Fa;Na=null==(Fa=Wa);return da};da.nodeSize=function(Wa){if(!arguments.length)return Na?Fa:null;Na=null!=(Fa=Wa);return da};return Hd(da,ua)};Qa.layout.treemap=function(){function da(Cc,Oc){for(var Gc=-1,Yc=Cc.length,ld,pd;++Gc<Yc;)pd=(ld=Cc[Gc]).value*(0>Oc?0:Oc),ld.area=isNaN(pd)||0>=pd?0:pd}function ua(Cc){var Oc=Cc.children;if(Oc&&Oc.length){var Gc=xb(Cc),Yc=[],ld=Oc.slice(),pd=Infinity,sd,Md="slice"===nc?Gc.dx:"dice"===
nc?Gc.dy:"slice-dice"===nc?Cc.depth&1?Gc.dy:Gc.dx:Math.min(Gc.dx,Gc.dy);da(ld,Gc.dx*Gc.dy/Cc.value);for(Yc.area=0;0<(Cc=ld.length);){Yc.push(Cc=ld[Cc-1]);Yc.area+=Cc.area;if(!(Cc="squarify"!==nc)){Cc=Md;for(var zd=Yc.area,ee=0,ce=Infinity,je=-1,lf=Yc.length;++je<lf;)if(sd=Yc[je].area)sd<ce&&(ce=sd),sd>ee&&(ee=sd);zd*=zd;Cc*=Cc;Cc=(sd=zd?Math.max(Cc*ee*kc/zd,zd/(Cc*ce*kc)):Infinity)<=pd}Cc?(ld.pop(),pd=sd):(Yc.area-=Yc.pop().area,Fa(Yc,Md,Gc,!1),Md=Math.min(Gc.dx,Gc.dy),Yc.length=Yc.area=0,pd=Infinity)}Yc.length&&
(Fa(Yc,Md,Gc,!0),Yc.length=Yc.area=0);Oc.forEach(ua)}}function Ba(Cc){var Oc=Cc.children;if(Oc&&Oc.length){var Gc=xb(Cc),Yc=Oc.slice(),ld=[];da(Yc,Gc.dx*Gc.dy/Cc.value);for(ld.area=0;Cc=Yc.pop();)ld.push(Cc),ld.area+=Cc.area,null!=Cc.z&&(Fa(ld,Cc.z?Gc.dx:Gc.dy,Gc,!Yc.length),ld.length=ld.area=0);Oc.forEach(Ba)}}function Fa(Cc,Oc,Gc,Yc){var ld=-1,pd=Cc.length,sd=Gc.x,Md=Gc.y,zd=Oc?ob(Cc.area/Oc):0;if(Oc==Gc.dx){if(Yc||zd>Gc.dy)zd=Gc.dy;for(;++ld<pd;){var ee=Cc[ld];ee.x=sd;ee.y=Md;ee.dy=zd;sd+=ee.dx=
Math.min(Gc.x+Gc.dx-sd,zd?ob(ee.area/zd):0)}ee.z=!0;ee.dx+=Gc.x+Gc.dx-sd;Gc.y+=zd;Gc.dy-=zd}else{if(Yc||zd>Gc.dx)zd=Gc.dx;for(;++ld<pd;)ee=Cc[ld],ee.x=sd,ee.y=Md,ee.dx=zd,Md+=ee.dy=Math.min(Gc.y+Gc.dy-Md,zd?ob(ee.area/zd):0);ee.z=!1;ee.dy+=Gc.y+Gc.dy-Md;Gc.x+=zd;Gc.dx-=zd}}function Na(Cc){Cc=Tb||Wa(Cc);var Oc=Cc[0];Oc.x=Oc.y=0;Oc.value?(Oc.dx=hb[0],Oc.dy=hb[1]):Oc.dx=Oc.dy=0;Tb&&Wa.revalue(Oc);da([Oc],Oc.dx*Oc.dy/Oc.value);(Tb?Ba:ua)(Oc);Fb&&(Tb=Cc);return Cc}var Wa=Qa.layout.hierarchy(),ob=Math.round,
hb=[1,1],fb=null,xb=Yg,Fb=!1,Tb,nc="squarify",kc=.5*(1+Math.sqrt(5));Na.size=function(Cc){if(!arguments.length)return hb;hb=Cc;return Na};Na.padding=function(Cc){function Oc(ld){var pd=Cc.call(Na,ld,ld.depth);return null==pd?Yg(ld):jh(ld,"number"===typeof pd?[pd,pd,pd,pd]:pd)}function Gc(ld){return jh(ld,Cc)}if(!arguments.length)return fb;var Yc;xb=null==(fb=Cc)?Yg:"function"===(Yc=typeof Cc)?Oc:"number"===Yc?(Cc=[Cc,Cc,Cc,Cc],Gc):Gc;return Na};Na.round=function(Cc){if(!arguments.length)return ob!=
Number;ob=Cc?Math.round:Number;return Na};Na.sticky=function(Cc){if(!arguments.length)return Fb;Fb=Cc;Tb=null;return Na};Na.ratio=function(Cc){if(!arguments.length)return kc;kc=Cc;return Na};Na.mode=function(Cc){if(!arguments.length)return nc;nc=Cc+"";return Na};return Hd(Na,Wa)};Qa.random={normal:function(da,ua){var Ba=arguments.length;2>Ba&&(ua=1);1>Ba&&(da=0);return function(){do{var Fa=2*Math.random()-1;var Na=2*Math.random()-1;Na=Fa*Fa+Na*Na}while(!Na||1<Na);return da+ua*Fa*Math.sqrt(-2*Math.log(Na)/
Na)}},logNormal:function(){var da=Qa.random.normal.apply(Qa,arguments);return function(){return Math.exp(da())}},bates:function(da){var ua=Qa.random.irwinHall(da);return function(){return ua()/da}},irwinHall:function(da){return function(){for(var ua=0,Ba=0;Ba<da;Ba++)ua+=Math.random();return ua}}};Qa.scale={};var Kc={floor:x,ceil:x};Qa.scale.linear=function(){return og([0,1],[0,1],Nc,!1)};Qa.scale.log=function(){return hh(Qa.scale.linear().domain([0,1]),10,!0,[1,10])};var $c={floor:function(da){return-Math.ceil(-da)},
ceil:function(da){return-Math.floor(-da)}};Qa.scale.pow=function(){return lh(Qa.scale.linear(),1,[0,1])};Qa.scale.sqrt=function(){return Qa.scale.pow().exponent(.5)};Qa.scale.ordinal=function(){return Zg([],{t:"range",a:[[]]})};Qa.scale.category10=function(){return Qa.scale.ordinal().range(ad)};Qa.scale.category20=function(){return Qa.scale.ordinal().range(Wc)};Qa.scale.category20b=function(){return Qa.scale.ordinal().range(wd)};Qa.scale.category20c=function(){return Qa.scale.ordinal().range(Ed)};
var ad=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ub),Wc=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ub),wd=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ub),Ed=[3244733,7057110,10406625,
13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ub);Qa.scale.quantile=function(){return $f([],[])};Qa.scale.quantize=function(){return Nf(0,1,[0,1])};Qa.scale.threshold=function(){return vh([.5],[0,1])};Qa.scale.identity=function(){return mh([0,1])};Qa.svg={};Qa.svg.arc=function(){function da(){var xb=Math.max(0,+Ba.apply(this,arguments)),Fb=Math.max(0,+Fa.apply(this,arguments)),Tb=ob.apply(this,
arguments)-eg,nc=hb.apply(this,arguments)-eg,kc=Math.abs(nc-Tb),Cc=Tb>nc?0:1;if(Fb<xb){var Oc=Fb;Fb=xb;xb=Oc}if(kc>=hg)return ua(Fb,Cc)+(xb?ua(xb,1-Cc):"")+"Z";var Gc,Yc=0,ld=0,pd=[];if(Gc=(+fb.apply(this,arguments)||0)/2){var sd=Wa===Ld?Math.sqrt(xb*xb+Fb*Fb):+Wa.apply(this,arguments);Cc||(ld*=-1);Fb&&(ld=ka(sd/Fb*Math.sin(Gc)));xb&&(Yc=ka(sd/xb*Math.sin(Gc)))}if(Fb){sd=Fb*Math.cos(Tb+ld);Gc=Fb*Math.sin(Tb+ld);var Md=Fb*Math.cos(nc-ld);var zd=Fb*Math.sin(nc-ld);var ee=Math.abs(nc-Tb-2*ld)<=af?0:
1;ld&&Ga(sd,Gc,Md,zd)===Cc^ee&&(Md=(Tb+nc)/2,sd=Fb*Math.cos(Md),Gc=Fb*Math.sin(Md),Md=zd=null)}else sd=Gc=0;if(xb){ld=xb*Math.cos(nc-Yc);var ce=xb*Math.sin(nc-Yc);var je=xb*Math.cos(Tb+Yc);var lf=xb*Math.sin(Tb+Yc);var re=Math.abs(Tb-nc+2*Yc)<=af?0:1;Yc&&Ga(ld,ce,je,lf)===1-Cc^re&&(je=(Tb+nc)/2,ld=xb*Math.cos(je),ce=xb*Math.sin(je),je=lf=null)}else ld=ce=0;1E-6<kc&&.001<(Oc=Math.min(Math.abs(Fb-xb)/2,+Na.apply(this,arguments)))?(ee=xb<Fb^Cc?0:1,re=Tb=Oc,kc<af&&(kc=null==je?[ld,ce]:null==Md?[sd,Gc]:
Ja([sd,Gc],[je,lf],[Md,zd],[ld,ce]),re=sd-kc[0],Tb=Gc-kc[1],nc=Md-kc[0],Yc=zd-kc[1],Tb=1/Math.sin(Math.acos((re*nc+Tb*Yc)/(Math.sqrt(re*re+Tb*Tb)*Math.sqrt(nc*nc+Yc*Yc)))/2),kc=Math.sqrt(kc[0]*kc[0]+kc[1]*kc[1]),re=Math.min(Oc,(xb-kc)/(Tb-1)),Tb=Math.min(Oc,(Fb-kc)/(Tb+1))),null!=Md?(kc=Oa(null==je?[ld,ce]:[je,lf],[sd,Gc],Fb,Tb,Cc),nc=Oa([Md,zd],[ld,ce],Fb,Tb,Cc),Oc===Tb?pd.push("M",kc[0],"A",Tb,",",Tb," 0 0,",ee," ",kc[1],"A",Fb,",",Fb," 0 ",1-Cc^Ga(kc[1][0],kc[1][1],nc[1][0],nc[1][1]),",",Cc," ",
nc[1],"A",Tb,",",Tb," 0 0,",ee," ",nc[0]):pd.push("M",kc[0],"A",Tb,",",Tb," 0 1,",ee," ",nc[0])):pd.push("M",sd,",",Gc),null!=je?(Fb=Oa([sd,Gc],[je,lf],xb,-re,Cc),Md=Oa([ld,ce],null==Md?[sd,Gc]:[Md,zd],xb,-re,Cc),Oc===re?pd.push("L",Md[0],"A",re,",",re," 0 0,",ee," ",Md[1],"A",xb,",",xb," 0 ",Cc^Ga(Md[1][0],Md[1][1],Fb[1][0],Fb[1][1]),",",1-Cc," ",Fb[1],"A",re,",",re," 0 0,",ee," ",Fb[0]):pd.push("L",Md[0],"A",re,",",re," 0 0,",ee," ",Fb[0])):pd.push("L",ld,",",ce)):(pd.push("M",sd,",",Gc),null!=
Md&&pd.push("A",Fb,",",Fb," 0 ",ee,",",Cc," ",Md,",",zd),pd.push("L",ld,",",ce),null!=je&&pd.push("A",xb,",",xb," 0 ",re,",",1-Cc," ",je,",",lf));pd.push("Z");return pd.join("")}function ua(xb,Fb){return"M0,"+xb+"A"+xb+","+xb+" 0 1,"+Fb+" 0,"+-xb+"A"+xb+","+xb+" 0 1,"+Fb+" 0,"+xb}var Ba=ag,Fa=wg,Na=Gh,Wa=Ld,ob=nh,hb=wh,fb=Ha;da.innerRadius=function(xb){if(!arguments.length)return Ba;Ba=Aa(xb);return da};da.outerRadius=function(xb){if(!arguments.length)return Fa;Fa=Aa(xb);return da};da.cornerRadius=
function(xb){if(!arguments.length)return Na;Na=Aa(xb);return da};da.padRadius=function(xb){if(!arguments.length)return Wa;Wa=xb==Ld?Ld:Aa(xb);return da};da.startAngle=function(xb){if(!arguments.length)return ob;ob=Aa(xb);return da};da.endAngle=function(xb){if(!arguments.length)return hb;hb=Aa(xb);return da};da.padAngle=function(xb){if(!arguments.length)return fb;fb=Aa(xb);return da};da.centroid=function(){var xb=(+Ba.apply(this,arguments)+ +Fa.apply(this,arguments))/2,Fb=(+ob.apply(this,arguments)+
+hb.apply(this,arguments))/2-eg;return[Math.cos(Fb)*xb,Math.sin(Fb)*xb]};return da};var Ld="auto";Qa.svg.line=function(){return eb(x)};var he=Qa.map({linear:lb,"linear-closed":Cb,step:function(da){for(var ua=0,Ba=da.length,Fa=da[0],Na=[Fa[0],",",Fa[1]];++ua<Ba;)Na.push("H",(Fa[0]+(Fa=da[ua])[0])/2,"V",Fa[1]);1<Ba&&Na.push("H",Fa[0]);return Na.join("")},"step-before":Zb,"step-after":Lb,basis:rc,"basis-open":function(da){if(4>da.length)return lb(da);for(var ua=[],Ba=-1,Fa=da.length,Na,Wa=[0],ob=[0];3>
++Ba;)Na=da[Ba],Wa.push(Na[0]),ob.push(Na[1]);ua.push(Fc(ve,Wa)+","+Fc(ve,ob));for(--Ba;++Ba<Fa;)Na=da[Ba],Wa.shift(),Wa.push(Na[0]),ob.shift(),ob.push(Na[1]),jd(ua,Wa,ob);return ua.join("")},"basis-closed":function(da){for(var ua,Ba=-1,Fa=da.length,Na=Fa+4,Wa,ob=[],hb=[];4>++Ba;)Wa=da[Ba%Fa],ob.push(Wa[0]),hb.push(Wa[1]);ua=[Fc(ve,ob),",",Fc(ve,hb)];for(--Ba;++Ba<Na;)Wa=da[Ba%Fa],ob.shift(),ob.push(Wa[0]),hb.shift(),hb.push(Wa[1]),jd(ua,ob,hb);return ua.join("")},bundle:function(da,ua){var Ba=da.length-
1;if(Ba)for(var Fa=da[0][0],Na=da[0][1],Wa=da[Ba][0]-Fa,ob=da[Ba][1]-Na,hb=-1,fb,xb;++hb<=Ba;)fb=da[hb],xb=hb/Ba,fb[0]=ua*fb[0]+(1-ua)*(Fa+xb*Wa),fb[1]=ua*fb[1]+(1-ua)*(Na+xb*ob);return rc(da)},cardinal:function(da,ua){return 3>da.length?lb(da):da[0]+ec(da,hc(da,ua))},"cardinal-open":function(da,ua){return 4>da.length?lb(da):da[1]+ec(da.slice(1,-1),hc(da,ua))},"cardinal-closed":function(da,ua){return 3>da.length?Cb(da):da[0]+ec((da.push(da[0]),da),hc([da[da.length-2]].concat(da,[da[1]]),ua))},monotone:function(da){if(3>
da.length)da=lb(da);else{var ua=da[0],Ba=[],Fa;var Na=0;var Wa=da.length-1;var ob=[];var hb=da[1];for(Fa=ob[0]=Dd(da[0],hb);++Na<Wa;)ob[Na]=(Fa+(Fa=Dd(hb,hb=da[Na+1])))/2;ob[Na]=Fa;for(var fb=-1,xb=da.length-1;++fb<xb;)Na=Dd(da[fb],da[fb+1]),1E-6>xd(Na)?ob[fb]=ob[fb+1]=0:(Wa=ob[fb]/Na,hb=ob[fb+1]/Na,Fa=Wa*Wa+hb*hb,9<Fa&&(Fa=3*Na/Math.sqrt(Fa),ob[fb]=Fa*Wa,ob[fb+1]=Fa*hb));for(fb=-1;++fb<=xb;)Fa=(da[Math.min(xb,fb+1)][0]-da[Math.max(0,fb-1)][0])/(6*(1+ob[fb]*ob[fb])),Ba.push([Fa||0,ob[fb]*Fa||0]);
da=ua+ec(da,Ba)}return da}});he.forEach(function(da,ua){ua.key=da;ua.closed=/-closed$/.test(da)});var de=[0,2/3,1/3,0],me=[0,1/3,2/3,0],ve=[0,1/6,2/3,1/6];Qa.svg.line.radial=function(){var da=eb(ye);da.radius=da.x;delete da.x;da.angle=da.y;delete da.y;return da};Zb.reverse=Lb;Lb.reverse=Zb;Qa.svg.area=function(){return Ae(x)};Qa.svg.area.radial=function(){var da=Ae(ye);da.radius=da.x;delete da.x;da.innerRadius=da.x0;delete da.x0;da.outerRadius=da.x1;delete da.x1;da.angle=da.y;delete da.y;da.startAngle=
da.y0;delete da.y0;da.endAngle=da.y1;delete da.y1;return da};Qa.svg.chord=function(){function da(fb,xb){var Fb=ua(this,Fa,fb,xb);fb=ua(this,Na,fb,xb);return"M"+Fb.p0+Ba(Fb.r,Fb.p1,Fb.a1-Fb.a0)+(Fb.a0==fb.a0&&Fb.a1==fb.a1?"Q 0,0 "+Fb.p0:"Q 0,0 "+fb.p0+Ba(fb.r,fb.p1,fb.a1-fb.a0)+("Q 0,0 "+Fb.p0))+"Z"}function ua(fb,xb,Fb,Tb){var nc=xb.call(fb,Fb,Tb);xb=Wa.call(fb,nc,Tb);Fb=ob.call(fb,nc,Tb)-eg;fb=hb.call(fb,nc,Tb)-eg;return{r:xb,a0:Fb,a1:fb,p0:[xb*Math.cos(Fb),xb*Math.sin(Fb)],p1:[xb*Math.cos(fb),xb*
Math.sin(fb)]}}function Ba(fb,xb,Fb){return"A"+fb+","+fb+" 0 "+ +(Fb>af)+",1 "+xb}var Fa=Xe,Na=Vf,Wa=Je,ob=nh,hb=wh;da.radius=function(fb){if(!arguments.length)return Wa;Wa=Aa(fb);return da};da.source=function(fb){if(!arguments.length)return Fa;Fa=Aa(fb);return da};da.target=function(fb){if(!arguments.length)return Na;Na=Aa(fb);return da};da.startAngle=function(fb){if(!arguments.length)return ob;ob=Aa(fb);return da};da.endAngle=function(fb){if(!arguments.length)return hb;hb=Aa(fb);return da};return da};
Qa.svg.diagonal=function(){function da(Na,Wa){var ob=ua.call(this,Na,Wa);Na=Ba.call(this,Na,Wa);Wa=(ob.y+Na.y)/2;ob=[ob,{x:ob.x,y:Wa},{x:Na.x,y:Wa},Na];ob=ob.map(Fa);return"M"+ob[0]+"C"+ob[1]+" "+ob[2]+" "+ob[3]}var ua=Xe,Ba=Vf,Fa=Tf;da.source=function(Na){if(!arguments.length)return ua;ua=Aa(Na);return da};da.target=function(Na){if(!arguments.length)return Ba;Ba=Aa(Na);return da};da.projection=function(Na){if(!arguments.length)return Fa;Fa=Na;return da};return da};Qa.svg.diagonal.radial=function(){var da=
Qa.svg.diagonal(),ua=Tf,Ba=da.projection;da.projection=function(Fa){return arguments.length?Ba(Mf(ua=Fa)):ua};return da};Qa.svg.symbol=function(){function da(Fa,Na){return(se.get(ua.call(this,Fa,Na))||Kg)(Ba.call(this,Fa,Na))}var ua=$g,Ba=tf;da.type=function(Fa){if(!arguments.length)return ua;ua=Aa(Fa);return da};da.size=function(Fa){if(!arguments.length)return Ba;Ba=Aa(Fa);return da};return da};var se=Qa.map({circle:Kg,cross:function(da){da=Math.sqrt(da/5)/2;return"M"+-3*da+","+-da+"H"+-da+"V"+-3*
da+"H"+da+"V"+-da+"H"+3*da+"V"+da+"H"+da+"V"+3*da+"H"+-da+"V"+da+"H"+-3*da+"Z"},diamond:function(da){da=Math.sqrt(da/(2*we));var ua=da*we;return"M0,"+-da+"L"+ua+",0 0,"+da+" "+-ua+",0Z"},square:function(da){da=Math.sqrt(da)/2;return"M"+-da+","+-da+"L"+da+","+-da+" "+da+","+da+" "+-da+","+da+"Z"},"triangle-down":function(da){da=Math.sqrt(da/Ee);var ua=da*Ee/2;return"M0,"+ua+"L"+da+","+-ua+" "+-da+","+-ua+"Z"},"triangle-up":function(da){da=Math.sqrt(da/Ee);var ua=da*Ee/2;return"M0,"+-ua+"L"+da+","+
ua+" "+-da+","+ua+"Z"}});Qa.svg.symbolTypes=se.keys();var Ee=Math.sqrt(3),we=Math.tan(30*tg);le.transition=function(da){var ua=pf||++rf;da=Wh(da);for(var Ba=[],Fa,Na,Wa=cg||{time:Date.now(),ease:Wd,delay:0,duration:250},ob=-1,hb=this.length;++ob<hb;){Ba.push(Fa=[]);for(var fb=this[ob],xb=-1,Fb=fb.length;++xb<Fb;)(Na=fb[xb])&&Hh(Na,xb,da,ua,Wa),Fa.push(Na)}return Ff(Ba,da,ua)};le.interrupt=function(da){return this.each(null==da?jf:Ug(Wh(da)))};var jf=Ug(Wh()),Ke=[],rf=0,pf,cg;Ke.call=le.call;Ke.empty=
le.empty;Ke.node=le.node;Ke.size=le.size;Qa.transition=function(da,ua){return da&&da.transition?pf?da.transition(ua):da:Qa.selection().transition(da)};Qa.transition.prototype=Ke;Ke.select=function(da){var ua=this.id,Ba=this.namespace,Fa=[],Na,Wa,ob;da=K(da);for(var hb=-1,fb=this.length;++hb<fb;){Fa.push(Na=[]);for(var xb=this[hb],Fb=-1,Tb=xb.length;++Fb<Tb;)(ob=xb[Fb])&&(Wa=da.call(ob,ob.__data__,Fb,hb))?("__data__"in ob&&(Wa.__data__=ob.__data__),Hh(Wa,Fb,Ba,ua,ob[Ba][ua]),Na.push(Wa)):Na.push(null)}return Ff(Fa,
Ba,ua)};Ke.selectAll=function(da){var ua=this.id,Ba=this.namespace,Fa=[],Na,Wa;da=O(da);for(var ob=-1,hb=this.length;++ob<hb;)for(var fb=this[ob],xb=-1,Fb=fb.length;++xb<Fb;)if(Na=fb[xb]){var Tb=Na[Ba][ua];var nc=da.call(Na,Na.__data__,xb,ob);Fa.push(Na=[]);for(var kc=-1,Cc=nc.length;++kc<Cc;)(Wa=nc[kc])&&Hh(Wa,kc,Ba,ua,Tb),Na.push(Wa)}return Ff(Fa,Ba,ua)};Ke.filter=function(da){var ua=[],Ba,Fa;"function"!==typeof da&&(da=T(da));for(var Na=0,Wa=this.length;Na<Wa;Na++){ua.push(Ba=[]);var ob=this[Na];
for(var hb=0,fb=ob.length;hb<fb;hb++)(Fa=ob[hb])&&da.call(Fa,Fa.__data__,hb,Na)&&Ba.push(Fa)}return Ff(ua,this.namespace,this.id)};Ke.tween=function(da,ua){var Ba=this.id,Fa=this.namespace;return 2>arguments.length?this.node()[Fa][Ba].tween.get(da):ha(this,null==ua?function(Na){Na[Fa][Ba].tween.remove(da)}:function(Na){Na[Fa][Ba].tween.set(da,ua)})};Ke.attr=function(da,ua){function Ba(){this.removeAttribute(hb)}function Fa(){this.removeAttributeNS(hb.space,hb.local)}function Na(fb){return null==fb?
Ba:(fb+="",function(){var xb=this.getAttribute(hb),Fb;return xb!==fb&&(Fb=ob(xb,fb),function(Tb){this.setAttribute(hb,Fb(Tb))})})}function Wa(fb){return null==fb?Fa:(fb+="",function(){var xb=this.getAttributeNS(hb.space,hb.local),Fb;return xb!==fb&&(Fb=ob(xb,fb),function(Tb){this.setAttributeNS(hb.space,hb.local,Fb(Tb))})})}if(2>arguments.length){for(ua in da)this.attr(ua,da[ua]);return this}var ob="transform"==da?Qe:Nc,hb=Qa.ns.qualify(da);return Lf(this,"attr."+da,ua,hb.local?Wa:Na)};Ke.attrTween=
function(da,ua){function Ba(Wa,ob){var hb=ua.call(this,Wa,ob,this.getAttribute(Na));return hb&&function(fb){this.setAttribute(Na,hb(fb))}}function Fa(Wa,ob){var hb=ua.call(this,Wa,ob,this.getAttributeNS(Na.space,Na.local));return hb&&function(fb){this.setAttributeNS(Na.space,Na.local,hb(fb))}}var Na=Qa.ns.qualify(da);return this.tween("attr."+da,Na.local?Fa:Ba)};Ke.style=function(da,ua,Ba){function Fa(){this.style.removeProperty(da)}var Na=arguments.length;if(3>Na){if("string"!==typeof da){2>Na&&
(ua="");for(Ba in da)this.style(Ba,da[Ba],ua);return this}Ba=""}return Lf(this,"style."+da,ua,function(Wa){return null==Wa?Fa:(Wa+="",function(){var ob=p(this).getComputedStyle(this,null).getPropertyValue(da),hb;return ob!==Wa&&(hb=Nc(ob,Wa),function(fb){this.style.setProperty(da,hb(fb),Ba)})})})};Ke.styleTween=function(da,ua,Ba){3>arguments.length&&(Ba="");return this.tween("style."+da,function(Fa,Na){var Wa=ua.call(this,Fa,Na,p(this).getComputedStyle(this,null).getPropertyValue(da));return Wa&&
function(ob){this.style.setProperty(da,Wa(ob),Ba)}})};Ke.text=function(da){return Lf(this,"text",da,oh)};Ke.remove=function(){var da=this.namespace;return this.each("end.transition",function(){var ua;2>this[da].count&&(ua=this.parentNode)&&ua.removeChild(this)})};Ke.ease=function(da){var ua=this.id,Ba=this.namespace;if(1>arguments.length)return this.node()[Ba][ua].ease;"function"!==typeof da&&(da=Qa.ease.apply(Qa,arguments));return ha(this,function(Fa){Fa[Ba][ua].ease=da})};Ke.delay=function(da){var ua=
this.id,Ba=this.namespace;return 1>arguments.length?this.node()[Ba][ua].delay:ha(this,"function"===typeof da?function(Fa,Na,Wa){Fa[Ba][ua].delay=+da.call(Fa,Fa.__data__,Na,Wa)}:(da=+da,function(Fa){Fa[Ba][ua].delay=da}))};Ke.duration=function(da){var ua=this.id,Ba=this.namespace;return 1>arguments.length?this.node()[Ba][ua].duration:ha(this,"function"===typeof da?function(Fa,Na,Wa){Fa[Ba][ua].duration=Math.max(1,da.call(Fa,Fa.__data__,Na,Wa))}:(da=Math.max(1,da),function(Fa){Fa[Ba][ua].duration=da}))};
Ke.each=function(da,ua){var Ba=this.id,Fa=this.namespace;if(2>arguments.length){var Na=cg,Wa=pf;try{pf=Ba,ha(this,function(ob,hb,fb){cg=ob[Fa][Ba];da.call(ob,ob.__data__,hb,fb)})}finally{cg=Na,pf=Wa}}else ha(this,function(ob){ob=ob[Fa][Ba];(ob.event||(ob.event=Qa.dispatch("start","end","interrupt"))).on(da,ua)});return this};Ke.transition=function(){for(var da=this.id,ua=++rf,Ba=this.namespace,Fa=[],Na,Wa,ob,hb,fb=0,xb=this.length;fb<xb;fb++){Fa.push(Na=[]);Wa=this[fb];for(var Fb=0,Tb=Wa.length;Fb<
Tb;Fb++){if(ob=Wa[Fb])hb=ob[Ba][da],Hh(ob,Fb,Ba,ua,{time:hb.time,ease:hb.ease,delay:hb.delay+hb.duration,duration:hb.duration});Na.push(ob)}}return Ff(Fa,Ba,ua)};Qa.svg.axis=function(){function da(xb){xb.each(function(){var Fb=Qa.select(this),Tb=this.__chart__||ua,nc=this.__chart__=ua.copy(),kc=null==hb?nc.ticks?nc.ticks.apply(nc,ob):nc.domain():hb,Cc=null==fb?nc.tickFormat?nc.tickFormat.apply(nc,ob):x:fb,Oc=Fb.selectAll(".tick").data(kc,nc);kc=Oc.enter().insert("g",".domain").attr("class","tick").style("opacity",
1E-6);var Gc=Qa.transition(Oc.exit()).style("opacity",1E-6).remove(),Yc=Qa.transition(Oc.order()).style("opacity",1),ld=Math.max(Fa,0)+Wa,pd=fh(nc);Fb=Fb.selectAll(".domain").data([0]);Fb=(Fb.enter().append("path").attr("class","domain"),Qa.transition(Fb));kc.append("line");kc.append("text");var sd=kc.select("line"),Md=Yc.select("line");Oc=Oc.select("text").text(Cc);var zd=kc.select("text"),ee=Yc.select("text"),ce="top"===Ba||"left"===Ba?-1:1;if("bottom"===Ba||"top"===Ba){Cc=vi;var je="x";var lf=
"y";var re="x2";var Pd="y2";Oc.attr("dy",0>ce?"0em":".71em").style("text-anchor","middle");Fb.attr("d","M"+pd[0]+","+ce*Na+"V0H"+pd[1]+"V"+ce*Na)}else Cc=wi,je="y",lf="x",re="y2",Pd="x2",Oc.attr("dy",".32em").style("text-anchor",0>ce?"end":"start"),Fb.attr("d","M"+ce*Na+","+pd[0]+"H0V"+pd[1]+"H"+ce*Na);sd.attr(Pd,ce*Fa);zd.attr(lf,ce*ld);Md.attr(re,0).attr(Pd,ce*Fa);ee.attr(je,0).attr(lf,ce*ld);if(nc.rangeBand){var mf=nc,Uf=mf.rangeBand()/2;Tb=nc=function(xf){return mf(xf)+Uf}}else Tb.rangeBand?Tb=
nc:Gc.call(Cc,nc,Tb);kc.call(Cc,Tb,nc);Yc.call(Cc,nc,nc)})}var ua=Qa.scale.linear(),Ba=uf,Fa=6,Na=6,Wa=3,ob=[10],hb=null,fb;da.scale=function(xb){if(!arguments.length)return ua;ua=xb;return da};da.orient=function(xb){if(!arguments.length)return Ba;Ba=xb in sg?xb+"":uf;return da};da.ticks=function(){if(!arguments.length)return ob;ob=bc(arguments);return da};da.tickValues=function(xb){if(!arguments.length)return hb;hb=xb;return da};da.tickFormat=function(xb){if(!arguments.length)return fb;fb=xb;return da};
da.tickSize=function(xb){var Fb=arguments.length;if(!Fb)return Fa;Fa=+xb;Na=+arguments[Fb-1];return da};da.innerTickSize=function(xb){if(!arguments.length)return Fa;Fa=+xb;return da};da.outerTickSize=function(xb){if(!arguments.length)return Na;Na=+xb;return da};da.tickPadding=function(xb){if(!arguments.length)return Wa;Wa=+xb;return da};da.tickSubdivide=function(){return arguments.length&&da};return da};var uf="bottom",sg={top:1,right:1,bottom:1,left:1};Qa.svg.brush=function(){function da(Oc){Oc.each(function(){var Gc=
Qa.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",Na).on("touchstart.brush",Na),Yc=Gc.selectAll(".background").data([0]);Yc.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");Gc.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var ld=Gc.selectAll(".resize").data(Cc,x);ld.exit().remove();ld.enter().append("g").attr("class",
function(pd){return"resize "+pd}).style("cursor",function(pd){return ef[pd]}).append("rect").attr("x",function(pd){return/[ew]$/.test(pd)?-3:null}).attr("y",function(pd){return/^[ns]/.test(pd)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");ld.style("display",da.empty()?"none":null);Gc=Qa.transition(Gc);Yc=Qa.transition(Yc);ob&&(ld=fh(ob),Yc.attr("x",ld[0]).attr("width",ld[1]-ld[0]),Ba(Gc));hb&&(ld=fh(hb),Yc.attr("y",ld[0]).attr("height",ld[1]-ld[0]),Fa(Gc));ua(Gc)})}function ua(Oc){Oc.selectAll(".resize").attr("transform",
function(Gc){return"translate("+fb[+/e$/.test(Gc)]+","+xb[+/^s/.test(Gc)]+")"})}function Ba(Oc){Oc.select(".extent").attr("x",fb[0]);Oc.selectAll(".extent,.n\x3erect,.s\x3erect").attr("width",fb[1]-fb[0])}function Fa(Oc){Oc.select(".extent").attr("y",xb[0]);Oc.selectAll(".extent,.e\x3erect,.w\x3erect").attr("height",xb[1]-xb[0])}function Na(){function Oc(){var Jf=Qa.mouse(ld),Gf=!1;xf&&(Jf[0]+=xf[0],Jf[1]+=xf[1]);je||(Qa.event.altKey?(re||(re=[(fb[0]+fb[1])/2,(xb[0]+xb[1])/2]),Pd[0]=fb[+(Jf[0]<re[0])],
Pd[1]=xb[+(Jf[1]<re[1])]):re=null);ee&&Gc(Jf,ob,0)&&(Ba(Md),Gf=!0);ce&&Gc(Jf,hb,1)&&(Fa(Md),Gf=!0);Gf&&(ua(Md),sd({type:"brush",mode:je?"move":"resize"}))}function Gc(Jf,Gf,Ef){var fg=fh(Gf);Gf=fg[0];var pg=fg[1];fg=Pd[Ef];var rg=Ef?xb:fb,bh=rg[1]-rg[0];je&&(Gf-=fg,pg-=bh+fg);Jf=(Ef?kc:nc)?Math.max(Gf,Math.min(pg,Jf[Ef])):Jf[Ef];je?Gf=(Jf+=fg)+bh:(re&&(fg=Math.max(Gf,Math.min(pg,2*re[Ef]-Jf))),fg<Jf?(Gf=Jf,Jf=fg):Gf=fg);if(rg[0]!=Jf||rg[1]!=Gf)return Ef?Tb=null:Fb=null,rg[0]=Jf,rg[1]=Gf,!0}function Yc(){Oc();
Md.style("pointer-events","all").selectAll(".resize").style("display",da.empty()?"none":null);Qa.select("body").style("cursor",null);mf.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);lf();sd({type:"brushend"})}var ld=this,pd=Qa.select(Qa.event.target),sd=Wa.of(ld,arguments),Md=Qa.select(ld),zd=pd.datum(),ee=!/^(n|s)$/.test(zd)&&ob,ce=!/^(e|w)$/.test(zd)&&hb,je=pd.classed("extent"),lf=oa(ld),re,
Pd=Qa.mouse(ld),mf=Qa.select(p(ld)).on("keydown.brush",function(){32==Qa.event.keyCode&&(je||(re=null,Pd[0]-=fb[1],Pd[1]-=xb[1],je=2),v())}).on("keyup.brush",function(){32==Qa.event.keyCode&&2==je&&(Pd[0]+=fb[1],Pd[1]+=xb[1],je=0,v())});if(Qa.event.changedTouches)mf.on("touchmove.brush",Oc).on("touchend.brush",Yc);else mf.on("mousemove.brush",Oc).on("mouseup.brush",Yc);Md.interrupt().selectAll("*").interrupt();if(je)Pd[0]=fb[0]-Pd[0],Pd[1]=xb[0]-Pd[1];else if(zd){var Uf=+/w$/.test(zd);zd=+/^n/.test(zd);
var xf=[fb[1-Uf]-Pd[0],xb[1-zd]-Pd[1]];Pd[0]=fb[Uf];Pd[1]=xb[zd]}else Qa.event.altKey&&(re=Pd.slice());Md.style("pointer-events","none").selectAll(".resize").style("display",null);Qa.select("body").style("cursor",pd.style("cursor"));sd({type:"brushstart"});Oc()}var Wa=F(da,"brushstart","brush","brushend"),ob=null,hb=null,fb=[0,0],xb=[0,0],Fb,Tb,nc=!0,kc=!0,Cc=Wf[0];da.event=function(Oc){Oc.each(function(){var Gc=Wa.of(this,arguments),Yc={x:fb,y:xb,i:Fb,j:Tb},ld=this.__chart__||Yc;this.__chart__=Yc;
pf?Qa.select(this).transition().each("start.brush",function(){Fb=ld.i;Tb=ld.j;fb=ld.x;xb=ld.y;Gc({type:"brushstart"})}).tween("brush:brush",function(){var pd=Xc(fb,Yc.x),sd=Xc(xb,Yc.y);Fb=Tb=null;return function(Md){fb=Yc.x=pd(Md);xb=Yc.y=sd(Md);Gc({type:"brush",mode:"resize"})}}).each("end.brush",function(){Fb=Yc.i;Tb=Yc.j;Gc({type:"brush",mode:"resize"});Gc({type:"brushend"})}):(Gc({type:"brushstart"}),Gc({type:"brush",mode:"resize"}),Gc({type:"brushend"}))})};da.x=function(Oc){if(!arguments.length)return ob;
ob=Oc;Cc=Wf[!ob<<1|!hb];return da};da.y=function(Oc){if(!arguments.length)return hb;hb=Oc;Cc=Wf[!ob<<1|!hb];return da};da.clamp=function(Oc){if(!arguments.length)return ob&&hb?[nc,kc]:ob?nc:hb?kc:null;ob&&hb?(nc=!!Oc[0],kc=!!Oc[1]):ob?nc=!!Oc:hb&&(kc=!!Oc);return da};da.extent=function(Oc){if(!arguments.length){if(ob)if(Fb){var Gc=Fb[0];var Yc=Fb[1]}else if(Gc=fb[0],Yc=fb[1],ob.invert&&(Gc=ob.invert(Gc),Yc=ob.invert(Yc)),Yc<Gc){var ld=Gc;Gc=Yc;Yc=ld}if(hb)if(Tb){var pd=Tb[0];var sd=Tb[1]}else pd=
xb[0],sd=xb[1],hb.invert&&(pd=hb.invert(pd),sd=hb.invert(sd)),sd<pd&&(ld=pd,pd=sd,sd=ld);return ob&&hb?[[Gc,pd],[Yc,sd]]:ob?[Gc,Yc]:hb&&[pd,sd]}ob&&(Gc=Oc[0],Yc=Oc[1],hb&&(Gc=Gc[0],Yc=Yc[0]),Fb=[Gc,Yc],ob.invert&&(Gc=ob(Gc),Yc=ob(Yc)),Yc<Gc&&(ld=Gc,Gc=Yc,Yc=ld),Gc!=fb[0]||Yc!=fb[1])&&(fb=[Gc,Yc]);hb&&(pd=Oc[0],sd=Oc[1],ob&&(pd=pd[1],sd=sd[1]),Tb=[pd,sd],hb.invert&&(pd=hb(pd),sd=hb(sd)),sd<pd&&(ld=pd,pd=sd,sd=ld),pd!=xb[0]||sd!=xb[1])&&(xb=[pd,sd]);return da};da.clear=function(){da.empty()||(fb=[0,
0],xb=[0,0],Fb=Tb=null);return da};da.empty=function(){return!!ob&&fb[0]==fb[1]||!!hb&&xb[0]==xb[1]};return Qa.rebind(da,Wa,"on")};var ef={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Wf=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]];Qa.text=Ka(function(da){return da.responseText});Qa.json=function(da,ua){return Ta(da,"application/json",Oh,ua)};Qa.html=function(da,ua){return Ta(da,"text/html",Ya,ua)};Qa.xml=
Ka(function(da){return da.responseXML});"object"===typeof N&&N.exports?N.exports=Qa:this.d3=Qa}.apply(self)},{}],59:[function(b,N,G){N.exports=b("./quad")},{"./quad":60}],60:[function(b,N,G){function p(e,f){var q=f[0],t=f[1],w=1/(f[2]-q);f=1/(f[3]-t);for(var x=Array(e.length),z=0,B=e.length/2;z<B;z++)x[2*z]=k((e[2*z]-q)*w,0,1),x[2*z+1]=k((e[2*z+1]-t)*f,0,1);return x}var n=b("binary-search-bounds"),k=b("clamp"),m=b("parse-rect"),a=b("array-bounds"),g=b("pick-by-alias"),h=b("defined"),r=b("flatten-vertex-data"),
l=b("is-obj"),c=b("dtype"),d=b("math-log2");N.exports=function(e,f){function q(I,L,H,M,Q,Z){if(!M.length)return null;var ca=C[Q]||(C[Q]=[]),W=y[Q]||(y[Q]=[]),T=v[Q]||(v[Q]=[]),U=ca.length;Q++;if(Q>x||1073741824<Z){for(I=0;I<M.length;I++)ca.push(M[I]),W.push(Z),T.push(null,null,null,null);return U}ca.push(M[0]);W.push(Z);if(1>=M.length)return T.push(null,null,null,null),U;ca=.5*H;W=I+ca;H=L+ca;for(var ha=[],Y=[],ba=[],ja=[],ma=1,ia=M.length;ma<ia;ma++){var oa=M[ma],xa=B[2*oa+1];B[2*oa]<W?xa<H?ha.push(oa):
Y.push(oa):xa<H?ba.push(oa):ja.push(oa)}Z<<=2;T.push(q(I,L,ca,ha,Q,Z),q(I,H,ca,Y,Q,Z+1),q(W,L,ca,ba,Q,Z+2),q(W,H,ca,ja,Q,Z+3));return U}function t(I,L,H,M,Q){for(var Z=[],ca=0;ca<Q;ca++){var W=y[ca],T=F[ca][0],U=w(I,L,ca),ha=w(H,M,ca);U=n.ge(W,U);W=n.gt(W,ha,U,W.length-1);Z[ca]=[U+T,W+T]}return Z}function w(I,L,H){for(var M=1,Q=.5,Z=.5,ca=.5,W=0;W<H;W++)M<<=2,M+=I<Q?L<Z?0:1:L<Z?2:3,ca*=.5,Q+=I<Q?-ca:ca,Z+=L<Z?-ca:ca;return M}f||(f={});e=r(e,"float64");f=g(f,{bounds:"range bounds dataBox databox",
maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var x=h(f.maxDepth,255),z=h(f.bounds,a(e,2));z[0]===z[2]&&z[2]++;z[1]===z[3]&&z[3]++;var B=p(e,z),A=e.length>>>1;f.dtype||(f.dtype="array");if("string"===typeof f.dtype)var D=new (c(f.dtype))(A);else f.dtype&&(D=f.dtype,Array.isArray(D)&&(D.length=A));for(f=0;f<A;++f)D[f]=f;var C=[],v=[],y=[],F=[];q(0,0,1,D,0,1);for(f=A=0;f<C.length;f++){var J=C[f];if(D.set)D.set(J,A);else for(var K=
0,O=J.length;K<O;K++)D[K+A]=J[K];J=A+C[f].length;F[f]=[A,J];A=J}D.range=function(){function I(ia,oa,xa,ra,la,ka){if(null!==la&&null!==ka&&!(T>ia+xa||U>oa+xa||ha<ia||Y<oa||ra>=ba||la===ka)){var na=C[ra];void 0===ka&&(ka=na.length);for(var qa=la;qa<ka;qa++){var ta=na[qa],za=e[2*ta],Ia=e[2*ta+1];za>=Q&&za<=ca&&Ia>=Z&&Ia<=W&&ma.push(ta)}za=v[ra];ka=za[4*la];na=za[4*la+1];qa=za[4*la+2];ta=za[4*la+3];a:{Ia=null;for(var Xa=0;null===Ia;)if(Ia=za[4*(la+1)+Xa],Xa++,Xa>za.length){la=null;break a}la=Ia}xa*=.5;
ra+=1;I(ia,oa,xa,ra,ka,na||qa||ta||la);I(ia,oa+xa,xa,ra,na,qa||ta||la);I(ia+xa,oa,xa,ra,qa,ta||la);I(ia+xa,oa+xa,xa,ra,ta,la)}}for(var L=[],H=arguments.length;H--;)L[H]=arguments[H];if(l(L[L.length-1])){var M=L.pop();L.length||null==M.x&&null==M.l&&null==M.left||(L=[M],H={});H=g(M,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else H={};L.length||(L=z);L=m.apply(void 0,L);L=[Math.min(L.x,L.x+L.width),Math.min(L.y,
L.y+L.height),Math.max(L.x,L.x+L.width),Math.max(L.y,L.y+L.height)];var Q=L[0],Z=L[1],ca=L[2],W=L[3];L=p([Q,Z,ca,W],z);var T=L[0],U=L[1],ha=L[2],Y=L[3],ba=h(H.level,C.length);if(null!=H.d){if("number"===typeof H.d)var ja=[H.d,H.d];else H.d.length&&(ja=H.d);ba=Math.min(Math.max(Math.ceil(-d(Math.abs(ja[0])/(z[2]-z[0]))),Math.ceil(-d(Math.abs(ja[1])/(z[3]-z[1])))),ba)}ba=Math.min(ba,C.length);if(H.lod)return t(T,U,ha,Y,ba);var ma=[];I(0,0,1,0,0,1);return ma};return D}},{"array-bounds":76,"binary-search-bounds":103,
clamp:126,defined:179,dtype:184,"flatten-vertex-data":252,"is-obj":456,"math-log2":467,"parse-rect":492,"pick-by-alias":498}],61:[function(b,N,G){function p(m){var a=0;if(m&&0<m.length){a+=Math.abs(n(m[0]));for(var g=1;g<m.length;g++)a-=Math.abs(n(m[g]))}return a}function n(m){var a,g=0,h=m.length;if(2<h){for(a=0;a<h;a++){if(a===h-2){var r=h-2;var l=h-1;var c=0}else a===h-1?(r=h-1,l=0,c=1):(r=a,l=a+1,c=a+2);r=m[r];l=m[l];c=m[c];g+=(c[0]*Math.PI/180-r[0]*Math.PI/180)*Math.sin(l[1]*Math.PI/180)}g=40680631590769*
g/2}return g}Object.defineProperty(G,"__esModule",{value:!0});var k=b("@turf/meta");G.default=function(m){return k.geomReduce(m,function(a,g){a:{var h=0,r;switch(g.type){case "Polygon":g=p(g.coordinates);break a;case "MultiPolygon":for(r=0;r<g.coordinates.length;r++)h+=p(g.coordinates[r]);g=h;break a}g=0}return a+g},0)}},{"@turf/meta":63}],62:[function(b,N,G){function p(f,q,t){void 0===t&&(t={});var w={type:"Feature"};if(0===t.id||t.id)w.id=t.id;t.bbox&&(w.bbox=t.bbox);w.properties=q||{};w.geometry=
f;return w}function n(f,q,t){void 0===t&&(t={});if(!f)throw Error("coordinates is required");if(!Array.isArray(f))throw Error("coordinates must be an Array");if(2>f.length)throw Error("coordinates must be at least 2 numbers long");if(!e(f[0])||!e(f[1]))throw Error("coordinates must contain numbers");return p({type:"Point",coordinates:f},q,t)}function k(f,q,t){void 0===t&&(t={});for(var w=0;w<f.length;w++){var x=f[w];if(4>x.length)throw Error("Each LinearRing of a Polygon must have 4 or more Positions.");
for(var z=0;z<x[x.length-1].length;z++)if(x[x.length-1][z]!==x[0][z])throw Error("First and last Position are not equivalent.");}return p({type:"Polygon",coordinates:f},q,t)}function m(f,q,t){void 0===t&&(t={});if(2>f.length)throw Error("coordinates must be an array of two or more positions");return p({type:"LineString",coordinates:f},q,t)}function a(f,q){void 0===q&&(q={});var t={type:"FeatureCollection"};q.id&&(t.id=q.id);q.bbox&&(t.bbox=q.bbox);t.features=f;return t}function g(f,q,t){void 0===
t&&(t={});return p({type:"MultiLineString",coordinates:f},q,t)}function h(f,q,t){void 0===t&&(t={});return p({type:"MultiPoint",coordinates:f},q,t)}function r(f,q,t){void 0===t&&(t={});return p({type:"MultiPolygon",coordinates:f},q,t)}function l(f,q){void 0===q&&(q="kilometers");var t=G.factors[q];if(!t)throw Error(q+" units is invalid");return f*t}function c(f,q){void 0===q&&(q="kilometers");var t=G.factors[q];if(!t)throw Error(q+" units is invalid");return f/t}function d(f){return f%(2*Math.PI)*
180/Math.PI}function e(f){return!isNaN(f)&&null!==f&&!Array.isArray(f)}Object.defineProperty(G,"__esModule",{value:!0});G.earthRadius=6371008.8;G.factors={centimeters:100*G.earthRadius,centimetres:100*G.earthRadius,degrees:G.earthRadius/111325,feet:3.28084*G.earthRadius,inches:39.37*G.earthRadius,kilometers:G.earthRadius/1E3,kilometres:G.earthRadius/1E3,meters:G.earthRadius,metres:G.earthRadius,miles:G.earthRadius/1609.344,millimeters:1E3*G.earthRadius,millimetres:1E3*G.earthRadius,nauticalmiles:G.earthRadius/
1852,radians:1,yards:1.0936*G.earthRadius};G.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1E3,millimetres:1E3,nauticalmiles:1/1852,radians:1/G.earthRadius,yards:1.0936133};G.areaFactors={acres:2.47105E-4,centimeters:1E4,centimetres:1E4,feet:10.763910417,hectares:1E-4,inches:1550.003100006,kilometers:1E-6,kilometres:1E-6,meters:1,metres:1,miles:3.86E-7,millimeters:1E6,millimetres:1E6,
yards:1.195990046};G.feature=p;G.geometry=function(f,q,t){switch(f){case "Point":return n(q).geometry;case "LineString":return m(q).geometry;case "Polygon":return k(q).geometry;case "MultiPoint":return h(q).geometry;case "MultiLineString":return g(q).geometry;case "MultiPolygon":return r(q).geometry;default:throw Error(f+" is invalid");}};G.point=n;G.points=function(f,q,t){void 0===t&&(t={});return a(f.map(function(w){return n(w,q)}),t)};G.polygon=k;G.polygons=function(f,q,t){void 0===t&&(t={});return a(f.map(function(w){return k(w,
q)}),t)};G.lineString=m;G.lineStrings=function(f,q,t){void 0===t&&(t={});return a(f.map(function(w){return m(w,q)}),t)};G.featureCollection=a;G.multiLineString=g;G.multiPoint=h;G.multiPolygon=r;G.geometryCollection=function(f,q,t){void 0===t&&(t={});return p({type:"GeometryCollection",geometries:f},q,t)};G.round=function(f,q){void 0===q&&(q=0);if(q&&!(0<=q))throw Error("precision must be a positive number");q=Math.pow(10,q||0);return Math.round(f*q)/q};G.radiansToLength=l;G.lengthToRadians=c;G.lengthToDegrees=
function(f,q){return d(c(f,q))};G.bearingToAzimuth=function(f){f%=360;0>f&&(f+=360);return f};G.radiansToDegrees=d;G.degreesToRadians=function(f){return f%360*Math.PI/180};G.convertLength=function(f,q,t){void 0===q&&(q="kilometers");void 0===t&&(t="kilometers");if(!(0<=f))throw Error("length must be a positive number");return l(c(f,q),t)};G.convertArea=function(f,q,t){void 0===q&&(q="meters");void 0===t&&(t="kilometers");if(!(0<=f))throw Error("area must be a positive number");q=G.areaFactors[q];
if(!q)throw Error("invalid original units");t=G.areaFactors[t];if(!t)throw Error("invalid final units");return f/q*t};G.isNumber=e;G.isObject=function(f){return!!f&&f.constructor===Object};G.validateBBox=function(f){if(!f)throw Error("bbox is required");if(!Array.isArray(f))throw Error("bbox must be an Array");if(4!==f.length&&6!==f.length)throw Error("bbox must be an Array of 4 or 6 numbers");f.forEach(function(q){if(!e(q))throw Error("bbox must only contain numbers");})};G.validateId=function(f){if(!f)throw Error("id is required");
if(-1===["string","number"].indexOf(typeof f))throw Error("id must be a number or a string");}},{}],63:[function(b,N,G){function p(l,c,d){if(null!==l){var e,f=0,q;var t=l.type;for(var w="FeatureCollection"===t,x="Feature"===t,z=w?l.features.length:1,B=0;B<z;B++){var A=(q=(e=w?l.features[B].geometry:x?l.geometry:l)?"GeometryCollection"===e.type:!1)?e.geometries.length:1;for(var D=0;D<A;D++){var C=0,v=0;var y=q?e.geometries[D]:e;if(null!==y){var F=y.coordinates;var J=y.type;var K=!d||"Polygon"!==J&&
"MultiPolygon"!==J?0:1;switch(J){case null:break;case "Point":if(!1===c(F,f,B,C,v))return!1;f++;break;case "LineString":case "MultiPoint":for(t=0;t<F.length;t++){if(!1===c(F[t],f,B,C,v))return!1;f++;"MultiPoint"===J&&C++}break;case "Polygon":case "MultiLineString":for(t=0;t<F.length;t++){for(y=0;y<F[t].length-K;y++){if(!1===c(F[t][y],f,B,C,v))return!1;f++}"MultiLineString"===J&&C++;"Polygon"===J&&v++}break;case "MultiPolygon":for(t=0;t<F.length;t++){for(y=v=0;y<F[t].length;y++){for(J=0;J<F[t][y].length-
K;J++){if(!1===c(F[t][y][J],f,B,C,v))return!1;f++}v++}C++}break;case "GeometryCollection":for(t=0;t<y.geometries.length;t++)if(!1===p(y.geometries[t],c,d))return!1;break;default:throw Error("Unknown Geometry Type");}}}}}}function n(l,c){var d;switch(l.type){case "FeatureCollection":for(d=0;d<l.features.length&&!1!==c(l.features[d].properties,d);d++);break;case "Feature":c(l.properties,0)}}function k(l,c){if("Feature"===l.type)c(l,0);else if("FeatureCollection"===l.type)for(var d=0;d<l.features.length&&
!1!==c(l.features[d],d);d++);}function m(l,c){var d,e,f,q,t=0,w="FeatureCollection"===l.type,x="Feature"===l.type,z=w?l.features.length:1;for(d=0;d<z;d++){var B=w?l.features[d].geometry:x?l.geometry:l;var A=w?l.features[d].properties:x?l.properties:{};var D=w?l.features[d].bbox:x?l.bbox:void 0;var C=w?l.features[d].id:x?l.id:void 0;var v=(q=B?"GeometryCollection"===B.type:!1)?B.geometries.length:1;for(f=0;f<v;f++){var y=q?B.geometries[f]:B;if(null===y){if(!1===c(null,t,A,D,C))return!1}else switch(y.type){case "Point":case "LineString":case "MultiPoint":case "Polygon":case "MultiLineString":case "MultiPolygon":if(!1===
c(y,t,A,D,C))return!1;break;case "GeometryCollection":for(e=0;e<y.geometries.length;e++)if(!1===c(y.geometries[e],t,A,D,C))return!1;break;default:throw Error("Unknown Geometry Type");}}t++}}function a(l,c){m(l,function(d,e,f,q,t){var w=null===d?null:d.type;switch(w){case null:case "Point":case "LineString":case "Polygon":if(!1===c(r.feature(d,f,{bbox:q,id:t}),e,0))return!1;return}switch(w){case "MultiPoint":var x="Point";break;case "MultiLineString":x="LineString";break;case "MultiPolygon":x="Polygon"}for(q=
0;q<d.coordinates.length;q++)if(!1===c(r.feature({type:x,coordinates:d.coordinates[q]},f),e,q))return!1})}function g(l,c){a(l,function(d,e,f){var q=0;if(d.geometry){var t=d.geometry.type;if("Point"!==t&&"MultiPoint"!==t){var w,x=0,z=0,B=0;if(!1===p(d,function(A,D,C,v,y){if(void 0===w||e>x||v>z||y>B)w=A,x=e,z=v,B=y,q=0;else{D=r.lineString([w,A],d.properties);if(!1===c(D,e,f,y,q))return!1;q++;w=A}}))return!1}}})}function h(l,c){if(!l)throw Error("geojson is required");a(l,function(d,e,f){if(null!==
d.geometry){var q=d.geometry.coordinates;switch(d.geometry.type){case "LineString":if(!1===c(d,e,f,0,0))return!1;break;case "Polygon":for(var t=0;t<q.length;t++)if(!1===c(r.lineString(q[t],d.properties),e,f,t))return!1}}})}Object.defineProperty(G,"__esModule",{value:!0});var r=b("@turf/helpers");G.coordEach=p;G.coordReduce=function(l,c,d,e){var f=d;p(l,function(q,t,w,x,z){f=0===t&&void 0===d?q:c(f,q,t,w,x,z)},e);return f};G.propEach=n;G.propReduce=function(l,c,d){var e=d;n(l,function(f,q){e=0===q&&
void 0===d?f:c(e,f,q)});return e};G.featureEach=k;G.featureReduce=function(l,c,d){var e=d;k(l,function(f,q){e=0===q&&void 0===d?f:c(e,f,q)});return e};G.coordAll=function(l){var c=[];p(l,function(d){c.push(d)});return c};G.geomEach=m;G.geomReduce=function(l,c,d){var e=d;m(l,function(f,q,t,w,x){e=0===q&&void 0===d?f:c(e,f,q,t,w,x)});return e};G.flattenEach=a;G.flattenReduce=function(l,c,d){var e=d;a(l,function(f,q,t){e=0===q&&0===t&&void 0===d?f:c(e,f,q,t)});return e};G.segmentEach=g;G.segmentReduce=
function(l,c,d){var e=d,f=!1;g(l,function(q,t,w,x,z){e=!1===f&&void 0===d?q:c(e,q,t,w,x,z);f=!0});return e};G.lineEach=h;G.lineReduce=function(l,c,d){var e=d;h(l,function(f,q,t,w){e=0===q&&void 0===d?f:c(e,f,q,t,w)});return e};G.findSegment=function(l,c){c=c||{};if(!r.isObject(c))throw Error("options is invalid");var d=c.featureIndex||0,e=c.multiFeatureIndex||0,f=c.geometryIndex||0,q=c.segmentIndex||0,t=c.properties;switch(l.type){case "FeatureCollection":0>d&&(d=l.features.length+d);t=t||l.features[d].properties;
l=l.features[d].geometry;break;case "Feature":t=t||l.properties;l=l.geometry;break;case "Point":case "MultiPoint":return null;case "LineString":case "Polygon":case "MultiLineString":case "MultiPolygon":break;default:throw Error("geojson is invalid");}if(null===l)return null;d=l.coordinates;switch(l.type){case "Point":case "MultiPoint":return null;case "LineString":return 0>q&&(q=d.length+q-1),r.lineString([d[q],d[q+1]],t,c);case "Polygon":return 0>f&&(f=d.length+f),0>q&&(q=d[f].length+q-1),r.lineString([d[f][q],
d[f][q+1]],t,c);case "MultiLineString":return 0>e&&(e=d.length+e),0>q&&(q=d[e].length+q-1),r.lineString([d[e][q],d[e][q+1]],t,c);case "MultiPolygon":return 0>e&&(e=d.length+e),0>f&&(f=d[e].length+f),0>q&&(q=d[e][f].length-q-1),r.lineString([d[e][f][q],d[e][f][q+1]],t,c)}throw Error("geojson is invalid");};G.findPoint=function(l,c){c=c||{};if(!r.isObject(c))throw Error("options is invalid");var d=c.featureIndex||0,e=c.multiFeatureIndex||0,f=c.geometryIndex||0,q=c.coordIndex||0,t=c.properties;switch(l.type){case "FeatureCollection":0>
d&&(d=l.features.length+d);t=t||l.features[d].properties;l=l.features[d].geometry;break;case "Feature":t=t||l.properties;l=l.geometry;break;case "Point":case "MultiPoint":return null;case "LineString":case "Polygon":case "MultiLineString":case "MultiPolygon":break;default:throw Error("geojson is invalid");}if(null===l)return null;d=l.coordinates;switch(l.type){case "Point":return r.point(d,t,c);case "MultiPoint":return 0>e&&(e=d.length+e),r.point(d[e],t,c);case "LineString":return 0>q&&(q=d.length+
q),r.point(d[q],t,c);case "Polygon":return 0>f&&(f=d.length+f),0>q&&(q=d[f].length+q),r.point(d[f][q],t,c);case "MultiLineString":return 0>e&&(e=d.length+e),0>q&&(q=d[e].length+q),r.point(d[e][q],t,c);case "MultiPolygon":return 0>e&&(e=d.length+e),0>f&&(f=d[e].length+f),0>q&&(q=d[e][f].length-q),r.point(d[e][f][q],t,c)}throw Error("geojson is invalid");}},{"@turf/helpers":62}],64:[function(b,N,G){function p(k){var m=[Infinity,Infinity,-Infinity,-Infinity];n.coordEach(k,function(a){m[0]>a[0]&&(m[0]=
a[0]);m[1]>a[1]&&(m[1]=a[1]);m[2]<a[0]&&(m[2]=a[0]);m[3]<a[1]&&(m[3]=a[1])});return m}Object.defineProperty(G,"__esModule",{value:!0});var n=b("@turf/meta");p["default"]=p;G.default=p},{"@turf/meta":66}],65:[function(b,N,G){arguments[4][62][0].apply(G,arguments)},{dup:62}],66:[function(b,N,G){arguments[4][63][0].apply(G,arguments)},{"@turf/helpers":65,dup:63}],67:[function(b,N,G){Object.defineProperty(G,"__esModule",{value:!0});var p=b("@turf/meta"),n=b("@turf/helpers");G.default=function(k,m){void 0===
m&&(m={});var a=0,g=0,h=0;p.coordEach(k,function(r){a+=r[0];g+=r[1];h++});return n.point([a/h,g/h],m.properties)}},{"@turf/helpers":68,"@turf/meta":69}],68:[function(b,N,G){function p(f,q,t){void 0===t&&(t={});var w={type:"Feature"};if(0===t.id||t.id)w.id=t.id;t.bbox&&(w.bbox=t.bbox);w.properties=q||{};w.geometry=f;return w}function n(f,q,t){void 0===t&&(t={});return p({type:"Point",coordinates:f},q,t)}function k(f,q,t){void 0===t&&(t={});for(var w=0;w<f.length;w++){var x=f[w];if(4>x.length)throw Error("Each LinearRing of a Polygon must have 4 or more Positions.");
for(var z=0;z<x[x.length-1].length;z++)if(x[x.length-1][z]!==x[0][z])throw Error("First and last Position are not equivalent.");}return p({type:"Polygon",coordinates:f},q,t)}function m(f,q,t){void 0===t&&(t={});if(2>f.length)throw Error("coordinates must be an array of two or more positions");return p({type:"LineString",coordinates:f},q,t)}function a(f,q){void 0===q&&(q={});var t={type:"FeatureCollection"};q.id&&(t.id=q.id);q.bbox&&(t.bbox=q.bbox);t.features=f;return t}function g(f,q,t){void 0===
t&&(t={});return p({type:"MultiLineString",coordinates:f},q,t)}function h(f,q,t){void 0===t&&(t={});return p({type:"MultiPoint",coordinates:f},q,t)}function r(f,q,t){void 0===t&&(t={});return p({type:"MultiPolygon",coordinates:f},q,t)}function l(f,q){void 0===q&&(q="kilometers");var t=G.factors[q];if(!t)throw Error(q+" units is invalid");return f*t}function c(f,q){void 0===q&&(q="kilometers");var t=G.factors[q];if(!t)throw Error(q+" units is invalid");return f/t}function d(f){return f%(2*Math.PI)*
180/Math.PI}function e(f){return!isNaN(f)&&null!==f&&!Array.isArray(f)&&!/^\s*$/.test(f)}Object.defineProperty(G,"__esModule",{value:!0});G.earthRadius=6371008.8;G.factors={centimeters:100*G.earthRadius,centimetres:100*G.earthRadius,degrees:G.earthRadius/111325,feet:3.28084*G.earthRadius,inches:39.37*G.earthRadius,kilometers:G.earthRadius/1E3,kilometres:G.earthRadius/1E3,meters:G.earthRadius,metres:G.earthRadius,miles:G.earthRadius/1609.344,millimeters:1E3*G.earthRadius,millimetres:1E3*G.earthRadius,
nauticalmiles:G.earthRadius/1852,radians:1,yards:G.earthRadius/1.0936};G.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1E3,millimetres:1E3,nauticalmiles:1/1852,radians:1/G.earthRadius,yards:1/1.0936};G.areaFactors={acres:2.47105E-4,centimeters:1E4,centimetres:1E4,feet:10.763910417,inches:1550.003100006,kilometers:1E-6,kilometres:1E-6,meters:1,metres:1,miles:3.86E-7,millimeters:1E6,
millimetres:1E6,yards:1.195990046};G.feature=p;G.geometry=function(f,q,t){switch(f){case "Point":return n(q).geometry;case "LineString":return m(q).geometry;case "Polygon":return k(q).geometry;case "MultiPoint":return h(q).geometry;case "MultiLineString":return g(q).geometry;case "MultiPolygon":return r(q).geometry;default:throw Error(f+" is invalid");}};G.point=n;G.points=function(f,q,t){void 0===t&&(t={});return a(f.map(function(w){return n(w,q)}),t)};G.polygon=k;G.polygons=function(f,q,t){void 0===
t&&(t={});return a(f.map(function(w){return k(w,q)}),t)};G.lineString=m;G.lineStrings=function(f,q,t){void 0===t&&(t={});return a(f.map(function(w){return m(w,q)}),t)};G.featureCollection=a;G.multiLineString=g;G.multiPoint=h;G.multiPolygon=r;G.geometryCollection=function(f,q,t){void 0===t&&(t={});return p({type:"GeometryCollection",geometries:f},q,t)};G.round=function(f,q){void 0===q&&(q=0);if(q&&!(0<=q))throw Error("precision must be a positive number");q=Math.pow(10,q||0);return Math.round(f*q)/
q};G.radiansToLength=l;G.lengthToRadians=c;G.lengthToDegrees=function(f,q){return d(c(f,q))};G.bearingToAzimuth=function(f){f%=360;0>f&&(f+=360);return f};G.radiansToDegrees=d;G.degreesToRadians=function(f){return f%360*Math.PI/180};G.convertLength=function(f,q,t){void 0===q&&(q="kilometers");void 0===t&&(t="kilometers");if(!(0<=f))throw Error("length must be a positive number");return l(c(f,q),t)};G.convertArea=function(f,q,t){void 0===q&&(q="meters");void 0===t&&(t="kilometers");if(!(0<=f))throw Error("area must be a positive number");
q=G.areaFactors[q];if(!q)throw Error("invalid original units");t=G.areaFactors[t];if(!t)throw Error("invalid final units");return f/q*t};G.isNumber=e;G.isObject=function(f){return!!f&&f.constructor===Object};G.validateBBox=function(f){if(!f)throw Error("bbox is required");if(!Array.isArray(f))throw Error("bbox must be an Array");if(4!==f.length&&6!==f.length)throw Error("bbox must be an Array of 4 or 6 numbers");f.forEach(function(q){if(!e(q))throw Error("bbox must only contain numbers");})};G.validateId=
function(f){if(!f)throw Error("id is required");if(-1===["string","number"].indexOf(typeof f))throw Error("id must be a number or a string");};G.radians2degrees=function(){throw Error("method has been renamed to `radiansToDegrees`");};G.degrees2radians=function(){throw Error("method has been renamed to `degreesToRadians`");};G.distanceToDegrees=function(){throw Error("method has been renamed to `lengthToDegrees`");};G.distanceToRadians=function(){throw Error("method has been renamed to `lengthToRadians`");
};G.radiansToDistance=function(){throw Error("method has been renamed to `radiansToLength`");};G.bearingToAngle=function(){throw Error("method has been renamed to `bearingToAzimuth`");};G.convertDistance=function(){throw Error("method has been renamed to `convertLength`");}},{}],69:[function(b,N,G){function p(l,c,d){if(null!==l){var e,f=0,q;var t=l.type;for(var w="FeatureCollection"===t,x="Feature"===t,z=w?l.features.length:1,B=0;B<z;B++){var A=(q=(e=w?l.features[B].geometry:x?l.geometry:l)?"GeometryCollection"===
e.type:!1)?e.geometries.length:1;for(var D=0;D<A;D++){var C=0,v=0;var y=q?e.geometries[D]:e;if(null!==y){var F=y.coordinates;var J=y.type;var K=!d||"Polygon"!==J&&"MultiPolygon"!==J?0:1;switch(J){case null:break;case "Point":if(!1===c(F,f,B,C,v))return!1;f++;break;case "LineString":case "MultiPoint":for(t=0;t<F.length;t++){if(!1===c(F[t],f,B,C,v))return!1;f++;"MultiPoint"===J&&C++}break;case "Polygon":case "MultiLineString":for(t=0;t<F.length;t++){for(y=0;y<F[t].length-K;y++){if(!1===c(F[t][y],f,
B,C,v))return!1;f++}"MultiLineString"===J&&C++;"Polygon"===J&&v++}break;case "MultiPolygon":for(t=0;t<F.length;t++){for(y=v=0;y<F[t].length;y++){for(J=0;J<F[t][y].length-K;J++){if(!1===c(F[t][y][J],f,B,C,v))return!1;f++}v++}C++}break;case "GeometryCollection":for(t=0;t<y.geometries.length;t++)if(!1===p(y.geometries[t],c,d))return!1;break;default:throw Error("Unknown Geometry Type");}}}}}}function n(l,c){var d;switch(l.type){case "FeatureCollection":for(d=0;d<l.features.length&&!1!==c(l.features[d].properties,
d);d++);break;case "Feature":c(l.properties,0)}}function k(l,c){if("Feature"===l.type)c(l,0);else if("FeatureCollection"===l.type)for(var d=0;d<l.features.length&&!1!==c(l.features[d],d);d++);}function m(l,c){var d,e,f,q,t=0,w="FeatureCollection"===l.type,x="Feature"===l.type,z=w?l.features.length:1;for(d=0;d<z;d++){var B=w?l.features[d].geometry:x?l.geometry:l;var A=w?l.features[d].properties:x?l.properties:{};var D=w?l.features[d].bbox:x?l.bbox:void 0;var C=w?l.features[d].id:x?l.id:void 0;var v=
(q=B?"GeometryCollection"===B.type:!1)?B.geometries.length:1;for(f=0;f<v;f++){var y=q?B.geometries[f]:B;if(null===y){if(!1===c(null,t,A,D,C))return!1}else switch(y.type){case "Point":case "LineString":case "MultiPoint":case "Polygon":case "MultiLineString":case "MultiPolygon":if(!1===c(y,t,A,D,C))return!1;break;case "GeometryCollection":for(e=0;e<y.geometries.length;e++)if(!1===c(y.geometries[e],t,A,D,C))return!1;break;default:throw Error("Unknown Geometry Type");}}t++}}function a(l,c){m(l,function(d,
e,f,q,t){var w=null===d?null:d.type;switch(w){case null:case "Point":case "LineString":case "Polygon":if(!1===c(r.feature(d,f,{bbox:q,id:t}),e,0))return!1;return}switch(w){case "MultiPoint":var x="Point";break;case "MultiLineString":x="LineString";break;case "MultiPolygon":x="Polygon"}for(q=0;q<d.coordinates.length;q++)if(!1===c(r.feature({type:x,coordinates:d.coordinates[q]},f),e,q))return!1})}function g(l,c){a(l,function(d,e,f){var q=0;if(d.geometry){var t=d.geometry.type;if("Point"!==t&&"MultiPoint"!==
t){var w,x=0,z=0,B=0;if(!1===p(d,function(A,D,C,v,y){if(void 0===w||e>x||v>z||y>B)w=A,x=e,z=v,B=y,q=0;else{D=r.lineString([w,A],d.properties);if(!1===c(D,e,f,y,q))return!1;q++;w=A}}))return!1}}})}function h(l,c){if(!l)throw Error("geojson is required");a(l,function(d,e,f){if(null!==d.geometry){var q=d.geometry.coordinates;switch(d.geometry.type){case "LineString":if(!1===c(d,e,f,0,0))return!1;break;case "Polygon":for(var t=0;t<q.length;t++)if(!1===c(r.lineString(q[t],d.properties),e,f,t))return!1}}})}
Object.defineProperty(G,"__esModule",{value:!0});var r=b("@turf/helpers");G.coordEach=p;G.coordReduce=function(l,c,d,e){var f=d;p(l,function(q,t,w,x,z){f=0===t&&void 0===d?q:c(f,q,t,w,x,z)},e);return f};G.propEach=n;G.propReduce=function(l,c,d){var e=d;n(l,function(f,q){e=0===q&&void 0===d?f:c(e,f,q)});return e};G.featureEach=k;G.featureReduce=function(l,c,d){var e=d;k(l,function(f,q){e=0===q&&void 0===d?f:c(e,f,q)});return e};G.coordAll=function(l){var c=[];p(l,function(d){c.push(d)});return c};
G.geomEach=m;G.geomReduce=function(l,c,d){var e=d;m(l,function(f,q,t,w,x){e=0===q&&void 0===d?f:c(e,f,q,t,w,x)});return e};G.flattenEach=a;G.flattenReduce=function(l,c,d){var e=d;a(l,function(f,q,t){e=0===q&&0===t&&void 0===d?f:c(e,f,q,t)});return e};G.segmentEach=g;G.segmentReduce=function(l,c,d){var e=d,f=!1;g(l,function(q,t,w,x,z){e=!1===f&&void 0===d?q:c(e,q,t,w,x,z);f=!0});return e};G.lineEach=h;G.lineReduce=function(l,c,d){var e=d;h(l,function(f,q,t,w){e=0===q&&void 0===d?f:c(e,f,q,t,w)});return e};
G.findSegment=function(l,c){c=c||{};if(!r.isObject(c))throw Error("options is invalid");var d=c.featureIndex||0,e=c.multiFeatureIndex||0,f=c.geometryIndex||0,q=c.segmentIndex||0,t=c.properties;switch(l.type){case "FeatureCollection":0>d&&(d=l.features.length+d);t=t||l.features[d].properties;l=l.features[d].geometry;break;case "Feature":t=t||l.properties;l=l.geometry;break;case "Point":case "MultiPoint":return null;case "LineString":case "Polygon":case "MultiLineString":case "MultiPolygon":break;default:throw Error("geojson is invalid");
}if(null===l)return null;d=l.coordinates;switch(l.type){case "Point":case "MultiPoint":return null;case "LineString":return 0>q&&(q=d.length+q-1),r.lineString([d[q],d[q+1]],t,c);case "Polygon":return 0>f&&(f=d.length+f),0>q&&(q=d[f].length+q-1),r.lineString([d[f][q],d[f][q+1]],t,c);case "MultiLineString":return 0>e&&(e=d.length+e),0>q&&(q=d[e].length+q-1),r.lineString([d[e][q],d[e][q+1]],t,c);case "MultiPolygon":return 0>e&&(e=d.length+e),0>f&&(f=d[e].length+f),0>q&&(q=d[e][f].length-q-1),r.lineString([d[e][f][q],
d[e][f][q+1]],t,c)}throw Error("geojson is invalid");};G.findPoint=function(l,c){c=c||{};if(!r.isObject(c))throw Error("options is invalid");var d=c.featureIndex||0,e=c.multiFeatureIndex||0,f=c.geometryIndex||0,q=c.coordIndex||0,t=c.properties;switch(l.type){case "FeatureCollection":0>d&&(d=l.features.length+d);t=t||l.features[d].properties;l=l.features[d].geometry;break;case "Feature":t=t||l.properties;l=l.geometry;break;case "Point":case "MultiPoint":return null;case "LineString":case "Polygon":case "MultiLineString":case "MultiPolygon":break;
default:throw Error("geojson is invalid");}if(null===l)return null;d=l.coordinates;switch(l.type){case "Point":return r.point(d,t,c);case "MultiPoint":return 0>e&&(e=d.length+e),r.point(d[e],t,c);case "LineString":return 0>q&&(q=d.length+q),r.point(d[q],t,c);case "Polygon":return 0>f&&(f=d.length+f),0>q&&(q=d[f].length+q),r.point(d[f][q],t,c);case "MultiLineString":return 0>e&&(e=d.length+e),0>q&&(q=d[e].length+q),r.point(d[e][q],t,c);case "MultiPolygon":return 0>e&&(e=d.length+e),0>f&&(f=d[e].length+
f),0>q&&(q=d[e][f].length-q),r.point(d[e][f][q],t,c)}throw Error("geojson is invalid");}},{"@turf/helpers":68}],70:[function(b,N,G){G="undefined"===typeof WeakMap?b("weak-map"):WeakMap;var p=b("gl-buffer"),n=b("gl-vao"),k=new G;N.exports=function(m){var a=k.get(m),g=a&&(a._triangleBuffer.handle||a._triangleBuffer.buffer);g&&m.isBuffer(g)||(g=p(m,new Float32Array([-1,-1,-1,4,4,-1])),a=n(m,[{buffer:g,type:m.FLOAT,size:2}]),a._triangleBuffer=g,k.set(m,a));a.bind();m.drawArrays(m.TRIANGLES,0,3);a.unbind()}},
{"gl-buffer":267,"gl-vao":361,"weak-map":625}],71:[function(b,N,G){N.exports=function(p){var n=0,k=0,m=0,a=0;return p.map(function(g){g=g.slice();var h=g[0],r=h.toUpperCase();if(h!=r)switch(g[0]=r,h){case "a":g[6]+=m;g[7]+=a;break;case "v":g[1]+=a;break;case "h":g[1]+=m;break;default:for(h=1;h<g.length;)g[h++]+=m,g[h++]+=a}switch(r){case "Z":m=n;a=k;break;case "H":m=g[1];break;case "V":a=g[1];break;case "M":m=n=g[1];a=k=g[2];break;default:m=g[g.length-2],a=g[g.length-1]}return g})}},{}],72:[function(b,
N,G){var p=b("pad-left");N.exports=function(n,k,m){k="number"===typeof k?k:1;m=m||": ";n=n.split(/\r?\n/);var a=String(n.length+k-1).length;return n.map(function(g,h){h+=k;return p(h,a-String(h).length)+m+g}).join("\n")}},{"pad-left":490}],73:[function(b,N,G){N.exports=function(n){var k=n.length;if(0===k)return[];if(1===k)return[0];for(var m=n[0].length,a=[n[0]],g=[0],h=1;h<k;++h){a.push(n[h]);a:{var r=a;for(var l=m,c=Array(l+1),d=0;d<r.length;++d)c[d]=r[d];for(d=0;d<=r.length;++d){for(var e=r.length;e<=
l;++e){for(var f=Array(l),q=0;q<l;++q)f[q]=Math.pow(e+1-d,q);c[e]=f}if(p.apply(void 0,c)){r=!0;break a}}r=!1}if(r){if(g.push(h),g.length===m+1)break}else a.pop()}return g};var p=b("robust-orientation")},{"robust-orientation":548}],74:[function(b,N,G){N.exports=function(k,m){return p(m).filter(function(a){for(var g=Array(a.length),h=0;h<a.length;++h)g[h]=m[a[h]];return 1>n(g)*k})};var p=b("delaunay-triangulate"),n=b("circumradius")},{circumradius:125,"delaunay-triangulate":180}],75:[function(b,N,G){N.exports=
function(k,m){return n(p(k,m))};var p=b("alpha-complex"),n=b("simplicial-complex-boundary")},{"alpha-complex":74,"simplicial-complex-boundary":556}],76:[function(b,N,G){N.exports=function(p,n){if(!p||null==p.length)throw Error("Argument should be an array");n=null==n?1:Math.floor(n);for(var k=Array(2*n),m=0;m<n;m++){for(var a=-Infinity,g=Infinity,h=m,r=p.length;h<r;h+=n)p[h]>a&&(a=p[h]),p[h]<g&&(g=p[h]);k[m]=g;k[n+m]=a}return k}},{}],77:[function(b,N,G){N.exports=function(p,n,k){if("function"===typeof Array.prototype.findIndex)return p.findIndex(n,
k);if("function"!==typeof n)throw new TypeError("predicate must be a function");p=Object(p);var m=p.length;if(0===m)return-1;for(var a=0;a<m;a++)if(n.call(k,p[a],a,p))return a;return-1}},{}],78:[function(b,N,G){var p=b("array-bounds");N.exports=function(n,k,m){if(!n||null==n.length)throw Error("Argument should be an array");null==k&&(k=1);null==m&&(m=p(n,k));for(var a=0;a<k;a++){var g=m[k+a],h=m[a],r,l=n.length;if(Infinity===g&&-Infinity===h)for(r=a;r<l;r+=k)n[r]=n[r]===g?1:n[r]===h?0:.5;else if(Infinity===
g)for(r=a;r<l;r+=k)n[r]=n[r]===g?1:0;else if(-Infinity===h)for(r=a;r<l;r+=k)n[r]=n[r]===h?0:1;else for(g-=h,r=a;r<l;r+=k)isNaN(n[r])||(n[r]=0===g?.5:(n[r]-h)/g)}return n}},{"array-bounds":76}],79:[function(b,N,G){N.exports=function(p,n){var k="number"===typeof p,m="number"===typeof n;k&&!m?(n=p,p=0):k||m||(n=p=0);p|=0;n=(n|0)-p;if(0>n)throw Error("array length must be positive");k=Array(n);for(m=0;m<n;m++,p++)k[m]=p;return k}},{}],80:[function(b,N,G){(function(p){(function(){function n(F,J){if(F===
J)return 0;for(var K=F.length,O=J.length,I=0,L=Math.min(K,O);I<L;++I)if(F[I]!==J[I]){K=F[I];O=J[I];break}return K<O?-1:O<K?1:0}function k(F){return p.Buffer&&"function"===typeof p.Buffer.isBuffer?p.Buffer.isBuffer(F):!(null==F||!F._isBuffer)}function m(F){return k(F)||"function"!==typeof p.ArrayBuffer?!1:"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(F):F?F instanceof DataView||F.buffer&&F.buffer instanceof ArrayBuffer?!0:!1:!1}function a(F){if(z.isFunction(F))return D?F.name:(F=F.toString().match(v))&&
F[1]}function g(F,J){return"string"===typeof F?F.length<J?F:F.slice(0,J):F}function h(F){if(D||!z.isFunction(F))return z.inspect(F);F=a(F);return"[Function"+(F?": "+F:"")+"]"}function r(F,J,K,O,I){throw new C.AssertionError({message:K,actual:F,expected:J,operator:O,stackStartFunction:I});}function l(F,J){F||r(F,!0,J,"\x3d\x3d",C.ok)}function c(F,J,K,O){if(F===J)return!0;if(k(F)&&k(J))return 0===n(F,J);if(z.isDate(F)&&z.isDate(J))return F.getTime()===J.getTime();if(z.isRegExp(F)&&z.isRegExp(J))return F.source===
J.source&&F.global===J.global&&F.multiline===J.multiline&&F.lastIndex===J.lastIndex&&F.ignoreCase===J.ignoreCase;if(null!==F&&"object"===typeof F||null!==J&&"object"===typeof J){if(!m(F)||!m(J)||Object.prototype.toString.call(F)!==Object.prototype.toString.call(J)||F instanceof Float32Array||F instanceof Float64Array){if(k(F)!==k(J))return!1;O=O||{actual:[],expected:[]};var I=O.actual.indexOf(F);if(-1!==I&&I===O.expected.indexOf(J))return!0;O.actual.push(F);O.expected.push(J);return e(F,J,K,O)}return 0===
n(new Uint8Array(F.buffer),new Uint8Array(J.buffer))}return K?F===J:F==J}function d(F){return"[object Arguments]"==Object.prototype.toString.call(F)}function e(F,J,K,O){if(null===F||void 0===F||null===J||void 0===J)return!1;if(z.isPrimitive(F)||z.isPrimitive(J))return F===J;if(K&&Object.getPrototypeOf(F)!==Object.getPrototypeOf(J))return!1;var I=d(F),L=d(J);if(I&&!L||!I&&L)return!1;if(I)return F=A.call(F),J=A.call(J),c(F,J,K);I=y(F);var H=y(J);if(I.length!==H.length)return!1;I.sort();H.sort();for(L=
I.length-1;0<=L;L--)if(I[L]!==H[L])return!1;for(L=I.length-1;0<=L;L--)if(H=I[L],!c(F[H],J[H],K,O))return!1;return!0}function f(F,J,K){c(F,J,!0)&&r(F,J,K,"notDeepStrictEqual",f)}function q(F,J){if(!F||!J)return!1;if("[object RegExp]"==Object.prototype.toString.call(J))return J.test(F);try{if(F instanceof J)return!0}catch(K){}return Error.isPrototypeOf(J)?!1:!0===J.call({},F)}function t(F,J,K,O){if("function"!==typeof J)throw new TypeError('"block" argument must be a function');"string"===typeof K&&
(O=K,K=null);try{J()}catch(M){var I=M}J=I;O=(K&&K.name?" ("+K.name+").":".")+(O?" "+O:".");F&&!J&&r(J,K,"Missing expected exception"+O);I="string"===typeof O;var L=!F&&z.isError(J),H=!F&&J&&!K;(L&&I&&q(J,K)||H)&&r(J,K,"Got unwanted exception"+O);if(F&&J&&K&&!q(J,K)||!F&&J)throw J;}function w(F,J){F||r(F,!0,J,"\x3d\x3d",w)}var x=b("object-assign"),z=b("util/"),B=Object.prototype.hasOwnProperty,A=Array.prototype.slice,D=function(){return"foo"===function(){}.name}(),C=N.exports=l,v=/\s*function\s+([^\(\s]*)\s*/;
C.AssertionError=function(F){this.name="AssertionError";this.actual=F.actual;this.expected=F.expected;this.operator=F.operator;F.message?(this.message=F.message,this.generatedMessage=!1):(this.message=g(h(this.actual),128)+" "+this.operator+" "+g(h(this.expected),128),this.generatedMessage=!0);var J=F.stackStartFunction||r;Error.captureStackTrace?Error.captureStackTrace(this,J):(F=Error(),F.stack&&(F=F.stack,J=a(J),J=F.indexOf("\n"+J),0<=J&&(J=F.indexOf("\n",J+1),F=F.substring(J+1)),this.stack=F))};
z.inherits(C.AssertionError,Error);C.fail=r;C.ok=l;C.equal=function(F,J,K){F!=J&&r(F,J,K,"\x3d\x3d",C.equal)};C.notEqual=function(F,J,K){F==J&&r(F,J,K,"!\x3d",C.notEqual)};C.deepEqual=function(F,J,K){c(F,J,!1)||r(F,J,K,"deepEqual",C.deepEqual)};C.deepStrictEqual=function(F,J,K){c(F,J,!0)||r(F,J,K,"deepStrictEqual",C.deepStrictEqual)};C.notDeepEqual=function(F,J,K){c(F,J,!1)&&r(F,J,K,"notDeepEqual",C.notDeepEqual)};C.notDeepStrictEqual=f;C.strictEqual=function(F,J,K){F!==J&&r(F,J,K,"\x3d\x3d\x3d",
C.strictEqual)};C.notStrictEqual=function(F,J,K){F===J&&r(F,J,K,"!\x3d\x3d",C.notStrictEqual)};C.throws=function(F,J,K){t(!0,F,J,K)};C.doesNotThrow=function(F,J,K){t(!1,F,J,K)};C.ifError=function(F){if(F)throw F;};C.strict=x(w,C,{equal:C.strictEqual,deepEqual:C.deepStrictEqual,notEqual:C.notStrictEqual,notDeepEqual:C.notDeepStrictEqual});C.strict.strict=C.strict;var y=Object.keys||function(F){var J=[],K;for(K in F)B.call(F,K)&&J.push(K);return J}}).call(this)}).call(this,"undefined"!==typeof Re?Re:
"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"object-assign":487,"util/":83}],81:[function(b,N,G){N.exports="function"===typeof Object.create?function(p,n){p.super_=n;p.prototype=Object.create(n.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}})}:function(p,n){p.super_=n;var k=function(){};k.prototype=n.prototype;p.prototype=new k;p.prototype.constructor=p}},{}],82:[function(b,N,G){N.exports=function(p){return p&&"object"===typeof p&&"function"===
typeof p.copy&&"function"===typeof p.fill&&"function"===typeof p.readUInt8}},{}],83:[function(b,N,G){(function(p,n){(function(){function k(O,I){var L={seen:[],stylize:a};3<=arguments.length&&(L.depth=arguments[2]);4<=arguments.length&&(L.colors=arguments[3]);q(I)?L.showHidden=I:I&&G._extend(L,I);x(L.showHidden)&&(L.showHidden=!1);x(L.depth)&&(L.depth=2);x(L.colors)&&(L.colors=!1);x(L.customInspect)&&(L.customInspect=!0);L.colors&&(L.stylize=m);return h(L,O,L.depth)}function m(O,I){return(I=k.styles[I])?
"["+k.colors[I][0]+"m"+O+"["+k.colors[I][1]+"m":O}function a(O,I){return O}function g(O){var I={};O.forEach(function(L,H){I[L]=!0});return I}function h(O,I,L){if(O.customInspect&&I&&C(I.inspect)&&I.inspect!==G.inspect&&(!I.constructor||I.constructor.prototype!==I)){var H=I.inspect(L,O);w(H)||(H=h(O,H,L));return H}if(H=r(O,I))return H;var M=Object.keys(I),Q=g(M);O.showHidden&&(M=Object.getOwnPropertyNames(I));if(D(I)&&(0<=M.indexOf("message")||0<=M.indexOf("description")))return l(I);if(0===M.length){if(C(I))return O.stylize("[Function"+
(I.name?": "+I.name:"")+"]","special");if(z(I))return O.stylize(RegExp.prototype.toString.call(I),"regexp");if(A(I))return O.stylize(Date.prototype.toString.call(I),"date");if(D(I))return l(I)}H="";var Z=!1,ca=["{","}"];f(I)&&(Z=!0,ca=["[","]"]);C(I)&&(H=" [Function"+(I.name?": "+I.name:"")+"]");z(I)&&(H=" "+RegExp.prototype.toString.call(I));A(I)&&(H=" "+Date.prototype.toUTCString.call(I));D(I)&&(H=" "+l(I));if(0===M.length&&(!Z||0==I.length))return ca[0]+H+ca[1];if(0>L)return z(I)?O.stylize(RegExp.prototype.toString.call(I),
"regexp"):O.stylize("[Object]","special");O.seen.push(I);M=Z?c(O,I,L,Q,M):M.map(function(W){return d(O,I,L,Q,W,Z)});O.seen.pop();return e(M,H,ca)}function r(O,I){if(x(I))return O.stylize("undefined","undefined");if(w(I))return I="'"+JSON.stringify(I).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",O.stylize(I,"string");if(t(I))return O.stylize(""+I,"number");if(q(I))return O.stylize(""+I,"boolean");if(null===I)return O.stylize("null","null")}function l(O){return"["+Error.prototype.toString.call(O)+
"]"}function c(O,I,L,H,M){for(var Q=[],Z=0,ca=I.length;Z<ca;++Z)Object.prototype.hasOwnProperty.call(I,String(Z))?Q.push(d(O,I,L,H,String(Z),!0)):Q.push("");M.forEach(function(W){W.match(/^\d+$/)||Q.push(d(O,I,L,H,W,!0))});return Q}function d(O,I,L,H,M,Q){var Z,ca;I=Object.getOwnPropertyDescriptor(I,M)||{value:I[M]};I.get?ca=I.set?O.stylize("[Getter/Setter]","special"):O.stylize("[Getter]","special"):I.set&&(ca=O.stylize("[Setter]","special"));Object.prototype.hasOwnProperty.call(H,M)||(Z="["+M+"]");
ca||(0>O.seen.indexOf(I.value)?(ca=null===L?h(O,I.value,null):h(O,I.value,L-1),-1<ca.indexOf("\n")&&(ca=Q?ca.split("\n").map(function(W){return"  "+W}).join("\n").substr(2):"\n"+ca.split("\n").map(function(W){return"   "+W}).join("\n"))):ca=O.stylize("[Circular]","special"));if(x(Z)){if(Q&&M.match(/^\d+$/))return ca;Z=JSON.stringify(""+M);Z.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Z=Z.substr(1,Z.length-2),Z=O.stylize(Z,"name")):(Z=Z.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Z=
O.stylize(Z,"string"))}return Z+": "+ca}function e(O,I,L){var H=0;return 60<O.reduce(function(M,Q){H++;0<=Q.indexOf("\n")&&H++;return M+Q.replace(/\u001b\[\d\d?m/g,"").length+1},0)?L[0]+(""===I?"":I+"\n ")+" "+O.join(",\n  ")+" "+L[1]:L[0]+I+" "+O.join(", ")+" "+L[1]}function f(O){return Array.isArray(O)}function q(O){return"boolean"===typeof O}function t(O){return"number"===typeof O}function w(O){return"string"===typeof O}function x(O){return void 0===O}function z(O){return B(O)&&"[object RegExp]"===
Object.prototype.toString.call(O)}function B(O){return"object"===typeof O&&null!==O}function A(O){return B(O)&&"[object Date]"===Object.prototype.toString.call(O)}function D(O){return B(O)&&("[object Error]"===Object.prototype.toString.call(O)||O instanceof Error)}function C(O){return"function"===typeof O}function v(O){return 10>O?"0"+O.toString(10):O.toString(10)}var y=/%[sdj%]/g;G.format=function(O){if(!w(O)){for(var I=[],L=0;L<arguments.length;L++)I.push(k(arguments[L]));return I.join(" ")}L=1;
var H=arguments,M=H.length;I=String(O).replace(y,function(Z){if("%%"===Z)return"%";if(L>=M)return Z;switch(Z){case "%s":return String(H[L++]);case "%d":return Number(H[L++]);case "%j":try{return JSON.stringify(H[L++])}catch(ca){return"[Circular]"}default:return Z}});for(var Q=H[L];L<M;Q=H[++L])I=null!==Q&&B(Q)?I+(" "+k(Q)):I+(" "+Q);return I};G.deprecate=function(O,I){if(x(n.process))return function(){return G.deprecate(O,I).apply(this,arguments)};if(!0===p.noDeprecation)return O;var L=!1;return function(){if(!L){if(p.throwDeprecation)throw Error(I);
p.traceDeprecation?console.trace(I):console.error(I);L=!0}return O.apply(this,arguments)}};var F={},J;G.debuglog=function(O){x(J)&&(J=p.env.NODE_DEBUG||"");O=O.toUpperCase();if(!F[O])if((new RegExp("\\b"+O+"\\b","i")).test(J)){var I=p.pid;F[O]=function(){var L=G.format.apply(G,arguments);console.error("%s %d: %s",O,I,L)}}else F[O]=function(){};return F[O]};G.inspect=k;k.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,
39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};k.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};G.isArray=f;G.isBoolean=q;G.isNull=function(O){return null===O};G.isNullOrUndefined=function(O){return null==O};G.isNumber=t;G.isString=w;G.isSymbol=function(O){return"symbol"===typeof O};G.isUndefined=x;G.isRegExp=z;G.isObject=B;G.isDate=A;G.isError=D;G.isFunction=C;G.isPrimitive=function(O){return null===
O||"boolean"===typeof O||"number"===typeof O||"string"===typeof O||"symbol"===typeof O||"undefined"===typeof O};G.isBuffer=b("./support/isBuffer");var K="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");G.log=function(){var O=console,I=O.log;var L=new Date;var H=[v(L.getHours()),v(L.getMinutes()),v(L.getSeconds())].join(":");L=[L.getDate(),K[L.getMonth()],H].join(" ");I.call(O,"%s - %s",L,G.format.apply(G,arguments))};G.inherits=b("inherits");G._extend=function(O,I){if(!I||!B(I))return O;
for(var L=Object.keys(I),H=L.length;H--;)O[L[H]]=I[L[H]];return O}}).call(this)}).call(this,b("_process"),"undefined"!==typeof Re?Re:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./support/isBuffer":82,_process:528,inherits:81}],84:[function(b,N,G){N.exports=function(p){return atob(p)}},{}],85:[function(b,N,G){function p(k){for(var m=0,a=0;a<k.length;++a)m+=k[a];return m}N.exports=function(k,m){for(var a=m.length,g=Array(a+1),h=0;h<a;++h){for(var r=Array(a+1),l=0;l<=a;++l)r[l]=
k[l][h];g[h]=r}g[a]=Array(a+1);for(h=0;h<=a;++h)g[a][h]=1;k=Array(a+1);for(h=0;h<a;++h)k[h]=m[h];k[a]=1;m=n(g,k);g=p(m[a+1]);0===g&&(g=1);k=Array(a+1);for(h=0;h<=a;++h)k[h]=p(m[h])/g;return k};var n=b("robust-linear-solve")},{"robust-linear-solve":547}],86:[function(b,N,G){function p(a){var g=a.length;if(0<g%4)throw Error("Invalid string. Length must be a multiple of 4");a=a.indexOf("\x3d");-1===a&&(a=g);return[a,a===g?0:4-a%4]}G.byteLength=function(a){a=p(a);var g=a[1];return 3*(a[0]+g)/4-g};G.toByteArray=
function(a){var g=p(a);var h=g[0];g=g[1];var r=new m(3*(h+g)/4-g),l=0,c=0<g?h-4:h,d;for(d=0;d<c;d+=4)h=k[a.charCodeAt(d)]<<18|k[a.charCodeAt(d+1)]<<12|k[a.charCodeAt(d+2)]<<6|k[a.charCodeAt(d+3)],r[l++]=h>>16&255,r[l++]=h>>8&255,r[l++]=h&255;2===g&&(h=k[a.charCodeAt(d)]<<2|k[a.charCodeAt(d+1)]>>4,r[l++]=h&255);1===g&&(h=k[a.charCodeAt(d)]<<10|k[a.charCodeAt(d+1)]<<4|k[a.charCodeAt(d+2)]>>2,r[l++]=h>>8&255,r[l++]=h&255);return r};G.fromByteArray=function(a){for(var g=a.length,h=g%3,r=[],l=0,c=g-h;l<
c;l+=16383){for(var d=r,e=d.push,f,q=a,t=l+16383>c?c:l+16383,w=[],x=l;x<t;x+=3)f=(q[x]<<16&16711680)+(q[x+1]<<8&65280)+(q[x+2]&255),w.push(n[f>>18&63]+n[f>>12&63]+n[f>>6&63]+n[f&63]);f=w.join("");e.call(d,f)}1===h?(a=a[g-1],r.push(n[a>>2]+n[a<<4&63]+"\x3d\x3d")):2===h&&(a=(a[g-2]<<8)+a[g-1],r.push(n[a>>10]+n[a>>4&63]+n[a<<2&63]+"\x3d"));return r.join("")};var n=[],k=[],m="undefined"!==typeof Uint8Array?Uint8Array:Array;for(b=0;64>b;++b)n[b]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[b],
k["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(b)]=b;k[45]=62;k[95]=63},{}],87:[function(b,N,G){var p=b("./lib/rationalize");N.exports=function(n,k){return p(n[0].mul(k[1]).add(k[0].mul(n[1])),n[1].mul(k[1]))}},{"./lib/rationalize":97}],88:[function(b,N,G){N.exports=function(p,n){return p[0].mul(n[1]).cmp(n[0].mul(p[1]))}},{}],89:[function(b,N,G){var p=b("./lib/rationalize");N.exports=function(n,k){return p(n[0].mul(k[1]),n[1].mul(k[0]))}},{"./lib/rationalize":97}],
90:[function(b,N,G){function p(r,l){if(n(r))return l?h(r,p(l)):[r[0].clone(),r[1].clone()];var c=0;if(k(r))r=r.clone();else if("string"===typeof r)r=a(r);else{if(0===r)return[m(0),m(1)];if(r!==Math.floor(r))for(;r!==Math.floor(r);)r*=Math.pow(2,256),c-=256;r=m(r)}if(n(l))r.mul(l[1]),l=l[0].clone();else if(k(l))l=l.clone();else if("string"===typeof l)l=a(l);else if(l){if(l!==Math.floor(l))for(;l!==Math.floor(l);)l*=Math.pow(2,256),c+=256;l=m(l)}else l=m(1);0<c?r=r.ushln(c):0>c&&(l=l.ushln(-c));return g(r,
l)}var n=b("./is-rat"),k=b("./lib/is-bn"),m=b("./lib/num-to-bn"),a=b("./lib/str-to-bn"),g=b("./lib/rationalize"),h=b("./div");N.exports=p},{"./div":89,"./is-rat":91,"./lib/is-bn":95,"./lib/num-to-bn":96,"./lib/rationalize":97,"./lib/str-to-bn":98}],91:[function(b,N,G){var p=b("./lib/is-bn");N.exports=function(n){return Array.isArray(n)&&2===n.length&&p(n[0])&&p(n[1])}},{"./lib/is-bn":95}],92:[function(b,N,G){var p=b("bn.js");N.exports=function(n){return n.cmp(new p(0))}},{"bn.js":106}],93:[function(b,
N,G){var p=b("./bn-sign");N.exports=function(n){var k=n.length,m=n.words,a=0;if(1===k)a=m[0];else if(2===k)a=m[0]+67108864*m[1];else for(var g=0;g<k;g++)a+=m[g]*Math.pow(67108864,g);return p(n)*a}},{"./bn-sign":92}],94:[function(b,N,G){var p=b("double-bits"),n=b("bit-twiddle").countTrailingZeros;N.exports=function(k){var m=n(p.lo(k));if(32>m)return m;k=n(p.hi(k));return 20<k?52:k+32}},{"bit-twiddle":104,"double-bits":182}],95:[function(b,N,G){b("bn.js");N.exports=function(p){return p&&"object"===
typeof p&&!!p.words}},{"bn.js":106}],96:[function(b,N,G){var p=b("bn.js"),n=b("double-bits");N.exports=function(k){var m=n.exponent(k);return 52>m?new p(k):(new p(k*Math.pow(2,52-m))).ushln(m-52)}},{"bn.js":106,"double-bits":182}],97:[function(b,N,G){var p=b("./num-to-bn"),n=b("./bn-sign");N.exports=function(k,m){var a=n(k),g=n(m);if(0===a)return[p(0),p(1)];if(0===g)return[p(0),p(0)];0>g&&(k=k.neg(),m=m.neg());a=k.gcd(m);return a.cmpn(1)?[k.div(a),m.div(a)]:[k,m]}},{"./bn-sign":92,"./num-to-bn":96}],
98:[function(b,N,G){var p=b("bn.js");N.exports=function(n){return new p(n)}},{"bn.js":106}],99:[function(b,N,G){var p=b("./lib/rationalize");N.exports=function(n,k){return p(n[0].mul(k[0]),n[1].mul(k[1]))}},{"./lib/rationalize":97}],100:[function(b,N,G){var p=b("./lib/bn-sign");N.exports=function(n){return p(n[0])*p(n[1])}},{"./lib/bn-sign":92}],101:[function(b,N,G){var p=b("./lib/rationalize");N.exports=function(n,k){return p(n[0].mul(k[1]).sub(n[1].mul(k[0])),n[1].mul(k[1]))}},{"./lib/rationalize":97}],
102:[function(b,N,G){var p=b("./lib/bn-to-num"),n=b("./lib/ctz");N.exports=function(k){var m=k[0];k=k[1];if(0===m.cmpn(0))return 0;var a=m.abs().divmod(k.abs()),g=p(a.div);a=a.mod;m=m.negative!==k.negative?-1:1;if(0===a.cmpn(0))return m*g;if(g){var h=n(g)+4;k=p(a.ushln(h).divRound(k));return m*(g+k*Math.pow(2,-h))}g=k.bitLength()-a.bitLength()+53;k=p(a.ushln(g).divRound(k));if(1023>g)return m*k*Math.pow(2,-g);k*=Math.pow(2,-1023);return m*k*Math.pow(2,1023-g)}},{"./lib/bn-to-num":93,"./lib/ctz":94}],
103:[function(b,N,G){function p(h,r,l,c,d){for(var e=d+1;c<=d;){var f=c+d>>>1,q=h[f];0<=(void 0!==l?l(q,r):q-r)?(e=f,d=f-1):c=f+1}return e}function n(h,r,l,c,d){for(var e=d+1;c<=d;){var f=c+d>>>1,q=h[f];0<(void 0!==l?l(q,r):q-r)?(e=f,d=f-1):c=f+1}return e}function k(h,r,l,c,d){for(var e=c-1;c<=d;){var f=c+d>>>1,q=h[f];0>(void 0!==l?l(q,r):q-r)?(e=f,c=f+1):d=f-1}return e}function m(h,r,l,c,d){for(var e=c-1;c<=d;){var f=c+d>>>1,q=h[f];0>=(void 0!==l?l(q,r):q-r)?(e=f,c=f+1):d=f-1}return e}function a(h,
r,l,c,d){for(;c<=d;){var e=c+d>>>1,f=h[e];f=void 0!==l?l(f,r):f-r;if(0===f)return e;0>=f?c=e+1:d=e-1}return-1}function g(h,r,l,c,d,e){return"function"===typeof l?e(h,r,l,void 0===c?0:c|0,void 0===d?h.length-1:d|0):e(h,r,void 0,void 0===l?0:l|0,void 0===c?h.length-1:c|0)}N.exports={ge:function(h,r,l,c,d){return g(h,r,l,c,d,p)},gt:function(h,r,l,c,d){return g(h,r,l,c,d,n)},lt:function(h,r,l,c,d){return g(h,r,l,c,d,k)},le:function(h,r,l,c,d){return g(h,r,l,c,d,m)},eq:function(h,r,l,c,d){return g(h,r,
l,c,d,a)}}},{}],104:[function(b,N,G){function p(k){var m=32;(k&=-k)&&m--;k&65535&&(m-=16);k&16711935&&(m-=8);k&252645135&&(m-=4);k&858993459&&(m-=2);k&1431655765&&--m;return m}"use restrict";G.INT_BITS=32;G.INT_MAX=2147483647;G.INT_MIN=-2147483648;G.sign=function(k){return(0<k)-(0>k)};G.abs=function(k){var m=k>>31;return(k^m)-m};G.min=function(k,m){return m^(k^m)&-(k<m)};G.max=function(k,m){return k^(k^m)&-(k<m)};G.isPow2=function(k){return!(k&k-1)&&!!k};G.log2=function(k){var m=(65535<k)<<4;k>>>=
m;var a=(255<k)<<3;k>>>=a;m|=a;a=(15<k)<<2;k>>>=a;m|=a;a=(3<k)<<1;k>>>=a;return m|a|k>>1};G.log10=function(k){return 1E9<=k?9:1E8<=k?8:1E7<=k?7:1E6<=k?6:1E5<=k?5:1E4<=k?4:1E3<=k?3:100<=k?2:10<=k?1:0};G.popCount=function(k){k-=k>>>1&1431655765;k=(k&858993459)+(k>>>2&858993459);return 16843009*(k+(k>>>4)&252645135)>>>24};G.countTrailingZeros=p;G.nextPow2=function(k){k+=0===k;--k;k|=k>>>1;k|=k>>>2;k|=k>>>4;k|=k>>>8;return(k|k>>>16)+1};G.prevPow2=function(k){k|=k>>>1;k|=k>>>2;k|=k>>>4;k|=k>>>8;k|=k>>>
16;return k-(k>>>1)};G.parity=function(k){k^=k>>>16;k^=k>>>8;return 27030>>>((k^k>>>4)&15)&1};var n=Array(256);(function(k){for(var m=0;256>m;++m){var a=m,g=m,h=7;for(a>>>=1;a;a>>>=1)g<<=1,g|=a&1,--h;k[m]=g<<h&255}})(n);G.reverse=function(k){return n[k&255]<<24|n[k>>>8&255]<<16|n[k>>>16&255]<<8|n[k>>>24&255]};G.interleave2=function(k,m){k&=65535;k=(k|k<<8)&16711935;k=(k|k<<4)&252645135;k=(k|k<<2)&858993459;m&=65535;m=(m|m<<8)&16711935;m=(m|m<<4)&252645135;m=(m|m<<2)&858993459;return(k|k<<1)&1431655765|
((m|m<<1)&1431655765)<<1};G.deinterleave2=function(k,m){k=k>>>m&1431655765;k=(k|k>>>1)&858993459;k=(k|k>>>2)&252645135;k=(k|k>>>4)&16711935;return((k|k>>>16)&65535)<<16>>16};G.interleave3=function(k,m,a){k&=1023;k=(k|k<<16)&4278190335;k=(k|k<<8)&251719695;k=(k|k<<4)&3272356035;m&=1023;m=(m|m<<16)&4278190335;m=(m|m<<8)&251719695;m=(m|m<<4)&3272356035;a&=1023;a=(a|a<<16)&4278190335;a=(a|a<<8)&251719695;a=(a|a<<4)&3272356035;return(k|k<<2)&1227133513|((m|m<<2)&1227133513)<<1|((a|a<<2)&1227133513)<<2};
G.deinterleave3=function(k,m){k=k>>>m&1227133513;k=(k|k>>>2)&3272356035;k=(k|k>>>4)&251719695;k=(k|k>>>8)&4278190335;return((k|k>>>16)&1023)<<22>>22};G.nextCombination=function(k){var m=k|k-1;return m+1|(~m&-~m)-1>>>p(k)+1}},{}],105:[function(b,N,G){function p(a,g,h,r,l,c,d){for(var e=0;e<g;e++){for(var f=0;f<h;f++)r[f]=a[f*g+e];n(r,l,c,d,h);for(f=0;f<h;f++)a[f*g+e]=l[f]}for(f=0;f<h;f++){for(e=0;e<g;e++)r[e]=a[f*g+e];n(r,l,c,d,g);for(e=0;e<g;e++)a[f*g+e]=Math.sqrt(l[e])}}function n(a,g,h,r,l){h[0]=
0;r[0]=-m;r[1]=+m;for(var c=1,d=0;c<l;c++){for(var e=(a[c]+c*c-(a[h[d]]+h[d]*h[d]))/(2*c-2*h[d]);e<=r[d];)d--,e=(a[c]+c*c-(a[h[d]]+h[d]*h[d]))/(2*c-2*h[d]);d++;h[d]=c;r[d]=e;r[d+1]=+m}for(d=c=0;c<l;c++){for(;r[d+1]<c;)d++;g[c]=(c-h[d])*(c-h[d])+a[h[d]]}}var k=b("clamp");N.exports=function(a,g){g||(g={});var h=null==g.cutoff?.25:g.cutoff,r=null==g.radius?8:g.radius,l=g.channel||0;if(ArrayBuffer.isView(a)||Array.isArray(a)){if(!g.width||!g.height)throw Error("For raw data width and height should be provided by options");
var c=g.width;var d=g.height;var e=a;var f=g.stride?g.stride:Math.floor(a.length/c/d)}else window.HTMLCanvasElement&&a instanceof window.HTMLCanvasElement?(d=a,e=d.getContext("2d"),c=d.width,d=d.height,e=e.getImageData(0,0,c,d),e=e.data,f=4):window.CanvasRenderingContext2D&&a instanceof window.CanvasRenderingContext2D?(d=a.canvas,c=d.width,d=d.height,e=a.getImageData(0,0,c,d),e=e.data,f=4):window.ImageData&&a instanceof window.ImageData&&(c=a.width,d=a.height,e=a.data,f=4);var q=Math.max(c,d);if(window.Uint8ClampedArray&&
e instanceof window.Uint8ClampedArray||window.Uint8Array&&e instanceof window.Uint8Array){var t=e;e=Array(c*d);a=0;for(g=t.length;a<g;a++)e[a]=t[a*f+l]/255}else if(1!==f)throw Error("Raw data can have only 1 value per pixel");l=Array(c*d);f=Array(c*d);t=Array(q);var w=Array(q),x=Array(q+1);q=Array(q);a=0;for(g=c*d;a<g;a++){var z=e[a];l[a]=1===z?0:0===z?m:Math.pow(Math.max(0,.5-z),2);f[a]=1===z?m:0===z?0:Math.pow(Math.max(0,z-.5),2)}p(l,c,d,t,w,q,x);p(f,c,d,t,w,q,x);e=window.Float32Array?new Float32Array(c*
d):Array(c*d);a=0;for(g=c*d;a<g;a++)e[a]=k(1-((l[a]-f[a])/r+h),0,1);return e};var m=1E20},{clamp:126}],106:[function(b,N,G){(function(p,n){function k(v,y){if(!v)throw Error(y||"Assertion failed");}function m(v,y){v.super_=y;var F=function(){};F.prototype=y.prototype;v.prototype=new F;v.prototype.constructor=v}function a(v,y,F){if(a.isBN(v))return v;this.negative=0;this.words=null;this.length=0;this.red=null;if(null!==v){if("le"===y||"be"===y)F=y,y=10;this._init(v||0,y||10,F||"be")}}function g(v,y,
F){var J=0;for(F=Math.min(v.length,F);y<F;y++){var K=v.charCodeAt(y)-48;J<<=4;J=49<=K&&54>=K?J|K-49+10:17<=K&&22>=K?J|K-17+10:J|K&15}return J}function h(v,y,F,J){var K=0;for(F=Math.min(v.length,F);y<F;y++){var O=v.charCodeAt(y)-48;K*=J;K=49<=O?K+(O-49+10):17<=O?K+(O-17+10):K+O}return K}function r(v,y,F){F.negative=y.negative^v.negative;var J=v.length+y.length|0;F.length=J;J=J-1|0;var K=v.words[0]|0,O=y.words[0]|0;K*=O;var I=K/67108864|0;F.words[0]=K&67108863;for(var L=1;L<J;L++){var H=I>>>26,M=I&
67108863;I=Math.min(L,y.length-1);for(var Q=Math.max(0,L-v.length+1);Q<=I;Q++)K=v.words[L-Q|0]|0,O=y.words[Q]|0,K=K*O+M,H+=K/67108864|0,M=K&67108863;F.words[L]=M|0;I=H|0}0!==I?F.words[L]=I|0:F.length--;return F.strip()}function l(v,y){this.x=v;this.y=y}function c(v,y){this.name=v;this.p=new a(y,16);this.n=this.p.bitLength();this.k=(new a(1)).iushln(this.n).isub(this.p);this.tmp=this._tmp()}function d(){c.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function e(){c.call(this,
"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function f(){c.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function q(){c.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function t(v){"string"===typeof v?(v=a._prime(v),this.m=v.p,this.prime=v):(k(v.gtn(1),"modulus must be greater than 1"),this.m=v,this.prime=null)}function w(v){t.call(this,v);this.shift=this.m.bitLength();0!==this.shift%26&&(this.shift+=
26-this.shift%26);this.r=(new a(1)).iushln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv=this.minv.umod(this.r);this.minv=this.r.sub(this.minv)}"object"===typeof p?p.exports=a:n.BN=a;a.BN=a;a.wordSize=26;try{var x=b("buffer").Buffer}catch(v){}a.isBN=function(v){return v instanceof a?!0:null!==v&&"object"===typeof v&&v.constructor.wordSize===a.wordSize&&Array.isArray(v.words)};a.max=function(v,y){return 0<
v.cmp(y)?v:y};a.min=function(v,y){return 0>v.cmp(y)?v:y};a.prototype._init=function(v,y,F){if("number"===typeof v)return this._initNumber(v,y,F);if("object"===typeof v)return this._initArray(v,y,F);"hex"===y&&(y=16);k(y===(y|0)&&2<=y&&36>=y);v=v.toString().replace(/\s+/g,"");var J=0;"-"===v[0]&&J++;16===y?this._parseHex(v,J):this._parseBase(v,y,J);"-"===v[0]&&(this.negative=1);this.strip();"le"===F&&this._initArray(this.toArray(),y,F)};a.prototype._initNumber=function(v,y,F){0>v&&(this.negative=1,
v=-v);67108864>v?(this.words=[v&67108863],this.length=1):4503599627370496>v?(this.words=[v&67108863,v/67108864&67108863],this.length=2):(k(9007199254740992>v),this.words=[v&67108863,v/67108864&67108863,1],this.length=3);"le"===F&&this._initArray(this.toArray(),y,F)};a.prototype._initArray=function(v,y,F){k("number"===typeof v.length);if(0>=v.length)return this.words=[0],this.length=1,this;this.length=Math.ceil(v.length/3);this.words=Array(this.length);for(y=0;y<this.length;y++)this.words[y]=0;var J=
0;if("be"===F)for(y=v.length-1,F=0;0<=y;y-=3){var K=v[y]|v[y-1]<<8|v[y-2]<<16;this.words[F]|=K<<J&67108863;this.words[F+1]=K>>>26-J&67108863;J+=24;26<=J&&(J-=26,F++)}else if("le"===F)for(F=y=0;y<v.length;y+=3)K=v[y]|v[y+1]<<8|v[y+2]<<16,this.words[F]|=K<<J&67108863,this.words[F+1]=K>>>26-J&67108863,J+=24,26<=J&&(J-=26,F++);return this.strip()};a.prototype._parseHex=function(v,y){this.length=Math.ceil((v.length-y)/6);this.words=Array(this.length);for(var F=0;F<this.length;F++)this.words[F]=0;var J,
K=0;F=v.length-6;for(J=0;F>=y;F-=6){var O=g(v,F,F+6);this.words[J]|=O<<K&67108863;this.words[J+1]|=O>>>26-K&4194303;K+=24;26<=K&&(K-=26,J++)}F+6!==y&&(O=g(v,y,F+6),this.words[J]|=O<<K&67108863,this.words[J+1]|=O>>>26-K&4194303);this.strip()};a.prototype._parseBase=function(v,y,F){this.words=[0];this.length=1;for(var J=0,K=1;67108863>=K;K*=y)J++;J--;K=K/y|0;var O=v.length-F,I=O%J;O=Math.min(O,O-I)+F;for(var L=F;L<O;L+=J)F=h(v,L,L+J,y),this.imuln(K),67108864>this.words[0]+F?this.words[0]+=F:this._iaddn(F);
if(0!==I){J=1;F=h(v,L,v.length,y);for(L=0;L<I;L++)J*=y;this.imuln(J);67108864>this.words[0]+F?this.words[0]+=F:this._iaddn(F)}};a.prototype.copy=function(v){v.words=Array(this.length);for(var y=0;y<this.length;y++)v.words[y]=this.words[y];v.length=this.length;v.negative=this.negative;v.red=this.red};a.prototype.clone=function(){var v=new a(null);this.copy(v);return v};a.prototype._expand=function(v){for(;this.length<v;)this.words[this.length++]=0;return this};a.prototype.strip=function(){for(;1<this.length&&
0===this.words[this.length-1];)this.length--;return this._normSign()};a.prototype._normSign=function(){1===this.length&&0===this.words[0]&&(this.negative=0);return this};a.prototype.inspect=function(){return(this.red?"\x3cBN-R: ":"\x3cBN: ")+this.toString(16)+"\x3e"};var z=" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),
B=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],A=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(v,y){v=v||10;y=y|0||1;if(16===v||"hex"===v){var F="";for(var J=v=0,K=0;K<this.length;K++){var O=
this.words[K],I=((O<<v|J)&16777215).toString(16);J=O>>>24-v&16777215;F=0!==J||K!==this.length-1?z[6-I.length]+I+F:I+F;v+=2;26<=v&&(v-=26,K--)}for(0!==J&&(F=J.toString(16)+F);0!==F.length%y;)F="0"+F;0!==this.negative&&(F="-"+F);return F}if(v===(v|0)&&2<=v&&36>=v){J=B[v];K=A[v];F="";O=this.clone();for(O.negative=0;!O.isZero();)I=O.modn(K).toString(v),O=O.idivn(K),F=O.isZero()?I+F:z[J-I.length]+I+F;for(this.isZero()&&(F="0"+F);0!==F.length%y;)F="0"+F;0!==this.negative&&(F="-"+F);return F}k(!1,"Base should be between 2 and 36")};
a.prototype.toNumber=function(){var v=this.words[0];2===this.length?v+=67108864*this.words[1]:3===this.length&&1===this.words[2]?v+=4503599627370496+67108864*this.words[1]:2<this.length&&k(!1,"Number can only safely store up to 53 bits");return 0!==this.negative?-v:v};a.prototype.toJSON=function(){return this.toString(16)};a.prototype.toBuffer=function(v,y){k("undefined"!==typeof x);return this.toArrayLike(x,v,y)};a.prototype.toArray=function(v,y){return this.toArrayLike(Array,v,y)};a.prototype.toArrayLike=
function(v,y,F){var J=this.byteLength();F=F||Math.max(1,J);k(J<=F,"byte array longer than desired length");k(0<F,"Requested array length \x3c\x3d 0");this.strip();var K="le"===y;v=new v(F);y=this.clone();if(K){for(K=0;!y.isZero();K++)J=y.andln(255),y.iushrn(8),v[K]=J;for(;K<F;K++)v[K]=0}else{for(K=0;K<F-J;K++)v[K]=0;for(K=0;!y.isZero();K++)J=y.andln(255),y.iushrn(8),v[F-K-1]=J}return v};a.prototype._countBits=Math.clz32?function(v){return 32-Math.clz32(v)}:function(v){var y=0;4096<=v&&(y+=13,v>>>=
13);64<=v&&(y+=7,v>>>=7);8<=v&&(y+=4,v>>>=4);2<=v&&(y+=2,v>>>=2);return y+v};a.prototype._zeroBits=function(v){if(0===v)return 26;var y=0;0===(v&8191)&&(y+=13,v>>>=13);0===(v&127)&&(y+=7,v>>>=7);0===(v&15)&&(y+=4,v>>>=4);0===(v&3)&&(y+=2,v>>>=2);0===(v&1)&&y++;return y};a.prototype.bitLength=function(){var v=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+v};a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var v=0,y=0;y<this.length;y++){var F=this._zeroBits(this.words[y]);
v+=F;if(26!==F)break}return v};a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)};a.prototype.toTwos=function(v){return 0!==this.negative?this.abs().inotn(v).iaddn(1):this.clone()};a.prototype.fromTwos=function(v){return this.testn(v-1)?this.notn(v).iaddn(1).ineg():this.clone()};a.prototype.isNeg=function(){return 0!==this.negative};a.prototype.neg=function(){return this.clone().ineg()};a.prototype.ineg=function(){this.isZero()||(this.negative^=1);return this};a.prototype.iuor=
function(v){for(;this.length<v.length;)this.words[this.length++]=0;for(var y=0;y<v.length;y++)this.words[y]|=v.words[y];return this.strip()};a.prototype.ior=function(v){k(0===(this.negative|v.negative));return this.iuor(v)};a.prototype.or=function(v){return this.length>v.length?this.clone().ior(v):v.clone().ior(this)};a.prototype.uor=function(v){return this.length>v.length?this.clone().iuor(v):v.clone().iuor(this)};a.prototype.iuand=function(v){var y=this.length>v.length?v:this;for(var F=0;F<y.length;F++)this.words[F]&=
v.words[F];this.length=y.length;return this.strip()};a.prototype.iand=function(v){k(0===(this.negative|v.negative));return this.iuand(v)};a.prototype.and=function(v){return this.length>v.length?this.clone().iand(v):v.clone().iand(this)};a.prototype.uand=function(v){return this.length>v.length?this.clone().iuand(v):v.clone().iuand(this)};a.prototype.iuxor=function(v){if(this.length>v.length)var y=this;else y=v,v=this;for(var F=0;F<v.length;F++)this.words[F]=y.words[F]^v.words[F];if(this!==y)for(;F<
y.length;F++)this.words[F]=y.words[F];this.length=y.length;return this.strip()};a.prototype.ixor=function(v){k(0===(this.negative|v.negative));return this.iuxor(v)};a.prototype.xor=function(v){return this.length>v.length?this.clone().ixor(v):v.clone().ixor(this)};a.prototype.uxor=function(v){return this.length>v.length?this.clone().iuxor(v):v.clone().iuxor(this)};a.prototype.inotn=function(v){k("number"===typeof v&&0<=v);var y=Math.ceil(v/26)|0;v%=26;this._expand(y);0<v&&y--;for(var F=0;F<y;F++)this.words[F]=
~this.words[F]&67108863;0<v&&(this.words[F]=~this.words[F]&67108863>>26-v);return this.strip()};a.prototype.notn=function(v){return this.clone().inotn(v)};a.prototype.setn=function(v,y){k("number"===typeof v&&0<=v);var F=v/26|0;v%=26;this._expand(F+1);this.words[F]=y?this.words[F]|1<<v:this.words[F]&~(1<<v);return this.strip()};a.prototype.iadd=function(v){if(0!==this.negative&&0===v.negative)return this.negative=0,this.isub(v),this.negative^=1,this._normSign();if(0===this.negative&&0!==v.negative){v.negative=
0;var y=this.isub(v);v.negative=1;return y._normSign()}if(this.length>v.length)var F=this;else F=v,v=this;for(var J=y=0;J<v.length;J++)y=(F.words[J]|0)+(v.words[J]|0)+y,this.words[J]=y&67108863,y>>>=26;for(;0!==y&&J<F.length;J++)y=(F.words[J]|0)+y,this.words[J]=y&67108863,y>>>=26;this.length=F.length;if(0!==y)this.words[this.length]=y,this.length++;else if(F!==this)for(;J<F.length;J++)this.words[J]=F.words[J];return this};a.prototype.add=function(v){if(0!==v.negative&&0===this.negative){v.negative=
0;var y=this.sub(v);v.negative^=1;return y}return 0===v.negative&&0!==this.negative?(this.negative=0,y=v.sub(this),this.negative=1,y):this.length>v.length?this.clone().iadd(v):v.clone().iadd(this)};a.prototype.isub=function(v){if(0!==v.negative){v.negative=0;var y=this.iadd(v);v.negative=1;return y._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(v),this.negative=1,this._normSign();y=this.cmp(v);if(0===y)return this.negative=0,this.length=1,this.words[0]=0,this;if(0<y)var F=this;
else F=v,v=this;for(var J=0,K=0;K<v.length;K++)y=(F.words[K]|0)-(v.words[K]|0)+J,J=y>>26,this.words[K]=y&67108863;for(;0!==J&&K<F.length;K++)y=(F.words[K]|0)+J,J=y>>26,this.words[K]=y&67108863;if(0===J&&K<F.length&&F!==this)for(;K<F.length;K++)this.words[K]=F.words[K];this.length=Math.max(this.length,K);F!==this&&(this.negative=1);return this.strip()};a.prototype.sub=function(v){return this.clone().isub(v)};var D=function(v,y,F){var J=v.words,K=y.words,O=F.words,I=0,L=J[0]|0,H=L&8191,M=L>>>13,Q=J[1]|
0;L=Q&8191;var Z=Q>>>13,ca=J[2]|0;Q=ca&8191;var W=ca>>>13,T=J[3]|0;ca=T&8191;var U=T>>>13,ha=J[4]|0;T=ha&8191;var Y=ha>>>13,ba=J[5]|0;ha=ba&8191;var ja=ba>>>13,ma=J[6]|0;ba=ma&8191;var ia=ma>>>13,oa=J[7]|0;ma=oa&8191;var xa=oa>>>13,ra=J[8]|0;oa=ra&8191;ra>>>=13;var la=J[9]|0;J=la&8191;la>>>=13;var ka=K[0]|0,na=ka&8191,qa=ka>>>13,ta=K[1]|0;ka=ta&8191;var za=ta>>>13,Ia=K[2]|0;ta=Ia&8191;var Xa=Ia>>>13,$a=K[3]|0;Ia=$a&8191;var gb=$a>>>13,sb=K[4]|0;$a=sb&8191;var jb=sb>>>13,vb=K[5]|0;sb=vb&8191;var qb=
vb>>>13,Bb=K[6]|0;vb=Bb&8191;var ub=Bb>>>13,wb=K[7]|0;Bb=wb&8191;var rb=wb>>>13,Ab=K[8]|0;wb=Ab&8191;Ab>>>=13;var Ma=K[9]|0;K=Ma&8191;Ma>>>=13;F.negative=v.negative^y.negative;F.length=19;var La=Math.imul(H,na);v=Math.imul(H,qa);v=v+Math.imul(M,na)|0;y=Math.imul(M,qa);var ya=(I+La|0)+((v&8191)<<13)|0;I=(y+(v>>>13)|0)+(ya>>>26)|0;ya&=67108863;La=Math.imul(L,na);v=Math.imul(L,qa);v=v+Math.imul(Z,na)|0;y=Math.imul(Z,qa);La=La+Math.imul(H,ka)|0;v=v+Math.imul(H,za)|0;v=v+Math.imul(M,ka)|0;y=y+Math.imul(M,
za)|0;var Aa=(I+La|0)+((v&8191)<<13)|0;I=(y+(v>>>13)|0)+(Aa>>>26)|0;Aa&=67108863;La=Math.imul(Q,na);v=Math.imul(Q,qa);v=v+Math.imul(W,na)|0;y=Math.imul(W,qa);La=La+Math.imul(L,ka)|0;v=v+Math.imul(L,za)|0;v=v+Math.imul(Z,ka)|0;y=y+Math.imul(Z,za)|0;La=La+Math.imul(H,ta)|0;v=v+Math.imul(H,Xa)|0;v=v+Math.imul(M,ta)|0;y=y+Math.imul(M,Xa)|0;var Ka=(I+La|0)+((v&8191)<<13)|0;I=(y+(v>>>13)|0)+(Ka>>>26)|0;Ka&=67108863;La=Math.imul(ca,na);v=Math.imul(ca,qa);v=v+Math.imul(U,na)|0;y=Math.imul(U,qa);La=La+Math.imul(Q,
ka)|0;v=v+Math.imul(Q,za)|0;v=v+Math.imul(W,ka)|0;y=y+Math.imul(W,za)|0;La=La+Math.imul(L,ta)|0;v=v+Math.imul(L,Xa)|0;v=v+Math.imul(Z,ta)|0;y=y+Math.imul(Z,Xa)|0;La=La+Math.imul(H,Ia)|0;v=v+Math.imul(H,gb)|0;v=v+Math.imul(M,Ia)|0;y=y+Math.imul(M,gb)|0;var Ta=(I+La|0)+((v&8191)<<13)|0;I=(y+(v>>>13)|0)+(Ta>>>26)|0;Ta&=67108863;La=Math.imul(T,na);v=Math.imul(T,qa);v=v+Math.imul(Y,na)|0;y=Math.imul(Y,qa);La=La+Math.imul(ca,ka)|0;v=v+Math.imul(ca,za)|0;v=v+Math.imul(U,ka)|0;y=y+Math.imul(U,za)|0;La=La+
Math.imul(Q,ta)|0;v=v+Math.imul(Q,Xa)|0;v=v+Math.imul(W,ta)|0;y=y+Math.imul(W,Xa)|0;La=La+Math.imul(L,Ia)|0;v=v+Math.imul(L,gb)|0;v=v+Math.imul(Z,Ia)|0;y=y+Math.imul(Z,gb)|0;La=La+Math.imul(H,$a)|0;v=v+Math.imul(H,jb)|0;v=v+Math.imul(M,$a)|0;y=y+Math.imul(M,jb)|0;var bb=(I+La|0)+((v&8191)<<13)|0;I=(y+(v>>>13)|0)+(bb>>>26)|0;bb&=67108863;La=Math.imul(ha,na);v=Math.imul(ha,qa);v=v+Math.imul(ja,na)|0;y=Math.imul(ja,qa);La=La+Math.imul(T,ka)|0;v=v+Math.imul(T,za)|0;v=v+Math.imul(Y,ka)|0;y=y+Math.imul(Y,
za)|0;La=La+Math.imul(ca,ta)|0;v=v+Math.imul(ca,Xa)|0;v=v+Math.imul(U,ta)|0;y=y+Math.imul(U,Xa)|0;La=La+Math.imul(Q,Ia)|0;v=v+Math.imul(Q,gb)|0;v=v+Math.imul(W,Ia)|0;y=y+Math.imul(W,gb)|0;La=La+Math.imul(L,$a)|0;v=v+Math.imul(L,jb)|0;v=v+Math.imul(Z,$a)|0;y=y+Math.imul(Z,jb)|0;La=La+Math.imul(H,sb)|0;v=v+Math.imul(H,qb)|0;v=v+Math.imul(M,sb)|0;y=y+Math.imul(M,qb)|0;var cb=(I+La|0)+((v&8191)<<13)|0;I=(y+(v>>>13)|0)+(cb>>>26)|0;cb&=67108863;La=Math.imul(ba,na);v=Math.imul(ba,qa);v=v+Math.imul(ia,na)|
0;y=Math.imul(ia,qa);La=La+Math.imul(ha,ka)|0;v=v+Math.imul(ha,za)|0;v=v+Math.imul(ja,ka)|0;y=y+Math.imul(ja,za)|0;La=La+Math.imul(T,ta)|0;v=v+Math.imul(T,Xa)|0;v=v+Math.imul(Y,ta)|0;y=y+Math.imul(Y,Xa)|0;La=La+Math.imul(ca,Ia)|0;v=v+Math.imul(ca,gb)|0;v=v+Math.imul(U,Ia)|0;y=y+Math.imul(U,gb)|0;La=La+Math.imul(Q,$a)|0;v=v+Math.imul(Q,jb)|0;v=v+Math.imul(W,$a)|0;y=y+Math.imul(W,jb)|0;La=La+Math.imul(L,sb)|0;v=v+Math.imul(L,qb)|0;v=v+Math.imul(Z,sb)|0;y=y+Math.imul(Z,qb)|0;La=La+Math.imul(H,vb)|0;
v=v+Math.imul(H,ub)|0;v=v+Math.imul(M,vb)|0;y=y+Math.imul(M,ub)|0;var Eb=(I+La|0)+((v&8191)<<13)|0;I=(y+(v>>>13)|0)+(Eb>>>26)|0;Eb&=67108863;La=Math.imul(ma,na);v=Math.imul(ma,qa);v=v+Math.imul(xa,na)|0;y=Math.imul(xa,qa);La=La+Math.imul(ba,ka)|0;v=v+Math.imul(ba,za)|0;v=v+Math.imul(ia,ka)|0;y=y+Math.imul(ia,za)|0;La=La+Math.imul(ha,ta)|0;v=v+Math.imul(ha,Xa)|0;v=v+Math.imul(ja,ta)|0;y=y+Math.imul(ja,Xa)|0;La=La+Math.imul(T,Ia)|0;v=v+Math.imul(T,gb)|0;v=v+Math.imul(Y,Ia)|0;y=y+Math.imul(Y,gb)|0;La=
La+Math.imul(ca,$a)|0;v=v+Math.imul(ca,jb)|0;v=v+Math.imul(U,$a)|0;y=y+Math.imul(U,jb)|0;La=La+Math.imul(Q,sb)|0;v=v+Math.imul(Q,qb)|0;v=v+Math.imul(W,sb)|0;y=y+Math.imul(W,qb)|0;La=La+Math.imul(L,vb)|0;v=v+Math.imul(L,ub)|0;v=v+Math.imul(Z,vb)|0;y=y+Math.imul(Z,ub)|0;La=La+Math.imul(H,Bb)|0;v=v+Math.imul(H,rb)|0;v=v+Math.imul(M,Bb)|0;y=y+Math.imul(M,rb)|0;var Pb=(I+La|0)+((v&8191)<<13)|0;I=(y+(v>>>13)|0)+(Pb>>>26)|0;Pb&=67108863;La=Math.imul(oa,na);v=Math.imul(oa,qa);v=v+Math.imul(ra,na)|0;y=Math.imul(ra,
qa);La=La+Math.imul(ma,ka)|0;v=v+Math.imul(ma,za)|0;v=v+Math.imul(xa,ka)|0;y=y+Math.imul(xa,za)|0;La=La+Math.imul(ba,ta)|0;v=v+Math.imul(ba,Xa)|0;v=v+Math.imul(ia,ta)|0;y=y+Math.imul(ia,Xa)|0;La=La+Math.imul(ha,Ia)|0;v=v+Math.imul(ha,gb)|0;v=v+Math.imul(ja,Ia)|0;y=y+Math.imul(ja,gb)|0;La=La+Math.imul(T,$a)|0;v=v+Math.imul(T,jb)|0;v=v+Math.imul(Y,$a)|0;y=y+Math.imul(Y,jb)|0;La=La+Math.imul(ca,sb)|0;v=v+Math.imul(ca,qb)|0;v=v+Math.imul(U,sb)|0;y=y+Math.imul(U,qb)|0;La=La+Math.imul(Q,vb)|0;v=v+Math.imul(Q,
ub)|0;v=v+Math.imul(W,vb)|0;y=y+Math.imul(W,ub)|0;La=La+Math.imul(L,Bb)|0;v=v+Math.imul(L,rb)|0;v=v+Math.imul(Z,Bb)|0;y=y+Math.imul(Z,rb)|0;La=La+Math.imul(H,wb)|0;v=v+Math.imul(H,Ab)|0;v=v+Math.imul(M,wb)|0;y=y+Math.imul(M,Ab)|0;var fc=(I+La|0)+((v&8191)<<13)|0;I=(y+(v>>>13)|0)+(fc>>>26)|0;fc&=67108863;La=Math.imul(J,na);v=Math.imul(J,qa);v=v+Math.imul(la,na)|0;y=Math.imul(la,qa);La=La+Math.imul(oa,ka)|0;v=v+Math.imul(oa,za)|0;v=v+Math.imul(ra,ka)|0;y=y+Math.imul(ra,za)|0;La=La+Math.imul(ma,ta)|
0;v=v+Math.imul(ma,Xa)|0;v=v+Math.imul(xa,ta)|0;y=y+Math.imul(xa,Xa)|0;La=La+Math.imul(ba,Ia)|0;v=v+Math.imul(ba,gb)|0;v=v+Math.imul(ia,Ia)|0;y=y+Math.imul(ia,gb)|0;La=La+Math.imul(ha,$a)|0;v=v+Math.imul(ha,jb)|0;v=v+Math.imul(ja,$a)|0;y=y+Math.imul(ja,jb)|0;La=La+Math.imul(T,sb)|0;v=v+Math.imul(T,qb)|0;v=v+Math.imul(Y,sb)|0;y=y+Math.imul(Y,qb)|0;La=La+Math.imul(ca,vb)|0;v=v+Math.imul(ca,ub)|0;v=v+Math.imul(U,vb)|0;y=y+Math.imul(U,ub)|0;La=La+Math.imul(Q,Bb)|0;v=v+Math.imul(Q,rb)|0;v=v+Math.imul(W,
Bb)|0;y=y+Math.imul(W,rb)|0;La=La+Math.imul(L,wb)|0;v=v+Math.imul(L,Ab)|0;v=v+Math.imul(Z,wb)|0;y=y+Math.imul(Z,Ab)|0;La=La+Math.imul(H,K)|0;v=v+Math.imul(H,Ma)|0;v=v+Math.imul(M,K)|0;y=y+Math.imul(M,Ma)|0;H=(I+La|0)+((v&8191)<<13)|0;I=(y+(v>>>13)|0)+(H>>>26)|0;H&=67108863;La=Math.imul(J,ka);v=Math.imul(J,za);v=v+Math.imul(la,ka)|0;y=Math.imul(la,za);La=La+Math.imul(oa,ta)|0;v=v+Math.imul(oa,Xa)|0;v=v+Math.imul(ra,ta)|0;y=y+Math.imul(ra,Xa)|0;La=La+Math.imul(ma,Ia)|0;v=v+Math.imul(ma,gb)|0;v=v+Math.imul(xa,
Ia)|0;y=y+Math.imul(xa,gb)|0;La=La+Math.imul(ba,$a)|0;v=v+Math.imul(ba,jb)|0;v=v+Math.imul(ia,$a)|0;y=y+Math.imul(ia,jb)|0;La=La+Math.imul(ha,sb)|0;v=v+Math.imul(ha,qb)|0;v=v+Math.imul(ja,sb)|0;y=y+Math.imul(ja,qb)|0;La=La+Math.imul(T,vb)|0;v=v+Math.imul(T,ub)|0;v=v+Math.imul(Y,vb)|0;y=y+Math.imul(Y,ub)|0;La=La+Math.imul(ca,Bb)|0;v=v+Math.imul(ca,rb)|0;v=v+Math.imul(U,Bb)|0;y=y+Math.imul(U,rb)|0;La=La+Math.imul(Q,wb)|0;v=v+Math.imul(Q,Ab)|0;v=v+Math.imul(W,wb)|0;y=y+Math.imul(W,Ab)|0;La=La+Math.imul(L,
K)|0;v=v+Math.imul(L,Ma)|0;v=v+Math.imul(Z,K)|0;y=y+Math.imul(Z,Ma)|0;L=(I+La|0)+((v&8191)<<13)|0;I=(y+(v>>>13)|0)+(L>>>26)|0;L&=67108863;La=Math.imul(J,ta);v=Math.imul(J,Xa);v=v+Math.imul(la,ta)|0;y=Math.imul(la,Xa);La=La+Math.imul(oa,Ia)|0;v=v+Math.imul(oa,gb)|0;v=v+Math.imul(ra,Ia)|0;y=y+Math.imul(ra,gb)|0;La=La+Math.imul(ma,$a)|0;v=v+Math.imul(ma,jb)|0;v=v+Math.imul(xa,$a)|0;y=y+Math.imul(xa,jb)|0;La=La+Math.imul(ba,sb)|0;v=v+Math.imul(ba,qb)|0;v=v+Math.imul(ia,sb)|0;y=y+Math.imul(ia,qb)|0;La=
La+Math.imul(ha,vb)|0;v=v+Math.imul(ha,ub)|0;v=v+Math.imul(ja,vb)|0;y=y+Math.imul(ja,ub)|0;La=La+Math.imul(T,Bb)|0;v=v+Math.imul(T,rb)|0;v=v+Math.imul(Y,Bb)|0;y=y+Math.imul(Y,rb)|0;La=La+Math.imul(ca,wb)|0;v=v+Math.imul(ca,Ab)|0;v=v+Math.imul(U,wb)|0;y=y+Math.imul(U,Ab)|0;La=La+Math.imul(Q,K)|0;v=v+Math.imul(Q,Ma)|0;v=v+Math.imul(W,K)|0;y=y+Math.imul(W,Ma)|0;Q=(I+La|0)+((v&8191)<<13)|0;I=(y+(v>>>13)|0)+(Q>>>26)|0;Q&=67108863;La=Math.imul(J,Ia);v=Math.imul(J,gb);v=v+Math.imul(la,Ia)|0;y=Math.imul(la,
gb);La=La+Math.imul(oa,$a)|0;v=v+Math.imul(oa,jb)|0;v=v+Math.imul(ra,$a)|0;y=y+Math.imul(ra,jb)|0;La=La+Math.imul(ma,sb)|0;v=v+Math.imul(ma,qb)|0;v=v+Math.imul(xa,sb)|0;y=y+Math.imul(xa,qb)|0;La=La+Math.imul(ba,vb)|0;v=v+Math.imul(ba,ub)|0;v=v+Math.imul(ia,vb)|0;y=y+Math.imul(ia,ub)|0;La=La+Math.imul(ha,Bb)|0;v=v+Math.imul(ha,rb)|0;v=v+Math.imul(ja,Bb)|0;y=y+Math.imul(ja,rb)|0;La=La+Math.imul(T,wb)|0;v=v+Math.imul(T,Ab)|0;v=v+Math.imul(Y,wb)|0;y=y+Math.imul(Y,Ab)|0;La=La+Math.imul(ca,K)|0;v=v+Math.imul(ca,
Ma)|0;v=v+Math.imul(U,K)|0;y=y+Math.imul(U,Ma)|0;ca=(I+La|0)+((v&8191)<<13)|0;I=(y+(v>>>13)|0)+(ca>>>26)|0;ca&=67108863;La=Math.imul(J,$a);v=Math.imul(J,jb);v=v+Math.imul(la,$a)|0;y=Math.imul(la,jb);La=La+Math.imul(oa,sb)|0;v=v+Math.imul(oa,qb)|0;v=v+Math.imul(ra,sb)|0;y=y+Math.imul(ra,qb)|0;La=La+Math.imul(ma,vb)|0;v=v+Math.imul(ma,ub)|0;v=v+Math.imul(xa,vb)|0;y=y+Math.imul(xa,ub)|0;La=La+Math.imul(ba,Bb)|0;v=v+Math.imul(ba,rb)|0;v=v+Math.imul(ia,Bb)|0;y=y+Math.imul(ia,rb)|0;La=La+Math.imul(ha,wb)|
0;v=v+Math.imul(ha,Ab)|0;v=v+Math.imul(ja,wb)|0;y=y+Math.imul(ja,Ab)|0;La=La+Math.imul(T,K)|0;v=v+Math.imul(T,Ma)|0;v=v+Math.imul(Y,K)|0;y=y+Math.imul(Y,Ma)|0;T=(I+La|0)+((v&8191)<<13)|0;I=(y+(v>>>13)|0)+(T>>>26)|0;T&=67108863;La=Math.imul(J,sb);v=Math.imul(J,qb);v=v+Math.imul(la,sb)|0;y=Math.imul(la,qb);La=La+Math.imul(oa,vb)|0;v=v+Math.imul(oa,ub)|0;v=v+Math.imul(ra,vb)|0;y=y+Math.imul(ra,ub)|0;La=La+Math.imul(ma,Bb)|0;v=v+Math.imul(ma,rb)|0;v=v+Math.imul(xa,Bb)|0;y=y+Math.imul(xa,rb)|0;La=La+Math.imul(ba,
wb)|0;v=v+Math.imul(ba,Ab)|0;v=v+Math.imul(ia,wb)|0;y=y+Math.imul(ia,Ab)|0;La=La+Math.imul(ha,K)|0;v=v+Math.imul(ha,Ma)|0;v=v+Math.imul(ja,K)|0;y=y+Math.imul(ja,Ma)|0;ha=(I+La|0)+((v&8191)<<13)|0;I=(y+(v>>>13)|0)+(ha>>>26)|0;ha&=67108863;La=Math.imul(J,vb);v=Math.imul(J,ub);v=v+Math.imul(la,vb)|0;y=Math.imul(la,ub);La=La+Math.imul(oa,Bb)|0;v=v+Math.imul(oa,rb)|0;v=v+Math.imul(ra,Bb)|0;y=y+Math.imul(ra,rb)|0;La=La+Math.imul(ma,wb)|0;v=v+Math.imul(ma,Ab)|0;v=v+Math.imul(xa,wb)|0;y=y+Math.imul(xa,Ab)|
0;La=La+Math.imul(ba,K)|0;v=v+Math.imul(ba,Ma)|0;v=v+Math.imul(ia,K)|0;y=y+Math.imul(ia,Ma)|0;ba=(I+La|0)+((v&8191)<<13)|0;I=(y+(v>>>13)|0)+(ba>>>26)|0;ba&=67108863;La=Math.imul(J,Bb);v=Math.imul(J,rb);v=v+Math.imul(la,Bb)|0;y=Math.imul(la,rb);La=La+Math.imul(oa,wb)|0;v=v+Math.imul(oa,Ab)|0;v=v+Math.imul(ra,wb)|0;y=y+Math.imul(ra,Ab)|0;La=La+Math.imul(ma,K)|0;v=v+Math.imul(ma,Ma)|0;v=v+Math.imul(xa,K)|0;y=y+Math.imul(xa,Ma)|0;ma=(I+La|0)+((v&8191)<<13)|0;I=(y+(v>>>13)|0)+(ma>>>26)|0;ma&=67108863;
La=Math.imul(J,wb);v=Math.imul(J,Ab);v=v+Math.imul(la,wb)|0;y=Math.imul(la,Ab);La=La+Math.imul(oa,K)|0;v=v+Math.imul(oa,Ma)|0;v=v+Math.imul(ra,K)|0;y=y+Math.imul(ra,Ma)|0;oa=(I+La|0)+((v&8191)<<13)|0;I=(y+(v>>>13)|0)+(oa>>>26)|0;oa&=67108863;La=Math.imul(J,K);v=Math.imul(J,Ma);v=v+Math.imul(la,K)|0;y=Math.imul(la,Ma);M=(I+La|0)+((v&8191)<<13)|0;I=(y+(v>>>13)|0)+(M>>>26)|0;O[0]=ya;O[1]=Aa;O[2]=Ka;O[3]=Ta;O[4]=bb;O[5]=cb;O[6]=Eb;O[7]=Pb;O[8]=fc;O[9]=H;O[10]=L;O[11]=Q;O[12]=ca;O[13]=T;O[14]=ha;O[15]=
ba;O[16]=ma;O[17]=oa;O[18]=M&67108863;0!==I&&(O[19]=I,F.length++);return F};Math.imul||(D=r);a.prototype.mulTo=function(v,y){var F=this.length+v.length;if(10===this.length&&10===v.length)v=D(this,v,y);else if(63>F)v=r(this,v,y);else if(1024>F){y.negative=v.negative^this.negative;y.length=this.length+v.length;for(var J=0,K=F=0;K<y.length-1;K++){var O=F;F=0;J&=67108863;for(var I=Math.min(K,v.length-1),L=Math.max(0,K-this.length+1);L<=I;L++){var H=(this.words[K-L]|0)*(v.words[L]|0),M=H&67108863;O=O+
(H/67108864|0)|0;M=M+J|0;J=M&67108863;O=O+(M>>>26)|0;F+=O>>>26;O&=67108863}y.words[K]=J;J=O}0!==J?y.words[K]=J:y.length--;v=y.strip()}else v=(new l).mulp(this,v,y);return v};l.prototype.makeRBT=function(v){for(var y=Array(v),F=a.prototype._countBits(v)-1,J=0;J<v;J++)y[J]=this.revBin(J,F,v);return y};l.prototype.revBin=function(v,y,F){if(0===v||v===F-1)return v;for(var J=F=0;J<y;J++)F|=(v&1)<<y-J-1,v>>=1;return F};l.prototype.permute=function(v,y,F,J,K,O){for(var I=0;I<O;I++)J[I]=y[v[I]],K[I]=F[v[I]]};
l.prototype.transform=function(v,y,F,J,K,O){this.permute(O,v,y,F,J,K);for(v=1;v<K;v<<=1){y=v<<1;O=Math.cos(2*Math.PI/y);for(var I=Math.sin(2*Math.PI/y),L=0;L<K;L+=y)for(var H=O,M=I,Q=0;Q<v;Q++){var Z=F[L+Q],ca=J[L+Q],W=F[L+Q+v],T=J[L+Q+v],U=H*W-M*T;T=H*T+M*W;W=U;F[L+Q]=Z+W;J[L+Q]=ca+T;F[L+Q+v]=Z-W;J[L+Q+v]=ca-T;Q!==y&&(U=O*H-I*M,M=O*M+I*H,H=U)}}};l.prototype.guessLen13b=function(v,y){v=Math.max(y,v)|1;y=v&1;var F=0;for(v=v/2|0;v;v>>>=1)F++;return 1<<F+1+y};l.prototype.conjugate=function(v,y,F){if(!(1>=
F))for(var J=0;J<F/2;J++){var K=v[J];v[J]=v[F-J-1];v[F-J-1]=K;K=y[J];y[J]=-y[F-J-1];y[F-J-1]=-K}};l.prototype.normalize13b=function(v,y){for(var F=0,J=0;J<y/2;J++)F=8192*Math.round(v[2*J+1]/y)+Math.round(v[2*J]/y)+F,v[J]=F&67108863,F=67108864>F?0:F/67108864|0;return v};l.prototype.convert13b=function(v,y,F,J){for(var K=0,O=0;O<y;O++)K+=v[O]|0,F[2*O]=K&8191,K>>>=13,F[2*O+1]=K&8191,K>>>=13;for(O=2*y;O<J;++O)F[O]=0;k(0===K);k(0===(K&-8192))};l.prototype.stub=function(v){for(var y=Array(v),F=0;F<v;F++)y[F]=
0;return y};l.prototype.mulp=function(v,y,F){var J=2*this.guessLen13b(v.length,y.length),K=this.makeRBT(J),O=this.stub(J),I=Array(J),L=Array(J),H=Array(J),M=Array(J),Q=Array(J),Z=Array(J),ca=F.words;ca.length=J;this.convert13b(v.words,v.length,I,J);this.convert13b(y.words,y.length,M,J);this.transform(I,O,L,H,J,K);this.transform(M,O,Q,Z,J,K);for(I=0;I<J;I++)M=L[I]*Q[I]-H[I]*Z[I],H[I]=L[I]*Z[I]+H[I]*Q[I],L[I]=M;this.conjugate(L,H,J);this.transform(L,H,ca,O,J,K);this.conjugate(ca,O,J);this.normalize13b(ca,
J);F.negative=v.negative^y.negative;F.length=v.length+y.length;return F.strip()};a.prototype.mul=function(v){var y=new a(null);y.words=Array(this.length+v.length);return this.mulTo(v,y)};a.prototype.mulf=function(v){var y=new a(null);y.words=Array(this.length+v.length);return(new l).mulp(this,v,y)};a.prototype.imul=function(v){return this.clone().mulTo(v,this)};a.prototype.imuln=function(v){k("number"===typeof v);k(67108864>v);for(var y=0,F=0;F<this.length;F++){var J=(this.words[F]|0)*v,K=(J&67108863)+
(y&67108863);y>>=26;y+=J/67108864|0;y+=K>>>26;this.words[F]=K&67108863}0!==y&&(this.words[F]=y,this.length++);return this};a.prototype.muln=function(v){return this.clone().imuln(v)};a.prototype.sqr=function(){return this.mul(this)};a.prototype.isqr=function(){return this.imul(this.clone())};a.prototype.pow=function(v){for(var y=Array(v.bitLength()),F=0;F<y.length;F++){var J=F%26;y[F]=(v.words[F/26|0]&1<<J)>>>J}if(0===y.length)return new a(1);v=this;for(F=0;F<y.length&&0===y[F];F++,v=v.sqr());if(++F<
y.length)for(J=v.sqr();F<y.length;F++,J=J.sqr())0!==y[F]&&(v=v.mul(J));return v};a.prototype.iushln=function(v){k("number"===typeof v&&0<=v);var y=v%26;v=(v-y)/26;var F=67108863>>>26-y<<26-y,J;if(0!==y){var K=0;for(J=0;J<this.length;J++){var O=this.words[J]&F;this.words[J]=(this.words[J]|0)-O<<y|K;K=O>>>26-y}K&&(this.words[J]=K,this.length++)}if(0!==v){for(J=this.length-1;0<=J;J--)this.words[J+v]=this.words[J];for(J=0;J<v;J++)this.words[J]=0;this.length+=v}return this.strip()};a.prototype.ishln=function(v){k(0===
this.negative);return this.iushln(v)};a.prototype.iushrn=function(v,y,F){k("number"===typeof v&&0<=v);var J=v%26,K=Math.min((v-J)/26,this.length);v=67108863^67108863>>>J<<J;y=Math.max(0,(y?(y-y%26)/26:0)-K);if(F){for(var O=0;O<K;O++)F.words[O]=this.words[O];F.length=K}if(0!==K)if(this.length>K)for(this.length-=K,O=0;O<this.length;O++)this.words[O]=this.words[O+K];else this.words[0]=0,this.length=1;K=0;for(O=this.length-1;0<=O&&(0!==K||O>=y);O--){var I=this.words[O]|0;this.words[O]=K<<26-J|I>>>J;K=
I&v}F&&0!==K&&(F.words[F.length++]=K);0===this.length&&(this.words[0]=0,this.length=1);return this.strip()};a.prototype.ishrn=function(v,y,F){k(0===this.negative);return this.iushrn(v,y,F)};a.prototype.shln=function(v){return this.clone().ishln(v)};a.prototype.ushln=function(v){return this.clone().iushln(v)};a.prototype.shrn=function(v){return this.clone().ishrn(v)};a.prototype.ushrn=function(v){return this.clone().iushrn(v)};a.prototype.testn=function(v){k("number"===typeof v&&0<=v);var y=v%26;v=
(v-y)/26;return this.length<=v?!1:!!(this.words[v]&1<<y)};a.prototype.imaskn=function(v){k("number"===typeof v&&0<=v);var y=v%26;v=(v-y)/26;k(0===this.negative,"imaskn works only with positive numbers");if(this.length<=v)return this;0!==y&&v++;this.length=Math.min(v,this.length);0!==y&&(this.words[this.length-1]&=67108863^67108863>>>y<<y);return this.strip()};a.prototype.maskn=function(v){return this.clone().imaskn(v)};a.prototype.iaddn=function(v){k("number"===typeof v);k(67108864>v);if(0>v)return this.isubn(-v);
if(0!==this.negative){if(1===this.length&&(this.words[0]|0)<v)return this.words[0]=v-(this.words[0]|0),this.negative=0,this;this.negative=0;this.isubn(v);this.negative=1;return this}return this._iaddn(v)};a.prototype._iaddn=function(v){this.words[0]+=v;for(v=0;v<this.length&&67108864<=this.words[v];v++)this.words[v]-=67108864,v===this.length-1?this.words[v+1]=1:this.words[v+1]++;this.length=Math.max(this.length,v+1);return this};a.prototype.isubn=function(v){k("number"===typeof v);k(67108864>v);if(0>
v)return this.iaddn(-v);if(0!==this.negative)return this.negative=0,this.iaddn(v),this.negative=1,this;this.words[0]-=v;if(1===this.length&&0>this.words[0])this.words[0]=-this.words[0],this.negative=1;else for(v=0;v<this.length&&0>this.words[v];v++)this.words[v]+=67108864,--this.words[v+1];return this.strip()};a.prototype.addn=function(v){return this.clone().iaddn(v)};a.prototype.subn=function(v){return this.clone().isubn(v)};a.prototype.iabs=function(){this.negative=0;return this};a.prototype.abs=
function(){return this.clone().iabs()};a.prototype._ishlnsubmul=function(v,y,F){var J;this._expand(v.length+F);var K=0;for(J=0;J<v.length;J++){var O=(this.words[J+F]|0)+K;K=(v.words[J]|0)*y;O-=K&67108863;K=(O>>26)-(K/67108864|0);this.words[J+F]=O&67108863}for(;J<this.length-F;J++)O=(this.words[J+F]|0)+K,K=O>>26,this.words[J+F]=O&67108863;if(0===K)return this.strip();k(-1===K);for(J=K=0;J<this.length;J++)O=-(this.words[J]|0)+K,K=O>>26,this.words[J]=O&67108863;this.negative=1;return this.strip()};a.prototype._wordDiv=
function(v,y){var F=this.clone(),J=v,K=J.words[J.length-1]|0;v=26-this._countBits(K);0!==v&&(J=J.ushln(v),F.iushln(v),K=J.words[J.length-1]|0);var O=F.length-J.length;if("mod"!==y){var I=new a(null);I.length=O+1;I.words=Array(I.length);for(var L=0;L<I.length;L++)I.words[L]=0}L=F.clone()._ishlnsubmul(J,1,O);0===L.negative&&(F=L,I&&(I.words[O]=1));for(--O;0<=O;O--){L=67108864*(F.words[J.length+O]|0)+(F.words[J.length+O-1]|0);L=Math.min(L/K|0,67108863);for(F._ishlnsubmul(J,L,O);0!==F.negative;)L--,F.negative=
0,F._ishlnsubmul(J,1,O),F.isZero()||(F.negative^=1);I&&(I.words[O]=L)}I&&I.strip();F.strip();"div"!==y&&0!==v&&F.iushrn(v);return{div:I||null,mod:F}};a.prototype.divmod=function(v,y,F){k(!v.isZero());if(this.isZero())return{div:new a(0),mod:new a(0)};var J;if(0!==this.negative&&0===v.negative){var K=this.neg().divmod(v,y);"mod"!==y&&(J=K.div.neg());if("div"!==y){var O=K.mod.neg();F&&0!==O.negative&&O.iadd(v)}return{div:J,mod:O}}return 0===this.negative&&0!==v.negative?(K=this.divmod(v.neg(),y),"mod"!==
y&&(J=K.div.neg()),{div:J,mod:K.mod}):0!==(this.negative&v.negative)?(K=this.neg().divmod(v.neg(),y),"div"!==y&&(O=K.mod.neg(),F&&0!==O.negative&&O.isub(v)),{div:K.div,mod:O}):v.length>this.length||0>this.cmp(v)?{div:new a(0),mod:this}:1===v.length?"div"===y?{div:this.divn(v.words[0]),mod:null}:"mod"===y?{div:null,mod:new a(this.modn(v.words[0]))}:{div:this.divn(v.words[0]),mod:new a(this.modn(v.words[0]))}:this._wordDiv(v,y)};a.prototype.div=function(v){return this.divmod(v,"div",!1).div};a.prototype.mod=
function(v){return this.divmod(v,"mod",!1).mod};a.prototype.umod=function(v){return this.divmod(v,"mod",!0).mod};a.prototype.divRound=function(v){var y=this.divmod(v);if(y.mod.isZero())return y.div;var F=0!==y.div.negative?y.mod.isub(v):y.mod,J=v.ushrn(1);v=v.andln(1);F=F.cmp(J);return 0>F||1===v&&0===F?y.div:0!==y.div.negative?y.div.isubn(1):y.div.iaddn(1)};a.prototype.modn=function(v){k(67108863>=v);for(var y=67108864%v,F=0,J=this.length-1;0<=J;J--)F=(y*F+(this.words[J]|0))%v;return F};a.prototype.idivn=
function(v){k(67108863>=v);for(var y=0,F=this.length-1;0<=F;F--)y=(this.words[F]|0)+67108864*y,this.words[F]=y/v|0,y%=v;return this.strip()};a.prototype.divn=function(v){return this.clone().idivn(v)};a.prototype.egcd=function(v){k(0===v.negative);k(!v.isZero());var y=this,F=v.clone();y=0!==y.negative?y.umod(v):y.clone();v=new a(1);for(var J=new a(0),K=new a(0),O=new a(1),I=0;y.isEven()&&F.isEven();)y.iushrn(1),F.iushrn(1),++I;for(var L=F.clone(),H=y.clone();!y.isZero();){for(var M=0,Q=1;0===(y.words[0]&
Q)&&26>M;++M,Q<<=1);if(0<M)for(y.iushrn(M);0<M--;){if(v.isOdd()||J.isOdd())v.iadd(L),J.isub(H);v.iushrn(1);J.iushrn(1)}M=0;for(Q=1;0===(F.words[0]&Q)&&26>M;++M,Q<<=1);if(0<M)for(F.iushrn(M);0<M--;){if(K.isOdd()||O.isOdd())K.iadd(L),O.isub(H);K.iushrn(1);O.iushrn(1)}0<=y.cmp(F)?(y.isub(F),v.isub(K),J.isub(O)):(F.isub(y),K.isub(v),O.isub(J))}return{a:K,b:O,gcd:F.iushln(I)}};a.prototype._invmp=function(v){k(0===v.negative);k(!v.isZero());var y=this,F=v.clone();y=0!==y.negative?y.umod(v):y.clone();for(var J=
new a(1),K=new a(0),O=F.clone();0<y.cmpn(1)&&0<F.cmpn(1);){for(var I=0,L=1;0===(y.words[0]&L)&&26>I;++I,L<<=1);if(0<I)for(y.iushrn(I);0<I--;)J.isOdd()&&J.iadd(O),J.iushrn(1);I=0;for(L=1;0===(F.words[0]&L)&&26>I;++I,L<<=1);if(0<I)for(F.iushrn(I);0<I--;)K.isOdd()&&K.iadd(O),K.iushrn(1);0<=y.cmp(F)?(y.isub(F),J.isub(K)):(F.isub(y),K.isub(J))}y=0===y.cmpn(1)?J:K;0>y.cmpn(0)&&y.iadd(v);return y};a.prototype.gcd=function(v){if(this.isZero())return v.abs();if(v.isZero())return this.abs();var y=this.clone();
v=v.clone();y.negative=0;for(var F=v.negative=0;y.isEven()&&v.isEven();F++)y.iushrn(1),v.iushrn(1);do{for(;y.isEven();)y.iushrn(1);for(;v.isEven();)v.iushrn(1);var J=y.cmp(v);if(0>J)J=y,y=v,v=J;else if(0===J||0===v.cmpn(1))break;y.isub(v)}while(1);return v.iushln(F)};a.prototype.invm=function(v){return this.egcd(v).a.umod(v)};a.prototype.isEven=function(){return 0===(this.words[0]&1)};a.prototype.isOdd=function(){return 1===(this.words[0]&1)};a.prototype.andln=function(v){return this.words[0]&v};
a.prototype.bincn=function(v){k("number"===typeof v);var y=v%26;v=(v-y)/26;y=1<<y;if(this.length<=v)return this._expand(v+1),this.words[v]|=y,this;for(;0!==y&&v<this.length;v++){var F=this.words[v]|0;F+=y;y=F>>>26;F&=67108863;this.words[v]=F}0!==y&&(this.words[v]=y,this.length++);return this};a.prototype.isZero=function(){return 1===this.length&&0===this.words[0]};a.prototype.cmpn=function(v){var y=0>v;if(0!==this.negative&&!y)return-1;if(0===this.negative&&y)return 1;this.strip();1<this.length?v=
1:(y&&(v=-v),k(67108863>=v,"Number is too big"),y=this.words[0]|0,v=y===v?0:y<v?-1:1);return 0!==this.negative?-v|0:v};a.prototype.cmp=function(v){if(0!==this.negative&&0===v.negative)return-1;if(0===this.negative&&0!==v.negative)return 1;v=this.ucmp(v);return 0!==this.negative?-v|0:v};a.prototype.ucmp=function(v){if(this.length>v.length)return 1;if(this.length<v.length)return-1;for(var y=0,F=this.length-1;0<=F;F--){var J=this.words[F]|0,K=v.words[F]|0;if(J!==K){J<K?y=-1:J>K&&(y=1);break}}return y};
a.prototype.gtn=function(v){return 1===this.cmpn(v)};a.prototype.gt=function(v){return 1===this.cmp(v)};a.prototype.gten=function(v){return 0<=this.cmpn(v)};a.prototype.gte=function(v){return 0<=this.cmp(v)};a.prototype.ltn=function(v){return-1===this.cmpn(v)};a.prototype.lt=function(v){return-1===this.cmp(v)};a.prototype.lten=function(v){return 0>=this.cmpn(v)};a.prototype.lte=function(v){return 0>=this.cmp(v)};a.prototype.eqn=function(v){return 0===this.cmpn(v)};a.prototype.eq=function(v){return 0===
this.cmp(v)};a.red=function(v){return new t(v)};a.prototype.toRed=function(v){k(!this.red,"Already a number in reduction context");k(0===this.negative,"red works only with positives");return v.convertTo(this)._forceRed(v)};a.prototype.fromRed=function(){k(this.red,"fromRed works only with numbers in reduction context");return this.red.convertFrom(this)};a.prototype._forceRed=function(v){this.red=v;return this};a.prototype.forceRed=function(v){k(!this.red,"Already a number in reduction context");return this._forceRed(v)};
a.prototype.redAdd=function(v){k(this.red,"redAdd works only with red numbers");return this.red.add(this,v)};a.prototype.redIAdd=function(v){k(this.red,"redIAdd works only with red numbers");return this.red.iadd(this,v)};a.prototype.redSub=function(v){k(this.red,"redSub works only with red numbers");return this.red.sub(this,v)};a.prototype.redISub=function(v){k(this.red,"redISub works only with red numbers");return this.red.isub(this,v)};a.prototype.redShl=function(v){k(this.red,"redShl works only with red numbers");
return this.red.shl(this,v)};a.prototype.redMul=function(v){k(this.red,"redMul works only with red numbers");this.red._verify2(this,v);return this.red.mul(this,v)};a.prototype.redIMul=function(v){k(this.red,"redMul works only with red numbers");this.red._verify2(this,v);return this.red.imul(this,v)};a.prototype.redSqr=function(){k(this.red,"redSqr works only with red numbers");this.red._verify1(this);return this.red.sqr(this)};a.prototype.redISqr=function(){k(this.red,"redISqr works only with red numbers");
this.red._verify1(this);return this.red.isqr(this)};a.prototype.redSqrt=function(){k(this.red,"redSqrt works only with red numbers");this.red._verify1(this);return this.red.sqrt(this)};a.prototype.redInvm=function(){k(this.red,"redInvm works only with red numbers");this.red._verify1(this);return this.red.invm(this)};a.prototype.redNeg=function(){k(this.red,"redNeg works only with red numbers");this.red._verify1(this);return this.red.neg(this)};a.prototype.redPow=function(v){k(this.red&&!v.red,"redPow(normalNum)");
this.red._verify1(this);return this.red.pow(this,v)};var C={k256:null,p224:null,p192:null,p25519:null};c.prototype._tmp=function(){var v=new a(null);v.words=Array(Math.ceil(this.n/13));return v};c.prototype.ireduce=function(v){do{this.split(v,this.tmp);v=this.imulK(v);v=v.iadd(this.tmp);var y=v.bitLength()}while(y>this.n);y=y<this.n?-1:v.ucmp(this.p);0===y?(v.words[0]=0,v.length=1):0<y?v.isub(this.p):v.strip();return v};c.prototype.split=function(v,y){v.iushrn(this.n,0,y)};c.prototype.imulK=function(v){return v.imul(this.k)};
m(d,c);d.prototype.split=function(v,y){for(var F=Math.min(v.length,9),J=0;J<F;J++)y.words[J]=v.words[J];y.length=F;if(9>=v.length)v.words[0]=0,v.length=1;else{F=v.words[9];y.words[y.length++]=F&4194303;for(J=10;J<v.length;J++)y=v.words[J]|0,v.words[J-10]=(y&4194303)<<4|F>>>22,F=y;F>>>=22;v.words[J-10]=F;v.length=0===F&&10<v.length?v.length-10:v.length-9}};d.prototype.imulK=function(v){v.words[v.length]=0;v.words[v.length+1]=0;v.length+=2;for(var y=0,F=0;F<v.length;F++){var J=v.words[F]|0;y+=977*J;
v.words[F]=y&67108863;y=64*J+(y/67108864|0)}0===v.words[v.length-1]&&(v.length--,0===v.words[v.length-1]&&v.length--);return v};m(e,c);m(f,c);m(q,c);q.prototype.imulK=function(v){for(var y=0,F=0;F<v.length;F++){y=19*(v.words[F]|0)+y;var J=y&67108863;y>>>=26;v.words[F]=J}0!==y&&(v.words[v.length++]=y);return v};a._prime=function(v){if(C[v])return C[v];if("k256"===v)var y=new d;else if("p224"===v)y=new e;else if("p192"===v)y=new f;else if("p25519"===v)y=new q;else throw Error("Unknown prime "+v);return C[v]=
y};t.prototype._verify1=function(v){k(0===v.negative,"red works only with positives");k(v.red,"red works only with red numbers")};t.prototype._verify2=function(v,y){k(0===(v.negative|y.negative),"red works only with positives");k(v.red&&v.red===y.red,"red works only with red numbers")};t.prototype.imod=function(v){return this.prime?this.prime.ireduce(v)._forceRed(this):v.umod(this.m)._forceRed(this)};t.prototype.neg=function(v){return v.isZero()?v.clone():this.m.sub(v)._forceRed(this)};t.prototype.add=
function(v,y){this._verify2(v,y);v=v.add(y);0<=v.cmp(this.m)&&v.isub(this.m);return v._forceRed(this)};t.prototype.iadd=function(v,y){this._verify2(v,y);v=v.iadd(y);0<=v.cmp(this.m)&&v.isub(this.m);return v};t.prototype.sub=function(v,y){this._verify2(v,y);v=v.sub(y);0>v.cmpn(0)&&v.iadd(this.m);return v._forceRed(this)};t.prototype.isub=function(v,y){this._verify2(v,y);v=v.isub(y);0>v.cmpn(0)&&v.iadd(this.m);return v};t.prototype.shl=function(v,y){this._verify1(v);return this.imod(v.ushln(y))};t.prototype.imul=
function(v,y){this._verify2(v,y);return this.imod(v.imul(y))};t.prototype.mul=function(v,y){this._verify2(v,y);return this.imod(v.mul(y))};t.prototype.isqr=function(v){return this.imul(v,v.clone())};t.prototype.sqr=function(v){return this.mul(v,v)};t.prototype.sqrt=function(v){if(v.isZero())return v.clone();var y=this.m.andln(3);k(1===y%2);if(3===y)return y=this.m.add(new a(1)).iushrn(2),this.pow(v,y);for(var F=this.m.subn(1),J=0;!F.isZero()&&0===F.andln(1);)J++,F.iushrn(1);k(!F.isZero());y=(new a(1)).toRed(this);
var K=y.redNeg(),O=this.m.subn(1).iushrn(1),I=this.m.bitLength();for(I=(new a(2*I*I)).toRed(this);0!==this.pow(I,O).cmp(K);)I.redIAdd(K);O=this.pow(I,F);K=this.pow(v,F.addn(1).iushrn(1));v=this.pow(v,F);for(F=J;0!==v.cmp(y);){I=v;for(J=0;0!==I.cmp(y);J++)I=I.redSqr();k(J<F);O=this.pow(O,(new a(1)).iushln(F-J-1));K=K.redMul(O);O=O.redSqr();v=v.redMul(O);F=J}return K};t.prototype.invm=function(v){v=v._invmp(this.m);return 0!==v.negative?(v.negative=0,this.imod(v).redNeg()):this.imod(v)};t.prototype.pow=
function(v,y){if(y.isZero())return(new a(1)).toRed(this);if(0===y.cmpn(1))return v.clone();var F=Array(16);F[0]=(new a(1)).toRed(this);F[1]=v;for(var J=2;J<F.length;J++)F[J]=this.mul(F[J-1],v);v=F[0];var K=0,O=0,I=y.bitLength()%26;0===I&&(I=26);for(J=y.length-1;0<=J;J--){var L=y.words[J];for(--I;0<=I;I--){var H=L>>I&1;v!==F[0]&&(v=this.sqr(v));if(0===H&&0===K)O=0;else if(K<<=1,K|=H,O++,4===O||0===J&&0===I)v=this.mul(v,F[K]),K=O=0}I=26}return v};t.prototype.convertTo=function(v){var y=v.umod(this.m);
return y===v?y.clone():y};t.prototype.convertFrom=function(v){v=v.clone();v.red=null;return v};a.mont=function(v){return new w(v)};m(w,t);w.prototype.convertTo=function(v){return this.imod(v.ushln(this.shift))};w.prototype.convertFrom=function(v){v=this.imod(v.mul(this.rinv));v.red=null;return v};w.prototype.imul=function(v,y){if(v.isZero()||y.isZero())return v.words[0]=0,v.length=1,v;v=v.imul(y);y=v.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);y=v=v.isub(y).iushrn(this.shift);
0<=v.cmp(this.m)?y=v.isub(this.m):0>v.cmpn(0)&&(y=v.iadd(this.m));return y._forceRed(this)};w.prototype.mul=function(v,y){if(v.isZero()||y.isZero())return(new a(0))._forceRed(this);v=v.mul(y);y=v.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);y=v=v.isub(y).iushrn(this.shift);0<=v.cmp(this.m)?y=v.isub(this.m):0>v.cmpn(0)&&(y=v.iadd(this.m));return y._forceRed(this)};w.prototype.invm=function(v){return this.imod(v._invmp(this.m).mul(this.r2))._forceRed(this)}})("undefined"===typeof N||
N,this)},{buffer:115}],107:[function(b,N,G){N.exports=function(p){var n,k,m,a=p.length;for(n=k=0;n<a;++n)k+=p[n].length;var g=Array(k),h=0;for(n=0;n<a;++n){var r=p[n],l=r.length;for(k=0;k<l;++k){var c=g[h++]=Array(l-1),d=0;for(m=0;m<l;++m)m!==k&&(c[d++]=r[m]);k&1&&(m=c[1],c[1]=c[0],c[0]=m)}}return g}},{}],108:[function(b,N,G){function p(r,l,c,d){for(var e=0,f=0,q=0,t=r.length;q<t;++q){var w=r[q],x;a:{for(x=0;x<l;++x)if(!(w[x]<=w[x+l])){x=!0;break a}x=!1}if(!x){for(x=0;x<2*l;++x)c[e++]=w[x];d[f++]=
q}}return f}function n(r,l,c,d){var e=r.length,f=l.length;if(!(0>=e||0>=f)){var q=r[0].length>>>1;if(!(0>=q)){var t=m.mallocDouble(2*q*e),w=m.mallocInt32(e);e=p(r,q,t,w);if(0<e){if(1===q&&d){a.init(e);var x=a.sweepComplete(q,c,0,e,t,w,0,e,t,w)}else{r=m.mallocDouble(2*q*f);var z=m.mallocInt32(f);f=p(l,q,r,z);0<f&&(a.init(e+f),x=1===q?a.sweepBipartite(q,c,0,e,t,w,0,f,r,z):g(q,c,d,e,t,w,f,r,z),m.free(r),m.free(z))}m.free(t);m.free(w)}return x}}}function k(r,l){h.push([r,l])}N.exports=function(r,l,c){switch(arguments.length){case 1:return h=
[],n(r,r,k,!0),h;case 2:if("function"===typeof l)return n(r,r,l,!0);h=[];n(r,l,k,!1);return h;case 3:return n(r,l,c,!1);default:throw Error("box-intersect: Invalid arguments");}};var m=b("typedarray-pool"),a=b("./lib/sweep"),g=b("./lib/intersect"),h},{"./lib/intersect":110,"./lib/sweep":114,"typedarray-pool":617}],109:[function(b,N,G){function p(k){function m(l,c){var d="bruteForce"+(l?"Red":"Blue")+(c?"Flip":"")+(k?"Full":""),e=["function ",d,"(",n.join(),"){","var ","es","\x3d2*","d",";"],f="for(var j\x3dbs,bp\x3des*bs;j\x3cbe;++j,bp+\x3des){var y0\x3dbb[ax+bp],"+
(k?"y1\x3dbb[ax+bp+d],":"")+"yi\x3dbi[j];";l?e.push("for(var i\x3drs,rp\x3des*rs;i\x3cre;++i,rp+\x3des){var x0\x3drb[ax+rp],x1\x3drb[ax+rp+d],xi\x3dri[i];","Q",":",f):e.push(f,"Q",":","for(var i\x3drs,rp\x3des*rs;i\x3cre;++i,rp+\x3des){var x0\x3drb[ax+rp],x1\x3drb[ax+rp+d],xi\x3dri[i];");k?e.push("if(y1\x3cx0||x1\x3cy0)continue;"):c?e.push("if(y0\x3c\x3dx0||x1\x3cy0)continue;"):e.push("if(y0\x3cx0||x1\x3cy0)continue;");e.push("for(var k\x3dax+1;k\x3cd;++k){var r0\x3drb[k+rp],r1\x3drb[k+d+rp],b0\x3dbb[k+bp],b1\x3dbb[k+d+bp];if(r1\x3cb0||b1\x3cr0)continue Q;}var rv\x3dvv(");
c?e.push("yi,xi"):e.push("xi,yi");e.push(");if(rv!\x3d\x3dvoid 0)return rv;}}}");l=e.join("");g.push(l);r.push("return "+d+"("+n.join()+");")}var a="bruteForce"+(k?"Full":"Partial"),g=[],h=n.slice();k||h.splice(3,0,"fp");var r=["function "+a+"("+h.join()+"){"];r.push("if(re-rs\x3ebe-bs){");k?(m(!0,!1),r.push("}else{"),m(!1,!1)):(r.push("if(fp){"),m(!0,!0),r.push("}else{"),m(!0,!1),r.push("}}else{if(fp){"),m(!1,!0),r.push("}else{"),m(!1,!1),r.push("}"));r.push("}}return "+a);a=g.join("")+r.join("");
return(new Function(a))()}var n="d ax vv rs re rb ri bs be bb bi".split(" ");G.partial=p(!1);G.full=p(!0)},{}],110:[function(b,N,G){function p(D,C,v,y,F,J,K,O,I){var L=x*D;B[L]=C;B[L+1]=v;B[L+2]=y;B[L+3]=F;B[L+4]=J;B[L+5]=K;D*=z;A[D]=O;A[D+1]=I}N.exports=function(D,C,v,y,F,J,K,O,I){var L=8*k.log2(y+K+1)*(D+1)|0,H=k.nextPow2(x*L);B.length<H&&(n.free(B),B=n.mallocInt32(H));L=k.nextPow2(z*L);A.length<L&&(n.free(A),A=n.mallocDouble(L));L=0;H=2*D;p(L++,0,0,y,0,K,v?16:0,-Infinity,Infinity);for(v||p(L++,
0,0,K,0,y,1,-Infinity,Infinity);0<L;){--L;v=L*x;var M=B[v];K=B[v+1];var Q=B[v+2],Z=B[v+3],ca=B[v+4];v=B[v+5];y=L*z;var W=A[y],T=A[y+1],U=v&1,ha=!!(v&16),Y=F,ba=J,ja=O;y=I;U&&(Y=O,ba=I,ja=F,y=J);if(v&2&&(Q=f(D,M,K,Q,Y,ba,T),K>=Q))continue;if(v&4&&(K=q(D,M,K,Q,Y,ba,W),K>=Q))continue;v=Q-K;var ma=ca-Z;if(ha){if(D*v*(v+ma)<c){var ia=g.scanComplete(D,M,C,K,Q,Y,ba,Z,ca,ja,y);if(void 0!==ia)return ia;continue}}else if(D*Math.min(v,ma)<r){ia=m(D,M,C,U,K,Q,Y,ba,Z,ca,ja,y);if(void 0!==ia)return ia;continue}else if(D*
v*ma<l){ia=g.scanBipartite(D,M,C,U,K,Q,Y,ba,Z,ca,ja,y);if(void 0!==ia)return ia;continue}v=d(D,M,K,Q,Y,ba,W,T);if(K<v)if(D*(v-K)<r){if(ia=a(D,M+1,C,K,v,Y,ba,Z,ca,ja,y),void 0!==ia)return ia}else if(M===D-2){if(ia=U?g.sweepBipartite(D,C,Z,ca,ja,y,K,v,Y,ba):g.sweepBipartite(D,C,K,v,Y,ba,Z,ca,ja,y),void 0!==ia)return ia}else p(L++,M+1,K,v,Z,ca,U,-Infinity,Infinity),p(L++,M+1,Z,ca,K,v,U^1,-Infinity,Infinity);if(v<Q)if(K=h(D,M,Z,ca,ja,y),ia=ja[H*K+M],ma=e(D,M,K,ca,ja,y,ia),ma<ca&&p(L++,M,v,Q,ma,ca,(U|
4)+(ha?16:0),ia,T),Z<K&&p(L++,M,v,Q,Z,K,(U|2)+(ha?16:0),W,ia),K+1===ma){if(ha)a:{Z=D;ca=C;y=y[K];U=2*Z;K*=U;W=ja[K+M];T=v;v*=U;b:for(;T<Q;++T,v+=U)if(ha=ba[T],ha!==y&&(ma=Y[v+M],ia=Y[v+M+Z],!(W<ma||ia<W))){for(var oa=M+1;oa<Z;++oa){ma=Y[v+oa];ia=Y[v+oa+Z];var xa=ja[K+oa+Z];if(ia<ja[K+oa]||xa<ma)continue b}ha=ca(ha,y);if(void 0!==ha){ia=ha;break a}}ia=void 0}else a:{Z=D;ca=C;y=y[K];W=2*Z;K*=W;T=ja[K+M];ha=v;v*=W;b:for(;ha<Q;++ha,v+=W)if(ma=Y[v+M],ia=Y[v+M+Z],!(T<ma||ia<T||U&&T===ma)){oa=ba[ha];for(xa=
M+1;xa<Z;++xa){ma=Y[v+xa];ia=Y[v+xa+Z];var ra=ja[K+xa+Z];if(ia<ja[K+xa]||ra<ma)continue b}ma=U?ca(y,oa):ca(oa,y);if(void 0!==ma){ia=ma;break a}}ia=void 0}if(void 0!==ia)return ia}else if(K<ma)if(ha){if(Q=t(D,M,v,Q,Y,ba,ia),v<Q)if(Z=e(D,M,v,Q,Y,ba,ia),M===D-2){if(v<Z&&(ia=g.sweepComplete(D,C,v,Z,Y,ba,K,ma,ja,y),void 0!==ia)||Z<Q&&(ia=g.sweepBipartite(D,C,Z,Q,Y,ba,K,ma,ja,y),void 0!==ia))return ia}else v<Z&&p(L++,M+1,v,Z,K,ma,16,-Infinity,Infinity),Z<Q&&(p(L++,M+1,Z,Q,K,ma,0,-Infinity,Infinity),p(L++,
M+1,K,ma,Z,Q,1,-Infinity,Infinity))}else Q=U?w(D,M,v,Q,Y,ba,ia):t(D,M,v,Q,Y,ba,ia),v<Q&&(M===D-2?U?g.sweepBipartite(D,C,K,ma,ja,y,v,Q,Y,ba):g.sweepBipartite(D,C,v,Q,Y,ba,K,ma,ja,y):(p(L++,M+1,v,Q,K,ma,U,-Infinity,Infinity),p(L++,M+1,K,ma,v,Q,U^1,-Infinity,Infinity)))}};var n=b("typedarray-pool"),k=b("bit-twiddle");N=b("./brute");var m=N.partial,a=N.full,g=b("./sweep"),h=b("./median");b=b("./partition");var r=128,l=4194304,c=4194304,d=b("!(lo\x3e\x3dp0)\x26\x26!(p1\x3e\x3dhi)",["p0","p1"]),e=b("lo\x3d\x3d\x3dp0",
["p0"]),f=b("lo\x3cp0",["p0"]),q=b("hi\x3c\x3dp0",["p0"]),t=b("lo\x3c\x3dp0\x26\x26p0\x3c\x3dhi",["p0"]),w=b("lo\x3cp0\x26\x26p0\x3c\x3dhi",["p0"]),x=6,z=2,B=n.mallocInt32(1024),A=n.mallocDouble(1024)},{"./brute":109,"./median":111,"./partition":112,"./sweep":114,"bit-twiddle":104,"typedarray-pool":617}],111:[function(b,N,G){N.exports=function(k,m,a,g,h,r){if(g<=a+1)return a;var l=a,c=g;g=g+a>>>1;for(var d=2*k,e,f;l<c;){if(c-l<n){e=m;f=h;for(var q=r,t=2*k,w=t*(l+1)+e,x=l+1;x<c;++x,w+=t)for(var z=
f[w],B=x,A=t*(x-1);B>l&&f[A+e]>z;--B,A-=t){for(var D=A,C=A+t,v=0;v<t;++v,++D,++C){var y=f[D];f[D]=f[C];f[C]=y}D=q[B];q[B]=q[B-1];q[B-1]=D}break}w=c-l;e=Math.random()*w+l|0;f=h[d*e+m];t=Math.random()*w+l|0;q=h[d*t+m];x=Math.random()*w+l|0;w=h[d*x+m];f<=q?w>=q?(e=t,f=q):f>=w||(e=x,f=w):q>=w?(e=t,f=q):w>=f||(e=x,f=w);q=d*(c-1);t=d*e;for(w=0;w<d;++w,++q,++t)x=h[q],h[q]=h[t],h[t]=x;q=r[c-1];r[c-1]=r[e];r[e]=q;e=p(k,m,l,c-1,h,r,f);q=d*(c-1);t=d*e;for(w=0;w<d;++w,++q,++t)x=h[q],h[q]=h[t],h[t]=x;q=r[c-1];
r[c-1]=r[e];r[e]=q;if(g<e){for(c=e-1;l<c&&h[d*(c-1)+m]===f;)--c;c+=1}else if(e<g)for(l=e+1;l<c&&h[d*l+m]===f;)l+=1;else break}return p(k,m,a,g,h,r,h[d*g+m])};var p=b("./partition")("lo\x3cp0",["p0"]),n=8},{"./partition":112}],112:[function(b,N,G){N.exports=function(n,k){k="abcdef".split("").concat(k);var m=[];0<=n.indexOf("lo")&&m.push("lo\x3de[k+n]");0<=n.indexOf("hi")&&m.push("hi\x3de[k+o]");k.push(p.replace("_",m.join()).replace("$",n));return Function.apply(void 0,k)};var p="for(var j\x3d2*a,k\x3dj*c,l\x3dk,m\x3dc,n\x3db,o\x3da+b,p\x3dc;d\x3ep;++p,k+\x3dj){var _;if($)if(m\x3d\x3d\x3dp)m+\x3d1,l+\x3dj;else{for(var s\x3d0;j\x3es;++s){var t\x3de[k+s];e[k+s]\x3de[l],e[l++]\x3dt}var u\x3df[p];f[p]\x3df[m],f[m++]\x3du}}return m"},
{}],113:[function(b,N,G){function p(l,c,d){for(var e=2*(l+1),f=l+1;f<=c;++f){for(var q=d[e++],t=d[e++],w=f,x=e-2;w-- >l;){var z=d[x-2],B=d[x-1];if(z<q)break;else if(z===q&&B<t)break;d[x]=z;d[x+1]=B;x-=2}d[x]=q;d[x+1]=t}}function n(l,c,d){l*=2;c*=2;var e=d[l],f=d[l+1];d[l]=d[c];d[l+1]=d[c+1];d[c]=e;d[c+1]=f}function k(l,c,d){l*=2;c*=2;d[l]=d[c];d[l+1]=d[c+1]}function m(l,c,d,e,f){l*=2;c*=2;f[l]=f[c];f[c]=d;f[l+1]=f[c+1];f[c+1]=e}function a(l,c,d){l*=2;c*=2;var e=d[l],f=d[c];return e<f?!1:e===f?d[l+
1]>d[c+1]:!0}function g(l,c,d,e){l*=2;var f=e[l];return f<c?!0:f===c?e[l+1]<d:!1}function h(l,c,d){var e=(c-l+1)/6|0,f=l+e,q=c-e,t=l+c>>1,w=t-e,x=t+e,z=f,B=w,A=t,D=x,C=q;e=l+1;var v=c-1;if(a(z,B,d)){var y=z;z=B;B=y}a(D,C,d)&&(y=D,D=C,C=y);a(z,A,d)&&(y=z,z=A,A=y);a(B,A,d)&&(y=B,B=A,A=y);a(z,D,d)&&(y=z,z=D,D=y);a(A,D,d)&&(y=A,A=D,D=y);a(B,C,d)&&(y=B,B=C,C=y);a(B,A,d)&&(y=B,B=A,A=y);a(D,C,d)&&(y=D,D=C,C=y);y=d[2*B];B=d[2*B+1];var F=d[2*D];D=d[2*D+1];z*=2;A*=2;C*=2;f*=2;t*=2;q*=2;for(var J=0;2>J;++J){var K=
d[A+J],O=d[C+J];d[f+J]=d[z+J];d[t+J]=K;d[q+J]=O}k(w,l,d);k(x,c,d);for(w=e;w<=v;++w)if(g(w,y,B,d))w!==e&&n(w,e,d),++e;else if(!g(w,F,D,d))for(;;)if(g(v,F,D,d)){g(v,y,B,d)?(x=w,q=e,t=v,z=d,x*=2,q*=2,t*=2,f=z[x],A=z[x+1],z[x]=z[q],z[x+1]=z[q+1],z[q]=z[t],z[q+1]=z[t+1],z[t]=f,z[t+1]=A,++e):n(w,v,d);--v;break}else if(--v<w)break;m(l,e-1,y,B,d);m(c,v+1,F,D,d);e-2-l<=r?p(l,e-2,d):h(l,e-2,d);c-(v+2)<=r?p(v+2,c,d):h(v+2,c,d);v-e<=r?p(e,v,d):h(e,v,d)}N.exports=function(l,c){c<=4*r?p(0,c-1,l):h(0,c-1,l)};var r=
32},{}],114:[function(b,N,G){function p(f,q,t,w){w=q[w];t=f[t-1];f[w]=t;q[t]=w}N.exports={init:function(f){f=k.nextPow2(f);g.length<f&&(n.free(g),g=n.mallocInt32(f));h.length<f&&(n.free(h),h=n.mallocInt32(f));r.length<f&&(n.free(r),r=n.mallocInt32(f));l.length<f&&(n.free(l),l=n.mallocInt32(f));c.length<f&&(n.free(c),c=n.mallocInt32(f));d.length<f&&(n.free(d),d=n.mallocInt32(f));f*=8;e.length<f&&(n.free(e),e=n.mallocDouble(f))},sweepBipartite:function(f,q,t,w,x,z,B,A,D,C){var v=0,y=2*f;--f;for(var F=
y-1;t<w;++t){var J=z[t],K=y*t;e[v++]=x[K+f];e[v++]=-(J+1);e[v++]=x[K+F];e[v++]=J}for(t=B;t<A;++t)J=C[t]+a,w=y*t,e[v++]=D[w+f],e[v++]=-J,e[v++]=D[w+F],e[v++]=J;A=v>>>1;m(e,A);for(t=C=D=0;t<A;++t)if(v=e[2*t+1]|0,v>=a)v=v-a|0,p(r,l,C--,v);else if(0<=v)p(g,h,D--,v);else if(v<=-a){v=-v-a|0;for(y=0;y<D;++y)if(w=q(g[y],v),void 0!==w)return w;y=l;w=C++;r[w]=v;y[v]=w}else{v=-v-1|0;for(y=0;y<C;++y)if(w=q(v,r[y]),void 0!==w)return w;y=h;w=D++;g[w]=v;y[v]=w}},sweepComplete:function(f,q,t,w,x,z,B,A,D,C){var v=
0,y=2*f;--f;for(var F=y-1;t<w;++t){var J=z[t]+1<<1,K=y*t;e[v++]=x[K+f];e[v++]=-J;e[v++]=x[K+F];e[v++]=J}for(t=B;t<A;++t)J=C[t]+1<<1,w=y*t,e[v++]=D[w+f],e[v++]=-J|1,e[v++]=D[w+F],e[v++]=J|1;A=v>>>1;m(e,A);for(t=v=C=D=0;t<A;++t)if(y=e[2*t+1]|0,w=y&1,t<A-1&&y>>1===e[2*t+3]>>1&&(w=2,t+=1),0>y){y=-(y>>1)-1;for(x=0;x<v;++x)if(z=q(c[x],y),void 0!==z)return z;if(0!==w)for(x=0;x<D;++x)if(z=q(g[x],y),void 0!==z)return z;if(1!==w)for(x=0;x<C;++x)if(z=q(r[x],y),void 0!==z)return z;0===w?(w=h,x=D++,g[x]=y,w[y]=
x):1===w?(w=l,x=C++,r[x]=y,w[y]=x):2===w&&(w=d,x=v++,c[x]=y,w[y]=x)}else y=(y>>1)-1,0===w?p(g,h,D--,y):1===w?p(r,l,C--,y):2===w&&p(c,d,v--,y)},scanBipartite:function(f,q,t,w,x,z,B,A,D,C,v,y){var F=0,J=2*f,K=q+f,O=1,I=1;for(w?I=a:O=a;x<z;++x){var L=x+O,H=J*x;e[F++]=B[H+q];e[F++]=-L;e[F++]=B[H+K];e[F++]=L}for(x=D;x<C;++x)L=x+I,z=J*x,e[F++]=v[z+q],e[F++]=-L;C=F>>>1;m(e,C);for(x=F=0;x<C;++x)if(L=e[2*x+1]|0,0>L)if(L=-L,L>=a?(I=!w,L-=a):(I=!!w,--L),I)I=h,z=F++,g[z]=L,I[L]=z;else a:for(I=y[L],L*=J,z=v[L+
q+1],D=v[L+q+1+f],K=0;K<F;++K){H=g[K];var M=J*H;if(!(D<B[M+q+1]||B[M+q+1+f]<z)){for(var Q=q+2;Q<f;++Q)if(v[L+Q+f]<B[M+Q]||B[M+Q+f]<v[L+Q])continue a;H=A[H];H=w?t(I,H):t(H,I);if(void 0!==H)return H}}else p(g,h,F--,L-O)},scanComplete:function(f,q,t,w,x,z,B,A,D,C,v){for(var y=0,F=2*f,J=q+f;w<x;++w){var K=w+a,O=F*w;e[y++]=z[O+q];e[y++]=-K;e[y++]=z[O+J];e[y++]=K}for(w=A;w<D;++w)K=w+1,x=F*w,e[y++]=C[x+q],e[y++]=-K;D=y>>>1;m(e,D);for(w=y=0;w<D;++w)if(x=e[2*w+1]|0,0>x)if(K=-x,K>=a)g[y++]=K-a;else a:for(--K,
x=v[K],K*=F,J=C[K+q+1],O=C[K+q+1+f],A=0;A<y;++A){var I=g[A],L=B[I];if(L===x)break;I*=F;if(!(O<z[I+q+1]||z[I+q+1+f]<J)){for(var H=q+2;H<f;++H)if(C[K+H+f]<z[I+H]||z[I+H+f]<C[K+H])continue a;L=t(L,x);if(void 0!==L)return L}}else{K=x-a;for(A=y-1;0<=A;--A)if(g[A]===K){for(H=A+1;H<y;++H)g[H-1]=g[H];break}--y}}};var n=b("typedarray-pool"),k=b("bit-twiddle"),m=b("./sort"),a=268435456,g=n.mallocInt32(1024),h=n.mallocInt32(1024),r=n.mallocInt32(1024),l=n.mallocInt32(1024),c=n.mallocInt32(1024),d=n.mallocInt32(1024),
e=n.mallocDouble(8192)},{"./sort":113,"bit-twiddle":104,"typedarray-pool":617}],115:[function(b,N,G){},{}],116:[function(b,N,G){function p(){p.init.call(this)}function n(f){if("function"!==typeof f)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof f);}function k(f,q,t,w){n(t);var x=f._events;if(void 0===x)x=f._events=Object.create(null),f._eventsCount=0;else{void 0!==x.newListener&&(f.emit("newListener",q,t.listener?t.listener:t),x=f._events);var z=x[q]}void 0===
z?(x[q]=t,++f._eventsCount):("function"===typeof z?z=x[q]=w?[t,z]:[z,t]:w?z.unshift(t):z.push(t),t=void 0===f._maxListeners?p.defaultMaxListeners:f._maxListeners,0<t&&z.length>t&&!z.warned&&(z.warned=!0,t=Error("Possible EventEmitter memory leak detected. "+z.length+" "+String(q)+" listeners added. Use emitter.setMaxListeners() to increase limit"),t.name="MaxListenersExceededWarning",t.emitter=f,t.type=q,t.count=z.length,console&&console.warn&&console.warn(t)));return f}function m(){if(!this.fired)return this.target.removeListener(this.type,
this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function a(f,q,t){f={fired:!1,wrapFn:void 0,target:f,type:q,listener:t};q=m.bind(f);q.listener=t;return f.wrapFn=q}function g(f,q,t){f=f._events;if(void 0===f)return[];q=f[q];if(void 0===q)return[];if("function"===typeof q)return t?[q.listener||q]:[q];if(t)for(t=Array(q.length),f=0;f<t.length;++f)t[f]=q[f].listener||q[f];else t=r(q,q.length);return t}function h(f){var q=this._events;
if(void 0!==q){f=q[f];if("function"===typeof f)return 1;if(void 0!==f)return f.length}return 0}function r(f,q){for(var t=Array(q),w=0;w<q;++w)t[w]=f[w];return t}var l=(b="object"===typeof Reflect?Reflect:null)&&"function"===typeof b.apply?b.apply:function(f,q,t){return Function.prototype.apply.call(f,q,t)};var c=b&&"function"===typeof b.ownKeys?b.ownKeys:Object.getOwnPropertySymbols?function(f){return Object.getOwnPropertyNames(f).concat(Object.getOwnPropertySymbols(f))}:function(f){return Object.getOwnPropertyNames(f)};
var d=Number.isNaN||function(f){return f!==f};N.exports=p;N.exports.once=function(f,q){return new Promise(function(t,w){function x(){void 0!==z&&f.removeListener("error",z);t([].slice.call(arguments))}if("error"!==q){var z=function(B){f.removeListener(q,x);w(B)};f.once("error",z)}f.once(q,x)})};p.EventEmitter=p;p.prototype._events=void 0;p.prototype._eventsCount=0;p.prototype._maxListeners=void 0;var e=10;Object.defineProperty(p,"defaultMaxListeners",{enumerable:!0,get:function(){return e},set:function(f){if("number"!==
typeof f||0>f||d(f))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+f+".");e=f}});p.init=function(){if(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)this._events=Object.create(null),this._eventsCount=0;this._maxListeners=this._maxListeners||void 0};p.prototype.setMaxListeners=function(f){if("number"!==typeof f||0>f||d(f))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+
f+".");this._maxListeners=f;return this};p.prototype.getMaxListeners=function(){return void 0===this._maxListeners?p.defaultMaxListeners:this._maxListeners};p.prototype.emit=function(f){for(var q=[],t=1;t<arguments.length;t++)q.push(arguments[t]);t="error"===f;var w=this._events;if(void 0!==w)t=t&&void 0===w.error;else if(!t)return!1;if(t){var x;0<q.length&&(x=q[0]);if(x instanceof Error)throw x;q=Error("Unhandled error."+(x?" ("+x.message+")":""));q.context=x;throw q;}t=w[f];if(void 0===t)return!1;
if("function"===typeof t)l(t,this,q);else for(x=t.length,w=r(t,x),t=0;t<x;++t)l(w[t],this,q);return!0};p.prototype.addListener=function(f,q){return k(this,f,q,!1)};p.prototype.on=p.prototype.addListener;p.prototype.prependListener=function(f,q){return k(this,f,q,!0)};p.prototype.once=function(f,q){n(q);this.on(f,a(this,f,q));return this};p.prototype.prependOnceListener=function(f,q){n(q);this.prependListener(f,a(this,f,q));return this};p.prototype.removeListener=function(f,q){var t;n(q);var w=this._events;
if(void 0===w)return this;var x=w[f];if(void 0===x)return this;if(x===q||x.listener===q)0===--this._eventsCount?this._events=Object.create(null):(delete w[f],w.removeListener&&this.emit("removeListener",f,x.listener||q));else if("function"!==typeof x){var z=-1;for(t=x.length-1;0<=t;t--)if(x[t]===q||x[t].listener===q){var B=x[t].listener;z=t;break}if(0>z)return this;if(0===z)x.shift();else{for(;z+1<x.length;z++)x[z]=x[z+1];x.pop()}1===x.length&&(w[f]=x[0]);void 0!==w.removeListener&&this.emit("removeListener",
f,B||q)}return this};p.prototype.off=p.prototype.removeListener;p.prototype.removeAllListeners=function(f){var q=this._events;if(void 0===q)return this;if(void 0===q.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==q[f]&&(0===--this._eventsCount?this._events=Object.create(null):delete q[f]),this;if(0===arguments.length){var t=Object.keys(q);for(q=0;q<t.length;++q){var w=t[q];"removeListener"!==w&&this.removeAllListeners(w)}this.removeAllListeners("removeListener");
this._events=Object.create(null);this._eventsCount=0;return this}t=q[f];if("function"===typeof t)this.removeListener(f,t);else if(void 0!==t)for(q=t.length-1;0<=q;q--)this.removeListener(f,t[q]);return this};p.prototype.listeners=function(f){return g(this,f,!0)};p.prototype.rawListeners=function(f){return g(this,f,!1)};p.listenerCount=function(f,q){return"function"===typeof f.listenerCount?f.listenerCount(q):h.call(f,q)};p.prototype.listenerCount=h;p.prototype.eventNames=function(){return 0<this._eventsCount?
c(this._events):[]}},{}],117:[function(b,N,G){(function(p){(function(){function n(H){if(H>O)throw new RangeError('The value "'+H+'" is invalid for option "size"');H=new Uint8Array(H);H.__proto__=k.prototype;return H}function k(H,M,Q){if("number"===typeof H){if("string"===typeof M)throw new TypeError('The "string" argument must be of type string. Received type number');return g(H)}return m(H,M,Q)}function m(H,M,Q){if("string"===typeof H){var Z=M;if("string"!==typeof Z||""===Z)Z="utf8";if(!k.isEncoding(Z))throw new TypeError("Unknown encoding: "+
Z);M=c(H,Z)|0;Q=n(M);H=Q.write(H,Z);H!==M&&(Q=Q.slice(0,H));return Q}if(ArrayBuffer.isView(H))return h(H);if(null==H)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof H);if(F(H,ArrayBuffer)||H&&F(H.buffer,ArrayBuffer)){if(0>M||H.byteLength<M)throw new RangeError('"offset" is outside of buffer bounds');if(H.byteLength<M+(Q||0))throw new RangeError('"length" is outside of buffer bounds');H=void 0===M&&void 0===Q?
new Uint8Array(H):void 0===Q?new Uint8Array(H,M):new Uint8Array(H,M,Q);H.__proto__=k.prototype;return H}if("number"===typeof H)throw new TypeError('The "value" argument must not be of type number. Received type number');Z=H.valueOf&&H.valueOf();if(null!=Z&&Z!==H)return k.from(Z,M,Q);if(Z=r(H))return Z;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof H[Symbol.toPrimitive])return k.from(H[Symbol.toPrimitive]("string"),M,Q);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+
typeof H);}function a(H){if("number"!==typeof H)throw new TypeError('"size" argument must be of type number');if(0>H)throw new RangeError('The value "'+H+'" is invalid for option "size"');}function g(H){a(H);return n(0>H?0:l(H)|0)}function h(H){for(var M=0>H.length?0:l(H.length)|0,Q=n(M),Z=0;Z<M;Z+=1)Q[Z]=H[Z]&255;return Q}function r(H){if(k.isBuffer(H)){var M=l(H.length)|0,Q=n(M);if(0===Q.length)return Q;H.copy(Q,0,0,M);return Q}if(void 0!==H.length)return(M="number"!==typeof H.length)||(M=H.length,
M=M!==M),M?n(0):h(H);if("Buffer"===H.type&&Array.isArray(H.data))return h(H.data)}function l(H){if(H>=O)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+O.toString(16)+" bytes");return H|0}function c(H,M){if(k.isBuffer(H))return H.length;if(ArrayBuffer.isView(H)||F(H,ArrayBuffer))return H.byteLength;if("string"!==typeof H)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof H);var Q=H.length,Z=2<arguments.length&&
!0===arguments[2];if(!Z&&0===Q)return 0;for(var ca=!1;;)switch(M){case "ascii":case "latin1":case "binary":return Q;case "utf8":case "utf-8":return D(H).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*Q;case "hex":return Q>>>1;case "base64":return v(H).length;default:if(ca)return Z?-1:D(H).length;M=(""+M).toLowerCase();ca=!0}}function d(H,M,Q){var Z=!1;if(void 0===M||0>M)M=0;if(M>this.length)return"";if(void 0===Q||Q>this.length)Q=this.length;if(0>=Q)return"";Q>>>=0;M>>>=0;
if(Q<=M)return"";for(H||(H="utf8");;)switch(H){case "hex":H=M;M=Q;Q=this.length;if(!H||0>H)H=0;if(!M||0>M||M>Q)M=Q;Z="";for(Q=H;Q<M;++Q)H=Z,Z=this[Q],Z=16>Z?"0"+Z.toString(16):Z.toString(16),Z=H+Z;return Z;case "utf8":case "utf-8":return t(this,M,Q);case "ascii":H="";for(Q=Math.min(this.length,Q);M<Q;++M)H+=String.fromCharCode(this[M]&127);return H;case "latin1":case "binary":H="";for(Q=Math.min(this.length,Q);M<Q;++M)H+=String.fromCharCode(this[M]);return H;case "base64":return M=0===M&&Q===this.length?
J.fromByteArray(this):J.fromByteArray(this.slice(M,Q)),M;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":M=this.slice(M,Q);Q="";for(H=0;H<M.length;H+=2)Q+=String.fromCharCode(M[H]+256*M[H+1]);return Q;default:if(Z)throw new TypeError("Unknown encoding: "+H);H=(H+"").toLowerCase();Z=!0}}function e(H,M,Q){var Z=H[M];H[M]=H[Q];H[Q]=Z}function f(H,M,Q,Z,ca){if(0===H.length)return-1;"string"===typeof Q?(Z=Q,Q=0):2147483647<Q?Q=2147483647:-2147483648>Q&&(Q=-2147483648);Q=+Q;Q!==Q&&(Q=ca?0:H.length-
1);0>Q&&(Q=H.length+Q);if(Q>=H.length){if(ca)return-1;Q=H.length-1}else if(0>Q)if(ca)Q=0;else return-1;"string"===typeof M&&(M=k.from(M,Z));if(k.isBuffer(M))return 0===M.length?-1:q(H,M,Q,Z,ca);if("number"===typeof M)return M&=255,"function"===typeof Uint8Array.prototype.indexOf?ca?Uint8Array.prototype.indexOf.call(H,M,Q):Uint8Array.prototype.lastIndexOf.call(H,M,Q):q(H,[M],Q,Z,ca);throw new TypeError("val must be string, number or Buffer");}function q(H,M,Q,Z,ca){function W(Y,ba){return 1===T?Y[ba]:
Y.readUInt16BE(ba*T)}var T=1,U=H.length,ha=M.length;if(void 0!==Z&&(Z=String(Z).toLowerCase(),"ucs2"===Z||"ucs-2"===Z||"utf16le"===Z||"utf-16le"===Z)){if(2>H.length||2>M.length)return-1;T=2;U/=2;ha/=2;Q/=2}if(ca)for(Z=-1;Q<U;Q++)if(W(H,Q)===W(M,-1===Z?0:Q-Z)){if(-1===Z&&(Z=Q),Q-Z+1===ha)return Z*T}else-1!==Z&&(Q-=Q-Z),Z=-1;else for(Q+ha>U&&(Q=U-ha);0<=Q;Q--){U=!0;for(Z=0;Z<ha;Z++)if(W(H,Q+Z)!==W(M,Z)){U=!1;break}if(U)return Q}return-1}function t(H,M,Q){Q=Math.min(H.length,Q);for(var Z=[];M<Q;){var ca=
H[M],W=null,T=239<ca?4:223<ca?3:191<ca?2:1;if(M+T<=Q)switch(T){case 1:128>ca&&(W=ca);break;case 2:var U=H[M+1];128===(U&192)&&(ca=(ca&31)<<6|U&63,127<ca&&(W=ca));break;case 3:U=H[M+1];var ha=H[M+2];128===(U&192)&&128===(ha&192)&&(ca=(ca&15)<<12|(U&63)<<6|ha&63,2047<ca&&(55296>ca||57343<ca)&&(W=ca));break;case 4:U=H[M+1];ha=H[M+2];var Y=H[M+3];128===(U&192)&&128===(ha&192)&&128===(Y&192)&&(ca=(ca&15)<<18|(U&63)<<12|(ha&63)<<6|Y&63,65535<ca&&1114112>ca&&(W=ca))}null===W?(W=65533,T=1):65535<W&&(W-=65536,
Z.push(W>>>10&1023|55296),W=56320|W&1023);Z.push(W);M+=T}H=Z.length;if(H<=I)Z=String.fromCharCode.apply(String,Z);else{Q="";for(M=0;M<H;)Q+=String.fromCharCode.apply(String,Z.slice(M,M+=I));Z=Q}return Z}function w(H,M,Q){if(0!==H%1||0>H)throw new RangeError("offset is not uint");if(H+M>Q)throw new RangeError("Trying to access beyond buffer length");}function x(H,M,Q,Z,ca,W){if(!k.isBuffer(H))throw new TypeError('"buffer" argument must be a Buffer instance');if(M>ca||M<W)throw new RangeError('"value" argument is out of bounds');
if(Q+Z>H.length)throw new RangeError("Index out of range");}function z(H,M,Q,Z,ca,W){if(Q+Z>H.length)throw new RangeError("Index out of range");if(0>Q)throw new RangeError("Index out of range");}function B(H,M,Q,Z,ca){M=+M;Q>>>=0;ca||z(H,M,Q,4,3.4028234663852886E38,-3.4028234663852886E38);K.write(H,M,Q,Z,23,4);return Q+4}function A(H,M,Q,Z,ca){M=+M;Q>>>=0;ca||z(H,M,Q,8,1.7976931348623157E308,-1.7976931348623157E308);K.write(H,M,Q,Z,52,8);return Q+8}function D(H,M){M=M||Infinity;for(var Q,Z=H.length,
ca=null,W=[],T=0;T<Z;++T){Q=H.charCodeAt(T);if(55295<Q&&57344>Q){if(!ca){if(56319<Q){-1<(M-=3)&&W.push(239,191,189);continue}else if(T+1===Z){-1<(M-=3)&&W.push(239,191,189);continue}ca=Q;continue}if(56320>Q){-1<(M-=3)&&W.push(239,191,189);ca=Q;continue}Q=(ca-55296<<10|Q-56320)+65536}else ca&&-1<(M-=3)&&W.push(239,191,189);ca=null;if(128>Q){if(0>--M)break;W.push(Q)}else if(2048>Q){if(0>(M-=2))break;W.push(Q>>6|192,Q&63|128)}else if(65536>Q){if(0>(M-=3))break;W.push(Q>>12|224,Q>>6&63|128,Q&63|128)}else if(1114112>
Q){if(0>(M-=4))break;W.push(Q>>18|240,Q>>12&63|128,Q>>6&63|128,Q&63|128)}else throw Error("Invalid code point");}return W}function C(H){for(var M=[],Q=0;Q<H.length;++Q)M.push(H.charCodeAt(Q)&255);return M}function v(H){var M=J,Q=M.toByteArray;H=H.split("\x3d")[0];H=H.trim().replace(L,"");if(2>H.length)H="";else for(;0!==H.length%4;)H+="\x3d";return Q.call(M,H)}function y(H,M,Q,Z){for(var ca=0;ca<Z&&!(ca+Q>=M.length||ca>=H.length);++ca)M[ca+Q]=H[ca];return ca}function F(H,M){return H instanceof M||
null!=H&&null!=H.constructor&&null!=H.constructor.name&&H.constructor.name===M.name}var J=b("base64-js"),K=b("ieee754");G.Buffer=k;G.SlowBuffer=function(H){+H!=H&&(H=0);return k.alloc(+H)};G.INSPECT_MAX_BYTES=50;var O=2147483647;G.kMaxLength=O;k.TYPED_ARRAY_SUPPORT=function(){try{var H=new Uint8Array(1);H.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return 42===H.foo()}catch(M){return!1}}();k.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||
console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");Object.defineProperty(k.prototype,"parent",{enumerable:!0,get:function(){if(k.isBuffer(this))return this.buffer}});Object.defineProperty(k.prototype,"offset",{enumerable:!0,get:function(){if(k.isBuffer(this))return this.byteOffset}});"undefined"!==typeof Symbol&&null!=Symbol.species&&k[Symbol.species]===k&&Object.defineProperty(k,Symbol.species,
{value:null,configurable:!0,enumerable:!1,writable:!1});k.poolSize=8192;k.from=function(H,M,Q){return m(H,M,Q)};k.prototype.__proto__=Uint8Array.prototype;k.__proto__=Uint8Array;k.alloc=function(H,M,Q){a(H);H=0>=H?n(H):void 0!==M?"string"===typeof Q?n(H).fill(M,Q):n(H).fill(M):n(H);return H};k.allocUnsafe=function(H){return g(H)};k.allocUnsafeSlow=function(H){return g(H)};k.isBuffer=function(H){return null!=H&&!0===H._isBuffer&&H!==k.prototype};k.compare=function(H,M){F(H,Uint8Array)&&(H=k.from(H,
H.offset,H.byteLength));F(M,Uint8Array)&&(M=k.from(M,M.offset,M.byteLength));if(!k.isBuffer(H)||!k.isBuffer(M))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(H===M)return 0;for(var Q=H.length,Z=M.length,ca=0,W=Math.min(Q,Z);ca<W;++ca)if(H[ca]!==M[ca]){Q=H[ca];Z=M[ca];break}return Q<Z?-1:Z<Q?1:0};k.isEncoding=function(H){switch(String(H).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;
default:return!1}};k.concat=function(H,M){if(!Array.isArray(H))throw new TypeError('"list" argument must be an Array of Buffers');if(0===H.length)return k.alloc(0);var Q;if(void 0===M)for(Q=M=0;Q<H.length;++Q)M+=H[Q].length;M=k.allocUnsafe(M);var Z=0;for(Q=0;Q<H.length;++Q){var ca=H[Q];F(ca,Uint8Array)&&(ca=k.from(ca));if(!k.isBuffer(ca))throw new TypeError('"list" argument must be an Array of Buffers');ca.copy(M,Z);Z+=ca.length}return M};k.byteLength=c;k.prototype._isBuffer=!0;k.prototype.swap16=
function(){var H=this.length;if(0!==H%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var M=0;M<H;M+=2)e(this,M,M+1);return this};k.prototype.swap32=function(){var H=this.length;if(0!==H%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var M=0;M<H;M+=4)e(this,M,M+3),e(this,M+1,M+2);return this};k.prototype.swap64=function(){var H=this.length;if(0!==H%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var M=0;M<H;M+=8)e(this,M,M+7),
e(this,M+1,M+6),e(this,M+2,M+5),e(this,M+3,M+4);return this};k.prototype.toString=function(){var H=this.length;return 0===H?"":0===arguments.length?t(this,0,H):d.apply(this,arguments)};k.prototype.toLocaleString=k.prototype.toString;k.prototype.equals=function(H){if(!k.isBuffer(H))throw new TypeError("Argument must be a Buffer");return this===H?!0:0===k.compare(this,H)};k.prototype.inspect=function(){var H=G.INSPECT_MAX_BYTES;var M=this.toString("hex",0,H).replace(/(.{2})/g,"$1 ").trim();this.length>
H&&(M+=" ... ");return"\x3cBuffer "+M+"\x3e"};k.prototype.compare=function(H,M,Q,Z,ca){F(H,Uint8Array)&&(H=k.from(H,H.offset,H.byteLength));if(!k.isBuffer(H))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof H);void 0===M&&(M=0);void 0===Q&&(Q=H?H.length:0);void 0===Z&&(Z=0);void 0===ca&&(ca=this.length);if(0>M||Q>H.length||0>Z||ca>this.length)throw new RangeError("out of range index");if(Z>=ca&&M>=Q)return 0;if(Z>=ca)return-1;if(M>=Q)return 1;
M>>>=0;Q>>>=0;Z>>>=0;ca>>>=0;if(this===H)return 0;var W=ca-Z,T=Q-M,U=Math.min(W,T);Z=this.slice(Z,ca);H=H.slice(M,Q);for(M=0;M<U;++M)if(Z[M]!==H[M]){W=Z[M];T=H[M];break}return W<T?-1:T<W?1:0};k.prototype.includes=function(H,M,Q){return-1!==this.indexOf(H,M,Q)};k.prototype.indexOf=function(H,M,Q){return f(this,H,M,Q,!0)};k.prototype.lastIndexOf=function(H,M,Q){return f(this,H,M,Q,!1)};k.prototype.write=function(H,M,Q,Z){if(void 0===M)Z="utf8",Q=this.length,M=0;else if(void 0===Q&&"string"===typeof M)Z=
M,Q=this.length,M=0;else if(isFinite(M))M>>>=0,isFinite(Q)?(Q>>>=0,void 0===Z&&(Z="utf8")):(Z=Q,Q=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var ca=this.length-M;if(void 0===Q||Q>ca)Q=ca;if(0<H.length&&(0>Q||0>M)||M>this.length)throw new RangeError("Attempt to write outside buffer bounds");Z||(Z="utf8");for(ca=!1;;)switch(Z){case "hex":a:{M=Number(M)||0;Z=this.length-M;Q?(Q=Number(Q),Q>Z&&(Q=Z)):Q=Z;Z=H.length;Q>Z/2&&(Q=Z/2);for(Z=0;Z<Q;++Z){ca=
parseInt(H.substr(2*Z,2),16);if(ca!==ca){H=Z;break a}this[M+Z]=ca}H=Z}return H;case "utf8":case "utf-8":return y(D(H,this.length-M),this,M,Q);case "ascii":return y(C(H),this,M,Q);case "latin1":case "binary":return y(C(H),this,M,Q);case "base64":return y(v(H),this,M,Q);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":Z=H;ca=this.length-M;for(var W=[],T=0;T<Z.length&&!(0>(ca-=2));++T){var U=Z.charCodeAt(T);H=U>>8;U%=256;W.push(U);W.push(H)}return y(W,this,M,Q);default:if(ca)throw new TypeError("Unknown encoding: "+
Z);Z=(""+Z).toLowerCase();ca=!0}};k.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;k.prototype.slice=function(H,M){var Q=this.length;H=~~H;M=void 0===M?Q:~~M;0>H?(H+=Q,0>H&&(H=0)):H>Q&&(H=Q);0>M?(M+=Q,0>M&&(M=0)):M>Q&&(M=Q);M<H&&(M=H);H=this.subarray(H,M);H.__proto__=k.prototype;return H};k.prototype.readUIntLE=function(H,M,Q){H>>>=0;M>>>=0;Q||w(H,M,this.length);Q=this[H];for(var Z=1,ca=0;++ca<M&&(Z*=256);)Q+=this[H+ca]*Z;return Q};
k.prototype.readUIntBE=function(H,M,Q){H>>>=0;M>>>=0;Q||w(H,M,this.length);Q=this[H+--M];for(var Z=1;0<M&&(Z*=256);)Q+=this[H+--M]*Z;return Q};k.prototype.readUInt8=function(H,M){H>>>=0;M||w(H,1,this.length);return this[H]};k.prototype.readUInt16LE=function(H,M){H>>>=0;M||w(H,2,this.length);return this[H]|this[H+1]<<8};k.prototype.readUInt16BE=function(H,M){H>>>=0;M||w(H,2,this.length);return this[H]<<8|this[H+1]};k.prototype.readUInt32LE=function(H,M){H>>>=0;M||w(H,4,this.length);return(this[H]|
this[H+1]<<8|this[H+2]<<16)+16777216*this[H+3]};k.prototype.readUInt32BE=function(H,M){H>>>=0;M||w(H,4,this.length);return 16777216*this[H]+(this[H+1]<<16|this[H+2]<<8|this[H+3])};k.prototype.readIntLE=function(H,M,Q){H>>>=0;M>>>=0;Q||w(H,M,this.length);Q=this[H];for(var Z=1,ca=0;++ca<M&&(Z*=256);)Q+=this[H+ca]*Z;Q>=128*Z&&(Q-=Math.pow(2,8*M));return Q};k.prototype.readIntBE=function(H,M,Q){H>>>=0;M>>>=0;Q||w(H,M,this.length);Q=M;for(var Z=1,ca=this[H+--Q];0<Q&&(Z*=256);)ca+=this[H+--Q]*Z;ca>=128*
Z&&(ca-=Math.pow(2,8*M));return ca};k.prototype.readInt8=function(H,M){H>>>=0;M||w(H,1,this.length);return this[H]&128?-1*(255-this[H]+1):this[H]};k.prototype.readInt16LE=function(H,M){H>>>=0;M||w(H,2,this.length);H=this[H]|this[H+1]<<8;return H&32768?H|4294901760:H};k.prototype.readInt16BE=function(H,M){H>>>=0;M||w(H,2,this.length);H=this[H+1]|this[H]<<8;return H&32768?H|4294901760:H};k.prototype.readInt32LE=function(H,M){H>>>=0;M||w(H,4,this.length);return this[H]|this[H+1]<<8|this[H+2]<<16|this[H+
3]<<24};k.prototype.readInt32BE=function(H,M){H>>>=0;M||w(H,4,this.length);return this[H]<<24|this[H+1]<<16|this[H+2]<<8|this[H+3]};k.prototype.readFloatLE=function(H,M){H>>>=0;M||w(H,4,this.length);return K.read(this,H,!0,23,4)};k.prototype.readFloatBE=function(H,M){H>>>=0;M||w(H,4,this.length);return K.read(this,H,!1,23,4)};k.prototype.readDoubleLE=function(H,M){H>>>=0;M||w(H,8,this.length);return K.read(this,H,!0,52,8)};k.prototype.readDoubleBE=function(H,M){H>>>=0;M||w(H,8,this.length);return K.read(this,
H,!1,52,8)};k.prototype.writeUIntLE=function(H,M,Q,Z){H=+H;M>>>=0;Q>>>=0;Z||x(this,H,M,Q,Math.pow(2,8*Q)-1,0);Z=1;var ca=0;for(this[M]=H&255;++ca<Q&&(Z*=256);)this[M+ca]=H/Z&255;return M+Q};k.prototype.writeUIntBE=function(H,M,Q,Z){H=+H;M>>>=0;Q>>>=0;Z||x(this,H,M,Q,Math.pow(2,8*Q)-1,0);Z=Q-1;var ca=1;for(this[M+Z]=H&255;0<=--Z&&(ca*=256);)this[M+Z]=H/ca&255;return M+Q};k.prototype.writeUInt8=function(H,M,Q){H=+H;M>>>=0;Q||x(this,H,M,1,255,0);this[M]=H&255;return M+1};k.prototype.writeUInt16LE=function(H,
M,Q){H=+H;M>>>=0;Q||x(this,H,M,2,65535,0);this[M]=H&255;this[M+1]=H>>>8;return M+2};k.prototype.writeUInt16BE=function(H,M,Q){H=+H;M>>>=0;Q||x(this,H,M,2,65535,0);this[M]=H>>>8;this[M+1]=H&255;return M+2};k.prototype.writeUInt32LE=function(H,M,Q){H=+H;M>>>=0;Q||x(this,H,M,4,4294967295,0);this[M+3]=H>>>24;this[M+2]=H>>>16;this[M+1]=H>>>8;this[M]=H&255;return M+4};k.prototype.writeUInt32BE=function(H,M,Q){H=+H;M>>>=0;Q||x(this,H,M,4,4294967295,0);this[M]=H>>>24;this[M+1]=H>>>16;this[M+2]=H>>>8;this[M+
3]=H&255;return M+4};k.prototype.writeIntLE=function(H,M,Q,Z){H=+H;M>>>=0;Z||(Z=Math.pow(2,8*Q-1),x(this,H,M,Q,Z-1,-Z));Z=0;var ca=1,W=0;for(this[M]=H&255;++Z<Q&&(ca*=256);)0>H&&0===W&&0!==this[M+Z-1]&&(W=1),this[M+Z]=(H/ca>>0)-W&255;return M+Q};k.prototype.writeIntBE=function(H,M,Q,Z){H=+H;M>>>=0;Z||(Z=Math.pow(2,8*Q-1),x(this,H,M,Q,Z-1,-Z));Z=Q-1;var ca=1,W=0;for(this[M+Z]=H&255;0<=--Z&&(ca*=256);)0>H&&0===W&&0!==this[M+Z+1]&&(W=1),this[M+Z]=(H/ca>>0)-W&255;return M+Q};k.prototype.writeInt8=function(H,
M,Q){H=+H;M>>>=0;Q||x(this,H,M,1,127,-128);0>H&&(H=255+H+1);this[M]=H&255;return M+1};k.prototype.writeInt16LE=function(H,M,Q){H=+H;M>>>=0;Q||x(this,H,M,2,32767,-32768);this[M]=H&255;this[M+1]=H>>>8;return M+2};k.prototype.writeInt16BE=function(H,M,Q){H=+H;M>>>=0;Q||x(this,H,M,2,32767,-32768);this[M]=H>>>8;this[M+1]=H&255;return M+2};k.prototype.writeInt32LE=function(H,M,Q){H=+H;M>>>=0;Q||x(this,H,M,4,2147483647,-2147483648);this[M]=H&255;this[M+1]=H>>>8;this[M+2]=H>>>16;this[M+3]=H>>>24;return M+
4};k.prototype.writeInt32BE=function(H,M,Q){H=+H;M>>>=0;Q||x(this,H,M,4,2147483647,-2147483648);0>H&&(H=4294967295+H+1);this[M]=H>>>24;this[M+1]=H>>>16;this[M+2]=H>>>8;this[M+3]=H&255;return M+4};k.prototype.writeFloatLE=function(H,M,Q){return B(this,H,M,!0,Q)};k.prototype.writeFloatBE=function(H,M,Q){return B(this,H,M,!1,Q)};k.prototype.writeDoubleLE=function(H,M,Q){return A(this,H,M,!0,Q)};k.prototype.writeDoubleBE=function(H,M,Q){return A(this,H,M,!1,Q)};k.prototype.copy=function(H,M,Q,Z){if(!k.isBuffer(H))throw new TypeError("argument should be a Buffer");
Q||(Q=0);Z||0===Z||(Z=this.length);M>=H.length&&(M=H.length);M||(M=0);0<Z&&Z<Q&&(Z=Q);if(Z===Q||0===H.length||0===this.length)return 0;if(0>M)throw new RangeError("targetStart out of bounds");if(0>Q||Q>=this.length)throw new RangeError("Index out of range");if(0>Z)throw new RangeError("sourceEnd out of bounds");Z>this.length&&(Z=this.length);H.length-M<Z-Q&&(Z=H.length-M+Q);var ca=Z-Q;if(this===H&&"function"===typeof Uint8Array.prototype.copyWithin)this.copyWithin(M,Q,Z);else if(this===H&&Q<M&&M<
Z)for(Z=ca-1;0<=Z;--Z)H[Z+M]=this[Z+Q];else Uint8Array.prototype.set.call(H,this.subarray(Q,Z),M);return ca};k.prototype.fill=function(H,M,Q,Z){if("string"===typeof H){"string"===typeof M?(Z=M,M=0,Q=this.length):"string"===typeof Q&&(Z=Q,Q=this.length);if(void 0!==Z&&"string"!==typeof Z)throw new TypeError("encoding must be a string");if("string"===typeof Z&&!k.isEncoding(Z))throw new TypeError("Unknown encoding: "+Z);if(1===H.length){var ca=H.charCodeAt(0);if("utf8"===Z&&128>ca||"latin1"===Z)H=ca}}else"number"===
typeof H&&(H&=255);if(0>M||this.length<M||this.length<Q)throw new RangeError("Out of range index");if(Q<=M)return this;M>>>=0;Q=void 0===Q?this.length:Q>>>0;H||(H=0);if("number"===typeof H)for(Z=M;Z<Q;++Z)this[Z]=H;else{ca=k.isBuffer(H)?H:k.from(H,Z);var W=ca.length;if(0===W)throw new TypeError('The value "'+H+'" is invalid for argument "value"');for(Z=0;Z<Q-M;++Z)this[Z+M]=ca[Z%W]}return this};var L=/[^+/0-9A-Za-z-_]/g}).call(this)}).call(this,b("buffer").Buffer)},{"base64-js":86,buffer:117,ieee754:445}],
118:[function(b,N,G){function p(r){return[Math.min(r[0],r[1]),Math.max(r[0],r[1])]}function n(r,l){return r[0]-l[0]||r[1]-l[1]}function k(r,l,c){return l in r?r[l]:c}var m=b("./lib/monotone"),a=b("./lib/triangulation"),g=b("./lib/delaunay"),h=b("./lib/filter");N.exports=function(r,l,c){Array.isArray(l)?(c=c||{},l=l||[]):(c=l||{},l=[]);var d=!!k(c,"delaunay",!0),e=!!k(c,"interior",!0),f=!!k(c,"exterior",!0);c=!!k(c,"infinity",!1);if(!e&&!f||0===r.length)return[];var q=m(r,l);if(d||e!==f||c){l=a(r.length,
l.map(p).sort(n));for(var t=0;t<q.length;++t){var w=q[t];l.addTriangle(w[0],w[1],w[2])}d&&g(r,l);return f?e?c?h(l,0,c):l.cells():h(l,1,c):h(l,-1)}return q}},{"./lib/delaunay":119,"./lib/filter":120,"./lib/monotone":121,"./lib/triangulation":122}],119:[function(b,N,G){function p(k,m,a,g,h,r){var l=m.opposite(g,h);if(!(0>l)){if(h<g){var c=g;g=h;h=c;c=r;r=l;l=c}m.isConstraint(g,h)||0>n(k[g],k[h],k[r],k[l])&&a.push(g,h)}}var n=b("robust-in-sphere")[4];b("binary-search-bounds");N.exports=function(k,m){for(var a=
[],g=k.length,h=m.stars,r=0;r<g;++r)for(var l=h[r],c=1;c<l.length;c+=2){var d=l[c];if(!(d<r||m.isConstraint(r,d))){for(var e=l[c-1],f=-1,q=1;q<l.length;q+=2)if(l[q-1]===d){f=l[q];break}0>f||0>n(k[r],k[d],k[e],k[f])&&a.push(r,d)}}for(;0<a.length;){d=a.pop();r=a.pop();f=e=-1;l=h[r];for(g=1;g<l.length;g+=2)c=l[g-1],q=l[g],c===d?f=q:q===d&&(e=c);0>e||0>f||0<=n(k[r],k[d],k[e],k[f])||(m.flip(r,d),p(k,m,a,e,r,f),p(k,m,a,r,f,e),p(k,m,a,f,d,e),p(k,m,a,d,e,f))}}},{"binary-search-bounds":103,"robust-in-sphere":546}],
120:[function(b,N,G){function p(m,a,g,h,r,l,c){this.cells=m;this.neighbor=a;this.flags=h;this.constraint=g;this.active=r;this.next=l;this.boundary=c}function n(m,a){return m[0]-a[0]||m[1]-a[1]||m[2]-a[2]}var k=b("binary-search-bounds");N.exports=function(m,a,g){for(var h=m.cells(),r=h.length,l=0;l<r;++l){var c=h[l],d=c[0],e=c[1],f=c[2];e<f?e<d&&(c[0]=e,c[1]=f,c[2]=d):f<d&&(c[0]=f,c[1]=d,c[2]=e)}h.sort(n);var q=Array(r);for(l=0;l<q.length;++l)q[l]=0;var t=[],w=[],x=Array(3*r),z=Array(3*r),B=null;g&&
(B=[]);f=new p(h,x,z,q,t,w,B);for(l=0;l<r;++l){c=h[l];for(var A=0;3>A;++A){d=c[A];e=c[(A+1)%3];var D=x[3*l+A]=f.locate(e,d,m.opposite(e,d)),C=z[3*l+A]=m.isConstraint(d,e);0>D&&(C?w.push(l):(t.push(l),q[l]=1),g&&B.push([e,d,-1]))}}if(0===a)return g?f.cells.concat(f.boundary):f.cells;r=1;l=f.active;c=f.next;m=f.flags;h=f.cells;d=f.constraint;for(e=f.neighbor;0<l.length||0<c.length;){for(;0<l.length;)if(q=l.pop(),m[q]!==-r)for(m[q]=r,t=0;3>t;++t)w=e[3*q+t],0<=w&&0===m[w]&&(d[3*q+t]?c.push(w):(l.push(w),
m[w]=r));q=c;c=l;l=q;c.length=0;r=-r}for(l=r=0;l<h.length;++l)m[l]===a&&(h[r++]=h[l]);h.length=r;return g?h.concat(f.boundary):h};p.prototype.locate=function(){var m=[0,0,0];return function(a,g,h){var r=a,l=g,c=h;g<h?g<a&&(r=g,l=h,c=a):h<a&&(r=h,l=a,c=g);if(0>r)return-1;m[0]=r;m[1]=l;m[2]=c;return k.eq(this.cells,m,n)}}()},{"binary-search-bounds":103}],121:[function(b,N,G){function p(r,l,c,d,e){this.a=r;this.b=l;this.idx=c;this.lowerIds=d;this.upperIds=e}function n(r,l,c,d){this.a=r;this.b=l;this.type=
c;this.idx=d}function k(r,l){var c=r.a[0]-l.a[0]||r.a[1]-l.a[1]||r.type-l.type;return c||0!==r.type&&(c=h(r.a,r.b,l.b))?c:r.idx-l.idx}function m(r,l){return h(r.a,r.b,l)}function a(r,l){var c;return(c=r.a[0]<l.a[0]?h(r.a,r.b,l.a):h(l.b,l.a,r.a))?c:(c=l.b[0]<r.b[0]?h(r.a,r.b,l.b):h(l.b,l.a,r.b))||r.idx-l.idx}var g=b("binary-search-bounds"),h=b("robust-orientation")[3];N.exports=function(r,l){for(var c=r.length,d=l.length,e=[],f=0;f<c;++f)e.push(new n(r[f],null,0,f));for(f=0;f<d;++f){var q=l[f];c=r[q[0]];
q=r[q[1]];c[0]<q[0]?e.push(new n(c,q,2,f),new n(q,c,1,f)):c[0]>q[0]&&e.push(new n(q,c,2,f),new n(c,q,1,f))}e.sort(k);f=e[0].a[0]-(1+Math.abs(e[0].a[0]))*Math.pow(2,-52);l=[new p([f,1],[f,0],-1,[],[],[],[])];d=[];f=0;for(c=e.length;f<c;++f){var t=e[f];q=t.type;if(0===q){q=d;var w=l,x=r,z=t.a;t=t.idx;for(var B=g.lt(w,z,m),A=g.gt(w,z,m);B<A;++B){for(var D=w[B],C=D.lowerIds,v=C.length;1<v&&0<h(x[C[v-2]],x[C[v-1]],z);)q.push([C[v-1],C[v-2],t]),--v;C.length=v;C.push(t);D=D.upperIds;for(v=D.length;1<v&&
0>h(x[D[v-2]],x[D[v-1]],z);)q.push([D[v-2],D[v-1],t]),--v;D.length=v;D.push(t)}}else 2===q?(q=l,w=t,x=g.le(q,w,a),z=q[x],t=z.upperIds,A=t[t.length-1],z.upperIds=[A],q.splice(x+1,0,new p(w.a,w.b,w.idx,[A],t))):(q=l,w=t,x=w.a,w.a=w.b,w.b=x,w=g.eq(q,w,a),q[w-1].upperIds=q[w].upperIds,q.splice(w,1))}return d}},{"binary-search-bounds":103,"robust-orientation":548}],122:[function(b,N,G){function p(m,a){this.stars=m;this.edges=a}function n(m,a,g){for(var h=1,r=m.length;h<r;h+=2)if(m[h-1]===a&&m[h]===g){m[h-
1]=m[r-2];m[h]=m[r-1];m.length=r-2;break}}var k=b("binary-search-bounds");N.exports=function(m,a){for(var g=Array(m),h=0;h<m;++h)g[h]=[];return new p(g,a)};b=p.prototype;b.isConstraint=function(){function m(g,h){return g[0]-h[0]||g[1]-h[1]}var a=[0,0];return function(g,h){a[0]=Math.min(g,h);a[1]=Math.max(g,h);return 0<=k.eq(this.edges,a,m)}}();b.removeTriangle=function(m,a,g){var h=this.stars;n(h[m],a,g);n(h[a],g,m);n(h[g],m,a)};b.addTriangle=function(m,a,g){var h=this.stars;h[m].push(a,g);h[a].push(g,
m);h[g].push(m,a)};b.opposite=function(m,a){a=this.stars[a];for(var g=1,h=a.length;g<h;g+=2)if(a[g]===m)return a[g-1];return-1};b.flip=function(m,a){var g=this.opposite(m,a),h=this.opposite(a,m);this.removeTriangle(m,a,g);this.removeTriangle(a,m,h);this.addTriangle(m,h,g);this.addTriangle(a,g,h)};b.edges=function(){for(var m=this.stars,a=[],g=0,h=m.length;g<h;++g)for(var r=m[g],l=0,c=r.length;l<c;l+=2)a.push([r[l],r[l+1]]);return a};b.cells=function(){for(var m=this.stars,a=[],g=0,h=m.length;g<h;++g)for(var r=
m[g],l=0,c=r.length;l<c;l+=2){var d=r[l],e=r[l+1];g<Math.min(d,e)&&a.push([g,d,e])}return a}},{"binary-search-bounds":103}],123:[function(b,N,G){N.exports=function(p){for(var n=1,k=1;k<p.length;++k)for(var m=0;m<k;++m)if(p[k]<p[m])n=-n;else if(p[m]===p[k])return 0;return n}},{}],124:[function(b,N,G){function p(g,h){for(var r=0,l=g.length,c=0;c<l;++c)r+=g[c]*h[c];return r}function n(g){var h=g.length;if(0===h)return[];for(var r=m([g.length+1,g.length+1],1),l=m([g.length+1],1),c=r[h][h]=0;c<h;++c){for(var d=
0;d<=c;++d)r[d][c]=r[c][d]=2*p(g[c],g[d]);l[c]=p(g[c],g[c])}g=a(r,l);r=0;l=g[h+1];for(c=0;c<l.length;++c)r+=l[c];var e=Array(h);for(c=0;c<h;++c){l=g[c];var f=0;for(d=0;d<l.length;++d)f+=l[d];e[c]=f/r}return e}function k(g){if(0===g.length)return[];for(var h=g[0].length,r=m([h]),l=n(g),c=0;c<g.length;++c)for(var d=0;d<h;++d)r[d]+=g[c][d]*l[c];return r}var m=b("dup"),a=b("robust-linear-solve");k.barycenetric=n;N.exports=k},{dup:185,"robust-linear-solve":547}],125:[function(b,N,G){N.exports=function(n){for(var k=
p(n),m=0,a=0;a<n.length;++a)for(var g=n[a],h=0;h<k.length;++h)m+=Math.pow(g[h]-k[h],2);return Math.sqrt(m/n.length)};var p=b("circumcenter")},{circumcenter:124}],126:[function(b,N,G){N.exports=function(p,n,k){return n<k?p<n?n:p>k?k:p:p<k?k:p>n?n:p}},{}],127:[function(b,N,G){function p(A){A=w(A);return[z(A,-Infinity),z(A,Infinity)]}function n(A){for(var D=Array(A.length),C=0;C<A.length;++C){var v=A[C];D[C]=[z(v[0],-Infinity),z(v[1],-Infinity),z(v[0],Infinity),z(v[1],Infinity)]}return D}function k(A,
D,C){var v=[];e(C,function(y,F){var J=D[y],K=D[F];J[0]!==K[0]&&J[0]!==K[1]&&J[1]!==K[0]&&J[1]!==K[1]&&f(A[J[0]],A[J[1]],A[K[0]],A[K[1]])&&v.push([y,F])});return v}function m(A,D,C,v){var y=[];e(C,v,function(F,J){var K=D[F];if(K[0]!==J&&K[1]!==J){var O=A[J];f(A[K[0]],A[K[1]],O,O)&&y.push([F,J])}});return y}function a(A,D,C,v,y){var F,J=A.map(function(Z){return[q(Z[0]),q(Z[1])]});for(F=0;F<C.length;++F){var K=C[F];var O=K[0];K=K[1];var I=D[O],L=D[K];if(I=B(x(A[I[0]]),x(A[I[1]]),x(A[L[0]]),x(A[L[1]])))L=
A.length,A.push([w(I[0]),w(I[1])]),J.push(I),v.push([O,L],[K,L])}v.sort(function(Z,ca){if(Z[0]!==ca[0])return Z[0]-ca[0];Z=J[Z[1]];ca=J[ca[1]];return t(Z[0],ca[0])||t(Z[1],ca[1])});for(F=v.length-1;0<=F;--F){K=v[F];O=K[0];I=D[O];L=I[0];C=I[1];var H=A[L],M=A[C];0>(H[0]-M[0]||H[1]-M[1])&&(H=L,L=C,C=H);I[0]=L;L=I[1]=K[1];var Q;for(y&&(Q=I[2]);0<F&&v[F-1][0]===O;)K=v[--F],K=K[1],y?D.push([L,K,Q]):D.push([L,K]),L=K;y?D.push([L,C,Q]):D.push([L,C])}return J}function g(A,D,C){C=D.length;for(var v=new d(C),
y=[],F=0;F<D.length;++F){var J=D[F],K=p(J[0]);J=p(J[1]);y.push([z(K[0],-Infinity),z(J[0],-Infinity),z(K[1],Infinity),z(J[1],Infinity)])}e(y,function(O,I){v.link(O,I)});K=!0;D=Array(C);for(F=0;F<C;++F)y=v.find(F),y!==F&&(K=!1,A[y]=[Math.min(A[F][0],A[y][0]),Math.min(A[F][1],A[y][1])]);if(K)return null;for(F=K=0;F<C;++F)y=v.find(F),y===F?(D[F]=K,A[K++]=A[F]):D[F]=-1;A.length=K;for(F=0;F<C;++F)0>D[F]&&(D[F]=D[v.find(F)]);return D}function h(A,D){return A[0]-D[0]||A[1]-D[1]}function r(A,D){var C=A[0]-
D[0]||A[1]-D[1];return C?C:A[2]<D[2]?-1:A[2]>D[2]?1:0}function l(A,D,C){if(0!==A.length){if(D)for(var v=0;v<A.length;++v){var y=A[v],F=D[y[0]],J=D[y[1]];y[0]=Math.min(F,J);y[1]=Math.max(F,J)}else for(v=0;v<A.length;++v)y=A[v],F=y[0],J=y[1],y[0]=Math.min(F,J),y[1]=Math.max(F,J);C?A.sort(r):A.sort(h);for(v=D=1;v<A.length;++v)if(y=A[v-1],F=A[v],F[0]!==y[0]||F[1]!==y[1]||C&&F[2]!==y[2])A[D++]=F;A.length=D}}function c(A,D,C){for(var v=Array(D.length),y=0;y<D.length;++y){var F=D[y],J=A[F[0]];F=A[F[1]];
v[y]=[z(Math.min(J[0],F[0]),-Infinity),z(Math.min(J[1],F[1]),-Infinity),z(Math.max(J[0],F[0]),Infinity),z(Math.max(J[1],F[1]),Infinity)]}y=k(A,D,v);J=n(A);v=m(A,D,v,J);F=a(A,D,y,v,C);A=g(A,F,J);l(D,A,C);return A?!0:0<y.length||0<v.length}N.exports=function(A,D,C){if(C){var v=D;for(var y=Array(D.length),F=0;F<D.length;++F){var J=D[F];y[F]=[J[0],J[1],C[F]]}D=y}F=D;J=!!C;y=g(A,[],n(A));l(F,y,J);for(y=!!y;c(A,D,!!C);)y=!0;if(C&&y)for(v.length=0,F=C.length=0;F<D.length;++F)J=D[F],v.push([J[0],J[1]]),C.push(J[2]);
return y};var d=b("union-find"),e=b("box-intersect"),f=b("robust-segment-intersect"),q=b("big-rat"),t=b("big-rat/cmp"),w=b("big-rat/to-float"),x=b("rat-vec"),z=b("nextafter"),B=b("./lib/rat-seg-intersect")},{"./lib/rat-seg-intersect":128,"big-rat":90,"big-rat/cmp":88,"big-rat/to-float":102,"box-intersect":108,nextafter:484,"rat-vec":532,"robust-segment-intersect":551,"union-find":618}],128:[function(b,N,G){function p(l,c){return m(n(l[0],c[1]),n(l[1],c[0]))}N.exports=function(l,c,d,e){c=g(c,l);var f=
g(e,d);e=p(c,f);if(0===a(e))return null;d=g(l,d);d=p(f,d);d=k(d,e);c=r(c,d);return h(l,c)};var n=b("big-rat/mul"),k=b("big-rat/div"),m=b("big-rat/sub"),a=b("big-rat/sign"),g=b("rat-vec/sub"),h=b("rat-vec/add"),r=b("rat-vec/muls")},{"big-rat/div":89,"big-rat/mul":99,"big-rat/sign":100,"big-rat/sub":101,"rat-vec/add":531,"rat-vec/muls":533,"rat-vec/sub":534}],129:[function(b,N,G){function p(k,m){null==m&&(m=!0);var a=k[0],g=k[1],h=k[2];k=k[3];null==k&&(k=m?1:255);m&&(a*=255,g*=255,h*=255,k*=255);a=
n(a,0,255)&255;g=n(g,0,255)&255;h=n(h,0,255)&255;k=n(k,0,255)&255;return 16777216*a+(g<<16)+(h<<8)+k}var n=b("clamp");N.exports=p;N.exports.to=p;N.exports.from=function(k,m){k=+k;var a=k>>>24,g=(k&16711680)>>>16,h=(k&65280)>>>8;k&=255;return!1===m?[a,g,h,k]:[a/255,g/255,h/255,k/255]}},{clamp:126}],130:[function(b,N,G){N.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,
235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,
50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,
128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,
160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,
21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,
230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,
224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],131:[function(b,N,G){var p=b("color-rgba"),n=b("clamp"),k=b("dtype");N.exports=function(m,a){"float"!==a&&a||(a="array");"uint"===a&&(a="uint8");"uint_clamped"===a&&(a="uint8_clamped");var g=new (k(a))(4);a="uint8"!==a&&"uint8_clamped"!==a;m.length&&"string"!==typeof m||(m=p(m),m[0]/=255,m[1]/=255,m[2]/=255);var h=m;h=h instanceof Uint8Array||h instanceof
Uint8ClampedArray?!0:Array.isArray(h)&&(1<h[0]||0===h[0])&&(1<h[1]||0===h[1])&&(1<h[2]||0===h[2])&&(!h[3]||1<h[3])?!0:!1;if(h)return g[0]=m[0],g[1]=m[1],g[2]=m[2],g[3]=null!=m[3]?m[3]:255,a&&(g[0]/=255,g[1]/=255,g[2]/=255,g[3]/=255),g;a?(g[0]=m[0],g[1]=m[1],g[2]=m[2],g[3]=null!=m[3]?m[3]:1):(g[0]=n(Math.floor(255*m[0]),0,255),g[1]=n(Math.floor(255*m[1]),0,255),g[2]=n(Math.floor(255*m[2]),0,255),g[3]=null==m[3]?255:n(Math.floor(255*m[3]),0,255));return g}},{clamp:126,"color-rgba":133,dtype:184}],132:[function(b,
N,G){(function(p){(function(){var n=b("color-name"),k=b("is-plain-obj"),m=b("defined");N.exports=function(g){var h,r=[],l=1;if("string"===typeof g)if(n[g]){r=n[g].slice();var c="rgb"}else if("transparent"===g)l=0,c="rgb",r=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(g)){var d=g.slice(1),e=d.length;l=1;4>=e?(r=[parseInt(d[0]+d[0],16),parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16)],4===e&&(l=parseInt(d[3]+d[3],16)/255)):(r=[parseInt(d[0]+d[1],16),parseInt(d[2]+d[3],16),parseInt(d[4]+d[5],16)],8===e&&(l=parseInt(d[6]+
d[7],16)/255));r[0]||(r[0]=0);r[1]||(r[1]=0);r[2]||(r[2]=0);c="rgb"}else(h=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(g))?(g=h[1],l="rgb"===g,c=d=g.replace(/a$/,""),e="cmyk"===d?4:"gray"===d?1:3,r=h[2].trim().split(/\s*,\s*/).map(function(f,q){if(/%$/.test(f)){if(q===e)return parseFloat(f)/100;if("rgb"===d)return 255*parseFloat(f)/100}else if("h"===d[q]&&!/deg$/.test(f)&&void 0!==a[f])return a[f];return parseFloat(f)}),g===d&&r.push(1),l=l?1:void 0===r[e]?
1:r[e],r=r.slice(0,e)):10<g.length&&/[0-9](?:\s|\/)/.test(g)&&(r=g.match(/([0-9]+)/g).map(function(f){return parseFloat(f)}),c=g.match(/([a-z])/ig).join("").toLowerCase());else if(!isNaN(g))c="rgb",r=[g>>>16,(g&65280)>>>8,g&255];else if(k(g))h=m(g.r,g.red,g.R,null),null!==h?(c="rgb",r=[h,m(g.g,g.green,g.G),m(g.b,g.blue,g.B)]):(c="hsl",r=[m(g.h,g.hue,g.H),m(g.s,g.saturation,g.S),m(g.l,g.lightness,g.L,g.b,g.brightness)]),l=m(g.a,g.alpha,g.opacity,1),null!=g.opacity&&(l/=100);else if(Array.isArray(g)||
p.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(g))r=[g[0],g[1],g[2]],c="rgb",l=4===g.length?g[3]:1;return{space:c,values:r,alpha:l}};var a={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}}).call(this)}).call(this,"undefined"!==typeof Re?Re:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"color-name":130,defined:179,"is-plain-obj":457}],133:[function(b,N,G){var p=b("color-parse"),n=b("color-space/hsl"),k=b("clamp");N.exports=function(m){var a=p(m);if(!a.space)return[];
m=Array(3);m[0]=k(a.values[0],0,255);m[1]=k(a.values[1],0,255);m[2]=k(a.values[2],0,255);"h"===a.space[0]&&(m=n.rgb(m));m.push(k(a.alpha,0,1));return m}},{clamp:126,"color-parse":132,"color-space/hsl":134}],134:[function(b,N,G){b=b("./rgb");N.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(p){var n=p[0]/360,k=p[1]/100;p=p[2]/100;if(0===k){var m=255*p;return[m,m,m]}k=.5>p?p*(1+k):p+k-p*k;p=2*p-k;var a=[0,0,0];for(var g=0;3>g;g++)m=
n+1/3*-(g-1),0>m?m++:1<m&&m--,m=1>6*m?p+6*(k-p)*m:1>2*m?k:2>3*m?p+(k-p)*(2/3-m)*6:p,a[g]=255*m;return a}};b.hsl=function(p){var n=p[0]/255,k=p[1]/255,m=p[2]/255;p=Math.min(n,k,m);var a=Math.max(n,k,m),g=a-p,h;a===p?h=0:n===a?h=(k-m)/g:k===a?h=2+(m-n)/g:m===a&&(h=4+(n-k)/g);h=Math.min(60*h,360);0>h&&(h+=360);n=(p+a)/2;return[h,100*(a===p?0:.5>=n?g/(a+p):g/(2-a-p)),100*n]}},{"./rgb":135}],135:[function(b,N,G){N.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},
{}],136:[function(b,N,G){N.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,
0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},
{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},
{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},
{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,
rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],
earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,
rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},
{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,
rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},
{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,
204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},
{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,
181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,
136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,
rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,
rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,
rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,
rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],137:[function(b,N,G){function p(g){return[g[0]/255,g[1]/255,g[2]/255,g[3]]}function n(g){for(var h,r="#",l=0;3>
l;++l)h=g[l],h=h.toString(16),r+=("00"+h).substr(h.length);return r}function k(g){return"rgba("+g.join(",")+")"}var m=b("./colorScale"),a=b("lerp");N.exports=function(g){var h,r;g||(g={});var l=(g.nshades||72)-1;var c=g.format||"hex";(h=g.colormap)||(h="jet");if("string"===typeof h){h=h.toLowerCase();if(!m[h])throw Error(h+" not a supported colorscale");var d=m[h]}else if(Array.isArray(h))d=h.slice();else throw Error("unsupported colormap option",h);if(d.length>l+1)throw Error(h+" map requires nshades to be at least size "+
d.length);var e=Array.isArray(g.alpha)?2!==g.alpha.length?[1,1]:g.alpha.slice():"number"===typeof g.alpha?[g.alpha,g.alpha]:[1,1];g=d.map(function(B){return Math.round(B.index*l)});e[0]=Math.min(Math.max(e[0],0),1);e[1]=Math.min(Math.max(e[1],0),1);var f=d.map(function(B,A){B=d[A].index;A=d[A].rgb.slice();if(4===A.length&&0<=A[3]&&1>=A[3])return A;A[3]=e[0]+(e[1]-e[0])*B;return A});var q=[];for(r=0;r<g.length-1;++r){var t=g[r+1]-g[r];h=f[r];var w=f[r+1];for(var x=0;x<t;x++){var z=x/t;q.push([Math.round(a(h[0],
w[0],z)),Math.round(a(h[1],w[1],z)),Math.round(a(h[2],w[2],z)),a(h[3],w[3],z)])}}q.push(d[d.length-1].rgb.concat(e[1]));"hex"===c?q=q.map(n):"rgbaString"===c?q=q.map(k):"float"===c&&(q=q.map(p));return q}},{"./colorScale":136,lerp:460}],138:[function(b,N,G){function p(h,r,l){var c=m(h[0],-r[0]);h=m(h[1],-r[1]);var d=m(l[0],-r[0]);r=m(l[1],-r[1]);c=g(a(c,d),a(h,r));return 0<=c[c.length-1]}N.exports=function(h,r,l,c){var d=n(r,l,c);if(0===d){d=k(n(h,r,l));var e=k(n(h,r,c));return d===e?0===d&&(l=p(h,
r,l),h=p(h,r,c),l!==h)?l?1:-1:0:0===e?0<d?-1:p(h,r,c)?-1:1:0===d?0<e?1:p(h,r,l)?1:-1:k(e-d)}e=n(h,r,l);return 0<e?0<d&&0<n(h,r,c)?1:-1:0>e?0<d||0<n(h,r,c)?1:-1:0<n(h,r,c)?1:p(h,r,l)?1:-1};var n=b("robust-orientation"),k=b("signum"),m=b("two-sum"),a=b("robust-product"),g=b("robust-sum")},{"robust-orientation":548,"robust-product":549,"robust-sum":553,signum:555,"two-sum":605}],139:[function(b,N,G){function p(k,m){return k-m}N.exports=function(k,m){var a=k.length,g=k.length-m.length;if(g)return g;switch(a){case 0:return 0;
case 1:return k[0]-m[0];case 2:return k[0]+k[1]-m[0]-m[1]||n(k[0],k[1])-n(m[0],m[1]);case 3:a=k[0]+k[1];var h=m[0]+m[1];if(g=a+k[2]-(h+m[2]))return g;g=n(k[0],k[1]);var r=n(m[0],m[1]);return n(g,k[2])-n(r,m[2])||n(g+k[2],a)-n(r+m[2],h);case 4:g=k[0];a=k[1];h=k[2];k=k[3];r=m[0];var l=m[1],c=m[2];m=m[3];return g+a+h+k-(r+l+c+m)||n(g,a,h,k)-n(r,l,c,m,r)||n(g+a,g+h,g+k,a+h,a+k,h+k)-n(r+l,r+c,r+m,l+c,l+m,c+m)||n(g+a+h,g+a+k,g+h+k,a+h+k)-n(r+l+c,r+l+m,r+c+m,l+c+m);default:k=k.slice().sort(p);m=m.slice().sort(p);
for(h=0;h<a;++h)if(g=k[h]-m[h])return g;return 0}};var n=Math.min},{}],140:[function(b,N,G){var p=b("compare-cell"),n=b("cell-orientation");N.exports=function(k,m){return p(k,m)||n(k)-n(m)}},{"cell-orientation":123,"compare-cell":139}],141:[function(b,N,G){var p=b("./lib/ch1d"),n=b("./lib/ch2d"),k=b("./lib/chnd");N.exports=function(m){var a=m.length;if(0===a)return[];if(1===a)return[[0]];a=m[0].length;return 0===a?[]:1===a?p(m):2===a?n(m):k(m,a)}},{"./lib/ch1d":142,"./lib/ch2d":143,"./lib/chnd":144}],
142:[function(b,N,G){N.exports=function(p){for(var n=0,k=0,m=1;m<p.length;++m)p[m][0]<p[n][0]&&(n=m),p[m][0]>p[k][0]&&(k=m);return n<k?[[n],[k]]:n>k?[[k],[n]]:[[n]]}},{}],143:[function(b,N,G){N.exports=function(n){n=p(n);var k=n.length;if(2>=k)return[];for(var m=Array(k),a=n[k-1],g=0;g<k;++g){var h=n[g];m[g]=[a,h];a=h}return m};var p=b("monotone-convex-hull-2d")},{"monotone-convex-hull-2d":469}],144:[function(b,N,G){N.exports=function(k,m){try{return p(k,!0)}catch(e){var a=n(k);if(a.length<=m)return[];
m=k.length;for(var g=Array(m),h=0;h<a.length;++h)g[h]=k[a[h]];var r=a.length;for(h=0;h<m;++h)0>a.indexOf(h)&&(g[r++]=k[h]);k=p(g,!0);m=k.length;g=a.length;for(h=0;h<m;++h){r=k[h];for(var l=0;l<r.length;++l){var c=r[l];if(c<g)r[l]=a[c];else{c-=g;for(var d=0;d<g;++d)c>=a[d]&&(c+=1);r[l]=c}}}return k}};var p=b("incremental-convex-hull"),n=b("affine-hull")},{"affine-hull":73,"incremental-convex-hull":446}],145:[function(b,N,G){N.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?\x3d.*americ).*samoa",
AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?\x3d.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?\x3d.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?\x3d.*bonaire).*eustatius|^(?\x3d.*carib).*netherlands|\\bbes.?islands",
BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?\x3d.*peo)(?\x3d.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",
COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?\x3d.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?\x3d.*span).*guinea",
ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?\x3d.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?\x3d.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",
GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?\x3d.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",
IMN:"^(?\x3d.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?\x3d.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",
MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?\x3d.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",
NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",
RWA:"rwanda",BLM:"barth(e|)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?\x3d.*collectivity).*martin|^(?\x3d.*france).*martin(?!ique)|^(?\x3d.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|)o.?tom(e|)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",
SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?\x3d.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?\x3d.*leste).*timor|^(?\x3d.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",
UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?\x3d.*socialist).*viet.?nam",VGB:"^(?\x3d.*\\bu\\.?\\s?k).*virgin|^(?\x3d.*brit).*virgin|^(?\x3d.*kingdom).*virgin",VIR:"^(?\x3d.*\\bu\\.?\\s?s).*virgin|^(?\x3d.*states).*virgin",
WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?\x3d.*peo).*yemen|^(?!.*rep)(?\x3d.*dem).*yemen|^(?\x3d.*south).*yemen|^(?\x3d.*aden).*yemen|^(?\x3d.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],146:[function(b,N,G){N.exports="xx-small x-small small medium large x-large xx-large larger smaller".split(" ")},
{}],147:[function(b,N,G){N.exports="normal condensed semi-condensed extra-condensed ultra-condensed expanded semi-expanded extra-expanded ultra-expanded".split(" ")},{}],148:[function(b,N,G){N.exports=["normal","italic","oblique"]},{}],149:[function(b,N,G){N.exports="normal bold bolder lighter 100 200 300 400 500 600 700 800 900".split(" ")},{}],150:[function(b,N,G){N.exports={parse:b("./parse"),stringify:b("./stringify")}},{"./parse":152,"./stringify":153}],151:[function(b,N,G){var p=b("css-font-size-keywords");
N.exports={isSize:function(n){return/^[\d\.]/.test(n)||-1!==n.indexOf("/")||-1!==p.indexOf(n)}}},{"css-font-size-keywords":146}],152:[function(b,N,G){function p(e){if("string"!==typeof e)throw Error("Font argument must be a string.");if(d[e])return d[e];if(""===e)throw Error("Cannot parse an empty string.");if(-1!==a.indexOf(e))return d[e]={system:e};for(var f={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},q=l(e,/\s+/),t;t=q.shift();){if(-1!==
m.indexOf(t))return["style","variant","weight","stretch"].forEach(function(x){f[x]=t}),d[e]=f;if(-1!==h.indexOf(t))f.style=t;else if("normal"===t||"small-caps"===t)f.variant=t;else if(-1!==r.indexOf(t))f.stretch=t;else if(-1!==g.indexOf(t))f.weight=t;else{if(c(t)){var w=l(t,"/");f.size=w[0];null!=w[1]?f.lineHeight=n(w[1]):"/"===q[0]&&(q.shift(),f.lineHeight=n(q.shift()));if(!q.length)throw Error("Missing required font-family.");f.family=l(q.join(" "),/\s*,\s*/).map(k);return d[e]=f}throw Error("Unknown or unsupported font token: "+
t);}}throw Error("Missing required font-size.");}function n(e){var f=parseFloat(e);return f.toString()===e?f:e}var k=b("unquote"),m=b("css-global-keywords"),a=b("css-system-font-keywords"),g=b("css-font-weight-keywords"),h=b("css-font-style-keywords"),r=b("css-font-stretch-keywords"),l=b("string-split-by"),c=b("./lib/util").isSize;N.exports=p;var d=p.cache={}},{"./lib/util":151,"css-font-stretch-keywords":147,"css-font-style-keywords":148,"css-font-weight-keywords":149,"css-global-keywords":154,"css-system-font-keywords":155,
"string-split-by":589,unquote:620}],153:[function(b,N,G){function p(e,f){if(e&&!f[e]&&!a[e])throw Error("Unknown keyword `"+e+"`");return e}function n(e){for(var f={},q=0;q<e.length;q++)f[e[q]]=1;return f}var k=b("pick-by-alias"),m=b("./lib/util").isSize,a=n(b("css-global-keywords")),g=n(b("css-system-font-keywords")),h=n(b("css-font-weight-keywords")),r=n(b("css-font-style-keywords")),l=n(b("css-font-stretch-keywords")),c={normal:1,"small-caps":1},d={serif:1,"sans-serif":1,monospace:1,cursive:1,
fantasy:1,"system-ui":1};N.exports=function(e){e=k(e,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"});
if(e.system)return e.system&&p(e.system,g),e.system;p(e.style,r);p(e.variant,c);p(e.weight,h);p(e.stretch,l);null==e.size&&(e.size="1rem");"number"===typeof e.size&&(e.size+="px");if(!m)throw Error("Bad size value `"+e.size+"`");e.family||(e.family="serif");Array.isArray(e.family)&&(e.family.length||(e.family=["serif"]),e.family=e.family.map(function(q){return d[q]?q:'"'+q+'"'}).join(", "));var f=[];f.push(e.style);e.variant!==e.style&&f.push(e.variant);e.weight!==e.variant&&e.weight!==e.style&&f.push(e.weight);
e.stretch!==e.weight&&e.stretch!==e.variant&&e.stretch!==e.style&&f.push(e.stretch);f.push(e.size+(null==e.lineHeight||"normal"===e.lineHeight||"1"===e.lineHeight+""?"":"/"+e.lineHeight));f.push(e.family);return f.filter(Boolean).join(" ")}},{"./lib/util":151,"css-font-stretch-keywords":147,"css-font-style-keywords":148,"css-font-weight-keywords":149,"css-global-keywords":154,"css-system-font-keywords":155,"pick-by-alias":498}],154:[function(b,N,G){N.exports=["inherit","initial","unset"]},{}],155:[function(b,
N,G){N.exports="caption icon menu message-box small-caption status-bar".split(" ")},{}],156:[function(b,N,G){N.exports=function(p,n,k,m,a,g){var h=a-1,r=a*a,l=h*h,c=(1+2*a)*l;l*=a;a=r*(3-2*a);h*=r;if(p.length){g||(g=Array(p.length));for(r=p.length-1;0<=r;--r)g[r]=c*p[r]+l*n[r]+a*k[r]+h*m[r];return g}return c*p+l*n+a*k+h*m};N.exports.derivative=function(p,n,k,m,a,g){var h=6*a*a-6*a,r=3*a*a-4*a+1,l=-6*a*a+6*a;a=3*a*a-2*a;if(p.length){g||(g=Array(p.length));for(var c=p.length-1;0<=c;--c)g[c]=h*p[c]+
r*n[c]+l*k[c]+a*m[c];return g}return h*p+r*n+l*k[c]+a*m}},{}],157:[function(b,N,G){function p(){this.argTypes=[];this.shimArgs=[];this.arrayArgs=[];this.arrayBlockIndices=[];this.scalarArgs=[];this.offsetArgs=[];this.offsetArgIndex=[];this.indexArgs=[];this.shapeArgs=[];this.funcName="";this.post=this.body=this.pre=null;this.debug=!1}var n=b("./lib/thunk.js");N.exports=function(k){var m=new p;m.pre=k.pre;m.body=k.body;m.post=k.post;var a=k.args.slice(0);m.argTypes=a;for(var g=0;g<a.length;++g){var h=
a[g];if("array"===h||"object"===typeof h&&h.blockIndices){m.argTypes[g]="array";m.arrayArgs.push(g);m.arrayBlockIndices.push(h.blockIndices?h.blockIndices:0);m.shimArgs.push("array"+g);if(g<m.pre.args.length&&0<m.pre.args[g].count)throw Error("cwise: pre() block may not reference array args");if(g<m.post.args.length&&0<m.post.args[g].count)throw Error("cwise: post() block may not reference array args");}else if("scalar"===h)m.scalarArgs.push(g),m.shimArgs.push("scalar"+g);else if("index"===h){m.indexArgs.push(g);
if(g<m.pre.args.length&&0<m.pre.args[g].count)throw Error("cwise: pre() block may not reference array index");if(g<m.body.args.length&&m.body.args[g].lvalue)throw Error("cwise: body() block may not write to array index");if(g<m.post.args.length&&0<m.post.args[g].count)throw Error("cwise: post() block may not reference array index");}else if("shape"===h){m.shapeArgs.push(g);if(g<m.pre.args.length&&m.pre.args[g].lvalue)throw Error("cwise: pre() block may not write to array shape");if(g<m.body.args.length&&
m.body.args[g].lvalue)throw Error("cwise: body() block may not write to array shape");if(g<m.post.args.length&&m.post.args[g].lvalue)throw Error("cwise: post() block may not write to array shape");}else if("object"===typeof h&&h.offset)m.argTypes[g]="offset",m.offsetArgs.push({array:h.array,offset:h.offset}),m.offsetArgIndex.push(g);else throw Error("cwise: Unknown argument type "+a[g]);}if(0>=m.arrayArgs.length)throw Error("cwise: No array arguments specified");if(m.pre.args.length>a.length)throw Error("cwise: Too many arguments in pre() block");
if(m.body.args.length>a.length)throw Error("cwise: Too many arguments in body() block");if(m.post.args.length>a.length)throw Error("cwise: Too many arguments in post() block");m.debug=!!k.printCode||!!k.debug;m.funcName=k.funcName||"cwise";m.blockSize=k.blockSize||64;return n(m)}},{"./lib/thunk.js":159}],158:[function(b,N,G){function p(m,a,g){var h=m.length,r=a.arrayArgs.length;a=0<a.indexArgs.length;var l=[],c=[],d=0,e,f;for(e=0;e<h;++e)c.push(["i",e,"\x3d0"].join(""));for(f=0;f<r;++f)for(e=0;e<
h;++e){var q=d;d=m[e];0===e?c.push(["d",f,"s",e,"\x3dt",f,"p",d].join("")):c.push(["d",f,"s",e,"\x3d(t",f,"p",d,"-s",q,"*t",f,"p",q,")"].join(""))}0<c.length&&l.push("var "+c.join(","));for(e=h-1;0<=e;--e)d=m[e],l.push(["for(i",e,"\x3d0;i",e,"\x3cs",d,";++i",e,"){"].join(""));l.push(g);for(e=0;e<h;++e){q=d;d=m[e];for(f=0;f<r;++f)l.push(["p",f,"+\x3dd",f,"s",e].join(""));a&&(0<e&&l.push(["index[",q,"]-\x3ds",q].join("")),l.push(["++index[",d,"]"].join("")));l.push("}")}return l.join("\n")}function n(m,
a,g){for(var h=m.body,r=[],l=[],c=0;c<m.args.length;++c){var d=m.args[c];if(!(0>=d.count)){var e=new RegExp(d.name,"g"),f="",q=a.arrayArgs.indexOf(c);switch(a.argTypes[c]){case "offset":var t=a.offsetArgIndex.indexOf(c);q=a.offsetArgs[t].array;f="+q"+t;case "array":f="p"+q+f;var w="l"+c;t="a"+q;if(0===a.arrayBlockIndices[q])1===d.count?"generic"===g[q]?d.lvalue?(r.push(["var ",w,"\x3d",t,".get(",f,")"].join("")),h=h.replace(e,w),l.push([t,".set(",f,",",w,")"].join(""))):h=h.replace(e,[t,".get(",f,
")"].join("")):h=h.replace(e,[t,"[",f,"]"].join("")):"generic"===g[q]?(r.push(["var ",w,"\x3d",t,".get(",f,")"].join("")),h=h.replace(e,w),d.lvalue&&l.push([t,".set(",f,",",w,")"].join(""))):(r.push(["var ",w,"\x3d",t,"[",f,"]"].join("")),h=h.replace(e,w),d.lvalue&&l.push([t,"[",f,"]\x3d",w].join("")));else{e=[d.name];d=[f];for(f=0;f<Math.abs(a.arrayBlockIndices[q]);f++)e.push("\\s*\\[([^\\]]+)\\]"),d.push("$"+(f+1)+"*t"+q+"b"+f);e=new RegExp(e.join(""),"g");f=d.join("+");if("generic"===g[q])throw Error("cwise: Generic arrays not supported in combination with blocks!");
h=h.replace(e,[t,"[",f,"]"].join(""))}break;case "scalar":h=h.replace(e,"Y"+a.scalarArgs.indexOf(c));break;case "index":h=h.replace(e,"index");break;case "shape":h=h.replace(e,"shape")}}}return[r.join("\n"),h,l.join("\n")].join("\n").trim()}var k=b("uniq");N.exports=function(m,a){for(var g=a[1].length-Math.abs(m.arrayBlockIndices[0])|0,h=Array(m.arrayArgs.length),r=Array(m.arrayArgs.length),l=0;l<m.arrayArgs.length;++l)r[l]=a[2*l],h[l]=a[2*l+1];var c=[],d=[],e=[],f=[],q=[];for(l=0;l<m.arrayArgs.length;++l){0>
m.arrayBlockIndices[l]?(e.push(0),f.push(g),c.push(g),d.push(g+m.arrayBlockIndices[l])):(e.push(m.arrayBlockIndices[l]),f.push(m.arrayBlockIndices[l]+g),c.push(0),d.push(m.arrayBlockIndices[l]));for(var t=[],w=0;w<h[l].length;w++)e[l]<=h[l][w]&&h[l][w]<f[l]&&t.push(h[l][w]-e[l]);q.push(t)}d=["SS"];f=["'use strict'"];t=[];for(w=0;w<g;++w)t.push(["s",w,"\x3dSS[",w,"]"].join(""));for(l=0;l<m.arrayArgs.length;++l){d.push("a"+l);d.push("t"+l);d.push("p"+l);for(w=0;w<g;++w)t.push(["t",l,"p",w,"\x3dt",l,
"[",e[l]+w,"]"].join(""));for(w=0;w<Math.abs(m.arrayBlockIndices[l]);++w)t.push(["t",l,"b",w,"\x3dt",l,"[",c[l]+w,"]"].join(""))}for(l=0;l<m.scalarArgs.length;++l)d.push("Y"+l);0<m.shapeArgs.length&&t.push("shape\x3dSS.slice(0)");if(0<m.indexArgs.length){w=Array(g);for(l=0;l<g;++l)w[l]="0";t.push(["index\x3d[",w.join(","),"]"].join(""))}for(l=0;l<m.offsetArgs.length;++l){c=m.offsetArgs[l];e=[];for(w=0;w<c.offset.length;++w)0!==c.offset[w]&&(1===c.offset[w]?e.push(["t",c.array,"p",w].join("")):e.push([c.offset[w],
"*t",c.array,"p",w].join("")));0===e.length?t.push("q"+l+"\x3d0"):t.push(["q",l,"\x3d",e.join("+")].join(""))}l=k([].concat(m.pre.thisVars).concat(m.body.thisVars).concat(m.post.thisVars));t=t.concat(l);0<t.length&&f.push("var "+t.join(","));for(l=0;l<m.arrayArgs.length;++l)f.push("p"+l+"|\x3d0");3<m.pre.body.length&&f.push(n(m.pre,m,r));w=n(m.body,m,r);a:for(l=0,t=q[0].length;l<t;){for(c=1;c<q.length;++c)if(q[c][l]!==q[0][l])break a;++l}if(l<g){g=f.push;t=l;q=q[0];c=q.length;e=m.arrayArgs.length;
for(var x=m.blockSize,z=0<m.indexArgs.length,B=[],A=0;A<e;++A)B.push(["var offset",A,"\x3dp",A].join(""));for(A=t;A<c;++A)B.push(["for(var j"+A+"\x3dSS[",q[A],"]|0;j",A,"\x3e0;){"].join("")),B.push(["if(j",A,"\x3c",x,"){"].join("")),B.push(["s",q[A],"\x3dj",A].join("")),B.push(["j",A,"\x3d0"].join("")),B.push(["}else{s",q[A],"\x3d",x].join("")),B.push(["j",A,"-\x3d",x,"}"].join("")),z&&B.push(["index[",q[A],"]\x3dj",A].join(""));for(A=0;A<e;++A){x=["offset"+A];for(z=t;z<c;++z)x.push(["j",z,"*t",A,
"p",q[z]].join(""));B.push(["p",A,"\x3d(",x.join("+"),")"].join(""))}B.push(p(q,m,w));for(A=t;A<c;++A)B.push("}");q=B.join("\n");g.call(f,q)}else f.push(p(q[0],m,w));3<m.post.body.length&&f.push(n(m.post,m,r));m.debug&&console.log("-----Generated cwise routine for ",a,":\n"+f.join("\n")+"\n----------");m=m.funcName||"unnamed";h=h[0].join("s");a=Array(r.length);q=!0;for(g=0;g<r.length;++g)w=r[g],t=(t=w.match(/\d+/))?t[0]:"",0===w.charAt(0)?a[g]="u"+w.charAt(1)+t:a[g]=w.charAt(0)+t,0<g&&(q=q&&a[g]===
a[g-1]);r=q?a[0]:a.join("");r=[m,"_cwise_loop_",h,"m",l,r].join("");return(new Function(["function ",r,"(",d.join(","),"){",f.join("\n"),"} return ",r].join("")))()}},{uniq:619}],159:[function(b,N,G){var p=b("./compile.js");N.exports=function(n){var k=["'use strict'","var CACHED\x3d{}"],m=[];k.push(["return function ",n.funcName+"_cwise_thunk","(",n.shimArgs.join(","),"){"].join(""));for(var a=[],g=[],h=[["array",n.arrayArgs[0],".shape.slice(",Math.max(0,n.arrayBlockIndices[0]),0>n.arrayBlockIndices[0]?
","+n.arrayBlockIndices[0]+")":")"].join("")],r=[],l=[],c=0;c<n.arrayArgs.length;++c){var d=n.arrayArgs[c];m.push(["t",d,"\x3darray",d,".dtype,r",d,"\x3darray",d,".order"].join(""));a.push("t"+d);a.push("r"+d);g.push("t"+d);g.push("r"+d+".join()");h.push("array"+d+".data");h.push("array"+d+".stride");h.push("array"+d+".offset|0");0<c&&(r.push("array"+n.arrayArgs[0]+".shape.length\x3d\x3d\x3darray"+d+".shape.length+"+(Math.abs(n.arrayBlockIndices[0])-Math.abs(n.arrayBlockIndices[c]))),l.push("array"+
n.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,n.arrayBlockIndices[0])+"]\x3d\x3d\x3darray"+d+".shape[shapeIndex+"+Math.max(0,n.arrayBlockIndices[c])+"]"))}1<n.arrayArgs.length&&(k.push("if (!("+r.join(" \x26\x26 ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),k.push("for(var shapeIndex\x3darray"+n.arrayArgs[0]+".shape.length-"+Math.abs(n.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),k.push("if (!("+l.join(" \x26\x26 ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),
k.push("}"));for(c=0;c<n.scalarArgs.length;++c)h.push("scalar"+n.scalarArgs[c]);m.push(["type\x3d[",g.join(","),"].join()"].join(""));m.push("proc\x3dCACHED[type]");k.push("var "+m.join(","));k.push(["if(!proc){CACHED[type]\x3dproc\x3dcompile([",a.join(","),"])}return proc(",h.join(","),")}"].join(""));n.debug&&console.log("-----Generated thunk:\n"+k.join("\n")+"\n----------");return(new Function("compile",k.join("\n")))(p.bind(void 0,n))}},{"./compile.js":158}],160:[function(b,N,G){var p=b("type/value/is"),
n=b("type/value/ensure"),k=b("type/plain-function/ensure"),m=b("es5-ext/object/copy"),a=b("es5-ext/object/normalize-options"),g=b("es5-ext/object/map"),h=Function.prototype.bind,r=Object.defineProperty,l=Object.prototype.hasOwnProperty;var c=function(d,e,f){var q=n(e)&&k(e.value);var t=m(e);delete t.writable;delete t.value;t.get=function(){if(!f.overwriteDefinition&&l.call(this,d))return q;e.value=h.call(q,f.resolveContext?f.resolveContext(this):this);r(this,d,e);return this[d]};return t};N.exports=
function(d,e){var f=a(e);p(f.resolveContext)&&k(f.resolveContext);return g(d,function(q,t){return c(t,q,f)})}},{"es5-ext/object/copy":205,"es5-ext/object/map":213,"es5-ext/object/normalize-options":214,"type/plain-function/ensure":611,"type/value/ensure":615,"type/value/is":616}],161:[function(b,N,G){var p=b("type/value/is"),n=b("type/plain-function/is"),k=b("es5-ext/object/assign"),m=b("es5-ext/object/normalize-options"),a=b("es5-ext/string/#/contains");(N.exports=function(g,h){if(2>arguments.length||
"string"!==typeof g){var r=h;h=g;g=null}else r=arguments[2];if(p(g)){var l=a.call(g,"c");var c=a.call(g,"e");var d=a.call(g,"w")}else l=d=!0,c=!1;l={value:h,configurable:l,enumerable:c,writable:d};return r?k(m(r),l):l}).gs=function(g,h,r,l){"string"!==typeof g&&(l=r,r=h,h=g,g=null);p(h)?n(h)?p(r)?n(r)||(l=r,r=void 0):r=void 0:(l=h,h=r=void 0):h=void 0;if(p(g)){var c=a.call(g,"c");g=a.call(g,"e")}else c=!0,g=!1;h={get:h,set:r,configurable:c,enumerable:g};return l?k(m(l),h):h}},{"es5-ext/object/assign":202,
"es5-ext/object/normalize-options":214,"es5-ext/string/#/contains":221,"type/plain-function/is":612,"type/value/is":616}],162:[function(b,N,G){(function(p,n){"object"===typeof G&&"undefined"!==typeof N?n(G):n(p.d3=p.d3||{})})(this,function(p){function n(O,I){return O<I?-1:O>I?1:O>=I?0:NaN}function k(O){1===O.length&&(O=m(O));return{left:function(I,L,H,M){null==H&&(H=0);null==M&&(M=I.length);for(;H<M;){var Q=H+M>>>1;0>O(I[Q],L)?H=Q+1:M=Q}return H},right:function(I,L,H,M){null==H&&(H=0);null==M&&(M=
I.length);for(;H<M;){var Q=H+M>>>1;0<O(I[Q],L)?M=Q:H=Q+1}return H}}}function m(O){return function(I,L){return n(O(I),L)}}function a(O,I){return[O,I]}function g(O){return null===O?NaN:+O}function h(O,I){var L=O.length,H=0,M=-1,Q=0,Z,ca=0;if(null==I)for(;++M<L;){if(!isNaN(Z=g(O[M]))){var W=Z-Q;Q+=W/++H;ca+=W*(Z-Q)}}else for(;++M<L;)isNaN(Z=g(I(O[M],M,O)))||(W=Z-Q,Q+=W/++H,ca+=W*(Z-Q));if(1<H)return ca/(H-1)}function r(O,I){return(O=h(O,I))?Math.sqrt(O):O}function l(O,I){var L=O.length,H=-1,M,Q,Z;if(null==
I)for(;++H<L;){if(null!=(M=O[H])&&M>=M)for(Q=Z=M;++H<L;)null!=(M=O[H])&&(Q>M&&(Q=M),Z<M&&(Z=M))}else for(;++H<L;)if(null!=(M=I(O[H],H,O))&&M>=M)for(Q=Z=M;++H<L;)null!=(M=I(O[H],H,O))&&(Q>M&&(Q=M),Z<M&&(Z=M));return[Q,Z]}function c(O){return function(){return O}}function d(O){return O}function e(O,I,L){O=+O;I=+I;L=2>(M=arguments.length)?(I=O,O=0,1):3>M?1:+L;for(var H=-1,M=Math.max(0,Math.ceil((I-O)/L))|0,Q=Array(M);++H<M;)Q[H]=O+H*L;return Q}function f(O,I,L){I=(I-O)/Math.max(0,L);O=Math.floor(Math.log(I)/
Math.LN10);I/=Math.pow(10,O);return 0<=O?(I>=F?10:I>=J?5:I>=K?2:1)*Math.pow(10,O):-Math.pow(10,-O)/(I>=F?10:I>=J?5:I>=K?2:1)}function q(O,I,L){var H=Math.abs(I-O)/Math.max(0,L);L=Math.pow(10,Math.floor(Math.log(H)/Math.LN10));H/=L;H>=F?L*=10:H>=J?L*=5:H>=K&&(L*=2);return I<O?-L:L}function t(O){return Math.ceil(Math.log(O.length)/Math.LN2)+1}function w(O,I,L){null==L&&(L=g);if(H=O.length){if(0>=(I=+I)||2>H)return+L(O[0],0,O);if(1<=I)return+L(O[H-1],H-1,O);var H;I*=H-1;H=Math.floor(I);var M=+L(O[H],
H,O);O=+L(O[H+1],H+1,O);return M+(O-M)*(I-H)}}function x(O,I){var L=O.length,H=-1,M,Q;if(null==I)for(;++H<L;){if(null!=(M=O[H])&&M>=M)for(Q=M;++H<L;)null!=(M=O[H])&&Q>M&&(Q=M)}else for(;++H<L;)if(null!=(M=I(O[H],H,O))&&M>=M)for(Q=M;++H<L;)null!=(M=I(O[H],H,O))&&Q>M&&(Q=M);return Q}function z(O){if(!(Q=O.length))return[];for(var I=-1,L=x(O,B),H=Array(L);++I<L;)for(var M=-1,Q,Z=H[I]=Array(Q);++M<Q;)Z[M]=O[M][I];return H}function B(O){return O.length}var A=k(n),D=A.right;A=A.left;var C=Array.prototype,
v=C.slice,y=C.map,F=Math.sqrt(50),J=Math.sqrt(10),K=Math.sqrt(2);p.bisect=D;p.bisectRight=D;p.bisectLeft=A;p.ascending=n;p.bisector=k;p.cross=function(O,I,L){var H=O.length,M=I.length,Q=Array(H*M),Z,ca,W;null==L&&(L=a);for(Z=W=0;Z<H;++Z){var T=O[Z];for(ca=0;ca<M;++ca,++W)Q[W]=L(T,I[ca])}return Q};p.descending=function(O,I){return I<O?-1:I>O?1:I>=O?0:NaN};p.deviation=r;p.extent=l;p.histogram=function(){function O(M){var Q,Z=M.length,ca=Array(Z);for(Q=0;Q<Z;++Q)ca[Q]=I(M[Q],Q,M);Q=L(ca);var W=Q[0],
T=Q[1],U=H(ca,W,T);Array.isArray(U)||(U=q(W,T,U),U=e(Math.ceil(W/U)*U,T,U));for(var ha=U.length;U[0]<=W;)U.shift(),--ha;for(;U[ha-1]>T;)U.pop(),--ha;var Y=Array(ha+1);for(Q=0;Q<=ha;++Q){var ba=Y[Q]=[];ba.x0=0<Q?U[Q-1]:W;ba.x1=Q<ha?U[Q]:T}for(Q=0;Q<Z;++Q)ba=ca[Q],W<=ba&&ba<=T&&Y[D(U,ba,0,ha)].push(M[Q]);return Y}var I=d,L=l,H=t;O.value=function(M){return arguments.length?(I="function"===typeof M?M:c(M),O):I};O.domain=function(M){return arguments.length?(L="function"===typeof M?M:c([M[0],M[1]]),O):
L};O.thresholds=function(M){return arguments.length?(H="function"===typeof M?M:Array.isArray(M)?c(v.call(M)):c(M),O):H};return O};p.thresholdFreedmanDiaconis=function(O,I,L){O=y.call(O,g).sort(n);return Math.ceil((L-I)/(2*(w(O,.75)-w(O,.25))*Math.pow(O.length,-1/3)))};p.thresholdScott=function(O,I,L){return Math.ceil((L-I)/(3.5*r(O)*Math.pow(O.length,-1/3)))};p.thresholdSturges=t;p.max=function(O,I){var L=O.length,H=-1,M,Q;if(null==I)for(;++H<L;){if(null!=(M=O[H])&&M>=M)for(Q=M;++H<L;)null!=(M=O[H])&&
M>Q&&(Q=M)}else for(;++H<L;)if(null!=(M=I(O[H],H,O))&&M>=M)for(Q=M;++H<L;)null!=(M=I(O[H],H,O))&&M>Q&&(Q=M);return Q};p.mean=function(O,I){var L=O.length,H=L,M=-1,Q,Z=0;if(null==I)for(;++M<L;)isNaN(Q=g(O[M]))?--H:Z+=Q;else for(;++M<L;)isNaN(Q=g(I(O[M],M,O)))?--H:Z+=Q;if(H)return Z/H};p.median=function(O,I){var L=O.length,H=-1,M,Q=[];if(null==I)for(;++H<L;)isNaN(M=g(O[H]))||Q.push(M);else for(;++H<L;)isNaN(M=g(I(O[H],H,O)))||Q.push(M);return w(Q.sort(n),.5)};p.merge=function(O){var I=O.length;var L=
-1;for(var H=0,M,Q;++L<I;)H+=O[L].length;for(M=Array(H);0<=--I;)for(Q=O[I],L=Q.length;0<=--L;)M[--H]=Q[L];return M};p.min=x;p.pairs=function(O,I){null==I&&(I=a);for(var L=0,H=O.length-1,M=O[0],Q=Array(0>H?0:H);L<H;)Q[L]=I(M,M=O[++L]);return Q};p.permute=function(O,I){for(var L=I.length,H=Array(L);L--;)H[L]=O[I[L]];return H};p.quantile=w;p.range=e;p.scan=function(O,I){if(L=O.length){var L,H=0,M=0,Q,Z=O[M];for(null==I&&(I=n);++H<L;)if(0>I(Q=O[H],Z)||0!==I(Z,Z))Z=Q,M=H;if(0===I(Z,Z))return M}};p.shuffle=
function(O,I,L){L=(null==L?O.length:L)-(I=null==I?0:+I);for(var H,M;L;)M=Math.random()*L--|0,H=O[L+I],O[L+I]=O[M+I],O[M+I]=H;return O};p.sum=function(O,I){var L=O.length,H=-1,M,Q=0;if(null==I)for(;++H<L;){if(M=+O[H])Q+=M}else for(;++H<L;)if(M=+I(O[H],H,O))Q+=M;return Q};p.ticks=function(O,I,L){var H,M=-1,Q;I=+I;O=+O;L=+L;if(O===I&&0<L)return[O];if(H=I<O){var Z=O;O=I;I=Z}if(0===(Q=f(O,I,L))||!isFinite(Q))return[];if(0<Q)for(O=Math.ceil(O/Q),I=Math.floor(I/Q),I=Array(Z=Math.ceil(I-O+1));++M<Z;)I[M]=
(O+M)*Q;else for(O=Math.floor(O*Q),I=Math.ceil(I*Q),I=Array(Z=Math.ceil(O-I+1));++M<Z;)I[M]=(O-M)/Q;H&&I.reverse();return I};p.tickIncrement=f;p.tickStep=q;p.transpose=z;p.variance=h;p.zip=function(){return z(arguments)};Object.defineProperty(p,"__esModule",{value:!0})})},{}],163:[function(b,N,G){(function(p,n){"object"===typeof G&&"undefined"!==typeof N?n(G):n(p.d3=p.d3||{})})(this,function(p){function n(){}function k(d,e){var f=new n;if(d instanceof n)d.each(function(x,z){f.set(z,x)});else if(Array.isArray(d)){var q=
-1,t=d.length,w;if(null==e)for(;++q<t;)f.set(q,d[q]);else for(;++q<t;)f.set(e(w=d[q],q,d),w)}else if(d)for(q in d)f.set(q,d[q]);return f}function m(){return{}}function a(d,e,f){d[e]=f}function g(){return k()}function h(d,e,f){d.set(e,f)}function r(){}function l(d,e){var f=new r;if(d instanceof r)d.each(function(w){f.add(w)});else if(d){var q=-1,t=d.length;if(null==e)for(;++q<t;)f.add(d[q]);else for(;++q<t;)f.add(e(d[q],q,d))}return f}n.prototype=k.prototype={constructor:n,has:function(d){return"$"+
d in this},get:function(d){return this["$"+d]},set:function(d,e){this["$"+d]=e;return this},remove:function(d){d="$"+d;return d in this&&delete this[d]},clear:function(){for(var d in this)"$"===d[0]&&delete this[d]},keys:function(){var d=[],e;for(e in this)"$"===e[0]&&d.push(e.slice(1));return d},values:function(){var d=[],e;for(e in this)"$"===e[0]&&d.push(this[e]);return d},entries:function(){var d=[],e;for(e in this)"$"===e[0]&&d.push({key:e.slice(1),value:this[e]});return d},size:function(){var d=
0,e;for(e in this)"$"===e[0]&&++d;return d},empty:function(){for(var d in this)if("$"===d[0])return!1;return!0},each:function(d){for(var e in this)"$"===e[0]&&d(this[e],e.slice(1),this)}};var c=k.prototype;r.prototype=l.prototype={constructor:r,has:c.has,add:function(d){d+="";this["$"+d]=d;return this},remove:c.remove,clear:c.clear,values:c.keys,size:c.size,empty:c.empty,each:c.each};p.nest=function(){function d(z,B,A,D){if(B>=f.length)return null!=t&&z.sort(t),null!=w?w(z):z;for(var C=-1,v=z.length,
y=f[B++],F,J,K=k(),O,I=A();++C<v;)(O=K.get(F=y(J=z[C])+""))?O.push(J):K.set(F,[J]);K.each(function(L,H){D(I,H,d(L,B,A,D))});return I}function e(z,B){if(++B>f.length)return z;var A=q[B-1];if(null!=w&&B>=f.length)var D=z.entries();else D=[],z.each(function(C,v){D.push({key:v,values:e(C,B)})});return null!=A?D.sort(function(C,v){return A(C.key,v.key)}):D}var f=[],q=[],t,w,x;return x={object:function(z){return d(z,0,m,a)},map:function(z){return d(z,0,g,h)},entries:function(z){return e(d(z,0,g,h),0)},
key:function(z){f.push(z);return x},sortKeys:function(z){q[f.length-1]=z;return x},sortValues:function(z){t=z;return x},rollup:function(z){w=z;return x}}};p.set=l;p.map=k;p.keys=function(d){var e=[],f;for(f in d)e.push(f);return e};p.values=function(d){var e=[],f;for(f in d)e.push(d[f]);return e};p.entries=function(d){var e=[],f;for(f in d)e.push({key:f,value:d[f]});return e};Object.defineProperty(p,"__esModule",{value:!0})})},{}],164:[function(b,N,G){(function(p,n){"object"===typeof G&&"undefined"!==
typeof N?n(G):(p=p||self,n(p.d3=p.d3||{}))})(this,function(p){function n(na,qa,ta){na.prototype=qa.prototype=ta;ta.constructor=na}function k(na,qa){na=Object.create(na.prototype);for(var ta in qa)na[ta]=qa[ta];return na}function m(){}function a(){return this.rgb().formatHex()}function g(){return this.rgb().formatRgb()}function h(na){var qa,ta;na=(na+"").trim().toLowerCase();return(qa=ca.exec(na))?(ta=qa[1].length,qa=parseInt(qa[1],16),6===ta?r(qa):3===ta?new e(qa>>8&15|qa>>4&240,qa>>4&15|qa&240,(qa&
15)<<4|qa&15,1):8===ta?l(qa>>24&255,qa>>16&255,qa>>8&255,(qa&255)/255):4===ta?l(qa>>12&15|qa>>8&240,qa>>8&15|qa>>4&240,qa>>4&15|qa&240,((qa&15)<<4|qa&15)/255):null):(qa=W.exec(na))?new e(qa[1],qa[2],qa[3],1):(qa=T.exec(na))?new e(255*qa[1]/100,255*qa[2]/100,255*qa[3]/100,1):(qa=U.exec(na))?l(qa[1],qa[2],qa[3],qa[4]):(qa=ha.exec(na))?l(255*qa[1]/100,255*qa[2]/100,255*qa[3]/100,qa[4]):(qa=Y.exec(na))?w(qa[1],qa[2]/100,qa[3]/100,1):(qa=ba.exec(na))?w(qa[1],qa[2]/100,qa[3]/100,qa[4]):ja.hasOwnProperty(na)?
r(ja[na]):"transparent"===na?new e(NaN,NaN,NaN,0):null}function r(na){return new e(na>>16&255,na>>8&255,na&255,1)}function l(na,qa,ta,za){0>=za&&(na=qa=ta=NaN);return new e(na,qa,ta,za)}function c(na){na instanceof m||(na=h(na));if(!na)return new e;na=na.rgb();return new e(na.r,na.g,na.b,na.opacity)}function d(na,qa,ta,za){return 1===arguments.length?c(na):new e(na,qa,ta,null==za?1:za)}function e(na,qa,ta,za){this.r=+na;this.g=+qa;this.b=+ta;this.opacity=+za}function f(){return"#"+t(this.r)+t(this.g)+
t(this.b)}function q(){var na=this.opacity;na=isNaN(na)?1:Math.max(0,Math.min(1,na));return(1===na?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===na?")":", "+na+")")}function t(na){na=Math.max(0,Math.min(255,Math.round(na)||0));return(16>na?"0":"")+na.toString(16)}function w(na,qa,ta,za){0>=za?na=qa=ta=NaN:0>=ta||1<=ta?na=qa=NaN:0>=qa&&(na=NaN);return new B(na,qa,ta,za)}
function x(na){if(na instanceof B)return new B(na.h,na.s,na.l,na.opacity);na instanceof m||(na=h(na));if(!na)return new B;if(na instanceof B)return na;na=na.rgb();var qa=na.r/255,ta=na.g/255,za=na.b/255,Ia=Math.min(qa,ta,za),Xa=Math.max(qa,ta,za),$a=NaN,gb=Xa-Ia,sb=(Xa+Ia)/2;gb?($a=qa===Xa?(ta-za)/gb+6*(ta<za):ta===Xa?(za-qa)/gb+2:(qa-ta)/gb+4,gb/=.5>sb?Xa+Ia:2-Xa-Ia,$a*=60):gb=0<sb&&1>sb?0:$a;return new B($a,gb,sb,na.opacity)}function z(na,qa,ta,za){return 1===arguments.length?x(na):new B(na,qa,
ta,null==za?1:za)}function B(na,qa,ta,za){this.h=+na;this.s=+qa;this.l=+ta;this.opacity=+za}function A(na,qa,ta){return 255*(60>na?qa+(ta-qa)*na/60:180>na?ta:240>na?qa+(ta-qa)*(240-na)/60:qa)}function D(na){if(na instanceof v)return new v(na.l,na.a,na.b,na.opacity);if(na instanceof L)return H(na);na instanceof e||(na=c(na));var qa=K(na.r),ta=K(na.g),za=K(na.b),Ia=y(.2225045*qa+.7168786*ta+.0606169*za);if(qa===ta&&ta===za)var Xa=qa=Ia;else Xa=y((.4360747*qa+.3850649*ta+.1430804*za)/.96422),qa=y((.0139322*
qa+.0971045*ta+.7141733*za)/.82521);return new v(116*Ia-16,500*(Xa-Ia),200*(Ia-qa),na.opacity)}function C(na,qa,ta,za){return 1===arguments.length?D(na):new v(na,qa,ta,null==za?1:za)}function v(na,qa,ta,za){this.l=+na;this.a=+qa;this.b=+ta;this.opacity=+za}function y(na){return na>la?Math.pow(na,1/3):na/ra+oa}function F(na){return na>xa?na*na*na:ra*(na-oa)}function J(na){return 255*(.0031308>=na?12.92*na:1.055*Math.pow(na,1/2.4)-.055)}function K(na){return.04045>=(na/=255)?na/12.92:Math.pow((na+.055)/
1.055,2.4)}function O(na){if(na instanceof L)return new L(na.h,na.c,na.l,na.opacity);na instanceof v||(na=D(na));if(0===na.a&&0===na.b)return new L(NaN,0<na.l&&100>na.l?0:NaN,na.l,na.opacity);var qa=Math.atan2(na.b,na.a)*ia;return new L(0>qa?qa+360:qa,Math.sqrt(na.a*na.a+na.b*na.b),na.l,na.opacity)}function I(na,qa,ta,za){return 1===arguments.length?O(na):new L(na,qa,ta,null==za?1:za)}function L(na,qa,ta,za){this.h=+na;this.c=+qa;this.l=+ta;this.opacity=+za}function H(na){if(isNaN(na.h))return new v(na.l,
0,0,na.opacity);var qa=na.h*ma;return new v(na.l,Math.cos(qa)*na.c,Math.sin(qa)*na.c,na.opacity)}function M(na,qa,ta,za){if(1===arguments.length){var Ia=na;if(Ia instanceof Q)Ia=new Q(Ia.h,Ia.s,Ia.l,Ia.opacity);else{Ia instanceof e||(Ia=c(Ia));var Xa=Ia.g/255,$a=Ia.b/255,gb=(ka*$a+Ia.r/255*-1.7884503806-3.5172982438*Xa)/(ka+-1.7884503806-3.5172982438);$a-=gb;var sb=(1.97294*(Xa-gb)- -.29227*$a)/-.90649;$a=(Xa=Math.sqrt(sb*sb+$a*$a)/(1.97294*gb*(1-gb)))?Math.atan2(sb,$a)*ia-120:NaN;Ia=new Q(0>$a?$a+
360:$a,Xa,gb,Ia.opacity)}}else Ia=new Q(na,qa,ta,null==za?1:za);return Ia}function Q(na,qa,ta,za){this.h=+na;this.s=+qa;this.l=+ta;this.opacity=+za}var Z=1/.7,ca=/^#([0-9a-f]{3,8})$/,W=RegExp("^rgb\\(\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*\\)$"),T=RegExp("^rgb\\(\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*\\)$"),U=RegExp("^rgba\\(\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*\\)$"),
ha=RegExp("^rgba\\(\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*\\)$"),Y=RegExp("^hsl\\(\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*\\)$"),ba=RegExp("^hsla\\(\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*,\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*\\)$"),
ja={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,
darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,
hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,
linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,
palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,
turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};n(m,h,{copy:function(na){return Object.assign(new this.constructor,this,na)},displayable:function(){return this.rgb().displayable()},hex:a,formatHex:a,formatHsl:function(){return x(this).formatHsl()},formatRgb:g,toString:g});n(e,d,k(m,{brighter:function(na){na=null==na?Z:Math.pow(Z,na);return new e(this.r*na,this.g*na,this.b*na,this.opacity)},darker:function(na){na=null==na?.7:
Math.pow(.7,na);return new e(this.r*na,this.g*na,this.b*na,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&255.5>this.r&&-.5<=this.g&&255.5>this.g&&-.5<=this.b&&255.5>this.b&&0<=this.opacity&&1>=this.opacity},hex:f,formatHex:f,formatRgb:q,toString:q}));n(B,z,k(m,{brighter:function(na){na=null==na?Z:Math.pow(Z,na);return new B(this.h,this.s,this.l*na,this.opacity)},darker:function(na){na=null==na?.7:Math.pow(.7,na);return new B(this.h,this.s,this.l*na,this.opacity)},
rgb:function(){var na=this.h%360+360*(0>this.h),qa=isNaN(na)||isNaN(this.s)?0:this.s,ta=this.l;qa=ta+(.5>ta?ta:1-ta)*qa;ta=2*ta-qa;return new e(A(240<=na?na-240:na+120,ta,qa),A(na,ta,qa),A(120>na?na+240:na-120,ta,qa),this.opacity)},displayable:function(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity},formatHsl:function(){var na=this.opacity;na=isNaN(na)?1:Math.max(0,Math.min(1,na));return(1===na?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+
"%, "+100*(this.l||0)+"%"+(1===na?")":", "+na+")")}}));var ma=Math.PI/180,ia=180/Math.PI,oa=4/29,xa=6/29,ra=3*xa*xa,la=xa*xa*xa;n(v,C,k(m,{brighter:function(na){return new v(this.l+18*(null==na?1:na),this.a,this.b,this.opacity)},darker:function(na){return new v(this.l-18*(null==na?1:na),this.a,this.b,this.opacity)},rgb:function(){var na=(this.l+16)/116,qa=isNaN(this.a)?na:na+this.a/500,ta=isNaN(this.b)?na:na-this.b/200;qa=.96422*F(qa);na=1*F(na);ta=.82521*F(ta);return new e(J(3.1338561*qa-1.6168667*
na-.4906146*ta),J(-.9787684*qa+1.9161415*na+.033454*ta),J(.0719453*qa-.2289914*na+1.4052427*ta),this.opacity)}}));n(L,I,k(m,{brighter:function(na){return new L(this.h,this.c,this.l+18*(null==na?1:na),this.opacity)},darker:function(na){return new L(this.h,this.c,this.l-18*(null==na?1:na),this.opacity)},rgb:function(){return H(this).rgb()}}));var ka=1.78277*-.29227-.1347134789;n(Q,M,k(m,{brighter:function(na){na=null==na?Z:Math.pow(Z,na);return new Q(this.h,this.s,this.l*na,this.opacity)},darker:function(na){na=
null==na?.7:Math.pow(.7,na);return new Q(this.h,this.s,this.l*na,this.opacity)},rgb:function(){var na=isNaN(this.h)?0:(this.h+120)*ma,qa=+this.l,ta=isNaN(this.s)?0:this.s*qa*(1-qa),za=Math.cos(na);na=Math.sin(na);return new e(255*(qa+ta*(-.14861*za+1.78277*na)),255*(qa+ta*(-.29227*za+-.90649*na)),255*(qa+1.97294*ta*za),this.opacity)}}));p.color=h;p.cubehelix=M;p.gray=function(na,qa){return new v(na,0,0,null==qa?1:qa)};p.hcl=I;p.hsl=z;p.lab=C;p.lch=function(na,qa,ta,za){return 1===arguments.length?
O(na):new L(ta,qa,na,null==za?1:za)};p.rgb=d;Object.defineProperty(p,"__esModule",{value:!0})})},{}],165:[function(b,N,G){(function(p,n){"object"===typeof G&&"undefined"!==typeof N?n(G):(p=p||self,n(p.d3=p.d3||{}))})(this,function(p){function n(){for(var h=0,r=arguments.length,l={},c;h<r;++h){if(!(c=arguments[h]+"")||c in l||/[\s.]/.test(c))throw Error("illegal type: "+c);l[c]=[]}return new k(l)}function k(h){this._=h}function m(h,r){return h.trim().split(/^|\s+/).map(function(l){var c="",d=l.indexOf(".");
0<=d&&(c=l.slice(d+1),l=l.slice(0,d));if(l&&!r.hasOwnProperty(l))throw Error("unknown type: "+l);return{type:l,name:c}})}function a(h,r,l){for(var c=0,d=h.length;c<d;++c)if(h[c].name===r){h[c]=g;h=h.slice(0,c).concat(h.slice(c+1));break}null!=l&&h.push({name:r,value:l});return h}var g={value:function(){}};k.prototype=n.prototype={constructor:k,on:function(h,r){var l=this._,c=m(h+"",l),d,e=-1,f=c.length;if(2>arguments.length)for(;++e<f;){var q;if(q=d=(h=c[e]).type){a:{q=l[d];for(var t=0,w=q.length;t<
w;++t)if((d=q[t]).name===h.name){d=d.value;break a}d=void 0}q=d}if(q)return d}else{if(null!=r&&"function"!==typeof r)throw Error("invalid callback: "+r);for(;++e<f;)if(d=(h=c[e]).type)l[d]=a(l[d],h.name,r);else if(null==r)for(d in l)l[d]=a(l[d],h.name,null);return this}},copy:function(){var h={},r=this._,l;for(l in r)h[l]=r[l].slice();return new k(h)},call:function(h,r){if(0<(d=arguments.length-2))for(var l=Array(d),c=0,d,e;c<d;++c)l[c]=arguments[c+2];if(!this._.hasOwnProperty(h))throw Error("unknown type: "+
h);e=this._[h];c=0;for(d=e.length;c<d;++c)e[c].value.apply(r,l)},apply:function(h,r,l){if(!this._.hasOwnProperty(h))throw Error("unknown type: "+h);h=this._[h];for(var c=0,d=h.length;c<d;++c)h[c].value.apply(r,l)}};p.dispatch=n;Object.defineProperty(p,"__esModule",{value:!0})})},{}],166:[function(b,N,G){(function(p,n){"object"===typeof G&&"undefined"!==typeof N?n(G,b("d3-quadtree"),b("d3-collection"),b("d3-dispatch"),b("d3-timer")):n(p.d3=p.d3||{},p.d3,p.d3,p.d3,p.d3)})(this,function(p,n,k,m,a){function g(t){return function(){return t}}
function h(){return 1E-6*(Math.random()-.5)}function r(t){return t.x+t.vx}function l(t){return t.y+t.vy}function c(t){return t.index}function d(t,w){t=t.get(w);if(!t)throw Error("missing: "+w);return t}function e(t){return t.x}function f(t){return t.y}var q=Math.PI*(3-Math.sqrt(5));p.forceCenter=function(t,w){function x(){var B,A=z.length,D=0,C=0;for(B=0;B<A;++B){var v=z[B];D+=v.x;C+=v.y}D=D/A-t;C=C/A-w;for(B=0;B<A;++B)v=z[B],v.x-=D,v.y-=C}var z;null==t&&(t=0);null==w&&(w=0);x.initialize=function(B){z=
B};x.x=function(B){return arguments.length?(t=+B,x):t};x.y=function(B){return arguments.length?(w=+B,x):w};return x};p.forceCollide=function(t){function w(){function v(Q,Z,ca,W,T){var U=Q.data;Q=Q.r;var ha=L+Q;if(U)U.index>K.index&&(Z=O-U.x-U.vx,ca=I-U.y-U.vy,W=Z*Z+ca*ca,W<ha*ha&&(0===Z&&(Z=h(),W+=Z*Z),0===ca&&(ca=h(),W+=ca*ca),W=(ha-(W=Math.sqrt(W)))/W*D,K.vx+=(Z*=W)*(ha=(Q*=Q)/(H+Q)),K.vy+=(ca*=W)*ha,U.vx-=Z*(ha=1-ha),U.vy-=ca*ha));else return Z>O+ha||W<O-ha||ca>I+ha||T<I-ha}for(var y,F=B.length,
J,K,O,I,L,H,M=0;M<C;++M)for(J=n.quadtree(B,r,l).visitAfter(x),y=0;y<F;++y)K=B[y],L=A[K.index],H=L*L,O=K.x+K.vx,I=K.y+K.vy,J.visit(v)}function x(v){if(v.data)return v.r=A[v.data.index];for(var y=v.r=0;4>y;++y)v[y]&&v[y].r>v.r&&(v.r=v[y].r)}function z(){if(B){var v,y=B.length;A=Array(y);for(v=0;v<y;++v){var F=B[v];A[F.index]=+t(F,v,B)}}}var B,A,D=1,C=1;"function"!==typeof t&&(t=g(null==t?1:+t));w.initialize=function(v){B=v;z()};w.iterations=function(v){return arguments.length?(C=+v,w):C};w.strength=
function(v){return arguments.length?(D=+v,w):D};w.radius=function(v){return arguments.length?(t="function"===typeof v?v:g(+v),z(),w):t};return w};p.forceLink=function(t){function w(I){for(var L=0,H=t.length;L<O;++L)for(var M=0,Q,Z,ca,W,T;M<H;++M)Q=t[M],Z=Q.source,Q=Q.target,ca=Q.x+Q.vx-Z.x-Z.vx||h(),W=Q.y+Q.vy-Z.y-Z.vy||h(),T=Math.sqrt(ca*ca+W*W),T=(T-y[M])/T*I*C[M],ca*=T,W*=T,Q.vx-=ca*(T=K[M]),Q.vy-=W*T,Z.vx+=ca*(T=1-T),Z.vy+=W*T}function x(){if(F){var I=F.length,L=t.length,H=k.map(F,A);var M=0;
for(J=Array(I);M<L;++M)I=t[M],I.index=M,"object"!==typeof I.source&&(I.source=d(H,I.source)),"object"!==typeof I.target&&(I.target=d(H,I.target)),J[I.source.index]=(J[I.source.index]||0)+1,J[I.target.index]=(J[I.target.index]||0)+1;M=0;for(K=Array(L);M<L;++M)I=t[M],K[M]=J[I.source.index]/(J[I.source.index]+J[I.target.index]);C=Array(L);z();y=Array(L);B()}}function z(){if(F)for(var I=0,L=t.length;I<L;++I)C[I]=+D(t[I],I,t)}function B(){if(F)for(var I=0,L=t.length;I<L;++I)y[I]=+v(t[I],I,t)}var A=c,D=
function(I){return 1/Math.min(J[I.source.index],J[I.target.index])},C,v=g(30),y,F,J,K,O=1;null==t&&(t=[]);w.initialize=function(I){F=I;x()};w.links=function(I){return arguments.length?(t=I,x(),w):t};w.id=function(I){return arguments.length?(A=I,w):A};w.iterations=function(I){return arguments.length?(O=+I,w):O};w.strength=function(I){return arguments.length?(D="function"===typeof I?I:g(+I),z(),w):D};w.distance=function(I){return arguments.length?(v="function"===typeof I?I:g(+I),B(),w):v};return w};
p.forceManyBody=function(){function t(K){var O=B.length,I=n.quadtree(B,e,f).visitAfter(x);D=K;for(K=0;K<O;++K)A=B[K],I.visit(z)}function w(){if(B){var K,O=B.length;v=Array(O);for(K=0;K<O;++K){var I=B[K];v[I.index]=+C(I,K,B)}}}function x(K){var O=0,I,L,H=0,M,Q,Z;if(K.length){for(M=Q=Z=0;4>Z;++Z)(I=K[Z])&&(L=Math.abs(I.value))&&(O+=I.value,H+=L,M+=L*I.x,Q+=L*I.y);K.x=M/H;K.y=Q/H}else{I=K;I.x=I.data.x;I.y=I.data.y;do O+=v[I.data.index];while(I=I.next)}K.value=O}function z(K,O,I,L){if(!K.value)return!0;
I=K.x-A.x;var H=K.y-A.y;O=L-O;L=I*I+H*H;if(O*O/J<L)return L<F&&(0===I&&(I=h(),L+=I*I),0===H&&(H=h(),L+=H*H),L<y&&(L=Math.sqrt(y*L)),A.vx+=I*K.value*D/L,A.vy+=H*K.value*D/L),!0;if(!(K.length||L>=F)){if(K.data!==A||K.next)0===I&&(I=h(),L+=I*I),0===H&&(H=h(),L+=H*H),L<y&&(L=Math.sqrt(y*L));do K.data!==A&&(O=v[K.data.index]*D/L,A.vx+=I*O,A.vy+=H*O);while(K=K.next)}}var B,A,D,C=g(-30),v,y=1,F=Infinity,J=.81;t.initialize=function(K){B=K;w()};t.strength=function(K){return arguments.length?(C="function"===
typeof K?K:g(+K),w(),t):C};t.distanceMin=function(K){return arguments.length?(y=K*K,t):Math.sqrt(y)};t.distanceMax=function(K){return arguments.length?(F=K*K,t):Math.sqrt(F)};t.theta=function(K){return arguments.length?(J=K*K,t):Math.sqrt(J)};return t};p.forceRadial=function(t,w,x){function z(y){for(var F=0,J=A.length;F<J;++F){var K=A[F],O=K.x-w||1E-6,I=K.y-x||1E-6,L=Math.sqrt(O*O+I*I);L=(v[F]-L)*C[F]*y/L;K.vx+=O*L;K.vy+=I*L}}function B(){if(A){var y,F=A.length;C=Array(F);v=Array(F);for(y=0;y<F;++y)v[y]=
+t(A[y],y,A),C[y]=isNaN(v[y])?0:+D(A[y],y,A)}}var A,D=g(.1),C,v;"function"!==typeof t&&(t=g(+t));null==w&&(w=0);null==x&&(x=0);z.initialize=function(y){A=y;B()};z.strength=function(y){return arguments.length?(D="function"===typeof y?y:g(+y),B(),z):D};z.radius=function(y){return arguments.length?(t="function"===typeof y?y:g(+y),B(),z):t};z.x=function(y){return arguments.length?(w=+y,z):w};z.y=function(y){return arguments.length?(x=+y,z):x};return z};p.forceSimulation=function(t){function w(){x();O.call("tick",
A);D<C&&(K.stop(),O.call("end",A))}function x(I){var L,H=t.length;void 0===I&&(I=1);for(var M=0;M<I;++M)for(D+=(y-D)*v,J.each(function(Z){Z(D)}),L=0;L<H;++L){var Q=t[L];null==Q.fx?Q.x+=Q.vx*=F:(Q.x=Q.fx,Q.vx=0);null==Q.fy?Q.y+=Q.vy*=F:(Q.y=Q.fy,Q.vy=0)}return A}function z(){for(var I=0,L=t.length,H;I<L;++I){H=t[I];H.index=I;null!=H.fx&&(H.x=H.fx);null!=H.fy&&(H.y=H.fy);if(isNaN(H.x)||isNaN(H.y)){var M=10*Math.sqrt(I),Q=I*q;H.x=M*Math.cos(Q);H.y=M*Math.sin(Q)}if(isNaN(H.vx)||isNaN(H.vy))H.vx=H.vy=
0}}function B(I){I.initialize&&I.initialize(t);return I}var A,D=1,C=.001,v=1-Math.pow(C,1/300),y=0,F=.6,J=k.map(),K=a.timer(w),O=m.dispatch("tick","end");null==t&&(t=[]);z();return A={tick:x,restart:function(){return K.restart(w),A},stop:function(){return K.stop(),A},nodes:function(I){return arguments.length?(t=I,z(),J.each(B),A):t},alpha:function(I){return arguments.length?(D=+I,A):D},alphaMin:function(I){return arguments.length?(C=+I,A):C},alphaDecay:function(I){return arguments.length?(v=+I,A):
+v},alphaTarget:function(I){return arguments.length?(y=+I,A):y},velocityDecay:function(I){return arguments.length?(F=1-I,A):1-F},force:function(I,L){return 1<arguments.length?(null==L?J.remove(I):J.set(I,B(L)),A):J.get(I)},find:function(I,L,H){var M,Q=t.length;H=null==H?Infinity:H*H;for(M=0;M<Q;++M){var Z=t[M];var ca=I-Z.x;var W=L-Z.y;ca=ca*ca+W*W;if(ca<H){var T=Z;H=ca}}return T},on:function(I,L){return 1<arguments.length?(O.on(I,L),A):O.on(I)}}};p.forceX=function(t){function w(C){for(var v=0,y=B.length,
F;v<y;++v)F=B[v],F.vx+=(D[v]-F.x)*A[v]*C}function x(){if(B){var C,v=B.length;A=Array(v);D=Array(v);for(C=0;C<v;++C)A[C]=isNaN(D[C]=+t(B[C],C,B))?0:+z(B[C],C,B)}}var z=g(.1),B,A,D;"function"!==typeof t&&(t=g(null==t?0:+t));w.initialize=function(C){B=C;x()};w.strength=function(C){return arguments.length?(z="function"===typeof C?C:g(+C),x(),w):z};w.x=function(C){return arguments.length?(t="function"===typeof C?C:g(+C),x(),w):t};return w};p.forceY=function(t){function w(C){for(var v=0,y=B.length,F;v<
y;++v)F=B[v],F.vy+=(D[v]-F.y)*A[v]*C}function x(){if(B){var C,v=B.length;A=Array(v);D=Array(v);for(C=0;C<v;++C)A[C]=isNaN(D[C]=+t(B[C],C,B))?0:+z(B[C],C,B)}}var z=g(.1),B,A,D;"function"!==typeof t&&(t=g(null==t?0:+t));w.initialize=function(C){B=C;x()};w.strength=function(C){return arguments.length?(z="function"===typeof C?C:g(+C),x(),w):z};w.y=function(C){return arguments.length?(t="function"===typeof C?C:g(+C),x(),w):t};return w};Object.defineProperty(p,"__esModule",{value:!0})})},{"d3-collection":163,
"d3-dispatch":165,"d3-quadtree":173,"d3-timer":178}],167:[function(b,N,G){(function(p,n){"object"===typeof G&&"undefined"!==typeof N?n(G):(p="undefined"!==typeof globalThis?globalThis:p||self,n(p.d3=p.d3||{}))})(this,function(p){function n(z,B){if(0>(B=(z=B?z.toExponential(B-1):z.toExponential()).indexOf("e")))return null;var A=z.slice(0,B);return[1<A.length?A[0]+A.slice(2):A,+z.slice(B+1)]}function k(z){return z=n(Math.abs(z)),z?z[1]:NaN}function m(z,B){return function(A,D){for(var C=A.length,v=
[],y=0,F=z[0],J=0;0<C&&0<F;){J+F+1>D&&(F=Math.max(1,D-J));v.push(A.substring(C-=F,C+F));if((J+=F+1)>D)break;F=z[y=(y+1)%z.length]}return v.reverse().join(B)}}function a(z){return function(B){return B.replace(/[0-9]/g,function(A){return z[+A]})}}function g(z){if(!(B=e.exec(z)))throw Error("invalid format: "+z);var B;return new h({fill:B[1],align:B[2],sign:B[3],symbol:B[4],zero:B[5],width:B[6],comma:B[7],precision:B[8]&&B[8].slice(1),trim:B[9],type:B[10]})}function h(z){this.fill=void 0===z.fill?" ":
z.fill+"";this.align=void 0===z.align?"\x3e":z.align+"";this.sign=void 0===z.sign?"-":z.sign+"";this.symbol=void 0===z.symbol?"":z.symbol+"";this.zero=!!z.zero;this.width=void 0===z.width?void 0:+z.width;this.comma=!!z.comma;this.precision=void 0===z.precision?void 0:+z.precision;this.trim=!!z.trim;this.type=void 0===z.type?"":z.type+""}function r(z,B){B=n(z,B);if(!B)return z+"";z=B[0];B=B[1];return 0>B?"0."+Array(-B).join("0")+z:z.length>B+1?z.slice(0,B+1)+"."+z.slice(B+1):z+Array(B-z.length+2).join("0")}
function l(z){return z}function c(z){function B(O){function I(ia){var oa=Y,xa=ba,ra,la;if("c"===ha)xa=ja(ia)+xa,ia="";else{ia=+ia;var ka=0>ia||0>1/ia;ia=isNaN(ia)?K:ja(Math.abs(ia),T);if(U){var na=ia.length,qa=1,ta=-1;a:for(;qa<na;++qa)switch(ia[qa]){case ".":ta=ra=qa;break;case "0":0===ta&&(ta=qa);ra=qa;break;default:if(!+ia[qa])break a;0<ta&&(ta=0)}ia=0<ta?ia.slice(0,ta)+ia.slice(ra+1):ia}ka&&0===+ia&&"+"!==M&&(ka=!1);oa=(ka?"("===M?M:J:"-"===M||"("===M?"":M)+oa;xa=("s"===ha?w[8+f/3]:"")+xa+(ka&&
"("===M?")":"");if(ma)for(ka=-1,ra=ia.length;++ka<ra;)if(la=ia.charCodeAt(ka),48>la||57<la){xa=(46===la?v+ia.slice(ka+1):ia.slice(ka))+xa;ia=ia.slice(0,ka);break}}W&&!Z&&(ia=A(ia,Infinity));la=oa.length+ia.length+xa.length;ka=la<ca?Array(ca-la+1).join(L):"";W&&Z&&(ia=A(ka+ia,ka.length?ca-xa.length:Infinity),ka="");switch(H){case "\x3c":ia=oa+ia+xa+ka;break;case "\x3d":ia=oa+ka+ia+xa;break;case "^":ia=ka.slice(0,la=ka.length>>1)+oa+ia+xa+ka.slice(la);break;default:ia=ka+oa+ia+xa}return y(ia)}O=g(O);
var L=O.fill,H=O.align,M=O.sign,Q=O.symbol,Z=O.zero,ca=O.width,W=O.comma,T=O.precision,U=O.trim,ha=O.type;"n"===ha?(W=!0,ha="g"):q[ha]||(void 0===T&&(T=12),U=!0,ha="g");if(Z||"0"===L&&"\x3d"===H)Z=!0,L="0",H="\x3d";var Y="$"===Q?D:"#"===Q&&/[boxX]/.test(ha)?"0"+ha.toLowerCase():"",ba="$"===Q?C:/[%p]/.test(ha)?F:"",ja=q[ha],ma=/[defgprs%]/.test(ha);T=void 0===T?6:/[gprs]/.test(ha)?Math.max(1,Math.min(21,T)):Math.max(0,Math.min(20,T));I.toString=function(){return O+""};return I}var A=void 0===z.grouping||
void 0===z.thousands?l:m(t.call(z.grouping,Number),z.thousands+""),D=void 0===z.currency?"":z.currency[0]+"",C=void 0===z.currency?"":z.currency[1]+"",v=void 0===z.decimal?".":z.decimal+"",y=void 0===z.numerals?l:a(t.call(z.numerals,String)),F=void 0===z.percent?"%":z.percent+"",J=void 0===z.minus?"-":z.minus+"",K=void 0===z.nan?"NaN":z.nan+"";return{format:B,formatPrefix:function(O,I){var L=B((O=g(O),O.type="f",O));O=3*Math.max(-8,Math.min(8,Math.floor(k(I)/3)));var H=Math.pow(10,-O),M=w[8+O/3];
return function(Q){return L(H*Q)+M}}}}function d(z){x=c(z);p.format=x.format;p.formatPrefix=x.formatPrefix;return x}var e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;g.prototype=h.prototype;h.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,this.width|0))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};var f,q={"%":function(z,
B){return(100*z).toFixed(B)},b:function(z){return Math.round(z).toString(2)},c:function(z){return z+""},d:function(z){return 1E21<=Math.abs(z=Math.round(z))?z.toLocaleString("en").replace(/,/g,""):z.toString(10)},e:function(z,B){return z.toExponential(B)},f:function(z,B){return z.toFixed(B)},g:function(z,B){return z.toPrecision(B)},o:function(z){return Math.round(z).toString(8)},p:function(z,B){return r(100*z,B)},r,s:function(z,B){var A=n(z,B);if(!A)return z+"";var D=A[0];A=A[1];A=A-(f=3*Math.max(-8,
Math.min(8,Math.floor(A/3))))+1;var C=D.length;return A===C?D:A>C?D+Array(A-C+1).join("0"):0<A?D.slice(0,A)+"."+D.slice(A):"0."+Array(1-A).join("0")+n(z,Math.max(0,B+A-1))[0]},X:function(z){return Math.round(z).toString(16).toUpperCase()},x:function(z){return Math.round(z).toString(16)}},t=Array.prototype.map,w="y z a f p n  m  k M G T P E Z Y".split(" "),x;d({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});p.FormatSpecifier=h;p.formatDefaultLocale=d;p.formatLocale=c;p.formatSpecifier=
g;p.precisionFixed=function(z){return Math.max(0,-k(Math.abs(z)))};p.precisionPrefix=function(z,B){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(k(B)/3)))-k(Math.abs(z)))};p.precisionRound=function(z,B){z=Math.abs(z);B=Math.abs(B)-z;return Math.max(0,k(B)-k(z))+1};Object.defineProperty(p,"__esModule",{value:!0})})},{}],168:[function(b,N,G){(function(p,n){"object"===typeof G&&"undefined"!==typeof N?n(G,b("d3-geo"),b("d3-array")):n(p.d3=p.d3||{},p.d3,p.d3)})(this,function(p,n,k){function m(Ha){return 1<
Ha?Bc:-1>Ha?-Bc:Math.asin(Ha)}function a(Ha){return 1<Ha?0:-1>Ha?Yb:Math.acos(Ha)}function g(Ha){return 0<Ha?Math.sqrt(Ha):0}function h(Ha){return(Mc(Ha)-Mc(-Ha))/2}function r(Ha){return(Mc(Ha)+Mc(-Ha))/2}function l(Ha){function Ga(eb,lb){var Cb=$b(eb),Zb=$b(lb);lb=zb(lb);Cb*=Zb;Cb=-((1-Cb?qd((1+Cb)/2)/(1-Cb):-.5)+Sa/(1+Cb));return[Cb*Zb*zb(eb),Cb*lb]}var Oa=qc(Ha/2),Sa=2*qd($b(Ha/2))/(Oa*Oa);Ga.invert=function(eb,lb){var Cb=g(eb*eb+lb*lb),Zb=-Ha/2,Lb=50;if(!Cb)return[0,0];do{var ec=Zb/2;var hc=$b(ec);
ec=zb(ec);var rc=ec/hc,Fc=-qd(Rc(hc));Zb-=hc=(2/rc*Fc-Sa*rc-Cb)/(-Fc/(ec*ec)+1-Sa/(2*hc*hc))*(0>hc?.7:1)}while(1E-6<Rc(hc)&&0<--Lb);Lb=zb(Zb);return[Mb(eb*Lb,Cb*$b(Zb)),m(lb*Lb/Cb)]};return Ga}function c(Ha,Ga){var Oa=$b(Ga);var Sa=(Sa=a(Oa*$b(Ha/=2)))?Sa/Math.sin(Sa):1;return[2*Oa*zb(Ha)*Sa,zb(Ga)*Sa]}function d(Ha){function Ga(Zb,Lb){var ec=$b(Lb),hc=$b(Zb/=2);return[(1+ec)*zb(Zb),(eb*Lb>-Mb(hc,lb)-.001?0:10*-eb)+Cb+zb(Lb)*Sa-(1+ec)*Oa*hc]}var Oa=zb(Ha),Sa=$b(Ha),eb=0<=Ha?1:-1,lb=qc(eb*Ha),Cb=(1+
Oa-Sa)/2;Ga.invert=function(Zb,Lb){var ec=0,hc=0,rc=50;do{var Fc=$b(ec),jd=zb(ec),Dd=$b(hc),ye=zb(hc),Ae=1+Dd,Xe=Ae*jd-Zb,Vf=Cb+ye*Sa-Ae*Oa*Fc-Lb,Je=Ae*Fc/2,Tf=-jd*ye;jd=Oa*Ae*jd/2;Dd=Sa*Dd+Oa*Fc*ye;Fc=Tf*jd-Dd*Je;Tf=(Vf*Tf-Xe*Dd)/Fc/2;Xe=(Xe*jd-Vf*Je)/Fc;2<Rc(Xe)&&(Xe/=2);ec-=Tf;hc-=Xe}while((1E-6<Rc(Tf)||1E-6<Rc(Xe))&&0<--rc);return eb*hc>-Mb($b(ec),lb)-.001?[2*ec,hc]:null};return Ga}function e(Ha,Ga){Ga=qc(Ga/2);var Oa=g(1-Ga*Ga),Sa=1+Oa*$b(Ha/=2);Ha=zb(Ha)*Oa/Sa;Ga/=Sa;Sa=Ha*Ha;Oa=Ga*Ga;return[4/
3*Ha*(3+Sa-3*Oa),4/3*Ga*(3+3*Sa-Oa)]}function f(Ha,Ga){var Oa=Rc(Ga);return Oa<bd?[Ha,qd(qc(bd+Ga/2))]:[Ha*$b(Oa)*(2*Vc-1/zb(Oa)),oe(Ga)*(2*Vc*(Oa-bd)-qd(qc(Oa/2)))]}function q(Ha){function Ga(Sa,eb){eb=n.geoAzimuthalEquidistantRaw(Sa,eb);if(Rc(Sa)>Bc){Sa=Mb(eb[1],eb[0]);var lb=g(eb[0]*eb[0]+eb[1]*eb[1]),Cb=Oa*Be((Sa-Bc)/Oa)+Bc,Zb=Mb(zb(Sa-=Cb),2-$b(Sa));Sa=Cb+m(Yb/lb*zb(Zb))-Zb;eb[0]=lb*$b(Sa);eb[1]=lb*zb(Sa)}return eb}var Oa=2*Yb/Ha;Ga.invert=function(Sa,eb){var lb=g(Sa*Sa+eb*eb);if(lb>Bc){var Cb=
Mb(eb,Sa);Sa=Oa*Be((Cb-Bc)/Oa)+Bc;eb=Cb>Sa?-1:1;Cb=lb*$b(Sa-Cb);Cb=1/qc(eb*a((Cb-Yb)/g(Yb*(Yb-2*Cb)+lb*lb)));Cb=Sa+2*Gd((Cb+eb*g(Cb*Cb-3))/3);Sa=lb*$b(Cb);eb=lb*zb(Cb)}return n.geoAzimuthalEquidistantRaw.invert(Sa,eb)};return Ga}function t(Ha,Ga){function Oa(Sa,eb){Sa=n.geoAzimuthalEqualAreaRaw(Sa/Ga,eb);Sa[0]*=Ha;return Sa}2>arguments.length&&(Ga=Ha);if(1===Ga)return n.geoAzimuthalEqualAreaRaw;if(Infinity===Ga)return w;Oa.invert=function(Sa,eb){Sa=n.geoAzimuthalEqualAreaRaw.invert(Sa/Ha,eb);Sa[0]*=
Ga;return Sa};return Oa}function w(Ha,Ga){return[Ha*$b(Ga)/$b(Ga/=2),2*zb(Ga)]}function x(Ha,Ga,Oa){var Sa=100;Oa=void 0===Oa?0:+Oa;Ga=+Ga;do{var eb=Ha(Oa);var lb=Ha(Oa+1E-6);eb===lb&&(lb=eb+1E-6);Oa-=eb=-1E-6*(eb-Ga)/(eb-lb)}while(0<Sa--&&1E-6<Rc(eb));return 0>Sa?NaN:Oa}function z(Ha,Ga,Oa){void 0===Ga&&(Ga=40);void 0===Oa&&(Oa=1E-12);return function(Sa,eb,lb,Cb){lb=void 0===lb?0:+lb;Cb=void 0===Cb?0:+Cb;for(var Zb=0;Zb<Ga;Zb++){var Lb=Ha(lb,Cb),ec=Lb[0]-Sa,hc=Lb[1]-eb;if(Rc(ec)<Oa&&Rc(hc)<Oa)break;
var rc=ec*ec+hc*hc;if(rc>Fc)lb-=Dd/=2,Cb-=Ae/=2;else{var Fc=rc;rc=(0<lb?-1:1)*Oa;var jd=(0<Cb?-1:1)*Oa;var Dd=Ha(lb+rc,Cb);var ye=Ha(lb,Cb+jd);var Ae=(Dd[0]-Lb[0])/rc;rc=(Dd[1]-Lb[1])/rc;Dd=(ye[0]-Lb[0])/jd;Lb=(ye[1]-Lb[1])/jd;jd=Lb*Ae-rc*Dd;jd=(.5>Rc(jd)?.5:1)/jd;Dd=(hc*Dd-ec*Lb)*jd;Ae=(ec*rc-hc*Ae)*jd;lb+=Dd;Cb+=Ae;if(Rc(Dd)<Oa&&Rc(Ae)<Oa)break}}return[lb,Cb]}}function B(){function Ha(Oa,Sa){if(-1.4>Oa+Sa){var eb=(Oa-Sa+1.6)*(Oa+Sa+1.4)/8;Oa+=eb;Sa-=.8*eb*zb(Sa+Yb/2)}eb=Ga(Oa,Sa);Oa=(1-$b(Oa*Sa))/
12;0>eb[1]&&(eb[0]*=1+Oa);0<eb[1]&&(eb[1]*=1+Oa/1.5*eb[0]*eb[0]);return eb}var Ga=t(1.68,2);Ha.invert=z(Ha);return Ha}function A(Ha,Ga){Ha*=zb(Ga);var Oa=30,Sa;do Ga-=Sa=(Ga+zb(Ga)-Ha)/(1+$b(Ga));while(1E-6<Rc(Sa)&&0<--Oa);return Ga/2}function D(Ha,Ga,Oa){function Sa(eb,lb){return[Ha*eb*$b(lb=A(Oa,lb)),Ga*zb(lb)]}Sa.invert=function(eb,lb){return lb=m(lb/Ga),[eb/(Ha*$b(lb)),m((2*lb+zb(2*lb))/Oa)]};return Sa}function C(Ha,Ga){var Oa=A(Yb,Ga);return[2.00276*Ha/(1/$b(Ga)+1.11072/$b(Oa)),(Ga+Vc*zb(Oa))/
2.00276]}function v(Ha){var Ga=0,Oa=n.geoProjectionMutator(Ha);Ha=Oa(Ga);Ha.parallel=function(Sa){return arguments.length?Oa(Ga=Sa*oc):Ga*vc};return Ha}function y(Ha,Ga){return[Ha*$b(Ga),Ga]}function F(Ha){function Ga(Sa,eb){var lb=Oa+Ha-eb;Sa=lb?Sa*$b(eb)/lb:lb;return[lb*zb(Sa),Oa-lb*$b(Sa)]}if(!Ha)return y;var Oa=1/qc(Ha);Ga.invert=function(Sa,eb){var lb=g(Sa*Sa+(eb=Oa-eb)*eb),Cb=Oa+Ha-lb;return[lb/$b(Cb)*Mb(Sa,eb),Cb]};return Ga}function J(Ha){function Ga(Oa,Sa){Oa=(Sa=Bc-Sa)?Oa*Ha*zb(Sa)/Sa:Sa;
return[Sa*zb(Oa)/Ha,Bc-Sa*$b(Oa)]}Ga.invert=function(Oa,Sa){Oa*=Ha;var eb=Bc-Sa;Sa=g(Oa*Oa+eb*eb);Oa=Mb(Oa,eb);return[(Sa?Sa/zb(Sa):1)*Oa/Ha,Bc-Sa]};return Ga}function K(Ha,Ga,Oa,Sa,eb,lb){var Cb=$b(lb);if(1<Rc(Ha)||1<Rc(lb))Ha=a(Oa*eb+Ga*Sa*Cb);else{Ha=zb(Ha/2);var Zb=zb(lb/2);Ha=2*m(g(Ha*Ha+Ga*Sa*Zb*Zb))}return 1E-6<Rc(Ha)?[Ha,Mb(Sa*zb(lb),Ga*eb-Oa*Sa*Cb)]:[0,0]}function O(Ha,Ga,Oa){return a((Ha*Ha+Ga*Ga-Oa*Oa)/(2*Ha*Ga))}function I(Ha,Ga,Oa){var Sa=[[Ha[0],Ha[1],zb(Ha[1]),$b(Ha[1])],[Ga[0],Ga[1],
zb(Ga[1]),$b(Ga[1])],[Oa[0],Oa[1],zb(Oa[1]),$b(Oa[1])]];Ha=Sa[2];for(Oa=0;3>Oa;++Oa,Ha=Ga)Ga=Sa[Oa],Ha.v=K(Ga[1]-Ha[1],Ha[3],Ha[2],Ga[3],Ga[2],Ga[0]-Ha[0]),Ha.point=[0,0];Ha=O(Sa[0].v[0],Sa[2].v[0],Sa[1].v[0]);var eb=O(Sa[0].v[0],Sa[1].v[0],Sa[2].v[0]),lb=Yb-Ha;Sa[2].point[1]=0;Sa[0].point[0]=-(Sa[1].point[0]=Sa[0].v[0]/2);var Cb=[Sa[2].point[0]=Sa[0].point[0]+Sa[2].v[0]*$b(Ha),2*(Sa[0].point[1]=Sa[1].point[1]=Sa[2].v[0]*zb(Ha))];return function(Zb,Lb){var ec=zb(Lb),hc=$b(Lb),rc=Array(3),Fc;for(Fc=
0;3>Fc;++Fc){var jd=Sa[Fc];rc[Fc]=K(Lb-jd[1],jd[3],jd[2],hc,ec,Zb-jd[0]);if(!rc[Fc][0])return jd.point;var Dd=rc[Fc];jd=rc[Fc][1]-jd.v[1];jd-=2*Yb*Hd((jd+Yb)/(2*Yb));Dd[1]=jd}Zb=Cb.slice();for(Fc=0;3>Fc;++Fc)Lb=O(Sa[Fc].v[0],rc[Fc][0],rc[2==Fc?0:Fc+1][0]),0>rc[Fc][1]&&(Lb=-Lb),Fc?1==Fc?(Lb=eb-Lb,Zb[0]-=rc[Fc][0]*$b(Lb),Zb[1]-=rc[Fc][0]*zb(Lb)):(Lb=lb-Lb,Zb[0]+=rc[Fc][0]*$b(Lb),Zb[1]+=rc[Fc][0]*zb(Lb)):(Zb[0]+=rc[Fc][0]*$b(Lb),Zb[1]-=rc[Fc][0]*zb(Lb));Zb[0]/=3;Zb[1]/=3;return Zb}}function L(Ha){return Ha[0]*=
oc,Ha[1]*=oc,Ha}function H(Ha,Ga,Oa){var Sa=n.geoCentroid({type:"MultiPoint",coordinates:[Ha,Ga,Oa]});Sa=[-Sa[0],-Sa[1]];var eb=n.geoRotation(Sa);Ha=I(L(eb(Ha)),L(eb(Ga)),L(eb(Oa)));Ha.invert=z(Ha);Ha=n.geoProjection(Ha).rotate(Sa);var lb=Ha.center;delete Ha.rotate;Ha.center=function(Cb){return arguments.length?lb(eb(Cb)):eb.invert(lb())};return Ha.clipAngle(90)}function M(Ha,Ga){Ga=g(1-zb(Ga));return[2/Pc*Ha*Ga,Pc*(1-Ga)]}function Q(Ha){function Ga(Sa,eb){return[Sa,(Sa?Sa/zb(Sa):1)*(zb(eb)*$b(Sa)-
Oa*$b(eb))]}var Oa=qc(Ha);Ga.invert=Oa?function(Sa,eb){Sa&&(eb*=zb(Sa)/Sa);var lb=$b(Sa);return[Sa,2*Mb(g(lb*lb+Oa*Oa-eb*eb)-lb,Oa-eb)]}:function(Sa,eb){return[Sa,m(Sa?eb*qc(Sa)/Sa:eb)]};return Ga}function Z(Ha,Ga){return[Td*Ha*(2*$b(2*Ga/3)-1)/Pc,Td*Pc*zb(Ga/3)]}function ca(Ha){function Ga(Sa,eb){return[Sa*Oa,zb(eb)/Oa]}var Oa=$b(Ha);Ga.invert=function(Sa,eb){return[Sa/Oa,m(eb*Oa)]};return Ga}function W(Ha){function Ga(Sa,eb){return[Sa*Oa,(1+Oa)*qc(eb/2)]}var Oa=$b(Ha);Ga.invert=function(Sa,eb){return[Sa/
Oa,2*Gd(eb/(1+Oa))]};return Ga}function T(Ha,Ga){var Oa=g(8/(3*Yb));return[Oa*Ha*(1-Rc(Ga)/Yb),Oa*Ga]}function U(Ha,Ga){var Oa=g(4-3*zb(Rc(Ga)));return[2/g(6*Yb)*Ha*Oa,oe(Ga)*g(2*Yb/3)*(2-Oa)]}function ha(Ha,Ga){var Oa=g(Yb*(4+Yb));return[2/Oa*Ha*(1+g(1-4*Ga*Ga/(Yb*Yb))),4/Oa*Ga]}function Y(Ha,Ga){var Oa=(2+Bc)*zb(Ga);Ga/=2;for(var Sa=0,eb=Infinity;10>Sa&&1E-6<Rc(eb);Sa++)eb=$b(Ga),Ga-=eb=(Ga+zb(Ga)*(eb+2)-Oa)/(2*eb*(1+eb));return[2/g(Yb*(4+Yb))*Ha*(1+$b(Ga)),2*g(Yb/(4+Yb))*zb(Ga)]}function ba(Ha,
Ga){return[Ha*(1+$b(Ga))/g(2+Yb),2*Ga/g(2+Yb)]}function ja(Ha,Ga){for(var Oa=(1+Bc)*zb(Ga),Sa=0,eb=Infinity;10>Sa&&1E-6<Rc(eb);Sa++)Ga-=eb=(Ga+zb(Ga)-Oa)/(1+$b(Ga));Oa=g(2+Yb);return[Ha*(1+$b(Ga))/Oa,2*Ga/Oa]}function ma(Ha,Ga){var Oa=zb(Ha/=2);Ha=$b(Ha);var Sa=g($b(Ga)),eb=$b(Ga/=2);Ga=zb(Ga)/(eb+Vc*Ha*Sa);var lb=g(2/(1+Ga*Ga));Oa=g((Vc*eb+(Ha+Oa)*Sa)/(Vc*eb+(Ha-Oa)*Sa));return[Oe*(lb*(Oa-1/Oa)-2*qd(Oa)),Oe*(lb*Ga*(Oa+1/Oa)-2*Gd(Ga))]}function ia(Ha,Ga){Ga=qc(Ga/2);return[Ha*Ve*g(1-Ga*Ga),(1+Ve)*
Ga]}function oa(Ha,Ga){var Oa=Ga/2,Sa=$b(Oa);return[2*Ha/Pc*$b(Ga)*Sa*Sa,Pc*qc(Oa)]}function xa(Ha){function Ga(Lb,ec){var hc=$b(ec),rc=zb(ec);return[hc/(eb+Ha*hc)*Lb,eb*ec+Ha*rc]}function Oa(Lb,ec){Lb=Ga(Lb,ec);return[Lb[0]*Zb,Lb[1]/Zb]}function Sa(Lb){return Oa(0,Lb)[1]}var eb=1-Ha,lb=Ga(Yb,0)[0]-Ga(-Yb,0)[0],Cb=Ga(0,Bc)[1]-Ga(0,-Bc)[1],Zb=g(2*Cb/lb);Oa.invert=function(Lb,ec){ec=x(Sa,ec);return[Lb/Zb*(Ha+eb/$b(ec)),ec]};return Oa}function ra(Ha){return[2*Ha[0],2*Gd(zb(Ha[1]*oc))*vc]}function la(Ha,
Ga){function Oa(lb,Cb){lb=n.geoAzimuthalEquidistantRaw(lb,Cb);Cb=lb[0];var Zb=lb[1],Lb=Cb*Cb+Zb*Zb;if(Lb>eb){var ec=g(Lb);Cb=Mb(Zb,Cb);Lb=Sa*Be(Cb/Sa);Zb=Cb-Lb;var hc=Ha*$b(Zb),rc=(Ha*zb(Zb)-Zb*zb(hc))/(Bc-hc),Fc=ka(Zb,rc),jd=(Yb-Ha)/na(Fc,hc,Yb);Cb=ec;var Dd=50,ye;do Cb-=ye=(Ha+na(Fc,hc,Cb)*jd-ec)/(Fc(Cb)*jd);while(1E-6<Rc(ye)&&0<--Dd);Zb*=zb(Cb);Cb<Bc&&(Zb-=rc*(Cb-Bc));ec=zb(Lb);Lb=$b(Lb);lb[0]=Cb*Lb-Zb*ec;lb[1]=Cb*ec+Zb*Lb}return lb}var Sa=2*Yb/Ga,eb=Ha*Ha;Oa.invert=function(lb,Cb){var Zb=lb*lb+
Cb*Cb;if(Zb>eb){var Lb=g(Zb);Cb=Mb(Cb,lb);Zb=Sa*Be(Cb/Sa);Cb-=Zb;lb=Lb*$b(Cb);Cb=Lb*zb(Cb);Lb=lb-Bc;for(var ec=zb(lb),hc=Cb/ec,rc=lb<Bc?Infinity:0,Fc=10;;){var jd=Ha*zb(hc),Dd=Ha*$b(hc),ye=zb(Dd),Ae=Bc-Dd,Xe=(jd-hc*ye)/Ae,Vf=ka(hc,Xe);if(1E-12>Rc(rc)||!--Fc)break;hc-=rc=(hc*ec-Xe*Lb-Cb)/(ec-2*Lb*(Ae*(Dd+hc*jd*$b(Dd)-ye)-jd*(jd-hc*ye))/(Ae*Ae))}Lb=Ha+na(Vf,Dd,lb)*(Yb-Ha)/na(Vf,Dd,Yb);Cb=Zb+hc;lb=Lb*$b(Cb);Cb=Lb*zb(Cb)}return n.geoAzimuthalEquidistantRaw.invert(lb,Cb)};return Oa}function ka(Ha,Ga){return function(Oa){var Sa=
Ha*$b(Oa);Oa<Bc&&(Sa-=Ga);return g(1+Sa*Sa)}}function na(Ha,Ga,Oa){var Sa=(Oa-Ga)/50;Oa=Ha(Ga)+Ha(Oa);for(var eb=1;50>eb;++eb)Oa+=2*Ha(Ga+=Sa);return.5*Oa*Sa}function qa(Ha,Ga,Oa,Sa,eb,lb,Cb,Zb){function Lb(ec,hc){if(!hc)return[Ha*ec/Yb,0];var rc=hc*hc,Fc=Ha+rc*(Ga+rc*(Oa+rc*Sa)),jd=hc*(eb-1+rc*(lb-Zb+rc*Cb));jd=(Fc*Fc+jd*jd)/(2*jd);ec=ec*m(Fc/jd)/Yb;return[jd*zb(ec),hc*(1+rc*Zb)+jd*(1-$b(ec))]}8>arguments.length&&(Zb=0);Lb.invert=function(ec,hc){var rc=Yb*ec/Ha,Fc=hc,jd=50;do{var Dd=Fc*Fc,ye=Ha+
Dd*(Ga+Dd*(Oa+Dd*Sa)),Ae=Fc*(eb-1+Dd*(lb-Zb+Dd*Cb)),Xe=ye*ye+Ae*Ae,Vf=2*Ae;var Je=Xe/Vf;var Tf=Je*Je;var Mf=m(ye/Je)/Yb;var tf=rc*Mf,$g=ye*ye,Kg=(2*Ga+Dd*(4*Oa+6*Dd*Sa))*Fc,Ug=eb+Dd*(3*lb+5*Dd*Cb);Ae=(2*(ye*Kg+Ae*(Ug-1))*Vf-2*Xe*(Ug-1))/(Vf*Vf);Xe=$b(tf);Ug=zb(tf);Vf=Je*Xe;tf=Je*Ug;Tf=rc/Yb*(1/g(1-$g/Tf))*(Kg*Je-ye*Ae)/Tf;ye=tf-ec;Dd=Fc*(1+Dd*Zb)+Je-Vf-hc;Je=Ae*Ug+Vf*Tf;$g=Vf*Mf;Ae=1+Ae-(Ae*Xe-tf*Tf);Mf*=tf;Xe=Je*Mf-Ae*$g;if(!Xe)break;rc-=Je=(Dd*Je-ye*Ae)/Xe;Fc-=Mf=(ye*Mf-Dd*$g)/Xe}while((1E-6<Rc(Je)||
1E-6<Rc(Mf))&&0<--jd);return[rc,Fc]};return Lb}function ta(Ha,Ga){var Oa=Ha*Ha,Sa=Ga*Ga;return[Ha*(1-.162388*Sa)*(.87-9.52426E-4*Oa*Oa),Ga*(1+Sa/12)]}function za(Ha){function Ga(Sa,eb){var lb=0<Sa?-.5:.5;Sa=Ha(Sa+lb*Yb,eb);Sa[0]-=lb*Oa;return Sa}var Oa=Ha(Bc,0)[0]-Ha(-Bc,0)[0];Ha.invert&&(Ga.invert=function(Sa,eb){var lb=0<Sa?-.5:.5;Sa=Ha.invert(Sa+lb*Oa,eb);lb=Sa[0]-lb*Yb;lb<-Yb?lb+=2*Yb:lb>Yb&&(lb-=2*Yb);Sa[0]=lb;return Sa});return Ga}function Ia(Ha,Ga){var Oa=oe(Ha),Sa=oe(Ga),eb=$b(Ga),lb=$b(Ha)*
eb;Ha=zb(Ha)*eb;Ga=zb(Sa*Ga);Ha=Rc(Mb(Ha,Ga));Ga=m(lb);1E-6<Rc(Ha-Bc)&&(Ha%=Bc);lb=Xa(Ha>Yb/4?Bc-Ha:Ha,Ga);Ha>Yb/4&&(Ga=lb[0],lb[0]=-lb[1],lb[1]=-Ga);return lb[0]*=Oa,lb[1]*=-Sa,lb}function Xa(Ha,Ga){if(Ga===Bc)return[0,0];var Oa=zb(Ga),Sa=Oa*Oa,eb=Sa*Sa,lb=1+eb,Cb=1+3*eb,Zb=1-eb,Lb=m(1/g(lb)),ec=Zb+Sa*lb*Lb,hc=(1-Oa)/ec,rc=g(hc),Fc=hc*lb,jd=g(Fc),Dd=rc*Zb;if(0===Ha)return[0,-(Dd+Sa*jd)];var ye=$b(Ga),Ae=1/ye,Xe=2*Oa*ye;Lb=(-ec*ye-(1-Oa)*(-3*Sa+Lb*Cb)*Xe)/(ec*ec);Oa=-Ae*Xe;lb=-Ae*(Sa*lb*Lb+hc*Cb*
Xe);Zb=-2*Ae*(.5*Lb/rc*Zb-2*Sa*rc*Xe);rc=4*Ha/Yb;if(Ha>.222*Yb||Ga<Yb/4&&Ha>.175*Yb){Ga=(Dd+Sa*g(Fc*(1+eb)-Dd*Dd))/(1+eb);if(Ha>Yb/4)return[Ga,Ga];eb=Ga;Ae=.5*Ga;Ga=.5*(Ae+eb);Ha=50;do{Xe=g(Fc-Ga*Ga);Xe=Ga*(Zb+Oa*Xe)+lb*m(Ga/jd)-rc;if(!Xe)break;0>Xe?Ae=Ga:eb=Ga;Ga=.5*(Ae+eb)}while(1E-6<Rc(eb-Ae)&&0<--Ha)}else{Ga=1E-6;Ha=25;do Xe=Ga*Ga,eb=g(Fc-Xe),Cb=Zb+Oa*eb,Ae=Ga*Cb+lb*m(Ga/jd)-rc,Xe=Cb+(lb-Oa*Xe)/eb,Ga-=eb=eb?Ae/Xe:0;while(1E-6<Rc(eb)&&0<--Ha)}return[Ga,-Dd-Sa*g(Fc-Ga*Ga)]}function $a(Ha,Ga){if(1E-6>
Ga){var Oa=zb(Ha);var Sa=$b(Ha);var eb=Ga*(Ha-Oa*Sa)/4;return[Oa-eb*Sa,Sa+eb*Oa,1-Ga*Oa*Oa/2,Ha-eb]}if(.999999<=Ga){eb=(1-Ga)/4;Sa=r(Ha);Oa=Mc(2*Ha);Oa=(Oa-1)/(Oa+1);Ga=1/Sa;var lb=Sa*h(Ha);return[Oa+eb*(lb-Ha)/(Sa*Sa),Ga-eb*Oa*Ga*(lb-Ha),Ga+eb*Oa*Ga*(lb+Ha),2*Gd(Mc(Ha))-Bc+eb*(lb-Ha)/Sa]}var Cb=[1,0,0,0,0,0,0,0,0],Zb=[g(Ga),0,0,0,0,0,0,0,0],Lb=0;Sa=g(1-Ga);for(lb=1;1E-6<Rc(Zb[Lb]/Cb[Lb])&&8>Lb;)eb=Cb[Lb++],Zb[Lb]=(eb-Sa)/2,Cb[Lb]=(eb+Sa)/2,Sa=g(eb*Sa),lb*=2;Ga=lb*Cb[Lb]*Ha;do Oa=Zb[Lb]*zb(Sa=Ga)/
Cb[Lb],Ga=(m(Oa)+Ga)/2;while(--Lb);return[zb(Ga),Oa=$b(Ga),Oa/$b(Ga-Sa),Ga]}function gb(Ha,Ga){if(!Ga)return Ha;if(1===Ga)return qd(qc(Ha/2+bd));var Oa=1,Sa=g(1-Ga),eb=g(Ga);for(Ga=0;1E-6<Rc(eb);Ga++)Ha%Yb?(eb=Gd(Sa*qc(Ha)/Oa),0>eb&&(eb+=Yb),Ha+=eb+~~(Ha/Yb)*Yb):Ha+=Ha,eb=(Oa+Sa)/2,Sa=g(Oa*Sa),eb=((Oa=eb)-Sa)/2;return Ha/(ue(2,Ga)*Oa)}function sb(Ha,Ga){var Oa=(Vc-1)/(Vc+1),Sa=g(1-Oa*Oa),eb=gb(Bc,Sa*Sa),lb=qd(qc(Yb/4+Rc(Ga)/2));lb=Mc(-1*lb)/g(Oa);Oa=lb*$b(-1*Ha);var Cb=lb*zb(-1*Ha);Ha=Oa*Oa;lb=Cb+
1;Cb=1-Ha-Cb*Cb;Ha=[.5*((0<=Oa?Bc:-Bc)-Mb(Cb,2*Oa)),-.25*qd(Cb*Cb+4*Ha)+.5*qd(lb*lb+Ha)];Oa=Ha[0];Ha=Ha[1];Sa*=Sa;lb=Rc(Oa);Cb=Rc(Ha);Cb=h(Cb);if(lb){var Zb=1/zb(lb);lb=1/(qc(lb)*qc(lb));Cb=-(lb+Sa*Cb*Cb*Zb*Zb-1+Sa);Cb=(-Cb+g(Cb*Cb-4*(Sa-1)*lb))/2;Sa=[gb(Gd(1/g(Cb)),Sa)*oe(Oa),gb(Gd(g((Cb/lb-1)/Sa)),1-Sa)*oe(Ha)]}else Sa=[0,gb(Gd(Cb),1-Sa)*oe(Ha)];return[-Sa[1],(0<=Ga?1:-1)*(.5*eb-Sa[0])]}function jb(Ha){function Ga(lb,Cb){var Zb=eb(lb,Cb);lb=Zb[0];Cb=Zb[1];Zb=zb(Cb);Cb=$b(Cb);var Lb=$b(lb),ec=a(Oa*
Zb+Sa*Cb*Lb),hc=zb(ec);ec=1E-6<Rc(hc)?ec/hc:1;return[ec*Sa*zb(lb),(Rc(lb)>Bc?ec:-ec)*(Oa*Cb-Sa*Zb*Lb)]}var Oa=zb(Ha),Sa=$b(Ha),eb=vb(Ha);eb.invert=vb(-Ha);Ga.invert=function(lb,Cb){var Zb=g(lb*lb+Cb*Cb),Lb=-zb(Zb),ec=$b(Zb),hc=Zb*ec,rc=-Cb*Lb,Fc=Zb*Oa,jd=g(hc*hc+rc*rc-Fc*Fc);hc=Mb(hc*Fc+rc*jd,rc*Fc-hc*jd);lb=(Zb>Bc?-1:1)*Mb(lb*Lb,Zb*$b(hc)*ec+Cb*zb(hc)*Lb);return eb.invert(lb,hc)};return Ga}function vb(Ha){var Ga=zb(Ha),Oa=$b(Ha);return function(Sa,eb){var lb=$b(eb),Cb=$b(Sa)*lb;Sa=zb(Sa)*lb;eb=zb(eb);
return[Mb(Sa,Cb*Oa-eb*Ga),m(eb*Oa+Cb*Ga)]}}function qb(Ha){function Ga(hc,rc){var Fc=Rc(rc);if(Fc>Oa){var jd=Id(Ha-1,qe(0,Hd((hc+Yb)/Zb)));hc+=Yb*(Ha-1)/Ha-jd*Zb;hc=M(hc,Fc);hc[0]=hc[0]*yc/Sa-yc*(Ha-1)/(2*Ha)+jd*yc/Ha;hc[1]=eb+4*(hc[1]-lb)*Cb/yc;0>rc&&(hc[1]=-hc[1])}else hc=Gg(hc,rc);hc[0]*=Lb;hc[1]/=ec;return hc}var Oa=vg*oc,Sa=M(Yb,Oa)[0]-M(-Yb,Oa)[0],eb=Gg(0,Oa)[1],lb=M(0,Oa)[1],Cb=Pc-lb,Zb=yc/Ha,Lb=4/yc,ec=eb+Cb*Cb*4/yc;Ga.invert=function(hc,rc){hc/=Lb;rc*=ec;var Fc=Rc(rc);if(Fc>eb){var jd=Id(Ha-
1,qe(0,Hd((hc+Yb)/Zb)));hc=(hc+Yb*(Ha-1)/Ha-jd*Zb)*Sa/yc;hc=M.invert(hc,.25*(Fc-eb)*yc/Cb+lb);hc[0]-=Yb*(Ha-1)/Ha-jd*Zb;0>rc&&(hc[1]=-hc[1]);return hc}return Gg.invert(hc,rc)};return Ga}function Bb(Ha,Ga){return[Ha,Ga&1?89.999999:vg]}function ub(Ha,Ga){return[Ha,Ga&1?-89.999999:-vg]}function wb(Ha){return[.999999*Ha[0],Ha[1]]}function rb(Ha){function Ga(hc,rc){var Fc=1-zb(rc);if(Fc&&2>Fc){var jd=Bc-rc,Dd=25;do{var ye=zb(jd);var Ae=$b(jd);rc=eb+Mb(ye,Oa-Ae);Ae=1+ec-2*Oa*Ae;jd-=ye=(jd-Lb*eb-Oa*ye+Ae*
rc-.5*Fc*Cb)/(2*Oa*ye*rc)}while(1E-12<Rc(ye)&&0<--Dd);Fc=lb*g(Ae);hc=hc*rc/Yb}else Fc=lb*(Ha+Fc),hc=hc*eb/Yb;return[Fc*zb(hc),Zb-Fc*$b(hc)]}var Oa=1+Ha,Sa=zb(1/Oa),eb=m(Sa),lb=2*g(Yb/(Cb=Yb+4*eb*Oa)),Cb,Zb=.5*lb*(Oa+g(Ha*(2+Ha))),Lb=Ha*Ha,ec=Oa*Oa;Ga.invert=function(hc,rc){var Fc=hc*hc+(rc-=Zb)*rc;rc=(1+ec-Fc/(lb*lb))/(2*Oa);var jd=a(rc),Dd=zb(jd),ye=eb+Mb(Dd,Oa-rc);return[m(hc/g(Fc))*Yb/ye,m(1-2*(jd-Lb*eb-Oa*Dd+(1+ec-2*Oa*rc)*ye)/Cb)]};return Ga}function Ab(Ha,Ga){return-.7109889596207567<Ga?(Ha=
Yd(Ha,Ga),Ha[1]+=.0528035274542,Ha):y(Ha,Ga)}function Ma(Ha,Ga){return.7109889596207567<Rc(Ga)?(Ha=Yd(Ha,Ga),Ha[1]-=0<Ga?.0528035274542:-.0528035274542,Ha):y(Ha,Ga)}function La(Ha,Ga,Oa,Sa){function eb(rc){return g(1+Ha*$b(2*rc)+Ga*$b(4*rc))}function lb(rc){rc*=Oa;return(2*rc+(1+Ha-Ga/2)*zb(2*rc)+(Ha+Ga)/2*zb(4*rc)+Ga/2*zb(6*rc))/Oa}function Cb(rc){return eb(rc)*zb(rc)}var Zb=g(4*Yb/(2*Oa+(1+Ha-Ga/2)*zb(2*Oa)+(Ha+Ga)/2*zb(4*Oa)+Ga/2*zb(6*Oa))),Lb=g(Sa*zb(Oa)*g((1+Ha*$b(2*Oa)+Ga*$b(4*Oa))/(1+Ha+Ga))),
ec=Oa*lb(1),hc=function(rc,Fc){var jd=Oa*x(lb,ec*zb(Fc)/Oa,Fc/Yb);isNaN(jd)&&(jd=Oa*oe(Fc));Fc=Zb*eb(jd);return[Fc*Lb*rc/Yb*$b(jd),Fc/Lb*zb(jd)]};hc.invert=function(rc,Fc){Fc=x(Cb,Fc*Lb/Zb);return[rc*Yb/($b(Fc)*Zb*Lb*eb(Fc)),m(Oa*lb(Fc/Oa)/ec)]};0===Oa&&(Zb=g(Sa/Yb),hc=function(rc,Fc){return[rc*Zb,zb(Fc)/Zb]},hc.invert=function(rc,Fc){return[rc/Zb,m(Fc*Zb)]});return hc}function ya(Ha,Ga,Oa,Sa,eb,lb,Cb,Zb,Lb,ec,hc){if(hc.nanEncountered)return NaN;var rc=Oa-Ga;var Fc=Ha(Ga+.25*rc);var jd=Ha(Oa-.25*
rc);if(isNaN(Fc))hc.nanEncountered=!0;else if(isNaN(jd))hc.nanEncountered=!0;else{var Dd=rc*(Sa+4*Fc+eb)/12;var ye=rc*(eb+4*jd+lb)/12;var Ae=Dd+ye;Cb=(Ae-Cb)/15;if(ec>Lb)return hc.maxDepthCount++,Ae+Cb;if(Math.abs(Cb)<Zb)return Ae+Cb;rc=Ga+.5*rc;Ga=ya(Ha,Ga,rc,Sa,Fc,eb,Dd,.5*Zb,Lb,ec+1,hc);if(isNaN(Ga))return hc.nanEncountered=!0,NaN;Ha=ya(Ha,rc,Oa,eb,jd,lb,ye,.5*Zb,Lb,ec+1,hc);return isNaN(Ha)?(hc.nanEncountered=!0,NaN):Ga+Ha}}function Aa(Ha,Ga,Oa,Sa,eb){void 0===Sa&&(Sa=1E-8);void 0===eb&&(eb=20);
var lb=Ha(Ga),Cb=Ha(.5*(Ga+Oa)),Zb=Ha(Oa);return ya(Ha,Ga,Oa,lb,Cb,Zb,(lb+4*Cb+Zb)*(Oa-Ga)/6,Sa,eb,1,{maxDepthCount:0,nanEncountered:!1})}function Ka(Ha,Ga,Oa){function Sa(hc){return Ha+(1-Ha)*ue(1-ue(hc,Ga),1/Ga)}function eb(hc){var rc=0,Fc=1E3,jd=500;do Zb[jd]>hc?Fc=jd:rc=jd,jd=rc+Fc>>1;while(jd>rc);(rc=Zb[jd+1]-Zb[jd])&&(rc=(hc-Zb[jd+1])/rc);return(jd+1+rc)/1E3}for(var lb=1/Aa(Sa,0,1,1E-4),Cb=1.00000001*lb,Zb=[],Lb=0;1E3>=Lb;Lb++)Zb.push(Aa(Sa,0,Lb/1E3,1E-4)*Cb);var ec=2*eb(1)/Yb*lb/Oa;Oa=function(hc,
rc){var Fc=eb(Rc(zb(rc)));hc*=Sa(Fc);Fc/=ec;return[hc,0<=rc?Fc:-Fc]};Oa.invert=function(hc,rc){var Fc;rc*=ec;1>Rc(rc)&&(Fc=oe(rc)*m(Aa(Sa,0,Rc(rc),1E-4)*lb));return[hc/Sa(Rc(rc)),Fc]};return Oa}function Ta(Ha,Ga){for(var Oa=-1,Sa=Ha.length,eb=Ha[0],lb,Cb,Zb,Lb=[];++Oa<Sa;){lb=Ha[Oa];Cb=(lb[0]-eb[0])/Ga;Zb=(lb[1]-eb[1])/Ga;for(var ec=0;ec<Ga;++ec)Lb.push([eb[0]+ec*Cb,eb[1]+ec*Zb]);eb=lb}Lb.push(lb);return Lb}function bb(Ha){var Ga=[],Oa,Sa=Ha[0].length;for(Oa=0;Oa<Sa;++Oa){var eb=Ha[0][Oa];var lb=
eb[0][0];var Cb=eb[0][1];var Zb=eb[1][1];var Lb=eb[2][0];eb=eb[2][1];Ga.push(Ta([[lb+1E-6,Cb+1E-6],[lb+1E-6,Zb-1E-6],[Lb-1E-6,Zb-1E-6],[Lb-1E-6,eb+1E-6]],30))}for(Oa=Ha[1].length-1;0<=Oa;--Oa)eb=Ha[1][Oa],lb=eb[0][0],Cb=eb[0][1],Zb=eb[1][1],Lb=eb[2][0],eb=eb[2][1],Ga.push(Ta([[Lb-1E-6,eb-1E-6],[Lb-1E-6,Zb+1E-6],[lb+1E-6,Zb+1E-6],[lb+1E-6,Cb-1E-6]],30));return{type:"Polygon",coordinates:[k.merge(Ga)]}}function cb(Ha,Ga,Oa){function Sa(Lb,ec){for(var hc=0>ec?-1:1,rc=Ga[+(0>ec)],Fc=0,jd=rc.length-1;Fc<
jd&&Lb>rc[Fc][2][0];++Fc);Lb=Ha(Lb-rc[Fc][1][0],ec);Lb[0]+=Ha(rc[Fc][1][0],hc*ec>hc*rc[Fc][0][1]?rc[Fc][0][1]:ec)[0];return Lb}var eb,lb;Oa?Sa.invert=Oa(Sa):Ha.invert&&(Sa.invert=function(Lb,ec){for(var hc=lb[+(0>ec)],rc=Ga[+(0>ec)],Fc=0,jd=hc.length;Fc<jd;++Fc){var Dd=hc[Fc];if(Dd[0][0]<=Lb&&Lb<Dd[1][0]&&Dd[0][1]<=ec&&ec<Dd[1][1])return hc=Ha.invert(Lb-Ha(rc[Fc][1][0],0)[0],ec),hc[0]+=rc[Fc][1][0],rc=Sa(hc[0],hc[1]),Lb=[Lb,ec],1E-6>Rc(rc[0]-Lb[0])&&1E-6>Rc(rc[1]-Lb[1])?hc:null}});var Cb=n.geoProjection(Sa),
Zb=Cb.stream;Cb.stream=function(Lb){var ec=Cb.rotate(),hc=Zb(Lb),rc=(Cb.rotate([0,0]),Zb(Lb));Cb.rotate(ec);hc.sphere=function(){n.geoStream(eb,rc)};return hc};Cb.lobes=function(Lb){if(!arguments.length)return Ga.map(function(ec){return ec.map(function(hc){return[[hc[0][0]*vc,hc[0][1]*vc],[hc[1][0]*vc,hc[1][1]*vc],[hc[2][0]*vc,hc[2][1]*vc]]})});eb=bb(Lb);Ga=Lb.map(function(ec){return ec.map(function(hc){return[[hc[0][0]*oc,hc[0][1]*oc],[hc[1][0]*oc,hc[1][1]*oc],[hc[2][0]*oc,hc[2][1]*oc]]})});lb=Ga.map(function(ec){return ec.map(function(hc){var rc=
Ha(hc[0][0],hc[0][1])[0],Fc=Ha(hc[2][0],hc[2][1])[0],jd=Ha(hc[1][0],hc[0][1])[1];hc=Ha(hc[1][0],hc[1][1])[1];if(jd>hc){var Dd=jd;jd=hc;hc=Dd}return[[rc,jd],[Fc,hc]]})});return Cb};null!=Ga&&Cb.lobes(Ga);return Cb}function Eb(Ha,Ga){return[3/yc*Ha*g(Yb*Yb/3-Ga*Ga),Ga]}function Pb(Ha){function Ga(Oa,Sa){if(1E-6>Rc(Rc(Sa)-Bc))return[0,0>Sa?-2:2];Sa=zb(Sa);Sa=ue((1+Sa)/(1-Sa),Ha/2);var eb=.5*(Sa+1/Sa)+$b(Oa*=Ha);return[2*zb(Oa)/eb,(Sa-1/Sa)/eb]}Ga.invert=function(Oa,Sa){var eb=Rc(Sa);if(1E-6>Rc(eb-2))return Oa?
null:[0,oe(Sa)*Bc];if(2<eb)return null;Oa/=2;Sa/=2;eb=Oa*Oa;var lb=Sa*Sa;Sa=2*Sa/(1+eb+lb);Sa=ue((1+Sa)/(1-Sa),1/Ha);return[Mb(2*Oa,1-eb-lb)/Ha,m((Sa-1)/(Sa+1))]};return Ga}function fc(Ha,Ga){return[Ha*(1+g($b(Ga)))/2,Ga/($b(Ga/2)*$b(Ha/6))]}function pb(Ha,Ga){var Oa=Ha*Ha,Sa=Ga*Ga;return[Ha*(.975534+Sa*(-.119161+-.0143059*Oa+-.0547009*Sa)),Ga*(1.00384+Oa*(.0802894+-.02855*Sa+1.99025E-4*Oa)+Sa*(.0998909+-.0491032*Sa))]}function Db(Ha,Ga){return[zb(Ha)/$b(Ga),qc(Ga)*$b(Ha)]}function Rb(Ha){function Ga(eb,
lb){var Cb=lb-Ha,Zb=1E-6>Rc(Cb)?eb*Oa:1E-6>Rc(Zb=bd+lb/2)||1E-6>Rc(Rc(Zb)-Bc)?0:eb*Cb/qd(qc(Zb)/Sa);return[Zb,Cb]}var Oa=$b(Ha),Sa=qc(bd+Ha/2);Ga.invert=function(eb,lb){var Cb,Zb=lb+Ha;return[1E-6>Rc(lb)?eb/Oa:1E-6>Rc(Cb=bd+Zb/2)||1E-6>Rc(Rc(Cb)-Bc)?0:eb*qd(qc(Cb)/Sa)/lb,Zb]};return Ga}function xc(Ha,Ga){return[Ha,1.25*qd(qc(bd+.4*Ga))]}function Ic(Ha){function Ga(Sa,eb){var lb=$b(eb),Cb=2/(1+lb*$b(Sa));Sa=Cb*lb*zb(Sa);eb=Cb*zb(eb);Cb=Oa;lb=Ha[Cb];for(var Zb=lb[0],Lb=lb[1],ec;0<=--Cb;)lb=Ha[Cb],Zb=
lb[0]+Sa*(ec=Zb)-eb*Lb,Lb=lb[1]+Sa*Lb+eb*ec;Zb=Sa*(ec=Zb)-eb*Lb;return[Zb,Sa*Lb+eb*ec]}var Oa=Ha.length-1;Ga.invert=function(Sa,eb){var lb=20,Cb=Sa,Zb=eb;do{for(var Lb=Oa,ec=Ha[Lb],hc=ec[0],rc=ec[1],Fc=0,jd=0,Dd;0<=--Lb;)ec=Ha[Lb],Fc=hc+Cb*(Dd=Fc)-Zb*jd,jd=rc+Cb*jd+Zb*Dd,hc=ec[0]+Cb*(Dd=hc)-Zb*rc,rc=ec[1]+Cb*rc+Zb*Dd;Fc=hc+Cb*(Dd=Fc)-Zb*jd;jd=rc+Cb*jd+Zb*Dd;hc=Cb*(Dd=hc)-Zb*rc-Sa;rc=Cb*rc+Zb*Dd-eb;ec=Fc*Fc+jd*jd;Cb-=Lb=(hc*Fc+rc*jd)/ec;Zb-=hc=(rc*Fc-hc*jd)/ec}while(1E-12<Rc(Lb)+Rc(hc)&&0<--lb);if(lb)return Sa=
g(Cb*Cb+Zb*Zb),eb=2*Gd(.5*Sa),lb=zb(eb),[Mb(Cb*lb,Sa*$b(eb)),Sa?m(Zb*lb/Sa):0]};return Ga}function Ja(Ha,Ga){Ha=n.geoProjection(Ic(Ha)).rotate(Ga).clipAngle(90);var Oa=n.geoRotation(Ga),Sa=Ha.center;delete Ha.rotate;Ha.center=function(eb){return arguments.length?Sa(Oa(eb)):Oa.invert(Sa())};return Ha}function Pa(Ha,Ga){Ga=m(7*zb(Ga)/(3*Hg));return[Hg*Ha*(2*$b(2*Ga/3)-1)/Tg,9*zb(Ga/3)/Tg]}function db(Ha,Ga){for(var Oa=(1+ed)*zb(Ga),Sa=0,eb;25>Sa&&!(Ga-=eb=(zb(Ga/2)+zb(Ga)-Oa)/(.5*$b(Ga/2)+$b(Ga)),1E-6>
Rc(eb));Sa++);return[Ha*(1+2*$b(Ga)/$b(Ga/2))/(3*Vc),2*g(3)*zb(Ga/2)/g(2+Vc)]}function Jb(Ha,Ga){var Oa=g(6/(4+Yb)),Sa=(1+Yb/4)*zb(Ga);Ga/=2;for(var eb=0,lb;25>eb&&!(Ga-=lb=(Ga/2+zb(Ga)-Sa)/(.5+$b(Ga)),1E-6>Rc(lb));eb++);return[Oa*(.5+$b(Ga))*Ha/1.5,Oa*Ga]}function Gb(Ha,Ga){var Oa=Ga*Ga,Sa=Oa*Oa,eb=Oa*Sa;return[Ha*(.84719-.13063*Oa+eb*eb*(-.04515+.05494*Oa-.02326*Sa+.00331*eb)),Ga*(1.01183+Sa*Sa*(-.02625+.01926*Oa-.00396*Sa))]}function cc(Ha,Ga){return[Ha*(1+$b(Ga))/2,2*(Ga-qc(Ga/2))]}function uc(Ha,
Ga){var Oa=zb(Ga),Sa=$b(Ga),eb=oe(Ha);if(0===Ha||Rc(Ga)===Bc)return[0,Ga];if(0===Ga)return[Ha,0];if(Rc(Ha)===Bc)return[Ha*Sa,Bc*Oa];Ha=Yb/(2*Ha)-2*Ha/Yb;var lb=2*Ga/Yb,Cb=(1-lb*lb)/(Oa-lb),Zb=Ha*Ha,Lb=Cb*Cb;lb=1+Zb/Lb;var ec=1+Lb/Zb,hc=(Ha*Oa/Cb-Ha/2)/lb,rc=(Lb*Oa/Zb+Cb/2)/ec;Oa=rc*rc-(Lb*Oa*Oa/Zb+Cb*Oa-1)/ec;return[Bc*(hc+g(hc*hc+Sa*Sa/lb)*eb),Bc*(rc+g(0>Oa?0:Oa)*oe(-Ga*Ha)*eb)]}function fd(Ha,Ga){var Oa=Ga*Ga;return[Ha,Ga*(1.0148+Oa*Oa*(.23185+Oa*(-.14499+.02406*Oa)))]}function kb(Ha,Ga){if(1E-6>
Rc(Ga))return[Ha,0];var Oa=qc(Ga);Ha*=zb(Ga);return[zb(Ha)/Oa,Ga+(1-$b(Ha))/Oa]}function Qb(Ha,Ga){var Oa=Ec(Ha[1],Ha[0]),Sa=Ec(Ga[1],Ga[0]),eb=Mb(Oa[0]*Sa[1]-Oa[1]*Sa[0],Oa[0]*Sa[0]+Oa[1]*Sa[1]);Oa=g(Oa[0]*Oa[0]+Oa[1]*Oa[1])/g(Sa[0]*Sa[0]+Sa[1]*Sa[1]);return dc([1,0,Ha[0][0],0,1,Ha[0][1]],dc([Oa,0,0,0,Oa,0],dc([$b(eb),zb(eb),0,-zb(eb),$b(eb),0],[1,0,-Ga[0][0],0,1,-Ga[0][1]])))}function dc(Ha,Ga){return[Ha[0]*Ga[0]+Ha[1]*Ga[3],Ha[0]*Ga[1]+Ha[1]*Ga[4],Ha[0]*Ga[2]+Ha[1]*Ga[5]+Ha[2],Ha[3]*Ga[0]+Ha[4]*
Ga[3],Ha[3]*Ga[1]+Ha[4]*Ga[4],Ha[3]*Ga[2]+Ha[4]*Ga[5]+Ha[5]]}function Ec(Ha,Ga){return[Ha[0]-Ga[0],Ha[1]-Ga[1]]}function Qc(Ha,Ga,Oa){function Sa(Lb,ec){Lb.edges=sc(Lb.face);if(ec.face){var hc=Lb.shared=Ib(Lb.face,ec.face),rc=Qb(hc.map(ec.project),hc.map(Lb.project));Lb.transform=ec.transform?dc(ec.transform,rc):rc;rc=ec.edges;for(var Fc=0,jd=rc.length;Fc<jd;++Fc)tb(hc[0],rc[Fc][1])&&tb(hc[1],rc[Fc][0])&&(rc[Fc]=Lb),tb(hc[0],rc[Fc][0])&&tb(hc[1],rc[Fc][1])&&(rc[Fc]=Lb);rc=Lb.edges;Fc=0;for(jd=rc.length;Fc<
jd;++Fc)tb(hc[0],rc[Fc][0])&&tb(hc[1],rc[Fc][1])&&(rc[Fc]=ec),tb(hc[0],rc[Fc][1])&&tb(hc[1],rc[Fc][0])&&(rc[Fc]=ec)}else Lb.transform=ec.transform;Lb.children&&Lb.children.forEach(function(Dd){Sa(Dd,Lb)});return Lb}function eb(Lb,ec){var hc=Ga(Lb,ec);Lb=hc.project([Lb*vc,ec*vc]);if(hc=hc.transform)return[hc[0]*Lb[0]+hc[1]*Lb[1]+hc[2],-(hc[3]*Lb[0]+hc[4]*Lb[1]+hc[5])];Lb[1]=-Lb[1];return Lb}function lb(Lb,ec){var hc=Lb.project.invert,rc=Lb.transform,Fc=ec;if(rc){var jd=1/(rc[0]*rc[4]-rc[1]*rc[3]);
rc=[jd*rc[4],-jd*rc[1],jd*(rc[1]*rc[5]-rc[2]*rc[4]),-jd*rc[3],jd*rc[0],jd*(rc[2]*rc[3]-rc[0]*rc[5])];Fc=[rc[0]*Fc[0]+rc[1]*Fc[1]+rc[2],rc[3]*Fc[0]+rc[4]*Fc[1]+rc[5]]}if(rc=hc)hc=Dd=hc(Fc),hc=Ga(hc[0]*oc,hc[1]*oc),rc=Lb===hc;if(rc)return Dd;var Dd;Lb=Lb.children;hc=0;for(Fc=Lb&&Lb.length;hc<Fc;++hc)if(Dd=lb(Lb[hc],ec))return Dd}Sa(Ha,{transform:null});pc(Ha)&&(eb.invert=function(Lb,ec){return(Lb=lb(Ha,[Lb,-ec]))&&(Lb[0]*=oc,Lb[1]*=oc,Lb)});var Cb=n.geoProjection(eb),Zb=Cb.stream;Cb.stream=function(Lb){var ec=
Cb.rotate(),hc=Zb(Lb),rc=(Cb.rotate([0,0]),Zb(Lb));Cb.rotate(ec);hc.sphere=function(){rc.polygonStart();rc.lineStart();Tc(rc,Ha);rc.lineEnd();rc.polygonEnd()};return hc};return Cb.angle(null==Oa?-30:Oa*vc)}function Tc(Ha,Ga,Oa){var Sa,eb=Ga.edges,lb=eb.length;var Cb={type:"MultiPoint",coordinates:Ga.face};var Zb=Ga.face.filter(function(rc){return 90!==Rc(rc[1])}),Lb=n.geoBounds({type:"MultiPoint",coordinates:Zb});Zb=!1;var ec=-1,hc=Lb[1][0]-Lb[0][0];Lb=180===hc||360===hc?[(Lb[0][0]+Lb[1][0])/2,(Lb[0][1]+
Lb[1][1])/2]:n.geoCentroid(Cb);if(Oa)for(;++ec<lb&&eb[ec]!==Oa;);++ec;for(hc=0;hc<lb;++hc)Cb=eb[(hc+ec)%lb],Array.isArray(Cb)?(Zb||(Ha.point((Sa=n.geoInterpolate(Cb[0],Lb)(1E-6))[0],Sa[1]),Zb=!0),Ha.point((Sa=n.geoInterpolate(Cb[1],Lb)(1E-6))[0],Sa[1])):(Zb=!1,Cb!==Oa&&Tc(Ha,Cb,Ga))}function tb(Ha,Ga){return Ha&&Ga&&Ha[0]===Ga[0]&&Ha[1]===Ga[1]}function Ib(Ha,Ga){for(var Oa,Sa,eb=Ha.length,lb=null,Cb=0;Cb<eb;++Cb){Oa=Ha[Cb];for(var Zb=Ga.length;0<=--Zb;)if(Sa=Ga[Zb],Oa[0]===Sa[0]&&Oa[1]===Sa[1]){if(lb)return[lb,
Oa];lb=Oa}}}function sc(Ha){for(var Ga=Ha.length,Oa=[],Sa=Ha[Ga-1],eb=0;eb<Ga;++eb)Oa.push([Sa,Sa=Ha[eb]]);return Oa}function pc(Ha){return Ha.project.invert||Ha.children&&Ha.children.some(pc)}function zc(Ha,Ga){Ha=M(Ha,Ga);return[Ha[0]*Zg,Ha[1]]}function Wb(Ha,Ga){for(var Oa=0,Sa=Ha.length,eb=0;Oa<Sa;++Oa)eb+=Ha[Oa]*Ga[Oa];return eb}function Ub(Ha){return[Mb(Ha[1],Ha[0])*vc,m(qe(-1,Id(1,Ha[2])))*vc]}function yb(Ha){var Ga=Ha[0]*oc;Ha=Ha[1]*oc;var Oa=$b(Ha);return[Oa*$b(Ga),Oa*zb(Ga),zb(Ha)]}function ac(){}
function Vb(Ha,Ga){return{type:"FeatureCollection",features:Ha.features.map(function(Oa){return mc(Oa,Ga)})}}function mc(Ha,Ga){return{type:"Feature",id:Ha.id,properties:Ha.properties,geometry:Uc(Ha.geometry,Ga)}}function tc(Ha,Ga){return{type:"GeometryCollection",geometries:Ha.geometries.map(function(Oa){return Uc(Oa,Ga)})}}function Uc(Ha,Ga){if(!Ha)return null;if("GeometryCollection"===Ha.type)return tc(Ha,Ga);switch(Ha.type){case "Point":var Oa=vh;break;case "MultiPoint":Oa=vh;break;case "LineString":Oa=
mh;break;case "MultiLineString":Oa=mh;break;case "Polygon":Oa=Gh;break;case "MultiPolygon":Oa=Gh;break;case "Sphere":Oa=Gh;break;default:return null}n.geoStream(Ha,Ga(Oa));return Oa.result()}function kd(Ha){function Ga(Sa,eb){var lb=Rc(Sa)<Bc;eb=Ha(lb?Sa:0<Sa?Sa-Yb:Sa+Yb,eb);Sa=(eb[0]-eb[1])*ed;eb=(eb[0]+eb[1])*ed;if(lb)return[Sa,eb];lb=Oa*ed;var Cb=0<Sa^0<eb?-1:1;return[Cb*Sa-oe(eb)*lb,Cb*eb-oe(Sa)*lb]}var Oa=Ha(Bc,0)[0]-Ha(-Bc,0)[0];Ha.invert&&(Ga.invert=function(Sa,eb){var lb=(Sa+eb)*ed,Cb=(eb-
Sa)*ed,Zb=Rc(lb)<.5*Oa&&Rc(Cb)<.5*Oa;if(!Zb){var Lb=Oa*ed,ec=0<lb^0<Cb?-1:1;Sa=-ec*Sa+(0<Cb?1:-1)*Lb;eb=-ec*eb+(0<lb?1:-1)*Lb;lb=(-Sa-eb)*ed;Cb=(Sa-eb)*ed}eb=Ha.invert(lb,Cb);Zb||(eb[0]+=0<lb?Yb:-Yb);return eb});return n.geoProjection(Ga).rotate([-90,-90,45]).clipAngle(179.999)}function Bd(){return kd(sb).scale(111.48)}function Fd(Ha){function Ga(Sa,eb){Sa=Oa?qc(Sa*Oa/2)/Oa:Sa/2;if(!eb)return[2*Sa,-Ha];Sa=2*Gd(Sa*zb(eb));var lb=1/qc(eb);return[zb(Sa)*lb,eb+(1-$b(Sa))*lb-Ha]}var Oa=zb(Ha);Ga.invert=
function(Sa,eb){if(1E-6>Rc(eb+=Ha))return[Oa?2*Gd(Oa*Sa/2)/Oa:Sa,0];var lb=Sa*Sa+eb*eb,Cb=0,Zb=10;do{var Lb=qc(Cb);var ec=1/$b(Cb),hc=lb-2*eb*Cb+Cb*Cb;Cb-=Lb=(Lb*hc+2*(Cb-eb))/(2+hc*ec*ec+2*(Cb-eb)*Lb)}while(1E-6<Rc(Lb)&&0<--Zb);Sa*=Lb=qc(Cb);eb=qc(Rc(eb)<Rc(Cb+1/Lb)?.5*m(Sa):.5*a(Sa)+Yb/4)/zb(Cb);return[Oa?2*Gd(Oa*eb)/Oa:2*eb,Cb]};return Ga}function yd(Ha,Ga){var Oa=Id(18,36*Rc(Ga)/Yb),Sa=Hd(Oa);Oa-=Sa;var eb=(Lb=ag[Sa])[0],lb=Lb[1],Cb=(Lb=ag[++Sa])[0],Zb=Lb[1];Sa=(Lb=ag[Id(19,++Sa)])[0];Lb=Lb[1];
var Lb;return[Ha*(Cb+Oa*(Sa-eb)/2+Oa*Oa*(Sa-2*Cb+eb)/2),(0<Ga?Bc:-Bc)*(Zb+Oa*(Lb-lb)/2+Oa*Oa*(Lb-2*Zb+lb)/2)]}function Lc(Ha){function Ga(Oa,Sa){var eb=$b(Sa),lb=(Ha-1)/(Ha-eb*$b(Oa));return[lb*eb*zb(Oa),lb*zb(Sa)]}Ga.invert=function(Oa,Sa){var eb=Oa*Oa+Sa*Sa,lb=g(eb);eb=(Ha-g(1-eb*(Ha+1)/(Ha-1)))/((Ha-1)/lb+lb/(Ha-1));return[Mb(Oa*eb,lb*g(1-eb*eb)),lb?m(Sa*eb/lb):0]};return Ga}function cd(Ha,Ga){function Oa(Cb,Zb){Cb=Sa(Cb,Zb);Zb=Cb[1];var Lb=Zb*lb/(Ha-1)+eb;return[Cb[0]*eb/Lb,Zb/Lb]}var Sa=Lc(Ha);
if(!Ga)return Sa;var eb=$b(Ga),lb=zb(Ga);Oa.invert=function(Cb,Zb){var Lb=(Ha-1)/(Ha-1-Zb*lb);return Sa.invert(Lb*Cb,Lb*Zb*eb)};return Oa}function Nc(Ha){return 0<Ha.length}function Xc(Ha){return-90===Ha||90===Ha?[0,Ha]:[-180,Math.floor(1E4*Ha)/1E4]}function Zc(Ha){var Ga=Ha[0],Oa=Ha[1],Sa=!1;-179.9999>=Ga?(Ga=-180,Sa=!0):179.9999<=Ga&&(Ga=180,Sa=!0);-89.9999>=Oa?(Oa=-90,Sa=!0):89.9999<=Oa&&(Oa=90,Sa=!0);return Sa?[Ga,Oa]:Ha}function Sc(Ha){return Ha.map(Zc)}function id(Ha,Ga,Oa){for(var Sa=0,eb=
Ha.length;Sa<eb;++Sa){var lb=Ha[Sa].slice();Oa.push({index:-1,polygon:Ga,ring:lb});for(var Cb=0,Zb=lb.length;Cb<Zb;++Cb){var Lb=lb[Cb],ec=Lb[0],hc=Lb[1];if(-179.9999>=ec||179.9999<=ec||-89.9999>=hc||89.9999<=hc){lb[Cb]=Zc(Lb);for(Lb=Cb+1;Lb<Zb;++Lb){var rc=lb[Lb];ec=rc[0];rc=rc[1];if(-179.9999<ec&&179.9999>ec&&-89.9999<rc&&89.9999>rc)break}if(Lb!==Cb+1){Cb?(Cb={index:-1,polygon:Ga,ring:lb.slice(0,Cb+1)},Cb.ring[Cb.ring.length-1]=Xc(hc),Oa[Oa.length-1]=Cb):Oa.pop();if(Lb>=Zb)break;Oa.push({index:-1,
polygon:Ga,ring:lb=lb.slice(Lb-1)});lb[0]=Xc(lb[0][1]);Cb=-1;Zb=lb.length}}}}}function Nd(Ha){var Ga,Oa=Ha.length,Sa={},eb={};for(Ga=0;Ga<Oa;++Ga){var lb=Ha[Ga];var Cb=lb.ring[0];var Zb=lb.ring[lb.ring.length-1];Cb[0]===Zb[0]&&Cb[1]===Zb[1]?(lb.polygon.push(lb.ring),Ha[Ga]=null):(lb.index=Ga,Sa[Cb]=eb[Zb]=lb)}for(Ga=0;Ga<Oa;++Ga)if(lb=Ha[Ga]){Cb=lb.ring[0];Zb=lb.ring[lb.ring.length-1];var Lb=eb[Cb];var ec=Sa[Zb];delete Sa[Cb];delete eb[Zb];Cb[0]===Zb[0]&&Cb[1]===Zb[1]?lb.polygon.push(lb.ring):Lb?
(delete eb[Cb],delete Sa[Lb.ring[0]],Lb.ring.pop(),Ha[Lb.index]=null,lb={index:-1,polygon:Lb.polygon,ring:Lb.ring.concat(lb.ring)},Lb===ec?lb.polygon.push(lb.ring):(lb.index=Oa++,Ha.push(Sa[lb.ring[0]]=eb[lb.ring[lb.ring.length-1]]=lb))):ec?(delete Sa[Zb],delete eb[ec.ring[ec.ring.length-1]],lb.ring.pop(),lb={index:Oa++,polygon:ec.polygon,ring:lb.ring.concat(ec.ring)},Ha[ec.index]=null,Ha.push(Sa[lb.ring[0]]=eb[lb.ring[lb.ring.length-1]]=lb)):(lb.ring.push(lb.ring[0]),lb.polygon.push(lb.ring))}}function Rd(Ha){var Ga=
{type:"Feature",geometry:Wd(Ha.geometry)};null!=Ha.id&&(Ga.id=Ha.id);null!=Ha.bbox&&(Ga.bbox=Ha.bbox);null!=Ha.properties&&(Ga.properties=Ha.properties);return Ga}function Wd(Ha){if(null==Ha)return Ha;switch(Ha.type){case "GeometryCollection":var Ga={type:"GeometryCollection",geometries:Ha.geometries.map(Wd)};break;case "Point":Ga={type:"Point",coordinates:Zc(Ha.coordinates)};break;case "MultiPoint":case "LineString":Ga={type:Ha.type,coordinates:Sc(Ha.coordinates)};break;case "MultiLineString":Ga=
{type:"MultiLineString",coordinates:Ha.coordinates.map(Sc)};break;case "Polygon":var Oa=[];id(Ha.coordinates,Oa,Ga=[]);Nd(Ga);Ga={type:"Polygon",coordinates:Oa};break;case "MultiPolygon":Ga=[];Oa=-1;var Sa=Ha.coordinates.length;for(var eb=Array(Sa);++Oa<Sa;)id(Ha.coordinates[Oa],eb[Oa]=[],Ga);Nd(Ga);Ga={type:"MultiPolygon",coordinates:eb.filter(Nc)};break;default:return Ha}null!=Ha.bbox&&(Ga.bbox=Ha.bbox);return Ga}function Se(Ha,Ga){Ga=qc(Ga/2);var Oa=zb(bd*Ga);return[Ha*(.74482-.34588*Oa*Oa),1.70711*
Ga]}function Ne(Ha,Ga,Oa){var Sa=n.geoInterpolate(Ga,Oa);Oa=Sa(.5);Ga=n.geoRotation([-Oa[0],-Oa[1]])(Ga);Sa=Sa.distance/2;var eb=-m(zb(Ga[1]*oc)/zb(Sa));Oa=[-Oa[0],-Oa[1],-(0<Ga[0]?Yb-eb:eb)*vc];Ha=n.geoProjection(Ha(Sa)).rotate(Oa);var lb=n.geoRotation(Oa),Cb=Ha.center;delete Ha.rotate;Ha.center=function(Zb){return arguments.length?Cb(lb(Zb)):lb.invert(Cb())};return Ha.clipAngle(90)}function te(Ha){function Ga(Sa,eb){Sa=n.geoGnomonicRaw(Sa,eb);Sa[0]*=Oa;return Sa}var Oa=$b(Ha);Ga.invert=function(Sa,
eb){return n.geoGnomonicRaw.invert(Sa/Oa,eb)};return Ga}function qf(Ha,Ga){return Ne(te,Ha,Ga)}function sf(Ha){function Ga(Zb,Lb){var ec=a($b(Lb)*$b(Zb-Oa));Zb=a($b(Lb)*$b(Zb-Sa));ec*=ec;Zb*=Zb;return[(ec-Zb)/(2*Ha),(0>Lb?-1:1)*g(4*eb*Zb-(eb-ec+Zb)*(eb-ec+Zb))/(2*Ha)]}if(!(Ha*=2))return n.geoAzimuthalEquidistantRaw;var Oa=-Ha/2,Sa=-Oa,eb=Ha*Ha,lb=qc(Sa),Cb=.5/zb(Sa);Ga.invert=function(Zb,Lb){var ec=Lb*Lb,hc=$b(g(ec+(rc=Zb+Oa)*rc));Zb=$b(g(ec+(rc=Zb+Sa)*rc));var rc,Fc;return[Mb(Fc=hc-Zb,rc=(hc+Zb)*
lb),(0>Lb?-1:1)*a(g(rc*rc+Fc*Fc)*Cb)]};return Ga}function of(Ha,Ga){return Ne(sf,Ha,Ga)}function vf(Ha,Ga){if(1E-6>Rc(Ga))return[Ha,0];var Oa=Rc(Ga/Bc),Sa=m(Oa);if(1E-6>Rc(Ha)||1E-6>Rc(Rc(Ga)-Bc))return[0,oe(Ga)*Yb*qc(Sa/2)];var eb=$b(Sa);Sa=Rc(Yb/Ha-Ha/Yb)/2;var lb=Sa*Sa;eb/=Oa+eb-1;Oa=eb*(2/Oa-1);var Cb=Oa*Oa,Zb=Cb+lb,Lb=eb-Cb,ec=lb+eb;return[oe(Ha)*Yb*(Sa*Lb+g(lb*Lb*Lb-Zb*(eb*eb-Cb)))/Zb,oe(Ga)*Yb*(Oa*ec-Sa*g((lb+1)*Zb-ec*ec))/Zb]}function Bf(Ha,Ga){if(1E-6>Rc(Ga))return[Ha,0];var Oa=Rc(Ga/Bc),
Sa=m(Oa);if(1E-6>Rc(Ha)||1E-6>Rc(Rc(Ga)-Bc))return[0,oe(Ga)*Yb*qc(Sa/2)];var eb=$b(Sa);Sa=Rc(Yb/Ha-Ha/Yb)/2;var lb=Sa*Sa;Oa=eb*(g(1+lb)-Sa*eb)/(1+lb*Oa*Oa);return[oe(Ha)*Yb*Oa,oe(Ga)*Yb*g(1-Oa*(2*Sa+Oa))]}function Sd(Ha,Ga){if(1E-6>Rc(Ga))return[Ha,0];var Oa=Ga/Bc,Sa=m(Oa);if(1E-6>Rc(Ha)||1E-6>Rc(Rc(Ga)-Bc))return[0,Yb*qc(Sa/2)];Ga=(Yb/Ha-Ha/Yb)/2;Oa/=1+$b(Sa);return[Yb*(oe(Ha)*g(Ga*Ga+1-Oa*Oa)-Ga),Yb*Oa]}function De(Ha,Ga){if(!Ga)return[Ha,0];var Oa=Rc(Ga);if(!Ha||Oa===Bc)return[0,Ga];var Sa=Oa/
Bc;Oa=Sa*Sa;var eb=(8*Sa-Oa*(Oa+2)-5)/(2*Oa*(Sa-1)),lb=eb*eb,Cb=Sa*eb,Zb=Oa+lb+2*Cb;Sa+=3*eb;eb=Ha/Bc;eb+=1/eb;eb=oe(Rc(Ha)-Bc)*g(eb*eb-4);var Lb=eb*eb;Oa=(eb*(Zb+lb-1)+2*g(Zb*(Oa+lb*Lb-1)+(1-Oa)*(Oa*(Sa*Sa+4*lb)+12*Cb*lb+4*lb*lb)))/(4*Zb+Lb);return[oe(Ha)*Bc*Oa,oe(Ga)*Bc*g(1+eb*Rc(Oa)-Oa*Oa)]}function hf(Ha,Ga,Oa,Sa,eb){function lb(Cb,Zb){Zb=Oa*zb(Sa*Zb);var Lb=g(1-Zb*Zb),ec=g(2/(1+Lb*$b(Cb*=eb)));return[Ha*Lb*ec*zb(Cb),Ga*Zb*ec]}lb.invert=function(Cb,Zb){var Lb=Cb/Ha,ec=Zb/Ga;Lb=g(Lb*Lb+ec*ec);
ec=2*m(Lb/2);return[Mb(Cb*qc(ec),Ha*Lb)/eb,Lb&&m(Zb*zb(ec)/(Ga*Oa*Lb))/Sa]};return lb}function bf(Ha,Ga,Oa,Sa){var eb=Yb/3;Ha=qe(Ha,1E-6);Ga=qe(Ga,1E-6);Ha=Id(Ha,Bc);Ga=Id(Ga,Yb-1E-6);Oa=qe(Oa,0);Oa=Id(Oa,99.999999);Sa=qe(Sa,1E-6);var lb=Sa/100;Oa=a((Oa/100+1)*$b(eb))/eb;eb=zb(Ha)/zb(Oa*Bc);Sa=Ga/Yb;Ga=g(lb*zb(Ha/2)/zb(Ga/2));Ha=Ga/g(Sa*eb*Oa);Ga=1/(Ga*g(Sa*eb*Oa));return hf(Ha,Ga,eb,Oa,Sa)}function Qe(){var Ha=65*oc,Ga=60*oc,Oa=20,Sa=200,eb=n.geoProjectionMutator(bf),lb=eb(Ha,Ga,Oa,Sa);lb.poleline=
function(Cb){return arguments.length?eb(Ha=+Cb*oc,Ga,Oa,Sa):Ha*vc};lb.parallels=function(Cb){return arguments.length?eb(Ha,Ga=+Cb*oc,Oa,Sa):Ga*vc};lb.inflation=function(Cb){return arguments.length?eb(Ha,Ga,Oa=+Cb,Sa):Oa};lb.ratio=function(Cb){return arguments.length?eb(Ha,Ga,Oa,Sa=+Cb):Sa};return lb.scale(163.775)}function He(Ha,Ga){return[Ha*g(1-3*Ga*Ga/(Yb*Yb)),Ga]}function $e(Ha,Ga){var Oa=$b(Ga),Sa=$b(Ha)*Oa,eb=1-Sa;Ga=$b(Ha=Mb(zb(Ha)*Oa,-zb(Ga)));Ha=zb(Ha);Oa=g(1-Sa*Sa);return[Ha*Oa-Ga*eb,-Ga*
Oa-Ha*eb]}function df(Ha,Ga){var Oa=c(Ha,Ga);return[(Oa[0]+Ha/Bc)/2,(Oa[1]+Ga)/2]}var Rc=Math.abs,Gd=Math.atan,Mb=Math.atan2,$b=Math.cos,Mc=Math.exp,Hd=Math.floor,qd=Math.log,qe=Math.max,Id=Math.min,ue=Math.pow,Be=Math.round,oe=Math.sign||function(Ha){return 0<Ha?1:0>Ha?-1:0},zb=Math.sin,qc=Math.tan,Yb=Math.PI,Bc=Yb/2,bd=Yb/4,ed=Math.SQRT1_2,Vc=g(2),Pc=g(Yb),yc=2*Yb,vc=180/Yb,oc=Yb/180;c.invert=function(Ha,Ga){if(!(Ha*Ha+4*Ga*Ga>Yb*Yb+1E-6)){var Oa=Ha,Sa=Ga,eb=25;do{var lb=zb(Oa),Cb=zb(Oa/2),Zb=$b(Oa/
2),Lb=zb(Sa),ec=$b(Sa),hc=zb(2*Sa),rc=Lb*Lb,Fc=ec*ec,jd=Cb*Cb,Dd=1-Fc*Zb*Zb,ye=Dd?a(ec*Zb)*g(Ae=1/Dd):Ae=0,Ae;Dd=2*ye*ec*Cb-Ha;var Xe=ye*Lb-Ga,Vf=Ae*(Fc*jd+ye*ec*Zb*rc),Je=Ae*(.5*lb*hc-2*ye*Lb*Cb);lb=.25*Ae*(hc*Cb-ye*Lb*Fc*lb);ec=Ae*(rc*Zb+ye*jd*ec);Zb=Je*lb-ec*Vf;if(!Zb)break;Je=(Xe*Je-Dd*ec)/Zb;Dd=(Dd*lb-Xe*Vf)/Zb;Oa-=Je;Sa-=Dd}while((1E-6<Rc(Je)||1E-6<Rc(Dd))&&0<--eb);return[Oa,Sa]}};e.invert=function(Ha,Ga){Ha*=.375;Ga*=.375;if(!Ha&&1<Rc(Ga))return null;var Oa=1+Ha*Ha+Ga*Ga,Sa=g((Oa-g(Oa*Oa-4*
Ga*Ga))/2);Oa=m(Sa)/3;Sa?(Sa=Rc(Ga/Sa),Sa=qd(Sa+g(Sa*Sa-1))/3):(Sa=Rc(Ha),Sa=qd(Sa+g(Sa*Sa+1))/3);var eb=$b(Oa),lb=r(Sa),Cb=lb*lb-eb*eb;return[2*oe(Ha)*Mb(h(Sa)*eb,.25-Cb),2*oe(Ga)*Mb(lb*zb(Oa),.25+Cb)]};var vd=g(8),Qd=qd(1+Vc);f.invert=function(Ha,Ga){if((eb=Rc(Ga))<Qd)return[Ha,2*Gd(Mc(Ga))-Bc];var Oa=bd,Sa=25,eb;do{var lb=$b(Oa/2);var Cb=qc(Oa/2);Oa-=lb=(vd*(Oa-bd)-qd(Cb)-eb)/(vd-lb*lb/(2*Cb))}while(1E-12<Rc(lb)&&0<--Sa);return[Ha/($b(Oa)*(vd-1/zb(Oa))),oe(Ga)*Oa]};w.invert=function(Ha,Ga){Ga=
2*m(Ga/2);return[Ha*$b(Ga/2)/$b(Ga),Ga]};var Yd=D(Vc/Bc,Vc,Yb);C.invert=function(Ha,Ga){var Oa=2.00276*Ga;Ga=0>Ga?-bd:bd;var Sa=25;do{var eb=Oa-Vc*zb(Ga);Ga-=eb=(zb(2*Ga)+2*Ga-Yb*zb(eb))/(2*$b(2*Ga)+2+Yb*$b(eb)*Vc*$b(Ga))}while(1E-6<Rc(eb)&&0<--Sa);eb=Oa-Vc*zb(Ga);return[Ha*(1/$b(eb)+1.11072/$b(Ga))/2.00276,eb]};y.invert=function(Ha,Ga){return[Ha/$b(Ga),Ga]};var xe=D(1,4/Yb,Yb);M.invert=function(Ha,Ga){var Oa=(Oa=Ga/Pc-1)*Oa;return[0<Oa?Ha*g(Yb/Oa)/2:0,m(1-Oa)]};var Td=g(3);Z.invert=function(Ha,Ga){Ga=
3*m(Ga/(Td*Pc));return[Pc*Ha/(Td*(2*$b(2*Ga/3)-1)),Ga]};T.invert=function(Ha,Ga){var Oa=g(8/(3*Yb));Ga/=Oa;return[Ha/(Oa*(1-Rc(Ga)/Yb)),Ga]};U.invert=function(Ha,Ga){var Oa=2-Rc(Ga)/g(2*Yb/3);return[Ha*g(6*Yb)/(2*Oa),oe(Ga)*m((4-Oa*Oa)/3)]};ha.invert=function(Ha,Ga){var Oa=g(Yb*(4+Yb))/2;return[Ha*Oa/(1+g(1-Ga*Ga*(4+Yb)/(4*Yb))),Ga*Oa/2]};Y.invert=function(Ha,Ga){Ga=Ga*g((4+Yb)/Yb)/2;var Oa=m(Ga),Sa=$b(Oa);return[Ha/(2/g(Yb*(4+Yb))*(1+Sa)),m((Oa+Ga*(Sa+2))/(2+Bc))]};ba.invert=function(Ha,Ga){var Oa=
g(2+Yb);Ga=Ga*Oa/2;return[Oa*Ha/(1+$b(Ga)),Ga]};ja.invert=function(Ha,Ga){var Oa=1+Bc,Sa=g(Oa/2);return[2*Ha*Sa/(1+$b(Ga*=Sa)),m((Ga+zb(Ga))/Oa)]};var Oe=3+2*Vc;ma.invert=function(Ha,Ga){if(!(eb=e.invert(Ha/1.2,1.065*Ga)))return null;var Oa=eb[0];eb=eb[1];var Sa=20,eb;Ha/=Oe;Ga/=Oe;do{var lb=Oa/2,Cb=eb/2,Zb=zb(lb),Lb=$b(lb),ec=zb(Cb),hc=$b(Cb),rc=$b(eb),Fc=g(rc),jd=ec/(hc+Vc*Lb*Fc),Dd=jd*jd,ye=g(2/(1+Dd)),Ae=(Vc*hc+(Lb+Zb)*Fc)/(Vc*hc+(Lb-Zb)*Fc),Xe=g(Ae),Vf=Xe-1/Xe,Je=Xe+1/Xe;Cb=ye*Vf-2*qd(Xe)-Ha;
lb=ye*jd*Je-2*Gd(jd)-Ga;var Tf=ec&&ed*Fc*Zb*Dd/ec,Mf=(Vc*Lb*hc+Fc)/(2*(hc+Vc*Lb*Fc)*(hc+Vc*Lb*Fc)*Fc),tf=-.5*jd*ye*ye*ye,$g=tf*Tf;tf*=Mf;var Kg=(Kg=2*hc+Vc*Fc*(Lb-Zb))*Kg*Xe;Lb=(Vc*Lb*hc*Fc+rc)/Kg;ec=-(Vc*Zb*ec)/(Fc*Kg);Zb=Vf*$g-2*Lb/Xe+ye*(Lb+Lb/Ae);Xe=Vf*tf-2*ec/Xe+ye*(ec+ec/Ae);Tf=jd*Je*$g-2*Tf/(1+Dd)+ye*Je*Tf+ye*jd*(Lb-Lb/Ae);Dd=jd*Je*tf-2*Mf/(1+Dd)+ye*Je*Mf+ye*jd*(ec-ec/Ae);jd=Xe*Tf-Dd*Zb;if(!jd)break;Dd=(lb*Xe-Cb*Dd)/jd;Cb=(Cb*Tf-lb*Zb)/jd;Oa-=Dd;eb=qe(-Bc,Id(Bc,eb-Cb))}while((1E-6<Rc(Dd)||
1E-6<Rc(Cb))&&0<--Sa);return 1E-6>Rc(Rc(eb)-Bc)?[0,eb]:Sa&&[Oa,eb]};var Ve=$b(35*oc);ia.invert=function(Ha,Ga){Ga/=1+Ve;return[Ha&&Ha/(Ve*g(1-Ga*Ga)),2*Gd(Ga)]};oa.invert=function(Ha,Ga){var Oa=Gd(Ga/Pc);Ga=$b(Oa);Oa*=2;return[Ha*Pc/2/($b(Oa)*Ga*Ga),Oa]};var wf=qa(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555),Me=qa(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742),Af=qa(5/6*Yb,-.62636,-.0344,0,1.3493,-.05524,0,.045);ta.invert=function(Ha,Ga){var Oa=Ha,Sa=Ga,eb=50,lb;do{var Cb=
Sa*Sa;Sa-=lb=(Sa*(1+Cb/12)-Ga)/(1+Cb/4)}while(1E-6<Rc(lb)&&0<--eb);eb=50;Ha/=1-.162388*Cb;do{var Zb=(Zb=Oa*Oa)*Zb;Oa-=lb=(Oa*(.87-9.52426E-4*Zb)-Ha)/(.87-.00476213*Zb)}while(1E-6<Rc(lb)&&0<--eb);return[Oa,Sa]};var ug=qa(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);Ia.invert=function(Ha,Ga){1<Rc(Ha)&&(Ha=2*oe(Ha)-Ha);1<Rc(Ga)&&(Ga=2*oe(Ga)-Ga);var Oa=oe(Ha),Sa=oe(Ga),eb=-Oa*Ha,lb=-Sa*Ga;Ga=1>lb/eb;Ha=Ga?lb:eb;var Cb=Ga?eb:lb,Zb=0,Lb=1;eb=.5;for(var ec=50;;){lb=eb*eb;var hc=g(eb),rc=m(1/
g(1+lb)),Fc=1-lb+eb*(1+lb)*rc,jd=(1-hc)/Fc,Dd=g(jd),ye=jd*(1+lb),Ae=Dd*(1-lb),Xe=g(ye-Ha*Ha);Ae=Cb+Ae+eb*Xe;if(1E-12>Rc(Lb-Zb)||0===--ec||0===Ae)break;0<Ae?Zb=eb:Lb=eb;eb=.5*(Zb+Lb)}ec?(Cb=m(hc),ec=$b(Cb),Zb=1/ec,Lb=2*hc*ec,hc=(-Fc*ec-(1-hc)*(-3*eb+rc*(1+3*lb))*Lb)/(Fc*Fc),eb=[Yb/4*(Ha*(-2*Zb*(.5*hc/Dd*(1-lb)-2*eb*Dd*Lb)+-Zb*Lb*Xe)+-Zb*(eb*(1+lb)*hc+jd*(1+3*lb)*Lb)*m(Ha/g(ye))),Cb]):eb=null;Ha=eb[0];eb=eb[1];lb=$b(eb);Ga&&(Ha=-Bc-Ha);return[Oa*(Mb(zb(Ha)*lb,-zb(eb))+Yb),Sa*m($b(Ha)*lb)]};sb.invert=
function(Ha,Ga){var Oa=(Vc-1)/(Vc+1),Sa=g(1-Oa*Oa);Ga=.5*gb(Bc,Sa*Sa)-Ga;Ha=-Ha;Sa*=Sa;if(Ga)if(Ga=$a(Ga,Sa),Ha){Ha=$a(Ha,1-Sa);var eb=Ha[1]*Ha[1]+Sa*Ga[0]*Ga[0]*Ha[0]*Ha[0];Ga=[[Ga[0]*Ha[2]/eb,Ga[1]*Ga[2]*Ha[0]*Ha[1]/eb],[Ga[1]*Ha[1]/eb,-Ga[0]*Ga[2]*Ha[0]*Ha[2]/eb],[Ga[2]*Ha[1]*Ha[2]/eb,-Sa*Ga[0]*Ga[1]*Ha[0]/eb]]}else Ga=[[Ga[0],0],[Ga[1],0],[Ga[2],0]];else Ha=$a(Ha,1-Sa),Ga=[[0,Ha[0]/Ha[1]],[1/Ha[1],0],[Ha[2]/Ha[1],0]];Sa=Ga[0];Ga=Ga[1];Ha=Ga[0]*Ga[0]+Ga[1]*Ga[1];Sa=[(Sa[0]*Ga[0]+Sa[1]*Ga[1])/Ha,
(Sa[1]*Ga[0]-Sa[0]*Ga[1])/Ha];return[Mb(Sa[1],Sa[0])/-1,2*Gd(Mc(-.5*qd(Oa*Sa[0]*Sa[0]+Oa*Sa[1]*Sa[1])))-Bc]};var vg=m(1-1/3)*vc,Gg=ca(0);Ab.invert=function(Ha,Ga){return-.7109889596207567<Ga?Yd.invert(Ha,Ga-.0528035274542):y.invert(Ha,Ga)};Ma.invert=function(Ha,Ga){return.7109889596207567<Rc(Ga)?Yd.invert(Ha,Ga+(0<Ga?.0528035274542:-.0528035274542)):y.invert(Ha,Ga)};var ih=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,
0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],Nh=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],qh=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],Yg=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],
[180,0]]]],jh=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]],kh=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];Eb.invert=function(Ha,Ga){return[yc/3*Ha/g(Yb*Yb/3-Ga*Ga),Ga]};var fh=Yb/Vc;fc.invert=function(Ha,Ga){var Oa=Rc(Ha),Sa=Rc(Ga),eb=1E-6,lb=Bc;Sa<fh?lb*=Sa/fh:eb+=6*a(fh/
Sa);for(var Cb=0;25>Cb;Cb++){var Zb=zb(lb),Lb=g($b(lb)),ec=zb(lb/2),hc=$b(lb/2),rc=zb(eb/6),Fc=$b(eb/6),jd=.5*eb*(1+Lb)-Oa,Dd=lb/(hc*Fc)-Sa;Zb=Lb?-.25*eb*Zb/Lb:0;Lb=.5*(1+Lb);ec=(1+.5*lb*ec/hc)/(hc*Fc);rc=lb/hc*(rc/6)/(Fc*Fc);hc=Zb*rc-ec*Lb;rc=(jd*rc-Dd*Lb)/hc;jd=(Dd*Zb-jd*ec)/hc;lb-=rc;eb-=jd;if(1E-6>Rc(rc)&&1E-6>Rc(jd))break}return[0>Ha?-eb:eb,0>Ga?-lb:lb]};pb.invert=function(Ha,Ga){var Oa=oe(Ha)*Yb,Sa=Ga/2,eb=50;do{var lb=Oa*Oa,Cb=Sa*Sa,Zb=Oa*Sa,Lb=Oa*(.975534+Cb*(-.119161+-.0143059*lb+-.0547009*
Cb))-Ha,ec=Sa*(1.00384+lb*(.0802894+-.02855*Cb+1.99025E-4*lb)+Cb*(.0998909+-.0491032*Cb))-Ga,hc=.975534-Cb*(.119161+.0429177*lb+.0547009*Cb),rc=-Zb*(.238322+.2188036*Cb+.0286118*lb);Zb*=.1605788+7.961E-4*lb+-.0571*Cb;Cb=1.00384+lb*(.0802894+1.99025E-4*lb)+Cb*(3*(.0998909-.02855*lb)-.245516*Cb);lb=rc*Zb-Cb*hc;rc=(ec*rc-Lb*Cb)/lb;Lb=(Lb*Zb-ec*hc)/lb;Oa-=rc;Sa-=Lb}while((1E-6<Rc(rc)||1E-6<Rc(Lb))&&0<--eb);return eb&&[Oa,Sa]};Db.invert=function(Ha,Ga){var Oa=Ha*Ha,Sa=Ga*Ga+1,eb=Oa+Sa;Oa=Ha?ed*g((eb-g(eb*
eb-4*Oa))/Oa):1/g(Sa);return[m(Ha*Oa),oe(Ga)*a(Oa)]};xc.invert=function(Ha,Ga){return[Ha,2.5*Gd(Mc(.8*Ga))-.625*Yb]};var ei=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],gh=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],ng=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7.388E-4,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],
Zf=[[.9245,0],[0,0],[.01943,0]],og=[[.721316,0],[0,0],[-.00881625,-.00617325]],Hg=g(6),Tg=g(7);Pa.invert=function(Ha,Ga){Ga=3*m(Ga*Tg/9);return[Ha*Tg/(Hg*(2*$b(2*Ga/3)-1)),m(3*zb(Ga)*Hg/7)]};db.invert=function(Ha,Ga){Ga=Ga*g(2+Vc)/(2*g(3));var Oa=2*m(Ga);return[3*Vc*Ha/(1+2*$b(Oa)/$b(Oa/2)),m((Ga+zb(Oa))/(1+ed))]};Jb.invert=function(Ha,Ga){var Oa=g(6/(4+Yb));Ga/=Oa;1E-6>Rc(Rc(Ga)-Bc)&&(Ga=0>Ga?-Bc:Bc);return[1.5*Ha/(Oa*(.5+$b(Ga))),m((Ga/2+zb(Ga))/(1+Yb/4))]};Gb.invert=function(Ha,Ga){var Oa=Ga,Sa=
25;do{var eb=Oa*Oa;var lb=eb*eb;Oa-=eb=(Oa*(1.01183+lb*lb*(-.02625+.01926*eb-.00396*lb))-Ga)/(1.01183+lb*lb*(-.23625+.21186*eb+-.05148*lb))}while(1E-12<Rc(eb)&&0<--Sa);eb=Oa*Oa;lb=eb*eb;Ga=eb*lb;return[Ha/(.84719-.13063*eb+Ga*Ga*(-.04515+.05494*eb-.02326*lb+.00331*Ga)),Oa]};cc.invert=function(Ha,Ga){for(var Oa=Ga/2,Sa=0,eb=Infinity;10>Sa&&1E-6<Rc(eb);++Sa)eb=$b(Ga/2),Ga-=eb=(Ga-qc(Ga/2)-Oa)/(1-.5/(eb*eb));return[2*Ha/(1+$b(Ga)),Ga]};var rh=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,
0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];uc.invert=function(Ha,Ga){Ha/=Bc;Ga/=Bc;var Oa=Ha*Ha,Sa=Oa+Ga*Ga,eb=Yb*Yb;return[Ha?(Sa-1+g((1-Sa)*(1-Sa)+4*Oa))/(2*Ha)*Bc:0,x(function(lb){return Sa*(Yb*zb(lb)-2*lb)*Yb+4*lb*lb*(Ga-zb(lb))+2*Yb*lb-eb*Ga},0)]};var hh=5*.23185;fd.invert=function(Ha,Ga){1.790857183<Ga?Ga=1.790857183:-1.790857183>Ga&&(Ga=-1.790857183);var Oa=Ga;do{var Sa=Oa*Oa;Oa-=Sa=(Oa*(1.0148+Sa*Sa*(.23185+Sa*(-.14499+.02406*Sa)))-Ga)/(1.0148+Sa*Sa*(hh+Sa*(-1.01493+.21654*Sa)))}while(1E-6<
Rc(Sa));return[Ha,Oa]};kb.invert=function(Ha,Ga){if(1E-6>Rc(Ga))return[Ha,0];var Oa=Ha*Ha+Ga*Ga,Sa=.5*Ga,eb=10;do{var lb=qc(Sa);var Cb=1/$b(Sa),Zb=Oa-2*Ga*Sa+Sa*Sa;Sa-=lb=(lb*Zb+2*(Sa-Ga))/(2+Zb*Cb*Cb+2*(Sa-Ga)*lb)}while(1E-6<Rc(lb)&&0<--eb);lb=qc(Sa);return[(Rc(Ga)<Rc(Sa+1/lb)?m(Ha*lb):oe(Ga)*oe(Ha)*(a(Rc(Ha*lb))+Bc))/zb(Sa),Sa]};var lh=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],Kf=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(Ha){return Ha.map(function(Ga){return lh[Ga]})}),
Zg=2/g(3);zc.invert=function(Ha,Ga){return M.invert(Ha/Zg,Ga)};var $f=[],Nf=[],vh={point:function(Ha,Ga){$f.push([Ha,Ga])},result:function(){var Ha=$f.length?2>$f.length?{type:"Point",coordinates:$f[0]}:{type:"MultiPoint",coordinates:$f}:null;$f=[];return Ha}},mh={lineStart:ac,point:function(Ha,Ga){$f.push([Ha,Ga])},lineEnd:function(){$f.length&&(Nf.push($f),$f=[])},result:function(){var Ha=Nf.length?2>Nf.length?{type:"LineString",coordinates:Nf[0]}:{type:"MultiLineString",coordinates:Nf}:null;Nf=
[];return Ha}},Gh={polygonStart:ac,lineStart:ac,point:function(Ha,Ga){$f.push([Ha,Ga])},lineEnd:function(){var Ha=$f.length;if(Ha){do $f.push($f[0].slice());while(4>++Ha);Nf.push($f);$f=[]}},polygonEnd:ac,result:function(){if(!Nf.length)return null;var Ha=[],Ga=[];Nf.forEach(function(Oa){if(4>(eb=Oa.length))var Sa=!1;else{Sa=0;for(var eb,lb=Oa[eb-1][1]*Oa[0][0]-Oa[eb-1][0]*Oa[0][1];++Sa<eb;)lb+=Oa[Sa-1][1]*Oa[Sa][0]-Oa[Sa-1][0]*Oa[Sa][1];Sa=0>=lb}Sa?Ha.push([Oa]):Ga.push(Oa)});Ga.forEach(function(Oa){var Sa=
Oa[0];Ha.some(function(eb){for(var lb=eb[0],Cb=Sa[0],Zb=Sa[1],Lb=!1,ec=0,hc=lb.length,rc=hc-1;ec<hc;rc=ec++){var Fc=lb[ec],jd=Fc[0];Fc=Fc[1];var Dd=lb[rc];rc=Dd[0];Dd=Dd[1];Fc>Zb^Dd>Zb&&Cb<(rc-jd)*(Zb-Fc)/(Dd-Fc)+jd&&(Lb=!Lb)}if(Lb)return eb.push(Oa),!0})||Ha.push([Oa])});Nf=[];return Ha.length?1<Ha.length?{type:"MultiPolygon",coordinates:Ha}:{type:"Polygon",coordinates:Ha[0]}:null}},ag=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,
.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];ag.forEach(function(Ha){Ha[1]*=1.0144});yd.invert=function(Ha,Ga){var Oa=Ga/Bc,Sa=90*Oa,eb=Id(18,Rc(Sa/5)),lb=qe(0,Hd(eb));do{var Cb=ag[lb][1],Zb=ag[lb+1][1],Lb=ag[Id(19,lb+2)][1],ec=Lb-Cb;Cb=Lb-2*Zb+Cb;Zb=2*(Rc(Oa)-Zb)/ec;ec=Cb/ec;ec=Zb*(1-ec*Zb*(1-2*ec*Zb));if(0<=ec||1===lb){Sa=(0<=Ga?5:-5)*(ec+eb);Oa=50;do eb=Id(18,Rc(Sa)/5),lb=Hd(eb),ec=eb-lb,Cb=ag[lb][1],
Zb=ag[lb+1][1],Lb=ag[Id(19,lb+2)][1],Sa-=(eb=(0<=Ga?Bc:-Bc)*(Zb+ec*(Lb-Cb)/2+ec*ec*(Lb-2*Zb+Cb)/2)-Ga)*vc;while(1E-12<Rc(eb)&&0<--Oa);break}}while(0<=--lb);Ga=ag[lb][0];eb=ag[lb+1][0];lb=ag[Id(19,lb+2)][0];return[Ha/(eb+ec*(lb-Ga)/2+ec*ec*(lb-2*eb+Ga)/2),Sa*oc]};Se.invert=function(Ha,Ga){Ga/=1.70711;var Oa=zb(bd*Ga);return[Ha/(.74482-.34588*Oa*Oa),2*Gd(Ga)]};vf.invert=function(Ha,Ga){if(1E-6>Rc(Ga))return[Ha,0];if(1E-6>Rc(Ha))return[0,Bc*zb(2*Gd(Ga/Yb))];var Oa=(Ha/=Yb)*Ha,Sa=(Ga/=Yb)*Ga,eb=Oa+Sa,
lb=eb*eb,Cb=-Rc(Ga)*(1+eb),Zb=Cb-2*Sa+Oa,Lb=-2*Cb+1+2*Sa+lb,ec=Sa/Lb+(2*Zb*Zb*Zb/(Lb*Lb*Lb)-9*Cb*Zb/(Lb*Lb))/27,hc=(Cb-Zb*Zb/(3*Lb))/Lb;Cb=2*g(-hc/3);ec=a(3*ec/(hc*Cb))/3;return[Yb*(eb-1+g(1+2*(Oa-Sa)+lb))/(2*Ha),oe(Ga)*Yb*(-Cb*$b(ec+Yb/3)-Zb/(3*Lb))]};Bf.invert=function(Ha,Ga){if(!Ha)return[0,Bc*zb(2*Gd(Ga/Yb))];var Oa=Rc(Ha/Yb),Sa=(1-Oa*Oa-(Ga/=Yb)*Ga)/(2*Oa),eb=g(Sa*Sa+1);return[oe(Ha)*Yb*(eb-Sa),oe(Ga)*Bc*zb(2*Mb(g((1-2*Sa*Oa)*(Sa+eb)-Oa),g(eb+Sa+Oa)))]};Sd.invert=function(Ha,Ga){if(!Ga)return[Ha,
0];Ga/=Yb;var Oa=(Yb*Yb*(1-Ga*Ga)-Ha*Ha)/(2*Yb*Ha);return[Ha?Yb*(oe(Ha)*g(Oa*Oa+1)-Oa):0,Bc*zb(2*Gd(Ga))]};De.invert=function(Ha,Ga){if(!Ha||!Ga)return[Ha,Ga];Ga/=Yb;var Oa=oe(Ha)*Ha/Bc,Sa=(Oa*Oa-1+4*Ga*Ga)/Rc(Oa),eb=Sa*Sa;Ga*=2;var lb=50;do{var Cb=Ga*Ga;var Zb=(8*Ga-Cb*(Cb+2)-5)/(2*Cb*(Ga-1));var Lb=(3*Ga-Cb*Ga-10)/(2*Cb*Ga),ec=Zb*Zb,hc=Ga*Zb,rc=Ga+Zb,Fc=rc*rc,jd=Ga+3*Zb,Dd=-2*rc*(4*hc*ec+(1-4*Cb+3*Cb*Cb)*(1+Lb)+ec*(-6+14*Cb-eb+(-8+8*Cb-2*eb)*Lb)+hc*(-8+12*Cb+(-10+10*Cb-eb)*Lb));Cb=g(Fc*(Cb+ec*eb-
1)+(1-Cb)*(Cb*(jd*jd+4*ec)+ec*(12*hc+4*ec)));Ga-=Zb=(Sa*(Fc+ec-1)+2*Cb-Oa*(4*Fc+eb))/(Sa*(2*Zb*Lb+2*rc*(1+Lb))+Dd/Cb-8*rc*(Sa*(-1+ec+Fc)+2*Cb)*(1+Lb)/(eb+4*Fc))}while(1E-6<Zb&&0<--lb);return[oe(Ha)*(g(Sa*Sa+4)+Sa)*Yb/4,Bc*Ga]};var wg=4*Yb+3*g(3),nh=2*g(2*Yb*g(3)/wg),wh=D(nh*g(3)/Yb,nh,wg/6);He.invert=function(Ha,Ga){return[Ha/g(1-3*Ga*Ga/(Yb*Yb)),Ga]};$e.invert=function(Ha,Ga){var Oa=(Ha*Ha+Ga*Ga)/-2,Sa=g(-Oa*(2+Oa)),eb=Ga*Oa+Ha*Sa;Ha=Ha*Oa-Ga*Sa;Ga=g(Ha*Ha+eb*eb);return[Mb(Sa*eb,Ga*(1+Oa)),Ga?-m(Sa*
Ha/Ga):0]};df.invert=function(Ha,Ga){var Oa=Ha,Sa=Ga,eb=25;do{var lb=$b(Sa),Cb=zb(Sa),Zb=zb(2*Sa),Lb=Cb*Cb,ec=lb*lb,hc=zb(Oa),rc=$b(Oa/2),Fc=zb(Oa/2),jd=Fc*Fc,Dd=1-ec*rc*rc,ye=Dd?a(lb*rc)*g(Ae=1/Dd):Ae=0,Ae;Dd=.5*(2*ye*lb*Fc+Oa/Bc)-Ha;var Xe=.5*(ye*Cb+Sa)-Ga,Vf=.5*Ae*(ec*jd+ye*lb*rc*Lb)+.5/Bc,Je=Ae*(hc*Zb/4-ye*Cb*Fc);Cb=.125*Ae*(Zb*Fc-ye*Cb*ec*hc);Lb=.5*Ae*(Lb*rc+ye*jd*lb)+.5;lb=Je*Cb-Lb*Vf;Je=(Xe*Je-Dd*Lb)/lb;Dd=(Dd*Cb-Xe*Vf)/lb;Oa-=Je;Sa-=Dd}while((1E-6<Rc(Je)||1E-6<Rc(Dd))&&0<--eb);return[Oa,Sa]};
p.geoNaturalEarth=n.geoNaturalEarth1;p.geoNaturalEarthRaw=n.geoNaturalEarth1Raw;p.geoAiry=function(){var Ha=Bc,Ga=n.geoProjectionMutator(l),Oa=Ga(Ha);Oa.radius=function(Sa){return arguments.length?Ga(Ha=Sa*oc):Ha*vc};return Oa.scale(179.976).clipAngle(147)};p.geoAiryRaw=l;p.geoAitoff=function(){return n.geoProjection(c).scale(152.63)};p.geoAitoffRaw=c;p.geoArmadillo=function(){var Ha=20*oc,Ga=0<=Ha?1:-1,Oa=qc(Ga*Ha),Sa=n.geoProjectionMutator(d),eb=Sa(Ha),lb=eb.stream;eb.parallel=function(Cb){if(!arguments.length)return Ha*
vc;Oa=qc((Ga=0<=(Ha=Cb*oc)?1:-1)*Ha);return Sa(Ha)};eb.stream=function(Cb){var Zb=eb.rotate(),Lb=lb(Cb),ec=(eb.rotate([0,0]),lb(Cb)),hc=eb.precision();eb.rotate(Zb);Lb.sphere=function(){ec.polygonStart();ec.lineStart();for(var rc=-180*Ga;180>Ga*rc;rc+=90*Ga)ec.point(rc,90*Ga);if(Ha)for(;-180<=Ga*(rc-=3*Ga*hc);)ec.point(rc,Ga*-Mb($b(rc*oc/2),Oa)*vc);ec.lineEnd();ec.polygonEnd()};return Lb};return eb.scale(218.695).center([0,28.0974])};p.geoArmadilloRaw=d;p.geoAugust=function(){return n.geoProjection(e).scale(66.1603)};
p.geoAugustRaw=e;p.geoBaker=function(){return n.geoProjection(f).scale(112.314)};p.geoBakerRaw=f;p.geoBerghaus=function(){var Ha=5,Ga=n.geoProjectionMutator(q),Oa=Ga(Ha),Sa=Oa.stream,eb=-$b(.01*oc),lb=zb(.01*oc);Oa.lobes=function(Cb){return arguments.length?Ga(Ha=+Cb):Ha};Oa.stream=function(Cb){var Zb=Oa.rotate(),Lb=Sa(Cb),ec=(Oa.rotate([0,0]),Sa(Cb));Oa.rotate(Zb);Lb.sphere=function(){ec.polygonStart();ec.lineStart();for(var hc=0,rc=360/Ha,Fc=2*Yb/Ha,jd=90-180/Ha,Dd=Bc;hc<Ha;++hc,jd-=rc,Dd-=Fc)ec.point(Mb(lb*
$b(Dd),eb)*vc,m(lb*zb(Dd))*vc),-90>jd?(ec.point(-90,-180-jd-.01),ec.point(-90,-180-jd+.01)):(ec.point(90,jd+.01),ec.point(90,jd-.01));ec.lineEnd();ec.polygonEnd()};return Lb};return Oa.scale(87.8076).center([0,17.1875]).clipAngle(179.999)};p.geoBerghausRaw=q;p.geoBertin1953=function(){return n.geoProjection(B()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])};p.geoBertin1953Raw=B;p.geoBoggs=function(){return n.geoProjection(C).scale(160.857)};p.geoBoggsRaw=C;p.geoBonne=function(){return v(F).scale(123.082).center([0,
26.1441]).parallel(45)};p.geoBonneRaw=F;p.geoBottomley=function(){var Ha=.5,Ga=n.geoProjectionMutator(J),Oa=Ga(Ha);Oa.fraction=function(Sa){return arguments.length?Ga(Ha=+Sa):Ha};return Oa.scale(158.837)};p.geoBottomleyRaw=J;p.geoBromley=function(){return n.geoProjection(xe).scale(152.63)};p.geoBromleyRaw=xe;p.geoChamberlin=H;p.geoChamberlinRaw=I;p.geoChamberlinAfrica=function(){return H([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])};p.geoCollignon=function(){return n.geoProjection(M).scale(95.6464).center([0,
30])};p.geoCollignonRaw=M;p.geoCraig=function(){return v(Q).scale(249.828).clipAngle(90)};p.geoCraigRaw=Q;p.geoCraster=function(){return n.geoProjection(Z).scale(156.19)};p.geoCrasterRaw=Z;p.geoCylindricalEqualArea=function(){return v(ca).parallel(38.58).scale(195.044)};p.geoCylindricalEqualAreaRaw=ca;p.geoCylindricalStereographic=function(){return v(W).scale(124.75)};p.geoCylindricalStereographicRaw=W;p.geoEckert1=function(){return n.geoProjection(T).scale(165.664)};p.geoEckert1Raw=T;p.geoEckert2=
function(){return n.geoProjection(U).scale(165.664)};p.geoEckert2Raw=U;p.geoEckert3=function(){return n.geoProjection(ha).scale(180.739)};p.geoEckert3Raw=ha;p.geoEckert4=function(){return n.geoProjection(Y).scale(180.739)};p.geoEckert4Raw=Y;p.geoEckert5=function(){return n.geoProjection(ba).scale(173.044)};p.geoEckert5Raw=ba;p.geoEckert6=function(){return n.geoProjection(ja).scale(173.044)};p.geoEckert6Raw=ja;p.geoEisenlohr=function(){return n.geoProjection(ma).scale(62.5271)};p.geoEisenlohrRaw=ma;
p.geoFahey=function(){return n.geoProjection(ia).scale(137.152)};p.geoFaheyRaw=ia;p.geoFoucaut=function(){return n.geoProjection(oa).scale(135.264)};p.geoFoucautRaw=oa;p.geoFoucautSinusoidal=function(){var Ha=.5,Ga=n.geoProjectionMutator(xa),Oa=Ga(Ha);Oa.alpha=function(Sa){return arguments.length?Ga(Ha=+Sa):Ha};return Oa.scale(168.725)};p.geoFoucautSinusoidalRaw=xa;p.geoGilbert=function(Ha){function Ga(lb){return Sa([lb[0]/2,m(qc(lb[1]/2*oc))*vc])}function Oa(lb){Ga[lb]=function(){return arguments.length?
(Sa[lb].apply(Sa,arguments),Ga):Sa[lb]()}}null==Ha&&(Ha=n.geoOrthographic);var Sa=Ha(),eb=n.geoEquirectangular().scale(vc).precision(0).clipAngle(null).translate([0,0]);Sa.invert&&(Ga.invert=function(lb){return ra(Sa.invert(lb))});Ga.stream=function(lb){var Cb=Sa.stream(lb);lb=eb.stream({point:function(Zb,Lb){Cb.point(Zb/2,m(qc(-Lb/2*oc))*vc)},lineStart:function(){Cb.lineStart()},lineEnd:function(){Cb.lineEnd()},polygonStart:function(){Cb.polygonStart()},polygonEnd:function(){Cb.polygonEnd()}});lb.sphere=
Cb.sphere;return lb};Ga.rotate=function(lb){return arguments.length?(eb.rotate(lb),Ga):eb.rotate()};Ga.center=function(lb){return arguments.length?(Sa.center([lb[0]/2,m(qc(lb[1]/2*oc))*vc]),Ga):ra(Sa.center())};Oa("angle");Oa("clipAngle");Oa("clipExtent");Oa("fitExtent");Oa("fitHeight");Oa("fitSize");Oa("fitWidth");Oa("scale");Oa("translate");Oa("precision");return Ga.scale(249.5)};p.geoGingery=function(){var Ha=6,Ga=30*oc,Oa=$b(Ga),Sa=zb(Ga),eb=n.geoProjectionMutator(la),lb=eb(Ga,Ha),Cb=lb.stream,
Zb=-$b(.01*oc),Lb=zb(.01*oc);lb.radius=function(ec){if(!arguments.length)return Ga*vc;Oa=$b(Ga=ec*oc);Sa=zb(Ga);return eb(Ga,Ha)};lb.lobes=function(ec){return arguments.length?eb(Ga,Ha=+ec):Ha};lb.stream=function(ec){var hc=lb.rotate(),rc=Cb(ec),Fc=(lb.rotate([0,0]),Cb(ec));lb.rotate(hc);rc.sphere=function(){Fc.polygonStart();Fc.lineStart();for(var jd=0,Dd=2*Yb/Ha,ye=0;jd<Ha;++jd,ye-=Dd)Fc.point(Mb(Lb*$b(ye),Zb)*vc,m(Lb*zb(ye))*vc),Fc.point(Mb(Sa*$b(ye-Dd/2),Oa)*vc,m(Sa*zb(ye-Dd/2))*vc);Fc.lineEnd();
Fc.polygonEnd()};return rc};return lb.rotate([90,-40]).scale(91.7095).clipAngle(179.999)};p.geoGingeryRaw=la;p.geoGinzburg4=function(){return n.geoProjection(wf).scale(149.995)};p.geoGinzburg4Raw=wf;p.geoGinzburg5=function(){return n.geoProjection(Me).scale(153.93)};p.geoGinzburg5Raw=Me;p.geoGinzburg6=function(){return n.geoProjection(Af).scale(130.945)};p.geoGinzburg6Raw=Af;p.geoGinzburg8=function(){return n.geoProjection(ta).scale(131.747)};p.geoGinzburg8Raw=ta;p.geoGinzburg9=function(){return n.geoProjection(ug).scale(131.087)};
p.geoGinzburg9Raw=ug;p.geoGringorten=function(){return n.geoProjection(za(Ia)).scale(239.75)};p.geoGringortenRaw=Ia;p.geoGuyou=function(){return n.geoProjection(za(sb)).scale(151.496)};p.geoGuyouRaw=sb;p.geoHammer=function(){var Ha=2,Ga=n.geoProjectionMutator(t),Oa=Ga(Ha);Oa.coefficient=function(Sa){return arguments.length?Ga(Ha=+Sa):Ha};return Oa.scale(169.529)};p.geoHammerRaw=t;p.geoHammerRetroazimuthal=function(){var Ha=0,Ga=n.geoProjectionMutator(jb),Oa=Ga(Ha),Sa=Oa.rotate,eb=Oa.stream,lb=n.geoCircle();
Oa.parallel=function(Cb){if(!arguments.length)return Ha*vc;var Zb=Oa.rotate();return Ga(Ha=Cb*oc).rotate(Zb)};Oa.rotate=function(Cb){if(!arguments.length)return Cb=Sa.call(Oa),Cb[1]+=Ha*vc,Cb;Sa.call(Oa,[Cb[0],Cb[1]-Ha*vc]);lb.center([-Cb[0],-Cb[1]]);return Oa};Oa.stream=function(Cb){Cb=eb(Cb);Cb.sphere=function(){Cb.polygonStart();var Zb=lb.radius(89.99)().coordinates[0],Lb=Zb.length-1,ec=-1,hc;for(Cb.lineStart();++ec<Lb;)Cb.point((hc=Zb[ec])[0],hc[1]);Cb.lineEnd();Zb=lb.radius(90.01)().coordinates[0];
for(Cb.lineStart();0<=--ec;)Cb.point((hc=Zb[ec])[0],hc[1]);Cb.lineEnd();Cb.polygonEnd()};return Cb};return Oa.scale(79.4187).parallel(45).clipAngle(179.999)};p.geoHammerRetroazimuthalRaw=jb;p.geoHealpix=function(){var Ha=4,Ga=n.geoProjectionMutator(qb),Oa=Ga(Ha),Sa=Oa.stream;Oa.lobes=function(eb){return arguments.length?Ga(Ha=+eb):Ha};Oa.stream=function(eb){var lb=Oa.rotate(),Cb=Sa(eb),Zb=(Oa.rotate([0,0]),Sa(eb));Oa.rotate(lb);Cb.sphere=function(){var Lb=n.geoStream;var ec=180/Ha;var hc=[].concat(k.range(-180,
180+ec/2,ec).map(Bb),k.range(180,-180-ec/2,-ec).map(ub));ec={type:"Polygon",coordinates:[180===ec?hc.map(wb):hc]};Lb.call(n,ec,Zb)};return Cb};return Oa.scale(239.75)};p.geoHealpixRaw=qb;p.geoHill=function(){var Ha=1,Ga=n.geoProjectionMutator(rb),Oa=Ga(Ha);Oa.ratio=function(Sa){return arguments.length?Ga(Ha=+Sa):Ha};return Oa.scale(167.774).center([0,18.67])};p.geoHillRaw=rb;p.geoHomolosine=function(){return n.geoProjection(Ma).scale(152.63)};p.geoHomolosineRaw=Ma;p.geoHufnagel=function(){var Ha=
1,Ga=0,Oa=45*oc,Sa=2,eb=n.geoProjectionMutator(La),lb=eb(Ha,Ga,Oa,Sa);lb.a=function(Cb){return arguments.length?eb(Ha=+Cb,Ga,Oa,Sa):Ha};lb.b=function(Cb){return arguments.length?eb(Ha,Ga=+Cb,Oa,Sa):Ga};lb.psiMax=function(Cb){return arguments.length?eb(Ha,Ga,Oa=+Cb*oc,Sa):Oa*vc};lb.ratio=function(Cb){return arguments.length?eb(Ha,Ga,Oa,Sa=+Cb):Sa};return lb.scale(180.739)};p.geoHufnagelRaw=La;p.geoHyperelliptical=function(){var Ha=0,Ga=2.5,Oa=1.183136,Sa=n.geoProjectionMutator(Ka),eb=Sa(Ha,Ga,Oa);
eb.alpha=function(lb){return arguments.length?Sa(Ha=+lb,Ga,Oa):Ha};eb.k=function(lb){return arguments.length?Sa(Ha,Ga=+lb,Oa):Ga};eb.gamma=function(lb){return arguments.length?Sa(Ha,Ga,Oa=+lb):Oa};return eb.scale(152.63)};p.geoHyperellipticalRaw=Ka;p.geoInterrupt=cb;p.geoInterruptedBoggs=function(){return cb(C,ih).scale(160.857)};p.geoInterruptedHomolosine=function(){return cb(Ma,Nh).scale(152.63)};p.geoInterruptedMollweide=function(){return cb(Yd,qh).scale(169.529)};p.geoInterruptedMollweideHemispheres=
function(){return cb(Yd,Yg).scale(169.529).rotate([20,0])};p.geoInterruptedSinuMollweide=function(){return cb(Ab,jh,z).rotate([-20,-55]).scale(164.263).center([0,-5.4036])};p.geoInterruptedSinusoidal=function(){return cb(y,kh).scale(152.63).rotate([-20,0])};p.geoKavrayskiy7=function(){return n.geoProjection(Eb).scale(158.837)};p.geoKavrayskiy7Raw=Eb;p.geoLagrange=function(){var Ha=.5,Ga=n.geoProjectionMutator(Pb),Oa=Ga(Ha);Oa.spacing=function(Sa){return arguments.length?Ga(Ha=+Sa):Ha};return Oa.scale(124.75)};
p.geoLagrangeRaw=Pb;p.geoLarrivee=function(){return n.geoProjection(fc).scale(97.2672)};p.geoLarriveeRaw=fc;p.geoLaskowski=function(){return n.geoProjection(pb).scale(139.98)};p.geoLaskowskiRaw=pb;p.geoLittrow=function(){return n.geoProjection(Db).scale(144.049).clipAngle(89.999)};p.geoLittrowRaw=Db;p.geoLoximuthal=function(){return v(Rb).parallel(40).scale(158.837)};p.geoLoximuthalRaw=Rb;p.geoMiller=function(){return n.geoProjection(xc).scale(108.318)};p.geoMillerRaw=xc;p.geoModifiedStereographic=
Ja;p.geoModifiedStereographicRaw=Ic;p.geoModifiedStereographicAlaska=function(){return Ja(ei,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)};p.geoModifiedStereographicGs48=function(){return Ja(gh,[95,-38]).scale(1E3).clipAngle(55).center([-96.5563,38.8675])};p.geoModifiedStereographicGs50=function(){return Ja(ng,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])};p.geoModifiedStereographicMiller=function(){return Ja(Zf,[-20,-18]).scale(209.091).center([20,
16.7214]).clipAngle(82)};p.geoModifiedStereographicLee=function(){return Ja(og,[165,10]).scale(250).clipAngle(130).center([-165,-10])};p.geoMollweide=function(){return n.geoProjection(Yd).scale(169.529)};p.geoMollweideRaw=Yd;p.geoMtFlatPolarParabolic=function(){return n.geoProjection(Pa).scale(164.859)};p.geoMtFlatPolarParabolicRaw=Pa;p.geoMtFlatPolarQuartic=function(){return n.geoProjection(db).scale(188.209)};p.geoMtFlatPolarQuarticRaw=db;p.geoMtFlatPolarSinusoidal=function(){return n.geoProjection(Jb).scale(166.518)};
p.geoMtFlatPolarSinusoidalRaw=Jb;p.geoNaturalEarth2=function(){return n.geoProjection(Gb).scale(175.295)};p.geoNaturalEarth2Raw=Gb;p.geoNellHammer=function(){return n.geoProjection(cc).scale(152.63)};p.geoNellHammerRaw=cc;p.geoInterruptedQuarticAuthalic=function(){return cb(t(Infinity),rh).rotate([20,0]).scale(152.63)};p.geoNicolosi=function(){return n.geoProjection(uc).scale(127.267)};p.geoNicolosiRaw=uc;p.geoPatterson=function(){return n.geoProjection(fd).scale(139.319)};p.geoPattersonRaw=fd;p.geoPolyconic=
function(){return n.geoProjection(kb).scale(103.74)};p.geoPolyconicRaw=kb;p.geoPolyhedral=Qc;p.geoPolyhedralButterfly=function(Ha){Ha=Ha||function(Oa){Oa=n.geoCentroid({type:"MultiPoint",coordinates:Oa});return n.geoGnomonic().scale(1).translate([0,0]).rotate([-Oa[0],-Oa[1]])};var Ga=Kf.map(function(Oa){return{face:Oa,project:Ha(Oa)}});[-1,0,0,1,0,1,4,5].forEach(function(Oa,Sa){(Oa=Ga[Oa])&&(Oa.children||(Oa.children=[])).push(Ga[Sa])});return Qc(Ga[0],function(Oa,Sa){return Ga[Oa<-Yb/2?0>Sa?6:4:
0>Oa?0>Sa?2:0:Oa<Yb/2?0>Sa?3:1:0>Sa?7:5]}).angle(-30).scale(101.858).center([0,45])};p.geoPolyhedralCollignon=function(Ha){Ha=Ha||function(Oa){Oa=n.geoCentroid({type:"MultiPoint",coordinates:Oa});return n.geoProjection(zc).translate([0,0]).scale(1).rotate(0<Oa[1]?[-Oa[0],0]:[180-Oa[0],180])};var Ga=Kf.map(function(Oa){return{face:Oa,project:Ha(Oa)}});[-1,0,0,1,0,1,4,5].forEach(function(Oa,Sa){(Oa=Ga[Oa])&&(Oa.children||(Oa.children=[])).push(Ga[Sa])});return Qc(Ga[0],function(Oa,Sa){return Ga[Oa<
-Yb/2?0>Sa?6:4:0>Oa?0>Sa?2:0:Oa<Yb/2?0>Sa?3:1:0>Sa?7:5]}).angle(-30).scale(121.906).center([0,48.5904])};p.geoPolyhedralWaterman=function(Ha){Ha=Ha||function(lb){lb=6===lb.length?n.geoCentroid({type:"MultiPoint",coordinates:lb}):lb[0];return n.geoGnomonic().scale(1).translate([0,0]).rotate([-lb[0],-lb[1]])};var Ga=Kf.map(function(lb){lb=lb.map(yb);for(var Cb=lb.length,Zb=lb[Cb-1],Lb,ec=[],hc=0;hc<Cb;++hc)Lb=lb[hc],ec.push(Ub([.9486832980505138*Zb[0]+.31622776601683794*Lb[0],.9486832980505138*Zb[1]+
.31622776601683794*Lb[1],.9486832980505138*Zb[2]+.31622776601683794*Lb[2]]),Ub([.9486832980505138*Lb[0]+.31622776601683794*Zb[0],.9486832980505138*Lb[1]+.31622776601683794*Zb[1],.9486832980505138*Lb[2]+.31622776601683794*Zb[2]])),Zb=Lb;return ec}),Oa=[],Sa=[-1,0,0,1,0,1,4,5];Ga.forEach(function(lb,Cb){for(var Zb=Kf[Cb],Lb=Zb.length,ec=Oa[Cb]=[],hc=0;hc<Lb;++hc){Ga.push([Zb[hc],lb[(2*hc+2)%(2*Lb)],lb[(2*hc+1)%(2*Lb)]]);Sa.push(Cb);var rc=ec,Fc=rc.push,jd=yb(lb[(2*hc+2)%(2*Lb)]),Dd=yb(lb[(2*hc+1)%(2*
Lb)]);Fc.call(rc,[jd[1]*Dd[2]-jd[2]*Dd[1],jd[2]*Dd[0]-jd[0]*Dd[2],jd[0]*Dd[1]-jd[1]*Dd[0]])}});var eb=Ga.map(function(lb){return{project:Ha(lb),face:lb}});Sa.forEach(function(lb,Cb){(lb=eb[lb])&&(lb.children||(lb.children=[])).push(eb[Cb])});return Qc(eb[0],function(lb,Cb){var Zb=$b(Cb);Zb=[Zb*$b(lb),Zb*zb(lb),zb(Cb)];lb=lb<-Yb/2?0>Cb?6:4:0>lb?0>Cb?2:0:lb<Yb/2?0>Cb?3:1:0>Cb?7:5;Cb=Oa[lb];return eb[0>Wb(Cb[0],Zb)?8+3*lb:0>Wb(Cb[1],Zb)?3*lb+9:0>Wb(Cb[2],Zb)?3*lb+10:lb]}).angle(-30).scale(110.625).center([0,
45])};p.geoProject=function(Ha,Ga){Ga=Ga.stream;if(!Ga)throw Error("invalid projection");switch(Ha&&Ha.type){case "Feature":var Oa=mc;break;case "FeatureCollection":Oa=Vb;break;default:Oa=Uc}return Oa(Ha,Ga)};p.geoGringortenQuincuncial=function(){return kd(Ia).scale(176.423)};p.geoPeirceQuincuncial=Bd;p.geoPierceQuincuncial=Bd;p.geoQuantize=function(Ha,Ga){function Oa(Lb){var ec=Lb.length,hc=2,rc=Array(ec);rc[0]=+Lb[0].toFixed(Ga);for(rc[1]=+Lb[1].toFixed(Ga);hc<ec;)rc[hc]=Lb[hc],++hc;return rc}function Sa(Lb){for(var ec=
Oa(Lb[0]),hc=[ec],rc=1;rc<Lb.length;rc++){var Fc=Oa(Lb[rc]);if(2<Fc.length||Fc[0]!=ec[0]||Fc[1]!=ec[1])hc.push(Fc),ec=Fc}1===hc.length&&1<Lb.length&&hc.push(Oa(Lb[Lb.length-1]));return hc}function eb(Lb){return Lb.map(Sa)}function lb(Lb){if(null==Lb)return Lb;switch(Lb.type){case "GeometryCollection":var ec={type:"GeometryCollection",geometries:Lb.geometries.map(lb)};break;case "Point":ec={type:"Point",coordinates:Oa(Lb.coordinates)};break;case "MultiPoint":ec={type:Lb.type,coordinates:Lb.coordinates.map(Oa)};
break;case "LineString":ec={type:Lb.type,coordinates:Sa(Lb.coordinates)};break;case "MultiLineString":case "Polygon":ec={type:Lb.type,coordinates:eb(Lb.coordinates)};break;case "MultiPolygon":ec={type:"MultiPolygon",coordinates:Lb.coordinates.map(eb)};break;default:return Lb}null!=Lb.bbox&&(ec.bbox=Lb.bbox);return ec}function Cb(Lb){var ec={type:"Feature",properties:Lb.properties,geometry:lb(Lb.geometry)};null!=Lb.id&&(ec.id=Lb.id);null!=Lb.bbox&&(ec.bbox=Lb.bbox);return ec}if(!(0<=(Ga=+Ga)&&20>=
Ga))throw Error("invalid digits");if(null!=Ha)switch(Ha.type){case "Feature":return Cb(Ha);case "FeatureCollection":var Zb={type:"FeatureCollection",features:Ha.features.map(Cb)};null!=Ha.bbox&&(Zb.bbox=Ha.bbox);return Zb;default:return lb(Ha)}return Ha};p.geoQuincuncial=kd;p.geoRectangularPolyconic=function(){return v(Fd).scale(131.215)};p.geoRectangularPolyconicRaw=Fd;p.geoRobinson=function(){return n.geoProjection(yd).scale(152.63)};p.geoRobinsonRaw=yd;p.geoSatellite=function(){var Ha=2,Ga=0,Oa=
n.geoProjectionMutator(cd),Sa=Oa(Ha,Ga);Sa.distance=function(eb){return arguments.length?Oa(Ha=+eb,Ga):Ha};Sa.tilt=function(eb){return arguments.length?Oa(Ha,Ga=eb*oc):Ga*vc};return Sa.scale(432.147).clipAngle(a(1/Ha)*vc-1E-6)};p.geoSatelliteRaw=cd;p.geoSinuMollweide=function(){return n.geoProjection(Ab).rotate([-20,-55]).scale(164.263).center([0,-5.4036])};p.geoSinuMollweideRaw=Ab;p.geoSinusoidal=function(){return n.geoProjection(y).scale(152.63)};p.geoSinusoidalRaw=y;p.geoStitch=function(Ha){if(null==
Ha)return Ha;switch(Ha.type){case "Feature":return Rd(Ha);case "FeatureCollection":var Ga={type:"FeatureCollection",features:Ha.features.map(Rd)};null!=Ha.bbox&&(Ga.bbox=Ha.bbox);return Ga;default:return Wd(Ha)}};p.geoTimes=function(){return n.geoProjection(Se).scale(146.153)};p.geoTimesRaw=Se;p.geoTwoPointAzimuthal=qf;p.geoTwoPointAzimuthalRaw=te;p.geoTwoPointAzimuthalUsa=function(){return qf([-158,21.5],[-77,39]).clipAngle(60).scale(400)};p.geoTwoPointEquidistant=of;p.geoTwoPointEquidistantRaw=
sf;p.geoTwoPointEquidistantUsa=function(){return of([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)};p.geoVanDerGrinten=function(){return n.geoProjection(vf).scale(79.4183)};p.geoVanDerGrintenRaw=vf;p.geoVanDerGrinten2=function(){return n.geoProjection(Bf).scale(79.4183)};p.geoVanDerGrinten2Raw=Bf;p.geoVanDerGrinten3=function(){return n.geoProjection(Sd).scale(79.4183)};p.geoVanDerGrinten3Raw=Sd;p.geoVanDerGrinten4=function(){return n.geoProjection(De).scale(127.16)};p.geoVanDerGrinten4Raw=De;
p.geoWagner=Qe;p.geoWagner7=function(){return Qe().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)};p.geoWagnerRaw=bf;p.geoWagner4=function(){return n.geoProjection(wh).scale(176.84)};p.geoWagner4Raw=wh;p.geoWagner6=function(){return n.geoProjection(He).scale(152.63)};p.geoWagner6Raw=He;p.geoWiechel=function(){return n.geoProjection($e).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)};p.geoWiechelRaw=$e;p.geoWinkel3=function(){return n.geoProjection(df).scale(158.837)};p.geoWinkel3Raw=
df;Object.defineProperty(p,"__esModule",{value:!0})})},{"d3-array":162,"d3-geo":169}],169:[function(b,N,G){(function(p,n){"object"===typeof G&&"undefined"!==typeof N?n(G,b("d3-array")):(p=p||self,n(p.d3=p.d3||{},p.d3))})(this,function(p,n){function k(){this.reset()}function m(Ya,Qa,Ob){var bc=Ya.s=Qa+Ob,gc=bc-Qa;Ya.t=Qa-(bc-gc)+(Ob-gc)}function a(Ya){return 1<Ya?0:-1>Ya?Sd:Math.acos(Ya)}function g(Ya){return 1<Ya?De:-1>Ya?-De:Math.asin(Ya)}function h(Ya){return(Ya=qd(Ya/2))*Ya}function r(){}function l(Ya,
Qa){if(Ya&&oe.hasOwnProperty(Ya.type))oe[Ya.type](Ya,Qa)}function c(Ya,Qa,Ob){var bc=-1;Ob=Ya.length-Ob;for(Qa.lineStart();++bc<Ob;){var gc=Ya[bc];Qa.point(gc[0],gc[1],gc[2])}Qa.lineEnd()}function d(Ya,Qa){var Ob=-1,bc=Ya.length;for(Qa.polygonStart();++Ob<bc;)c(Ya[Ob],Qa,1);Qa.polygonEnd()}function e(Ya,Qa){if(Ya&&Be.hasOwnProperty(Ya.type))Be[Ya.type](Ya,Qa);else l(Ya,Qa)}function f(){Pc.point=t}function q(){w(Yb,Bc)}function t(Ya,Qa){Pc.point=w;Yb=Ya;Bc=Qa;Ya*=He;Qa*=He;bd=Ya;ed=Gd(Qa=Qa/2+hf);
Vc=qd(Qa)}function w(Ya,Qa){Ya*=He;Qa*=He;Qa=Qa/2+hf;var Ob=Ya-bd,bc=0<=Ob?1:-1,gc=bc*Ob;Ob=Gd(Qa);Qa=qd(Qa);var dd=Vc*Qa,md=ed*Ob+dd*Gd(gc);bc=dd*bc*qd(gc);zb.add(Rc(bc,md));bd=Ya;ed=Ob;Vc=Qa}function x(Ya){return[Rc(Ya[1],Ya[0]),g(Ya[2])]}function z(Ya){var Qa=Ya[0];Ya=Ya[1];var Ob=Gd(Ya);return[Ob*Gd(Qa),Ob*qd(Qa),qd(Ya)]}function B(Ya,Qa){return Ya[0]*Qa[0]+Ya[1]*Qa[1]+Ya[2]*Qa[2]}function A(Ya,Qa){return[Ya[1]*Qa[2]-Ya[2]*Qa[1],Ya[2]*Qa[0]-Ya[0]*Qa[2],Ya[0]*Qa[1]-Ya[1]*Qa[0]]}function D(Ya,Qa){Ya[0]+=
Qa[0];Ya[1]+=Qa[1];Ya[2]+=Qa[2]}function C(Ya,Qa){return[Ya[0]*Qa,Ya[1]*Qa,Ya[2]*Qa]}function v(Ya){var Qa=Id(Ya[0]*Ya[0]+Ya[1]*Ya[1]+Ya[2]*Ya[2]);Ya[0]/=Qa;Ya[1]/=Qa;Ya[2]/=Qa}function y(Ya,Qa){Ve.push(wf=[yc=Ya,oc=Ya]);Qa<vc&&(vc=Qa);Qa>vd&&(vd=Qa)}function F(Ya,Qa){var Ob=z([Ya*He,Qa*He]);if(Td){var bc=A(Td,Ob);bc=A([bc[1],-bc[0],0],bc);v(bc);bc=x(bc);var gc=Ya-Qd,dd=0<gc?1:-1,md=bc[0]*Qe*dd;gc=180<$e(gc);gc^(dd*Qd<md&&md<dd*Ya)?(bc=bc[1]*Qe,bc>vd&&(vd=bc)):(md=(md+360)%360-180,gc^(dd*Qd<md&&md<
dd*Ya))?(bc=-bc[1]*Qe,bc<vc&&(vc=bc)):(Qa<vc&&(vc=Qa),Qa>vd&&(vd=Qa));gc?Ya<Qd?H(yc,Ya)>H(yc,oc)&&(oc=Ya):H(Ya,oc)>H(yc,oc)&&(yc=Ya):oc>=yc?(Ya<yc&&(yc=Ya),Ya>oc&&(oc=Ya)):Ya>Qd?H(yc,Ya)>H(yc,oc)&&(oc=Ya):H(Ya,oc)>H(yc,oc)&&(yc=Ya)}else Ve.push(wf=[yc=Ya,oc=Ya]);Qa<vc&&(vc=Qa);Qa>vd&&(vd=Qa);Td=Ob;Qd=Ya}function J(){Me.point=F}function K(){wf[0]=yc;wf[1]=oc;Me.point=y;Td=null}function O(Ya,Qa){if(Td){var Ob=Ya-Qd;Oe.add(180<$e(Ob)?Ob+(0<Ob?360:-360):Ob)}else Yd=Ya,xe=Qa;Pc.point(Ya,Qa);F(Ya,Qa)}function I(){Pc.lineStart()}
function L(){O(Yd,xe);Pc.lineEnd();1E-6<$e(Oe)&&(yc=-(oc=180));wf[0]=yc;wf[1]=oc;Td=null}function H(Ya,Qa){return 0>(Qa-=Ya)?Qa+360:Qa}function M(Ya,Qa){return Ya[0]-Qa[0]}function Q(Ya,Qa){return Ya[0]<=Ya[1]?Ya[0]<=Qa&&Qa<=Ya[1]:Qa<Ya[0]||Ya[1]<Qa}function Z(Ya,Qa){Ya*=He;Qa*=He;var Ob=Gd(Qa);ca(Ob*Gd(Ya),Ob*qd(Ya),qd(Qa))}function ca(Ya,Qa,Ob){++Af;vg+=(Ya-vg)/Af;Gg+=(Qa-Gg)/Af;ih+=(Ob-ih)/Af}function W(){Hg.point=T}function T(Ya,Qa){Ya*=He;Qa*=He;var Ob=Gd(Qa);ng=Ob*Gd(Ya);Zf=Ob*qd(Ya);og=qd(Qa);
Hg.point=U;ca(ng,Zf,og)}function U(Ya,Qa){Ya*=He;Qa*=He;var Ob=Gd(Qa),bc=Ob*Gd(Ya);Ya=Ob*qd(Ya);Qa=qd(Qa);var gc=Rc(Id((gc=Zf*Qa-og*Ya)*gc+(gc=og*bc-ng*Qa)*gc+(gc=ng*Ya-Zf*bc)*gc),ng*bc+Zf*Ya+og*Qa);ug+=gc;Nh+=gc*(ng+(ng=bc));qh+=gc*(Zf+(Zf=Ya));Yg+=gc*(og+(og=Qa));ca(ng,Zf,og)}function ha(){Hg.point=Z}function Y(){Hg.point=ja}function ba(){ma(ei,gh);Hg.point=Z}function ja(Ya,Qa){ei=Ya;gh=Qa;Ya*=He;Qa*=He;Hg.point=ma;var Ob=Gd(Qa);ng=Ob*Gd(Ya);Zf=Ob*qd(Ya);og=qd(Qa);ca(ng,Zf,og)}function ma(Ya,Qa){Ya*=
He;Qa*=He;var Ob=Gd(Qa),bc=Ob*Gd(Ya);Ya=Ob*qd(Ya);Qa=qd(Qa);Ob=Zf*Qa-og*Ya;var gc=og*bc-ng*Qa,dd=ng*Ya-Zf*bc,md=Id(Ob*Ob+gc*gc+dd*dd),gd=g(md);md=md&&-gd/md;jh+=md*Ob;kh+=md*gc;fh+=md*dd;ug+=gd;Nh+=gd*(ng+(ng=bc));qh+=gd*(Zf+(Zf=Ya));Yg+=gd*(og+(og=Qa));ca(ng,Zf,og)}function ia(Ya){return function(){return Ya}}function oa(Ya,Qa){function Ob(bc,gc){return bc=Ya(bc,gc),Qa(bc[0],bc[1])}Ya.invert&&Qa.invert&&(Ob.invert=function(bc,gc){return bc=Qa.invert(bc,gc),bc&&Ya.invert(bc[0],bc[1])});return Ob}
function xa(Ya,Qa){return[$e(Ya)>Sd?Ya+Math.round(-Ya/bf)*bf:Ya,Qa]}function ra(Ya,Qa,Ob){return(Ya%=bf)?Qa||Ob?oa(ka(Ya),na(Qa,Ob)):ka(Ya):Qa||Ob?na(Qa,Ob):xa}function la(Ya){return function(Qa,Ob){return Qa+=Ya,[Qa>Sd?Qa-bf:Qa<-Sd?Qa+bf:Qa,Ob]}}function ka(Ya){var Qa=la(Ya);Qa.invert=la(-Ya);return Qa}function na(Ya,Qa){function Ob(gd,nd){var rd=Gd(nd),Od=Gd(gd)*rd;gd=qd(gd)*rd;nd=qd(nd);rd=nd*bc+Od*gc;return[Rc(gd*dd-rd*md,Od*bc-nd*gc),g(rd*dd+gd*md)]}var bc=Gd(Ya),gc=qd(Ya),dd=Gd(Qa),md=qd(Qa);
Ob.invert=function(gd,nd){var rd=Gd(nd),Od=Gd(gd)*rd;gd=qd(gd)*rd;nd=qd(nd);rd=nd*dd-gd*md;return[Rc(gd*dd+nd*md,Od*bc+rd*gc),g(rd*bc-Od*gc)]};return Ob}function qa(Ya){function Qa(Ob){Ob=Ya(Ob[0]*He,Ob[1]*He);return Ob[0]*=Qe,Ob[1]*=Qe,Ob}Ya=ra(Ya[0]*He,Ya[1]*He,2<Ya.length?Ya[2]*He:0);Qa.invert=function(Ob){Ob=Ya.invert(Ob[0]*He,Ob[1]*He);return Ob[0]*=Qe,Ob[1]*=Qe,Ob};return Qa}function ta(Ya,Qa,Ob,bc,gc,dd){if(Ob){var md=Gd(Qa),gd=qd(Qa);Ob*=bc;if(null==gc)gc=Qa+bc*bf,dd=Qa-Ob/2;else if(gc=za(md,
gc),dd=za(md,dd),0<bc?gc<dd:gc>dd)gc+=bc*bf;for(;0<bc?gc>dd:gc<dd;gc-=Ob)Qa=x([md,-gd*Gd(gc),-gd*qd(gc)]),Ya.point(Qa[0],Qa[1])}}function za(Ya,Qa){Qa=z(Qa);Qa[0]-=Ya;v(Qa);Ya=a(-Qa[1]);return((0>-Qa[2]?-Ya:Ya)+bf-1E-6)%bf}function Ia(){var Ya=[],Qa;return{point:function(Ob,bc,gc){Qa.push([Ob,bc,gc])},lineStart:function(){Ya.push(Qa=[])},lineEnd:r,rejoin:function(){1<Ya.length&&Ya.push(Ya.pop().concat(Ya.shift()))},result:function(){var Ob=Ya;Ya=[];Qa=null;return Ob}}}function Xa(Ya,Qa){return 1E-6>
$e(Ya[0]-Qa[0])&&1E-6>$e(Ya[1]-Qa[1])}function $a(Ya,Qa,Ob,bc){this.x=Ya;this.z=Qa;this.o=Ob;this.e=bc;this.v=!1;this.n=this.p=null}function gb(Ya,Qa,Ob,bc,gc){var dd=[],md=[];Ya.forEach(function(xd){if(!(0>=(Kd=xd.length-1))){var Kd,$d=xd[0],fe=xd[Kd];if(Xa($d,fe)){if(!$d[2]&&!fe[2]){gc.lineStart();for(gd=0;gd<Kd;++gd)gc.point(($d=xd[gd])[0],$d[1]);gc.lineEnd();return}fe[0]+=2E-6}dd.push(Kd=new $a($d,xd,null,!0));md.push(Kd.o=new $a($d,null,Kd,!1));dd.push(Kd=new $a(fe,xd,null,!1));md.push(Kd.o=
new $a(fe,null,Kd,!0))}});if(dd.length){md.sort(Qa);sb(dd);sb(md);var gd=0;for(Ya=md.length;gd<Ya;++gd)md[gd].e=Ob=!Ob;Ob=dd[0];for(var nd;;){for(var rd=Ob,Od=!0;rd.v;)if((rd=rd.n)===Ob)return;Qa=rd.z;gc.lineStart();do{rd.v=rd.o.v=!0;if(rd.e){if(Od)for(gd=0,Ya=Qa.length;gd<Ya;++gd)gc.point((nd=Qa[gd])[0],nd[1]);else bc(rd.x,rd.n.x,1,gc);rd=rd.n}else{if(Od)for(Qa=rd.p.z,gd=Qa.length-1;0<=gd;--gd)gc.point((nd=Qa[gd])[0],nd[1]);else bc(rd.x,rd.p.x,-1,gc);rd=rd.p}rd=rd.o;Qa=rd.z;Od=!Od}while(!rd.v);gc.lineEnd()}}}
function sb(Ya){if(Qa=Ya.length){for(var Qa,Ob=0,bc=Ya[0],gc;++Ob<Qa;)bc.n=gc=Ya[Ob],gc.p=bc,bc=gc;bc.n=gc=Ya[0];gc.p=bc}}function jb(Ya){return $e(Ya[0])<=Sd?Ya[0]:qe(Ya[0])*(($e(Ya[0])+Sd)%bf-Sd)}function vb(Ya,Qa){var Ob=jb(Qa);Qa=Qa[1];var bc=qd(Qa),gc=[qd(Ob),-Gd(Ob),0],dd=0,md=0;Tg.reset();1===bc?Qa=De+1E-6:-1===bc&&(Qa=-De-1E-6);bc=0;for(var gd=Ya.length;bc<gd;++bc)if(rd=(nd=Ya[bc]).length){var nd,rd,Od=nd[rd-1],xd=jb(Od),Kd=Od[1]/2+hf,$d=qd(Kd),fe=Gd(Kd);for(Kd=0;Kd<rd;++Kd,xd=gf,$d=Te,fe=
le,Od=ae){var ae=nd[Kd],gf=jb(ae);le=ae[1]/2+hf;var Te=qd(le),le=Gd(le),pe=gf-xd,ge=0<=pe?1:-1,Ge=ge*pe,nf=Ge>Sd;$d*=Te;Tg.add(Rc($d*ge*qd(Ge),fe*le+$d*Gd(Ge)));dd+=nf?pe+ge*bf:pe;nf^xd>=Ob^gf>=Ob&&(Od=A(z(Od),z(ae)),v(Od),xd=A(gc,Od),v(xd),xd=(nf^0<=pe?-1:1)*g(xd[2]),Qa>xd||Qa===xd&&(Od[0]||Od[1]))&&(md+=nf^0<=pe?1:-1)}}return(-1E-6>dd||1E-6>dd&&-1E-6>Tg)^md&1}function qb(Ya,Qa,Ob,bc){return function(gc){function dd(ge,Ge){Ya(ge,Ge)&&gc.point(ge,Ge)}function md(ge,Ge){Kd.point(ge,Ge)}function gd(){pe.point=
md;Kd.lineStart()}function nd(){pe.point=dd;Kd.lineEnd()}function rd(ge,Ge){le.push([ge,Ge]);fe.point(ge,Ge)}function Od(){fe.lineStart();le=[]}function xd(){rd(le[0][0],le[0][1]);fe.lineEnd();var ge=fe.clean(),Ge=$d.result(),nf=Ge.length,Cf;le.pop();gf.push(le);le=null;if(nf)if(ge&1){if(nf=Ge[0],0<(Ge=nf.length-1)){ae||(gc.polygonStart(),ae=!0);gc.lineStart();for(ge=0;ge<Ge;++ge)gc.point((Cf=nf[ge])[0],Cf[1]);gc.lineEnd()}}else 1<nf&&ge&2&&Ge.push(Ge.pop().concat(Ge.shift())),Te.push(Ge.filter(Bb))}
var Kd=Qa(gc),$d=Ia(),fe=Qa($d),ae=!1,gf,Te,le,pe={point:dd,lineStart:gd,lineEnd:nd,polygonStart:function(){pe.point=rd;pe.lineStart=Od;pe.lineEnd=xd;Te=[];gf=[]},polygonEnd:function(){pe.point=dd;pe.lineStart=gd;pe.lineEnd=nd;Te=n.merge(Te);var ge=vb(gf,bc);Te.length?(ae||(gc.polygonStart(),ae=!0),gb(Te,ub,ge,Ob,gc)):ge&&(ae||(gc.polygonStart(),ae=!0),gc.lineStart(),Ob(null,null,1,gc),gc.lineEnd());ae&&(gc.polygonEnd(),ae=!1);Te=gf=null},sphere:function(){gc.polygonStart();gc.lineStart();Ob(null,
null,1,gc);gc.lineEnd();gc.polygonEnd()}};return pe}}function Bb(Ya){return 1<Ya.length}function ub(Ya,Qa){return(0>(Ya=Ya.x)[0]?Ya[1]-De-1E-6:De-Ya[1])-(0>(Qa=Qa.x)[0]?Qa[1]-De-1E-6:De-Qa[1])}function wb(Ya){function Qa(nd,rd){return Gd(nd)*Gd(rd)>gc}function Ob(nd,rd,Od){var xd=z(nd),Kd=z(rd),$d=[1,0,0];Kd=A(xd,Kd);var fe=B(Kd,Kd);xd=Kd[0];var ae=fe-xd*xd;if(!ae)return!Od&&nd;fe=gc*fe/ae;ae=-gc*xd/ae;xd=A($d,Kd);$d=C($d,fe);Kd=C(Kd,ae);D($d,Kd);Kd=B($d,xd);fe=B(xd,xd);ae=Kd*Kd-fe*(B($d,$d)-1);if(!(0>
ae)){var gf=Id(ae);ae=C(xd,(-Kd-gf)/fe);D(ae,$d);ae=x(ae);if(!Od)return ae;Od=nd[0];var Te=rd[0];nd=nd[1];rd=rd[1];if(Te<Od){var le=Od;Od=Te;Te=le}var pe=Te-Od,ge=1E-6>$e(pe-Sd);!ge&&rd<nd&&(le=nd,nd=rd,rd=le);if(ge||1E-6>pe?ge?0<nd+rd^ae[1]<(1E-6>$e(ae[0]-Od)?nd:rd):nd<=ae[1]&&ae[1]<=rd:pe>Sd^(Od<=ae[0]&&ae[0]<=Te))return rd=C(xd,(-Kd+gf)/fe),D(rd,$d),[ae,x(rd)]}}function bc(nd,rd){var Od=md?Ya:Sd-Ya,xd=0;nd<-Od?xd|=1:nd>Od&&(xd|=2);rd<-Od?xd|=4:rd>Od&&(xd|=8);return xd}var gc=Gd(Ya),dd=6*He,md=
0<gc,gd=1E-6<$e(gc);return qb(Qa,function(nd){var rd,Od,xd,Kd,$d;return{lineStart:function(){Kd=xd=!1;$d=1},point:function(fe,ae){var gf=[fe,ae],Te=Qa(fe,ae);ae=md?Te?0:bc(fe,ae):Te?bc(fe+(0>fe?Sd:-Sd),ae):0;!rd&&(Kd=xd=Te)&&nd.lineStart();Te!==xd&&(fe=Ob(rd,gf),!fe||Xa(rd,fe)||Xa(gf,fe))&&(gf[2]=1);if(Te!==xd)$d=0,Te?(nd.lineStart(),fe=Ob(gf,rd),nd.point(fe[0],fe[1])):(fe=Ob(rd,gf),nd.point(fe[0],fe[1],2),nd.lineEnd()),rd=fe;else if(gd&&rd&&md^Te){var le;ae&Od||!(le=Ob(gf,rd,!0))||($d=0,md?(nd.lineStart(),
nd.point(le[0][0],le[0][1]),nd.point(le[1][0],le[1][1]),nd.lineEnd()):(nd.point(le[1][0],le[1][1]),nd.lineEnd(),nd.lineStart(),nd.point(le[0][0],le[0][1],3)))}!Te||rd&&Xa(rd,gf)||nd.point(gf[0],gf[1]);rd=gf;xd=Te;Od=ae},lineEnd:function(){xd&&nd.lineEnd();rd=null},clean:function(){return $d|(Kd&&xd)<<1}}},function(nd,rd,Od,xd){ta(xd,Ya,dd,Od,nd,rd)},md?[0,-Ya]:[-Sd,Ya-Sd])}function rb(Ya,Qa,Ob,bc,gc,dd){var md=Ya[0],gd=Ya[1],nd=0,rd=1,Od=Qa[0]-md,xd=Qa[1]-gd;Ob-=md;if(Od||!(0<Ob)){Ob/=Od;if(0>Od){if(Ob<
nd)return;Ob<rd&&(rd=Ob)}else if(0<Od){if(Ob>rd)return;Ob>nd&&(nd=Ob)}Ob=gc-md;if(Od||!(0>Ob)){Ob/=Od;if(0>Od){if(Ob>rd)return;Ob>nd&&(nd=Ob)}else if(0<Od){if(Ob<nd)return;Ob<rd&&(rd=Ob)}Ob=bc-gd;if(xd||!(0<Ob)){Ob/=xd;if(0>xd){if(Ob<nd)return;Ob<rd&&(rd=Ob)}else if(0<xd){if(Ob>rd)return;Ob>nd&&(nd=Ob)}Ob=dd-gd;if(xd||!(0>Ob)){Ob/=xd;if(0>xd){if(Ob>rd)return;Ob>nd&&(nd=Ob)}else if(0<xd){if(Ob<nd)return;Ob<rd&&(rd=Ob)}0<nd&&(Ya[0]=md+nd*Od,Ya[1]=gd+nd*xd);1>rd&&(Qa[0]=md+rd*Od,Qa[1]=gd+rd*xd);return!0}}}}}
function Ab(Ya,Qa,Ob,bc){function gc(nd,rd,Od,xd){var Kd=0,$d=0;if(null==nd||(Kd=dd(nd,Od))!==($d=dd(rd,Od))||0>gd(nd,rd)^0<Od){do xd.point(0===Kd||3===Kd?Ya:Ob,1<Kd?bc:Qa);while((Kd=(Kd+Od+4)%4)!==$d)}else xd.point(rd[0],rd[1])}function dd(nd,rd){return 1E-6>$e(nd[0]-Ya)?0<rd?0:3:1E-6>$e(nd[0]-Ob)?0<rd?2:1:1E-6>$e(nd[1]-Qa)?0<rd?1:0:0<rd?3:2}function md(nd,rd){return gd(nd.x,rd.x)}function gd(nd,rd){var Od=dd(nd,1),xd=dd(rd,1);return Od!==xd?Od-xd:0===Od?rd[1]-nd[1]:1===Od?nd[0]-rd[0]:2===Od?nd[1]-
rd[1]:rd[0]-nd[0]}return function(nd){function rd(af,Ye){Ya<=af&&af<=Ob&&Qa<=Ye&&Ye<=bc&&xd.point(af,Ye)}function Od(af,Ye){var hg=Ya<=af&&af<=Ob&&Qa<=Ye&&Ye<=bc;fe&&ae.push([af,Ye]);if(nf)gf=af,Te=Ye,le=hg,nf=!1,hg&&(xd.lineStart(),xd.point(af,Ye));else if(hg&&Ge)xd.point(af,Ye);else{var eg=[pe=Math.max(-1E9,Math.min(1E9,pe)),ge=Math.max(-1E9,Math.min(1E9,ge))],tg=[af=Math.max(-1E9,Math.min(1E9,af)),Ye=Math.max(-1E9,Math.min(1E9,Ye))];rb(eg,tg,Ya,Qa,Ob,bc)?(Ge||(xd.lineStart(),xd.point(eg[0],eg[1])),
xd.point(tg[0],tg[1]),hg||xd.lineEnd(),Cf=!1):hg&&(xd.lineStart(),xd.point(af,Ye),Cf=!1)}pe=af;ge=Ye;Ge=hg}var xd=nd,Kd=Ia(),$d,fe,ae,gf,Te,le,pe,ge,Ge,nf,Cf,If={point:rd,lineStart:function(){If.point=Od;fe&&fe.push(ae=[]);nf=!0;Ge=!1;pe=ge=NaN},lineEnd:function(){$d&&(Od(gf,Te),le&&Ge&&Kd.rejoin(),$d.push(Kd.result()));If.point=rd;Ge&&xd.lineEnd()},polygonStart:function(){xd=Kd;$d=[];fe=[];Cf=!0},polygonEnd:function(){for(var af,Ye=af=0,hg=fe.length;Ye<hg;++Ye){var eg=fe[Ye],tg=1,Sf=eg.length,Ie=
eg[0],Of=Ie[0];for(Ie=Ie[1];tg<Sf;++tg){var Eg=Of;var ah=Ie;Ie=eg[tg];Of=Ie[0];Ie=Ie[1];ah<=bc?Ie>bc&&(Of-Eg)*(bc-ah)>(Ie-ah)*(Ya-Eg)&&++af:Ie<=bc&&(Of-Eg)*(bc-ah)<(Ie-ah)*(Ya-Eg)&&--af}}Ye=Cf&&af;hg=($d=n.merge($d)).length;if(Ye||hg)nd.polygonStart(),Ye&&(nd.lineStart(),gc(null,null,1,nd),nd.lineEnd()),hg&&gb($d,md,af,gc,nd),nd.polygonEnd();xd=nd;$d=fe=ae=null}};return If}}function Ma(){$f.point=$f.lineEnd=r}function La(Ya,Qa){Ya*=He;Qa*=He;lh=Ya;Kf=qd(Qa);Zg=Gd(Qa);$f.point=ya}function ya(Ya,Qa){Ya*=
He;Qa*=He;var Ob=qd(Qa);Qa=Gd(Qa);var bc=$e(Ya-lh),gc=Gd(bc);bc=qd(bc);bc*=Qa;var dd=Zg*Ob-Kf*Qa*gc;gc=Kf*Ob+Zg*Qa*gc;hh.add(Rc(Id(bc*bc+dd*dd),gc));lh=Ya;Kf=Ob;Zg=Qa}function Aa(Ya){hh.reset();e(Ya,$f);return+hh}function Ka(Ya,Qa){Nf[0]=Ya;Nf[1]=Qa;return Aa(vh)}function Ta(Ya,Qa){return Ya&&Gh.hasOwnProperty(Ya.type)?Gh[Ya.type](Ya,Qa):!1}function bb(Ya,Qa){for(var Ob,bc,gc,dd=0,md=Ya.length;dd<md;dd++){bc=Ka(Ya[dd],Qa);if(0===bc||0<dd&&(gc=Ka(Ya[dd],Ya[dd-1]),0<gc&&Ob<=gc&&bc<=gc&&(Ob+bc-gc)*(1-
Math.pow((Ob-bc)/gc,2))<1E-12*gc))return!0;Ob=bc}return!1}function cb(Ya,Qa){return!!vb(Ya.map(Eb),Pb(Qa))}function Eb(Ya){return Ya=Ya.map(Pb),Ya.pop(),Ya}function Pb(Ya){return[Ya[0]*He,Ya[1]*He]}function fc(Ya,Qa,Ob){var bc=n.range(Ya,Qa-1E-6,Ob).concat(Qa);return function(gc){return bc.map(function(dd){return[gc,dd]})}}function pb(Ya,Qa,Ob){var bc=n.range(Ya,Qa-1E-6,Ob).concat(Qa);return function(gc){return bc.map(function(dd){return[dd,gc]})}}function Db(){function Ya(){return{type:"MultiLineString",
coordinates:Qa()}}function Qa(){return n.range(Mb(dd/Kd)*Kd,gc,Kd).map(gf).concat(n.range(Mb(rd/$d)*$d,nd,$d).map(Te)).concat(n.range(Mb(bc/Od)*Od,Ob,Od).filter(function(pe){return 1E-6<$e(pe%Kd)}).map(fe)).concat(n.range(Mb(gd/xd)*xd,md,xd).filter(function(pe){return 1E-6<$e(pe%$d)}).map(ae))}var Ob,bc,gc,dd,md,gd,nd,rd,Od=10,xd=Od,Kd=90,$d=360,fe,ae,gf,Te,le=2.5;Ya.lines=function(){return Qa().map(function(pe){return{type:"LineString",coordinates:pe}})};Ya.outline=function(){return{type:"Polygon",
coordinates:[gf(dd).concat(Te(nd).slice(1),gf(gc).reverse().slice(1),Te(rd).reverse().slice(1))]}};Ya.extent=function(pe){return arguments.length?Ya.extentMajor(pe).extentMinor(pe):Ya.extentMinor()};Ya.extentMajor=function(pe){if(!arguments.length)return[[dd,rd],[gc,nd]];dd=+pe[0][0];gc=+pe[1][0];rd=+pe[0][1];nd=+pe[1][1];dd>gc&&(pe=dd,dd=gc,gc=pe);rd>nd&&(pe=rd,rd=nd,nd=pe);return Ya.precision(le)};Ya.extentMinor=function(pe){if(!arguments.length)return[[bc,gd],[Ob,md]];bc=+pe[0][0];Ob=+pe[1][0];
gd=+pe[0][1];md=+pe[1][1];bc>Ob&&(pe=bc,bc=Ob,Ob=pe);gd>md&&(pe=gd,gd=md,md=pe);return Ya.precision(le)};Ya.step=function(pe){return arguments.length?Ya.stepMajor(pe).stepMinor(pe):Ya.stepMinor()};Ya.stepMajor=function(pe){if(!arguments.length)return[Kd,$d];Kd=+pe[0];$d=+pe[1];return Ya};Ya.stepMinor=function(pe){if(!arguments.length)return[Od,xd];Od=+pe[0];xd=+pe[1];return Ya};Ya.precision=function(pe){if(!arguments.length)return le;le=+pe;fe=fc(gd,md,90);ae=pb(bc,Ob,le);gf=fc(rd,nd,90);Te=pb(dd,
gc,le);return Ya};return Ya.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}function Rb(Ya){return Ya}function xc(){Oa.point=Ic}function Ic(Ya,Qa){Oa.point=Ja;nh=Ha=Ya;wh=Ga=Qa}function Ja(Ya,Qa){wg.add(Ga*Ya-Ha*Qa);Ha=Ya;Ga=Qa}function Pa(){Ja(nh,wh)}function db(Ya,Qa){Lb+=Ya;ec+=Qa;++hc}function Jb(){Mf.point=Gb}function Gb(Ya,Qa){Mf.point=cc;db(Je=Ya,Tf=Qa)}function cc(Ya,Qa){var Ob=Ya-Je,bc=Qa-Tf;Ob=Id(Ob*Ob+bc*bc);rc+=Ob*(Je+Ya)/2;Fc+=Ob*(Tf+
Qa)/2;jd+=Ob;db(Je=Ya,Tf=Qa)}function uc(){Mf.point=db}function fd(){Mf.point=Qb}function kb(){dc(Xe,Vf)}function Qb(Ya,Qa){Mf.point=dc;db(Xe=Je=Ya,Vf=Tf=Qa)}function dc(Ya,Qa){var Ob=Ya-Je,bc=Qa-Tf;Ob=Id(Ob*Ob+bc*bc);rc+=Ob*(Je+Ya)/2;Fc+=Ob*(Tf+Qa)/2;jd+=Ob;Ob=Tf*Ya-Je*Qa;Dd+=Ob*(Je+Ya);ye+=Ob*(Tf+Qa);Ae+=3*Ob;db(Je=Ya,Tf=Qa)}function Ec(Ya){this._context=Ya}function Qc(Ya,Qa){oh.point=Tc;Kg=Ff=Ya;Ug=Lf=Qa}function Tc(Ya,Qa){Ff-=Ya;Lf-=Qa;tf.add(Id(Ff*Ff+Lf*Lf));Ff=Ya;Lf=Qa}function tb(){this._string=
[]}function Ib(Ya){return"m0,"+Ya+"a"+Ya+","+Ya+" 0 1,1 0,"+-2*Ya+"a"+Ya+","+Ya+" 0 1,1 0,"+2*Ya+"z"}function sc(Ya){return function(Qa){var Ob=new pc,bc;for(bc in Ya)Ob[bc]=Ya[bc];Ob.stream=Qa;return Ob}}function pc(){}function zc(Ya,Qa,Ob){var bc=Ya.clipExtent&&Ya.clipExtent();Ya.scale(150).translate([0,0]);null!=bc&&Ya.clipExtent(null);e(Ob,Ya.stream(Zb));Qa(Zb.result());null!=bc&&Ya.clipExtent(bc);return Ya}function Wb(Ya,Qa,Ob){return zc(Ya,function(bc){var gc=Qa[1][0]-Qa[0][0],dd=Qa[1][1]-Qa[0][1],
md=Math.min(gc/(bc[1][0]-bc[0][0]),dd/(bc[1][1]-bc[0][1]));gc=+Qa[0][0]+(gc-md*(bc[1][0]+bc[0][0]))/2;bc=+Qa[0][1]+(dd-md*(bc[1][1]+bc[0][1]))/2;Ya.scale(150*md).translate([gc,bc])},Ob)}function Ub(Ya,Qa,Ob){return zc(Ya,function(bc){var gc=+Qa,dd=gc/(bc[1][0]-bc[0][0]);gc=(gc-dd*(bc[1][0]+bc[0][0]))/2;bc=-dd*bc[0][1];Ya.scale(150*dd).translate([gc,bc])},Ob)}function yb(Ya,Qa,Ob){return zc(Ya,function(bc){var gc=+Qa,dd=gc/(bc[1][1]-bc[0][1]),md=-dd*bc[0][0];bc=(gc-dd*(bc[1][1]+bc[0][1]))/2;Ya.scale(150*
dd).translate([md,bc])},Ob)}function ac(Ya){return sc({point:function(Qa,Ob){Qa=Ya(Qa,Ob);this.stream.point(Qa[0],Qa[1])}})}function Vb(Ya,Qa){function Ob(bc,gc,dd,md,gd,nd,rd,Od,xd,Kd,$d,fe,ae,gf){var Te=rd-bc,le=Od-gc,pe=Te*Te+le*le;if(pe>4*Qa&&ae--){var ge=md+Kd,Ge=gd+$d,nf=nd+fe,Cf=Id(ge*ge+Ge*Ge+nf*nf),If=g(nf/=Cf),af=1E-6>$e($e(nf)-1)||1E-6>$e(dd-xd)?(dd+xd)/2:Rc(Ge,ge),Ye=Ya(af,If);If=Ye[0];Ye=Ye[1];var hg=If-bc,eg=Ye-gc,tg=le*hg-Te*eg;if(tg*tg/pe>Qa||.3<$e((Te*hg+le*eg)/pe-.5)||md*Kd+gd*$d+
nd*fe<Wh)Ob(bc,gc,dd,md,gd,nd,If,Ye,af,ge/=Cf,Ge/=Cf,nf,ae,gf),gf.point(If,Ye),Ob(If,Ye,af,ge,Ge,nf,rd,Od,xd,Kd,$d,fe,ae,gf)}}return function(bc){function gc(If,af){If=Ya(If,af);bc.point(If[0],If[1])}function dd(){le=NaN;Cf.point=md;bc.lineStart()}function md(If,af){var Ye=z([If,af]);af=Ya(If,af);Ob(le,pe,Te,ge,Ge,nf,le=af[0],pe=af[1],Te=If,ge=Ye[0],Ge=Ye[1],nf=Ye[2],16,bc);bc.point(le,pe)}function gd(){Cf.point=gc;bc.lineEnd()}function nd(){dd();Cf.point=rd;Cf.lineEnd=Od}function rd(If,af){md(xd=
If,af);Kd=le;$d=pe;fe=ge;ae=Ge;gf=nf;Cf.point=md}function Od(){Ob(le,pe,Te,ge,Ge,nf,Kd,$d,xd,fe,ae,gf,16,bc);Cf.lineEnd=gd;gd()}var xd,Kd,$d,fe,ae,gf,Te,le,pe,ge,Ge,nf,Cf={point:gc,lineStart:dd,lineEnd:gd,polygonStart:function(){bc.polygonStart();Cf.lineStart=nd},polygonEnd:function(){bc.polygonEnd();Cf.lineStart=dd}};return Cf}}function mc(Ya){return sc({point:function(Qa,Ob){Qa=Ya(Qa,Ob);return this.stream.point(Qa[0],Qa[1])}})}function tc(Ya,Qa,Ob,bc,gc){function dd(md,gd){md*=bc;gd*=gc;return[Qa+
Ya*md,Ob-Ya*gd]}dd.invert=function(md,gd){return[(md-Qa)/Ya*bc,(Ob-gd)/Ya*gc]};return dd}function Uc(Ya,Qa,Ob,bc,gc,dd){function md(fe,ae){fe*=bc;ae*=gc;return[nd*fe-rd*ae+Qa,Ob-rd*fe-nd*ae]}var gd=Gd(dd);dd=qd(dd);var nd=gd*Ya,rd=dd*Ya,Od=gd/Ya,xd=dd/Ya,Kd=(dd*Ob-gd*Qa)/Ya,$d=(dd*Qa+gd*Ob)/Ya;md.invert=function(fe,ae){return[bc*(Od*fe-xd*ae+Kd),gc*($d-xd*fe-Od*ae)]};return md}function kd(Ya){return Bd(function(){return Ya})()}function Bd(Ya){function Qa(Ie){return eg(Ie[0]*He,Ie[1]*He)}function Ob(Ie){return(Ie=
eg.invert(Ie[0],Ie[1]))&&[Ie[0]*Qe,Ie[1]*Qe]}function bc(){var Ie=Uc(md,0,0,gf,Te,ae).apply(null,dd(rd,Od));Ie=(ae?Uc:tc)(md,gd-Ie[0],nd-Ie[1],gf,Te,ae);fe=ra(xd,Kd,$d);hg=oa(dd,Ie);eg=oa(fe,hg);Ie=hg;Ye=+af?Vb(Ie,af):ac(Ie);return gc()}function gc(){tg=Sf=null;return Qa}var dd,md=150,gd=480,nd=250,rd=0,Od=0,xd=0,Kd=0,$d=0,fe,ae=0,gf=1,Te=1,le=null,pe=rh,ge=null,Ge,nf,Cf,If=Rb,af=.5,Ye,hg,eg,tg,Sf;Qa.stream=function(Ie){return tg&&Sf===Ie?tg:tg=Hh(mc(fe)(pe(Ye(If(Sf=Ie)))))};Qa.preclip=function(Ie){return arguments.length?
(pe=Ie,le=void 0,gc()):pe};Qa.postclip=function(Ie){return arguments.length?(If=Ie,ge=Ge=nf=Cf=null,gc()):If};Qa.clipAngle=function(Ie){return arguments.length?(pe=+Ie?wb(le=Ie*He):(le=null,rh),gc()):le*Qe};Qa.clipExtent=function(Ie){return arguments.length?(If=null==Ie?(ge=Ge=nf=Cf=null,Rb):Ab(ge=+Ie[0][0],Ge=+Ie[0][1],nf=+Ie[1][0],Cf=+Ie[1][1]),gc()):null==ge?null:[[ge,Ge],[nf,Cf]]};Qa.scale=function(Ie){return arguments.length?(md=+Ie,bc()):md};Qa.translate=function(Ie){return arguments.length?
(gd=+Ie[0],nd=+Ie[1],bc()):[gd,nd]};Qa.center=function(Ie){return arguments.length?(rd=Ie[0]%360*He,Od=Ie[1]%360*He,bc()):[rd*Qe,Od*Qe]};Qa.rotate=function(Ie){return arguments.length?(xd=Ie[0]%360*He,Kd=Ie[1]%360*He,$d=2<Ie.length?Ie[2]%360*He:0,bc()):[xd*Qe,Kd*Qe,$d*Qe]};Qa.angle=function(Ie){return arguments.length?(ae=Ie%360*He,bc()):ae*Qe};Qa.reflectX=function(Ie){return arguments.length?(gf=Ie?-1:1,bc()):0>gf};Qa.reflectY=function(Ie){return arguments.length?(Te=Ie?-1:1,bc()):0>Te};Qa.precision=
function(Ie){if(arguments.length){var Of=hg;var Eg=af=Ie*Ie;Of=(Ye=+Eg?Vb(Of,Eg):ac(Of),gc())}else Of=Id(af);return Of};Qa.fitExtent=function(Ie,Of){return Wb(Qa,Ie,Of)};Qa.fitSize=function(Ie,Of){return Wb(Qa,[[0,0],Ie],Of)};Qa.fitWidth=function(Ie,Of){return Ub(Qa,Ie,Of)};Qa.fitHeight=function(Ie,Of){return yb(Qa,Ie,Of)};return function(){dd=Ya.apply(this,arguments);Qa.invert=dd.invert&&Ob;return bc()}}function Fd(Ya){var Qa=0,Ob=Sd/3,bc=Bd(Ya);Ya=bc(Qa,Ob);Ya.parallels=function(gc){return arguments.length?
bc(Qa=gc[0]*He,Ob=gc[1]*He):[Qa*Qe,Ob*Qe]};return Ya}function yd(Ya){function Qa(bc,gc){return[bc*Ob,qd(gc)/Ob]}var Ob=Gd(Ya);Qa.invert=function(bc,gc){return[bc/Ob,g(gc*Ob)]};return Qa}function Lc(Ya,Qa){function Ob(gd,nd){nd=Id(dd-2*gc*qd(nd))/gc;return[nd*qd(gd*=gc),md-nd*Gd(gd)]}var bc=qd(Ya),gc=(bc+qd(Qa))/2;if(1E-6>$e(gc))return yd(Ya);var dd=1+bc*(2*gc-bc),md=Id(dd)/gc;Ob.invert=function(gd,nd){nd=md-nd;var rd=Rc(gd,$e(nd))*qe(nd);0>nd*gc&&(rd-=Sd*qe(gd)*qe(nd));return[rd/gc,g((dd-(gd*gd+nd*
nd)*gc*gc)/(2*gc))]};return Ob}function cd(){return Fd(Lc).scale(155.424).center([0,33.6442])}function Nc(){return cd().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Xc(Ya){var Qa=Ya.length;return{point:function(Ob,bc){for(var gc=-1;++gc<Qa;)Ya[gc].point(Ob,bc)},sphere:function(){for(var Ob=-1;++Ob<Qa;)Ya[Ob].sphere()},lineStart:function(){for(var Ob=-1;++Ob<Qa;)Ya[Ob].lineStart()},lineEnd:function(){for(var Ob=-1;++Ob<Qa;)Ya[Ob].lineEnd()},polygonStart:function(){for(var Ob=
-1;++Ob<Qa;)Ya[Ob].polygonStart()},polygonEnd:function(){for(var Ob=-1;++Ob<Qa;)Ya[Ob].polygonEnd()}}}function Zc(Ya){return function(Qa,Ob){var bc=Gd(Qa),gc=Gd(Ob);bc=Ya(bc*gc);return[bc*gc*qd(Qa),bc*qd(Ob)]}}function Sc(Ya){return function(Qa,Ob){var bc=Id(Qa*Qa+Ob*Ob),gc=Ya(bc),dd=qd(gc);gc=Gd(gc);return[Rc(Qa*dd,bc*gc),g(bc&&Ob*dd/bc)]}}function id(Ya,Qa){return[Ya,Mc(ue((De+Qa)/2))]}function Nd(Ya){function Qa(){var xd=Sd*gc(),Kd=Ob(qa(Ob.rotate()).invert([0,0]));return md(null==gd?[[Kd[0]-xd,
Kd[1]-xd],[Kd[0]+xd,Kd[1]+xd]]:Ya===id?[[Math.max(Kd[0]-xd,gd),nd],[Math.min(Kd[0]+xd,rd),Od]]:[[gd,Math.max(Kd[1]-xd,nd)],[rd,Math.min(Kd[1]+xd,Od)]])}var Ob=kd(Ya),bc=Ob.center,gc=Ob.scale,dd=Ob.translate,md=Ob.clipExtent,gd=null,nd,rd,Od;Ob.scale=function(xd){return arguments.length?(gc(xd),Qa()):gc()};Ob.translate=function(xd){return arguments.length?(dd(xd),Qa()):dd()};Ob.center=function(xd){return arguments.length?(bc(xd),Qa()):bc()};Ob.clipExtent=function(xd){return arguments.length?(null==
xd?gd=nd=rd=Od=null:(gd=+xd[0][0],nd=+xd[0][1],rd=+xd[1][0],Od=+xd[1][1]),Qa()):null==gd?null:[[gd,nd],[rd,Od]]};return Qa()}function Rd(Ya,Qa){function Ob(md,gd){0<dd?gd<-De+1E-6&&(gd=-De+1E-6):gd>De-1E-6&&(gd=De-1E-6);gd=dd/Hd(ue((De+gd)/2),gc);return[gd*qd(gc*md),dd-gd*Gd(gc*md)]}var bc=Gd(Ya),gc=Ya===Qa?qd(Ya):Mc(bc/Gd(Qa))/Mc(ue((De+Qa)/2)/ue((De+Ya)/2)),dd=bc*Hd(ue((De+Ya)/2),gc)/gc;if(!gc)return id;Ob.invert=function(md,gd){gd=dd-gd;var nd=qe(gc)*Id(md*md+gd*gd),rd=Rc(md,$e(gd))*qe(gd);0>gd*
gc&&(rd-=Sd*qe(md)*qe(gd));return[rd/gc,2*df(Hd(dd/nd,1/gc))-De]};return Ob}function Wd(Ya,Qa){return[Ya,Qa]}function Se(Ya,Qa){function Ob(md,gd){gd=dd-gd;md*=gc;return[gd*qd(md),dd-gd*Gd(md)]}var bc=Gd(Ya),gc=Ya===Qa?qd(Ya):(bc-Gd(Qa))/(Qa-Ya),dd=bc/gc+Ya;if(1E-6>$e(gc))return Wd;Ob.invert=function(md,gd){gd=dd-gd;var nd=Rc(md,$e(gd))*qe(gd);0>gd*gc&&(nd-=Sd*qe(md)*qe(gd));return[nd/gc,dd-qe(gc)*Id(md*md+gd*gd)]};return Ob}function Ne(Ya,Qa){Qa=g(Oh*qd(Qa));var Ob=Qa*Qa,bc=Ob*Ob*Ob;return[Ya*Gd(Qa)/
(Oh*(1.340264+3*-.081106*Ob+bc*(7*8.93E-4+.034164*Ob))),Qa*(1.340264+-.081106*Ob+bc*(8.93E-4+.003796*Ob))]}function te(Ya,Qa){var Ob=Gd(Qa),bc=Gd(Ya)*Ob;return[Ob*qd(Ya)/bc,qd(Qa)/bc]}function qf(Ya,Qa){var Ob=Qa*Qa,bc=Ob*Ob;return[Ya*(.8707-.131979*Ob+bc*(-.013791+bc*(.003971*Ob-.001529*bc))),Qa*(1.007226+Ob*(.015085+bc*(-.044475+.028874*Ob-.005916*bc)))]}function sf(Ya,Qa){return[Gd(Qa)*qd(Ya),qd(Qa)]}function of(Ya,Qa){var Ob=Gd(Qa),bc=1+Gd(Ya)*Ob;return[Ob*qd(Ya)/bc,qd(Qa)/bc]}function vf(Ya,
Qa){return[Mc(ue((De+Qa)/2)),-Ya]}k.prototype={constructor:k,reset:function(){this.s=this.t=0},add:function(Ya){m(Bf,Ya,this.t);m(this,Bf.s,this.s);this.s?this.t+=Bf.t:this.s=Bf.t},valueOf:function(){return this.s}};var Bf=new k,Sd=Math.PI,De=Sd/2,hf=Sd/4,bf=2*Sd,Qe=180/Sd,He=Sd/180,$e=Math.abs,df=Math.atan,Rc=Math.atan2,Gd=Math.cos,Mb=Math.ceil,$b=Math.exp,Mc=Math.log,Hd=Math.pow,qd=Math.sin,qe=Math.sign||function(Ya){return 0<Ya?1:0>Ya?-1:0},Id=Math.sqrt,ue=Math.tan,Be={Feature:function(Ya,Qa){l(Ya.geometry,
Qa)},FeatureCollection:function(Ya,Qa){Ya=Ya.features;for(var Ob=-1,bc=Ya.length;++Ob<bc;)l(Ya[Ob].geometry,Qa)}},oe={Sphere:function(Ya,Qa){Qa.sphere()},Point:function(Ya,Qa){Ya=Ya.coordinates;Qa.point(Ya[0],Ya[1],Ya[2])},MultiPoint:function(Ya,Qa){for(var Ob=Ya.coordinates,bc=-1,gc=Ob.length;++bc<gc;)Ya=Ob[bc],Qa.point(Ya[0],Ya[1],Ya[2])},LineString:function(Ya,Qa){c(Ya.coordinates,Qa,0)},MultiLineString:function(Ya,Qa){Ya=Ya.coordinates;for(var Ob=-1,bc=Ya.length;++Ob<bc;)c(Ya[Ob],Qa,0)},Polygon:function(Ya,
Qa){d(Ya.coordinates,Qa)},MultiPolygon:function(Ya,Qa){Ya=Ya.coordinates;for(var Ob=-1,bc=Ya.length;++Ob<bc;)d(Ya[Ob],Qa)},GeometryCollection:function(Ya,Qa){Ya=Ya.geometries;for(var Ob=-1,bc=Ya.length;++Ob<bc;)l(Ya[Ob],Qa)}},zb=new k,qc=new k,Yb,Bc,bd,ed,Vc,Pc={point:r,lineStart:r,lineEnd:r,polygonStart:function(){zb.reset();Pc.lineStart=f;Pc.lineEnd=q},polygonEnd:function(){var Ya=+zb;qc.add(0>Ya?bf+Ya:Ya);this.lineStart=this.lineEnd=this.point=r},sphere:function(){qc.add(bf)}},yc,vc,oc,vd,Qd,Yd,
xe,Td,Oe=new k,Ve,wf,Me={point:y,lineStart:J,lineEnd:K,polygonStart:function(){Me.point=O;Me.lineStart=I;Me.lineEnd=L;Oe.reset();Pc.polygonStart()},polygonEnd:function(){Pc.polygonEnd();Me.point=y;Me.lineStart=J;Me.lineEnd=K;0>zb?(yc=-(oc=180),vc=-(vd=90)):1E-6<Oe?vd=90:-1E-6>Oe&&(vc=-90);wf[0]=yc;wf[1]=oc},sphere:function(){yc=-(oc=180);vc=-(vd=90)}},Af,ug,vg,Gg,ih,Nh,qh,Yg,jh,kh,fh,ei,gh,ng,Zf,og,Hg={sphere:r,point:Z,lineStart:W,lineEnd:ha,polygonStart:function(){Hg.lineStart=Y;Hg.lineEnd=ba},polygonEnd:function(){Hg.lineStart=
W;Hg.lineEnd=ha}};xa.invert=xa;var Tg=new k,rh=qb(function(){return!0},function(Ya){var Qa=NaN,Ob=NaN,bc=NaN,gc;return{lineStart:function(){Ya.lineStart();gc=1},point:function(dd,md){var gd=0<dd?Sd:-Sd,nd=$e(dd-Qa);if(1E-6>$e(nd-Sd))Ya.point(Qa,Ob=0<(Ob+md)/2?De:-De),Ya.point(bc,Ob),Ya.lineEnd(),Ya.lineStart(),Ya.point(gd,Ob),Ya.point(dd,Ob),gc=0;else if(bc!==gd&&nd>=Sd){1E-6>$e(Qa-bc)&&(Qa-=1E-6*bc);1E-6>$e(dd-gd)&&(dd-=1E-6*gd);nd=Qa;var rd=Ob,Od=dd,xd,Kd,$d=qd(nd-Od);Ob=1E-6<$e($d)?df((qd(rd)*
(Kd=Gd(md))*qd(Od)-qd(md)*(xd=Gd(rd))*qd(nd))/(xd*Kd*$d)):(rd+md)/2;Ya.point(bc,Ob);Ya.lineEnd();Ya.lineStart();Ya.point(gd,Ob);gc=0}Ya.point(Qa=dd,Ob=md);bc=gd},lineEnd:function(){Ya.lineEnd();Qa=Ob=NaN},clean:function(){return 2-gc}}},function(Ya,Qa,Ob,bc){null==Ya?(Ob*=De,bc.point(-Sd,Ob),bc.point(0,Ob),bc.point(Sd,Ob),bc.point(Sd,0),bc.point(Sd,-Ob),bc.point(0,-Ob),bc.point(-Sd,-Ob),bc.point(-Sd,0),bc.point(-Sd,Ob)):1E-6<$e(Ya[0]-Qa[0])?(Ya=Ya[0]<Qa[0]?Sd:-Sd,Ob=Ob*Ya/2,bc.point(-Ya,Ob),bc.point(0,
Ob),bc.point(Ya,Ob)):bc.point(Qa[0],Qa[1])},[-Sd,-De]),hh=new k,lh,Kf,Zg,$f={sphere:r,point:r,lineStart:function(){$f.point=La;$f.lineEnd=Ma},lineEnd:r,polygonStart:r,polygonEnd:r},Nf=[null,null],vh={type:"LineString",coordinates:Nf},mh={Feature:function(Ya,Qa){return Ta(Ya.geometry,Qa)},FeatureCollection:function(Ya,Qa){Ya=Ya.features;for(var Ob=-1,bc=Ya.length;++Ob<bc;)if(Ta(Ya[Ob].geometry,Qa))return!0;return!1}},Gh={Sphere:function(){return!0},Point:function(Ya,Qa){return 0===Ka(Ya.coordinates,
Qa)},MultiPoint:function(Ya,Qa){Ya=Ya.coordinates;for(var Ob=-1,bc=Ya.length;++Ob<bc;)if(0===Ka(Ya[Ob],Qa))return!0;return!1},LineString:function(Ya,Qa){return bb(Ya.coordinates,Qa)},MultiLineString:function(Ya,Qa){Ya=Ya.coordinates;for(var Ob=-1,bc=Ya.length;++Ob<bc;)if(bb(Ya[Ob],Qa))return!0;return!1},Polygon:function(Ya,Qa){return cb(Ya.coordinates,Qa)},MultiPolygon:function(Ya,Qa){Ya=Ya.coordinates;for(var Ob=-1,bc=Ya.length;++Ob<bc;)if(cb(Ya[Ob],Qa))return!0;return!1},GeometryCollection:function(Ya,
Qa){Ya=Ya.geometries;for(var Ob=-1,bc=Ya.length;++Ob<bc;)if(Ta(Ya[Ob],Qa))return!0;return!1}},ag=new k,wg=new k,nh,wh,Ha,Ga,Oa={point:r,lineStart:r,lineEnd:r,polygonStart:function(){Oa.lineStart=xc;Oa.lineEnd=Pa},polygonEnd:function(){Oa.lineStart=Oa.lineEnd=Oa.point=r;ag.add($e(wg));wg.reset()},result:function(){var Ya=ag/2;ag.reset();return Ya}},Sa=Infinity,eb=Sa,lb=-Sa,Cb=lb,Zb={point:function(Ya,Qa){Ya<Sa&&(Sa=Ya);Ya>lb&&(lb=Ya);Qa<eb&&(eb=Qa);Qa>Cb&&(Cb=Qa)},lineStart:r,lineEnd:r,polygonStart:r,
polygonEnd:r,result:function(){var Ya=[[Sa,eb],[lb,Cb]];lb=Cb=-(eb=Sa=Infinity);return Ya}},Lb=0,ec=0,hc=0,rc=0,Fc=0,jd=0,Dd=0,ye=0,Ae=0,Xe,Vf,Je,Tf,Mf={point:db,lineStart:Jb,lineEnd:uc,polygonStart:function(){Mf.lineStart=fd;Mf.lineEnd=kb},polygonEnd:function(){Mf.point=db;Mf.lineStart=Jb;Mf.lineEnd=uc},result:function(){var Ya=Ae?[Dd/Ae,ye/Ae]:jd?[rc/jd,Fc/jd]:hc?[Lb/hc,ec/hc]:[NaN,NaN];Lb=ec=hc=rc=Fc=jd=Dd=ye=Ae=0;return Ya}};Ec.prototype={_radius:4.5,pointRadius:function(Ya){return this._radius=
Ya,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath();this._point=NaN},point:function(Ya,Qa){switch(this._point){case 0:this._context.moveTo(Ya,Qa);this._point=1;break;case 1:this._context.lineTo(Ya,Qa);break;default:this._context.moveTo(Ya+this._radius,Qa),this._context.arc(Ya,Qa,this._radius,0,bf)}},result:r};var tf=new k,$g,Kg,Ug,Ff,Lf,oh={point:r,lineStart:function(){oh.point=
Qc},lineEnd:function(){$g&&Tc(Kg,Ug);oh.point=r},polygonStart:function(){$g=!0},polygonEnd:function(){$g=null},result:function(){var Ya=+tf;tf.reset();return Ya}};tb.prototype={_radius:4.5,_circle:Ib(4.5),pointRadius:function(Ya){(Ya=+Ya)!==this._radius&&(this._radius=Ya,this._circle=null);return this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z");this._point=NaN},point:function(Ya,
Qa){switch(this._point){case 0:this._string.push("M",Ya,",",Qa);this._point=1;break;case 1:this._string.push("L",Ya,",",Qa);break;default:null==this._circle&&(this._circle=Ib(this._radius)),this._string.push("M",Ya,",",Qa,this._circle)}},result:function(){if(this._string.length){var Ya=this._string.join("");this._string=[];return Ya}return null}};pc.prototype={constructor:pc,point:function(Ya,Qa){this.stream.point(Ya,Qa)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},
lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Wh=Gd(30*He),Hh=sc({point:function(Ya,Qa){this.stream.point(Ya*He,Qa*He)}}),vi=Zc(function(Ya){return Id(2/(1+Ya))});vi.invert=Sc(function(Ya){return 2*g(Ya/2)});var wi=Zc(function(Ya){return(Ya=a(Ya))&&Ya/qd(Ya)});wi.invert=Sc(function(Ya){return Ya});id.invert=function(Ya,Qa){return[Ya,2*df($b(Qa))-De]};Wd.invert=Wd;var Oh=Id(3)/2;Ne.invert=function(Ya,
Qa){for(var Ob=Qa,bc=Ob*Ob,gc=bc*bc*bc,dd=0,md;12>dd&&!(md=Ob*(1.340264+-.081106*bc+gc*(8.93E-4+.003796*bc))-Qa,bc=1.340264+3*-.081106*bc+gc*(7*8.93E-4+.034164*bc),Ob-=md/=bc,bc=Ob*Ob,gc=bc*bc*bc,1E-12>$e(md));++dd);return[Oh*Ya*(1.340264+3*-.081106*bc+gc*(7*8.93E-4+.034164*bc))/Gd(Ob),g(qd(Ob)/Oh)]};te.invert=Sc(df);qf.invert=function(Ya,Qa){var Ob=Qa,bc=25;do{var gc=Ob*Ob;var dd=gc*gc;Ob-=dd=(Ob*(1.007226+gc*(.015085+dd*(-.044475+.028874*gc-.005916*dd)))-Qa)/(1.007226+gc*(.045255+dd*(-.311325+.259866*
gc-.005916*11*dd)))}while(1E-6<$e(dd)&&0<--bc);return[Ya/(.8707+(gc=Ob*Ob)*(-.131979+gc*(-.013791+gc*gc*gc*(.003971-.001529*gc)))),Ob]};sf.invert=Sc(g);of.invert=Sc(function(Ya){return 2*df(Ya)});vf.invert=function(Ya,Qa){return[-Qa,2*df($b(Ya))-De]};p.geoAlbers=Nc;p.geoAlbersUsa=function(){function Ya(Kd){var $d=Kd[0];Kd=Kd[1];return Od=null,(dd.point($d,Kd),Od)||(gd.point($d,Kd),Od)||(rd.point($d,Kd),Od)}function Qa(){Ob=bc=null;return Ya}var Ob,bc,gc=Nc(),dd,md=cd().rotate([154,0]).center([-2,
58.5]).parallels([55,65]),gd,nd=cd().rotate([157,0]).center([-3,19.9]).parallels([8,18]),rd,Od,xd={point:function(Kd,$d){Od=[Kd,$d]}};Ya.invert=function(Kd){var $d=gc.scale(),fe=gc.translate(),ae=(Kd[0]-fe[0])/$d;$d=(Kd[1]-fe[1])/$d;return(.12<=$d&&.234>$d&&-.425<=ae&&-.214>ae?md:.166<=$d&&.234>$d&&-.214<=ae&&-.115>ae?nd:gc).invert(Kd)};Ya.stream=function(Kd){return Ob&&bc===Kd?Ob:Ob=Xc([gc.stream(bc=Kd),md.stream(Kd),nd.stream(Kd)])};Ya.precision=function(Kd){if(!arguments.length)return gc.precision();
gc.precision(Kd);md.precision(Kd);nd.precision(Kd);return Qa()};Ya.scale=function(Kd){if(!arguments.length)return gc.scale();gc.scale(Kd);md.scale(.35*Kd);nd.scale(Kd);return Ya.translate(gc.translate())};Ya.translate=function(Kd){if(!arguments.length)return gc.translate();var $d=gc.scale(),fe=+Kd[0],ae=+Kd[1];dd=gc.translate(Kd).clipExtent([[fe-.455*$d,ae-.238*$d],[fe+.455*$d,ae+.238*$d]]).stream(xd);gd=md.translate([fe-.307*$d,ae+.201*$d]).clipExtent([[fe-.425*$d+1E-6,ae+.12*$d+1E-6],[fe-.214*$d-
1E-6,ae+.234*$d-1E-6]]).stream(xd);rd=nd.translate([fe-.205*$d,ae+.212*$d]).clipExtent([[fe-.214*$d+1E-6,ae+.166*$d+1E-6],[fe-.115*$d-1E-6,ae+.234*$d-1E-6]]).stream(xd);return Qa()};Ya.fitExtent=function(Kd,$d){return Wb(Ya,Kd,$d)};Ya.fitSize=function(Kd,$d){return Wb(Ya,[[0,0],Kd],$d)};Ya.fitWidth=function(Kd,$d){return Ub(Ya,Kd,$d)};Ya.fitHeight=function(Kd,$d){return yb(Ya,Kd,$d)};return Ya.scale(1070)};p.geoArea=function(Ya){qc.reset();e(Ya,Pc);return 2*qc};p.geoAzimuthalEqualArea=function(){return kd(vi).scale(124.75).clipAngle(179.999)};
p.geoAzimuthalEqualAreaRaw=vi;p.geoAzimuthalEquidistant=function(){return kd(wi).scale(79.4188).clipAngle(179.999)};p.geoAzimuthalEquidistantRaw=wi;p.geoBounds=function(Ya){var Qa,Ob,bc;vd=oc=-(yc=vc=Infinity);Ve=[];e(Ya,Me);if(Qa=Ve.length){Ve.sort(M);Ya=1;var gc=Ve[0];for(Ob=[gc];Ya<Qa;++Ya){var dd=Ve[Ya];Q(gc,dd[0])||Q(gc,dd[1])?(H(gc[0],dd[1])>H(gc[0],gc[1])&&(gc[1]=dd[1]),H(dd[0],gc[1])>H(gc[0],gc[1])&&(gc[0]=dd[0])):Ob.push(gc=dd)}var md=-Infinity;Qa=Ob.length-1;Ya=0;for(gc=Ob[Qa];Ya<=Qa;gc=
dd,++Ya)dd=Ob[Ya],(bc=H(gc[1],dd[0]))>md&&(md=bc,yc=dd[0],oc=gc[1])}Ve=wf=null;return Infinity===yc||Infinity===vc?[[NaN,NaN],[NaN,NaN]]:[[yc,vc],[oc,vd]]};p.geoCentroid=function(Ya){Af=ug=vg=Gg=ih=Nh=qh=Yg=jh=kh=fh=0;e(Ya,Hg);Ya=jh;var Qa=kh,Ob=fh,bc=Ya*Ya+Qa*Qa+Ob*Ob;return 1E-12>bc&&(Ya=Nh,Qa=qh,Ob=Yg,1E-6>ug&&(Ya=vg,Qa=Gg,Ob=ih),bc=Ya*Ya+Qa*Qa+Ob*Ob,1E-12>bc)?[NaN,NaN]:[Rc(Qa,Ya)*Qe,g(Ob/Id(bc))*Qe]};p.geoCircle=function(){function Ya(){var gd=Qa.apply(this,arguments),nd=Ob.apply(this,arguments)*
He,rd=bc.apply(this,arguments)*He;gc=[];dd=ra(-gd[0]*He,-gd[1]*He,0).invert;ta(md,nd,rd,1);gd={type:"Polygon",coordinates:[gc]};gc=dd=null;return gd}var Qa=ia([0,0]),Ob=ia(90),bc=ia(6),gc,dd,md={point:function(gd,nd){gc.push(gd=dd(gd,nd));gd[0]*=Qe;gd[1]*=Qe}};Ya.center=function(gd){return arguments.length?(Qa="function"===typeof gd?gd:ia([+gd[0],+gd[1]]),Ya):Qa};Ya.radius=function(gd){return arguments.length?(Ob="function"===typeof gd?gd:ia(+gd),Ya):Ob};Ya.precision=function(gd){return arguments.length?
(bc="function"===typeof gd?gd:ia(+gd),Ya):bc};return Ya};p.geoClipAntimeridian=rh;p.geoClipCircle=wb;p.geoClipExtent=function(){var Ya=0,Qa=0,Ob=960,bc=500,gc,dd,md;return md={stream:function(gd){return gc&&dd===gd?gc:gc=Ab(Ya,Qa,Ob,bc)(dd=gd)},extent:function(gd){return arguments.length?(Ya=+gd[0][0],Qa=+gd[0][1],Ob=+gd[1][0],bc=+gd[1][1],gc=dd=null,md):[[Ya,Qa],[Ob,bc]]}}};p.geoClipRectangle=Ab;p.geoConicConformal=function(){return Fd(Rd).scale(109.5).parallels([30,30])};p.geoConicConformalRaw=
Rd;p.geoConicEqualArea=cd;p.geoConicEqualAreaRaw=Lc;p.geoConicEquidistant=function(){return Fd(Se).scale(131.154).center([0,13.9389])};p.geoConicEquidistantRaw=Se;p.geoContains=function(Ya,Qa){return(Ya&&mh.hasOwnProperty(Ya.type)?mh[Ya.type]:Ta)(Ya,Qa)};p.geoDistance=Ka;p.geoEqualEarth=function(){return kd(Ne).scale(177.158)};p.geoEqualEarthRaw=Ne;p.geoEquirectangular=function(){return kd(Wd).scale(152.63)};p.geoEquirectangularRaw=Wd;p.geoGnomonic=function(){return kd(te).scale(144.049).clipAngle(60)};
p.geoGnomonicRaw=te;p.geoGraticule=Db;p.geoGraticule10=function(){return Db()()};p.geoIdentity=function(){function Ya(){fe=Ob*dd;ae=Ob*md;le=pe=null;return Qa}function Qa(ge){var Ge=ge[0]*fe;ge=ge[1]*ae;if(gd){var nf=ge*nd-Ge*rd;Ge=Ge*nd+ge*rd;ge=nf}return[Ge+bc,ge+gc]}var Ob=1,bc=0,gc=0,dd=1,md=1,gd=0,nd,rd,Od=null,xd,Kd,$d,fe=1,ae=1,gf=sc({point:function(ge,Ge){ge=Qa([ge,Ge]);this.stream.point(ge[0],ge[1])}}),Te=Rb,le,pe;Qa.invert=function(ge){var Ge=ge[0]-bc;ge=ge[1]-gc;if(gd){var nf=ge*nd+Ge*
rd;Ge=Ge*nd-ge*rd;ge=nf}return[Ge/fe,ge/ae]};Qa.stream=function(ge){return le&&pe===ge?le:le=gf(Te(pe=ge))};Qa.postclip=function(ge){return arguments.length?(Te=ge,Od=xd=Kd=$d=null,Ya()):Te};Qa.clipExtent=function(ge){return arguments.length?(Te=null==ge?(Od=xd=Kd=$d=null,Rb):Ab(Od=+ge[0][0],xd=+ge[0][1],Kd=+ge[1][0],$d=+ge[1][1]),Ya()):null==Od?null:[[Od,xd],[Kd,$d]]};Qa.scale=function(ge){return arguments.length?(Ob=+ge,Ya()):Ob};Qa.translate=function(ge){return arguments.length?(bc=+ge[0],gc=+ge[1],
Ya()):[bc,gc]};Qa.angle=function(ge){return arguments.length?(gd=ge%360*He,rd=qd(gd),nd=Gd(gd),Ya()):gd*Qe};Qa.reflectX=function(ge){return arguments.length?(dd=ge?-1:1,Ya()):0>dd};Qa.reflectY=function(ge){return arguments.length?(md=ge?-1:1,Ya()):0>md};Qa.fitExtent=function(ge,Ge){return Wb(Qa,ge,Ge)};Qa.fitSize=function(ge,Ge){return Wb(Qa,[[0,0],ge],Ge)};Qa.fitWidth=function(ge,Ge){return Ub(Qa,ge,Ge)};Qa.fitHeight=function(ge,Ge){return yb(Qa,ge,Ge)};return Qa};p.geoInterpolate=function(Ya,Qa){var Ob=
Ya[0]*He,bc=Ya[1]*He;Ya=Qa[0]*He;Qa=Qa[1]*He;var gc=Gd(bc),dd=qd(bc),md=Gd(Qa),gd=qd(Qa),nd=gc*Gd(Ob),rd=gc*qd(Ob),Od=md*Gd(Ya),xd=md*qd(Ya),Kd=2*g(Id(h(Qa-bc)+gc*md*h(Ya-Ob))),$d=qd(Kd);Ya=Kd?function(fe){var ae=qd(fe*=Kd)/$d,gf=qd(Kd-fe)/$d;fe=gf*nd+ae*Od;var Te=gf*rd+ae*xd;ae=gf*dd+ae*gd;return[Rc(Te,fe)*Qe,Rc(ae,Id(fe*fe+Te*Te))*Qe]}:function(){return[Ob*Qe,bc*Qe]};Ya.distance=Kd;return Ya};p.geoLength=Aa;p.geoMercator=function(){return Nd(id).scale(961/bf)};p.geoMercatorRaw=id;p.geoNaturalEarth1=
function(){return kd(qf).scale(175.295)};p.geoNaturalEarth1Raw=qf;p.geoOrthographic=function(){return kd(sf).scale(249.5).clipAngle(90.000001)};p.geoOrthographicRaw=sf;p.geoPath=function(Ya,Qa){function Ob(md){md&&("function"===typeof bc&&dd.pointRadius(+bc.apply(this,arguments)),e(md,gc(dd)));return dd.result()}var bc=4.5,gc,dd;Ob.area=function(md){e(md,gc(Oa));return Oa.result()};Ob.measure=function(md){e(md,gc(oh));return oh.result()};Ob.bounds=function(md){e(md,gc(Zb));return Zb.result()};Ob.centroid=
function(md){e(md,gc(Mf));return Mf.result()};Ob.projection=function(md){return arguments.length?(gc=null==md?(Ya=null,Rb):(Ya=md).stream,Ob):Ya};Ob.context=function(md){if(!arguments.length)return Qa;dd=null==md?(Qa=null,new tb):new Ec(Qa=md);"function"!==typeof bc&&dd.pointRadius(bc);return Ob};Ob.pointRadius=function(md){if(!arguments.length)return bc;bc="function"===typeof md?md:(dd.pointRadius(+md),+md);return Ob};return Ob.projection(Ya).context(Qa)};p.geoProjection=kd;p.geoProjectionMutator=
Bd;p.geoRotation=qa;p.geoStereographic=function(){return kd(of).scale(250).clipAngle(142)};p.geoStereographicRaw=of;p.geoStream=e;p.geoTransform=function(Ya){return{stream:sc(Ya)}};p.geoTransverseMercator=function(){var Ya=Nd(vf),Qa=Ya.center,Ob=Ya.rotate;Ya.center=function(bc){return arguments.length?Qa([-bc[1],bc[0]]):(bc=Qa(),[bc[1],-bc[0]])};Ya.rotate=function(bc){return arguments.length?Ob([bc[0],bc[1],2<bc.length?bc[2]+90:90]):(bc=Ob(),[bc[0],bc[1],bc[2]-90])};return Ob([0,0,90]).scale(159.155)};
p.geoTransverseMercatorRaw=vf;Object.defineProperty(p,"__esModule",{value:!0})})},{"d3-array":162}],170:[function(b,N,G){(function(p,n){"object"===typeof G&&"undefined"!==typeof N?n(G):(p=p||self,n(p.d3=p.d3||{}))})(this,function(p){function n(ra,la){return ra.parent===la.parent?1:2}function k(ra,la){return ra+la.x}function m(ra,la){return Math.max(ra,la.y)}function a(ra){for(var la;la=ra.children;)ra=la[0];return ra}function g(ra){for(var la;la=ra.children;)ra=la[la.length-1];return ra}function h(ra){var la=
0,ka=ra.children,na=ka&&ka.length;if(na)for(;0<=--na;)la+=ka[na].value;else la=1;ra.value=la}function r(ra,la){var ka=new e(ra);ra=+ra.value&&(ka.value=ra.value);var na,qa=[ka],ta,za,Ia,Xa;for(null==la&&(la=l);na=qa.pop();)if(ra&&(na.value=+na.data.value),(za=la(na.data))&&(Xa=za.length))for(na.children=Array(Xa),Ia=Xa-1;0<=Ia;--Ia)qa.push(ta=na.children[Ia]=new e(za[Ia])),ta.parent=na,ta.depth=na.depth+1;return ka.eachBefore(d)}function l(ra){return ra.children}function c(ra){ra.data=ra.data.data}
function d(ra){var la=0;do ra.height=la;while((ra=ra.parent)&&ra.height<++la)}function e(ra){this.data=ra;this.depth=this.height=0;this.parent=null}function f(ra){var la=0;ra=ja.call(ra);for(var ka=ra.length,na,qa;ka;)qa=Math.random()*ka--|0,na=ra[ka],ra[ka]=ra[qa],ra[qa]=na;ka=ra.length;na=[];for(var ta;la<ka;)if(qa=ra[la],ta&&t(ta,qa))++la;else{a:if(la=na,w(qa,la))la=[qa];else{for(na=0;na<la.length;++na)if(q(qa,la[na])&&w(x(la[na],qa),la)){la=[la[na],qa];break a}for(na=0;na<la.length-1;++na)for(ta=
na+1;ta<la.length;++ta)if(q(x(la[na],la[ta]),qa)&&q(x(la[na],qa),la[ta])&&q(x(la[ta],qa),la[na])&&w(z(la[na],la[ta],qa),la)){la=[la[na],la[ta],qa];break a}throw Error();}a:{la=na=la;switch(la.length){case 1:la=la[0];la={x:la.x,y:la.y,r:la.r};break a;case 2:la=x(la[0],la[1]);break a;case 3:la=z(la[0],la[1],la[2]);break a}la=void 0}ta=la;la=0}return ta}function q(ra,la){var ka=ra.r-la.r,na=la.x-ra.x;ra=la.y-ra.y;return 0>ka||ka*ka<na*na+ra*ra}function t(ra,la){var ka=ra.r-la.r+1E-6,na=la.x-ra.x;ra=
la.y-ra.y;return 0<ka&&ka*ka>na*na+ra*ra}function w(ra,la){for(var ka=0;ka<la.length;++ka)if(!t(ra,la[ka]))return!1;return!0}function x(ra,la){var ka=ra.x,na=ra.y;ra=ra.r;var qa=la.x,ta=la.y;la=la.r;var za=qa-ka,Ia=ta-na,Xa=la-ra,$a=Math.sqrt(za*za+Ia*Ia);return{x:(ka+qa+za/$a*Xa)/2,y:(na+ta+Ia/$a*Xa)/2,r:($a+ra+la)/2}}function z(ra,la,ka){var na=ra.x,qa=ra.y;ra=ra.r;var ta=la.x,za=la.y,Ia=la.r,Xa=ka.x,$a=ka.y,gb=ka.r;ka=na-ta;la=na-Xa;var sb=qa-za,jb=qa-$a,vb=Ia-ra,qb=gb-ra,Bb=na*na+qa*qa-ra*ra;
za=Bb-ta*ta-za*za+Ia*Ia;$a=Bb-Xa*Xa-$a*$a+gb*gb;Xa=la*sb-ka*jb;ta=(sb*$a-jb*za)/(2*Xa)-na;sb=(jb*vb-sb*qb)/Xa;jb=(la*za-ka*$a)/(2*Xa)-qa;ka=(ka*qb-la*vb)/Xa;la=sb*sb+ka*ka-1;vb=2*(ra+ta*sb+jb*ka);ra=ta*ta+jb*jb-ra*ra;ra=-(la?(vb+Math.sqrt(vb*vb-4*la*ra))/(2*la):ra/vb);return{x:na+ta+sb*ra,y:qa+jb+ka*ra,r:ra}}function B(ra,la,ka){var na=ra.x-la.x,qa=ra.y-la.y,ta=na*na+qa*qa;if(ta){var za=la.r+ka.r;za*=za;var Ia=ra.r+ka.r;Ia*=Ia;if(za>Ia){var Xa=(ta+Ia-za)/(2*ta);za=Math.sqrt(Math.max(0,Ia/ta-Xa*Xa));
ka.x=ra.x-Xa*na-za*qa;ka.y=ra.y-Xa*qa+za*na}else Xa=(ta+za-Ia)/(2*ta),za=Math.sqrt(Math.max(0,za/ta-Xa*Xa)),ka.x=la.x+Xa*na-za*qa,ka.y=la.y+Xa*qa+za*na}else ka.x=la.x+ka.r,ka.y=la.y}function A(ra,la){var ka=ra.r+la.r-1E-6,na=la.x-ra.x;ra=la.y-ra.y;return 0<ka&&ka*ka>na*na+ra*ra}function D(ra){var la=ra._,ka=ra.next._,na=la.r+ka.r;ra=(la.x*ka.r+ka.x*la.r)/na;la=(la.y*ka.r+ka.y*la.r)/na;return ra*ra+la*la}function C(ra){this._=ra;this.previous=this.next=null}function v(ra){if(!(ka=ra.length))return 0;
var la,ka;var na=ra[0];na.x=0;na.y=0;if(!(1<ka))return na.r;var qa=ra[1];na.x=-qa.r;qa.x=na.r;qa.y=0;if(!(2<ka))return na.r+qa.r;B(qa,na,la=ra[2]);na=new C(na);qa=new C(qa);la=new C(la);na.next=la.previous=qa;qa.next=na.previous=la;la.next=qa.previous=na;var ta=3;a:for(;ta<ka;++ta){B(na._,qa._,la=ra[ta]);la=new C(la);var za=qa.next;var Ia=na.previous;var Xa=qa._.r;var $a=na._.r;do if(Xa<=$a){if(A(za._,la._)){qa=za;na.next=qa;qa.previous=na;--ta;continue a}Xa+=za._.r;za=za.next}else{if(A(Ia._,la._)){na=
Ia;na.next=qa;qa.previous=na;--ta;continue a}$a+=Ia._.r;Ia=Ia.previous}while(za!==Ia.next);la.previous=na;la.next=qa;na.next=qa.previous=qa=la;for(za=D(na);(la=la.next)!==qa;)(Ia=D(la))<za&&(na=la,za=Ia);qa=na.next}na=[qa._];for(la=qa;(la=la.next)!==qa;)na.push(la._);la=f(na);for(ta=0;ta<ka;++ta)na=ra[ta],na.x-=la.x,na.y-=la.y;return la.r}function y(ra){if("function"!==typeof ra)throw Error();return ra}function F(){return 0}function J(ra){return function(){return ra}}function K(ra){return Math.sqrt(ra.value)}
function O(ra){return function(la){la.children||(la.r=Math.max(0,+ra(la)||0))}}function I(ra,la){return function(ka){if(na=ka.children){var na,qa,ta=na.length,za=ra(ka)*la||0;if(za)for(qa=0;qa<ta;++qa)na[qa].r+=za;var Ia=v(na);if(za)for(qa=0;qa<ta;++qa)na[qa].r-=za;ka.r=Ia+za}}}function L(ra){return function(la){var ka=la.parent;la.r*=ra;ka&&(la.x=ka.x+ra*la.x,la.y=ka.y+ra*la.y)}}function H(ra){ra.x0=Math.round(ra.x0);ra.y0=Math.round(ra.y0);ra.x1=Math.round(ra.x1);ra.y1=Math.round(ra.y1)}function M(ra,
la,ka,na,qa){var ta=ra.children,za=-1,Ia=ta.length;for(na=ra.value&&(na-la)/ra.value;++za<Ia;)ra=ta[za],ra.y0=ka,ra.y1=qa,ra.x0=la,ra.x1=la+=ra.value*na}function Q(ra){return ra.id}function Z(ra){return ra.parentId}function ca(ra,la){return ra.parent===la.parent?1:2}function W(ra){var la=ra.children;return la?la[0]:ra.t}function T(ra){var la=ra.children;return la?la[la.length-1]:ra.t}function U(ra,la){this._=ra;this.A=this.children=this.parent=null;this.a=this;this.s=this.c=this.m=this.z=0;this.t=
null;this.i=la}function ha(ra){ra=new U(ra,0);for(var la,ka=[ra],na,qa,ta;la=ka.pop();)if(qa=la._.children)for(la.children=Array(na=qa.length),ta=na-1;0<=ta;--ta)ka.push(na=la.children[ta]=new U(qa[ta],ta)),na.parent=la;(ra.parent=new U(null,0)).children=[ra];return ra}function Y(ra,la,ka,na,qa){var ta=ra.children,za=-1,Ia=ta.length;for(qa=ra.value&&(qa-ka)/ra.value;++za<Ia;)ra=ta[za],ra.x0=la,ra.x1=na,ra.y0=ka,ra.y1=ka+=ra.value*qa}function ba(ra,la,ka,na,qa,ta){for(var za=[],Ia=la.children,Xa,$a,
gb=Xa=0,sb=Ia.length,jb,vb=la.value,qb,Bb,ub,wb,rb,Ab;Xa<sb;){la=qa-ka;jb=ta-na;do qb=Ia[gb++].value;while(!qb&&gb<sb);Bb=ub=qb;Ab=Math.max(jb/la,la/jb)/(vb*ra);wb=qb*qb*Ab;for(rb=Math.max(ub/wb,wb/Bb);gb<sb;++gb){qb+=$a=Ia[gb].value;$a<Bb&&(Bb=$a);$a>ub&&(ub=$a);wb=qb*qb*Ab;wb=Math.max(ub/wb,wb/Bb);if(wb>rb){qb-=$a;break}rb=wb}za.push(Xa={value:qb,dice:la<jb,children:Ia.slice(Xa,gb)});Xa.dice?M(Xa,ka,na,qa,vb?na+=jb*qb/vb:ta):Y(Xa,ka,na,vb?ka+=la*qb/vb:qa,ta);vb-=qb;Xa=gb}return za}e.prototype=r.prototype=
{constructor:e,count:function(){return this.eachAfter(h)},each:function(ra){var la,ka=[this],na;do{var qa=ka.reverse();for(ka=[];la=qa.pop();)if(ra(la),la=la.children){var ta=0;for(na=la.length;ta<na;++ta)ka.push(la[ta])}}while(ka.length);return this},eachAfter:function(ra){for(var la,ka=[this],na=[],qa,ta;la=ka.pop();)if(na.push(la),la=la.children)for(qa=0,ta=la.length;qa<ta;++qa)ka.push(la[qa]);for(;la=na.pop();)ra(la);return this},eachBefore:function(ra){for(var la,ka=[this],na;la=ka.pop();)if(ra(la),
la=la.children)for(na=la.length-1;0<=na;--na)ka.push(la[na]);return this},sum:function(ra){return this.eachAfter(function(la){for(var ka=+ra(la.data)||0,na=la.children,qa=na&&na.length;0<=--qa;)ka+=na[qa].value;la.value=ka})},sort:function(ra){return this.eachBefore(function(la){la.children&&la.children.sort(ra)})},path:function(ra){var la=this;var ka=la;var na=ra;if(ka!==na){var qa=ka.ancestors(),ta=na.ancestors(),za=null;ka=qa.pop();for(na=ta.pop();ka===na;)za=ka,ka=qa.pop(),na=ta.pop();ka=za}for(na=
[la];la!==ka;)la=la.parent,na.push(la);for(la=na.length;ra!==ka;)na.splice(la,0,ra),ra=ra.parent;return na},ancestors:function(){for(var ra=this,la=[ra];ra=ra.parent;)la.push(ra);return la},descendants:function(){var ra=[];this.each(function(la){ra.push(la)});return ra},leaves:function(){var ra=[];this.eachBefore(function(la){la.children||ra.push(la)});return ra},links:function(){var ra=this,la=[];ra.each(function(ka){ka!==ra&&la.push({source:ka.parent,target:ka})});return la},copy:function(){return r(this).eachBefore(c)}};
var ja=Array.prototype.slice,ma={depth:-1},ia={};U.prototype=Object.create(e.prototype);var oa=(1+Math.sqrt(5))/2,xa=function ka(la){function na(qa,ta,za,Ia,Xa){ba(la,qa,ta,za,Ia,Xa)}na.ratio=function(qa){return ka(1<(qa=+qa)?qa:1)};return na}(oa);oa=function na(ka){function qa(ta,za,Ia,Xa,$a){if((gb=ta._squarify)&&gb.ratio===ka)for(var gb,sb,jb,vb=-1,qb,Bb=gb.length,ub=ta.value;++vb<Bb;){ta=gb[vb];sb=ta.children;jb=ta.value=0;for(qb=sb.length;jb<qb;++jb)ta.value+=sb[jb].value;ta.dice?M(ta,za,Ia,
Xa,Ia+=($a-Ia)*ta.value/ub):Y(ta,za,Ia,za+=(Xa-za)*ta.value/ub,$a);ub-=ta.value}else ta._squarify=gb=ba(ka,ta,za,Ia,Xa,$a),gb.ratio=ka}qa.ratio=function(ta){return na(1<(ta=+ta)?ta:1)};return qa}(oa);p.cluster=function(){function ka(Ia){var Xa,$a=0;Ia.eachAfter(function(qb){var Bb=qb.children;if(Bb){var ub=Bb.reduce(k,0)/Bb.length;qb.x=ub;qb.y=1+Bb.reduce(m,0)}else qb.x=Xa?$a+=na(qb,Xa):0,qb.y=0,Xa=qb});var gb=a(Ia),sb=g(Ia),jb=gb.x-na(gb,sb)/2,vb=sb.x+na(sb,gb)/2;return Ia.eachAfter(za?function(qb){qb.x=
(qb.x-Ia.x)*qa;qb.y=(Ia.y-qb.y)*ta}:function(qb){qb.x=(qb.x-jb)/(vb-jb)*qa;qb.y=(1-(Ia.y?qb.y/Ia.y:1))*ta})}var na=n,qa=1,ta=1,za=!1;ka.separation=function(Ia){return arguments.length?(na=Ia,ka):na};ka.size=function(Ia){return arguments.length?(za=!1,qa=+Ia[0],ta=+Ia[1],ka):za?null:[qa,ta]};ka.nodeSize=function(Ia){return arguments.length?(za=!0,qa=+Ia[0],ta=+Ia[1],ka):za?[qa,ta]:null};return ka};p.hierarchy=r;p.pack=function(){function ka(Ia){Ia.x=qa/2;Ia.y=ta/2;na?Ia.eachBefore(O(na)).eachAfter(I(za,
.5)).eachBefore(L(1)):Ia.eachBefore(O(K)).eachAfter(I(F,1)).eachAfter(I(za,Ia.r/Math.min(qa,ta))).eachBefore(L(Math.min(qa,ta)/(2*Ia.r)));return Ia}var na=null,qa=1,ta=1,za=F;ka.radius=function(Ia){return arguments.length?(na=null==Ia?null:y(Ia),ka):na};ka.size=function(Ia){return arguments.length?(qa=+Ia[0],ta=+Ia[1],ka):[qa,ta]};ka.padding=function(Ia){return arguments.length?(za="function"===typeof Ia?Ia:J(+Ia),ka):za};return ka};p.packEnclose=f;p.packSiblings=function(ka){v(ka);return ka};p.partition=
function(){function ka(Xa){var $a=Xa.height+1;Xa.x0=Xa.y0=za;Xa.x1=qa;Xa.y1=ta/$a;Xa.eachBefore(na(ta,$a));Ia&&Xa.eachBefore(H);return Xa}function na(Xa,$a){return function(gb){gb.children&&M(gb,gb.x0,Xa*(gb.depth+1)/$a,gb.x1,Xa*(gb.depth+2)/$a);var sb=gb.x0,jb=gb.y0,vb=gb.x1-za,qb=gb.y1-za;vb<sb&&(sb=vb=(sb+vb)/2);qb<jb&&(jb=qb=(jb+qb)/2);gb.x0=sb;gb.y0=jb;gb.x1=vb;gb.y1=qb}}var qa=1,ta=1,za=0,Ia=!1;ka.round=function(Xa){return arguments.length?(Ia=!!Xa,ka):Ia};ka.size=function(Xa){return arguments.length?
(qa=+Xa[0],ta=+Xa[1],ka):[qa,ta]};ka.padding=function(Xa){return arguments.length?(za=+Xa,ka):za};return ka};p.stratify=function(){function ka(ta){var za,Ia=ta.length,Xa=Array(Ia),$a,gb={};for(za=0;za<Ia;++za){var sb=ta[za];var jb=Xa[za]=new e(sb);null!=($a=na(sb,za,ta))&&($a+="")&&(sb="$"+(jb.id=$a),gb[sb]=sb in gb?ia:jb)}for(za=0;za<Ia;++za)if(jb=Xa[za],$a=qa(ta[za],za,ta),null!=$a&&($a+="")){sb=gb["$"+$a];if(!sb)throw Error("missing: "+$a);if(sb===ia)throw Error("ambiguous: "+$a);sb.children?sb.children.push(jb):
sb.children=[jb];jb.parent=sb}else{if(vb)throw Error("multiple roots");var vb=jb}if(!vb)throw Error("no root");vb.parent=ma;vb.eachBefore(function(qb){qb.depth=qb.parent.depth+1;--Ia}).eachBefore(d);vb.parent=null;if(0<Ia)throw Error("cycle");return vb}var na=Q,qa=Z;ka.id=function(ta){return arguments.length?(na=y(ta),ka):na};ka.parentId=function(ta){return arguments.length?(qa=y(ta),ka):qa};return ka};p.tree=function(){function ka(gb){var sb=ha(gb);sb.eachAfter(na);sb.parent.m=-sb.z;sb.eachBefore(qa);
if($a)gb.eachBefore(ta);else{var jb=gb,vb=gb,qb=gb;gb.eachBefore(function(rb){rb.x<jb.x&&(jb=rb);rb.x>vb.x&&(vb=rb);rb.depth>qb.depth&&(qb=rb)});sb=jb===vb?1:za(jb,vb)/2;var Bb=sb-jb.x,ub=Ia/(vb.x+sb+Bb),wb=Xa/(qb.depth||1);gb.eachBefore(function(rb){rb.x=(rb.x+Bb)*ub;rb.y=rb.depth*wb})}return gb}function na(gb){var sb=gb.children,jb=gb.parent.children,vb=gb.i?jb[gb.i-1]:null;if(sb){for(var qb=0,Bb=0,ub=gb.children,wb=ub.length,rb;0<=--wb;)rb=ub[wb],rb.z+=qb,rb.m+=qb,qb+=rb.s+(Bb+=rb.c);sb=(sb[0].z+
sb[sb.length-1].z)/2;vb?(gb.z=vb.z+za(gb._,vb._),gb.m=gb.z-sb):gb.z=sb}else vb&&(gb.z=vb.z+za(gb._,vb._));sb=gb.parent;jb=gb.parent.A||jb[0];if(vb){Bb=qb=gb;ub=qb.parent.children[0];wb=qb.m;rb=Bb.m;for(var Ab=vb.m,Ma=ub.m,La;vb=T(vb),qb=W(qb),vb&&qb;){ub=W(ub);Bb=T(Bb);Bb.a=gb;La=vb.z+Ab-qb.z-wb+za(vb._,qb._);if(0<La){var ya=vb.a.parent===gb.parent?vb.a:jb,Aa=gb,Ka=La,Ta=Ka/(Aa.i-ya.i);Aa.c-=Ta;Aa.s+=Ka;ya.c+=Ta;Aa.z+=Ka;Aa.m+=Ka;wb+=La;rb+=La}Ab+=vb.m;wb+=qb.m;Ma+=ub.m;rb+=Bb.m}vb&&!T(Bb)&&(Bb.t=
vb,Bb.m+=Ab-rb);qb&&!W(ub)&&(ub.t=qb,ub.m+=wb-Ma,jb=gb)}sb.A=jb}function qa(gb){gb._.x=gb.z+gb.parent.m;gb.m+=gb.parent.m}function ta(gb){gb.x*=Ia;gb.y=gb.depth*Xa}var za=ca,Ia=1,Xa=1,$a=null;ka.separation=function(gb){return arguments.length?(za=gb,ka):za};ka.size=function(gb){return arguments.length?($a=!1,Ia=+gb[0],Xa=+gb[1],ka):$a?null:[Ia,Xa]};ka.nodeSize=function(gb){return arguments.length?($a=!0,Ia=+gb[0],Xa=+gb[1],ka):$a?[Ia,Xa]:null};return ka};p.treemap=function(){function ka(qb){qb.x0=
qb.y0=0;qb.x1=za;qb.y1=Ia;qb.eachBefore(na);Xa=[0];ta&&qb.eachBefore(H);return qb}function na(qb){var Bb=Xa[qb.depth],ub=qb.x0+Bb,wb=qb.y0+Bb,rb=qb.x1-Bb,Ab=qb.y1-Bb;rb<ub&&(ub=rb=(ub+rb)/2);Ab<wb&&(wb=Ab=(wb+Ab)/2);qb.x0=ub;qb.y0=wb;qb.x1=rb;qb.y1=Ab;qb.children&&(Bb=Xa[qb.depth+1]=$a(qb)/2,ub+=vb(qb)-Bb,wb+=gb(qb)-Bb,rb-=sb(qb)-Bb,Ab-=jb(qb)-Bb,rb<ub&&(ub=rb=(ub+rb)/2),Ab<wb&&(wb=Ab=(wb+Ab)/2),qa(qb,ub,wb,rb,Ab))}var qa=xa,ta=!1,za=1,Ia=1,Xa=[0],$a=F,gb=F,sb=F,jb=F,vb=F;ka.round=function(qb){return arguments.length?
(ta=!!qb,ka):ta};ka.size=function(qb){return arguments.length?(za=+qb[0],Ia=+qb[1],ka):[za,Ia]};ka.tile=function(qb){return arguments.length?(qa=y(qb),ka):qa};ka.padding=function(qb){return arguments.length?ka.paddingInner(qb).paddingOuter(qb):ka.paddingInner()};ka.paddingInner=function(qb){return arguments.length?($a="function"===typeof qb?qb:J(+qb),ka):$a};ka.paddingOuter=function(qb){return arguments.length?ka.paddingTop(qb).paddingRight(qb).paddingBottom(qb).paddingLeft(qb):ka.paddingTop()};ka.paddingTop=
function(qb){return arguments.length?(gb="function"===typeof qb?qb:J(+qb),ka):gb};ka.paddingRight=function(qb){return arguments.length?(sb="function"===typeof qb?qb:J(+qb),ka):sb};ka.paddingBottom=function(qb){return arguments.length?(jb="function"===typeof qb?qb:J(+qb),ka):jb};ka.paddingLeft=function(qb){return arguments.length?(vb="function"===typeof qb?qb:J(+qb),ka):vb};return ka};p.treemapBinary=function(ka,na,qa,ta,za){function Ia(vb,qb,Bb,ub,wb,rb,Ab){if(vb>=qb-1)vb=Xa[vb],vb.x0=ub,vb.y0=wb,
vb.x1=rb,vb.y1=Ab;else{for(var Ma=jb[vb],La=Bb/2+Ma,ya=vb+1,Aa=qb-1;ya<Aa;){var Ka=ya+Aa>>>1;jb[Ka]<La?ya=Ka+1:Aa=Ka}La-jb[ya-1]<jb[ya]-La&&vb+1<ya&&--ya;Ma=jb[ya]-Ma;La=Bb-Ma;rb-ub>Ab-wb?(Bb=(ub*La+rb*Ma)/Bb,Ia(vb,ya,Ma,ub,wb,Bb,Ab),Ia(ya,qb,La,Bb,wb,rb,Ab)):(Bb=(wb*La+Ab*Ma)/Bb,Ia(vb,ya,Ma,ub,wb,rb,Bb),Ia(ya,qb,La,ub,Bb,rb,Ab))}}var Xa=ka.children,$a,gb=Xa.length,sb,jb=Array(gb+1);for(jb[0]=sb=$a=0;$a<gb;++$a)jb[$a+1]=sb+=Xa[$a].value;Ia(0,gb,ka.value,na,qa,ta,za)};p.treemapDice=M;p.treemapResquarify=
oa;p.treemapSlice=Y;p.treemapSliceDice=function(ka,na,qa,ta,za){(ka.depth&1?Y:M)(ka,na,qa,ta,za)};p.treemapSquarify=xa;Object.defineProperty(p,"__esModule",{value:!0})})},{}],171:[function(b,N,G){(function(p,n){"object"===typeof G&&"undefined"!==typeof N?n(G,b("d3-color")):(p=p||self,n(p.d3=p.d3||{},p.d3))})(this,function(p,n){function k(ka,na,qa,ta,za){var Ia=ka*ka,Xa=Ia*ka;return((1-3*ka+3*Ia-Xa)*na+(4-6*Ia+3*Xa)*qa+(1+3*ka+3*Ia-3*Xa)*ta+Xa*za)/6}function m(ka){var na=ka.length-1;return function(qa){var ta=
0>=qa?qa=0:1<=qa?(qa=1,na-1):Math.floor(qa*na),za=ka[ta],Ia=ka[ta+1];return k((qa-ta/na)*na,0<ta?ka[ta-1]:2*za-Ia,za,Ia,ta<na-1?ka[ta+2]:2*Ia-za)}}function a(ka){var na=ka.length;return function(qa){var ta=Math.floor((0>(qa%=1)?++qa:qa)*na);return k((qa-ta/na)*na,ka[(ta+na-1)%na],ka[ta%na],ka[(ta+1)%na],ka[(ta+2)%na])}}function g(ka){return function(){return ka}}function h(ka,na){return function(qa){return ka+qa*na}}function r(ka,na,qa){return ka=Math.pow(ka,qa),na=Math.pow(na,qa)-ka,qa=1/qa,function(ta){return Math.pow(ka+
ta*na,qa)}}function l(ka,na){var qa=na-ka;return qa?h(ka,180<qa||-180>qa?qa-360*Math.round(qa/360):qa):g(isNaN(ka)?na:ka)}function c(ka){return 1===(ka=+ka)?d:function(na,qa){return qa-na?r(na,qa,ka):g(isNaN(na)?qa:na)}}function d(ka,na){var qa=na-ka;return qa?h(ka,qa):g(isNaN(ka)?na:ka)}function e(ka){return function(na){var qa=na.length,ta=Array(qa),za=Array(qa),Ia=Array(qa),Xa;for(Xa=0;Xa<qa;++Xa){var $a=n.rgb(na[Xa]);ta[Xa]=$a.r||0;za[Xa]=$a.g||0;Ia[Xa]=$a.b||0}ta=ka(ta);za=ka(za);Ia=ka(Ia);$a.opacity=
1;return function(gb){$a.r=ta(gb);$a.g=za(gb);$a.b=Ia(gb);return $a+""}}}function f(ka,na){na||(na=[]);var qa=ka?Math.min(na.length,ka.length):0,ta=na.slice(),za;return function(Ia){for(za=0;za<qa;++za)ta[za]=ka[za]*(1-Ia)+na[za]*Ia;return ta}}function q(ka){return ArrayBuffer.isView(ka)&&!(ka instanceof DataView)}function t(ka,na){var qa=na?na.length:0,ta=ka?Math.min(qa,ka.length):0,za=Array(ta),Ia=Array(qa),Xa;for(Xa=0;Xa<ta;++Xa)za[Xa]=C(ka[Xa],na[Xa]);for(;Xa<qa;++Xa)Ia[Xa]=na[Xa];return function($a){for(Xa=
0;Xa<ta;++Xa)Ia[Xa]=za[Xa]($a);return Ia}}function w(ka,na){var qa=new Date;return ka=+ka,na=+na,function(ta){return qa.setTime(ka*(1-ta)+na*ta),qa}}function x(ka,na){return ka=+ka,na=+na,function(qa){return ka*(1-qa)+na*qa}}function z(ka,na){var qa={},ta={},za;if(null===ka||"object"!==typeof ka)ka={};if(null===na||"object"!==typeof na)na={};for(za in na)za in ka?qa[za]=C(ka[za],na[za]):ta[za]=na[za];return function(Ia){for(za in qa)ta[za]=qa[za](Ia);return ta}}function B(ka){return function(){return ka}}
function A(ka){return function(na){return ka(na)+""}}function D(ka,na){var qa=M.lastIndex=Q.lastIndex=0,ta,za,Ia,Xa=-1,$a=[],gb=[];ka+="";for(na+="";(ta=M.exec(ka))&&(za=Q.exec(na));)(Ia=za.index)>qa&&(Ia=na.slice(qa,Ia),$a[Xa]?$a[Xa]+=Ia:$a[++Xa]=Ia),(ta=ta[0])===(za=za[0])?$a[Xa]?$a[Xa]+=za:$a[++Xa]=za:($a[++Xa]=null,gb.push({i:Xa,x:x(ta,za)})),qa=Q.lastIndex;qa<na.length&&(Ia=na.slice(qa),$a[Xa]?$a[Xa]+=Ia:$a[++Xa]=Ia);return 2>$a.length?gb[0]?A(gb[0].x):B(na):(na=gb.length,function(sb){for(var jb=
0,vb;jb<na;++jb)$a[(vb=gb[jb]).i]=vb.x(sb);return $a.join("")})}function C(ka,na){var qa=typeof na,ta;return null==na||"boolean"===qa?g(na):("number"===qa?x:"string"===qa?(ta=n.color(na))?(na=ta,I):D:na instanceof n.color?I:na instanceof Date?w:q(na)?f:Array.isArray(na)?t:"function"!==typeof na.valueOf&&"function"!==typeof na.toString||isNaN(na)?z:x)(ka,na)}function v(ka,na,qa,ta,za,Ia){var Xa,$a,gb;if(Xa=Math.sqrt(ka*ka+na*na))ka/=Xa,na/=Xa;if(gb=ka*qa+na*ta)qa-=ka*gb,ta-=na*gb;if($a=Math.sqrt(qa*
qa+ta*ta))qa/=$a,ta/=$a,gb/=$a;ka*ta<na*qa&&(ka=-ka,na=-na,gb=-gb,Xa=-Xa);return{translateX:za,translateY:Ia,rotate:Math.atan2(na,ka)*Z,skewX:Math.atan(gb)*Z,scaleX:Xa,scaleY:$a}}function y(ka,na,qa,ta){function za(sb){return sb.length?sb.pop()+" ":""}function Ia(sb,jb,vb,qb,Bb,ub){sb!==vb||jb!==qb?(Bb=Bb.push("translate(",null,na,null,qa),ub.push({i:Bb-4,x:x(sb,vb)},{i:Bb-2,x:x(jb,qb)})):(vb||qb)&&Bb.push("translate("+vb+na+qb+qa)}function Xa(sb,jb,vb,qb){sb!==jb?(180<sb-jb?jb+=360:180<jb-sb&&(sb+=
360),qb.push({i:vb.push(za(vb)+"rotate(",null,ta)-2,x:x(sb,jb)})):jb&&vb.push(za(vb)+"rotate("+jb+ta)}function $a(sb,jb,vb,qb){sb!==jb?qb.push({i:vb.push(za(vb)+"skewX(",null,ta)-2,x:x(sb,jb)}):jb&&vb.push(za(vb)+"skewX("+jb+ta)}function gb(sb,jb,vb,qb,Bb,ub){sb!==vb||jb!==qb?(Bb=Bb.push(za(Bb)+"scale(",null,",",null,")"),ub.push({i:Bb-4,x:x(sb,vb)},{i:Bb-2,x:x(jb,qb)})):1===vb&&1===qb||Bb.push(za(Bb)+"scale("+vb+","+qb+")")}return function(sb,jb){var vb=[],qb=[];sb=ka(sb);jb=ka(jb);Ia(sb.translateX,
sb.translateY,jb.translateX,jb.translateY,vb,qb);Xa(sb.rotate,jb.rotate,vb,qb);$a(sb.skewX,jb.skewX,vb,qb);gb(sb.scaleX,sb.scaleY,jb.scaleX,jb.scaleY,vb,qb);sb=jb=null;return function(Bb){for(var ub=-1,wb=qb.length,rb;++ub<wb;)vb[(rb=qb[ub]).i]=rb.x(Bb);return vb.join("")}}}function F(ka){return((ka=Math.exp(ka))+1/ka)/2}function J(ka){return function(na,qa){var ta=ka((na=n.hsl(na)).h,(qa=n.hsl(qa)).h),za=d(na.s,qa.s),Ia=d(na.l,qa.l),Xa=d(na.opacity,qa.opacity);return function($a){na.h=ta($a);na.s=
za($a);na.l=Ia($a);na.opacity=Xa($a);return na+""}}}function K(ka){return function(na,qa){var ta=ka((na=n.hcl(na)).h,(qa=n.hcl(qa)).h),za=d(na.c,qa.c),Ia=d(na.l,qa.l),Xa=d(na.opacity,qa.opacity);return function($a){na.h=ta($a);na.c=za($a);na.l=Ia($a);na.opacity=Xa($a);return na+""}}}function O(ka){return function ta(qa){function za(Ia,Xa){var $a=ka((Ia=n.cubehelix(Ia)).h,(Xa=n.cubehelix(Xa)).h),gb=d(Ia.s,Xa.s),sb=d(Ia.l,Xa.l),jb=d(Ia.opacity,Xa.opacity);return function(vb){Ia.h=$a(vb);Ia.s=gb(vb);
Ia.l=sb(Math.pow(vb,qa));Ia.opacity=jb(vb);return Ia+""}}qa=+qa;za.gamma=ta;return za}(1)}var I=function qa(na){function ta(Ia,Xa){var $a=za((Ia=n.rgb(Ia)).r,(Xa=n.rgb(Xa)).r),gb=za(Ia.g,Xa.g),sb=za(Ia.b,Xa.b),jb=d(Ia.opacity,Xa.opacity);return function(vb){Ia.r=$a(vb);Ia.g=gb(vb);Ia.b=sb(vb);Ia.opacity=jb(vb);return Ia+""}}var za=c(na);ta.gamma=qa;return ta}(1),L=e(m),H=e(a),M=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Q=new RegExp(M.source,"g"),Z=180/Math.PI,ca={translateX:0,translateY:0,rotate:0,
skewX:0,scaleX:1,scaleY:1},W,T,U,ha,Y=y(function(na){if("none"===na)return ca;W||(W=document.createElement("DIV"),T=document.documentElement,U=document.defaultView);W.style.transform=na;na=U.getComputedStyle(T.appendChild(W),null).getPropertyValue("transform");T.removeChild(W);na=na.slice(7,-1).split(",");return v(+na[0],+na[1],+na[2],+na[3],+na[4],+na[5])},"px, ","px)","deg)"),ba=y(function(na){if(null==na)return ca;ha||(ha=document.createElementNS("http://www.w3.org/2000/svg","g"));ha.setAttribute("transform",
na);if(!(na=ha.transform.baseVal.consolidate()))return ca;na=na.matrix;return v(na.a,na.b,na.c,na.d,na.e,na.f)},", ",")",")"),ja=Math.SQRT2,ma=J(l),ia=J(d),oa=K(l),xa=K(d),ra=O(l),la=O(d);p.interpolate=C;p.interpolateArray=function(na,qa){return(q(qa)?f:t)(na,qa)};p.interpolateBasis=m;p.interpolateBasisClosed=a;p.interpolateCubehelix=ra;p.interpolateCubehelixLong=la;p.interpolateDate=w;p.interpolateDiscrete=function(na){var qa=na.length;return function(ta){return na[Math.max(0,Math.min(qa-1,Math.floor(ta*
qa)))]}};p.interpolateHcl=oa;p.interpolateHclLong=xa;p.interpolateHsl=ma;p.interpolateHslLong=ia;p.interpolateHue=function(na,qa){var ta=l(+na,+qa);return function(za){za=ta(za);return za-360*Math.floor(za/360)}};p.interpolateLab=function(na,qa){var ta=d((na=n.lab(na)).l,(qa=n.lab(qa)).l),za=d(na.a,qa.a),Ia=d(na.b,qa.b),Xa=d(na.opacity,qa.opacity);return function($a){na.l=ta($a);na.a=za($a);na.b=Ia($a);na.opacity=Xa($a);return na+""}};p.interpolateNumber=x;p.interpolateNumberArray=f;p.interpolateObject=
z;p.interpolateRgb=I;p.interpolateRgbBasis=L;p.interpolateRgbBasisClosed=H;p.interpolateRound=function(na,qa){return na=+na,qa=+qa,function(ta){return Math.round(na*(1-ta)+qa*ta)}};p.interpolateString=D;p.interpolateTransformCss=Y;p.interpolateTransformSvg=ba;p.interpolateZoom=function(na,qa){var ta=na[0],za=na[1],Ia=na[2];na=qa[2];var Xa=qa[0]-ta,$a=qa[1]-za,gb=Xa*Xa+$a*$a;if(1E-12>gb){var sb=Math.log(na/Ia)/ja;na=function(qb){return[ta+qb*Xa,za+qb*$a,Ia*Math.exp(ja*qb*sb)]}}else{var jb=Math.sqrt(gb);
qa=(na*na-Ia*Ia+4*gb)/(4*Ia*jb);na=(na*na-Ia*Ia-4*gb)/(4*na*jb);var vb=Math.log(Math.sqrt(qa*qa+1)-qa);sb=(Math.log(Math.sqrt(na*na+1)-na)-vb)/ja;na=function(qb){qb*=sb;var Bb=F(vb),ub=ja*qb+vb;var wb=((ub=Math.exp(2*ub))-1)/(ub+1);var rb=vb;ub=((rb=Math.exp(rb))-1/rb)/2;wb=Ia/(2*jb)*(Bb*wb-ub);return[ta+wb*Xa,za+wb*$a,Ia*Bb/F(ja*qb+vb)]}}na.duration=1E3*sb;return na};p.piecewise=function(na,qa){for(var ta=0,za=qa.length-1,Ia=qa[0],Xa=Array(0>za?0:za);ta<za;)Xa[ta]=na(Ia,Ia=qa[++ta]);return function($a){var gb=
Math.max(0,Math.min(za-1,Math.floor($a*=za)));return Xa[gb]($a-gb)}};p.quantize=function(na,qa){for(var ta=Array(qa),za=0;za<qa;++za)ta[za]=na(za/(qa-1));return ta};Object.defineProperty(p,"__esModule",{value:!0})})},{"d3-color":164}],172:[function(b,N,G){(function(p,n){"object"===typeof G&&"undefined"!==typeof N?n(G):(p=p||self,n(p.d3=p.d3||{}))})(this,function(p){function n(){this._x0=this._y0=this._x1=this._y1=null;this._=""}function k(){return new n}var m=Math.PI,a=2*m,g=a-1E-6;n.prototype=k.prototype=
{constructor:n,moveTo:function(h,r){this._+="M"+(this._x0=this._x1=+h)+","+(this._y0=this._y1=+r)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(h,r){this._+="L"+(this._x1=+h)+","+(this._y1=+r)},quadraticCurveTo:function(h,r,l,c){this._+="Q"+ +h+","+ +r+","+(this._x1=+l)+","+(this._y1=+c)},bezierCurveTo:function(h,r,l,c,d,e){this._+="C"+ +h+","+ +r+","+ +l+","+ +c+","+(this._x1=+d)+","+(this._y1=+e)},arcTo:function(h,r,l,c,d){h=+h;r=+r;l=
+l;c=+c;d=+d;var e=this._x1,f=this._y1,q=l-h,t=c-r,w=e-h,x=f-r,z=w*w+x*x;if(0>d)throw Error("negative radius: "+d);if(null===this._x1)this._+="M"+(this._x1=h)+","+(this._y1=r);else if(1E-6<z)if(1E-6<Math.abs(x*q-t*w)&&d){l-=e;c-=f;var B=q*q+t*t;f=Math.sqrt(B);e=Math.sqrt(z);z=d*Math.tan((m-Math.acos((B+z-(l*l+c*c))/(2*f*e)))/2);e=z/e;z/=f;1E-6<Math.abs(e-1)&&(this._+="L"+(h+e*w)+","+(r+e*x));this._+="A"+d+","+d+",0,0,"+ +(x*l>w*c)+","+(this._x1=h+z*q)+","+(this._y1=r+z*t)}else this._+="L"+(this._x1=
h)+","+(this._y1=r)},arc:function(h,r,l,c,d,e){h=+h;r=+r;l=+l;e=!!e;var f=l*Math.cos(c),q=l*Math.sin(c),t=h+f,w=r+q,x=1^e;c=e?c-d:d-c;if(0>l)throw Error("negative radius: "+l);if(null===this._x1)this._+="M"+t+","+w;else if(1E-6<Math.abs(this._x1-t)||1E-6<Math.abs(this._y1-w))this._+="L"+t+","+w;l&&(0>c&&(c=c%a+a),c>g?this._+="A"+l+","+l+",0,1,"+x+","+(h-f)+","+(r-q)+"A"+l+","+l+",0,1,"+x+","+(this._x1=t)+","+(this._y1=w):1E-6<c&&(this._+="A"+l+","+l+",0,"+ +(c>=m)+","+x+","+(this._x1=h+l*Math.cos(d))+
","+(this._y1=r+l*Math.sin(d))))},rect:function(h,r,l,c){this._+="M"+(this._x0=this._x1=+h)+","+(this._y0=this._y1=+r)+"h"+ +l+"v"+ +c+"h"+-l+"Z"},toString:function(){return this._}};p.path=k;Object.defineProperty(p,"__esModule",{value:!0})})},{}],173:[function(b,N,G){(function(p,n){"object"===typeof G&&"undefined"!==typeof N?n(G):(p=p||self,n(p.d3=p.d3||{}))})(this,function(p){function n(c,d,e,f){if(isNaN(d)||isNaN(e))return c;var q,t=c._root;f={data:f};var w=c._x0,x=c._y0,z=c._x1,B=c._y1,A,D,C,
v,y;if(!t)return c._root=f,c;for(;t.length;)if((C=d>=(A=(w+z)/2))?w=A:z=A,(v=e>=(D=(x+B)/2))?x=D:B=D,q=t,!(t=t[y=v<<1|C]))return q[y]=f,c;var F=+c._x.call(null,t.data);var J=+c._y.call(null,t.data);if(d===F&&e===J)return f.next=t,q?q[y]=f:c._root=f,c;do q=q?q[y]=Array(4):c._root=Array(4),(C=d>=(A=(w+z)/2))?w=A:z=A,(v=e>=(D=(x+B)/2))?x=D:B=D;while((y=v<<1|C)===(C=(J>=D)<<1|F>=A));return q[C]=t,q[y]=f,c}function k(c,d,e,f,q){this.node=c;this.x0=d;this.y0=e;this.x1=f;this.y1=q}function m(c){return c[0]}
function a(c){return c[1]}function g(c,d,e){d=new h(null==d?m:d,null==e?a:e,NaN,NaN,NaN,NaN);return null==c?d:d.addAll(c)}function h(c,d,e,f,q,t){this._x=c;this._y=d;this._x0=e;this._y0=f;this._x1=q;this._y1=t;this._root=void 0}function r(c){for(var d={data:c.data},e=d;c=c.next;)e=e.next={data:c.data};return d}var l=g.prototype=h.prototype;l.copy=function(){var c=new h(this._x,this._y,this._x0,this._y0,this._x1,this._y1),d=this._root,e,f;if(!d)return c;if(!d.length)return c._root=r(d),c;for(e=[{source:d,
target:c._root=Array(4)}];d=e.pop();)for(var q=0;4>q;++q)if(f=d.source[q])f.length?e.push({source:f,target:d.target[q]=Array(4)}):d.target[q]=r(f);return c};l.add=function(c){var d=+this._x.call(null,c),e=+this._y.call(null,c);return n(this.cover(d,e),d,e,c)};l.addAll=function(c){var d,e,f=c.length,q,t,w=Array(f),x=Array(f),z=Infinity,B=Infinity,A=-Infinity,D=-Infinity;for(e=0;e<f;++e)isNaN(q=+this._x.call(null,d=c[e]))||isNaN(t=+this._y.call(null,d))||(w[e]=q,x[e]=t,q<z&&(z=q),q>A&&(A=q),t<B&&(B=
t),t>D&&(D=t));if(z>A||B>D)return this;this.cover(z,B).cover(A,D);for(e=0;e<f;++e)n(this,w[e],x[e],c[e]);return this};l.cover=function(c,d){if(isNaN(c=+c)||isNaN(d=+d))return this;var e=this._x0,f=this._y0,q=this._x1,t=this._y1;if(isNaN(e))q=(e=Math.floor(c))+1,t=(f=Math.floor(d))+1;else{for(var w=q-e,x=this._root,z,B;e>c||c>=q||f>d||d>=t;)switch(B=(d<f)<<1|c<e,z=Array(4),z[B]=x,x=z,w*=2,B){case 0:q=e+w;t=f+w;break;case 1:e=q-w;t=f+w;break;case 2:q=e+w;f=t-w;break;case 3:e=q-w,f=t-w}this._root&&this._root.length&&
(this._root=x)}this._x0=e;this._y0=f;this._x1=q;this._y1=t;return this};l.data=function(){var c=[];this.visit(function(d){if(!d.length){do c.push(d.data);while(d=d.next)}});return c};l.extent=function(c){return arguments.length?this.cover(+c[0][0],+c[0][1]).cover(+c[1][0],+c[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]};l.find=function(c,d,e){var f=this._x0,q=this._y0,t,w,x,z,B=this._x1,A=this._y1,D=[],C=this._root,v;C&&D.push(new k(C,f,q,B,A));null==e?e=Infinity:(f=c-e,
q=d-e,B=c+e,A=d+e,e*=e);for(;v=D.pop();)if(!(!(C=v.node)||(t=v.x0)>B||(w=v.y0)>A||(x=v.x1)<f||(z=v.y1)<q))if(C.length){v=(t+x)/2;var y=(w+z)/2;D.push(new k(C[3],v,y,x,z),new k(C[2],t,y,v,z),new k(C[1],v,w,x,y),new k(C[0],t,w,v,y));if(C=(d>=y)<<1|c>=v)v=D[D.length-1],D[D.length-1]=D[D.length-1-C],D[D.length-1-C]=v}else if(v=c-+this._x.call(null,C.data),y=d-+this._y.call(null,C.data),v=v*v+y*y,v<e){var F=Math.sqrt(e=v);f=c-F;q=d-F;B=c+F;A=d+F;F=C.data}return F};l.remove=function(c){if(isNaN(z=+this._x.call(null,
c))||isNaN(B=+this._y.call(null,c)))return this;var d,e=this._root,f,q=this._x0,t=this._y0,w=this._x1,x=this._y1,z,B,A,D,C,v,y;if(!e)return this;if(e.length)for(;;){(C=z>=(A=(q+w)/2))?q=A:w=A;(v=B>=(D=(t+x)/2))?t=D:x=D;if(!(d=e,e=e[y=v<<1|C]))return this;if(!e.length)break;if(d[y+1&3]||d[y+2&3]||d[y+3&3]){var F=d;var J=y}}for(;e.data!==c;)if(!(f=e,e=e.next))return this;(c=e.next)&&delete e.next;if(f)return c?f.next=c:delete f.next,this;if(!d)return this._root=c,this;c?d[y]=c:delete d[y];(e=d[0]||
d[1]||d[2]||d[3])&&e===(d[3]||d[2]||d[1]||d[0])&&!e.length&&(F?F[J]=e:this._root=e);return this};l.removeAll=function(c){for(var d=0,e=c.length;d<e;++d)this.remove(c[d]);return this};l.root=function(){return this._root};l.size=function(){var c=0;this.visit(function(d){if(!d.length){do++c;while(d=d.next)}});return c};l.visit=function(c){var d=[],e,f=this._root,q,t,w,x,z;for(f&&d.push(new k(f,this._x0,this._y0,this._x1,this._y1));e=d.pop();)if(!c(f=e.node,t=e.x0,w=e.y0,x=e.x1,z=e.y1)&&f.length){e=(t+
x)/2;var B=(w+z)/2;(q=f[3])&&d.push(new k(q,e,B,x,z));(q=f[2])&&d.push(new k(q,t,B,e,z));(q=f[1])&&d.push(new k(q,e,w,x,B));(q=f[0])&&d.push(new k(q,t,w,e,B))}return this};l.visitAfter=function(c){var d=[],e=[],f;for(this._root&&d.push(new k(this._root,this._x0,this._y0,this._x1,this._y1));f=d.pop();){var q=f.node;if(q.length){var t,w=f.x0,x=f.y0,z=f.x1,B=f.y1,A=(w+z)/2,D=(x+B)/2;(t=q[0])&&d.push(new k(t,w,x,A,D));(t=q[1])&&d.push(new k(t,A,x,z,D));(t=q[2])&&d.push(new k(t,w,D,A,B));(t=q[3])&&d.push(new k(t,
A,D,z,B))}e.push(f)}for(;f=e.pop();)c(f.node,f.x0,f.y0,f.x1,f.y1);return this};l.x=function(c){return arguments.length?(this._x=c,this):this._x};l.y=function(c){return arguments.length?(this._y=c,this):this._y};p.quadtree=g;Object.defineProperty(p,"__esModule",{value:!0})})},{}],174:[function(b,N,G){(function(p,n){"object"===typeof G&&"undefined"!==typeof N?n(G,b("d3-path")):(p=p||self,n(p.d3=p.d3||{},p.d3))})(this,function(p,n){function k(tb){return function(){return tb}}function m(tb){return 1<=
tb?Aa:-1>=tb?-Aa:Math.asin(tb)}function a(tb){return tb.innerRadius}function g(tb){return tb.outerRadius}function h(tb){return tb.startAngle}function r(tb){return tb.endAngle}function l(tb){return tb&&tb.padAngle}function c(tb,Ib,sc,pc,zc,Wb,Ub){var yb=tb-sc,ac=Ib-pc;Ub=(Ub?Wb:-Wb)/La(yb*yb+ac*ac);ac*=Ub;yb*=-Ub;var Vb=tb+ac,mc=Ib+yb,tc=sc+ac,Uc=pc+yb;sc=(Vb+tc)/2;pc=(mc+Uc)/2;Ib=tc-Vb;tb=Uc-mc;Ub=Ib*Ib+tb*tb;Wb=zc-Wb;Uc=Vb*Uc-tc*mc;var kd=(0>tb?-1:1)*La(rb(0,Wb*Wb*Ub-Uc*Uc));Vb=(Uc*tb-Ib*kd)/Ub;
mc=(-Uc*Ib-tb*kd)/Ub;tc=(Uc*tb+Ib*kd)/Ub;Ib=(-Uc*Ib+tb*kd)/Ub;tb=Vb-sc;Ub=mc-pc;sc=tc-sc;pc=Ib-pc;tb*tb+Ub*Ub>sc*sc+pc*pc&&(Vb=tc,mc=Ib);return{cx:Vb,cy:mc,x01:-ac,y01:-yb,x11:Vb*(zc/Wb-1),y11:mc*(zc/Wb-1)}}function d(tb){this._context=tb}function e(tb){return new d(tb)}function f(tb){return tb[0]}function q(tb){return tb[1]}function t(){function tb(yb){var ac,Vb=yb.length,mc,tc=!1,Uc;null==zc&&(Ub=Wb(Uc=n.path()));for(ac=0;ac<=Vb;++ac)!(ac<Vb&&pc(mc=yb[ac],ac,yb))===tc&&((tc=!tc)?Ub.lineStart():
Ub.lineEnd()),tc&&Ub.point(+Ib(mc,ac,yb),+sc(mc,ac,yb));if(Uc)return Ub=null,Uc+""||null}var Ib=f,sc=q,pc=k(!0),zc=null,Wb=e,Ub=null;tb.x=function(yb){return arguments.length?(Ib="function"===typeof yb?yb:k(+yb),tb):Ib};tb.y=function(yb){return arguments.length?(sc="function"===typeof yb?yb:k(+yb),tb):sc};tb.defined=function(yb){return arguments.length?(pc="function"===typeof yb?yb:k(!!yb),tb):pc};tb.curve=function(yb){return arguments.length?(Wb=yb,null!=zc&&(Ub=Wb(zc)),tb):Wb};tb.context=function(yb){return arguments.length?
(null==yb?zc=Ub=null:Ub=Wb(zc=yb),tb):zc};return tb}function w(){function tb(mc){var tc,Uc,kd=mc.length,Bd,Fd=!1,yd,Lc=Array(kd),cd=Array(kd);null==yb&&(Vb=ac(yd=n.path()));for(tc=0;tc<=kd;++tc){if(!(tc<kd&&Ub(Bd=mc[tc],tc,mc))===Fd)if(Fd=!Fd){var Nc=tc;Vb.areaStart();Vb.lineStart()}else{Vb.lineEnd();Vb.lineStart();for(Uc=tc-1;Uc>=Nc;--Uc)Vb.point(Lc[Uc],cd[Uc]);Vb.lineEnd();Vb.areaEnd()}Fd&&(Lc[tc]=+sc(Bd,tc,mc),cd[tc]=+zc(Bd,tc,mc),Vb.point(pc?+pc(Bd,tc,mc):Lc[tc],Wb?+Wb(Bd,tc,mc):cd[tc]))}if(yd)return Vb=
null,yd+""||null}function Ib(){return t().defined(Ub).curve(ac).context(yb)}var sc=f,pc=null,zc=k(0),Wb=q,Ub=k(!0),yb=null,ac=e,Vb=null;tb.x=function(mc){return arguments.length?(sc="function"===typeof mc?mc:k(+mc),pc=null,tb):sc};tb.x0=function(mc){return arguments.length?(sc="function"===typeof mc?mc:k(+mc),tb):sc};tb.x1=function(mc){return arguments.length?(pc=null==mc?null:"function"===typeof mc?mc:k(+mc),tb):pc};tb.y=function(mc){return arguments.length?(zc="function"===typeof mc?mc:k(+mc),Wb=
null,tb):zc};tb.y0=function(mc){return arguments.length?(zc="function"===typeof mc?mc:k(+mc),tb):zc};tb.y1=function(mc){return arguments.length?(Wb=null==mc?null:"function"===typeof mc?mc:k(+mc),tb):Wb};tb.lineX0=tb.lineY0=function(){return Ib().x(sc).y(zc)};tb.lineY1=function(){return Ib().x(sc).y(Wb)};tb.lineX1=function(){return Ib().x(pc).y(zc)};tb.defined=function(mc){return arguments.length?(Ub="function"===typeof mc?mc:k(!!mc),tb):Ub};tb.curve=function(mc){return arguments.length?(ac=mc,null!=
yb&&(Vb=ac(yb)),tb):ac};tb.context=function(mc){return arguments.length?(null==mc?yb=Vb=null:Vb=ac(yb=mc),tb):yb};return tb}function x(tb,Ib){return Ib<tb?-1:Ib>tb?1:Ib>=tb?0:NaN}function z(tb){return tb}function B(tb){this._curve=tb}function A(tb){function Ib(sc){return new B(tb(sc))}Ib._curve=tb;return Ib}function D(tb){var Ib=tb.curve;tb.angle=tb.x;delete tb.x;tb.radius=tb.y;delete tb.y;tb.curve=function(sc){return arguments.length?Ib(A(sc)):Ib()._curve};return tb}function C(){return D(t().curve(Ta))}
function v(){var tb=w().curve(Ta),Ib=tb.curve,sc=tb.lineX0,pc=tb.lineX1,zc=tb.lineY0,Wb=tb.lineY1;tb.angle=tb.x;delete tb.x;tb.startAngle=tb.x0;delete tb.x0;tb.endAngle=tb.x1;delete tb.x1;tb.radius=tb.y;delete tb.y;tb.innerRadius=tb.y0;delete tb.y0;tb.outerRadius=tb.y1;delete tb.y1;tb.lineStartAngle=function(){return D(sc())};delete tb.lineX0;tb.lineEndAngle=function(){return D(pc())};delete tb.lineX1;tb.lineInnerRadius=function(){return D(zc())};delete tb.lineY0;tb.lineOuterRadius=function(){return D(Wb())};
delete tb.lineY1;tb.curve=function(Ub){return arguments.length?Ib(A(Ub)):Ib()._curve};return tb}function y(tb,Ib){return[(Ib=+Ib)*Math.cos(tb-=Math.PI/2),Ib*Math.sin(tb)]}function F(tb){return tb.source}function J(tb){return tb.target}function K(tb){function Ib(){var yb,ac=bb.call(arguments),Vb=sc.apply(this,ac),mc=pc.apply(this,ac);Ub||(Ub=yb=n.path());tb(Ub,+zc.apply(this,(ac[0]=Vb,ac)),+Wb.apply(this,ac),+zc.apply(this,(ac[0]=mc,ac)),+Wb.apply(this,ac));if(yb)return Ub=null,yb+""||null}var sc=
F,pc=J,zc=f,Wb=q,Ub=null;Ib.source=function(yb){return arguments.length?(sc=yb,Ib):sc};Ib.target=function(yb){return arguments.length?(pc=yb,Ib):pc};Ib.x=function(yb){return arguments.length?(zc="function"===typeof yb?yb:k(+yb),Ib):zc};Ib.y=function(yb){return arguments.length?(Wb="function"===typeof yb?yb:k(+yb),Ib):Wb};Ib.context=function(yb){return arguments.length?(Ub=null==yb?null:yb,Ib):Ub};return Ib}function O(tb,Ib,sc,pc,zc){tb.moveTo(Ib,sc);tb.bezierCurveTo(Ib=(Ib+pc)/2,sc,Ib,zc,pc,zc)}function I(tb,
Ib,sc,pc,zc){tb.moveTo(Ib,sc);tb.bezierCurveTo(Ib,sc=(sc+zc)/2,pc,sc,pc,zc)}function L(tb,Ib,sc,pc,zc){var Wb=y(Ib,sc);Ib=y(Ib,sc=(sc+zc)/2);sc=y(pc,sc);pc=y(pc,zc);tb.moveTo(Wb[0],Wb[1]);tb.bezierCurveTo(Ib[0],Ib[1],sc[0],sc[1],pc[0],pc[1])}function H(){}function M(tb,Ib,sc){tb._context.bezierCurveTo((2*tb._x0+tb._x1)/3,(2*tb._y0+tb._y1)/3,(tb._x0+2*tb._x1)/3,(tb._y0+2*tb._y1)/3,(tb._x0+4*tb._x1+Ib)/6,(tb._y0+4*tb._y1+sc)/6)}function Q(tb){this._context=tb}function Z(tb){this._context=tb}function ca(tb){this._context=
tb}function W(tb,Ib){this._basis=new Q(tb);this._beta=Ib}function T(tb,Ib,sc){tb._context.bezierCurveTo(tb._x1+tb._k*(tb._x2-tb._x0),tb._y1+tb._k*(tb._y2-tb._y0),tb._x2+tb._k*(tb._x1-Ib),tb._y2+tb._k*(tb._y1-sc),tb._x2,tb._y2)}function U(tb,Ib){this._context=tb;this._k=(1-Ib)/6}function ha(tb,Ib){this._context=tb;this._k=(1-Ib)/6}function Y(tb,Ib){this._context=tb;this._k=(1-Ib)/6}function ba(tb,Ib,sc){var pc=tb._x1,zc=tb._y1,Wb=tb._x2,Ub=tb._y2;if(1E-12<tb._l01_a){var yb=2*tb._l01_2a+3*tb._l01_a*
tb._l12_a+tb._l12_2a,ac=3*tb._l01_a*(tb._l01_a+tb._l12_a);pc=(pc*yb-tb._x0*tb._l12_2a+tb._x2*tb._l01_2a)/ac;zc=(zc*yb-tb._y0*tb._l12_2a+tb._y2*tb._l01_2a)/ac}1E-12<tb._l23_a&&(yb=2*tb._l23_2a+3*tb._l23_a*tb._l12_a+tb._l12_2a,ac=3*tb._l23_a*(tb._l23_a+tb._l12_a),Wb=(Wb*yb+tb._x1*tb._l23_2a-Ib*tb._l12_2a)/ac,Ub=(Ub*yb+tb._y1*tb._l23_2a-sc*tb._l12_2a)/ac);tb._context.bezierCurveTo(pc,zc,Wb,Ub,tb._x2,tb._y2)}function ja(tb,Ib){this._context=tb;this._alpha=Ib}function ma(tb,Ib){this._context=tb;this._alpha=
Ib}function ia(tb,Ib){this._context=tb;this._alpha=Ib}function oa(tb){this._context=tb}function xa(tb,Ib,sc){var pc=tb._x1-tb._x0;Ib-=tb._x1;var zc=(tb._y1-tb._y0)/(pc||0>Ib&&-0);tb=(sc-tb._y1)/(Ib||0>pc&&-0);return((0>zc?-1:1)+(0>tb?-1:1))*Math.min(Math.abs(zc),Math.abs(tb),.5*Math.abs((zc*Ib+tb*pc)/(pc+Ib)))||0}function ra(tb,Ib){var sc=tb._x1-tb._x0;return sc?(3*(tb._y1-tb._y0)/sc-Ib)/2:Ib}function la(tb,Ib,sc){var pc=tb._x0,zc=tb._x1,Wb=tb._y1,Ub=(zc-pc)/3;tb._context.bezierCurveTo(pc+Ub,tb._y0+
Ub*Ib,zc-Ub,Wb-Ub*sc,zc,Wb)}function ka(tb){this._context=tb}function na(tb){this._context=new qa(tb)}function qa(tb){this._context=tb}function ta(tb){this._context=tb}function za(tb){var Ib,sc=tb.length-1,pc=Array(sc),zc=Array(sc),Wb=Array(sc);pc[0]=0;zc[0]=2;Wb[0]=tb[0]+2*tb[1];for(Ib=1;Ib<sc-1;++Ib)pc[Ib]=1,zc[Ib]=4,Wb[Ib]=4*tb[Ib]+2*tb[Ib+1];pc[sc-1]=2;zc[sc-1]=7;Wb[sc-1]=8*tb[sc-1]+tb[sc];for(Ib=1;Ib<sc;++Ib){var Ub=pc[Ib]/zc[Ib-1];zc[Ib]-=Ub;Wb[Ib]-=Ub*Wb[Ib-1]}pc[sc-1]=Wb[sc-1]/zc[sc-1];for(Ib=
sc-2;0<=Ib;--Ib)pc[Ib]=(Wb[Ib]-pc[Ib+1])/zc[Ib];zc[sc-1]=(tb[sc]+pc[sc-1])/2;for(Ib=0;Ib<sc-1;++Ib)zc[Ib]=2*tb[Ib+1]-pc[Ib+1];return[pc,zc]}function Ia(tb,Ib){this._context=tb;this._t=Ib}function Xa(tb,Ib){if(1<(Ub=tb.length))for(var sc=1,pc,zc,Wb=tb[Ib[0]],Ub,yb=Wb.length;sc<Ub;++sc)for(zc=Wb,Wb=tb[Ib[sc]],pc=0;pc<yb;++pc)Wb[pc][1]+=Wb[pc][0]=isNaN(zc[pc][1])?zc[pc][0]:zc[pc][1]}function $a(tb){tb=tb.length;for(var Ib=Array(tb);0<=--tb;)Ib[tb]=tb;return Ib}function gb(tb,Ib){return tb[Ib]}function sb(tb){var Ib=
tb.map(jb);return $a(tb).sort(function(sc,pc){return Ib[sc]-Ib[pc]})}function jb(tb){for(var Ib=-1,sc=0,pc=tb.length,zc,Wb=-Infinity;++Ib<pc;)(zc=+tb[Ib][1])>Wb&&(Wb=zc,sc=Ib);return sc}function vb(tb){var Ib=tb.map(qb);return $a(tb).sort(function(sc,pc){return Ib[sc]-Ib[pc]})}function qb(tb){for(var Ib=0,sc=-1,pc=tb.length,zc;++sc<pc;)if(zc=+tb[sc][1])Ib+=zc;return Ib}var Bb=Math.abs,ub=Math.atan2,wb=Math.cos,rb=Math.max,Ab=Math.min,Ma=Math.sin,La=Math.sqrt,ya=Math.PI,Aa=ya/2,Ka=2*ya;d.prototype=
{areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(tb,Ib){tb=+tb;Ib=+Ib;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(tb,Ib):this._context.moveTo(tb,Ib);break;case 1:this._point=2;default:this._context.lineTo(tb,Ib)}}};var Ta=A(e);B.prototype={areaStart:function(){this._curve.areaStart()},
areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(tb,Ib){this._curve.point(Ib*Math.sin(tb),Ib*-Math.cos(tb))}};var bb=Array.prototype.slice,cb={draw:function(tb,Ib){Ib=Math.sqrt(Ib/ya);tb.moveTo(Ib,0);tb.arc(0,0,Ib,0,Ka)}},Eb={draw:function(tb,Ib){Ib=Math.sqrt(Ib/5)/2;tb.moveTo(-3*Ib,-Ib);tb.lineTo(-Ib,-Ib);tb.lineTo(-Ib,-3*Ib);tb.lineTo(Ib,-3*Ib);tb.lineTo(Ib,-Ib);tb.lineTo(3*Ib,-Ib);tb.lineTo(3*Ib,Ib);
tb.lineTo(Ib,Ib);tb.lineTo(Ib,3*Ib);tb.lineTo(-Ib,3*Ib);tb.lineTo(-Ib,Ib);tb.lineTo(-3*Ib,Ib);tb.closePath()}},Pb=Math.sqrt(1/3),fc=2*Pb,pb={draw:function(tb,Ib){Ib=Math.sqrt(Ib/fc);var sc=Ib*Pb;tb.moveTo(0,-Ib);tb.lineTo(sc,0);tb.lineTo(0,Ib);tb.lineTo(-sc,0);tb.closePath()}},Db=Math.sin(ya/10)/Math.sin(7*ya/10),Rb=Math.sin(Ka/10)*Db,xc=-Math.cos(Ka/10)*Db;Db={draw:function(tb,Ib){Ib=Math.sqrt(.8908130915292852*Ib);var sc=Rb*Ib,pc=xc*Ib;tb.moveTo(0,-Ib);tb.lineTo(sc,pc);for(var zc=1;5>zc;++zc){var Wb=
Ka*zc/5,Ub=Math.cos(Wb);Wb=Math.sin(Wb);tb.lineTo(Wb*Ib,-Ub*Ib);tb.lineTo(Ub*sc-Wb*pc,Wb*sc+Ub*pc)}tb.closePath()}};var Ic={draw:function(tb,Ib){Ib=Math.sqrt(Ib);var sc=-Ib/2;tb.rect(sc,sc,Ib,Ib)}},Ja=Math.sqrt(3),Pa={draw:function(tb,Ib){Ib=-Math.sqrt(Ib/(3*Ja));tb.moveTo(0,2*Ib);tb.lineTo(-Ja*Ib,-Ib);tb.lineTo(Ja*Ib,-Ib);tb.closePath()}},db=Math.sqrt(3)/2,Jb=1/Math.sqrt(12),Gb=3*(Jb/2+1),cc={draw:function(tb,Ib){var sc=Math.sqrt(Ib/Gb);Ib=sc/2;var pc=sc*Jb;sc=sc*Jb+sc;var zc=-Ib;tb.moveTo(Ib,pc);
tb.lineTo(Ib,sc);tb.lineTo(zc,sc);tb.lineTo(-.5*Ib-db*pc,db*Ib+-.5*pc);tb.lineTo(-.5*Ib-db*sc,db*Ib+-.5*sc);tb.lineTo(-.5*zc-db*sc,db*zc+-.5*sc);tb.lineTo(-.5*Ib+db*pc,-.5*pc-db*Ib);tb.lineTo(-.5*Ib+db*sc,-.5*sc-db*Ib);tb.lineTo(-.5*zc+db*sc,-.5*sc-db*zc);tb.closePath()}},uc=[cb,Eb,pb,Ic,Db,Pa,cc];Q.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){switch(this._point){case 3:M(this,
this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(tb,Ib){tb=+tb;Ib=+Ib;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(tb,Ib):this._context.moveTo(tb,Ib);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:M(this,tb,Ib)}this._x0=this._x1;this._x1=tb;this._y0=this._y1;
this._y1=Ib}};Z.prototype={areaStart:H,areaEnd:H,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2);this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3);this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3);this._context.closePath();break;case 3:this.point(this._x2,
this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(tb,Ib){tb=+tb;Ib=+Ib;switch(this._point){case 0:this._point=1;this._x2=tb;this._y2=Ib;break;case 1:this._point=2;this._x3=tb;this._y3=Ib;break;case 2:this._point=3;this._x4=tb;this._y4=Ib;this._context.moveTo((this._x0+4*this._x1+tb)/6,(this._y0+4*this._y1+Ib)/6);break;default:M(this,tb,Ib)}this._x0=this._x1;this._x1=tb;this._y0=this._y1;this._y1=Ib}};ca.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=
NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(tb,Ib){tb=+tb;Ib=+Ib;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var sc=(this._x0+4*this._x1+tb)/6,pc=(this._y0+4*this._y1+Ib)/6;this._line?this._context.lineTo(sc,pc):this._context.moveTo(sc,pc);break;case 3:this._point=4;default:M(this,
tb,Ib)}this._x0=this._x1;this._x1=tb;this._y0=this._y1;this._y1=Ib}};W.prototype={lineStart:function(){this._x=[];this._y=[];this._basis.lineStart()},lineEnd:function(){var tb=this._x,Ib=this._y,sc=tb.length-1;if(0<sc)for(var pc=tb[0],zc=Ib[0],Wb=tb[sc]-pc,Ub=Ib[sc]-zc,yb=-1,ac;++yb<=sc;)ac=yb/sc,this._basis.point(this._beta*tb[yb]+(1-this._beta)*(pc+ac*Wb),this._beta*Ib[yb]+(1-this._beta)*(zc+ac*Ub));this._x=this._y=null;this._basis.lineEnd()},point:function(tb,Ib){this._x.push(+tb);this._y.push(+Ib)}};
var fd=function sc(Ib){function pc(zc){return 1===Ib?new Q(zc):new W(zc,Ib)}pc.beta=function(zc){return sc(+zc)};return pc}(.85);U.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:T(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();
this._line=1-this._line},point:function(Ib,sc){Ib=+Ib;sc=+sc;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(Ib,sc):this._context.moveTo(Ib,sc);break;case 1:this._point=2;this._x1=Ib;this._y1=sc;break;case 2:this._point=3;default:T(this,Ib,sc)}this._x0=this._x1;this._x1=this._x2;this._x2=Ib;this._y0=this._y1;this._y1=this._y2;this._y2=sc}};var kb=function pc(sc){function zc(Wb){return new U(Wb,sc)}zc.tension=function(Wb){return pc(+Wb)};return zc}(0);ha.prototype={areaStart:H,
areaEnd:H,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3);this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3);this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(sc,pc){sc=+sc;pc=+pc;switch(this._point){case 0:this._point=
1;this._x3=sc;this._y3=pc;break;case 1:this._point=2;this._context.moveTo(this._x4=sc,this._y4=pc);break;case 2:this._point=3;this._x5=sc;this._y5=pc;break;default:T(this,sc,pc)}this._x0=this._x1;this._x1=this._x2;this._x2=sc;this._y0=this._y1;this._y1=this._y2;this._y2=pc}};var Qb=function zc(pc){function Wb(Ub){return new ha(Ub,pc)}Wb.tension=function(Ub){return zc(+Ub)};return Wb}(0);Y.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=
this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(pc,zc){pc=+pc;zc=+zc;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:T(this,pc,zc)}this._x0=this._x1;this._x1=this._x2;this._x2=pc;this._y0=
this._y1;this._y1=this._y2;this._y2=zc}};var dc=function Wb(zc){function Ub(yb){return new Y(yb,zc)}Ub.tension=function(yb){return Wb(+yb)};return Ub}(0);ja.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,
this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(zc,Wb){zc=+zc;Wb=+Wb;if(this._point){var Ub=this._x2-zc,yb=this._y2-Wb;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Ub*Ub+yb*yb,this._alpha))}switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(zc,Wb):this._context.moveTo(zc,Wb);break;case 1:this._point=2;break;case 2:this._point=3;default:ba(this,zc,Wb)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=
this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=zc;this._y0=this._y1;this._y1=this._y2;this._y2=Wb}};var Ec=function Ub(Wb){function yb(ac){return Wb?new ja(ac,Wb):new U(ac,0)}yb.alpha=function(ac){return Ub(+ac)};return yb}(.5);ma.prototype={areaStart:H,areaEnd:H,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=
this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3);this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3);this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(Wb,Ub){Wb=+Wb;Ub=+Ub;if(this._point){var yb=this._x2-Wb,ac=this._y2-Ub;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(yb*yb+ac*ac,this._alpha))}switch(this._point){case 0:this._point=
1;this._x3=Wb;this._y3=Ub;break;case 1:this._point=2;this._context.moveTo(this._x4=Wb,this._y4=Ub);break;case 2:this._point=3;this._x5=Wb;this._y5=Ub;break;default:ba(this,Wb,Ub)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=Wb;this._y0=this._y1;this._y1=this._y2;this._y2=Ub}};var Qc=function yb(Ub){function ac(Vb){return Ub?new ma(Vb,Ub):new ha(Vb,0)}ac.alpha=function(Vb){return yb(+Vb)};return ac}(.5);
ia.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(Ub,yb){Ub=+Ub;yb=+yb;if(this._point){var ac=this._x2-Ub,Vb=this._y2-yb;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(ac*
ac+Vb*Vb,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ba(this,Ub,yb)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=Ub;this._y0=this._y1;this._y1=this._y2;this._y2=yb}};var Tc=function ac(yb){function Vb(mc){return yb?
new ia(mc,yb):new Y(mc,0)}Vb.alpha=function(mc){return ac(+mc)};return Vb}(.5);oa.prototype={areaStart:H,areaEnd:H,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(yb,ac){yb=+yb;ac=+ac;this._point?this._context.lineTo(yb,ac):(this._point=1,this._context.moveTo(yb,ac))}};ka.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN;this._point=0},
lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:la(this,this._t0,ra(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(yb,ac){var Vb=NaN;yb=+yb;ac=+ac;if(yb!==this._x1||ac!==this._y1){switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(yb,ac):this._context.moveTo(yb,ac);break;case 1:this._point=2;break;case 2:this._point=3;la(this,ra(this,Vb=xa(this,
yb,ac)),Vb);break;default:la(this,this._t0,Vb=xa(this,yb,ac))}this._x0=this._x1;this._x1=yb;this._y0=this._y1;this._y1=ac;this._t0=Vb}}};(na.prototype=Object.create(ka.prototype)).point=function(yb,ac){ka.prototype.point.call(this,ac,yb)};qa.prototype={moveTo:function(yb,ac){this._context.moveTo(ac,yb)},closePath:function(){this._context.closePath()},lineTo:function(yb,ac){this._context.lineTo(ac,yb)},bezierCurveTo:function(yb,ac,Vb,mc,tc,Uc){this._context.bezierCurveTo(ac,yb,mc,Vb,Uc,tc)}};ta.prototype=
{areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[];this._y=[]},lineEnd:function(){var yb=this._x,ac=this._y,Vb=yb.length;if(Vb)if(this._line?this._context.lineTo(yb[0],ac[0]):this._context.moveTo(yb[0],ac[0]),2===Vb)this._context.lineTo(yb[1],ac[1]);else for(var mc=za(yb),tc=za(ac),Uc=0,kd=1;kd<Vb;++Uc,++kd)this._context.bezierCurveTo(mc[0][Uc],tc[0][Uc],mc[1][Uc],tc[1][Uc],yb[kd],ac[kd]);(this._line||0!==this._line&&1===Vb)&&this._context.closePath();
this._line=1-this._line;this._x=this._y=null},point:function(yb,ac){this._x.push(+yb);this._y.push(+ac)}};Ia.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN;this._point=0},lineEnd:function(){0<this._t&&1>this._t&&2===this._point&&this._context.lineTo(this._x,this._y);(this._line||0!==this._line&&1===this._point)&&this._context.closePath();0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(yb,ac){yb=+yb;
ac=+ac;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(yb,ac):this._context.moveTo(yb,ac);break;case 1:this._point=2;default:if(0>=this._t)this._context.lineTo(this._x,ac),this._context.lineTo(yb,ac);else{var Vb=this._x*(1-this._t)+yb*this._t;this._context.lineTo(Vb,this._y);this._context.lineTo(Vb,ac)}}this._x=yb;this._y=ac}};p.arc=function(){function yb(){var yd,Lc=+ac.apply(this,arguments),cd=+Vb.apply(this,arguments),Nc=Uc.apply(this,arguments)-Aa,Xc=kd.apply(this,arguments)-
Aa,Zc=Bb(Xc-Nc),Sc=Xc>Nc;Fd||(Fd=yd=n.path());if(cd<Lc){var id=cd;cd=Lc;Lc=id}if(1E-12<cd)if(Zc>Ka-1E-12)Fd.moveTo(cd*wb(Nc),cd*Ma(Nc)),Fd.arc(0,0,cd,Nc,Xc,!Sc),1E-12<Lc&&(Fd.moveTo(Lc*wb(Xc),Lc*Ma(Xc)),Fd.arc(0,0,Lc,Xc,Nc,Sc));else{var Nd=Nc,Rd=Xc;id=Nc;var Wd=Xc,Se=Zc,Ne=Zc,te=Bd.apply(this,arguments)/2,qf=1E-12<te&&(tc?+tc.apply(this,arguments):La(Lc*Lc+cd*cd)),sf=Ab(Bb(cd-Lc)/2,+mc.apply(this,arguments)),of=sf,vf=sf;if(1E-12<qf){var Bf=m(qf/Lc*Ma(te));te=m(qf/cd*Ma(te));1E-12<(Se-=2*Bf)?(Bf*=
Sc?1:-1,id+=Bf,Wd-=Bf):(Se=0,id=Wd=(Nc+Xc)/2);1E-12<(Ne-=2*te)?(te*=Sc?1:-1,Nd+=te,Rd-=te):(Ne=0,Nd=Rd=(Nc+Xc)/2)}Nc=cd*wb(Nd);Xc=cd*Ma(Nd);Bf=Lc*wb(Wd);te=Lc*Ma(Wd);if(1E-12<sf){var Sd=cd*wb(Rd),De=cd*Ma(Rd),hf=Lc*wb(id),bf=Lc*Ma(id);if(Zc=Zc<ya){var Qe=hf-Nc;Zc=bf-Xc;qf=Bf-Sd;var He=te-De,$e=He*Qe-qf*Zc;1E-12>$e*$e?Qe=void 0:($e=(qf*(Xc-De)-He*(Nc-Sd))/$e,Qe=[Nc+$e*Qe,Xc+$e*Zc]);Zc=Qe}Zc&&(of=Nc-Qe[0],vf=Xc-Qe[1],Zc=Sd-Qe[0],qf=De-Qe[1],of=(of*Zc+vf*qf)/(La(of*of+vf*vf)*La(Zc*Zc+qf*qf)),vf=1/Ma((1<
of?0:-1>of?ya:Math.acos(of))/2),Qe=La(Qe[0]*Qe[0]+Qe[1]*Qe[1]),of=Ab(sf,(Lc-Qe)/(vf-1)),vf=Ab(sf,(cd-Qe)/(vf+1)))}1E-12<Ne?1E-12<vf?(Nd=c(hf,bf,Nc,Xc,cd,vf,Sc),Rd=c(Sd,De,Bf,te,cd,vf,Sc),Fd.moveTo(Nd.cx+Nd.x01,Nd.cy+Nd.y01),vf<sf?Fd.arc(Nd.cx,Nd.cy,vf,ub(Nd.y01,Nd.x01),ub(Rd.y01,Rd.x01),!Sc):(Fd.arc(Nd.cx,Nd.cy,vf,ub(Nd.y01,Nd.x01),ub(Nd.y11,Nd.x11),!Sc),Fd.arc(0,0,cd,ub(Nd.cy+Nd.y11,Nd.cx+Nd.x11),ub(Rd.cy+Rd.y11,Rd.cx+Rd.x11),!Sc),Fd.arc(Rd.cx,Rd.cy,vf,ub(Rd.y11,Rd.x11),ub(Rd.y01,Rd.x01),!Sc))):
(Fd.moveTo(Nc,Xc),Fd.arc(0,0,cd,Nd,Rd,!Sc)):Fd.moveTo(Nc,Xc);1E-12<Lc&&1E-12<Se?1E-12<of?(Nd=c(Bf,te,Sd,De,Lc,-of,Sc),Rd=c(Nc,Xc,hf,bf,Lc,-of,Sc),Fd.lineTo(Nd.cx+Nd.x01,Nd.cy+Nd.y01),of<sf?Fd.arc(Nd.cx,Nd.cy,of,ub(Nd.y01,Nd.x01),ub(Rd.y01,Rd.x01),!Sc):(Fd.arc(Nd.cx,Nd.cy,of,ub(Nd.y01,Nd.x01),ub(Nd.y11,Nd.x11),!Sc),Fd.arc(0,0,Lc,ub(Nd.cy+Nd.y11,Nd.cx+Nd.x11),ub(Rd.cy+Rd.y11,Rd.cx+Rd.x11),Sc),Fd.arc(Rd.cx,Rd.cy,of,ub(Rd.y11,Rd.x11),ub(Rd.y01,Rd.x01),!Sc))):Fd.arc(0,0,Lc,Wd,id,Sc):Fd.lineTo(Bf,te)}else Fd.moveTo(0,
0);Fd.closePath();if(yd)return Fd=null,yd+""||null}var ac=a,Vb=g,mc=k(0),tc=null,Uc=h,kd=r,Bd=l,Fd=null;yb.centroid=function(){var yd=(+ac.apply(this,arguments)+ +Vb.apply(this,arguments))/2,Lc=(+Uc.apply(this,arguments)+ +kd.apply(this,arguments))/2-ya/2;return[wb(Lc)*yd,Ma(Lc)*yd]};yb.innerRadius=function(yd){return arguments.length?(ac="function"===typeof yd?yd:k(+yd),yb):ac};yb.outerRadius=function(yd){return arguments.length?(Vb="function"===typeof yd?yd:k(+yd),yb):Vb};yb.cornerRadius=function(yd){return arguments.length?
(mc="function"===typeof yd?yd:k(+yd),yb):mc};yb.padRadius=function(yd){return arguments.length?(tc=null==yd?null:"function"===typeof yd?yd:k(+yd),yb):tc};yb.startAngle=function(yd){return arguments.length?(Uc="function"===typeof yd?yd:k(+yd),yb):Uc};yb.endAngle=function(yd){return arguments.length?(kd="function"===typeof yd?yd:k(+yd),yb):kd};yb.padAngle=function(yd){return arguments.length?(Bd="function"===typeof yd?yd:k(+yd),yb):Bd};yb.context=function(yd){return arguments.length?(Fd=null==yd?null:
yd,yb):Fd};return yb};p.area=w;p.areaRadial=v;p.curveBasis=function(yb){return new Q(yb)};p.curveBasisClosed=function(yb){return new Z(yb)};p.curveBasisOpen=function(yb){return new ca(yb)};p.curveBundle=fd;p.curveCardinal=kb;p.curveCardinalClosed=Qb;p.curveCardinalOpen=dc;p.curveCatmullRom=Ec;p.curveCatmullRomClosed=Qc;p.curveCatmullRomOpen=Tc;p.curveLinear=e;p.curveLinearClosed=function(yb){return new oa(yb)};p.curveMonotoneX=function(yb){return new ka(yb)};p.curveMonotoneY=function(yb){return new na(yb)};
p.curveNatural=function(yb){return new ta(yb)};p.curveStep=function(yb){return new Ia(yb,.5)};p.curveStepAfter=function(yb){return new Ia(yb,1)};p.curveStepBefore=function(yb){return new Ia(yb,0)};p.line=t;p.lineRadial=C;p.linkHorizontal=function(){return K(O)};p.linkRadial=function(){var yb=K(L);yb.angle=yb.x;delete yb.x;yb.radius=yb.y;delete yb.y;return yb};p.linkVertical=function(){return K(I)};p.pie=function(){function yb(Bd){var Fd,yd=Bd.length;var Lc=0;var cd=Array(yd),Nc=Array(yd),Xc=+tc.apply(this,
arguments);var Zc=Math.min(Ka,Math.max(-Ka,Uc.apply(this,arguments)-Xc));var Sc=Math.min(Math.abs(Zc)/yd,kd.apply(this,arguments)),id=Sc*(0>Zc?-1:1),Nd;for(Fd=0;Fd<yd;++Fd)0<(Nd=Nc[cd[Fd]=Fd]=+ac(Bd[Fd],Fd,Bd))&&(Lc+=Nd);null!=Vb?cd.sort(function(Wd,Se){return Vb(Nc[Wd],Nc[Se])}):null!=mc&&cd.sort(function(Wd,Se){return mc(Bd[Wd],Bd[Se])});Fd=0;for(Zc=Lc?(Zc-yd*id)/Lc:0;Fd<yd;++Fd,Xc=Rd){Lc=cd[Fd];Nd=Nc[Lc];var Rd=Xc+(0<Nd?Nd*Zc:0)+id;Nc[Lc]={data:Bd[Lc],index:Fd,value:Nd,startAngle:Xc,endAngle:Rd,
padAngle:Sc}}return Nc}var ac=z,Vb=x,mc=null,tc=k(0),Uc=k(Ka),kd=k(0);yb.value=function(Bd){return arguments.length?(ac="function"===typeof Bd?Bd:k(+Bd),yb):ac};yb.sortValues=function(Bd){return arguments.length?(Vb=Bd,mc=null,yb):Vb};yb.sort=function(Bd){return arguments.length?(mc=Bd,Vb=null,yb):mc};yb.startAngle=function(Bd){return arguments.length?(tc="function"===typeof Bd?Bd:k(+Bd),yb):tc};yb.endAngle=function(Bd){return arguments.length?(Uc="function"===typeof Bd?Bd:k(+Bd),yb):Uc};yb.padAngle=
function(Bd){return arguments.length?(kd="function"===typeof Bd?Bd:k(+Bd),yb):kd};return yb};p.pointRadial=y;p.radialArea=v;p.radialLine=C;p.stack=function(){function yb(Uc){var kd=ac.apply(this,arguments),Bd,Fd=Uc.length,yd=kd.length,Lc=Array(yd);for(Bd=0;Bd<yd;++Bd){for(var cd=kd[Bd],Nc=Lc[Bd]=Array(Fd),Xc=0,Zc;Xc<Fd;++Xc)Nc[Xc]=Zc=[0,+tc(Uc[Xc],cd,Xc,Uc)],Zc.data=Uc[Xc];Nc.key=cd}Bd=0;for(kd=Vb(Lc);Bd<yd;++Bd)Lc[kd[Bd]].index=Bd;mc(Lc,kd);return Lc}var ac=k([]),Vb=$a,mc=Xa,tc=gb;yb.keys=function(Uc){return arguments.length?
(ac="function"===typeof Uc?Uc:k(bb.call(Uc)),yb):ac};yb.value=function(Uc){return arguments.length?(tc="function"===typeof Uc?Uc:k(+Uc),yb):tc};yb.order=function(Uc){return arguments.length?(Vb=null==Uc?$a:"function"===typeof Uc?Uc:k(bb.call(Uc)),yb):Vb};yb.offset=function(Uc){return arguments.length?(mc=null==Uc?Xa:Uc,yb):mc};return yb};p.stackOffsetDiverging=function(yb,ac){if(0<(Fd=yb.length))for(var Vb,mc=0,tc,Uc,kd,Bd,Fd,yd=yb[ac[0]].length;mc<yd;++mc)for(Vb=kd=Bd=0;Vb<Fd;++Vb)0<(Uc=(tc=yb[ac[Vb]][mc])[1]-
tc[0])?(tc[0]=kd,tc[1]=kd+=Uc):0>Uc?(tc[1]=Bd,tc[0]=Bd+=Uc):(tc[0]=0,tc[1]=Uc)};p.stackOffsetExpand=function(yb,ac){if(0<(mc=yb.length)){for(var Vb,mc,tc=0,Uc=yb[0].length,kd;tc<Uc;++tc){for(kd=Vb=0;Vb<mc;++Vb)kd+=yb[Vb][tc][1]||0;if(kd)for(Vb=0;Vb<mc;++Vb)yb[Vb][tc][1]/=kd}Xa(yb,ac)}};p.stackOffsetNone=Xa;p.stackOffsetSilhouette=function(yb,ac){if(0<(tc=yb.length)){for(var Vb=0,mc=yb[ac[0]],tc,Uc=mc.length;Vb<Uc;++Vb){for(var kd=0,Bd=0;kd<tc;++kd)Bd+=yb[kd][Vb][1]||0;mc[Vb][1]+=mc[Vb][0]=-Bd/2}Xa(yb,
ac)}};p.stackOffsetWiggle=function(yb,ac){if(0<(kd=yb.length)&&0<(Uc=(tc=yb[ac[0]]).length)){for(var Vb=0,mc=1,tc,Uc,kd;mc<Uc;++mc){for(var Bd=0,Fd=0,yd=0;Bd<kd;++Bd){var Lc=yb[ac[Bd]],cd=Lc[mc][1]||0;Lc=(cd-(Lc[mc-1][1]||0))/2;for(var Nc=0;Nc<Bd;++Nc){var Xc=yb[ac[Nc]];Lc+=(Xc[mc][1]||0)-(Xc[mc-1][1]||0)}Fd+=cd;yd+=Lc*cd}tc[mc-1][1]+=tc[mc-1][0]=Vb;Fd&&(Vb-=yd/Fd)}tc[mc-1][1]+=tc[mc-1][0]=Vb;Xa(yb,ac)}};p.stackOrderAppearance=sb;p.stackOrderAscending=vb;p.stackOrderDescending=function(yb){return vb(yb).reverse()};
p.stackOrderInsideOut=function(yb){var ac=yb.length,Vb=yb.map(qb),mc=sb(yb),tc=0,Uc=0,kd=[],Bd=[];for(yb=0;yb<ac;++yb){var Fd=mc[yb];tc<Uc?(tc+=Vb[Fd],kd.push(Fd)):(Uc+=Vb[Fd],Bd.push(Fd))}return Bd.reverse().concat(kd)};p.stackOrderNone=$a;p.stackOrderReverse=function(yb){return $a(yb).reverse()};p.symbol=function(){function yb(){var tc;mc||(mc=tc=n.path());ac.apply(this,arguments).draw(mc,+Vb.apply(this,arguments));if(tc)return mc=null,tc+""||null}var ac=k(cb),Vb=k(64),mc=null;yb.type=function(tc){return arguments.length?
(ac="function"===typeof tc?tc:k(tc),yb):ac};yb.size=function(tc){return arguments.length?(Vb="function"===typeof tc?tc:k(+tc),yb):Vb};yb.context=function(tc){return arguments.length?(mc=null==tc?null:tc,yb):mc};return yb};p.symbolCircle=cb;p.symbolCross=Eb;p.symbolDiamond=pb;p.symbolSquare=Ic;p.symbolStar=Db;p.symbolTriangle=Pa;p.symbolWye=cc;p.symbols=uc;Object.defineProperty(p,"__esModule",{value:!0})})},{"d3-path":172}],175:[function(b,N,G){(function(p,n){"object"===typeof G&&"undefined"!==typeof N?
n(G,b("d3-time")):(p=p||self,n(p.d3=p.d3||{},p.d3))})(this,function(p,n){function k(pb){if(0<=pb.y&&100>pb.y){var Db=new Date(-1,pb.m,pb.d,pb.H,pb.M,pb.S,pb.L);Db.setFullYear(pb.y);return Db}return new Date(pb.y,pb.m,pb.d,pb.H,pb.M,pb.S,pb.L)}function m(pb){if(0<=pb.y&&100>pb.y){var Db=new Date(Date.UTC(-1,pb.m,pb.d,pb.H,pb.M,pb.S,pb.L));Db.setUTCFullYear(pb.y);return Db}return new Date(Date.UTC(pb.y,pb.m,pb.d,pb.H,pb.M,pb.S,pb.L))}function a(pb,Db,Rb){return{y:pb,m:Db,d:Rb,H:0,M:0,S:0,L:0}}function g(pb){function Db(Ub,
yb){return function(ac){var Vb=[],mc=-1,tc=0,Uc=Ub.length,kd,Bd;for(ac instanceof Date||(ac=new Date(+ac));++mc<Uc;)if(37===Ub.charCodeAt(mc)){Vb.push(Ub.slice(tc,mc));null!=(tc=Ka[kd=Ub.charAt(++mc)])?kd=Ub.charAt(++mc):tc="e"===kd?" ":"0";if(Bd=yb[kd])kd=Bd(ac,tc);Vb.push(kd);tc=mc+1}Vb.push(Ub.slice(tc,mc));return Vb.join("")}}function Rb(Ub,yb){return function(ac){var Vb=a(1900,void 0,1);if(xc(Vb,Ub,ac+="",0)!=ac.length)return null;if("Q"in Vb)return new Date(Vb.Q);if("s"in Vb)return new Date(1E3*
Vb.s+("L"in Vb?Vb.L:0));!yb||"Z"in Vb||(Vb.Z=0);"p"in Vb&&(Vb.H=Vb.H%12+12*Vb.p);void 0===Vb.m&&(Vb.m="q"in Vb?Vb.q:0);if("V"in Vb){if(1>Vb.V||53<Vb.V)return null;"w"in Vb||(Vb.w=1);if("Z"in Vb){ac=m(a(Vb.y,0,1));var mc=ac.getUTCDay();ac=4<mc||0===mc?n.utcMonday.ceil(ac):n.utcMonday(ac);ac=n.utcDay.offset(ac,7*(Vb.V-1));Vb.y=ac.getUTCFullYear();Vb.m=ac.getUTCMonth();Vb.d=ac.getUTCDate()+(Vb.w+6)%7}else ac=k(a(Vb.y,0,1)),mc=ac.getDay(),ac=4<mc||0===mc?n.timeMonday.ceil(ac):n.timeMonday(ac),ac=n.timeDay.offset(ac,
7*(Vb.V-1)),Vb.y=ac.getFullYear(),Vb.m=ac.getMonth(),Vb.d=ac.getDate()+(Vb.w+6)%7}else if("W"in Vb||"U"in Vb)"w"in Vb||(Vb.w="u"in Vb?Vb.u%7:"W"in Vb?1:0),mc="Z"in Vb?m(a(Vb.y,0,1)).getUTCDay():k(a(Vb.y,0,1)).getDay(),Vb.m=0,Vb.d="W"in Vb?(Vb.w+6)%7+7*Vb.W-(mc+5)%7:Vb.w+7*Vb.U-(mc+6)%7;return"Z"in Vb?(Vb.H+=Vb.Z/100|0,Vb.M+=Vb.Z%100,m(Vb)):k(Vb)}}function xc(Ub,yb,ac,Vb){for(var mc=0,tc=yb.length,Uc=ac.length,kd;mc<tc;){if(Vb>=Uc)return-1;kd=yb.charCodeAt(mc++);if(37===kd){if(kd=yb.charAt(mc++),kd=
Wb[kd in Ka?yb.charAt(mc++):kd],!kd||0>(Vb=kd(Ub,ac,Vb)))return-1}else if(kd!=ac.charCodeAt(Vb++))return-1}return Vb}var Ic=pb.dateTime,Ja=pb.date,Pa=pb.time,db=pb.periods,Jb=pb.days,Gb=pb.shortDays,cc=pb.months,uc=pb.shortMonths,fd=l(db),kb=c(db),Qb=l(Jb),dc=c(Jb),Ec=l(Gb),Qc=c(Gb),Tc=l(cc),tb=c(cc),Ib=l(uc),sc=c(uc),pc={a:function(Ub){return Gb[Ub.getDay()]},A:function(Ub){return Jb[Ub.getDay()]},b:function(Ub){return uc[Ub.getMonth()]},B:function(Ub){return cc[Ub.getMonth()]},c:null,d:H,e:H,f:W,
H:M,I:Q,j:Z,L:ca,m:T,M:U,p:function(Ub){return db[+(12<=Ub.getHours())]},q:function(Ub){return 1+~~(Ub.getMonth()/3)},Q:Ab,s:Ma,S:ha,u:Y,U:ba,V:ja,w:ma,W:ia,x:null,X:null,y:oa,Y:xa,Z:ra,"%":rb},zc={a:function(Ub){return Gb[Ub.getUTCDay()]},A:function(Ub){return Jb[Ub.getUTCDay()]},b:function(Ub){return uc[Ub.getUTCMonth()]},B:function(Ub){return cc[Ub.getUTCMonth()]},c:null,d:la,e:la,f:za,H:ka,I:na,j:qa,L:ta,m:Ia,M:Xa,p:function(Ub){return db[+(12<=Ub.getUTCHours())]},q:function(Ub){return 1+~~(Ub.getUTCMonth()/
3)},Q:Ab,s:Ma,S:$a,u:gb,U:sb,V:jb,w:vb,W:qb,x:null,X:null,y:Bb,Y:ub,Z:wb,"%":rb},Wb={a:function(Ub,yb,ac){return(yb=Ec.exec(yb.slice(ac)))?(Ub.w=Qc[yb[0].toLowerCase()],ac+yb[0].length):-1},A:function(Ub,yb,ac){return(yb=Qb.exec(yb.slice(ac)))?(Ub.w=dc[yb[0].toLowerCase()],ac+yb[0].length):-1},b:function(Ub,yb,ac){return(yb=Ib.exec(yb.slice(ac)))?(Ub.m=sc[yb[0].toLowerCase()],ac+yb[0].length):-1},B:function(Ub,yb,ac){return(yb=Tc.exec(yb.slice(ac)))?(Ub.m=tb[yb[0].toLowerCase()],ac+yb[0].length):
-1},c:function(Ub,yb,ac){return xc(Ub,Ic,yb,ac)},d:D,e:D,f:K,H:v,I:v,j:C,L:J,m:A,M:y,p:function(Ub,yb,ac){return(yb=fd.exec(yb.slice(ac)))?(Ub.p=kb[yb[0].toLowerCase()],ac+yb[0].length):-1},q:B,Q:I,s:L,S:F,u:e,U:f,V:q,w:d,W:t,x:function(Ub,yb,ac){return xc(Ub,Ja,yb,ac)},X:function(Ub,yb,ac){return xc(Ub,Pa,yb,ac)},y:x,Y:w,Z:z,"%":O};pc.x=Db(Ja,pc);pc.X=Db(Pa,pc);pc.c=Db(Ic,pc);zc.x=Db(Ja,zc);zc.X=Db(Pa,zc);zc.c=Db(Ic,zc);return{format:function(Ub){var yb=Db(Ub+="",pc);yb.toString=function(){return Ub};
return yb},parse:function(Ub){var yb=Rb(Ub+="",!1);yb.toString=function(){return Ub};return yb},utcFormat:function(Ub){var yb=Db(Ub+="",zc);yb.toString=function(){return Ub};return yb},utcParse:function(Ub){var yb=Rb(Ub+="",!0);yb.toString=function(){return Ub};return yb}}}function h(pb,Db,Rb){var xc=0>pb?"-":"";pb=(xc?-pb:pb)+"";var Ic=pb.length;return xc+(Ic<Rb?Array(Rb-Ic+1).join(Db)+pb:pb)}function r(pb){return pb.replace(cb,"\\$\x26")}function l(pb){return new RegExp("^(?:"+pb.map(r).join("|")+
")","i")}function c(pb){for(var Db={},Rb=-1,xc=pb.length;++Rb<xc;)Db[pb[Rb].toLowerCase()]=Rb;return Db}function d(pb,Db,Rb){return(Db=Ta.exec(Db.slice(Rb,Rb+1)))?(pb.w=+Db[0],Rb+Db[0].length):-1}function e(pb,Db,Rb){return(Db=Ta.exec(Db.slice(Rb,Rb+1)))?(pb.u=+Db[0],Rb+Db[0].length):-1}function f(pb,Db,Rb){return(Db=Ta.exec(Db.slice(Rb,Rb+2)))?(pb.U=+Db[0],Rb+Db[0].length):-1}function q(pb,Db,Rb){return(Db=Ta.exec(Db.slice(Rb,Rb+2)))?(pb.V=+Db[0],Rb+Db[0].length):-1}function t(pb,Db,Rb){return(Db=
Ta.exec(Db.slice(Rb,Rb+2)))?(pb.W=+Db[0],Rb+Db[0].length):-1}function w(pb,Db,Rb){return(Db=Ta.exec(Db.slice(Rb,Rb+4)))?(pb.y=+Db[0],Rb+Db[0].length):-1}function x(pb,Db,Rb){return(Db=Ta.exec(Db.slice(Rb,Rb+2)))?(pb.y=+Db[0]+(68<+Db[0]?1900:2E3),Rb+Db[0].length):-1}function z(pb,Db,Rb){return(Db=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(Db.slice(Rb,Rb+6)))?(pb.Z=Db[1]?0:-(Db[2]+(Db[3]||"00")),Rb+Db[0].length):-1}function B(pb,Db,Rb){return(Db=Ta.exec(Db.slice(Rb,Rb+1)))?(pb.q=3*Db[0]-3,Rb+Db[0].length):
-1}function A(pb,Db,Rb){return(Db=Ta.exec(Db.slice(Rb,Rb+2)))?(pb.m=Db[0]-1,Rb+Db[0].length):-1}function D(pb,Db,Rb){return(Db=Ta.exec(Db.slice(Rb,Rb+2)))?(pb.d=+Db[0],Rb+Db[0].length):-1}function C(pb,Db,Rb){return(Db=Ta.exec(Db.slice(Rb,Rb+3)))?(pb.m=0,pb.d=+Db[0],Rb+Db[0].length):-1}function v(pb,Db,Rb){return(Db=Ta.exec(Db.slice(Rb,Rb+2)))?(pb.H=+Db[0],Rb+Db[0].length):-1}function y(pb,Db,Rb){return(Db=Ta.exec(Db.slice(Rb,Rb+2)))?(pb.M=+Db[0],Rb+Db[0].length):-1}function F(pb,Db,Rb){return(Db=
Ta.exec(Db.slice(Rb,Rb+2)))?(pb.S=+Db[0],Rb+Db[0].length):-1}function J(pb,Db,Rb){return(Db=Ta.exec(Db.slice(Rb,Rb+3)))?(pb.L=+Db[0],Rb+Db[0].length):-1}function K(pb,Db,Rb){return(Db=Ta.exec(Db.slice(Rb,Rb+6)))?(pb.L=Math.floor(Db[0]/1E3),Rb+Db[0].length):-1}function O(pb,Db,Rb){return(pb=bb.exec(Db.slice(Rb,Rb+1)))?Rb+pb[0].length:-1}function I(pb,Db,Rb){return(Db=Ta.exec(Db.slice(Rb)))?(pb.Q=+Db[0],Rb+Db[0].length):-1}function L(pb,Db,Rb){return(Db=Ta.exec(Db.slice(Rb)))?(pb.s=+Db[0],Rb+Db[0].length):
-1}function H(pb,Db){return h(pb.getDate(),Db,2)}function M(pb,Db){return h(pb.getHours(),Db,2)}function Q(pb,Db){return h(pb.getHours()%12||12,Db,2)}function Z(pb,Db){return h(1+n.timeDay.count(n.timeYear(pb),pb),Db,3)}function ca(pb,Db){return h(pb.getMilliseconds(),Db,3)}function W(pb,Db){return ca(pb,Db)+"000"}function T(pb,Db){return h(pb.getMonth()+1,Db,2)}function U(pb,Db){return h(pb.getMinutes(),Db,2)}function ha(pb,Db){return h(pb.getSeconds(),Db,2)}function Y(pb){pb=pb.getDay();return 0===
pb?7:pb}function ba(pb,Db){return h(n.timeSunday.count(n.timeYear(pb)-1,pb),Db,2)}function ja(pb,Db){var Rb=pb.getDay();pb=4<=Rb||0===Rb?n.timeThursday(pb):n.timeThursday.ceil(pb);return h(n.timeThursday.count(n.timeYear(pb),pb)+(4===n.timeYear(pb).getDay()),Db,2)}function ma(pb){return pb.getDay()}function ia(pb,Db){return h(n.timeMonday.count(n.timeYear(pb)-1,pb),Db,2)}function oa(pb,Db){return h(pb.getFullYear()%100,Db,2)}function xa(pb,Db){return h(pb.getFullYear()%1E4,Db,4)}function ra(pb){pb=
pb.getTimezoneOffset();return(0<pb?"-":(pb*=-1,"+"))+h(pb/60|0,"0",2)+h(pb%60,"0",2)}function la(pb,Db){return h(pb.getUTCDate(),Db,2)}function ka(pb,Db){return h(pb.getUTCHours(),Db,2)}function na(pb,Db){return h(pb.getUTCHours()%12||12,Db,2)}function qa(pb,Db){return h(1+n.utcDay.count(n.utcYear(pb),pb),Db,3)}function ta(pb,Db){return h(pb.getUTCMilliseconds(),Db,3)}function za(pb,Db){return ta(pb,Db)+"000"}function Ia(pb,Db){return h(pb.getUTCMonth()+1,Db,2)}function Xa(pb,Db){return h(pb.getUTCMinutes(),
Db,2)}function $a(pb,Db){return h(pb.getUTCSeconds(),Db,2)}function gb(pb){pb=pb.getUTCDay();return 0===pb?7:pb}function sb(pb,Db){return h(n.utcSunday.count(n.utcYear(pb)-1,pb),Db,2)}function jb(pb,Db){var Rb=pb.getUTCDay();pb=4<=Rb||0===Rb?n.utcThursday(pb):n.utcThursday.ceil(pb);return h(n.utcThursday.count(n.utcYear(pb),pb)+(4===n.utcYear(pb).getUTCDay()),Db,2)}function vb(pb){return pb.getUTCDay()}function qb(pb,Db){return h(n.utcMonday.count(n.utcYear(pb)-1,pb),Db,2)}function Bb(pb,Db){return h(pb.getUTCFullYear()%
100,Db,2)}function ub(pb,Db){return h(pb.getUTCFullYear()%1E4,Db,4)}function wb(){return"+0000"}function rb(){return"%"}function Ab(pb){return+pb}function Ma(pb){return Math.floor(+pb/1E3)}function La(pb){Eb=g(pb);p.timeFormat=Eb.format;p.timeParse=Eb.parse;p.utcFormat=Eb.utcFormat;p.utcParse=Eb.utcParse;return Eb}function ya(pb){return pb.toISOString()}function Aa(pb){pb=new Date(pb);return isNaN(pb)?null:pb}var Ka={"-":"",_:" ",0:"0"},Ta=/^\s*\d+/,bb=/^%/,cb=/[\\^$*+?|[\]().{}]/g,Eb;La({dateTime:"%x, %X",
date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});var Pb=Date.prototype.toISOString?ya:p.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),fc=+new Date("2000-01-01T00:00:00.000Z")?Aa:p.utcParse("%Y-%m-%dT%H:%M:%S.%LZ");
p.isoFormat=Pb;p.isoParse=fc;p.timeFormatDefaultLocale=La;p.timeFormatLocale=g;Object.defineProperty(p,"__esModule",{value:!0})})},{"d3-time":176}],176:[function(b,N,G){(function(p,n){"object"===typeof G&&"undefined"!==typeof N?n(G):(p=p||self,n(p.d3=p.d3||{}))})(this,function(p){function n(jb,vb,qb,Bb){function ub(wb){return jb(wb=0===arguments.length?new Date:new Date(+wb)),wb}ub.floor=function(wb){return jb(wb=new Date(+wb)),wb};ub.ceil=function(wb){return jb(wb=new Date(wb-1)),vb(wb,1),jb(wb),
wb};ub.round=function(wb){var rb=ub(wb),Ab=ub.ceil(wb);return wb-rb<Ab-wb?rb:Ab};ub.offset=function(wb,rb){return vb(wb=new Date(+wb),null==rb?1:Math.floor(rb)),wb};ub.range=function(wb,rb,Ab){var Ma=[],La;wb=ub.ceil(wb);Ab=null==Ab?1:Math.floor(Ab);if(!(wb<rb&&0<Ab))return Ma;do Ma.push(La=new Date(+wb)),vb(wb,Ab),jb(wb);while(La<wb&&wb<rb);return Ma};ub.filter=function(wb){return n(function(rb){if(rb>=rb)for(;jb(rb),!wb(rb);)rb.setTime(rb-1)},function(rb,Ab){if(rb>=rb)if(0>Ab)for(;0>=++Ab;)for(;vb(rb,
-1),!wb(rb););else for(;0<=--Ab;)for(;vb(rb,1),!wb(rb););})};qb&&(ub.count=function(wb,rb){a.setTime(+wb);g.setTime(+rb);jb(a);jb(g);return Math.floor(qb(a,g))},ub.every=function(wb){wb=Math.floor(wb);return isFinite(wb)&&0<wb?1<wb?ub.filter(Bb?function(rb){return 0===Bb(rb)%wb}:function(rb){return 0===ub.count(0,rb)%wb}):ub:null});return ub}function k(jb){return n(function(vb){vb.setDate(vb.getDate()-(vb.getDay()+7-jb)%7);vb.setHours(0,0,0,0)},function(vb,qb){vb.setDate(vb.getDate()+7*qb)},function(vb,
qb){return(qb-vb-6E4*(qb.getTimezoneOffset()-vb.getTimezoneOffset()))/6048E5})}function m(jb){return n(function(vb){vb.setUTCDate(vb.getUTCDate()-(vb.getUTCDay()+7-jb)%7);vb.setUTCHours(0,0,0,0)},function(vb,qb){vb.setUTCDate(vb.getUTCDate()+7*qb)},function(vb,qb){return(qb-vb)/6048E5})}var a=new Date,g=new Date,h=n(function(){},function(jb,vb){jb.setTime(+jb+vb)},function(jb,vb){return vb-jb});h.every=function(jb){jb=Math.floor(jb);return isFinite(jb)&&0<jb?1<jb?n(function(vb){vb.setTime(Math.floor(vb/
jb)*jb)},function(vb,qb){vb.setTime(+vb+qb*jb)},function(vb,qb){return(qb-vb)/jb}):h:null};var r=h.range,l=n(function(jb){jb.setTime(jb-jb.getMilliseconds())},function(jb,vb){jb.setTime(+jb+1E3*vb)},function(jb,vb){return(vb-jb)/1E3},function(jb){return jb.getUTCSeconds()}),c=l.range,d=n(function(jb){jb.setTime(jb-jb.getMilliseconds()-1E3*jb.getSeconds())},function(jb,vb){jb.setTime(+jb+6E4*vb)},function(jb,vb){return(vb-jb)/6E4},function(jb){return jb.getMinutes()}),e=d.range,f=n(function(jb){jb.setTime(jb-
jb.getMilliseconds()-1E3*jb.getSeconds()-6E4*jb.getMinutes())},function(jb,vb){jb.setTime(+jb+36E5*vb)},function(jb,vb){return(vb-jb)/36E5},function(jb){return jb.getHours()}),q=f.range,t=n(function(jb){jb.setHours(0,0,0,0)},function(jb,vb){jb.setDate(jb.getDate()+vb)},function(jb,vb){return(vb-jb-6E4*(vb.getTimezoneOffset()-jb.getTimezoneOffset()))/864E5},function(jb){return jb.getDate()-1}),w=t.range,x=k(0),z=k(1),B=k(2),A=k(3),D=k(4),C=k(5),v=k(6),y=x.range,F=z.range,J=B.range,K=A.range,O=D.range,
I=C.range,L=v.range,H=n(function(jb){jb.setDate(1);jb.setHours(0,0,0,0)},function(jb,vb){jb.setMonth(jb.getMonth()+vb)},function(jb,vb){return vb.getMonth()-jb.getMonth()+12*(vb.getFullYear()-jb.getFullYear())},function(jb){return jb.getMonth()}),M=H.range,Q=n(function(jb){jb.setMonth(0,1);jb.setHours(0,0,0,0)},function(jb,vb){jb.setFullYear(jb.getFullYear()+vb)},function(jb,vb){return vb.getFullYear()-jb.getFullYear()},function(jb){return jb.getFullYear()});Q.every=function(jb){return isFinite(jb=
Math.floor(jb))&&0<jb?n(function(vb){vb.setFullYear(Math.floor(vb.getFullYear()/jb)*jb);vb.setMonth(0,1);vb.setHours(0,0,0,0)},function(vb,qb){vb.setFullYear(vb.getFullYear()+qb*jb)}):null};var Z=Q.range,ca=n(function(jb){jb.setUTCSeconds(0,0)},function(jb,vb){jb.setTime(+jb+6E4*vb)},function(jb,vb){return(vb-jb)/6E4},function(jb){return jb.getUTCMinutes()}),W=ca.range,T=n(function(jb){jb.setUTCMinutes(0,0,0)},function(jb,vb){jb.setTime(+jb+36E5*vb)},function(jb,vb){return(vb-jb)/36E5},function(jb){return jb.getUTCHours()}),
U=T.range,ha=n(function(jb){jb.setUTCHours(0,0,0,0)},function(jb,vb){jb.setUTCDate(jb.getUTCDate()+vb)},function(jb,vb){return(vb-jb)/864E5},function(jb){return jb.getUTCDate()-1}),Y=ha.range,ba=m(0),ja=m(1),ma=m(2),ia=m(3),oa=m(4),xa=m(5),ra=m(6),la=ba.range,ka=ja.range,na=ma.range,qa=ia.range,ta=oa.range,za=xa.range,Ia=ra.range,Xa=n(function(jb){jb.setUTCDate(1);jb.setUTCHours(0,0,0,0)},function(jb,vb){jb.setUTCMonth(jb.getUTCMonth()+vb)},function(jb,vb){return vb.getUTCMonth()-jb.getUTCMonth()+
12*(vb.getUTCFullYear()-jb.getUTCFullYear())},function(jb){return jb.getUTCMonth()}),$a=Xa.range,gb=n(function(jb){jb.setUTCMonth(0,1);jb.setUTCHours(0,0,0,0)},function(jb,vb){jb.setUTCFullYear(jb.getUTCFullYear()+vb)},function(jb,vb){return vb.getUTCFullYear()-jb.getUTCFullYear()},function(jb){return jb.getUTCFullYear()});gb.every=function(jb){return isFinite(jb=Math.floor(jb))&&0<jb?n(function(vb){vb.setUTCFullYear(Math.floor(vb.getUTCFullYear()/jb)*jb);vb.setUTCMonth(0,1);vb.setUTCHours(0,0,0,
0)},function(vb,qb){vb.setUTCFullYear(vb.getUTCFullYear()+qb*jb)}):null};var sb=gb.range;p.timeDay=t;p.timeDays=w;p.timeFriday=C;p.timeFridays=I;p.timeHour=f;p.timeHours=q;p.timeInterval=n;p.timeMillisecond=h;p.timeMilliseconds=r;p.timeMinute=d;p.timeMinutes=e;p.timeMonday=z;p.timeMondays=F;p.timeMonth=H;p.timeMonths=M;p.timeSaturday=v;p.timeSaturdays=L;p.timeSecond=l;p.timeSeconds=c;p.timeSunday=x;p.timeSundays=y;p.timeThursday=D;p.timeThursdays=O;p.timeTuesday=B;p.timeTuesdays=J;p.timeWednesday=
A;p.timeWednesdays=K;p.timeWeek=x;p.timeWeeks=y;p.timeYear=Q;p.timeYears=Z;p.utcDay=ha;p.utcDays=Y;p.utcFriday=xa;p.utcFridays=za;p.utcHour=T;p.utcHours=U;p.utcMillisecond=h;p.utcMilliseconds=r;p.utcMinute=ca;p.utcMinutes=W;p.utcMonday=ja;p.utcMondays=ka;p.utcMonth=Xa;p.utcMonths=$a;p.utcSaturday=ra;p.utcSaturdays=Ia;p.utcSecond=l;p.utcSeconds=c;p.utcSunday=ba;p.utcSundays=la;p.utcThursday=oa;p.utcThursdays=ta;p.utcTuesday=ma;p.utcTuesdays=na;p.utcWednesday=ia;p.utcWednesdays=qa;p.utcWeek=ba;p.utcWeeks=
la;p.utcYear=gb;p.utcYears=sb;Object.defineProperty(p,"__esModule",{value:!0})})},{}],177:[function(b,N,G){arguments[4][176][0].apply(G,arguments)},{dup:176}],178:[function(b,N,G){(function(p,n){"object"===typeof G&&"undefined"!==typeof N?n(G):(p=p||self,n(p.d3=p.d3||{}))})(this,function(p){function n(){return w||(B(k),w=z.now()+x)}function k(){w=0}function m(){this._call=this._time=this._next=null}function a(A,D,C){var v=new m;v.restart(A,D,C);return v}function g(){n();++c;for(var A=f,D;A;)0<=(D=
w-A._time)&&A._call.call(null,D),A=A._next;--c}function h(){w=(t=z.now())+x;c=d=0;try{g()}finally{c=0;for(var A,D=f,C,v=Infinity;D;)D._call?(v>D._time&&(v=D._time),A=D,D=D._next):(C=D._next,D._next=null,D=A?A._next=C:f=C);q=A;l(v);w=0}}function r(){var A=z.now(),D=A-t;1E3<D&&(x-=D,t=A)}function l(A){c||(d&&(d=clearTimeout(d)),24<A-w?(Infinity>A&&(d=setTimeout(h,A-z.now()-x)),e&&(e=clearInterval(e))):(e||(t=z.now(),e=setInterval(r,1E3)),c=1,B(h)))}var c=0,d=0,e=0,f,q,t=0,w=0,x=0,z="object"===typeof performance&&
performance.now?performance:Date,B="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(A){setTimeout(A,17)};m.prototype=a.prototype={constructor:m,restart:function(A,D,C){if("function"!==typeof A)throw new TypeError("callback is not a function");C=(null==C?n():+C)+(null==D?0:+D);this._next||q===this||(q?q._next=this:f=this,q=this);this._call=A;this._time=C;l()},stop:function(){this._call&&(this._call=null,this._time=Infinity,l())}};p.interval=
function(A,D,C){var v=new m,y=D;if(null==D)return v.restart(A,D,C),v;D=+D;C=null==C?n():+C;v.restart(function K(J){J+=y;v.restart(K,y+=D,C);A(J)},D,C);return v};p.now=n;p.timeout=function(A,D,C){var v=new m;D=null==D?0:+D;v.restart(function(y){v.stop();A(y+D)},D,C);return v};p.timer=a;p.timerFlush=g;Object.defineProperty(p,"__esModule",{value:!0})})},{}],179:[function(b,N,G){N.exports=function(){for(var p=0;p<arguments.length;p++)if(void 0!==arguments[p])return arguments[p]}},{}],180:[function(b,
N,G){function p(g,h){this.point=g;this.index=h}function n(g,h){g=g.point;h=h.point;for(var r=g.length,l=0;l<r;++l){var c=h[l]-g[l];if(c)return c}return 0}function k(g,h,r){if(1===g)return r?[[-1,0]]:[];h=h.map(function(d,e){return[d[0],e]});h.sort(function(d,e){return d[0]-e[0]});for(var l=Array(g-1),c=1;c<g;++c)l[c-1]=[h[c-1][1],h[c][1]];r&&l.push([-1,l[0][1]],[l[g-1][1],-1]);return l}var m=b("incremental-convex-hull"),a=b("uniq");N.exports=function(g,h){var r=g.length;if(0===r)return[];var l=g[0].length;
if(1>l)return[];if(1===l)return k(r,g,h);for(var c=Array(r),d=1,e=0;e<r;++e){for(var f=g[e],q=Array(l+1),t=0,w=0;w<l;++w){var x=f[w];q[w]=x;t+=x*x}q[l]=t;c[e]=new p(q,e);d=Math.max(t,d)}a(c,n);r=c.length;g=Array(r+l+1);var z=Array(r+l+1);f=Array(l+1);for(e=0;e<=l;++e)f[e]=0;f[l]=(l+1)*(l+1)*d;g[0]=f.slice();z[0]=-1;for(e=0;e<=l;++e)q=f.slice(),q[e]=1,g[e+1]=q,z[e+1]=-1;for(e=0;e<r;++e)d=c[e],g[e+l+1]=d.point,z[e+l+1]=d.index;r=m(g,!1);r=h?r.filter(function(B){for(var A=0,D=0;D<=l;++D){var C=z[B[D]];
if(0>C&&2<=++A)return!1;B[D]=C}return!0}):r.filter(function(B){for(var A=0;A<=l;++A){var D=z[B[A]];if(0>D)return!1;B[A]=D}return!0});if(l&1)for(e=0;e<r.length;++e)d=r[e],q=d[0],d[0]=d[1],d[1]=q;return r}},{"incremental-convex-hull":446,uniq:619}],181:[function(b,N,G){function p(a,g){Array.isArray(a)&&(a=a.join(", "));var h={},r=16,l=.05;if(g)if(2===g.length&&"number"===typeof g[0])var c=n(g);else Array.isArray(g)?c=g:(g.o?c=n(g.o):g.pairs&&(c=g.pairs),g.fontSize&&(r=g.fontSize),null!=g.threshold&&
(l=g.threshold));c||(c=m);k.font=r+"px "+a;for(a=0;a<c.length;a++){g=c[a];var d=k.measureText(g[0]).width+k.measureText(g[1]).width,e=k.measureText(g).width;Math.abs(d-e)>r*l&&(h[g]=(e-d)/r*1E3)}return h}function n(a){for(var g=[],h=a[0];h<=a[1];h++)for(var r=String.fromCharCode(h),l=a[0];l<a[1];l++){var c=String.fromCharCode(l);g.push(r+c)}return g}N.exports=p;var k=(p.canvas=document.createElement("canvas")).getContext("2d"),m=n([32,126]);p.createPairs=n;p.ascii=m},{}],182:[function(b,N,G){(function(p){(function(){var n=
!1;if("undefined"!==typeof Float64Array){var k=new Float64Array(1),m=new Uint32Array(k.buffer);k[0]=1;n=!0;1072693248===m[1]?(N.exports=function(g){k[0]=g;return[m[0],m[1]]},N.exports.pack=function(g,h){m[0]=g;m[1]=h;return k[0]},N.exports.lo=function(g){k[0]=g;return m[0]},N.exports.hi=function(g){k[0]=g;return m[1]}):1072693248===m[0]?(N.exports=function(g){k[0]=g;return[m[1],m[0]]},N.exports.pack=function(g,h){m[1]=g;m[0]=h;return k[0]},N.exports.lo=function(g){k[0]=g;return m[1]},N.exports.hi=
function(g){k[0]=g;return m[0]}):n=!1}if(!n){var a=new p(8);N.exports=function(g){a.writeDoubleLE(g,0,!0);return[a.readUInt32LE(0,!0),a.readUInt32LE(4,!0)]};N.exports.pack=function(g,h){a.writeUInt32LE(g,0,!0);a.writeUInt32LE(h,4,!0);return a.readDoubleLE(0,!0)};N.exports.lo=function(g){a.writeDoubleLE(g,0,!0);return a.readUInt32LE(0,!0)};N.exports.hi=function(g){a.writeDoubleLE(g,0,!0);return a.readUInt32LE(4,!0)}}N.exports.sign=function(g){return N.exports.hi(g)>>>31};N.exports.exponent=function(g){return(N.exports.hi(g)<<
1>>>21)-1023};N.exports.fraction=function(g){var h=N.exports.lo(g);g=N.exports.hi(g);var r=g&1048575;g&2146435072&&(r+=1048576);return[h,r]};N.exports.denormalized=function(g){return!(N.exports.hi(g)&2146435072)}}).call(this)}).call(this,b("buffer").Buffer)},{buffer:117}],183:[function(b,N,G){var p=b("abs-svg-path"),n=b("normalize-svg-path"),k={M:"moveTo",C:"bezierCurveTo"};N.exports=function(m,a){m.beginPath();n(p(a)).forEach(function(g){var h=g[0];g=g.slice(1);m[k[h]].apply(m,g)});m.closePath()}},
{"abs-svg-path":71,"normalize-svg-path":485}],184:[function(b,N,G){N.exports=function(p){switch(p){case "int8":return Int8Array;case "int16":return Int16Array;case "int32":return Int32Array;case "uint8":return Uint8Array;case "uint16":return Uint16Array;case "uint32":return Uint32Array;case "float32":return Float32Array;case "float64":return Float64Array;case "array":return Array;case "uint8_clamped":return Uint8ClampedArray}}},{}],185:[function(b,N,G){function p(n,k,m){var a=n[m]|0;if(0>=a)return[];
var g=Array(a),h;if(m===n.length-1)for(h=0;h<a;++h)g[h]=k;else for(h=0;h<a;++h)g[h]=p(n,k,m+1);return g}N.exports=function(n,k){"undefined"===typeof k&&(k=0);switch(typeof n){case "number":if(0<n){n|=0;var m;var a=Array(n);for(m=0;m<n;++m)a[m]=k;return a}break;case "object":if("number"===typeof n.length)return p(n,k,0)}return[]}},{}],186:[function(b,N,G){function p(D,C,v){v=v||2;var y=C&&C.length,F=y?C[0]*v:D.length,J=n(D,0,F,v,!0),K=[];if(!J||J.next===J.prev)return K;var O;if(y){var I=v;y=[];var L;
var H=0;for(L=C.length;H<L;H++){var M=C[H]*I;var Q=H<L-1?C[H+1]*I:D.length;M=n(D,M,Q,I,!1);M===M.next&&(M.steiner=!0);Q=y;var Z=Q.push,ca=M,W=M;do{if(ca.x<W.x||ca.x===W.x&&ca.y<W.y)W=ca;ca=ca.next}while(ca!==M);Z.call(Q,W)}y.sort(g);for(H=0;H<y.length;H++){I=y[H];C=J;if(C=h(I,C))I=w(C,I),k(C,C.next),k(I,I.next);J=k(J,J.next)}}if(D.length>80*v){var T=O=D[0];var U=y=D[1];for(I=v;I<F;I+=v)H=D[I],C=D[I+1],H<T&&(T=H),C<U&&(U=C),H>O&&(O=H),C>y&&(y=C);O=Math.max(O-T,y-U);O=0!==O?1/O:0}m(J,K,v,T,U,O);return K}
function n(D,C,v,y,F){if(F===0<A(D,C,v,y))for(F=C;F<v;F+=y)var J=x(F,D[F],D[F+1],J);else for(F=v-y;F>=C;F-=y)J=x(F,D[F],D[F+1],J);J&&d(J,J.next)&&(z(J),J=J.next);return J}function k(D,C){if(!D)return D;C||(C=D);do{var v=!1;if(D.steiner||!d(D,D.next)&&0!==c(D.prev,D,D.next))D=D.next;else{z(D);D=C=D.prev;if(D===D.next)break;v=!0}}while(v||D!==C);return C}function m(D,C,v,y,F,J,K){if(D){if(!K&&J){var O=D,I=O;do null===I.z&&(I.z=r(I.x,I.y,y,F,J)),I.prevZ=I.prev,I=I.nextZ=I.next;while(I!==O);I.prevZ.nextZ=
null;I.prevZ=null;O=I;var L,H,M,Q,Z=1;do{I=O;var ca=O=null;for(H=0;I;){H++;var W=I;for(L=M=0;L<Z&&(M++,W=W.nextZ,W);L++);for(Q=Z;0<M||0<Q&&W;)0!==M&&(0===Q||!W||I.z<=W.z)?(L=I,I=I.nextZ,M--):(L=W,W=W.nextZ,Q--),ca?ca.nextZ=L:O=L,L.prevZ=ca,ca=L;I=W}ca.nextZ=null;Z*=2}while(1<H)}for(O=D;D.prev!==D.next;){I=D.prev;W=D.next;if(J)ca=a(D,y,F,J);else a:if(ca=D,H=ca.prev,M=ca,Z=ca.next,0<=c(H,M,Z))ca=!1;else{for(L=ca.next.next;L!==ca.prev;){if(l(H.x,H.y,M.x,M.y,Z.x,Z.y,L.x,L.y)&&0<=c(L.prev,L,L.next)){ca=
!1;break a}L=L.next}ca=!0}if(ca)C.push(I.i/v),C.push(D.i/v),C.push(W.i/v),z(D),O=D=W.next;else if(D=W,D===O){if(!K)m(k(D),C,v,y,F,J,1);else if(1===K){D=k(D);K=C;O=v;I=D;do W=I.prev,ca=I.next.next,!d(W,ca)&&e(W,I,I.next,ca)&&t(W,ca)&&t(ca,W)&&(K.push(W.i/O),K.push(I.i/O),K.push(ca.i/O),z(I),z(I.next),I=D=ca),I=I.next;while(I!==D);D=k(I);m(D,C,v,y,F,J,2)}else if(2===K)a:{K=D;do{for(O=K.next.next;O!==K.prev;){if(I=K.i!==O.i){I=K;W=O;if(ca=I.next.i!==W.i&&I.prev.i!==W.i){b:{ca=I;do{if(ca.i!==I.i&&ca.next.i!==
I.i&&ca.i!==W.i&&ca.next.i!==W.i&&e(ca,ca.next,I,W)){ca=!0;break b}ca=ca.next}while(ca!==I);ca=!1}ca=!ca}if(ca){if(ca=t(I,W)&&t(W,I)){ca=I;H=!1;M=(I.x+W.x)/2;Z=(I.y+W.y)/2;do ca.y>Z!==ca.next.y>Z&&ca.next.y!==ca.y&&M<(ca.next.x-ca.x)*(Z-ca.y)/(ca.next.y-ca.y)+ca.x&&(H=!H),ca=ca.next;while(ca!==I);ca=H}ca=ca&&(c(I.prev,I,W.prev)||c(I,W.prev,W))||d(I,W)&&0<c(I.prev,I,I.next)&&0<c(W.prev,W,W.next)}I=ca}if(I){D=w(K,O);K=k(K,K.next);D=k(D,D.next);m(K,C,v,y,F,J);m(D,C,v,y,F,J);break a}O=O.next}K=K.next}while(K!==
D)}break}}}}function a(D,C,v,y){var F=D.prev,J=D.next;if(0<=c(F,D,J))return!1;var K=F.x>D.x?F.x>J.x?F.x:J.x:D.x>J.x?D.x:J.x,O=F.y>D.y?F.y>J.y?F.y:J.y:D.y>J.y?D.y:J.y,I=r(F.x<D.x?F.x<J.x?F.x:J.x:D.x<J.x?D.x:J.x,F.y<D.y?F.y<J.y?F.y:J.y:D.y<J.y?D.y:J.y,C,v,y);C=r(K,O,C,v,y);v=D.prevZ;for(y=D.nextZ;v&&v.z>=I&&y&&y.z<=C;){if(v!==D.prev&&v!==D.next&&l(F.x,F.y,D.x,D.y,J.x,J.y,v.x,v.y)&&0<=c(v.prev,v,v.next))return!1;v=v.prevZ;if(y!==D.prev&&y!==D.next&&l(F.x,F.y,D.x,D.y,J.x,J.y,y.x,y.y)&&0<=c(y.prev,y,y.next))return!1;
y=y.nextZ}for(;v&&v.z>=I;){if(v!==D.prev&&v!==D.next&&l(F.x,F.y,D.x,D.y,J.x,J.y,v.x,v.y)&&0<=c(v.prev,v,v.next))return!1;v=v.prevZ}for(;y&&y.z<=C;){if(y!==D.prev&&y!==D.next&&l(F.x,F.y,D.x,D.y,J.x,J.y,y.x,y.y)&&0<=c(y.prev,y,y.next))return!1;y=y.nextZ}return!0}function g(D,C){return D.x-C.x}function h(D,C){var v=C,y=D.x,F=D.y,J=-Infinity;do{if(F<=v.y&&F>=v.next.y&&v.next.y!==v.y){var K=v.x+(F-v.y)*(v.next.x-v.x)/(v.next.y-v.y);if(K<=y&&K>J){J=K;if(K===y){if(F===v.y)return v;if(F===v.next.y)return v.next}var O=
v.x<v.next.x?v:v.next}}v=v.next}while(v!==C);if(!O)return null;if(y===J)return O;C=O;K=O.x;var I=O.y,L=Infinity;v=O;do{if(y>=v.x&&v.x>=K&&y!==v.x&&l(F<I?y:J,F,K,I,F<I?J:y,F,v.x,v.y)){var H=Math.abs(F-v.y)/(y-v.x);var M;if((M=t(v,D))&&!(M=H<L)&&(M=H===L)&&!(M=v.x>O.x)&&(M=v.x===O.x)){M=O;var Q=v;M=0>c(M.prev,M,Q.prev)&&0>c(Q.next,M,M.next)}M&&(O=v,L=H)}v=v.next}while(v!==C);return O}function r(D,C,v,y,F){D=32767*(D-v)*F;C=32767*(C-y)*F;D=(D|D<<8)&16711935;D=(D|D<<4)&252645135;D=(D|D<<2)&858993459;
C=(C|C<<8)&16711935;C=(C|C<<4)&252645135;C=(C|C<<2)&858993459;return(D|D<<1)&1431655765|((C|C<<1)&1431655765)<<1}function l(D,C,v,y,F,J,K,O){return 0<=(F-K)*(C-O)-(D-K)*(J-O)&&0<=(D-K)*(y-O)-(v-K)*(C-O)&&0<=(v-K)*(J-O)-(F-K)*(y-O)}function c(D,C,v){return(C.y-D.y)*(v.x-C.x)-(C.x-D.x)*(v.y-C.y)}function d(D,C){return D.x===C.x&&D.y===C.y}function e(D,C,v,y){var F=q(c(D,C,v)),J=q(c(D,C,y)),K=q(c(v,y,D)),O=q(c(v,y,C));return F!==J&&K!==O||0===F&&f(D,v,C)||0===J&&f(D,y,C)||0===K&&f(v,D,y)||0===O&&f(v,
C,y)?!0:!1}function f(D,C,v){return C.x<=Math.max(D.x,v.x)&&C.x>=Math.min(D.x,v.x)&&C.y<=Math.max(D.y,v.y)&&C.y>=Math.min(D.y,v.y)}function q(D){return 0<D?1:0>D?-1:0}function t(D,C){return 0>c(D.prev,D,D.next)?0<=c(D,C,D.next)&&0<=c(D,D.prev,C):0>c(D,C,D.prev)||0>c(D,D.next,C)}function w(D,C){var v=new B(D.i,D.x,D.y),y=new B(C.i,C.x,C.y),F=D.next,J=C.prev;D.next=C;C.prev=D;v.next=F;F.prev=v;y.next=v;v.prev=y;J.next=y;y.prev=J;return y}function x(D,C,v,y){D=new B(D,C,v);y?(D.next=y.next,D.prev=y,
y.next.prev=D,y.next=D):(D.prev=D,D.next=D);return D}function z(D){D.next.prev=D.prev;D.prev.next=D.next;D.prevZ&&(D.prevZ.nextZ=D.nextZ);D.nextZ&&(D.nextZ.prevZ=D.prevZ)}function B(D,C,v){this.i=D;this.x=C;this.y=v;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function A(D,C,v,y){for(var F=0,J=v-y;C<v;C+=y)F+=(D[J]-D[C])*(D[C+1]+D[J+1]),J=C;return F}N.exports=p;N.exports.default=p;p.deviation=function(D,C,v,y){var F=C&&C.length,J=Math.abs(A(D,0,F?C[0]*v:D.length,v));if(F){F=
0;for(var K=C.length;F<K;F++)J-=Math.abs(A(D,C[F]*v,F<K-1?C[F+1]*v:D.length,v))}for(F=C=0;F<y.length;F+=3){K=y[F]*v;var O=y[F+1]*v,I=y[F+2]*v;C+=Math.abs((D[K]-D[I])*(D[O+1]-D[K+1])-(D[K]-D[O])*(D[I+1]-D[K+1]))}return 0===J&&0===C?0:Math.abs((C-J)/J)};p.flatten=function(D){for(var C=D[0][0].length,v={vertices:[],holes:[],dimensions:C},y=0,F=0;F<D.length;F++){for(var J=0;J<D[F].length;J++)for(var K=0;K<C;K++)v.vertices.push(D[F][J][K]);0<F&&(y+=D[F-1].length,v.holes.push(y))}return v}},{}],187:[function(b,
N,G){N.exports=function(n,k){var m=n.length;if("number"!==typeof k){for(var a=k=0;a<m;++a){var g=n[a];k=Math.max(k,g[0],g[1])}k=(k|0)+1}k|=0;var h=Array(k);for(a=0;a<k;++a)h[a]=[];for(a=0;a<m;++a)g=n[a],h[g[0]].push(g[1]),h[g[1]].push(g[0]);for(n=0;n<k;++n)p(h[n],function(r,l){return r-l});return h};var p=b("uniq")},{uniq:619}],188:[function(b,N,G){var p=b("strongly-connected-components");N.exports=function(n,k){function m(z){c[z]=!1;d.hasOwnProperty(z)&&Object.keys(d[z]).forEach(function(B){delete d[z][B];
c[B]&&m(B)})}function a(z){var B=!1;l.push(z);c[z]=!0;var A;for(A=0;A<e[z].length;A++){var D=e[z][A];D===f?(B=f,B=[].concat(l).concat(B),k?k(a):r.push(B),B=!0):c[D]||(B=a(D))}if(B)m(z);else for(A=0;A<e[z].length;A++){D=e[z][A];var C=d[D];C||(C={},d[D]=C);C[D]=!0}l.pop();return B}function g(z){for(var B=0;B<n.length;B++)B<z&&(n[B]=[]),n[B]=n[B].filter(function(A){return A>=z})}function h(z){g(z);var B=p(n).components.filter(function(y){return 1<y.length});z=Infinity;for(var A,D=0;D<B.length;D++)for(var C=
0;C<B[D].length;C++)B[D][C]<z&&(z=B[D][C],A=D);var v=B[A];if(!v)return!1;A=n.map(function(y,F){return-1===v.indexOf(F)?[]:y.filter(function(J){return-1!==v.indexOf(J)})});return{leastVertex:z,adjList:A}}var r=[],l=[],c=[],d={},e=[];var f=0;for(var q=n.length;f<q;){var t=h(f);f=t.leastVertex;if(e=t.adjList){for(t=0;t<e.length;t++)for(var w=0;w<e[t].length;w++){var x=e[t][w];c[+x]=!1;d[x]={}}a(f);f+=1}else f=q}if(!k)return r}},{"strongly-connected-components":590}],189:[function(b,N,G){var p=b("../../object/valid-value");
N.exports=function(){p(this).length=0;return this}},{"../../object/valid-value":220}],190:[function(b,N,G){N.exports=b("./is-implemented")()?Array.from:b("./shim")},{"./is-implemented":191,"./shim":192}],191:[function(b,N,G){N.exports=function(){var p=Array.from;if("function"!==typeof p)return!1;var n=["raz","dwa"];p=p(n);return!(!p||p===n||"dwa"!==p[1])}},{}],192:[function(b,N,G){var p=b("es6-symbol").iterator,n=b("../../function/is-arguments"),k=b("../../function/is-function"),m=b("../../number/to-pos-integer"),
a=b("../../object/valid-callable"),g=b("../../object/valid-value"),h=b("../../object/is-value"),r=b("../../string/is-string"),l=Array.isArray,c=Function.prototype.call,d={configurable:!0,enumerable:!0,writable:!0,value:null},e=Object.defineProperty;N.exports=function(f,q,t){var w,x;f=Object(g(f));h(q)&&a(q);if(this&&this!==Array&&k(this))var z=this;else{if(!q){if(n(f)){var B=f.length;if(1!==B)return Array.apply(null,f);var A=Array(1);A[0]=f[0];return A}if(l(f)){A=Array(B=f.length);for(w=0;w<B;++w)A[w]=
f[w];return A}}A=[]}if(!l(f))if(void 0!==(w=f[p])){B=a(w).call(f);z&&(A=new z);var D=B.next();for(w=0;!D.done;)D=q?c.call(q,t,D.value,w):D.value,z?(d.value=D,e(A,w,d)):A[w]=D,D=B.next(),++w;B=w}else if(r(f)){B=f.length;z&&(A=new z);for(x=w=0;w<B;++w){D=f[w];if(w+1<B){var C=D.charCodeAt(0);55296<=C&&56319>=C&&(D+=f[++w])}D=q?c.call(q,t,D,x):D;z?(d.value=D,e(A,x,d)):A[x]=D;++x}B=x}if(void 0===B)for(B=m(f.length),z&&(A=new z(B)),w=0;w<B;++w)D=q?c.call(q,t,f[w],w):f[w],z?(d.value=D,e(A,w,d)):A[w]=D;z&&
(d.value=null,A.length=B);return A}},{"../../function/is-arguments":193,"../../function/is-function":194,"../../number/to-pos-integer":200,"../../object/is-value":209,"../../object/valid-callable":218,"../../object/valid-value":220,"../../string/is-string":224,"es6-symbol":233}],193:[function(b,N,G){var p=Object.prototype.toString,n=p.call(function(){return arguments}());N.exports=function(k){return p.call(k)===n}},{}],194:[function(b,N,G){var p=Object.prototype.toString,n=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);
N.exports=function(k){return"function"===typeof k&&n(p.call(k))}},{}],195:[function(b,N,G){N.exports=function(){}},{}],196:[function(b,N,G){N.exports=b("./is-implemented")()?Math.sign:b("./shim")},{"./is-implemented":197,"./shim":198}],197:[function(b,N,G){N.exports=function(){var p=Math.sign;return"function"!==typeof p?!1:1===p(10)&&-1===p(-20)}},{}],198:[function(b,N,G){N.exports=function(p){p=Number(p);return isNaN(p)||0===p?p:0<p?1:-1}},{}],199:[function(b,N,G){var p=b("../math/sign"),n=Math.abs,
k=Math.floor;N.exports=function(m){if(isNaN(m))return 0;m=Number(m);return 0!==m&&isFinite(m)?p(m)*k(n(m)):m}},{"../math/sign":196}],200:[function(b,N,G){var p=b("./to-integer"),n=Math.max;N.exports=function(k){return n(0,p(k))}},{"./to-integer":199}],201:[function(b,N,G){var p=b("./valid-callable"),n=b("./valid-value"),k=Function.prototype.bind,m=Function.prototype.call,a=Object.keys,g=Object.prototype.propertyIsEnumerable;N.exports=function(h,r){return function(l,c,d,e){l=Object(n(l));p(c);var f=
a(l);e&&f.sort("function"===typeof e?k.call(e,l):void 0);"function"!==typeof h&&(h=f[h]);return m.call(h,f,function(q,t){return g.call(l,q)?m.call(c,d,l[q],q,l,t):r})}}},{"./valid-callable":218,"./valid-value":220}],202:[function(b,N,G){N.exports=b("./is-implemented")()?Object.assign:b("./shim")},{"./is-implemented":203,"./shim":204}],203:[function(b,N,G){N.exports=function(){var p=Object.assign;if("function"!==typeof p)return!1;var n={foo:"raz"};p(n,{bar:"dwa"},{trzy:"trzy"});return"razdwatrzy"===
n.foo+n.bar+n.trzy}},{}],204:[function(b,N,G){var p=b("../keys"),n=b("../valid-value"),k=Math.max;N.exports=function(m,a){var g,h,r=k(arguments.length,2);m=Object(n(m));var l=function(c){try{m[c]=a[c]}catch(d){g||(g=d)}};for(h=1;h<r;++h)a=arguments[h],p(a).forEach(l);if(void 0!==g)throw g;return m}},{"../keys":210,"../valid-value":220}],205:[function(b,N,G){var p=b("../array/from"),n=b("./assign"),k=b("./valid-value");N.exports=function(m,a,g){var h=Object(k(m)),r=Object(g);if(h!==m&&!a)return h;
var l={};a?p(a,function(c){if(r.ensure||c in m)l[c]=m[c]}):n(l,m);return l}},{"../array/from":190,"./assign":202,"./valid-value":220}],206:[function(b,N,G){var p=Object.create,n;b("./set-prototype-of/is-implemented")()||(n=b("./set-prototype-of/shim"));N.exports=function(){if(!n||1!==n.level)return p;var k={};var m={};var a={configurable:!1,enumerable:!1,writable:!0,value:void 0};Object.getOwnPropertyNames(Object.prototype).forEach(function(g){m[g]="__proto__"===g?{configurable:!0,enumerable:!1,writable:!0,
value:void 0}:a});Object.defineProperties(k,m);Object.defineProperty(n,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:k});return function(g,h){return p(null===g?k:g,h)}}()},{"./set-prototype-of/is-implemented":216,"./set-prototype-of/shim":217}],207:[function(b,N,G){N.exports=b("./_iterate")("forEach")},{"./_iterate":201}],208:[function(b,N,G){var p=b("./is-value"),n={function:!0,object:!0};N.exports=function(k){return p(k)&&n[typeof k]||!1}},{"./is-value":209}],209:[function(b,N,
G){var p=b("../function/noop")();N.exports=function(n){return n!==p&&null!==n}},{"../function/noop":195}],210:[function(b,N,G){N.exports=b("./is-implemented")()?Object.keys:b("./shim")},{"./is-implemented":211,"./shim":212}],211:[function(b,N,G){N.exports=function(){try{return Object.keys("primitive"),!0}catch(p){return!1}}},{}],212:[function(b,N,G){var p=b("../is-value"),n=Object.keys;N.exports=function(k){return n(p(k)?Object(k):k)}},{"../is-value":209}],213:[function(b,N,G){var p=b("./valid-callable"),
n=b("./for-each"),k=Function.prototype.call;N.exports=function(m,a,g){var h={};p(a);n(m,function(r,l,c,d){h[l]=k.call(a,g,r,l,c,d)});return h}},{"./for-each":207,"./valid-callable":218}],214:[function(b,N,G){var p=b("./is-value"),n=Array.prototype.forEach,k=Object.create;N.exports=function(m){var a=k(null);n.call(arguments,function(g){if(p(g)){g=Object(g);for(var h in g)a[h]=g[h]}});return a}},{"./is-value":209}],215:[function(b,N,G){N.exports=b("./is-implemented")()?Object.setPrototypeOf:b("./shim")},
{"./is-implemented":216,"./shim":217}],216:[function(b,N,G){var p=Object.create,n=Object.getPrototypeOf,k={};N.exports=function(m){var a=Object.setPrototypeOf;return"function"!==typeof a?!1:n(a((m||p)(null),k))===k}},{}],217:[function(b,N,G){var p=b("../is-object"),n=b("../valid-value"),k=Object.prototype.isPrototypeOf,m=Object.defineProperty,a={configurable:!0,enumerable:!1,writable:!0,value:void 0};var g=function(h,r){n(h);if(null===r||p(r))return h;throw new TypeError("Prototype must be null or an object");
};N.exports=function(h){if(!h)return null;if(2===h.level)if(h.set){var r=h.set;var l=function(c,d){r.call(g(c,d),d);return c}}else l=function(c,d){g(c,d).__proto__=d;return c};else l=function f(d,e){var q;g(d,e);(q=k.call(f.nullPolyfill,d))&&delete f.nullPolyfill.__proto__;null===e&&(e=f.nullPolyfill);d.__proto__=e;q&&m(f.nullPolyfill,"__proto__",a);return d};return Object.defineProperty(l,"level",{configurable:!1,enumerable:!1,writable:!1,value:h.level})}(function(){var h=Object.create(null),r={},
l=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(l){try{var c=l.set;c.call(h,r)}catch(d){}if(Object.getPrototypeOf(h)===r)return{set:c,level:2}}h.__proto__=r;if(Object.getPrototypeOf(h)===r)return{level:2};h={};h.__proto__=r;return Object.getPrototypeOf(h)===r?{level:1}:!1}());b("../create")},{"../create":206,"../is-object":208,"../valid-value":220}],218:[function(b,N,G){N.exports=function(p){if("function"!==typeof p)throw new TypeError(p+" is not a function");return p}},{}],219:[function(b,
N,G){var p=b("./is-object");N.exports=function(n){if(!p(n))throw new TypeError(n+" is not an Object");return n}},{"./is-object":208}],220:[function(b,N,G){var p=b("./is-value");N.exports=function(n){if(!p(n))throw new TypeError("Cannot use null or undefined");return n}},{"./is-value":209}],221:[function(b,N,G){N.exports=b("./is-implemented")()?String.prototype.contains:b("./shim")},{"./is-implemented":222,"./shim":223}],222:[function(b,N,G){N.exports=function(){return"function"!==typeof"razdwatrzy".contains?
!1:!0==="razdwatrzy".contains("dwa")&&!1==="razdwatrzy".contains("foo")}},{}],223:[function(b,N,G){var p=String.prototype.indexOf;N.exports=function(n,k){return-1<p.call(this,n,k)}},{}],224:[function(b,N,G){var p=Object.prototype.toString,n=p.call("");N.exports=function(k){return"string"===typeof k||k&&"object"===typeof k&&(k instanceof String||p.call(k)===n)||!1}},{}],225:[function(b,N,G){var p=Object.create(null),n=Math.random;N.exports=function(){do var k=n().toString(36).slice(2);while(p[k]);
return k}},{}],226:[function(b,N,G){G=b("es5-ext/object/set-prototype-of");var p=b("es5-ext/string/#/contains"),n=b("d"),k=b("es6-symbol"),m=b("./"),a=Object.defineProperty;var g=N.exports=function(h,r){if(!(this instanceof g))throw new TypeError("Constructor requires 'new'");m.call(this,h);r=r?p.call(r,"key+value")?"key+value":p.call(r,"key")?"key":"value":"value";a(this,"__kind__",n("",r))};G&&G(g,m);delete g.prototype.constructor;g.prototype=Object.create(m.prototype,{_resolve:n(function(h){return"value"===
this.__kind__?this.__list__[h]:"key+value"===this.__kind__?[h,this.__list__[h]]:h})});a(g.prototype,k.toStringTag,n("c","Array Iterator"))},{"./":229,d:161,"es5-ext/object/set-prototype-of":215,"es5-ext/string/#/contains":221,"es6-symbol":233}],227:[function(b,N,G){var p=b("es5-ext/function/is-arguments"),n=b("es5-ext/object/valid-callable"),k=b("es5-ext/string/is-string"),m=b("./get"),a=Array.isArray,g=Function.prototype.call,h=Array.prototype.some;N.exports=function(r,l,c){var d,e;a(r)||p(r)?d=
"array":k(r)?d="string":r=m(r);n(l);var f=function(){e=!0};if("array"===d)h.call(r,function(x){g.call(l,c,x,f);return e});else if("string"===d){var q=r.length;for(d=0;d<q;++d){var t=r[d];if(d+1<q){var w=t.charCodeAt(0);55296<=w&&56319>=w&&(t+=r[++d])}g.call(l,c,t,f);if(e)break}}else for(d=r.next();!d.done;){g.call(l,c,d.value,f);if(e)break;d=r.next()}}},{"./get":228,"es5-ext/function/is-arguments":193,"es5-ext/object/valid-callable":218,"es5-ext/string/is-string":224}],228:[function(b,N,G){var p=
b("es5-ext/function/is-arguments"),n=b("es5-ext/string/is-string"),k=b("./array"),m=b("./string"),a=b("./valid-iterable"),g=b("es6-symbol").iterator;N.exports=function(h){return"function"===typeof a(h)[g]?h[g]():p(h)?new k(h):n(h)?new m(h):new k(h)}},{"./array":226,"./string":231,"./valid-iterable":232,"es5-ext/function/is-arguments":193,"es5-ext/string/is-string":224,"es6-symbol":233}],229:[function(b,N,G){var p=b("es5-ext/array/#/clear");G=b("es5-ext/object/assign");var n=b("es5-ext/object/valid-callable"),
k=b("es5-ext/object/valid-value"),m=b("d"),a=b("d/auto-bind"),g=b("es6-symbol"),h=Object.defineProperty,r=Object.defineProperties,l;N.exports=l=function(c,d){if(!(this instanceof l))throw new TypeError("Constructor requires 'new'");r(this,{__list__:m("w",k(c)),__context__:m("w",d),__nextIndex__:m("w",0)});d&&(n(d.on),d.on("_add",this._onAdd),d.on("_delete",this._onDelete),d.on("_clear",this._onClear))};delete l.prototype.constructor;r(l.prototype,G({_next:m(function(){if(this.__list__){if(this.__redo__){var c=
this.__redo__.shift();if(void 0!==c)return c}if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:m(function(){return this._createResult(this._next())}),_createResult:m(function(c){return void 0===c?{done:!0,value:void 0}:{done:!1,value:this._resolve(c)}}),_resolve:m(function(c){return this.__list__[c]}),_unBind:m(function(){this.__list__=null;delete this.__redo__;this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),
this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:m(function(){return"[object "+(this[g.toStringTag]||"Object")+"]"})},a({_onAdd:m(function(c){c>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(d,e){d>=c&&(this.__redo__[e]=++d)},this),this.__redo__.push(c)):h(this,"__redo__",m("c",[c])))}),_onDelete:m(function(c){if(!(c>=this.__nextIndex__)&&(--this.__nextIndex__,this.__redo__)){var d=this.__redo__.indexOf(c);-1!==d&&this.__redo__.splice(d,
1);this.__redo__.forEach(function(e,f){e>c&&(this.__redo__[f]=--e)},this)}}),_onClear:m(function(){this.__redo__&&p.call(this.__redo__);this.__nextIndex__=0})})));h(l.prototype,g.iterator,m(function(){return this}))},{d:161,"d/auto-bind":160,"es5-ext/array/#/clear":189,"es5-ext/object/assign":202,"es5-ext/object/valid-callable":218,"es5-ext/object/valid-value":220,"es6-symbol":233}],230:[function(b,N,G){var p=b("es5-ext/function/is-arguments"),n=b("es5-ext/object/is-value"),k=b("es5-ext/string/is-string"),
m=b("es6-symbol").iterator,a=Array.isArray;N.exports=function(g){return n(g)?a(g)||k(g)||p(g)?!0:"function"===typeof g[m]:!1}},{"es5-ext/function/is-arguments":193,"es5-ext/object/is-value":209,"es5-ext/string/is-string":224,"es6-symbol":233}],231:[function(b,N,G){G=b("es5-ext/object/set-prototype-of");var p=b("d"),n=b("es6-symbol"),k=b("./"),m=Object.defineProperty;var a=N.exports=function(g){if(!(this instanceof a))throw new TypeError("Constructor requires 'new'");g=String(g);k.call(this,g);m(this,
"__length__",p("",g.length))};G&&G(a,k);delete a.prototype.constructor;a.prototype=Object.create(k.prototype,{_next:p(function(){if(this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:p(function(g){g=this.__list__[g];if(this.__nextIndex__===this.__length__)return g;var h=g.charCodeAt(0);return 55296<=h&&56319>=h?g+this.__list__[this.__nextIndex__++]:g})});m(a.prototype,n.toStringTag,p("c","String Iterator"))},{"./":229,d:161,"es5-ext/object/set-prototype-of":215,
"es6-symbol":233}],232:[function(b,N,G){var p=b("./is-iterable");N.exports=function(n){if(!p(n))throw new TypeError(n+" is not iterable");return n}},{"./is-iterable":230}],233:[function(b,N,G){N.exports=b("./is-implemented")()?b("ext/global-this").Symbol:b("./polyfill")},{"./is-implemented":234,"./polyfill":239,"ext/global-this":246}],234:[function(b,N,G){var p=b("ext/global-this"),n={object:!0,symbol:!0};N.exports=function(){var k=p.Symbol;if("function"!==typeof k)return!1;var m=k("test symbol");
try{String(m)}catch(a){return!1}return n[typeof k.iterator]&&n[typeof k.toPrimitive]&&n[typeof k.toStringTag]?!0:!1}},{"ext/global-this":246}],235:[function(b,N,G){N.exports=function(p){return p?"symbol"===typeof p?!0:p.constructor&&"Symbol"===p.constructor.name?"Symbol"===p[p.constructor.toStringTag]:!1:!1}},{}],236:[function(b,N,G){var p=b("d");b=Object.create;var n=Object.defineProperty,k=Object.prototype,m=b(null);N.exports=function(a){for(var g=0,h,r;m[a+(g||"")];)++g;a+=g||"";m[a]=!0;h="@@"+
a;n(k,h,p.gs(null,function(l){r||(r=!0,n(this,h,p(l)),r=!1)}));return h}},{d:161}],237:[function(b,N,G){var p=b("d"),n=b("ext/global-this").Symbol;N.exports=function(k){return Object.defineProperties(k,{hasInstance:p("",n&&n.hasInstance||k("hasInstance")),isConcatSpreadable:p("",n&&n.isConcatSpreadable||k("isConcatSpreadable")),iterator:p("",n&&n.iterator||k("iterator")),match:p("",n&&n.match||k("match")),replace:p("",n&&n.replace||k("replace")),search:p("",n&&n.search||k("search")),species:p("",
n&&n.species||k("species")),split:p("",n&&n.split||k("split")),toPrimitive:p("",n&&n.toPrimitive||k("toPrimitive")),toStringTag:p("",n&&n.toStringTag||k("toStringTag")),unscopables:p("",n&&n.unscopables||k("unscopables"))})}},{d:161,"ext/global-this":246}],238:[function(b,N,G){var p=b("d"),n=b("../../../validate-symbol"),k=Object.create(null);N.exports=function(m){return Object.defineProperties(m,{for:p(function(a){return k[a]?k[a]:k[a]=m(String(a))}),keyFor:p(function(a){var g;n(a);for(g in k)if(k[g]===
a)return g})})}},{"../../../validate-symbol":240,d:161}],239:[function(b,N,G){var p=b("d"),n=b("./validate-symbol"),k=b("ext/global-this").Symbol,m=b("./lib/private/generate-name");G=b("./lib/private/setup/standard-symbols");b=b("./lib/private/setup/symbol-registry");var a=Object.create,g=Object.defineProperties,h=Object.defineProperty,r;if("function"===typeof k)try{String(k());var l=!0}catch(d){}else k=null;var c=function(d){if(this instanceof c)throw new TypeError("Symbol is not a constructor");
return r(d)};N.exports=r=function f(e){if(this instanceof f)throw new TypeError("Symbol is not a constructor");if(l)return k(e);var q=a(c.prototype);e=void 0===e?"":String(e);return g(q,{__description__:p("",e),__name__:p("",m(e))})};G(r);b(r);g(c.prototype,{constructor:p(r),toString:p("",function(){return this.__name__})});g(r.prototype,{toString:p(function(){return"Symbol ("+n(this).__description__+")"}),valueOf:p(function(){return n(this)})});h(r.prototype,r.toPrimitive,p("",function(){var e=n(this);
return"symbol"===typeof e?e:e.toString()}));h(r.prototype,r.toStringTag,p("c","Symbol"));h(c.prototype,r.toStringTag,p("c",r.prototype[r.toStringTag]));h(c.prototype,r.toPrimitive,p("c",r.prototype[r.toPrimitive]))},{"./lib/private/generate-name":236,"./lib/private/setup/standard-symbols":237,"./lib/private/setup/symbol-registry":238,"./validate-symbol":240,d:161,"ext/global-this":246}],240:[function(b,N,G){var p=b("./is-symbol");N.exports=function(n){if(!p(n))throw new TypeError(n+" is not a symbol");
return n}},{"./is-symbol":235}],241:[function(b,N,G){N.exports=b("./is-implemented")()?WeakMap:b("./polyfill")},{"./is-implemented":242,"./polyfill":244}],242:[function(b,N,G){N.exports=function(){var p;if("function"!==typeof WeakMap)return!1;try{var n=new WeakMap([[p={},"one"],[{},"two"],[{},"three"]])}catch(k){return!1}return"[object WeakMap]"!==String(n)||"function"!==typeof n.set||n.set({},1)!==n||"function"!==typeof n.delete||"function"!==typeof n.has||"one"!==n.get(p)?!1:!0}},{}],243:[function(b,
N,G){b="function"!==typeof WeakMap?!1:"[object WeakMap]"===Object.prototype.toString.call(new WeakMap);N.exports=b},{}],244:[function(b,N,G){var p=b("es5-ext/object/is-value"),n=b("es5-ext/object/set-prototype-of"),k=b("es5-ext/object/valid-object"),m=b("es5-ext/object/valid-value"),a=b("es5-ext/string/random-uniq"),g=b("d"),h=b("es6-iterator/get"),r=b("es6-iterator/for-of");G=b("es6-symbol").toStringTag;var l=b("./is-native-implemented"),c=Array.isArray,d=Object.defineProperty,e=Object.prototype.hasOwnProperty,
f=Object.getPrototypeOf,q;N.exports=q=function(t){if(!(this instanceof q))throw new TypeError("Constructor requires 'new'");var w=l&&n&&WeakMap!==q?n(new WeakMap,f(this)):this;p(t)&&(c(t)||(t=h(t)));d(w,"__weakMapData__",g("c","$weakMap$"+a()));if(!t)return w;r(t,function(x){m(x);w.set(x[0],x[1])});return w};l&&(n&&n(q,WeakMap),q.prototype=Object.create(WeakMap.prototype,{constructor:g(q)}));Object.defineProperties(q.prototype,{delete:g(function(t){return e.call(k(t),this.__weakMapData__)?(delete t[this.__weakMapData__],
!0):!1}),get:g(function(t){if(e.call(k(t),this.__weakMapData__))return t[this.__weakMapData__]}),has:g(function(t){return e.call(k(t),this.__weakMapData__)}),set:g(function(t,w){d(k(t),this.__weakMapData__,g("c",w));return this}),toString:g(function(){return"[object WeakMap]"})});d(q.prototype,G,g("c","WeakMap"))},{"./is-native-implemented":243,d:161,"es5-ext/object/is-value":209,"es5-ext/object/set-prototype-of":215,"es5-ext/object/valid-object":219,"es5-ext/object/valid-value":220,"es5-ext/string/random-uniq":225,
"es6-iterator/for-of":227,"es6-iterator/get":228,"es6-symbol":233}],245:[function(b,N,G){var p=function(){if("object"===typeof self&&self)return self;if("object"===typeof window&&window)return window;throw Error("Unable to resolve global `this`");};N.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(n){return p()}try{return __global__?__global__:p()}finally{delete Object.prototype.__global__}}()},{}],
246:[function(b,N,G){N.exports=b("./is-implemented")()?globalThis:b("./implementation")},{"./implementation":245,"./is-implemented":247}],247:[function(b,N,G){N.exports=function(){return"object"===typeof globalThis&&globalThis?globalThis.Array===Array:!1}},{}],248:[function(b,N,G){N.exports=function(p,n,k){n=n||0;k=k||1;return[[p[12]+p[0],p[13]+p[1],p[14]+p[2],p[15]+p[3]],[p[12]-p[0],p[13]-p[1],p[14]-p[2],p[15]-p[3]],[p[12]+p[4],p[13]+p[5],p[14]+p[6],p[15]+p[7]],[p[12]-p[4],p[13]-p[5],p[14]-p[6],
p[15]-p[7]],[n*p[12]+p[8],n*p[13]+p[9],n*p[14]+p[10],n*p[15]+p[11]],[k*p[12]-p[8],k*p[13]-p[9],k*p[14]-p[10],k*p[15]-p[11]]]}},{}],249:[function(b,N,G){var p=b("is-string-blank");N.exports=function(n){var k=typeof n;if("string"===k){if(k=n,n=+n,0===n&&p(k))return!1}else if("number"!==k)return!1;return 1>n-n}},{"is-string-blank":458}],250:[function(b,N,G){function p(g,h,r){return Math.min(h,Math.max(g,r))}function n(g,h,r){this.dimension=g.length;this.bounds=[Array(this.dimension),Array(this.dimension)];
for(var l=0;l<this.dimension;++l)this.bounds[0][l]=-Infinity,this.bounds[1][l]=Infinity;this._state=g.slice().reverse();this._velocity=h.slice().reverse();this._time=[r];this._scratch=[g.slice(),g.slice(),g.slice(),g.slice(),g.slice()]}function k(g){for(var h=Array(g),r=0;r<g;++r)h[r]=0;return h}N.exports=function(g,h,r){switch(arguments.length){case 0:return new n([0],[0],0);case 1:if("number"===typeof g){var l=k(g);return new n(l,l,0)}return new n(g,k(g.length),0);case 2:if("number"===typeof h)return l=
k(g.length),new n(g,l,+h);r=0;case 3:if(g.length!==h.length)throw Error("state and velocity lengths must match");return new n(g,h,r)}};var m=b("cubic-hermite"),a=b("binary-search-bounds");b=n.prototype;b.flush=function(g){g=a.gt(this._time,g)-1;0>=g||(this._time.splice(0,g),this._state.splice(0,g*this.dimension),this._velocity.splice(0,g*this.dimension))};b.curve=function(g){var h=this._time,r=h.length,l=a.le(h,g),c=this._scratch[0],d=this._state,e=this._velocity,f=this.dimension,q=this.bounds;if(0>
l){var t=f-1;for(h=0;h<f;++h,--t)c[h]=d[t]}else if(l>=r-1)for(t=d.length-1,g-=h[r-1],h=0;h<f;++h,--t)c[h]=d[t]+g*e[t];else{t=f*(l+1)-1;r=h[l];l=h[l+1]-r||1;var w=this._scratch[1],x=this._scratch[2],z=this._scratch[3],B=this._scratch[4],A=!0;for(h=0;h<f;++h,--t)w[h]=d[t],z[h]=e[t]*l,x[h]=d[t+f],B[h]=e[t+f]*l,A=A&&w[h]===x[h]&&z[h]===B[h]&&0===z[h];if(A)for(h=0;h<f;++h)c[h]=w[h];else m(w,z,x,B,(g-r)/l,c)}d=q[0];q=q[1];for(h=0;h<f;++h)c[h]=p(d[h],q[h],c[h]);return c};b.dcurve=function(g){var h=this._time,
r=h.length,l=a.le(h,g),c=this._scratch[0],d=this._state,e=this._velocity,f=this.dimension;if(l>=r-1)for(r=d.length-1,h=0;h<f;++h,--r)c[h]=e[r];else{r=f*(l+1)-1;var q=h[l];l=h[l+1]-q||1;var t=this._scratch[1],w=this._scratch[2],x=this._scratch[3],z=this._scratch[4],B=!0;for(h=0;h<f;++h,--r)t[h]=d[r],x[h]=e[r]*l,w[h]=d[r+f],z[h]=e[r+f]*l,B=B&&t[h]===w[h]&&x[h]===z[h]&&0===x[h];if(B)for(h=0;h<f;++h)c[h]=0;else for(m.derivative(t,x,w,z,(g-q)/l,c),h=0;h<f;++h)c[h]/=l}return c};b.lastT=function(){var g=
this._time;return g[g.length-1]};b.stable=function(){for(var g=this._velocity,h=g.length,r=this.dimension-1;0<=r;--r)if(g[--h])return!1;return!0};b.jump=function(g){var h=this.lastT(),r=this.dimension;if(!(g<h||arguments.length!==r+1)){var l=this._state,c=this._velocity,d=l.length-this.dimension,e=this.bounds,f=e[0];e=e[1];this._time.push(h,g);for(h=0;2>h;++h)for(var q=0;q<r;++q)l.push(l[d++]),c.push(0);this._time.push(g);for(q=r;0<q;--q)l.push(p(f[q-1],e[q-1],arguments[q])),c.push(0)}};b.push=function(g){var h=
this.lastT(),r=this.dimension;if(!(g<h||arguments.length!==r+1)){var l=this._state,c=this._velocity,d=l.length-this.dimension,e=g-h,f=this.bounds;h=f[0];f=f[1];e=1E-6<e?1/e:0;for(this._time.push(g);0<r;--r){var q=p(h[r-1],f[r-1],arguments[r]);l.push(q);c.push((q-l[d++])*e)}}};b.set=function(g){var h=this.dimension;if(!(g<this.lastT()||arguments.length!==h+1)){var r=this._state,l=this._velocity,c=this.bounds,d=c[0];c=c[1];for(this._time.push(g);0<h;--h)r.push(p(d[h-1],c[h-1],arguments[h])),l.push(0)}};
b.move=function(g){var h=this.lastT(),r=this.dimension;if(!(g<=h||arguments.length!==r+1)){var l=this._state,c=this._velocity,d=l.length-this.dimension,e=this.bounds,f=e[0];e=e[1];h=g-h;h=1E-6<h?1/h:0;for(this._time.push(g);0<r;--r){var q=arguments[r];l.push(p(f[r-1],e[r-1],l[d++]+q));c.push(q*h)}}};b.idle=function(g){var h=this.lastT();if(!(g<h)){var r=this.dimension,l=this._state,c=this._velocity,d=l.length-r,e=this.bounds,f=e[0];e=e[1];h=g-h;this._time.push(g);for(g=r-1;0<=g;--g)l.push(p(f[g],
e[g],l[d]+h*c[d])),c.push(0),d+=1}}},{"binary-search-bounds":251,"cubic-hermite":156}],251:[function(b,N,G){function p(k,m,a,g,h,r){k=["function ",k,"(a,l,h,",g.join(","),"){",r?"":"var i\x3d",a?"l-1":"h+1",";while(l\x3c\x3dh){var m\x3d(l+h)\x3e\x3e\x3e1,x\x3da",h?".get(m)":"[m]"];r?0>m.indexOf("c")?k.push(";if(x\x3d\x3d\x3dy){return m}else if(x\x3c\x3dy){"):k.push(";var p\x3dc(x,y);if(p\x3d\x3d\x3d0){return m}else if(p\x3c\x3d0){"):k.push(";if(",m,"){i\x3dm;");a?k.push("l\x3dm+1}else{h\x3dm-1}"):
k.push("h\x3dm-1}else{l\x3dm+1}");k.push("}");r?k.push("return -1};"):k.push("return i};");return k.join("")}function n(k,m,a,g){return(new Function([p("A","x"+k+"y",m,["y"],!1,g),p("B","x"+k+"y",m,["y"],!0,g),p("P","c(x,y)"+k+"0",m,["y","c"],!1,g),p("Q","c(x,y)"+k+"0",m,["y","c"],!0,g),"function dispatchBsearch",a,"(a,y,c,l,h){if(a.shape){if(typeof(c)\x3d\x3d\x3d'function'){return Q(a,(l\x3d\x3d\x3dundefined)?0:l|0,(h\x3d\x3d\x3dundefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c\x3d\x3d\x3dundefined)?0:c|0,(l\x3d\x3d\x3dundefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)\x3d\x3d\x3d'function'){return P(a,(l\x3d\x3d\x3dundefined)?0:l|0,(h\x3d\x3d\x3dundefined)?a.length-1:h|0,y,c)}else{return A(a,(c\x3d\x3d\x3dundefined)?0:c|0,(l\x3d\x3d\x3dundefined)?a.length-1:l|0,y)}}}return dispatchBsearch",
a].join("")))()}N.exports={ge:n("\x3e\x3d",!1,"GE"),gt:n("\x3e",!1,"GT"),lt:n("\x3c",!0,"LT"),le:n("\x3c\x3d",!0,"LE"),eq:n("-",!0,"EQ",!0)}},{}],252:[function(b,N,G){var p=b("dtype");N.exports=function(n,k,m){if(!n)throw new TypeError("must specify data as first parameter");m=+(m||0)|0;if(Array.isArray(n)&&n[0]&&"number"===typeof n[0][0]){var a=n[0].length,g=n.length*a;k&&"string"!==typeof k||(k=new (p(k||"float32"))(g+m));var h=k.length-m;if(g!==h)throw Error("source length "+g+" ("+a+"x"+n.length+
") does not match destination length "+h);for(g=0;g<n.length;g++)for(h=0;h<a;h++)k[m++]=null===n[g][h]?NaN:n[g][h]}else if(k&&"string"!==typeof k)k.set(n,m);else if(a=p(k||"float32"),Array.isArray(n)||"array"===k)for(k=new a(n.length+m),g=0,a=k.length;m<a;m++,g++)k[m]=null===n[g]?NaN:n[g];else 0===m?k=new a(n):(k=new a(n.length+m),k.set(n,m));return k}},{dtype:184}],253:[function(b,N,G){var p=b("css-font/stringify"),n=[32,126];N.exports=function(k){k=k||{};var m=k.shape?k.shape:k.canvas?[k.canvas.width,
k.canvas.height]:[512,512],a=k.canvas||document.createElement("canvas"),g=k.font,h="number"===typeof k.step?[k.step,k.step]:k.step||[32,32];k=k.chars||n;g&&"string"!==typeof g&&(g=p(g));if(!Array.isArray(k))k=String(k).split("");else if(2===k.length&&"number"===typeof k[0]&&"number"===typeof k[1]){for(var r=[],l=k[0],c=0;l<=k[1];l++)r[c++]=String.fromCharCode(l);k=r}m=m.slice();a.width=m[0];a.height=m[1];r=a.getContext("2d");r.fillStyle="#000";r.fillRect(0,0,a.width,a.height);r.font=g;r.textAlign=
"center";r.textBaseline="middle";r.fillStyle="#fff";g=h[0]/2;c=h[1]/2;for(l=0;l<k.length;l++)r.fillText(k[l],g,c),(g+=h[0])>m[0]-h[0]/2&&(g=h[0]/2,c+=h[1]);return a}},{"css-font/stringify":153}],254:[function(b,N,G){function p(a,g){g||(g={});if("string"===typeof a||Array.isArray(a))g.family=a;var h=Array.isArray(g.family)?g.family.join(", "):g.family;if(!h)throw Error("`family` must be defined");var r=g.size||g.fontSize||g.em||48;a=[g.style||g.fontStyle||"",g.weight||g.fontWeight||"",r].join(" ")+
"px "+h;var l=g.origin||"top";if(p.cache[h]&&r<=p.cache[h].em)return n(p.cache[h],l);var c=g.canvas||p.canvas,d=c.getContext("2d"),e=void 0!==g.upper?g.upper:"H",f=void 0!==g.lower?g.lower:"x",q=void 0!==g.descent?g.descent:"p",t=void 0!==g.ascent?g.ascent:"h",w=void 0!==g.tittle?g.tittle:"i";g=void 0!==g.overshoot?g.overshoot:"O";var x=Math.ceil(1.5*r);c.height=x;c.width=.5*x;d.font=a;a={top:0};d.clearRect(0,0,x,x);d.textBaseline="top";d.fillStyle="black";d.fillText("H",0,0);c=k(d.getImageData(0,
0,x,x));d.clearRect(0,0,x,x);d.textBaseline="bottom";d.fillText("H",0,x);var z=k(d.getImageData(0,0,x,x));a.lineHeight=a.bottom=x-z+c;d.clearRect(0,0,x,x);d.textBaseline="alphabetic";d.fillText("H",0,x);z=k(d.getImageData(0,0,x,x));z=x-z-1+c;a.baseline=a.alphabetic=z;d.clearRect(0,0,x,x);d.textBaseline="middle";d.fillText("H",0,.5*x);var B=k(d.getImageData(0,0,x,x));a.median=a.middle=x-B-1+c-.5*x;d.clearRect(0,0,x,x);d.textBaseline="hanging";d.fillText("H",0,.5*x);B=k(d.getImageData(0,0,x,x));a.hanging=
x-B-1+c-.5*x;d.clearRect(0,0,x,x);d.textBaseline="ideographic";d.fillText("H",0,x);B=k(d.getImageData(0,0,x,x));a.ideographic=x-B-1+c;e&&(d.clearRect(0,0,x,x),d.textBaseline="top",d.fillText(e,0,0),a.upper=k(d.getImageData(0,0,x,x)),a.capHeight=a.baseline-a.upper);f&&(d.clearRect(0,0,x,x),d.textBaseline="top",d.fillText(f,0,0),a.lower=k(d.getImageData(0,0,x,x)),a.xHeight=a.baseline-a.lower);w&&(d.clearRect(0,0,x,x),d.textBaseline="top",d.fillText(w,0,0),a.tittle=k(d.getImageData(0,0,x,x)));t&&(d.clearRect(0,
0,x,x),d.textBaseline="top",d.fillText(t,0,0),a.ascent=k(d.getImageData(0,0,x,x)));q&&(d.clearRect(0,0,x,x),d.textBaseline="top",d.fillText(q,0,0),a.descent=m(d.getImageData(0,0,x,x)));g&&(d.clearRect(0,0,x,x),d.textBaseline="top",d.fillText(g,0,0),d=m(d.getImageData(0,0,x,x)),a.overshoot=d-z);for(var A in a)a[A]/=r;a.em=r;p.cache[h]=a;return n(a,l)}function n(a,g){var h={};"string"===typeof g&&(g=a[g]);for(var r in a)"em"!==r&&(h[r]=a[r]-g);return h}function k(a){var g=a.height;a=a.data;for(var h=
3;h<a.length;h+=4)if(0!==a[h])return Math.floor(.25*(h-3)/g)}function m(a){var g=a.height;a=a.data;for(var h=a.length-1;0<h;h-=4)if(0!==a[h])return Math.floor(.25*(h-3)/g)}N.exports=p;p.canvas=document.createElement("canvas");p.cache={}},{}],255:[function(b,N,G){function p(e,f,q,t,w,x){this._color=e;this.key=f;this.value=q;this.left=t;this.right=w;this._count=x}function n(e){return new p(e._color,e.key,e.value,e.left,e.right,e._count)}function k(e,f){return new p(e,f.key,f.value,f.left,f.right,f._count)}
function m(e){e._count=1+(e.left?e.left._count:0)+(e.right?e.right._count:0)}function a(e,f){this._compare=e;this.root=f}function g(e,f){if(f.left){var q=g(e,f.left);if(q)return q}if(q=e(f.key,f.value))return q;if(f.right)return g(e,f.right)}function h(e,f,q,t){if(0>=f(e,t.key)){if(t.left){var w=h(e,f,q,t.left);if(w)return w}if(w=q(t.key,t.value))return w}if(t.right)return h(e,f,q,t.right)}function r(e,f,q,t,w){var x=q(e,w.key),z=q(f,w.key);if(0>=x&&(w.left&&(x=r(e,f,q,t,w.left))||0<z&&(x=t(w.key,
w.value))))return x;if(0<z&&w.right)return r(e,f,q,t,w.right)}function l(e,f){this.tree=e;this._stack=f}function c(e,f){e.key=f.key;e.value=f.value;e.left=f.left;e.right=f.right;e._color=f._color;e._count=f._count}function d(e,f){return e<f?-1:e>f?1:0}N.exports=function(e){return new a(e||d,null)};b=a.prototype;Object.defineProperty(b,"keys",{get:function(){var e=[];this.forEach(function(f,q){e.push(f)});return e}});Object.defineProperty(b,"values",{get:function(){var e=[];this.forEach(function(f,
q){e.push(q)});return e}});Object.defineProperty(b,"length",{get:function(){return this.root?this.root._count:0}});b.insert=function(e,f){for(var q=this._compare,t=this.root,w=[],x=[];t;){var z=q(e,t.key);w.push(t);x.push(z);t=0>=z?t.left:t.right}w.push(new p(0,e,f,null,null,1));for(e=w.length-2;0<=e;--e)t=w[e],w[e]=0>=x[e]?new p(t._color,t.key,t.value,w[e+1],t.right,t._count+1):new p(t._color,t.key,t.value,t.left,w[e+1],t._count+1);for(e=w.length-1;1<e;--e){x=w[e-1];t=w[e];if(1===x._color||1===t._color)break;
f=w[e-2];if(f.left===x)if(x.left===t)if((z=f.right)&&0===z._color)x._color=1,f.right=k(1,z),f._color=0,--e;else{f._color=0;f.left=x.right;x._color=1;x.right=f;w[e-2]=x;w[e-1]=t;m(f);m(x);3<=e&&(e=w[e-3],e.left===f?e.left=x:e.right=x);break}else if((z=f.right)&&0===z._color)x._color=1,f.right=k(1,z),f._color=0,--e;else{x.right=t.left;f._color=0;f.left=t.right;t._color=1;t.left=x;t.right=f;w[e-2]=t;w[e-1]=x;m(f);m(x);m(t);3<=e&&(e=w[e-3],e.left===f?e.left=t:e.right=t);break}else if(x.right===t)if((z=
f.left)&&0===z._color)x._color=1,f.left=k(1,z),f._color=0,--e;else{f._color=0;f.right=x.left;x._color=1;x.left=f;w[e-2]=x;w[e-1]=t;m(f);m(x);3<=e&&(e=w[e-3],e.right===f?e.right=x:e.left=x);break}else if((z=f.left)&&0===z._color)x._color=1,f.left=k(1,z),f._color=0,--e;else{x.left=t.right;f._color=0;f.right=t.left;t._color=1;t.right=x;t.left=f;w[e-2]=t;w[e-1]=x;m(f);m(x);m(t);3<=e&&(e=w[e-3],e.right===f?e.right=t:e.left=t);break}}w[0]._color=1;return new a(q,w[0])};b.forEach=function(e,f,q){if(this.root)switch(arguments.length){case 1:return g(e,
this.root);case 2:return h(f,this._compare,e,this.root);case 3:if(!(0<=this._compare(f,q)))return r(f,q,this._compare,e,this.root)}};Object.defineProperty(b,"begin",{get:function(){for(var e=[],f=this.root;f;)e.push(f),f=f.left;return new l(this,e)}});Object.defineProperty(b,"end",{get:function(){for(var e=[],f=this.root;f;)e.push(f),f=f.right;return new l(this,e)}});b.at=function(e){if(0>e)return new l(this,[]);for(var f=this.root,q=[];;){q.push(f);if(f.left){if(e<f.left._count){f=f.left;continue}e-=
f.left._count}if(!e)return new l(this,q);--e;if(f.right){if(e>=f.right._count)break;f=f.right}else break}return new l(this,[])};b.ge=function(e){for(var f=this._compare,q=this.root,t=[],w=0;q;){var x=f(e,q.key);t.push(q);0>=x&&(w=t.length);q=0>=x?q.left:q.right}t.length=w;return new l(this,t)};b.gt=function(e){for(var f=this._compare,q=this.root,t=[],w=0;q;){var x=f(e,q.key);t.push(q);0>x&&(w=t.length);q=0>x?q.left:q.right}t.length=w;return new l(this,t)};b.lt=function(e){for(var f=this._compare,
q=this.root,t=[],w=0;q;){var x=f(e,q.key);t.push(q);0<x&&(w=t.length);q=0>=x?q.left:q.right}t.length=w;return new l(this,t)};b.le=function(e){for(var f=this._compare,q=this.root,t=[],w=0;q;){var x=f(e,q.key);t.push(q);0<=x&&(w=t.length);q=0>x?q.left:q.right}t.length=w;return new l(this,t)};b.find=function(e){for(var f=this._compare,q=this.root,t=[];q;){var w=f(e,q.key);t.push(q);if(0===w)return new l(this,t);q=0>=w?q.left:q.right}return new l(this,[])};b.remove=function(e){return(e=this.find(e))?
e.remove():this};b.get=function(e){for(var f=this._compare,q=this.root;q;){var t=f(e,q.key);if(0===t)return q.value;q=0>=t?q.left:q.right}};b=l.prototype;Object.defineProperty(b,"valid",{get:function(){return 0<this._stack.length}});Object.defineProperty(b,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},enumerable:!0});b.clone=function(){return new l(this.tree,this._stack.slice())};b.remove=function(){var e=this._stack;if(0===e.length)return this.tree;var f=
Array(e.length),q=e[e.length-1];f[f.length-1]=new p(q._color,q.key,q.value,q.left,q.right,q._count);for(var t=e.length-2;0<=t;--t)q=e[t],f[t]=q.left===e[t+1]?new p(q._color,q.key,q.value,f[t+1],q.right,q._count):new p(q._color,q.key,q.value,q.left,f[t+1],q._count);q=f[f.length-1];if(q.left&&q.right){e=f.length;for(q=q.left;q.right;)f.push(q),q=q.right;t=f[e-1];f.push(new p(q._color,t.key,t.value,q.left,q.right,q._count));f[e-1].key=q.key;f[e-1].value=q.value;for(t=f.length-2;t>=e;--t)q=f[t],f[t]=
new p(q._color,q.key,q.value,q.left,f[t+1],q._count);f[e-1].left=f[e]}q=f[f.length-1];if(0===q._color)for(t=f[f.length-2],t.left===q?t.left=null:t.right===q&&(t.right=null),f.pop(),t=0;t<f.length;++t)f[t]._count--;else if(q.left||q.right)for(q.left?c(q,q.left):q.right&&c(q,q.right),q._color=1,t=0;t<f.length-1;++t)f[t]._count--;else{if(1===f.length)return new a(this.tree._compare,null);for(t=0;t<f.length;++t)f[t]._count--;t=f[f.length-2];for(var w,x,z,B=f.length-1;0<=B;--B){e=f[B];if(0===B){e._color=
1;break}w=f[B-1];if(w.left===e){x=w.right;if(x.right&&0===x.right._color){x=w.right=n(x);z=x.right=n(x.right);w.right=x.left;x.left=w;x.right=z;x._color=w._color;e._color=1;w._color=1;z._color=1;m(w);m(x);if(1<B){var A=f[B-2];A.left===w?A.left=x:A.right=x}f[B-1]=x;break}else if(x.left&&0===x.left._color){x=w.right=n(x);z=x.left=n(x.left);w.right=z.left;x.left=z.right;z.left=w;z.right=x;z._color=w._color;w._color=1;x._color=1;e._color=1;m(w);m(x);m(z);1<B&&(A=f[B-2],A.left===w?A.left=z:A.right=z);
f[B-1]=z;break}if(1===x._color)if(0===w._color){w._color=1;w.right=k(0,x);break}else w.right=k(0,x);else x=n(x),w.right=x.left,x.left=w,x._color=w._color,w._color=0,m(w),m(x),1<B&&(A=f[B-2],A.left===w?A.left=x:A.right=x),f[B-1]=x,f[B]=w,B+1<f.length?f[B+1]=e:f.push(e),B+=2}else{x=w.left;if(x.left&&0===x.left._color){x=w.left=n(x);z=x.left=n(x.left);w.left=x.right;x.right=w;x.left=z;x._color=w._color;e._color=1;w._color=1;z._color=1;m(w);m(x);1<B&&(A=f[B-2],A.right===w?A.right=x:A.left=x);f[B-1]=x;
break}else if(x.right&&0===x.right._color){x=w.left=n(x);z=x.right=n(x.right);w.left=z.right;x.right=z.left;z.right=w;z.left=x;z._color=w._color;w._color=1;x._color=1;e._color=1;m(w);m(x);m(z);1<B&&(A=f[B-2],A.right===w?A.right=z:A.left=z);f[B-1]=z;break}if(1===x._color)if(0===w._color){w._color=1;w.left=k(0,x);break}else w.left=k(0,x);else x=n(x),w.left=x.right,x.right=w,x._color=w._color,w._color=0,m(w),m(x),1<B&&(A=f[B-2],A.right===w?A.right=x:A.left=x),f[B-1]=x,f[B]=w,B+1<f.length?f[B+1]=e:f.push(e),
B+=2}}t.left===q?t.left=null:t.right=null}return new a(this.tree._compare,f[0])};Object.defineProperty(b,"key",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].key},enumerable:!0});Object.defineProperty(b,"value",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(b,"index",{get:function(){var e=0,f=this._stack;if(0===f.length)return(e=this.tree.root)?e._count:0;f[f.length-1].left&&(e=f[f.length-
1].left._count);for(var q=f.length-2;0<=q;--q)f[q+1]===f[q].right&&(++e,f[q].left&&(e+=f[q].left._count));return e},enumerable:!0});b.next=function(){var e=this._stack;if(0!==e.length){var f=e[e.length-1];if(f.right)for(f=f.right;f;)e.push(f),f=f.left;else for(e.pop();0<e.length&&e[e.length-1].right===f;)f=e[e.length-1],e.pop()}};Object.defineProperty(b,"hasNext",{get:function(){var e=this._stack;if(0===e.length)return!1;if(e[e.length-1].right)return!0;for(var f=e.length-1;0<f;--f)if(e[f-1].left===
e[f])return!0;return!1}});b.update=function(e){var f=this._stack;if(0===f.length)throw Error("Can't update empty node!");var q=Array(f.length),t=f[f.length-1];q[q.length-1]=new p(t._color,t.key,e,t.left,t.right,t._count);for(e=f.length-2;0<=e;--e)t=f[e],q[e]=t.left===f[e+1]?new p(t._color,t.key,t.value,q[e+1],t.right,t._count):new p(t._color,t.key,t.value,t.left,q[e+1],t._count);return new a(this.tree._compare,q[0])};b.prev=function(){var e=this._stack;if(0!==e.length){var f=e[e.length-1];if(f.left)for(f=
f.left;f;)e.push(f),f=f.right;else for(e.pop();0<e.length&&e[e.length-1].left===f;)f=e[e.length-1],e.pop()}};Object.defineProperty(b,"hasPrev",{get:function(){var e=this._stack;if(0===e.length)return!1;if(e[e.length-1].left)return!0;for(var f=e.length-1;0<f;--f)if(e[f-1].right===e[f])return!0;return!1}})},{}],256:[function(b,N,G){function p(m){if(0>m)return Number("0/0");for(var a=k[0],g=k.length-1;0<g;--g)a+=k[g]/(m+g);g=m+4.7421875+.5;return.5*Math.log(2*Math.PI)+(m+.5)*Math.log(g)-g+Math.log(a)-
Math.log(m)}var n=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9.984369578019572E-6,1.5056327351493116E-7],k=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3.399464998481189E-5,4.652362892704858E-5,-9.837447530487956E-5,1.580887032249125E-4,-2.1026444172410488E-4,2.1743961811521265E-4,-1.643181065367639E-4,8.441822398385275E-5,-2.6190838401581408E-5,3.6899182659531625E-6];
N.exports=function g(a){if(.5>a)return Math.PI/(Math.sin(Math.PI*a)*g(1-a));if(100<a)return Math.exp(p(a));--a;for(var h=n[0],r=1;9>r;r++)h+=n[r]/(a+r);r=a+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(r,a+.5)*Math.exp(-r)*h};N.exports.log=p},{}],257:[function(b,N,G){N.exports=function(p,n){if("string"!==typeof p)throw new TypeError("must specify type string");n=n||{};if("undefined"===typeof document&&!n.canvas)return null;var k=n.canvas||document.createElement("canvas");"number"===typeof n.width&&(k.width=
n.width);"number"===typeof n.height&&(k.height=n.height);var m;try{var a=[p];0===p.indexOf("webgl")&&a.push("experimental-"+p);for(p=0;p<a.length;p++)if(m=k.getContext(a[p],n))return m}catch(g){m=null}return m||null}},{}],258:[function(b,N,G){function p(x,z){x[0]=z[0];x[1]=z[1];x[2]=z[2];return x}function n(x){this.gl=x;this.pixelRatio=1;this.bounds=[[-10,-10,-10],[10,10,10]];this.ticks=[[],[],[]];this.autoTicks=!0;this.tickSpacing=[1,1,1];this.tickEnable=[!0,!0,!0];this.tickFont=["sans-serif","sans-serif",
"sans-serif"];this.tickSize=[12,12,12];this.tickAngle=[0,0,0];this.tickAlign=["auto","auto","auto"];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickPad=[10,10,10];this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]};this.labels=["x","y","z"];this.labelEnable=[!0,!0,!0];this.labelFont="sans-serif";this.labelSize=[20,20,20];this.labelAngle=[0,0,0];this.labelAlign=["auto","auto","auto"];this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labelPad=[10,10,10];this.lineEnable=[!0,!0,!0];this.lineMirror=
[!1,!1,!1];this.lineWidth=[1,1,1];this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.lineTickEnable=[!0,!0,!0];this.lineTickMirror=[!1,!1,!1];this.lineTickLength=[0,0,0];this.lineTickWidth=[1,1,1];this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.gridEnable=[!0,!0,!0];this.gridWidth=[1,1,1];this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.zeroEnable=[!0,!0,!0];this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.zeroLineWidth=[2,2,2];this.backgroundEnable=[!1,!1,!1];this.backgroundColor=
[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]];this._firstInit=!0;this._lines=this._text=null;this._background=h(x)}function k(){this.primalOffset=[0,0,0];this.primalMinor=[0,0,0];this.mirrorOffset=[0,0,0];this.mirrorMinor=[0,0,0]}function m(x,z,B,A,D){var C=x.primalOffset,v=x.primalMinor,y=x.mirrorOffset;x=x.mirrorMinor;A=A[z];for(var F=0;3>F;++F)if(z!==F){var J=C,K=y,O=v,I=x;A&1<<F&&(J=y,K=C,O=x,I=v);J[F]=B[0][F];K[F]=B[1][F];0<D[F]?(O[F]=-1,I[F]=0):(O[F]=0,I[F]=1)}}N.exports=function(x,z){x=new n(x);
x.update(z);return x};var a=b("./lib/text.js"),g=b("./lib/lines.js"),h=b("./lib/background.js"),r=b("./lib/cube.js"),l=b("./lib/ticks.js"),c=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);b=n.prototype;b.update=function(x){function z(I,L,H){if(H in x){var M=x[H],Q=this[H],Z;(I?Array.isArray(M)&&Array.isArray(M[0]):Array.isArray(M))?this[H]=Z=[L(M[0]),L(M[1]),L(M[2])]:this[H]=Z=[L(M),L(M),L(M)];for(I=0;3>I;++I)if(Z[I]!==Q[I])return!0}return!1}x=x||{};var B=z.bind(this,!1,Number),A=z.bind(this,
!1,Boolean),D=z.bind(this,!1,String),C=z.bind(this,!0,function(I){if(Array.isArray(I)){if(3===I.length)return[+I[0],+I[1],+I[2],1];if(4===I.length)return[+I[0],+I[1],+I[2],+I[3]]}return[0,0,0,1]}),v=!1,y=!1;if("bounds"in x){var F=x.bounds,J=0;for(;2>J;++J)for(var K=0;3>K;++K)F[J][K]!==this.bounds[J][K]&&(y=!0),this.bounds[J][K]=F[J][K]}if("ticks"in x){var O=x.ticks;v=!0;this.autoTicks=!1;for(J=0;3>J;++J)this.tickSpacing[J]=0}else B("tickSpacing")&&(y=this.autoTicks=!0);this._firstInit&&("ticks"in
x||"tickSpacing"in x||(this.autoTicks=!0),v=y=!0,this._firstInit=!1);y&&this.autoTicks&&(O=l.create(this.bounds,this.tickSpacing),v=!0);if(v){for(J=0;3>J;++J)O[J].sort(function(I,L){return I.x-L.x});l.equal(O,this.ticks)?v=!1:this.ticks=O}A("tickEnable");D("tickFont")&&(v=!0);B("tickSize");B("tickAngle");B("tickPad");C("tickColor");O=D("labels");D("labelFont")&&(O=!0);A("labelEnable");B("labelSize");B("labelPad");C("labelColor");A("lineEnable");A("lineMirror");B("lineWidth");C("lineColor");A("lineTickEnable");
A("lineTickMirror");B("lineTickLength");B("lineTickWidth");C("lineTickColor");A("gridEnable");B("gridWidth");C("gridColor");A("zeroEnable");C("zeroLineColor");B("zeroLineWidth");A("backgroundEnable");C("backgroundColor");this._text?this._text&&(O||v)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=a(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont);this._lines&&v&&(this._lines.dispose(),this._lines=null);this._lines||(this._lines=
g(this.gl,this.bounds,this.ticks))};var d=[new k,new k,new k],e=[0,0,0],f={model:c,view:c,projection:c,_ortho:!1};b.isOpaque=function(){return!0};b.isTransparent=function(){return!1};b.drawTransparent=function(x){};var q=[0,0,0],t=[0,0,0],w=[0,0,0];b.draw=function(x){function z(H){L=[0,0,0];L[H]=1}function B(H,M,Q){var Z=(H+1)%3;H=(H+2)%3;var ca=M[Z];M=M[H];var W=Q[Z];Q=Q[H];0<ca&&0<Q?z(Z):0<ca&&0>Q?z(Z):0>ca&&0<Q?z(Z):0>ca&&0>Q?z(Z):0<M&&0<W?z(H):0<M&&0>W?z(H):0>M&&0<W?z(H):0>M&&0>W&&z(H)}x=x||f;
var A=this.gl,D=x.model||c,C=x.view||c,v=x.projection||c,y=this.bounds;x=x._ortho||!1;var F=r(D,C,v,y,x),J=F.cubeEdges;F=F.axis;x=(x?2:1)*this.pixelRatio*(v[3]*C[12]+v[7]*C[13]+v[11]*C[14]+v[15]*C[15])/A.drawingBufferHeight;for(A=0;3>A;++A)this.lastCubeProps.cubeEdges[A]=J[A],this.lastCubeProps.axis[A]=F[A];for(A=0;3>A;++A)m(d[A],A,this.bounds,J,F);A=this.gl;for(A=0;3>A;++A)e[A]=this.backgroundEnable[A]?F[A]:0;this._background.draw(D,C,v,y,e,this.backgroundColor);this._lines.bind(D,C,v,this);for(A=
0;3>A;++A){var K=[0,0,0];K[A]=0<F[A]?y[1][A]:y[0][A];for(J=0;2>J;++J){var O=(A+1+J)%3,I=(A+1+(J^1))%3;this.gridEnable[O]&&this._lines.drawGrid(O,I,this.bounds,K,this.gridColor[O],this.gridWidth[O]*this.pixelRatio)}for(J=0;2>J;++J)O=(A+1+J)%3,I=(A+1+(J^1))%3,this.zeroEnable[I]&&0>=Math.min(y[0][I],y[1][I])&&0<=Math.max(y[0][I],y[1][I])&&this._lines.drawZero(O,I,this.bounds,K,this.zeroLineColor[I],this.zeroLineWidth[I]*this.pixelRatio)}for(A=0;3>A;++A){this.lineEnable[A]&&this._lines.drawAxisLine(A,
this.bounds,d[A].primalOffset,this.lineColor[A],this.lineWidth[A]*this.pixelRatio);this.lineMirror[A]&&this._lines.drawAxisLine(A,this.bounds,d[A].mirrorOffset,this.lineColor[A],this.lineWidth[A]*this.pixelRatio);F=p(q,d[A].primalMinor);K=p(t,d[A].mirrorMinor);O=this.lineTickLength;for(J=0;3>J;++J)I=x/D[5*J],F[J]=F[J]*O[J]*I,K[J]=K[J]*O[J]*I;this.lineTickEnable[A]&&this._lines.drawAxisTicks(A,d[A].primalOffset,F,this.lineTickColor[A],this.lineTickWidth[A]*this.pixelRatio);this.lineTickMirror[A]&&
this._lines.drawAxisTicks(A,d[A].mirrorOffset,K,this.lineTickColor[A],this.lineTickWidth[A]*this.pixelRatio)}this._lines.unbind();this._text.bind(D,C,v,this.pixelRatio);for(A=0;3>A;++A){C=d[A].primalMinor;v=d[A].mirrorMinor;F=p(w,d[A].primalOffset);for(J=0;3>J;++J)this.lineTickEnable[A]&&(F[J]+=x*C[J]*Math.max(this.lineTickLength[J],0)/D[5*J]);K=[0,0,0];K[A]=1;if(this.tickEnable[A]){-3600===this.tickAngle[A]?(this.tickAngle[A]=0,this.tickAlign[A]="auto"):this.tickAlign[A]=-1;J=1;O=[this.tickAlign[A],
.5,J];O[0]="auto"===O[0]?0:parseInt(""+O[0]);var L=[0,0,0];B(A,C,v);for(J=0;3>J;++J)F[J]+=x*C[J]*this.tickPad[J]/D[5*J];this._text.drawTicks(A,this.tickSize[A],this.tickAngle[A],F,this.tickColor[A],K,L,O)}if(this.labelEnable[A]){J=0;L=[0,0,0];4<this.labels[A].length&&(z(A),J=1);O=[this.labelAlign[A],.5,J];O[0]="auto"===O[0]?0:parseInt(""+O[0]);for(J=0;3>J;++J)F[J]+=x*C[J]*this.labelPad[J]/D[5*J];F[A]+=.5*(y[0][A]+y[1][A]);this._text.drawLabel(A,this.labelSize[A],this.labelAngle[A],F,this.labelColor[A],
[0,0,0],L,O)}}this._text.unbind()};b.dispose=function(){this._text.dispose();this._lines.dispose();this._background.dispose();this.gl=this._background=this._text=this._lines=null}},{"./lib/background.js":259,"./lib/cube.js":260,"./lib/lines.js":261,"./lib/text.js":263,"./lib/ticks.js":264}],259:[function(b,N,G){function p(a,g,h,r){this.gl=a;this.buffer=g;this.vao=h;this.shader=r}N.exports=function(a){for(var g=[],h=[],r=0,l=0;3>l;++l)for(var c=(l+1)%3,d=(l+2)%3,e=[0,0,0],f=[0,0,0],q=-1;1>=q;q+=2){h.push(r,
r+2,r+1,r+1,r+2,r+3);e[l]=q;f[l]=q;for(var t=-1;1>=t;t+=2){e[c]=t;for(var w=-1;1>=w;w+=2)e[d]=w,g.push(e[0],e[1],e[2],f[0],f[1],f[2]),r+=1}t=c;c=d;d=t}g=n(a,new Float32Array(g));h=n(a,new Uint16Array(h),a.ELEMENT_ARRAY_BUFFER);h=k(a,[{buffer:g,type:a.FLOAT,size:3,offset:0,stride:24},{buffer:g,type:a.FLOAT,size:3,offset:12,stride:24}],h);r=m(a);r.attributes.position.location=0;r.attributes.normal.location=1;return new p(a,g,h,r)};var n=b("gl-buffer"),k=b("gl-vao"),m=b("./shaders").bg;b=p.prototype;
b.draw=function(a,g,h,r,l,c){for(var d=!1,e=0;3>e;++e)d=d||l[e];d&&(d=this.gl,d.enable(d.POLYGON_OFFSET_FILL),d.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:a,view:g,projection:h,bounds:r,enable:l,colors:c},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),d.disable(d.POLYGON_OFFSET_FILL))};b.dispose=function(){this.vao.dispose();this.buffer.dispose();this.shader.dispose()}},{"./shaders":262,"gl-buffer":267,"gl-vao":361}],260:[function(b,N,G){N.exports=function(q,
t,w,x,z){n(a,t,q);n(a,w,a);for(q=t=0;2>q;++q)for(r[2]=x[q][2],w=0;2>w;++w){r[1]=x[w][1];for(var B=0;2>B;++B){r[0]=x[B][0];for(var A=g[t],D=r,C=a,v=0;4>v;++v){A[v]=C[12+v];for(var y=0;3>y;++y)A[v]+=D[y]*C[4*y+v]}t+=1}}x=-1;for(q=0;8>q;++q){t=g[q][3];for(w=0;3>w;++w)h[q][w]=g[q][w]/t;z&&(h[q][2]*=-1);0>t&&(0>x?x=q:h[q][2]<h[x][2]&&(x=q))}if(0>x)for(q=x=0;3>q;++q){t=(q+2)%3;z=(q+1)%3;B=w=-1;for(A=0;2>A;++A)D=A<<q,C=D+(A<<t)+(1-A<<z),v=D+(1-A<<t)+(A<<z),0>m(h[D],h[C],h[v],l)||(A?w=1:B=1);if(!(0>w||0>
B))for(A=0;2>A;++A){D=A<<q;C=D+(A<<t)+(1-A<<z);v=D+(1-A<<t)+(A<<z);a:{D=[g[D],g[C],g[v],g[D+(1<<t)+(1<<z)]];for(v=0;v<c.length;++v)if(D=k.positive(D,c[v]),3>D.length){D=0;break a}v=D[0];C=v[0]/v[3];y=v[1]/v[3];var F=0;for(v=1;v+1<D.length;++v){var J=D[v],K=D[v+1];F+=Math.abs((J[0]/J[3]-C)*(K[1]/K[3]-y)-(J[1]/J[3]-y)*(K[0]/K[3]-C))}D=F}A?w=D:B=D}B>w&&(x|=1<<q)}t=7^x;A=-1;for(q=0;8>q;++q)q!==x&&q!==t&&(0>A?A=q:h[A][1]>h[q][1]&&(A=q));w=-1;for(q=0;3>q;++q)D=A^1<<q,D!==x&&D!==t&&(0>w&&(w=D),z=h[D],z[0]<
h[w][0]&&(w=D));B=-1;for(q=0;3>q;++q)D=A^1<<q,D!==x&&D!==t&&D!==w&&(0>B&&(B=D),z=h[D],z[0]>h[B][0]&&(B=D));z=d;z[0]=z[1]=z[2]=0;z[p.log2(w^A)]=A&w;z[p.log2(A^B)]=A&B;q=B^7;q===x||q===t?(q=w^7,z[p.log2(B^q)]=q&B):z[p.log2(w^q)]=q&w;z=e;for(q=0;3>q;++q)z[q]=x&1<<q?-1:1;return f};var p=b("bit-twiddle"),n=b("gl-mat4/multiply"),k=b("split-polygon"),m=b("robust-orientation"),a=Array(16),g=Array(8),h=Array(8),r=Array(3),l=[0,0,0];(function(){for(var q=0;8>q;++q)g[q]=[1,1,1,1],h[q]=[1,1,1]})();var c=[[0,
0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]],d=[1,1,1],e=[0,0,0],f={cubeEdges:d,axis:e}},{"bit-twiddle":104,"gl-mat4/multiply":301,"robust-orientation":548,"split-polygon":567}],261:[function(b,N,G){function p(e){e[0]=e[1]=e[2]=0;return e}function n(e,f){e[0]=f[0];e[1]=f[1];e[2]=f[2];return e}function k(e,f,q,t,w,x,z,B){this.gl=e;this.vertBuffer=f;this.vao=q;this.shader=t;this.tickCount=w;this.tickOffset=x;this.gridCount=z;this.gridOffset=B}N.exports=function(e,f,q){var t=
[];f=[0,0,0];var w=[0,0,0],x=[0,0,0],z=[0,0,0];t.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var B=0;3>B;++B){for(var A=t.length/3|0,D=0;D<q[B].length;++D){var C=+q[B][D].x;t.push(C,0,1,C,1,1,C,0,-1,C,0,-1,C,1,1,C,1,-1)}C=t.length/3|0;f[B]=A;w[B]=C-A;A=t.length/3|0;for(D=0;D<q[B].length;++D)C=+q[B][D].x,t.push(C,0,1,C,1,1,C,0,-1,C,0,-1,C,1,1,C,1,-1);C=t.length/3|0;x[B]=A;z[B]=C-A}q=m(e,new Float32Array(t));t=a(e,[{buffer:q,type:e.FLOAT,size:3,stride:0,offset:0}]);B=g(e);B.attributes.position.location=
0;return new k(e,q,t,B,w,f,z,x)};var m=b("gl-buffer"),a=b("gl-vao"),g=b("./shaders").line,h=[0,0,0],r=[0,0,0],l=[0,0,0],c=[0,0,0],d=[1,1];b=k.prototype;b.bind=function(e,f,q){this.shader.bind();this.shader.uniforms.model=e;this.shader.uniforms.view=f;this.shader.uniforms.projection=q;d[0]=this.gl.drawingBufferWidth;d[1]=this.gl.drawingBufferHeight;this.shader.uniforms.screenShape=d;this.vao.bind()};b.unbind=function(){this.vao.unbind()};b.drawAxisLine=function(e,f,q,t,w){var x=p(r);this.shader.uniforms.majorAxis=
r;x[e]=f[1][e]-f[0][e];this.shader.uniforms.minorAxis=x;q=n(c,q);q[e]+=f[0][e];this.shader.uniforms.offset=q;this.shader.uniforms.lineWidth=w;this.shader.uniforms.color=t;f=p(l);f[(e+2)%3]=1;this.shader.uniforms.screenAxis=f;this.vao.draw(this.gl.TRIANGLES,6);f=p(l);f[(e+1)%3]=1;this.shader.uniforms.screenAxis=f;this.vao.draw(this.gl.TRIANGLES,6)};b.drawAxisTicks=function(e,f,q,t,w){if(this.tickCount[e]){var x=p(h);x[e]=1;this.shader.uniforms.majorAxis=x;this.shader.uniforms.offset=f;this.shader.uniforms.minorAxis=
q;this.shader.uniforms.color=t;this.shader.uniforms.lineWidth=w;f=p(l);f[e]=1;this.shader.uniforms.screenAxis=f;this.vao.draw(this.gl.TRIANGLES,this.tickCount[e],this.tickOffset[e])}};b.drawGrid=function(e,f,q,t,w,x){if(this.gridCount[e]){var z=p(r);z[f]=q[1][f]-q[0][f];this.shader.uniforms.minorAxis=z;t=n(c,t);t[f]+=q[0][f];this.shader.uniforms.offset=t;f=p(h);f[e]=1;this.shader.uniforms.majorAxis=f;f=p(l);f[e]=1;this.shader.uniforms.screenAxis=f;this.shader.uniforms.lineWidth=x;this.shader.uniforms.color=
w;this.vao.draw(this.gl.TRIANGLES,this.gridCount[e],this.gridOffset[e])}};b.drawZero=function(e,f,q,t,w,x){var z=p(r);this.shader.uniforms.majorAxis=z;z[e]=q[1][e]-q[0][e];this.shader.uniforms.minorAxis=z;t=n(c,t);t[e]+=q[0][e];this.shader.uniforms.offset=t;e=p(l);e[f]=1;this.shader.uniforms.screenAxis=e;this.shader.uniforms.lineWidth=x;this.shader.uniforms.color=w;this.vao.draw(this.gl.TRIANGLES,6)};b.dispose=function(){this.vao.dispose();this.vertBuffer.dispose();this.shader.dispose()}},{"./shaders":262,
"gl-buffer":267,"gl-vao":361}],262:[function(b,N,G){N=b("glslify");var p=b("gl-shader"),n=N(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp \x3d projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major \x3d position.x * majorAxis;\n  vec3 minor \x3d position.y * minorAxis;\n\n  vec3 vPosition \x3d major + minor + offset;\n  vec3 pPosition \x3d project(vPosition);\n  vec3 offset \x3d project(vPosition + screenAxis * position.z);\n\n  vec2 screen \x3d normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position \x3d vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),
k=N(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor \x3d color;\n}"]);G.line=function(r){return p(r,n,k,null,[{name:"position",type:"vec3"}])};var m=N(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp \x3d projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A \x3d project(a);\n  vec3 B \x3d project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI \x3d 3.141592;\nconst float TWO_PI \x3d 2.0 * PI;\nconst float HALF_PI \x3d 0.5 * PI;\nconst float ONE_AND_HALF_PI \x3d 1.5 * PI;\n\nint option \x3d int(floor(alignOpt.x + 0.001));\nfloat hv_ratio \x3d       alignOpt.y;\nbool enableAlign \x3d    (alignOpt.z !\x3d 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a \x3c 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b \x3d positive_angle(a);\n  return ((b \x3e HALF_PI) \x26\x26 (b \x3c\x3d ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b \x3d positive_angle(a);\n\n  return\n    (b \x3c (      ratio) * HALF_PI) ? 0.0 :\n    (b \x3c (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b \x3c (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b \x3c (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b \x3d positive_angle(a);\n  float div \x3d TWO_PI / float(n);\n  float c \x3d roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option \x3e  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option \x3d\x3d 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option \x3d\x3d 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option \x3d\x3d 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option \x3d\x3d-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle \x3d (axis.x \x3d\x3d 0.0) \x26\x26\n                   (axis.y \x3d\x3d 0.0) \x26\x26\n                   (axis.z \x3d\x3d 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance \x3d position.z;\n  vec3 dataPosition \x3d axisDistance * axis + offset;\n\n  float beta \x3d angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle \x3d (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle \x3d computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle +\x3d (sin(axisAngle) \x3c 0.0) ? PI : 0.0;\n    clipAngle +\x3d (sin(clipAngle) \x3c 0.0) ? PI : 0.0;\n\n    flip \x3d (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) \x3e 0.0) ? 1.0 : 0.0;\n\n    beta +\x3d applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord \x3d position.xy * pixelScale;\n\n  mat2 planeXform \x3d scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset \x3d 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition \x3d project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition +\x3d vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position \x3d vec4(clipPosition, 1.0);\n}"]),
a=N(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor \x3d color;\n}"]);G.text=function(r){return p(r,m,a,null,[{name:"position",type:"vec3"}])};var g=N(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis \x3d sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal \x3d signAxis * normal;\n\n  if(dot(realNormal, enable) \x3e 0.0) {\n    vec3 minRange \x3d min(bounds[0], bounds[1]);\n    vec3 maxRange \x3d max(bounds[0], bounds[1]);\n    vec3 nPosition \x3d mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position \x3d projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position \x3d vec4(0,0,0,0);\n  }\n\n  colorChannel \x3d abs(realNormal);\n}"]),
h=N(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor \x3d colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);G.bg=function(r){return p(r,g,h,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":339,glslify:265}],263:[function(b,N,G){(function(p){(function(){function n(c,d,e,f){this.gl=c;this.shader=d;this.buffer=
e;this.vao=f;this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}N.exports=function(c,d,e,f,q,t){var w=k(c),x=m(c,[{buffer:w,size:3}]),z=g(c);z.attributes.position.location=0;c=new n(c,z,w,x);c.update(d,e,f,q,t);return c};var k=b("gl-buffer"),m=b("gl-vao"),a=b("vectorize-text"),g=b("./shaders").text,h=window||p.global||{},r=h.__TEXT_CACHE||{};h.__TEXT_CACHE={};h=n.prototype;var l=[0,0];h.bind=function(c,d,e,f){this.vao.bind();this.shader.bind();var q=this.shader.uniforms;q.model=
c;q.view=d;q.projection=e;q.pixelScale=f;l[0]=this.gl.drawingBufferWidth;l[1]=this.gl.drawingBufferHeight;this.shader.uniforms.resolution=l};h.unbind=function(){this.vao.unbind()};h.update=function(c,d,e,f,q){function t(y,F,J,K,O,I){var L=r[J];L||(L=r[J]={});var H=L[F];if(!H){H=L;J={triangles:!0,font:J,textAlign:"center",textBaseline:"middle",lineSpacing:O,styletags:I};try{var M=a(F,J)}catch(Q){console.warn('error vectorizing text:"'+F+'" error:',Q),M={cells:[],positions:[]}}H=H[F]=M}F=(K||12)/12;
K=H.positions;H=H.cells;M=0;for(J=H.length;M<J;++M)for(O=H[M],I=2;0<=I;--I)L=K[O[I]],w.push(F*L[0],-F*L[1],y)}for(var w=[],x=[0,0,0],z=[0,0,0],B=[0,0,0],A=[0,0,0],D={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},C=0;3>C;++C){B[C]=w.length/3|0;t(.5*(c[0][C]+c[1][C]),d[C],e[C],12,1.25,D);A[C]=(w.length/3|0)-B[C];x[C]=w.length/3|0;for(var v=0;v<f[C].length;++v)f[C][v].text&&t(f[C][v].x,f[C][v].text,f[C][v].font||q,f[C][v].fontSize||12,1.25,D);z[C]=(w.length/3|0)-x[C]}this.buffer.update(w);
this.tickOffset=x;this.tickCount=z;this.labelOffset=B;this.labelCount=A};h.drawTicks=function(c,d,e,f,q,t,w,x){this.tickCount[c]&&(this.shader.uniforms.axis=t,this.shader.uniforms.color=q,this.shader.uniforms.angle=e,this.shader.uniforms.scale=d,this.shader.uniforms.offset=f,this.shader.uniforms.alignDir=w,this.shader.uniforms.alignOpt=x,this.vao.draw(this.gl.TRIANGLES,this.tickCount[c],this.tickOffset[c]))};h.drawLabel=function(c,d,e,f,q,t,w,x){this.labelCount[c]&&(this.shader.uniforms.axis=t,this.shader.uniforms.color=
q,this.shader.uniforms.angle=e,this.shader.uniforms.scale=d,this.shader.uniforms.offset=f,this.shader.uniforms.alignDir=w,this.shader.uniforms.alignOpt=x,this.vao.draw(this.gl.TRIANGLES,this.labelCount[c],this.labelOffset[c]))};h.dispose=function(){this.shader.dispose();this.vao.dispose();this.buffer.dispose()}}).call(this)}).call(this,b("_process"))},{"./shaders":262,_process:528,"gl-buffer":267,"gl-vao":361,"vectorize-text":623}],264:[function(b,N,G){function p(n,k){var m=n+"",a=m.indexOf("."),
g=0;0<=a&&(g=m.length-a-1);m=Math.pow(10,g);n=Math.round(n*k*m);k=n+"";if(0<=k.indexOf("e"))return k;k=n/m;m=n%m;0>n?(k=-Math.ceil(k)|0,m=-m|0):(k=Math.floor(k)|0,m|=0);k=""+k;0>n&&(k="-"+k);if(g){for(m=""+m;m.length<g;)m="0"+m;return k+"."+m}return k}G.create=function(n,k){for(var m=[],a=0;3>a;++a){for(var g=[],h=0;h*k[a]<=n[1][a];++h)g.push({x:h*k[a],text:p(k[a],h)});for(h=-1;h*k[a]>=n[0][a];--h)g.push({x:h*k[a],text:p(k[a],h)});m.push(g)}return m};G.equal=function(n,k){for(var m=0;3>m;++m){if(n[m].length!==
k[m].length)return!1;for(var a=0;a<n[m].length;++a){var g=n[m][a],h=k[m][a];if(g.x!==h.x||g.text!==h.text||g.font!==h.font||g.fontColor!==h.fontColor||g.fontSize!==h.fontSize||g.dx!==h.dx||g.dy!==h.dy)return!1}}return!0}},{}],265:[function(b,N,G){N.exports=function(p){"string"===typeof p&&(p=[p]);for(var n=[].slice.call(arguments,1),k=[],m=0;m<p.length-1;m++)k.push(p[m],n[m]||"");k.push(p[m]);return k.join("")}},{}],266:[function(b,N,G){function p(q,t,w){this.lo=q;this.hi=t;this.pixelsPerDataUnit=
w}N.exports=function(q,t,w,x,z){var B=t.model||r,A=t.view||r,D=t.projection||r;t=t._ortho||!1;q=q.bounds;z=z||m(B,A,D,q,t);z=z.axis;a(l,A,B);a(l,D,l);B=e;for(A=0;3>A;++A)B[A].lo=Infinity,B[A].hi=-Infinity,B[A].pixelsPerDataUnit=Infinity;D=n(g(l,l));g(l,l);for(var C=0;3>C;++C){var v=(C+1)%3,y=(C+2)%3,F=f;A=0;a:for(;2>A;++A){var J=[];if(0>z[C]!==!!A){F[C]=q[A][C];for(var K=0;2>K;++K){F[v]=q[K^A][v];for(var O=0;2>O;++O)F[y]=q[O^K^A][y],J.push(F.slice())}for(K=O=t?5:4;K===O;++K){if(0===J.length)continue a;
J=k.positive(J,D[K])}for(K=0;K<J.length;++K){y=J[K];O=f;var I=l;for(var L=y,H=w,M=x,Q=0;3>Q;++Q){for(var Z=c,ca=d,W=0;3>W;++W)ca[W]=Z[W]=L[W];ca[3]=Z[3]=1;ca[Q]+=1;h(ca,ca,I);0>ca[3]&&(O[Q]=Infinity);--Z[Q];h(Z,Z,I);0>Z[3]&&(O[Q]=Infinity);W=(Z[0]/Z[3]-ca[0]/ca[3])*H;Z=(Z[1]/Z[3]-ca[1]/ca[3])*M;O[Q]=.25*Math.sqrt(W*W+Z*Z)}I=O;for(O=0;3>O;++O)B[O].lo=Math.min(B[O].lo,y[O]),B[O].hi=Math.max(B[O].hi,y[O]),O!==C&&(B[O].pixelsPerDataUnit=Math.min(B[O].pixelsPerDataUnit,Math.abs(I[O])))}}}}return B};var n=
b("extract-frustum-planes"),k=b("split-polygon"),m=b("./lib/cube.js"),a=b("gl-mat4/multiply"),g=b("gl-mat4/transpose"),h=b("gl-vec4/transformMat4"),r=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),l=new Float32Array(16),c=[0,0,0,1],d=[0,0,0,1],e=[new p(Infinity,-Infinity,Infinity),new p(Infinity,-Infinity,Infinity),new p(Infinity,-Infinity,Infinity)],f=[0,0,0]},{"./lib/cube.js":260,"extract-frustum-planes":248,"gl-mat4/multiply":301,"gl-mat4/transpose":312,"gl-vec4/transformMat4":432,"split-polygon":567}],
267:[function(b,N,G){function p(r,l,c,d,e){this.gl=r;this.type=l;this.handle=c;this.length=d;this.usage=e}function n(r,l,c,d,e,f){var q=e.length*e.BYTES_PER_ELEMENT;if(0>f)return r.bufferData(l,e,d),q;if(q+f>c)throw Error("gl-buffer: If resizing buffer, must not specify offset");r.bufferSubData(l,f,e);return c}function k(r,l){l=m.malloc(r.length,l);for(var c=r.length,d=0;d<c;++d)l[d]=r[d];return l}var m=b("typedarray-pool"),a=b("ndarray-ops"),g=b("ndarray"),h="uint8 uint8_clamped uint16 uint32 int8 int16 int32 float32".split(" ");
b=p.prototype;b.bind=function(){this.gl.bindBuffer(this.type,this.handle)};b.unbind=function(){this.gl.bindBuffer(this.type,null)};b.dispose=function(){this.gl.deleteBuffer(this.handle)};b.update=function(r,l){"number"!==typeof l&&(l=-1);this.bind();if("object"===typeof r&&"undefined"!==typeof r.shape){var c=r.dtype;0>h.indexOf(c)&&(c="float32");this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(c=gl.getExtension("OES_element_index_uint")&&"uint16"!==c?"uint32":"uint16");var d;if(d=c===r.dtype)a:{d=r.stride;
for(var e=1,f=d.length-1;0<=f;--f){if(d[f]!==e){d=!1;break a}e*=r.shape[f]}d=!0}d?this.length=0===r.offset&&r.data.length===r.shape[0]?n(this.gl,this.type,this.length,this.usage,r.data,l):n(this.gl,this.type,this.length,this.usage,r.data.subarray(r.offset,r.shape[0]),l):(c=m.malloc(r.size,c),d=g(c,r.shape),a.assign(d,r),this.length=0>l?n(this.gl,this.type,this.length,this.usage,c,l):n(this.gl,this.type,this.length,this.usage,c.subarray(0,r.size),l),m.free(c))}else if(Array.isArray(r))c=this.type===
this.gl.ELEMENT_ARRAY_BUFFER?k(r,"uint16"):k(r,"float32"),this.length=0>l?n(this.gl,this.type,this.length,this.usage,c,l):n(this.gl,this.type,this.length,this.usage,c.subarray(0,r.length),l),m.free(c);else if("object"===typeof r&&"number"===typeof r.length)this.length=n(this.gl,this.type,this.length,this.usage,r,l);else if("number"===typeof r||void 0===r){if(0<=l)throw Error("gl-buffer: Cannot specify offset when resizing buffer");r|=0;0>=r&&(r=1);this.gl.bufferData(this.type,r|0,this.usage);this.length=
r}else throw Error("gl-buffer: Invalid data type");};N.exports=function(r,l,c,d){c=c||r.ARRAY_BUFFER;d=d||r.DYNAMIC_DRAW;if(c!==r.ARRAY_BUFFER&&c!==r.ELEMENT_ARRAY_BUFFER)throw Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(d!==r.DYNAMIC_DRAW&&d!==r.STATIC_DRAW&&d!==r.STREAM_DRAW)throw Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var e=r.createBuffer();r=new p(r,c,e,0,
d);r.update(l);return r}},{ndarray:483,"ndarray-ops":478,"typedarray-pool":617}],268:[function(b,N,G){var p=b("gl-vec3");N.exports=function(k,m){var a=k.positions,g=k.vectors,h={positions:[],vertexIntensity:[],vertexIntensityBounds:k.vertexIntensityBounds,vectors:[],cells:[],coneOffset:k.coneOffset,colormap:k.colormap};if(0===k.positions.length)return m&&(m[0]=[0,0,0],m[1]=[0,0,0]),h;for(var r=0,l=Infinity,c=-Infinity,d=Infinity,e=-Infinity,f=Infinity,q=-Infinity,t=null,w=null,x=[],z=Infinity,B=!1,
A=0;A<a.length;A++){var D=a[A];l=Math.min(D[0],l);c=Math.max(D[0],c);d=Math.min(D[1],d);e=Math.max(D[1],e);f=Math.min(D[2],f);q=Math.max(D[2],q);var C=g[A];p.length(C)>r&&(r=p.length(C));A&&((B=2*p.distance(t,D)/(p.length(w)+p.length(C)))?(z=Math.min(z,B),B=!1):B=!0);B||(t=D,w=C);x.push(C)}A=[l,d,f];D=[c,e,q];m&&(m[0]=A,m[1]=D);0===r&&(r=1);m=1/r;isFinite(z)||(z=1);h.vectorScale=z;A=k.coneSize||.5;k.absoluteConeSize&&(A=k.absoluteConeSize*m);h.coneScale=A;for(k=A=0;A<a.length;A++)for(D=a[A],z=D[0],
r=D[1],D=D[2],c=x[A],e=p.length(c)*m,q=0;8>q;q++)h.positions.push([z,r,D,k++]),h.positions.push([z,r,D,k++]),h.positions.push([z,r,D,k++]),h.positions.push([z,r,D,k++]),h.positions.push([z,r,D,k++]),h.positions.push([z,r,D,k++]),h.vectors.push(c),h.vectors.push(c),h.vectors.push(c),h.vectors.push(c),h.vectors.push(c),h.vectors.push(c),h.vertexIntensity.push(e,e,e),h.vertexIntensity.push(e,e,e),g=h.positions.length,h.cells.push([g-6,g-5,g-4],[g-3,g-2,g-1]);return h};var n=b("./lib/shaders");N.exports.createMesh=
b("./create_mesh");N.exports.createConeMesh=function(k,m){return N.exports.createMesh(k,m,{shaders:n,traceType:"cone"})}},{"./create_mesh":269,"./lib/shaders":270,"gl-vec3":380}],269:[function(b,N,G){function p(d,e,f,q,t,w,x,z,B,A,D){this.gl=d;this.pixelRatio=1;this.cells=[];this.positions=[];this.intensity=[];this.texture=e;this.dirty=!0;this.triShader=f;this.pickShader=q;this.trianglePositions=t;this.triangleVectors=w;this.triangleColors=z;this.triangleUVs=B;this.triangleIds=x;this.triangleVAO=
A;this.triangleCount=0;this.pickId=1;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.lightPosition=[1E5,1E5,0];this.diffuseLight=this.ambientLight=.8;this.specularLight=2;this.roughness=.5;this.fresnel=1.5;this.opacity=1;this.traceType=D;this.tubeScale=1;this.coneScale=2;this.vectorScale=1;this.coneOffset=.25;this._projection=this._view=this._model=c;this._resolution=[1,1]}var n=b("gl-shader"),
k=b("gl-buffer"),m=b("gl-vao"),a=b("gl-texture2d"),g=b("gl-mat4/multiply"),h=b("gl-mat4/invert"),r=b("ndarray"),l=b("colormap"),c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b=p.prototype;b.isOpaque=function(){return 1<=this.opacity};b.isTransparent=function(){return 1>this.opacity};b.pickSlots=1;b.setPickBase=function(d){this.pickId=d};b.update=function(d){d=d||{};var e=this.gl;this.dirty=!0;"lightPosition"in d&&(this.lightPosition=d.lightPosition);"opacity"in d&&(this.opacity=d.opacity);"ambient"in d&&(this.ambientLight=
d.ambient);"diffuse"in d&&(this.diffuseLight=d.diffuse);"specular"in d&&(this.specularLight=d.specular);"roughness"in d&&(this.roughness=d.roughness);"fresnel"in d&&(this.fresnel=d.fresnel);void 0!==d.tubeScale&&(this.tubeScale=d.tubeScale);void 0!==d.vectorScale&&(this.vectorScale=d.vectorScale);void 0!==d.coneScale&&(this.coneScale=d.coneScale);void 0!==d.coneOffset&&(this.coneOffset=d.coneOffset);if(d.colormap){this.texture.shape=[256,256];this.texture.minFilter=e.LINEAR_MIPMAP_LINEAR;this.texture.magFilter=
e.LINEAR;e=this.texture;var f=e.setPixels;var q=l({colormap:d.colormap,nshades:256,format:"rgba"});for(var t=new Uint8Array(1024),w=0;256>w;++w){for(var x=q[w],z=0;3>z;++z)t[4*w+z]=x[z];t[4*w+3]=255*x[3]}q=r(t,[256,256,4],[4,0,1]);f.call(e,q);this.texture.generateMipmap()}e=d.cells;f=d.positions;q=d.vectors;if(f&&e&&q){t=[];w=[];x=[];z=[];var B=[];this.cells=e;this.positions=f;this.vectors=q;var A=d.meshColor||[1,1,1,1],D=d.vertexIntensity,C=Infinity,v=-Infinity;if(D)if(d.vertexIntensityBounds)C=
+d.vertexIntensityBounds[0],v=+d.vertexIntensityBounds[1];else for(d=0;d<D.length;++d){var y=D[d];C=Math.min(C,y);v=Math.max(v,y)}else for(d=0;d<f.length;++d)y=f[d][2],C=Math.min(C,y),v=Math.max(v,y);if(D)this.intensity=D;else{d=f.length;y=Array(d);for(var F=0;F<d;++F)y[F]=f[F][2];this.intensity=y}this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];for(d=0;d<f.length;++d){var J=f[d];for(y=0;3>y;++y)!isNaN(J[y])&&isFinite(J[y])&&(this.bounds[0][y]=Math.min(this.bounds[0][y],
J[y]),this.bounds[1][y]=Math.max(this.bounds[1][y],J[y]))}d=F=0;a:for(;d<e.length;++d){var K=e[d];switch(K.length){case 3:for(y=0;3>y;++y){var O=K[y];J=f[O];for(O=0;3>O;++O)if(isNaN(J[O])||!isFinite(J[O]))continue a}for(y=0;3>y;++y){O=K[2-y];J=f[O];t.push(J[0],J[1],J[2],J[3]);var I=q[O];w.push(I[0],I[1],I[2],I[3]||0);I=A;3===I.length?x.push(I[0],I[1],I[2],1):x.push(I[0],I[1],I[2],I[3]);J=D?[(D[O]-C)/(v-C),0]:[(J[2]-C)/(v-C),0];z.push(J[0],J[1]);B.push(d)}F+=1}}this.triangleCount=F;this.trianglePositions.update(t);
this.triangleVectors.update(w);this.triangleColors.update(x);this.triangleUVs.update(z);this.triangleIds.update(new Uint32Array(B))}};b.drawTransparent=b.draw=function(d){d=d||{};var e=this.gl,f=d.model||c,q=d.view||c,t=d.projection||c,w=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]];for(d=0;3>d;++d)w[0][d]=Math.max(w[0][d],this.clipBounds[0][d]),w[1][d]=Math.min(w[1][d],this.clipBounds[1][d]);f={model:f,view:q,projection:t,inverseModel:c.slice(),clipBounds:w,kambient:this.ambientLight,kdiffuse:this.diffuseLight,
kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};f.inverseModel=h(f.inverseModel,f.model);e.disable(e.CULL_FACE);this.texture.bind(0);q=Array(16);g(q,f.view,f.model);g(q,f.projection,q);h(q,q);for(d=0;3>d;++d)f.eyePosition[d]=q[12+d]/q[15];t=q[15];for(d=0;3>d;++d)t+=this.lightPosition[d]*q[4*d+
3];for(d=0;3>d;++d){w=q[12+d];for(var x=0;3>x;++x)w+=q[4*x+d]*this.lightPosition[x];f.lightPosition[d]=w/t}0<this.triangleCount&&(d=this.triShader,d.bind(),d.uniforms=f,this.triangleVAO.bind(),e.drawArrays(e.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())};b.drawPick=function(d){d=d||{};var e=this.gl,f=d.model||c,q=d.view||c;d=d.projection||c;for(var t=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]],w=0;3>w;++w)t[0][w]=Math.max(t[0][w],this.clipBounds[0][w]),t[1][w]=Math.min(t[1][w],this.clipBounds[1][w]);
this._model=[].slice.call(f);this._view=[].slice.call(q);this._projection=[].slice.call(d);this._resolution=[e.drawingBufferWidth,e.drawingBufferHeight];f={model:f,view:q,projection:d,clipBounds:t,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255};q=this.pickShader;q.bind();q.uniforms=f;0<this.triangleCount&&(this.triangleVAO.bind(),e.drawArrays(e.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())};b.pick=function(d){if(!d||
d.id!==this.pickId)return null;d=d.value[0]+256*d.value[1]+65536*d.value[2];var e=this.cells[d],f=this.positions[e[1]].slice(0,3);f={position:f,dataCoordinate:f,index:Math.floor(e[1]/48)};"cone"===this.traceType?f.index=Math.floor(e[1]/48):"streamtube"===this.traceType&&(f.intensity=this.intensity[e[1]],f.velocity=this.vectors[e[1]].slice(0,3),f.divergence=this.vectors[e[1]][3],f.index=d);return f};b.dispose=function(){this.texture.dispose();this.triShader.dispose();this.pickShader.dispose();this.triangleVAO.dispose();
this.trianglePositions.dispose();this.triangleVectors.dispose();this.triangleColors.dispose();this.triangleUVs.dispose();this.triangleIds.dispose()};N.exports=function(d,e,f){var q=f.shaders;1===arguments.length&&(e=d,d=e.gl);var t=n(d,q.meshShader.vertex,q.meshShader.fragment,null,q.meshShader.attributes);t.attributes.position.location=0;t.attributes.color.location=2;t.attributes.uv.location=3;t.attributes.vector.location=4;q=n(d,q.pickShader.vertex,q.pickShader.fragment,null,q.pickShader.attributes);
q.attributes.position.location=0;q.attributes.id.location=1;q.attributes.vector.location=4;var w=a(d,r(new Uint8Array([255,255,255,255]),[1,1,4]));w.generateMipmap();w.minFilter=d.LINEAR_MIPMAP_LINEAR;w.magFilter=d.LINEAR;var x=k(d),z=k(d),B=k(d),A=k(d),D=k(d),C=m(d,[{buffer:x,type:d.FLOAT,size:4},{buffer:D,type:d.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:B,type:d.FLOAT,size:4},{buffer:A,type:d.FLOAT,size:2},{buffer:z,type:d.FLOAT,size:4}]);t=new p(d,w,t,q,x,z,D,B,A,C,f.traceType||"cone");t.update(e);
return t}},{colormap:137,"gl-buffer":267,"gl-mat4/invert":299,"gl-mat4/multiply":301,"gl-shader":339,"gl-texture2d":356,"gl-vao":361,ndarray:483}],270:[function(b,N,G){var p=b("glslify");b=p(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz \x3d 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| \x3e 0  U  ||b|| \x3e 0.\n  // Assign z \x3d 0, x \x3d -b, y \x3d a:\n  // a*-b + b*a + c*0 \x3d -ba + ba + 0 \x3d 0\n  if (v.x*v.x \x3e v.z*v.z || v.y*v.y \x3e v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount \x3d 8.0;\n\n  float index \x3d rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment \x3d floor(0.001 + index/6.0);\n  float segmentIndex \x3d index - (segment*6.0);\n\n  normal \x3d -normalize(d);\n\n  if (segmentIndex \x3e 2.99 \x26\x26 segmentIndex \x3c 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle \x3d (\n    (segmentIndex \x3e 0.99 \x26\x26  segmentIndex \x3c 1.01) ||\n    (segmentIndex \x3e 4.99 \x26\x26  segmentIndex \x3c 5.01)\n  ) ? 1.0 : 0.0;\n  float angle \x3d 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 \x3d mix(d, vec3(0.0), coneOffset);\n  vec3 v2 \x3d v1 - d;\n\n  vec3 u \x3d getOrthogonalVector(d);\n  vec3 v \x3d normalize(cross(u, d));\n\n  vec3 x \x3d u * cos(angle) * length(d)*0.25;\n  vec3 y \x3d v * sin(angle) * length(d)*0.25;\n  vec3 v3 \x3d v2 + x + y;\n  if (segmentIndex \x3c 3.0) {\n    vec3 tx \x3d u * sin(angle);\n    vec3 ty \x3d v * -cos(angle);\n    vec3 tangent \x3d tx + ty;\n    normal \x3d normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex \x3d\x3d 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, coneScale, coneOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model \x26 view changes.\n  vec3 normal;\n  vec3 XYZ \x3d getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition \x3d model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate \x3d view * conePosition;\n  cameraCoordinate.xyz /\x3d cameraCoordinate.w;\n  f_lightDirection \x3d lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   \x3d eyePosition - cameraCoordinate.xyz;\n  f_normal \x3d normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  \x3d model * vec4(conePosition, 1.0);\n  vec4 t_position  \x3d view * conePosition;\n  gl_Position      \x3d projection * t_position;\n\n  f_color          \x3d color;\n  f_data           \x3d conePosition.xyz;\n  f_position       \x3d position.xyz;\n  f_uv             \x3d uv;\n}\n"]);
N=p(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH \x3d max(x, 0.0001);\n  float cos2Alpha \x3d NdotH * NdotH;\n  float tan2Alpha \x3d (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 \x3d roughness * roughness;\n  float denom \x3d 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN \x3d max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN \x3d max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H \x3d normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH \x3d max(dot(surfaceNormal, H), 0.0);\n  float VdotH \x3d max(dot(viewDirection, H), 0.000001);\n  float LdotH \x3d max(dot(lightDirection, H), 0.000001);\n  float G1 \x3d (2.0 * NdotH * VdotN) / VdotH;\n  float G2 \x3d (2.0 * NdotH * LdotN) / LdotH;\n  float G \x3d min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D \x3d beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F \x3d pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N \x3d normalize(f_normal);\n  vec3 L \x3d normalize(f_lightDirection);\n  vec3 V \x3d normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N \x3d -N;\n  }\n\n  float specular \x3d min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  \x3d min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor \x3d f_color * texture2D(texture, f_uv);\n  vec4 litColor \x3d surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor \x3d litColor * opacity;\n}\n"]);
var n=p(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz \x3d 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| \x3e 0  U  ||b|| \x3e 0.\n  // Assign z \x3d 0, x \x3d -b, y \x3d a:\n  // a*-b + b*a + c*0 \x3d -ba + ba + 0 \x3d 0\n  if (v.x*v.x \x3e v.z*v.z || v.y*v.y \x3e v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount \x3d 8.0;\n\n  float index \x3d rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment \x3d floor(0.001 + index/6.0);\n  float segmentIndex \x3d index - (segment*6.0);\n\n  normal \x3d -normalize(d);\n\n  if (segmentIndex \x3e 2.99 \x26\x26 segmentIndex \x3c 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle \x3d (\n    (segmentIndex \x3e 0.99 \x26\x26  segmentIndex \x3c 1.01) ||\n    (segmentIndex \x3e 4.99 \x26\x26  segmentIndex \x3c 5.01)\n  ) ? 1.0 : 0.0;\n  float angle \x3d 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 \x3d mix(d, vec3(0.0), coneOffset);\n  vec3 v2 \x3d v1 - d;\n\n  vec3 u \x3d getOrthogonalVector(d);\n  vec3 v \x3d normalize(cross(u, d));\n\n  vec3 x \x3d u * cos(angle) * length(d)*0.25;\n  vec3 y \x3d v * sin(angle) * length(d)*0.25;\n  vec3 v3 \x3d v2 + x + y;\n  if (segmentIndex \x3c 3.0) {\n    vec3 tx \x3d u * sin(angle);\n    vec3 ty \x3d v * -cos(angle);\n    vec3 tangent \x3d tx + ty;\n    normal \x3d normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex \x3d\x3d 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float vectorScale, coneScale, coneOffset;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ \x3d getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);\n  vec4 conePosition \x3d model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  gl_Position \x3d projection * view * conePosition;\n  f_id        \x3d id;\n  f_position  \x3d position.xyz;\n}\n"]);
p=p(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor \x3d vec4(pickId, f_id.xyz);\n}"]);
G.meshShader={vertex:b,fragment:N,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]};G.pickShader={vertex:n,fragment:p,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:442}],271:[function(b,N,G){N.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",
516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",
2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",
3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",
6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",
32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",
32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",
33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34E3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",
34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",
34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",
35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",
35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",
36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",
36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",
37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],272:[function(b,N,G){var p=b("./1.0/numbers");N.exports=function(n){return p[n]}},{"./1.0/numbers":271}],273:[function(b,N,G){function p(l,c,d,e){this.gl=l;this.shader=e;this.buffer=c;this.vao=d;this.pixelRatio=1;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.lineWidth=[1,1,1];this.capSize=[10,10,10];this.lineCount=
[0,0,0];this.lineOffset=[0,0,0];this.opacity=1;this.hasAlpha=!1}function n(l,c){for(var d=0;3>d;++d)l[0][d]=Math.min(l[0][d],c[d]),l[1][d]=Math.max(l[1][d],c[d])}function k(l,c,d,e){e=r[e];for(var f=0;f<e.length;++f){var q=e[f];l.push(c[0],c[1],c[2],d[0],d[1],d[2],d[3],q[0],q[1],q[2])}return e.length}N.exports=function(l){var c=l.gl,d=m(c),e=a(c,[{buffer:d,type:c.FLOAT,size:3,offset:0,stride:40},{buffer:d,type:c.FLOAT,size:4,offset:12,stride:40},{buffer:d,type:c.FLOAT,size:3,offset:28,stride:40}]),
f=g(c);f.attributes.position.location=0;f.attributes.color.location=1;f.attributes.offset.location=2;c=new p(c,d,e,f);c.update(l);return c};var m=b("gl-buffer"),a=b("gl-vao"),g=b("./shaders/index"),h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b=p.prototype;b.isOpaque=function(){return!this.hasAlpha};b.isTransparent=function(){return this.hasAlpha};b.drawTransparent=b.draw=function(l){var c=this.gl,d=this.shader.uniforms;this.shader.bind();var e=d.view=l.view||h,f=d.projection=l.projection||h;d.model=l.model||
h;d.clipBounds=this.clipBounds;d.opacity=this.opacity;l=(l._ortho?2:1)*this.pixelRatio*(f[3]*e[12]+f[7]*e[13]+f[11]*e[14]+f[15]*e[15])/c.drawingBufferHeight;this.vao.bind();for(e=0;3>e;++e)c.lineWidth(this.lineWidth[e]*this.pixelRatio),d.capSize=this.capSize[e]*l,this.lineCount[e]&&c.drawArrays(c.LINES,this.lineOffset[e],this.lineCount[e]);this.vao.unbind()};var r=function(){for(var l=Array(3),c=0;3>c;++c){for(var d=[],e=1;2>=e;++e)for(var f=-1;1>=f;f+=2){var q=[0,0,0];q[(e+c)%3]=f;d.push(q)}l[c]=
d}return l}();b.update=function(l){l=l||{};"lineWidth"in l&&(this.lineWidth=l.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth]));"capSize"in l&&(this.capSize=l.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize]));this.hasAlpha=!1;"opacity"in l&&(this.opacity=+l.opacity,1>this.opacity&&(this.hasAlpha=!0));var c=l.color||[[0,0,0],[0,0,0],[0,0,0]],d=l.position;l=l.error;Array.isArray(c[0])||(c=[c,c,c]);if(d&&
l){var e=[],f=d.length,q=0;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.lineCount=[0,0,0];for(var t=0;3>t;++t){this.lineOffset[t]=q;var w=0;a:for(;w<f;++w){for(var x=d[w],z=0;3>z;++z)if(isNaN(x[z])||!isFinite(x[z]))continue a;z=l[w];var B=c[t];Array.isArray(B[0])&&(B=c[w]);3===B.length?B=[B[0],B[1],B[2],1]:4===B.length&&(B=[B[0],B[1],B[2],B[3]],!this.hasAlpha&&1>B[3]&&(this.hasAlpha=!0));if(!isNaN(z[0][t])&&!isNaN(z[1][t])){if(0>z[0][t]){var A=x.slice();A[t]+=z[0][t];
e.push(x[0],x[1],x[2],B[0],B[1],B[2],B[3],0,0,0,A[0],A[1],A[2],B[0],B[1],B[2],B[3],0,0,0);n(this.bounds,A);q+=2+k(e,A,B,t)}0<z[1][t]&&(A=x.slice(),A[t]+=z[1][t],e.push(x[0],x[1],x[2],B[0],B[1],B[2],B[3],0,0,0,A[0],A[1],A[2],B[0],B[1],B[2],B[3],0,0,0),n(this.bounds,A),q+=2+k(e,A,B,t))}}this.lineCount[t]=q-this.lineOffset[t]}this.buffer.update(e)}};b.dispose=function(){this.shader.dispose();this.buffer.dispose();this.vao.dispose()}},{"./shaders/index":275,"gl-buffer":267,"gl-vao":361}],274:[function(b,
N,G){arguments[4][265][0].apply(G,arguments)},{dup:265}],275:[function(b,N,G){G=b("glslify");var p=b("gl-shader"),n=G(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  \x3d model * vec4(position, 1.0);\n  worldPosition       \x3d (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         \x3d projection * view * worldPosition;\n  fragColor           \x3d color;\n  fragPosition        \x3d position;\n}"]),
k=G(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity \x3d\x3d 0.\n  ) discard;\n\n  gl_FragColor \x3d opacity * fragColor;\n}"]);
N.exports=function(m){return p(m,n,k,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":339,glslify:274}],276:[function(b,N,G){function p(t){var w=t.getParameter(t.FRAMEBUFFER_BINDING),x=t.getParameter(t.RENDERBUFFER_BINDING);t=t.getParameter(t.TEXTURE_BINDING_2D);return[w,x,t]}function n(t,w){t.bindFramebuffer(t.FRAMEBUFFER,w[0]);t.bindRenderbuffer(t.RENDERBUFFER,w[1]);t.bindTexture(t.TEXTURE_2D,w[2])}function k(t){switch(t){case d:throw Error("gl-fbo: Framebuffer unsupported");
case e:throw Error("gl-fbo: Framebuffer incomplete attachment");case f:throw Error("gl-fbo: Framebuffer incomplete dimensions");case q:throw Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw Error("gl-fbo: Framebuffer failed for unspecified reason");}}function m(t,w,x,z,B,A){if(!z)return null;w=l(t,w,x,B,z);w.magFilter=t.NEAREST;w.minFilter=t.NEAREST;w.mipSamples=1;w.bind();t.framebufferTexture2D(t.FRAMEBUFFER,A,t.TEXTURE_2D,w.handle,0);return w}function a(t,w,x,z,B){var A=
t.createRenderbuffer();t.bindRenderbuffer(t.RENDERBUFFER,A);t.renderbufferStorage(t.RENDERBUFFER,z,w,x);t.framebufferRenderbuffer(t.FRAMEBUFFER,B,t.RENDERBUFFER,A);return A}function g(t){var w=p(t.gl),x=t.gl,z=t.handle=x.createFramebuffer(),B=t._shape[0],A=t._shape[1],D=t.color.length,C=t._ext,v=t._useStencil,y=t._useDepth,F=t._colorType;x.bindFramebuffer(x.FRAMEBUFFER,z);for(z=0;z<D;++z)t.color[z]=m(x,B,A,F,x.RGBA,x.COLOR_ATTACHMENT0+z);0===D?(t._color_rb=a(x,B,A,x.RGBA4,x.COLOR_ATTACHMENT0),C&&
C.drawBuffersWEBGL(c[0])):1<D&&C.drawBuffersWEBGL(c[D]);(D=x.getExtension("WEBGL_depth_texture"))?v?t.depth=m(x,B,A,D.UNSIGNED_INT_24_8_WEBGL,x.DEPTH_STENCIL,x.DEPTH_STENCIL_ATTACHMENT):y&&(t.depth=m(x,B,A,x.UNSIGNED_SHORT,x.DEPTH_COMPONENT,x.DEPTH_ATTACHMENT)):y&&v?t._depth_rb=a(x,B,A,x.DEPTH_STENCIL,x.DEPTH_STENCIL_ATTACHMENT):y?t._depth_rb=a(x,B,A,x.DEPTH_COMPONENT16,x.DEPTH_ATTACHMENT):v&&(t._depth_rb=a(x,B,A,x.STENCIL_INDEX,x.STENCIL_ATTACHMENT));B=x.checkFramebufferStatus(x.FRAMEBUFFER);if(B!==
x.FRAMEBUFFER_COMPLETE){t._destroyed=!0;x.bindFramebuffer(x.FRAMEBUFFER,null);x.deleteFramebuffer(t.handle);t.handle=null;t.depth&&(t.depth.dispose(),t.depth=null);t._depth_rb&&(x.deleteRenderbuffer(t._depth_rb),t._depth_rb=null);for(z=0;z<t.color.length;++z)t.color[z].dispose(),t.color[z]=null;t._color_rb&&(x.deleteRenderbuffer(t._color_rb),t._color_rb=null);n(x,w);k(B)}n(x,w)}function h(t,w,x,z,B,A,D,C){this.gl=t;this._shape=[w|0,x|0];this._destroyed=!1;this._ext=C;this.color=Array(B);for(t=0;t<
B;++t)this.color[t]=null;this._depth_rb=this.depth=this._color_rb=null;this._colorType=z;this._useDepth=A;this._useStencil=D;var v=this;w=[w|0,x|0];Object.defineProperties(w,{0:{get:function(){return v._shape[0]},set:function(y){return v.width=y}},1:{get:function(){return v._shape[1]},set:function(y){return v.height=y}}});this._shapeVector=w;g(this)}function r(t,w,x){if(t._destroyed)throw Error("gl-fbo: Can't resize destroyed FBO");if(t._shape[0]!==w||t._shape[1]!==x){var z=t.gl,B=z.getParameter(z.MAX_RENDERBUFFER_SIZE);
if(0>w||w>B||0>x||x>B)throw Error("gl-fbo: Can't resize FBO, invalid dimensions");t._shape[0]=w;t._shape[1]=x;w=p(z);for(x=0;x<t.color.length;++x)t.color[x].shape=t._shape;t._color_rb&&(z.bindRenderbuffer(z.RENDERBUFFER,t._color_rb),z.renderbufferStorage(z.RENDERBUFFER,z.RGBA4,t._shape[0],t._shape[1]));t.depth&&(t.depth.shape=t._shape);t._depth_rb&&(z.bindRenderbuffer(z.RENDERBUFFER,t._depth_rb),t._useDepth&&t._useStencil?z.renderbufferStorage(z.RENDERBUFFER,z.DEPTH_STENCIL,t._shape[0],t._shape[1]):
t._useDepth?z.renderbufferStorage(z.RENDERBUFFER,z.DEPTH_COMPONENT16,t._shape[0],t._shape[1]):t._useStencil&&z.renderbufferStorage(z.RENDERBUFFER,z.STENCIL_INDEX,t._shape[0],t._shape[1]));z.bindFramebuffer(z.FRAMEBUFFER,t.handle);x=z.checkFramebufferStatus(z.FRAMEBUFFER);x!==z.FRAMEBUFFER_COMPLETE&&(t.dispose(),n(z,w),k(x));n(z,w)}}var l=b("gl-texture2d");N.exports=function(t,w,x,z){d||(d=t.FRAMEBUFFER_UNSUPPORTED,e=t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,f=t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,q=t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);
var B=t.getExtension("WEBGL_draw_buffers");if(!c&&B){var A=t.getParameter(B.MAX_COLOR_ATTACHMENTS_WEBGL);c=Array(A+1);for(var D=0;D<=A;++D){for(var C=Array(A),v=0;v<D;++v)C[v]=t.COLOR_ATTACHMENT0+v;for(v=D;v<A;++v)C[v]=t.NONE;c[D]=C}}Array.isArray(w)&&(z=x,x=w[1]|0,w=w[0]|0);if("number"!==typeof w)throw Error("gl-fbo: Missing shape parameter");A=t.getParameter(t.MAX_RENDERBUFFER_SIZE);if(0>w||w>A||0>x||x>A)throw Error("gl-fbo: Parameters are too large for FBO");z=z||{};A=1;if("color"in z){A=Math.max(z.color|
0,0);if(0>A)throw Error("gl-fbo: Must specify a nonnegative number of colors");if(1<A){if(!B)throw Error("gl-fbo: Multiple draw buffer extension not supported");if(A>t.getParameter(B.MAX_COLOR_ATTACHMENTS_WEBGL))throw Error("gl-fbo: Context does not support "+A+" draw buffers");}}D=t.UNSIGNED_BYTE;C=t.getExtension("OES_texture_float");if(z.float&&0<A){if(!C)throw Error("gl-fbo: Context does not support floating point textures");D=t.FLOAT}else z.preferFloat&&0<A&&C&&(D=t.FLOAT);C=!0;"depth"in z&&(C=
!!z.depth);v=!1;"stencil"in z&&(v=!!z.stencil);return new h(t,w,x,D,A,C,v,B)};var c=null,d,e,f,q;b=h.prototype;Object.defineProperties(b,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(t){Array.isArray(t)||(t=[t|0,t|0]);if(2!==t.length)throw Error("gl-fbo: Shape vector must be length 2");var w=t[0]|0;t=t[1]|0;r(this,w,t);return[w,t]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(t){t|=0;r(this,t,this._shape[1]);return t},
enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(t){t|=0;r(this,this._shape[0],t);return t},enumerable:!1}});b.bind=function(){if(!this._destroyed){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.handle);t.viewport(0,0,this._shape[0],this._shape[1])}};b.dispose=function(){if(!this._destroyed){this._destroyed=!0;var t=this.gl;t.deleteFramebuffer(this.handle);this.handle=null;this.depth&&(this.depth.dispose(),this.depth=null);this._depth_rb&&(t.deleteRenderbuffer(this._depth_rb),
this._depth_rb=null);for(var w=0;w<this.color.length;++w)this.color[w].dispose(),this.color[w]=null;this._color_rb&&(t.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},{"gl-texture2d":356}],277:[function(b,N,G){var p=b("sprintf-js").sprintf,n=b("gl-constants/lookup"),k=b("glsl-shader-name"),m=b("add-line-numbers");N.exports=function(a,g,h){var r=k(g)||"of unknown name (see npm glsl-shader-name)",l="unknown type";void 0!==h&&(l=h===n.FRAGMENT_SHADER?"fragment":"vertex");h=p("Error compiling %s shader %s:\n",
l,r);r=p("%s%s",h,a);var c=a.split("\n");a={};for(l=0;l<c.length;l++){var d=c[l];if(""!==d&&"\x00"!==d){var e=parseInt(d.split(":")[2]);if(isNaN(e))throw Error(p("Could not parse error: %s",d));a[e]=d}}g=m(g).split("\n");for(l=0;l<g.length;l++)if(a[l+3]||a[l+2]||a[l+1])h+=g[l]+"\n",a[l+1]&&(c=a[l+1],c=c.substr(c.split(":",3).join(":").length+1).trim(),h+=p("^^^ %s\n\n",c));return{long:h.trim(),short:r.trim()}}},{"add-line-numbers":72,"gl-constants/lookup":272,"glsl-shader-name":434,"sprintf-js":568}],
278:[function(b,N,G){function p(l,c,d,e,f,q,t){this.plot=l;this.shader=c;this.pickShader=d;this.positionBuffer=e;this.weightBuffer=f;this.colorBuffer=q;this.idBuffer=t;this.xData=[];this.yData=[];this.shape=[0,0];this.bounds=[Infinity,Infinity,-Infinity,-Infinity];this.pickOffset=0}N.exports=function(l,c){var d=l.gl,e=a(d,h.vertex,h.fragment),f=a(d,h.pickVertex,h.pickFragment),q=g(d),t=g(d),w=g(d);d=g(d);e=new p(l,e,f,q,t,w,d);e.update(c);l.addObject(e);return e};var n=b("binary-search-bounds"),k=
b("iota-array"),m=b("typedarray-pool"),a=b("gl-shader"),g=b("gl-buffer"),h=b("./lib/shaders");b=p.prototype;var r=[0,0,1,0,0,1,1,0,1,1,0,1];b.draw=function(){var l=[1,0,0,0,1,0,0,0,1];return function(){var c=this.plot,d=this.shader,e=this.bounds,f=this.numVertices;if(!(0>=f)){var q=c.gl;c=c.dataBox;var t=e[3]-e[1],w=c[2]-c[0],x=c[3]-c[1];l[0]=2*(e[2]-e[0])/w;l[4]=2*t/x;l[6]=2*(e[0]-c[0])/w-1;l[7]=2*(e[1]-c[1])/x-1;d.bind();e=d.uniforms;e.viewTransform=l;e.shape=this.shape;d=d.attributes;this.positionBuffer.bind();
d.position.pointer();this.weightBuffer.bind();d.weight.pointer(q.UNSIGNED_BYTE,!1);this.colorBuffer.bind();d.color.pointer(q.UNSIGNED_BYTE,!0);q.drawArrays(q.TRIANGLES,0,f)}}}();b.drawPick=function(){var l=[1,0,0,0,1,0,0,0,1],c=[0,0,0,0];return function(d){var e=this.plot,f=this.pickShader,q=this.bounds,t=this.numVertices;if(!(0>=t)){var w=e.gl;e=e.dataBox;var x=q[3]-q[1],z=e[2]-e[0],B=e[3]-e[1];l[0]=2*(q[2]-q[0])/z;l[4]=2*x/B;l[6]=2*(q[0]-e[0])/z-1;l[7]=2*(q[1]-e[1])/B-1;for(q=0;4>q;++q)c[q]=d>>
8*q&255;this.pickOffset=d;f.bind();q=f.uniforms;q.viewTransform=l;q.pickOffset=c;q.shape=this.shape;f=f.attributes;this.positionBuffer.bind();f.position.pointer();this.weightBuffer.bind();f.weight.pointer(w.UNSIGNED_BYTE,!1);this.idBuffer.bind();f.pickId.pointer(w.UNSIGNED_BYTE,!1);w.drawArrays(w.TRIANGLES,0,t);return d+this.shape[0]*this.shape[1]}}}();b.pick=function(l,c,d){l=this.pickOffset;c=this.shape[0]*this.shape[1];if(d<l||d>=l+c)return null;d-=l;return{object:this,pointId:d,dataCoord:[this.xData[d%
this.shape[0]],this.yData[d/this.shape[0]|0]]}};b.update=function(l){l=l||{};var c=l.shape||[0,0],d=l.x||k(c[0]),e=l.y||k(c[1]),f=l.z||new Float32Array(c[0]*c[1]),q=!1!==l.zsmooth;this.xData=d;this.yData=e;var t=l.colorLevels||[0];l=l.colorValues||[0,0,0,1];var w=t.length,x=this.bounds;if(q){var z=x[0]=d[0];var B=x[1]=e[0];var A=x[2]=d[d.length-1];x=x[3]=e[e.length-1]}else z=x[0]=d[0]+(d[1]-d[0])/2,B=x[1]=e[0]+(e[1]-e[0])/2,A=x[2]=d[d.length-1]+(d[d.length-1]-d[d.length-2])/2,x=x[3]=e[e.length-1]+
(e[e.length-1]-e[e.length-2])/2;A=1/(A-z);x=1/(x-B);var D=c[0];c=c[1];this.shape=[D,c];var C=(q?(D-1)*(c-1):D*c)*(r.length>>>1);this.numVertices=C;var v=m.mallocUint8(4*C),y=m.mallocFloat32(2*C),F=m.mallocUint8(2*C);C=m.mallocUint32(C);for(var J=0,K=q?D-1:D,O=q?c-1:c,I=0;I<O;++I){if(q){var L=x*(e[I]-B);var H=x*(e[I+1]-B)}else L=I<c-1?x*(e[I]-(e[I+1]-e[I])/2-B):x*(e[I]-(e[I]-e[I-1])/2-B),H=I<c-1?x*(e[I]+(e[I+1]-e[I])/2-B):x*(e[I]+(e[I]-e[I-1])/2-B);for(var M=0;M<K;++M){if(q){var Q=A*(d[M]-z);var Z=
A*(d[M+1]-z)}else Q=M<D-1?A*(d[M]-(d[M+1]-d[M])/2-z):A*(d[M]-(d[M]-d[M-1])/2-z),Z=M<D-1?A*(d[M]+(d[M+1]-d[M])/2-z):A*(d[M]+(d[M]-d[M-1])/2-z);for(var ca=0;ca<r.length;ca+=2){var W=r[ca],T=r[ca+1],U=f[q?(I+T)*D+(M+W):I*D+M],ha=n.le(t,U);if(0>ha){ha=l[0];U=l[1];var Y=l[2];var ba=l[3]}else if(ha===w-1)ha=l[4*w-4],U=l[4*w-3],Y=l[4*w-2],ba=l[4*w-1];else{ba=(U-t[ha])/(t[ha+1]-t[ha]);var ja=1-ba,ma=4*ha,ia=4*(ha+1);ha=ja*l[ma]+ba*l[ia];U=ja*l[ma+1]+ba*l[ia+1];Y=ja*l[ma+2]+ba*l[ia+2];ba=ja*l[ma+3]+ba*l[ia+
3]}v[4*J]=255*ha;v[4*J+1]=255*U;v[4*J+2]=255*Y;v[4*J+3]=255*ba;y[2*J]=.5*Q+.5*Z;y[2*J+1]=.5*L+.5*H;F[2*J]=W;F[2*J+1]=T;C[J]=I*D+M;J+=1}}}this.positionBuffer.update(y);this.weightBuffer.update(F);this.colorBuffer.update(v);this.idBuffer.update(C);m.free(y);m.free(v);m.free(F);m.free(C)};b.dispose=function(){this.shader.dispose();this.pickShader.dispose();this.positionBuffer.dispose();this.weightBuffer.dispose();this.colorBuffer.dispose();this.idBuffer.dispose();this.plot.removeObject(this)}},{"./lib/shaders":279,
"binary-search-bounds":103,"gl-buffer":267,"gl-shader":339,"iota-array":451,"typedarray-pool":617}],279:[function(b,N,G){b=b("glslify");N.exports={fragment:b(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor \x3d vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition \x3d viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor \x3d color;\n  gl_Position \x3d vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),
pickFragment:b(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d \x3d step(.5, vWeight);\n  vec4 id \x3d fragId + pickOffset;\n  id.x +\x3d d.x + d.y*shape.x;\n\n  id.y +\x3d floor(id.x / 256.0);\n  id.x -\x3d floor(id.x / 256.0) * 256.0;\n\n  id.z +\x3d floor(id.y / 256.0);\n  id.y -\x3d floor(id.y / 256.0) * 256.0;\n\n  id.w +\x3d floor(id.z / 256.0);\n  id.z -\x3d floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor \x3d id/255.;\n}\n"]),
pickVertex:b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight \x3d weight;\n\n  fragId \x3d pickId;\n\n  vec3 vPosition \x3d viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position \x3d vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},{glslify:442}],280:[function(b,N,G){N=b("glslify");
var p=b("gl-shader"),n=N(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  vec4 startPoint \x3d project(position);\n  vec4 endPoint   \x3d project(nextPosition);\n\n  vec2 A \x3d startPoint.xy / startPoint.w;\n  vec2 B \x3d   endPoint.xy /   endPoint.w;\n\n  float clipAngle \x3d atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset \x3d 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position \x3d vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition \x3d position;\n  pixelArcLength \x3d arcLength;\n  fragColor \x3d color;\n}\n"]),
k=N(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity \x3d\x3d 0.\n  ) discard;\n\n  float dashWeight \x3d texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight \x3c 0.5) {\n    discard;\n  }\n  gl_FragColor \x3d fragColor * opacity;\n}\n"]),
m=N(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\n// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl\nvec4 packFloat(float v) {\n  float av \x3d abs(v);\n\n  //Handle special cases\n  if(av \x3c FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v \x3e FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v \x3c -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  vec4 c \x3d vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  float e \x3d floor(log2(av));\n  float m \x3d av * pow(2.0, -e) - 1.0;\n\n  //Unpack mantissa\n  c[1] \x3d floor(128.0 * m);\n  m -\x3d c[1] / 128.0;\n  c[2] \x3d floor(32768.0 * m);\n  m -\x3d c[2] / 32768.0;\n  c[3] \x3d floor(8388608.0 * m);\n\n  //Unpack exponent\n  float ebias \x3d e + 127.0;\n  c[0] \x3d floor(ebias / 2.0);\n  ebias -\x3d c[0] * 2.0;\n  c[1] +\x3d floor(ebias) * 128.0;\n\n  //Unpack sign bit\n  c[0] +\x3d 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor \x3d vec4(pickId/255.0, packFloat(pixelArcLength).xyz);\n}"]),
a=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];G.createShader=function(g){return p(g,n,k,null,a)};G.createPickShader=function(g){return p(g,n,m,null,a)}},{"gl-shader":339,glslify:282}],281:[function(b,N,G){function p(q){for(var t=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]],w=0;3>w;++w)t[0][w]=Math.max(q[0][w],t[0][w]),t[1][w]=Math.min(q[1][w],t[1][w]);return t}function n(q,t,w,x){this.arcLength=q;
this.position=t;this.index=w;this.dataCoordinate=x}function k(q,t,w,x,z,B){this.gl=q;this.shader=t;this.pickShader=w;this.buffer=x;this.vao=z;this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.points=[];this.arcLength=[];this.vertexCount=0;this.bounds=[[0,0,0],[0,0,0]];this.pickId=0;this.lineWidth=1;this.texture=B;this.opacity=this.dashScale=1;this.hasAlpha=!1;this.dirty=!0;this.pixelRatio=1}N.exports=function(q){var t=q.gl||q.scene&&q.scene.gl,w=d(t);w.attributes.position.location=
0;w.attributes.nextPosition.location=1;w.attributes.arcLength.location=2;w.attributes.lineWidth.location=3;w.attributes.color.location=4;var x=e(t);x.attributes.position.location=0;x.attributes.nextPosition.location=1;x.attributes.arcLength.location=2;x.attributes.lineWidth.location=3;x.attributes.color.location=4;for(var z=m(t),B=a(t,[{buffer:z,size:3,offset:0,stride:48},{buffer:z,size:3,offset:12,stride:48},{buffer:z,size:1,offset:24,stride:48},{buffer:z,size:1,offset:28,stride:48},{buffer:z,size:4,
offset:32,stride:48}]),A=c(Array(1024),[256,1,4]),D=0;1024>D;++D)A.data[D]=255;A=g(t,A);A.wrap=t.REPEAT;t=new k(t,w,x,z,B,A);t.update(q);return t};var m=b("gl-buffer"),a=b("gl-vao"),g=b("gl-texture2d"),h=new Uint8Array(4),r=new Float32Array(h.buffer),l=b("binary-search-bounds"),c=b("ndarray");b=b("./lib/shaders");var d=b.createShader,e=b.createPickShader,f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b=k.prototype;b.isTransparent=function(){return this.hasAlpha};b.isOpaque=function(){return!this.hasAlpha};b.pickSlots=
1;b.setPickBase=function(q){this.pickId=q};b.drawTransparent=b.draw=function(q){if(this.vertexCount){var t=this.gl,w=this.shader,x=this.vao;w.bind();w.uniforms={model:q.model||f,view:q.view||f,projection:q.projection||f,clipBounds:p(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[t.drawingBufferWidth,t.drawingBufferHeight],pixelRatio:this.pixelRatio};x.bind();x.draw(t.TRIANGLE_STRIP,this.vertexCount);
x.unbind()}};b.drawPick=function(q){if(this.vertexCount){var t=this.gl,w=this.pickShader,x=this.vao;w.bind();w.uniforms={model:q.model||f,view:q.view||f,projection:q.projection||f,pickId:this.pickId,clipBounds:p(this.clipBounds),screenShape:[t.drawingBufferWidth,t.drawingBufferHeight],pixelRatio:this.pixelRatio};x.bind();x.draw(t.TRIANGLE_STRIP,this.vertexCount);x.unbind()}};b.update=function(q){var t;this.dirty=!0;var w=!!q.connectGaps;"dashScale"in q&&(this.dashScale=q.dashScale);this.hasAlpha=
!1;"opacity"in q&&(this.opacity=+q.opacity,1>this.opacity&&(this.hasAlpha=!0));var x=[],z=[],B=[],A=0,D=0,C=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]],v=q.position||q.positions;if(v){var y=q.color||q.colors||[0,0,0,1],F=q.lineWidth||1,J=!1;var K=1;a:for(;K<v.length;++K){var O=v[K-1],I=v[K];z.push(A);B.push(O.slice());for(t=0;3>t;++t){if(isNaN(O[t])||isNaN(I[t])||!isFinite(O[t])||!isFinite(I[t])){if(!w&&0<x.length){for(J=0;24>J;++J)x.push(x[x.length-12]);D+=2;J=!0}continue a}C[0][t]=
Math.min(C[0][t],O[t],I[t]);C[1][t]=Math.max(C[1][t],O[t],I[t])}if(Array.isArray(y[0])){var L=y.length>K-1?y[K-1]:0<y.length?y[y.length-1]:[0,0,0,1];var H=y.length>K?y[K]:0<y.length?y[y.length-1]:[0,0,0,1]}else L=H=y;3===L.length&&(L=[L[0],L[1],L[2],1]);3===H.length&&(H=[H[0],H[1],H[2],1]);!this.hasAlpha&&1>L[3]&&(this.hasAlpha=!0);var M=Array.isArray(F)?F.length>K-1?F[K-1]:0<F.length?F[F.length-1]:[0,0,0,1]:F;var Q=A;t=A;for(var Z=A=0;3>Z;++Z){var ca=O[Z]-I[Z];A+=ca*ca}A=t+Math.sqrt(A);if(J){for(t=
0;2>t;++t)x.push(O[0],O[1],O[2],I[0],I[1],I[2],Q,M,L[0],L[1],L[2],L[3]);D+=2;J=!1}x.push(O[0],O[1],O[2],I[0],I[1],I[2],Q,M,L[0],L[1],L[2],L[3],O[0],O[1],O[2],I[0],I[1],I[2],Q,-M,L[0],L[1],L[2],L[3],I[0],I[1],I[2],O[0],O[1],O[2],A,-M,H[0],H[1],H[2],H[3],I[0],I[1],I[2],O[0],O[1],O[2],A,M,H[0],H[1],H[2],H[3]);D+=4}}this.buffer.update(x);z.push(A);B.push(v[v.length-1].slice());this.bounds=C;this.vertexCount=D;this.points=B;this.arcLength=z;if("dashes"in q){q=q.dashes.slice();q.unshift(0);for(K=1;K<q.length;++K)q[K]=
q[K-1]+q[K];w=c(Array(1024),[256,1,4]);for(K=0;256>K;++K){for(t=0;4>t;++t)w.set(K,0,t,0);l.le(q,q[q.length-1]*K/255)&1?w.set(K,0,0,0):w.set(K,0,0,255)}this.texture.setPixels(w)}};b.dispose=function(){this.shader.dispose();this.vao.dispose();this.buffer.dispose()};b.pick=function(q){if(!q||q.id!==this.pickId)return null;var t=q.value[0];var w=q.value[1];q=q.value[2];h[0]=0;h[1]=q;h[2]=w;h[3]=t;t=r[0];q=l.le(this.arcLength,t);if(0>q)return null;if(q===this.arcLength.length-1)return new n(this.arcLength[this.arcLength.length-
1],this.points[this.points.length-1].slice(),q);var x=this.points[q],z=this.points[Math.min(q+1,this.points.length-1)],B=(t-this.arcLength[q])/(this.arcLength[q+1]-this.arcLength[q]),A=1-B;w=[0,0,0];for(var D=0;3>D;++D)w[D]=A*x[D]+B*z[D];q=Math.min(.5>B?q:q+1,this.points.length-1);return new n(t,w,q,this.points[q])}},{"./lib/shaders":280,"binary-search-bounds":103,"gl-buffer":267,"gl-texture2d":356,"gl-vao":361,ndarray:483}],282:[function(b,N,G){arguments[4][265][0].apply(G,arguments)},{dup:265}],
283:[function(b,N,G){N.exports=function(p,n){var k=n[0],m=n[1],a=n[2],g=n[3],h=n[4],r=n[5],l=n[6],c=n[7],d=n[8],e=n[9],f=n[10],q=n[11],t=n[12],w=n[13],x=n[14];n=n[15];p[0]=r*(f*n-q*x)-e*(l*n-c*x)+w*(l*q-c*f);p[1]=-(m*(f*n-q*x)-e*(a*n-g*x)+w*(a*q-g*f));p[2]=m*(l*n-c*x)-r*(a*n-g*x)+w*(a*c-g*l);p[3]=-(m*(l*q-c*f)-r*(a*q-g*f)+e*(a*c-g*l));p[4]=-(h*(f*n-q*x)-d*(l*n-c*x)+t*(l*q-c*f));p[5]=k*(f*n-q*x)-d*(a*n-g*x)+t*(a*q-g*f);p[6]=-(k*(l*n-c*x)-h*(a*n-g*x)+t*(a*c-g*l));p[7]=k*(l*q-c*f)-h*(a*q-g*f)+d*(a*c-
g*l);p[8]=h*(e*n-q*w)-d*(r*n-c*w)+t*(r*q-c*e);p[9]=-(k*(e*n-q*w)-d*(m*n-g*w)+t*(m*q-g*e));p[10]=k*(r*n-c*w)-h*(m*n-g*w)+t*(m*c-g*r);p[11]=-(k*(r*q-c*e)-h*(m*q-g*e)+d*(m*c-g*r));p[12]=-(h*(e*x-f*w)-d*(r*x-l*w)+t*(r*f-l*e));p[13]=k*(e*x-f*w)-d*(m*x-a*w)+t*(m*f-a*e);p[14]=-(k*(r*x-l*w)-h*(m*x-a*w)+t*(m*l-a*r));p[15]=k*(r*f-l*e)-h*(m*f-a*e)+d*(m*l-a*r);return p}},{}],284:[function(b,N,G){N.exports=function(p){var n=new Float32Array(16);n[0]=p[0];n[1]=p[1];n[2]=p[2];n[3]=p[3];n[4]=p[4];n[5]=p[5];n[6]=
p[6];n[7]=p[7];n[8]=p[8];n[9]=p[9];n[10]=p[10];n[11]=p[11];n[12]=p[12];n[13]=p[13];n[14]=p[14];n[15]=p[15];return n}},{}],285:[function(b,N,G){N.exports=function(p,n){p[0]=n[0];p[1]=n[1];p[2]=n[2];p[3]=n[3];p[4]=n[4];p[5]=n[5];p[6]=n[6];p[7]=n[7];p[8]=n[8];p[9]=n[9];p[10]=n[10];p[11]=n[11];p[12]=n[12];p[13]=n[13];p[14]=n[14];p[15]=n[15];return p}},{}],286:[function(b,N,G){N.exports=function(){var p=new Float32Array(16);p[0]=1;p[1]=0;p[2]=0;p[3]=0;p[4]=0;p[5]=1;p[6]=0;p[7]=0;p[8]=0;p[9]=0;p[10]=1;
p[11]=0;p[12]=0;p[13]=0;p[14]=0;p[15]=1;return p}},{}],287:[function(b,N,G){N.exports=function(p){var n=p[0],k=p[1],m=p[2],a=p[3],g=p[4],h=p[5],r=p[6],l=p[7],c=p[8],d=p[9],e=p[10],f=p[11],q=p[12],t=p[13],w=p[14];p=p[15];return(n*h-k*g)*(e*p-f*w)-(n*r-m*g)*(d*p-f*t)+(n*l-a*g)*(d*w-e*t)+(k*r-m*h)*(c*p-f*q)-(k*l-a*h)*(c*w-e*q)+(m*l-a*r)*(c*t-d*q)}},{}],288:[function(b,N,G){N.exports=function(p,n){var k=n[0],m=n[1],a=n[2];n=n[3];var g=k+k,h=m+m,r=a+a;k*=g;var l=m*g;m*=h;var c=a*g,d=a*h;a*=r;g*=n;h*=n;
n*=r;p[0]=1-m-a;p[1]=l+n;p[2]=c-h;p[3]=0;p[4]=l-n;p[5]=1-k-a;p[6]=d+g;p[7]=0;p[8]=c+h;p[9]=d-g;p[10]=1-k-m;p[11]=0;p[12]=0;p[13]=0;p[14]=0;p[15]=1;return p}},{}],289:[function(b,N,G){N.exports=function(p,n,k){var m=k[0],a=k[1];k=k[2];var g=Math.sqrt(m*m+a*a+k*k);if(1E-6>Math.abs(g))return null;g=1/g;m*=g;a*=g;k*=g;g=Math.sin(n);n=Math.cos(n);var h=1-n;p[0]=m*m*h+n;p[1]=a*m*h+k*g;p[2]=k*m*h-a*g;p[3]=0;p[4]=m*a*h-k*g;p[5]=a*a*h+n;p[6]=k*a*h+m*g;p[7]=0;p[8]=m*k*h+a*g;p[9]=a*k*h-m*g;p[10]=k*k*h+n;p[11]=
0;p[12]=0;p[13]=0;p[14]=0;p[15]=1;return p}},{}],290:[function(b,N,G){N.exports=function(p,n,k){var m=n[0],a=n[1],g=n[2],h=n[3],r=m+m,l=a+a,c=g+g;n=m*r;var d=m*l;m*=c;var e=a*l;a*=c;g*=c;r*=h;l*=h;h*=c;p[0]=1-(e+g);p[1]=d+h;p[2]=m-l;p[3]=0;p[4]=d-h;p[5]=1-(n+g);p[6]=a+r;p[7]=0;p[8]=m+l;p[9]=a-r;p[10]=1-(n+e);p[11]=0;p[12]=k[0];p[13]=k[1];p[14]=k[2];p[15]=1;return p}},{}],291:[function(b,N,G){N.exports=function(p,n){p[0]=n[0];p[1]=0;p[2]=0;p[3]=0;p[4]=0;p[5]=n[1];p[6]=0;p[7]=0;p[8]=0;p[9]=0;p[10]=
n[2];p[11]=0;p[12]=0;p[13]=0;p[14]=0;p[15]=1;return p}},{}],292:[function(b,N,G){N.exports=function(p,n){p[0]=1;p[1]=0;p[2]=0;p[3]=0;p[4]=0;p[5]=1;p[6]=0;p[7]=0;p[8]=0;p[9]=0;p[10]=1;p[11]=0;p[12]=n[0];p[13]=n[1];p[14]=n[2];p[15]=1;return p}},{}],293:[function(b,N,G){N.exports=function(p,n){var k=Math.sin(n);n=Math.cos(n);p[0]=1;p[1]=0;p[2]=0;p[3]=0;p[4]=0;p[5]=n;p[6]=k;p[7]=0;p[8]=0;p[9]=-k;p[10]=n;p[11]=0;p[12]=0;p[13]=0;p[14]=0;p[15]=1;return p}},{}],294:[function(b,N,G){N.exports=function(p,n){var k=
Math.sin(n);n=Math.cos(n);p[0]=n;p[1]=0;p[2]=-k;p[3]=0;p[4]=0;p[5]=1;p[6]=0;p[7]=0;p[8]=k;p[9]=0;p[10]=n;p[11]=0;p[12]=0;p[13]=0;p[14]=0;p[15]=1;return p}},{}],295:[function(b,N,G){N.exports=function(p,n){var k=Math.sin(n);n=Math.cos(n);p[0]=n;p[1]=k;p[2]=0;p[3]=0;p[4]=-k;p[5]=n;p[6]=0;p[7]=0;p[8]=0;p[9]=0;p[10]=1;p[11]=0;p[12]=0;p[13]=0;p[14]=0;p[15]=1;return p}},{}],296:[function(b,N,G){N.exports=function(p,n,k,m,a,g,h){var r=1/(k-n),l=1/(a-m),c=1/(g-h);p[0]=2*g*r;p[1]=0;p[2]=0;p[3]=0;p[4]=0;p[5]=
2*g*l;p[6]=0;p[7]=0;p[8]=(k+n)*r;p[9]=(a+m)*l;p[10]=(h+g)*c;p[11]=-1;p[12]=0;p[13]=0;p[14]=h*g*2*c;p[15]=0;return p}},{}],297:[function(b,N,G){N.exports=function(p){p[0]=1;p[1]=0;p[2]=0;p[3]=0;p[4]=0;p[5]=1;p[6]=0;p[7]=0;p[8]=0;p[9]=0;p[10]=1;p[11]=0;p[12]=0;p[13]=0;p[14]=0;p[15]=1;return p}},{}],298:[function(b,N,G){N.exports={create:b("./create"),clone:b("./clone"),copy:b("./copy"),identity:b("./identity"),transpose:b("./transpose"),invert:b("./invert"),adjoint:b("./adjoint"),determinant:b("./determinant"),
multiply:b("./multiply"),translate:b("./translate"),scale:b("./scale"),rotate:b("./rotate"),rotateX:b("./rotateX"),rotateY:b("./rotateY"),rotateZ:b("./rotateZ"),fromRotation:b("./fromRotation"),fromRotationTranslation:b("./fromRotationTranslation"),fromScaling:b("./fromScaling"),fromTranslation:b("./fromTranslation"),fromXRotation:b("./fromXRotation"),fromYRotation:b("./fromYRotation"),fromZRotation:b("./fromZRotation"),fromQuat:b("./fromQuat"),frustum:b("./frustum"),perspective:b("./perspective"),
perspectiveFromFieldOfView:b("./perspectiveFromFieldOfView"),ortho:b("./ortho"),lookAt:b("./lookAt"),str:b("./str")}},{"./adjoint":283,"./clone":284,"./copy":285,"./create":286,"./determinant":287,"./fromQuat":288,"./fromRotation":289,"./fromRotationTranslation":290,"./fromScaling":291,"./fromTranslation":292,"./fromXRotation":293,"./fromYRotation":294,"./fromZRotation":295,"./frustum":296,"./identity":297,"./invert":299,"./lookAt":300,"./multiply":301,"./ortho":302,"./perspective":303,"./perspectiveFromFieldOfView":304,
"./rotate":305,"./rotateX":306,"./rotateY":307,"./rotateZ":308,"./scale":309,"./str":310,"./translate":311,"./transpose":312}],299:[function(b,N,G){N.exports=function(p,n){var k=n[0],m=n[1],a=n[2],g=n[3],h=n[4],r=n[5],l=n[6],c=n[7],d=n[8],e=n[9],f=n[10],q=n[11],t=n[12],w=n[13],x=n[14];n=n[15];var z=k*r-m*h,B=k*l-a*h,A=k*c-g*h,D=m*l-a*r,C=m*c-g*r,v=a*c-g*l,y=d*w-e*t,F=d*x-f*t,J=d*n-q*t,K=e*x-f*w,O=e*n-q*w,I=f*n-q*x,L=z*I-B*O+A*K+D*J-C*F+v*y;if(!L)return null;L=1/L;p[0]=(r*I-l*O+c*K)*L;p[1]=(a*O-m*
I-g*K)*L;p[2]=(w*v-x*C+n*D)*L;p[3]=(f*C-e*v-q*D)*L;p[4]=(l*J-h*I-c*F)*L;p[5]=(k*I-a*J+g*F)*L;p[6]=(x*A-t*v-n*B)*L;p[7]=(d*v-f*A+q*B)*L;p[8]=(h*O-r*J+c*y)*L;p[9]=(m*J-k*O-g*y)*L;p[10]=(t*C-w*A+n*z)*L;p[11]=(e*A-d*C-q*z)*L;p[12]=(r*F-h*K-l*y)*L;p[13]=(k*K-m*F+a*y)*L;p[14]=(w*B-t*D-x*z)*L;p[15]=(d*D-e*B+f*z)*L;return p}},{}],300:[function(b,N,G){var p=b("./identity");N.exports=function(n,k,m,a){var g=k[0],h=k[1];k=k[2];var r=a[0];var l=a[1];var c=a[2];var d=m[0];a=m[1];var e=m[2];if(1E-6>Math.abs(g-
d)&&1E-6>Math.abs(h-a)&&1E-6>Math.abs(k-e))return p(n);m=g-d;a=h-a;d=k-e;var f=1/Math.sqrt(m*m+a*a+d*d);m*=f;a*=f;d*=f;e=l*d-c*a;c=c*m-r*d;r=r*a-l*m;(f=Math.sqrt(e*e+c*c+r*r))?(f=1/f,e*=f,c*=f,r*=f):r=c=e=0;l=a*r-d*c;var q=d*e-m*r;var t=m*c-a*e;(f=Math.sqrt(l*l+q*q+t*t))?(f=1/f,l*=f,q*=f,t*=f):t=q=l=0;n[0]=e;n[1]=l;n[2]=m;n[3]=0;n[4]=c;n[5]=q;n[6]=a;n[7]=0;n[8]=r;n[9]=t;n[10]=d;n[11]=0;n[12]=-(e*g+c*h+r*k);n[13]=-(l*g+q*h+t*k);n[14]=-(m*g+a*h+d*k);n[15]=1;return n}},{"./identity":297}],301:[function(b,
N,G){N.exports=function(p,n,k){var m=n[0],a=n[1],g=n[2],h=n[3],r=n[4],l=n[5],c=n[6],d=n[7],e=n[8],f=n[9],q=n[10],t=n[11],w=n[12],x=n[13],z=n[14];n=n[15];var B=k[0],A=k[1],D=k[2],C=k[3];p[0]=B*m+A*r+D*e+C*w;p[1]=B*a+A*l+D*f+C*x;p[2]=B*g+A*c+D*q+C*z;p[3]=B*h+A*d+D*t+C*n;B=k[4];A=k[5];D=k[6];C=k[7];p[4]=B*m+A*r+D*e+C*w;p[5]=B*a+A*l+D*f+C*x;p[6]=B*g+A*c+D*q+C*z;p[7]=B*h+A*d+D*t+C*n;B=k[8];A=k[9];D=k[10];C=k[11];p[8]=B*m+A*r+D*e+C*w;p[9]=B*a+A*l+D*f+C*x;p[10]=B*g+A*c+D*q+C*z;p[11]=B*h+A*d+D*t+C*n;B=k[12];
A=k[13];D=k[14];C=k[15];p[12]=B*m+A*r+D*e+C*w;p[13]=B*a+A*l+D*f+C*x;p[14]=B*g+A*c+D*q+C*z;p[15]=B*h+A*d+D*t+C*n;return p}},{}],302:[function(b,N,G){N.exports=function(p,n,k,m,a,g,h){var r=1/(n-k),l=1/(m-a),c=1/(g-h);p[0]=-2*r;p[1]=0;p[2]=0;p[3]=0;p[4]=0;p[5]=-2*l;p[6]=0;p[7]=0;p[8]=0;p[9]=0;p[10]=2*c;p[11]=0;p[12]=(n+k)*r;p[13]=(a+m)*l;p[14]=(h+g)*c;p[15]=1;return p}},{}],303:[function(b,N,G){N.exports=function(p,n,k,m,a){n=1/Math.tan(n/2);var g=1/(m-a);p[0]=n/k;p[1]=0;p[2]=0;p[3]=0;p[4]=0;p[5]=n;
p[6]=0;p[7]=0;p[8]=0;p[9]=0;p[10]=(a+m)*g;p[11]=-1;p[12]=0;p[13]=0;p[14]=2*a*m*g;p[15]=0;return p}},{}],304:[function(b,N,G){N.exports=function(p,n,k,m){var a=Math.tan(n.upDegrees*Math.PI/180),g=Math.tan(n.downDegrees*Math.PI/180),h=Math.tan(n.leftDegrees*Math.PI/180);n=Math.tan(n.rightDegrees*Math.PI/180);var r=2/(h+n),l=2/(a+g);p[0]=r;p[1]=0;p[2]=0;p[3]=0;p[4]=0;p[5]=l;p[6]=0;p[7]=0;p[8]=-((h-n)*r*.5);p[9]=(a-g)*l*.5;p[10]=m/(k-m);p[11]=-1;p[12]=0;p[13]=0;p[14]=m*k/(k-m);p[15]=0;return p}},{}],
305:[function(b,N,G){N.exports=function(p,n,k,m){var a=m[0],g=m[1];m=m[2];var h=Math.sqrt(a*a+g*g+m*m);if(1E-6>Math.abs(h))return null;h=1/h;a*=h;g*=h;m*=h;var r=Math.sin(k);var l=Math.cos(k);var c=1-l;k=n[0];h=n[1];var d=n[2];var e=n[3];var f=n[4];var q=n[5];var t=n[6];var w=n[7];var x=n[8];var z=n[9];var B=n[10];var A=n[11];var D=a*a*c+l;var C=g*a*c+m*r;var v=m*a*c-g*r;var y=a*g*c-m*r;var F=g*g*c+l;var J=m*g*c+a*r;var K=a*m*c+g*r;a=g*m*c-a*r;g=m*m*c+l;p[0]=k*D+f*C+x*v;p[1]=h*D+q*C+z*v;p[2]=d*D+
t*C+B*v;p[3]=e*D+w*C+A*v;p[4]=k*y+f*F+x*J;p[5]=h*y+q*F+z*J;p[6]=d*y+t*F+B*J;p[7]=e*y+w*F+A*J;p[8]=k*K+f*a+x*g;p[9]=h*K+q*a+z*g;p[10]=d*K+t*a+B*g;p[11]=e*K+w*a+A*g;n!==p&&(p[12]=n[12],p[13]=n[13],p[14]=n[14],p[15]=n[15]);return p}},{}],306:[function(b,N,G){N.exports=function(p,n,k){var m=Math.sin(k);k=Math.cos(k);var a=n[4],g=n[5],h=n[6],r=n[7],l=n[8],c=n[9],d=n[10],e=n[11];n!==p&&(p[0]=n[0],p[1]=n[1],p[2]=n[2],p[3]=n[3],p[12]=n[12],p[13]=n[13],p[14]=n[14],p[15]=n[15]);p[4]=a*k+l*m;p[5]=g*k+c*m;p[6]=
h*k+d*m;p[7]=r*k+e*m;p[8]=l*k-a*m;p[9]=c*k-g*m;p[10]=d*k-h*m;p[11]=e*k-r*m;return p}},{}],307:[function(b,N,G){N.exports=function(p,n,k){var m=Math.sin(k);k=Math.cos(k);var a=n[0],g=n[1],h=n[2],r=n[3],l=n[8],c=n[9],d=n[10],e=n[11];n!==p&&(p[4]=n[4],p[5]=n[5],p[6]=n[6],p[7]=n[7],p[12]=n[12],p[13]=n[13],p[14]=n[14],p[15]=n[15]);p[0]=a*k-l*m;p[1]=g*k-c*m;p[2]=h*k-d*m;p[3]=r*k-e*m;p[8]=a*m+l*k;p[9]=g*m+c*k;p[10]=h*m+d*k;p[11]=r*m+e*k;return p}},{}],308:[function(b,N,G){N.exports=function(p,n,k){var m=
Math.sin(k);k=Math.cos(k);var a=n[0],g=n[1],h=n[2],r=n[3],l=n[4],c=n[5],d=n[6],e=n[7];n!==p&&(p[8]=n[8],p[9]=n[9],p[10]=n[10],p[11]=n[11],p[12]=n[12],p[13]=n[13],p[14]=n[14],p[15]=n[15]);p[0]=a*k+l*m;p[1]=g*k+c*m;p[2]=h*k+d*m;p[3]=r*k+e*m;p[4]=l*k-a*m;p[5]=c*k-g*m;p[6]=d*k-h*m;p[7]=e*k-r*m;return p}},{}],309:[function(b,N,G){N.exports=function(p,n,k){var m=k[0],a=k[1];k=k[2];p[0]=n[0]*m;p[1]=n[1]*m;p[2]=n[2]*m;p[3]=n[3]*m;p[4]=n[4]*a;p[5]=n[5]*a;p[6]=n[6]*a;p[7]=n[7]*a;p[8]=n[8]*k;p[9]=n[9]*k;p[10]=
n[10]*k;p[11]=n[11]*k;p[12]=n[12];p[13]=n[13];p[14]=n[14];p[15]=n[15];return p}},{}],310:[function(b,N,G){N.exports=function(p){return"mat4("+p[0]+", "+p[1]+", "+p[2]+", "+p[3]+", "+p[4]+", "+p[5]+", "+p[6]+", "+p[7]+", "+p[8]+", "+p[9]+", "+p[10]+", "+p[11]+", "+p[12]+", "+p[13]+", "+p[14]+", "+p[15]+")"}},{}],311:[function(b,N,G){N.exports=function(p,n,k){var m=k[0],a=k[1];k=k[2];if(n===p)p[12]=n[0]*m+n[4]*a+n[8]*k+n[12],p[13]=n[1]*m+n[5]*a+n[9]*k+n[13],p[14]=n[2]*m+n[6]*a+n[10]*k+n[14],p[15]=n[3]*
m+n[7]*a+n[11]*k+n[15];else{var g=n[0];var h=n[1];var r=n[2];var l=n[3];var c=n[4];var d=n[5];var e=n[6];var f=n[7];var q=n[8];var t=n[9];var w=n[10];var x=n[11];p[0]=g;p[1]=h;p[2]=r;p[3]=l;p[4]=c;p[5]=d;p[6]=e;p[7]=f;p[8]=q;p[9]=t;p[10]=w;p[11]=x;p[12]=g*m+c*a+q*k+n[12];p[13]=h*m+d*a+t*k+n[13];p[14]=r*m+e*a+w*k+n[14];p[15]=l*m+f*a+x*k+n[15]}return p}},{}],312:[function(b,N,G){N.exports=function(p,n){if(p===n){var k=n[1],m=n[2],a=n[3],g=n[6],h=n[7],r=n[11];p[1]=n[4];p[2]=n[8];p[3]=n[12];p[4]=k;p[6]=
n[9];p[7]=n[13];p[8]=m;p[9]=g;p[11]=n[14];p[12]=a;p[13]=h;p[14]=r}else p[0]=n[0],p[1]=n[4],p[2]=n[8],p[3]=n[12],p[4]=n[1],p[5]=n[5],p[6]=n[9],p[7]=n[13],p[8]=n[2],p[9]=n[6],p[10]=n[10],p[11]=n[14],p[12]=n[3],p[13]=n[7],p[14]=n[11],p[15]=n[15];return p}},{}],313:[function(b,N,G){function p(m,a){for(var g=[0,0,0,0],h=0;4>h;++h)for(var r=0;4>r;++r)g[r]+=m[4*h+r]*a[h];return g}var n=b("barycentric"),k=b("polytope-closest-point/lib/closest_point_2d.js");N.exports=function(m,a,g,h,r,l){if(1===m.length)return[0,
m[0].slice()];for(var c=Array(m.length),d=0;d<m.length;++d){var e=d,f=m[d],q=l;f=p(r,p(h,p(g,[f[0],f[1],f[2],1])));for(var t=0;3>t;++t)f[t]/=f[3];c[e]=[.5*q[0]*(1+f[0]),.5*q[1]*(1-f[1])]}g=0;h=Infinity;for(d=0;d<c.length;++d){for(l=r=0;2>l;++l)r+=Math.pow(c[d][l]-a[l],2);r<h&&(h=r,g=d)}if(2===c.length){for(r=h=d=0;2>r;++r)d+=Math.pow(a[r]-c[0][r],2),h+=Math.pow(a[r]-c[1][r],2);d=Math.sqrt(d);h=Math.sqrt(h);a=1E-6>d+h?[1,0]:[h/(d+h),d/(h+d)]}else 3===c.length?(d=[0,0],k(c[0],c[1],c[2],a,d),a=n(c,d)):
a=[];for(d=c=0;3>d;++d){if(-.001>a[d]||1.0001<a[d])return null;c+=a[d]}if(.001<Math.abs(c-1))return null;c=[0,0,0];for(d=0;d<m.length;++d)for(h=m[d],r=a[d],l=0;3>l;++l)c[l]+=r*h[l];return[g,c,a]}},{barycentric:85,"polytope-closest-point/lib/closest_point_2d.js":512}],314:[function(b,N,G){var p=b("glslify");b=p(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  gl_Position      \x3d project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate \x3d view * vec4(position , 1.0);\n  cameraCoordinate.xyz /\x3d cameraCoordinate.w;\n  f_lightDirection \x3d lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   \x3d eyePosition - cameraCoordinate.xyz;\n  f_normal  \x3d normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  f_color          \x3d color;\n  f_data           \x3d position;\n  f_uv             \x3d uv;\n}\n"]);
N=p(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH \x3d max(x, 0.0001);\n  float cos2Alpha \x3d NdotH * NdotH;\n  float tan2Alpha \x3d (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 \x3d roughness * roughness;\n  float denom \x3d 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN \x3d max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN \x3d max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H \x3d normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH \x3d max(dot(surfaceNormal, H), 0.0);\n  float VdotH \x3d max(dot(viewDirection, H), 0.000001);\n  float LdotH \x3d max(dot(lightDirection, H), 0.000001);\n  float G1 \x3d (2.0 * NdotH * VdotN) / VdotH;\n  float G2 \x3d (2.0 * NdotH * LdotN) / LdotH;\n  float G \x3d min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D \x3d beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F \x3d pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann \x3d require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (f_color.a \x3d\x3d 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], f_data)\n  ) discard;\n\n  vec3 N \x3d normalize(f_normal);\n  vec3 L \x3d normalize(f_lightDirection);\n  vec3 V \x3d normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N \x3d -N;\n  }\n\n  float specular \x3d min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular \x3d max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  \x3d min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor \x3d vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);\n  vec4 litColor \x3d surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor \x3d litColor * f_color.a;\n}\n"]);
var n=p(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position \x3d projection * view * model * vec4(position, 1.0);\n  f_color \x3d color;\n  f_data  \x3d position;\n  f_uv    \x3d uv;\n}"]),k=p(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor \x3d f_color * texture2D(texture, f_uv) * opacity;\n}"]),
m=p(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0.0, 0.0 ,0.0 ,0.0);\n  } else {\n    gl_Position \x3d projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize \x3d pointSize;\n  f_color \x3d color;\n  f_uv \x3d uv;\n}"]),
a=p(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR \x3d gl_PointCoord.xy - vec2(0.5, 0.5);\n  if(dot(pointR, pointR) \x3e 0.25) {\n    discard;\n  }\n  gl_FragColor \x3d f_color * texture2D(texture, f_uv) * opacity;\n}"]),g=p(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position \x3d projection * view * model * vec4(position, 1.0);\n  f_id        \x3d id;\n  f_position  \x3d position;\n}"]),
h=p(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor \x3d vec4(pickId, f_id.xyz);\n}"]),
r=p(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0.0, 0.0, 0.0, 0.0);\n  } else {\n    gl_Position  \x3d projection * view * model * vec4(position, 1.0);\n    gl_PointSize \x3d pointSize;\n  }\n  f_id         \x3d id;\n  f_position   \x3d position;\n}"]),
l=p(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position \x3d projection * view * model * vec4(position, 1.0);\n}"]);p=p(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor \x3d vec4(contourColor, 1.0);\n}\n"]);G.meshShader={vertex:b,fragment:N,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]};
G.wireShader={vertex:n,fragment:k,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]};G.pointShader={vertex:m,fragment:a,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]};G.pickShader={vertex:g,fragment:h,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]};G.pointPickShader={vertex:r,fragment:h,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},
{name:"id",type:"vec4"}]};G.contourShader={vertex:l,fragment:p,attributes:[{name:"position",type:"vec3"}]}},{glslify:442}],315:[function(b,N,G){function p(C,v,y,F,J,K,O,I,L,H,M,Q,Z,ca,W,T,U,ha,Y,ba,ja,ma,ia,oa,xa,ra,la){this.gl=C;this.pixelRatio=1;this.cells=[];this.positions=[];this.intensity=[];this.texture=v;this.dirty=!0;this.triShader=y;this.lineShader=F;this.pointShader=J;this.pickShader=K;this.pointPickShader=O;this.contourShader=I;this.trianglePositions=L;this.triangleColors=M;this.triangleNormals=
Z;this.triangleUVs=Q;this.triangleIds=H;this.triangleVAO=ca;this.triangleCount=0;this.lineWidth=1;this.edgePositions=W;this.edgeColors=U;this.edgeUVs=ha;this.edgeIds=T;this.edgeVAO=Y;this.edgeCount=0;this.pointPositions=ba;this.pointColors=ma;this.pointUVs=ia;this.pointSizes=oa;this.pointIds=ja;this.pointVAO=xa;this.pointCount=0;this.contourLineWidth=1;this.contourPositions=ra;this.contourVAO=la;this.contourCount=0;this.contourColor=[0,0,0];this.pickVertex=this.contourEnable=!0;this.pickId=1;this.bounds=
[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.lightPosition=[1E5,1E5,0];this.diffuseLight=this.ambientLight=.8;this.specularLight=2;this.roughness=.5;this.fresnel=1.5;this.opacity=1;this.opacityscale=this.hasAlpha=!1;this._projection=this._view=this._model=D;this._resolution=[1,1]}function n(C,v){if(!v||!v.length)return 1;for(var y=0;y<v.length&&!(2>v.length);++y){if(v[y][0]===C)return v[y][1];if(v[y][0]>
C&&0<y)return C=(v[y][0]-C)/(v[y][0]-v[y-1][0]),v[y][1]*(1-C)+C*v[y-1][1]}return 1}var k=b("gl-shader"),m=b("gl-buffer"),a=b("gl-vao"),g=b("gl-texture2d"),h=b("normals"),r=b("gl-mat4/multiply"),l=b("gl-mat4/invert"),c=b("ndarray"),d=b("colormap"),e=b("simplicial-complex-contour"),f=b("typedarray-pool");G=b("./lib/shaders");var q=b("./lib/closest-point"),t=G.meshShader,w=G.wireShader,x=G.pointShader,z=G.pickShader,B=G.pointPickShader,A=G.contourShader,D=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b=p.prototype;
b.isOpaque=function(){return!this.hasAlpha};b.isTransparent=function(){return this.hasAlpha};b.pickSlots=1;b.setPickBase=function(C){this.pickId=C};b.highlight=function(C){if(C&&this.contourEnable){var v=e(this.cells,this.intensity,C.intensity);C=v.cells;var y=v.vertexIds;v=v.vertexWeights;for(var F=C.length,J=f.mallocFloat32(6*F),K=0,O=0;O<F;++O)for(var I=C[O],L=0;2>L;++L){var H=I[0];2===I.length&&(H=I[L]);var M=v[H],Q=1-M,Z=this.positions[y[H][0]];H=this.positions[y[H][1]];for(var ca=0;3>ca;++ca)J[K++]=
M*Z[ca]+Q*H[ca]}this.contourCount=K/3|0;this.contourPositions.update(J.subarray(0,K));f.free(J)}else this.contourCount=0};b.update=function(C){C=C||{};var v=this.gl;this.dirty=!0;"contourEnable"in C&&(this.contourEnable=C.contourEnable);"contourColor"in C&&(this.contourColor=C.contourColor);"lineWidth"in C&&(this.lineWidth=C.lineWidth);"lightPosition"in C&&(this.lightPosition=C.lightPosition);this.hasAlpha=!1;"opacity"in C&&(this.opacity=C.opacity,1>this.opacity&&(this.hasAlpha=!0));"opacityscale"in
C&&(this.opacityscale=C.opacityscale,this.hasAlpha=!0);"ambient"in C&&(this.ambientLight=C.ambient);"diffuse"in C&&(this.diffuseLight=C.diffuse);"specular"in C&&(this.specularLight=C.specular);"roughness"in C&&(this.roughness=C.roughness);"fresnel"in C&&(this.fresnel=C.fresnel);if(C.texture)this.texture.dispose(),this.texture=g(v,C.texture);else if(C.colormap){this.texture.shape=[256,256];this.texture.minFilter=v.LINEAR_MIPMAP_LINEAR;this.texture.magFilter=v.LINEAR;v=this.texture;var y=v.setPixels;
var F=this.opacityscale;for(var J=d({colormap:C.colormap,nshades:256,format:"rgba"}),K=new Uint8Array(1024),O=0;256>O;++O){for(var I=J[O],L=0;3>L;++L)K[4*O+L]=I[L];K[4*O+3]=F?255*n(O/255,F):255*I[3]}F=c(K,[256,256,4],[4,0,1]);y.call(v,F);this.texture.generateMipmap()}v=C.cells;if((y=C.positions)&&v){F=[];J=[];K=[];O=[];I=[];L=[];var H=[],M=[],Q=[],Z=[],ca=[],W=[],T=[],U=[];this.cells=v;this.positions=y;var ha=C.vertexNormals,Y=C.cellNormals,ba=void 0===C.vertexNormalsEpsilon?1E-6:C.vertexNormalsEpsilon,
ja=void 0===C.faceNormalsEpsilon?1E-6:C.faceNormalsEpsilon;C.useFacetNormals&&!Y&&(Y=h.faceNormals(v,y,ja));Y||ha||(ha=h.vertexNormals(v,y,ba));ba=C.vertexColors;ja=C.cellColors;var ma=C.meshColor||[1,1,1,1],ia=C.vertexUVs,oa=C.vertexIntensity,xa=C.cellUVs,ra=C.cellIntensity,la=Infinity,ka=-Infinity;if(!ia&&!xa)if(oa)if(C.vertexIntensityBounds)la=+C.vertexIntensityBounds[0],ka=+C.vertexIntensityBounds[1];else for(var na=0;na<oa.length;++na){var qa=oa[na];la=Math.min(la,qa);ka=Math.max(ka,qa)}else if(ra)if(C.cellIntensityBounds)la=
+C.cellIntensityBounds[0],ka=+C.cellIntensityBounds[1];else for(na=0;na<ra.length;++na)qa=ra[na],la=Math.min(la,qa),ka=Math.max(ka,qa);else for(na=0;na<y.length;++na)qa=y[na][2],la=Math.min(la,qa),ka=Math.max(ka,qa);if(oa)this.intensity=oa;else if(ra)this.intensity=ra;else{na=y.length;qa=Array(na);for(var ta=0;ta<na;++ta)qa[ta]=y[ta][2];this.intensity=qa}this.pickVertex=!(ra||ja);qa=C.pointSizes;C=C.pointSize||1;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];for(na=0;na<
y.length;++na){var za=y[na];for(ta=0;3>ta;++ta)!isNaN(za[ta])&&isFinite(za[ta])&&(this.bounds[0][ta]=Math.min(this.bounds[0][ta],za[ta]),this.bounds[1][ta]=Math.max(this.bounds[1][ta],za[ta]))}var Ia=0,Xa=0,$a=0;na=0;a:for(;na<v.length;++na){var gb=v[na];switch(gb.length){case 1:var sb=gb[0];za=y[sb];for(ta=0;3>ta;++ta)if(isNaN(za[ta])||!isFinite(za[ta]))continue a;Z.push(za[0],za[1],za[2]);var jb=ba?ba[sb]:ja?ja[na]:ma;this.opacityscale&&oa?J.push(jb[0],jb[1],jb[2],this.opacity*n((oa[sb]-la)/(ka-
la),this.opacityscale)):3===jb.length?ca.push(jb[0],jb[1],jb[2],this.opacity):(ca.push(jb[0],jb[1],jb[2],jb[3]*this.opacity),1>jb[3]&&(this.hasAlpha=!0));za=ia?ia[sb]:oa?[(oa[sb]-la)/(ka-la),0]:xa?xa[na]:ra?[(ra[na]-la)/(ka-la),0]:[(za[2]-la)/(ka-la),0];W.push(za[0],za[1]);qa?T.push(qa[sb]):T.push(C);U.push(na);$a+=1;break;case 2:for(ta=0;2>ta;++ta)for(sb=gb[ta],za=y[sb],sb=0;3>sb;++sb)if(isNaN(za[sb])||!isFinite(za[sb]))continue a;for(ta=0;2>ta;++ta)sb=gb[ta],za=y[sb],L.push(za[0],za[1],za[2]),jb=
ba?ba[sb]:ja?ja[na]:ma,this.opacityscale&&oa?J.push(jb[0],jb[1],jb[2],this.opacity*n((oa[sb]-la)/(ka-la),this.opacityscale)):3===jb.length?H.push(jb[0],jb[1],jb[2],this.opacity):(H.push(jb[0],jb[1],jb[2],jb[3]*this.opacity),1>jb[3]&&(this.hasAlpha=!0)),za=ia?ia[sb]:oa?[(oa[sb]-la)/(ka-la),0]:xa?xa[na]:ra?[(ra[na]-la)/(ka-la),0]:[(za[2]-la)/(ka-la),0],M.push(za[0],za[1]),Q.push(na);Xa+=1;break;case 3:for(ta=0;3>ta;++ta)for(sb=gb[ta],za=y[sb],sb=0;3>sb;++sb)if(isNaN(za[sb])||!isFinite(za[sb]))continue a;
for(ta=0;3>ta;++ta)sb=gb[2-ta],za=y[sb],F.push(za[0],za[1],za[2]),(jb=ba?ba[sb]:ja?ja[na]:ma)?this.opacityscale&&oa?J.push(jb[0],jb[1],jb[2],this.opacity*n((oa[sb]-la)/(ka-la),this.opacityscale)):3===jb.length?J.push(jb[0],jb[1],jb[2],this.opacity):(J.push(jb[0],jb[1],jb[2],jb[3]*this.opacity),1>jb[3]&&(this.hasAlpha=!0)):J.push(.5,.5,.5,1),za=ia?ia[sb]:oa?[(oa[sb]-la)/(ka-la),0]:xa?xa[na]:ra?[(ra[na]-la)/(ka-la),0]:[(za[2]-la)/(ka-la),0],O.push(za[0],za[1]),za=ha?ha[sb]:Y[na],K.push(za[0],za[1],
za[2]),I.push(na);Ia+=1}}this.pointCount=$a;this.edgeCount=Xa;this.triangleCount=Ia;this.pointPositions.update(Z);this.pointColors.update(ca);this.pointUVs.update(W);this.pointSizes.update(T);this.pointIds.update(new Uint32Array(U));this.edgePositions.update(L);this.edgeColors.update(H);this.edgeUVs.update(M);this.edgeIds.update(new Uint32Array(Q));this.trianglePositions.update(F);this.triangleColors.update(J);this.triangleUVs.update(O);this.triangleNormals.update(K);this.triangleIds.update(new Uint32Array(I))}};
b.drawTransparent=b.draw=function(C){C=C||{};var v=this.gl,y=C.model||D,F=C.view||D,J=C.projection||D,K=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]];for(C=0;3>C;++C)K[0][C]=Math.max(K[0][C],this.clipBounds[0][C]),K[1][C]=Math.min(K[1][C],this.clipBounds[1][C]);y={model:y,view:F,projection:J,inverseModel:D.slice(),clipBounds:K,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,
texture:0};y.inverseModel=l(y.inverseModel,y.model);v.disable(v.CULL_FACE);this.texture.bind(0);F=Array(16);r(F,y.view,y.model);r(F,y.projection,F);l(F,F);for(C=0;3>C;++C)y.eyePosition[C]=F[12+C]/F[15];J=F[15];for(C=0;3>C;++C)J+=this.lightPosition[C]*F[4*C+3];for(C=0;3>C;++C){K=F[12+C];for(var O=0;3>O;++O)K+=F[4*O+C]*this.lightPosition[O];y.lightPosition[C]=K/J}0<this.triangleCount&&(C=this.triShader,C.bind(),C.uniforms=y,this.triangleVAO.bind(),v.drawArrays(v.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind());
0<this.edgeCount&&0<this.lineWidth&&(C=this.lineShader,C.bind(),C.uniforms=y,this.edgeVAO.bind(),v.lineWidth(this.lineWidth*this.pixelRatio),v.drawArrays(v.LINES,0,2*this.edgeCount),this.edgeVAO.unbind());0<this.pointCount&&(C=this.pointShader,C.bind(),C.uniforms=y,this.pointVAO.bind(),v.drawArrays(v.POINTS,0,this.pointCount),this.pointVAO.unbind());this.contourEnable&&0<this.contourCount&&0<this.contourLineWidth&&(C=this.contourShader,C.bind(),C.uniforms=y,this.contourVAO.bind(),v.drawArrays(v.LINES,
0,this.contourCount),this.contourVAO.unbind())};b.drawPick=function(C){C=C||{};var v=this.gl,y=C.model||D,F=C.view||D;C=C.projection||D;for(var J=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]],K=0;3>K;++K)J[0][K]=Math.max(J[0][K],this.clipBounds[0][K]),J[1][K]=Math.min(J[1][K],this.clipBounds[1][K]);this._model=[].slice.call(y);this._view=[].slice.call(F);this._projection=[].slice.call(C);this._resolution=[v.drawingBufferWidth,v.drawingBufferHeight];y={model:y,view:F,projection:C,clipBounds:J,pickId:this.pickId/
255};F=this.pickShader;F.bind();F.uniforms=y;0<this.triangleCount&&(this.triangleVAO.bind(),v.drawArrays(v.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind());0<this.edgeCount&&(this.edgeVAO.bind(),v.lineWidth(this.lineWidth*this.pixelRatio),v.drawArrays(v.LINES,0,2*this.edgeCount),this.edgeVAO.unbind());0<this.pointCount&&(F=this.pointPickShader,F.bind(),F.uniforms=y,this.pointVAO.bind(),v.drawArrays(v.POINTS,0,this.pointCount),this.pointVAO.unbind())};b.pick=function(C){if(!C||C.id!==this.pickId)return null;
for(var v=C.value[0]+256*C.value[1]+65536*C.value[2],y=this.cells[v],F=this.positions,J=Array(y.length),K=0;K<y.length;++K)J[K]=F[y[K]];K=C.coord[0];C=C.coord[1];if(!this.pickVertex){J=this.positions[y[0]];F=this.positions[y[1]];var O=this.positions[y[2]];return{_cellCenter:!0,position:[K,C],index:v,cell:y,cellId:v,intensity:this.intensity[v],dataCoordinate:[(J[0]+F[0]+O[0])/3,(J[1]+F[1]+O[1])/3,(J[2]+F[2]+O[2])/3]}}J=q(J,[K*this.pixelRatio,this._resolution[1]-C*this.pixelRatio],this._model,this._view,
this._projection,this._resolution);if(!J)return null;C=J[2];for(K=F=0;K<y.length;++K)F+=C[K]*this.intensity[y[K]];return{position:J[1],index:y[J[0]],cell:y,cellId:v,intensity:F,dataCoordinate:this.positions[y[J[0]]]}};b.dispose=function(){this.texture.dispose();this.triShader.dispose();this.lineShader.dispose();this.pointShader.dispose();this.pickShader.dispose();this.pointPickShader.dispose();this.triangleVAO.dispose();this.trianglePositions.dispose();this.triangleColors.dispose();this.triangleUVs.dispose();
this.triangleNormals.dispose();this.triangleIds.dispose();this.edgeVAO.dispose();this.edgePositions.dispose();this.edgeColors.dispose();this.edgeUVs.dispose();this.edgeIds.dispose();this.pointVAO.dispose();this.pointPositions.dispose();this.pointColors.dispose();this.pointUVs.dispose();this.pointSizes.dispose();this.pointIds.dispose();this.contourVAO.dispose();this.contourPositions.dispose();this.contourShader.dispose()};N.exports=function(C,v){1===arguments.length&&(v=C,C=v.gl);if(!(C.getExtension("OES_standard_derivatives")||
C.getExtension("MOZ_OES_standard_derivatives")||C.getExtension("WEBKIT_OES_standard_derivatives")))throw Error("derivatives not supported");var y=k(C,t.vertex,t.fragment);y.attributes.position.location=0;y.attributes.color.location=2;y.attributes.uv.location=3;y.attributes.normal.location=4;var F=k(C,w.vertex,w.fragment);F.attributes.position.location=0;F.attributes.color.location=2;F.attributes.uv.location=3;var J=k(C,x.vertex,x.fragment);J.attributes.position.location=0;J.attributes.color.location=
2;J.attributes.uv.location=3;J.attributes.pointSize.location=4;var K=k(C,z.vertex,z.fragment);K.attributes.position.location=0;K.attributes.id.location=1;var O=k(C,B.vertex,B.fragment);O.attributes.position.location=0;O.attributes.id.location=1;O.attributes.pointSize.location=4;var I=k(C,A.vertex,A.fragment);I.attributes.position.location=0;var L=g(C,c(new Uint8Array([255,255,255,255]),[1,1,4]));L.generateMipmap();L.minFilter=C.LINEAR_MIPMAP_LINEAR;L.magFilter=C.LINEAR;var H=m(C),M=m(C),Q=m(C),Z=
m(C),ca=m(C),W=a(C,[{buffer:H,type:C.FLOAT,size:3},{buffer:ca,type:C.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:M,type:C.FLOAT,size:4},{buffer:Q,type:C.FLOAT,size:2},{buffer:Z,type:C.FLOAT,size:3}]),T=m(C),U=m(C),ha=m(C),Y=m(C),ba=a(C,[{buffer:T,type:C.FLOAT,size:3},{buffer:Y,type:C.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:U,type:C.FLOAT,size:4},{buffer:ha,type:C.FLOAT,size:2}]),ja=m(C),ma=m(C),ia=m(C),oa=m(C),xa=m(C),ra=a(C,[{buffer:ja,type:C.FLOAT,size:3},{buffer:xa,type:C.UNSIGNED_BYTE,size:4,
normalized:!0},{buffer:ma,type:C.FLOAT,size:4},{buffer:ia,type:C.FLOAT,size:2},{buffer:oa,type:C.FLOAT,size:1}]),la=m(C),ka=a(C,[{buffer:la,type:C.FLOAT,size:3}]);y=new p(C,L,y,F,J,K,O,I,H,ca,M,Q,Z,W,T,Y,U,ha,ba,ja,xa,ma,ia,oa,ra,la,ka);y.update(v);return y}},{"./lib/closest-point":313,"./lib/shaders":314,colormap:137,"gl-buffer":267,"gl-mat4/invert":299,"gl-mat4/multiply":301,"gl-shader":339,"gl-texture2d":356,"gl-vao":361,ndarray:483,normals:486,"simplicial-complex-contour":557,"typedarray-pool":617}],
316:[function(b,N,G){function p(a,g,h){this.plot=a;this.vbo=g;this.shader=h}N.exports=function(a){var g=a.gl,h=n(g,[0,0,0,1,1,0,1,1]);g=k(g,m.boxVert,m.lineFrag);return new p(a,h,g)};var n=b("gl-buffer"),k=b("gl-shader"),m=b("./shaders");b=p.prototype;b.bind=function(){var a=this.shader;this.vbo.bind();this.shader.bind();a.attributes.coord.pointer();a.uniforms.screenBox=this.plot.screenBox};b.drawBox=function(){var a=[0,0],g=[0,0];return function(h,r,l,c,d){var e=this.shader,f=this.plot.gl;a[0]=h;
a[1]=r;g[0]=l;g[1]=c;e.uniforms.lo=a;e.uniforms.hi=g;e.uniforms.color=d;f.drawArrays(f.TRIANGLE_STRIP,0,4)}}();b.dispose=function(){this.vbo.dispose();this.shader.dispose()}},{"./shaders":319,"gl-buffer":267,"gl-shader":339}],317:[function(b,N,G){function p(h,r,l,c){this.plot=h;this.vbo=r;this.shader=l;this.tickShader=c;this.ticks=[[],[]]}function n(h,r){return h-r}N.exports=function(h){var r=h.gl,l=k(r),c=m(r,g.gridVert,g.gridFrag);r=m(r,g.tickVert,g.gridFrag);return new p(h,l,c,r)};var k=b("gl-buffer"),
m=b("gl-shader"),a=b("binary-search-bounds"),g=b("./shaders");b=p.prototype;b.draw=function(){var h=[0,0],r=[0,0],l=[0,0];return function(){var c=this.plot,d=this.vbo,e=this.shader,f=this.ticks,q=c.gl,t=c._tickBounds,w=c.dataBox,x=c.viewBox,z=c.gridLineWidth,B=c.gridLineColor,A=c.gridLineEnable;c=c.pixelRatio;for(var D=0;2>D;++D){var C=t[D],v=.5*(w[D+2]+w[D]),y=w[D+2]-w[D];r[D]=2*(t[D+2]-C)/y;h[D]=2*(C-v)/y}e.bind();d.bind();e.attributes.dataCoord.pointer();e.uniforms.dataShift=h;e.uniforms.dataScale=
r;for(D=d=0;2>D;++D)l[0]=l[1]=0,l[D]=1,e.uniforms.dataAxis=l,e.uniforms.lineWidth=z[D]/(x[D+2]-x[D])*c,e.uniforms.color=B[D],t=6*f[D].length,A[D]&&t&&q.drawArrays(q.TRIANGLES,d,t),d+=t}}();b.drawTickMarks=function(){var h=[0,0],r=[0,0],l=[1,0],c=[0,1],d=[0,0],e=[0,0];return function(){var f=this.plot,q=this.vbo,t=this.tickShader,w=this.ticks,x=f.gl,z=f._tickBounds,B=f.dataBox,A=f.viewBox,D=f.pixelRatio,C=f.screenBox,v=C[2]-C[0];C=C[3]-C[1];for(var y=A[2]-A[0],F=A[3]-A[1],J=0;2>J;++J){var K=z[J],O=
.5*(B[J+2]+B[J]),I=B[J+2]-B[J];r[J]=2*(z[J+2]-K)/I;h[J]=2*(K-O)/I}r[0]*=y/v;h[0]*=y/v;r[1]*=F/C;h[1]*=F/C;t.bind();q.bind();t.attributes.dataCoord.pointer();q=t.uniforms;q.dataShift=h;q.dataScale=r;t=f.tickMarkLength;y=f.tickMarkWidth;f=f.tickMarkColor;J=6*w[0].length;K=Math.min(a.ge(w[0],(B[0]-z[0])/(z[2]-z[0]),n),w[0].length);O=Math.min(a.gt(w[0],(B[2]-z[0])/(z[2]-z[0]),n),w[0].length);F=6*K;K=6*Math.max(0,O-K);O=Math.min(a.ge(w[1],(B[1]-z[1])/(z[3]-z[1]),n),w[1].length);w=Math.min(a.gt(w[1],(B[3]-
z[1])/(z[3]-z[1]),n),w[1].length);z=J+6*O;w=6*Math.max(0,w-O);d[0]=2*(A[0]-t[1])/v-1;d[1]=(A[3]+A[1])/C-1;e[0]=t[1]*D/v;e[1]=y[1]*D/C;w&&(q.color=f[1],q.tickScale=e,q.dataAxis=c,q.screenOffset=d,x.drawArrays(x.TRIANGLES,z,w));d[0]=(A[2]+A[0])/v-1;d[1]=2*(A[1]-t[0])/C-1;e[0]=y[0]*D/v;e[1]=t[0]*D/C;K&&(q.color=f[0],q.tickScale=e,q.dataAxis=l,q.screenOffset=d,x.drawArrays(x.TRIANGLES,F,K));d[0]=2*(A[2]+t[3])/v-1;d[1]=(A[3]+A[1])/C-1;e[0]=t[3]*D/v;e[1]=y[3]*D/C;w&&(q.color=f[3],q.tickScale=e,q.dataAxis=
c,q.screenOffset=d,x.drawArrays(x.TRIANGLES,z,w));d[0]=(A[2]+A[0])/v-1;d[1]=2*(A[3]+t[2])/C-1;e[0]=y[2]*D/v;e[1]=t[2]*D/C;K&&(q.color=f[2],q.tickScale=e,q.dataAxis=l,q.screenOffset=d,x.drawArrays(x.TRIANGLES,F,K))}}();b.update=function(){var h=[1,1,-1,-1,1,-1],r=[1,-1,1,1,-1,-1];return function(l){var c=l.ticks;l=l.bounds;for(var d=new Float32Array(18*(c[0].length+c[1].length)),e=0,f=[[],[]],q=0;2>q;++q)for(var t=f[q],w=c[q],x=l[q],z=l[q+2],B=0;B<w.length;++B){var A=(w[B].x-x)/(z-x);t.push(A);for(var D=
0;6>D;++D)d[e++]=A,d[e++]=h[D],d[e++]=r[D]}this.ticks=f;this.vbo.update(d)}}();b.dispose=function(){this.vbo.dispose();this.shader.dispose();this.tickShader.dispose()}},{"./shaders":319,"binary-search-bounds":103,"gl-buffer":267,"gl-shader":339}],318:[function(b,N,G){function p(a,g,h){this.plot=a;this.vbo=g;this.shader=h}N.exports=function(a){var g=a.gl,h=n(g,[-1,-1,-1,1,1,-1,1,1]);g=k(g,m.lineVert,m.lineFrag);return new p(a,h,g)};var n=b("gl-buffer"),k=b("gl-shader"),m=b("./shaders");b=p.prototype;
b.bind=function(){var a=this.shader;this.vbo.bind();this.shader.bind();a.attributes.coord.pointer();a.uniforms.screenBox=this.plot.screenBox};b.drawLine=function(){var a=[0,0],g=[0,0];return function(h,r,l,c,d,e){var f=this.plot,q=this.shader,t=f.gl;a[0]=h;a[1]=r;g[0]=l;g[1]=c;q.uniforms.start=a;q.uniforms.end=g;q.uniforms.width=d*f.pixelRatio;q.uniforms.color=e;t.drawArrays(t.TRIANGLE_STRIP,0,4)}}();b.dispose=function(){this.vbo.dispose();this.shader.dispose()}},{"./shaders":319,"gl-buffer":267,
"gl-shader":339}],319:[function(b,N,G){b=b("glslify");G=b(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor \x3d vec4(color.xyz * color.w, color.w);\n}\n"]);N.exports={lineVert:b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta \x3d normalize(perp(start - end));\n  vec2 offset \x3d mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position \x3d vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),
lineFrag:G,textVert:b(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  \x3d textCoordinate.z;\n  vec2 glyphOffset  \x3d textCoordinate.xy;\n  mat2 glyphMatrix \x3d mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate \x3d dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position \x3d vec4(screenCoordinate, 0, 1);\n}\n"]),
textFrag:G,gridVert:b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos \x3d dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos +\x3d 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position \x3d vec4(pos, 0, 1);\n}\n"]),gridFrag:G,boxVert:b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position \x3d vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),
tickVert:b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos \x3d dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position \x3d vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])}},{glslify:321}],320:[function(b,N,G){function p(h,r,l){this.plot=h;this.vbo=r;this.shader=l;this.tickOffset=[[],[]];this.tickX=[[],[]];this.labelOffset=[0,0];this.labelCount=
[0,0]}N.exports=function(h){var r=h.gl,l=n(r);r=k(r,g.textVert,g.textFrag);return new p(h,l,r)};var n=b("gl-buffer"),k=b("gl-shader"),m=b("text-cache"),a=b("binary-search-bounds"),g=b("./shaders");b=p.prototype;b.drawTicks=function(){var h=[0,0],r=[0,0],l=[0,0];return function(c){var d=this.plot,e=this.shader,f=this.tickX[c],q=this.tickOffset[c],t=d.gl,w=d.viewBox,x=d.dataBox,z=d.screenBox,B=d.pixelRatio,A=d.tickEnable,D=d.tickPad,C=d.tickColor,v=d.tickAngle,y=d.labelEnable,F=d.labelPad,J=d.labelColor;
d=d.labelAngle;var K=this.labelOffset[c],O=this.labelCount[c],I=a.lt(f,x[c]);f=a.le(f,x[c+2]);h[0]=h[1]=0;h[c]=1;r[c]=(w[2+c]+w[c])/(z[2+c]-z[c])-1;z=2/z[2+(c^1)]-z[c^1];r[c^1]=z*w[c^1]-1;A[c]&&(r[c^1]-=z*B*D[c],I<f&&q[f]>q[I]&&(e.uniforms.dataAxis=h,e.uniforms.screenOffset=r,e.uniforms.color=C[c],e.uniforms.angle=v[c],t.drawArrays(t.TRIANGLES,q[I],q[f]-q[I])));y[c]&&O&&(r[c^1]-=z*B*F[c],e.uniforms.dataAxis=l,e.uniforms.screenOffset=r,e.uniforms.color=J[c],e.uniforms.angle=d[c],t.drawArrays(t.TRIANGLES,
K,O));r[c^1]=z*w[2+(c^1)]-1;A[c+2]&&(r[c^1]+=z*B*D[c+2],I<f&&q[f]>q[I]&&(e.uniforms.dataAxis=h,e.uniforms.screenOffset=r,e.uniforms.color=C[c+2],e.uniforms.angle=v[c+2],t.drawArrays(t.TRIANGLES,q[I],q[f]-q[I])));y[c+2]&&O&&(r[c^1]+=z*B*F[c+2],e.uniforms.dataAxis=l,e.uniforms.screenOffset=r,e.uniforms.color=J[c+2],e.uniforms.angle=d[c+2],t.drawArrays(t.TRIANGLES,K,O))}}();b.drawTitle=function(){var h=[0,0],r=[0,0];return function(){var l=this.plot,c=this.shader,d=l.gl,e=l.screenBox,f=l.titleCenter,
q=l.titleAngle,t=l.titleColor;l=l.pixelRatio;if(this.titleCount){for(var w=0;2>w;++w)r[w]=2*(f[w]*l-e[w])/(e[2+w]-e[w])-1;c.bind();c.uniforms.dataAxis=h;c.uniforms.screenOffset=r;c.uniforms.angle=q;c.uniforms.color=t;d.drawArrays(d.TRIANGLES,this.titleOffset,this.titleCount)}}}();b.bind=function(){var h=[0,0],r=[0,0],l=[0,0];return function(){var c=this.plot,d=this.shader,e=c._tickBounds,f=c.dataBox,q=c.screenBox,t=c.viewBox;d.bind();for(var w=0;2>w;++w){var x=e[w],z=.5*(f[w+2]+f[w]),B=f[w+2]-f[w],
A=t[w+2]-t[w],D=q[w+2]-q[w];r[w]=2*(e[w+2]-x)/B*A/D;h[w]=2*(x-z)/B*A/D}l[1]=2*c.pixelRatio/(q[3]-q[1]);l[0]=l[1]*(q[3]-q[1])/(q[2]-q[0]);d.uniforms.dataScale=r;d.uniforms.dataShift=h;d.uniforms.textScale=l;this.vbo.bind();d.attributes.textCoordinate.pointer()}}();b.update=function(h){var r=[],l=h.ticks,c=h.bounds,d,e;for(e=0;2>e;++e){var f=[Math.floor(r.length/3)],q=[-Infinity],t=l[e];for(d=0;d<t.length;++d){var w=t[d];var x=w.x;var z=w.text;var B=w.font||"sans-serif";w=w.fontSize||12;for(var A=1/
(c[e+2]-c[e]),D=c[e],C=z.split("\n"),v=0;v<C.length;v++){var y=m(B,C[v]).data;for(z=0;z<y.length;z+=2)r.push(y[z]*w,-y[z+1]*w-v*w*1.2,(x-D)*A)}f.push(Math.floor(r.length/3));q.push(x)}this.tickOffset[e]=f;this.tickX[e]=q}for(e=0;2>e;++e){this.labelOffset[e]=Math.floor(r.length/3);y=m(h.labelFont[e],h.labels[e],{textAlign:"center"}).data;w=h.labelSize[e];for(d=0;d<y.length;d+=2)r.push(y[d]*w,-y[d+1]*w,0);this.labelCount[e]=Math.floor(r.length/3)-this.labelOffset[e]}this.titleOffset=Math.floor(r.length/
3);y=m(h.titleFont,h.title).data;w=h.titleSize;for(d=0;d<y.length;d+=2)r.push(y[d]*w,-y[d+1]*w,0);this.titleCount=Math.floor(r.length/3)-this.titleOffset;this.vbo.update(r)};b.dispose=function(){this.vbo.dispose();this.shader.dispose()}},{"./shaders":319,"binary-search-bounds":103,"gl-buffer":267,"gl-shader":339,"text-cache":596}],321:[function(b,N,G){arguments[4][265][0].apply(G,arguments)},{dup:265}],322:[function(b,N,G){function p(l,c){this.gl=l;this.pickBuffer=c;this.screenBox=[0,0,l.drawingBufferWidth,
l.drawingBufferHeight];this.viewBox=[0,0,0,0];this.dataBox=[-10,-10,10,10];this.gridLineEnable=[!0,!0];this.gridLineWidth=[1,1];this.gridLineColor=[[0,0,0,1],[0,0,0,1]];this.pixelRatio=1;this.tickMarkLength=[0,0,0,0];this.tickMarkWidth=[0,0,0,0];this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickPad=[15,15,15,15];this.tickAngle=[0,0,0,0];this.tickEnable=[!0,!0,!0,!0];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labelPad=[15,15,15,15];this.labelAngle=[0,Math.PI/
2,0,3*Math.PI/2];this.labelEnable=[!0,!0,!0,!0];this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.titleCenter=[0,0];this.titleEnable=!0;this.titleAngle=0;this.titleColor=[0,0,0,1];this.borderColor=[0,0,0,0];this.backgroundColor=[0,0,0,0];this.zeroLineEnable=[!0,!0];this.zeroLineWidth=[4,4];this.zeroLineColor=[[0,0,0,1],[0,0,0,1]];this.borderLineEnable=[!0,!0,!0,!0];this.borderLineWidth=[2,2,2,2];this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.box=this.line=this.text=
this.grid=null;this.objects=[];this.overlays=[];this._tickBounds=[Infinity,Infinity,-Infinity,-Infinity];this.pickDirty=this.dirty=this.static=!1;this.pickDelay=120;this.pickRadius=10;this._pickTimeout=null;this._drawPick=this.drawPick.bind(this);this._depthCounter=0}function n(l){l=l.slice();for(var c=0;c<l.length;++c)l[c]=l[c].slice();return l}function k(l,c){return l.x-c.x}N.exports=function(l){var c=l.gl,d=m(c,[c.drawingBufferWidth,c.drawingBufferHeight]);c=new p(c,d);c.grid=a(c);c.text=g(c);
c.line=h(c);c.box=r(c);c.update(l);return c};var m=b("gl-select-static"),a=b("./lib/grid"),g=b("./lib/text"),h=b("./lib/line"),r=b("./lib/box");b=p.prototype;b.setDirty=function(){this.dirty=this.pickDirty=!0};b.setOverlayDirty=function(){this.dirty=!0};b.nextDepthValue=function(){return this._depthCounter++/65536};b.draw=function(){return function(){var l=this.gl,c=this.screenBox,d=this.viewBox,e=this.dataBox,f=this.pixelRatio,q=this.grid,t=this.line,w=this.text,x=this.objects;this._depthCounter=
0;this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay));if(this.dirty){this.dirty=!1;l.bindFramebuffer(l.FRAMEBUFFER,null);l.enable(l.SCISSOR_TEST);l.disable(l.DEPTH_TEST);l.depthFunc(l.LESS);l.depthMask(!1);l.enable(l.BLEND);l.blendEquation(l.FUNC_ADD,l.FUNC_ADD);l.blendFunc(l.ONE,l.ONE_MINUS_SRC_ALPHA);if(this.borderColor){l.scissor(c[0],c[1],c[2]-c[0],c[3]-c[1]);var z=this.borderColor;l.clearColor(z[0]*
z[3],z[1]*z[3],z[2]*z[3],z[3]);l.clear(l.COLOR_BUFFER_BIT|l.DEPTH_BUFFER_BIT)}l.scissor(d[0],d[1],d[2]-d[0],d[3]-d[1]);l.viewport(d[0],d[1],d[2]-d[0],d[3]-d[1]);z=this.backgroundColor;l.clearColor(z[0]*z[3],z[1]*z[3],z[2]*z[3],z[3]);l.clear(l.COLOR_BUFFER_BIT);q.draw();z=this.zeroLineEnable;var B=this.zeroLineColor,A=this.zeroLineWidth;if(z[0]||z[1])for(t.bind(),q=0;2>q;++q)if(z[q]&&0>=e[q]&&0<=e[q+2]){var D=c[q]-e[q]*(c[q+2]-c[q])/(e[q+2]-e[q]);0===q?t.drawLine(D,c[1],D,c[3],A[q],B[q]):t.drawLine(c[0],
D,c[2],D,A[q],B[q])}for(q=0;q<x.length;++q)x[q].draw();l.viewport(c[0],c[1],c[2]-c[0],c[3]-c[1]);l.scissor(c[0],c[1],c[2]-c[0],c[3]-c[1]);this.grid.drawTickMarks();t.bind();c=this.borderLineEnable;e=this.borderLineWidth;x=this.borderLineColor;c[1]&&t.drawLine(d[0],d[1]-.5*e[1]*f,d[0],d[3]+.5*e[3]*f,e[1],x[1]);c[0]&&t.drawLine(d[0]-.5*e[0]*f,d[1],d[2]+.5*e[2]*f,d[1],e[0],x[0]);c[3]&&t.drawLine(d[2],d[1]-.5*e[1]*f,d[2],d[3]+.5*e[3]*f,e[3],x[3]);c[2]&&t.drawLine(d[0]-.5*e[0]*f,d[3],d[2]+.5*e[2]*f,d[3],
e[2],x[2]);w.bind();for(q=0;2>q;++q)w.drawTicks(q);this.titleEnable&&w.drawTitle();d=this.overlays;for(q=0;q<d.length;++q)d[q].draw();l.disable(l.SCISSOR_TEST);l.disable(l.BLEND);l.depthMask(!0)}}}();b.drawPick=function(){return function(){if(!this.static){var l=this.pickBuffer;this._pickTimeout=null;l.begin();for(var c=1,d=this.objects,e=0;e<d.length;++e)c=d[e].drawPick(c);l.end()}}}();b.pick=function(){return function(l,c){if(!this.static){var d=this.pixelRatio,e=this.pickPixelRatio,f=this.viewBox;
l=Math.round((l-f[0]/d)*e)|0;c=Math.round((c-f[1]/d)*e)|0;d=this.pickBuffer.query(l,c,this.pickRadius);if(!d)return null;d=d.id+(d.value[0]<<8)+(d.value[1]<<16)+(d.value[2]<<24);e=this.objects;for(f=0;f<e.length;++f){var q=e[f].pick(l,c,d);if(q)return q}return null}}}();b.setScreenBox=function(l){var c=this.screenBox,d=this.pixelRatio;c[0]=Math.round(l[0]*d)|0;c[1]=Math.round(l[1]*d)|0;c[2]=Math.round(l[2]*d)|0;c[3]=Math.round(l[3]*d)|0;this.setDirty()};b.setDataBox=function(l){var c=this.dataBox;
if(c[0]!==l[0]||c[1]!==l[1]||c[2]!==l[2]||c[3]!==l[3])c[0]=l[0],c[1]=l[1],c[2]=l[2],c[3]=l[3],this.setDirty()};b.setViewBox=function(l){var c=this.pixelRatio,d=this.viewBox;d[0]=Math.round(l[0]*c)|0;d[1]=Math.round(l[1]*c)|0;d[2]=Math.round(l[2]*c)|0;d[3]=Math.round(l[3]*c)|0;c=this.pickPixelRatio;this.pickBuffer.shape=[Math.round((l[2]-l[0])*c)|0,Math.round((l[3]-l[1])*c)|0];this.setDirty()};b.update=function(l){l=l||{};var c=this.gl,d=this.pixelRatio=l.pixelRatio||1;this.pickPixelRatio=Math.max(d,
1);this.setScreenBox(l.screenBox||[0,0,c.drawingBufferWidth/d,c.drawingBufferHeight/d]);this.setViewBox(l.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/d,.125*(this.screenBox[3]-this.screenBox[1])/d,.875*(this.screenBox[2]-this.screenBox[0])/d,.875*(this.screenBox[3]-this.screenBox[1])/d]);c=this.viewBox;var e=(c[2]-c[0])/(c[3]-c[1]);this.setDataBox(l.dataBox||[-10,-10/e,10,10/e]);this.borderColor=!1!==l.borderColor?(l.borderColor||[0,0,0,0]).slice():!1;this.backgroundColor=(l.backgroundColor||
[0,0,0,0]).slice();this.gridLineEnable=(l.gridLineEnable||[!0,!0]).slice();this.gridLineWidth=(l.gridLineWidth||[1,1]).slice();this.gridLineColor=n(l.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]);this.zeroLineEnable=(l.zeroLineEnable||[!0,!0]).slice();this.zeroLineWidth=(l.zeroLineWidth||[4,4]).slice();this.zeroLineColor=n(l.zeroLineColor||[[0,0,0,1],[0,0,0,1]]);this.tickMarkLength=(l.tickMarkLength||[0,0,0,0]).slice();this.tickMarkWidth=(l.tickMarkWidth||[0,0,0,0]).slice();this.tickMarkColor=n(l.tickMarkColor||
[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);this.titleCenter=(l.titleCenter||[.5*(c[0]+c[2])/d,(c[3]+120)/d]).slice();this.titleEnable=!("titleEnable"in l)||!!l.titleEnable;this.titleAngle=l.titleAngle||0;this.titleColor=(l.titleColor||[0,0,0,1]).slice();this.labelPad=(l.labelPad||[15,15,15,15]).slice();this.labelAngle=(l.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice();this.labelEnable=(l.labelEnable||[!0,!0,!0,!0]).slice();this.labelColor=n(l.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);
this.tickPad=(l.tickPad||[15,15,15,15]).slice();this.tickAngle=(l.tickAngle||[0,0,0,0]).slice();this.tickEnable=(l.tickEnable||[!0,!0,!0,!0]).slice();this.tickColor=n(l.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);this.borderLineEnable=(l.borderLineEnable||[!0,!0,!0,!0]).slice();this.borderLineWidth=(l.borderLineWidth||[2,2,2,2]).slice();this.borderLineColor=n(l.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);d=l.ticks||[[],[]];c=this._tickBounds;c[0]=c[1]=Infinity;c[2]=c[3]=
-Infinity;for(e=0;2>e;++e){var f=d[e].slice(0);0!==f.length&&(f.sort(k),c[e]=Math.min(c[e],f[0].x),c[e+2]=Math.max(c[e+2],f[f.length-1].x))}this.grid.update({bounds:c,ticks:d});this.text.update({bounds:c,ticks:d,labels:l.labels||["x","y"],labelSize:l.labelSize||[12,12],labelFont:l.labelFont||["sans-serif","sans-serif"],title:l.title||"",titleSize:l.titleSize||18,titleFont:l.titleFont||"sans-serif"});this.static=!!l.static;this.setDirty()};b.dispose=function(){this.box.dispose();this.grid.dispose();
this.text.dispose();this.line.dispose();for(var l=this.objects.length-1;0<=l;--l)this.objects[l].dispose();this.objects.length=0;for(l=this.overlays.length-1;0<=l;--l)this.overlays[l].dispose();this.overlays.length=0;this.gl=null};b.addObject=function(l){0>this.objects.indexOf(l)&&(this.objects.push(l),this.setDirty())};b.removeObject=function(l){for(var c=this.objects,d=0;d<c.length;++d)if(c[d]===l){c.splice(d,1);this.setDirty();break}};b.addOverlay=function(l){0>this.overlays.indexOf(l)&&(this.overlays.push(l),
this.setOverlayDirty())};b.removeOverlay=function(l){for(var c=this.overlays,d=0;d<c.length;++d)if(c[d]===l){c.splice(d,1);this.setOverlayDirty();break}}},{"./lib/box":316,"./lib/grid":317,"./lib/line":318,"./lib/text":320,"gl-select-static":338}],323:[function(b,N,G){N.exports=function(h,r){h=h||document.body;r=r||{};var l=[.01,Infinity];"distanceLimits"in r&&(l[0]=r.distanceLimits[0],l[1]=r.distanceLimits[1]);"zoomMin"in r&&(l[0]=r.zoomMin);"zoomMax"in r&&(l[1]=r.zoomMax);var c=n({center:r.center||
[0,0,0],up:r.up||[0,1,0],eye:r.eye||[0,0,10],mode:r.mode||"orbit",distanceLimits:l}),d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0,f=h.clientWidth,q=h.clientHeight,t={keyBindingMode:"rotate",enableWheel:!0,view:c,element:h,delay:r.delay||16,rotateSpeed:r.rotateSpeed||1,zoomSpeed:r.zoomSpeed||1,translateSpeed:r.translateSpeed||1,flipX:!!r.flipX,flipY:!!r.flipY,modes:c.modes,_ortho:r._ortho||r.projection&&"orthographic"===r.projection.type||!1,tick:function(){var w=p(),x=this.delay,z=w-2*x;c.idle(w-x);c.recalcMatrix(z);
c.flush(w-(100+2*x));w=!0;x=c.computedMatrix;for(z=0;16>z;++z)w=w&&d[z]===x[z],d[z]=x[z];x=h.clientWidth===f&&h.clientHeight===q;f=h.clientWidth;q=h.clientHeight;if(w)return!x;e=Math.exp(c.computedRadius[0]);return!0},lookAt:function(w,x,z){c.lookAt(c.lastT(),w,x,z)},rotate:function(w,x,z){c.rotate(c.lastT(),w,x,z)},pan:function(w,x,z){c.pan(c.lastT(),w,x,z)},translate:function(w,x,z){c.translate(c.lastT(),w,x,z)}};Object.defineProperties(t,{matrix:{get:function(){return c.computedMatrix},set:function(w){c.setMatrix(c.lastT(),
w);return c.computedMatrix},enumerable:!0},mode:{get:function(){return c.getMode()},set:function(w){var x=c.computedUp.slice(),z=c.computedEye.slice(),B=c.computedCenter.slice();c.setMode(w);"turntable"===w&&(w=p(),c._active.lookAt(w,z,B,x),c._active.lookAt(w+500,z,B,[0,0,1]),c._active.flush(w));return c.getMode()},enumerable:!0},center:{get:function(){return c.computedCenter},set:function(w){c.lookAt(c.lastT(),null,w);return c.computedCenter},enumerable:!0},eye:{get:function(){return c.computedEye},
set:function(w){c.lookAt(c.lastT(),w);return c.computedEye},enumerable:!0},up:{get:function(){return c.computedUp},set:function(w){c.lookAt(c.lastT(),null,null,w);return c.computedUp},enumerable:!0},distance:{get:function(){return e},set:function(w){c.setDistance(c.lastT(),w);return w},enumerable:!0},distanceLimits:{get:function(){return c.getDistanceLimits(l)},set:function(w){c.setDistanceLimits(w);return w},enumerable:!0}});h.addEventListener("contextmenu",function(w){w.preventDefault();return!1});
t._lastX=-1;t._lastY=-1;t._lastMods={shift:!1,control:!1,alt:!1,meta:!1};t.enableMouseListeners=function(){function w(x,z,B,A){var D=t.keyBindingMode;if(!1!==D){var C="rotate"===D,v="pan"===D;D="zoom"===D;var y=!!A.control,F=!!A.alt,J=!!A.shift,K=!!(x&1),O=!!(x&2);x=!!(x&4);var I=1/h.clientHeight,L=I*(z-t._lastX),H=I*(B-t._lastY),M=t.flipX?1:-1,Q=t.flipY?1:-1,Z=Math.PI*t.rotateSpeed;I=p();-1!==t._lastX&&-1!==t._lastY&&((C&&K&&!y&&!F&&!J||K&&!y&&!F&&J)&&c.rotate(I,M*Z*L,-Q*Z*H,0),(v&&K&&!y&&!F&&!J||
O||K&&y&&!F&&!J)&&c.pan(I,-t.translateSpeed*L*e,t.translateSpeed*H*e,0),D&&K&&!y&&!F&&!J||x||K&&!y&&F&&!J)&&(C=-t.zoomSpeed*H/window.innerHeight*(I-c.lastT())*100,c.pan(I,0,0,e*(Math.exp(C)-1)));t._lastX=z;t._lastY=B;t._lastMods=A;return!0}}t.mouseListener=k(h,w);h.addEventListener("touchstart",function(x){x=a(x.changedTouches[0],h);w(0,x[0],x[1],t._lastMods);w(1,x[0],x[1],t._lastMods)},g?{passive:!0}:!1);h.addEventListener("touchmove",function(x){var z=a(x.changedTouches[0],h);w(1,z[0],z[1],t._lastMods);
x.preventDefault()},g?{passive:!1}:!1);h.addEventListener("touchend",function(x){w(0,t._lastX,t._lastY,t._lastMods)},g?{passive:!0}:!1);t.wheelListener=m(h,function(x,z){if(!1!==t.keyBindingMode&&t.enableWheel){var B=t.flipX?1:-1,A=t.flipY?1:-1,D=p();Math.abs(x)>Math.abs(z)?c.rotate(D,0,0,-x*B*Math.PI*t.rotateSpeed/window.innerWidth):t._ortho||(x=-t.zoomSpeed*A*z/window.innerHeight*(D-c.lastT())/20,c.pan(D,0,0,e*(Math.exp(x)-1)))}},!0)};t.enableMouseListeners();return t};var p=b("right-now"),n=b("3d-view"),
k=b("mouse-change"),m=b("mouse-wheel"),a=b("mouse-event-offset"),g=b("has-passive-events")},{"3d-view":55,"has-passive-events":444,"mouse-change":470,"mouse-event-offset":471,"mouse-wheel":473,"right-now":542}],324:[function(b,N,G){G=b("glslify");var p=b("gl-shader"),n=G(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv \x3d position;\n  gl_Position \x3d vec4(position, 0, 1);\n}"]),k=G(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum \x3d texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor \x3d min(vec4(1,1,1,1), accum);\n}"]);
N.exports=function(m){return p(m,n,k,null,[{name:"position",type:"vec2"}])}},{"gl-shader":339,glslify:325}],325:[function(b,N,G){arguments[4][265][0].apply(G,arguments)},{dup:265}],326:[function(b,N,G){function p(){this.mouse=[-1,-1];this.screen=null;this.distance=Infinity;this.data=this.object=this.dataPosition=this.dataCoordinate=this.index=null}function n(w,x){var z=null;try{(z=w.getContext("webgl",x))||(z=w.getContext("experimental-webgl",x))}catch(B){return null}return z}function k(w){return"boolean"===
typeof w?w:!0}var m=b("./camera.js"),a=b("gl-axes3d"),g=b("gl-axes3d/properties"),h=b("gl-spikes3d"),r=b("gl-select-static"),l=b("gl-fbo"),c=b("a-big-triangle"),d=b("mouse-change"),e=b("gl-mat4/perspective"),f=b("gl-mat4/ortho"),q=b("./lib/shader"),t=b("is-mobile")({tablet:!0,featureDetect:!0});N.exports={createScene:function(w){function x(){if(!ba._stopped&&ba.autoResize){var oa=C.parentNode;if(oa&&oa!==document.body){var xa=oa.clientWidth;oa=oa.clientHeight}else xa=window.innerWidth,oa=window.innerHeight;
var ra=Math.ceil(xa*ba.pixelRatio)|0,la=Math.ceil(oa*ba.pixelRatio)|0;if(ra!==C.width||la!==C.height)C.width=ra,C.height=la,ra=C.style,ra.position=ra.position||"absolute",ra.left="0px",ra.top="0px",ra.width=xa+"px",ra.height=oa+"px",T=!0}}function z(){for(var oa=Q.length,xa=W.length,ra=0;ra<xa;++ra)ca[ra]=0;ra=0;a:for(;ra<oa;++ra){var la=Q[ra],ka=la.pickSlots;if(ka){for(var na=0;na<xa;++na)if(255>ca[na]+ka){Z[ra]=na;la.setPickBase(ca[na]+1);ca[na]+=ka;continue a}na=r(v,Y);Z[ra]=xa;W.push(na);ca.push(ka);
la.setPickBase(1);xa+=1}else Z[ra]=-1}for(;0<xa&&0===ca[xa-1];)ca.pop(),W.pop().dispose()}function B(){if(ba.contextLost)return!0;if(v.isContextLost()&&(ba.contextLost=!0,ba.mouseListener.enabled=!1,ba.selection.object=null,ba.oncontextloss))ba.oncontextloss()}function A(){if(!B()){x();var oa=ba.camera.tick();ha.view=ba.camera.matrix;T=T||oa;U=U||oa;H.pixelRatio=ba.pixelRatio;M.pixelRatio=ba.pixelRatio;oa=Q.length;var xa=ma[0],ra=ma[1];xa[0]=xa[1]=xa[2]=Infinity;ra[0]=ra[1]=ra[2]=-Infinity;for(var la=
0;la<oa;++la){var ka=Q[la];ka.pixelRatio=ba.pixelRatio;ka.axes=ba.axes;T=T||!!ka.dirty;U=U||!!ka.dirty;if(ka=ka.bounds){var na=ka[0],qa=ka[1];for(ka=0;3>ka;++ka)xa[ka]=Math.min(xa[ka],na[ka]),ra[ka]=Math.max(ra[ka],qa[ka])}}na=ba.bounds;if(ba.autoBounds)for(ka=0;3>ka;++ka)ra[ka]<xa[ka]?(xa[ka]=-1,ra[ka]=1):(xa[ka]===ra[ka]&&(--xa[ka],ra[ka]+=1),la=.05*(ra[ka]-xa[ka]),xa[ka]-=la,ra[ka]+=la),na[0][ka]=xa[ka],na[1][ka]=ra[ka];xa=!1;for(ka=0;3>ka;++ka)xa=xa||ia[0][ka]!==na[0][ka]||ia[1][ka]!==na[1][ka],
ia[0][ka]=na[0][ka],ia[1][ka]=na[1][ka];U=U||xa;if(T=T||xa){if(xa){xa=[0,0,0];for(la=0;3>la;++la)ra=la,ka=(na[1][la]-na[0][la])/10,qa=Math.round(Math.log(Math.abs(ka))/Math.log(10)),0>qa?(qa=Math.round(Math.pow(10,-qa)),ka=Math.ceil(ka*qa)/qa):0<qa?(qa=Math.round(Math.pow(10,qa)),ka=Math.ceil(ka/qa)*qa):ka=Math.ceil(ka),xa[ra]=ka;H.autoTicks?H.update({bounds:na,tickSpacing:xa}):H.update({bounds:na})}xa=v.drawingBufferWidth;ra=v.drawingBufferHeight;Y[0]=xa;Y[1]=ra;ja[0]=Math.max(xa/ba.pixelRatio,1)|
0;ja[1]=Math.max(ra/ba.pixelRatio,1)|0;la=ba;ka=la.bounds;var ta=la.cameraParams,za=ta.projection;qa=ta.model;var Ia=la.zNear,Xa=la.zFar,$a=la.fovy,gb=la.gl.drawingBufferWidth/la.gl.drawingBufferHeight;O?(f(za,-gb,gb,-1,1,Ia,Xa),ta._ortho=!0):(e(za,$a,gb,Ia,Xa),ta._ortho=!1);for(ta=0;16>ta;++ta)qa[ta]=0;qa[15]=1;for(ta=za=0;3>ta;++ta)za=Math.max(za,ka[1][ta]-ka[0][ta]);for(ta=0;3>ta;++ta)qa[5*ta]=la.autoScale?la.aspect[ta]/(ka[1][ta]-ka[0][ta]):1/za,la.autoCenter&&(qa[12+ta]=.5*-qa[5*ta]*(ka[0][ta]+
ka[1][ta]));for(la=0;la<oa;++la)ka=Q[la],ka.axesBounds=na,ba.clipToBounds&&(ka.clipBounds=na);F.object&&(M.position=ba.snapToData?F.dataCoordinate:F.dataPosition,M.bounds=na);if(U&&(U=!1,!B()))for(v.colorMask(!0,!0,!0,!0),v.depthMask(!0),v.disable(v.BLEND),v.enable(v.DEPTH_TEST),v.depthFunc(v.LEQUAL),na=Q.length,la=W.length,ka=0;ka<la;++ka){qa=W[ka];qa.shape=ja;qa.begin();for(ta=0;ta<na;++ta)Z[ta]===ka&&(za=Q[ta],za.drawPick&&(za.pixelRatio=1,za.drawPick(ha)));qa.end()}ba.axesPixels=g(ba.axes,ha,
xa,ra);if(ba.onrender)ba.onrender();v.bindFramebuffer(v.FRAMEBUFFER,null);v.viewport(0,0,xa,ra);ba.clearRGBA();v.depthMask(!0);v.colorMask(!0,!0,!0,!0);v.enable(v.DEPTH_TEST);v.depthFunc(v.LEQUAL);v.disable(v.BLEND);v.disable(v.CULL_FACE);na=!1;H.enable&&(na=na||H.isTransparent(),H.draw(ha));M.axes=H;F.object&&M.draw(ha);v.disable(v.CULL_FACE);for(la=0;la<oa;++la)ka=Q[la],ka.axes=H,ka.pixelRatio=ba.pixelRatio,ka.isOpaque&&ka.isOpaque()&&ka.draw(ha),ka.isTransparent&&ka.isTransparent()&&(na=!0);if(na){J.shape=
Y;J.bind();v.clear(v.DEPTH_BUFFER_BIT);v.colorMask(!1,!1,!1,!1);v.depthMask(!0);v.depthFunc(v.LESS);H.enable&&H.isTransparent()&&H.drawTransparent(ha);for(la=0;la<oa;++la)ka=Q[la],ka.isOpaque&&ka.isOpaque()&&ka.draw(ha);v.enable(v.BLEND);v.blendEquation(v.FUNC_ADD);v.blendFunc(v.ONE,v.ONE_MINUS_SRC_ALPHA);v.colorMask(!0,!0,!0,!0);v.depthMask(!1);v.clearColor(0,0,0,0);v.clear(v.COLOR_BUFFER_BIT);H.isTransparent()&&H.drawTransparent(ha);for(la=0;la<oa;++la)ka=Q[la],ka.isTransparent&&ka.isTransparent()&&
ka.drawTransparent(ha);v.bindFramebuffer(v.FRAMEBUFFER,null);v.blendFunc(v.ONE,v.ONE_MINUS_SRC_ALPHA);v.disable(v.DEPTH_TEST);K.bind();J.color[0].bind(0);K.uniforms.accumBuffer=0;c(v);v.disable(v.BLEND)}T=!1;for(la=0;la<oa;++la)Q[la].dirty=!1}}}function D(){ba._stopped||ba.contextLost||(A(),requestAnimationFrame(D))}w=w||{};w.camera=w.camera||{};var C=w.canvas;C||(C=document.createElement("canvas"),w.container?w.container.appendChild(C):document.body.appendChild(C));var v=w.gl;v||(w.glOptions&&(t=
!!w.glOptions.preserveDrawingBuffer),v=n(C,w.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:t}));if(!v)throw Error("webgl not supported");var y=w.bounds||[[-10,-10,-10],[10,10,10]],F=new p,J=l(v,v.drawingBufferWidth,v.drawingBufferHeight,{preferFloat:!t}),K=q(v),O=w.cameraObject&&!0===w.cameraObject._ortho||w.camera.projection&&"orthographic"===w.camera.projection.type||!1,I={eye:w.camera.eye||[2,0,0],center:w.camera.center||[0,0,0],up:w.camera.up||[0,1,0],zoomMin:w.camera.zoomMax||
.1,zoomMax:w.camera.zoomMin||100,mode:w.camera.mode||"turntable",_ortho:O},L=w.axes||{},H=a(v,L);H.enable=!L.disable;var M=h(v,w.spikes||{}),Q=[],Z=[],ca=[],W=[],T=!0,U=!0,ha={view:null,projection:Array(16),model:Array(16),_ortho:!1};U=!0;var Y=[v.drawingBufferWidth,v.drawingBufferHeight];I=w.cameraObject||m(C,I);var ba={gl:v,contextLost:!1,pixelRatio:w.pixelRatio||1,canvas:C,selection:F,camera:I,axes:H,axesPixels:null,spikes:M,bounds:y,objects:Q,shape:Y,aspect:w.aspectRatio||[1,1,1],pickRadius:w.pickRadius||
10,zNear:w.zNear||.01,zFar:w.zFar||1E3,fovy:w.fovy||Math.PI/4,clearColor:w.clearColor||[0,0,0,0],autoResize:k(w.autoResize),autoBounds:k(w.autoBounds),autoScale:!!w.autoScale,autoCenter:k(w.autoCenter),clipToBounds:k(w.clipToBounds),snapToData:!!w.snapToData,onselect:w.onselect||null,onrender:w.onrender||null,onclick:w.onclick||null,cameraParams:ha,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(oa){this.aspect[0]=
oa.x;this.aspect[1]=oa.y;this.aspect[2]=oa.z;U=!0},setBounds:function(oa,xa){this.bounds[0][oa]=xa.min;this.bounds[1][oa]=xa.max},setClearColor:function(oa){this.clearColor=oa},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]);this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},ja=[v.drawingBufferWidth/ba.pixelRatio|0,v.drawingBufferHeight/ba.pixelRatio|0];ba.autoResize&&x();window.addEventListener("resize",x);ba.update=
function(oa){ba._stopped||(U=T=!0)};ba.add=function(oa){ba._stopped||(oa.axes=H,Q.push(oa),Z.push(-1),U=T=!0,z())};ba.remove=function(oa){ba._stopped||(oa=Q.indexOf(oa),0>oa||(Q.splice(oa,1),Z.pop(),U=T=!0,z()))};ba.dispose=function(){if(!ba._stopped&&(ba._stopped=!0,window.removeEventListener("resize",x),C.removeEventListener("webglcontextlost",B),ba.mouseListener.enabled=!1,!ba.contextLost)){H.dispose();M.dispose();for(var oa=0;oa<Q.length;++oa)Q[oa].dispose();J.dispose();for(oa=0;oa<W.length;++oa)W[oa].dispose();
K.dispose();M=H=v=null;Q=[]}};ba._mouseRotating=!1;ba._prevButtons=0;ba.enableMouseListeners=function(){ba.mouseListener=d(C,function(oa,xa,ra){if(!ba._stopped){var la=W.length,ka=Q.length,na=F.object;F.distance=Infinity;F.mouse[0]=xa;F.mouse[1]=ra;F.object=null;F.screen=null;F.dataCoordinate=F.dataPosition=null;var qa=!1;if(oa&&ba._prevButtons)ba._mouseRotating=!0;else{ba._mouseRotating&&(U=!0);ba._mouseRotating=!1;for(var ta=0;ta<la;++ta){var za=W[ta].query(xa,ja[1]-ra-1,ba.pickRadius);if(za&&!(za.distance>
F.distance))for(var Ia=0;Ia<ka;++Ia){var Xa=Q[Ia];if(Z[Ia]===ta){var $a=Xa.pick(za);$a&&(F.buttons=oa,F.screen=za.coord,F.distance=za.distance,F.object=Xa,F.index=$a.distance,F.dataPosition=$a.position,F.dataCoordinate=$a.dataCoordinate,F.data=$a,qa=!0)}}}}na&&na!==F.object&&(na.highlight&&na.highlight(null),T=!0);F.object&&(F.object.highlight&&F.object.highlight(F.data),T=!0);if((qa=qa||F.object!==na)&&ba.onselect)ba.onselect(F);if(oa&1&&!(ba._prevButtons&1)&&ba.onclick)ba.onclick(F);ba._prevButtons=
oa}})};C.addEventListener("webglcontextlost",B);var ma=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]],ia=[ma[0].slice(),ma[1].slice()];ba.enableMouseListeners();D();ba.redraw=function(){ba._stopped||(T=!0,A())};return ba},createCamera:m}},{"./camera.js":323,"./lib/shader":324,"a-big-triangle":70,"gl-axes3d":258,"gl-axes3d/properties":266,"gl-fbo":276,"gl-mat4/ortho":302,"gl-mat4/perspective":303,"gl-select-static":338,"gl-spikes3d":349,"is-mobile":455,"mouse-change":470}],327:[function(b,
N,G){b=b("glslify");G.pointVertex=b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a \x3d 12.9898;\n  highp float b \x3d 78.233;\n  highp float c \x3d 43758.5453;\n  highp float d \x3d dot(co.xy, vec2(a, b));\n  highp float e \x3d mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition \x3d matrix * vec3(position, 1);\n  gl_Position  \x3d vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize \x3d pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud !\x3d 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *\x3d 0.886;\n  }\n}"]);
G.pointFragment=b(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud !\x3d 0.0) { // pointCloud is truthy\n    if(centerFraction \x3d\x3d 1.0) {\n      gl_FragColor \x3d color;\n    } else {\n      gl_FragColor \x3d mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius \x3d length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius \x3e 1.0) {\n      discard;\n    }\n    baseColor \x3d mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor \x3d vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]);
G.pickVertex=b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition \x3d matrix * vec3(position, 1);\n  gl_Position  \x3d vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize \x3d pointSize;\n\n  vec4 id \x3d pickId + pickOffset;\n  id.y +\x3d floor(id.x / 256.0);\n  id.x -\x3d floor(id.x / 256.0) * 256.0;\n\n  id.z +\x3d floor(id.y / 256.0);\n  id.y -\x3d floor(id.y / 256.0) * 256.0;\n\n  id.w +\x3d floor(id.z / 256.0);\n  id.z -\x3d floor(id.z / 256.0) * 256.0;\n\n  fragId \x3d id;\n}\n"]);
G.pickFragment=b(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius \x3d length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius \x3e 1.0) {\n    discard;\n  }\n  gl_FragColor \x3d fragId / 255.0;\n}\n"])},{glslify:442}],328:[function(b,N,G){function p(g,h,r,l,c){this.plot=g;this.offsetBuffer=h;this.pickBuffer=r;this.shader=l;this.pickShader=c;this.sizeMin=.5;this.sizeMinCap=2;this.sizeMax=20;this.areaRatio=1;this.pointCount=0;this.color=[1,0,0,1];this.borderColor=
[0,0,0,1];this.blend=!1;this.pickOffset=0;this.points=null}var n=b("gl-shader"),k=b("gl-buffer"),m=b("typedarray-pool"),a=b("./lib/shader");N.exports=function(g,h){var r=g.gl,l=k(r),c=k(r),d=n(r,a.pointVertex,a.pointFragment);r=n(r,a.pickVertex,a.pickFragment);l=new p(g,l,c,d,r);l.update(h);g.addObject(l);return l};b=p.prototype;b.dispose=function(){this.shader.dispose();this.pickShader.dispose();this.offsetBuffer.dispose();this.pickBuffer.dispose();this.plot.removeObject(this)};b.update=function(g){function h(t,
w){return t in g?g[t]:w}var r;g=g||{};this.sizeMin=h("sizeMin",.5);this.sizeMax=h("sizeMax",20);this.color=h("color",[1,0,0,1]).slice();this.areaRatio=h("areaRatio",1);this.borderColor=h("borderColor",[0,0,0,1]).slice();this.blend=h("blend",!1);var l=g.positions.length>>>1,c=g.positions instanceof Float32Array,d=g.idToIndex instanceof Int32Array&&g.idToIndex.length>=l,e=g.positions,f=c?e:m.mallocFloat32(e.length),q=d?g.idToIndex:m.mallocInt32(l);c||f.set(e);if(!d)for(f.set(e),r=0;r<l;r++)q[r]=r;this.points=
e;this.offsetBuffer.update(f);this.pickBuffer.update(q);c||m.free(f);d||m.free(q);this.pointCount=l;this.pickOffset=0};b.unifiedDraw=function(){var g=[1,0,0,0,1,0,0,0,1],h=[0,0,0,0];return function(r){var l=void 0!==r,c=l?this.pickShader:this.shader,d=this.plot.gl,e=this.plot.dataBox;if(0===this.pointCount)return r;var f=e[2]-e[0],q=e[3]-e[1],t=this.points,w=0,x=t.length>>>1,z;for(z=0;z<x;z++){var B=t[2*z],A=t[2*z+1];B>=e[0]&&B<=e[2]&&A>=e[1]&&A<=e[3]&&w++}t=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,
this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(w,.33333)));g[0]=2/f;g[4]=2/q;g[6]=-2*e[0]/f-1;g[7]=-2*e[1]/q-1;this.offsetBuffer.bind();c.bind();c.attributes.position.pointer();c.uniforms.matrix=g;c.uniforms.color=this.color;c.uniforms.borderColor=this.borderColor;c.uniforms.pointCloud=5>t;c.uniforms.pointSize=t;c.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio)));l&&(h[0]=r&255,h[1]=r>>8&255,h[2]=r>>16&255,h[3]=r>>24&255,this.pickBuffer.bind(),c.attributes.pickId.pointer(d.UNSIGNED_BYTE),
c.uniforms.pickOffset=h,this.pickOffset=r);l=d.getParameter(d.BLEND);c=d.getParameter(d.DITHER);l&&!this.blend&&d.disable(d.BLEND);c&&d.disable(d.DITHER);d.drawArrays(d.POINTS,0,this.pointCount);l&&!this.blend&&d.enable(d.BLEND);c&&d.enable(d.DITHER);return r+this.pointCount}}();b.draw=b.unifiedDraw;b.drawPick=b.unifiedDraw;b.pick=function(g,h,r){g=this.pickOffset;h=this.pointCount;if(r<g||r>=g+h)return null;r-=g;g=this.points;return{object:this,pointId:r,dataCoord:[g[2*r],g[2*r+1]]}}},{"./lib/shader":327,
"gl-buffer":267,"gl-shader":339,"typedarray-pool":617}],329:[function(b,N,G){N.exports=function(p,n,k,m){var a=n[0],g=n[1],h=n[2];n=n[3];var r=k[0],l=k[1],c=k[2];k=k[3];var d=a*r+g*l+h*c+n*k;0>d&&(d=-d,r=-r,l=-l,c=-c,k=-k);if(1E-6<1-d){var e=Math.acos(d);var f=Math.sin(e);d=Math.sin((1-m)*e)/f;m=Math.sin(m*e)/f}else d=1-m;p[0]=d*a+m*r;p[1]=d*g+m*l;p[2]=d*h+m*c;p[3]=d*n+m*k;return p}},{}],330:[function(b,N,G){N.exports=function(p){return p||0===p?p.toString():""}},{}],331:[function(b,N,G){var p=b("vectorize-text");
N.exports=function(k,m,a){var g=n[m];g||(g=n[m]={});if(k in g)return g[k];var h={textAlign:"center",textBaseline:"middle",lineHeight:1,font:m,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0};m=p(k,h);h.triangles=!1;h=p(k,h);var r,l;if(a&&1!==a){for(r=0;r<m.positions.length;++r)for(l=0;l<m.positions[r].length;++l)m.positions[r][l]/=a;for(r=0;r<h.positions.length;++r)for(l=0;l<h.positions[r].length;++l)h.positions[r][l]/=a}a=[[Infinity,Infinity],
[-Infinity,-Infinity]];var c=h.positions.length;for(r=0;r<c;++r){var d=h.positions[r];for(l=0;2>l;++l)a[0][l]=Math.min(a[0][l],d[l]),a[1][l]=Math.max(a[1][l],d[l])}return g[k]=[m,h,a]};var n={}},{"vectorize-text":623}],332:[function(b,N,G){function p(f,q){f=n(f,q);q=f.attributes;q.position.location=0;q.color.location=1;q.glyph.location=2;q.id.location=3;return f}var n=b("gl-shader"),k=b("glslify");b=k(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0,0,0,0);\n  } else {\n    float scale \x3d 1.0;\n    if(distance(highlightId, id) \x3c 0.0001) {\n      scale \x3d highlightScale;\n    }\n\n    vec4 worldPosition \x3d model * vec4(position, 1);\n    vec4 viewPosition \x3d view * worldPosition;\n    viewPosition \x3d viewPosition / viewPosition.w;\n    vec4 clipPosition \x3d projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position \x3d clipPosition;\n    interpColor \x3d color;\n    pickId \x3d id;\n    dataCoordinate \x3d position;\n  }\n}"]);
N=k(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0,0,0,0);\n  } else {\n    float scale \x3d pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) \x3c 0.001) {\n      scale *\x3d highlightScale;\n    }\n\n    vec4 worldPosition \x3d model * vec4(position, 1.0);\n    vec4 viewPosition \x3d view * worldPosition;\n    vec4 clipPosition \x3d projection * viewPosition;\n    clipPosition /\x3d clipPosition.w;\n\n    gl_Position \x3d clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor \x3d color;\n    pickId \x3d id;\n    dataCoordinate \x3d position;\n  }\n}"]);
var m=k(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0,0,0,0);\n  } else {\n    float lscale \x3d pixelRatio * scale;\n    if(distance(highlightId, id) \x3c 0.0001) {\n      lscale *\x3d highlightScale;\n    }\n\n    vec4 clipCenter   \x3d projection * view * model * vec4(position, 1);\n    vec3 dataPosition \x3d position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition \x3d projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position \x3d clipPosition;\n    interpColor \x3d color;\n    pickId \x3d id;\n    dataCoordinate \x3d dataPosition;\n  }\n}\n"]),
a=k(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity \x3d\x3d 0.\n  ) discard;\n  gl_FragColor \x3d interpColor * opacity;\n}\n"]);
k=k(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor \x3d vec4(pickGroup, pickId.bgr);\n}"]);
var g=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],h={vertex:b,fragment:a,attributes:g},r={vertex:N,fragment:a,attributes:g},l={vertex:m,fragment:a,attributes:g},c={vertex:b,fragment:k,attributes:g},d={vertex:N,fragment:k,attributes:g},e={vertex:m,fragment:k,attributes:g};G.createPerspective=function(f){return p(f,h)};G.createOrtho=function(f){return p(f,r)};G.createProject=function(f){return p(f,l)};G.createPickPerspective=function(f){return p(f,
c)};G.createPickOrtho=function(f){return p(f,d)};G.createPickProject=function(f){return p(f,e)}},{"gl-shader":339,glslify:333}],333:[function(b,N,G){arguments[4][265][0].apply(G,arguments)},{dup:265}],334:[function(b,N,G){function p(I,L){var H=I[0],M=I[1],Q=I[2],Z=I[3];I[0]=L[0]*H+L[4]*M+L[8]*Q+L[12]*Z;I[1]=L[1]*H+L[5]*M+L[9]*Q+L[13]*Z;I[2]=L[2]*H+L[6]*M+L[10]*Q+L[14]*Z;I[3]=L[3]*H+L[7]*M+L[11]*Q+L[15]*Z;return I}function n(I,L,H,M){p(M,M,H);p(M,M,L);return p(M,M,I)}function k(I,L){this.index=I;this.dataCoordinate=
this.position=L}function m(I){return!0===I||1<I?1:I}function a(I,L,H,M,Q,Z,ca,W,T,U,ha,Y){this.gl=I;this.pixelRatio=1;this.shader=L;this.orthoShader=H;this.projectShader=M;this.pointBuffer=Q;this.colorBuffer=Z;this.glyphBuffer=ca;this.idBuffer=W;this.vao=T;this.lineVertexCount=this.vertexCount=0;this.opacity=1;this.hasAlpha=!1;this.lineWidth=0;this.projectScale=[2/3,2/3,2/3];this.projectOpacity=[1,1,1];this.projectHasAlpha=!1;this.pickId=0;this.pickPerspectiveShader=U;this.pickOrthoShader=ha;this.pickProjectShader=
Y;this.points=[];this._selectResult=new k(0,[0,0,0]);this.useOrtho=!0;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.axesProject=[!0,!0,!0];this.axesBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.highlightId=[1,1,1,1];this.highlightScale=2;this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.dirty=!0}function g(I){I[0]=I[1]=I[2]=0;return I}function h(I,L){I[0]=L[0];I[1]=L[1];I[2]=L[2];I[3]=1;return I}function r(I,
L,H,M){I[0]=L[0];I[1]=L[1];I[2]=L[2];I[H]=M;return I}function l(I,L,H,M,Q,Z,ca){var W=H.gl;if(Z===H.projectHasAlpha||ca){for(var T=H.axesProject,U=H.gl,ha=L.uniforms,Y=M.model||B,ba=M.view||B,ja=M.projection||B,ma=H.axesBounds,ia=H.clipBounds,oa=K,xa=0;2>xa;++xa)for(var ra=0;3>ra;++ra)oa[xa][ra]=Math.max(Math.min(ia[xa][ra],1E8),-1E8);ia=H.axes&&H.axes.lastCubeProps?H.axes.lastCubeProps.axis:[1,1,1];A[0]=2/U.drawingBufferWidth;A[1]=2/U.drawingBufferHeight;L.bind();ha.view=ba;ha.projection=ja;ha.screenSize=
A;ha.highlightId=H.highlightId;ha.highlightScale=H.highlightScale;ha.clipBounds=oa;ha.pickGroup=H.pickId/255;ha.pixelRatio=Q;for(L=0;3>L;++L)if(T[L]){ha.scale=H.projectScale[L];ha.opacity=H.projectOpacity[L];xa=F;for(var la=0;16>la;++la)xa[la]=0;for(la=0;4>la;++la)xa[5*la]=1;xa[5*L]=0;xa[12+L]=0>ia[L]?ma[0][L]:ma[1][L];t(xa,Y,xa);ha.model=xa;xa=(L+1)%3;ra=(L+2)%3;var ka=g(D),na=g(C);ka[xa]=1;na[ra]=1;la=n(ja,ba,Y,h(v,ka));var qa=n(ja,ba,Y,h(y,na));if(Math.abs(la[1])>Math.abs(qa[1])){var ta=la;la=
qa;qa=ta;ta=ka;ka=na;na=ta;ta=xa;xa=ra;ra=ta}0>la[0]&&(ka[xa]=-1);0<qa[1]&&(na[ra]=-1);for(la=ta=qa=0;4>la;++la)qa+=Math.pow(Y[4*xa+la],2),ta+=Math.pow(Y[4*ra+la],2);ka[xa]/=Math.sqrt(qa);na[ra]/=Math.sqrt(ta);ha.axes[0]=ka;ha.axes[1]=na;ha.fragClipBounds[0]=r(J,oa[0],L,-1E8);ha.fragClipBounds[1]=r(J,oa[1],L,1E8);H.vao.bind();H.vao.draw(U.TRIANGLES,H.vertexCount);0<H.lineWidth&&(U.lineWidth(H.lineWidth*Q),H.vao.draw(U.LINES,H.lineVertexCount,H.vertexCount));H.vao.unbind()}}if(Z===H.hasAlpha||ca)I.bind(),
I=I.uniforms,I.model=M.model||B,I.view=M.view||B,I.projection=M.projection||B,A[0]=2/W.drawingBufferWidth,A[1]=2/W.drawingBufferHeight,I.screenSize=A,I.highlightId=H.highlightId,I.highlightScale=H.highlightScale,I.fragClipBounds=O,I.clipBounds=H.axes.bounds,I.opacity=H.opacity,I.pickGroup=H.pickId/255,I.pixelRatio=Q,H.vao.bind(),H.vao.draw(W.TRIANGLES,H.vertexCount),0<H.lineWidth&&(W.lineWidth(H.lineWidth*Q),H.vao.draw(W.LINES,H.lineVertexCount,H.vertexCount)),H.vao.unbind()}function c(I,L,H,M){L=
Array.isArray(I)?L<I.length?I[L]:void 0:I;L=z(L);I=!0;d(L)&&(L="",I=!1);H=x(L,H,M);return{mesh:H[0],lines:H[1],bounds:H[2],visible:I}}var d=b("is-string-blank"),e=b("gl-buffer"),f=b("gl-vao"),q=b("typedarray-pool"),t=b("gl-mat4/multiply"),w=b("./lib/shaders"),x=b("./lib/glyphs"),z=b("./lib/get-simple-string"),B=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];N.exports=function(I){var L=I.gl,H=w.createPerspective(L),M=w.createOrtho(L),Q=w.createProject(L),Z=w.createPickPerspective(L),ca=w.createPickOrtho(L),W=
w.createPickProject(L),T=e(L),U=e(L),ha=e(L),Y=e(L),ba=f(L,[{buffer:T,size:3,type:L.FLOAT},{buffer:U,size:4,type:L.FLOAT},{buffer:ha,size:2,type:L.FLOAT},{buffer:Y,size:4,type:L.UNSIGNED_BYTE,normalized:!0}]);L=new a(L,H,M,Q,T,U,ha,Y,ba,Z,ca,W);L.update(I);return L};b=a.prototype;b.pickSlots=1;b.setPickBase=function(I){this.pickId=I};b.isTransparent=function(){if(this.hasAlpha)return!0;for(var I=0;3>I;++I)if(this.axesProject[I]&&this.projectHasAlpha)return!0;return!1};b.isOpaque=function(){if(!this.hasAlpha)return!0;
for(var I=0;3>I;++I)if(this.axesProject[I]&&!this.projectHasAlpha)return!0;return!1};var A=[0,0],D=[0,0,0],C=[0,0,0],v=[0,0,0,1],y=[0,0,0,1],F=B.slice(),J=[0,0,0],K=[[0,0,0],[0,0,0]],O=[[-1E8,-1E8,-1E8],[1E8,1E8,1E8]];b.draw=function(I){l(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,I,this.pixelRatio,!1,!1)};b.drawTransparent=function(I){l(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,I,this.pixelRatio,!0,!1)};b.drawPick=function(I){l(this.useOrtho?this.pickOrthoShader:
this.pickPerspectiveShader,this.pickProjectShader,this,I,1,!0,!0)};b.pick=function(I){if(!I||I.id!==this.pickId)return null;var L=I.value[2]+(I.value[1]<<8)+(I.value[0]<<16);if(L>=this.pointCount||0>L)return null;I=this.points[L];var H=this._selectResult;H.index=L;for(L=0;3>L;++L)H.position[L]=H.dataCoordinate[L]=I[L];return H};b.highlight=function(I){I?(I=I.index,this.highlightId=[(I&255)/255,(I>>8&255)/255,(I>>16&255)/255,0]):this.highlightId=[1,1,1,1]};b.update=function(I){I=I||{};"perspective"in
I&&(this.useOrtho=!I.perspective);"orthographic"in I&&(this.useOrtho=!!I.orthographic);"lineWidth"in I&&(this.lineWidth=I.lineWidth);if("project"in I)if(Array.isArray(I.project))this.axesProject=I.project;else{var L=!!I.project;this.axesProject=[L,L,L]}"projectScale"in I&&(Array.isArray(I.projectScale)?this.projectScale=I.projectScale.slice():(L=+I.projectScale,this.projectScale=[L,L,L]));this.projectHasAlpha=!1;if("projectOpacity"in I){Array.isArray(I.projectOpacity)?this.projectOpacity=I.projectOpacity.slice():
(L=+I.projectOpacity,this.projectOpacity=[L,L,L]);for(var H=0;3>H;++H)this.projectOpacity[H]=m(this.projectOpacity[H]),1>this.projectOpacity[H]&&(this.projectHasAlpha=!0)}this.hasAlpha=!1;"opacity"in I&&(this.opacity=m(I.opacity),1>this.opacity&&(this.hasAlpha=!0));this.dirty=!0;L=I.position;var M=I.font||"normal",Q=I.alignment||[0,0];if(2===Q.length){var Z=Q[0];var ca=Q[1]}else for(Z=[],ca=[],H=0;H<Q.length;++H)Z[H]=Q[H][0],ca[H]=Q[H][1];Q=[Infinity,Infinity,Infinity];var W=[-Infinity,-Infinity,
-Infinity],T=I.glyph,U=I.color,ha=I.size,Y=I.angle;I=I.lineColor;var ba=-1,ja=0,ma=0,ia=0;if(L.length)a:for(ia=L.length,H=0;H<ia;++H){for(var oa=L[H],xa=0;3>xa;++xa)if(isNaN(oa[xa])||!isFinite(oa[xa]))continue a;var ra=c(T,H,M,this.pixelRatio),la=ra.mesh,ka=ra.lines;ja+=3*la.cells.length;ma+=2*ka.edges.length}H=ja+ma;var na=q.mallocFloat(3*H),qa=q.mallocFloat(4*H),ta=q.mallocFloat(2*H),za=q.mallocUint32(H);if(0<H){var Ia=0,Xa=ja,$a=[0,0,0,1],gb=[0,0,0,1],sb=Array.isArray(U)&&Array.isArray(U[0]),jb=
Array.isArray(I)&&Array.isArray(I[0]);H=0;a:for(;H<ia;++H){ba+=1;oa=L[H];for(xa=0;3>xa;++xa){if(isNaN(oa[xa])||!isFinite(oa[xa]))continue a;W[xa]=Math.max(W[xa],oa[xa]);Q[xa]=Math.min(Q[xa],oa[xa])}ra=c(T,H,M,this.pixelRatio);la=ra.mesh;ka=ra.lines;var vb=ra.bounds;var qb=ra.visible;if(qb)if(Array.isArray(U))if(ra=sb?H<U.length?U[H]:[0,0,0,0]:U,3===ra.length){for(xa=0;3>xa;++xa)$a[xa]=ra[xa];$a[3]=1}else{if(4===ra.length){for(xa=0;4>xa;++xa)$a[xa]=ra[xa];!this.hasAlpha&&1>ra[3]&&(this.hasAlpha=!0)}}else $a[0]=
$a[1]=$a[2]=0,$a[3]=1;else $a=[1,1,1,0];if(qb)if(Array.isArray(I))if(ra=jb?H<I.length?I[H]:[0,0,0,0]:I,3===ra.length){for(xa=0;3>xa;++xa)gb[xa]=ra[xa];gb[xa]=1}else{if(4===ra.length){for(xa=0;4>xa;++xa)gb[xa]=ra[xa];!this.hasAlpha&&1>ra[3]&&(this.hasAlpha=!0)}}else gb[0]=gb[1]=gb[2]=0,gb[3]=1;else gb=[1,1,1,0];ra=.5;qb?Array.isArray(ha)?ra=H<ha.length?+ha[H]:12:ha?ra=+ha:this.useOrtho&&(ra=12):ra=0;oa=0;Array.isArray(Y)?oa=H<Y.length?+Y[H]:0:Y&&(oa=+Y);qb=Math.cos(oa);var Bb=Math.sin(oa);oa=L[H];
for(xa=0;3>xa;++xa)W[xa]=Math.max(W[xa],oa[xa]),Q[xa]=Math.min(Q[xa],oa[xa]);xa=0;Array.isArray(Z)?xa=H<Z.length?Z[H]:0:Z&&(xa=Z);var ub=0;Array.isArray(ca)?ub=H<ca.length?ca[H]:0:ca&&(ub=ca);xa*=0<xa?1-vb[0][0]:0>xa?1+vb[1][0]:1;ub*=0<ub?1-vb[0][1]:0>ub?1+vb[1][1]:1;vb=[xa,ub];ub=la.cells||[];la=la.positions||[];for(xa=0;xa<ub.length;++xa)for(var wb=ub[xa],rb=0;3>rb;++rb){for(var Ab=0;3>Ab;++Ab)na[3*Ia+Ab]=oa[Ab];for(Ab=0;4>Ab;++Ab)qa[4*Ia+Ab]=$a[Ab];za[Ia]=ba;Ab=la[wb[rb]];ta[2*Ia]=ra*(qb*Ab[0]-
Bb*Ab[1]+vb[0]);ta[2*Ia+1]=ra*(Bb*Ab[0]+qb*Ab[1]+vb[1]);Ia+=1}ub=ka.edges;la=ka.positions;for(xa=0;xa<ub.length;++xa)for(wb=ub[xa],rb=0;2>rb;++rb){for(Ab=0;3>Ab;++Ab)na[3*Xa+Ab]=oa[Ab];for(Ab=0;4>Ab;++Ab)qa[4*Xa+Ab]=gb[Ab];za[Xa]=ba;Ab=la[wb[rb]];ta[2*Xa]=ra*(qb*Ab[0]-Bb*Ab[1]+vb[0]);ta[2*Xa+1]=ra*(Bb*Ab[0]+qb*Ab[1]+vb[1]);Xa+=1}}}this.bounds=[Q,W];this.points=L;this.pointCount=L.length;this.vertexCount=ja;this.lineVertexCount=ma;this.pointBuffer.update(na);this.colorBuffer.update(qa);this.glyphBuffer.update(ta);
this.idBuffer.update(za);q.free(na);q.free(qa);q.free(ta);q.free(za)};b.dispose=function(){this.shader.dispose();this.orthoShader.dispose();this.pickPerspectiveShader.dispose();this.pickOrthoShader.dispose();this.vao.dispose();this.pointBuffer.dispose();this.colorBuffer.dispose();this.glyphBuffer.dispose();this.idBuffer.dispose()}},{"./lib/get-simple-string":330,"./lib/glyphs":331,"./lib/shaders":332,"gl-buffer":267,"gl-mat4/multiply":301,"gl-vao":361,"is-string-blank":458,"typedarray-pool":617}],
335:[function(b,N,G){b=b("glslify");G.boxVertex=b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position \x3d vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]);G.boxFragment=b(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor \x3d color;\n}\n"])},{glslify:336}],336:[function(b,N,G){arguments[4][265][0].apply(G,arguments)},{dup:265}],337:[function(b,N,G){function p(a,
g,h){this.plot=a;this.boxBuffer=g;this.boxShader=h;this.enabled=!0;this.selectBox=[Infinity,Infinity,-Infinity,-Infinity];this.borderColor=[0,0,0,1];this.innerFill=!1;this.innerColor=[0,0,0,.25];this.outerFill=!0;this.outerColor=[0,0,0,.5];this.borderWidth=10}var n=b("gl-shader"),k=b("gl-buffer"),m=b("./lib/shaders");N.exports=function(a,g){var h=a.gl,r=k(h,[0,0,0,1,1,0,1,1]);h=n(h,m.boxVertex,m.boxFragment);r=new p(a,r,h);r.update(g);a.addOverlay(r);return r};b=p.prototype;b.draw=function(){if(this.enabled){var a=
this.plot,g=this.selectBox,h=this.borderWidth,r=this.innerColor,l=this.outerColor,c=this.borderColor,d=a.box,e=a.screenBox,f=a.dataBox,q=a.viewBox,t=a.pixelRatio;a=(g[0]-f[0])*(q[2]-q[0])/(f[2]-f[0])+q[0];var w=(g[1]-f[1])*(q[3]-q[1])/(f[3]-f[1])+q[1],x=(g[2]-f[0])*(q[2]-q[0])/(f[2]-f[0])+q[0];g=(g[3]-f[1])*(q[3]-q[1])/(f[3]-f[1])+q[1];a=Math.max(a,q[0]);w=Math.max(w,q[1]);x=Math.min(x,q[2]);g=Math.min(g,q[3]);x<a||g<w||(d.bind(),q=e[2]-e[0],e=e[3]-e[1],this.outerFill&&(d.drawBox(0,0,q,w,l),d.drawBox(0,
w,a,g,l),d.drawBox(0,g,q,e,l),d.drawBox(x,w,q,g,l)),this.innerFill&&d.drawBox(a,w,x,g,r),0<h&&(h*=t,d.drawBox(a-h,w-h,x+h,w+h,c),d.drawBox(a-h,g-h,x+h,g+h,c),d.drawBox(a-h,w-h,a+h,g+h,c),d.drawBox(x-h,w-h,x+h,g+h,c)))}};b.update=function(a){a=a||{};this.innerFill=!!a.innerFill;this.outerFill=!!a.outerFill;this.innerColor=(a.innerColor||[0,0,0,.5]).slice();this.outerColor=(a.outerColor||[0,0,0,.5]).slice();this.borderColor=(a.borderColor||[0,0,0,1]).slice();this.borderWidth=a.borderWidth||0;this.selectBox=
(a.selectBox||this.selectBox).slice()};b.dispose=function(){this.boxBuffer.dispose();this.boxShader.dispose();this.plot.removeOverlay(this)}},{"./lib/shaders":335,"gl-buffer":267,"gl-shader":339}],338:[function(b,N,G){function p(h,r,l,c,d){this.coord=[h,r];this.id=l;this.value=c;this.distance=d}function n(h,r,l){this.gl=h;this.fbo=r;this.buffer=l;this._readTimeout=null;var c=this;this._readCallback=function(){c.gl&&(r.bind(),h.readPixels(0,0,r.shape[0],r.shape[1],h.RGBA,h.UNSIGNED_BYTE,c.buffer),
c._readTimeout=null)}}N.exports=function(h,r){var l=r[0],c=r[1];r=k(h,l,c,{});l=m.mallocUint8(l*c*4);return new n(h,r,l)};var k=b("gl-fbo"),m=b("typedarray-pool"),a=b("ndarray"),g=b("bit-twiddle").nextPow2;b=n.prototype;Object.defineProperty(b,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(h){if(this.gl){this.fbo.shape=h;var r=this.fbo.shape[0],l=this.fbo.shape[1];if(l*r*4>this.buffer.length){m.free(this.buffer);for(var c=this.buffer=m.mallocUint8(g(l*r*4)),d=0;d<
l*r*4;++d)c[d]=255}return h}}});b.begin=function(){var h=this.gl;h&&(this.fbo.bind(),h.clearColor(1,1,1,1),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT))};b.end=function(){var h=this.gl;h&&(h.bindFramebuffer(h.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))};b.query=function(h,r,l){if(!this.gl)return null;var c=this.fbo.shape.slice();h|=0;r|=0;"number"!==typeof l&&(l=1);var d=Math.min(Math.max(h-l,0),c[0])|0,e=Math.min(Math.max(h+
l,0),c[0])|0;h=Math.min(Math.max(r-l,0),c[1])|0;r=Math.min(Math.max(r+l,0),c[1])|0;if(e<=d||r<=h)return null;r=[e-d,r-h];c=a(this.buffer,[r[0],r[1],4],[4,4*c[0],1],4*(d+c[0]*h));r=c.hi(r[0],r[1],1);e=l;for(var f=1E8,q=-1,t=-1,w=r.shape[0],x=r.shape[1],z=0;z<w;z++)for(var B=0;B<x;B++){var A=r.get(z,B,0),D=r.get(z,B,1),C=r.get(z,B,2),v=r.get(z,B,3);if(255>A||255>D||255>C||255>v)A=e-z,D=l-B,A=A*A+D*D,A<f&&(f=A,q=z,t=B)}r=[q,t,f];e=r[0];l=r[1];if(0>e||Math.pow(this.radius,2)<r[2])return null;f=c.get(e,
l,0);q=c.get(e,l,1);t=c.get(e,l,2);c=c.get(e,l,3);return new p(e+d|0,l+h|0,f,[q,t,c],Math.sqrt(r[2]))};b.dispose=function(){this.gl&&(this.fbo.dispose(),m.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},{"bit-twiddle":104,"gl-fbo":276,ndarray:483,"typedarray-pool":617}],339:[function(b,N,G){function p(l){this.gl=l;this.gl.lastAttribCount=0;this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}
function n(l,c){return l.name<c.name?-1:1}var k=b("./lib/create-uniforms"),m=b("./lib/create-attributes"),a=b("./lib/reflect"),g=b("./lib/shader-cache"),h=b("./lib/runtime-reflect"),r=b("./lib/GLError");b=p.prototype;b.bind=function(){this.program||this._relink();var l,c=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),d=this.gl.lastAttribCount;if(c>d)for(l=d;l<c;l++)this.gl.enableVertexAttribArray(l);else if(d>c)for(l=c;l<d;l++)this.gl.disableVertexAttribArray(l);this.gl.lastAttribCount=
c;this.gl.useProgram(this.program)};b.dispose=function(){for(var l=this.gl.lastAttribCount,c=0;c<l;c++)this.gl.disableVertexAttribArray(c);this.gl.lastAttribCount=0;this._fref&&this._fref.dispose();this._vref&&this._vref.dispose();this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null};b.update=function(l,c,d,e){function f(){t.program=g.program(w,t._vref,t._fref,x,z);for(var F=0;F<d.length;++F)y[F]=w.getUniformLocation(t.program,d[F].name)}
if(!c||1===arguments.length){var q=l;l=q.vertex;c=q.fragment;d=q.uniforms;e=q.attributes}var t=this,w=t.gl;q=t._vref;t._vref=g.shader(w,w.VERTEX_SHADER,l);q&&q.dispose();t.vertShader=t._vref.shader;q=this._fref;t._fref=g.shader(w,w.FRAGMENT_SHADER,c);q&&q.dispose();t.fragShader=t._fref.shader;if(!d||!e){q=w.createProgram();w.attachShader(q,t.fragShader);w.attachShader(q,t.vertShader);w.linkProgram(q);if(!w.getProgramParameter(q,w.LINK_STATUS))throw q=w.getProgramInfoLog(q),new r(q,"Error linking program:"+
q);d=d||h.uniforms(w,q);e=e||h.attributes(w,q);w.deleteProgram(q)}e=e.slice();e.sort(n);q=[];var x=[],z=[],B;for(B=0;B<e.length;++B){var A=e[B];if(0<=A.type.indexOf("mat")){for(var D=A.type.charAt(A.type.length-1)|0,C=Array(D),v=0;v<D;++v)C[v]=z.length,x.push(A.name+"["+v+"]"),"number"===typeof A.location?z.push(A.location+v):Array.isArray(A.location)&&A.location.length===D&&"number"===typeof A.location[v]?z.push(A.location[v]|0):z.push(-1);q.push({name:A.name,type:A.type,locations:C})}else q.push({name:A.name,
type:A.type,locations:[z.length]}),x.push(A.name),"number"===typeof A.location?z.push(A.location|0):z.push(-1)}for(B=A=0;B<z.length;++B)if(0>z[B]){for(;0<=z.indexOf(A);)A+=1;z[B]=A}var y=Array(d.length);f();t._relink=f;t.types={uniforms:a(d),attributes:a(e)};t.attributes=m(w,t,q,z);Object.defineProperty(t,"uniforms",k(w,t,d,y))};N.exports=function(l,c,d,e,f){l=new p(l);l.update(c,d,e,f);return l}},{"./lib/GLError":340,"./lib/create-attributes":341,"./lib/create-uniforms":342,"./lib/reflect":343,"./lib/runtime-reflect":344,
"./lib/shader-cache":345}],340:[function(b,N,G){function p(n,k,m){this.shortMessage=k||"";this.longMessage=m||"";this.rawError=n||"";this.message="gl-shader: "+(k||n||"")+(m?"\n"+m:"");this.stack=Error().stack}p.prototype=Error();p.prototype.name="GLError";p.prototype.constructor=p;N.exports=p},{}],341:[function(b,N,G){function p(a,g,h,r,l,c){this._gl=a;this._wrapper=g;this._index=h;this._locations=r;this._dimension=l;this._constFunc=c}function n(a,g,h,r,l,c,d){for(var e=["gl","v"],f=[],q=0;q<l;++q)e.push("x"+
q),f.push("x"+q);e.push("if(x0.length\x3d\x3d\x3dvoid 0){return gl.vertexAttrib"+l+"f(v,"+f.join()+")}else{return gl.vertexAttrib"+l+"fv(v,x0)}");var t=Function.apply(null,e),w=new p(a,g,h,r,l,t);Object.defineProperty(c,d,{set:function(x){a.disableVertexAttribArray(r[h]);t(a,r[h],x);return x},get:function(){return w},enumerable:!0})}function k(a,g,h,r,l,c,d){for(var e=Array(l),f=Array(l),q=0;q<l;++q)n(a,g,h[q],r,l,e,q),f[q]=e[q];Object.defineProperty(e,"location",{set:function(x){if(Array.isArray(x))for(var z=
0;z<l;++z)f[z].location=x[z];else for(z=0;z<l;++z)f[z].location=x+z;return x},get:function(){for(var x=Array(l),z=0;z<l;++z)x[z]=r[h[z]];return x},enumerable:!0});e.pointer=function(x,z,B,A){x=x||a.FLOAT;z=!!z;B=B||l*l;A=A||0;for(var D=0;D<l;++D){var C=r[h[D]];a.vertexAttribPointer(C,l,x,z,B,A+D*l);a.enableVertexAttribArray(C)}};var t=Array(l),w=a["vertexAttrib"+l+"fv"];Object.defineProperty(c,d,{set:function(x){for(var z=0;z<l;++z){var B=r[h[z]];a.disableVertexAttribArray(B);if(Array.isArray(x[0]))w.call(a,
B,x[z]);else{for(var A=0;A<l;++A)t[A]=x[l*z+A];w.call(a,B,t)}}return x},get:function(){return e},enumerable:!0})}N.exports=function(a,g,h,r){for(var l={},c=0,d=h.length;c<d;++c){var e=h[c],f=e.name,q=e.type;e=e.locations;switch(q){case "bool":case "int":case "float":n(a,g,e[0],r,1,l,f);break;default:if(0<=q.indexOf("vec")){var t=q.charCodeAt(q.length-1)-48;if(2>t||4<t)throw new m("","Invalid data type for attribute "+f+": "+q);n(a,g,e[0],r,t,l,f)}else if(0<=q.indexOf("mat")){t=q.charCodeAt(q.length-
1)-48;if(2>t||4<t)throw new m("","Invalid data type for attribute "+f+": "+q);k(a,g,e,r,t,l,f)}else throw new m("","Unknown data type for attribute "+f+": "+q);}}return l};var m=b("./GLError");b=p.prototype;b.pointer=function(a,g,h,r){var l=this._gl,c=this._locations[this._index];l.vertexAttribPointer(c,this._dimension,a||l.FLOAT,!!g,h||0,r||0);l.enableVertexAttribArray(c)};b.set=function(a,g,h,r){return this._constFunc(this._locations[this._index],a,g,h,r)};Object.defineProperty(b,"location",{get:function(){return this._locations[this._index]},
set:function(a){a!==this._locations[this._index]&&(this._locations[this._index]=a|0,this._wrapper.program=null);return a|0}})},{"./GLError":340}],342:[function(b,N,G){function p(a){return(new Function("y","return function(){return y}"))(a)}function n(a,g){for(var h=Array(a),r=0;r<a;++r)h[r]=g;return h}var k=b("./reflect"),m=b("./GLError");N.exports=function(a,g,h,r){function l(w,x,z){switch(z){case "bool":case "int":case "sampler2D":case "samplerCube":return"gl.uniform1i(locations["+x+"],obj"+w+")";
case "float":return"gl.uniform1f(locations["+x+"],obj"+w+")";default:var B=z.indexOf("vec");if(0<=B&&1>=B&&z.length===4+B){B=z.charCodeAt(z.length-1)-48;if(2>B||4<B)throw new m("","Invalid data type");switch(z.charAt(0)){case "b":case "i":return"gl.uniform"+B+"iv(locations["+x+"],obj"+w+")";case "v":return"gl.uniform"+B+"fv(locations["+x+"],obj"+w+")";default:throw new m("","Unrecognized data type for vector "+name+": "+z);}}else{if(0===z.indexOf("mat")&&4===z.length){B=z.charCodeAt(z.length-1)-48;
if(2>B||4<B)throw new m("","Invalid uniform dimension type for matrix "+name+": "+z);return"gl.uniformMatrix"+B+"fv(locations["+x+"],false,obj"+w+")"}throw new m("","Unknown uniform data type for "+name+": "+z);}}}function c(w,x){if("object"!==typeof x)return[[w,x]];var z=[],B;for(B in x){var A=x[B],D=w;D=parseInt(B)+""===B?D+("["+B+"]"):D+("."+B);"object"===typeof A?z.push.apply(z,c(D,A)):z.push([D,A])}return z}function d(w){var x=["return function updateProperty(obj){"];w=c("",w);for(var z=0;z<
w.length;++z){var B=w[z],A=B[0];B=B[1];r[B]&&x.push(l(A,B,h[B].type))}x.push("return obj}");return(new Function("gl","locations",x.join("\n")))(a,r)}function e(w){switch(w){case "bool":return!1;case "int":case "sampler2D":case "samplerCube":return 0;case "float":return 0;default:var x=w.indexOf("vec");if(0<=x&&1>=x&&w.length===4+x){x=w.charCodeAt(w.length-1)-48;if(2>x||4<x)throw new m("","Invalid data type");return"b"===w.charAt(0)?n(x,!1):n(x,0)}if(0===w.indexOf("mat")&&4===w.length){x=w.charCodeAt(w.length-
1)-48;if(2>x||4<x)throw new m("","Invalid uniform dimension type for matrix "+name+": "+w);return n(x*x,0)}throw new m("","Unknown uniform data type for "+name+": "+w);}}function f(w,x,z){if("object"===typeof z){var B=q(z);Object.defineProperty(w,x,{get:p(B),set:d(z),enumerable:!0,configurable:!1})}else if(r[z]){B=Object;var A=B.defineProperty;var D=(new Function("gl","wrapper","locations","return function(){return gl.getUniform(wrapper.program,locations["+z+"])}"))(a,g,r);A.call(B,w,x,{get:D,set:d(z),
enumerable:!0,configurable:!1})}else w[x]=e(h[z].type)}function q(w){if(Array.isArray(w)){var x=Array(w.length);for(var z=0;z<w.length;++z)f(x,z,w[z])}else for(z in x={},w)f(x,z,w[z]);return x}var t=k(h,!0);return{get:p(q(t)),set:d(t),enumerable:!0,configurable:!0}}},{"./GLError":340,"./reflect":343}],343:[function(b,N,G){N.exports=function(p,n){for(var k={},m=0;m<p.length;++m)for(var a=p[m].name.split("."),g=k,h=0;h<a.length;++h){var r=a[h].split("[");if(1<r.length){r[0]in g||(g[r[0]]=[]);g=g[r[0]];
for(var l=1;l<r.length;++l){var c=parseInt(r[l]);l<r.length-1||h<a.length-1?(c in g||(g[c]=l<r.length-1?[]:{}),g=g[c]):g[c]=n?m:p[m].type}}else h<a.length-1?(r[0]in g||(g[r[0]]={}),g=g[r[0]]):g[r[0]]=n?m:p[m].type}return k}},{}],344:[function(b,N,G){function p(m,a){if(!k){var g=Object.keys(n);k={};for(var h=0;h<g.length;++h){var r=g[h];k[m[r]]=n[r]}}return k[a]}G.uniforms=function(m,a){for(var g=m.getProgramParameter(a,m.ACTIVE_UNIFORMS),h=[],r=0;r<g;++r){var l=m.getActiveUniform(a,r);if(l){var c=
p(m,l.type);if(1<l.size)for(var d=0;d<l.size;++d)h.push({name:l.name.replace("[0]","["+d+"]"),type:c});else h.push({name:l.name,type:c})}}return h};G.attributes=function(m,a){for(var g=m.getProgramParameter(a,m.ACTIVE_ATTRIBUTES),h=[],r=0;r<g;++r){var l=m.getActiveAttrib(a,r);l&&h.push({name:l.name,type:p(m,l.type)})}return h};var n={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",
BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},k=null},{}],345:[function(b,N,G){function p(r,l,c,d,e,f,q){this.id=r;this.src=l;this.type=c;this.shader=d;this.count=f;this.programs=[];this.cache=q}function n(r){this.gl=r;this.shaders=[{},{}];this.programs={}}function k(r){var l=g.get(r);l||(l=new n(r),g.set(r,l));return l}G.shader=function(r,l,c){return k(r).getShaderReference(l,c)};G.program=function(r,l,c,d,e){return k(r).getProgram(l,
c,d,e)};var m=b("./GLError"),a=b("gl-format-compiler-error"),g=new ("undefined"===typeof WeakMap?b("weakmap-shim"):WeakMap),h=0;p.prototype.dispose=function(){if(0===--this.count){for(var r=this.cache,l=r.gl,c=this.programs,d=0,e=c.length;d<e;++d){var f=r.programs[c[d]];f&&(delete r.programs[d],l.deleteProgram(f))}l.deleteShader(this.shader);delete r.shaders[this.type===l.FRAGMENT_SHADER|0][this.src]}};b=n.prototype;b.getShaderReference=function(r,l){var c=this.gl,d=this.shaders[r===c.FRAGMENT_SHADER|
0],e=d[l];if(e&&c.isShader(e.shader))e.count+=1;else{e=c.createShader(r);c.shaderSource(e,l);c.compileShader(e);if(!c.getShaderParameter(e,c.COMPILE_STATUS)){c=c.getShaderInfoLog(e);try{var f=a(c,l,r)}catch(q){throw console.warn("Failed to format compiler error: "+q),new m(c,"Error compiling shader:\n"+c);}throw new m(c,f.short,f.long);}e=d[l]=new p(h++,l,r,e,[],1,this)}return e};b.getProgram=function(r,l,c,d){var e=[r.id,l.id,c.join(":"),d.join(":")].join("@"),f=this.programs[e];if(!f||!this.gl.isProgram(f)){f=
this.programs;var q=this.gl,t=r.shader,w=l.shader,x=q.createProgram();q.attachShader(x,t);q.attachShader(x,w);for(t=0;t<c.length;++t)q.bindAttribLocation(x,d[t],c[t]);q.linkProgram(x);if(!q.getProgramParameter(x,q.LINK_STATUS))throw r=q.getProgramInfoLog(x),new m(r,"Error linking program: "+r);f[e]=f=x;r.programs.push(e);l.programs.push(e)}return f}},{"./GLError":340,"gl-format-compiler-error":277,"weakmap-shim":628}],346:[function(b,N,G){function p(n){this.plot=n;this.enable=[!0,!0,!1,!1];this.width=
[1,1,1,1];this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.center=[Infinity,Infinity]}N.exports=function(n,k){var m=new p(n);m.update(k);n.addOverlay(m);return m};b=p.prototype;b.update=function(n){n=n||{};this.enable=(n.enable||[!0,!0,!1,!1]).slice();this.width=(n.width||[1,1,1,1]).slice();this.color=(n.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(k){return k.slice()});this.center=(n.center||[Infinity,Infinity]).slice();this.plot.setOverlayDirty()};b.draw=function(){var n=
this.enable,k=this.width,m=this.color,a=this.center,g=this.plot,h=g.line,r=g.dataBox;g=g.viewBox;h.bind();if(r[0]<=a[0]&&a[0]<=r[2]&&r[1]<=a[1]&&a[1]<=r[3]){var l=g[0]+(a[0]-r[0])/(r[2]-r[0])*(g[2]-g[0]);a=g[1]+(a[1]-r[1])/(r[3]-r[1])*(g[3]-g[1]);n[0]&&h.drawLine(l,a,g[0],a,k[0],m[0]);n[1]&&h.drawLine(l,a,l,g[1],k[1],m[1]);n[2]&&h.drawLine(l,a,g[2],a,k[2],m[2]);n[3]&&h.drawLine(l,a,l,g[3],k[3],m[3])}};b.dispose=function(){this.plot.removeOverlay(this)}},{}],347:[function(b,N,G){arguments[4][265][0].apply(G,
arguments)},{dup:265}],348:[function(b,N,G){G=b("glslify");var p=b("gl-shader"),n=G(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition \x3d mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos \x3d projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset \x3d (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta \x3d weight * clipOffset * screenShape;\n  vec2 lineOffset \x3d normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   \x3d vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     \x3d color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),
k=G(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor \x3d fragColor;\n}"]);N.exports=function(m){return p(m,n,k,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":339,glslify:347}],349:[function(b,N,G){function p(l,c,d,e){this.gl=l;this.buffer=c;this.vao=d;this.shader=e;this.pixelRatio=1;this.bounds=[[-1E3,-1E3,-1E3],[1E3,1E3,1E3]];this.position=[0,0,0];this.lineWidth=[2,2,2];this.colors=
[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.enabled=[!0,!0,!0];this.drawSides=[!0,!0,!0];this.axes=null}var n=b("gl-buffer"),k=b("gl-vao"),m=b("./shaders/index");N.exports=function(l,c){function d(w,x,z,B,A,D){w=[w,x,z,0,0,0,1];w[B+3]=1;w[B]=A;e.push.apply(e,w);w[6]=-1;e.push.apply(e,w);w[B]=D;e.push.apply(e,w);e.push.apply(e,w);w[6]=1;e.push.apply(e,w);w[B]=A;e.push.apply(e,w)}var e=[];d(0,0,0,0,0,1);d(0,0,0,1,0,1);d(0,0,0,2,0,1);d(1,0,0,1,-1,1);d(1,0,0,2,-1,1);d(0,1,0,0,-1,1);d(0,1,0,2,-1,1);d(0,0,1,0,
-1,1);d(0,0,1,1,-1,1);var f=n(l,e),q=k(l,[{type:l.FLOAT,buffer:f,size:3,offset:0,stride:28},{type:l.FLOAT,buffer:f,size:3,offset:12,stride:28},{type:l.FLOAT,buffer:f,size:1,offset:24,stride:28}]),t=m(l);t.attributes.position.location=0;t.attributes.color.location=1;t.attributes.weight.location=2;l=new p(l,f,q,t);l.update(c);return l};var a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b=p.prototype;var g=[0,0,0],h=[0,0,0],r=[0,0];b.isTransparent=function(){return!1};b.drawTransparent=function(l){};b.draw=function(l){var c=
this.gl,d=this.vao,e=this.shader;d.bind();e.bind();var f=l.model||a,q=l.view||a;l=l.projection||a;if(this.axes)var t=this.axes.lastCubeProps.axis;for(var w=0;3>w;++w)t&&0>t[w]?(g[w]=this.bounds[0][w],h[w]=this.bounds[1][w]):(g[w]=this.bounds[1][w],h[w]=this.bounds[0][w]);r[0]=c.drawingBufferWidth;r[1]=c.drawingBufferHeight;e.uniforms.model=f;e.uniforms.view=q;e.uniforms.projection=l;e.uniforms.coordinates=[this.position,g,h];e.uniforms.colors=this.colors;e.uniforms.screenShape=r;for(w=0;3>w;++w)e.uniforms.lineWidth=
this.lineWidth[w]*this.pixelRatio,this.enabled[w]&&(d.draw(c.TRIANGLES,6,6*w),this.drawSides[w]&&d.draw(c.TRIANGLES,12,18+12*w));d.unbind()};b.update=function(l){l&&("bounds"in l&&(this.bounds=l.bounds),"position"in l&&(this.position=l.position),"lineWidth"in l&&(this.lineWidth=l.lineWidth),"colors"in l&&(this.colors=l.colors),"enabled"in l&&(this.enabled=l.enabled),"drawSides"in l&&(this.drawSides=l.drawSides))};b.dispose=function(){this.vao.dispose();this.buffer.dispose();this.shader.dispose()}},
{"./shaders/index":348,"gl-buffer":267,"gl-vao":361}],350:[function(b,N,G){var p=b("glslify");b=p(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz \x3d 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| \x3e 0  U  ||b|| \x3e 0.\n  // Assign z \x3d 0, x \x3d -b, y \x3d a:\n  // a*-b + b*a + c*0 \x3d -ba + ba + 0 \x3d 0\n  if (v.x*v.x \x3e v.z*v.z || v.y*v.y \x3e v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount \x3d 8.0;\n\n  float angle \x3d 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u \x3d getOrthogonalVector(d);\n  vec3 v \x3d normalize(cross(u, d));\n\n  vec3 x \x3d u * cos(angle) * length(d);\n  vec3 y \x3d v * sin(angle) * length(d);\n  vec3 v3 \x3d x + y;\n\n  normal \x3d normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, tubeScale;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model \x26 view changes.\n  vec3 normal;\n  vec3 XYZ \x3d getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition \x3d model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate \x3d view * tubePosition;\n  cameraCoordinate.xyz /\x3d cameraCoordinate.w;\n  f_lightDirection \x3d lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   \x3d eyePosition - cameraCoordinate.xyz;\n  f_normal \x3d normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  \x3d model * vec4(tubePosition, 1.0);\n  vec4 t_position  \x3d view * tubePosition;\n  gl_Position      \x3d projection * t_position;\n\n  f_color          \x3d color;\n  f_data           \x3d tubePosition.xyz;\n  f_position       \x3d position.xyz;\n  f_uv             \x3d uv;\n}\n"]);
N=p(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH \x3d max(x, 0.0001);\n  float cos2Alpha \x3d NdotH * NdotH;\n  float tan2Alpha \x3d (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 \x3d roughness * roughness;\n  float denom \x3d 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN \x3d max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN \x3d max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H \x3d normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH \x3d max(dot(surfaceNormal, H), 0.0);\n  float VdotH \x3d max(dot(viewDirection, H), 0.000001);\n  float LdotH \x3d max(dot(lightDirection, H), 0.000001);\n  float G1 \x3d (2.0 * NdotH * VdotN) / VdotH;\n  float G2 \x3d (2.0 * NdotH * LdotN) / LdotH;\n  float G \x3d min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D \x3d beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F \x3d pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N \x3d normalize(f_normal);\n  vec3 L \x3d normalize(f_lightDirection);\n  vec3 V \x3d normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N \x3d -N;\n  }\n\n  float specular \x3d min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  \x3d min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor \x3d f_color * texture2D(texture, f_uv);\n  vec4 litColor \x3d surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor \x3d litColor * opacity;\n}\n"]);
var n=p(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz \x3d 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| \x3e 0  U  ||b|| \x3e 0.\n  // Assign z \x3d 0, x \x3d -b, y \x3d a:\n  // a*-b + b*a + c*0 \x3d -ba + ba + 0 \x3d 0\n  if (v.x*v.x \x3e v.z*v.z || v.y*v.y \x3e v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount \x3d 8.0;\n\n  float angle \x3d 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u \x3d getOrthogonalVector(d);\n  vec3 v \x3d normalize(cross(u, d));\n\n  vec3 x \x3d u * cos(angle) * length(d);\n  vec3 y \x3d v * sin(angle) * length(d);\n  vec3 v3 \x3d x + y;\n\n  normal \x3d normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float tubeScale;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ \x3d getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition \x3d model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  gl_Position \x3d projection * view * tubePosition;\n  f_id        \x3d id;\n  f_position  \x3d position.xyz;\n}\n"]);
p=p(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor \x3d vec4(pickId, f_id.xyz);\n}"]);
G.meshShader={vertex:b,fragment:N,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]};G.pickShader={vertex:n,fragment:p,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:351}],351:[function(b,N,G){arguments[4][265][0].apply(G,arguments)},{dup:265}],352:[function(b,N,G){var p=b("gl-vec3"),n=b("gl-vec4"),k="xyz xzy yxz yzx zxy zyx".split(" "),m=function(d,e,f,q){for(var t=0,
w=0;w<d.length;w++)for(var x=d[w].velocities,z=0;z<x.length;z++)t=Math.max(t,p.length(x[z]));d=d.map(function(K){var O=t,I=K.points,L=K.velocities;K=K.divergences;var H=[],M=[],Q=[],Z=[],ca=[],W=[],T=0;n.create();for(var U=n.create(),ha=0;ha<I.length;ha++){var Y=I[ha],ba=L[ha],ja=K[ha];0===f&&(ja=.05*q);var ma=p.length(ba)/O;var ia=n.create();p.copy(ia,ba);ia[3]=ja;for(ba=0;8>ba;ba++)ca[ba]=[Y[0],Y[1],Y[2],ba];if(0<Z.length)for(ba=0;8>ba;ba++)Y=(ba+1)%8,H.push(Z[ba],ca[ba],ca[Y],ca[Y],Z[Y],Z[ba]),
Q.push(U,ia,ia,ia,U,U),W.push(T,ma,ma,ma,T,T),Y=H.length,M.push([Y-6,Y-5,Y-4],[Y-3,Y-2,Y-1]);T=Z;Z=ca;ca=T;U=ia;T=ma}return{positions:H,cells:M,vectors:Q,vertexIntensity:W}});x=[];var B=[],A=[],D=[];for(w=0;w<d.length;w++){var C=d[w],v=x.length;x=x.concat(C.positions);A=A.concat(C.vectors);D=D.concat(C.vertexIntensity);for(z=0;z<C.cells.length;z++){var y=C.cells[z],F=[];B.push(F);for(var J=0;J<y.length;J++)F.push(y[J]+v)}}return{positions:x,cells:B,vectors:A,vertexIntensity:D,colormap:e}},a=function(d,
e){var f=d.length,q;for(q=0;q<f;q++){var t=d[q];if(t===e)break;else if(t>e)return q-1}return q},g=function(d,e,f){return d<e?e:d>f?f:d},h=function(d){var e=Infinity;d.sort(function(w,x){return w-x});for(var f=d.length,q=1;q<f;q++){var t=Math.abs(d[q]-d[q-1]);t<e&&(e=t)}return e},r=function(d){for(var e=[],f=[],q=[],t={},w={},x={},z=d.length,B=0;B<z;B++){var A=d[B],D=A[0],C=A[1];A=A[2];t[D]||(e.push(D),t[D]=!0);w[C]||(f.push(C),w[C]=!0);x[A]||(q.push(A),x[A]=!0)}d=h(e);f=h(f);q=h(q);q=Math.min(d,f,
q);return isFinite(q)?q:1};N.exports=function(d,e){var f=d.startingPositions,q=d.maxLength||1E3,t=d.tubeSize||1,w=d.absoluteTubeSize,x=d.gridFill||"+x+y+z",z,B,A;-1!==x.indexOf("-x")&&(z=!0);-1!==x.indexOf("-y")&&(B=!0);-1!==x.indexOf("-z")&&(A=!0);var D=k.indexOf(x.replace(/-/g,"").replace(/\+/g,""));var C=d.getVelocity||function(oa){var xa=d.vectors,ra=d.meshgrid;var la=oa[0];var ka=oa[1],na=oa[2];oa=ra[0].length;var qa=ra[1].length,ta=ra[2].length,za=a(ra[0],la),Ia=a(ra[1],ka),Xa=a(ra[2],na),$a=
za+1,gb=Ia+1,sb=Xa+1;za=g(za,0,oa-1);$a=g($a,0,oa-1);Ia=g(Ia,0,qa-1);gb=g(gb,0,qa-1);Xa=g(Xa,0,ta-1);sb=g(sb,0,ta-1);if(0>za||0>Ia||0>Xa||$a>oa-1||gb>qa-1||sb>ta-1)la=p.create();else{var jb=ra[0][za],vb=ra[1][Ia],qb=ra[2][Xa];la=(la-jb)/(ra[0][$a]-jb);ka=(ka-vb)/(ra[1][gb]-vb);ra=(na-qb)/(ra[2][sb]-qb);isFinite(la)||(la=.5);isFinite(ka)||(ka=.5);isFinite(ra)||(ra=.5);z&&(za=oa-1-za,$a=oa-1-$a);B&&(Ia=qa-1-Ia,gb=qa-1-gb);A&&(Xa=ta-1-Xa,sb=ta-1-sb);switch(D){case 5:Ia*=ta;gb*=ta;za=za*ta*qa;$a=$a*ta*
qa;break;case 4:za*=ta;$a*=ta;Ia=Ia*ta*oa;gb=gb*ta*oa;break;case 3:Xa*=qa;sb*=qa;za=za*qa*ta;$a=$a*qa*ta;break;case 2:za*=qa;$a*=qa;Xa=Xa*qa*oa;sb=sb*qa*oa;break;case 1:Xa*=oa;sb*=oa;Ia=Ia*oa*ta;gb=gb*oa*ta;break;default:Ia*=oa,gb*=oa,Xa=Xa*oa*qa,sb=sb*oa*qa}oa=xa[za+Ia+Xa];qa=xa[za+Ia+sb];ta=xa[za+gb+Xa];za=xa[za+gb+sb];na=xa[$a+Ia+Xa];Ia=xa[$a+Ia+sb];Xa=xa[$a+gb+Xa];qb=xa[$a+gb+sb];xa=p.create();$a=p.create();gb=p.create();sb=p.create();p.lerp(xa,oa,na,la);p.lerp($a,qa,Ia,la);p.lerp(gb,ta,Xa,la);
p.lerp(sb,za,qb,la);la=p.create();oa=p.create();p.lerp(la,xa,gb,ka);p.lerp(oa,$a,sb,ka);ka=p.create();p.lerp(ka,la,oa,ra);la=ka}return la};x=d.getDivergence||function(oa,xa){var ra=p.create();p.add(ra,oa,[1E-4,0,0]);var la=C(ra);p.subtract(la,la,xa);p.scale(la,la,1E4);p.add(ra,oa,[0,1E-4,0]);var ka=C(ra);p.subtract(ka,ka,xa);p.scale(ka,ka,1E4);p.add(ra,oa,[0,0,1E-4]);oa=C(ra);p.subtract(oa,oa,xa);p.scale(oa,oa,1E4);p.add(ra,la,ka);p.add(ra,ra,oa);return ra};var v=[],y=e[0][0],F=e[0][1],J=e[0][2],
K=e[1][0],O=e[1][1],I=e[1][2],L=function(oa){var xa=oa[0],ra=oa[1];oa=oa[2];return!(xa<y||xa>K||ra<F||ra>O||oa<J||oa>I)},H=10*p.distance(e[0],e[1])/q,M=H*H;e=1;var Q=0,Z=f.length;1<Z&&(e=r(f));for(var ca=0;ca<Z;ca++){var W=p.create();p.copy(W,f[ca]);var T=[W],U=[],ha=C(W),Y=W;U.push(ha);var ba=[],ja=x(W,ha);ja=p.length(ja);isFinite(ja)&&ja>Q&&(Q=ja);ba.push(ja);v.push({points:T,velocities:U,divergences:ba});for(var ma=0;ma<100*q&&T.length<q&&L(W);){ma++;var ia=p.clone(ha);ha=p.squaredLength(ia);if(0===
ha)break;else ha>M&&p.scale(ia,ia,H/Math.sqrt(ha));p.add(ia,ia,W);ha=C(ia);p.squaredDistance(Y,ia)-M>-1E-4*M&&(T.push(ia),Y=ia,U.push(ha),ja=x(ia,ha),ja=p.length(ja),isFinite(ja)&&ja>Q&&(Q=ja),ba.push(ja));W=ia}}f=m(v,d.colormap,Q,e);w?f.tubeScale=w:(0===Q&&(Q=1),f.tubeScale=.5*t*e/Q);return f};var l=b("./lib/shaders"),c=b("gl-cone3d").createMesh;N.exports.createTubeMesh=function(d,e){return c(d,e,{shaders:l,traceType:"streamtube"})}},{"./lib/shaders":350,"gl-cone3d":268,"gl-vec3":380,"gl-vec4":416}],
353:[function(b,N,G){var p=b("gl-shader");b=b("glslify");var n=b(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform vec3 objectOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 localCoordinate \x3d vec3(uv.zw, f.x);\n  worldCoordinate \x3d objectOffset + localCoordinate;\n  vec4 worldPosition \x3d model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition \x3d projection * view * worldPosition;\n  gl_Position \x3d clipPosition;\n  kill \x3d f.y;\n  value \x3d f.z;\n  planeCoordinate \x3d uv.xy;\n\n  vColor \x3d texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate \x3d view * worldPosition;\n  cameraCoordinate.xyz /\x3d cameraCoordinate.w;\n  lightDirection \x3d lightPosition - cameraCoordinate.xyz;\n  eyeDirection   \x3d eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  \x3d normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),
k=b(["precision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH \x3d max(x, 0.0001);\n  float cos2Alpha \x3d NdotH * NdotH;\n  float tan2Alpha \x3d (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 \x3d roughness * roughness;\n  float denom \x3d 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (\n    kill \x3e 0.0 ||\n    vColor.a \x3d\x3d 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)\n  ) discard;\n\n  vec3 N \x3d normalize(surfaceNormal);\n  vec3 V \x3d normalize(eyeDirection);\n  vec3 L \x3d normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N \x3d -N;\n  }\n\n  float specular \x3d max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  \x3d min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color  in vertex or in fragment\n  vec4 surfaceColor \x3d\n    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +\n    step(.5, vertexColor) * vColor;\n\n  vec4 litColor \x3d surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor \x3d mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),
m=b(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform vec3 objectOffset;\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate \x3d permutation * vec3(uv.xy, height);\n  worldCoordinate \x3d objectOffset + dataCoordinate;\n  vec4 worldPosition \x3d model * vec4(worldCoordinate, 1.0);\n\n  vec4 clipPosition \x3d projection * view * worldPosition;\n  clipPosition.z +\x3d zOffset;\n\n  gl_Position \x3d clipPosition;\n  value \x3d f + objectOffset.z;\n  kill \x3d -1.0;\n  planeCoordinate \x3d uv.zw;\n\n  vColor \x3d texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   \x3d vec3(1,0,0);\n  eyeDirection    \x3d vec3(0,1,0);\n  lightDirection  \x3d vec3(0,0,1);\n}\n"]),
a=b(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh \x3d 255.0 * v;\n  float upper \x3d floor(vh);\n  float lower \x3d fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if ((kill \x3e 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec2 ux \x3d splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy \x3d splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor \x3d vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);
G.createShader=function(g){g=p(g,n,k,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);g.attributes.uv.location=0;g.attributes.f.location=1;g.attributes.normal.location=2;return g};G.createPickShader=function(g){g=p(g,n,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);g.attributes.uv.location=0;g.attributes.f.location=1;g.attributes.normal.location=2;return g};G.createContourShader=function(g){g=p(g,m,k,null,[{name:"uv",type:"vec4"},
{name:"f",type:"float"}]);g.attributes.uv.location=0;g.attributes.f.location=1;return g};G.createPickContourShader=function(g){g=p(g,m,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);g.attributes.uv.location=0;g.attributes.f.location=1;return g}},{"gl-shader":339,glslify:442}],354:[function(b,N,G){function p(U,ha,Y,ba,ja){this.position=U;this.index=ha;this.uv=Y;this.level=ba;this.dataCoordinate=ja}function n(U,ha,Y,ba,ja,ma,ia,oa,xa,ra,la,ka,na,qa,ta){this.gl=U;this.shape=ha;this.bounds=
Y;this.objectOffset=ta;this.intensityBounds=[];this._shader=ba;this._pickShader=ja;this._coordinateBuffer=ma;this._vao=ia;this._colorMap=oa;this._contourShader=xa;this._contourPickShader=ra;this._contourBuffer=la;this._contourVAO=ka;this._contourOffsets=[[],[],[]];this._contourCounts=[[],[],[]];this._vertexCount=0;this._pickResult=new p([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]);this._dynamicBuffer=na;this._dynamicVAO=qa;this._dynamicOffsets=[0,0,0];this._dynamicCounts=[0,0,0];this.contourWidth=[1,1,1];
this.contourLevels=[[1],[1],[1]];this.contourTint=[0,0,0];this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]];this.showSurface=this.showContour=!0;this.enableHighlight=[!0,!0,!0];this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.highlightTint=[1,1,1];this.highlightLevel=[-1,-1,-1];this.enableDynamic=[!0,!0,!0];this.dynamicLevel=[NaN,NaN,NaN];this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.dynamicTint=[1,1,1];this.dynamicWidth=[1,1,1];this.axesBounds=[[Infinity,Infinity,Infinity],
[-Infinity,-Infinity,-Infinity]];this.surfaceProject=[!1,!1,!1];this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]];this.colorBounds=[!1,!1];this._field=[x(f.mallocFloat(1024),[0,0]),x(f.mallocFloat(1024),[0,0]),x(f.mallocFloat(1024),[0,0])];this.pickId=1;this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.snapToData=!1;this.opacity=this.pixelRatio=1;this.lightPosition=[10,1E4,0];this.diffuseLight=this.ambientLight=.8;this.specularLight=2;this.roughness=.5;this.fresnel=
1.5;this.vertexColor=0;this.dirty=!0}function k(U,ha){if(!ha||!ha.length)return 1;for(var Y=0;Y<ha.length&&!(2>ha.length);++Y){if(ha[Y][0]===U)return ha[Y][1];if(ha[Y][0]>U&&0<Y)return U=(ha[Y][0]-U)/(ha[Y][0]-ha[Y-1][0]),ha[Y][1]*(1-U)+U*ha[Y-1][1]}return 1}function m(U,ha){var Y,ba,ja=ha.axes&&ha.axes.lastCubeProps.axis||M,ma=ha.showSurface,ia=ha.showContour;for(Y=0;3>Y;++Y)for(ma=ma||ha.surfaceProject[Y],ba=0;3>ba;++ba)ia=ia||ha.contourProject[Y][ba];for(Y=0;3>Y;++Y){var oa=Q.projections[Y];for(ba=
0;16>ba;++ba)oa[ba]=0;for(ba=0;4>ba;++ba)oa[5*ba]=1;oa[5*Y]=0;oa[12+Y]=ha.axesBounds[+(0<ja[Y])][Y];B(oa,U.model,oa);var xa=Q.clipBounds[Y];for(oa=0;2>oa;++oa)for(ba=0;3>ba;++ba)xa[oa][ba]=U.clipBounds[oa][ba];xa[0][Y]=-1E8;xa[1][Y]=1E8}Q.showSurface=ma;Q.showContour=ia;return Q}function a(U,ha){U=U||{};ha=this.gl;ha.disable(ha.CULL_FACE);this._colorMap.bind(0);var Y=Z;Y.model=U.model||O;Y.view=U.view||O;Y.projection=U.projection||O;Y.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||
this.bounds[0][2]];Y.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]];Y.objectOffset=this.objectOffset;Y.contourColor=this.contourColor[0];Y.inverseModel=A(Y.inverseModel,Y.model);for(U=0;2>U;++U)for(var ba=Y.clipBounds[U],ja=0;3>ja;++ja)ba[ja]=Math.min(Math.max(this.clipBounds[U][ja],-1E8),1E8);Y.kambient=this.ambientLight;Y.kdiffuse=this.diffuseLight;Y.kspecular=this.specularLight;Y.roughness=this.roughness;Y.fresnel=this.fresnel;Y.opacity=this.opacity;Y.height=
0;Y.permutation=W;Y.vertexColor=this.vertexColor;ba=ca;B(ba,Y.view,Y.model);B(ba,Y.projection,ba);A(ba,ba);for(U=0;3>U;++U)Y.eyePosition[U]=ba[12+U]/ba[15];var ma=ba[15];for(U=0;3>U;++U)ma+=this.lightPosition[U]*ba[4*U+3];for(U=0;3>U;++U){var ia=ba[12+U];for(ja=0;3>ja;++ja)ia+=ba[4*ja+U]*this.lightPosition[ja];Y.lightPosition[U]=ia/ma}ba=m(Y,this);if(ba.showSurface){this._shader.bind();this._shader.uniforms=Y;this._vao.bind();this.showSurface&&this._vertexCount&&this._vao.draw(ha.TRIANGLES,this._vertexCount);
for(U=0;3>U;++U)this.surfaceProject[U]&&this.vertexCount&&(this._shader.uniforms.model=ba.projections[U],this._shader.uniforms.clipBounds=ba.clipBounds[U],this._vao.draw(ha.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ba.showContour){ma=this._contourShader;Y.kambient=1;Y.kdiffuse=0;Y.kspecular=0;Y.opacity=1;ma.bind();ma.uniforms=Y;ia=this._contourVAO;ia.bind();for(U=0;3>U;++U)for(ma.uniforms.permutation=L[U],ha.lineWidth(this.contourWidth[U]*this.pixelRatio),ja=0;ja<this.contourLevels[U].length;++ja){if(ja===
this.highlightLevel[U])ma.uniforms.contourColor=this.highlightColor[U],ma.uniforms.contourTint=this.highlightTint[U];else if(0===ja||ja-1===this.highlightLevel[U])ma.uniforms.contourColor=this.contourColor[U],ma.uniforms.contourTint=this.contourTint[U];this._contourCounts[U][ja]&&(ma.uniforms.height=this.contourLevels[U][ja],ia.draw(ha.LINES,this._contourCounts[U][ja],this._contourOffsets[U][ja]))}for(U=0;3>U;++U)for(ma.uniforms.model=ba.projections[U],ma.uniforms.clipBounds=ba.clipBounds[U],ja=0;3>
ja;++ja)if(this.contourProject[U][ja]){ma.uniforms.permutation=L[ja];ha.lineWidth(this.contourWidth[ja]*this.pixelRatio);for(var oa=0;oa<this.contourLevels[ja].length;++oa){if(oa===this.highlightLevel[ja])ma.uniforms.contourColor=this.highlightColor[ja],ma.uniforms.contourTint=this.highlightTint[ja];else if(0===oa||oa-1===this.highlightLevel[ja])ma.uniforms.contourColor=this.contourColor[ja],ma.uniforms.contourTint=this.contourTint[ja];this._contourCounts[ja][oa]&&(ma.uniforms.height=this.contourLevels[ja][oa],
ia.draw(ha.LINES,this._contourCounts[ja][oa],this._contourOffsets[ja][oa]))}}ia.unbind();ia=this._dynamicVAO;ia.bind();for(U=0;3>U;++U)if(0!==this._dynamicCounts[U])for(ma.uniforms.model=Y.model,ma.uniforms.clipBounds=Y.clipBounds,ma.uniforms.permutation=L[U],ha.lineWidth(this.dynamicWidth[U]*this.pixelRatio),ma.uniforms.contourColor=this.dynamicColor[U],ma.uniforms.contourTint=this.dynamicTint[U],ma.uniforms.height=this.dynamicLevel[U],ia.draw(ha.LINES,this._dynamicCounts[U],this._dynamicOffsets[U]),
ja=0;3>ja;++ja)this.contourProject[ja][U]&&(ma.uniforms.model=ba.projections[ja],ma.uniforms.clipBounds=ba.clipBounds[ja],ia.draw(ha.LINES,this._dynamicCounts[U],this._dynamicOffsets[U]));ia.unbind()}}function g(U,ha){return Array.isArray(U)?[ha(U[0]),ha(U[1]),ha(U[2])]:[ha(U),ha(U),ha(U)]}function h(U){return Array.isArray(U)?3===U.length?[U[0],U[1],U[2],1]:[U[0],U[1],U[2],U[3]]:[0,0,0,1]}function r(U){if(Array.isArray(U)){if(Array.isArray(U))return[h(U[0]),h(U[1]),h(U[2])];U=h(U);return[U.slice(),
U.slice(),U.slice()]}}N.exports=function(U){var ha=U.gl,Y=v(ha),ba=F(ha),ja=y(ha),ma=J(ha),ia=c(ha),oa=d(ha,[{buffer:ia,size:4,stride:K,offset:0},{buffer:ia,size:3,stride:K,offset:16},{buffer:ia,size:3,stride:K,offset:28}]),xa=c(ha),ra=d(ha,[{buffer:xa,size:4,stride:20,offset:0},{buffer:xa,size:1,stride:20,offset:16}]),la=c(ha),ka=d(ha,[{buffer:la,size:2,type:ha.FLOAT}]),na=e(ha,1,H,ha.RGBA,ha.UNSIGNED_BYTE);na.minFilter=ha.LINEAR;na.magFilter=ha.LINEAR;ha=new n(ha,[0,0],[[0,0,0],[0,0,0]],Y,ba,ia,
oa,na,ja,ma,xa,ra,la,ka,[0,0,0]);Y={levels:[[],[],[]]};for(var qa in U)Y[qa]=U[qa];Y.colormap=Y.colormap||"jet";ha.update(Y);return ha};var l=b("bit-twiddle"),c=b("gl-buffer"),d=b("gl-vao"),e=b("gl-texture2d"),f=b("typedarray-pool"),q=b("colormap"),t=b("ndarray-ops"),w=b("ndarray-pack"),x=b("ndarray"),z=b("surface-nets"),B=b("gl-mat4/multiply"),A=b("gl-mat4/invert"),D=b("binary-search-bounds"),C=b("ndarray-gradient");b=b("./lib/shaders");var v=b.createShader,y=b.createContourShader,F=b.createPickShader,
J=b.createPickContourShader,K=40,O=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],I=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],L=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];(function(){for(var U=0;3>U;++U){var ha=L[U],Y=(U+2)%3;ha[(U+1)%3]=1;ha[Y+3]=1;ha[U+6]=1}})();var H=256;b=n.prototype;b.genColormap=function(U,ha){var Y=!1;U=w([q({colormap:U,nshades:H,format:"rgba"}).map(function(ba,ja){ja=ha?k(ja/255,ha):ba[3];1>ja&&(Y=!0);return[ba[0],ba[1],ba[2],255*ja]})]);t.divseq(U,255);this.hasAlphaScale=
Y;return U};b.isTransparent=function(){return 1>this.opacity||this.hasAlphaScale};b.isOpaque=function(){return!this.isTransparent()};b.pickSlots=1;b.setPickBase=function(U){this.pickId=U};var M=[0,0,0],Q={showSurface:!1,showContour:!1,projections:[O.slice(),O.slice(),O.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]},Z={model:O,view:O,projection:O,inverseModel:O.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,
contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1E-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1E3,1E3,1E3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},ca=O.slice(),W=[1,0,0,0,1,0,0,0,1];b.draw=function(U){return a.call(this,U,!1)};b.drawTransparent=function(U){return a.call(this,U,!0)};var T={model:O,view:O,projection:O,inverseModel:O,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],
zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};b.drawPick=function(U){U=U||{};var ha=this.gl;ha.disable(ha.CULL_FACE);T.model=U.model||O;T.view=U.view||O;T.projection=U.projection||O;T.shape=this._field[2].shape;T.pickId=this.pickId/255;T.lowerBound=this.bounds[0];T.upperBound=this.bounds[1];T.objectOffset=this.objectOffset;T.permutation=W;for(U=0;2>U;++U)for(var Y=T.clipBounds[U],ba=0;3>ba;++ba)Y[ba]=Math.min(Math.max(this.clipBounds[U][ba],
-1E8),1E8);Y=m(T,this);if(Y.showSurface){this._pickShader.bind();this._pickShader.uniforms=T;this._vao.bind();this._vao.draw(ha.TRIANGLES,this._vertexCount);for(U=0;3>U;++U)this.surfaceProject[U]&&(this._pickShader.uniforms.model=Y.projections[U],this._pickShader.uniforms.clipBounds=Y.clipBounds[U],this._vao.draw(ha.TRIANGLES,this._vertexCount));this._vao.unbind()}if(Y.showContour){var ja=this._contourPickShader;ja.bind();ja.uniforms=T;var ma=this._contourVAO;ma.bind();for(ba=0;3>ba;++ba)for(ha.lineWidth(this.contourWidth[ba]*
this.pixelRatio),ja.uniforms.permutation=L[ba],U=0;U<this.contourLevels[ba].length;++U)this._contourCounts[ba][U]&&(ja.uniforms.height=this.contourLevels[ba][U],ma.draw(ha.LINES,this._contourCounts[ba][U],this._contourOffsets[ba][U]));for(U=0;3>U;++U)for(ja.uniforms.model=Y.projections[U],ja.uniforms.clipBounds=Y.clipBounds[U],ba=0;3>ba;++ba)if(this.contourProject[U][ba]){ja.uniforms.permutation=L[ba];ha.lineWidth(this.contourWidth[ba]*this.pixelRatio);for(var ia=0;ia<this.contourLevels[ba].length;++ia)this._contourCounts[ba][ia]&&
(ja.uniforms.height=this.contourLevels[ba][ia],ma.draw(ha.LINES,this._contourCounts[ba][ia],this._contourOffsets[ba][ia]))}ma.unbind()}};b.pick=function(U){if(!U||U.id!==this.pickId)return null;var ha=this._field[2].shape,Y=this._pickResult,ba=ha[0]*(U.value[0]+(U.value[2]>>4)/16)/255,ja=Math.floor(ba),ma=ba-ja;U=ha[1]*(U.value[1]+(U.value[2]&15)/16)/255;var ia=Math.floor(U),oa=U-ia;ja+=1;ia+=1;for(var xa=Y.position,ra=xa[0]=xa[1]=xa[2]=0;2>ra;++ra)for(var la=ra?ma:1-ma,ka=0;2>ka;++ka)for(var na=
ja+ra,qa=ia+ka,ta=la*(ka?oa:1-oa),za=0;3>za;++za)xa[za]+=this._field[za].get(na,qa)*ta;ra=this._pickResult.level;for(la=0;3>la;++la)ra[la]=D.le(this.contourLevels[la],xa[la]),0>ra[la]?0<this.contourLevels[la].length&&(ra[la]=0):ra[la]<this.contourLevels[la].length-1&&Math.abs(this.contourLevels[la][ra[la]]-xa[la])>Math.abs(this.contourLevels[la][ra[la]+1]-xa[la])&&(ra[la]+=1);Y.index[0]=.5>ma?ja:ja+1;Y.index[1]=.5>oa?ia:ia+1;Y.uv[0]=ba/ha[0];Y.uv[1]=U/ha[1];for(za=0;3>za;++za)Y.dataCoordinate[za]=
this._field[za].get(Y.index[0],Y.index[1]);return Y};b.padField=function(U,ha){var Y=ha.shape.slice(),ba=U.shape.slice();t.assign(U.lo(1,1).hi(Y[0],Y[1]),ha);t.assign(U.lo(1).hi(Y[0],1),ha.hi(Y[0],1));t.assign(U.lo(1,ba[1]-1).hi(Y[0],1),ha.lo(0,Y[1]-1).hi(Y[0],1));t.assign(U.lo(0,1).hi(1,Y[1]),ha.hi(1));t.assign(U.lo(ba[0]-1,1).hi(1,Y[1]),ha.lo(Y[0]-1));U.set(0,0,ha.get(0,0));U.set(0,ba[1]-1,ha.get(0,Y[1]-1));U.set(ba[0]-1,0,ha.get(Y[0]-1,0));U.set(ba[0]-1,ba[1]-1,ha.get(Y[0]-1,Y[1]-1))};b.update=
function(U){U=U||{};this.objectOffset=U.objectOffset||this.objectOffset;this.dirty=!0;"contourWidth"in U&&(this.contourWidth=g(U.contourWidth,Number));"showContour"in U&&(this.showContour=g(U.showContour,Boolean));"showSurface"in U&&(this.showSurface=!!U.showSurface);"contourTint"in U&&(this.contourTint=g(U.contourTint,Boolean));"contourColor"in U&&(this.contourColor=r(U.contourColor));"contourProject"in U&&(this.contourProject=g(U.contourProject,function(Ab){return g(Ab,Boolean)}));"surfaceProject"in
U&&(this.surfaceProject=U.surfaceProject);"dynamicColor"in U&&(this.dynamicColor=r(U.dynamicColor));"dynamicTint"in U&&(this.dynamicTint=g(U.dynamicTint,Number));"dynamicWidth"in U&&(this.dynamicWidth=g(U.dynamicWidth,Number));"opacity"in U&&(this.opacity=U.opacity);"opacityscale"in U&&(this.opacityscale=U.opacityscale);"colorBounds"in U&&(this.colorBounds=U.colorBounds);"vertexColor"in U&&(this.vertexColor=U.vertexColor?1:0);"colormap"in U&&this._colorMap.setPixels(this.genColormap(U.colormap,this.opacityscale));
var ha=U.field||U.coords&&U.coords[2]||null,Y=!1;ha||(ha=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0));if("field"in U||"coords"in U){var ba=(ha.shape[0]+2)*(ha.shape[1]+2);ba>this._field[2].data.length&&(f.freeFloat(this._field[2].data),this._field[2].data=f.mallocFloat(l.nextPow2(ba)));this._field[2]=x(this._field[2].data,[ha.shape[0]+2,ha.shape[1]+2]);this.padField(this._field[2],ha);ba=this.shape=
ha.shape.slice();for(ha=0;2>ha;++ha)this._field[2].size>this._field[ha].data.length&&(f.freeFloat(this._field[ha].data),this._field[ha].data=f.mallocFloat(this._field[2].size)),this._field[ha]=x(this._field[ha].data,[ba[0]+2,ba[1]+2]);if(U.coords){var ja=U.coords;if(!Array.isArray(ja)||3!==ja.length)throw Error("gl-surface: invalid coordinates for x/y");for(ha=0;2>ha;++ha){var ma=ja[ha];for(ia=0;2>ia;++ia)if(ma.shape[ia]!==ba[ia])throw Error("gl-surface: coords have incorrect shape");this.padField(this._field[ha],
ma)}}else if(U.ticks){ia=U.ticks;if(!Array.isArray(ia)||2!==ia.length)throw Error("gl-surface: invalid ticks");for(ha=0;2>ha;++ha){ja=ia[ha];if(Array.isArray(ja)||ja.length)ja=x(ja);if(ja.shape[0]!==ba[ha])throw Error("gl-surface: invalid tick length");ma=x(ja.data,ba);ma.stride[ha]=ja.stride[0];ma.stride[ha^1]=0;this.padField(this._field[ha],ma)}}else{for(ha=0;2>ha;++ha)ia=[0,0],ia[ha]=1,this._field[ha]=x(this._field[ha].data,[ba[0]+2,ba[1]+2],ia,0);this._field[0].set(0,0,0);for(var ia=0;ia<ba[0];++ia)this._field[0].set(ia+
1,0,ia);this._field[0].set(ba[0]+1,0,ba[0]-1);this._field[1].set(0,0,0);for(ia=0;ia<ba[1];++ia)this._field[1].set(0,ia+1,ia);this._field[1].set(0,ba[1]+1,ba[1]-1)}ia=this._field;ja=x(f.mallocFloat(6*ia[2].size),[3,ba[0]+2,ba[1]+2,2]);for(ha=0;3>ha;++ha)C(ja.pick(ha),ia[ha],"mirror");var oa=x(f.mallocFloat(3*ia[2].size),[ba[0]+2,ba[1]+2,3]);for(ha=0;ha<ba[0]+2;++ha)for(ia=0;ia<ba[1]+2;++ia){ma=ja.get(0,ha,ia,0);var xa=ja.get(0,ha,ia,1),ra=ja.get(1,ha,ia,0),la=ja.get(1,ha,ia,1),ka=ja.get(2,ha,ia,0),
na=ja.get(2,ha,ia,1),qa=ra*na-la*ka;ka=ka*xa-na*ma;na=ma*la-xa*ra;ma=Math.sqrt(qa*qa+ka*ka+na*na);1E-8>ma?(ma=Math.max(Math.abs(qa),Math.abs(ka),Math.abs(na)),1E-8>ma?(na=1,ka=qa=0,ma=1):ma=1/ma):ma=1/Math.sqrt(ma);oa.set(ha,ia,0,qa*ma);oa.set(ha,ia,1,ka*ma);oa.set(ha,ia,2,na*ma)}f.free(ja.data);var ta=[Infinity,Infinity,Infinity],za=[-Infinity,-Infinity,-Infinity],Ia=Infinity,Xa=-Infinity,$a=f.mallocFloat(l.nextPow2((ba[0]-1)*(ba[1]-1)*60)),gb=0;for(ha=ja=0;ha<ba[0]-1;++ha)a:for(ia=0;ia<ba[1]-1;++ia){for(qa=
0;2>qa;++qa)for(ka=0;2>ka;++ka)for(ma=0;3>ma;++ma)if(xa=this._field[ma].get(1+ha+qa,1+ia+ka),isNaN(xa)||!isFinite(xa))continue a;for(ma=0;6>ma;++ma){ra=ha+I[ma][0];la=ia+I[ma][1];var sb=this._field[0].get(ra+1,la+1),jb=this._field[1].get(ra+1,la+1);xa=this._field[2].get(ra+1,la+1);qa=oa.get(ra+1,la+1,0);ka=oa.get(ra+1,la+1,1);na=oa.get(ra+1,la+1,2);U.intensity&&(vb=U.intensity.get(ra,la));var vb=U.intensity?U.intensity.get(ra,la):xa+this.objectOffset[2];$a[gb++]=ra;$a[gb++]=la;$a[gb++]=sb;$a[gb++]=
jb;$a[gb++]=xa;$a[gb++]=0;$a[gb++]=vb;$a[gb++]=qa;$a[gb++]=ka;$a[gb++]=na;ta[0]=Math.min(ta[0],sb+this.objectOffset[0]);ta[1]=Math.min(ta[1],jb+this.objectOffset[1]);ta[2]=Math.min(ta[2],xa+this.objectOffset[2]);Ia=Math.min(Ia,vb);za[0]=Math.max(za[0],sb+this.objectOffset[0]);za[1]=Math.max(za[1],jb+this.objectOffset[1]);za[2]=Math.max(za[2],xa+this.objectOffset[2]);Xa=Math.max(Xa,vb);ja+=1}}U.intensityBounds&&(Ia=+U.intensityBounds[0],Xa=+U.intensityBounds[1]);for(ha=6;ha<gb;ha+=10)$a[ha]=($a[ha]-
Ia)/(Xa-Ia);this._vertexCount=ja;this._coordinateBuffer.update($a.subarray(0,gb));f.freeFloat($a);f.free(oa.data);this.bounds=[ta,za];this.intensity=U.intensity||this._field[2];if(this.intensityBounds[0]!==Ia||this.intensityBounds[1]!==Xa)Y=!0;this.intensityBounds=[Ia,Xa]}if("levels"in U){ba=U.levels;ba=Array.isArray(ba[0])?ba.slice():[[],[],ba];for(ha=0;3>ha;++ha)ba[ha]=ba[ha].slice(),ba[ha].sort(function(Ab,Ma){return Ab-Ma});for(ha=0;3>ha;++ha)for(ia=0;ia<ba[ha].length;++ia)ba[ha][ia]-=this.objectOffset[ha];
ha=0;a:for(;3>ha;++ha){if(ba[ha].length!==this.contourLevels[ha].length){Y=!0;break}for(ia=0;ia<ba[ha].length;++ia)if(ba[ha][ia]!==this.contourLevels[ha][ia]){Y=!0;break a}}this.contourLevels=ba}if(Y){ia=this._field;ba=this.shape;Y=[];for(U=0;3>U;++U){oa=this.contourLevels[U];na=[];ta=[];za=[0,0,0];for(ha=0;ha<oa.length;++ha){Ia=z(this._field[U],oa[ha]);na.push(Y.length/5|0);ia=ja=0;a:for(;ia<Ia.cells.length;++ia)for(Xa=Ia.cells[ia],ma=0;2>ma;++ma){$a=Ia.positions[Xa[ma]];xa=$a[0];gb=Math.floor(xa)|
0;sb=xa-gb;xa=$a[1];jb=Math.floor(xa)|0;vb=xa-jb;var qb=!1,Bb=0;b:for(;3>Bb;++Bb){za[Bb]=0;var ub=(U+Bb+1)%3;for(qa=0;2>qa;++qa){var wb=qa?sb:1-sb;ra=Math.min(Math.max(gb+qa,0),ba[0])|0;for(ka=0;2>ka;++ka){var rb=ka?vb:1-vb;la=Math.min(Math.max(jb+ka,0),ba[1])|0;xa=2>Bb?this._field[ub].get(ra,la):(this.intensity.get(ra,la)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]);if(!isFinite(xa)||isNaN(xa)){qb=!0;break b}za[Bb]+=wb*rb*xa}}}if(qb){if(0<ma){for(ma=0;5>ma;++ma)Y.pop();
--ja}continue a}else Y.push(za[0],za[1],$a[0],$a[1],za[2]),ja+=1}ta.push(ja)}this._contourOffsets[U]=na;this._contourCounts[U]=ta}ba=f.mallocFloat(Y.length);for(ha=0;ha<Y.length;++ha)ba[ha]=Y[ha];this._contourBuffer.update(ba);f.freeFloat(ba)}};b.dispose=function(){this._shader.dispose();this._vao.dispose();this._coordinateBuffer.dispose();this._colorMap.dispose();this._contourBuffer.dispose();this._contourVAO.dispose();this._contourShader.dispose();this._contourPickShader.dispose();this._dynamicBuffer.dispose();
this._dynamicVAO.dispose();for(var U=0;3>U;++U)f.freeFloat(this._field[U].data)};b.highlight=function(U){var ha;if(U){for(ha=0;3>ha;++ha)this.highlightLevel[ha]=this.enableHighlight[ha]?U.level[ha]:-1;U=this.snapToData?U.dataCoordinate:U.position;for(ha=0;3>ha;++ha)U[ha]-=this.objectOffset[ha];if(this.enableDynamic[0]&&U[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&U[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&U[2]!==this.dynamicLevel[2]){for(var Y=0,ba=this.shape,ja=f.mallocFloat(12*ba[0]*
ba[1]),ma=0;3>ma;++ma)if(this.enableDynamic[ma]){this.dynamicLevel[ma]=U[ma];var ia=this._field[(ma+1)%3],oa=this._field[(ma+2)%3];ha=z(this._field[ma],U[ma]);var xa=ha.cells,ra=ha.positions;this._dynamicOffsets[ma]=Y;for(ha=0;ha<xa.length;++ha)for(var la=xa[ha],ka=0;2>ka;++ka){var na=ra[la[ka]],qa=+na[0],ta=qa|0,za=Math.min(ta+1,ba[0])|0,Ia=qa-ta,Xa=1-Ia,$a=+na[1];na=$a|0;qa=Math.min(na+1,ba[1])|0;var gb=$a-na,sb=1-gb;$a=Xa*sb;Xa*=gb;sb*=Ia;gb*=Ia;Ia=$a*ia.get(ta,na)+Xa*ia.get(ta,qa)+sb*ia.get(za,
na)+gb*ia.get(za,qa);ta=$a*oa.get(ta,na)+Xa*oa.get(ta,qa)+sb*oa.get(za,na)+gb*oa.get(za,qa);if(isNaN(Ia)||isNaN(ta)){ka&&--Y;break}ja[2*Y]=Ia;ja[2*Y+1]=ta;Y+=1}this._dynamicCounts[ma]=Y-this._dynamicOffsets[ma]}else this.dynamicLevel[ma]=NaN,this._dynamicCounts[ma]=0;this._dynamicBuffer.update(ja.subarray(0,2*Y));f.freeFloat(ja)}}else this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],this.highlightLevel=[-1,-1,-1]}},{"./lib/shaders":353,"binary-search-bounds":103,"bit-twiddle":104,colormap:137,
"gl-buffer":267,"gl-mat4/invert":299,"gl-mat4/multiply":301,"gl-texture2d":356,"gl-vao":361,ndarray:483,"ndarray-gradient":476,"ndarray-ops":478,"ndarray-pack":479,"surface-nets":591,"typedarray-pool":617}],355:[function(b,N,G){var p=b("css-font"),n=b("pick-by-alias"),k=b("regl"),m=b("gl-util/context");G=b("es6-weak-map");var a=b("color-normalize"),g=b("font-atlas"),h=b("typedarray-pool"),r=b("parse-rect"),l=b("is-plain-obj"),c=b("parse-unit"),d=b("to-px"),e=b("detect-kerning"),f=b("object-assign"),
q=b("font-measure"),t=b("flatten-vertex-data"),w=b("bit-twiddle").nextPow2,x=new G,z=!1;document.body&&(b=document.body.appendChild(document.createElement("div")),b.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(b).fontStretch&&(z=!0),document.body.removeChild(b));var B=function(A){"function"===typeof A&&A._gl&&A.prop&&A.texture&&A.buffer?(A={regl:A},this.gl=A.regl._gl):this.gl=m(A);this.regl=(this.shader=x.get(this.gl))?this.shader.regl:A.regl||k({gl:this.gl});this.charBuffer=
this.regl.buffer({type:"uint8",usage:"stream"});this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"});this.shader||(this.shader=this.createShader(),x.set(this.gl,this.shader));this.batch=[];this.fontSize=[];this.font=[];this.fontAtlas=[];this.draw=this.shader.draw.bind(this);this.render=function(){this.regl._refresh();this.draw(this.batch)};this.canvas=this.gl.canvas;this.update(l(A)?A:{})};B.prototype.createShader=function(){var A=this.regl,D=A({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",
dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:A.prop("count"),offset:A.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:A.this("sizeBuffer")},width:{offset:0,stride:8,buffer:A.this("sizeBuffer")},char:A.this("charBuffer"),position:A.this("position")},uniforms:{atlasSize:function(C,v){return[v.atlas.width,v.atlas.height]},atlasDim:function(C,v){return[v.atlas.cols,v.atlas.rows]},atlas:function(C,v){return v.atlas.texture},
charStep:function(C,v){return v.atlas.step},em:function(C,v){return v.atlas.em},color:A.prop("color"),opacity:A.prop("opacity"),viewport:A.this("viewportArray"),scale:A.this("scale"),align:A.prop("align"),baseline:A.prop("baseline"),translate:A.this("translate"),positionOffset:A.prop("positionOffset")},primitive:"points",viewport:A.this("viewport"),vert:"\n\t\t\tprecision highp float;\n\t\t\tattribute float width, charOffset, char;\n\t\t\tattribute vec2 position;\n\t\t\tuniform float fontSize, charStep, em, align, baseline;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform vec4 color;\n\t\t\tuniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvoid main () {\n\t\t\t\t"+
(B.normalViewport?"":"vec2 positionOffset \x3d vec2(positionOffset.x,- positionOffset.y);")+"\n\n\t\t\t\tvec2 offset \x3d floor(em * (vec2(align + charOffset, baseline)\n\t\t\t\t\t+ positionOffset))\n\t\t\t\t\t/ (viewport.zw * scale.xy);\n\n\t\t\t\tvec2 position \x3d (position + translate) * scale;\n\t\t\t\tposition +\x3d offset * scale;\n\n\t\t\t\t"+(B.normalViewport?"position.y \x3d 1. - position.y;":"")+"\n\n\t\t\t\tcharCoord \x3d position * viewport.zw + viewport.xy;\n\n\t\t\t\tgl_Position \x3d vec4(position * 2. - 1., 0, 1);\n\n\t\t\t\tgl_PointSize \x3d charStep;\n\n\t\t\t\tcharId.x \x3d mod(char, atlasDim.x);\n\t\t\t\tcharId.y \x3d floor(char / atlasDim.x);\n\n\t\t\t\tcharWidth \x3d width * em;\n\n\t\t\t\tfontColor \x3d color / 255.;\n\t\t\t}",
frag:"\n\t\t\tprecision highp float;\n\t\t\tuniform sampler2D atlas;\n\t\t\tuniform float fontSize, charStep, opacity;\n\t\t\tuniform vec2 atlasSize;\n\t\t\tuniform vec4 viewport;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\n\t\t\tfloat lightness(vec4 color) {\n\t\t\t\treturn color.r * 0.299 + color.g * 0.587 + color.b * 0.114;\n\t\t\t}\n\n\t\t\tvoid main () {\n\t\t\t\tvec2 uv \x3d gl_FragCoord.xy - charCoord + charStep * .5;\n\t\t\t\tfloat halfCharStep \x3d floor(charStep * .5 + .5);\n\n\t\t\t\t// invert y and shift by 1px (FF expecially needs that)\n\t\t\t\tuv.y \x3d charStep - uv.y;\n\n\t\t\t\t// ignore points outside of character bounding box\n\t\t\t\tfloat halfCharWidth \x3d ceil(charWidth * .5);\n\t\t\t\tif (floor(uv.x) \x3e halfCharStep + halfCharWidth ||\n\t\t\t\t\tfloor(uv.x) \x3c halfCharStep - halfCharWidth) return;\n\n\t\t\t\tuv +\x3d charId * charStep;\n\t\t\t\tuv \x3d uv / atlasSize;\n\n\t\t\t\tvec4 color \x3d fontColor;\n\t\t\t\tvec4 mask \x3d texture2D(atlas, uv);\n\n\t\t\t\tfloat maskY \x3d lightness(mask);\n\t\t\t\t// float colorY \x3d lightness(color);\n\t\t\t\tcolor.a *\x3d maskY;\n\t\t\t\tcolor.a *\x3d opacity;\n\n\t\t\t\t// color.a +\x3d .1;\n\n\t\t\t\t// antialiasing, see yiq color space y-channel formula\n\t\t\t\t// color.rgb +\x3d (1. - color.rgb) * (1. - mask.rgb);\n\n\t\t\t\tgl_FragColor \x3d color;\n\t\t\t}"});
return{regl:A,draw:D,atlas:{}}};B.prototype.update=function(A){var D=this;if("string"===typeof A)A={text:A};else if(!A)return;A=n(A,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",
kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0);null!=A.opacity&&(Array.isArray(A.opacity)?this.opacity=A.opacity.map(function(W){return parseFloat(W)}):this.opacity=parseFloat(A.opacity));null!=A.viewport&&(this.viewport=r(A.viewport),B.normalViewport&&(this.viewport.y=this.canvas.height-this.viewport.y-this.viewport.height),
this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]);null==this.viewport&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]);null!=A.kerning&&(this.kerning=A.kerning);null!=A.offset&&("number"===typeof A.offset&&(A.offset=[A.offset,0]),this.positionOffset=t(A.offset));A.direction&&(this.direction=A.direction);A.range&&(this.range=
A.range,this.scale=[1/(A.range[2]-A.range[0]),1/(A.range[3]-A.range[1])],this.translate=[-A.range[0],-A.range[1]]);A.scale&&(this.scale=A.scale);A.translate&&(this.translate=A.translate);this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]);this.translate||(this.translate=[0,0]);this.font.length||A.font||(A.font=B.baseFontSize+"px sans-serif");var C=!1,v=!1;A.font&&(Array.isArray(A.font)?A.font:[A.font]).forEach(function(W,T){if("string"===typeof W)try{W=p.parse(W)}catch(ba){W=p.parse(B.baseFontSize+
"px "+W)}else W=p.parse(p.stringify(W));var U=p.stringify({size:B.baseFontSize,family:W.family,stretch:z?W.stretch:void 0,variant:W.variant,weight:W.weight,style:W.style}),ha=c(W.size);ha=Math.round(ha[0]*d(ha[1]));ha!==D.fontSize[T]&&(v=!0,D.fontSize[T]=ha);if(!D.font[T]||U!=D.font[T].baseString)if(C=!0,D.font[T]=B.fonts[U],!D.font[T]){ha=W.family.join(", ");var Y=[W.style];W.style!=W.variant&&Y.push(W.variant);W.variant!=W.weight&&Y.push(W.weight);z&&W.weight!=W.stretch&&Y.push(W.stretch);D.font[T]=
{baseString:U,family:ha,weight:W.weight,stretch:W.stretch,style:W.style,variant:W.variant,width:{},kerning:{},metrics:q(ha,{origin:"top",fontSize:B.baseFontSize,fontStyle:Y.join(" ")})};B.fonts[U]=D.font[T]}});(C||v)&&this.font.forEach(function(W,T){var U=p.stringify({size:D.fontSize[T],family:W.family,stretch:z?W.stretch:void 0,variant:W.variant,weight:W.weight,style:W.style});D.fontAtlas[T]=D.shader.atlas[U];D.fontAtlas[T]||(D.shader.atlas[U]=D.fontAtlas[T]={fontString:U,step:2*Math.ceil(D.fontSize[T]*
W.metrics.bottom*.5),em:D.fontSize[T],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:D.regl.texture()});null==A.text&&(A.text=D.text)});if("string"===typeof A.text&&A.position&&2<A.position.length){for(var y=Array(.5*A.position.length),F=0;F<y.length;F++)y[F]=A.text;A.text=y}if(null!=A.text||C){this.textOffsets=[0];if(Array.isArray(A.text)){this.count=A.text[0].length;this.counts=[this.count];for(y=1;y<A.text.length;y++)this.textOffsets[y]=this.textOffsets[y-1]+A.text[y-1].length,this.count+=
A.text[y].length,this.counts.push(A.text[y].length);this.text=A.text.join("")}else this.text=A.text,this.count=this.text.length,this.counts=[this.count];var J=[];this.font.forEach(function(W,T){B.atlasContext.font=W.baseString;T=D.fontAtlas[T];for(var U=0;U<D.text.length;U++){var ha=D.text.charAt(U);null==T.ids[ha]&&(T.ids[ha]=T.chars.length,T.chars.push(ha),J.push(ha));if(null==W.width[ha]&&(W.width[ha]=B.atlasContext.measureText(ha).width/B.baseFontSize,D.kerning)){var Y=[],ba;for(ba in W.width)Y.push(ba+
ha,ha+ba);f(W.kerning,e(W.family,{pairs:Y}))}}})}if(A.position)if(2<A.position.length){y=!A.position[0].length;F=h.mallocFloat(2*this.count);for(var K=0,O=0;K<this.counts.length;K++){var I=this.counts[K];if(y)for(var L=0;L<I;L++)F[O++]=A.position[2*K],F[O++]=A.position[2*K+1];else for(L=0;L<I;L++)F[O++]=A.position[K][0],F[O++]=A.position[K][1]}this.position.call?this.position({type:"float",data:F}):this.position=this.regl.buffer({type:"float",data:F});h.freeFloat(F)}else this.position.destroy&&this.position.destroy(),
this.position={constant:A.position};if(A.text||C){y=h.mallocUint8(this.count);F=h.mallocFloat(2*this.count);this.textWidth=[];for(O=K=0;K<this.counts.length;K++){I=this.counts[K];L=this.font[K]||this.font[0];for(var H=this.fontAtlas[K]||this.fontAtlas[0],M=0;M<I;M++){var Q=this.text.charAt(O),Z=this.text.charAt(O-1);y[O]=H.ids[Q];F[2*O]=L.width[Q];if(M){var ca=F[2*O-1]+.5*F[2*O-2]+.5*F[2*O];this.kerning&&(Q=L.kerning[Z+Q])&&(ca+=.001*Q);F[2*O+1]=ca}else F[2*O+1]=.5*F[2*O];O++}this.textWidth.push(F.length?
.5*F[2*O-2]+F[2*O-1]:0)}A.align||(A.align=this.align);this.charBuffer({data:y,type:"uint8",usage:"stream"});this.sizeBuffer({data:F,type:"float",usage:"stream"});h.freeUint8(y);h.freeFloat(F);J.length&&this.font.forEach(function(W,T){W=D.fontAtlas[T];T=W.step;var U=Math.min(Math.floor(B.maxAtlasSize/T),W.chars.length),ha=Math.ceil(W.chars.length/U),Y=w(U*T),ba=w(ha*T);W.width=Y;W.height=ba;W.rows=ha;W.cols=U;W.em&&W.texture({data:g({canvas:B.atlasCanvas,font:W.fontString,chars:W.chars,shape:[Y,ba],
step:[T,T]})})})}A.align&&(this.align=A.align,this.alignOffset=this.textWidth.map(function(W,T){T=Array.isArray(D.align)?1<D.align.length?D.align[T]:D.align[0]:D.align;if("number"===typeof T)return T;switch(T){case "right":case "end":return-W;case "center":case "centre":case "middle":return.5*-W}return 0}));null==this.baseline&&null==A.baseline&&(A.baseline=0);null!=A.baseline&&(this.baseline=A.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(W,
T){T=(D.font[T]||D.font[0]).metrics;var U=.5*T.bottom;U="number"===typeof W?U+(W-T.baseline):U+-T[W];B.normalViewport||(U*=-1);return U}));if(null!=A.color)if(A.color||(A.color="transparent"),"string"!==typeof A.color&&isNaN(A.color)){if("number"===typeof A.color[0]&&A.color.length>this.counts.length)for(F=A.color.length,y=h.mallocUint8(F),K=(A.color.subarray||A.color.slice).bind(A.color),O=0;O<F;O+=4)y.set(a(K(O,O+4),"uint8"),O);else for(F=A.color.length,y=h.mallocUint8(4*F),K=0;K<F;K++)y.set(a(A.color[K]||
0,"uint8"),4*K);this.color=y}else this.color=a(A.color,"uint8");if(A.position||A.text||A.color||A.baseline||A.align||A.font||A.offset||A.opacity)if(4<this.color.length||1<this.baselineOffset.length||this.align&&1<this.align.length||1<this.fontAtlas.length||2<this.positionOffset.length)for(this.batch=Array(Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0)),
y=0;y<this.batch.length;y++)this.batch[y]={count:1<this.counts.length?this.counts[y]:this.counts[0],offset:1<this.textOffsets.length?this.textOffsets[y]:this.textOffsets[0],color:this.color?4>=this.color.length?this.color:this.color.subarray(4*y,4*y+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[y]:this.opacity,baseline:null!=this.baselineOffset[y]?this.baselineOffset[y]:this.baselineOffset[0],align:this.align?null!=this.alignOffset[y]?this.alignOffset[y]:this.alignOffset[0]:0,atlas:this.fontAtlas[y]||
this.fontAtlas[0],positionOffset:2<this.positionOffset.length?this.positionOffset.subarray(2*y,2*y+2):this.positionOffset};else this.batch=this.count?[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:[]};B.prototype.destroy=function(){};B.prototype.kerning=!0;B.prototype.position={constant:new Float32Array(2)};
B.prototype.translate=null;B.prototype.scale=null;B.prototype.font=null;B.prototype.text="";B.prototype.positionOffset=[0,0];B.prototype.opacity=1;B.prototype.color=new Uint8Array([0,0,0,255]);B.prototype.alignOffset=[0,0];B.normalViewport=!1;B.maxAtlasSize=1024;B.atlasCanvas=document.createElement("canvas");B.atlasContext=B.atlasCanvas.getContext("2d",{alpha:!1});B.baseFontSize=64;B.fonts={};N.exports=B},{"bit-twiddle":104,"color-normalize":131,"css-font":150,"detect-kerning":181,"es6-weak-map":241,
"flatten-vertex-data":252,"font-atlas":253,"font-measure":254,"gl-util/context":357,"is-plain-obj":457,"object-assign":487,"parse-rect":492,"parse-unit":494,"pick-by-alias":498,regl:540,"to-px":600,"typedarray-pool":617}],356:[function(b,N,G){function p(f){return"undefined"!=typeof HTMLCanvasElement&&f instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&f instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&f instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&
f instanceof ImageData}function n(f,q,t){var w=f.gl,x=w.getParameter(w.MAX_TEXTURE_SIZE);if(0>q||q>x||0>t||t>x)throw Error("gl-texture2d: Invalid texture size");f._shape=[q,t];f.bind();w.texImage2D(w.TEXTURE_2D,0,f.format,q,t,0,f.format,f.type,null);f._mipLevels=[0];return f}function k(f,q,t,w,x,z){this.gl=f;this.handle=q;this.format=x;this.type=z;this._shape=[t,w];this._mipLevels=[0];this._minFilter=this._magFilter=f.NEAREST;this._wrapT=this._wrapS=f.CLAMP_TO_EDGE;this._anisoSamples=1;var B=this;
f=[this._wrapS,this._wrapT];Object.defineProperties(f,[{get:function(){return B._wrapS},set:function(A){return B.wrapS=A}},{get:function(){return B._wrapT},set:function(A){return B.wrapT=A}}]);this._wrapVector=f;f=[this._shape[0],this._shape[1]];Object.defineProperties(f,[{get:function(){return B._shape[0]},set:function(A){return B.width=A}},{get:function(){return B._shape[1]},set:function(A){return B.height=A}}]);this._shapeVector=f}function m(f,q){return 3===f.length?1===q[2]&&q[1]===f[0]*f[2]&&
q[0]===f[2]:1===q[0]&&q[1]===f[0]}function a(f){var q=f.createTexture();f.bindTexture(f.TEXTURE_2D,q);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE);return q}function g(f,q,t,w,x){var z=f.getParameter(f.MAX_TEXTURE_SIZE);if(0>q||q>z||0>t||t>z)throw Error("gl-texture2d: Invalid texture shape");if(x===
f.FLOAT&&!f.getExtension("OES_texture_float"))throw Error("gl-texture2d: Floating point textures not supported on this platform");z=a(f);f.texImage2D(f.TEXTURE_2D,0,w,q,t,0,w,x,null);return new k(f,z,q,t,w,x)}var h=b("ndarray"),r=b("ndarray-ops"),l=b("typedarray-pool");N.exports=function(f){if(1>=arguments.length)throw Error("gl-texture2d: Missing arguments for texture2d constructor");c||(c=[f.LINEAR,f.NEAREST_MIPMAP_LINEAR,f.LINEAR_MIPMAP_NEAREST,f.LINEAR_MIPMAP_NEAREST],d=[f.NEAREST,f.LINEAR,f.NEAREST_MIPMAP_NEAREST,
f.NEAREST_MIPMAP_LINEAR,f.LINEAR_MIPMAP_NEAREST,f.LINEAR_MIPMAP_LINEAR],e=[f.REPEAT,f.CLAMP_TO_EDGE,f.MIRRORED_REPEAT]);if("number"===typeof arguments[1])return g(f,arguments[1],arguments[2],arguments[3]||f.RGBA,arguments[4]||f.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return g(f,arguments[1][0]|0,arguments[1][1]|0,arguments[2]||f.RGBA,arguments[3]||f.UNSIGNED_BYTE);if("object"===typeof arguments[1]){var q=arguments[1],t=p(q)?q:q.raw;if(t){var w=q.width|0;q=q.height|0;var x=arguments[2]||f.RGBA,
z=arguments[3]||f.UNSIGNED_BYTE,B=a(f);f.texImage2D(f.TEXTURE_2D,0,x,x,z,t);return new k(f,B,w,q,x,z)}if(q.shape&&q.data&&q.stride){B=q;var A=B.dtype;t=B.shape.slice();q=f.getParameter(f.MAX_TEXTURE_SIZE);if(0>t[0]||t[0]>q||0>t[1]||t[1]>q)throw Error("gl-texture2d: Invalid texture size");q=m(t,B.stride.slice());"float32"===A?x=f.FLOAT:"float64"===A?(x=f.FLOAT,q=!1,A="float32"):"uint8"===A?x=f.UNSIGNED_BYTE:(x=f.UNSIGNED_BYTE,q=!1,A="uint8");if(2===t.length)z=f.LUMINANCE,t=[t[0],t[1],1],B=h(B.data,
t,[B.stride[0],B.stride[1],1],B.offset);else if(3===t.length)if(1===t[2])z=f.ALPHA;else if(2===t[2])z=f.LUMINANCE_ALPHA;else if(3===t[2])z=f.RGB;else if(4===t[2])z=f.RGBA;else throw Error("gl-texture2d: Invalid shape for pixel coords");else throw Error("gl-texture2d: Invalid shape for texture");x!==f.FLOAT||f.getExtension("OES_texture_float")||(x=f.UNSIGNED_BYTE,q=!1);var D=B.size;if(q)B=0===B.offset&&B.data.length===D?B.data:B.data.subarray(B.offset,B.offset+D);else{var C=[t[2],t[2]*t[0],1];w=l.malloc(D,
A);C=h(w,t,C,0);"float32"!==A&&"float64"!==A||x!==f.UNSIGNED_BYTE?r.assign(C,B):r.muls(C,B,255);B=w.subarray(0,D)}A=a(f);f.texImage2D(f.TEXTURE_2D,0,z,t[0],t[1],0,z,x,B);q||l.free(w);return new k(f,A,t[0],t[1],z,x)}}throw Error("gl-texture2d: Invalid arguments for texture2d constructor");};var c=null,d=null,e=null;b=k.prototype;Object.defineProperties(b,{minFilter:{get:function(){return this._minFilter},set:function(f){this.bind();var q=this.gl;this.type===q.FLOAT&&0<=c.indexOf(f)&&!q.getExtension("OES_texture_float_linear")&&
(f=q.NEAREST);if(0>d.indexOf(f))throw Error("gl-texture2d: Unknown filter mode "+f);q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,f);return this._minFilter=f}},magFilter:{get:function(){return this._magFilter},set:function(f){this.bind();var q=this.gl;this.type===q.FLOAT&&0<=c.indexOf(f)&&!q.getExtension("OES_texture_float_linear")&&(f=q.NEAREST);if(0>d.indexOf(f))throw Error("gl-texture2d: Unknown filter mode "+f);q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MAG_FILTER,f);return this._magFilter=f}},
mipSamples:{get:function(){return this._anisoSamples},set:function(f){var q=this._anisoSamples;this._anisoSamples=Math.max(f,1)|0;q!==this._anisoSamples&&(f=this.gl.getExtension("EXT_texture_filter_anisotropic"))&&this.gl.texParameterf(this.gl.TEXTURE_2D,f.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples);return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(f){this.bind();if(0>e.indexOf(f))throw Error("gl-texture2d: Unknown wrap mode "+f);this.gl.texParameteri(this.gl.TEXTURE_2D,
this.gl.TEXTURE_WRAP_S,f);return this._wrapS=f}},wrapT:{get:function(){return this._wrapT},set:function(f){this.bind();if(0>e.indexOf(f))throw Error("gl-texture2d: Unknown wrap mode "+f);this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,f);return this._wrapT=f}},wrap:{get:function(){return this._wrapVector},set:function(f){Array.isArray(f)||(f=[f,f]);if(2!==f.length)throw Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var q=0;2>q;++q)if(0>e.indexOf(f[q]))throw Error("gl-texture2d: Unknown wrap mode "+
f);this._wrapS=f[0];this._wrapT=f[1];q=this.gl;this.bind();q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_S,this._wrapS);q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_T,this._wrapT);return f}},shape:{get:function(){return this._shapeVector},set:function(f){if(!Array.isArray(f))f=[f|0,f|0];else if(2!==f.length)throw Error("gl-texture2d: Invalid texture shape");n(this,f[0]|0,f[1]|0);return[f[0]|0,f[1]|0]}},width:{get:function(){return this._shape[0]},set:function(f){f|=0;n(this,f,this._shape[1]);return f}},
height:{get:function(){return this._shape[1]},set:function(f){f|=0;n(this,this._shape[0],f);return f}}});b.bind=function(f){var q=this.gl;void 0!==f&&q.activeTexture(q.TEXTURE0+(f|0));q.bindTexture(q.TEXTURE_2D,this.handle);return void 0!==f?f|0:q.getParameter(q.ACTIVE_TEXTURE)-q.TEXTURE0};b.dispose=function(){this.gl.deleteTexture(this.handle)};b.generateMipmap=function(){this.bind();this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var f=Math.min(this._shape[0],this._shape[1]),q=0;0<f;++q,f>>>=1)0>
this._mipLevels.indexOf(q)&&this._mipLevels.push(q)};b.setPixels=function(f,q,t,w){var x=this.gl;this.bind();Array.isArray(q)?(w=t,t=q[1]|0,q=q[0]|0):(q=q||0,t=t||0);w=w||0;var z=p(f)?f:f.raw;if(z)0>this._mipLevels.indexOf(w)?(x.texImage2D(x.TEXTURE_2D,0,this.format,this.format,this.type,z),this._mipLevels.push(w)):x.texSubImage2D(x.TEXTURE_2D,w,q,t,this.format,this.type,z);else if(f.shape&&f.stride&&f.data){if(2>f.shape.length||q+f.shape[1]>this._shape[1]>>>w||t+f.shape[0]>this._shape[0]>>>w||0>
q||0>t)throw Error("gl-texture2d: Texture dimensions are out of bounds");z=this.format;var B=this.type,A=this._mipLevels,D=f.dtype,C=f.shape.slice();if(2>C.length||3<C.length)throw Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var v=m(C,f.stride.slice());"float32"===D?D=x.FLOAT:"float64"===D?(D=x.FLOAT,v=!1):"uint8"===D?D=x.UNSIGNED_BYTE:(D=x.UNSIGNED_BYTE,v=!1);if(2===C.length){var y=x.LUMINANCE;C=[C[0],C[1],1];f=h(f.data,C,[f.stride[0],f.stride[1],1],f.offset)}else if(3===C.length)if(1===
C[2])y=x.ALPHA;else if(2===C[2])y=x.LUMINANCE_ALPHA;else if(3===C[2])y=x.RGB;else if(4===C[2])y=x.RGBA;else throw Error("gl-texture2d: Invalid shape for pixel coords");else throw Error("gl-texture2d: Invalid shape for texture");y!==x.LUMINANCE&&y!==x.ALPHA||z!==x.LUMINANCE&&z!==x.ALPHA||(y=z);if(y!==z)throw Error("gl-texture2d: Incompatible texture format for setPixels");y=f.size;var F=0>A.indexOf(w);F&&A.push(w);D===B&&v?0===f.offset&&f.data.length===y?F?x.texImage2D(x.TEXTURE_2D,w,z,C[0],C[1],0,
z,B,f.data):x.texSubImage2D(x.TEXTURE_2D,w,q,t,C[0],C[1],z,B,f.data):F?x.texImage2D(x.TEXTURE_2D,w,z,C[0],C[1],0,z,B,f.data.subarray(f.offset,f.offset+y)):x.texSubImage2D(x.TEXTURE_2D,w,q,t,C[0],C[1],z,B,f.data.subarray(f.offset,f.offset+y)):(A=B===x.FLOAT?l.mallocFloat32(y):l.mallocUint8(y),v=h(A,C,[C[2],C[2]*C[0],1]),D===x.FLOAT&&B===x.UNSIGNED_BYTE?r.muls(v,f,255):r.assign(v,f),F?x.texImage2D(x.TEXTURE_2D,w,z,C[0],C[1],0,z,B,A.subarray(0,y)):x.texSubImage2D(x.TEXTURE_2D,w,q,t,C[0],C[1],z,B,A.subarray(0,
y)),B===x.FLOAT?l.freeFloat32(A):l.freeUint8(A))}else throw Error("gl-texture2d: Unsupported data type");}},{ndarray:483,"ndarray-ops":478,"typedarray-pool":617}],357:[function(b,N,G){(function(p){(function(){function n(g){if(g.container)if(g.container==document.body)document.body.style.width||(g.canvas.width=g.width||g.pixelRatio*p.innerWidth),document.body.style.height||(g.canvas.height=g.height||g.pixelRatio*p.innerHeight);else{var h=g.container.getBoundingClientRect();g.canvas.width=g.width||
h.right-h.left;g.canvas.height=g.height||h.bottom-h.top}}function k(g){return"function"===typeof g.getContext&&"width"in g&&"height"in g}function m(){var g=document.createElement("canvas");g.style.position="absolute";g.style.top=0;g.style.left=0;return g}var a=b("pick-by-alias");N.exports=function(g){g?"string"===typeof g&&(g={container:g}):g={};g=k(g)?{container:g}:"string"===typeof g.nodeName&&"function"===typeof g.appendChild&&"function"===typeof g.getBoundingClientRect?{container:g}:"function"===
typeof g.drawArrays||"function"===typeof g.drawElements?{gl:g}:a(g,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0);g.pixelRatio||(g.pixelRatio=p.pixelRatio||1);if(g.gl)return g.gl;g.canvas&&(g.container=g.canvas.parentNode);if(g.container){if("string"===typeof g.container){var h=
document.querySelector(g.container);if(!h)throw Error("Element "+g.container+" is not found");g.container=h}k(g.container)?(g.canvas=g.container,g.container=g.canvas.parentNode):g.canvas||(g.canvas=m(),g.container.appendChild(g.canvas),n(g))}else if(!g.canvas)if("undefined"!==typeof document)g.container=document.body||document.documentElement,g.canvas=m(),g.container.appendChild(g.canvas),n(g);else throw Error("Not DOM environment. Use headless-gl.");if(!g.gl)try{g.gl=g.canvas.getContext("webgl",
g.attrs)}catch(r){try{g.gl=g.canvas.getContext("experimental-webgl",g.attrs)}catch(l){g.gl=g.canvas.getContext("webgl-experimental",g.attrs)}}return g.gl}}).call(this)}).call(this,"undefined"!==typeof Re?Re:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"pick-by-alias":498}],358:[function(b,N,G){N.exports=function(p,n,k){n?n.bind():p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,null);n=p.getParameter(p.MAX_VERTEX_ATTRIBS)|0;if(k){if(k.length>n)throw Error("gl-vao: Too many vertex attributes");
for(var m=0;m<k.length;++m){var a=k[m];if(a.buffer){var g=a.size||4,h=a.type||p.FLOAT,r=!!a.normalized,l=a.stride||0,c=a.offset||0;a.buffer.bind();p.enableVertexAttribArray(m);p.vertexAttribPointer(m,g,h,r,l,c)}else{if("number"===typeof a)p.vertexAttrib1f(m,a);else if(1===a.length)p.vertexAttrib1f(m,a[0]);else if(2===a.length)p.vertexAttrib2f(m,a[0],a[1]);else if(3===a.length)p.vertexAttrib3f(m,a[0],a[1],a[2]);else if(4===a.length)p.vertexAttrib4f(m,a[0],a[1],a[2],a[3]);else throw Error("gl-vao: Invalid vertex attribute");
p.disableVertexAttribArray(m)}}}else p.bindBuffer(p.ARRAY_BUFFER,null),m=0;for(;m<n;++m)p.disableVertexAttribArray(m)}},{}],359:[function(b,N,G){function p(k){this.gl=k;this._attributes=this._elements=null;this._elementsType=k.UNSIGNED_SHORT}var n=b("./do-bind.js");p.prototype.bind=function(){n(this.gl,this._elements,this._attributes)};p.prototype.update=function(k,m,a){this._elements=m;this._attributes=k;this._elementsType=a||this.gl.UNSIGNED_SHORT};p.prototype.dispose=function(){};p.prototype.unbind=
function(){};p.prototype.draw=function(k,m,a){a=a||0;var g=this.gl;this._elements?g.drawElements(k,m,this._elementsType,a):g.drawArrays(k,a,m)};N.exports=function(k){return new p(k)}},{"./do-bind.js":358}],360:[function(b,N,G){function p(m,a,g,h,r,l){this.location=m;this.dimension=a;this.a=g;this.b=h;this.c=r;this.d=l}function n(m,a,g){this.gl=m;this._ext=a;this.handle=g;this._attribs=[];this._useElements=!1;this._elementsType=m.UNSIGNED_SHORT}var k=b("./do-bind.js");p.prototype.bind=function(m){switch(this.dimension){case 1:m.vertexAttrib1f(this.location,
this.a);break;case 2:m.vertexAttrib2f(this.location,this.a,this.b);break;case 3:m.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:m.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}};n.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var m=0;m<this._attribs.length;++m)this._attribs[m].bind(this.gl)};n.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)};n.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)};n.prototype.update=
function(m,a,g){this.bind();k(this.gl,a,m);this.unbind();this._attribs.length=0;if(m)for(var h=0;h<m.length;++h){var r=m[h];"number"===typeof r?this._attribs.push(new p(h,1,r)):Array.isArray(r)&&this._attribs.push(new p(h,r.length,r[0],r[1],r[2],r[3]))}this._useElements=!!a;this._elementsType=g||this.gl.UNSIGNED_SHORT};n.prototype.draw=function(m,a,g){g=g||0;var h=this.gl;this._useElements?h.drawElements(m,a,this._elementsType,g):h.drawArrays(m,g,a)};N.exports=function(m,a){return new n(m,a,a.createVertexArrayOES())}},
{"./do-bind.js":358}],361:[function(b,N,G){function p(m){this.bindVertexArrayOES=m.bindVertexArray.bind(m);this.createVertexArrayOES=m.createVertexArray.bind(m);this.deleteVertexArrayOES=m.deleteVertexArray.bind(m)}var n=b("./lib/vao-native.js"),k=b("./lib/vao-emulated.js");N.exports=function(m,a,g,h){var r=m.createVertexArray?new p(m):m.getExtension("OES_vertex_array_object");m=r?n(m,r):k(m);m.update(a,g,h);return m}},{"./lib/vao-emulated.js":359,"./lib/vao-native.js":360}],362:[function(b,N,G){N.exports=
function(p,n,k){p[0]=n[0]+k[0];p[1]=n[1]+k[1];p[2]=n[2]+k[2];return p}},{}],363:[function(b,N,G){N.exports=function(m,a){m=p(m[0],m[1],m[2]);a=p(a[0],a[1],a[2]);n(m,m);n(a,a);a=k(m,a);return 1<a?0:Math.acos(a)};var p=b("./fromValues"),n=b("./normalize"),k=b("./dot")},{"./dot":373,"./fromValues":379,"./normalize":390}],364:[function(b,N,G){N.exports=function(p,n){p[0]=Math.ceil(n[0]);p[1]=Math.ceil(n[1]);p[2]=Math.ceil(n[2]);return p}},{}],365:[function(b,N,G){N.exports=function(p){var n=new Float32Array(3);
n[0]=p[0];n[1]=p[1];n[2]=p[2];return n}},{}],366:[function(b,N,G){N.exports=function(p,n){p[0]=n[0];p[1]=n[1];p[2]=n[2];return p}},{}],367:[function(b,N,G){N.exports=function(){var p=new Float32Array(3);p[0]=0;p[1]=0;p[2]=0;return p}},{}],368:[function(b,N,G){N.exports=function(p,n,k){var m=n[0],a=n[1];n=n[2];var g=k[0],h=k[1];k=k[2];p[0]=a*k-n*h;p[1]=n*g-m*k;p[2]=m*h-a*g;return p}},{}],369:[function(b,N,G){N.exports=b("./distance")},{"./distance":370}],370:[function(b,N,G){N.exports=function(p,n){var k=
n[0]-p[0],m=n[1]-p[1];p=n[2]-p[2];return Math.sqrt(k*k+m*m+p*p)}},{}],371:[function(b,N,G){N.exports=b("./divide")},{"./divide":372}],372:[function(b,N,G){N.exports=function(p,n,k){p[0]=n[0]/k[0];p[1]=n[1]/k[1];p[2]=n[2]/k[2];return p}},{}],373:[function(b,N,G){N.exports=function(p,n){return p[0]*n[0]+p[1]*n[1]+p[2]*n[2]}},{}],374:[function(b,N,G){N.exports=1E-6},{}],375:[function(b,N,G){N.exports=function(n,k){var m=n[0],a=n[1];n=n[2];var g=k[0],h=k[1];k=k[2];return Math.abs(m-g)<=p*Math.max(1,Math.abs(m),
Math.abs(g))&&Math.abs(a-h)<=p*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(n-k)<=p*Math.max(1,Math.abs(n),Math.abs(k))};var p=b("./epsilon")},{"./epsilon":374}],376:[function(b,N,G){N.exports=function(p,n){return p[0]===n[0]&&p[1]===n[1]&&p[2]===n[2]}},{}],377:[function(b,N,G){N.exports=function(p,n){p[0]=Math.floor(n[0]);p[1]=Math.floor(n[1]);p[2]=Math.floor(n[2]);return p}},{}],378:[function(b,N,G){N.exports=function(n,k,m,a,g,h){k||(k=3);m||(m=0);for(a=a?Math.min(a*k+m,n.length):n.length;m<a;m+=
k)p[0]=n[m],p[1]=n[m+1],p[2]=n[m+2],g(p,p,h),n[m]=p[0],n[m+1]=p[1],n[m+2]=p[2];return n};var p=b("./create")()},{"./create":367}],379:[function(b,N,G){N.exports=function(p,n,k){var m=new Float32Array(3);m[0]=p;m[1]=n;m[2]=k;return m}},{}],380:[function(b,N,G){N.exports={EPSILON:b("./epsilon"),create:b("./create"),clone:b("./clone"),angle:b("./angle"),fromValues:b("./fromValues"),copy:b("./copy"),set:b("./set"),equals:b("./equals"),exactEquals:b("./exactEquals"),add:b("./add"),subtract:b("./subtract"),
sub:b("./sub"),multiply:b("./multiply"),mul:b("./mul"),divide:b("./divide"),div:b("./div"),min:b("./min"),max:b("./max"),floor:b("./floor"),ceil:b("./ceil"),round:b("./round"),scale:b("./scale"),scaleAndAdd:b("./scaleAndAdd"),distance:b("./distance"),dist:b("./dist"),squaredDistance:b("./squaredDistance"),sqrDist:b("./sqrDist"),length:b("./length"),len:b("./len"),squaredLength:b("./squaredLength"),sqrLen:b("./sqrLen"),negate:b("./negate"),inverse:b("./inverse"),normalize:b("./normalize"),dot:b("./dot"),
cross:b("./cross"),lerp:b("./lerp"),random:b("./random"),transformMat4:b("./transformMat4"),transformMat3:b("./transformMat3"),transformQuat:b("./transformQuat"),rotateX:b("./rotateX"),rotateY:b("./rotateY"),rotateZ:b("./rotateZ"),forEach:b("./forEach")}},{"./add":362,"./angle":363,"./ceil":364,"./clone":365,"./copy":366,"./create":367,"./cross":368,"./dist":369,"./distance":370,"./div":371,"./divide":372,"./dot":373,"./epsilon":374,"./equals":375,"./exactEquals":376,"./floor":377,"./forEach":378,
"./fromValues":379,"./inverse":381,"./len":382,"./length":383,"./lerp":384,"./max":385,"./min":386,"./mul":387,"./multiply":388,"./negate":389,"./normalize":390,"./random":391,"./rotateX":392,"./rotateY":393,"./rotateZ":394,"./round":395,"./scale":396,"./scaleAndAdd":397,"./set":398,"./sqrDist":399,"./sqrLen":400,"./squaredDistance":401,"./squaredLength":402,"./sub":403,"./subtract":404,"./transformMat3":405,"./transformMat4":406,"./transformQuat":407}],381:[function(b,N,G){N.exports=function(p,n){p[0]=
1/n[0];p[1]=1/n[1];p[2]=1/n[2];return p}},{}],382:[function(b,N,G){N.exports=b("./length")},{"./length":383}],383:[function(b,N,G){N.exports=function(p){var n=p[0],k=p[1];p=p[2];return Math.sqrt(n*n+k*k+p*p)}},{}],384:[function(b,N,G){N.exports=function(p,n,k,m){var a=n[0],g=n[1];n=n[2];p[0]=a+m*(k[0]-a);p[1]=g+m*(k[1]-g);p[2]=n+m*(k[2]-n);return p}},{}],385:[function(b,N,G){N.exports=function(p,n,k){p[0]=Math.max(n[0],k[0]);p[1]=Math.max(n[1],k[1]);p[2]=Math.max(n[2],k[2]);return p}},{}],386:[function(b,
N,G){N.exports=function(p,n,k){p[0]=Math.min(n[0],k[0]);p[1]=Math.min(n[1],k[1]);p[2]=Math.min(n[2],k[2]);return p}},{}],387:[function(b,N,G){N.exports=b("./multiply")},{"./multiply":388}],388:[function(b,N,G){N.exports=function(p,n,k){p[0]=n[0]*k[0];p[1]=n[1]*k[1];p[2]=n[2]*k[2];return p}},{}],389:[function(b,N,G){N.exports=function(p,n){p[0]=-n[0];p[1]=-n[1];p[2]=-n[2];return p}},{}],390:[function(b,N,G){N.exports=function(p,n){var k=n[0],m=n[1],a=n[2];k=k*k+m*m+a*a;0<k&&(k=1/Math.sqrt(k),p[0]=
n[0]*k,p[1]=n[1]*k,p[2]=n[2]*k);return p}},{}],391:[function(b,N,G){N.exports=function(p,n){n=n||1;var k=2*Math.random()*Math.PI,m=2*Math.random()-1,a=Math.sqrt(1-m*m)*n;p[0]=Math.cos(k)*a;p[1]=Math.sin(k)*a;p[2]=m*n;return p}},{}],392:[function(b,N,G){N.exports=function(p,n,k,m){var a=k[1];k=k[2];var g=n[1]-a,h=n[2]-k,r=Math.sin(m);m=Math.cos(m);p[0]=n[0];p[1]=a+g*m-h*r;p[2]=k+g*r+h*m;return p}},{}],393:[function(b,N,G){N.exports=function(p,n,k,m){var a=k[0];k=k[2];var g=n[0]-a,h=n[2]-k,r=Math.sin(m);
m=Math.cos(m);p[0]=a+h*r+g*m;p[1]=n[1];p[2]=k+h*m-g*r;return p}},{}],394:[function(b,N,G){N.exports=function(p,n,k,m){var a=k[0];k=k[1];var g=n[0]-a,h=n[1]-k,r=Math.sin(m);m=Math.cos(m);p[0]=a+g*m-h*r;p[1]=k+g*r+h*m;p[2]=n[2];return p}},{}],395:[function(b,N,G){N.exports=function(p,n){p[0]=Math.round(n[0]);p[1]=Math.round(n[1]);p[2]=Math.round(n[2]);return p}},{}],396:[function(b,N,G){N.exports=function(p,n,k){p[0]=n[0]*k;p[1]=n[1]*k;p[2]=n[2]*k;return p}},{}],397:[function(b,N,G){N.exports=function(p,
n,k,m){p[0]=n[0]+k[0]*m;p[1]=n[1]+k[1]*m;p[2]=n[2]+k[2]*m;return p}},{}],398:[function(b,N,G){N.exports=function(p,n,k,m){p[0]=n;p[1]=k;p[2]=m;return p}},{}],399:[function(b,N,G){N.exports=b("./squaredDistance")},{"./squaredDistance":401}],400:[function(b,N,G){N.exports=b("./squaredLength")},{"./squaredLength":402}],401:[function(b,N,G){N.exports=function(p,n){var k=n[0]-p[0],m=n[1]-p[1];p=n[2]-p[2];return k*k+m*m+p*p}},{}],402:[function(b,N,G){N.exports=function(p){var n=p[0],k=p[1];p=p[2];return n*
n+k*k+p*p}},{}],403:[function(b,N,G){N.exports=b("./subtract")},{"./subtract":404}],404:[function(b,N,G){N.exports=function(p,n,k){p[0]=n[0]-k[0];p[1]=n[1]-k[1];p[2]=n[2]-k[2];return p}},{}],405:[function(b,N,G){N.exports=function(p,n,k){var m=n[0],a=n[1];n=n[2];p[0]=m*k[0]+a*k[3]+n*k[6];p[1]=m*k[1]+a*k[4]+n*k[7];p[2]=m*k[2]+a*k[5]+n*k[8];return p}},{}],406:[function(b,N,G){N.exports=function(p,n,k){var m=n[0],a=n[1];n=n[2];var g=k[3]*m+k[7]*a+k[11]*n+k[15];g=g||1;p[0]=(k[0]*m+k[4]*a+k[8]*n+k[12])/
g;p[1]=(k[1]*m+k[5]*a+k[9]*n+k[13])/g;p[2]=(k[2]*m+k[6]*a+k[10]*n+k[14])/g;return p}},{}],407:[function(b,N,G){N.exports=function(p,n,k){var m=n[0],a=n[1],g=n[2];n=k[0];var h=k[1],r=k[2];k=k[3];var l=k*m+h*g-r*a,c=k*a+r*m-n*g,d=k*g+n*a-h*m;m=-n*m-h*a-r*g;p[0]=l*k+m*-n+c*-r-d*-h;p[1]=c*k+m*-h+d*-n-l*-r;p[2]=d*k+m*-r+l*-h-c*-n;return p}},{}],408:[function(b,N,G){N.exports=function(p,n,k){p[0]=n[0]+k[0];p[1]=n[1]+k[1];p[2]=n[2]+k[2];p[3]=n[3]+k[3];return p}},{}],409:[function(b,N,G){N.exports=function(p){var n=
new Float32Array(4);n[0]=p[0];n[1]=p[1];n[2]=p[2];n[3]=p[3];return n}},{}],410:[function(b,N,G){N.exports=function(p,n){p[0]=n[0];p[1]=n[1];p[2]=n[2];p[3]=n[3];return p}},{}],411:[function(b,N,G){N.exports=function(){var p=new Float32Array(4);p[0]=0;p[1]=0;p[2]=0;p[3]=0;return p}},{}],412:[function(b,N,G){N.exports=function(p,n){var k=n[0]-p[0],m=n[1]-p[1],a=n[2]-p[2];p=n[3]-p[3];return Math.sqrt(k*k+m*m+a*a+p*p)}},{}],413:[function(b,N,G){N.exports=function(p,n,k){p[0]=n[0]/k[0];p[1]=n[1]/k[1];p[2]=
n[2]/k[2];p[3]=n[3]/k[3];return p}},{}],414:[function(b,N,G){N.exports=function(p,n){return p[0]*n[0]+p[1]*n[1]+p[2]*n[2]+p[3]*n[3]}},{}],415:[function(b,N,G){N.exports=function(p,n,k,m){var a=new Float32Array(4);a[0]=p;a[1]=n;a[2]=k;a[3]=m;return a}},{}],416:[function(b,N,G){N.exports={create:b("./create"),clone:b("./clone"),fromValues:b("./fromValues"),copy:b("./copy"),set:b("./set"),add:b("./add"),subtract:b("./subtract"),multiply:b("./multiply"),divide:b("./divide"),min:b("./min"),max:b("./max"),
scale:b("./scale"),scaleAndAdd:b("./scaleAndAdd"),distance:b("./distance"),squaredDistance:b("./squaredDistance"),length:b("./length"),squaredLength:b("./squaredLength"),negate:b("./negate"),inverse:b("./inverse"),normalize:b("./normalize"),dot:b("./dot"),lerp:b("./lerp"),random:b("./random"),transformMat4:b("./transformMat4"),transformQuat:b("./transformQuat")}},{"./add":408,"./clone":409,"./copy":410,"./create":411,"./distance":412,"./divide":413,"./dot":414,"./fromValues":415,"./inverse":417,"./length":418,
"./lerp":419,"./max":420,"./min":421,"./multiply":422,"./negate":423,"./normalize":424,"./random":425,"./scale":426,"./scaleAndAdd":427,"./set":428,"./squaredDistance":429,"./squaredLength":430,"./subtract":431,"./transformMat4":432,"./transformQuat":433}],417:[function(b,N,G){N.exports=function(p,n){p[0]=1/n[0];p[1]=1/n[1];p[2]=1/n[2];p[3]=1/n[3];return p}},{}],418:[function(b,N,G){N.exports=function(p){var n=p[0],k=p[1],m=p[2];p=p[3];return Math.sqrt(n*n+k*k+m*m+p*p)}},{}],419:[function(b,N,G){N.exports=
function(p,n,k,m){var a=n[0],g=n[1],h=n[2];n=n[3];p[0]=a+m*(k[0]-a);p[1]=g+m*(k[1]-g);p[2]=h+m*(k[2]-h);p[3]=n+m*(k[3]-n);return p}},{}],420:[function(b,N,G){N.exports=function(p,n,k){p[0]=Math.max(n[0],k[0]);p[1]=Math.max(n[1],k[1]);p[2]=Math.max(n[2],k[2]);p[3]=Math.max(n[3],k[3]);return p}},{}],421:[function(b,N,G){N.exports=function(p,n,k){p[0]=Math.min(n[0],k[0]);p[1]=Math.min(n[1],k[1]);p[2]=Math.min(n[2],k[2]);p[3]=Math.min(n[3],k[3]);return p}},{}],422:[function(b,N,G){N.exports=function(p,
n,k){p[0]=n[0]*k[0];p[1]=n[1]*k[1];p[2]=n[2]*k[2];p[3]=n[3]*k[3];return p}},{}],423:[function(b,N,G){N.exports=function(p,n){p[0]=-n[0];p[1]=-n[1];p[2]=-n[2];p[3]=-n[3];return p}},{}],424:[function(b,N,G){N.exports=function(p,n){var k=n[0],m=n[1],a=n[2];n=n[3];var g=k*k+m*m+a*a+n*n;0<g&&(g=1/Math.sqrt(g),p[0]=k*g,p[1]=m*g,p[2]=a*g,p[3]=n*g);return p}},{}],425:[function(b,N,G){var p=b("./normalize"),n=b("./scale");N.exports=function(k,m){m=m||1;k[0]=Math.random();k[1]=Math.random();k[2]=Math.random();
k[3]=Math.random();p(k,k);n(k,k,m);return k}},{"./normalize":424,"./scale":426}],426:[function(b,N,G){N.exports=function(p,n,k){p[0]=n[0]*k;p[1]=n[1]*k;p[2]=n[2]*k;p[3]=n[3]*k;return p}},{}],427:[function(b,N,G){N.exports=function(p,n,k,m){p[0]=n[0]+k[0]*m;p[1]=n[1]+k[1]*m;p[2]=n[2]+k[2]*m;p[3]=n[3]+k[3]*m;return p}},{}],428:[function(b,N,G){N.exports=function(p,n,k,m,a){p[0]=n;p[1]=k;p[2]=m;p[3]=a;return p}},{}],429:[function(b,N,G){N.exports=function(p,n){var k=n[0]-p[0],m=n[1]-p[1],a=n[2]-p[2];
p=n[3]-p[3];return k*k+m*m+a*a+p*p}},{}],430:[function(b,N,G){N.exports=function(p){var n=p[0],k=p[1],m=p[2];p=p[3];return n*n+k*k+m*m+p*p}},{}],431:[function(b,N,G){N.exports=function(p,n,k){p[0]=n[0]-k[0];p[1]=n[1]-k[1];p[2]=n[2]-k[2];p[3]=n[3]-k[3];return p}},{}],432:[function(b,N,G){N.exports=function(p,n,k){var m=n[0],a=n[1],g=n[2];n=n[3];p[0]=k[0]*m+k[4]*a+k[8]*g+k[12]*n;p[1]=k[1]*m+k[5]*a+k[9]*g+k[13]*n;p[2]=k[2]*m+k[6]*a+k[10]*g+k[14]*n;p[3]=k[3]*m+k[7]*a+k[11]*g+k[15]*n;return p}},{}],433:[function(b,
N,G){N.exports=function(p,n,k){var m=n[0],a=n[1],g=n[2],h=k[0],r=k[1],l=k[2];k=k[3];var c=k*m+r*g-l*a,d=k*a+l*m-h*g,e=k*g+h*a-r*m;m=-h*m-r*a-l*g;p[0]=c*k+m*-h+d*-l-e*-r;p[1]=d*k+m*-r+e*-h-c*-l;p[2]=e*k+m*-l+c*-r-d*-h;p[3]=n[3];return p}},{}],434:[function(b,N,G){var p=b("glsl-tokenizer"),n=b("atob-lite");N.exports=function(k){k=Array.isArray(k)?k:p(k);for(var m=0;m<k.length;m++){var a=k[m];if("preprocessor"===a.type&&(a=a.data.match(/#define\s+SHADER_NAME(_B64)?\s+(.+)$/))&&a[2])return k=a[2],(a[1]?
n(k):k).trim()}}},{"atob-lite":84,"glsl-tokenizer":441}],435:[function(b,N,G){N.exports=function(D){function C(ra){ra.length&&ca.push({type:A[H],data:ra,position:U,line:W,column:T})}function v(){Z=Z.length?[]:Z;if("/"===Q&&"*"===M)return U=L+I-1,H=r,Q=M,I+1;if("/"===Q&&"/"===M)return U=L+I-1,H=l,Q=M,I+1;if("#"===M)return H=c,U=L+I,I;if(/\s/.test(M))return H=x,U=L+I,I;ha=/\d/.test(M);Y=/[^\w_]/.test(M);U=L+I;H=ha?e:Y?d:h;return I}function y(){if(("\r"===M||"\n"===M)&&"\\"!==Q)return C(Z.join("")),
H=g,I;Z.push(M);Q=M;return I+1}function F(){if("."===Q&&/\d/.test(M))return H=f,I;if("/"===Q&&"*"===M)return H=r,I;if("/"===Q&&"/"===M)return H=l,I;if("."===M&&Z.length){for(;J(Z););H=f;return I}if(";"===M||")"===M||"("===M){if(Z.length)for(;J(Z););C(M);H=g;return I+1}var ra=2===Z.length&&"\x3d"!==M;if(/[\w_\d\s]/.test(M)||ra){for(;J(Z););H=g;return I}Z.push(M);Q=M;return I+1}function J(ra){var la=0;do{var ka=n.indexOf(ra.slice(0,ra.length+la).join(""));var na=n[ka];if(-1===ka){if(0<la--+ra.length)continue;
na=ra.slice(0,1).join("")}C(na);U+=na.length;Z=Z.slice(na.length);return Z.length}while(1)}function K(){if("."===M||/[eE]/.test(M))return Z.push(M),H=f,Q=M,I+1;if("x"===M&&1===Z.length&&"0"===Z[0])return H=B,Z.push(M),Q=M,I+1;if(/[^\d]/.test(M))return C(Z.join("")),H=g,I;Z.push(M);Q=M;return I+1}function O(){"f"===M&&(Z.push(M),Q=M,I+=1);if(/[eE]/.test(M)||("-"===M||"+"===M)&&/[eE]/.test(Q))return Z.push(M),Q=M,I+1;if(/[^\d]/.test(M))return C(Z.join("")),H=g,I;Z.push(M);Q=M;return I+1}var I=0,L=0,
H=g,M,Q,Z=[],ca=[],W=1,T=0,U=0,ha=!1,Y=!1,ba="",ja;D=D||{};var ma=k,ia=p;"300 es"===D.version&&(ma=a,ia=m);var oa={},xa={};for(I=0;I<ma.length;I++)oa[ma[I]]=!0;for(I=0;I<ia.length;I++)xa[ia[I]]=!0;return function(ra){ca=[];if(null!==ra){I=0;ra.toString&&(ra=ra.toString());ba+=ra.replace(/\r\n/g,"\n");for(ja=ba.length;M=ba[I],I<ja;){ra=I;switch(H){case r:"/"===M&&"*"===Q?(Z.push(M),C(Z.join("")),H=g):(Z.push(M),Q=M);I+=1;break;case l:I=y();break;case c:I=y();break;case d:I=F();break;case e:I=K();break;
case B:/[^a-fA-F0-9]/.test(M)?(C(Z.join("")),H=g):(Z.push(M),Q=M,I+=1);break;case f:I=O();break;case h:if(/[^\d\w_]/.test(M)){var la=Z.join("");H=xa[la]?w:oa[la]?t:q;C(Z.join(""));H=g}else Z.push(M),Q=M,I+=1;break;case x:/[^\s]/g.test(M)?(C(Z.join("")),H=g):(Z.push(M),Q=M,I+=1);break;case g:I=v()}if(ra!==I)switch(ba[ra]){case "\n":T=0;++W;break;default:++T}}L+=I;ba=ba.slice(I);return ca}Z.length&&C(Z.join(""));H=z;C("(eof)");return ca}};var p=b("./lib/literals"),n=b("./lib/operators"),k=b("./lib/builtins"),
m=b("./lib/literals-300es"),a=b("./lib/builtins-300es"),g=999,h=9999,r=0,l=1,c=2,d=3,e=4,f=5,q=6,t=7,w=8,x=9,z=10,B=11,A="block-comment line-comment preprocessor operator integer float ident builtin keyword whitespace eof integer".split(" ")},{"./lib/builtins":437,"./lib/builtins-300es":436,"./lib/literals":439,"./lib/literals-300es":438,"./lib/operators":440}],436:[function(b,N,G){b=b("./builtins");b=b.slice().filter(function(p){return!/^(gl_|texture)/.test(p)});N.exports=b.concat("gl_VertexID gl_InstanceID gl_Position gl_PointSize gl_FragCoord gl_FrontFacing gl_FragDepth gl_PointCoord gl_MaxVertexAttribs gl_MaxVertexUniformVectors gl_MaxVertexOutputVectors gl_MaxFragmentInputVectors gl_MaxVertexTextureImageUnits gl_MaxCombinedTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformVectors gl_MaxDrawBuffers gl_MinProgramTexelOffset gl_MaxProgramTexelOffset gl_DepthRangeParameters gl_DepthRange trunc round roundEven isnan isinf floatBitsToInt floatBitsToUint intBitsToFloat uintBitsToFloat packSnorm2x16 unpackSnorm2x16 packUnorm2x16 unpackUnorm2x16 packHalf2x16 unpackHalf2x16 outerProduct transpose determinant inverse texture textureSize textureProj textureLod textureOffset texelFetch texelFetchOffset textureProjOffset textureLodOffset textureProjLod textureProjLodOffset textureGrad textureGradOffset textureProjGrad textureProjGradOffset".split(" "))},
{"./builtins":437}],437:[function(b,N,G){N.exports="abs acos all any asin atan ceil clamp cos cross dFdx dFdy degrees distance dot equal exp exp2 faceforward floor fract gl_BackColor gl_BackLightModelProduct gl_BackLightProduct gl_BackMaterial gl_BackSecondaryColor gl_ClipPlane gl_ClipVertex gl_Color gl_DepthRange gl_DepthRangeParameters gl_EyePlaneQ gl_EyePlaneR gl_EyePlaneS gl_EyePlaneT gl_Fog gl_FogCoord gl_FogFragCoord gl_FogParameters gl_FragColor gl_FragCoord gl_FragData gl_FragDepth gl_FragDepthEXT gl_FrontColor gl_FrontFacing gl_FrontLightModelProduct gl_FrontLightProduct gl_FrontMaterial gl_FrontSecondaryColor gl_LightModel gl_LightModelParameters gl_LightModelProducts gl_LightProducts gl_LightSource gl_LightSourceParameters gl_MaterialParameters gl_MaxClipPlanes gl_MaxCombinedTextureImageUnits gl_MaxDrawBuffers gl_MaxFragmentUniformComponents gl_MaxLights gl_MaxTextureCoords gl_MaxTextureImageUnits gl_MaxTextureUnits gl_MaxVaryingFloats gl_MaxVertexAttribs gl_MaxVertexTextureImageUnits gl_MaxVertexUniformComponents gl_ModelViewMatrix gl_ModelViewMatrixInverse gl_ModelViewMatrixInverseTranspose gl_ModelViewMatrixTranspose gl_ModelViewProjectionMatrix gl_ModelViewProjectionMatrixInverse gl_ModelViewProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixTranspose gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_Normal gl_NormalMatrix gl_NormalScale gl_ObjectPlaneQ gl_ObjectPlaneR gl_ObjectPlaneS gl_ObjectPlaneT gl_Point gl_PointCoord gl_PointParameters gl_PointSize gl_Position gl_ProjectionMatrix gl_ProjectionMatrixInverse gl_ProjectionMatrixInverseTranspose gl_ProjectionMatrixTranspose gl_SecondaryColor gl_TexCoord gl_TextureEnvColor gl_TextureMatrix gl_TextureMatrixInverse gl_TextureMatrixInverseTranspose gl_TextureMatrixTranspose gl_Vertex greaterThan greaterThanEqual inversesqrt length lessThan lessThanEqual log log2 matrixCompMult max min mix mod normalize not notEqual pow radians reflect refract sign sin smoothstep sqrt step tan texture2D texture2DLod texture2DProj texture2DProjLod textureCube textureCubeLod texture2DLodEXT texture2DProjLodEXT textureCubeLodEXT texture2DGradEXT texture2DProjGradEXT textureCubeGradEXT".split(" ")},
{}],438:[function(b,N,G){b=b("./literals");N.exports=b.slice().concat("layout centroid smooth case mat2x2 mat2x3 mat2x4 mat3x2 mat3x3 mat3x4 mat4x2 mat4x3 mat4x4 uvec2 uvec3 uvec4 samplerCubeShadow sampler2DArray sampler2DArrayShadow isampler2D isampler3D isamplerCube isampler2DArray usampler2D usampler3D usamplerCube usampler2DArray coherent restrict readonly writeonly resource atomic_uint noperspective patch sample subroutine common partition active filter image1D image2D image3D imageCube iimage1D iimage2D iimage3D iimageCube uimage1D uimage2D uimage3D uimageCube image1DArray image2DArray iimage1DArray iimage2DArray uimage1DArray uimage2DArray image1DShadow image2DShadow image1DArrayShadow image2DArrayShadow imageBuffer iimageBuffer uimageBuffer sampler1DArray sampler1DArrayShadow isampler1D isampler1DArray usampler1D usampler1DArray isampler2DRect usampler2DRect samplerBuffer isamplerBuffer usamplerBuffer sampler2DMS isampler2DMS usampler2DMS sampler2DMSArray isampler2DMSArray usampler2DMSArray".split(" "))},
{"./literals":439}],439:[function(b,N,G){N.exports="precision highp mediump lowp attribute const uniform varying break continue do for while if else in out inout float int uint void bool true false discard return mat2 mat3 mat4 vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow struct asm class union enum typedef template this packed goto switch default inline noinline volatile public static extern external interface long short double half fixed unsigned input output hvec2 hvec3 hvec4 dvec2 dvec3 dvec4 fvec2 fvec3 fvec4 sampler2DRect sampler3DRect sampler2DRectShadow sizeof cast namespace using".split(" ")},
{}],440:[function(b,N,G){N.exports="\x3c\x3c\x3d \x3e\x3e\x3d ++ -- \x3c\x3c \x3e\x3e \x3c\x3d \x3e\x3d \x3d\x3d !\x3d \x26\x26 || +\x3d -\x3d *\x3d /\x3d %\x3d \x26\x3d ^^ ^\x3d |\x3d ( ) [ ] . ! ~ * / % + - \x3c \x3e \x26 ^ | ? : \x3d , ; { }".split(" ")},{}],441:[function(b,N,G){var p=b("./index");N.exports=function(n,k){k=p(k);var m=[];m=m.concat(k(n));return m=m.concat(k(null))}},{"./index":435}],442:[function(b,N,G){arguments[4][265][0].apply(G,arguments)},{dup:265}],443:[function(b,N,G){G=
"undefined"!==typeof Re?Re:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{};b=b("is-browser");b="function"===typeof G.matchMedia?!G.matchMedia("(hover: none)").matches:b;N.exports=b},{"is-browser":452}],444:[function(b,N,G){function p(){var n=!1;try{var k=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("test",null,k);window.removeEventListener("test",null,k)}catch(m){n=!1}return n}b=b("is-browser");N.exports=b&&p()},{"is-browser":452}],445:[function(b,
N,G){G.read=function(p,n,k,m,a){var g=8*a-m-1;var h=(1<<g)-1,r=h>>1,l=-7;a=k?a-1:0;var c=k?-1:1,d=p[n+a];a+=c;k=d&(1<<-l)-1;d>>=-l;for(l+=g;0<l;k=256*k+p[n+a],a+=c,l-=8);g=k&(1<<-l)-1;k>>=-l;for(l+=m;0<l;g=256*g+p[n+a],a+=c,l-=8);if(0===k)k=1-r;else{if(k===h)return g?NaN:Infinity*(d?-1:1);g+=Math.pow(2,m);k-=r}return(d?-1:1)*g*Math.pow(2,k-m)};G.write=function(p,n,k,m,a,g){var h,r=8*g-a-1,l=(1<<r)-1,c=l>>1,d=23===a?Math.pow(2,-24)-Math.pow(2,-77):0;g=m?0:g-1;var e=m?1:-1,f=0>n||0===n&&0>1/n?1:0;n=
Math.abs(n);isNaN(n)||Infinity===n?(n=isNaN(n)?1:0,m=l):(m=Math.floor(Math.log(n)/Math.LN2),1>n*(h=Math.pow(2,-m))&&(m--,h*=2),n=1<=m+c?n+d/h:n+d*Math.pow(2,1-c),2<=n*h&&(m++,h/=2),m+c>=l?(n=0,m=l):1<=m+c?(n=(n*h-1)*Math.pow(2,a),m+=c):(n=n*Math.pow(2,c-1)*Math.pow(2,a),m=0));for(;8<=a;p[k+g]=n&255,g+=e,n/=256,a-=8);m=m<<a|n;for(r+=a;0<r;p[k+g]=m&255,g+=e,m/=256,r-=8);p[k+g-e]|=128*f}},{}],446:[function(b,N,G){function p(l,c,d){this.vertices=l;this.adjacent=c;this.boundary=d;this.lastVisited=-1}function n(l,
c,d){this.vertices=l;this.cell=c;this.index=d}function k(l,c){return h(l.vertices,c.vertices)}function m(l){for(var c=["function orient(){var tuple\x3dthis.tuple;return test("],d=0;d<=l;++d)0<d&&c.push(","),c.push("tuple[",d,"]");c.push(")}return orient");c=new Function("test",c.join(""));(l=g[l+1])||(l=g);return c(l)}function a(l,c,d){this.dimension=l;this.vertices=c;this.simplices=d;this.interior=d.filter(function(e){return!e.boundary});this.tuple=Array(l+1);for(c=0;c<=l;++c)this.tuple[c]=this.vertices[c];
(c=r[l])||(c=r[l]=m(l));this.orient=c}N.exports=function(l,c){var d=l.length;if(0===d)throw Error("Must have at least d+1 points");var e=l[0].length;if(d<=e)throw Error("Must input at least d+1 points");var f=l.slice(0,e+1),q=g.apply(void 0,f);if(0===q)throw Error("Input not in general position");for(var t=Array(e+1),w=0;w<=e;++w)t[w]=w;0>q&&(t[0]=1,t[1]=0);q=new p(t,Array(e+1),!1);var x=q.adjacent,z=Array(e+2);for(w=0;w<=e;++w){for(var B=t.slice(),A=0;A<=e;++A)A===w&&(B[A]=-1);A=B[0];B[0]=B[1];B[1]=
A;B=new p(B,Array(e+1),!0);x[w]=B;z[w]=B}z[e+1]=q;for(w=0;w<=e;++w)for(B=x[w].vertices,t=x[w].adjacent,A=0;A<=e;++A){var D=B[A];if(0>D)t[A]=q;else for(var C=0;C<=e;++C)0>x[C].vertices.indexOf(D)&&(t[A]=x[C])}f=new a(e,f,z);c=!!c;for(w=e+1;w<d;++w)f.insert(l[w],c);return f.boundary()};var g=b("robust-orientation"),h=b("simplicial-complex").compareCells;p.prototype.flip=function(){var l=this.vertices[0];this.vertices[0]=this.vertices[1];this.vertices[1]=l;l=this.adjacent[0];this.adjacent[0]=this.adjacent[1];
this.adjacent[1]=l};var r=[];b=a.prototype;b.handleBoundaryDegeneracy=function(l,c){var d=this.dimension,e=this.vertices.length-1,f=this.tuple,q=this.vertices,t=[l];for(l.lastVisited=-e;0<t.length;){l=t.pop();l=l.adjacent;for(var w=0;w<=d;++w){var x=l[w];if(x.boundary&&!(x.lastVisited<=-e)){for(var z=x.vertices,B=0;B<=d;++B){var A=z[B];f[B]=0>A?c:q[A]}z=this.orient();if(0<z)return x;x.lastVisited=-e;0===z&&t.push(x)}}}return null};b.walk=function(l,c){var d=this.vertices.length-1,e=this.dimension,
f=this.vertices,q=this.tuple,t=this.interior[c?this.interior.length*Math.random()|0:this.interior.length-1];a:for(;!t.boundary;){var w=t.vertices;c=t.adjacent;for(var x=0;x<=e;++x)q[x]=f[w[x]];t.lastVisited=d;for(x=0;x<=e;++x)if(t=c[x],!(t.lastVisited>=d)){w=q[x];q[x]=l;var z=this.orient();q[x]=w;if(0>z)continue a;else t.lastVisited=t.boundary?-d:d}return}return t};b.addPeaks=function(l,c){var d=this.vertices.length-1,e=this.dimension,f=this.vertices,q=this.tuple,t=this.interior,w=this.simplices,
x=[c];c.lastVisited=d;c.vertices[c.vertices.indexOf(-1)]=d;c.boundary=!1;t.push(c);for(var z=[];0<x.length;){c=x.pop();var B=c.vertices,A=c.adjacent,D=B.indexOf(d);if(!(0>D))for(var C=0;C<=e;++C)if(C!==D){var v=A[C];if(v.boundary&&!(v.lastVisited>=d)){var y=v.vertices;if(v.lastVisited!==-d){for(var F=0,J=0;J<=e;++J)0>y[J]?(F=J,q[J]=l):q[J]=f[y[J]];if(0<this.orient()){y[F]=d;v.boundary=!1;t.push(v);x.push(v);v.lastVisited=d;continue}else v.lastVisited=-d}J=v.adjacent;y=B.slice();var K=A.slice();F=
new p(y,K,!0);w.push(F);var O=J.indexOf(c);if(!(0>O))for(J[O]=F,K[D]=v,y[C]=-1,K[C]=c,A[C]=F,F.flip(),J=0;J<=e;++J)if(v=y[J],!(0>v||v===d)){v=Array(e-1);for(O=K=0;O<=e;++O){var I=y[O];0>I||O===J||(v[K++]=I)}z.push(new n(v,F,J))}}}}z.sort(k);for(C=0;C+1<z.length;C+=2)l=z[C],c=z[C+1],d=c.index,0>l.index||0>d||(l.cell.adjacent[l.index]=c.cell,c.cell.adjacent[c.index]=l.cell)};b.insert=function(l,c){var d=this.vertices;d.push(l);if(c=this.walk(l,c)){for(var e=this.dimension,f=this.tuple,q=0;q<=e;++q){var t=
c.vertices[q];f[q]=0>t?l:d[t]}d=this.orient(f);if(!(0>d)){if(0===d&&(c=this.handleBoundaryDegeneracy(c,l),!c))return;this.addPeaks(l,c)}}};b.boundary=function(){for(var l=this.dimension,c=[],d=this.simplices,e=d.length,f=0;f<e;++f){var q=d[f];if(q.boundary){var t=Array(l);q=q.vertices;for(var w=0,x=0,z=0;z<=l;++z)0<=q[z]?t[w++]=q[z]:x=z&1;x===(l&1)&&(q=t[0],t[0]=t[1],t[1]=q);c.push(t)}}return c}},{"robust-orientation":548,"simplicial-complex":559}],447:[function(b,N,G){N.exports="function"===typeof Object.create?
function(p,n){n&&(p.super_=n,p.prototype=Object.create(n.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}))}:function(p,n){if(n){p.super_=n;var k=function(){};k.prototype=n.prototype;p.prototype=new k;p.prototype.constructor=p}}},{}],448:[function(b,N,G){function p(q,t,w,x,z){this.mid=q;this.left=t;this.right=w;this.leftPoints=x;this.rightPoints=z;this.count=(t?t.count:0)+(w?w.count:0)+x.length}function n(q,t){q.mid=t.mid;q.left=t.left;q.right=t.right;q.leftPoints=t.leftPoints;
q.rightPoints=t.rightPoints;q.count=t.count}function k(q,t){t=d(t);q.mid=t.mid;q.left=t.left;q.right=t.right;q.leftPoints=t.leftPoints;q.rightPoints=t.rightPoints;q.count=t.count}function m(q,t){var w=q.intervals([]);t=w.indexOf(t);if(0>t)return 0;w.splice(t,1);k(q,w);return 1}function a(q,t,w){for(var x=0;x<q.length&&q[x][0]<=t;++x){var z=w(q[x]);if(z)return z}}function g(q,t,w){for(var x=q.length-1;0<=x&&q[x][1]>=t;--x){var z=w(q[x]);if(z)return z}}function h(q,t){for(var w=0;w<q.length;++w){var x=
t(q[w]);if(x)return x}}function r(q,t){return q-t}function l(q,t){var w=q[0]-t[0];return w?w:q[1]-t[1]}function c(q,t){var w=q[1]-t[1];return w?w:q[0]-t[0]}function d(q){if(0===q.length)return null;for(var t=[],w=0;w<q.length;++w)t.push(q[w][0],q[w][1]);t.sort(r);t=t[t.length>>1];var x=[],z=[],B=[];for(w=0;w<q.length;++w){var A=q[w];A[1]<t?x.push(A):t<A[0]?z.push(A):B.push(A)}q=B.slice();B.sort(l);q.sort(c);return new p(t,d(x),d(z),B,q)}function e(q){this.root=q}var f=b("binary-search-bounds");N.exports=
function(q){return q&&0!==q.length?new e(d(q)):new e(null)};b=p.prototype;b.intervals=function(q){q.push.apply(q,this.leftPoints);this.left&&this.left.intervals(q);this.right&&this.right.intervals(q);return q};b.insert=function(q){var t=this.count-this.leftPoints.length;this.count+=1;if(q[1]<this.mid)this.left?4*(this.left.count+1)>3*(t+1)?(t=this.intervals([]),t.push(q),k(this,t)):this.left.insert(q):this.left=d([q]);else if(q[0]>this.mid)this.right?4*(this.right.count+1)>3*(t+1)?(t=this.intervals([]),
t.push(q),k(this,t)):this.right.insert(q):this.right=d([q]);else{t=f.ge(this.leftPoints,q,l);var w=f.ge(this.rightPoints,q,c);this.leftPoints.splice(t,0,q);this.rightPoints.splice(w,0,q)}};b.remove=function(q){var t=this.count-this.leftPoints;if(q[1]<this.mid){if(!this.left)return 0;if(4*(this.right?this.right.count:0)>3*(t-1))return m(this,q);t=this.left.remove(q);if(2===t)return this.left=null,--this.count,1;1===t&&--this.count;return t}if(q[0]>this.mid){if(!this.right)return 0;if(4*(this.left?
this.left.count:0)>3*(t-1))return m(this,q);t=this.right.remove(q);if(2===t)return this.right=null,--this.count,1;1===t&&--this.count;return t}if(1===this.count)return this.leftPoints[0]===q?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===q){if(this.left&&this.right){q=this;for(var w=this.left;w.right;)q=w,w=w.right;if(q===this)w.right=this.right;else{var x=this.left;t=this.right;q.count-=w.count;q.right=w.left;w.left=x;w.right=t}n(this,w);this.count=(this.left?this.left.count:0)+(this.right?
this.right.count:0)+this.leftPoints.length}else this.left?n(this,this.left):n(this,this.right);return 1}for(x=f.ge(this.leftPoints,q,l);x<this.leftPoints.length&&this.leftPoints[x][0]===q[0];++x)if(this.leftPoints[x]===q)for(--this.count,this.leftPoints.splice(x,1),t=f.ge(this.rightPoints,q,c);t<this.rightPoints.length&&this.rightPoints[t][1]===q[1];++t)if(this.rightPoints[t]===q)return this.rightPoints.splice(t,1),1;return 0};b.queryPoint=function(q,t){if(q<this.mid){if(this.left){var w=this.left.queryPoint(q,
t);if(w)return w}return a(this.leftPoints,q,t)}return q>this.mid?this.right&&(w=this.right.queryPoint(q,t))?w:g(this.rightPoints,q,t):h(this.leftPoints,t)};b.queryInterval=function(q,t,w){if(q<this.mid&&this.left){var x=this.left.queryInterval(q,t,w);if(x)return x}return t>this.mid&&this.right&&(x=this.right.queryInterval(q,t,w))?x:t<this.mid?a(this.leftPoints,t,w):q>this.mid?g(this.rightPoints,q,w):h(this.leftPoints,w)};b=e.prototype;b.insert=function(q){this.root?this.root.insert(q):this.root=new p(q[0],
null,null,[q],[q])};b.remove=function(q){return this.root?(q=this.root.remove(q),2===q&&(this.root=null),0!==q):!1};b.queryPoint=function(q,t){if(this.root)return this.root.queryPoint(q,t)};b.queryInterval=function(q,t,w){if(q<=t&&this.root)return this.root.queryInterval(q,t,w)};Object.defineProperty(b,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(b,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":449}],449:[function(b,
N,G){arguments[4][251][0].apply(G,arguments)},{dup:251}],450:[function(b,N,G){N.exports=function(p,n){n=n||Array(p.length);for(var k=0;k<p.length;++k)n[p[k]]=k;return n}},{}],451:[function(b,N,G){N.exports=function(p){for(var n=Array(p),k=0;k<p;++k)n[k]=k;return n}},{}],452:[function(b,N,G){N.exports=!0},{}],453:[function(b,N,G){function p(n){return!!n.constructor&&"function"===typeof n.constructor.isBuffer&&n.constructor.isBuffer(n)}N.exports=function(n){return null!=n&&(p(n)||"function"===typeof n.readFloatLE&&
"function"===typeof n.slice&&p(n.slice(0,0))||!!n._isBuffer)}},{}],454:[function(b,N,G){N.exports="undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],455:[function(b,N,G){function p(m){m||(m={});var a=m.ua;a||"undefined"===typeof navigator||(a=navigator.userAgent);a&&a.headers&&"string"===typeof a.headers["user-agent"]&&(a=a.headers["user-agent"]);if("string"!==typeof a)return!1;var g=m.tablet?k.test(a):n.test(a);!g&&m.tablet&&m.featureDetect&&
navigator&&1<navigator.maxTouchPoints&&-1!==a.indexOf("Macintosh")&&-1!==a.indexOf("Safari")&&(g=!0);return g}N.exports=p;N.exports.isMobile=p;N.exports.default=p;var n=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,k=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i},
{}],456:[function(b,N,G){N.exports=function(p){var n=typeof p;return null!==p&&("object"===n||"function"===n)}},{}],457:[function(b,N,G){var p=Object.prototype.toString;N.exports=function(n){var k;return"[object Object]"===p.call(n)&&(k=Object.getPrototypeOf(n),null===k||k===Object.getPrototypeOf({}))}},{}],458:[function(b,N,G){N.exports=function(p){for(var n=p.length,k,m=0;m<n;m++)if(k=p.charCodeAt(m),(9>k||13<k)&&32!==k&&133!==k&&160!==k&&5760!==k&&6158!==k&&(8192>k||8205<k)&&8232!==k&&8233!==k&&
8239!==k&&8287!==k&&8288!==k&&12288!==k&&65279!==k)return!1;return!0}},{}],459:[function(b,N,G){N.exports=function(p){if("string"!==typeof p)return!1;p=p.trim();return/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(p)&&/[\dz]$/i.test(p)&&4<p.length?!0:!1}},{}],460:[function(b,N,G){N.exports=function(p,n,k){return p*(1-k)+n*k}},{}],461:[function(b,N,G){(function(p,n){"object"===typeof G&&"undefined"!==typeof N?N.exports=n():(p=p||self,p.mapboxgl=n())})(this,function(){function p(a,g){if(n)if(k){a="var sharedChunk \x3d {}; ("+
n+")(sharedChunk); ("+k+")(sharedChunk);";var h={};n(h);m=g(h);m.workerUrl=window.URL.createObjectURL(new Blob([a],{type:"text/javascript"}))}else k=g;else n=g}var n,k,m;p(["exports"],function(a){function g(u,E){return E={exports:{}},u(E,E.exports),E.exports}function h(u,E,P,fa){this.cx=3*u;this.bx=3*(P-u)-this.cx;this.ax=1-this.cx-this.bx;this.cy=3*E;this.by=3*(fa-E)-this.cy;this.ay=1-this.cy-this.by;this.p1x=u;this.p1y=fa;this.p2x=P;this.p2y=fa}function r(u,E){this.x=u;this.y=E}function l(u,E){if(Array.isArray(u)){if(!Array.isArray(E)||
u.length!==E.length)return!1;for(var P=0;P<u.length;P++)if(!l(u[P],E[P]))return!1;return!0}if("object"===typeof u&&null!==u&&null!==E){if("object"!==typeof E||Object.keys(u).length!==Object.keys(E).length)return!1;for(P in u)if(!l(u[P],E[P]))return!1;return!0}return u===E}function c(u,E,P,fa){var pa=new zg(u,E,P,fa);return function(wa){return pa.solve(wa)}}function d(u,E,P){return Math.min(P,Math.max(E,u))}function e(u,E,P){var fa=P-E;u=((u-E)%fa+fa)%fa+E;return u===E?P:u}function f(u){for(var E=
[],P=arguments.length-1;0<P--;)E[P]=arguments[P+1];for(P=0;P<E.length;P+=1){var fa=E[P],pa;for(pa in fa)u[pa]=fa[pa]}return u}function q(){function u(E){return E?(E^16*Math.random()>>E/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,u)}return u()}function t(u){return u?/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(u):!1}function w(u,E){u.forEach(function(P){E[P]&&(E[P]=E[P].bind(E))})}function x(u,E){return-1!==u.indexOf(E,u.length-E.length)}
function z(u,E,P){var fa={},pa;for(pa in u)fa[pa]=E.call(P||this,u[pa],pa,u);return fa}function B(u,E,P){var fa={},pa;for(pa in u)E.call(P||this,u[pa],pa,u)&&(fa[pa]=u[pa]);return fa}function A(u){return Array.isArray(u)?u.map(A):"object"===typeof u&&u?z(u,A):u}function D(u){ti[u]||("undefined"!==typeof console&&console.warn(u),ti[u]=!0)}function C(u,E,P){return(P.y-u.y)*(E.x-u.x)>(E.y-u.y)*(P.x-u.x)}function v(){return"undefined"!==typeof WorkerGlobalScope&&"undefined"!==typeof self&&self instanceof
WorkerGlobalScope}function y(u){var E={};u.replace(/(?:^|(?:\s*,\s*))([^\x00-\x20\(\)<>@,;:\\"\/\[\]\?=\{\}\x7F]+)(?:=(?:([^\x00-\x20\(\)<>@,;:\\"\/\[\]\?=\{\}\x7F]+)|(?:"((?:[^"\\]|\\.)*)")))?/g,function(P,fa,pa,wa){P=pa||wa;E[fa]=P?P.toLowerCase():!0;return""});E["max-age"]&&(u=parseInt(E["max-age"],10),isNaN(u)?delete E["max-age"]:E["max-age"]=u);return E}function F(u){if(null==si){var E=u.navigator?u.navigator.userAgent:null;si=!!u.safari||!(!E||!(/\b(iPad|iPhone|iPod)\b/.test(E)||E.match("Safari")&&
!E.match("Chrome")))}return si}function J(u){try{var E=self[u];E.setItem("_mapbox_test_",1);E.removeItem("_mapbox_test_");return!0}catch(P){return!1}}function K(u){return self.btoa(encodeURIComponent(u).replace(/%([0-9A-F]{2})/g,function(E,P){return String.fromCharCode(Number("0x"+P))}))}function O(u){return decodeURIComponent(self.atob(u).split("").map(function(E){return"%"+("00"+E.charCodeAt(0).toString(16)).slice(-2)}).join(""))}function I(u){var E=u.createTexture();u.bindTexture(u.TEXTURE_2D,
E);try{u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,jc);if(u.isContextLost())return;Ra.supported=!0}catch(P){}u.deleteTexture(E);Nb=!0}function L(u){return 0===u.indexOf("mapbox:")}function H(u){return 0<u.indexOf("sku\x3d")&&Kc.test(u)}function M(u){u=u.match($c);if(!u)throw Error("Unable to parse URL object");return{protocol:u[1],authority:u[2],path:u[3]||"/",params:u[4]?u[4].split("\x26"):[]}}function Q(u){var E=u.params.length?"?"+u.params.join("\x26"):"";return u.protocol+"://"+
u.authority+u.path+E}function Z(u){if(!u)return null;u=u.split(".");if(!u||3!==u.length)return null;try{return JSON.parse(O(u[1]))}catch(E){return null}}function ca(){self.caches&&!ve&&(ve=self.caches.open("mapbox-tiles"))}function W(u,E){if(void 0===se)try{new Response(new ReadableStream),se=!0}catch(P){se=!1}se?E(u.body):u.blob().then(E)}function T(u,E,P){ca();if(ve){var fa={status:E.status,statusText:E.statusText,headers:new self.Headers};E.headers.forEach(function(wa,Ea){return fa.headers.set(Ea,
wa)});var pa=y(E.headers.get("Cache-Control")||"");pa["no-store"]||(pa["max-age"]&&fa.headers.set("Expires",(new Date(P+1E3*pa["max-age"])).toUTCString()),42E4>(new Date(fa.headers.get("Expires"))).getTime()-P||W(E,function(wa){var Ea=new self.Response(wa,fa);ca();ve&&ve.then(function(Va){return Va.put(U(u.url),Ea)}).catch(function(Va){return D(Va.message)})}))}}function U(u){var E=u.indexOf("?");return 0>E?u:u.slice(0,E)}function ha(u,E){ca();if(!ve)return E(null);var P=U(u.url);ve.then(function(fa){fa.match(P).then(function(pa){if(pa){var wa=
new Date(pa.headers.get("Expires")||0);var Ea=y(pa.headers.get("Cache-Control")||"");wa=wa>Date.now()&&!Ea["no-cache"]}else wa=!1;fa.delete(P);wa&&fa.put(P,pa.clone());E(null,pa,wa)}).catch(E)}).catch(E)}function Y(){null==we&&(we=self.OffscreenCanvas&&(new self.OffscreenCanvas(1,1)).getContext("2d")&&"function"===typeof self.createImageBitmap);return we}function ba(u,E){var P=new self.AbortController,fa=new self.Request(u.url,{method:u.method||"GET",body:u.body,credentials:u.credentials,headers:u.headers,
referrer:rf(),signal:P.signal}),pa=!1,wa=!1,Ea=H(fa.url);"json"===u.type&&fa.headers.set("Accept","application/json");var Va=function(ib,Hb,Sb){if(!wa){ib&&"SecurityError"!==ib.message&&D(ib);if(Hb&&Sb)return Za(Hb);var ic=Date.now();self.fetch(fa).then(function(Dc){if(Dc.ok){var wc=Ea?Dc.clone():null;return Za(Dc,wc,ic)}return E(new Ke(Dc.statusText,Dc.status,u.url))}).catch(function(Dc){20!==Dc.code&&E(Error(Dc.message))})}},Za=function(ib,Hb,Sb){("arrayBuffer"===u.type?ib.arrayBuffer():"json"===
u.type?ib.json():ib.text()).then(function(ic){wa||(Hb&&Sb&&T(fa,Hb,Sb),pa=!0,E(null,ic,ib.headers.get("Cache-Control"),ib.headers.get("Expires")))}).catch(function(ic){wa||E(Error(ic.message))})};Ea?ha(fa,Va):Va(null,null);return{cancel:function(){wa=!0;pa||P.abort()}}}function ja(u,E){var P=new self.XMLHttpRequest;P.open(u.method||"GET",u.url,!0);"arrayBuffer"===u.type&&(P.responseType="arraybuffer");for(var fa in u.headers)P.setRequestHeader(fa,u.headers[fa]);"json"===u.type&&(P.responseType="text",
P.setRequestHeader("Accept","application/json"));P.withCredentials="include"===u.credentials;P.onerror=function(){E(Error(P.statusText))};P.onload=function(){if((200<=P.status&&300>P.status||0===P.status)&&null!==P.response){var pa=P.response;if("json"===u.type)try{pa=JSON.parse(P.response)}catch(wa){return E(wa)}E(null,pa,P.getResponseHeader("Cache-Control"),P.getResponseHeader("Expires"))}else E(new Ke(P.statusText,P.status,u.url))};P.send(u.body);return{cancel:function(){return P.abort()}}}function ma(u){var E=
self.document.createElement("a");E.href=u;return E.protocol===self.document.location.protocol&&E.host===self.document.location.host}function ia(u,E,P,fa){var pa=new self.Image,wa=self.URL;pa.onload=function(){E(null,pa);wa.revokeObjectURL(pa.src)};pa.onerror=function(){return E(Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Ea=new self.Blob([new Uint8Array(u)],{type:"image/png"});pa.cacheControl=P;pa.expires=
fa;pa.src=u.byteLength?wa.createObjectURL(Ea):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII\x3d"}function oa(u,E){u=new self.Blob([new Uint8Array(u)],{type:"image/png"});self.createImageBitmap(u).then(function(P){E(null,P)}).catch(function(P){E(Error("Could not load image because of "+P.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}function xa(u,E,P){P[u]&&-1!==
P[u].indexOf(E)||(P[u]=P[u]||[],P[u].push(E))}function ra(u,E,P){P&&P[u]&&(E=P[u].indexOf(E),-1!==E&&P[u].splice(E,1))}function la(u){var E=u.key;return(u=u.value)?[new Na(E,u,"constants have been deprecated as of v8")]:[]}function ka(u){for(var E=[],P=arguments.length-1;0<P--;)E[P]=arguments[P+1];for(P=0;P<E.length;P+=1){var fa=E[P],pa;for(pa in fa)u[pa]=fa[pa]}return u}function na(u){return u instanceof Number||u instanceof String||u instanceof Boolean?u.valueOf():u}function qa(u){if(Array.isArray(u))return u.map(qa);
if(u instanceof Object&&!(u instanceof Number||u instanceof String||u instanceof Boolean)){var E={},P;for(P in u)E[P]=qa(u[P]);return E}return na(u)}function ta(u,E){return{kind:"array",itemType:u,N:E}}function za(u){if("array"===u.kind){var E=za(u.itemType);return"number"===typeof u.N?"array\x3c"+E+", "+u.N+"\x3e":"value"===u.itemType.kind?"array":"array\x3c"+E+"\x3e"}return u.kind}function Ia(u,E){if("error"===E.kind)return null;if("array"===u.kind){if("array"===E.kind&&(0===E.N&&"value"===E.itemType.kind||
!Ia(u.itemType,E.itemType))&&("number"!==typeof u.N||u.N===E.N))return null}else{if(u.kind===E.kind)return null;if("value"===u.kind)for(var P=0,fa=Yc;P<fa.length;P+=1)if(!Ia(fa[P],E))return null}return"Expected "+za(u)+" but found "+za(E)+" instead."}function Xa(u,E){return E.some(function(P){return P.kind===u.kind})}function $a(u,E){return E.some(function(P){return"null"===P?null===u:"array"===P?Array.isArray(u):"object"===P?u&&!Array.isArray(u)&&"object"===typeof u:P===typeof u})}function gb(u,
E,P,fa){return"number"===typeof u&&0<=u&&255>=u&&"number"===typeof E&&0<=E&&255>=E&&"number"===typeof P&&0<=P&&255>=P?"undefined"===typeof fa||"number"===typeof fa&&0<=fa&&1>=fa?null:"Invalid rgba value ["+[u,E,P,fa].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"===typeof fa?[u,E,P,fa]:[u,E,P]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function sb(u){if(null===u||"string"===typeof u||"boolean"===typeof u||"number"===typeof u||u instanceof pd||u instanceof
sd||u instanceof zd||u instanceof ee)return!0;if(Array.isArray(u)){for(var E=0;E<u.length;E+=1)if(!sb(u[E]))return!1;return!0}if("object"===typeof u){for(E in u)if(!sb(u[E]))return!1;return!0}return!1}function jb(u){if(null===u)return hb;if("string"===typeof u)return xb;if("boolean"===typeof u)return Fb;if("number"===typeof u)return fb;if(u instanceof pd)return Tb;if(u instanceof sd)return Cc;if(u instanceof zd)return Oc;if(u instanceof ee)return Gc;if(Array.isArray(u)){for(var E=u.length,P,fa=0;fa<
u.length;fa+=1){var pa=jb(u[fa]);if(P){if(P!==pa){P=kc;break}}else P=pa}return ta(P||kc,E)}return nc}function vb(u){var E=typeof u;return null===u?"":"string"===E||"number"===E||"boolean"===E?String(u):u instanceof pd||u instanceof zd||u instanceof ee?u.toString():JSON.stringify(u)}function qb(u,E){u[0]=Math.min(u[0],E[0]);u[1]=Math.min(u[1],E[1]);u[2]=Math.max(u[2],E[0]);u[3]=Math.max(u[3],E[1])}function Bb(u,E){return u[0]<=E[0]||u[2]>=E[2]||u[1]<=E[1]||u[3]>=E[3]?!1:!0}function ub(u,E){for(var P=
!1,fa=0,pa=E.length;fa<pa;fa++)for(var wa=E[fa],Ea=0,Va=wa.length;Ea<Va-1;Ea++){var Za=wa[Ea],ib=wa[Ea+1],Hb=u[0]-Za[0];Za=u[1]-Za[1];var Sb=u[0]-ib[0];ib=u[1]-ib[1];if(0===Hb*ib-Sb*Za&&0>=Hb*Sb&&0>=Za*ib)return!1;Hb=wa[Ea];ib=wa[Ea+1];Hb[1]>u[1]!==ib[1]>u[1]&&u[0]<(ib[0]-Hb[0])*(u[1]-Hb[1])/(ib[1]-Hb[1])+Hb[0]&&(P=!P)}return P}function wb(u,E,P,fa){var pa=fa[0]-P[0];fa=fa[1]-P[1];u=(u[0]-P[0])*fa-pa*(u[1]-P[1]);E=(E[0]-P[0])*fa-pa*(E[1]-P[1]);return 0<u&&0>E||0>u&&0<E?!0:!1}function rb(u,E){for(var P=
0;P<u.length;++P)if(!ub(u[P],E))return!1;for(P=0;P<u.length-1;++P){a:{var fa=u[P];for(var pa=u[P+1],wa=0,Ea=E;wa<Ea.length;wa+=1)for(var Va=Ea[wa],Za=0;Za<Va.length-1;++Za){var ib=fa,Hb=pa,Sb=Va[Za],ic=Va[Za+1],Dc=[ic[0]-Sb[0],ic[1]-Sb[1]],wc=[Hb[0]-ib[0],Hb[1]-ib[1]];if(0===Dc[0]*wc[1]-Dc[1]*wc[0]?0:wb(ib,Hb,Sb,ic)&&wb(Sb,ic,ib,Hb)){fa=!0;break a}}fa=!1}if(fa)return!1}return!0}function Ab(u,E,P){for(var fa=[],pa=0;pa<u.length;pa++){for(var wa=[],Ea=0;Ea<u[pa].length;Ea++){var Va=u[pa][Ea];var Za=
Math.pow(2,P.z);Va=[Math.round((180+Va[0])/360*Za*8192),Math.round((180-180/Math.PI*Math.log(Math.tan(Math.PI/4+Va[1]*Math.PI/360)))/360*Za*8192)];qb(E,Va);wa.push(Va)}fa.push(wa)}return fa}function Ma(u,E,P){for(var fa=[],pa=0;pa<u.length;pa++){var wa=Ab(u[pa],E,P);fa.push(wa)}return fa}function La(u,E,P,fa){if(u[0]<P[0]||u[0]>P[2]){var pa=.5*fa,wa=u[0]-P[0]>pa?-fa:P[0]-u[0]>pa?fa:0;0===wa&&(wa=u[0]-P[2]>pa?-fa:P[2]-u[0]>pa?fa:0);u[0]+=wa}qb(E,u)}function ya(u,E,P,fa){var pa=8192*Math.pow(2,fa.z);
fa=[8192*fa.x,8192*fa.y];for(var wa=[],Ea=0;Ea<u.length;Ea+=1)for(var Va=0,Za=u[Ea];Va<Za.length;Va+=1){var ib=Za[Va];ib=[ib.x+fa[0],ib.y+fa[1]];La(ib,E,P,pa);wa.push(ib)}return wa}function Aa(u,E,P,fa){var pa=8192*Math.pow(2,fa.z),wa=[8192*fa.x,8192*fa.y];fa=[];for(var Ea=0;Ea<u.length;Ea+=1){for(var Va=[],Za=0,ib=u[Ea];Za<ib.length;Za+=1){var Hb=ib[Za];Hb=[Hb.x+wa[0],Hb.y+wa[1]];qb(E,Hb);Va.push(Hb)}fa.push(Va)}if(E[2]-E[0]<=pa/2)for(E[0]=E[1]=Infinity,E[2]=E[3]=-Infinity,u=0;u<fa.length;u+=1)for(wa=
0,Ea=fa[u];wa<Ea.length;wa+=1)La(Ea[wa],E,P,pa);return fa}function Ka(u,E){var P=[Infinity,Infinity,-Infinity,-Infinity],fa=[Infinity,Infinity,-Infinity,-Infinity],pa=u.canonicalID();if("Polygon"===E.type){var wa=Ab(E.coordinates,fa,pa),Ea=ya(u.geometry(),P,fa,pa);if(!Bb(P,fa))return!1;for(var Va=0;Va<Ea.length;Va+=1)if(!ub(Ea[Va],wa))return!1}if("MultiPolygon"===E.type){E=Ma(E.coordinates,fa,pa);u=ya(u.geometry(),P,fa,pa);if(!Bb(P,fa))return!1;for(P=0;P<u.length;P+=1){a:{fa=u[P];pa=E;for(wa=0;wa<
pa.length;wa++)if(ub(fa,pa[wa])){fa=!0;break a}fa=!1}if(!fa)return!1}}return!0}function Ta(u,E){var P=[Infinity,Infinity,-Infinity,-Infinity],fa=[Infinity,Infinity,-Infinity,-Infinity],pa=u.canonicalID();if("Polygon"===E.type){var wa=Ab(E.coordinates,fa,pa),Ea=Aa(u.geometry(),P,fa,pa);if(!Bb(P,fa))return!1;for(var Va=0;Va<Ea.length;Va+=1)if(!rb(Ea[Va],wa))return!1}if("MultiPolygon"===E.type){E=Ma(E.coordinates,fa,pa);u=Aa(u.geometry(),P,fa,pa);if(!Bb(P,fa))return!1;for(P=0;P<u.length;P+=1){a:{fa=
u[P];pa=E;for(wa=0;wa<pa.length;wa++)if(rb(fa,pa[wa])){fa=!0;break a}fa=!1}if(!fa)return!1}}return!0}function bb(u){if(u instanceof Ef&&("get"===u.name&&1===u.args.length||"feature-state"===u.name||"has"===u.name&&1===u.args.length||"properties"===u.name||"geometry-type"===u.name||"id"===u.name||/^filter-/.test(u.name))||u instanceof pg)return!1;var E=!0;u.eachChild(function(P){E&&!bb(P)&&(E=!1)});return E}function cb(u){if(u instanceof Ef&&"feature-state"===u.name)return!1;var E=!0;u.eachChild(function(P){E&&
!cb(P)&&(E=!1)});return E}function Eb(u,E){if(u instanceof Ef&&0<=E.indexOf(u.name))return!1;var P=!0;u.eachChild(function(fa){P&&!Eb(fa,E)&&(P=!1)});return P}function Pb(u){if(u instanceof rg)return Pb(u.boundExpression);if(u instanceof Ef&&"error"===u.name||u instanceof fg||u instanceof pg)return!1;var E=u instanceof xf||u instanceof re,P=!0;u.eachChild(function(fa){P=E?P&&Pb(fa):P&&fa instanceof ce});return P?bb(u)&&Eb(u,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):
!1}function fc(u,E){for(var P=u.length-1,fa=0,pa=P,wa,Ea,Va;fa<=pa;)if(wa=Math.floor((fa+pa)/2),Ea=u[wa],Va=u[wa+1],Ea<=E){if(wa===P||E<Va)return wa;fa=wa+1}else if(Ea>E)pa=wa-1;else throw new je("Input is not a number.");return 0}function pb(u,E,P){return u*(1-P)+E*P}function Db(u){return u>bg?Math.pow(u,1/3):u/lg+xg}function Rb(u){return u>Ki?u*u*u:lg*(u-xg)}function xc(u){return 255*(.0031308>=u?12.92*u:1.055*Math.pow(u,1/2.4)-.055)}function Ic(u){u/=255;return.04045>=u?u/12.92:Math.pow((u+.055)/
1.055,2.4)}function Ja(u){var E=Ic(u.r),P=Ic(u.g),fa=Ic(u.b),pa=Db((.4124564*E+.3575761*P+.1804375*fa)/.95047),wa=Db(.2126729*E+.7151522*P+.072175*fa);E=Db((.0193339*E+.119192*P+.9503041*fa)/1.08883);return{l:116*wa-16,a:500*(pa-wa),b:200*(wa-E),alpha:u.a}}function Pa(u){var E=(u.l+16)/116,P=isNaN(u.a)?E:E+u.a/500,fa=isNaN(u.b)?E:E-u.b/200;E=1*Rb(E);P=.95047*Rb(P);fa=1.08883*Rb(fa);return new pd(xc(3.2404542*P-1.5371385*E-.4985314*fa),xc(-.969266*P+1.8760108*E+.041556*fa),xc(.0556434*P-.2040259*E+
1.0572252*fa),u.alpha)}function db(u,E,P,fa){fa-=P;u-=P;return 0===fa?0:1===E?u/fa:(Math.pow(E,u)-1)/(Math.pow(E,fa)-1)}function Jb(u,E){return"\x3d\x3d"===u||"!\x3d"===u?"boolean"===E.kind||"string"===E.kind||"number"===E.kind||"null"===E.kind||"value"===E.kind:"string"===E.kind||"number"===E.kind||"value"===E.kind}function Gb(u,E,P,fa){return 0===fa.compare(E,P)}function cc(u,E,P){var fa="\x3d\x3d"!==u&&"!\x3d"!==u;return function(){function pa(wa,Ea,Va){this.type=Fb;this.lhs=wa;this.rhs=Ea;this.collator=
Va;this.hasUntypedArgument="value"===wa.type.kind||"value"===Ea.type.kind}pa.parse=function(wa,Ea){if(3!==wa.length&&4!==wa.length)return Ea.error("Expected two or three arguments.");var Va=wa[0],Za=Ea.parse(wa[1],1,kc);if(!Za)return null;if(!Jb(Va,Za.type))return Ea.concat(1).error('"'+Va+"\" comparisons are not supported for type '"+za(Za.type)+"'.");var ib=Ea.parse(wa[2],2,kc);if(!ib)return null;if(!Jb(Va,ib.type))return Ea.concat(2).error('"'+Va+"\" comparisons are not supported for type '"+za(ib.type)+
"'.");if(Za.type.kind!==ib.type.kind&&"value"!==Za.type.kind&&"value"!==ib.type.kind)return Ea.error("Cannot compare types '"+za(Za.type)+"' and '"+za(ib.type)+"'.");fa&&("value"===Za.type.kind&&"value"!==ib.type.kind?Za=new re(ib.type,[Za]):"value"!==Za.type.kind&&"value"===ib.type.kind&&(ib=new re(Za.type,[ib])));Va=null;if(4===wa.length){if("string"!==Za.type.kind&&"string"!==ib.type.kind&&"value"!==Za.type.kind&&"value"!==ib.type.kind)return Ea.error("Cannot use collator to compare non-string types.");
Va=Ea.parse(wa[3],3,Cc);if(!Va)return null}return new pa(Za,ib,Va)};pa.prototype.evaluate=function(wa){var Ea=this.lhs.evaluate(wa),Va=this.rhs.evaluate(wa);if(fa&&this.hasUntypedArgument){var Za=jb(Ea),ib=jb(Va);if(Za.kind!==ib.kind||"string"!==Za.kind&&"number"!==Za.kind)throw new je('Expected arguments for "'+u+'" to be (string, string) or (number, number), but found ('+Za.kind+", "+ib.kind+") instead.");}return this.collator&&!fa&&this.hasUntypedArgument&&(Za=jb(Ea),ib=jb(Va),"string"!==Za.kind||
"string"!==ib.kind)?E(wa,Ea,Va):this.collator?P(wa,Ea,Va,this.collator.evaluate(wa)):E(wa,Ea,Va)};pa.prototype.eachChild=function(wa){wa(this.lhs);wa(this.rhs);this.collator&&wa(this.collator)};pa.prototype.outputDefined=function(){return!0};pa.prototype.serialize=function(){var wa=[u];this.eachChild(function(Ea){wa.push(Ea.serialize())});return wa};return pa}()}function uc(u,E){var P=E[0],fa=E[1],pa=E[2];E=E[3];P=P.evaluate(u);fa=fa.evaluate(u);pa=pa.evaluate(u);u=E?E.evaluate(u):1;if(E=gb(P,fa,
pa,u))throw new je(E);return new pd(P/255*u,fa/255*u,pa/255*u,u)}function fd(u,E){u=E[u];return"undefined"===typeof u?null:u}function kb(u){return{result:"success",value:u}}function Qb(u){return{result:"error",value:u}}function dc(u){return"data-driven"===u["property-type"]||"cross-faded-data-driven"===u["property-type"]}function Ec(u){return!!u.expression&&-1<u.expression.parameters.indexOf("zoom")}function Qc(u){return!!u.expression&&u.expression.interpolated}function Tc(u){return u instanceof Number?
"number":u instanceof String?"string":u instanceof Boolean?"boolean":Array.isArray(u)?"array":null===u?"null":typeof u}function tb(u){return"object"===typeof u&&null!==u&&!Array.isArray(u)}function Ib(u){return u}function sc(u,E){var P="color"===E.type,fa=u.stops&&"object"===typeof u.stops[0][0],pa=fa||void 0!==u.property;pa=fa||!pa;var wa=u.type||(Qc(E)?"exponential":"interval");P&&(u=ka({},u),u.stops&&(u.stops=u.stops.map(function(ic){return[ic[0],pd.parse(ic[1])]})),u.default=u.default?pd.parse(u.default):
pd.parse(E.default));if(u.colorSpace&&"rgb"!==u.colorSpace&&!ij[u.colorSpace])throw Error("Unknown color space: "+u.colorSpace);if("exponential"===wa)var Ea=Ub;else if("interval"===wa)Ea=Wb;else if("categorical"===wa){Ea=zc;var Va=Object.create(null);P=0;for(var Za=u.stops;P<Za.length;P+=1){var ib=Za[P];Va[ib[0]]=ib[1]}var Hb=typeof u.stops[0][0]}else if("identity"===wa)Ea=yb;else throw Error('Unknown function type "'+wa+'"');if(fa){fa={};pa=[];for(wa=0;wa<u.stops.length;wa++)P=u.stops[wa],Za=P[0].zoom,
void 0===fa[Za]&&(fa[Za]={zoom:Za,type:u.type,property:u.property,default:u.default,stops:[]},pa.push(Za)),fa[Za].stops.push([P[0].value,P[1]]);var Sb=[];for(wa=0;wa<pa.length;wa+=1)P=pa[wa],Sb.push([fa[P].zoom,sc(fa[P],E)]);fa={name:"linear"};return{kind:"composite",interpolationType:fa,interpolationFactor:Ag.interpolationFactor.bind(void 0,fa),zoomStops:Sb.map(function(ic){return ic[0]}),evaluate:function(ic,Dc){ic=ic.zoom;return Ub({stops:Sb,base:u.base},E,ic).evaluate(ic,Dc)}}}return pa?(fa="exponential"===
wa?{name:"exponential",base:void 0!==u.base?u.base:1}:null,{kind:"camera",interpolationType:fa,interpolationFactor:Ag.interpolationFactor.bind(void 0,fa),zoomStops:u.stops.map(function(ic){return ic[0]}),evaluate:function(ic){return Ea(u,E,ic.zoom,Va,Hb)}}):{kind:"source",evaluate:function(ic,Dc){ic=Dc&&Dc.properties?Dc.properties[u.property]:void 0;return void 0===ic?pc(u.default,E.default):Ea(u,E,ic,Va,Hb)}}}function pc(u,E,P){if(void 0!==u)return u;if(void 0!==E)return E;if(void 0!==P)return P}
function zc(u,E,P,fa,pa){return pc(typeof P===pa?fa[P]:void 0,u.default,E.default)}function Wb(u,E,P){if("number"!==Tc(P))return pc(u.default,E.default);E=u.stops.length;if(1===E||P<=u.stops[0][0])return u.stops[0][1];if(P>=u.stops[E-1][0])return u.stops[E-1][1];P=fc(u.stops.map(function(fa){return fa[0]}),P);return u.stops[P][1]}function Ub(u,E,P){var fa=void 0!==u.base?u.base:1;if("number"!==Tc(P))return pc(u.default,E.default);var pa=u.stops.length;if(1===pa||P<=u.stops[0][0])return u.stops[0][1];
if(P>=u.stops[pa-1][0])return u.stops[pa-1][1];pa=fc(u.stops.map(function(Hb){return Hb[0]}),P);var wa=ac(P,fa,u.stops[pa][0],u.stops[pa+1][0]),Ea=u.stops[pa][1],Va=u.stops[pa+1][1],Za=hj[E.type]||Ib;if(u.colorSpace&&"rgb"!==u.colorSpace){var ib=ij[u.colorSpace];Za=function(Hb,Sb){return ib.reverse(ib.interpolate(ib.forward(Hb),ib.forward(Sb),wa))}}return"function"===typeof Ea.evaluate?{evaluate:function(){for(var Hb=[],Sb=arguments.length;Sb--;)Hb[Sb]=arguments[Sb];Sb=Ea.evaluate.apply(void 0,Hb);
Hb=Va.evaluate.apply(void 0,Hb);if(void 0!==Sb&&void 0!==Hb)return Za(Sb,Hb,wa)}}:Za(Ea,Va,wa)}function yb(u,E,P){"color"===E.type?P=pd.parse(P):"formatted"===E.type?P=zd.fromString(P.toString()):"resolvedImage"===E.type?P=ee.fromString(P.toString()):Tc(P)===E.type||"enum"===E.type&&E.values[P]||(P=void 0);return pc(P,u.default,E.default)}function ac(u,E,P,fa){fa-=P;u-=P;return 0===fa?0:1===E?u/fa:(Math.pow(E,u)-1)/(Math.pow(E,fa)-1)}function Vb(u){return Array.isArray(u)&&0<u.length&&"string"===
typeof u[0]&&u[0]in Kj}function mc(u,E){var P=bh;if(E){var fa={color:Tb,string:xb,number:fb,enum:xb,boolean:Fb,formatted:Oc,resolvedImage:Gc};fa="array"===E.type?ta(fa[E.value]||kc,E.length):fa[E.type]}else fa=void 0;P=new P(Kj,[],fa);return(u=P.parse(u,void 0,void 0,void 0,E&&"string"===E.type?{typeAnnotation:"coerce"}:void 0))?kb(new tj(u,E)):Qb(P.errors)}function tc(u,E){u=mc(u,E);if("error"===u.result)return u;var P=u.value.expression,fa=bb(P);if(!fa&&!dc(E))return Qb([new Wa("","data expressions not supported")]);
var pa=Eb(P,["zoom"]);if(!pa&&!Ec(E))return Qb([new Wa("","zoom expressions not supported")]);if((P=kd(P))||pa){if(P instanceof Wa)return Qb([P]);if(P instanceof Ag&&!Qc(E))return Qb([new Wa("",'"interpolate" expressions cannot be used with this property')])}else return Qb([new Wa("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(!P)return kb(fa?new uj("constant",u.value):new uj("source",u.value));E=P instanceof Ag?P.interpolation:void 0;return kb(fa?
new Mi("camera",u.value,P.labels,E):new Mi("composite",u.value,P.labels,E))}function Uc(u,E){if(tb(u))return new Xj(u,E);if(Vb(u)){u=tc(u,E);if("error"===u.result)throw Error(u.value.map(function(fa){return fa.key+": "+fa.message}).join(", "));return u.value}var P=u;"string"===typeof u&&"color"===E.type&&(P=pd.parse(u));return{kind:"constant",evaluate:function(){return P}}}function kd(u){var E=null;if(u instanceof Xh)E=kd(u.result);else if(u instanceof yi)for(var P=0,fa=u.args;P<fa.length&&!(E=kd(fa[P]));P+=
1);else(u instanceof xi||u instanceof Ag)&&u.input instanceof Ef&&"zoom"===u.input.name&&(E=u);if(E instanceof Wa)return E;u.eachChild(function(pa){pa=kd(pa);pa instanceof Wa?E=pa:!E&&pa?E=new Wa("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):E&&pa&&E!==pa&&(E=new Wa("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))});return E}function Bd(u){var E=u.key,P=u.value,fa=u.valueSpec||{},pa=u.objectElementValidators||
{},wa=u.style;u=u.styleSpec;var Ea=[],Va=Tc(P);if("object"!==Va)return[new Na(E,P,"object expected, "+Va+" found")];for(var Za in P){var ib=Za.split(".")[0];Va=fa[ib]||fa["*"];if(pa[ib])ib=pa[ib];else if(fa[ib])ib=bf;else if(pa["*"])ib=pa["*"];else if(fa["*"])ib=bf;else{Ea.push(new Na(E,P[Za],'unknown property "'+Za+'"'));continue}Ea=Ea.concat(ib({key:(E?E+".":E)+Za,value:P[Za],valueSpec:Va,style:wa,styleSpec:u,object:P,objectKey:Za},P))}for(var Hb in fa)pa[Hb]||fa[Hb].required&&void 0===fa[Hb]["default"]&&
void 0===P[Hb]&&Ea.push(new Na(E,P,'missing required property "'+Hb+'"'));return Ea}function Fd(u){var E=u.value,P=u.valueSpec,fa=u.style,pa=u.styleSpec,wa=u.key;u=u.arrayElementValidator||bf;if("array"!==Tc(E))return[new Na(wa,E,"array expected, "+Tc(E)+" found")];if(P.length&&E.length!==P.length)return[new Na(wa,E,"array length "+P.length+" expected, length "+E.length+" found")];if(P["min-length"]&&E.length<P["min-length"])return[new Na(wa,E,"array length at least "+P["min-length"]+" expected, length "+
E.length+" found")];var Ea={type:P.value,values:P.values};7>pa.$version&&(Ea.function=P.function);"object"===Tc(P.value)&&(Ea=P.value);P=[];for(var Va=0;Va<E.length;Va++)P=P.concat(u({array:E,arrayIndex:Va,value:E[Va],valueSpec:Ea,style:fa,styleSpec:pa,key:wa+"["+Va+"]"}));return P}function yd(u){var E=u.key,P=u.value;u=u.valueSpec;var fa=Tc(P);"number"===fa&&P!==P&&(fa="NaN");return"number"!==fa?[new Na(E,P,"number expected, "+fa+" found")]:"minimum"in u&&P<u.minimum?[new Na(E,P,P+" is less than the minimum value "+
u.minimum)]:"maximum"in u&&P>u.maximum?[new Na(E,P,P+" is greater than the maximum value "+u.maximum)]:[]}function Lc(u){function E(Dc){var wc=[],Hc=Dc.value,ud=Dc.key;if("array"!==Tc(Hc))return[new Na(ud,Hc,"array expected, "+Tc(Hc)+" found")];if(2!==Hc.length)return[new Na(ud,Hc,"array length 2 expected, length "+Hc.length+" found")];if(Sb){if("object"!==Tc(Hc[0]))return[new Na(ud,Hc,"object expected, "+Tc(Hc[0])+" found")];if(void 0===Hc[0].zoom)return[new Na(ud,Hc,"object stop key must have zoom")];
if(void 0===Hc[0].value)return[new Na(ud,Hc,"object stop key must have value")];if(Za&&Za>na(Hc[0].zoom))return[new Na(ud,Hc[0].zoom,"stop zoom values must appear in ascending order")];na(Hc[0].zoom)!==Za&&(Za=na(Hc[0].zoom),Va=void 0,Ea={});wc=wc.concat(Bd({key:ud+"[0]",value:Hc[0],valueSpec:{zoom:{}},style:Dc.style,styleSpec:Dc.styleSpec,objectElementValidators:{zoom:yd,value:P}}))}else wc=wc.concat(P({key:ud+"[0]",value:Hc[0],valueSpec:{},style:Dc.style,styleSpec:Dc.styleSpec},Hc));return Vb(qa(Hc[1]))?
wc.concat([new Na(ud+"[1]",Hc[1],"expressions are not allowed in function stops.")]):wc.concat(bf({key:ud+"[1]",value:Hc[1],valueSpec:fa,style:Dc.style,styleSpec:Dc.styleSpec}))}function P(Dc,wc){var Hc=Tc(Dc.value),ud=na(Dc.value);wc=null!==Dc.value?Dc.value:wc;if(!wa)wa=Hc;else if(Hc!==wa)return[new Na(Dc.key,wc,Hc+" stop domain type must match previous stop domain type "+wa)];if("number"!==Hc&&"string"!==Hc&&"boolean"!==Hc)return[new Na(Dc.key,wc,"stop domain value must be a number, string, or boolean")];
if("number"!==Hc&&"categorical"!==pa)return Hc="number expected, "+Hc+" found",dc(fa)&&void 0===pa&&(Hc+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Na(Dc.key,wc,Hc)];if("categorical"===pa&&"number"===Hc&&(!isFinite(ud)||Math.floor(ud)!==ud))return[new Na(Dc.key,wc,"integer expected, found "+ud)];if("categorical"!==pa&&"number"===Hc&&void 0!==Va&&ud<Va)return[new Na(Dc.key,wc,"stop domain values must appear in ascending order")];Va=ud;if("categorical"===
pa&&ud in Ea)return[new Na(Dc.key,wc,"stop domain values must be unique")];Ea[ud]=!0;return[]}var fa=u.valueSpec,pa=na(u.value.type),wa,Ea={},Va,Za,ib="categorical"!==pa&&void 0===u.value.property,Hb=!ib,Sb="array"===Tc(u.value.stops)&&"array"===Tc(u.value.stops[0])&&"object"===Tc(u.value.stops[0][0]),ic=Bd({key:u.key,value:u.value,valueSpec:u.styleSpec.function,style:u.style,styleSpec:u.styleSpec,objectElementValidators:{stops:function(Dc){if("identity"===pa)return[new Na(Dc.key,Dc.value,'identity function may not have a "stops" property')];
var wc=[],Hc=Dc.value;wc=wc.concat(Fd({key:Dc.key,value:Hc,valueSpec:Dc.valueSpec,style:Dc.style,styleSpec:Dc.styleSpec,arrayElementValidator:E}));"array"===Tc(Hc)&&0===Hc.length&&wc.push(new Na(Dc.key,Hc,"array must have at least one stop"));return wc},default:function(Dc){return bf({key:Dc.key,value:Dc.value,valueSpec:fa,style:Dc.style,styleSpec:Dc.styleSpec})}}});"identity"===pa&&ib&&ic.push(new Na(u.key,u.value,'missing required property "property"'));"identity"===pa||u.value.stops||ic.push(new Na(u.key,
u.value,'missing required property "stops"'));"exponential"===pa&&u.valueSpec.expression&&!Qc(u.valueSpec)&&ic.push(new Na(u.key,u.value,"exponential functions not supported"));8<=u.styleSpec.$version&&(Hb&&!dc(u.valueSpec)?ic.push(new Na(u.key,u.value,"property functions not supported")):ib&&!Ec(u.valueSpec)&&ic.push(new Na(u.key,u.value,"zoom functions not supported")));"categorical"!==pa&&!Sb||void 0!==u.value.property||ic.push(new Na(u.key,u.value,'"property" property is required'));return ic}
function cd(u){var E=("property"===u.expressionContext?tc:mc)(qa(u.value),u.valueSpec);if("error"===E.result)return E.value.map(function(P){return new Na(""+u.key+P.key,u.value,P.message)});E=E.value.expression||E.value._styleExpression.expression;if("property"===u.expressionContext&&"text-font"===u.propertyKey&&!E.outputDefined())return[new Na(u.key,u.value,'Invalid data expression for "'+u.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===u.expressionContext&&
"layout"===u.propertyType&&!cb(E))return[new Na(u.key,u.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===u.expressionContext&&!cb(E))return[new Na(u.key,u.value,'"feature-state" data expressions are not supported with filters.')];if(u.expressionContext&&0===u.expressionContext.indexOf("cluster")){if(!Eb(E,["zoom","feature-state"]))return[new Na(u.key,u.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===
u.expressionContext&&!bb(E))return[new Na(u.key,u.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Nc(u){var E=u.key,P=u.value;u=u.valueSpec;var fa=[];Array.isArray(u.values)?-1===u.values.indexOf(na(P))&&fa.push(new Na(E,P,"expected one of ["+u.values.join(", ")+"], "+JSON.stringify(P)+" found")):-1===Object.keys(u.values).indexOf(na(P))&&fa.push(new Na(E,P,"expected one of ["+Object.keys(u.values).join(", ")+"], "+JSON.stringify(P)+
" found"));return fa}function Xc(u){if(!0===u||!1===u)return!0;if(!Array.isArray(u)||0===u.length)return!1;switch(u[0]){case "has":return 2<=u.length&&"$id"!==u[1]&&"$type"!==u[1];case "in":return 3<=u.length&&("string"!==typeof u[1]||Array.isArray(u[2]));case "!in":case "!has":case "none":return!1;case "\x3d\x3d":case "!\x3d":case "\x3e":case "\x3e\x3d":case "\x3c":case "\x3c\x3d":return 3!==u.length||Array.isArray(u[1])||Array.isArray(u[2]);case "any":case "all":var E=0;for(u=u.slice(1);E<u.length;E+=
1){var P=u[E];if(!Xc(P)&&"boolean"!==typeof P)return!1}return!0;default:return!0}}function Zc(u){if(null===u||void 0===u)return{filter:function(){return!0},needGeometry:!1};Xc(u)||(u=Nd(u));var E=mc(u,el);if("error"===E.result)throw Error(E.value.map(function(P){return P.key+": "+P.message}).join(", "));return{filter:function(P,fa,pa){return E.value.evaluate(P,fa,{},pa)},needGeometry:id(u)}}function Sc(u,E){return u<E?-1:u>E?1:0}function id(u){if(!Array.isArray(u))return!1;if("within"===u[0])return!0;
for(var E=1;E<u.length;E++)if(id(u[E]))return!0;return!1}function Nd(u){if(!u)return!0;var E=u[0];return 1>=u.length?"any"!==E:"\x3d\x3d"===E?Rd(u[1],u[2],"\x3d\x3d"):"!\x3d"===E?Ne(Rd(u[1],u[2],"\x3d\x3d")):"\x3c"===E||"\x3e"===E||"\x3c\x3d"===E||"\x3e\x3d"===E?Rd(u[1],u[2],E):"any"===E?["any"].concat(u.slice(1).map(Nd)):"all"===E?["all"].concat(u.slice(1).map(Nd)):"none"===E?["all"].concat(u.slice(1).map(Nd).map(Ne)):"in"===E?Wd(u[1],u.slice(2)):"!in"===E?Ne(Wd(u[1],u.slice(2))):"has"===E?Se(u[1]):
"!has"===E?Ne(Se(u[1])):"within"===E?u:!0}function Rd(u,E,P){switch(u){case "$type":return["filter-type-"+P,E];case "$id":return["filter-id-"+P,E];default:return["filter-"+P,u,E]}}function Wd(u,E){if(0===E.length)return!1;switch(u){case "$type":return["filter-type-in",["literal",E]];case "$id":return["filter-id-in",["literal",E]];default:return 200<E.length&&!E.some(function(P){return typeof P!==typeof E[0]})?["filter-in-large",u,["literal",E.sort(Sc)]]:["filter-in-small",u,["literal",E]]}}function Se(u){switch(u){case "$type":return!0;
case "$id":return["filter-has-id"];default:return["filter-has",u]}}function Ne(u){return["!",u]}function te(u){return Xc(qa(u.value))?cd(ka({},u,{expressionContext:"filter",valueSpec:{value:"boolean"}})):qf(u)}function qf(u){var E=u.value,P=u.key;if("array"!==Tc(E))return[new Na(P,E,"array expected, "+Tc(E)+" found")];var fa=u.styleSpec,pa=[];if(1>E.length)return[new Na(P,E,"filter array must have at least 1 element")];pa=pa.concat(Nc({key:P+"[0]",value:E[0],valueSpec:fa.filter_operator,style:u.style,
styleSpec:u.styleSpec}));switch(na(E[0])){case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":2<=E.length&&"$type"===na(E[1])&&pa.push(new Na(P,E,'"$type" cannot be use with operator "'+E[0]+'"'));case "\x3d\x3d":case "!\x3d":3!==E.length&&pa.push(new Na(P,E,'filter array for operator "'+E[0]+'" must have 3 elements'));case "in":case "!in":if(2<=E.length){var wa=Tc(E[1]);"string"!==wa&&pa.push(new Na(P+"[1]",E[1],"string expected, "+wa+" found"))}for(var Ea=2;Ea<E.length;Ea++)wa=Tc(E[Ea]),"$type"===
na(E[1])?pa=pa.concat(Nc({key:P+"["+Ea+"]",value:E[Ea],valueSpec:fa.geometry_type,style:u.style,styleSpec:u.styleSpec})):"string"!==wa&&"number"!==wa&&"boolean"!==wa&&pa.push(new Na(P+"["+Ea+"]",E[Ea],"string, number, or boolean expected, "+wa+" found"));break;case "any":case "all":case "none":for(fa=1;fa<E.length;fa++)pa=pa.concat(qf({key:P+"["+fa+"]",value:E[fa],style:u.style,styleSpec:u.styleSpec}));break;case "has":case "!has":wa=Tc(E[1]);2!==E.length?pa.push(new Na(P,E,'filter array for "'+E[0]+
'" operator must have 2 elements')):"string"!==wa&&pa.push(new Na(P+"[1]",E[1],"string expected, "+wa+" found"));break;case "within":wa=Tc(E[1]),2!==E.length?pa.push(new Na(P,E,'filter array for "'+E[0]+'" operator must have 2 elements')):"object"!==wa&&pa.push(new Na(P+"[1]",E[1],"object expected, "+wa+" found"))}return pa}function sf(u,E){var P=u.key,fa=u.style,pa=u.styleSpec,wa=u.value,Ea=u.objectKey,Va=pa[E+"_"+u.layerType];if(!Va)return[];var Za=Ea.match(/^(.*)-transition$/);if("paint"===E&&
Za&&Va[Za[1]]&&Va[Za[1]].transition)return bf({key:P,value:wa,valueSpec:pa.transition,style:fa,styleSpec:pa});Va=u.valueSpec||Va[Ea];if(!Va)return[new Na(P,wa,'unknown property "'+Ea+'"')];var ib;if("string"===Tc(wa)&&dc(Va)&&!Va.tokens&&(ib=/^{([^}]+)}$/.exec(wa)))return[new Na(P,wa,'"'+Ea+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(ib[1])+" }`.")];ib=[];"symbol"===u.layerType&&("text-field"===Ea&&fa&&!fa.glyphs&&
ib.push(new Na(P,wa,'use of "text-field" requires a style "glyphs" property')),"text-font"===Ea&&tb(qa(wa))&&"identity"===na(wa.type)&&ib.push(new Na(P,wa,'"text-font" does not support identity functions')));return ib.concat(bf({key:u.key,value:wa,valueSpec:Va,style:fa,styleSpec:pa,expressionContext:"property",propertyType:E,propertyKey:Ea}))}function of(u){return sf(u,"paint")}function vf(u){return sf(u,"layout")}function Bf(u){var E=[],P=u.value,fa=u.key,pa=u.style,wa=u.styleSpec;P.type||P.ref||
E.push(new Na(fa,P,'either "type" or "ref" is required'));var Ea=na(P.type),Va=na(P.ref);if(P.id)for(var Za=na(P.id),ib=0;ib<u.arrayIndex;ib++){var Hb=pa.layers[ib];na(Hb.id)===Za&&E.push(new Na(fa,P.id,'duplicate layer id "'+P.id+'", previously used at line '+Hb.id.__line__))}if("ref"in P){["type","source","source-layer","filter","layout"].forEach(function(ic){ic in P&&E.push(new Na(fa,P[ic],'"'+ic+'" is prohibited for ref layers'))});var Sb;pa.layers.forEach(function(ic){na(ic.id)===Va&&(Sb=ic)});
Sb?Sb.ref?E.push(new Na(fa,P.ref,"ref cannot reference another ref layer")):Ea=na(Sb.type):E.push(new Na(fa,P.ref,'ref layer "'+Va+'" not found'))}else"background"!==Ea&&(P.source?(Za=(pa=pa.sources&&pa.sources[P.source])&&na(pa.type),pa?"vector"===Za&&"raster"===Ea?E.push(new Na(fa,P.source,'layer "'+P.id+'" requires a raster source')):"raster"===Za&&"raster"!==Ea?E.push(new Na(fa,P.source,'layer "'+P.id+'" requires a vector source')):"vector"!==Za||P["source-layer"]?"raster-dem"===Za&&"hillshade"!==
Ea?E.push(new Na(fa,P.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==Ea||!P.paint||!P.paint["line-gradient"]||"geojson"===Za&&pa.lineMetrics||E.push(new Na(fa,P,'layer "'+P.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):E.push(new Na(fa,P,'layer "'+P.id+'" must specify a "source-layer"')):E.push(new Na(fa,P.source,'source "'+P.source+'" not found'))):E.push(new Na(fa,P,'missing required property "source"')));return E=
E.concat(Bd({key:fa,value:P,valueSpec:wa.layer,style:u.style,styleSpec:u.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return bf({key:fa+".type",value:P.type,valueSpec:wa.layer.type,style:u.style,styleSpec:u.styleSpec,object:P,objectKey:"type"})},filter:te,layout:function(ic){return Bd({layer:P,key:ic.key,value:ic.value,style:ic.style,styleSpec:ic.styleSpec,objectElementValidators:{"*":function(Dc){return vf(ka({layerType:Ea},Dc))}}})},paint:function(ic){return Bd({layer:P,
key:ic.key,value:ic.value,style:ic.style,styleSpec:ic.styleSpec,objectElementValidators:{"*":function(Dc){return of(ka({layerType:Ea},Dc))}}})}}}))}function Sd(u){var E=u.value;u=u.key;var P=Tc(E);return"string"!==P?[new Na(u,E,"string expected, "+P+" found")]:[]}function De(u){var E=u.value,P=u.key,fa=u.styleSpec,pa=u.style;if(!E.type)return[new Na(P,E,'"type" is required')];var wa=na(E.type);switch(wa){case "vector":case "raster":case "raster-dem":return u=Bd({key:P,value:E,valueSpec:fa["source_"+
wa.replace("-","_")],style:u.style,styleSpec:fa,objectElementValidators:Yj});case "geojson":u=Bd({key:P,value:E,valueSpec:fa.source_geojson,style:pa,styleSpec:fa,objectElementValidators:Yj});if(E.cluster)for(var Ea in E.clusterProperties)fa=E.clusterProperties[Ea],pa=fa[0],pa="string"===typeof pa?[pa,["accumulated"],["get",Ea]]:pa,u.push.apply(u,cd({key:P+"."+Ea+".map",value:fa[1],expressionContext:"cluster-map"})),u.push.apply(u,cd({key:P+"."+Ea+".reduce",value:pa,expressionContext:"cluster-reduce"}));
return u;case "video":return Bd({key:P,value:E,valueSpec:fa.source_video,style:pa,styleSpec:fa});case "image":return Bd({key:P,value:E,valueSpec:fa.source_image,style:pa,styleSpec:fa});case "canvas":return[new Na(P,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Nc({key:P+".type",value:E.type,valueSpec:{values:"vector raster raster-dem geojson video image".split(" ")},style:pa,styleSpec:fa})}}function hf(u){var E=u.value,
P=u.styleSpec,fa=P.light;u=u.style;var pa=[],wa=Tc(E);if(void 0===E)return pa;if("object"!==wa)return pa=pa.concat([new Na("light",E,"object expected, "+wa+" found")]);for(var Ea in E)pa=(wa=Ea.match(/^(.*)-transition$/))&&fa[wa[1]]&&fa[wa[1]].transition?pa.concat(bf({key:Ea,value:E[Ea],valueSpec:P.transition,style:u,styleSpec:P})):fa[Ea]?pa.concat(bf({key:Ea,value:E[Ea],valueSpec:fa[Ea],style:u,styleSpec:P})):pa.concat([new Na(Ea,E[Ea],'unknown property "'+Ea+'"')]);return pa}function bf(u){var E=
u.value,P=u.valueSpec,fa=u.styleSpec;return P.expression&&tb(na(E))?Lc(u):P.expression&&Vb(qa(E))?cd(u):P.type&&zi[P.type]?zi[P.type](u):Bd(ka({},u,{valueSpec:P.type?fa[P.type]:P}))}function Qe(u){var E=u.value,P=u.key;u=Sd(u);if(u.length)return u;-1===E.indexOf("{fontstack}")&&u.push(new Na(P,E,'"glyphs" url must include a "{fontstack}" token'));-1===E.indexOf("{range}")&&u.push(new Na(P,E,'"glyphs" url must include a "{range}" token'));return u}function He(u,E){void 0===E&&(E=Fa);var P=[];P=P.concat(bf({key:"",
value:u,valueSpec:E.$root,styleSpec:E,style:u,objectElementValidators:{glyphs:Qe,"*":function(){return[]}}}));u.constants&&(P=P.concat(la({key:"constants",value:u.constants,style:u,styleSpec:E})));return $e(P)}function $e(u){return[].concat(u).sort(function(E,P){return E.line-P.line})}function df(u){return function(){for(var E=[],P=arguments.length;P--;)E[P]=arguments[P];return $e(u.apply(this,E))}}function Rc(u,E){var P=!1;if(E&&E.length)for(var fa=0;fa<E.length;fa+=1)u.fire(new ua(Error(E[fa].message))),
P=!0;return P}function Gd(u,E,P){var fa=this.cells=[];if(u instanceof ArrayBuffer){this.arrayBuffer=u;var pa=new Int32Array(this.arrayBuffer);u=pa[0];E=pa[1];P=pa[2];this.d=E+2*P;for(var wa=0;wa<this.d*this.d;wa++){var Ea=pa[Ai+wa],Va=pa[Ai+wa+1];fa.push(Ea===Va?null:pa.subarray(Ea,Va))}wa=pa[Ai+fa.length+1];this.keys=pa.subarray(pa[Ai+fa.length],wa);this.bboxes=pa.subarray(wa);this.insert=this._insertReadonly}else{this.d=E+2*P;for(pa=0;pa<this.d*this.d;pa++)fa.push([]);this.keys=[];this.bboxes=[]}this.n=
E;this.extent=u;this.padding=P;this.scale=E/u;this.uid=0;E=P/E*u;this.min=-E;this.max=u+E}function Mb(u,E,P){void 0===P&&(P={});Object.defineProperty(E,"_classRegistryKey",{value:u,writeable:!1});vj[u]={klass:E,omit:P.omit||[],shallow:P.shallow||[]}}function $b(u){return u&&"undefined"!==typeof ArrayBuffer&&(u instanceof ArrayBuffer||u.constructor&&"ArrayBuffer"===u.constructor.name)}function Mc(u,E){if(null===u||void 0===u||"boolean"===typeof u||"number"===typeof u||"string"===typeof u||u instanceof
Boolean||u instanceof Number||u instanceof String||u instanceof Date||u instanceof RegExp)return u;if($b(u)||gg&&u instanceof gg)return E&&E.push(u),u;if(ArrayBuffer.isView(u))return E&&E.push(u.buffer),u;if(u instanceof Zj)return E&&E.push(u.data.buffer),u;if(Array.isArray(u)){for(var P=[],fa=0;fa<u.length;fa+=1)P.push(Mc(u[fa],E));return P}if("object"===typeof u){var pa=u.constructor;P=pa._classRegistryKey;if(!P)throw Error("can't serialize object of unregistered class");fa=pa.serialize?pa.serialize(u,
E):{};if(!pa.serialize){for(var wa in u)!u.hasOwnProperty(wa)||0<=vj[P].omit.indexOf(wa)||(pa=u[wa],fa[wa]=0<=vj[P].shallow.indexOf(wa)?pa:Mc(pa,E));u instanceof Error&&(fa.message=u.message)}if(fa.$name)throw Error("$name property is reserved for worker serialization logic.");"Object"!==P&&(fa.$name=P);return fa}throw Error("can't serialize object of type "+typeof u);}function Hd(u){if(null===u||void 0===u||"boolean"===typeof u||"number"===typeof u||"string"===typeof u||u instanceof Boolean||u instanceof
Number||u instanceof String||u instanceof Date||u instanceof RegExp||$b(u)||gg&&u instanceof gg||ArrayBuffer.isView(u)||u instanceof Zj)return u;if(Array.isArray(u))return u.map(Hd);if("object"===typeof u){var E=u.$name||"Object",P=vj[E].klass;if(!P)throw Error("can't deserialize unregistered class "+E);if(P.deserialize)return P.deserialize(u);P=Object.create(P.prototype);for(var fa=0,pa=Object.keys(u);fa<pa.length;fa+=1){var wa=pa[fa];if("$name"!==wa){var Ea=u[wa];P[wa]=0<=vj[E].shallow.indexOf(wa)?
Ea:Hd(Ea)}}return P}throw Error("can't deserialize object of type "+typeof u);}function qd(u){for(var E=0;E<u.length;E+=1)if(Id(u[E].charCodeAt(0)))return!0;return!1}function qe(u){for(var E=0;E<u.length;E+=1){var P=u[E].charCodeAt(0);if(Ce.Arabic(P)||Ce["Arabic Supplement"](P)||Ce["Arabic Extended-A"](P)||Ce["Arabic Presentation Forms-A"](P)||Ce["Arabic Presentation Forms-B"](P))return!1}return!0}function Id(u){return 746===u||747===u?!0:4352>u?!1:Ce["Bopomofo Extended"](u)||Ce.Bopomofo(u)||Ce["CJK Compatibility Forms"](u)&&
!(65097<=u&&65103>=u)||Ce["CJK Compatibility Ideographs"](u)||Ce["CJK Compatibility"](u)||Ce["CJK Radicals Supplement"](u)||Ce["CJK Strokes"](u)||Ce["CJK Symbols and Punctuation"](u)&&!(12296<=u&&12305>=u||12308<=u&&12319>=u)&&12336!==u||Ce["CJK Unified Ideographs Extension A"](u)||Ce["CJK Unified Ideographs"](u)||Ce["Enclosed CJK Letters and Months"](u)||Ce["Hangul Compatibility Jamo"](u)||Ce["Hangul Jamo Extended-A"](u)||Ce["Hangul Jamo Extended-B"](u)||Ce["Hangul Jamo"](u)||Ce["Hangul Syllables"](u)||
Ce.Hiragana(u)||Ce["Ideographic Description Characters"](u)||Ce.Kanbun(u)||Ce["Kangxi Radicals"](u)||Ce["Katakana Phonetic Extensions"](u)||Ce.Katakana(u)&&12540!==u||Ce["Halfwidth and Fullwidth Forms"](u)&&!(65288===u||65289===u||65293===u||65306<=u&&65310>=u||65339===u||65341===u||65343===u||65371<=u&&65503>=u||65507===u||65512<=u&&65519>=u)||Ce["Small Form Variants"](u)&&!(65112<=u&&65118>=u||65123<=u&&65126>=u)||Ce["Unified Canadian Aboriginal Syllabics"](u)||Ce["Unified Canadian Aboriginal Syllabics Extended"](u)||
Ce["Vertical Forms"](u)||Ce["Yijing Hexagram Symbols"](u)||Ce["Yi Syllables"](u)||Ce["Yi Radicals"](u)?!0:!1}function ue(u){var E;(E=Id(u))||(E=Ce["Latin-1 Supplement"](u)&&(167===u||169===u||174===u||177===u||188===u||189===u||190===u||215===u||247===u)||Ce["General Punctuation"](u)&&(8214===u||8224===u||8225===u||8240===u||8241===u||8251===u||8252===u||8258===u||8263===u||8264===u||8265===u||8273===u)||Ce["Letterlike Symbols"](u)||Ce["Number Forms"](u)||Ce["Miscellaneous Technical"](u)&&(8960<=
u&&8967>=u||8972<=u&&8991>=u||8996<=u&&9E3>=u||9003===u||9085<=u&&9114>=u||9150<=u&&9165>=u||9167===u||9169<=u&&9179>=u||9186<=u&&9215>=u)||Ce["Control Pictures"](u)&&9251!==u||Ce["Optical Character Recognition"](u)||Ce["Enclosed Alphanumerics"](u)||Ce["Geometric Shapes"](u)||Ce["Miscellaneous Symbols"](u)&&!(9754<=u&&9759>=u)||Ce["Miscellaneous Symbols and Arrows"](u)&&(11026<=u&&11055>=u||11088<=u&&11097>=u||11192<=u&&11243>=u)||Ce["CJK Symbols and Punctuation"](u)||Ce.Katakana(u)||Ce["Private Use Area"](u)||
Ce["CJK Compatibility Forms"](u)||Ce["Small Form Variants"](u)||Ce["Halfwidth and Fullwidth Forms"](u)||8734===u||8756===u||8757===u||9984<=u&&10087>=u||10102<=u&&10131>=u||65532===u||65533===u?!0:!1);return!E}function Be(u){return 1424<=u&&2303>=u||Ce["Arabic Presentation Forms-A"](u)||Ce["Arabic Presentation Forms-B"](u)}function oe(){zk.fire(new da("pluginStateChange",{pluginStatus:ch,pluginURL:gi}))}function zb(u,E){void 0===E&&(E=1);var P=0,fa=0;u=u.map(function(wa){var Ea=Ak[wa.type].BYTES_PER_ELEMENT,
Va=P=qc(P,Math.max(E,Ea)),Za=wa.components||1;fa=Math.max(fa,Ea);P+=Ea*Za;return{name:wa.name,type:wa.type,components:Za,offset:Va}});var pa=qc(P,Math.max(fa,E));return{members:u,size:pa,alignment:E}}function qc(u,E){return Math.ceil(u/E)*E}function Yb(u,E){u=d(Math.floor(u),0,255);E=d(Math.floor(E),0,255);return 256*u+E}function Bc(u){var E=+u;return!isNaN(E)&&E<=Bk?E:wj(String(u))}function bd(u,E,P,fa){for(;P<fa;){for(var pa=u[P+fa>>1],wa=P-1,Ea=fa+1;;){do wa++;while(u[wa]<pa);do Ea--;while(u[Ea]>
pa);if(wa>=Ea)break;ed(u,wa,Ea);ed(E,3*wa,3*Ea);ed(E,3*wa+1,3*Ea+1);ed(E,3*wa+2,3*Ea+2)}Ea-P<fa-Ea?(bd(u,E,P,Ea),P=Ea+1):(bd(u,E,Ea+1,fa),fa=Ea)}}function ed(u,E,P){var fa=u[E];u[E]=u[P];u[P]=fa}function Vc(u){return[Yb(255*u.r,255*u.g),Yb(255*u.b,255*u.a)]}function Pc(u,E,P){var fa={color:{source:kk,composite:lk},number:{source:mk,composite:kk}};return(u={"line-pattern":{source:kj,composite:kj},"fill-pattern":{source:kj,composite:kj},"fill-extrusion-pattern":{source:kj,composite:kj}}[u])&&u[P]||
fa[E][P]}function yc(u){var E=8192/u.extent;u=u.loadGeometry();for(var P=0;P<u.length;P++)for(var fa=u[P],pa=0;pa<fa.length;pa++){var wa=fa[pa];wa.x=Math.round(wa.x*E);wa.y=Math.round(wa.y*E);if(wa.x<Ni.min||wa.x>Ni.max||wa.y<Ni.min||wa.y>Ni.max)D("Geometry exceeds allowed extent, reduce your vector tile buffer size"),wa.x=d(wa.x,Ni.min,Ni.max),wa.y=d(wa.y,Ni.min,Ni.max)}return u}function vc(u,E,P,fa,pa){u.emplaceBack(2*E+(fa+1)/2,2*P+(pa+1)/2)}function oc(u,E){for(var P=0;P<u.length;P++)if(Oe(E,
u[P]))return!0;for(P=0;P<E.length;P++)if(Oe(u,E[P]))return!0;return Qd(u,E)?!0:!1}function vd(u,E){if(1===u.length)return Td(E,u[0]);for(var P=0;P<E.length;P++)for(var fa=E[P],pa=0;pa<fa.length;pa++)if(Oe(u,fa[pa]))return!0;for(P=0;P<u.length;P++)if(Td(E,u[P]))return!0;for(P=0;P<E.length;P++)if(Qd(u,E[P]))return!0;return!1}function Qd(u,E){if(0===u.length||0===E.length)return!1;for(var P=0;P<u.length-1;P++)for(var fa=u[P],pa=u[P+1],wa=0;wa<E.length-1;wa++){var Ea=fa,Va=pa,Za=E[wa],ib=E[wa+1];if(C(Ea,
Za,ib)!==C(Va,Za,ib)&&C(Ea,Va,Za)!==C(Ea,Va,ib))return!0}return!1}function Yd(u,E,P){P*=P;if(1===E.length)return u.distSqr(E[0])<P;for(var fa=1;fa<E.length;fa++)if(xe(u,E[fa-1],E[fa])<P)return!0;return!1}function xe(u,E,P){var fa=E.distSqr(P);if(0===fa)return u.distSqr(E);fa=((u.x-E.x)*(P.x-E.x)+(u.y-E.y)*(P.y-E.y))/fa;return 0>fa?u.distSqr(E):1<fa?u.distSqr(P):u.distSqr(P.sub(E)._mult(fa)._add(E))}function Td(u,E){for(var P=!1,fa,pa,wa,Ea=0;Ea<u.length;Ea++){fa=u[Ea];var Va=0;for(wa=fa.length-1;Va<
fa.length;wa=Va++)pa=fa[Va],wa=fa[wa],pa.y>E.y!==wa.y>E.y&&E.x<(wa.x-pa.x)*(E.y-pa.y)/(wa.y-pa.y)+pa.x&&(P=!P)}return P}function Oe(u,E){for(var P=!1,fa=0,pa=u.length-1;fa<u.length;pa=fa++){var wa=u[fa];pa=u[pa];wa.y>E.y!==pa.y>E.y&&E.x<(pa.x-wa.x)*(E.y-wa.y)/(pa.y-wa.y)+wa.x&&(P=!P)}return P}function Ve(u,E,P){var fa=E.paint.get(u).value;return"constant"===fa.kind?fa.value:P.programConfigurations.get(E.id).getMaxValue(u)}function wf(u){return Math.sqrt(u[0]*u[0]+u[1]*u[1])}function Me(u,E,P,fa,pa){if(!E[0]&&
!E[1])return u;E=Ue.convert(E)._mult(pa);"viewport"===P&&E._rotate(-fa);P=[];for(fa=0;fa<u.length;fa++)P.push(u[fa].sub(E));return P}function Af(u){u[0]=1;u[1]=0;u[2]=0;u[3]=0;u[4]=0;u[5]=1;u[6]=0;u[7]=0;u[8]=0;u[9]=0;u[10]=1;u[11]=0;u[12]=0;u[13]=0;u[14]=0;u[15]=1;return u}function ug(u,E,P){var fa=E[0],pa=E[1],wa=E[2],Ea=E[3],Va=E[4],Za=E[5],ib=E[6],Hb=E[7],Sb=E[8],ic=E[9],Dc=E[10],wc=E[11],Hc=E[12],ud=E[13],Zd=E[14];E=E[15];var Ad=P[0],Jd=P[1],be=P[2],ke=P[3];u[0]=Ad*fa+Jd*Va+be*Sb+ke*Hc;u[1]=
Ad*pa+Jd*Za+be*ic+ke*ud;u[2]=Ad*wa+Jd*ib+be*Dc+ke*Zd;u[3]=Ad*Ea+Jd*Hb+be*wc+ke*E;Ad=P[4];Jd=P[5];be=P[6];ke=P[7];u[4]=Ad*fa+Jd*Va+be*Sb+ke*Hc;u[5]=Ad*pa+Jd*Za+be*ic+ke*ud;u[6]=Ad*wa+Jd*ib+be*Dc+ke*Zd;u[7]=Ad*Ea+Jd*Hb+be*wc+ke*E;Ad=P[8];Jd=P[9];be=P[10];ke=P[11];u[8]=Ad*fa+Jd*Va+be*Sb+ke*Hc;u[9]=Ad*pa+Jd*Za+be*ic+ke*ud;u[10]=Ad*wa+Jd*ib+be*Dc+ke*Zd;u[11]=Ad*Ea+Jd*Hb+be*wc+ke*E;Ad=P[12];Jd=P[13];be=P[14];ke=P[15];u[12]=Ad*fa+Jd*Va+be*Sb+ke*Hc;u[13]=Ad*pa+Jd*Za+be*ic+ke*ud;u[14]=Ad*wa+Jd*ib+be*Dc+ke*
Zd;u[15]=Ad*Ea+Jd*Hb+be*wc+ke*E;return u}function vg(){var u=new Ih(3);Ih!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0);return u}function Gg(){var u=new Ih(4);Ih!=Float32Array&&(u[0]=0,u[1]=0,u[2]=0,u[3]=0);return u}function ih(u,E,P){var fa=E[0],pa=E[1],wa=E[2];E=E[3];u[0]=P[0]*fa+P[4]*pa+P[8]*wa+P[12]*E;u[1]=P[1]*fa+P[5]*pa+P[9]*wa+P[13]*E;u[2]=P[2]*fa+P[6]*pa+P[10]*wa+P[14]*E;u[3]=P[3]*fa+P[7]*pa+P[11]*wa+P[15]*E;return u}function Nh(){var u=new Ih(2);Ih!=Float32Array&&(u[0]=0,u[1]=0);return u}function qh(u,
E){u=ih([],[u.x,u.y,0,1],E);return new Ue(u[0]/u[3],u[1]/u[3])}function Yg(u,E){return u.map(function(P){return qh(P,E)})}function jh(u,E,P,fa){var pa=E.width;E=E.height;if(!fa)fa=new Uint8Array(pa*E*P);else if(fa instanceof Uint8ClampedArray)fa=new Uint8Array(fa.buffer);else if(fa.length!==pa*E*P)throw new RangeError("mismatched image size");u.width=pa;u.height=E;u.data=fa;return u}function kh(u,E,P){var fa=E.width;E=E.height;if(fa!==u.width||E!==u.height){var pa=jh({},{width:fa,height:E},P);fh(u,
pa,{x:0,y:0},{x:0,y:0},{width:Math.min(u.width,fa),height:Math.min(u.height,E)},P);u.width=fa;u.height=E;u.data=pa.data}}function fh(u,E,P,fa,pa,wa){if(0===pa.width||0===pa.height)return E;if(pa.width>u.width||pa.height>u.height||P.x>u.width-pa.width||P.y>u.height-pa.height)throw new RangeError("out of range source coordinates for image copy");if(pa.width>E.width||pa.height>E.height||fa.x>E.width-pa.width||fa.y>E.height-pa.height)throw new RangeError("out of range destination coordinates for image copy");
for(var Ea=u.data,Va=E.data,Za=0;Za<pa.height;Za++)for(var ib=((P.y+Za)*u.width+P.x)*wa,Hb=((fa.y+Za)*E.width+fa.x)*wa,Sb=0;Sb<pa.width*wa;Sb++)Va[Hb+Sb]=Ea[ib+Sb];return E}function ei(u,E){for(var P=new Uint8Array(1024),fa={},pa=0,wa=0;256>pa;pa++,wa+=4){fa[E]=pa/255;var Ea=u.evaluate(fa);P[wa+0]=Math.floor(255*Ea.r/Ea.a);P[wa+1]=Math.floor(255*Ea.g/Ea.a);P[wa+2]=Math.floor(255*Ea.b/Ea.a);P[wa+3]=Math.floor(255*Ea.a)}return new dh({width:256,height:1},P)}function gh(u,E,P){P=P||2;var fa=E&&E.length,
pa=fa?E[0]*P:u.length,wa=ng(u,0,pa,P,!0),Ea=[];if(!wa||wa.next===wa.prev)return Ea;var Va;if(fa){var Za=P;fa=[];var ib;var Hb=0;for(ib=E.length;Hb<ib;Hb++){var Sb=E[Hb]*Za;var ic=Hb<ib-1?E[Hb+1]*Za:u.length;Sb=ng(u,Sb,ic,Za,!1);Sb===Sb.next&&(Sb.steiner=!0);ic=fa;var Dc=ic.push,wc=Sb,Hc=Sb;do{if(wc.x<Hc.x||wc.x===Hc.x&&wc.y<Hc.y)Hc=wc;wc=wc.next}while(wc!==Sb);Dc.call(ic,Hc)}fa.sort(Tg);for(Hb=0;Hb<fa.length;Hb++){Za=fa[Hb];E=wa;if(E=rh(Za,E))Za=Gh(E,Za),Zf(E,E.next),Zf(Za,Za.next);wa=Zf(wa,wa.next)}}if(u.length>
80*P){var ud=Va=u[0];var Zd=fa=u[1];for(Za=P;Za<pa;Za+=P)Hb=u[Za],E=u[Za+1],Hb<ud&&(ud=Hb),E<Zd&&(Zd=E),Hb>Va&&(Va=Hb),E>fa&&(fa=E);Va=Math.max(Va-ud,fa-Zd);Va=0!==Va?1/Va:0}og(wa,Ea,P,ud,Zd,Va);return Ea}function ng(u,E,P,fa,pa){if(pa===0<wh(u,E,P,fa))for(pa=E;pa<P;pa+=fa)var wa=ag(pa,u[pa],u[pa+1],wa);else for(pa=P-fa;pa>=E;pa-=fa)wa=ag(pa,u[pa],u[pa+1],wa);wa&&Zg(wa,wa.next)&&(wg(wa),wa=wa.next);return wa}function Zf(u,E){if(!u)return u;E||(E=u);do{var P=!1;if(u.steiner||!Zg(u,u.next)&&0!==Kf(u.prev,
u,u.next))u=u.next;else{wg(u);u=E=u.prev;if(u===u.next)break;P=!0}}while(P||u!==E);return E}function og(u,E,P,fa,pa,wa,Ea){if(u){if(!Ea&&wa){var Va=u,Za=Va;do null===Za.z&&(Za.z=hh(Za.x,Za.y,fa,pa,wa)),Za.prevZ=Za.prev,Za=Za.nextZ=Za.next;while(Za!==Va);Za.prevZ.nextZ=null;Za.prevZ=null;Va=Za;var ib,Hb,Sb,ic,Dc=1;do{Za=Va;var wc=Va=null;for(Hb=0;Za;){Hb++;var Hc=Za;for(ib=Sb=0;ib<Dc&&(Sb++,Hc=Hc.nextZ,Hc);ib++);for(ic=Dc;0<Sb||0<ic&&Hc;)0!==Sb&&(0===ic||!Hc||Za.z<=Hc.z)?(ib=Za,Za=Za.nextZ,Sb--):(ib=
Hc,Hc=Hc.nextZ,ic--),wc?wc.nextZ=ib:Va=ib,ib.prevZ=wc,wc=ib;Za=Hc}wc.nextZ=null;Dc*=2}while(1<Hb)}for(Va=u;u.prev!==u.next;){Za=u.prev;Hc=u.next;if(wa)wc=Hg(u,fa,pa,wa);else a:if(wc=u,Hb=wc.prev,Sb=wc,Dc=wc.next,0<=Kf(Hb,Sb,Dc))wc=!1;else{for(ib=wc.next.next;ib!==wc.prev;){if(lh(Hb.x,Hb.y,Sb.x,Sb.y,Dc.x,Dc.y,ib.x,ib.y)&&0<=Kf(ib.prev,ib,ib.next)){wc=!1;break a}ib=ib.next}wc=!0}if(wc)E.push(Za.i/P),E.push(u.i/P),E.push(Hc.i/P),wg(u),Va=u=Hc.next;else if(u=Hc,u===Va){if(!Ea)og(Zf(u),E,P,fa,pa,wa,1);
else if(1===Ea){u=Zf(u);Ea=E;Va=P;Za=u;do Hc=Za.prev,wc=Za.next.next,!Zg(Hc,wc)&&$f(Hc,Za,Za.next,wc)&&mh(Hc,wc)&&mh(wc,Hc)&&(Ea.push(Hc.i/Va),Ea.push(Za.i/Va),Ea.push(wc.i/Va),wg(Za),wg(Za.next),Za=u=wc),Za=Za.next;while(Za!==u);u=Zf(Za);og(u,E,P,fa,pa,wa,2)}else if(2===Ea)a:{Ea=u;do{for(Va=Ea.next.next;Va!==Ea.prev;){if(Za=Ea.i!==Va.i){Za=Ea;Hc=Va;if(wc=Za.next.i!==Hc.i&&Za.prev.i!==Hc.i){b:{wc=Za;do{if(wc.i!==Za.i&&wc.next.i!==Za.i&&wc.i!==Hc.i&&wc.next.i!==Hc.i&&$f(wc,wc.next,Za,Hc)){wc=!0;break b}wc=
wc.next}while(wc!==Za);wc=!1}wc=!wc}if(wc){if(wc=mh(Za,Hc)&&mh(Hc,Za)){wc=Za;Hb=!1;Sb=(Za.x+Hc.x)/2;Dc=(Za.y+Hc.y)/2;do wc.y>Dc!==wc.next.y>Dc&&wc.next.y!==wc.y&&Sb<(wc.next.x-wc.x)*(Dc-wc.y)/(wc.next.y-wc.y)+wc.x&&(Hb=!Hb),wc=wc.next;while(wc!==Za);wc=Hb}wc=wc&&(Kf(Za.prev,Za,Hc.prev)||Kf(Za,Hc.prev,Hc))||Zg(Za,Hc)&&0<Kf(Za.prev,Za,Za.next)&&0<Kf(Hc.prev,Hc,Hc.next)}Za=wc}if(Za){u=Gh(Ea,Va);Ea=Zf(Ea,Ea.next);u=Zf(u,u.next);og(Ea,E,P,fa,pa,wa);og(u,E,P,fa,pa,wa);break a}Va=Va.next}Ea=Ea.next}while(Ea!==
u)}break}}}}function Hg(u,E,P,fa){var pa=u.prev,wa=u.next;if(0<=Kf(pa,u,wa))return!1;var Ea=pa.x>u.x?pa.x>wa.x?pa.x:wa.x:u.x>wa.x?u.x:wa.x,Va=pa.y>u.y?pa.y>wa.y?pa.y:wa.y:u.y>wa.y?u.y:wa.y,Za=hh(pa.x<u.x?pa.x<wa.x?pa.x:wa.x:u.x<wa.x?u.x:wa.x,pa.y<u.y?pa.y<wa.y?pa.y:wa.y:u.y<wa.y?u.y:wa.y,E,P,fa);E=hh(Ea,Va,E,P,fa);P=u.prevZ;for(fa=u.nextZ;P&&P.z>=Za&&fa&&fa.z<=E;){if(P!==u.prev&&P!==u.next&&lh(pa.x,pa.y,u.x,u.y,wa.x,wa.y,P.x,P.y)&&0<=Kf(P.prev,P,P.next))return!1;P=P.prevZ;if(fa!==u.prev&&fa!==u.next&&
lh(pa.x,pa.y,u.x,u.y,wa.x,wa.y,fa.x,fa.y)&&0<=Kf(fa.prev,fa,fa.next))return!1;fa=fa.nextZ}for(;P&&P.z>=Za;){if(P!==u.prev&&P!==u.next&&lh(pa.x,pa.y,u.x,u.y,wa.x,wa.y,P.x,P.y)&&0<=Kf(P.prev,P,P.next))return!1;P=P.prevZ}for(;fa&&fa.z<=E;){if(fa!==u.prev&&fa!==u.next&&lh(pa.x,pa.y,u.x,u.y,wa.x,wa.y,fa.x,fa.y)&&0<=Kf(fa.prev,fa,fa.next))return!1;fa=fa.nextZ}return!0}function Tg(u,E){return u.x-E.x}function rh(u,E){var P=E,fa=u.x,pa=u.y,wa=-Infinity;do{if(pa<=P.y&&pa>=P.next.y&&P.next.y!==P.y){var Ea=
P.x+(pa-P.y)*(P.next.x-P.x)/(P.next.y-P.y);if(Ea<=fa&&Ea>wa){wa=Ea;if(Ea===fa){if(pa===P.y)return P;if(pa===P.next.y)return P.next}var Va=P.x<P.next.x?P:P.next}}P=P.next}while(P!==E);if(!Va)return null;if(fa===wa)return Va;E=Va;Ea=Va.x;var Za=Va.y,ib=Infinity;P=Va;do{if(fa>=P.x&&P.x>=Ea&&fa!==P.x&&lh(pa<Za?fa:wa,pa,Ea,Za,pa<Za?wa:fa,pa,P.x,P.y)){var Hb=Math.abs(pa-P.y)/(fa-P.x);var Sb;if((Sb=mh(P,u))&&!(Sb=Hb<ib)&&(Sb=Hb===ib)&&!(Sb=P.x>Va.x)&&(Sb=P.x===Va.x)){Sb=Va;var ic=P;Sb=0>Kf(Sb.prev,Sb,ic.prev)&&
0>Kf(ic.next,Sb,Sb.next)}Sb&&(Va=P,ib=Hb)}P=P.next}while(P!==E);return Va}function hh(u,E,P,fa,pa){u=32767*(u-P)*pa;E=32767*(E-fa)*pa;u=(u|u<<8)&16711935;u=(u|u<<4)&252645135;u=(u|u<<2)&858993459;E=(E|E<<8)&16711935;E=(E|E<<4)&252645135;E=(E|E<<2)&858993459;return(u|u<<1)&1431655765|((E|E<<1)&1431655765)<<1}function lh(u,E,P,fa,pa,wa,Ea,Va){return 0<=(pa-Ea)*(E-Va)-(u-Ea)*(wa-Va)&&0<=(u-Ea)*(fa-Va)-(P-Ea)*(E-Va)&&0<=(P-Ea)*(wa-Va)-(pa-Ea)*(fa-Va)}function Kf(u,E,P){return(E.y-u.y)*(P.x-E.x)-(E.x-
u.x)*(P.y-E.y)}function Zg(u,E){return u.x===E.x&&u.y===E.y}function $f(u,E,P,fa){var pa=vh(Kf(u,E,P)),wa=vh(Kf(u,E,fa)),Ea=vh(Kf(P,fa,u)),Va=vh(Kf(P,fa,E));return pa!==wa&&Ea!==Va||0===pa&&Nf(u,P,E)||0===wa&&Nf(u,fa,E)||0===Ea&&Nf(P,u,fa)||0===Va&&Nf(P,E,fa)?!0:!1}function Nf(u,E,P){return E.x<=Math.max(u.x,P.x)&&E.x>=Math.min(u.x,P.x)&&E.y<=Math.max(u.y,P.y)&&E.y>=Math.min(u.y,P.y)}function vh(u){return 0<u?1:0>u?-1:0}function mh(u,E){return 0>Kf(u.prev,u,u.next)?0<=Kf(u,E,u.next)&&0<=Kf(u,u.prev,
E):0>Kf(u,E,u.prev)||0>Kf(u,u.next,E)}function Gh(u,E){var P=new nh(u.i,u.x,u.y),fa=new nh(E.i,E.x,E.y),pa=u.next,wa=E.prev;u.next=E;E.prev=u;P.next=pa;pa.prev=P;fa.next=P;P.prev=fa;wa.next=fa;fa.prev=wa;return fa}function ag(u,E,P,fa){u=new nh(u,E,P);fa?(u.next=fa.next,u.prev=fa,fa.next.prev=u,fa.next=u):(u.prev=u,u.next=u);return u}function wg(u){u.next.prev=u.prev;u.prev.next=u.next;u.prevZ&&(u.prevZ.nextZ=u.nextZ);u.nextZ&&(u.nextZ.prevZ=u.prevZ)}function nh(u,E,P){this.i=u;this.x=E;this.y=P;
this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function wh(u,E,P,fa){for(var pa=0,wa=P-fa;E<P;E+=fa)pa+=(u[wa]-u[E])*(u[E+1]+u[wa+1]),wa=E;return pa}function Ha(u,E,P,fa,pa){for(;fa>P;){if(600<fa-P){var wa=fa-P+1,Ea=E-P+1,Va=Math.log(wa),Za=.5*Math.exp(2*Va/3);Va=.5*Math.sqrt(Va*Za*(wa-Za)/wa)*(0>Ea-wa/2?-1:1);Ha(u,E,Math.max(P,Math.floor(E-Ea*Za/wa+Va)),Math.min(fa,Math.floor(E+(wa-Ea)*Za/wa+Va)),pa)}wa=u[E];Ea=P;Za=fa;Ga(u,P,E);for(0<pa(u[fa],wa)&&Ga(u,P,fa);Ea<Za;){Ga(u,
Ea,Za);Ea++;for(Za--;0>pa(u[Ea],wa);)Ea++;for(;0<pa(u[Za],wa);)Za--}0===pa(u[P],wa)?Ga(u,P,Za):(Za++,Ga(u,Za,fa));Za<=E&&(P=Za+1);E<=Za&&(fa=Za-1)}}function Ga(u,E,P){var fa=u[E];u[E]=u[P];u[P]=fa}function Oa(u,E){return u<E?-1:u>E?1:0}function Sa(u,E){var P=u.length;if(1>=P)return[u];for(var fa=[],pa,wa,Ea=0;Ea<P;Ea++){var Va=u[Ea];for(var Za=0,ib=0,Hb=Va.length,Sb=Hb-1,ic;ib<Hb;Sb=ib++)ic=Va[ib],Sb=Va[Sb],Za+=(Sb.x-ic.x)*(ic.y+Sb.y);Va=Za;0!==Va&&(u[Ea].area=Math.abs(Va),void 0===wa&&(wa=0>Va),
wa===0>Va?(pa&&fa.push(pa),pa=[u[Ea]]):pa.push(u[Ea]))}pa&&fa.push(pa);if(1<E)for(u=0;u<fa.length;u++)fa[u].length<=E||(P=fa[u],Ha(P,E,1,fa[u].length-1||P.length-1,eb||Oa),fa[u]=fa[u].slice(0,E));return fa}function eb(u,E){return E.area-u.area}function lb(u,E,P){P=P.patternDependencies;for(var fa=!1,pa=0;pa<E.length;pa+=1){var wa=E[pa].paint.get(u+"-pattern");wa.isConstant()||(fa=!0);if(wa=wa.constantOr(null))fa=!0,P[wa.to]=!0,P[wa.from]=!0}return fa}function Cb(u,E,P,fa,pa){for(var wa=pa.patternDependencies,
Ea=0;Ea<E.length;Ea+=1){var Va=E[Ea],Za=Va.paint.get(u+"-pattern").value;if("constant"!==Za.kind){var ib=Za.evaluate({zoom:fa-1},P,{},pa.availableImages),Hb=Za.evaluate({zoom:fa},P,{},pa.availableImages);Za=Za.evaluate({zoom:fa+1},P,{},pa.availableImages);ib=ib&&ib.name?ib.name:ib;Hb=Hb&&Hb.name?Hb.name:Hb;Za=Za&&Za.name?Za.name:Za;wa[ib]=!0;wa[Hb]=!0;wa[Za]=!0;P.patterns[Va.id]={min:ib,mid:Hb,max:Za}}}return P}function Zb(u,E,P,fa,pa){this.properties={};this.extent=P;this.type=0;this._pbf=u;this._geometry=
-1;this._keys=fa;this._values=pa;u.readFields(Lb,this,E)}function Lb(u,E,P){if(1==u)E.id=P.readVarint();else if(2==u)for(u=P.readVarint()+P.pos;P.pos<u;){var fa=E._keys[P.readVarint()],pa=E._values[P.readVarint()];E.properties[fa]=pa}else 3==u?E.type=P.readVarint():4==u&&(E._geometry=P.pos)}function ec(u){var E=u.length;if(1>=E)return[u];for(var P=[],fa,pa,wa=0;wa<E;wa++){var Ea,Va=u[wa],Za=0,ib=0,Hb=Va.length;for(Ea=Hb-1;ib<Hb;Ea=ib++){var Sb=Va[ib];Ea=Va[Ea];Za+=(Ea.x-Sb.x)*(Sb.y+Ea.y)}Sb=Za;0!==
Sb&&(void 0===pa&&(pa=0>Sb),pa===0>Sb?(fa&&P.push(fa),fa=[u[wa]]):fa.push(u[wa]))}fa&&P.push(fa);return P}function hc(u,E){this.version=1;this.name=null;this.extent=4096;this.length=0;this._pbf=u;this._keys=[];this._values=[];this._features=[];u.readFields(rc,this,E);this.length=this._features.length}function rc(u,E,P){if(15===u)E.version=P.readVarint();else if(1===u)E.name=P.readString();else if(5===u)E.extent=P.readVarint();else if(2===u)E._features.push(P.pos);else if(3===u)E._keys.push(P.readString());
else if(4===u){u=E._values;E=u.push;for(var fa=null,pa=P.readVarint()+P.pos;P.pos<pa;)fa=P.readVarint()>>3,fa=1===fa?P.readString():2===fa?P.readFloat():3===fa?P.readDouble():4===fa?P.readVarint64():5===fa?P.readVarint():6===fa?P.readSVarint():7===fa?P.readBoolean():null;E.call(u,fa)}}function Fc(u,E,P){3===u&&(u=new Oi(P,P.readVarint()+P.pos),u.length&&(E[u.name]=u))}function jd(u,E,P,fa,pa,wa,Ea,Va){u.emplaceBack(E,P,2*Math.floor(fa*lj)+Ea,pa*lj*2,wa*lj*2,Math.round(Va))}function Dd(u){return u.every(function(E){return 0>
E.x})||u.every(function(E){return 8192<E.x})||u.every(function(E){return 0>E.y})||u.every(function(E){return 8192<E.y})}function ye(u,E){return u.x*E.x+u.y*E.y}function Ae(u,E){if(1===u.length){for(var P=0,fa=E[P++],pa;!pa||fa.equals(pa);)if(pa=E[P++],!pa)return Infinity;for(;P<E.length;P++){var wa=E[P],Ea=u[0],Va=pa.sub(fa),Za=wa.sub(fa),ib=Ea.sub(fa);Ea=ye(Va,Va);var Hb=ye(Va,Za),Sb=ye(Za,Za);Va=ye(ib,Va);Za=ye(ib,Za);ib=Ea*Sb-Hb*Hb;Sb=(Sb*Va-Hb*Za)/ib;Ea=(Ea*Za-Hb*Va)/ib;wa=fa.z*(1-Sb-Ea)+pa.z*
Sb+wa.z*Ea;if(isFinite(wa))return wa}return Infinity}u=Infinity;for(P=0;P<E.length;P+=1)u=Math.min(u,E[P].z);return u}function Xe(u,E,P){u.sections.forEach(function(fa){var pa=fa.text,wa=E.layout.get("text-transform").evaluate(P,{});"uppercase"===wa?pa=pa.toLocaleUpperCase():"lowercase"===wa&&(pa=pa.toLocaleLowerCase());zh.applyArabicShaping&&(pa=zh.applyArabicShaping(pa));fa.text=pa});return u}function Vf(u){function E(wc,Hc,ud){var Zd=wa[wc];delete wa[wc];wa[Hc]=Zd;Ea[Zd].geometry[0].pop();Ea[Zd].geometry[0]=
Ea[Zd].geometry[0].concat(ud[0]);return Zd}function P(wc,Hc,ud){var Zd=pa[Hc];delete pa[Hc];pa[wc]=Zd;Ea[Zd].geometry[0].shift();Ea[Zd].geometry[0]=ud[0].concat(Ea[Zd].geometry[0]);return Zd}function fa(wc,Hc,ud){Hc=ud?Hc[0][Hc[0].length-1]:Hc[0][0];return wc+":"+Hc.x+":"+Hc.y}for(var pa={},wa={},Ea=[],Va=0,Za=0;Za<u.length;Za++){var ib=u[Za],Hb=ib.geometry;if(ib=ib.text?ib.text.toString():null){var Sb=fa(ib,Hb),ic=fa(ib,Hb,!0);if(Sb in wa&&ic in pa&&wa[Sb]!==pa[ic]){Hb=P(Sb,ic,Hb);var Dc=E(Sb,ic,
Ea[Hb].geometry);delete pa[Sb];delete wa[ic];wa[fa(ib,Ea[Dc].geometry,!0)]=Dc;Ea[Hb].geometry=null}else Sb in wa?E(Sb,ic,Hb):ic in pa?P(Sb,ic,Hb):(Ea.push(u[Za]),Va++,pa[Sb]=Va-1,wa[ic]=Va-1)}else Ea.push(u[Za]),Va++}return Ea.filter(function(wc){return wc.geometry})}function Je(u){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(u)?u:new Uint8Array(u||0);this.type=this.pos=0;this.length=this.buf.length}function Tf(u,E,P){var fa=P.buf;var pa=fa[P.pos++];var wa=(pa&112)>>4;if(128>pa)return tf(u,wa,
E);pa=fa[P.pos++];wa|=(pa&127)<<3;if(128>pa)return tf(u,wa,E);pa=fa[P.pos++];wa|=(pa&127)<<10;if(128>pa)return tf(u,wa,E);pa=fa[P.pos++];wa|=(pa&127)<<17;if(128>pa)return tf(u,wa,E);pa=fa[P.pos++];wa|=(pa&127)<<24;if(128>pa)return tf(u,wa,E);pa=fa[P.pos++];if(128>pa)return tf(u,wa|(pa&1)<<31,E);throw Error("Expected varint not more than 10 bytes");}function Mf(u){return u.type===Je.Bytes?u.readVarint()+u.pos:u.pos+1}function tf(u,E,P){return P?4294967296*E+(u>>>0):4294967296*(E>>>0)+(u>>>0)}function $g(u,
E,P){E=16383>=E?1:2097151>=E?2:268435455>=E?3:Math.floor(Math.log(E)/(7*Math.LN2));P.realloc(E);for(var fa=P.pos-1;fa>=u;fa--)P.buf[fa+E]=P.buf[fa]}function Kg(u,E){for(var P=0;P<u.length;P++)E.writeVarint(u[P])}function Ug(u,E){for(var P=0;P<u.length;P++)E.writeSVarint(u[P])}function Ff(u,E){for(var P=0;P<u.length;P++)E.writeFloat(u[P])}function Lf(u,E){for(var P=0;P<u.length;P++)E.writeDouble(u[P])}function oh(u,E){for(var P=0;P<u.length;P++)E.writeBoolean(u[P])}function Wh(u,E){for(var P=0;P<u.length;P++)E.writeFixed32(u[P])}
function Hh(u,E){for(var P=0;P<u.length;P++)E.writeSFixed32(u[P])}function vi(u,E){for(var P=0;P<u.length;P++)E.writeFixed64(u[P])}function wi(u,E){for(var P=0;P<u.length;P++)E.writeSFixed64(u[P])}function Oh(u,E){return(u[E]|u[E+1]<<8|u[E+2]<<16)+16777216*u[E+3]}function Ya(u,E,P){u[P]=E;u[P+1]=E>>>8;u[P+2]=E>>>16;u[P+3]=E>>>24}function Qa(u,E){return(u[E]|u[E+1]<<8|u[E+2]<<16)+(u[E+3]<<24)}function Ob(u,E,P){1===u&&P.readMessage(bc,E)}function bc(u,E,P){if(3===u){u=P.readMessage(gc,{});P=u.width;
var fa=u.height,pa=u.left,wa=u.top,Ea=u.advance;E.push({id:u.id,bitmap:new Ah({width:P+6,height:fa+6},u.bitmap),metrics:{width:P,height:fa,left:pa,top:wa,advance:Ea}})}}function gc(u,E,P){1===u?E.id=P.readVarint():2===u?E.bitmap=P.readBytes():3===u?E.width=P.readVarint():4===u?E.height=P.readVarint():5===u?E.left=P.readSVarint():6===u?E.top=P.readSVarint():7===u&&(E.advance=P.readVarint())}function dd(u){for(var E=0,P=0,fa=0;fa<u.length;fa+=1){var pa=u[fa];E+=pa.w*pa.h;P=Math.max(P,pa.w)}u.sort(function(ib,
Hb){return Hb.h-ib.h});P=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(E/.95)),P),h:Infinity}];for(var wa=pa=fa=0;wa<u.length;wa+=1)for(var Ea=u[wa],Va=P.length-1;0<=Va;Va--){var Za=P[Va];if(!(Ea.w>Za.w||Ea.h>Za.h)){Ea.x=Za.x;Ea.y=Za.y;pa=Math.max(pa,Ea.y+Ea.h);fa=Math.max(fa,Ea.x+Ea.w);Ea.w===Za.w&&Ea.h===Za.h?(Ea=P.pop(),Va<P.length&&(P[Va]=Ea)):Ea.h===Za.h?(Za.x+=Ea.w,Za.w-=Ea.w):(Ea.w!==Za.w&&P.push({x:Za.x+Ea.w,y:Za.y,w:Za.w-Ea.w,h:Ea.h}),Za.y+=Ea.h,Za.h-=Ea.h);break}}return{w:fa,h:pa,fill:E/(fa*
pa)||0}}function md(u,E,P,fa,pa,wa,Ea,Va,Za,ib,Hb,Sb,ic,Dc,wc,Hc){u=Og.fromFeature(u,pa);Sb===Lg.vertical&&u.verticalizePunctuation();var ud=zh.processBidirectionalText,Zd=zh.processStyledBidirectionalText;if(ud&&1===u.sections.length){pa=[];var Ad=0;for(wa=ud(u.toString(),xd(u,ib,wa,E,fa,Dc,wc));Ad<wa.length;Ad+=1){Dc=wa[Ad];wc=new Og;wc.text=Dc;wc.sections=u.sections;for(ud=0;ud<Dc.length;ud++)wc.sectionIndex.push(0);pa.push(wc)}}else if(Zd)for(pa=[],Ad=0,wa=Zd(u.text,u.sectionIndex,xd(u,ib,wa,
E,fa,Dc,wc));Ad<wa.length;Ad+=1)Dc=wa[Ad],wc=new Og,wc.text=Dc[0],wc.sectionIndex=Dc[1],wc.sections=u.sections,pa.push(wc);else{wa=xd(u,ib,wa,E,fa,Dc,wc);pa=[];Dc=u.text;for(Ad=wc=0;Ad<wa.length;Ad+=1)ud=wa[Ad],pa.push(u.substring(wc,ud)),wc=ud;wc<Dc.length&&pa.push(u.substring(wc,Dc.length))}wa=[];Hb={positionedLines:wa,text:u.toString(),top:Hb[1],bottom:Hb[1],left:Hb[0],right:Hb[0],writingMode:Sb,iconsInText:!1,verticalizable:!1};var Jd=0;wc=-17;Dc=u=0;Za="right"===Za?1:"left"===Za?0:.5;for(ud=
Ad=0;ud<pa.length;ud+=1){var be=pa[ud];be.trim();var ke=be.getMaxScale();Zd=24*(ke-1);var Le={positionedGlyphs:[],lineOffset:0};Hb.positionedLines[Ad]=Le;var ne=Le.positionedGlyphs,R=0;if(be.length()){for(var aa=0;aa<be.length();aa++){var sa=be.getSection(aa),Ca=be.getSectionIndex(aa),Ua=be.getCharCode(aa),ab=null,Kb=null,lc=24,Ac;(Ac=Sb===Lg.horizontal||!ic&&!Id(Ua))||!(Ac=ic)||(Ac=Bg[Ua])||(Ac=Ua,Ac=Ce.Arabic(Ac)||Ce["Arabic Supplement"](Ac)||Ce["Arabic Extended-A"](Ac)||Ce["Arabic Presentation Forms-A"](Ac)||
Ce["Arabic Presentation Forms-B"](Ac));Ac=!Ac;if(sa.imageName){lc=fa[sa.imageName];if(!lc)continue;Kb=sa.imageName;Hb.iconsInText=Hb.iconsInText||!0;ab=lc.paddedRect;var od=lc.displaySize;sa.scale=24*sa.scale/Hc;var Ud={width:od[0],height:od[1],left:1,top:-3,advance:Ac?od[1]:od[0]};var Xd=Zd+(24-od[1]*sa.scale);lc=Ud.advance;od=Ac?od[0]*sa.scale-24*ke:od[1]*sa.scale-24*ke;0<od&&od>R&&(R=od)}else{if((Xd=(Xd=P[sa.fontStack])&&Xd[Ua])&&Xd.rect)ab=Xd.rect,Ud=Xd.metrics;else{Xd=(Xd=E[sa.fontStack])&&Xd[Ua];
if(!Xd)continue;Ud=Xd.metrics}Xd=24*(ke-sa.scale)}Ac?(Hb.verticalizable=!0,ne.push({glyph:Ua,imageName:Kb,x:Jd,y:wc+Xd,vertical:Ac,scale:sa.scale,fontStack:sa.fontStack,sectionIndex:Ca,metrics:Ud,rect:ab}),Jd+=lc*sa.scale+ib):(ne.push({glyph:Ua,imageName:Kb,x:Jd,y:wc+Xd,vertical:Ac,scale:sa.scale,fontStack:sa.fontStack,sectionIndex:Ca,metrics:Ud,rect:ab}),Jd+=Ud.advance*sa.scale+ib)}if(0!==ne.length&&(u=Math.max(Jd-ib,u),Jd=ne,ne=ne.length-1,be=R,Za||be))for(aa=Jd[ne],aa=(Jd[ne].x+aa.metrics.advance*
aa.scale)*Za,sa=0;sa<=ne;sa++)Jd[sa].x-=aa,Jd[sa].y+=be;Jd=0;ke=Ea*ke+R;Le.lineOffset=Math.max(R,Zd);wc+=ke;Dc=Math.max(ke,Dc)}else wc+=Ea;++Ad}E=wc- -17;P=Kd(Va);Va=P.horizontalAlign;P=P.verticalAlign;fa=Hb.positionedLines;ib=(Za-Va)*u;Ea=Dc!==Ea?-E*P- -17:(-P*pa.length+.5)*Ea;for(Sb=0;Sb<fa.length;Sb+=1)for(ic=0,Hc=fa[Sb].positionedGlyphs;ic<Hc.length;ic+=1)pa=Hc[ic],pa.x+=ib,pa.y+=Ea;Hb.top+=-P*E;Hb.bottom=Hb.top+E;Hb.left+=-Va*u;Hb.right=Hb.left+u;a:{for(Ea=0;Ea<wa.length;Ea+=1)if(0!==wa[Ea].positionedGlyphs.length){Ea=
!1;break a}Ea=!0}return Ea?!1:Hb}function gd(u,E,P,fa,pa,wa){return E.imageName?(u=fa[E.imageName])?u.displaySize[0]*E.scale*24/wa+pa:0:(u=(wa=P[E.fontStack])&&wa[u])?u.metrics.advance*E.scale+pa:0}function nd(u,E,P,fa){var pa=Math.pow(u-E,2);return fa?u<E?pa/2:2*pa:pa+Math.abs(P)*P}function rd(u,E,P,fa,pa,wa){for(var Ea=null,Va=nd(E,P,pa,wa),Za=0;Za<fa.length;Za+=1){var ib=fa[Za],Hb=nd(E-ib.x,P,pa,wa)+ib.badness;Hb<=Va&&(Ea=ib,Va=Hb)}return{index:u,x:E,priorBreak:Ea,badness:Va}}function Od(u){return u?
Od(u.priorBreak).concat(u.index):[]}function xd(u,E,P,fa,pa,wa,Ea){if("point"!==wa||!u)return[];wa=[];for(var Va=0,Za=0;Za<u.length();Za++){var ib=u.getSection(Za);Va+=gd(u.getCharCode(Za),ib,fa,pa,E,Ea)}P=Va/Math.max(1,Math.ceil(Va/P));Va=0<=u.text.indexOf("");for(ib=Za=0;ib<u.length();ib++){var Hb=u.getSection(ib),Sb=u.getCharCode(ib);Bg[Sb]||(Za+=gd(Sb,Hb,fa,pa,E,Ea));if(ib<u.length()-1){var ic=Sb;ic=11904>ic?!1:Ce["Bopomofo Extended"](ic)||Ce.Bopomofo(ic)||Ce["CJK Compatibility Forms"](ic)||
Ce["CJK Compatibility Ideographs"](ic)||Ce["CJK Compatibility"](ic)||Ce["CJK Radicals Supplement"](ic)||Ce["CJK Strokes"](ic)||Ce["CJK Symbols and Punctuation"](ic)||Ce["CJK Unified Ideographs Extension A"](ic)||Ce["CJK Unified Ideographs"](ic)||Ce["Enclosed CJK Letters and Months"](ic)||Ce["Halfwidth and Fullwidth Forms"](ic)||Ce.Hiragana(ic)||Ce["Ideographic Description Characters"](ic)||Ce["Kangxi Radicals"](ic)||Ce["Katakana Phonetic Extensions"](ic)||Ce.Katakana(ic)||Ce["Vertical Forms"](ic)||
Ce["Yi Radicals"](ic)||Ce["Yi Syllables"](ic)?!0:!1;if(Ck[Sb]||ic||Hb.imageName){Hb=wa;var Dc=Hb.push,wc=ib+1,Hc=Za,ud=u.getCharCode(ib+1),Zd=0;10===Sb&&(Zd-=1E4);ic&&Va&&(Zd+=150);if(40===Sb||65288===Sb)Zd+=50;if(41===ud||65289===ud)Zd+=50;Dc.call(Hb,rd(wc,Hc,P,wa,Zd,!1))}}}return Od(rd(u.length(),Za,P,wa,0,!0))}function Kd(u){var E=.5,P=.5;switch(u){case "right":case "top-right":case "bottom-right":E=1;break;case "left":case "top-left":case "bottom-left":E=0}switch(u){case "bottom":case "bottom-right":case "bottom-left":P=
1;break;case "top":case "top-right":case "top-left":P=0}return{horizontalAlign:E,verticalAlign:P}}function $d(u,E,P){var fa=Kd(P);P=E[0]-u.displaySize[0]*fa.horizontalAlign;E=E[1]-u.displaySize[1]*fa.verticalAlign;return{image:u,top:E,bottom:E+u.displaySize[1],left:P,right:P+u.displaySize[0]}}function fe(u,E,P,fa,pa,wa){u=u.image;if(u.content){var Ea=u.content;var Va=u.pixelRatio||1;Ea=[Ea[0]/Va,Ea[1]/Va,u.displaySize[0]-Ea[2]/Va,u.displaySize[1]-Ea[3]/Va]}Va=E.left*wa;var Za=E.right*wa;"width"===
P||"both"===P?(Va=pa[0]+Va-fa[3],Za=pa[0]+Za+fa[1]):(Va=pa[0]+(Va+Za-u.displaySize[0])/2,Za=Va+u.displaySize[0]);var ib=E.top*wa;E=E.bottom*wa;"height"===P||"both"===P?(P=pa[1]+ib-fa[0],fa=pa[1]+E+fa[2]):(P=pa[1]+(ib+E-u.displaySize[1])/2,fa=P+u.displaySize[1]);return{image:u,top:P,right:Za,bottom:fa,left:Va,collisionPadding:Ea}}function ae(u,E){var P=E.expression;if("constant"===P.kind)return{kind:"constant",layoutSize:P.evaluate(new ig(u+1))};if("source"===P.kind)return{kind:"source"};var fa=P.zoomStops;
E=P.interpolationType;for(var pa=0;pa<fa.length&&fa[pa]<=u;)pa++;for(var wa=pa=Math.max(0,pa-1);wa<fa.length&&fa[wa]<u+1;)wa++;wa=Math.min(fa.length-1,wa);u=fa[pa];fa=fa[wa];if("composite"===P.kind)return{kind:"composite",minZoom:u,maxZoom:fa,interpolationType:E};wa=P.evaluate(new ig(u));P=P.evaluate(new ig(fa));return{kind:"camera",minZoom:u,maxZoom:fa,minSize:wa,maxSize:P,interpolationType:E}}function gf(u,E,P){var fa=E.uSize;E=E.uSizeT;var pa=P.lowerSize;P=P.upperSize;return"source"===u.kind?pa/
128:"composite"===u.kind?pb(pa/128,P/128,E):fa}function Te(u,E){var P=0,fa=0;if("constant"===u.kind)fa=u.layoutSize;else if("source"!==u.kind){var pa=u.interpolationType,wa=u.minZoom,Ea=u.maxZoom;E=pa?d(Ag.interpolationFactor(pa,E,wa,Ea),0,1):0;"camera"===u.kind?fa=pb(u.minSize,u.maxSize,E):P=E}return{uSizeT:P,uSize:fa}}function le(u,E,P,fa,pa){if(void 0===E.segment)return!0;var wa=E;E=E.segment+1;for(var Ea=0;Ea>-P/2;){E--;if(0>E)return!1;Ea-=u[E].dist(wa);wa=u[E]}Ea+=u[E].dist(u[E+1]);E++;wa=[];
for(var Va=0;Ea<P/2;){var Za=u[E],ib=u[E+1];if(!ib)return!1;var Hb=u[E-1].angleTo(Za)-Za.angleTo(ib);Hb=Math.abs((Hb+3*Math.PI)%(2*Math.PI)-Math.PI);wa.push({distance:Ea,angleDelta:Hb});for(Va+=Hb;Ea-wa[0].distance>fa;)Va-=wa.shift().angleDelta;if(Va>pa)return!1;E++;Ea+=Za.dist(ib)}return!0}function pe(u){for(var E=0,P=0;P<u.length-1;P++)E+=u[P].dist(u[P+1]);return E}function ge(u,E,P,fa,pa,wa){pa=P?.6*pa*wa:0;P=Math.max(P?P.right-P.left:0,fa?fa.right-fa.left:0)*wa;var Ea=0,Va=pe(u)/2;for(fa=0;fa<
u.length-1;fa++){wa=u[fa];var Za=u[fa+1],ib=wa.dist(Za);if(Ea+ib>Va){Va=(Va-Ea)/ib;Ea=pb(wa.x,Za.x,Va);Va=pb(wa.y,Za.y,Va);fa=new Yi(Ea,Va,Za.angleTo(wa),fa);fa._round();if(!pa||le(u,fa,P,pa,E))return fa;break}Ea+=ib}}function Ge(u,E,P,fa,pa,wa,Ea,Va,Za){pa=Math.max(fa?fa.right-fa.left:0,pa?pa.right-pa.left:0);var ib=pa*Ea,Hb=0===u[0].x||u[0].x===Za||0===u[0].y||u[0].y===Za;E-ib<E/4&&(E=ib+E/4);return nf(u,Hb?E/2*Va%E:(pa/2+2*wa)*Ea*Va%E,E,fa?.6*wa*Ea:0,P,ib,Hb,!1,Za)}function nf(u,E,P,fa,pa,wa,Ea,
Va,Za){var ib=wa/2,Hb=pe(u),Sb=0;E-=P;for(var ic=[],Dc=0;Dc<u.length-1;Dc++){for(var wc=u[Dc],Hc=u[Dc+1],ud=wc.dist(Hc),Zd=Hc.angleTo(wc);E+P<Sb+ud;){E+=P;var Ad=(E-Sb)/ud,Jd=pb(wc.x,Hc.x,Ad);Ad=pb(wc.y,Hc.y,Ad);0<=Jd&&Jd<Za&&0<=Ad&&Ad<Za&&0<=E-ib&&E+ib<=Hb&&(Jd=new Yi(Jd,Ad,Zd,Dc),Jd._round(),fa&&!le(u,Jd,wa,fa,pa)||ic.push(Jd))}Sb+=ud}Va||ic.length||Ea||(ic=nf(u,Sb/2,P,fa,pa,wa,Ea,!0,Za));return ic}function Cf(u,E,P,fa,pa){for(var wa=[],Ea=0;Ea<u.length;Ea++)for(var Va=u[Ea],Za=void 0,ib=0;ib<Va.length-
1;ib++){var Hb=Va[ib],Sb=Va[ib+1];Hb.x<E&&Sb.x<E||(Hb.x<E?Hb=(new Ue(E,Hb.y+(E-Hb.x)/(Sb.x-Hb.x)*(Sb.y-Hb.y)))._round():Sb.x<E&&(Sb=(new Ue(E,Hb.y+(E-Hb.x)/(Sb.x-Hb.x)*(Sb.y-Hb.y)))._round()),Hb.y<P&&Sb.y<P||(Hb.y<P?Hb=(new Ue(Hb.x+(P-Hb.y)/(Sb.y-Hb.y)*(Sb.x-Hb.x),P))._round():Sb.y<P&&(Sb=(new Ue(Hb.x+(P-Hb.y)/(Sb.y-Hb.y)*(Sb.x-Hb.x),P))._round()),Hb.x>=fa&&Sb.x>=fa||(Hb.x>=fa?Hb=(new Ue(fa,Hb.y+(fa-Hb.x)/(Sb.x-Hb.x)*(Sb.y-Hb.y)))._round():Sb.x>=fa&&(Sb=(new Ue(fa,Hb.y+(fa-Hb.x)/(Sb.x-Hb.x)*(Sb.y-
Hb.y)))._round()),Hb.y>=pa&&Sb.y>=pa||(Hb.y>=pa?Hb=(new Ue(Hb.x+(pa-Hb.y)/(Sb.y-Hb.y)*(Sb.x-Hb.x),pa))._round():Sb.y>=pa&&(Sb=(new Ue(Hb.x+(pa-Hb.y)/(Sb.y-Hb.y)*(Sb.x-Hb.x),pa))._round()),Za&&Hb.equals(Za[Za.length-1])||(Za=[Hb],wa.push(Za)),Za.push(Sb)))))}return wa}function If(u,E,P,fa){var pa=[],wa=u.image,Ea=wa.pixelRatio,Va=wa.paddedRect.w-2,Za=wa.paddedRect.h-2,ib=u.right-u.left,Hb=u.bottom-u.top,Sb=wa.stretchX||[[0,Va]],ic=wa.stretchY||[[0,Za]],Dc=function(sa,Ca){return sa+Ca[1]-Ca[0]},wc=
Sb.reduce(Dc,0),Hc=ic.reduce(Dc,0),ud=Va-wc,Zd=Za-Hc,Ad=0,Jd=wc,be=0,ke=Hc,Le=0,ne=ud,R=0,aa=Zd;wa.content&&fa&&(Dc=wa.content,Ad=af(Sb,0,Dc[0]),be=af(ic,0,Dc[1]),Jd=af(Sb,Dc[0],Dc[2]),ke=af(ic,Dc[1],Dc[3]),Le=Dc[0]-Ad,R=Dc[1]-be,ne=Dc[2]-Dc[0]-Jd,aa=Dc[3]-Dc[1]-ke);Dc=function(sa,Ca,Ua,ab){var Kb=(sa.stretch-Ad)/Jd*ib+u.left,lc=sa.fixed-Le-ne*sa.stretch/wc,Ac=(Ca.stretch-be)/ke*Hb+u.top,od=Ca.fixed-R-aa*Ca.stretch/Hc,Ud=(Ua.stretch-Ad)/Jd*ib+u.left,Xd=Ua.fixed-Le-ne*Ua.stretch/wc,ie=(ab.stretch-
be)/ke*Hb+u.top,ze=ab.fixed-R-aa*ab.stretch/Hc,Pe=new Ue(Kb,Ac);Ac=new Ue(Ud,Ac);Ud=new Ue(Ud,ie);Kb=new Ue(Kb,ie);lc=new Ue(lc/Ea,od/Ea);Xd=new Ue(Xd/Ea,ze/Ea);if(od=E*Math.PI/180)ze=Math.sin(od),od=Math.cos(od),ze=[od,-ze,ze,od],Pe._matMult(ze),Ac._matMult(ze),Kb._matMult(ze),Ud._matMult(ze);sa=sa.stretch+sa.fixed;Ca=Ca.stretch+Ca.fixed;return{tl:Pe,tr:Ac,bl:Kb,br:Ud,tex:{x:wa.paddedRect.x+1+sa,y:wa.paddedRect.y+1+Ca,w:Ua.stretch+Ua.fixed-sa,h:ab.stretch+ab.fixed-Ca},writingMode:void 0,glyphOffset:[0,
0],sectionIndex:0,pixelOffsetTL:lc,pixelOffsetBR:Xd,minFontScaleX:ne/Ea/ib,minFontScaleY:aa/Ea/Hb,isSDF:P}};if(fa&&(wa.stretchX||wa.stretchY))for(fa=Ye(Sb,ud,wc),ic=Ye(ic,Zd,Hc),Va=0;Va<fa.length-1;Va++)for(Za=fa[Va],Sb=fa[Va+1],Zd=0;Zd<ic.length-1;Zd++)pa.push(Dc(Za,ic[Zd],Sb,ic[Zd+1]));else pa.push(Dc({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Va+1},{fixed:0,stretch:Za+1}));return pa}function af(u,E,P){for(var fa=0,pa=0;pa<u.length;pa+=1){var wa=u[pa];fa+=Math.max(E,Math.min(P,wa[1]))-
Math.max(E,Math.min(P,wa[0]))}return fa}function Ye(u,E,P){for(var fa=[{fixed:-1,stretch:0}],pa=0;pa<u.length;pa+=1){var wa=u[pa],Ea=wa[0];wa=wa[1];var Va=fa[fa.length-1];fa.push({fixed:Ea-Va.stretch,stretch:Va.stretch});fa.push({fixed:Ea-Va.stretch,stretch:Va.stretch+(wa-Ea)})}fa.push({fixed:E+1,stretch:P});return fa}function hg(u,E){return u<E?-1:u>E?1:0}function eg(u,E,P){void 0===E&&(E=1);void 0===P&&(P=!1);for(var fa=Infinity,pa=Infinity,wa=-Infinity,Ea=-Infinity,Va=u[0],Za=0;Za<Va.length;Za++){var ib=
Va[Za];if(!Za||ib.x<fa)fa=ib.x;if(!Za||ib.y<pa)pa=ib.y;if(!Za||ib.x>wa)wa=ib.x;if(!Za||ib.y>Ea)Ea=ib.y}ib=Math.min(wa-fa,Ea-pa);Za=ib/2;Va=new dg([],tg);if(0===ib)return new Ue(fa,pa);for(;fa<wa;fa+=ib)for(var Hb=pa;Hb<Ea;Hb+=ib)Va.push(new Sf(fa+Za,Hb+Za,Za,u));Ea=wa=pa=0;Za=u[0];fa=0;ib=Za.length;for(var Sb=ib-1;fa<ib;Sb=fa++){Hb=Za[fa];Sb=Za[Sb];var ic=Hb.x*Sb.y-Sb.x*Hb.y;wa+=(Hb.x+Sb.x)*ic;Ea+=(Hb.y+Sb.y)*ic;pa+=3*ic}pa=new Sf(wa/pa,Ea/pa,0,u);for(wa=Va.length;Va.length;){Ea=Va.pop();if(Ea.d>
pa.d||!pa.d)pa=Ea,P&&console.log("found best %d after %d probes",Math.round(1E4*Ea.d)/1E4,wa);Ea.max-pa.d<=E||(Za=Ea.h/2,Va.push(new Sf(Ea.p.x-Za,Ea.p.y-Za,Za,u)),Va.push(new Sf(Ea.p.x+Za,Ea.p.y-Za,Za,u)),Va.push(new Sf(Ea.p.x-Za,Ea.p.y+Za,Za,u)),Va.push(new Sf(Ea.p.x+Za,Ea.p.y+Za,Za,u)),wa+=4)}P&&(console.log("num probes: "+wa),console.log("best distance: "+pa.d));return pa.p}function tg(u,E){return E.max-u.max}function Sf(u,E,P,fa){this.p=new Ue(u,E);this.h=P;u=this.p;E=!1;P=Infinity;for(var pa=
0;pa<fa.length;pa++)for(var wa=fa[pa],Ea=0,Va=wa.length,Za=Va-1;Ea<Va;Za=Ea++){var ib=wa[Ea];Za=wa[Za];ib.y>u.y!==Za.y>u.y&&u.x<(Za.x-ib.x)*(u.y-ib.y)/(Za.y-ib.y)+ib.x&&(E=!E);P=Math.min(P,xe(u,ib,Za))}this.d=(E?1:-1)*Math.sqrt(P);this.max=this.d+this.h*Math.SQRT2}function Ie(u,E){function P(pa,wa){var Ea=0,Va=0;0>wa&&(wa=0);var Za=wa/Math.sqrt(2);switch(pa){case "top-right":case "top-left":Va=Za-7;break;case "bottom-right":case "bottom-left":Va=-Za+7;break;case "bottom":Va=-wa+7;break;case "top":Va=
wa-7}switch(pa){case "top-right":case "bottom-right":Ea=-Za;break;case "top-left":case "bottom-left":Ea=Za;break;case "left":Ea=wa;break;case "right":Ea=-wa}return[Ea,Va]}function fa(pa,wa,Ea){var Va=0,Za=0;wa=Math.abs(wa);Ea=Math.abs(Ea);switch(pa){case "top-right":case "top-left":case "top":Za=Ea-7;break;case "bottom-right":case "bottom-left":case "bottom":Za=-Ea+7}switch(pa){case "top-right":case "bottom-right":case "right":Va=-wa;break;case "top-left":case "bottom-left":case "left":Va=wa}return[Va,
Za]}return E[1]!==Vg?fa(u,E[0],E[1]):P(u,E[0])}function Of(u){switch(u){case "right":case "top-right":case "bottom-right":return"right";case "left":case "top-left":case "bottom-left":return"left"}return"center"}function Eg(u,E,P,fa,pa,wa,Ea,Va,Za,ib,Hb){var Sb=wa.textMaxSize.evaluate(E,{});void 0===Sb&&(Sb=Ea);var ic=u.layers[0].layout,Dc=ic.get("icon-offset").evaluate(E,{},Hb),wc=Wi(P.horizontal),Hc=Ea/24,ud=u.tilePixelRatio*Hc;Sb=u.tilePixelRatio*Sb/24;var Zd=u.tilePixelRatio*Va,Ad=u.tilePixelRatio*
ic.get("symbol-spacing"),Jd=ic.get("text-padding")*u.tilePixelRatio,be=ic.get("icon-padding")*u.tilePixelRatio;Va=ic.get("text-max-angle")/180*Math.PI;var ke="map"===ic.get("text-rotation-alignment")&&"point"!==ic.get("symbol-placement"),Le="map"===ic.get("icon-rotation-alignment")&&"point"!==ic.get("symbol-placement"),ne=ic.get("symbol-placement"),R=Ad/2,aa=ic.get("icon-text-fit"),sa;fa&&"none"!==aa&&(u.allowVerticalPlacement&&P.vertical&&(sa=fe(fa,P.vertical,aa,ic.get("icon-text-fit-padding"),Dc,
Hc)),wc&&(fa=fe(fa,wc,aa,ic.get("icon-text-fit-padding"),Dc,Hc)));ic=function(lc,Ac){0>Ac.x||8192<=Ac.x||0>Ac.y||8192<=Ac.y||Li(u,Ac,lc,P,fa,pa,sa,u.layers[0],u.collisionBoxArray,E.index,E.sourceLayerIndex,u.index,ud,Jd,ke,Za,Zd,be,Le,Dc,E,wa,ib,Hb,Ea)};if("line"===ne)for(Hc=0,ne=Cf(E.geometry,0,0,8192,8192);Hc<ne.length;Hc+=1){aa=ne[Hc];for(var Ca=0,Ua=Ge(aa,Ad,Va,P.vertical||wc,fa,24,Sb,u.overscaling,8192);Ca<Ua.length;Ca+=1){var ab=Ua[Ca],Kb=wc;Kb&&Xi(u,Kb.text,R,ab)||ic(aa,ab)}}else if("line-center"===
ne)for(Ad=0,R=E.geometry;Ad<R.length;Ad+=1)Hc=R[Ad],1<Hc.length&&(ne=ge(Hc,Va,P.vertical||wc,fa,24,Sb))&&ic(Hc,ne);else if("Polygon"===E.type)for(wc=0,Sb=Sa(E.geometry,0);wc<Sb.length;wc+=1)Va=Sb[wc],Ad=eg(Va,16),ic(Va[0],new Yi(Ad.x,Ad.y,0));else if("LineString"===E.type)for(wc=0,Sb=E.geometry;wc<Sb.length;wc+=1)Va=Sb[wc],ic(Va,new Yi(Va[0].x,Va[0].y,0));else if("Point"===E.type)for(wc=0,Sb=E.geometry;wc<Sb.length;wc+=1)for(Va=0,Ad=Sb[wc];Va<Ad.length;Va+=1)R=Ad[Va],ic([R],new Yi(R.x,R.y,0))}function ah(u,
E,P,fa,pa,wa,Ea,Va,Za,ib,Hb,Sb,ic,Dc,wc){for(var Hc=u.allowVerticalPlacement,ud=pa.layout.get("text-rotate").evaluate(Ea,{})*Math.PI/180,Zd=[],Ad=0,Jd=P.positionedLines;Ad<Jd.length;Ad+=1)for(var be=Jd[Ad],ke=0,Le=be.positionedGlyphs;ke<Le.length;ke+=1){var ne=Le[ke];if(ne.rect){var R=ne.rect||{},aa=4,sa=!0,Ca=1,Ua=0,ab=(wa||Hc)&&ne.vertical,Kb=ne.metrics.advance*ne.scale/2;if(Hc&&P.verticalizable){var lc=24*(ne.scale-1);Ua=(24-ne.metrics.width*ne.scale)/2;Ua=be.lineOffset/2-(ne.imageName?-Ua:lc)}ne.imageName&&
(lc=fa[ne.imageName],sa=lc.sdf,Ca=lc.pixelRatio,aa=1/Ca);lc=wa?[ne.x+Kb,ne.y]:[0,0];var Ac=wa?[0,0]:[ne.x+Kb+Va[0],ne.y+Va[1]-Ua],od=[0,0];ab&&(od=Ac,Ac=[0,0]);Ua=(ne.metrics.left-aa)*ne.scale-Kb+Ac[0];aa=(-ne.metrics.top-aa)*ne.scale+Ac[1];Ac=Ua+R.w*ne.scale/Ca;var Ud=aa+R.h*ne.scale/Ca;Ca=new Ue(Ua,aa);aa=new Ue(Ac,aa);Ua=new Ue(Ua,Ud);Ac=new Ue(Ac,Ud);ab&&(ab=new Ue(-Kb,Kb- -17),Ud=-Math.PI/2,Kb=12-Kb,Kb=new Ue(22-Kb,-(ne.imageName?Kb:0)),od=new (Function.prototype.bind.apply(Ue,[null].concat(od))),
Ca._rotateAround(Ud,ab)._add(Kb)._add(od),aa._rotateAround(Ud,ab)._add(Kb)._add(od),Ua._rotateAround(Ud,ab)._add(Kb)._add(od),Ac._rotateAround(Ud,ab)._add(Kb)._add(od));ud&&(Kb=Math.sin(ud),ab=Math.cos(ud),Kb=[ab,-Kb,Kb,ab],Ca._matMult(Kb),aa._matMult(Kb),Ua._matMult(Kb),Ac._matMult(Kb));Kb=new Ue(0,0);ab=new Ue(0,0);Zd.push({tl:Ca,tr:aa,bl:Ua,br:Ac,tex:R,writingMode:P.writingMode,glyphOffset:lc,sectionIndex:ne.sectionIndex,isSDF:sa,pixelOffsetTL:Kb,pixelOffsetBR:ab,minFontScaleX:0,minFontScaleY:0})}}P=
u.textSizeData;fa=null;"source"===P.kind?(fa=[128*pa.layout.get("text-size").evaluate(Ea,{})],fa[0]>Bi&&D(u.layerIds[0]+': Value for "text-size" is \x3e\x3d '+Pg+'. Reduce your "text-size".')):"composite"===P.kind&&(fa=[128*Dc.compositeTextSizes[0].evaluate(Ea,{},wc),128*Dc.compositeTextSizes[1].evaluate(Ea,{},wc)],(fa[0]>Bi||fa[1]>Bi)&&D(u.layerIds[0]+': Value for "text-size" is \x3e\x3d '+Pg+'. Reduce your "text-size".'));u.addSymbols(u.text,Zd,fa,Va,wa,Ea,ib,E,Za.lineStartIndex,Za.lineLength,ic,
wc);for(E=0;E<Hb.length;E+=1)Sb[Hb[E]]=u.text.placedSymbolArray.length-1;return 4*Zd.length}function Wi(u){for(var E in u)return u[E];return null}function Li(u,E,P,fa,pa,wa,Ea,Va,Za,ib,Hb,Sb,ic,Dc,wc,Hc,ud,Zd,Ad,Jd,be,ke,Le,ne,R){var aa=u.addToLineVertexArray(E,P),sa,Ca=0,Ua=P=0,ab=0,Kb=-1,lc=-1,Ac={},od=wj(""),Ud=0;var Xd=0;void 0===Va._unevaluatedLayout.getValue("text-radial-offset")?(Xd=Va.layout.get("text-offset").evaluate(be,{},ne).map(function(td){return 24*td}),Ud=Xd[0],Xd=Xd[1]):(Ud=24*Va.layout.get("text-radial-offset").evaluate(be,
{},ne),Xd=Vg);if(u.allowVerticalPlacement&&fa.vertical){var ie=Va.layout.get("text-rotate").evaluate(be,{},ne)+90;var ze=new Pi(Za,E,ib,Hb,Sb,fa.vertical,ic,Dc,wc,ie);Ea&&(sa=new Pi(Za,E,ib,Hb,Sb,Ea,ud,Zd,wc,ie))}if(pa){var Pe=Va.layout.get("icon-rotate").evaluate(be,{});Ca="none"!==Va.layout.get("icon-text-fit");Kb=If(pa,Pe,Le,Ca);Ea=Ea?If(Ea,Pe,Le,Ca):void 0;Pe=new Pi(Za,E,ib,Hb,Sb,pa,ud,Zd,!1,Pe);Ca=4*Kb.length;ud=u.iconSizeData;pa=null;"source"===ud.kind?(pa=[128*Va.layout.get("icon-size").evaluate(be,
{})],pa[0]>Bi&&D(u.layerIds[0]+': Value for "icon-size" is \x3e\x3d '+Pg+'. Reduce your "icon-size".')):"composite"===ud.kind&&(pa=[128*ke.compositeIconSizes[0].evaluate(be,{},ne),128*ke.compositeIconSizes[1].evaluate(be,{},ne)],(pa[0]>Bi||pa[1]>Bi)&&D(u.layerIds[0]+': Value for "icon-size" is \x3e\x3d '+Pg+'. Reduce your "icon-size".'));u.addSymbols(u.icon,Kb,pa,Jd,Ad,be,!1,E,aa.lineStartIndex,aa.lineLength,-1,ne);Kb=u.icon.placedSymbolArray.length-1;Ea&&(P=4*Ea.length,u.addSymbols(u.icon,Ea,pa,
Jd,Ad,be,Lg.vertical,E,aa.lineStartIndex,aa.lineLength,-1,ne),lc=u.icon.placedSymbolArray.length-1)}for(var cf in fa.horizontal){Ad=fa.horizontal[cf];if(!Pf){od=wj(Ad.text);var Pf=Va.layout.get("text-rotate").evaluate(be,{},ne);Pf=new Pi(Za,E,ib,Hb,Sb,Ad,ic,Dc,wc,Pf)}Jd=1===Ad.positionedLines.length;Ua+=ah(u,E,Ad,wa,Va,wc,be,Hc,aa,fa.vertical?Lg.horizontal:Lg.horizontalOnly,Jd?Object.keys(fa.horizontal):[cf],Ac,Kb,ke,ne);if(Jd)break}fa.vertical&&(ab+=ah(u,E,fa.vertical,wa,Va,wc,be,Hc,aa,Lg.vertical,
["vertical"],Ac,lc,ke,ne));fa=Pf?Pf.boxStartIndex:u.collisionBoxArray.length;wa=Pf?Pf.boxEndIndex:u.collisionBoxArray.length;Va=ze?ze.boxStartIndex:u.collisionBoxArray.length;Za=ze?ze.boxEndIndex:u.collisionBoxArray.length;Hb=Pe?Pe.boxStartIndex:u.collisionBoxArray.length;Sb=Pe?Pe.boxEndIndex:u.collisionBoxArray.length;Dc=sa?sa.boxStartIndex:u.collisionBoxArray.length;wc=sa?sa.boxEndIndex:u.collisionBoxArray.length;Hc=function(td,hd){return td&&td.circleDiameter?Math.max(td.circleDiameter,hd):hd};
Pf=Hc(Pf,-1);Pf=Hc(ze,Pf);Pf=Hc(Pe,Pf);Pf=Hc(sa,Pf);(ze=-1<Pf?1:0)&&(Pf*=R/24);u.glyphOffsetArray.length>=Yf.MAX_GLYPHS&&D("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907");void 0!==be.sortKey&&u.addToSortKeyRanges(u.symbolInstances.length,be.sortKey);u.symbolInstances.emplaceBack(E.x,E.y,0<=Ac.right?Ac.right:-1,0<=Ac.center?Ac.center:-1,0<=Ac.left?Ac.left:-1,Ac.vertical||-1,Kb,lc,od,fa,wa,Va,Za,Hb,Sb,Dc,wc,ib,Ua,ab,Ca,P,ze,0,ic,Ud,Xd,Pf)}function Xi(u,
E,P,fa){u=u.compareText;if(E in u)for(var pa=u[E],wa=pa.length-1;0<=wa;wa--){if(fa.dist(pa[wa])<P)return!0}else u[E]=[];u[E].push(fa);return!1}function uh(u,E,P,fa,pa,wa,Ea,Va,Za,ib,Hb,Sb,ic){u.emplaceBack(E,P,Math.round(32*fa),Math.round(32*pa),wa,Ea,((Va?Math.min(Bi,Math.round(Va[0])):0)<<1)+(Za?1:0),Va?Math.min(Bi,Math.round(Va[1])):0,16*ib,16*Hb,256*Sb,256*ic)}function Ji(u,E,P){u.emplaceBack(E.x,E.y,P);u.emplaceBack(E.x,E.y,P);u.emplaceBack(E.x,E.y,P);u.emplaceBack(E.x,E.y,P)}function Vh(u){var E=
0;for(u=u.sections;E<u.length;E+=1){a:{var P=0;for(var fa=u[E].text;P<fa.length;P+=1)if(Be(fa[P].charCodeAt(0))){P=!0;break a}P=!1}if(P)return!0}return!1}function jj(u,E){return E.replace(/{([^{}]+)}/g,function(P,fa){return fa in u?String(u[fa]):""})}function yh(u,E,P){P=12756274*Math.PI/256/Math.pow(2,P);return[u*P-12756274*Math.PI/2,E*P-12756274*Math.PI/2]}function kg(u){return(180+u)/360}function ci(u){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u*Math.PI/360)))/360}function Rg(u){return 360/
Math.PI*Math.atan(Math.exp((180-360*u)*Math.PI/180))-90}function di(u,E,P,fa,pa){u*=2;0>u&&(u=-1*u-1);var wa=1<<P;return(wa*wa*u+wa*pa+fa).toString(36)+P.toString(36)+E.toString(36)}function Mh(u,E){var P={};if(!E)return P;for(var fa=function(){var Ea=wa[pa],Va=Ea.layerIds.map(function(ib){return E.getLayer(ib)}).filter(Boolean);if(0!==Va.length){Ea.layers=Va;Ea.stateDependentLayerIds&&(Ea.stateDependentLayers=Ea.stateDependentLayerIds.map(function(ib){return Va.filter(function(Hb){return Hb.id===
ib})[0]}));for(var Za=0;Za<Va.length;Za+=1)P[Va[Za].id]=Ea}},pa=0,wa=u;pa<wa.length;pa+=1)fa();return P}function ri(u,E,P,fa,pa){return z(u,function(wa,Ea){return(wa=E instanceof xj?E.get(Ea):null)&&wa.evaluate?wa.evaluate(P,fa,pa):wa})}function Ph(u){for(var E=Infinity,P=Infinity,fa=-Infinity,pa=-Infinity,wa=0;wa<u.length;wa+=1){var Ea=u[wa];E=Math.min(E,Ea.x);P=Math.min(P,Ea.y);fa=Math.max(fa,Ea.x);pa=Math.max(pa,Ea.y)}return{minX:E,minY:P,maxX:fa,maxY:pa}}function ui(u,E){return E-u}var zg=h;h.prototype.sampleCurveX=
function(u){return((this.ax*u+this.bx)*u+this.cx)*u};h.prototype.sampleCurveY=function(u){return((this.ay*u+this.by)*u+this.cy)*u};h.prototype.sampleCurveDerivativeX=function(u){return(3*this.ax*u+2*this.bx)*u+this.cx};h.prototype.solveCurveX=function(u,E){"undefined"===typeof E&&(E=1E-6);var P;var fa=u;for(P=0;8>P;P++){var pa=this.sampleCurveX(fa)-u;if(Math.abs(pa)<E)return fa;var wa=this.sampleCurveDerivativeX(fa);if(1E-6>Math.abs(wa))break;fa-=pa/wa}P=0;wa=1;fa=u;if(fa<P)return P;if(fa>wa)return wa;
for(;P<wa;){pa=this.sampleCurveX(fa);if(Math.abs(pa-u)<E)break;u>pa?P=fa:wa=fa;fa=.5*(wa-P)+P}return fa};h.prototype.solve=function(u,E){return this.sampleCurveY(this.solveCurveX(u,E))};var Ue=r;r.prototype={clone:function(){return new r(this.x,this.y)},add:function(u){return this.clone()._add(u)},sub:function(u){return this.clone()._sub(u)},multByPoint:function(u){return this.clone()._multByPoint(u)},divByPoint:function(u){return this.clone()._divByPoint(u)},mult:function(u){return this.clone()._mult(u)},
div:function(u){return this.clone()._div(u)},rotate:function(u){return this.clone()._rotate(u)},rotateAround:function(u,E){return this.clone()._rotateAround(u,E)},matMult:function(u){return this.clone()._matMult(u)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(u){return this.x===u.x&&this.y===u.y},dist:function(u){return Math.sqrt(this.distSqr(u))},
distSqr:function(u){var E=u.x-this.x;u=u.y-this.y;return E*E+u*u},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(u){return Math.atan2(this.y-u.y,this.x-u.x)},angleWith:function(u){return this.angleWithSep(u.x,u.y)},angleWithSep:function(u,E){return Math.atan2(this.x*E-this.y*u,this.x*u+this.y*E)},_matMult:function(u){var E=u[2]*this.x+u[3]*this.y;this.x=u[0]*this.x+u[1]*this.y;this.y=E;return this},_add:function(u){this.x+=u.x;this.y+=u.y;return this},_sub:function(u){this.x-=
u.x;this.y-=u.y;return this},_mult:function(u){this.x*=u;this.y*=u;return this},_div:function(u){this.x/=u;this.y/=u;return this},_multByPoint:function(u){this.x*=u.x;this.y*=u.y;return this},_divByPoint:function(u){this.x/=u.x;this.y/=u.y;return this},_unit:function(){this._div(this.mag());return this},_perp:function(){var u=this.y;this.y=this.x;this.x=-u;return this},_rotate:function(u){var E=Math.cos(u);u=Math.sin(u);var P=u*this.x+E*this.y;this.x=E*this.x-u*this.y;this.y=P;return this},_rotateAround:function(u,
E){var P=Math.cos(u);u=Math.sin(u);var fa=E.y+u*(this.x-E.x)+P*(this.y-E.y);this.x=E.x+P*(this.x-E.x)-u*(this.y-E.y);this.y=fa;return this},_round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this}};r.convert=function(u){return u instanceof r?u:Array.isArray(u)?new r(u[0],u[1]):u};var Dg=c(.25,.1,.25,1),Sg=1,ti={},si=null,mb=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),S=self.requestAnimationFrame||self.mozRequestAnimationFrame||
self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,X=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,V,ea,va={now:mb,frame:function(u){var E=S(u);return{cancel:function(){return X(E)}}},getImageData:function(u,E){void 0===E&&(E=0);var P=self.document.createElement("canvas"),fa=P.getContext("2d");if(!fa)throw Error("failed to create canvas 2d context");P.width=u.width;P.height=u.height;fa.drawImage(u,0,0,u.width,u.height);
return fa.getImageData(-E,-E,u.width+2*E,u.height+2*E)},resolveURL:function(u){V||(V=self.document.createElement("a"));V.href=u;return V.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){if(!self.matchMedia)return!1;null==ea&&(ea=self.matchMedia("(prefers-reduced-motion: reduce)"));return ea.matches}},Da={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?
"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Ra={supported:!1,testSupport:function(u){!Nb&&jc&&(Xb?I(u):nb=u)}},nb,Nb=!1,Xb=!1;if(self.document){var jc=self.document.createElement("img");jc.onload=function(){nb&&I(nb);nb=null;Xb=!0};jc.onerror=function(){Nb=!0;nb=null};jc.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA\x3d"}var Jc=
function(u,E){this._transformRequestFn=u;this._customAccessToken=E;this._createSkuToken()};Jc.prototype._createSkuToken=function(){for(var u="",E=0;10>E;E++)u+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];u=["101",u].join("");E=Date.now()+432E5;this._skuToken=u;this._skuTokenExpiresAt=E};Jc.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt};Jc.prototype.transformRequest=function(u,E){return this._transformRequestFn?
this._transformRequestFn(u,E)||{url:u}:{url:u}};Jc.prototype.normalizeStyleURL=function(u,E){if(!L(u))return u;u=M(u);u.path="/styles/v1"+u.path;return this._makeAPIURL(u,this._customAccessToken||E)};Jc.prototype.normalizeGlyphsURL=function(u,E){if(!L(u))return u;u=M(u);u.path="/fonts/v1"+u.path;return this._makeAPIURL(u,this._customAccessToken||E)};Jc.prototype.normalizeSourceURL=function(u,E){if(!L(u))return u;u=M(u);u.path="/v4/"+u.authority+".json";u.params.push("secure");return this._makeAPIURL(u,
this._customAccessToken||E)};Jc.prototype.normalizeSpriteURL=function(u,E,P,fa){var pa=M(u);if(!L(u))return pa.path+=""+E+P,Q(pa);pa.path="/styles/v1"+pa.path+"/sprite"+E+P;return this._makeAPIURL(pa,this._customAccessToken||fa)};Jc.prototype.normalizeTileURL=function(u,E){this._isSkuTokenExpired()&&this._createSkuToken();if(u&&!L(u))return u;u=M(u);u.path=u.path.replace(/(\.(png|jpg)\d*)(?=$)/,(2<=va.devicePixelRatio||512===E?"@2x":"")+(Ra.supported?".webp":"$1"));u.path=u.path.replace(/^.+\/v4\//,
"/");u.path="/v4"+u.path;if(!(E=this._customAccessToken))a:{E=0;for(var P=u.params;E<P.length;E+=1){var fa=P[E].match(/^access_token=(.*)$/);if(fa){E=fa[1];break a}}E=null}E=E||Da.ACCESS_TOKEN;Da.REQUIRE_ACCESS_TOKEN&&E&&this._skuToken&&u.params.push("sku\x3d"+this._skuToken);return this._makeAPIURL(u,E)};Jc.prototype.canonicalizeTileURL=function(u,E){var P=/\.[\w]+$/,fa=M(u);if(!fa.path.match(/(^\/v4\/)/)||!fa.path.match(P))return u;u="mapbox://tiles/"+fa.path.replace("/v4/","");fa=fa.params;E&&
(fa=fa.filter(function(pa){return!pa.match(/^access_token=/)}));fa.length&&(u+="?"+fa.join("\x26"));return u};Jc.prototype.canonicalizeTileset=function(u,E){E=E?L(E):!1;var P=[],fa=0;for(u=u.tiles||[];fa<u.length;fa+=1){var pa=u[fa];Kc.test(pa)?P.push(this.canonicalizeTileURL(pa,E)):P.push(pa)}return P};Jc.prototype._makeAPIURL=function(u,E){var P=M(Da.API_URL);u.protocol=P.protocol;u.authority=P.authority;"/"!==P.path&&(u.path=""+P.path+u.path);if(!Da.REQUIRE_ACCESS_TOKEN)return Q(u);E=E||Da.ACCESS_TOKEN;
if(!E)throw Error("An API access token is required to use Mapbox GL. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes");if("s"===E[0])throw Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes");u.params=u.params.filter(function(fa){return-1===fa.indexOf("access_token")});u.params.push("access_token\x3d"+E);return Q(u)};var Kc=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i,
$c=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/,ad=function(u){this.type=u;this.anonId=null;this.eventData={};this.queue=[];this.pendingRequest=null};ad.prototype.getStorageKey=function(u){var E=Z(Da.ACCESS_TOKEN);E=E&&E.u?K(E.u):Da.ACCESS_TOKEN||"";return u?"mapbox.eventData."+u+":"+E:"mapbox.eventData:"+E};ad.prototype.fetchEventData=function(){var u=J("localStorage"),E=this.getStorageKey(),P=this.getStorageKey("uuid");if(u)try{var fa=self.localStorage.getItem(E);fa&&(this.eventData=JSON.parse(fa));
var pa=self.localStorage.getItem(P);pa&&(this.anonId=pa)}catch(wa){D("Unable to read from LocalStorage")}};ad.prototype.saveEventData=function(){var u=J("localStorage"),E=this.getStorageKey(),P=this.getStorageKey("uuid");if(u)try{self.localStorage.setItem(P,this.anonId),1<=Object.keys(this.eventData).length&&self.localStorage.setItem(E,JSON.stringify(this.eventData))}catch(fa){D("Unable to write to LocalStorage")}};ad.prototype.processRequests=function(u){};ad.prototype.postEvent=function(u,E,P,fa){var pa=
this;if(Da.EVENTS_URL){var wa=M(Da.EVENTS_URL);wa.params.push("access_token\x3d"+(fa||Da.ACCESS_TOKEN||""));u={event:this.type,created:(new Date(u)).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.10.1",skuId:"01",userId:this.anonId};E=E?f(u,E):u;wa={url:Q(wa),headers:{"Content-Type":"text/plain"},body:JSON.stringify([E])};this.pendingRequest=uf(wa,function(Ea){pa.pendingRequest=null;P(Ea);pa.saveEventData();pa.processRequests(fa)})}};ad.prototype.queueRequest=function(u,E){this.queue.push(u);
this.processRequests(E)};var Wc=function(u){function E(){u.call(this,"map.load");this.success={};this.skuToken=""}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype.postMapLoadEvent=function(P,fa,pa,wa){this.skuToken=pa;(Da.EVENTS_URL&&wa||Da.ACCESS_TOKEN&&Array.isArray(P)&&P.some(function(Ea){return L(Ea)||Kc.test(Ea)}))&&this.queueRequest({id:fa,timestamp:Date.now()},wa)};E.prototype.processRequests=function(P){var fa=this;if(!this.pendingRequest&&
0!==this.queue.length){var pa=this.queue.shift(),wa=pa.id;pa=pa.timestamp;wa&&this.success[wa]||(this.anonId||this.fetchEventData(),t(this.anonId)||(this.anonId=q()),this.postEvent(pa,{skuToken:this.skuToken},function(Ea){Ea||wa&&(fa.success[wa]=!0)},P))}};return E}(ad),wd=new (function(u){function E(P){u.call(this,"appUserTurnstile");this._customAccessToken=P}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype.postTurnstileEvent=function(P,fa){Da.EVENTS_URL&&
Da.ACCESS_TOKEN&&Array.isArray(P)&&P.some(function(pa){return L(pa)||Kc.test(pa)})&&this.queueRequest(Date.now(),fa)};E.prototype.processRequests=function(P){var fa=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var pa=Z(Da.ACCESS_TOKEN),wa=pa?pa.u:Da.ACCESS_TOKEN;pa=wa!==this.eventData.tokenU;t(this.anonId)||(this.anonId=q(),pa=!0);var Ea=this.queue.shift();if(this.eventData.lastSuccess){var Va=new Date(this.eventData.lastSuccess),
Za=new Date(Ea),ib=(Ea-this.eventData.lastSuccess)/864E5;pa=pa||1<=ib||-1>ib||Va.getDate()!==Za.getDate()}else pa=!0;if(!pa)return this.processRequests();this.postEvent(Ea,{"enabled.telemetry":!1},function(Hb){Hb||(fa.eventData.lastSuccess=Ea,fa.eventData.tokenU=wa)},P)}};return E}(ad)),Ed=wd.postTurnstileEvent.bind(wd),Ld=new Wc,he=Ld.postMapLoadEvent.bind(Ld),de=500,me=50,ve,se,Ee=Infinity,we,jf={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",
SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(jf);var Ke=function(u){function E(P,fa,pa){401===fa&&Kc.test(pa)&&(P+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes");u.call(this,P);this.status=fa;this.url=pa;this.name=this.constructor.name;this.message=P}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype.toString=function(){return this.name+
": "+this.message+" ("+this.status+"): "+this.url};return E}(Error),rf=v()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===self.location.protocol?self.parent:self).location.href},pf=function(u,E){var P=u.url;if(!(/^file:/.test(P)||/^file:/.test(rf())&&!/^\w+:/.test(P))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return ba(u,E);if(v()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",
u,E,void 0,!0)}return ja(u,E)},cg=function(u,E){return pf(f(u,{type:"arrayBuffer"}),E)},uf=function(u,E){return pf(f(u,{method:"POST"}),E)};var sg=[];var ef=0;var Wf=function(u,E){Ra.supported&&(u.headers||(u.headers={}),u.headers.accept="image/webp,*/*");if(ef>=Da.MAX_PARALLEL_IMAGE_REQUESTS)return u={requestParameters:u,callback:E,cancelled:!1,cancel:function(){this.cancelled=!0}},sg.push(u),u;ef++;var P=!1,fa=function(){if(!P)for(P=!0,ef--;sg.length&&ef<Da.MAX_PARALLEL_IMAGE_REQUESTS;){var wa=
sg.shift(),Ea=wa.requestParameters,Va=wa.callback;wa.cancelled||(wa.cancel=Wf(Ea,Va).cancel)}},pa=cg(u,function(wa,Ea,Va,Za){fa();wa?E(wa):Ea&&(Y()?oa(Ea,E):ia(Ea,E,Va,Za))});return{cancel:function(){pa.cancel();fa()}}},da=function(u,E){void 0===E&&(E={});f(this,E);this.type=u},ua=function(u){function E(P,fa){void 0===fa&&(fa={});u.call(this,"error",f({error:P},fa))}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);return E.prototype.constructor=E}(da),Ba=function(){};Ba.prototype.on=function(u,
E){this._listeners=this._listeners||{};xa(u,E,this._listeners);return this};Ba.prototype.off=function(u,E){ra(u,E,this._listeners);ra(u,E,this._oneTimeListeners);return this};Ba.prototype.once=function(u,E){this._oneTimeListeners=this._oneTimeListeners||{};xa(u,E,this._oneTimeListeners);return this};Ba.prototype.fire=function(u,E){"string"===typeof u&&(u=new da(u,E||{}));E=u.type;if(this.listens(E)){u.target=this;for(var P=0,fa=this._listeners&&this._listeners[E]?this._listeners[E].slice():[];P<fa.length;P+=
1)fa[P].call(this,u);P=0;for(fa=this._oneTimeListeners&&this._oneTimeListeners[E]?this._oneTimeListeners[E].slice():[];P<fa.length;P+=1){var pa=fa[P];ra(E,pa,this._oneTimeListeners);pa.call(this,u)}if(E=this._eventedParent)f(u,"function"===typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),E.fire(u)}else u instanceof ua&&console.error(u.error);return this};Ba.prototype.listens=function(u){return this._listeners&&this._listeners[u]&&0<this._listeners[u].length||this._oneTimeListeners&&
this._oneTimeListeners[u]&&0<this._oneTimeListeners[u].length||this._eventedParent&&this._eventedParent.listens(u)};Ba.prototype.setEventedParent=function(u,E){this._eventedParent=u;this._eventedParentData=E;return this};var Fa={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number","default":0,period:360,units:"degrees"},pitch:{type:"number","default":0,units:"degrees"},
light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:"source_vector source_raster source_raster_dem source_geojson source_video source_image".split(" "),source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,"default":[-180,
-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},"default":"xyz"},minzoom:{type:"number","default":0},maxzoom:{type:"number","default":22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,"default":[-180,-85.051129,180,85.051129]},minzoom:{type:"number","default":0},maxzoom:{type:"number",
"default":22},tileSize:{type:"number","default":512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},"default":"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,"default":[-180,-85.051129,180,85.051129]},minzoom:{type:"number","default":0},maxzoom:{type:"number","default":22},tileSize:{type:"number","default":512,
units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},"default":"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number","default":18},attribution:{type:"string"},buffer:{type:"number","default":128,maximum:512,minimum:0},tolerance:{type:"number","default":.375},cluster:{type:"boolean","default":!1},clusterRadius:{type:"number","default":50,minimum:0},clusterMaxZoom:{type:"number"},
clusterProperties:{type:"*"},lineMetrics:{type:"boolean","default":!1},generateId:{type:"boolean","default":!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",
length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:"layout_fill layout_line layout_circle layout_heatmap layout_fill-extrusion layout_symbol layout_raster layout_hillshade layout_background".split(" "),
layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",
values:{visible:{},none:{}},"default":"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},"default":"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",
values:{bevel:{},round:{},miter:{}},"default":"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number","default":2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number","default":1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,
parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},"default":"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number","default":250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},
"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean","default":!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},"default":"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean","default":!1,
requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean","default":!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean","default":!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},
"default":"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number","default":1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},"default":"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},
"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,"default":[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number","default":0,period:360,units:"degrees",requires:["icon-image"],
expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number","default":2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean","default":!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",
value:"number",length:2,"default":[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},
"default":"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},"default":"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},"default":"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},
"text-field":{type:"formatted","default":"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string","default":["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number","default":16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},
"property-type":"data-driven"},"text-max-width":{type:"number","default":10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number","default":1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number","default":0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom",
"feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},"default":"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems","default":0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},
top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},
"text-max-angle":{type:"number","default":45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number","default":0,period:360,units:"degrees",requires:["text-field"],
expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number","default":2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean","default":!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",
values:{none:{},uppercase:{},lowercase:{}},"default":"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,"default":[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean","default":!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},
"property-type":"data-constant"},"text-ignore-placement":{type:"boolean","default":!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean","default":!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},
none:{}},"default":"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"\x3d\x3d":{},"!\x3d":{},"\x3e":{},"\x3e\x3d":{},"\x3c":{},"\x3c\x3d":{},"in":{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},"function":{expression:{type:"expression"},
stops:{type:"array",value:"function_stop"},base:{type:"number","default":1,minimum:0},property:{type:"string","default":"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},"default":"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},"default":"rgb"},"default":{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},
"var":{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},"in":{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},"case":{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},"typeof":{group:"Types"},
string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},
"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},
min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"\x3d\x3d":{group:"Decision"},"!\x3d":{group:"Decision"},"\x3e":{group:"Decision"},"\x3c":{group:"Decision"},"\x3e\x3d":{group:"Decision"},"\x3c\x3d":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},
"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum","default":"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array","default":[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant","default":"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},
intensity:{type:"number","property-type":"data-constant","default":.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:"paint_fill paint_line paint_circle paint_heatmap paint_fill-extrusion paint_symbol paint_raster paint_hillshade paint_background".split(" "),paint_fill:{"fill-antialias":{type:"boolean","default":!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number","default":1,minimum:0,maximum:1,
transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color","default":"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},
"fill-translate":{type:"array",value:"number",length:2,"default":[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},"default":"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},
"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number","default":1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color","default":"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,"default":[0,0],transition:!0,
units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},"default":"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",
"default":0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number","default":0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean","default":!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},
"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number","default":1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color","default":"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,"default":[0,0],transition:!0,
units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},"default":"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number","default":1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",
"default":0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number","default":0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number","default":0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},
"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,
parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number","default":5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color","default":"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number","default":0,transition:!0,expression:{interpolated:!0,
parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number","default":1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,"default":[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},
"default":"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},"default":"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},"default":"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number","default":0,
minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color","default":"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number","default":1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},
paint_heatmap:{"heatmap-radius":{type:"number","default":30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number","default":1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number","default":1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},
"heatmap-color":{type:"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number","default":1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number","default":1,minimum:0,maximum:1,
transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color","default":"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color","default":"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},
"property-type":"data-driven"},"icon-halo-width":{type:"number","default":0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number","default":0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",
length:2,"default":[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},"default":"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number","default":1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom",
"feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color","default":"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color","default":"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",
"default":0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number","default":0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,"default":[0,0],transition:!0,units:"pixels",requires:["text-field"],
expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},"default":"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number","default":1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number","default":0,
period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number","default":0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number","default":1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number","default":0,
minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number","default":0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},"default":"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number","default":300,minimum:0,
transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number","default":335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},"default":"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",
"default":.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color","default":"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color","default":"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color","default":"#000000",
transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color","default":"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number","default":1,minimum:0,maximum:1,
transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number","default":300,minimum:0,units:"milliseconds"},delay:{type:"number","default":0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},
Na=function(u,E,P,fa){this.message=(u?u+": ":"")+P;fa&&(this.identifier=fa);null!==E&&void 0!==E&&E.__line__&&(this.line=E.__line__)},Wa=function(u){function E(P,fa){u.call(this,fa);this.message=fa;this.key=P}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);return E.prototype.constructor=E}(Error),ob=function(u,E){void 0===E&&(E=[]);this.parent=u;this.bindings={};for(u=0;u<E.length;u+=1){var P=E[u];this.bindings[P[0]]=P[1]}};ob.prototype.concat=function(u){return new ob(this,u)};ob.prototype.get=
function(u){if(this.bindings[u])return this.bindings[u];if(this.parent)return this.parent.get(u);throw Error(u+" not found in scope.");};ob.prototype.has=function(u){return this.bindings[u]?!0:this.parent?this.parent.has(u):!1};var hb={kind:"null"},fb={kind:"number"},xb={kind:"string"},Fb={kind:"boolean"},Tb={kind:"color"},nc={kind:"object"},kc={kind:"value"},Cc={kind:"collator"},Oc={kind:"formatted"},Gc={kind:"resolvedImage"},Yc=[hb,fb,xb,Fb,Tb,Oc,nc,ta(kc),Gc],ld=g(function(u,E){function P(ib){ib=
Math.round(ib);return 0>ib?0:255<ib?255:ib}function fa(ib){return 0>ib?0:1<ib?1:ib}function pa(ib){return"%"===ib[ib.length-1]?P(parseFloat(ib)/100*255):P(parseInt(ib))}function wa(ib){return"%"===ib[ib.length-1]?fa(parseFloat(ib)/100):fa(parseFloat(ib))}function Ea(ib,Hb,Sb){0>Sb?Sb+=1:1<Sb&&--Sb;return 1>6*Sb?ib+(Hb-ib)*Sb*6:1>2*Sb?Hb:2>3*Sb?ib+(Hb-ib)*(2/3-Sb)*6:ib}function Va(ib){ib=ib.replace(/ /g,"").toLowerCase();if(ib in Za)return Za[ib].slice();if("#"===ib[0])return 4===ib.length?(ib=parseInt(ib.substr(1),
16),0<=ib&&4095>=ib?[(ib&3840)>>4|(ib&3840)>>8,ib&240|(ib&240)>>4,ib&15|(ib&15)<<4,1]:null):7===ib.length?(ib=parseInt(ib.substr(1),16),0<=ib&&16777215>=ib?[(ib&16711680)>>16,(ib&65280)>>8,ib&255,1]:null):null;var Hb=ib.indexOf("("),Sb=ib.indexOf(")");if(-1!==Hb&&Sb+1===ib.length){var ic=ib.substr(0,Hb);Hb=ib.substr(Hb+1,Sb-(Hb+1)).split(",");ib=1;switch(ic){case "rgba":if(4!==Hb.length)break;ib=wa(Hb.pop());case "rgb":if(3!==Hb.length)break;return[pa(Hb[0]),pa(Hb[1]),pa(Hb[2]),ib];case "hsla":if(4!==
Hb.length)break;ib=wa(Hb.pop());case "hsl":if(3===Hb.length)return ic=(parseFloat(Hb[0])%360+360)%360/360,Sb=wa(Hb[1]),Hb=wa(Hb[2]),Sb=.5>=Hb?Hb*(Sb+1):Hb+Sb-Hb*Sb,Hb=2*Hb-Sb,[P(255*Ea(Hb,Sb,ic+1/3)),P(255*Ea(Hb,Sb,ic)),P(255*Ea(Hb,Sb,ic-1/3)),ib]}}return null}var Za={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,
1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,
107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,
220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,
250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,
85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,
170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,
192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{E.parseCSSColor=Va}catch(ib){}}).parseCSSColor,pd=function(u,
E,P,fa){void 0===fa&&(fa=1);this.r=u;this.g=E;this.b=P;this.a=fa};pd.parse=function(u){if(u){if(u instanceof pd)return u;if("string"===typeof u&&(u=ld(u)))return new pd(u[0]/255*u[3],u[1]/255*u[3],u[2]/255*u[3],u[3])}};pd.prototype.toString=function(){var u=this.toArray();return"rgba("+Math.round(u[0])+","+Math.round(u[1])+","+Math.round(u[2])+","+u[3]+")"};pd.prototype.toArray=function(){var u=this.r,E=this.g,P=this.b,fa=this.a;return 0===fa?[0,0,0,0]:[255*u/fa,255*E/fa,255*P/fa,fa]};pd.black=new pd(0,
0,0,1);pd.white=new pd(1,1,1,1);pd.transparent=new pd(0,0,0,0);pd.red=new pd(1,0,0,1);var sd=function(u,E,P){this.sensitivity=u?E?"variant":"case":E?"accent":"base";this.locale=P;this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};sd.prototype.compare=function(u,E){return this.collator.compare(u,E)};sd.prototype.resolvedLocale=function(){return(new Intl.Collator(this.locale?this.locale:[])).resolvedOptions().locale};var Md=function(u,E,P,fa,pa){this.text=
u;this.image=E;this.scale=P;this.fontStack=fa;this.textColor=pa},zd=function(u){this.sections=u};zd.fromString=function(u){return new zd([new Md(u,null,null,null,null)])};zd.prototype.isEmpty=function(){return 0===this.sections.length?!0:!this.sections.some(function(u){return 0!==u.text.length||u.image&&0!==u.image.name.length})};zd.factory=function(u){return u instanceof zd?u:zd.fromString(u)};zd.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(u){return u.text}).join("")};
zd.prototype.serialize=function(){for(var u=["format"],E=0,P=this.sections;E<P.length;E+=1){var fa=P[E];if(fa.image)u.push(["image",fa.image.name]);else{u.push(fa.text);var pa={};fa.fontStack&&(pa["text-font"]=["literal",fa.fontStack.split(",")]);fa.scale&&(pa["font-scale"]=fa.scale);fa.textColor&&(pa["text-color"]=["rgba"].concat(fa.textColor.toArray()));u.push(pa)}}return u};var ee=function(u){this.name=u.name;this.available=u.available};ee.prototype.toString=function(){return this.name};ee.fromString=
function(u){return u?new ee({name:u,available:!1}):null};ee.prototype.serialize=function(){return["image",this.name]};var ce=function(u,E){this.type=u;this.value=E};ce.parse=function(u,E){if(2!==u.length)return E.error("'literal' expression requires exactly one argument, but found "+(u.length-1)+" instead.");if(!sb(u[1]))return E.error("invalid value");u=u[1];var P=jb(u);E=E.expectedType;"array"!==P.kind||0!==P.N||!E||"array"!==E.kind||"number"===typeof E.N&&0!==E.N||(P=E);return new ce(P,u)};ce.prototype.evaluate=
function(){return this.value};ce.prototype.eachChild=function(){};ce.prototype.outputDefined=function(){return!0};ce.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof pd?["rgba"].concat(this.value.toArray()):this.value instanceof zd?this.value.serialize():this.value};var je=function(u){this.name="ExpressionEvaluationError";this.message=u};je.prototype.toJSON=function(){return this.message};var lf={string:xb,number:fb,
boolean:Fb,object:nc},re=function(u,E){this.type=u;this.args=E};re.parse=function(u,E){if(2>u.length)return E.error("Expected at least one argument.");var P=1,fa=u[0];if("array"===fa){if(2<u.length){fa=u[1];if("string"!==typeof fa||!(fa in lf)||"object"===fa)return E.error('The item type argument of "array" must be one of string, number, boolean',1);fa=lf[fa];P++}else fa=kc;if(3<u.length){if(null!==u[2]&&("number"!==typeof u[2]||0>u[2]||u[2]!==Math.floor(u[2])))return E.error('The length argument to "array" must be a positive integer literal',
2);var pa=u[2];P++}pa=ta(fa,pa)}else pa=lf[fa];for(fa=[];P<u.length;P++){var wa=E.parse(u[P],P,kc);if(!wa)return null;fa.push(wa)}return new re(pa,fa)};re.prototype.evaluate=function(u){for(var E=0;E<this.args.length;E++){var P=this.args[E].evaluate(u);if(!Ia(this.type,jb(P)))return P;if(E===this.args.length-1)throw new je("Expected value to be of type "+za(this.type)+", but found "+za(jb(P))+" instead.");}return null};re.prototype.eachChild=function(u){this.args.forEach(u)};re.prototype.outputDefined=
function(){return this.args.every(function(u){return u.outputDefined()})};re.prototype.serialize=function(){var u=this.type,E=[u.kind];if("array"===u.kind){var P=u.itemType;if("string"===P.kind||"number"===P.kind||"boolean"===P.kind)E.push(P.kind),u=u.N,("number"===typeof u||1<this.args.length)&&E.push(u)}return E.concat(this.args.map(function(fa){return fa.serialize()}))};var Pd=function(u){this.type=Oc;this.sections=u};Pd.parse=function(u,E){if(2>u.length)return E.error("Expected at least one argument.");
var P=u[1];if(!Array.isArray(P)&&"object"===typeof P)return E.error("First argument must be an image or text section.");P=[];for(var fa=!1,pa=1;pa<=u.length-1;++pa){var wa=u[pa];if(fa&&"object"===typeof wa&&!Array.isArray(wa)){fa=!1;var Ea=null;if(wa["font-scale"]&&(Ea=E.parse(wa["font-scale"],1,fb),!Ea))return null;var Va=null;if(wa["text-font"]&&(Va=E.parse(wa["text-font"],1,ta(xb)),!Va))return null;var Za=null;if(wa["text-color"]&&(Za=E.parse(wa["text-color"],1,Tb),!Za))return null;wa=P[P.length-
1];wa.scale=Ea;wa.font=Va;wa.textColor=Za}else{Ea=E.parse(u[pa],1,kc);if(!Ea)return null;fa=Ea.type.kind;if("string"!==fa&&"value"!==fa&&"null"!==fa&&"resolvedImage"!==fa)return E.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");fa=!0;P.push({content:Ea,scale:null,font:null,textColor:null})}}return new Pd(P)};Pd.prototype.evaluate=function(u){return new zd(this.sections.map(function(E){var P=E.content.evaluate(u);return jb(P)===Gc?new Md("",P,null,null,null):new Md(vb(P),
null,E.scale?E.scale.evaluate(u):null,E.font?E.font.evaluate(u).join(","):null,E.textColor?E.textColor.evaluate(u):null)}))};Pd.prototype.eachChild=function(u){for(var E=0,P=this.sections;E<P.length;E+=1){var fa=P[E];u(fa.content);fa.scale&&u(fa.scale);fa.font&&u(fa.font);fa.textColor&&u(fa.textColor)}};Pd.prototype.outputDefined=function(){return!1};Pd.prototype.serialize=function(){for(var u=["format"],E=0,P=this.sections;E<P.length;E+=1){var fa=P[E];u.push(fa.content.serialize());var pa={};fa.scale&&
(pa["font-scale"]=fa.scale.serialize());fa.font&&(pa["text-font"]=fa.font.serialize());fa.textColor&&(pa["text-color"]=fa.textColor.serialize());u.push(pa)}return u};var mf=function(u){this.type=Gc;this.input=u};mf.parse=function(u,E){return 2!==u.length?E.error("Expected two arguments."):(u=E.parse(u[1],1,xb))?new mf(u):E.error("No image name provided.")};mf.prototype.evaluate=function(u){var E=this.input.evaluate(u),P=ee.fromString(E);P&&u.availableImages&&(P.available=-1<u.availableImages.indexOf(E));
return P};mf.prototype.eachChild=function(u){u(this.input)};mf.prototype.outputDefined=function(){return!1};mf.prototype.serialize=function(){return["image",this.input.serialize()]};var Uf={"to-boolean":Fb,"to-color":Tb,"to-number":fb,"to-string":xb},xf=function(u,E){this.type=u;this.args=E};xf.parse=function(u,E){if(2>u.length)return E.error("Expected at least one argument.");var P=u[0];if(("to-boolean"===P||"to-string"===P)&&2!==u.length)return E.error("Expected one argument.");P=Uf[P];for(var fa=
[],pa=1;pa<u.length;pa++){var wa=E.parse(u[pa],pa,kc);if(!wa)return null;fa.push(wa)}return new xf(P,fa)};xf.prototype.evaluate=function(u){if("boolean"===this.type.kind)return!!this.args[0].evaluate(u);if("color"===this.type.kind){for(var E,P,fa=0,pa=this.args;fa<pa.length;fa+=1){E=pa[fa].evaluate(u);P=null;if(E instanceof pd)return E;if("string"===typeof E){var wa=u.parseColor(E);if(wa)return wa}else if(Array.isArray(E)&&(P=3>E.length||4<E.length?"Invalid rbga value "+JSON.stringify(E)+": expected an array containing either three or four numeric values.":
gb(E[0],E[1],E[2],E[3]),!P))return new pd(E[0]/255,E[1]/255,E[2]/255,E[3])}throw new je(P||"Could not parse color from value '"+("string"===typeof E?E:String(JSON.stringify(E)))+"'");}if("number"===this.type.kind){E=null;P=0;for(fa=this.args;P<fa.length;P+=1){E=fa[P].evaluate(u);if(null===E)return 0;pa=Number(E);if(!isNaN(pa))return pa}throw new je("Could not convert "+JSON.stringify(E)+" to number.");}return"formatted"===this.type.kind?zd.fromString(vb(this.args[0].evaluate(u))):"resolvedImage"===
this.type.kind?ee.fromString(vb(this.args[0].evaluate(u))):vb(this.args[0].evaluate(u))};xf.prototype.eachChild=function(u){this.args.forEach(u)};xf.prototype.outputDefined=function(){return this.args.every(function(u){return u.outputDefined()})};xf.prototype.serialize=function(){if("formatted"===this.type.kind)return(new Pd([{content:this.args[0],scale:null,font:null,textColor:null}])).serialize();if("resolvedImage"===this.type.kind)return(new mf(this.args[0])).serialize();var u=["to-"+this.type.kind];
this.eachChild(function(E){u.push(E.serialize())});return u};var Jf=["Unknown","Point","LineString","Polygon"],Gf=function(){this.formattedSection=this.featureState=this.feature=this.globals=null;this._parseColorCache={};this.canonical=this.availableImages=null};Gf.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null};Gf.prototype.geometryType=function(){return this.feature?"number"===typeof this.feature.type?Jf[this.feature.type]:this.feature.type:null};Gf.prototype.geometry=
function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null};Gf.prototype.canonicalID=function(){return this.canonical};Gf.prototype.properties=function(){return this.feature&&this.feature.properties||{}};Gf.prototype.parseColor=function(u){var E=this._parseColorCache[u];E||(E=this._parseColorCache[u]=pd.parse(u));return E};var Ef=function(u,E,P,fa){this.name=u;this.type=E;this._evaluate=P;this.args=fa};Ef.prototype.evaluate=function(u){return this._evaluate(u,this.args)};
Ef.prototype.eachChild=function(u){this.args.forEach(u)};Ef.prototype.outputDefined=function(){return!1};Ef.prototype.serialize=function(){return[this.name].concat(this.args.map(function(u){return u.serialize()}))};Ef.parse=function(u,E){var P,fa=u[0],pa=Ef.definitions[fa];if(!pa)return E.error('Unknown expression "'+fa+'". If you wanted a literal array, use ["literal", [...]].',0);var wa=Array.isArray(pa)?pa[0]:pa.type;pa=Array.isArray(pa)?[[pa[1],pa[2]]]:pa.overloads;for(var Ea=pa.filter(function(ud){ud=
ud[0];return!Array.isArray(ud)||ud.length===u.length-1}),Va=null,Za=0;Za<Ea.length;Za+=1){Va=Ea[Za];var ib=Va[0],Hb=Va[1];Va=new bh(E.registry,E.path,null,E.scope);for(var Sb=[],ic=!1,Dc=1;Dc<u.length;Dc++){var wc=u[Dc],Hc=Array.isArray(ib)?ib[Dc-1]:ib.type;wc=Va.parse(wc,1+Sb.length,Hc);if(!wc){ic=!0;break}Sb.push(wc)}if(!ic)if(Array.isArray(ib)&&ib.length!==Sb.length)Va.error("Expected "+ib.length+" arguments, but found "+Sb.length+" instead.");else{for(ic=0;ic<Sb.length;ic++)Dc=Array.isArray(ib)?
ib[ic]:ib.type,wc=Sb[ic],Va.concat(ic+1).checkSubtype(Dc,wc.type);if(0===Va.errors.length)return new Ef(fa,wa,Hb,Sb)}}if(1===Ea.length)(P=E.errors).push.apply(P,Va.errors);else{P=(Ea.length?Ea:pa).map(function(ud){ud=ud[0];ud=Array.isArray(ud)?"("+ud.map(za).join(", ")+")":"("+za(ud.type)+"...)";return ud}).join(" | ");fa=[];for(wa=1;wa<u.length;wa++){pa=E.parse(u[wa],1+fa.length);if(!pa)return null;fa.push(za(pa.type))}E.error("Expected arguments of type "+P+", but found ("+fa.join(", ")+") instead.")}return null};
Ef.register=function(u,E){Ef.definitions=E;for(var P in E)u[P]=Ef};var fg=function(u,E,P){this.type=Cc;this.locale=P;this.caseSensitive=u;this.diacriticSensitive=E};fg.parse=function(u,E){if(2!==u.length)return E.error("Expected one argument.");u=u[1];if("object"!==typeof u||Array.isArray(u))return E.error("Collator options argument must be an object.");var P=E.parse(void 0===u["case-sensitive"]?!1:u["case-sensitive"],1,Fb);if(!P)return null;var fa=E.parse(void 0===u["diacritic-sensitive"]?!1:u["diacritic-sensitive"],
1,Fb);if(!fa)return null;var pa=null;return u.locale&&(pa=E.parse(u.locale,1,xb),!pa)?null:new fg(P,fa,pa)};fg.prototype.evaluate=function(u){return new sd(this.caseSensitive.evaluate(u),this.diacriticSensitive.evaluate(u),this.locale?this.locale.evaluate(u):null)};fg.prototype.eachChild=function(u){u(this.caseSensitive);u(this.diacriticSensitive);this.locale&&u(this.locale)};fg.prototype.outputDefined=function(){return!1};fg.prototype.serialize=function(){var u={};u["case-sensitive"]=this.caseSensitive.serialize();
u["diacritic-sensitive"]=this.diacriticSensitive.serialize();this.locale&&(u.locale=this.locale.serialize());return["collator",u]};var pg=function(u,E){this.type=Fb;this.geojson=u;this.geometries=E};pg.parse=function(u,E){if(2!==u.length)return E.error("'within' expression requires exactly one argument, but found "+(u.length-1)+" instead.");if(sb(u[1]))if(u=u[1],"FeatureCollection"===u.type)for(var P=0;P<u.features.length;++P){var fa=u.features[P].geometry.type;if("Polygon"===fa||"MultiPolygon"===
fa)return new pg(u,u.features[P].geometry)}else if("Feature"===u.type){if(P=u.geometry.type,"Polygon"===P||"MultiPolygon"===P)return new pg(u,u.geometry)}else if("Polygon"===u.type||"MultiPolygon"===u.type)return new pg(u,u);return E.error("'within' expression requires valid geojson object that contains polygon geometry type.")};pg.prototype.evaluate=function(u){if(null!=u.geometry()&&null!=u.canonicalID()){if("Point"===u.geometryType())return Ka(u,this.geometries);if("LineString"===u.geometryType())return Ta(u,
this.geometries)}return!1};pg.prototype.eachChild=function(){};pg.prototype.outputDefined=function(){return!0};pg.prototype.serialize=function(){return["within",this.geojson]};var rg=function(u,E){this.type=E.type;this.name=u;this.boundExpression=E};rg.parse=function(u,E){if(2!==u.length||"string"!==typeof u[1])return E.error("'var' expression requires exactly one string literal argument.");u=u[1];return E.scope.has(u)?new rg(u,E.scope.get(u)):E.error('Unknown variable "'+u+'". Make sure "'+u+'" has been bound in an enclosing "let" expression before using it.',
1)};rg.prototype.evaluate=function(u){return this.boundExpression.evaluate(u)};rg.prototype.eachChild=function(){};rg.prototype.outputDefined=function(){return!1};rg.prototype.serialize=function(){return["var",this.name]};var bh=function(u,E,P,fa,pa){void 0===E&&(E=[]);void 0===fa&&(fa=new ob);void 0===pa&&(pa=[]);this.registry=u;this.path=E;this.key=E.map(function(wa){return"["+wa+"]"}).join("");this.scope=fa;this.errors=pa;this.expectedType=P};bh.prototype.parse=function(u,E,P,fa,pa){void 0===pa&&
(pa={});return E?this.concat(E,P,fa)._parse(u,pa):this._parse(u,pa)};bh.prototype._parse=function(u,E){function P(wa,Ea,Va){return"assert"===Va?new re(Ea,[wa]):"coerce"===Va?new xf(Ea,[wa]):wa}if(null===u||"string"===typeof u||"boolean"===typeof u||"number"===typeof u)u=["literal",u];if(Array.isArray(u)){if(0===u.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var fa=u[0];if("string"!==typeof fa)return this.error("Expression name must be a string, but found "+
typeof fa+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var pa=this.registry[fa];if(pa){u=pa.parse(u,this);if(!u)return null;if(this.expectedType)if(fa=this.expectedType,pa=u.type,("string"===fa.kind||"number"===fa.kind||"boolean"===fa.kind||"object"===fa.kind||"array"===fa.kind)&&"value"===pa.kind)u=P(u,fa,E.typeAnnotation||"assert");else if(!("color"!==fa.kind&&"formatted"!==fa.kind&&"resolvedImage"!==fa.kind||"value"!==pa.kind&&"string"!==pa.kind))u=P(u,fa,E.typeAnnotation||
"coerce");else if(this.checkSubtype(fa,pa))return null;if(!(u instanceof ce)&&"resolvedImage"!==u.type.kind&&Pb(u)){E=new Gf;try{u=new ce(u.type,u.evaluate(E))}catch(wa){return this.error(wa.message),null}}return u}return this.error('Unknown expression "'+fa+'". If you wanted a literal array, use ["literal", [...]].',0)}return"undefined"===typeof u?this.error("'undefined' value invalid. Use null instead."):"object"===typeof u?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+
typeof u+" instead.")};bh.prototype.concat=function(u,E,P){u="number"===typeof u?this.path.concat(u):this.path;P=P?this.scope.concat(P):this.scope;return new bh(this.registry,u,E||null,P,this.errors)};bh.prototype.error=function(u){for(var E=[],P=arguments.length-1;0<P--;)E[P]=arguments[P+1];E=""+this.key+E.map(function(fa){return"["+fa+"]"}).join("");this.errors.push(new Wa(E,u))};bh.prototype.checkSubtype=function(u,E){(u=Ia(u,E))&&this.error(u);return u};var xi=function(u,E,P){this.type=u;this.input=
E;this.labels=[];this.outputs=[];for(u=0;u<P.length;u+=1){E=P[u];var fa=E[1];this.labels.push(E[0]);this.outputs.push(fa)}};xi.parse=function(u,E){if(4>u.length-1)return E.error("Expected at least 4 arguments, but found only "+(u.length-1)+".");if(0!==(u.length-1)%2)return E.error("Expected an even number of arguments.");var P=E.parse(u[1],1,fb);if(!P)return null;var fa=[],pa=null;E.expectedType&&"value"!==E.expectedType.kind&&(pa=E.expectedType);for(var wa=1;wa<u.length;wa+=2){var Ea=1===wa?-Infinity:
u[wa],Va=u[wa+1],Za=wa,ib=wa+1;if("number"!==typeof Ea)return E.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Za);if(fa.length&&fa[fa.length-1][0]>=Ea)return E.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Za);Va=E.parse(Va,ib,pa);if(!Va)return null;pa=pa||Va.type;fa.push([Ea,Va])}return new xi(pa,P,fa)};xi.prototype.evaluate=function(u){var E=
this.labels,P=this.outputs;if(1===E.length)return P[0].evaluate(u);var fa=this.input.evaluate(u);if(fa<=E[0])return P[0].evaluate(u);var pa=E.length;if(fa>=E[pa-1])return P[pa-1].evaluate(u);E=fc(E,fa);return P[E].evaluate(u)};xi.prototype.eachChild=function(u){u(this.input);for(var E=0,P=this.outputs;E<P.length;E+=1)u(P[E])};xi.prototype.outputDefined=function(){return this.outputs.every(function(u){return u.outputDefined()})};xi.prototype.serialize=function(){for(var u=["step",this.input.serialize()],
E=0;E<this.labels.length;E++)0<E&&u.push(this.labels[E]),u.push(this.outputs[E].serialize());return u};var hj=Object.freeze({__proto__:null,number:pb,color:function(u,E,P){return new pd(pb(u.r,E.r,P),pb(u.g,E.g,P),pb(u.b,E.b,P),pb(u.a,E.a,P))},array:function(u,E,P){return u.map(function(fa,pa){return pb(fa,E[pa],P)})}}),xg=4/29,Ki=6/29,lg=3*Ki*Ki,bg=Ki*Ki*Ki,ph=Math.PI/180,Wj=180/Math.PI,xh={forward:Ja,reverse:Pa,interpolate:function(u,E,P){return{l:pb(u.l,E.l,P),a:pb(u.a,E.a,P),b:pb(u.b,E.b,P),alpha:pb(u.alpha,
E.alpha,P)}}},fi={forward:function(u){var E=Ja(u),P=E.a,fa=E.b,pa=Math.atan2(fa,P)*Wj;return{h:0>pa?pa+360:pa,c:Math.sqrt(P*P+fa*fa),l:E.l,alpha:u.a}},reverse:function(u){var E=u.h*ph,P=u.c;return Pa({l:u.l,a:Math.cos(E)*P,b:Math.sin(E)*P,alpha:u.alpha})},interpolate:function(u,E,P){var fa=u.h,pa=E.h-fa;return{h:fa+P*(180<pa||-180>pa?pa-360*Math.round(pa/360):pa),c:pb(u.c,E.c,P),l:pb(u.l,E.l,P),alpha:pb(u.alpha,E.alpha,P)}}},ij=Object.freeze({__proto__:null,lab:xh,hcl:fi}),Ag=function(u,E,P,fa,pa){this.type=
u;this.operator=E;this.interpolation=P;this.input=fa;this.labels=[];this.outputs=[];for(u=0;u<pa.length;u+=1)E=pa[u],P=E[1],this.labels.push(E[0]),this.outputs.push(P)};Ag.interpolationFactor=function(u,E,P,fa){var pa=0;"exponential"===u.name?pa=db(E,u.base,P,fa):"linear"===u.name?pa=db(E,1,P,fa):"cubic-bezier"===u.name&&(u=u.controlPoints,pa=(new zg(u[0],u[1],u[2],u[3])).solve(db(E,1,P,fa)));return pa};Ag.parse=function(u,E){var P=u[0],fa=u[1],pa=u[2],wa=u.slice(3);if(!Array.isArray(fa)||0===fa.length)return E.error("Expected an interpolation type expression.",
1);if("linear"===fa[0])fa={name:"linear"};else if("exponential"===fa[0]){fa=fa[1];if("number"!==typeof fa)return E.error("Exponential interpolation requires a numeric base.",1,1);fa={name:"exponential",base:fa}}else if("cubic-bezier"===fa[0]){fa=fa.slice(1);if(4!==fa.length||fa.some(function(ic){return"number"!==typeof ic||0>ic||1<ic}))return E.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);fa={name:"cubic-bezier",controlPoints:fa}}else return E.error("Unknown interpolation type "+
String(fa[0]),1,0);if(4>u.length-1)return E.error("Expected at least 4 arguments, but found only "+(u.length-1)+".");if(0!==(u.length-1)%2)return E.error("Expected an even number of arguments.");pa=E.parse(pa,2,fb);if(!pa)return null;u=[];var Ea=null;"interpolate-hcl"===P||"interpolate-lab"===P?Ea=Tb:E.expectedType&&"value"!==E.expectedType.kind&&(Ea=E.expectedType);for(var Va=0;Va<wa.length;Va+=2){var Za=wa[Va],ib=wa[Va+1],Hb=Va+3,Sb=Va+4;if("number"!==typeof Za)return E.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',
Hb);if(u.length&&u[u.length-1][0]>=Za)return E.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Hb);ib=E.parse(ib,Sb,Ea);if(!ib)return null;Ea=Ea||ib.type;u.push([Za,ib])}return"number"===Ea.kind||"color"===Ea.kind||"array"===Ea.kind&&"number"===Ea.itemType.kind&&"number"===typeof Ea.N?new Ag(Ea,P,fa,pa,u):E.error("Type "+za(Ea)+" is not interpolatable.")};Ag.prototype.evaluate=function(u){var E=this.labels,P=this.outputs;if(1===
E.length)return P[0].evaluate(u);var fa=this.input.evaluate(u);if(fa<=E[0])return P[0].evaluate(u);var pa=E.length;if(fa>=E[pa-1])return P[pa-1].evaluate(u);pa=fc(E,fa);E=Ag.interpolationFactor(this.interpolation,fa,E[pa],E[pa+1]);fa=P[pa].evaluate(u);u=P[pa+1].evaluate(u);return"interpolate"===this.operator?hj[this.type.kind.toLowerCase()](fa,u,E):"interpolate-hcl"===this.operator?fi.reverse(fi.interpolate(fi.forward(fa),fi.forward(u),E)):xh.reverse(xh.interpolate(xh.forward(fa),xh.forward(u),E))};
Ag.prototype.eachChild=function(u){u(this.input);for(var E=0,P=this.outputs;E<P.length;E+=1)u(P[E])};Ag.prototype.outputDefined=function(){return this.outputs.every(function(u){return u.outputDefined()})};Ag.prototype.serialize=function(){var u="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);u=[this.operator,u,this.input.serialize()];
for(var E=0;E<this.labels.length;E++)u.push(this.labels[E],this.outputs[E].serialize());return u};var yi=function(u,E){this.type=u;this.args=E};yi.parse=function(u,E){if(2>u.length)return E.error("Expectected at least one argument.");var P=null,fa=E.expectedType;fa&&"value"!==fa.kind&&(P=fa);var pa=[],wa=0;for(u=u.slice(1);wa<u.length;wa+=1){var Ea=E.parse(u[wa],1+pa.length,P,void 0,{typeAnnotation:"omit"});if(!Ea)return null;P=P||Ea.type;pa.push(Ea)}return fa&&pa.some(function(Va){return Ia(fa,Va.type)})?
new yi(kc,pa):new yi(P,pa)};yi.prototype.evaluate=function(u){for(var E=null,P=0,fa,pa=0,wa=this.args;pa<wa.length&&(E=wa[pa],P++,(E=E.evaluate(u))&&E instanceof ee&&!E.available&&(fa||(fa=E.name),E=null,P===this.args.length&&(E=fa)),null===E);pa+=1);return E};yi.prototype.eachChild=function(u){this.args.forEach(u)};yi.prototype.outputDefined=function(){return this.args.every(function(u){return u.outputDefined()})};yi.prototype.serialize=function(){var u=["coalesce"];this.eachChild(function(E){u.push(E.serialize())});
return u};var Xh=function(u,E){this.type=E.type;this.bindings=[].concat(u);this.result=E};Xh.prototype.evaluate=function(u){return this.result.evaluate(u)};Xh.prototype.eachChild=function(u){for(var E=0,P=this.bindings;E<P.length;E+=1)u(P[E][1]);u(this.result)};Xh.parse=function(u,E){if(4>u.length)return E.error("Expected at least 3 arguments, but found "+(u.length-1)+" instead.");for(var P=[],fa=1;fa<u.length-1;fa+=2){var pa=u[fa];if("string"!==typeof pa)return E.error("Expected string, but found "+
typeof pa+" instead.",fa);if(/[^a-zA-Z0-9_]/.test(pa))return E.error("Variable names must contain only alphanumeric characters or '_'.",fa);var wa=E.parse(u[fa+1],fa+1);if(!wa)return null;P.push([pa,wa])}return(u=E.parse(u[u.length-1],u.length-1,E.expectedType,P))?new Xh(P,u):null};Xh.prototype.outputDefined=function(){return this.result.outputDefined()};Xh.prototype.serialize=function(){for(var u=["let"],E=0,P=this.bindings;E<P.length;E+=1){var fa=P[E];u.push(fa[0],fa[1].serialize())}u.push(this.result.serialize());
return u};var hi=function(u,E,P){this.type=u;this.index=E;this.input=P};hi.parse=function(u,E){if(3!==u.length)return E.error("Expected 2 arguments, but found "+(u.length-1)+" instead.");var P=E.parse(u[1],1,fb);u=E.parse(u[2],2,ta(E.expectedType||kc));return P&&u?new hi(u.type.itemType,P,u):null};hi.prototype.evaluate=function(u){var E=this.index.evaluate(u);u=this.input.evaluate(u);if(0>E)throw new je("Array index out of bounds: "+E+" \x3c 0.");if(E>=u.length)throw new je("Array index out of bounds: "+
E+" \x3e "+(u.length-1)+".");if(E!==Math.floor(E))throw new je("Array index must be an integer, but found "+E+" instead.");return u[E]};hi.prototype.eachChild=function(u){u(this.index);u(this.input)};hi.prototype.outputDefined=function(){return!1};hi.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Zi=function(u,E){this.type=Fb;this.needle=u;this.haystack=E};Zi.parse=function(u,E){if(3!==u.length)return E.error("Expected 2 arguments, but found "+(u.length-
1)+" instead.");var P=E.parse(u[1],1,kc);u=E.parse(u[2],2,kc);return P&&u?Xa(P.type,[Fb,xb,fb,hb,kc])?new Zi(P,u):E.error("Expected first argument to be of type boolean, string, number or null, but found "+za(P.type)+" instead"):null};Zi.prototype.evaluate=function(u){var E=this.needle.evaluate(u);u=this.haystack.evaluate(u);if(!u)return!1;if(!$a(E,["boolean","string","number","null"]))throw new je("Expected first argument to be of type boolean, string, number or null, but found "+za(jb(E))+" instead.");
if(!$a(u,["string","array"]))throw new je("Expected second argument to be of type array or string, but found "+za(jb(u))+" instead.");return 0<=u.indexOf(E)};Zi.prototype.eachChild=function(u){u(this.needle);u(this.haystack)};Zi.prototype.outputDefined=function(){return!0};Zi.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Qi=function(u,E,P){this.type=fb;this.needle=u;this.haystack=E;this.fromIndex=P};Qi.parse=function(u,E){if(2>=u.length||5<=u.length)return E.error("Expected 3 or 4 arguments, but found "+
(u.length-1)+" instead.");var P=E.parse(u[1],1,kc),fa=E.parse(u[2],2,kc);return P&&fa?Xa(P.type,[Fb,xb,fb,hb,kc])?4===u.length?(u=E.parse(u[3],3,fb))?new Qi(P,fa,u):null:new Qi(P,fa):E.error("Expected first argument to be of type boolean, string, number or null, but found "+za(P.type)+" instead"):null};Qi.prototype.evaluate=function(u){var E=this.needle.evaluate(u),P=this.haystack.evaluate(u);if(!$a(E,["boolean","string","number","null"]))throw new je("Expected first argument to be of type boolean, string, number or null, but found "+
za(jb(E))+" instead.");if(!$a(P,["string","array"]))throw new je("Expected second argument to be of type array or string, but found "+za(jb(P))+" instead.");return this.fromIndex?(u=this.fromIndex.evaluate(u),P.indexOf(E,u)):P.indexOf(E)};Qi.prototype.eachChild=function(u){u(this.needle);u(this.haystack);this.fromIndex&&u(this.fromIndex)};Qi.prototype.outputDefined=function(){return!1};Qi.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var u=this.fromIndex.serialize();
return["index-of",this.needle.serialize(),this.haystack.serialize(),u]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Ci=function(u,E,P,fa,pa,wa){this.inputType=u;this.type=E;this.input=P;this.cases=fa;this.outputs=pa;this.otherwise=wa};Ci.parse=function(u,E){if(5>u.length)return E.error("Expected at least 4 arguments, but found only "+(u.length-1)+".");if(1!==u.length%2)return E.error("Expected an even number of arguments.");if(E.expectedType&&"value"!==E.expectedType.kind)var P=
E.expectedType;for(var fa={},pa=[],wa=2;wa<u.length-1;wa+=2){var Ea=u[wa],Va=u[wa+1];Array.isArray(Ea)||(Ea=[Ea]);var Za=E.concat(wa);if(0===Ea.length)return Za.error("Expected at least one branch label.");for(var ib=0;ib<Ea.length;ib+=1){var Hb=Ea[ib];if("number"!==typeof Hb&&"string"!==typeof Hb)return Za.error("Branch labels must be numbers or strings.");if("number"===typeof Hb&&Math.abs(Hb)>Number.MAX_SAFE_INTEGER)return Za.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+
".");if("number"===typeof Hb&&Math.floor(Hb)!==Hb)return Za.error("Numeric branch labels must be integer values.");if(!Sb)var Sb=jb(Hb);else if(Za.checkSubtype(Sb,jb(Hb)))return null;if("undefined"!==typeof fa[String(Hb)])return Za.error("Branch labels must be unique.");fa[String(Hb)]=pa.length}Va=E.parse(Va,wa,P);if(!Va)return null;P=P||Va.type;pa.push(Va)}wa=E.parse(u[1],1,kc);if(!wa)return null;u=E.parse(u[u.length-1],u.length-1,P);return!u||"value"!==wa.type.kind&&E.concat(1).checkSubtype(Sb,
wa.type)?null:new Ci(Sb,P,wa,fa,pa,u)};Ci.prototype.evaluate=function(u){var E=this.input.evaluate(u);return(jb(E)===this.inputType&&this.outputs[this.cases[E]]||this.otherwise).evaluate(u)};Ci.prototype.eachChild=function(u){u(this.input);this.outputs.forEach(u);u(this.otherwise)};Ci.prototype.outputDefined=function(){return this.outputs.every(function(u){return u.outputDefined()})&&this.otherwise.outputDefined()};Ci.prototype.serialize=function(){for(var u=this,E=["match",this.input.serialize()],
P=[],fa={},pa=0,wa=Object.keys(this.cases).sort();pa<wa.length;pa+=1){var Ea=wa[pa],Va=fa[this.cases[Ea]];void 0===Va?(fa[this.cases[Ea]]=P.length,P.push([this.cases[Ea],[Ea]])):P[Va][1].push(Ea)}fa=function(Za){return"number"===u.inputType.kind?Number(Za):Za};for(pa=0;pa<P.length;pa+=1)wa=P[pa],Va=wa[0],Va=wa[1],1===Va.length?E.push(fa(Va[0])):E.push(Va.map(fa)),E.push(this.outputs[outputIndex$1].serialize());E.push(this.otherwise.serialize());return E};var Di=function(u,E,P){this.type=u;this.branches=
E;this.otherwise=P};Di.parse=function(u,E){if(4>u.length)return E.error("Expected at least 3 arguments, but found only "+(u.length-1)+".");if(0!==u.length%2)return E.error("Expected an odd number of arguments.");if(E.expectedType&&"value"!==E.expectedType.kind)var P=E.expectedType;for(var fa=[],pa=1;pa<u.length-1;pa+=2){var wa=E.parse(u[pa],pa,Fb);if(!wa)return null;var Ea=E.parse(u[pa+1],pa+1,P);if(!Ea)return null;fa.push([wa,Ea]);P=P||Ea.type}return(u=E.parse(u[u.length-1],u.length-1,P))?new Di(P,
fa,u):null};Di.prototype.evaluate=function(u){for(var E=0,P=this.branches;E<P.length;E+=1){var fa=P[E],pa=fa[1];if(fa[0].evaluate(u))return pa.evaluate(u)}return this.otherwise.evaluate(u)};Di.prototype.eachChild=function(u){for(var E=0,P=this.branches;E<P.length;E+=1){var fa=P[E],pa=fa[1];u(fa[0]);u(pa)}u(this.otherwise)};Di.prototype.outputDefined=function(){return this.branches.every(function(u){return u[1].outputDefined()})&&this.otherwise.outputDefined()};Di.prototype.serialize=function(){var u=
["case"];this.eachChild(function(E){u.push(E.serialize())});return u};var Ei=function(u,E,P,fa){this.type=u;this.input=E;this.beginIndex=P;this.endIndex=fa};Ei.parse=function(u,E){if(2>=u.length||5<=u.length)return E.error("Expected 3 or 4 arguments, but found "+(u.length-1)+" instead.");var P=E.parse(u[1],1,kc),fa=E.parse(u[2],2,fb);return P&&fa?Xa(P.type,[ta(kc),xb,kc])?4===u.length?(u=E.parse(u[3],3,fb))?new Ei(P.type,P,fa,u):null:new Ei(P.type,P,fa):E.error("Expected first argument to be of type array or string, but found "+
za(P.type)+" instead"):null};Ei.prototype.evaluate=function(u){var E=this.input.evaluate(u),P=this.beginIndex.evaluate(u);if(!$a(E,["string","array"]))throw new je("Expected first argument to be of type array or string, but found "+za(jb(E))+" instead.");return this.endIndex?(u=this.endIndex.evaluate(u),E.slice(P,u)):E.slice(P)};Ei.prototype.eachChild=function(u){u(this.input);u(this.beginIndex);this.endIndex&&u(this.endIndex)};Ei.prototype.outputDefined=function(){return!1};Ei.prototype.serialize=
function(){if(null!=this.endIndex&&void 0!==this.endIndex){var u=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),u]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var nk=cc("\x3d\x3d",function(u,E,P){return E===P},Gb),Dk=cc("!\x3d",function(u,E,P){return E!==P},function(u,E,P,fa){return!Gb(u,E,P,fa)}),ol=cc("\x3c",function(u,E,P){return E<P},function(u,E,P,fa){return 0>fa.compare(E,P)}),fl=cc("\x3e",function(u,E,P){return E>P},function(u,
E,P,fa){return 0<fa.compare(E,P)}),hl=cc("\x3c\x3d",function(u,E,P){return E<=P},function(u,E,P,fa){return 0>=fa.compare(E,P)}),pl=cc("\x3e\x3d",function(u,E,P){return E>=P},function(u,E,P,fa){return 0<=fa.compare(E,P)}),yj=function(u,E,P,fa,pa){this.type=xb;this.number=u;this.locale=E;this.currency=P;this.minFractionDigits=fa;this.maxFractionDigits=pa};yj.parse=function(u,E){if(3!==u.length)return E.error("Expected two arguments.");var P=E.parse(u[1],1,fb);if(!P)return null;u=u[2];if("object"!==
typeof u||Array.isArray(u))return E.error("NumberFormat options argument must be an object.");var fa=null;if(u.locale&&(fa=E.parse(u.locale,1,xb),!fa))return null;var pa=null;if(u.currency&&(pa=E.parse(u.currency,1,xb),!pa))return null;var wa=null;if(u["min-fraction-digits"]&&(wa=E.parse(u["min-fraction-digits"],1,fb),!wa))return null;var Ea=null;return u["max-fraction-digits"]&&(Ea=E.parse(u["max-fraction-digits"],1,fb),!Ea)?null:new yj(P,fa,pa,wa,Ea)};yj.prototype.evaluate=function(u){return(new Intl.NumberFormat(this.locale?
this.locale.evaluate(u):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(u):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(u):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(u):void 0})).format(this.number.evaluate(u))};yj.prototype.eachChild=function(u){u(this.number);this.locale&&u(this.locale);this.currency&&u(this.currency);this.minFractionDigits&&u(this.minFractionDigits);this.maxFractionDigits&&
u(this.maxFractionDigits)};yj.prototype.outputDefined=function(){return!1};yj.prototype.serialize=function(){var u={};this.locale&&(u.locale=this.locale.serialize());this.currency&&(u.currency=this.currency.serialize());this.minFractionDigits&&(u["min-fraction-digits"]=this.minFractionDigits.serialize());this.maxFractionDigits&&(u["max-fraction-digits"]=this.maxFractionDigits.serialize());return["number-format",this.number.serialize(),u]};var yg=function(u){this.type=fb;this.input=u};yg.parse=function(u,
E){return 2!==u.length?E.error("Expected 1 argument, but found "+(u.length-1)+" instead."):(u=E.parse(u[1],1))?"array"!==u.type.kind&&"string"!==u.type.kind&&"value"!==u.type.kind?E.error("Expected argument of type string or array, but found "+za(u.type)+" instead."):new yg(u):null};yg.prototype.evaluate=function(u){u=this.input.evaluate(u);if("string"===typeof u||Array.isArray(u))return u.length;throw new je("Expected value to be of type string or array, but found "+za(jb(u))+" instead.");};yg.prototype.eachChild=
function(u){u(this.input)};yg.prototype.outputDefined=function(){return!1};yg.prototype.serialize=function(){var u=["length"];this.eachChild(function(E){u.push(E.serialize())});return u};var Kj={"\x3d\x3d":nk,"!\x3d":Dk,"\x3e":fl,"\x3c":ol,"\x3e\x3d":pl,"\x3c\x3d":hl,array:re,at:hi,"boolean":re,"case":Di,coalesce:yi,collator:fg,format:Pd,image:mf,"in":Zi,"index-of":Qi,interpolate:Ag,"interpolate-hcl":Ag,"interpolate-lab":Ag,length:yg,let:Xh,literal:ce,match:Ci,number:re,"number-format":yj,object:re,
slice:Ei,step:xi,string:re,"to-boolean":xf,"to-color":xf,"to-number":xf,"to-string":xf,"var":rg,within:pg};Ef.register(Kj,{error:[{kind:"error"},[xb],function(u,E){throw new je(E[0].evaluate(u));}],"typeof":[xb,[kc],function(u,E){return za(jb(E[0].evaluate(u)))}],"to-rgba":[ta(fb,4),[Tb],function(u,E){return E[0].evaluate(u).toArray()}],rgb:[Tb,[fb,fb,fb],uc],rgba:[Tb,[fb,fb,fb,fb],uc],has:{type:Fb,overloads:[[[xb],function(u,E){E=E[0].evaluate(u);u=u.properties();return E in u}],[[xb,nc],function(u,
E){var P=E[1];E=E[0].evaluate(u);u=P.evaluate(u);return E in u}]]},get:{type:kc,overloads:[[[xb],function(u,E){return fd(E[0].evaluate(u),u.properties())}],[[xb,nc],function(u,E){var P=E[1];return fd(E[0].evaluate(u),P.evaluate(u))}]]},"feature-state":[kc,[xb],function(u,E){return fd(E[0].evaluate(u),u.featureState||{})}],properties:[nc,[],function(u){return u.properties()}],"geometry-type":[xb,[],function(u){return u.geometryType()}],id:[kc,[],function(u){return u.id()}],zoom:[fb,[],function(u){return u.globals.zoom}],
"heatmap-density":[fb,[],function(u){return u.globals.heatmapDensity||0}],"line-progress":[fb,[],function(u){return u.globals.lineProgress||0}],accumulated:[kc,[],function(u){return void 0===u.globals.accumulated?null:u.globals.accumulated}],"+":[fb,{type:fb},function(u,E){for(var P=0,fa=0;fa<E.length;fa+=1)P+=E[fa].evaluate(u);return P}],"*":[fb,{type:fb},function(u,E){for(var P=1,fa=0;fa<E.length;fa+=1)P*=E[fa].evaluate(u);return P}],"-":{type:fb,overloads:[[[fb,fb],function(u,E){var P=E[1];return E[0].evaluate(u)-
P.evaluate(u)}],[[fb],function(u,E){return-E[0].evaluate(u)}]]},"/":[fb,[fb,fb],function(u,E){var P=E[1];return E[0].evaluate(u)/P.evaluate(u)}],"%":[fb,[fb,fb],function(u,E){var P=E[1];return E[0].evaluate(u)%P.evaluate(u)}],ln2:[fb,[],function(){return Math.LN2}],pi:[fb,[],function(){return Math.PI}],e:[fb,[],function(){return Math.E}],"^":[fb,[fb,fb],function(u,E){var P=E[1];return Math.pow(E[0].evaluate(u),P.evaluate(u))}],sqrt:[fb,[fb],function(u,E){return Math.sqrt(E[0].evaluate(u))}],log10:[fb,
[fb],function(u,E){return Math.log(E[0].evaluate(u))/Math.LN10}],ln:[fb,[fb],function(u,E){return Math.log(E[0].evaluate(u))}],log2:[fb,[fb],function(u,E){return Math.log(E[0].evaluate(u))/Math.LN2}],sin:[fb,[fb],function(u,E){return Math.sin(E[0].evaluate(u))}],cos:[fb,[fb],function(u,E){return Math.cos(E[0].evaluate(u))}],tan:[fb,[fb],function(u,E){return Math.tan(E[0].evaluate(u))}],asin:[fb,[fb],function(u,E){return Math.asin(E[0].evaluate(u))}],acos:[fb,[fb],function(u,E){return Math.acos(E[0].evaluate(u))}],
atan:[fb,[fb],function(u,E){return Math.atan(E[0].evaluate(u))}],min:[fb,{type:fb},function(u,E){return Math.min.apply(Math,E.map(function(P){return P.evaluate(u)}))}],max:[fb,{type:fb},function(u,E){return Math.max.apply(Math,E.map(function(P){return P.evaluate(u)}))}],abs:[fb,[fb],function(u,E){return Math.abs(E[0].evaluate(u))}],round:[fb,[fb],function(u,E){u=E[0].evaluate(u);return 0>u?-Math.round(-u):Math.round(u)}],floor:[fb,[fb],function(u,E){return Math.floor(E[0].evaluate(u))}],ceil:[fb,
[fb],function(u,E){return Math.ceil(E[0].evaluate(u))}],"filter-\x3d\x3d":[Fb,[xb,kc],function(u,E){var P=E[0];E=E[1];return u.properties()[P.value]===E.value}],"filter-id-\x3d\x3d":[Fb,[kc],function(u,E){E=E[0];return u.id()===E.value}],"filter-type-\x3d\x3d":[Fb,[xb],function(u,E){E=E[0];return u.geometryType()===E.value}],"filter-\x3c":[Fb,[xb,kc],function(u,E){var P=E[0];E=E[1];u=u.properties()[P.value];P=E.value;return typeof u===typeof P&&u<P}],"filter-id-\x3c":[Fb,[kc],function(u,E){E=E[0];
u=u.id();E=E.value;return typeof u===typeof E&&u<E}],"filter-\x3e":[Fb,[xb,kc],function(u,E){var P=E[0];E=E[1];u=u.properties()[P.value];P=E.value;return typeof u===typeof P&&u>P}],"filter-id-\x3e":[Fb,[kc],function(u,E){E=E[0];u=u.id();E=E.value;return typeof u===typeof E&&u>E}],"filter-\x3c\x3d":[Fb,[xb,kc],function(u,E){var P=E[0];E=E[1];u=u.properties()[P.value];P=E.value;return typeof u===typeof P&&u<=P}],"filter-id-\x3c\x3d":[Fb,[kc],function(u,E){E=E[0];u=u.id();E=E.value;return typeof u===
typeof E&&u<=E}],"filter-\x3e\x3d":[Fb,[xb,kc],function(u,E){var P=E[0];E=E[1];u=u.properties()[P.value];P=E.value;return typeof u===typeof P&&u>=P}],"filter-id-\x3e\x3d":[Fb,[kc],function(u,E){E=E[0];u=u.id();E=E.value;return typeof u===typeof E&&u>=E}],"filter-has":[Fb,[kc],function(u,E){return E[0].value in u.properties()}],"filter-has-id":[Fb,[],function(u){return null!==u.id()&&void 0!==u.id()}],"filter-type-in":[Fb,[ta(xb)],function(u,E){return 0<=E[0].value.indexOf(u.geometryType())}],"filter-id-in":[Fb,
[ta(kc)],function(u,E){return 0<=E[0].value.indexOf(u.id())}],"filter-in-small":[Fb,[xb,ta(kc)],function(u,E){var P=E[0];return 0<=E[1].value.indexOf(u.properties()[P.value])}],"filter-in-large":[Fb,[xb,ta(kc)],function(u,E){var P=E[0];E=E[1];a:{u=u.properties()[P.value];P=E.value;var fa=0;for(E=E.value.length-1;fa<=E;){var pa=fa+E>>1;if(P[pa]===u){E=!0;break a}P[pa]>u?E=pa-1:fa=pa+1}E=!1}return E}],all:{type:Fb,overloads:[[[Fb,Fb],function(u,E){var P=E[1];return E[0].evaluate(u)&&P.evaluate(u)}],
[{type:Fb},function(u,E){for(var P=0;P<E.length;P+=1)if(!E[P].evaluate(u))return!1;return!0}]]},any:{type:Fb,overloads:[[[Fb,Fb],function(u,E){var P=E[1];return E[0].evaluate(u)||P.evaluate(u)}],[{type:Fb},function(u,E){for(var P=0;P<E.length;P+=1)if(E[P].evaluate(u))return!0;return!1}]]},"!":[Fb,[Fb],function(u,E){return!E[0].evaluate(u)}],"is-supported-script":[Fb,[xb],function(u,E){E=E[0];var P=u.globals&&u.globals.isSupportedScript;return P?P(E.evaluate(u)):!0}],upcase:[xb,[xb],function(u,E){return E[0].evaluate(u).toUpperCase()}],
downcase:[xb,[xb],function(u,E){return E[0].evaluate(u).toLowerCase()}],concat:[xb,{type:kc},function(u,E){return E.map(function(P){return vb(P.evaluate(u))}).join("")}],"resolved-locale":[xb,[Cc],function(u,E){return E[0].evaluate(u).resolvedLocale()}]});var tj=function(u,E){this.expression=u;this._warningHistory={};this._evaluator=new Gf;this._defaultValue=E?"color"===E.type&&tb(E.default)?new pd(0,0,0,0):"color"===E.type?pd.parse(E.default)||null:void 0===E.default?null:E.default:null;this._enumValues=
E&&"enum"===E.type?E.values:null};tj.prototype.evaluateWithoutErrorHandling=function(u,E,P,fa,pa,wa){this._evaluator.globals=u;this._evaluator.feature=E;this._evaluator.featureState=P;this._evaluator.canonical=fa;this._evaluator.availableImages=pa||null;this._evaluator.formattedSection=wa;return this.expression.evaluate(this._evaluator)};tj.prototype.evaluate=function(u,E,P,fa,pa,wa){this._evaluator.globals=u;this._evaluator.feature=E||null;this._evaluator.featureState=P||null;this._evaluator.canonical=
fa;this._evaluator.availableImages=pa||null;this._evaluator.formattedSection=wa||null;try{var Ea=this.expression.evaluate(this._evaluator);if(null===Ea||void 0===Ea||"number"===typeof Ea&&Ea!==Ea)return this._defaultValue;if(this._enumValues&&!(Ea in this._enumValues))throw new je("Expected value to be one of "+Object.keys(this._enumValues).map(function(Va){return JSON.stringify(Va)}).join(", ")+", but found "+JSON.stringify(Ea)+" instead.");return Ea}catch(Va){return this._warningHistory[Va.message]||
(this._warningHistory[Va.message]=!0,"undefined"!==typeof console&&console.warn(Va.message)),this._defaultValue}};var uj=function(u,E){this.kind=u;this._styleExpression=E;this.isStateDependent="constant"!==u&&!cb(E.expression)};uj.prototype.evaluateWithoutErrorHandling=function(u,E,P,fa,pa,wa){return this._styleExpression.evaluateWithoutErrorHandling(u,E,P,fa,pa,wa)};uj.prototype.evaluate=function(u,E,P,fa,pa,wa){return this._styleExpression.evaluate(u,E,P,fa,pa,wa)};var Mi=function(u,E,P,fa){this.kind=
u;this.zoomStops=P;this._styleExpression=E;this.isStateDependent="camera"!==u&&!cb(E.expression);this.interpolationType=fa};Mi.prototype.evaluateWithoutErrorHandling=function(u,E,P,fa,pa,wa){return this._styleExpression.evaluateWithoutErrorHandling(u,E,P,fa,pa,wa)};Mi.prototype.evaluate=function(u,E,P,fa,pa,wa){return this._styleExpression.evaluate(u,E,P,fa,pa,wa)};Mi.prototype.interpolationFactor=function(u,E,P){return this.interpolationType?Ag.interpolationFactor(this.interpolationType,u,E,P):0};
var Xj=function(u,E){this._parameters=u;this._specification=E;ka(this,sc(this._parameters,this._specification))};Xj.deserialize=function(u){return new Xj(u._parameters,u._specification)};Xj.serialize=function(u){return{_parameters:u._parameters,_specification:u._specification}};var el={type:"boolean","default":!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},Yj={promoteId:function(u){var E=u.key;u=u.value;if("string"===Tc(u))return Sd({key:E,
value:u});var P=[],fa;for(fa in u)P.push.apply(P,Sd({key:E+"."+fa,value:u[fa]}));return P}},zi={"*":function(){return[]},array:Fd,"boolean":function(u){var E=u.value;u=u.key;var P=Tc(E);return"boolean"!==P?[new Na(u,E,"boolean expected, "+P+" found")]:[]},number:yd,color:function(u){var E=u.key;u=u.value;var P=Tc(u);return"string"!==P?[new Na(E,u,"color expected, "+P+" found")]:null===ld(u)?[new Na(E,u,'color expected, "'+u+'" found')]:[]},constants:la,"enum":Nc,filter:te,"function":Lc,layer:Bf,object:Bd,
source:De,light:hf,string:Sd,formatted:function(u){return 0===Sd(u).length?[]:cd(u)},resolvedImage:function(u){return 0===Sd(u).length?[]:cd(u)}};He.source=df(De);He.light=df(hf);He.layer=df(Bf);He.filter=df(te);He.paintProperty=df(of);He.layoutProperty=df(vf);var Fi=He.light,ql=He.paintProperty,rl=He.layoutProperty,Ai=3;Gd.prototype.insert=function(u,E,P,fa,pa){this._forEachCell(E,P,fa,pa,this._insertCell,this.uid++);this.keys.push(u);this.bboxes.push(E);this.bboxes.push(P);this.bboxes.push(fa);
this.bboxes.push(pa)};Gd.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer.";};Gd.prototype._insertCell=function(u,E,P,fa,pa,wa){this.cells[pa].push(wa)};Gd.prototype.query=function(u,E,P,fa,pa){var wa=this.min,Ea=this.max;if(u<=wa&&E<=wa&&Ea<=P&&Ea<=fa&&!pa)return Array.prototype.slice.call(this.keys);wa=[];this._forEachCell(u,E,P,fa,this._queryCell,wa,{},pa);return wa};Gd.prototype._queryCell=function(u,E,P,fa,pa,wa,Ea,Va){pa=this.cells[pa];if(null!==
pa)for(var Za=this.keys,ib=this.bboxes,Hb=0;Hb<pa.length;Hb++){var Sb=pa[Hb];if(void 0===Ea[Sb]){var ic=4*Sb;(Va?Va(ib[ic+0],ib[ic+1],ib[ic+2],ib[ic+3]):u<=ib[ic+2]&&E<=ib[ic+3]&&P>=ib[ic+0]&&fa>=ib[ic+1])?(Ea[Sb]=!0,wa.push(Za[Sb])):Ea[Sb]=!1}}};Gd.prototype._forEachCell=function(u,E,P,fa,pa,wa,Ea,Va){for(var Za=this._convertToCellCoord(u),ib=this._convertToCellCoord(E),Hb=this._convertToCellCoord(P),Sb=this._convertToCellCoord(fa);Za<=Hb;Za++)for(var ic=ib;ic<=Sb;ic++){var Dc=this.d*ic+Za;if((!Va||
Va(this._convertFromCellCoord(Za),this._convertFromCellCoord(ic),this._convertFromCellCoord(Za+1),this._convertFromCellCoord(ic+1)))&&pa.call(this,u,E,P,fa,Dc,wa,Ea,Va))return}};Gd.prototype._convertFromCellCoord=function(u){return(u-this.padding)/this.scale};Gd.prototype._convertToCellCoord=function(u){return Math.max(0,Math.min(this.d-1,Math.floor(u*this.scale)+this.padding))};Gd.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var u=this.cells,E=Ai+this.cells.length+
1+1,P=0,fa=0;fa<this.cells.length;fa++)P+=this.cells[fa].length;P=new Int32Array(E+P+this.keys.length+this.bboxes.length);P[0]=this.extent;P[1]=this.n;P[2]=this.padding;for(fa=0;fa<u.length;fa++){var pa=u[fa];P[Ai+fa]=E;P.set(pa,E);E+=pa.length}P[Ai+u.length]=E;P.set(this.keys,E);E+=this.keys.length;P[Ai+u.length+1]=E;P.set(this.bboxes,E);return P.buffer};var Zj=self.ImageData,gg=self.ImageBitmap,vj={};Mb("Object",Object);Gd.serialize=function(u,E){u=u.toArrayBuffer();E&&E.push(u);return{buffer:u}};
Gd.deserialize=function(u){return new Gd(u.buffer)};Mb("Grid",Gd);Mb("Color",pd);Mb("Error",Error);Mb("ResolvedImage",ee);Mb("StylePropertyFunction",Xj);Mb("StyleExpression",tj,{omit:["_evaluator"]});Mb("ZoomDependentExpression",Mi);Mb("ZoomConstantExpression",uj);Mb("CompoundExpression",Ef,{omit:["_evaluate"]});for(var Lj in Kj)Kj[Lj]._classRegistryKey||Mb("Expression_"+Lj,Kj[Lj]);var Ri=function(){this.first=!0};Ri.prototype.update=function(u,E){var P=Math.floor(u);if(this.first)return this.first=
!1,this.lastIntegerZoom=P,this.lastIntegerZoomTime=0,this.lastZoom=u,this.lastFloorZoom=P,!0;this.lastFloorZoom>P?(this.lastIntegerZoom=P+1,this.lastIntegerZoomTime=E):this.lastFloorZoom<P&&(this.lastIntegerZoom=P,this.lastIntegerZoomTime=E);return u!==this.lastZoom?(this.lastZoom=u,this.lastFloorZoom=P,!0):!1};var Ce={"Latin-1 Supplement":function(u){return 128<=u&&255>=u},Arabic:function(u){return 1536<=u&&1791>=u},"Arabic Supplement":function(u){return 1872<=u&&1919>=u},"Arabic Extended-A":function(u){return 2208<=
u&&2303>=u},"Hangul Jamo":function(u){return 4352<=u&&4607>=u},"Unified Canadian Aboriginal Syllabics":function(u){return 5120<=u&&5759>=u},Khmer:function(u){return 6016<=u&&6143>=u},"Unified Canadian Aboriginal Syllabics Extended":function(u){return 6320<=u&&6399>=u},"General Punctuation":function(u){return 8192<=u&&8303>=u},"Letterlike Symbols":function(u){return 8448<=u&&8527>=u},"Number Forms":function(u){return 8528<=u&&8591>=u},"Miscellaneous Technical":function(u){return 8960<=u&&9215>=u},
"Control Pictures":function(u){return 9216<=u&&9279>=u},"Optical Character Recognition":function(u){return 9280<=u&&9311>=u},"Enclosed Alphanumerics":function(u){return 9312<=u&&9471>=u},"Geometric Shapes":function(u){return 9632<=u&&9727>=u},"Miscellaneous Symbols":function(u){return 9728<=u&&9983>=u},"Miscellaneous Symbols and Arrows":function(u){return 11008<=u&&11263>=u},"CJK Radicals Supplement":function(u){return 11904<=u&&12031>=u},"Kangxi Radicals":function(u){return 12032<=u&&12255>=u},"Ideographic Description Characters":function(u){return 12272<=
u&&12287>=u},"CJK Symbols and Punctuation":function(u){return 12288<=u&&12351>=u},Hiragana:function(u){return 12352<=u&&12447>=u},Katakana:function(u){return 12448<=u&&12543>=u},Bopomofo:function(u){return 12544<=u&&12591>=u},"Hangul Compatibility Jamo":function(u){return 12592<=u&&12687>=u},Kanbun:function(u){return 12688<=u&&12703>=u},"Bopomofo Extended":function(u){return 12704<=u&&12735>=u},"CJK Strokes":function(u){return 12736<=u&&12783>=u},"Katakana Phonetic Extensions":function(u){return 12784<=
u&&12799>=u},"Enclosed CJK Letters and Months":function(u){return 12800<=u&&13055>=u},"CJK Compatibility":function(u){return 13056<=u&&13311>=u},"CJK Unified Ideographs Extension A":function(u){return 13312<=u&&19903>=u},"Yijing Hexagram Symbols":function(u){return 19904<=u&&19967>=u},"CJK Unified Ideographs":function(u){return 19968<=u&&40959>=u},"Yi Syllables":function(u){return 40960<=u&&42127>=u},"Yi Radicals":function(u){return 42128<=u&&42191>=u},"Hangul Jamo Extended-A":function(u){return 43360<=
u&&43391>=u},"Hangul Syllables":function(u){return 44032<=u&&55215>=u},"Hangul Jamo Extended-B":function(u){return 55216<=u&&55295>=u},"Private Use Area":function(u){return 57344<=u&&63743>=u},"CJK Compatibility Ideographs":function(u){return 63744<=u&&64255>=u},"Arabic Presentation Forms-A":function(u){return 64336<=u&&65023>=u},"Vertical Forms":function(u){return 65040<=u&&65055>=u},"CJK Compatibility Forms":function(u){return 65072<=u&&65103>=u},"Small Form Variants":function(u){return 65104<=
u&&65135>=u},"Arabic Presentation Forms-B":function(u){return 65136<=u&&65279>=u},"Halfwidth and Fullwidth Forms":function(u){return 65280<=u&&65519>=u}},Si=null,ch="unavailable",gi=null,$i=function(u){u&&"string"===typeof u&&-1<u.indexOf("NetworkError")&&(ch="error");Si&&Si(u)},zk=new Ba,zj=function(){if("deferred"!==ch||!gi)throw Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");ch="loading";oe();gi&&cg({url:gi},function(u){u?$i(u):(ch="loaded",oe())})},zh={applyArabicShaping:null,
processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return"loaded"===ch||null!=zh.applyArabicShaping},isLoading:function(){return"loading"===ch},setState:function(u){ch=u.pluginStatus;gi=u.pluginURL},isParsed:function(){return null!=zh.applyArabicShaping&&null!=zh.processBidirectionalText&&null!=zh.processStyledBidirectionalText},getPluginURL:function(){return gi}},ig=function(u,E){this.zoom=u;E?(this.now=E.now,this.fadeDuration=E.fadeDuration,this.zoomHistory=E.zoomHistory,
this.transition=E.transition):(this.fadeDuration=this.now=0,this.zoomHistory=new Ri,this.transition={})};ig.prototype.isSupportedScript=function(u){a:{for(var E=zh.isLoaded(),P=0;P<u.length;P+=1){var fa=u[P].charCodeAt(0);if(!E&&Be(fa)||2304<=fa&&3583>=fa||3840<=fa&&4255>=fa||Ce.Khmer(fa)){u=!1;break a}}u=!0}return u};ig.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)};ig.prototype.getCrossfadeParameters=
function(){var u=this.zoom,E=u-Math.floor(u),P=this.crossFadingFactor();return u>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:E+(1-E)*P}:{fromScale:.5,toScale:1,t:1-(1-P)*E}};var Yh=function(u,E){this.property=u;this.value=E;this.expression=Uc(void 0===E?u.specification.default:E,u.specification)};Yh.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind};Yh.prototype.possiblyEvaluate=function(u,E,P){return this.property.possiblyEvaluate(this,
u,E,P)};var Aj=function(u){this.property=u;this.value=new Yh(u,void 0)};Aj.prototype.transitioned=function(u,E){return new mj(this.property,this.value,E,f({},u.transition,this.transition),u.now)};Aj.prototype.untransitioned=function(){return new mj(this.property,this.value,null,{},0)};var ii=function(u){this._properties=u;this._values=Object.create(u.defaultTransitionablePropertyValues)};ii.prototype.getValue=function(u){return A(this._values[u].value.value)};ii.prototype.setValue=function(u,E){this._values.hasOwnProperty(u)||
(this._values[u]=new Aj(this._values[u].property));this._values[u].value=new Yh(this._values[u].property,null===E?void 0:A(E))};ii.prototype.getTransition=function(u){return A(this._values[u].transition)};ii.prototype.setTransition=function(u,E){this._values.hasOwnProperty(u)||(this._values[u]=new Aj(this._values[u].property));this._values[u].transition=A(E)||void 0};ii.prototype.serialize=function(){for(var u={},E=0,P=Object.keys(this._values);E<P.length;E+=1){var fa=P[E],pa=this.getValue(fa);void 0!==
pa&&(u[fa]=pa);pa=this.getTransition(fa);void 0!==pa&&(u[fa+"-transition"]=pa)}return u};ii.prototype.transitioned=function(u,E){for(var P=new Mj(this._properties),fa=0,pa=Object.keys(this._values);fa<pa.length;fa+=1){var wa=pa[fa];P._values[wa]=this._values[wa].transitioned(u,E._values[wa])}return P};ii.prototype.untransitioned=function(){for(var u=new Mj(this._properties),E=0,P=Object.keys(this._values);E<P.length;E+=1){var fa=P[E];u._values[fa]=this._values[fa].untransitioned()}return u};var mj=
function(u,E,P,fa,pa){this.property=u;this.value=E;this.begin=pa+fa.delay||0;this.end=this.begin+fa.duration||0;u.specification.transition&&(fa.delay||fa.duration)&&(this.prior=P)};mj.prototype.possiblyEvaluate=function(u,E,P){var fa=u.now||0,pa=this.value.possiblyEvaluate(u,E,P),wa=this.prior;if(wa){if(fa>this.end||this.value.isDataDriven())return this.prior=null,pa;if(fa<this.begin)return wa.possiblyEvaluate(u,E,P);var Ea=(fa-this.begin)/(this.end-this.begin);fa=this.property;var Va=fa.interpolate;
u=wa.possiblyEvaluate(u,E,P);0>=Ea?Ea=0:1<=Ea?Ea=1:(E=Ea*Ea,P=E*Ea,Ea=4*(.5>Ea?P:3*(Ea-E)+P-.75));return Va.call(fa,u,pa,Ea)}return pa};var Mj=function(u){this._properties=u;this._values=Object.create(u.defaultTransitioningPropertyValues)};Mj.prototype.possiblyEvaluate=function(u,E,P){for(var fa=new xj(this._properties),pa=0,wa=Object.keys(this._values);pa<wa.length;pa+=1){var Ea=wa[pa];fa._values[Ea]=this._values[Ea].possiblyEvaluate(u,E,P)}return fa};Mj.prototype.hasTransition=function(){for(var u=
0,E=Object.keys(this._values);u<E.length;u+=1)if(this._values[E[u]].prior)return!0;return!1};var aj=function(u){this._properties=u;this._values=Object.create(u.defaultPropertyValues)};aj.prototype.getValue=function(u){return A(this._values[u].value)};aj.prototype.setValue=function(u,E){this._values[u]=new Yh(this._values[u].property,null===E?void 0:A(E))};aj.prototype.serialize=function(){for(var u={},E=0,P=Object.keys(this._values);E<P.length;E+=1){var fa=P[E],pa=this.getValue(fa);void 0!==pa&&(u[fa]=
pa)}return u};aj.prototype.possiblyEvaluate=function(u,E,P){for(var fa=new xj(this._properties),pa=0,wa=Object.keys(this._values);pa<wa.length;pa+=1){var Ea=wa[pa];fa._values[Ea]=this._values[Ea].possiblyEvaluate(u,E,P)}return fa};var Qh=function(u,E,P){this.property=u;this.value=E;this.parameters=P};Qh.prototype.isConstant=function(){return"constant"===this.value.kind};Qh.prototype.constantOr=function(u){return"constant"===this.value.kind?this.value.value:u};Qh.prototype.evaluate=function(u,E,P,
fa){return this.property.evaluate(this.value,this.parameters,u,E,P,fa)};var xj=function(u){this._properties=u;this._values=Object.create(u.defaultPossiblyEvaluatedValues)};xj.prototype.get=function(u){return this._values[u]};var We=function(u){this.specification=u};We.prototype.possiblyEvaluate=function(u,E){return u.expression.evaluate(E)};We.prototype.interpolate=function(u,E,P){var fa=hj[this.specification.type];return fa?fa(u,E,P):u};var ff=function(u,E){this.specification=u;this.overrides=E};
ff.prototype.possiblyEvaluate=function(u,E,P,fa){return"constant"===u.expression.kind||"camera"===u.expression.kind?new Qh(this,{kind:"constant",value:u.expression.evaluate(E,null,{},P,fa)},E):new Qh(this,u.expression,E)};ff.prototype.interpolate=function(u,E,P){if("constant"!==u.value.kind||"constant"!==E.value.kind)return u;if(void 0===u.value.value||void 0===E.value.value)return new Qh(this,{kind:"constant",value:void 0},u.parameters);var fa=hj[this.specification.type];return fa?new Qh(this,{kind:"constant",
value:fa(u.value.value,E.value.value,P)},u.parameters):u};ff.prototype.evaluate=function(u,E,P,fa,pa,wa){return"constant"===u.kind?u.value:u.evaluate(E,P,fa,pa,wa)};var Bj=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype.possiblyEvaluate=function(P,fa,pa,wa){return void 0===P.value?new Qh(this,{kind:"constant",value:void 0},fa):"constant"===P.expression.kind?(pa=P.expression.evaluate(fa,null,{},pa,wa),
P="resolvedImage"===P.property.specification.type&&"string"!==typeof pa?pa.name:pa,P=this._calculate(P,P,P,fa),new Qh(this,{kind:"constant",value:P},fa)):"camera"===P.expression.kind?(P=this._calculate(P.expression.evaluate({zoom:fa.zoom-1}),P.expression.evaluate({zoom:fa.zoom}),P.expression.evaluate({zoom:fa.zoom+1}),fa),new Qh(this,{kind:"constant",value:P},fa)):new Qh(this,P.expression,fa)};E.prototype.evaluate=function(P,fa,pa,wa,Ea,Va){return"source"===P.kind?(P=P.evaluate(fa,pa,wa,Ea,Va),this._calculate(P,
P,P,fa)):"composite"===P.kind?this._calculate(P.evaluate({zoom:Math.floor(fa.zoom)-1},pa,wa),P.evaluate({zoom:Math.floor(fa.zoom)},pa,wa),P.evaluate({zoom:Math.floor(fa.zoom)+1},pa,wa),fa):P.value};E.prototype._calculate=function(P,fa,pa,wa){return wa.zoom>wa.zoomHistory.lastIntegerZoom?{from:P,to:fa}:{from:pa,to:fa}};E.prototype.interpolate=function(P){return P};return E}(ff),Cj=function(u){this.specification=u};Cj.prototype.possiblyEvaluate=function(u,E,P,fa){if(void 0!==u.value)return"constant"===
u.expression.kind?(u=u.expression.evaluate(E,null,{},P,fa),this._calculate(u,u,u,E)):this._calculate(u.expression.evaluate(new ig(Math.floor(E.zoom-1),E)),u.expression.evaluate(new ig(Math.floor(E.zoom),E)),u.expression.evaluate(new ig(Math.floor(E.zoom+1),E)),E)};Cj.prototype._calculate=function(u,E,P,fa){return fa.zoom>fa.zoomHistory.lastIntegerZoom?{from:u,to:E}:{from:P,to:E}};Cj.prototype.interpolate=function(u){return u};var ak=function(u){this.specification=u};ak.prototype.possiblyEvaluate=
function(u,E,P,fa){return!!u.expression.evaluate(E,null,{},P,fa)};ak.prototype.interpolate=function(){return!1};var Rh=function(u){this.properties=u;this.defaultPropertyValues={};this.defaultTransitionablePropertyValues={};this.defaultTransitioningPropertyValues={};this.defaultPossiblyEvaluatedValues={};this.overridableProperties=[];for(var E in u){var P=u[E];P.specification.overridable&&this.overridableProperties.push(E);var fa=this.defaultPropertyValues[E]=new Yh(P,void 0);P=this.defaultTransitionablePropertyValues[E]=
new Aj(P);this.defaultTransitioningPropertyValues[E]=P.untransitioned();this.defaultPossiblyEvaluatedValues[E]=fa.possiblyEvaluate({})}};Mb("DataDrivenProperty",ff);Mb("DataConstantProperty",We);Mb("CrossFadedDataDrivenProperty",Bj);Mb("CrossFadedProperty",Cj);Mb("ColorRampProperty",ak);var Ti=function(u){function E(P,fa){u.call(this);this.id=P.id;this.type=P.type;this._featureFilter={filter:function(){return!0},needGeometry:!1};if("custom"!==P.type&&(this.metadata=P.metadata,this.minzoom=P.minzoom,
this.maxzoom=P.maxzoom,"background"!==P.type&&(this.source=P.source,this.sourceLayer=P["source-layer"],this.filter=P.filter),fa.layout&&(this._unevaluatedLayout=new aj(fa.layout)),fa.paint)){this._transitionablePaint=new ii(fa.paint);for(var pa in P.paint)this.setPaintProperty(pa,P.paint[pa],{validate:!1});for(var wa in P.layout)this.setLayoutProperty(wa,P.layout[wa],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned();this.paint=new xj(fa.paint)}}u&&(E.__proto__=u);
E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters};E.prototype.getLayoutProperty=function(P){return"visibility"===P?this.visibility:this._unevaluatedLayout.getValue(P)};E.prototype.setLayoutProperty=function(P,fa,pa){void 0===pa&&(pa={});null!==fa&&void 0!==fa&&this._validate(rl,"layers."+this.id+".layout."+P,P,fa,pa)||("visibility"===P?this.visibility=fa:this._unevaluatedLayout.setValue(P,fa))};E.prototype.getPaintProperty=
function(P){return x(P,"-transition")?this._transitionablePaint.getTransition(P.slice(0,-11)):this._transitionablePaint.getValue(P)};E.prototype.setPaintProperty=function(P,fa,pa){void 0===pa&&(pa={});if(null!==fa&&void 0!==fa&&this._validate(ql,"layers."+this.id+".paint."+P,P,fa,pa))return!1;if(x(P,"-transition"))return this._transitionablePaint.setTransition(P.slice(0,-11),fa||void 0),!1;var wa=this._transitionablePaint._values[P];pa="cross-faded-data-driven"===wa.property.specification["property-type"];
var Ea=wa.value.isDataDriven();wa=wa.value;this._transitionablePaint.setValue(P,fa);this._handleSpecialPaintPropertyUpdate(P);fa=this._transitionablePaint._values[P].value;return fa.isDataDriven()||Ea||pa||this._handleOverridablePaintPropertyUpdate(P,wa,fa)};E.prototype._handleSpecialPaintPropertyUpdate=function(P){};E.prototype._handleOverridablePaintPropertyUpdate=function(P,fa,pa){return!1};E.prototype.isHidden=function(P){return this.minzoom&&P<this.minzoom||this.maxzoom&&P>=this.maxzoom?!0:"none"===
this.visibility};E.prototype.updateTransitions=function(P){this._transitioningPaint=this._transitionablePaint.transitioned(P,this._transitioningPaint)};E.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()};E.prototype.recalculate=function(P,fa){P.getCrossfadeParameters&&(this._crossfadeParameters=P.getCrossfadeParameters());this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(P,void 0,fa));this.paint=this._transitioningPaint.possiblyEvaluate(P,
void 0,fa)};E.prototype.serialize=function(){var P={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};this.visibility&&(P.layout=P.layout||{},P.layout.visibility=this.visibility);return B(P,function(fa,pa){return void 0!==fa&&!("layout"===pa&&!Object.keys(fa).length)&&
!("paint"===pa&&!Object.keys(fa).length)})};E.prototype._validate=function(P,fa,pa,wa,Ea){void 0===Ea&&(Ea={});return Ea&&!1===Ea.validate?!1:Rc(this,P.call(He,{key:fa,layerType:this.type,objectKey:pa,value:wa,styleSpec:Fa,style:{glyphs:!0,sprite:!0}}))};E.prototype.is3D=function(){return!1};E.prototype.isTileClipped=function(){return!1};E.prototype.hasOffscreenPass=function(){return!1};E.prototype.resize=function(){};E.prototype.isStateDependent=function(){for(var P in this.paint._values){var fa=
this.paint.get(P);if(fa instanceof Qh&&dc(fa.property.specification)&&("source"===fa.value.kind||"composite"===fa.value.kind)&&fa.value.isStateDependent)return!0}return!1};return E}(Ba),Ak={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},ok=function(u,E){this._structArray=u;this._pos1=E*this.size;this._pos2=this._pos1/2;this._pos4=this._pos1/4;this._pos8=this._pos1/8},qg=function(){this.isTransferred=!1;this.capacity=-1;
this.resize(0)};qg.serialize=function(u,E){u._trim();E&&(u.isTransferred=!0,E.push(u.arrayBuffer));return{length:u.length,arrayBuffer:u.arrayBuffer}};qg.deserialize=function(u){var E=Object.create(this.prototype);E.arrayBuffer=u.arrayBuffer;E.length=u.length;E.capacity=u.arrayBuffer.byteLength/E.bytesPerElement;E._refreshViews();return E};qg.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),
this._refreshViews())};qg.prototype.clear=function(){this.length=0};qg.prototype.resize=function(u){this.reserve(u);this.length=u};qg.prototype.reserve=function(u){u>this.capacity&&(this.capacity=Math.max(u,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement),u=this.uint8,this._refreshViews(),u&&this.uint8.set(u))};qg.prototype._refreshViews=function(){throw Error("_refreshViews() must be implemented by each concrete StructArray layout");};var bk=function(u){function E(){u.apply(this,
arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)};E.prototype.emplaceBack=function(P,fa){var pa=this.length;this.resize(pa+1);return this.emplace(pa,P,fa)};E.prototype.emplace=function(P,fa,pa){var wa=2*P;this.int16[wa+0]=fa;this.int16[wa+1]=pa;return P};return E}(qg);bk.prototype.bytesPerElement=4;Mb("StructArrayLayout2i4",bk);
var Ek=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)};E.prototype.emplaceBack=function(P,fa,pa,wa){var Ea=this.length;this.resize(Ea+1);return this.emplace(Ea,P,fa,pa,wa)};E.prototype.emplace=function(P,fa,pa,wa,Ea){var Va=4*P;this.int16[Va+0]=fa;this.int16[Va+1]=pa;this.int16[Va+2]=wa;
this.int16[Va+3]=Ea;return P};return E}(qg);Ek.prototype.bytesPerElement=8;Mb("StructArrayLayout4i8",Ek);var Fk=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)};E.prototype.emplaceBack=function(P,fa,pa,wa,Ea,Va){var Za=this.length;this.resize(Za+1);return this.emplace(Za,P,fa,pa,wa,Ea,Va)};
E.prototype.emplace=function(P,fa,pa,wa,Ea,Va,Za){var ib=6*P;this.int16[ib+0]=fa;this.int16[ib+1]=pa;this.int16[ib+2]=wa;this.int16[ib+3]=Ea;this.int16[ib+4]=Va;this.int16[ib+5]=Za;return P};return E}(qg);Fk.prototype.bytesPerElement=12;Mb("StructArrayLayout2i4i12",Fk);var pk=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=
new Int16Array(this.arrayBuffer)};E.prototype.emplaceBack=function(P,fa,pa,wa,Ea,Va){var Za=this.length;this.resize(Za+1);return this.emplace(Za,P,fa,pa,wa,Ea,Va)};E.prototype.emplace=function(P,fa,pa,wa,Ea,Va,Za){var ib=4*P,Hb=8*P;this.int16[ib+0]=fa;this.int16[ib+1]=pa;this.uint8[Hb+4]=wa;this.uint8[Hb+5]=Ea;this.uint8[Hb+6]=Va;this.uint8[Hb+7]=Za;return P};return E}(qg);pk.prototype.bytesPerElement=8;Mb("StructArrayLayout2i4ub8",pk);var kj=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=
u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)};E.prototype.emplaceBack=function(P,fa,pa,wa,Ea,Va,Za,ib,Hb,Sb){var ic=this.length;this.resize(ic+1);return this.emplace(ic,P,fa,pa,wa,Ea,Va,Za,ib,Hb,Sb)};E.prototype.emplace=function(P,fa,pa,wa,Ea,Va,Za,ib,Hb,Sb,ic){var Dc=9*P,wc=18*P;this.uint16[Dc+0]=fa;this.uint16[Dc+1]=pa;this.uint16[Dc+2]=wa;this.uint16[Dc+
3]=Ea;this.uint16[Dc+4]=Va;this.uint16[Dc+5]=Za;this.uint16[Dc+6]=ib;this.uint16[Dc+7]=Hb;this.uint8[wc+16]=Sb;this.uint8[wc+17]=ic;return P};return E}(qg);kj.prototype.bytesPerElement=18;Mb("StructArrayLayout8ui2ub18",kj);var Gk=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);this.uint16=
new Uint16Array(this.arrayBuffer)};E.prototype.emplaceBack=function(P,fa,pa,wa,Ea,Va,Za,ib,Hb,Sb,ic,Dc){var wc=this.length;this.resize(wc+1);return this.emplace(wc,P,fa,pa,wa,Ea,Va,Za,ib,Hb,Sb,ic,Dc)};E.prototype.emplace=function(P,fa,pa,wa,Ea,Va,Za,ib,Hb,Sb,ic,Dc,wc){var Hc=12*P;this.int16[Hc+0]=fa;this.int16[Hc+1]=pa;this.int16[Hc+2]=wa;this.int16[Hc+3]=Ea;this.uint16[Hc+4]=Va;this.uint16[Hc+5]=Za;this.uint16[Hc+6]=ib;this.uint16[Hc+7]=Hb;this.int16[Hc+8]=Sb;this.int16[Hc+9]=ic;this.int16[Hc+10]=
Dc;this.int16[Hc+11]=wc;return P};return E}(qg);Gk.prototype.bytesPerElement=24;Mb("StructArrayLayout4i4ui4i24",Gk);var Hk=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)};E.prototype.emplaceBack=function(P,fa,pa){var wa=this.length;this.resize(wa+1);return this.emplace(wa,P,fa,pa)};
E.prototype.emplace=function(P,fa,pa,wa){var Ea=3*P;this.float32[Ea+0]=fa;this.float32[Ea+1]=pa;this.float32[Ea+2]=wa;return P};return E}(qg);Hk.prototype.bytesPerElement=12;Mb("StructArrayLayout3f12",Hk);var Ik=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer)};E.prototype.emplaceBack=function(P){var fa=
this.length;this.resize(fa+1);return this.emplace(fa,P)};E.prototype.emplace=function(P,fa){this.uint32[1*P]=fa;return P};return E}(qg);Ik.prototype.bytesPerElement=4;Mb("StructArrayLayout1ul4",Ik);var Jk=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer);
this.uint16=new Uint16Array(this.arrayBuffer)};E.prototype.emplaceBack=function(P,fa,pa,wa,Ea,Va,Za,ib,Hb){var Sb=this.length;this.resize(Sb+1);return this.emplace(Sb,P,fa,pa,wa,Ea,Va,Za,ib,Hb)};E.prototype.emplace=function(P,fa,pa,wa,Ea,Va,Za,ib,Hb,Sb){var ic=10*P;this.int16[ic+0]=fa;this.int16[ic+1]=pa;this.int16[ic+2]=wa;this.int16[ic+3]=Ea;this.int16[ic+4]=Va;this.int16[ic+5]=Za;this.uint32[5*P+3]=ib;this.uint16[ic+8]=Hb;this.uint16[ic+9]=Sb;return P};return E}(qg);Jk.prototype.bytesPerElement=
20;Mb("StructArrayLayout6i1ul2ui20",Jk);var qk=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)};E.prototype.emplaceBack=function(P,fa,pa,wa,Ea,Va){var Za=this.length;this.resize(Za+1);return this.emplace(Za,P,fa,pa,wa,Ea,Va)};E.prototype.emplace=function(P,fa,pa,wa,Ea,Va,Za){var ib=6*P;this.int16[ib+
0]=fa;this.int16[ib+1]=pa;this.int16[ib+2]=wa;this.int16[ib+3]=Ea;this.int16[ib+4]=Va;this.int16[ib+5]=Za;return P};return E}(qg);qk.prototype.bytesPerElement=12;Mb("StructArrayLayout2i2i2i12",qk);var rk=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)};
E.prototype.emplaceBack=function(P,fa,pa,wa,Ea){var Va=this.length;this.resize(Va+1);return this.emplace(Va,P,fa,pa,wa,Ea)};E.prototype.emplace=function(P,fa,pa,wa,Ea,Va){var Za=4*P,ib=8*P;this.float32[Za+0]=fa;this.float32[Za+1]=pa;this.float32[Za+2]=wa;this.int16[ib+6]=Ea;this.int16[ib+7]=Va;return P};return E}(qg);rk.prototype.bytesPerElement=16;Mb("StructArrayLayout2f1f2i16",rk);var Kk=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);
E.prototype.constructor=E;E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)};E.prototype.emplaceBack=function(P,fa,pa,wa){var Ea=this.length;this.resize(Ea+1);return this.emplace(Ea,P,fa,pa,wa)};E.prototype.emplace=function(P,fa,pa,wa,Ea){var Va=12*P,Za=3*P;this.uint8[Va+0]=fa;this.uint8[Va+1]=pa;this.float32[Za+1]=wa;this.float32[Za+2]=Ea;return P};return E}(qg);Kk.prototype.bytesPerElement=12;Mb("StructArrayLayout2ub2f12",
Kk);var nj=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)};E.prototype.emplaceBack=function(P,fa,pa){var wa=this.length;this.resize(wa+1);return this.emplace(wa,P,fa,pa)};E.prototype.emplace=function(P,fa,pa,wa){var Ea=3*P;this.uint16[Ea+0]=fa;this.uint16[Ea+1]=pa;this.uint16[Ea+2]=wa;
return P};return E}(qg);nj.prototype.bytesPerElement=6;Mb("StructArrayLayout3ui6",nj);var Lk=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)};E.prototype.emplaceBack=
function(P,fa,pa,wa,Ea,Va,Za,ib,Hb,Sb,ic,Dc,wc,Hc,ud,Zd,Ad){var Jd=this.length;this.resize(Jd+1);return this.emplace(Jd,P,fa,pa,wa,Ea,Va,Za,ib,Hb,Sb,ic,Dc,wc,Hc,ud,Zd,Ad)};E.prototype.emplace=function(P,fa,pa,wa,Ea,Va,Za,ib,Hb,Sb,ic,Dc,wc,Hc,ud,Zd,Ad,Jd){var be=24*P,ke=12*P,Le=48*P;this.int16[be+0]=fa;this.int16[be+1]=pa;this.uint16[be+2]=wa;this.uint16[be+3]=Ea;this.uint32[ke+2]=Va;this.uint32[ke+3]=Za;this.uint32[ke+4]=ib;this.uint16[be+10]=Hb;this.uint16[be+11]=Sb;this.uint16[be+12]=ic;this.float32[ke+
7]=Dc;this.float32[ke+8]=wc;this.uint8[Le+36]=Hc;this.uint8[Le+37]=ud;this.uint8[Le+38]=Zd;this.uint32[ke+10]=Ad;this.int16[be+22]=Jd;return P};return E}(qg);Lk.prototype.bytesPerElement=48;Mb("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Lk);var Mk=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);
this.uint16=new Uint16Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)};E.prototype.emplaceBack=function(P,fa,pa,wa,Ea,Va,Za,ib,Hb,Sb,ic,Dc,wc,Hc,ud,Zd,Ad,Jd,be,ke,Le,ne,R,aa,sa,Ca,Ua,ab){var Kb=this.length;this.resize(Kb+1);return this.emplace(Kb,P,fa,pa,wa,Ea,Va,Za,ib,Hb,Sb,ic,Dc,wc,Hc,ud,Zd,Ad,Jd,be,ke,Le,ne,R,aa,sa,Ca,Ua,ab)};E.prototype.emplace=function(P,fa,pa,wa,Ea,Va,Za,ib,Hb,Sb,ic,Dc,wc,Hc,ud,Zd,Ad,Jd,be,ke,Le,ne,R,aa,sa,
Ca,Ua,ab,Kb){var lc=34*P,Ac=17*P;this.int16[lc+0]=fa;this.int16[lc+1]=pa;this.int16[lc+2]=wa;this.int16[lc+3]=Ea;this.int16[lc+4]=Va;this.int16[lc+5]=Za;this.int16[lc+6]=ib;this.int16[lc+7]=Hb;this.uint16[lc+8]=Sb;this.uint16[lc+9]=ic;this.uint16[lc+10]=Dc;this.uint16[lc+11]=wc;this.uint16[lc+12]=Hc;this.uint16[lc+13]=ud;this.uint16[lc+14]=Zd;this.uint16[lc+15]=Ad;this.uint16[lc+16]=Jd;this.uint16[lc+17]=be;this.uint16[lc+18]=ke;this.uint16[lc+19]=Le;this.uint16[lc+20]=ne;this.uint16[lc+21]=R;this.uint16[lc+
22]=aa;this.uint32[Ac+12]=sa;this.float32[Ac+13]=Ca;this.float32[Ac+14]=Ua;this.float32[Ac+15]=ab;this.float32[Ac+16]=Kb;return P};return E}(qg);Mk.prototype.bytesPerElement=68;Mb("StructArrayLayout8i15ui1ul4f68",Mk);var mk=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)};E.prototype.emplaceBack=
function(P){var fa=this.length;this.resize(fa+1);return this.emplace(fa,P)};E.prototype.emplace=function(P,fa){this.float32[1*P]=fa;return P};return E}(qg);mk.prototype.bytesPerElement=4;Mb("StructArrayLayout1f4",mk);var Nk=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)};E.prototype.emplaceBack=
function(P,fa,pa){var wa=this.length;this.resize(wa+1);return this.emplace(wa,P,fa,pa)};E.prototype.emplace=function(P,fa,pa,wa){var Ea=3*P;this.int16[Ea+0]=fa;this.int16[Ea+1]=pa;this.int16[Ea+2]=wa;return P};return E}(qg);Nk.prototype.bytesPerElement=6;Mb("StructArrayLayout3i6",Nk);var Ok=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);
this.uint32=new Uint32Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)};E.prototype.emplaceBack=function(P,fa,pa){var wa=this.length;this.resize(wa+1);return this.emplace(wa,P,fa,pa)};E.prototype.emplace=function(P,fa,pa,wa){var Ea=4*P;this.uint32[2*P]=fa;this.uint16[Ea+2]=pa;this.uint16[Ea+3]=wa;return P};return E}(qg);Ok.prototype.bytesPerElement=8;Mb("StructArrayLayout1ul2ui8",Ok);var Dj=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&
u.prototype);E.prototype.constructor=E;E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)};E.prototype.emplaceBack=function(P,fa){var pa=this.length;this.resize(pa+1);return this.emplace(pa,P,fa)};E.prototype.emplace=function(P,fa,pa){var wa=2*P;this.uint16[wa+0]=fa;this.uint16[wa+1]=pa;return P};return E}(qg);Dj.prototype.bytesPerElement=4;Mb("StructArrayLayout2ui4",Dj);var Ej=function(u){function E(){u.apply(this,arguments)}
u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)};E.prototype.emplaceBack=function(P){var fa=this.length;this.resize(fa+1);return this.emplace(fa,P)};E.prototype.emplace=function(P,fa){this.uint16[1*P]=fa;return P};return E}(qg);Ej.prototype.bytesPerElement=2;Mb("StructArrayLayout1ui2",Ej);var kk=function(u){function E(){u.apply(this,
arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)};E.prototype.emplaceBack=function(P,fa){var pa=this.length;this.resize(pa+1);return this.emplace(pa,P,fa)};E.prototype.emplace=function(P,fa,pa){var wa=2*P;this.float32[wa+0]=fa;this.float32[wa+1]=pa;return P};return E}(qg);kk.prototype.bytesPerElement=8;Mb("StructArrayLayout2f8",
kk);var lk=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)};E.prototype.emplaceBack=function(P,fa,pa,wa){var Ea=this.length;this.resize(Ea+1);return this.emplace(Ea,P,fa,pa,wa)};E.prototype.emplace=function(P,fa,pa,wa,Ea){var Va=4*P;this.float32[Va+0]=fa;this.float32[Va+1]=pa;this.float32[Va+
2]=wa;this.float32[Va+3]=Ea;return P};return E}(qg);lk.prototype.bytesPerElement=16;Mb("StructArrayLayout4f16",lk);var Pk=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;var P={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},
anchorPoint:{configurable:!0}};P.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]};P.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]};P.x1.get=function(){return this._structArray.int16[this._pos2+2]};P.y1.get=function(){return this._structArray.int16[this._pos2+3]};P.x2.get=function(){return this._structArray.int16[this._pos2+4]};P.y2.get=function(){return this._structArray.int16[this._pos2+5]};P.featureIndex.get=function(){return this._structArray.uint32[this._pos4+
3]};P.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]};P.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]};P.anchorPoint.get=function(){return new Ue(this.anchorPointX,this.anchorPointY)};Object.defineProperties(E.prototype,P);return E}(ok);Pk.prototype.size=20;var sk=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype.get=function(P){return new Pk(this,
P)};return E}(Jk);Mb("CollisionBoxArray",sk);var Fj=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;var P={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},
lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};P.anchorX.get=function(){return this._structArray.int16[this._pos2+0]};P.anchorY.get=function(){return this._structArray.int16[this._pos2+1]};P.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]};P.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]};P.vertexStartIndex.get=
function(){return this._structArray.uint32[this._pos4+2]};P.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]};P.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]};P.segment.get=function(){return this._structArray.uint16[this._pos2+10]};P.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]};P.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]};P.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+
7]};P.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]};P.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]};P.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]};P.placedOrientation.set=function(fa){this._structArray.uint8[this._pos1+37]=fa};P.hidden.get=function(){return this._structArray.uint8[this._pos1+38]};P.hidden.set=function(fa){this._structArray.uint8[this._pos1+38]=fa};P.crossTileID.get=function(){return this._structArray.uint32[this._pos4+
10]};P.crossTileID.set=function(fa){this._structArray.uint32[this._pos4+10]=fa};P.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]};Object.defineProperties(E.prototype,P);return E}(ok);Fj.prototype.size=48;var il=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype.get=function(P){return new Fj(this,P)};return E}(Lk);Mb("PlacedSymbolArray",il);var Nj=function(u){function E(){u.apply(this,
arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;var P={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},
verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},
textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};P.anchorX.get=function(){return this._structArray.int16[this._pos2+0]};P.anchorY.get=function(){return this._structArray.int16[this._pos2+1]};P.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]};P.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]};P.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+
4]};P.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]};P.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]};P.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]};P.key.get=function(){return this._structArray.uint16[this._pos2+8]};P.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]};P.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+
10]};P.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]};P.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]};P.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]};P.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]};P.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]};P.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+
16]};P.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]};P.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]};P.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]};P.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]};P.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]};P.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+
22]};P.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]};P.crossTileID.set=function(fa){this._structArray.uint32[this._pos4+12]=fa};P.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]};P.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]};P.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]};P.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]};Object.defineProperties(E.prototype,
P);return E}(ok);Nj.prototype.size=68;var Oj=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype.get=function(P){return new Nj(this,P)};return E}(Mk);Mb("SymbolInstanceArray",Oj);var Qk=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype.getoffsetX=function(P){return this.float32[1*P]};return E}(mk);Mb("GlyphOffsetArray",
Qk);var tk=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype.getx=function(P){return this.int16[3*P]};E.prototype.gety=function(P){return this.int16[3*P+1]};E.prototype.gettileUnitDistanceFromAnchor=function(P){return this.int16[3*P+2]};return E}(Nk);Mb("SymbolLineVertexArray",tk);var Rk=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=
E;var P={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};P.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]};P.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]};P.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]};Object.defineProperties(E.prototype,P);return E}(ok);Rk.prototype.size=8;var Sk=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&
u.prototype);E.prototype.constructor=E;E.prototype.get=function(P){return new Rk(this,P)};return E}(Ok);Mb("FeatureIndexArray",Sk);var ji=zb([{name:"a_pos",components:2,type:"Int16"}],4).members,eh=function(u){void 0===u&&(u=[]);this.segments=u};eh.prototype.prepareSegment=function(u,E,P,fa){var pa=this.segments[this.segments.length-1];u>eh.MAX_VERTEX_ARRAY_LENGTH&&D("Max vertices per segment is "+eh.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+u);if(!pa||pa.vertexLength+u>eh.MAX_VERTEX_ARRAY_LENGTH||
pa.sortKey!==fa)pa={vertexOffset:E.length,primitiveOffset:P.length,vertexLength:0,primitiveLength:0},void 0!==fa&&(pa.sortKey=fa),this.segments.push(pa);return pa};eh.prototype.get=function(){return this.segments};eh.prototype.destroy=function(){for(var u=0,E=this.segments;u<E.length;u+=1){var P=E[u],fa;for(fa in P.vaos)P.vaos[fa].destroy()}};eh.simpleSegment=function(u,E,P,fa){return new eh([{vertexOffset:u,primitiveOffset:E,vertexLength:P,primitiveLength:fa,vaos:{},sortKey:0}])};eh.MAX_VERTEX_ARRAY_LENGTH=
Math.pow(2,16)-1;Mb("SegmentVector",eh);var Gj=zb([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),uk=g(function(u){u.exports=function(E,P){var fa=E.length&3;var pa=E.length-fa;var wa=P;for(P=0;P<pa;){var Ea=E.charCodeAt(P)&255|(E.charCodeAt(++P)&255)<<8|(E.charCodeAt(++P)&255)<<16|(E.charCodeAt(++P)&255)<<24;++P;Ea=3432918353*(Ea&65535)+((3432918353*
(Ea>>>16)&65535)<<16)&4294967295;Ea=Ea<<15|Ea>>>17;Ea=461845907*(Ea&65535)+((461845907*(Ea>>>16)&65535)<<16)&4294967295;wa^=Ea;wa=wa<<13|wa>>>19;wa=5*(wa&65535)+((5*(wa>>>16)&65535)<<16)&4294967295;wa=(wa&65535)+27492+(((wa>>>16)+58964&65535)<<16)}Ea=0;switch(fa){case 3:Ea^=(E.charCodeAt(P+2)&255)<<16;case 2:Ea^=(E.charCodeAt(P+1)&255)<<8;case 1:Ea^=E.charCodeAt(P)&255,Ea=3432918353*(Ea&65535)+((3432918353*(Ea>>>16)&65535)<<16)&4294967295,Ea=Ea<<15|Ea>>>17,wa^=461845907*(Ea&65535)+((461845907*(Ea>>>
16)&65535)<<16)&4294967295}wa^=E.length;wa^=wa>>>16;wa=2246822507*(wa&65535)+((2246822507*(wa>>>16)&65535)<<16)&4294967295;wa^=wa>>>13;wa=3266489909*(wa&65535)+((3266489909*(wa>>>16)&65535)<<16)&4294967295;return(wa^wa>>>16)>>>0}}),ck=g(function(u){u.exports=function(E,P){var fa=E.length;P^=fa;for(var pa=0,wa;4<=fa;)wa=E.charCodeAt(pa)&255|(E.charCodeAt(++pa)&255)<<8|(E.charCodeAt(++pa)&255)<<16|(E.charCodeAt(++pa)&255)<<24,wa=1540483477*(wa&65535)+((1540483477*(wa>>>16)&65535)<<16),wa^=wa>>>24,wa=
1540483477*(wa&65535)+((1540483477*(wa>>>16)&65535)<<16),P=1540483477*(P&65535)+((1540483477*(P>>>16)&65535)<<16)^wa,fa-=4,++pa;switch(fa){case 3:P^=(E.charCodeAt(pa+2)&255)<<16;case 2:P^=(E.charCodeAt(pa+1)&255)<<8;case 1:P^=E.charCodeAt(pa)&255,P=1540483477*(P&65535)+((1540483477*(P>>>16)&65535)<<16)}P^=P>>>13;P=1540483477*(P&65535)+((1540483477*(P>>>16)&65535)<<16);return(P^P>>>15)>>>0}}),wj=uk;wj.murmur3=uk;wj.murmur2=ck;var ki=function(){this.ids=[];this.positions=[];this.indexed=!1};ki.prototype.add=
function(u,E,P,fa){this.ids.push(Bc(u));this.positions.push(E,P,fa)};ki.prototype.getPositions=function(u){u=Bc(u);for(var E=0,P=this.ids.length-1;E<P;){var fa=E+P>>1;this.ids[fa]>=u?P=fa:E=fa+1}for(P=[];this.ids[E]===u;)P.push({index:this.positions[3*E],start:this.positions[3*E+1],end:this.positions[3*E+2]}),E++;return P};ki.serialize=function(u,E){var P=new Float64Array(u.ids);u=new Uint32Array(u.positions);bd(P,u,0,P.length-1);E&&E.push(P.buffer,u.buffer);return{ids:P,positions:u}};ki.deserialize=
function(u){var E=new ki;E.ids=u.ids;E.positions=u.positions;E.indexed=!0;return E};var Bk=Math.pow(2,53)-1;Mb("FeaturePositionMap",ki);var oj=function(u,E){this.gl=u.gl;this.location=E},jl=function(u){function E(P,fa){u.call(this,P,fa);this.current=0}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype.set=function(P){this.current!==P&&(this.current=P,this.gl.uniform1i(this.location,P))};return E}(oj),dk=function(u){function E(P,fa){u.call(this,P,fa);
this.current=0}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype.set=function(P){this.current!==P&&(this.current=P,this.gl.uniform1f(this.location,P))};return E}(oj),kl=function(u){function E(P,fa){u.call(this,P,fa);this.current=[0,0]}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype.set=function(P){if(P[0]!==this.current[0]||P[1]!==this.current[1])this.current=P,this.gl.uniform2f(this.location,P[0],
P[1])};return E}(oj),ll=function(u){function E(P,fa){u.call(this,P,fa);this.current=[0,0,0]}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype.set=function(P){if(P[0]!==this.current[0]||P[1]!==this.current[1]||P[2]!==this.current[2])this.current=P,this.gl.uniform3f(this.location,P[0],P[1],P[2])};return E}(oj),Tk=function(u){function E(P,fa){u.call(this,P,fa);this.current=[0,0,0,0]}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=
E;E.prototype.set=function(P){if(P[0]!==this.current[0]||P[1]!==this.current[1]||P[2]!==this.current[2]||P[3]!==this.current[3])this.current=P,this.gl.uniform4f(this.location,P[0],P[1],P[2],P[3])};return E}(oj),Uk=function(u){function E(P,fa){u.call(this,P,fa);this.current=pd.transparent}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype.set=function(P){if(P.r!==this.current.r||P.g!==this.current.g||P.b!==this.current.b||P.a!==this.current.a)this.current=
P,this.gl.uniform4f(this.location,P.r,P.g,P.b,P.a)};return E}(oj),Vk=new Float32Array(16),Wk=function(u){function E(P,fa){u.call(this,P,fa);this.current=Vk}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype.set=function(P){if(P[12]!==this.current[12]||P[0]!==this.current[0])this.current=P,this.gl.uniformMatrix4fv(this.location,!1,P);else for(var fa=1;16>fa;fa++)if(P[fa]!==this.current[fa]){this.current=P;this.gl.uniformMatrix4fv(this.location,!1,P);
break}};return E}(oj),Pj=function(u,E,P){this.value=u;this.uniformNames=E.map(function(fa){return"u_"+fa});this.type=P};Pj.prototype.setUniform=function(u,E,P){u.set(P.constantOr(this.value))};Pj.prototype.getBinding=function(u,E,P){return"color"===this.type?new Uk(u,E):new dk(u,E)};var pj=function(u,E){this.uniformNames=E.map(function(P){return"u_"+P});this.patternTo=this.patternFrom=null;this.pixelRatioTo=this.pixelRatioFrom=1};pj.prototype.setConstantPatternPositions=function(u,E){this.pixelRatioFrom=
E.pixelRatio;this.pixelRatioTo=u.pixelRatio;this.patternFrom=E.tlbr;this.patternTo=u.tlbr};pj.prototype.setUniform=function(u,E,P,fa){(E="u_pattern_to"===fa?this.patternTo:"u_pattern_from"===fa?this.patternFrom:"u_pixel_ratio_to"===fa?this.pixelRatioTo:"u_pixel_ratio_from"===fa?this.pixelRatioFrom:null)&&u.set(E)};pj.prototype.getBinding=function(u,E,P){return"u_pattern"===P.substr(0,9)?new Tk(u,E):new dk(u,E)};var sh=function(u,E,P,fa){this.expression=u;this.type=P;this.maxValue=0;this.paintVertexAttributes=
E.map(function(pa){return{name:"a_"+pa,type:"Float32",components:"color"===P?2:1,offset:0}});this.paintVertexArray=new fa};sh.prototype.populatePaintArray=function(u,E,P,fa,pa){P=this.paintVertexArray.length;E=this.expression.evaluate(new ig(0),E,{},fa,[],pa);this.paintVertexArray.resize(u);this._setPaintValue(P,u,E)};sh.prototype.updatePaintArray=function(u,E,P,fa){P=this.expression.evaluate({zoom:0},P,fa);this._setPaintValue(u,E,P)};sh.prototype._setPaintValue=function(u,E,P){if("color"===this.type)for(P=
Vc(P);u<E;u++)this.paintVertexArray.emplace(u,P[0],P[1]);else{for(;u<E;u++)this.paintVertexArray.emplace(u,P);this.maxValue=Math.max(this.maxValue,Math.abs(P))}};sh.prototype.upload=function(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))};sh.prototype.destroy=
function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Bh=function(u,E,P,fa,pa,wa){this.expression=u;this.uniformNames=E.map(function(Ea){return"u_"+Ea+"_t"});this.type=P;this.useIntegerZoom=fa;this.zoom=pa;this.maxValue=0;this.paintVertexAttributes=E.map(function(Ea){return{name:"a_"+Ea,type:"Float32",components:"color"===P?4:2,offset:0}});this.paintVertexArray=new wa};Bh.prototype.populatePaintArray=function(u,E,P,fa,pa){P=this.expression.evaluate(new ig(this.zoom),E,{},fa,[],
pa);E=this.expression.evaluate(new ig(this.zoom+1),E,{},fa,[],pa);fa=this.paintVertexArray.length;this.paintVertexArray.resize(u);this._setPaintValue(fa,u,P,E)};Bh.prototype.updatePaintArray=function(u,E,P,fa){var pa=this.expression.evaluate({zoom:this.zoom},P,fa);P=this.expression.evaluate({zoom:this.zoom+1},P,fa);this._setPaintValue(u,E,pa,P)};Bh.prototype._setPaintValue=function(u,E,P,fa){if("color"===this.type)for(P=Vc(P),fa=Vc(fa);u<E;u++)this.paintVertexArray.emplace(u,P[0],P[1],fa[0],fa[1]);
else{for(;u<E;u++)this.paintVertexArray.emplace(u,P,fa);this.maxValue=Math.max(this.maxValue,Math.abs(P),Math.abs(fa))}};Bh.prototype.upload=function(u){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=u.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))};Bh.prototype.destroy=function(){this.paintVertexBuffer&&
this.paintVertexBuffer.destroy()};Bh.prototype.setUniform=function(u,E){E=d(this.expression.interpolationFactor(this.useIntegerZoom?Math.floor(E.zoom):E.zoom,this.zoom,this.zoom+1),0,1);u.set(E)};Bh.prototype.getBinding=function(u,E,P){return new dk(u,E)};var Jh=function(u,E,P,fa,pa,wa){this.expression=u;this.type=E;this.useIntegerZoom=P;this.zoom=fa;this.layerId=wa;this.zoomInPaintVertexArray=new pa;this.zoomOutPaintVertexArray=new pa};Jh.prototype.populatePaintArray=function(u,E,P){var fa=this.zoomInPaintVertexArray.length;
this.zoomInPaintVertexArray.resize(u);this.zoomOutPaintVertexArray.resize(u);this._setPaintValues(fa,u,E.patterns&&E.patterns[this.layerId],P)};Jh.prototype.updatePaintArray=function(u,E,P,fa,pa){this._setPaintValues(u,E,P.patterns&&P.patterns[this.layerId],pa)};Jh.prototype._setPaintValues=function(u,E,P,fa){if(fa&&P){var pa=fa[P.min],wa=fa[P.mid];P=fa[P.max];if(pa&&wa&&P)for(;u<E;u++)this.zoomInPaintVertexArray.emplace(u,wa.tl[0],wa.tl[1],wa.br[0],wa.br[1],pa.tl[0],pa.tl[1],pa.br[0],pa.br[1],wa.pixelRatio,
pa.pixelRatio),this.zoomOutPaintVertexArray.emplace(u,wa.tl[0],wa.tl[1],wa.br[0],wa.br[1],P.tl[0],P.tl[1],P.br[0],P.br[1],wa.pixelRatio,P.pixelRatio)}};Jh.prototype.upload=function(u){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=u.createVertexBuffer(this.zoomInPaintVertexArray,Gj.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=u.createVertexBuffer(this.zoomOutPaintVertexArray,
Gj.members,this.expression.isStateDependent))};Jh.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy();this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Zh=function(u,E,P,fa){this.binders={};this.layoutAttributes=fa;this._buffers=[];fa=[];for(var pa in u.paint._values)if(P(pa)){var wa=u.paint.get(pa);if(wa instanceof Qh&&dc(wa.property.specification)){var Ea={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],
"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[pa]||
[pa.replace(u.type+"-","").replace(/-/g,"_")];var Va=wa.value,Za=wa.property.specification.type,ib=wa.property.useIntegerZoom;wa=wa.property.specification["property-type"];wa="cross-faded"===wa||"cross-faded-data-driven"===wa;if("constant"===Va.kind)this.binders[pa]=wa?new pj(Va.value,Ea):new Pj(Va.value,Ea,Za),fa.push("/u_"+pa);else if("source"===Va.kind||wa){var Hb=Pc(pa,Za,"source");this.binders[pa]=wa?new Jh(Va,Za,ib,E,Hb,u.id):new sh(Va,Ea,Za,Hb);fa.push("/a_"+pa)}else wa=Pc(pa,Za,"composite"),
this.binders[pa]=new Bh(Va,Ea,Za,ib,E,wa),fa.push("/z_"+pa)}}this.cacheKey=fa.sort().join("")};Zh.prototype.getMaxValue=function(u){u=this.binders[u];return u instanceof sh||u instanceof Bh?u.maxValue:0};Zh.prototype.populatePaintArrays=function(u,E,P,fa,pa){for(var wa in this.binders){var Ea=this.binders[wa];(Ea instanceof sh||Ea instanceof Bh||Ea instanceof Jh)&&Ea.populatePaintArray(u,E,P,fa,pa)}};Zh.prototype.setConstantPatternPositions=function(u,E){for(var P in this.binders){var fa=this.binders[P];
fa instanceof pj&&fa.setConstantPatternPositions(u,E)}};Zh.prototype.updatePaintArrays=function(u,E,P,fa,pa){var wa=!1,Ea;for(Ea in u)for(var Va=0,Za=E.getPositions(Ea);Va<Za.length;Va+=1){var ib=Za[Va],Hb=P.feature(ib.index),Sb;for(Sb in this.binders){var ic=this.binders[Sb];(ic instanceof sh||ic instanceof Bh||ic instanceof Jh)&&!0===ic.expression.isStateDependent&&(wa=fa.paint.get(Sb),ic.expression=wa.value,ic.updatePaintArray(ib.start,ib.end,Hb,u[Ea],pa),wa=!0)}}return wa};Zh.prototype.defines=
function(){var u=[],E;for(E in this.binders){var P=this.binders[E];(P instanceof Pj||P instanceof pj)&&u.push.apply(u,P.uniformNames.map(function(fa){return"#define HAS_UNIFORM_"+fa}))}return u};Zh.prototype.getPaintVertexBuffers=function(){return this._buffers};Zh.prototype.getUniforms=function(u,E){var P=[],fa;for(fa in this.binders){var pa=this.binders[fa];if(pa instanceof Pj||pa instanceof pj||pa instanceof Bh)for(var wa=0,Ea=pa.uniformNames;wa<Ea.length;wa+=1){var Va=Ea[wa];if(E[Va]){var Za=
pa.getBinding(u,E[Va],Va);P.push({name:Va,property:fa,binding:Za})}}}return P};Zh.prototype.setUniforms=function(u,E,P,fa){for(u=0;u<E.length;u+=1){var pa=E[u],wa=pa.name,Ea=pa.property;this.binders[Ea].setUniform(pa.binding,fa,P.get(Ea),wa)}};Zh.prototype.updatePaintBuffers=function(u){this._buffers=[];for(var E in this.binders){var P=this.binders[E];u&&P instanceof Jh?(P=2===u.fromScale?P.zoomInPaintVertexBuffer:P.zoomOutPaintVertexBuffer)&&this._buffers.push(P):(P instanceof sh||P instanceof Bh)&&
P.paintVertexBuffer&&this._buffers.push(P.paintVertexBuffer)}};Zh.prototype.upload=function(u){for(var E in this.binders){var P=this.binders[E];(P instanceof sh||P instanceof Bh||P instanceof Jh)&&P.upload(u)}this.updatePaintBuffers()};Zh.prototype.destroy=function(){for(var u in this.binders){var E=this.binders[u];(E instanceof sh||E instanceof Bh||E instanceof Jh)&&E.destroy()}};var li=function(u,E,P,fa){void 0===fa&&(fa=function(){return!0});this.programConfigurations={};for(var pa=0;pa<E.length;pa+=
1){var wa=E[pa];this.programConfigurations[wa.id]=new Zh(wa,P,fa,u)}this.needsUpload=!1;this._featureMap=new ki;this._bufferOffset=0};li.prototype.populatePaintArrays=function(u,E,P,fa,pa,wa){for(var Ea in this.programConfigurations)this.programConfigurations[Ea].populatePaintArrays(u,E,fa,pa,wa);void 0!==E.id&&this._featureMap.add(E.id,P,this._bufferOffset,u);this._bufferOffset=u;this.needsUpload=!0};li.prototype.updatePaintArrays=function(u,E,P,fa){for(var pa=0;pa<P.length;pa+=1){var wa=P[pa];this.needsUpload=
this.programConfigurations[wa.id].updatePaintArrays(u,this._featureMap,E,wa,fa)||this.needsUpload}};li.prototype.get=function(u){return this.programConfigurations[u]};li.prototype.upload=function(u){if(this.needsUpload){for(var E in this.programConfigurations)this.programConfigurations[E].upload(u);this.needsUpload=!1}};li.prototype.destroy=function(){for(var u in this.programConfigurations)this.programConfigurations[u].destroy()};Mb("ConstantBinder",Pj);Mb("CrossFadedConstantBinder",pj);Mb("SourceExpressionBinder",
sh);Mb("CrossFadedCompositeBinder",Jh);Mb("CompositeExpressionBinder",Bh);Mb("ProgramConfiguration",Zh,{omit:["_buffers"]});Mb("ProgramConfigurationSet",li);var Ni={min:-1*Math.pow(2,14),max:Math.pow(2,14)-1},mi=function(u){this.zoom=u.zoom;this.overscaling=u.overscaling;this.layers=u.layers;this.layerIds=this.layers.map(function(E){return E.id});this.index=u.index;this.hasPattern=!1;this.layoutVertexArray=new bk;this.indexArray=new nj;this.segments=new eh;this.programConfigurations=new li(ji,u.layers,
u.zoom);this.stateDependentLayerIds=this.layers.filter(function(E){return E.isStateDependent()}).map(function(E){return E.id})};mi.prototype.populate=function(u,E,P){var fa=this.layers[0],pa=[],wa=null;"circle"===fa.type&&(wa=fa.layout.get("circle-sort-key"));for(fa=0;fa<u.length;fa+=1){var Ea=u[fa],Va=Ea.feature,Za=Ea.id,ib=Ea.index;Ea=Ea.sourceLayerIndex;var Hb=this.layers[0]._featureFilter.needGeometry,Sb={type:Va.type,id:Za,properties:Va.properties,geometry:Hb?yc(Va):[]};this.layers[0]._featureFilter.filter(new ig(this.zoom),
Sb,P)&&(Hb||(Sb.geometry=yc(Va)),Hb=wa?wa.evaluate(Sb,{},P):void 0,pa.push({id:Za,properties:Va.properties,type:Va.type,sourceLayerIndex:Ea,index:ib,geometry:Sb.geometry,patterns:{},sortKey:Hb}))}wa&&pa.sort(function(ic,Dc){return ic.sortKey-Dc.sortKey});for(wa=0;wa<pa.length;wa+=1)ib=fa=pa[wa],Va=ib.geometry,Za=ib.index,ib=ib.sourceLayerIndex,Ea=u[Za].feature,this.addFeature(fa,Va,Za,P),E.featureIndex.insert(Ea,Va,Za,ib,this.index)};mi.prototype.update=function(u,E,P){this.stateDependentLayers.length&&
this.programConfigurations.updatePaintArrays(u,E,this.stateDependentLayers,P)};mi.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};mi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload};mi.prototype.upload=function(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,ji),this.indexBuffer=u.createIndexBuffer(this.indexArray));this.programConfigurations.upload(u);this.uploaded=!0};mi.prototype.destroy=
function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())};mi.prototype.addFeature=function(u,E,P,fa){for(var pa=0;pa<E.length;pa+=1)for(var wa=0,Ea=E[pa];wa<Ea.length;wa+=1){var Va=Ea[wa],Za=Va.x;Va=Va.y;if(!(0>Za||8192<=Za||0>Va||8192<=Va)){var ib=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,u.sortKey),Hb=ib.vertexLength;vc(this.layoutVertexArray,Za,Va,-1,-1);vc(this.layoutVertexArray,
Za,Va,1,-1);vc(this.layoutVertexArray,Za,Va,1,1);vc(this.layoutVertexArray,Za,Va,-1,1);this.indexArray.emplaceBack(Hb,Hb+1,Hb+2);this.indexArray.emplaceBack(Hb,Hb+3,Hb+2);ib.vertexLength+=4;ib.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,P,{},fa)};Mb("CircleBucket",mi,{omit:["layers"]});var Xk=new Rh({"circle-sort-key":new ff(Fa.layout_circle["circle-sort-key"])}),sl={paint:new Rh({"circle-radius":new ff(Fa.paint_circle["circle-radius"]),"circle-color":new ff(Fa.paint_circle["circle-color"]),
"circle-blur":new ff(Fa.paint_circle["circle-blur"]),"circle-opacity":new ff(Fa.paint_circle["circle-opacity"]),"circle-translate":new We(Fa.paint_circle["circle-translate"]),"circle-translate-anchor":new We(Fa.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new We(Fa.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new We(Fa.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ff(Fa.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ff(Fa.paint_circle["circle-stroke-color"]),
"circle-stroke-opacity":new ff(Fa.paint_circle["circle-stroke-opacity"])}),layout:Xk},Ih="undefined"!==typeof Float32Array?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var u=arguments,E=0,P=arguments.length;P--;)E+=u[P]*u[P];return Math.sqrt(E)});(function(){var u=vg();return function(E,P,fa,pa,wa,Ea){P||(P=3);fa||(fa=0);for(pa=pa?Math.min(pa*P+fa,E.length):E.length;fa<pa;fa+=P)u[0]=E[fa],u[1]=E[fa+1],u[2]=E[fa+2],wa(u,u,Ea),E[fa]=u[0],E[fa+1]=u[1],E[fa+2]=u[2];return E}})();(function(){var u=
Gg();return function(E,P,fa,pa,wa,Ea){P||(P=4);fa||(fa=0);for(pa=pa?Math.min(pa*P+fa,E.length):E.length;fa<pa;fa+=P)u[0]=E[fa],u[1]=E[fa+1],u[2]=E[fa+2],u[3]=E[fa+3],wa(u,u,Ea),E[fa]=u[0],E[fa+1]=u[1],E[fa+2]=u[2],E[fa+3]=u[3];return E}})();(function(){var u=Nh();return function(E,P,fa,pa,wa,Ea){P||(P=2);fa||(fa=0);for(pa=pa?Math.min(pa*P+fa,E.length):E.length;fa<pa;fa+=P)u[0]=E[fa],u[1]=E[fa+1],wa(u,u,Ea),E[fa]=u[0],E[fa+1]=u[1];return E}})();var tl=function(u){function E(P){u.call(this,P,sl)}u&&
(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype.createBucket=function(P){return new mi(P)};E.prototype.queryRadius=function(P){return Ve("circle-radius",this,P)+Ve("circle-stroke-width",this,P)+wf(this.paint.get("circle-translate"))};E.prototype.queryIntersectsFeature=function(P,fa,pa,wa,Ea,Va,Za,ib){P=Me(P,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Va.angle,Za);Ea=this.paint.get("circle-radius").evaluate(fa,pa);fa=
this.paint.get("circle-stroke-width").evaluate(fa,pa);pa=Ea+fa;P=(fa="map"===this.paint.get("circle-pitch-alignment"))?P:Yg(P,ib);Za=fa?pa*Za:pa;for(pa=0;pa<wa.length;pa+=1){Ea=0;for(var Hb=wa[pa];Ea<Hb.length;Ea+=1){var Sb=Hb[Ea],ic=fa?Sb:qh(Sb,ib),Dc=Za;Sb=ih([],[Sb.x,Sb.y,0,1],ib);"viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?Dc*=Sb[3]/Va.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&
(Dc*=Va.cameraToCenterDistance/Sb[3]);Sb=P;Dc=Oe(Sb,ic)?!0:Yd(ic,Sb,Dc)?!0:!1;if(Dc)return!0}}return!1};return E}(Ti),Hj=function(u){function E(){u.apply(this,arguments)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);return E.prototype.constructor=E}(mi);Mb("HeatmapBucket",Hj,{omit:["layers"]});var Ah=function(u,E){jh(this,u,1,E)};Ah.prototype.resize=function(u){kh(this,u,1)};Ah.prototype.clone=function(){return new Ah({width:this.width,height:this.height},new Uint8Array(this.data))};
Ah.copy=function(u,E,P,fa,pa){fh(u,E,P,fa,pa,1)};var dh=function(u,E){jh(this,u,4,E)};dh.prototype.resize=function(u){kh(this,u,4)};dh.prototype.replace=function(u,E){E?this.data.set(u):this.data=u instanceof Uint8ClampedArray?new Uint8Array(u.buffer):u};dh.prototype.clone=function(){return new dh({width:this.width,height:this.height},new Uint8Array(this.data))};dh.copy=function(u,E,P,fa,pa){fh(u,E,P,fa,pa,4)};Mb("AlphaImage",Ah);Mb("RGBAImage",dh);var bj={paint:new Rh({"heatmap-radius":new ff(Fa.paint_heatmap["heatmap-radius"]),
"heatmap-weight":new ff(Fa.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new We(Fa.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ak(Fa.paint_heatmap["heatmap-color"]),"heatmap-opacity":new We(Fa.paint_heatmap["heatmap-opacity"])})},Yk=function(u){function E(P){u.call(this,P,bj);this._updateColorRamp()}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype.createBucket=function(P){return new Hj(P)};E.prototype._handleSpecialPaintPropertyUpdate=
function(P){"heatmap-color"===P&&this._updateColorRamp()};E.prototype._updateColorRamp=function(){this.colorRamp=ei(this._transitionablePaint._values["heatmap-color"].value.expression,"heatmapDensity");this.colorRampTexture=null};E.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)};E.prototype.queryRadius=function(){return 0};E.prototype.queryIntersectsFeature=function(){return!1};E.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&
"none"!==this.visibility};return E}(Ti),ul={paint:new Rh({"hillshade-illumination-direction":new We(Fa.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new We(Fa.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new We(Fa.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new We(Fa.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new We(Fa.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new We(Fa.paint_hillshade["hillshade-accent-color"])})},
vl=function(u){function E(P){u.call(this,P,ul)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility};return E}(Ti),vk=zb([{name:"a_pos",components:2,type:"Int16"}],4).members;gh.deviation=function(u,E,P,fa){var pa=E&&E.length,wa=Math.abs(wh(u,0,pa?E[0]*P:u.length,P));if(pa){pa=0;for(var Ea=E.length;pa<Ea;pa++)wa-=Math.abs(wh(u,E[pa]*P,pa<Ea-1?E[pa+
1]*P:u.length,P))}for(pa=E=0;pa<fa.length;pa+=3){Ea=fa[pa]*P;var Va=fa[pa+1]*P,Za=fa[pa+2]*P;E+=Math.abs((u[Ea]-u[Za])*(u[Va+1]-u[Ea+1])-(u[Ea]-u[Va])*(u[Za+1]-u[Ea+1]))}return 0===wa&&0===E?0:Math.abs((E-wa)/wa)};gh.flatten=function(u){for(var E=u[0][0].length,P={vertices:[],holes:[],dimensions:E},fa=0,pa=0;pa<u.length;pa++){for(var wa=0;wa<u[pa].length;wa++)for(var Ea=0;Ea<E;Ea++)P.vertices.push(u[pa][wa][Ea]);0<pa&&(fa+=u[pa-1].length,P.holes.push(fa))}return P};gh.default=gh;var Ch=function(u){this.zoom=
u.zoom;this.overscaling=u.overscaling;this.layers=u.layers;this.layerIds=this.layers.map(function(E){return E.id});this.index=u.index;this.hasPattern=!1;this.patternFeatures=[];this.layoutVertexArray=new bk;this.indexArray=new nj;this.indexArray2=new Dj;this.programConfigurations=new li(vk,u.layers,u.zoom);this.segments=new eh;this.segments2=new eh;this.stateDependentLayerIds=this.layers.filter(function(E){return E.isStateDependent()}).map(function(E){return E.id})};Ch.prototype.populate=function(u,
E,P){this.hasPattern=lb("fill",this.layers,E);for(var fa=this.layers[0].layout.get("fill-sort-key"),pa=[],wa=0;wa<u.length;wa+=1){var Ea=u[wa],Va=Ea.feature,Za=Ea.id,ib=Ea.index;Ea=Ea.sourceLayerIndex;var Hb=this.layers[0]._featureFilter.needGeometry,Sb={type:Va.type,id:Za,properties:Va.properties,geometry:Hb?yc(Va):[]};this.layers[0]._featureFilter.filter(new ig(this.zoom),Sb,P)&&(Hb||(Sb.geometry=yc(Va)),Hb=fa?fa.evaluate(Sb,{},P,E.availableImages):void 0,pa.push({id:Za,properties:Va.properties,
type:Va.type,sourceLayerIndex:Ea,index:ib,geometry:Sb.geometry,patterns:{},sortKey:Hb}))}fa&&pa.sort(function(ic,Dc){return ic.sortKey-Dc.sortKey});for(fa=0;fa<pa.length;fa+=1)ib=Za=pa[fa],wa=ib.geometry,Va=ib.index,ib=ib.sourceLayerIndex,this.hasPattern?(Za=Cb("fill",this.layers,Za,this.zoom,E),this.patternFeatures.push(Za)):this.addFeature(Za,wa,Va,P,{}),E.featureIndex.insert(u[Va].feature,wa,Va,ib,this.index)};Ch.prototype.update=function(u,E,P){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,
E,this.stateDependentLayers,P)};Ch.prototype.addFeatures=function(u,E,P){u=0;for(var fa=this.patternFeatures;u<fa.length;u+=1){var pa=fa[u];this.addFeature(pa,pa.geometry,pa.index,E,P)}};Ch.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};Ch.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload};Ch.prototype.upload=function(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,vk),this.indexBuffer=u.createIndexBuffer(this.indexArray),
this.indexBuffer2=u.createIndexBuffer(this.indexArray2));this.programConfigurations.upload(u);this.uploaded=!0};Ch.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())};Ch.prototype.addFeature=function(u,E,P,fa,pa){var wa=0;for(E=Sa(E,500);wa<E.length;wa+=1){for(var Ea=E[wa],Va=0,Za=0,ib=Ea;Za<ib.length;Za+=1)Va+=ib[Za].length;
Za=this.segments.prepareSegment(Va,this.layoutVertexArray,this.indexArray);ib=Za.vertexLength;for(var Hb=[],Sb=[],ic=0,Dc=Ea;ic<Dc.length;ic+=1){var wc=Dc[ic];if(0!==wc.length){wc!==Ea[0]&&Sb.push(Hb.length/2);var Hc=this.segments2.prepareSegment(wc.length,this.layoutVertexArray,this.indexArray2),ud=Hc.vertexLength;this.layoutVertexArray.emplaceBack(wc[0].x,wc[0].y);this.indexArray2.emplaceBack(ud+wc.length-1,ud);Hb.push(wc[0].x);Hb.push(wc[0].y);for(var Zd=1;Zd<wc.length;Zd++)this.layoutVertexArray.emplaceBack(wc[Zd].x,
wc[Zd].y),this.indexArray2.emplaceBack(ud+Zd-1,ud+Zd),Hb.push(wc[Zd].x),Hb.push(wc[Zd].y);Hc.vertexLength+=wc.length;Hc.primitiveLength+=wc.length}}Ea=gh(Hb,Sb);for(Hb=0;Hb<Ea.length;Hb+=3)this.indexArray.emplaceBack(ib+Ea[Hb],ib+Ea[Hb+1],ib+Ea[Hb+2]);Za.vertexLength+=Va;Za.primitiveLength+=Ea.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,P,pa,fa)};Mb("FillBucket",Ch,{omit:["layers","patternFeatures"]});var qj=new Rh({"fill-sort-key":new ff(Fa.layout_fill["fill-sort-key"])}),
Dh={paint:new Rh({"fill-antialias":new We(Fa.paint_fill["fill-antialias"]),"fill-opacity":new ff(Fa.paint_fill["fill-opacity"]),"fill-color":new ff(Fa.paint_fill["fill-color"]),"fill-outline-color":new ff(Fa.paint_fill["fill-outline-color"]),"fill-translate":new We(Fa.paint_fill["fill-translate"]),"fill-translate-anchor":new We(Fa.paint_fill["fill-translate-anchor"]),"fill-pattern":new Bj(Fa.paint_fill["fill-pattern"])}),layout:qj},Sh=function(u){function E(P){u.call(this,P,Dh)}u&&(E.__proto__=u);
E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype.recalculate=function(P,fa){u.prototype.recalculate.call(this,P,fa);P=this.paint._values["fill-outline-color"];"constant"===P.value.kind&&void 0===P.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])};E.prototype.createBucket=function(P){return new Ch(P)};E.prototype.queryRadius=function(){return wf(this.paint.get("fill-translate"))};E.prototype.queryIntersectsFeature=function(P,fa,
pa,wa,Ea,Va,Za){P=Me(P,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Va.angle,Za);return vd(P,wa)};E.prototype.isTileClipped=function(){return!0};return E}(Ti),rj=zb([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members;Zb.types=["Unknown","Point","LineString","Polygon"];Zb.prototype.loadGeometry=function(){var u=this._pbf;u.pos=this._geometry;for(var E=u.readVarint()+u.pos,P=1,fa=0,pa=0,wa=0,Ea=[],Va;u.pos<E;)if(0>=fa&&(fa=
u.readVarint(),P=fa&7,fa>>=3),fa--,1===P||2===P)pa+=u.readSVarint(),wa+=u.readSVarint(),1===P&&(Va&&Ea.push(Va),Va=[]),Va.push(new Ue(pa,wa));else if(7===P)Va&&Va.push(Va[0].clone());else throw Error("unknown command "+P);Va&&Ea.push(Va);return Ea};Zb.prototype.bbox=function(){var u=this._pbf;u.pos=this._geometry;for(var E=u.readVarint()+u.pos,P=1,fa=0,pa=0,wa=0,Ea=Infinity,Va=-Infinity,Za=Infinity,ib=-Infinity;u.pos<E;)if(0>=fa&&(fa=u.readVarint(),P=fa&7,fa>>=3),fa--,1===P||2===P)pa+=u.readSVarint(),
wa+=u.readSVarint(),pa<Ea&&(Ea=pa),pa>Va&&(Va=pa),wa<Za&&(Za=wa),wa>ib&&(ib=wa);else if(7!==P)throw Error("unknown command "+P);return[Ea,Za,Va,ib]};Zb.prototype.toGeoJSON=function(u,E,P){function fa(Za){for(var ib=0;ib<Za.length;ib++){var Hb=Za[ib];Za[ib]=[360*(Hb.x+wa)/pa-180,360/Math.PI*Math.atan(Math.exp((180-360*(Hb.y+Ea)/pa)*Math.PI/180))-90]}}var pa=this.extent*Math.pow(2,P),wa=this.extent*u,Ea=this.extent*E;u=this.loadGeometry();E=Zb.types[this.type];switch(this.type){case 1:var Va=[];for(P=
0;P<u.length;P++)Va[P]=u[P][0];u=Va;fa(u);break;case 2:for(P=0;P<u.length;P++)fa(u[P]);break;case 3:for(u=ec(u),P=0;P<u.length;P++)for(Va=0;Va<u[P].length;Va++)fa(u[P][Va])}1===u.length?u=u[0]:E="Multi"+E;u={type:"Feature",geometry:{type:E,coordinates:u},properties:this.properties};"id"in this&&(u.id=this.id);return u};var Oi=hc;hc.prototype.feature=function(u){if(0>u||u>=this._features.length)throw Error("feature index out of bounds");this._pbf.pos=this._features[u];u=this._pbf.readVarint()+this._pbf.pos;
return new Zb(this._pbf,u,this.extent,this._keys,this._values)};var cj={VectorTile:function(u,E){this.layers=u.readFields(Fc,{},E)},VectorTileFeature:Zb,VectorTileLayer:Oi},Zk=cj.VectorTileFeature.types,lj=Math.pow(2,13),Eh=function(u){this.zoom=u.zoom;this.overscaling=u.overscaling;this.layers=u.layers;this.layerIds=this.layers.map(function(E){return E.id});this.index=u.index;this.hasPattern=!1;this.layoutVertexArray=new Fk;this.indexArray=new nj;this.programConfigurations=new li(rj,u.layers,u.zoom);
this.segments=new eh;this.stateDependentLayerIds=this.layers.filter(function(E){return E.isStateDependent()}).map(function(E){return E.id})};Eh.prototype.populate=function(u,E,P){this.features=[];this.hasPattern=lb("fill-extrusion",this.layers,E);for(var fa=0;fa<u.length;fa+=1){var pa=u[fa],wa=pa.feature,Ea=pa.id,Va=pa.index;pa=pa.sourceLayerIndex;var Za=this.layers[0]._featureFilter.needGeometry,ib={type:wa.type,id:Ea,properties:wa.properties,geometry:Za?yc(wa):[]};this.layers[0]._featureFilter.filter(new ig(this.zoom),
ib,P)&&(Ea={id:Ea,sourceLayerIndex:pa,index:Va,geometry:Za?ib.geometry:yc(wa),properties:wa.properties,type:wa.type,patterns:{}},"undefined"!==typeof wa.id&&(Ea.id=wa.id),this.hasPattern?this.features.push(Cb("fill-extrusion",this.layers,Ea,this.zoom,E)):this.addFeature(Ea,Ea.geometry,Va,P,{}),E.featureIndex.insert(wa,Ea.geometry,Va,pa,this.index,!0))}};Eh.prototype.addFeatures=function(u,E,P){u=0;for(var fa=this.features;u<fa.length;u+=1){var pa=fa[u];this.addFeature(pa,pa.geometry,pa.index,E,P)}};
Eh.prototype.update=function(u,E,P){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,E,this.stateDependentLayers,P)};Eh.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};Eh.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload};Eh.prototype.upload=function(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,rj),this.indexBuffer=u.createIndexBuffer(this.indexArray));this.programConfigurations.upload(u);
this.uploaded=!0};Eh.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())};Eh.prototype.addFeature=function(u,E,P,fa,pa){var wa=0;for(E=Sa(E,500);wa<E.length;wa+=1){for(var Ea=E[wa],Va=0,Za=0,ib=Ea;Za<ib.length;Za+=1)Va+=ib[Za].length;Za=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);ib=0;for(var Hb=Ea;ib<Hb.length;ib+=1){var Sb=Hb[ib];if(0!==Sb.length&&
!Dd(Sb))for(var ic=0,Dc=0;Dc<Sb.length;Dc++){var wc=Sb[Dc];if(1<=Dc){var Hc=Sb[Dc-1];if(!(wc.x===Hc.x&&(0>wc.x||8192<wc.x)||wc.y===Hc.y&&(0>wc.y||8192<wc.y))){Za.vertexLength+4>eh.MAX_VERTEX_ARRAY_LENGTH&&(Za=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var ud=wc.sub(Hc)._perp()._unit(),Zd=Hc.dist(wc);32768<ic+Zd&&(ic=0);jd(this.layoutVertexArray,wc.x,wc.y,ud.x,ud.y,0,0,ic);jd(this.layoutVertexArray,wc.x,wc.y,ud.x,ud.y,0,1,ic);ic+=Zd;jd(this.layoutVertexArray,Hc.x,Hc.y,
ud.x,ud.y,0,0,ic);jd(this.layoutVertexArray,Hc.x,Hc.y,ud.x,ud.y,0,1,ic);wc=Za.vertexLength;this.indexArray.emplaceBack(wc,wc+2,wc+1);this.indexArray.emplaceBack(wc+1,wc+2,wc+3);Za.vertexLength+=4;Za.primitiveLength+=2}}}}Za.vertexLength+Va>eh.MAX_VERTEX_ARRAY_LENGTH&&(Za=this.segments.prepareSegment(Va,this.layoutVertexArray,this.indexArray));if("Polygon"===Zk[u.type]){Hb=[];Sb=[];ib=Za.vertexLength;ic=0;for(Dc=Ea;ic<Dc.length;ic+=1)if(wc=Dc[ic],0!==wc.length)for(wc!==Ea[0]&&Sb.push(Hb.length/2),
Hc=0;Hc<wc.length;Hc++)ud=wc[Hc],jd(this.layoutVertexArray,ud.x,ud.y,0,0,1,1,0),Hb.push(ud.x),Hb.push(ud.y);Ea=gh(Hb,Sb);for(Hb=0;Hb<Ea.length;Hb+=3)this.indexArray.emplaceBack(ib+Ea[Hb],ib+Ea[Hb+2],ib+Ea[Hb+1]);Za.primitiveLength+=Ea.length/3;Za.vertexLength+=Va}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,P,pa,fa)};Mb("FillExtrusionBucket",Eh,{omit:["layers","features"]});var wk={paint:new Rh({"fill-extrusion-opacity":new We(Fa["paint_fill-extrusion"]["fill-extrusion-opacity"]),
"fill-extrusion-color":new ff(Fa["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new We(Fa["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new We(Fa["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Bj(Fa["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ff(Fa["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ff(Fa["paint_fill-extrusion"]["fill-extrusion-base"]),
"fill-extrusion-vertical-gradient":new We(Fa["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},xk=function(u){function E(P){u.call(this,P,wk)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype.createBucket=function(P){return new Eh(P)};E.prototype.queryRadius=function(){return wf(this.paint.get("fill-extrusion-translate"))};E.prototype.is3D=function(){return!0};E.prototype.queryIntersectsFeature=function(P,fa,pa,wa,Ea,Va,Za,ib){P=Me(P,
this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Va.angle,Za);var Hb=this.paint.get("fill-extrusion-height").evaluate(fa,pa),Sb=this.paint.get("fill-extrusion-base").evaluate(fa,pa);fa=[];for(pa=0;pa<P.length;pa+=1)Ea=P[pa],Ea=[Ea.x,Ea.y,0,1],ih(Ea,Ea,ib),fa.push(new Ue(Ea[0]/Ea[3],Ea[1]/Ea[3]));P=[];pa=[];Ea=ib[8]*Sb;Va=ib[9]*Sb;Za=ib[10]*Sb;Sb*=ib[11];var ic=ib[8]*Hb,Dc=ib[9]*Hb,wc=ib[10]*Hb;Hb*=ib[11];for(var Hc=0;Hc<wa.length;Hc+=1){for(var ud=[],Zd=
[],Ad=0,Jd=wa[Hc];Ad<Jd.length;Ad+=1){var be=Jd[Ad],ke=be.x,Le=be.y;be=ib[0]*ke+ib[4]*Le+ib[12];var ne=ib[1]*ke+ib[5]*Le+ib[13],R=ib[2]*ke+ib[6]*Le+ib[14],aa=ib[3]*ke+ib[7]*Le+ib[15];ke=R+Za;Le=aa+Sb;var sa=be+ic,Ca=ne+Dc;R+=wc;aa+=Hb;be=new Ue((be+Ea)/Le,(ne+Va)/Le);be.z=ke/Le;ud.push(be);be=new Ue(sa/aa,Ca/aa);be.z=R/aa;Zd.push(be)}P.push(ud);pa.push(Zd)}ib=[P,pa];wa=ib[0];ib=ib[1];P=Infinity;vd(fa,ib)&&(P=Ae(fa,ib[0]));for(pa=0;pa<ib.length;pa++)for(Ea=ib[pa],Va=wa[pa],Za=0;Za<Ea.length-1;Za++)Sb=
Ea[Za],Sb=[Sb,Ea[Za+1],Va[Za+1],Va[Za],Sb],oc(fa,Sb)&&(P=Math.min(P,Ae(fa,Sb)));return Infinity===P?!1:P};return E}(Ti),$h=zb([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,ni=cj.VectorTileFeature.types,Ij=Math.cos(Math.PI/180*37.5),Ui=Math.pow(2,14)/.5,Ig=function(u){this.zoom=u.zoom;this.overscaling=u.overscaling;this.layers=u.layers;this.layerIds=this.layers.map(function(E){return E.id});this.index=u.index;this.hasPattern=!1;this.patternFeatures=
[];this.layoutVertexArray=new pk;this.indexArray=new nj;this.programConfigurations=new li($h,u.layers,u.zoom);this.segments=new eh;this.stateDependentLayerIds=this.layers.filter(function(E){return E.isStateDependent()}).map(function(E){return E.id})};Ig.prototype.populate=function(u,E,P){this.hasPattern=lb("line",this.layers,E);for(var fa=this.layers[0].layout.get("line-sort-key"),pa=[],wa=0;wa<u.length;wa+=1){var Ea=u[wa],Va=Ea.feature,Za=Ea.id,ib=Ea.index;Ea=Ea.sourceLayerIndex;var Hb=this.layers[0]._featureFilter.needGeometry,
Sb={type:Va.type,id:Za,properties:Va.properties,geometry:Hb?yc(Va):[]};this.layers[0]._featureFilter.filter(new ig(this.zoom),Sb,P)&&(Hb||(Sb.geometry=yc(Va)),Hb=fa?fa.evaluate(Sb,{},P):void 0,pa.push({id:Za,properties:Va.properties,type:Va.type,sourceLayerIndex:Ea,index:ib,geometry:Sb.geometry,patterns:{},sortKey:Hb}))}fa&&pa.sort(function(ic,Dc){return ic.sortKey-Dc.sortKey});for(fa=0;fa<pa.length;fa+=1)ib=Za=pa[fa],wa=ib.geometry,Va=ib.index,ib=ib.sourceLayerIndex,this.hasPattern?(Za=Cb("line",
this.layers,Za,this.zoom,E),this.patternFeatures.push(Za)):this.addFeature(Za,wa,Va,P,{}),E.featureIndex.insert(u[Va].feature,wa,Va,ib,this.index)};Ig.prototype.update=function(u,E,P){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(u,E,this.stateDependentLayers,P)};Ig.prototype.addFeatures=function(u,E,P){u=0;for(var fa=this.patternFeatures;u<fa.length;u+=1){var pa=fa[u];this.addFeature(pa,pa.geometry,pa.index,E,P)}};Ig.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};
Ig.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload};Ig.prototype.upload=function(u){this.uploaded||(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,$h),this.indexBuffer=u.createIndexBuffer(this.indexArray));this.programConfigurations.upload(u);this.uploaded=!0};Ig.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())};
Ig.prototype.addFeature=function(u,E,P,fa,pa){var wa=this.layers[0].layout,Ea=wa.get("line-join").evaluate(u,{}),Va=wa.get("line-cap"),Za=wa.get("line-miter-limit");wa=wa.get("line-round-limit");for(var ib=0;ib<E.length;ib+=1)this.addLine(E[ib],u,Ea,Va,Za,wa);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,u,P,pa,fa)};Ig.prototype.addLine=function(u,E,P,fa,pa,wa){this.totalDistance=this.scaledDistance=this.distance=0;if(E.properties&&E.properties.hasOwnProperty("mapbox_clip_start")&&
E.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+E.properties.mapbox_clip_start;this.clipEnd=+E.properties.mapbox_clip_end;for(var Ea=0;Ea<u.length-1;Ea++)this.totalDistance+=u[Ea].dist(u[Ea+1]);this.updateScaledDistance()}E="Polygon"===ni[E.type];for(Ea=u.length;2<=Ea&&u[Ea-1].equals(u[Ea-2]);)Ea--;for(var Va=0;Va<Ea-1&&u[Va].equals(u[Va+1]);)Va++;if(!(Ea<(E?3:2))){"bevel"===P&&(pa=1.05);var Za=16>=this.overscaling?122880/(512*this.overscaling):0,ib=this.segments.prepareSegment(10*
Ea,this.layoutVertexArray,this.indexArray),Hb=void 0,Sb=void 0,ic=void 0;this.e1=this.e2=-1;if(E){var Dc=u[Ea-2];ic=u[Va].sub(Dc)._unit()._perp()}for(var wc=Va;wc<Ea;wc++){var Hc=wc===Ea-1?E?u[Va+1]:void 0:u[wc+1];if(!Hc||!u[wc].equals(Hc)){ic&&(Sb=ic);Dc&&(Hb=Dc);Dc=u[wc];ic=Hc?Hc.sub(Dc)._unit()._perp():Sb;Sb=Sb||ic;var ud=Sb.add(ic);0===ud.x&&0===ud.y||ud._unit();var Zd=Sb.x*ic.x+Sb.y*ic.y,Ad=ud.x*ic.x+ud.y*ic.y,Jd=0!==Ad?1/Ad:Infinity,be=2*Math.sqrt(2-2*Ad);Ad=Ad<Ij&&Hb&&Hc;var ke=0<Sb.x*ic.y-
Sb.y*ic.x;if(Ad&&wc>Va){var Le=Dc.dist(Hb);Le>2*Za&&(Le=Dc.sub(Dc.sub(Hb)._mult(Za/Le)._round()),this.updateDistance(Hb,Le),this.addCurrentVertex(Le,Sb,0,0,ib),Hb=Le)}var ne=Hb&&Hc;Le=ne?P:E?"butt":fa;ne&&"round"===Le&&(Jd<wa?Le="miter":2>=Jd&&(Le="fakeround"));"miter"===Le&&Jd>pa&&(Le="bevel");"bevel"===Le&&(2<Jd&&(Le="flipbevel"),Jd<pa&&(Le="miter"));Hb&&this.updateDistance(Hb,Dc);if("miter"===Le)ud._mult(Jd),this.addCurrentVertex(Dc,ud,0,0,ib);else if("flipbevel"===Le)100<Jd?ud=ic.mult(-1):(Zd=
Jd*Sb.add(ic).mag()/Sb.sub(ic).mag(),ud._perp()._mult(Zd*(ke?-1:1))),this.addCurrentVertex(Dc,ud,0,0,ib),this.addCurrentVertex(Dc,ud.mult(-1),0,0,ib);else if("bevel"===Le||"fakeround"===Le){Jd=-Math.sqrt(Jd*Jd-1);ud=ke?Jd:0;Jd=ke?0:Jd;Hb&&this.addCurrentVertex(Dc,Sb,ud,Jd,ib);if("fakeround"===Le)for(be=Math.round(180*be/Math.PI/20),Le=1;Le<be;Le++){ne=Le/be;if(.5!==ne){var R=ne-.5;ne+=ne*R*(ne-1)*((1.0904+Zd*(-3.2452+Zd*(3.55645-1.43519*Zd)))*R*R+(.848013+Zd*(-1.06021+.215638*Zd)))}ne=ic.sub(Sb)._mult(ne)._add(Sb)._unit()._mult(ke?
-1:1);this.addHalfVertex(Dc,ne.x,ne.y,!1,ke,0,ib)}Hc&&this.addCurrentVertex(Dc,ic,-ud,-Jd,ib)}else"butt"===Le?this.addCurrentVertex(Dc,ud,0,0,ib):"square"===Le?(Zd=Hb?1:-1,this.addCurrentVertex(Dc,ud,Zd,Zd,ib)):"round"===Le&&(Hb&&(this.addCurrentVertex(Dc,Sb,0,0,ib),this.addCurrentVertex(Dc,Sb,1,1,ib,!0)),Hc&&(this.addCurrentVertex(Dc,ic,-1,-1,ib,!0),this.addCurrentVertex(Dc,ic,0,0,ib)));Ad&&wc<Ea-1&&(Ad=Dc.dist(Hc),Ad>2*Za&&(Hc=Dc.add(Hc.sub(Dc)._mult(Za/Ad)._round()),this.updateDistance(Dc,Hc),
this.addCurrentVertex(Hc,ic,0,0,ib),Dc=Hc))}}}};Ig.prototype.addCurrentVertex=function(u,E,P,fa,pa,wa){void 0===wa&&(wa=!1);var Ea=-E.x+E.y*fa,Va=-E.y-E.x*fa;this.addHalfVertex(u,E.x+E.y*P,E.y-E.x*P,wa,!1,P,pa);this.addHalfVertex(u,Ea,Va,wa,!0,-fa,pa);this.distance>Ui/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(u,E,P,fa,pa,wa))};Ig.prototype.addHalfVertex=function(u,E,P,fa,pa,wa,Ea){var Va=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((u.x<<1)+(fa?1:0),(u.y<<1)+(pa?
1:0),Math.round(63*E)+128,Math.round(63*P)+128,(0===wa?0:0>wa?-1:1)+1|(Va&63)<<2,Va>>6);u=Ea.vertexLength++;0<=this.e1&&0<=this.e2&&(this.indexArray.emplaceBack(this.e1,this.e2,u),Ea.primitiveLength++);pa?this.e2=u:this.e1=u};Ig.prototype.updateScaledDistance=function(){this.scaledDistance=0<this.totalDistance?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(Ui-1):this.distance};Ig.prototype.updateDistance=function(u,E){this.distance+=u.dist(E);this.updateScaledDistance()};
Mb("LineBucket",Ig,{omit:["layers","patternFeatures"]});var ai=new Rh({"line-cap":new We(Fa.layout_line["line-cap"]),"line-join":new ff(Fa.layout_line["line-join"]),"line-miter-limit":new We(Fa.layout_line["line-miter-limit"]),"line-round-limit":new We(Fa.layout_line["line-round-limit"]),"line-sort-key":new ff(Fa.layout_line["line-sort-key"])}),Th={paint:new Rh({"line-opacity":new ff(Fa.paint_line["line-opacity"]),"line-color":new ff(Fa.paint_line["line-color"]),"line-translate":new We(Fa.paint_line["line-translate"]),
"line-translate-anchor":new We(Fa.paint_line["line-translate-anchor"]),"line-width":new ff(Fa.paint_line["line-width"]),"line-gap-width":new ff(Fa.paint_line["line-gap-width"]),"line-offset":new ff(Fa.paint_line["line-offset"]),"line-blur":new ff(Fa.paint_line["line-blur"]),"line-dasharray":new Cj(Fa.paint_line["line-dasharray"]),"line-pattern":new Bj(Fa.paint_line["line-pattern"]),"line-gradient":new ak(Fa.paint_line["line-gradient"])}),layout:ai},Fg=new (function(u){function E(){u.apply(this,arguments)}
u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype.possiblyEvaluate=function(P,fa){fa=new ig(Math.floor(fa.zoom),{now:fa.now,fadeDuration:fa.fadeDuration,zoomHistory:fa.zoomHistory,transition:fa.transition});return u.prototype.possiblyEvaluate.call(this,P,fa)};E.prototype.evaluate=function(P,fa,pa,wa){fa=f({},fa,{zoom:Math.floor(fa.zoom)});return u.prototype.evaluate.call(this,P,fa,pa,wa)};return E}(ff))(Th.paint.properties["line-width"].specification);
Fg.useIntegerZoom=!0;var Gi=function(u){function E(P){u.call(this,P,Th)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype._handleSpecialPaintPropertyUpdate=function(P){"line-gradient"===P&&this._updateGradient()};E.prototype._updateGradient=function(){this.gradient=ei(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress");this.gradientTexture=null};E.prototype.recalculate=function(P,fa){u.prototype.recalculate.call(this,
P,fa);this.paint._values["line-floorwidth"]=Fg.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,P)};E.prototype.createBucket=function(P){return new Ig(P)};E.prototype.queryRadius=function(P){var fa=Ve("line-width",this,P);var pa=Ve("line-gap-width",this,P);fa=0<pa?pa+2*fa:fa;P=Ve("line-offset",this,P);return fa/2+Math.abs(P)+wf(this.paint.get("line-translate"))};E.prototype.queryIntersectsFeature=function(P,fa,pa,wa,Ea,Va,Za){P=Me(P,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),
Va.angle,Za);Ea=this.paint.get("line-width").evaluate(fa,pa);Va=this.paint.get("line-gap-width").evaluate(fa,pa);Ea=Za/2*(0<Va?Va+2*Ea:Ea);if(fa=this.paint.get("line-offset").evaluate(fa,pa)){Za*=fa;fa=[];pa=new Ue(0,0);for(Va=0;Va<wa.length;Va++){for(var ib=wa[Va],Hb=[],Sb=0;Sb<ib.length;Sb++){var ic=ib[Sb-1],Dc=ib[Sb],wc=ib[Sb+1];ic=0===Sb?pa:Dc.sub(ic)._unit()._perp();wc=Sb===ib.length-1?pa:wc.sub(Dc)._unit()._perp();ic=ic._add(wc)._unit();ic._mult(1/(ic.x*wc.x+ic.y*wc.y));Hb.push(ic._mult(Za)._add(Dc))}fa.push(Hb)}wa=
fa}a:{for(Za=0;Za<wa.length;Za++){pa=wa[Za];if(3<=P.length)for(fa=0;fa<pa.length;fa++)if(Oe(P,pa[fa])){P=!0;break a}b:{fa=P;Va=Ea;if(1<fa.length){if(Qd(fa,pa)){fa=!0;break b}for(ib=0;ib<pa.length;ib++)if(Yd(pa[ib],fa,Va)){fa=!0;break b}}for(ib=0;ib<fa.length;ib++)if(Yd(fa[ib],pa,Va)){fa=!0;break b}fa=!1}if(fa){P=!0;break a}}P=!1}return P};E.prototype.isTileClipped=function(){return!0};return E}(Ti),$k=zb([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",
components:4,type:"Int16"}],4),yk=zb([{name:"a_projected_pos",components:3,type:"Float32"}],4);zb([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);var Qj=zb([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);zb([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},
{type:"Uint16",name:"bucketIndex"}]);var dj=zb([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),ek=zb([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);zb([{name:"triangle",components:3,type:"Uint16"}]);zb([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},
{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]);zb([{type:"Int16",name:"anchorX"},{type:"Int16",
name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},
{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},
{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]);zb([{type:"Float32",name:"offsetX"}]);zb([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Hi={"!":"","#":"",$:"","%":"","\x26":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","\x3c":"","\x3d":"","\x3e":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"",
"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},Ii={read:function(u,E,P,fa,pa){var wa=8*pa-fa-1;var Ea=(1<<wa)-1,Va=Ea>>1,Za=-7;pa=P?
pa-1:0;var ib=P?-1:1,Hb=u[E+pa];pa+=ib;P=Hb&(1<<-Za)-1;Hb>>=-Za;for(Za+=wa;0<Za;P=256*P+u[E+pa],pa+=ib,Za-=8);wa=P&(1<<-Za)-1;P>>=-Za;for(Za+=fa;0<Za;wa=256*wa+u[E+pa],pa+=ib,Za-=8);if(0===P)P=1-Va;else{if(P===Ea)return wa?NaN:Infinity*(Hb?-1:1);wa+=Math.pow(2,fa);P-=Va}return(Hb?-1:1)*wa*Math.pow(2,P-fa)},write:function(u,E,P,fa,pa,wa){var Ea,Va=8*wa-pa-1,Za=(1<<Va)-1,ib=Za>>1,Hb=23===pa?Math.pow(2,-24)-Math.pow(2,-77):0;wa=fa?0:wa-1;var Sb=fa?1:-1,ic=0>E||0===E&&0>1/E?1:0;E=Math.abs(E);isNaN(E)||
Infinity===E?(E=isNaN(E)?1:0,fa=Za):(fa=Math.floor(Math.log(E)/Math.LN2),1>E*(Ea=Math.pow(2,-fa))&&(fa--,Ea*=2),E=1<=fa+ib?E+Hb/Ea:E+Hb*Math.pow(2,1-ib),2<=E*Ea&&(fa++,Ea/=2),fa+ib>=Za?(E=0,fa=Za):1<=fa+ib?(E=(E*Ea-1)*Math.pow(2,pa),fa+=ib):(E=E*Math.pow(2,ib-1)*Math.pow(2,pa),fa=0));for(;8<=pa;u[P+wa]=E&255,wa+=Sb,E/=256,pa-=8);fa=fa<<pa|E;for(Va+=pa;0<Va;u[P+wa]=fa&255,wa+=Sb,fa/=256,Va-=8);u[P+wa-Sb]|=128*ic}};Je.Varint=0;Je.Fixed64=1;Je.Bytes=2;Je.Fixed32=5;var al=1/4294967296,fk="undefined"===
typeof TextDecoder?null:new TextDecoder("utf8");Je.prototype={destroy:function(){this.buf=null},readFields:function(u,E,P){for(P=P||this.length;this.pos<P;){var fa=this.readVarint(),pa=fa>>3,wa=this.pos;this.type=fa&7;u(pa,E,this);this.pos===wa&&this.skip(fa)}return E},readMessage:function(u,E){return this.readFields(u,E,this.readVarint()+this.pos)},readFixed32:function(){var u=Oh(this.buf,this.pos);this.pos+=4;return u},readSFixed32:function(){var u=Qa(this.buf,this.pos);this.pos+=4;return u},readFixed64:function(){var u=
Oh(this.buf,this.pos)+4294967296*Oh(this.buf,this.pos+4);this.pos+=8;return u},readSFixed64:function(){var u=Oh(this.buf,this.pos)+4294967296*Qa(this.buf,this.pos+4);this.pos+=8;return u},readFloat:function(){var u=Ii.read(this.buf,this.pos,!0,23,4);this.pos+=4;return u},readDouble:function(){var u=Ii.read(this.buf,this.pos,!0,52,8);this.pos+=8;return u},readVarint:function(u){var E=this.buf;var P=E[this.pos++];var fa=P&127;if(128>P)return fa;P=E[this.pos++];fa|=(P&127)<<7;if(128>P)return fa;P=E[this.pos++];
fa|=(P&127)<<14;if(128>P)return fa;P=E[this.pos++];fa|=(P&127)<<21;if(128>P)return fa;P=E[this.pos];return Tf(fa|(P&15)<<28,u,this)},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var u=this.readVarint();return 1===u%2?(u+1)/-2:u/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var u=this.readVarint()+this.pos,E=this.pos;this.pos=u;if(12<=u-E&&fk)return fk.decode(this.buf.subarray(E,u));for(var P=this.buf,fa="";E<u;){var pa=P[E],wa=null,Ea=239<
pa?4:223<pa?3:191<pa?2:1;if(E+Ea>u)break;if(1===Ea)128>pa&&(wa=pa);else if(2===Ea){var Va=P[E+1];128===(Va&192)&&(wa=(pa&31)<<6|Va&63,127>=wa&&(wa=null))}else if(3===Ea){Va=P[E+1];var Za=P[E+2];128===(Va&192)&&128===(Za&192)&&(wa=(pa&15)<<12|(Va&63)<<6|Za&63,2047>=wa||55296<=wa&&57343>=wa)&&(wa=null)}else if(4===Ea){Va=P[E+1];Za=P[E+2];var ib=P[E+3];128===(Va&192)&&128===(Za&192)&&128===(ib&192)&&(wa=(pa&15)<<18|(Va&63)<<12|(Za&63)<<6|ib&63,65535>=wa||1114112<=wa)&&(wa=null)}null===wa?(wa=65533,Ea=
1):65535<wa&&(wa-=65536,fa+=String.fromCharCode(wa>>>10&1023|55296),wa=56320|wa&1023);fa+=String.fromCharCode(wa);E+=Ea}return fa},readBytes:function(){var u=this.readVarint()+this.pos,E=this.buf.subarray(this.pos,u);this.pos=u;return E},readPackedVarint:function(u,E){if(this.type!==Je.Bytes)return u.push(this.readVarint(E));var P=Mf(this);for(u=u||[];this.pos<P;)u.push(this.readVarint(E));return u},readPackedSVarint:function(u){if(this.type!==Je.Bytes)return u.push(this.readSVarint());var E=Mf(this);
for(u=u||[];this.pos<E;)u.push(this.readSVarint());return u},readPackedBoolean:function(u){if(this.type!==Je.Bytes)return u.push(this.readBoolean());var E=Mf(this);for(u=u||[];this.pos<E;)u.push(this.readBoolean());return u},readPackedFloat:function(u){if(this.type!==Je.Bytes)return u.push(this.readFloat());var E=Mf(this);for(u=u||[];this.pos<E;)u.push(this.readFloat());return u},readPackedDouble:function(u){if(this.type!==Je.Bytes)return u.push(this.readDouble());var E=Mf(this);for(u=u||[];this.pos<
E;)u.push(this.readDouble());return u},readPackedFixed32:function(u){if(this.type!==Je.Bytes)return u.push(this.readFixed32());var E=Mf(this);for(u=u||[];this.pos<E;)u.push(this.readFixed32());return u},readPackedSFixed32:function(u){if(this.type!==Je.Bytes)return u.push(this.readSFixed32());var E=Mf(this);for(u=u||[];this.pos<E;)u.push(this.readSFixed32());return u},readPackedFixed64:function(u){if(this.type!==Je.Bytes)return u.push(this.readFixed64());var E=Mf(this);for(u=u||[];this.pos<E;)u.push(this.readFixed64());
return u},readPackedSFixed64:function(u){if(this.type!==Je.Bytes)return u.push(this.readSFixed64());var E=Mf(this);for(u=u||[];this.pos<E;)u.push(this.readSFixed64());return u},skip:function(u){u&=7;if(u===Je.Varint)for(;127<this.buf[this.pos++];);else if(u===Je.Bytes)this.pos=this.readVarint()+this.pos;else if(u===Je.Fixed32)this.pos+=4;else if(u===Je.Fixed64)this.pos+=8;else throw Error("Unimplemented type: "+u);},writeTag:function(u,E){this.writeVarint(u<<3|E)},realloc:function(u){for(var E=this.length||
16;E<this.pos+u;)E*=2;E!==this.length&&(u=new Uint8Array(E),u.set(this.buf),this.buf=u,this.length=E)},finish:function(){this.length=this.pos;this.pos=0;return this.buf.subarray(0,this.length)},writeFixed32:function(u){this.realloc(4);Ya(this.buf,u,this.pos);this.pos+=4},writeSFixed32:function(u){this.realloc(4);Ya(this.buf,u,this.pos);this.pos+=4},writeFixed64:function(u){this.realloc(8);Ya(this.buf,u&-1,this.pos);Ya(this.buf,Math.floor(u*al),this.pos+4);this.pos+=8},writeSFixed64:function(u){this.realloc(8);
Ya(this.buf,u&-1,this.pos);Ya(this.buf,Math.floor(u*al),this.pos+4);this.pos+=8},writeVarint:function(u){u=+u||0;if(268435455<u||0>u){if(0<=u){var E=u%4294967296|0;var P=u/4294967296|0}else E=~(-u%4294967296),P=~(-u/4294967296),E^4294967295?E=E+1|0:(E=0,P=P+1|0);if(1.8446744073709552E19<=u||-1.8446744073709552E19>u)throw Error("Given varint doesn't fit into 10 bytes");this.realloc(10);u=E;this.buf[this.pos++]=u&127|128;u>>>=7;this.buf[this.pos++]=u&127|128;u>>>=7;this.buf[this.pos++]=u&127|128;u>>>=
7;this.buf[this.pos++]=u&127|128;this.buf[this.pos]=u>>>7&127;this.buf[this.pos++]|=(P&7)<<4|((P>>>=3)?128:0);P&&(this.buf[this.pos++]=P&127|((P>>>=7)?128:0),P&&(this.buf[this.pos++]=P&127|((P>>>=7)?128:0),P&&(this.buf[this.pos++]=P&127|((P>>>=7)?128:0),P&&(this.buf[this.pos++]=P&127|((P>>>=7)?128:0),P&&(this.buf[this.pos++]=P&127)))))}else this.realloc(4),this.buf[this.pos++]=u&127|(127<u?128:0),127>=u||(this.buf[this.pos++]=(u>>>=7)&127|(127<u?128:0),127>=u||(this.buf[this.pos++]=(u>>>=7)&127|(127<
u?128:0),127>=u||(this.buf[this.pos++]=u>>>7&127)))},writeSVarint:function(u){this.writeVarint(0>u?2*-u-1:2*u)},writeBoolean:function(u){this.writeVarint(!!u)},writeString:function(u){u=String(u);this.realloc(4*u.length);this.pos++;for(var E=this.pos,P=this.buf,fa=this.pos,pa=0,wa,Ea;pa<u.length;pa++){wa=u.charCodeAt(pa);if(55295<wa&&57344>wa)if(Ea)if(56320>wa){P[fa++]=239;P[fa++]=191;P[fa++]=189;Ea=wa;continue}else wa=Ea-55296<<10|wa-56320|65536,Ea=null;else{56319<wa||pa+1===u.length?(P[fa++]=239,
P[fa++]=191,P[fa++]=189):Ea=wa;continue}else Ea&&(P[fa++]=239,P[fa++]=191,P[fa++]=189,Ea=null);128>wa?P[fa++]=wa:(2048>wa?P[fa++]=wa>>6|192:(65536>wa?P[fa++]=wa>>12|224:(P[fa++]=wa>>18|240,P[fa++]=wa>>12&63|128),P[fa++]=wa>>6&63|128),P[fa++]=wa&63|128)}this.pos=fa;P=this.pos-E;128<=P&&$g(E,P,this);this.pos=E-1;this.writeVarint(P);this.pos+=P},writeFloat:function(u){this.realloc(4);Ii.write(this.buf,u,this.pos,!0,23,4);this.pos+=4},writeDouble:function(u){this.realloc(8);Ii.write(this.buf,u,this.pos,
!0,52,8);this.pos+=8},writeBytes:function(u){var E=u.length;this.writeVarint(E);this.realloc(E);for(var P=0;P<E;P++)this.buf[this.pos++]=u[P]},writeRawMessage:function(u,E){this.pos++;var P=this.pos;u(E,this);u=this.pos-P;128<=u&&$g(P,u,this);this.pos=P-1;this.writeVarint(u);this.pos+=u},writeMessage:function(u,E,P){this.writeTag(u,Je.Bytes);this.writeRawMessage(E,P)},writePackedVarint:function(u,E){E.length&&this.writeMessage(u,Kg,E)},writePackedSVarint:function(u,E){E.length&&this.writeMessage(u,
Ug,E)},writePackedBoolean:function(u,E){E.length&&this.writeMessage(u,oh,E)},writePackedFloat:function(u,E){E.length&&this.writeMessage(u,Ff,E)},writePackedDouble:function(u,E){E.length&&this.writeMessage(u,Lf,E)},writePackedFixed32:function(u,E){E.length&&this.writeMessage(u,Wh,E)},writePackedSFixed32:function(u,E){E.length&&this.writeMessage(u,Hh,E)},writePackedFixed64:function(u,E){E.length&&this.writeMessage(u,vi,E)},writePackedSFixed64:function(u,E){E.length&&this.writeMessage(u,wi,E)},writeBytesField:function(u,
E){this.writeTag(u,Je.Bytes);this.writeBytes(E)},writeFixed32Field:function(u,E){this.writeTag(u,Je.Fixed32);this.writeFixed32(E)},writeSFixed32Field:function(u,E){this.writeTag(u,Je.Fixed32);this.writeSFixed32(E)},writeFixed64Field:function(u,E){this.writeTag(u,Je.Fixed64);this.writeFixed64(E)},writeSFixed64Field:function(u,E){this.writeTag(u,Je.Fixed64);this.writeSFixed64(E)},writeVarintField:function(u,E){this.writeTag(u,Je.Varint);this.writeVarint(E)},writeSVarintField:function(u,E){this.writeTag(u,
Je.Varint);this.writeSVarint(E)},writeStringField:function(u,E){this.writeTag(u,Je.Bytes);this.writeString(E)},writeFloatField:function(u,E){this.writeTag(u,Je.Fixed32);this.writeFloat(E)},writeDoubleField:function(u,E){this.writeTag(u,Je.Fixed64);this.writeDouble(E)},writeBooleanField:function(u,E){this.writeVarintField(u,!!E)}};var ej=function(u,E){var P=E.pixelRatio,fa=E.version,pa=E.stretchX,wa=E.stretchY;E=E.content;this.paddedRect=u;this.pixelRatio=P;this.stretchX=pa;this.stretchY=wa;this.content=
E;this.version=fa},Rj={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Rj.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]};Rj.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]};Rj.tlbr.get=function(){return this.tl.concat(this.br)};Rj.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]};Object.defineProperties(ej.prototype,
Rj);var fj=function(u,E){var P={},fa={};this.haveRenderCallbacks=[];var pa=[];this.addImages(u,P,pa);this.addImages(E,fa,pa);pa=dd(pa);pa=new dh({width:pa.w||1,height:pa.h||1});for(var wa in u){var Ea=u[wa],Va=P[wa].paddedRect;dh.copy(Ea.data,pa,{x:0,y:0},{x:Va.x+1,y:Va.y+1},Ea.data)}for(var Za in E){u=E[Za];Ea=fa[Za].paddedRect;wa=Ea.x+1;Ea=Ea.y+1;Va=u.data.width;var ib=u.data.height;dh.copy(u.data,pa,{x:0,y:0},{x:wa,y:Ea},u.data);dh.copy(u.data,pa,{x:0,y:ib-1},{x:wa,y:Ea-1},{width:Va,height:1});
dh.copy(u.data,pa,{x:0,y:0},{x:wa,y:Ea+ib},{width:Va,height:1});dh.copy(u.data,pa,{x:Va-1,y:0},{x:wa-1,y:Ea},{width:1,height:ib});dh.copy(u.data,pa,{x:0,y:0},{x:wa+Va,y:Ea},{width:1,height:ib})}this.image=pa;this.iconPositions=P;this.patternPositions=fa};fj.prototype.addImages=function(u,E,P){for(var fa in u){var pa=u[fa],wa={x:0,y:0,w:pa.data.width+2,h:pa.data.height+2};P.push(wa);E[fa]=new ej(wa,pa);pa.hasRenderCallback&&this.haveRenderCallbacks.push(fa)}};fj.prototype.patchUpdatedImages=function(u,
E){u.dispatchRenderCallbacks(this.haveRenderCallbacks);for(var P in u.updatedImages)this.patchUpdatedImage(this.iconPositions[P],u.getImage(P),E),this.patchUpdatedImage(this.patternPositions[P],u.getImage(P),E)};fj.prototype.patchUpdatedImage=function(u,E,P){u&&E&&u.version!==E.version&&(u.version=E.version,u=u.tl,P.update(E.data,void 0,{x:u[0],y:u[1]}))};Mb("ImagePosition",ej);Mb("ImageAtlas",fj);var Lg={horizontal:1,vertical:2,horizontalOnly:3},Vi=function(){this.scale=1;this.fontStack="";this.imageName=
null};Vi.forText=function(u,E){var P=new Vi;P.scale=u||1;P.fontStack=E;return P};Vi.forImage=function(u){var E=new Vi;E.imageName=u;return E};var Og=function(){this.text="";this.sectionIndex=[];this.sections=[];this.imageSectionID=null};Og.fromFeature=function(u,E){for(var P=new Og,fa=0;fa<u.sections.length;fa++){var pa=u.sections[fa];pa.image?P.addImageSection(pa):P.addTextSection(pa,E)}return P};Og.prototype.length=function(){return this.text.length};Og.prototype.getSection=function(u){return this.sections[this.sectionIndex[u]]};
Og.prototype.getSectionIndex=function(u){return this.sectionIndex[u]};Og.prototype.getCharCode=function(u){return this.text.charCodeAt(u)};Og.prototype.verticalizePunctuation=function(){for(var u=this.text,E="",P=0;P<u.length;P++){var fa=u.charCodeAt(P+1)||null,pa=u.charCodeAt(P-1)||null;E=fa&&ue(fa)&&!Hi[u[P+1]]||pa&&ue(pa)&&!Hi[u[P-1]]||!Hi[u[P]]?E+u[P]:E+Hi[u[P]]}this.text=E};Og.prototype.trim=function(){for(var u=0,E=0;E<this.text.length&&Bg[this.text.charCodeAt(E)];E++)u++;E=this.text.length;
for(var P=this.text.length-1;0<=P&&P>=u&&Bg[this.text.charCodeAt(P)];P--)E--;this.text=this.text.substring(u,E);this.sectionIndex=this.sectionIndex.slice(u,E)};Og.prototype.substring=function(u,E){var P=new Og;P.text=this.text.substring(u,E);P.sectionIndex=this.sectionIndex.slice(u,E);P.sections=this.sections;return P};Og.prototype.toString=function(){return this.text};Og.prototype.getMaxScale=function(){var u=this;return this.sectionIndex.reduce(function(E,P){return Math.max(E,u.sections[P].scale)},
0)};Og.prototype.addTextSection=function(u,E){this.text+=u.text;this.sections.push(Vi.forText(u.scale,u.fontStack||E));E=this.sections.length-1;for(var P=0;P<u.text.length;++P)this.sectionIndex.push(E)};Og.prototype.addImageSection=function(u){u=u.image?u.image.name:"";if(0===u.length)D("Can't add FormattedSection with an empty image.");else{var E=this.getNextImageSectionCharCode();E?(this.text+=String.fromCharCode(E),this.sections.push(Vi.forImage(u)),this.sectionIndex.push(this.sections.length-
1)):D("Reached maximum number of images 6401")}};Og.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?63743<=this.imageSectionID?null:++this.imageSectionID:this.imageSectionID=57344};var Bg={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Ck={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},Yi=function(u){function E(P,fa,pa,wa){u.call(this,P,fa);this.angle=pa;void 0!==wa&&(this.segment=wa)}u&&(E.__proto__=u);E.prototype=Object.create(u&&
u.prototype);E.prototype.constructor=E;E.prototype.clone=function(){return new E(this.x,this.y,this.angle,this.segment)};return E}(Ue);Mb("Anchor",Yi);var bl=Object.freeze({__proto__:null,getSizeData:ae,evaluateSizeForFeature:gf,evaluateSizeForZoom:Te,SIZE_PACK_FACTOR:128}),Pi=function(u,E,P,fa,pa,wa,Ea,Va,Za,ib){this.boxStartIndex=u.length;if(Za){E=wa.top;P=wa.bottom;if(fa=wa.collisionPadding)E-=fa[1],P+=fa[3];E=P-E;0<E&&(this.circleDiameter=E=Math.max(10,E))}else{Za=wa.top*Ea-Va;var Hb=wa.bottom*
Ea+Va,Sb=wa.left*Ea-Va;Va=wa.right*Ea+Va;if(wa=wa.collisionPadding)Sb-=wa[0]*Ea,Za-=wa[1]*Ea,Va+=wa[2]*Ea,Hb+=wa[3]*Ea;if(ib){wa=new Ue(Sb,Za);Ea=new Ue(Va,Za);var ic=new Ue(Sb,Hb);Hb=new Ue(Va,Hb);ib=ib*Math.PI/180;wa._rotate(ib);Ea._rotate(ib);ic._rotate(ib);Hb._rotate(ib);Sb=Math.min(wa.x,Ea.x,ic.x,Hb.x);Va=Math.max(wa.x,Ea.x,ic.x,Hb.x);Za=Math.min(wa.y,Ea.y,ic.y,Hb.y);Hb=Math.max(wa.y,Ea.y,ic.y,Hb.y)}u.emplaceBack(E.x,E.y,Sb,Za,Va,Hb,P,fa,pa)}this.boxEndIndex=u.length},dg=function(u,E){void 0===
u&&(u=[]);void 0===E&&(E=hg);this.data=u;this.length=this.data.length;this.compare=E;if(0<this.length)for(u=(this.length>>1)-1;0<=u;u--)this._down(u)};dg.prototype.push=function(u){this.data.push(u);this.length++;this._up(this.length-1)};dg.prototype.pop=function(){if(0!==this.length){var u=this.data[0],E=this.data.pop();this.length--;0<this.length&&(this.data[0]=E,this._down(0));return u}};dg.prototype.peek=function(){return this.data[0]};dg.prototype._up=function(u){for(var E=this.data,P=this.compare,
fa=E[u];0<u;){var pa=u-1>>1,wa=E[pa];if(0<=P(fa,wa))break;E[u]=wa;u=pa}E[u]=fa};dg.prototype._down=function(u){for(var E=this.data,P=this.compare,fa=this.length>>1,pa=E[u];u<fa;){var wa=(u<<1)+1,Ea=E[wa],Va=wa+1;Va<this.length&&0>P(E[Va],Ea)&&(wa=Va,Ea=E[Va]);if(0<=P(Ea,pa))break;E[u]=Ea;u=wa}E[u]=pa};var Vg=Number.POSITIVE_INFINITY,Pg=255,Bi=128*Pg,gk=cj.VectorTileFeature.types,hk=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}],Sj=function(u){this.layoutVertexArray=new Gk;this.indexArray=
new nj;this.programConfigurations=u;this.segments=new eh;this.dynamicLayoutVertexArray=new Hk;this.opacityVertexArray=new Ik;this.placedSymbolArray=new il};Sj.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length};Sj.prototype.upload=function(u,E,P,fa){this.isEmpty()||(P&&(this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,$k.members),this.indexBuffer=u.createIndexBuffer(this.indexArray,
E),this.dynamicLayoutVertexBuffer=u.createVertexBuffer(this.dynamicLayoutVertexArray,yk.members,!0),this.opacityVertexBuffer=u.createVertexBuffer(this.opacityVertexArray,hk,!0),this.opacityVertexBuffer.itemSize=1),(P||fa)&&this.programConfigurations.upload(u))};Sj.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())};
Mb("SymbolBuffers",Sj);var sj=function(u,E,P){this.layoutVertexArray=new u;this.layoutAttributes=E;this.indexArray=new P;this.segments=new eh;this.collisionVertexArray=new Kk};sj.prototype.upload=function(u){this.layoutVertexBuffer=u.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes);this.indexBuffer=u.createIndexBuffer(this.indexArray);this.collisionVertexBuffer=u.createVertexBuffer(this.collisionVertexArray,Qj.members,!0)};sj.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),
this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())};Mb("CollisionBuffers",sj);var Yf=function(u){this.collisionBoxArray=u.collisionBoxArray;this.zoom=u.zoom;this.overscaling=u.overscaling;this.layers=u.layers;this.layerIds=this.layers.map(function(pa){return pa.id});this.index=u.index;this.pixelRatio=u.pixelRatio;this.sourceLayerIndex=u.sourceLayerIndex;this.hasRTLText=this.hasPattern=!1;this.sortKeyRanges=[];this.collisionCircleArray=[];this.placementInvProjMatrix=
Af([]);this.placementViewportMatrix=Af([]);var E=this.layers[0]._unevaluatedLayout._values;this.textSizeData=ae(this.zoom,E["text-size"]);this.iconSizeData=ae(this.zoom,E["icon-size"]);E=this.layers[0].layout;var P=E.get("symbol-sort-key"),fa=E.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==fa&&void 0!==P.constantOr(1);this.sortFeaturesByY=("viewport-y"===fa||"auto"===fa&&!this.sortFeaturesByKey)&&(E.get("text-allow-overlap")||E.get("icon-allow-overlap")||E.get("text-ignore-placement")||
E.get("icon-ignore-placement"));"point"===E.get("symbol-placement")&&(this.writingModes=E.get("text-writing-mode").map(function(pa){return Lg[pa]}));this.stateDependentLayerIds=this.layers.filter(function(pa){return pa.isStateDependent()}).map(function(pa){return pa.id});this.sourceID=u.sourceID};Yf.prototype.createArrays=function(){this.text=new Sj(new li($k.members,this.layers,this.zoom,function(u){return/^text/.test(u)}));this.icon=new Sj(new li($k.members,this.layers,this.zoom,function(u){return/^icon/.test(u)}));
this.glyphOffsetArray=new Qk;this.lineVertexArray=new tk;this.symbolInstances=new Oj};Yf.prototype.calculateGlyphDependencies=function(u,E,P,fa,pa){for(var wa=0;wa<u.length;wa++)if(E[u.charCodeAt(wa)]=!0,(P||fa)&&pa){var Ea=Hi[u.charAt(wa)];Ea&&(E[Ea.charCodeAt(0)]=!0)}};Yf.prototype.populate=function(u,E,P){var fa=this.layers[0],pa=fa.layout,wa=pa.get("text-font"),Ea=pa.get("text-field"),Va=pa.get("icon-image");Ea=("constant"!==Ea.value.kind||Ea.value.value instanceof zd&&!Ea.value.value.isEmpty()||
0<Ea.value.value.toString().length)&&("constant"!==wa.value.kind||0<wa.value.value.length);Va="constant"!==Va.value.kind||!!Va.value.value||0<Object.keys(Va.parameters).length;var Za=pa.get("symbol-sort-key");this.features=[];if(Ea||Va){var ib=E.iconDependencies,Hb=E.glyphDependencies;E=E.availableImages;for(var Sb=new ig(this.zoom),ic=0;ic<u.length;ic+=1){var Dc=u[ic],wc=Dc.feature,Hc=Dc.id,ud=Dc.index,Zd=Dc.sourceLayerIndex;Dc=fa._featureFilter.needGeometry;var Ad={type:wc.type,id:Hc,properties:wc.properties,
geometry:Dc?yc(wc):[]};if(fa._featureFilter.filter(Sb,Ad,P)){Dc||(Ad.geometry=yc(wc));Dc=void 0;if(Ea){var Jd=fa.getValueAndResolveTokens("text-field",Ad,P,E);Jd=zd.factory(Jd);Vh(Jd)&&(this.hasRTLText=!0);if(!this.hasRTLText||"unavailable"===ch||this.hasRTLText&&zh.isParsed())Dc=Xe(Jd,fa,Ad)}Jd=void 0;Va&&(Jd=fa.getValueAndResolveTokens("icon-image",Ad,P,E),Jd=Jd instanceof ee?Jd:ee.fromString(Jd));if(Dc||Jd){var be=this.sortFeaturesByKey?Za.evaluate(Ad,{},P):void 0;wc={id:Hc,text:Dc,icon:Jd,index:ud,
sourceLayerIndex:Zd,geometry:yc(wc),properties:wc.properties,type:gk[wc.type],sortKey:be};this.features.push(wc);Jd&&(ib[Jd.name]=!0);if(Dc)for(wc=wa.evaluate(Ad,{},P).join(","),Hc="map"===pa.get("text-rotation-alignment")&&"point"!==pa.get("symbol-placement"),this.allowVerticalPlacement=this.writingModes&&0<=this.writingModes.indexOf(Lg.vertical),ud=0,Ad=Dc.sections;ud<Ad.length;ud+=1)Zd=Ad[ud],Zd.image?ib[Zd.image.name]=!0:(Jd=qd(Dc.toString()),be=Zd.fontStack||wc,be=Hb[be]=Hb[be]||{},this.calculateGlyphDependencies(Zd.text,
be,Hc,this.allowVerticalPlacement,Jd))}}}"line"===pa.get("symbol-placement")&&(this.features=Vf(this.features));this.sortFeaturesByKey&&this.features.sort(function(ke,Le){return ke.sortKey-Le.sortKey})}};Yf.prototype.update=function(u,E,P){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(u,E,this.layers,P),this.icon.programConfigurations.updatePaintArrays(u,E,this.layers,P))};Yf.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText};
Yf.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload};Yf.prototype.upload=function(u){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(u),this.iconCollisionBox.upload(u));this.text.upload(u,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload);this.icon.upload(u,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload);this.uploaded=!0};
Yf.prototype.destroyDebugData=function(){this.textCollisionBox.destroy();this.iconCollisionBox.destroy()};Yf.prototype.destroy=function(){this.text.destroy();this.icon.destroy();this.hasDebugData()&&this.destroyDebugData()};Yf.prototype.addToLineVertexArray=function(u,E){var P=this.lineVertexArray.length;if(void 0!==u.segment){for(var fa=u.dist(E[u.segment+1]),pa=u.dist(E[u.segment]),wa={},Ea=u.segment+1;Ea<E.length;Ea++)wa[Ea]={x:E[Ea].x,y:E[Ea].y,tileUnitDistanceFromAnchor:fa},Ea<E.length-1&&(fa+=
E[Ea+1].dist(E[Ea]));for(u=u.segment||0;0<=u;u--)wa[u]={x:E[u].x,y:E[u].y,tileUnitDistanceFromAnchor:pa},0<u&&(pa+=E[u-1].dist(E[u]));for(pa=0;pa<E.length;pa++)u=wa[pa],this.lineVertexArray.emplaceBack(u.x,u.y,u.tileUnitDistanceFromAnchor)}return{lineStartIndex:P,lineLength:this.lineVertexArray.length-P}};Yf.prototype.addSymbols=function(u,E,P,fa,pa,wa,Ea,Va,Za,ib,Hb,Sb){pa=u.indexArray;for(var ic=u.layoutVertexArray,Dc=u.segments.prepareSegment(4*E.length,ic,pa,wa.sortKey),wc=this.glyphOffsetArray.length,
Hc=Dc.vertexLength,ud=this.allowVerticalPlacement&&Ea===Lg.vertical?Math.PI/2:0,Zd=wa.text&&wa.text.sections,Ad=0;Ad<E.length;Ad++){var Jd=E[Ad],be=Jd.tl,ke=Jd.tr,Le=Jd.bl,ne=Jd.br,R=Jd.tex,aa=Jd.pixelOffsetTL,sa=Jd.pixelOffsetBR,Ca=Jd.minFontScaleX,Ua=Jd.minFontScaleY,ab=Jd.glyphOffset,Kb=Jd.isSDF;Jd=Jd.sectionIndex;var lc=Dc.vertexLength,Ac=ab[1];uh(ic,Va.x,Va.y,be.x,Ac+be.y,R.x,R.y,P,Kb,aa.x,aa.y,Ca,Ua);uh(ic,Va.x,Va.y,ke.x,Ac+ke.y,R.x+R.w,R.y,P,Kb,sa.x,aa.y,Ca,Ua);uh(ic,Va.x,Va.y,Le.x,Ac+Le.y,
R.x,R.y+R.h,P,Kb,aa.x,sa.y,Ca,Ua);uh(ic,Va.x,Va.y,ne.x,Ac+ne.y,R.x+R.w,R.y+R.h,P,Kb,sa.x,sa.y,Ca,Ua);Ji(u.dynamicLayoutVertexArray,Va,ud);pa.emplaceBack(lc,lc+1,lc+2);pa.emplaceBack(lc+1,lc+2,lc+3);Dc.vertexLength+=4;Dc.primitiveLength+=2;this.glyphOffsetArray.emplaceBack(ab[0]);Ad!==E.length-1&&Jd===E[Ad+1].sectionIndex||u.programConfigurations.populatePaintArrays(ic.length,wa,wa.index,{},Sb,Zd&&Zd[Jd])}u.placedSymbolArray.emplaceBack(Va.x,Va.y,wc,this.glyphOffsetArray.length-wc,Hc,Za,ib,Va.segment,
P?P[0]:0,P?P[1]:0,fa[0],fa[1],Ea,0,!1,0,Hb)};Yf.prototype._addCollisionDebugVertex=function(u,E,P,fa,pa,wa){E.emplaceBack(0,0);return u.emplaceBack(P.x,P.y,fa,pa,Math.round(wa.x),Math.round(wa.y))};Yf.prototype.addCollisionDebugVertices=function(u,E,P,fa,pa,wa,Ea){var Va=pa.segments.prepareSegment(4,pa.layoutVertexArray,pa.indexArray),Za=Va.vertexLength,ib=pa.layoutVertexArray,Hb=pa.collisionVertexArray,Sb=Ea.anchorX;Ea=Ea.anchorY;this._addCollisionDebugVertex(ib,Hb,wa,Sb,Ea,new Ue(u,E));this._addCollisionDebugVertex(ib,
Hb,wa,Sb,Ea,new Ue(P,E));this._addCollisionDebugVertex(ib,Hb,wa,Sb,Ea,new Ue(P,fa));this._addCollisionDebugVertex(ib,Hb,wa,Sb,Ea,new Ue(u,fa));Va.vertexLength+=4;u=pa.indexArray;u.emplaceBack(Za,Za+1);u.emplaceBack(Za+1,Za+2);u.emplaceBack(Za+2,Za+3);u.emplaceBack(Za+3,Za);Va.primitiveLength+=4};Yf.prototype.addDebugCollisionBoxes=function(u,E,P,fa){for(;u<E;u++){var pa=this.collisionBoxArray.get(u);this.addCollisionDebugVertices(pa.x1,pa.y1,pa.x2,pa.y2,fa?this.textCollisionBox:this.iconCollisionBox,
pa.anchorPoint,P)}};Yf.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData();this.textCollisionBox=new sj(qk,dj.members,Dj);this.iconCollisionBox=new sj(qk,dj.members,Dj);for(var u=0;u<this.symbolInstances.length;u++){var E=this.symbolInstances.get(u);this.addDebugCollisionBoxes(E.textBoxStartIndex,E.textBoxEndIndex,E,!0);this.addDebugCollisionBoxes(E.verticalTextBoxStartIndex,E.verticalTextBoxEndIndex,E,!0);this.addDebugCollisionBoxes(E.iconBoxStartIndex,
E.iconBoxEndIndex,E,!1);this.addDebugCollisionBoxes(E.verticalIconBoxStartIndex,E.verticalIconBoxEndIndex,E,!1)}};Yf.prototype._deserializeCollisionBoxesForSymbol=function(u,E,P,fa,pa,wa,Ea,Va,Za){for(var ib={};E<P;){E=u.get(E);ib.textBox={x1:E.x1,y1:E.y1,x2:E.x2,y2:E.y2,anchorPointX:E.anchorPointX,anchorPointY:E.anchorPointY};ib.textFeatureIndex=E.featureIndex;break}for(;fa<pa;){fa=u.get(fa);ib.verticalTextBox={x1:fa.x1,y1:fa.y1,x2:fa.x2,y2:fa.y2,anchorPointX:fa.anchorPointX,anchorPointY:fa.anchorPointY};
ib.verticalTextFeatureIndex=fa.featureIndex;break}for(;wa<Ea;){wa=u.get(wa);ib.iconBox={x1:wa.x1,y1:wa.y1,x2:wa.x2,y2:wa.y2,anchorPointX:wa.anchorPointX,anchorPointY:wa.anchorPointY};ib.iconFeatureIndex=wa.featureIndex;break}for(;Va<Za;){u=u.get(Va);ib.verticalIconBox={x1:u.x1,y1:u.y1,x2:u.x2,y2:u.y2,anchorPointX:u.anchorPointX,anchorPointY:u.anchorPointY};ib.verticalIconFeatureIndex=u.featureIndex;break}return ib};Yf.prototype.deserializeCollisionBoxes=function(u){this.collisionArrays=[];for(var E=
0;E<this.symbolInstances.length;E++){var P=this.symbolInstances.get(E);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(u,P.textBoxStartIndex,P.textBoxEndIndex,P.verticalTextBoxStartIndex,P.verticalTextBoxEndIndex,P.iconBoxStartIndex,P.iconBoxEndIndex,P.verticalIconBoxStartIndex,P.verticalIconBoxEndIndex))}};Yf.prototype.hasTextData=function(){return 0<this.text.segments.get().length};Yf.prototype.hasIconData=function(){return 0<this.icon.segments.get().length};Yf.prototype.hasDebugData=
function(){return this.textCollisionBox&&this.iconCollisionBox};Yf.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&0<this.textCollisionBox.segments.get().length};Yf.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&0<this.iconCollisionBox.segments.get().length};Yf.prototype.addIndicesForPlacedSymbol=function(u,E){var P=u.placedSymbolArray.get(E);E=P.vertexStartIndex+4*P.numGlyphs;for(P=P.vertexStartIndex;P<E;P+=4)u.indexArray.emplaceBack(P,P+1,P+2),
u.indexArray.emplaceBack(P+1,P+2,P+3)};Yf.prototype.getSortedSymbolIndexes=function(u){if(this.sortedAngle===u&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;var E=Math.sin(u);u=Math.cos(u);for(var P=[],fa=[],pa=[],wa=0;wa<this.symbolInstances.length;++wa){pa.push(wa);var Ea=this.symbolInstances.get(wa);P.push(Math.round(E*Ea.anchorX+u*Ea.anchorY)|0);fa.push(Ea.featureIndex)}pa.sort(function(Va,Za){return P[Va]-P[Za]||fa[Za]-fa[Va]});return pa};Yf.prototype.addToSortKeyRanges=
function(u,E){var P=this.sortKeyRanges[this.sortKeyRanges.length-1];P&&P.sortKey===E?P.symbolInstanceEnd=u+1:this.sortKeyRanges.push({sortKey:E,symbolInstanceStart:u,symbolInstanceEnd:u+1})};Yf.prototype.sortFeatures=function(u){var E=this;if(this.sortFeaturesByY&&this.sortedAngle!==u&&!(1<this.text.segments.get().length||1<this.icon.segments.get().length)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(u);this.sortedAngle=u;this.text.indexArray.clear();this.icon.indexArray.clear();this.featureSortOrder=
[];u=0;for(var P=this.symbolInstanceIndexes;u<P.length;u+=1){var fa=this.symbolInstances.get(P[u]);this.featureSortOrder.push(fa.featureIndex);[fa.rightJustifiedTextSymbolIndex,fa.centerJustifiedTextSymbolIndex,fa.leftJustifiedTextSymbolIndex].forEach(function(pa,wa,Ea){0<=pa&&Ea.indexOf(pa)===wa&&E.addIndicesForPlacedSymbol(E.text,pa)});0<=fa.verticalPlacedTextSymbolIndex&&this.addIndicesForPlacedSymbol(this.text,fa.verticalPlacedTextSymbolIndex);0<=fa.placedIconSymbolIndex&&this.addIndicesForPlacedSymbol(this.icon,
fa.placedIconSymbolIndex);0<=fa.verticalPlacedIconSymbolIndex&&this.addIndicesForPlacedSymbol(this.icon,fa.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray);this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}};Mb("SymbolBucket",Yf,{omit:["layers","collisionBoxArray","features","compareText"]});Yf.MAX_GLYPHS=65535;Yf.addDynamicAttributes=Ji;var wl=new Rh({"symbol-placement":new We(Fa.layout_symbol["symbol-placement"]),
"symbol-spacing":new We(Fa.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new We(Fa.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ff(Fa.layout_symbol["symbol-sort-key"]),"symbol-z-order":new We(Fa.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new We(Fa.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new We(Fa.layout_symbol["icon-ignore-placement"]),"icon-optional":new We(Fa.layout_symbol["icon-optional"]),"icon-rotation-alignment":new We(Fa.layout_symbol["icon-rotation-alignment"]),
"icon-size":new ff(Fa.layout_symbol["icon-size"]),"icon-text-fit":new We(Fa.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new We(Fa.layout_symbol["icon-text-fit-padding"]),"icon-image":new ff(Fa.layout_symbol["icon-image"]),"icon-rotate":new ff(Fa.layout_symbol["icon-rotate"]),"icon-padding":new We(Fa.layout_symbol["icon-padding"]),"icon-keep-upright":new We(Fa.layout_symbol["icon-keep-upright"]),"icon-offset":new ff(Fa.layout_symbol["icon-offset"]),"icon-anchor":new ff(Fa.layout_symbol["icon-anchor"]),
"icon-pitch-alignment":new We(Fa.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new We(Fa.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new We(Fa.layout_symbol["text-rotation-alignment"]),"text-field":new ff(Fa.layout_symbol["text-field"]),"text-font":new ff(Fa.layout_symbol["text-font"]),"text-size":new ff(Fa.layout_symbol["text-size"]),"text-max-width":new ff(Fa.layout_symbol["text-max-width"]),"text-line-height":new We(Fa.layout_symbol["text-line-height"]),"text-letter-spacing":new ff(Fa.layout_symbol["text-letter-spacing"]),
"text-justify":new ff(Fa.layout_symbol["text-justify"]),"text-radial-offset":new ff(Fa.layout_symbol["text-radial-offset"]),"text-variable-anchor":new We(Fa.layout_symbol["text-variable-anchor"]),"text-anchor":new ff(Fa.layout_symbol["text-anchor"]),"text-max-angle":new We(Fa.layout_symbol["text-max-angle"]),"text-writing-mode":new We(Fa.layout_symbol["text-writing-mode"]),"text-rotate":new ff(Fa.layout_symbol["text-rotate"]),"text-padding":new We(Fa.layout_symbol["text-padding"]),"text-keep-upright":new We(Fa.layout_symbol["text-keep-upright"]),
"text-transform":new ff(Fa.layout_symbol["text-transform"]),"text-offset":new ff(Fa.layout_symbol["text-offset"]),"text-allow-overlap":new We(Fa.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new We(Fa.layout_symbol["text-ignore-placement"]),"text-optional":new We(Fa.layout_symbol["text-optional"])}),cl={paint:new Rh({"icon-opacity":new ff(Fa.paint_symbol["icon-opacity"]),"icon-color":new ff(Fa.paint_symbol["icon-color"]),"icon-halo-color":new ff(Fa.paint_symbol["icon-halo-color"]),
"icon-halo-width":new ff(Fa.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ff(Fa.paint_symbol["icon-halo-blur"]),"icon-translate":new We(Fa.paint_symbol["icon-translate"]),"icon-translate-anchor":new We(Fa.paint_symbol["icon-translate-anchor"]),"text-opacity":new ff(Fa.paint_symbol["text-opacity"]),"text-color":new ff(Fa.paint_symbol["text-color"],{runtimeType:Tb,getOverride:function(u){return u.textColor},hasOverride:function(u){return!!u.textColor}}),"text-halo-color":new ff(Fa.paint_symbol["text-halo-color"]),
"text-halo-width":new ff(Fa.paint_symbol["text-halo-width"]),"text-halo-blur":new ff(Fa.paint_symbol["text-halo-blur"]),"text-translate":new We(Fa.paint_symbol["text-translate"]),"text-translate-anchor":new We(Fa.paint_symbol["text-translate-anchor"])}),layout:wl},Tj=function(u){this.type=u.property.overrides?u.property.overrides.runtimeType:hb;this.defaultValue=u};Tj.prototype.evaluate=function(u){if(u.formattedSection){var E=this.defaultValue.property.overrides;if(E&&E.hasOverride(u.formattedSection))return E.getOverride(u.formattedSection)}return u.feature&&
u.featureState?this.defaultValue.evaluate(u.feature,u.featureState):this.defaultValue.property.specification.default};Tj.prototype.eachChild=function(u){this.defaultValue.isConstant()||u(this.defaultValue.value._styleExpression.expression)};Tj.prototype.outputDefined=function(){return!1};Tj.prototype.serialize=function(){return null};Mb("FormatSectionOverride",Tj,{omit:["defaultValue"]});var xl=function(u){function E(P){u.call(this,P,cl)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);
E.prototype.constructor=E;E.prototype.recalculate=function(P,fa){u.prototype.recalculate.call(this,P,fa);"auto"===this.layout.get("icon-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport");"auto"===this.layout.get("text-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]=
"viewport");"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment"));"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));if("point"===this.layout.get("symbol-placement"))if(P=this.layout.get("text-writing-mode")){fa=[];for(var pa=0;pa<P.length;pa+=1){var wa=P[pa];0>fa.indexOf(wa)&&fa.push(wa)}this.layout._values["text-writing-mode"]=
fa}else this.layout._values["text-writing-mode"]=["horizontal"];this._setPaintOverrides()};E.prototype.getValueAndResolveTokens=function(P,fa,pa,wa){pa=this.layout.get(P).evaluate(fa,{},pa,wa);P=this._unevaluatedLayout._values[P];return P.isDataDriven()||Vb(P.value)||!pa?pa:jj(fa.properties,pa)};E.prototype.createBucket=function(P){return new Yf(P)};E.prototype.queryRadius=function(){return 0};E.prototype.queryIntersectsFeature=function(){return!1};E.prototype._setPaintOverrides=function(){for(var P=
0,fa=cl.paint.overridableProperties;P<fa.length;P+=1){var pa=fa[P];if(E.hasPaintOverride(this.layout,pa)){var wa=this.paint.get(pa),Ea=new Tj(wa);Ea=new tj(Ea,wa.property.specification);Ea="constant"===wa.value.kind||"source"===wa.value.kind?new uj("source",Ea):new Mi("composite",Ea,wa.value.zoomStops,wa.value._interpolationType);this.paint._values[pa]=new Qh(wa.property,Ea,wa.parameters)}}};E.prototype._handleOverridablePaintPropertyUpdate=function(P,fa,pa){return!this.layout||fa.isDataDriven()||
pa.isDataDriven()?!1:E.hasPaintOverride(this.layout,P)};E.hasPaintOverride=function(P,fa){P=P.get("text-field");var pa=cl.paint.properties[fa],wa=!1,Ea=function(Za){for(var ib=0;ib<Za.length;ib+=1){var Hb=Za[ib];if(pa.overrides&&pa.overrides.hasOverride(Hb)){wa=!0;break}}};if("constant"===P.value.kind&&P.value.value instanceof zd)Ea(P.value.value.sections);else if("source"===P.value.kind){var Va=function(Za){wa||(Za instanceof ce&&jb(Za.value)===Oc?Ea(Za.value.sections):Za instanceof Pd?Ea(Za.sections):
Za.eachChild(Va))};fa=P.value;fa._styleExpression&&Va(fa._styleExpression.expression)}return wa};return E}(Ti),Uh={paint:new Rh({"background-color":new We(Fa.paint_background["background-color"]),"background-pattern":new Cj(Fa.paint_background["background-pattern"]),"background-opacity":new We(Fa.paint_background["background-opacity"])})},dl=function(u){function E(P){u.call(this,P,Uh)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);return E.prototype.constructor=E}(Ti),yl={paint:new Rh({"raster-opacity":new We(Fa.paint_raster["raster-opacity"]),
"raster-hue-rotate":new We(Fa.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new We(Fa.paint_raster["raster-brightness-min"]),"raster-brightness-max":new We(Fa.paint_raster["raster-brightness-max"]),"raster-saturation":new We(Fa.paint_raster["raster-saturation"]),"raster-contrast":new We(Fa.paint_raster["raster-contrast"]),"raster-resampling":new We(Fa.paint_raster["raster-resampling"]),"raster-fade-duration":new We(Fa.paint_raster["raster-fade-duration"])})},ml=function(u){function E(P){u.call(this,
P,yl)}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);return E.prototype.constructor=E}(Ti),zl=function(u){function E(P){u.call(this,P,{});this.implementation=P}u&&(E.__proto__=u);E.prototype=Object.create(u&&u.prototype);E.prototype.constructor=E;E.prototype.is3D=function(){return"3d"===this.implementation.renderingMode};E.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender};E.prototype.recalculate=function(){};E.prototype.updateTransitions=function(){};
E.prototype.hasTransition=function(){};E.prototype.serialize=function(){};E.prototype.onAdd=function(P){if(this.implementation.onAdd)this.implementation.onAdd(P,P.painter.context.gl)};E.prototype.onRemove=function(P){if(this.implementation.onRemove)this.implementation.onRemove(P,P.painter.context.gl)};return E}(Ti),Al={circle:tl,heatmap:Yk,hillshade:vl,fill:Sh,"fill-extrusion":xk,line:Gi,symbol:xl,background:dl,raster:ml},ik=self.HTMLImageElement,th=self.HTMLCanvasElement,nl=self.HTMLVideoElement,
Ze=self.ImageData,jk=self.ImageBitmap,Mg=function(u,E,P,fa){this.context=u;this.format=P;this.texture=u.gl.createTexture();this.update(E,fa)};Mg.prototype.update=function(u,E,P){var fa=u.width,pa=u.height,wa=(!this.size||this.size[0]!==fa||this.size[1]!==pa)&&!P,Ea=this.context,Va=Ea.gl;this.useMipmap=!(!E||!E.useMipmap);Va.bindTexture(Va.TEXTURE_2D,this.texture);Ea.pixelStoreUnpackFlipY.set(!1);Ea.pixelStoreUnpack.set(1);Ea.pixelStoreUnpackPremultiplyAlpha.set(this.format===Va.RGBA&&(!E||!1!==E.premultiply));
wa?(this.size=[fa,pa],u instanceof ik||u instanceof th||u instanceof nl||u instanceof Ze||jk&&u instanceof jk?Va.texImage2D(Va.TEXTURE_2D,0,this.format,this.format,Va.UNSIGNED_BYTE,u):Va.texImage2D(Va.TEXTURE_2D,0,this.format,fa,pa,0,this.format,Va.UNSIGNED_BYTE,u.data)):(P=P||{x:0,y:0},E=P.x,P=P.y,u instanceof ik||u instanceof th||u instanceof nl||u instanceof Ze||jk&&u instanceof jk?Va.texSubImage2D(Va.TEXTURE_2D,0,E,P,Va.RGBA,Va.UNSIGNED_BYTE,u):Va.texSubImage2D(Va.TEXTURE_2D,0,E,P,fa,pa,Va.RGBA,
Va.UNSIGNED_BYTE,u.data));this.useMipmap&&this.isSizePowerOfTwo()&&Va.generateMipmap(Va.TEXTURE_2D)};Mg.prototype.bind=function(u,E,P){var fa=this.context.gl;fa.bindTexture(fa.TEXTURE_2D,this.texture);P!==fa.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(P=fa.LINEAR);u!==this.filter&&(fa.texParameteri(fa.TEXTURE_2D,fa.TEXTURE_MAG_FILTER,u),fa.texParameteri(fa.TEXTURE_2D,fa.TEXTURE_MIN_FILTER,P||u),this.filter=u);E!==this.wrap&&(fa.texParameteri(fa.TEXTURE_2D,fa.TEXTURE_WRAP_S,E),fa.texParameteri(fa.TEXTURE_2D,
fa.TEXTURE_WRAP_T,E),this.wrap=E)};Mg.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&0===Math.log(this.size[0])/Math.LN2%1};Mg.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture);this.texture=null};var bi=function(u){var E=this;this._callback=u;this._triggered=!1;"undefined"!==typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){E._triggered=!1;E._callback()})};bi.prototype.trigger=function(){var u=this;this._triggered||
(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){u._triggered=!1;u._callback()},0))};bi.prototype.remove=function(){delete this._channel;this._callback=function(){}};var Uj=function(u,E,P){this.target=u;this.parent=E;this.mapId=P;this.callbacks={};this.tasks={};this.taskQueue=[];this.cancelCallbacks={};w(["receive","process"],this);this.invoker=new bi(this.process);this.target.addEventListener("message",this.receive,!1);this.globalScope=v()?u:self};Uj.prototype.send=
function(u,E,P,fa,pa){var wa=this;void 0===pa&&(pa=!1);var Ea=Math.round(1E18*Math.random()).toString(36).substring(0,10);P&&(this.callbacks[Ea]=P);var Va=F(this.globalScope)?void 0:[];this.target.postMessage({id:Ea,type:u,hasCallback:!!P,targetMapId:fa,mustQueue:pa,sourceMapId:this.mapId,data:Mc(E,Va)},Va);return{cancel:function(){P&&delete wa.callbacks[Ea];wa.target.postMessage({id:Ea,type:"\x3ccancel\x3e",targetMapId:fa,sourceMapId:wa.mapId})}}};Uj.prototype.receive=function(u){var E=u.data;!(u=
E.id)||E.targetMapId&&this.mapId!==E.targetMapId||("\x3ccancel\x3e"===E.type?(delete this.tasks[u],E=this.cancelCallbacks[u],delete this.cancelCallbacks[u],E&&E()):v()||E.mustQueue?(this.tasks[u]=E,this.taskQueue.push(u),this.invoker.trigger()):this.processTask(u,E))};Uj.prototype.process=function(){if(this.taskQueue.length){var u=this.taskQueue.shift(),E=this.tasks[u];delete this.tasks[u];this.taskQueue.length&&this.invoker.trigger();E&&this.processTask(u,E)}};Uj.prototype.processTask=function(u,
E){var P=this;if("\x3cresponse\x3e"===E.type){var fa=this.callbacks[u];delete this.callbacks[u];fa&&(E.error?fa(Hd(E.error)):fa(null,Hd(E.data)))}else{var pa=!1,wa=F(this.globalScope)?void 0:[];fa=E.hasCallback?function(Za,ib){pa=!0;delete P.cancelCallbacks[u];P.target.postMessage({id:u,type:"\x3cresponse\x3e",sourceMapId:P.mapId,error:Za?Mc(Za):null,data:Mc(ib,wa)},wa)}:function(Za){pa=!0};var Ea=null,Va=Hd(E.data);this.parent[E.type]?Ea=this.parent[E.type](E.sourceMapId,Va,fa):this.parent.getWorkerSource?
(Ea=E.type.split("."),Ea=this.parent.getWorkerSource(E.sourceMapId,Ea[0],Va.source)[Ea[1]](Va,fa)):fa(Error("Could not find function "+E.type));!pa&&Ea&&Ea.cancel&&(this.cancelCallbacks[u]=Ea.cancel)}};Uj.prototype.remove=function(){this.invoker.remove();this.target.removeEventListener("message",this.receive,!1)};var Cg=function(u,E){u&&(E?this.setSouthWest(u).setNorthEast(E):4===u.length?this.setSouthWest([u[0],u[1]]).setNorthEast([u[2],u[3]]):this.setSouthWest(u[0]).setNorthEast(u[1]))};Cg.prototype.setNorthEast=
function(u){this._ne=u instanceof jg?new jg(u.lng,u.lat):jg.convert(u);return this};Cg.prototype.setSouthWest=function(u){this._sw=u instanceof jg?new jg(u.lng,u.lat):jg.convert(u);return this};Cg.prototype.extend=function(u){var E=this._sw,P=this._ne;if(u instanceof jg)var fa=u;else if(u instanceof Cg){if(fa=u._sw,u=u._ne,!fa||!u)return this}else return Array.isArray(u)?4===u.length||u.every(Array.isArray)?this.extend(Cg.convert(u)):this.extend(jg.convert(u)):this;E||P?(E.lng=Math.min(fa.lng,E.lng),
E.lat=Math.min(fa.lat,E.lat),P.lng=Math.max(u.lng,P.lng),P.lat=Math.max(u.lat,P.lat)):(this._sw=new jg(fa.lng,fa.lat),this._ne=new jg(u.lng,u.lat));return this};Cg.prototype.getCenter=function(){return new jg((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)};Cg.prototype.getSouthWest=function(){return this._sw};Cg.prototype.getNorthEast=function(){return this._ne};Cg.prototype.getNorthWest=function(){return new jg(this.getWest(),this.getNorth())};Cg.prototype.getSouthEast=function(){return new jg(this.getEast(),
this.getSouth())};Cg.prototype.getWest=function(){return this._sw.lng};Cg.prototype.getSouth=function(){return this._sw.lat};Cg.prototype.getEast=function(){return this._ne.lng};Cg.prototype.getNorth=function(){return this._ne.lat};Cg.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]};Cg.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"};Cg.prototype.isEmpty=function(){return!(this._sw&&this._ne)};Cg.prototype.contains=function(u){var E=
jg.convert(u);u=E.lng;E=E.lat;E=this._sw.lat<=E&&E<=this._ne.lat;var P=this._sw.lng<=u&&u<=this._ne.lng;this._sw.lng>this._ne.lng&&(P=this._sw.lng>=u&&u>=this._ne.lng);return E&&P};Cg.convert=function(u){return!u||u instanceof Cg?u:new Cg(u)};var jg=function(u,E){if(isNaN(u)||isNaN(E))throw Error("Invalid LngLat object: ("+u+", "+E+")");this.lng=+u;this.lat=+E;if(90<this.lat||-90>this.lat)throw Error("Invalid LngLat latitude value: must be between -90 and 90");};jg.prototype.wrap=function(){return new jg(e(this.lng,
-180,180),this.lat)};jg.prototype.toArray=function(){return[this.lng,this.lat]};jg.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"};jg.prototype.distanceTo=function(u){var E=Math.PI/180,P=this.lat*E,fa=u.lat*E;return 6371008.8*Math.acos(Math.min(Math.sin(P)*Math.sin(fa)+Math.cos(P)*Math.cos(fa)*Math.cos((u.lng-this.lng)*E),1))};jg.prototype.toBounds=function(u){void 0===u&&(u=0);u=360*u/40075017;var E=u/Math.cos(Math.PI/180*this.lat);return new Cg(new jg(this.lng-E,this.lat-
u),new jg(this.lng+E,this.lat+u))};jg.convert=function(u){if(u instanceof jg)return u;if(Array.isArray(u)&&(2===u.length||3===u.length))return new jg(Number(u[0]),Number(u[1]));if(!Array.isArray(u)&&"object"===typeof u&&null!==u)return new jg(Number("lng"in u?u.lng:u.lon),Number(u.lat));throw Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: \x3clng\x3e, lat: \x3clat\x3e}, an object {lon: \x3clng\x3e, lat: \x3clat\x3e}, or an array of [\x3clng\x3e, \x3clat\x3e]");
};var Kh=1.27420176E7*Math.PI,Qf=function(u,E,P){void 0===P&&(P=0);this.x=+u;this.y=+E;this.z=+P};Qf.fromLngLat=function(u,E){void 0===E&&(E=0);u=jg.convert(u);return new Qf(kg(u.lng),ci(u.lat),E/(Kh*Math.cos(u.lat*Math.PI/180)))};Qf.prototype.toLngLat=function(){return new jg(360*this.x-180,Rg(this.y))};Qf.prototype.toAltitude=function(){return this.z*Kh*Math.cos(Rg(this.y)*Math.PI/180)};Qf.prototype.meterInMercatorCoordinateUnits=function(){return 1/Kh*(1/Math.cos(Rg(this.y)*Math.PI/180))};var Jg=
function(u,E,P){this.z=u;this.x=E;this.y=P;this.key=di(0,u,u,E,P)};Jg.prototype.equals=function(u){return this.z===u.z&&this.x===u.x&&this.y===u.y};Jg.prototype.url=function(u,E){var P=this.x,fa=this.y,pa=this.z;fa=Math.pow(2,pa)-fa-1;var wa=yh(256*P,256*fa,pa);P=yh(256*(P+1),256*(fa+1),pa);wa=wa[0]+","+wa[1]+","+P[0]+","+P[1];P="";for(pa=this.z;0<pa;pa--)fa=1<<pa-1,P+=(this.x&fa?1:0)+(this.y&fa?2:0);return u[(this.x+this.y)%u.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",
String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===E?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",P).replace("{bbox-epsg-3857}",wa)};Jg.prototype.getTilePoint=function(u){var E=Math.pow(2,this.z);return new Ue(8192*(u.x*E-this.x),8192*(u.y*E-this.y))};Jg.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Wg=function(u,E){this.wrap=u;this.canonical=E;this.key=di(u,E.z,E.z,E.x,E.y)},Rf=function(u,E,P,fa,pa){this.overscaledZ=u;this.wrap=E;this.canonical=
new Jg(P,+fa,+pa);this.key=di(E,u,P,fa,pa)};Rf.prototype.equals=function(u){return this.overscaledZ===u.overscaledZ&&this.wrap===u.wrap&&this.canonical.equals(u.canonical)};Rf.prototype.scaledTo=function(u){var E=this.canonical.z-u;return u>this.canonical.z?new Rf(u,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Rf(u,this.wrap,u,this.canonical.x>>E,this.canonical.y>>E)};Rf.prototype.calculateScaledKey=function(u,E){var P=this.canonical.z-u;return u>this.canonical.z?di(this.wrap*
+E,u,this.canonical.z,this.canonical.x,this.canonical.y):di(this.wrap*+E,u,u,this.canonical.x>>P,this.canonical.y>>P)};Rf.prototype.isChildOf=function(u){if(u.wrap!==this.wrap)return!1;var E=this.canonical.z-u.canonical.z;return 0===u.overscaledZ||u.overscaledZ<this.overscaledZ&&u.canonical.x===this.canonical.x>>E&&u.canonical.y===this.canonical.y>>E};Rf.prototype.children=function(u){if(this.overscaledZ>=u)return[new Rf(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];
u=this.canonical.z+1;var E=2*this.canonical.x,P=2*this.canonical.y;return[new Rf(u,this.wrap,u,E,P),new Rf(u,this.wrap,u,E+1,P),new Rf(u,this.wrap,u,E,P+1),new Rf(u,this.wrap,u,E+1,P+1)]};Rf.prototype.isLessThan=function(u){return this.wrap<u.wrap?!0:this.wrap>u.wrap?!1:this.overscaledZ<u.overscaledZ?!0:this.overscaledZ>u.overscaledZ?!1:this.canonical.x<u.canonical.x?!0:this.canonical.x>u.canonical.x?!1:this.canonical.y<u.canonical.y?!0:!1};Rf.prototype.wrapped=function(){return new Rf(this.overscaledZ,
0,this.canonical.z,this.canonical.x,this.canonical.y)};Rf.prototype.unwrapTo=function(u){return new Rf(this.overscaledZ,u,this.canonical.z,this.canonical.x,this.canonical.y)};Rf.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)};Rf.prototype.toUnwrapped=function(){return new Wg(this.wrap,this.canonical)};Rf.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y};Rf.prototype.getTilePoint=function(u){return this.canonical.getTilePoint(new Qf(u.x-
this.wrap,u.y))};Mb("CanonicalTileID",Jg);Mb("OverscaledTileID",Rf,{omit:["posMatrix"]});var Xg=function(u,E,P){this.uid=u;if(E.height!==E.width)throw new RangeError("DEM tiles must be square");if(P&&"mapbox"!==P&&"terrarium"!==P)return D('"'+P+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=E.height;u=this.dim=E.height-2;this.data=new Uint32Array(E.data.buffer);this.encoding=P||"mapbox";for(E=0;E<u;E++)this.data[this._idx(-1,E)]=this.data[this._idx(0,
E)],this.data[this._idx(u,E)]=this.data[this._idx(u-1,E)],this.data[this._idx(E,-1)]=this.data[this._idx(E,0)],this.data[this._idx(E,u)]=this.data[this._idx(E,u-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)];this.data[this._idx(u,-1)]=this.data[this._idx(u-1,0)];this.data[this._idx(-1,u)]=this.data[this._idx(0,u-1)];this.data[this._idx(u,u)]=this.data[this._idx(u-1,u-1)]};Xg.prototype.get=function(u,E){var P=new Uint8Array(this.data.buffer);u=4*this._idx(u,E);return("terrarium"===this.encoding?
this._unpackTerrarium:this._unpackMapbox)(P[u],P[u+1],P[u+2])};Xg.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1E4]};Xg.prototype._idx=function(u,E){if(-1>u||u>=this.dim+1||-1>E||E>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(E+1)*this.stride+(u+1)};Xg.prototype._unpackMapbox=function(u,E,P){return(65536*u+256*E+P)/10-1E4};Xg.prototype._unpackTerrarium=function(u,E,P){return 256*u+E+P/256-32768};
Xg.prototype.getPixels=function(){return new dh({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))};Xg.prototype.backfillBorder=function(u,E,P){if(this.dim!==u.dim)throw Error("dem dimension mismatch");var fa=E*this.dim,pa=E*this.dim+this.dim,wa=P*this.dim,Ea=P*this.dim+this.dim;switch(E){case -1:fa=pa-1;break;case 1:pa=fa+1}switch(P){case -1:wa=Ea-1;break;case 1:Ea=wa+1}E=-E*this.dim;for(P=-P*this.dim;wa<Ea;wa++)for(var Va=fa;Va<pa;Va++)this.data[this._idx(Va,wa)]=u.data[this._idx(Va+
E,wa+P)]};Mb("DEMData",Xg);var gj=function(u){this._stringToNumber={};this._numberToString=[];for(var E=0;E<u.length;E++){var P=u[E];this._stringToNumber[P]=E;this._numberToString[E]=P}};gj.prototype.encode=function(u){return this._stringToNumber[u]};gj.prototype.decode=function(u){return this._numberToString[u]};var Qg=function(u,E,P,fa,pa){this.type="Feature";this._vectorTileFeature=u;u._z=E;u._x=P;u._y=fa;this.properties=u.properties;this.id=pa},Jj={geometry:{configurable:!0}};Jj.geometry.get=
function(){void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry);return this._geometry};Jj.geometry.set=function(u){this._geometry=u};Qg.prototype.toJSON=function(){var u={geometry:this.geometry},E;for(E in this)"_geometry"!==E&&"_vectorTileFeature"!==E&&(u[E]=this[E]);return u};Object.defineProperties(Qg.prototype,Jj);var oi=function(){this.state={};this.stateChanges={};this.deletedStates=
{}};oi.prototype.updateState=function(u,E,P){E=String(E);this.stateChanges[u]=this.stateChanges[u]||{};this.stateChanges[u][E]=this.stateChanges[u][E]||{};f(this.stateChanges[u][E],P);if(null===this.deletedStates[u]){this.deletedStates[u]={};for(var fa in this.state[u])fa!==E&&(this.deletedStates[u][fa]=null)}else if(this.deletedStates[u]&&null===this.deletedStates[u][E]){this.deletedStates[u][E]={};for(var pa in this.state[u][E])P[pa]||(this.deletedStates[u][E][pa]=null)}else for(var wa in P)this.deletedStates[u]&&
this.deletedStates[u][E]&&null===this.deletedStates[u][E][wa]&&delete this.deletedStates[u][E][wa]};oi.prototype.removeFeatureState=function(u,E,P){if(null!==this.deletedStates[u]){var fa=String(E);this.deletedStates[u]=this.deletedStates[u]||{};if(P&&void 0!==E)null!==this.deletedStates[u][fa]&&(this.deletedStates[u][fa]=this.deletedStates[u][fa]||{},this.deletedStates[u][fa][P]=null);else if(void 0!==E)if(this.stateChanges[u]&&this.stateChanges[u][fa])for(P in this.deletedStates[u][fa]={},this.stateChanges[u][fa])this.deletedStates[u][fa][P]=
null;else this.deletedStates[u][fa]=null;else this.deletedStates[u]=null}};oi.prototype.getState=function(u,E){var P=String(E);P=f({},(this.state[u]||{})[P],(this.stateChanges[u]||{})[P]);if(null===this.deletedStates[u])return{};if(this.deletedStates[u]){u=this.deletedStates[u][E];if(null===u)return{};for(var fa in u)delete P[fa]}return P};oi.prototype.initializeTileState=function(u,E){u.setFeatureState(this.state,E)};oi.prototype.coalesceChanges=function(u,E){var P={};for(Ea in this.stateChanges){this.state[Ea]=
this.state[Ea]||{};var fa={},pa;for(pa in this.stateChanges[Ea])this.state[Ea][pa]||(this.state[Ea][pa]={}),f(this.state[Ea][pa],this.stateChanges[Ea][pa]),fa[pa]=this.state[Ea][pa];P[Ea]=fa}for(var wa in this.deletedStates){this.state[wa]=this.state[wa]||{};var Ea={};if(null===this.deletedStates[wa])for(var Va in this.state[wa])Ea[Va]={},this.state[wa][Va]={};else for(var Za in this.deletedStates[wa]){if(null===this.deletedStates[wa][Za])this.state[wa][Za]={};else for(fa=0,pa=Object.keys(this.deletedStates[wa][Za]);fa<
pa.length;fa+=1)delete this.state[wa][Za][pa[fa]];Ea[Za]=this.state[wa][Za]}P[wa]=P[wa]||{};f(P[wa],Ea)}this.stateChanges={};this.deletedStates={};if(0!==Object.keys(P).length)for(var ib in u)u[ib].setFeatureState(P,E)};var pi=function(u,E){this.tileID=u;this.x=u.canonical.x;this.y=u.canonical.y;this.z=u.canonical.z;this.grid=new Gd(8192,16,0);this.grid3D=new Gd(8192,16,0);this.featureIndexArray=new Sk;this.promoteId=E};pi.prototype.insert=function(u,E,P,fa,pa,wa){u=this.featureIndexArray.length;
this.featureIndexArray.emplaceBack(P,fa,pa);P=wa?this.grid3D:this.grid;for(fa=0;fa<E.length;fa++){pa=E[fa];wa=[Infinity,Infinity,-Infinity,-Infinity];for(var Ea=0;Ea<pa.length;Ea++){var Va=pa[Ea];wa[0]=Math.min(wa[0],Va.x);wa[1]=Math.min(wa[1],Va.y);wa[2]=Math.max(wa[2],Va.x);wa[3]=Math.max(wa[3],Va.y)}8192>wa[0]&&8192>wa[1]&&0<=wa[2]&&0<=wa[3]&&P.insert(u,wa[0],wa[1],wa[2],wa[3])}};pi.prototype.loadVTLayers=function(){this.vtLayers||(this.vtLayers=(new cj.VectorTile(new Je(this.rawTileData))).layers,
this.sourceLayerCoder=new gj(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]));return this.vtLayers};pi.prototype.query=function(u,E,P,fa){var pa=this;this.loadVTLayers();var wa=u.params||{},Ea=8192/u.tileSize/u.scale,Va=Zc(wa.filter),Za=u.queryGeometry,ib=u.queryPadding*Ea,Hb=Ph(Za),Sb=this.grid.query(Hb.minX-ib,Hb.minY-ib,Hb.maxX+ib,Hb.maxY+ib),ic=Ph(u.cameraQueryGeometry);Hb=0;for(ic=this.grid3D.query(ic.minX-ib,ic.minY-ib,ic.maxX+ib,ic.maxY+ib,function(Hc,ud,Zd,Ad){a:{var Jd=
u.cameraQueryGeometry;Hc-=ib;ud-=ib;Zd+=ib;Ad+=ib;for(var be=0;be<Jd.length;be+=1){var ke=Jd[be];if(Hc<=ke.x&&ud<=ke.y&&Zd>=ke.x&&Ad>=ke.y){Jd=!0;break a}}Hc=[new Ue(Hc,ud),new Ue(Hc,Ad),new Ue(Zd,Ad),new Ue(Zd,ud)];if(2<Jd.length)for(ud=0;ud<Hc.length;ud+=1)if(Oe(Jd,Hc[ud])){Jd=!0;break a}for(ud=0;ud<Jd.length-1;ud++){Ad=Jd[ud];Zd=Jd[ud+1];be=Hc;ke=be[0];var Le=be[2];Ad.x<ke.x&&Zd.x<ke.x||Ad.x>Le.x&&Zd.x>Le.x||Ad.y<ke.y&&Zd.y<ke.y||Ad.y>Le.y&&Zd.y>Le.y?Ad=!1:(ke=C(Ad,Zd,be[0]),Ad=ke!==C(Ad,Zd,be[1])||
ke!==C(Ad,Zd,be[2])||ke!==C(Ad,Zd,be[3]));if(Ad){Jd=!0;break a}}Jd=!1}return Jd});Hb<ic.length;Hb+=1)Sb.push(ic[Hb]);Sb.sort(ui);var Dc={},wc;Hb=function(Hc){Hc=Sb[Hc];if(Hc!==wc){wc=Hc;Hc=pa.featureIndexArray.get(Hc);var ud=null;pa.loadMatchingFeature(Dc,Hc.bucketIndex,Hc.sourceLayerIndex,Hc.featureIndex,Va,wa.layers,wa.availableImages,E,P,fa,function(Zd,Ad,Jd){ud||(ud=yc(Zd));return Ad.queryIntersectsFeature(Za,Zd,Jd,ud,pa.z,u.transform,Ea,u.pixelPosMatrix)})}};for(ic=0;ic<Sb.length;ic++)Hb(ic);
return Dc};pi.prototype.loadMatchingFeature=function(u,E,P,fa,pa,wa,Ea,Va,Za,ib,Hb){E=this.bucketLayerIDs[E];var Sb;if(Sb=wa){a:{for(Sb=0;Sb<wa.length;Sb++)if(0<=E.indexOf(wa[Sb])){Sb=!0;break a}Sb=!1}Sb=!Sb}if(!Sb&&(Sb=this.sourceLayerCoder.decode(P),P=this.vtLayers[Sb].feature(fa),pa.filter(new ig(this.tileID.overscaledZ),P)))for(pa=this.getId(P,Sb),Sb=0;Sb<E.length;Sb++){var ic=E[Sb];if(!(wa&&0>wa.indexOf(ic))){var Dc=Va[ic];if(Dc){var wc={};void 0!==pa&&ib&&(wc=ib.getState(Dc.sourceLayer||"_geojsonTileLayer",
pa));var Hc=Za[ic];Hc.paint=ri(Hc.paint,Dc.paint,P,wc,Ea);Hc.layout=ri(Hc.layout,Dc.layout,P,wc,Ea);if(Dc=!Hb||Hb(P,Dc,wc))wc=new Qg(P,this.z,this.x,this.y,pa),wc.layer=Hc,Hc=u[ic],void 0===Hc&&(Hc=u[ic]=[]),Hc.push({featureIndex:fa,feature:wc,intersectionZ:Dc})}}}};pi.prototype.lookupSymbolFeatures=function(u,E,P,fa,pa,wa,Ea,Va){var Za={};this.loadVTLayers();pa=Zc(pa);for(var ib=0;ib<u.length;ib+=1)this.loadMatchingFeature(Za,P,fa,u[ib],pa,wa,Ea,Va,E);return Za};pi.prototype.hasLayer=function(u){for(var E=
0,P=this.bucketLayerIDs;E<P.length;E+=1)for(var fa=0,pa=P[E];fa<pa.length;fa+=1)if(u===pa[fa])return!0;return!1};pi.prototype.getId=function(u,E){var P=u.id;this.promoteId&&(P=u.properties["string"===typeof this.promoteId?this.promoteId:this.promoteId[E]],"boolean"===typeof P&&(P=Number(P)));return P};Mb("FeatureIndex",pi,{omit:["rawTileData","sourceLayerCoder"]});var Ng=function(u,E){this.tileID=u;this.uid=Sg++;this.uses=0;this.tileSize=E;this.buckets={};this.expirationTime=null;this.queryPadding=
0;this.hasRTLText=this.hasSymbolBuckets=!1;this.dependencies={};this.expiredRequestCount=0;this.state="loading"};Ng.prototype.registerFadeDuration=function(u){u+=this.timeAdded;u<va.now()||this.fadeEndTime&&u<this.fadeEndTime||(this.fadeEndTime=u)};Ng.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state};Ng.prototype.loadVectorData=function(u,E,P){this.hasData()&&this.unloadVectorData();this.state="loaded";if(u){u.featureIndex&&(this.latestFeatureIndex=
u.featureIndex,u.rawTileData?(this.latestRawTileData=u.rawTileData,this.latestFeatureIndex.rawTileData=u.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData));this.collisionBoxArray=u.collisionBoxArray;this.buckets=Mh(u.buckets,E.style);this.hasSymbolBuckets=!1;for(var fa in this.buckets){var pa=this.buckets[fa];if(pa instanceof Yf)if(this.hasSymbolBuckets=!0,P)pa.justReloaded=!0;else break}this.hasRTLText=!1;if(this.hasSymbolBuckets)for(var wa in this.buckets)if(P=
this.buckets[wa],P instanceof Yf&&P.hasRTLText){this.hasRTLText=!0;zh.isLoading()||zh.isLoaded()||"deferred"!==ch||zj();break}this.queryPadding=0;for(var Ea in this.buckets)wa=this.buckets[Ea],this.queryPadding=Math.max(this.queryPadding,E.style.getLayer(Ea).queryRadius(wa));u.imageAtlas&&(this.imageAtlas=u.imageAtlas);u.glyphAtlasImage&&(this.glyphAtlasImage=u.glyphAtlasImage)}else this.collisionBoxArray=new sk};Ng.prototype.unloadVectorData=function(){for(var u in this.buckets)this.buckets[u].destroy();
this.buckets={};this.imageAtlasTexture&&this.imageAtlasTexture.destroy();this.imageAtlas&&(this.imageAtlas=null);this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy();this.latestFeatureIndex=null;this.state="unloaded"};Ng.prototype.getBucket=function(u){return this.buckets[u.id]};Ng.prototype.upload=function(u){for(var E in this.buckets){var P=this.buckets[E];P.uploadPending()&&P.upload(u)}E=u.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Mg(u,this.imageAtlas.image,
E.RGBA),this.imageAtlas.uploaded=!0);this.glyphAtlasImage&&(this.glyphAtlasTexture=new Mg(u,this.glyphAtlasImage,E.ALPHA),this.glyphAtlasImage=null)};Ng.prototype.prepare=function(u){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(u,this.imageAtlasTexture)};Ng.prototype.queryRenderedFeatures=function(u,E,P,fa,pa,wa,Ea,Va,Za,ib){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:fa,cameraQueryGeometry:pa,scale:wa,tileSize:this.tileSize,
pixelPosMatrix:ib,transform:Va,params:Ea,queryPadding:this.queryPadding*Za},u,E,P):{}};Ng.prototype.querySourceFeatures=function(u,E){var P=this.latestFeatureIndex;if(P&&P.rawTileData){var fa=P.loadVTLayers(),pa=E?E.sourceLayer:"";if(fa=fa._geojsonTileLayer||fa[pa]){E=Zc(E&&E.filter);var wa=this.tileID.canonical,Ea=wa.z,Va=wa.x;wa=wa.y;for(var Za={z:Ea,x:Va,y:wa},ib=0;ib<fa.length;ib++){var Hb=fa.feature(ib);if(E.filter(new ig(this.tileID.overscaledZ),Hb)){var Sb=P.getId(Hb,pa);Hb=new Qg(Hb,Ea,Va,
wa,Sb);Hb.tile=Za;u.push(Hb)}}}}};Ng.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state};Ng.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length};Ng.prototype.setExpiryData=function(u){var E=this.expirationTime;u.cacheControl?(u=y(u.cacheControl),u["max-age"]&&(this.expirationTime=Date.now()+1E3*u["max-age"])):u.expires&&(this.expirationTime=(new Date(u.expires)).getTime());if(this.expirationTime){u=
Date.now();var P=!1;this.expirationTime>u?P=!1:E?this.expirationTime<E?P=!0:(E=this.expirationTime-E)?this.expirationTime=u+Math.max(E,3E4):P=!0:P=!0;P?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}};Ng.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1E3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)};Ng.prototype.setFeatureState=function(u,E){if(this.latestFeatureIndex&&
this.latestFeatureIndex.rawTileData&&0!==Object.keys(u).length){var P=this.latestFeatureIndex.loadVTLayers(),fa;for(fa in this.buckets)if(E.style.hasLayer(fa)){var pa=this.buckets[fa],wa=pa.layers[0].sourceLayer||"_geojsonTileLayer",Ea=P[wa];wa=u[wa];Ea&&wa&&0!==Object.keys(wa).length&&(pa.update(wa,Ea,this.imageAtlas&&this.imageAtlas.patternPositions||{}),Ea=E&&E.style&&E.style.getLayer(fa))&&(this.queryPadding=Math.max(this.queryPadding,Ea.queryRadius(pa)))}}};Ng.prototype.holdingForFade=function(){return void 0!==
this.symbolFadeHoldUntil};Ng.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<va.now()};Ng.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0};Ng.prototype.setHoldDuration=function(u){this.symbolFadeHoldUntil=va.now()+u};Ng.prototype.setDependencies=function(u,E){for(var P={},fa=0;fa<E.length;fa+=1)P[E[fa]]=!0;this.dependencies[u]=P};Ng.prototype.hasDependency=function(u,E){for(var P=0;P<u.length;P+=1){var fa=this.dependencies[u[P]];
if(fa)for(var pa=0,wa=E;pa<wa.length;pa+=1)if(fa[wa[pa]])return!0}return!1};var qi=self.performance,Lh=function(u){this._marks={start:[u.url,"start"].join("#"),end:[u.url,"end"].join("#"),measure:u.url.toString()};qi.mark(this._marks.start)};Lh.prototype.finish=function(){qi.mark(this._marks.end);var u=qi.getEntriesByName(this._marks.measure);0===u.length&&(qi.measure(this._marks.measure,this._marks.start,this._marks.end),u=qi.getEntriesByName(this._marks.measure),qi.clearMarks(this._marks.start),
qi.clearMarks(this._marks.end),qi.clearMeasures(this._marks.measure));return u};a.Actor=Uj;a.AlphaImage=Ah;a.CanonicalTileID=Jg;a.CollisionBoxArray=sk;a.Color=pd;a.DEMData=Xg;a.DataConstantProperty=We;a.DictionaryCoder=gj;a.EXTENT=8192;a.ErrorEvent=ua;a.EvaluationParameters=ig;a.Event=da;a.Evented=Ba;a.FeatureIndex=pi;a.FillBucket=Ch;a.FillExtrusionBucket=Eh;a.ImageAtlas=fj;a.ImagePosition=ej;a.LineBucket=Ig;a.LngLat=jg;a.LngLatBounds=Cg;a.MercatorCoordinate=Qf;a.ONE_EM=24;a.OverscaledTileID=Rf;a.Point=
Ue;a.Point$1=Ue;a.Properties=Rh;a.Protobuf=Je;a.RGBAImage=dh;a.RequestManager=Jc;a.RequestPerformance=Lh;a.ResourceType=jf;a.SegmentVector=eh;a.SourceFeatureState=oi;a.StructArrayLayout1ui2=Ej;a.StructArrayLayout2f1f2i16=rk;a.StructArrayLayout2i4=bk;a.StructArrayLayout3ui6=nj;a.StructArrayLayout4i8=Ek;a.SymbolBucket=Yf;a.Texture=Mg;a.Tile=Ng;a.Transitionable=ii;a.Uniform1f=dk;a.Uniform1i=jl;a.Uniform2f=kl;a.Uniform3f=ll;a.Uniform4f=Tk;a.UniformColor=Uk;a.UniformMatrix4f=Wk;a.UnwrappedTileID=Wg;a.ValidationError=
Na;a.WritingMode=Lg;a.ZoomHistory=Ri;a.add=function(u,E,P){u[0]=E[0]+P[0];u[1]=E[1]+P[1];u[2]=E[2]+P[2];return u};a.addDynamicAttributes=Ji;a.asyncAll=function(u,E,P){if(!u.length)return P(null,[]);var fa=u.length,pa=Array(u.length),wa=null;u.forEach(function(Ea,Va){E(Ea,function(Za,ib){Za&&(wa=Za);pa[Va]=ib;0===--fa&&P(wa,pa)})})};a.bezier=c;a.bindAll=w;a.browser=va;a.cacheEntryPossiblyAdded=function(u){Ee++;Ee>me&&(u.getActor().send("enforceCacheSizeLimit",de),Ee=0)};a.clamp=d;a.clearTileCache=
function(u){var E=self.caches.delete("mapbox-tiles");u&&E.catch(u).then(function(){return u()})};a.clipLine=Cf;a.clone=function(u){var E=new Ih(16);E[0]=u[0];E[1]=u[1];E[2]=u[2];E[3]=u[3];E[4]=u[4];E[5]=u[5];E[6]=u[6];E[7]=u[7];E[8]=u[8];E[9]=u[9];E[10]=u[10];E[11]=u[11];E[12]=u[12];E[13]=u[13];E[14]=u[14];E[15]=u[15];return E};a.clone$1=A;a.clone$2=function(u){var E=new Ih(3);E[0]=u[0];E[1]=u[1];E[2]=u[2];return E};a.collisionCircleLayout=ek;a.config=Da;a.create=function(){var u=new Ih(16);Ih!=Float32Array&&
(u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[11]=0,u[12]=0,u[13]=0,u[14]=0);u[0]=1;u[5]=1;u[10]=1;u[15]=1;return u};a.create$1=function(){var u=new Ih(9);Ih!=Float32Array&&(u[1]=0,u[2]=0,u[3]=0,u[5]=0,u[6]=0,u[7]=0);u[0]=1;u[4]=1;u[8]=1;return u};a.create$2=function(){var u=new Ih(4);Ih!=Float32Array&&(u[1]=0,u[2]=0);u[0]=1;u[3]=1;return u};a.createCommonjsModule=g;a.createExpression=mc;a.createLayout=zb;a.createStyleLayer=function(u){return"custom"===u.type?new zl(u):new Al[u.type](u)};
a.cross=function(u,E,P){var fa=E[0],pa=E[1];E=E[2];var wa=P[0],Ea=P[1];P=P[2];u[0]=pa*P-E*Ea;u[1]=E*wa-fa*P;u[2]=fa*Ea-pa*wa;return u};a.deepEqual=l;a.dot=function(u,E){return u[0]*E[0]+u[1]*E[1]+u[2]*E[2]};a.dot$1=function(u,E){return u[0]*E[0]+u[1]*E[1]+u[2]*E[2]+u[3]*E[3]};a.ease=Dg;a.emitValidationErrors=Rc;a.endsWith=x;a.enforceCacheSizeLimit=function(u){ca();ve&&ve.then(function(E){E.keys().then(function(P){for(var fa=0;fa<P.length-u;fa++)E.delete(P[fa])})})};a.evaluateSizeForFeature=gf;a.evaluateSizeForZoom=
Te;a.evaluateVariableOffset=Ie;a.evented=zk;a.extend=f;a.featureFilter=Zc;a.filterObject=B;a.fromRotation=function(u,E){var P=Math.sin(E);E=Math.cos(E);u[0]=E;u[1]=P;u[2]=0;u[3]=-P;u[4]=E;u[5]=0;u[6]=0;u[7]=0;u[8]=1;return u};a.getAnchorAlignment=Kd;a.getAnchorJustification=Of;a.getArrayBuffer=cg;a.getImage=Wf;a.getJSON=function(u,E){return pf(f(u,{type:"json"}),E)};a.getRTLTextPluginStatus=function(){return ch};a.getReferrer=rf;a.getVideo=function(u,E){var P=self.document.createElement("video");
P.muted=!0;P.onloadstart=function(){E(null,P)};for(var fa=0;fa<u.length;fa++){var pa=self.document.createElement("source");ma(u[fa])||(P.crossOrigin="Anonymous");pa.src=u[fa];P.appendChild(pa)}return{cancel:function(){}}};a.identity=Af;a.invert=function(u,E){var P=E[0],fa=E[1],pa=E[2],wa=E[3],Ea=E[4],Va=E[5],Za=E[6],ib=E[7],Hb=E[8],Sb=E[9],ic=E[10],Dc=E[11],wc=E[12],Hc=E[13],ud=E[14];E=E[15];var Zd=P*Va-fa*Ea,Ad=P*Za-pa*Ea,Jd=P*ib-wa*Ea,be=fa*Za-pa*Va,ke=fa*ib-wa*Va,Le=pa*ib-wa*Za,ne=Hb*Hc-Sb*wc,
R=Hb*ud-ic*wc,aa=Hb*E-Dc*wc,sa=Sb*ud-ic*Hc,Ca=Sb*E-Dc*Hc,Ua=ic*E-Dc*ud,ab=Zd*Ua-Ad*Ca+Jd*sa+be*aa-ke*R+Le*ne;if(!ab)return null;ab=1/ab;u[0]=(Va*Ua-Za*Ca+ib*sa)*ab;u[1]=(pa*Ca-fa*Ua-wa*sa)*ab;u[2]=(Hc*Le-ud*ke+E*be)*ab;u[3]=(ic*ke-Sb*Le-Dc*be)*ab;u[4]=(Za*aa-Ea*Ua-ib*R)*ab;u[5]=(P*Ua-pa*aa+wa*R)*ab;u[6]=(ud*Jd-wc*Le-E*Ad)*ab;u[7]=(Hb*Le-ic*Jd+Dc*Ad)*ab;u[8]=(Ea*Ca-Va*aa+ib*ne)*ab;u[9]=(fa*aa-P*Ca-wa*ne)*ab;u[10]=(wc*ke-Hc*Jd+E*Zd)*ab;u[11]=(Sb*Jd-Hb*ke-Dc*Zd)*ab;u[12]=(Va*R-Ea*sa-Za*ne)*ab;u[13]=
(P*sa-fa*R+pa*ne)*ab;u[14]=(Hc*Ad-wc*be-ud*Zd)*ab;u[15]=(Hb*be-Sb*Ad+ic*Zd)*ab;return u};a.isChar=Ce;a.isMapboxURL=L;a.keysDifference=function(u,E){var P=[],fa;for(fa in u)fa in E||P.push(fa);return P};a.makeRequest=pf;a.mapObject=z;a.mercatorXfromLng=kg;a.mercatorYfromLat=ci;a.mercatorZfromAltitude=function(u,E){return u/(Kh*Math.cos(E*Math.PI/180))};a.mul=ug;a.multiply=ug;a.mvt=cj;a.normalize=function(u,E){var P=E[0],fa=E[1],pa=E[2];P=P*P+fa*fa+pa*pa;0<P&&(P=1/Math.sqrt(P));u[0]=E[0]*P;u[1]=E[1]*
P;u[2]=E[2]*P;return u};a.number=pb;a.offscreenCanvasSupported=Y;a.ortho=function(u,E,P,fa,pa,wa,Ea){var Va=1/(E-P),Za=1/(fa-pa),ib=1/(wa-Ea);u[0]=-2*Va;u[1]=0;u[2]=0;u[3]=0;u[4]=0;u[5]=-2*Za;u[6]=0;u[7]=0;u[8]=0;u[9]=0;u[10]=2*ib;u[11]=0;u[12]=(E+P)*Va;u[13]=(pa+fa)*Za;u[14]=(Ea+wa)*ib;u[15]=1;return u};a.parseGlyphPBF=function(u){return(new Je(u)).readFields(Ob,[])};a.pbf=Je;a.performSymbolLayout=function(u,E,P,fa,pa,wa,Ea){u.createArrays();u.tilePixelRatio=8192/(512*u.overscaling);u.compareText=
{};u.iconsNeedLinear=!1;var Va=u.layers[0].layout,Za=u.layers[0]._unevaluatedLayout._values,ib={};if("composite"===u.textSizeData.kind){var Hb=u.textSizeData,Sb=Hb.maxZoom;ib.compositeTextSizes=[Za["text-size"].possiblyEvaluate(new ig(Hb.minZoom),Ea),Za["text-size"].possiblyEvaluate(new ig(Sb),Ea)]}"composite"===u.iconSizeData.kind&&(Hb=u.iconSizeData,Sb=Hb.maxZoom,ib.compositeIconSizes=[Za["icon-size"].possiblyEvaluate(new ig(Hb.minZoom),Ea),Za["icon-size"].possiblyEvaluate(new ig(Sb),Ea)]);ib.layoutTextSize=
Za["text-size"].possiblyEvaluate(new ig(u.zoom+1),Ea);ib.layoutIconSize=Za["icon-size"].possiblyEvaluate(new ig(u.zoom+1),Ea);ib.textMaxSize=Za["text-size"].possiblyEvaluate(new ig(18));var ic=24*Va.get("text-line-height"),Dc="map"===Va.get("text-rotation-alignment")&&"point"!==Va.get("symbol-placement"),wc=Va.get("text-keep-upright"),Hc=Va.get("text-size");Za=function(){var Ad=Zd[ud],Jd=Va.get("text-font").evaluate(Ad,{},Ea).join(","),be=Hc.evaluate(Ad,{},Ea),ke=ib.layoutTextSize.evaluate(Ad,{},
Ea),Le=ib.layoutIconSize.evaluate(Ad,{},Ea),ne={horizontal:{},vertical:void 0},R=Ad.text,aa=[0,0];if(R){var sa=R.toString(),Ca=24*Va.get("text-letter-spacing").evaluate(Ad,{},Ea),Ua=qe(sa)?Ca:0,ab=Va.get("text-anchor").evaluate(Ad,{},Ea),Kb=Va.get("text-variable-anchor");Kb||(aa=(Ca=Va.get("text-radial-offset").evaluate(Ad,{},Ea))?Ie(ab,[24*Ca,Vg]):Va.get("text-offset").evaluate(Ad,{},Ea).map(function(ze){return 24*ze}));var lc=Dc?"center":Va.get("text-justify").evaluate(Ad,{},Ea),Ac=Va.get("symbol-placement"),
od="point"===Ac?24*Va.get("text-max-width").evaluate(Ad,{},Ea):0;Ca=function(){u.allowVerticalPlacement&&qd(sa)&&(ne.vertical=md(R,E,P,pa,Jd,od,ic,ab,"left",Ua,aa,Lg.vertical,!0,Ac,ke,be))};if(!Dc&&Kb){Kb="auto"===lc?Kb.map(function(ze){return Of(ze)}):[lc];lc=!1;for(var Ud=0;Ud<Kb.length;Ud++){var Xd=Kb[Ud];if(!ne.horizontal[Xd])if(lc)ne.horizontal[Xd]=ne.horizontal[0];else{var ie=md(R,E,P,pa,Jd,od,ic,"center",Xd,Ua,aa,Lg.horizontal,!1,Ac,ke,be);ie&&(ne.horizontal[Xd]=ie,lc=1===ie.positionedLines.length)}}Ca()}else"auto"===
lc&&(lc=Of(ab)),(Kb=md(R,E,P,pa,Jd,od,ic,ab,lc,Ua,aa,Lg.horizontal,!1,Ac,ke,be))&&(ne.horizontal[lc]=Kb),Ca(),qd(sa)&&Dc&&wc&&(ne.vertical=md(R,E,P,pa,Jd,od,ic,ab,lc,Ua,aa,Lg.vertical,!1,Ac,ke,be))}Ca=void 0;Kb=!1;Ad.icon&&Ad.icon.name&&(lc=fa[Ad.icon.name])&&(Ca=$d(pa[Ad.icon.name],Va.get("icon-offset").evaluate(Ad,{},Ea),Va.get("icon-anchor").evaluate(Ad,{},Ea)),Kb=lc.sdf,void 0===u.sdfIcons?u.sdfIcons=lc.sdf:u.sdfIcons!==lc.sdf&&D("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),
lc.pixelRatio!==u.pixelRatio?u.iconsNeedLinear=!0:0!==Va.get("icon-rotate").constantOr(1)&&(u.iconsNeedLinear=!0));lc=Wi(ne.horizontal)||ne.vertical;u.iconsInText=lc?lc.iconsInText:!1;(lc||Ca)&&Eg(u,Ad,ne,Ca,fa,ib,ke,Le,aa,Kb,Ea)};for(var ud=0,Zd=u.features;ud<Zd.length;ud+=1)Za();wa&&u.generateCollisionDebugBuffers()};a.perspective=function(u,E,P,fa,pa){E=1/Math.tan(E/2);u[0]=E/P;u[1]=0;u[2]=0;u[3]=0;u[4]=0;u[5]=E;u[6]=0;u[7]=0;u[8]=0;u[9]=0;u[11]=-1;u[12]=0;u[13]=0;u[15]=0;null!=pa&&Infinity!==
pa?(P=1/(fa-pa),u[10]=(pa+fa)*P,u[14]=2*pa*fa*P):(u[10]=-1,u[14]=-2*fa);return u};a.pick=function(u,E){for(var P={},fa=0;fa<E.length;fa++){var pa=E[fa];pa in u&&(P[pa]=u[pa])}return P};a.plugin=zh;a.polygonIntersectsPolygon=oc;a.postMapLoadEvent=he;a.postTurnstileEvent=Ed;a.potpack=dd;a.refProperties="type source source-layer minzoom maxzoom filter layout".split(" ");a.register=Mb;a.registerForPluginStateChange=function(u){u({pluginStatus:ch,pluginURL:gi});zk.on("pluginStateChange",u);return u};a.rotate=
function(u,E,P){var fa=E[0],pa=E[1],wa=E[2];E=E[3];var Ea=Math.sin(P);P=Math.cos(P);u[0]=fa*P+wa*Ea;u[1]=pa*P+E*Ea;u[2]=fa*-Ea+wa*P;u[3]=pa*-Ea+E*P;return u};a.rotateX=function(u,E,P){var fa=Math.sin(P);P=Math.cos(P);var pa=E[4],wa=E[5],Ea=E[6],Va=E[7],Za=E[8],ib=E[9],Hb=E[10],Sb=E[11];E!==u&&(u[0]=E[0],u[1]=E[1],u[2]=E[2],u[3]=E[3],u[12]=E[12],u[13]=E[13],u[14]=E[14],u[15]=E[15]);u[4]=pa*P+Za*fa;u[5]=wa*P+ib*fa;u[6]=Ea*P+Hb*fa;u[7]=Va*P+Sb*fa;u[8]=Za*P-pa*fa;u[9]=ib*P-wa*fa;u[10]=Hb*P-Ea*fa;u[11]=
Sb*P-Va*fa;return u};a.rotateZ=function(u,E,P){var fa=Math.sin(P);P=Math.cos(P);var pa=E[0],wa=E[1],Ea=E[2],Va=E[3],Za=E[4],ib=E[5],Hb=E[6],Sb=E[7];E!==u&&(u[8]=E[8],u[9]=E[9],u[10]=E[10],u[11]=E[11],u[12]=E[12],u[13]=E[13],u[14]=E[14],u[15]=E[15]);u[0]=pa*P+Za*fa;u[1]=wa*P+ib*fa;u[2]=Ea*P+Hb*fa;u[3]=Va*P+Sb*fa;u[4]=Za*P-pa*fa;u[5]=ib*P-wa*fa;u[6]=Hb*P-Ea*fa;u[7]=Sb*P-Va*fa;return u};a.scale=function(u,E,P){var fa=P[0],pa=P[1];P=P[2];u[0]=E[0]*fa;u[1]=E[1]*fa;u[2]=E[2]*fa;u[3]=E[3]*fa;u[4]=E[4]*pa;
u[5]=E[5]*pa;u[6]=E[6]*pa;u[7]=E[7]*pa;u[8]=E[8]*P;u[9]=E[9]*P;u[10]=E[10]*P;u[11]=E[11]*P;u[12]=E[12];u[13]=E[13];u[14]=E[14];u[15]=E[15];return u};a.scale$1=function(u,E,P){u[0]=E[0]*P;u[1]=E[1]*P;u[2]=E[2]*P;u[3]=E[3]*P;return u};a.scale$2=function(u,E,P){u[0]=E[0]*P;u[1]=E[1]*P;u[2]=E[2]*P;return u};a.setCacheLimits=function(u,E){de=u;me=E};a.setRTLTextPlugin=function(u,E,P){void 0===P&&(P=!1);if("deferred"===ch||"loading"===ch||"loaded"===ch)throw Error("setRTLTextPlugin cannot be called multiple times.");
gi=va.resolveURL(u);ch="deferred";Si=E;oe();P||zj()};a.sphericalToCartesian=function(u){var E=u[0],P=u[1];u=u[2];P=Math.PI/180*(P+90);u*=Math.PI/180;return{x:E*Math.cos(P)*Math.sin(u),y:E*Math.sin(P)*Math.sin(u),z:E*Math.cos(u)}};a.sqrLen=function(u){var E=u[0];u=u[1];return E*E+u*u};a.styleSpec=Fa;a.sub=function(u,E,P){u[0]=E[0]-P[0];u[1]=E[1]-P[1];u[2]=E[2]-P[2];return u};a.symbolSize=bl;a.transformMat3=function(u,E,P){var fa=E[0],pa=E[1];E=E[2];u[0]=fa*P[0]+pa*P[3]+E*P[6];u[1]=fa*P[1]+pa*P[4]+
E*P[7];u[2]=fa*P[2]+pa*P[5]+E*P[8];return u};a.transformMat4=ih;a.translate=function(u,E,P){var fa=P[0],pa=P[1];P=P[2];if(E===u)u[12]=E[0]*fa+E[4]*pa+E[8]*P+E[12],u[13]=E[1]*fa+E[5]*pa+E[9]*P+E[13],u[14]=E[2]*fa+E[6]*pa+E[10]*P+E[14],u[15]=E[3]*fa+E[7]*pa+E[11]*P+E[15];else{var wa=E[0];var Ea=E[1];var Va=E[2];var Za=E[3];var ib=E[4];var Hb=E[5];var Sb=E[6];var ic=E[7];var Dc=E[8];var wc=E[9];var Hc=E[10];var ud=E[11];u[0]=wa;u[1]=Ea;u[2]=Va;u[3]=Za;u[4]=ib;u[5]=Hb;u[6]=Sb;u[7]=ic;u[8]=Dc;u[9]=wc;
u[10]=Hc;u[11]=ud;u[12]=wa*fa+ib*pa+Dc*P+E[12];u[13]=Ea*fa+Hb*pa+wc*P+E[13];u[14]=Va*fa+Sb*pa+Hc*P+E[14];u[15]=Za*fa+ic*pa+ud*P+E[15]}return u};a.triggerPluginCompletionEvent=$i;a.uniqueId=function(){return Sg++};a.validateCustomStyleLayer=function(u){var E=[],P=u.id;void 0===P&&E.push({message:"layers."+P+': missing required property "id"'});void 0===u.render&&E.push({message:"layers."+P+': missing required method "render"'});u.renderingMode&&"2d"!==u.renderingMode&&"3d"!==u.renderingMode&&E.push({message:"layers."+
P+': property "renderingMode" must be either "2d" or "3d"'});return E};a.validateLight=Fi;a.validateStyle=He;a.values=function(u){var E=[],P;for(P in u)E.push(u[P]);return E};a.vectorTile=cj;a.version="1.10.1";a.warnOnce=D;a.webpSupported=Ra;a.window=self;a.wrap=e});p(["./shared"],function(a){function g(ya){var Aa=typeof ya;if("number"===Aa||"boolean"===Aa||"string"===Aa||void 0===ya||null===ya)return JSON.stringify(ya);if(Array.isArray(ya)){Aa="[";for(var Ka=0;Ka<ya.length;Ka+=1)Aa+=g(ya[Ka])+",";
return Aa+"]"}Aa=Object.keys(ya).sort();Ka="{";for(var Ta=0;Ta<Aa.length;Ta++)Ka+=JSON.stringify(Aa[Ta])+":"+g(ya[Aa[Ta]])+",";return Ka+"}"}function h(ya,Aa){for(var Ka={},Ta=0;Ta<ya.length;Ta++){var bb;if(!(bb=Aa&&Aa[ya[Ta].id])){bb=ya[Ta];for(var cb="",Eb=0,Pb=a.refProperties;Eb<Pb.length;Eb+=1)cb+="/"+g(bb[Pb[Eb]]);bb=cb}Aa&&(Aa[ya[Ta].id]=bb);(cb=Ka[bb])||(cb=Ka[bb]=[]);cb.push(ya[Ta])}ya=[];for(var fc in Ka)ya.push(Ka[fc]);return ya}function r(ya,Aa,Ka){Aa=new a.EvaluationParameters(Aa);for(var Ta=
0;Ta<ya.length;Ta+=1)ya[Ta].recalculate(Aa,Ka)}function l(ya,Aa){var Ka=a.getArrayBuffer(ya.request,function(Ta,bb,cb,Eb){Ta?Aa(Ta):bb&&Aa(null,{vectorTile:new a.vectorTile.VectorTile(new a.pbf(bb)),rawData:bb,cacheControl:cb,expires:Eb})});return function(){Ka.cancel();Aa()}}function c(ya,Aa){var Ka=ya&&ya.type;if("FeatureCollection"===Ka)for(Ka=0;Ka<ya.features.length;Ka++)c(ya.features[Ka],Aa);else if("GeometryCollection"===Ka)for(Ka=0;Ka<ya.geometries.length;Ka++)c(ya.geometries[Ka],Aa);else if("Feature"===
Ka)c(ya.geometry,Aa);else if("Polygon"===Ka)d(ya.coordinates,Aa);else if("MultiPolygon"===Ka)for(Ka=0;Ka<ya.coordinates.length;Ka++)d(ya.coordinates[Ka],Aa);return ya}function d(ya,Aa){if(0!==ya.length){e(ya[0],Aa);for(var Ka=1;Ka<ya.length;Ka++)e(ya[Ka],!Aa)}}function e(ya,Aa){for(var Ka=0,Ta=0,bb=ya.length,cb=bb-1;Ta<bb;cb=Ta++)Ka+=(ya[Ta][0]-ya[cb][0])*(ya[cb][1]+ya[Ta][1]);0<=Ka!==!!Aa&&ya.reverse()}function f(ya,Aa){this.options=Aa||{};this.features=ya;this.length=ya.length}function q(ya,Aa){this.id=
"number"===typeof ya.id?ya.id:void 0;this.type=ya.type;this.rawGeometry=1===ya.type?[ya.geometry]:ya.geometry;this.properties=ya.tags;this.extent=Aa||4096}function t(ya){var Aa=new a.pbf,Ka;for(Ka in ya.layers)Aa.writeMessage(3,w,ya.layers[Ka]);return Aa.finish()}function w(ya,Aa){Aa.writeVarintField(15,ya.version||1);Aa.writeStringField(1,ya.name||"");Aa.writeVarintField(5,ya.extent||4096);var Ka,Ta={keys:[],values:[],keycache:{},valuecache:{}};for(Ka=0;Ka<ya.length;Ka++)Ta.feature=ya.feature(Ka),
Aa.writeMessage(2,x,Ta);ya=Ta.keys;for(Ka=0;Ka<ya.length;Ka++)Aa.writeStringField(3,ya[Ka]);Ta=Ta.values;for(Ka=0;Ka<Ta.length;Ka++)Aa.writeMessage(4,A,Ta[Ka])}function x(ya,Aa){var Ka=ya.feature;void 0!==Ka.id&&Aa.writeVarintField(1,Ka.id);Aa.writeMessage(2,z,ya);Aa.writeVarintField(3,Ka.type);Aa.writeMessage(4,B,Ka)}function z(ya,Aa){var Ka=ya.feature,Ta=ya.keys,bb=ya.values,cb=ya.keycache;ya=ya.valuecache;for(var Eb in Ka.properties){var Pb=cb[Eb];"undefined"===typeof Pb&&(Ta.push(Eb),Pb=Ta.length-
1,cb[Eb]=Pb);Aa.writeVarint(Pb);Pb=Ka.properties[Eb];var fc=typeof Pb;"string"!==fc&&"boolean"!==fc&&"number"!==fc&&(Pb=JSON.stringify(Pb));fc=fc+":"+Pb;var pb=ya[fc];"undefined"===typeof pb&&(bb.push(Pb),pb=bb.length-1,ya[fc]=pb);Aa.writeVarint(pb)}}function B(ya,Aa){var Ka=ya.loadGeometry();ya=ya.type;for(var Ta=0,bb=0,cb=Ka.length,Eb=0;Eb<cb;Eb++){var Pb=Ka[Eb],fc=1;1===ya&&(fc=Pb.length);Aa.writeVarint((fc<<3)+1);fc=3===ya?Pb.length-1:Pb.length;for(var pb=0;pb<fc;pb++){1===pb&&1!==ya&&Aa.writeVarint((fc-
1<<3)+2);var Db=Pb[pb].x-Ta,Rb=Pb[pb].y-bb;Aa.writeVarint(Db<<1^Db>>31);Aa.writeVarint(Rb<<1^Rb>>31);Ta+=Db;bb+=Rb}3===ya&&Aa.writeVarint(15)}}function A(ya,Aa){var Ka=typeof ya;"string"===Ka?Aa.writeStringField(1,ya):"boolean"===Ka?Aa.writeBooleanField(7,ya):"number"===Ka&&(0!==ya%1?Aa.writeDoubleField(3,ya):0>ya?Aa.writeSVarintField(6,ya):Aa.writeVarintField(5,ya))}function D(ya,Aa,Ka,Ta,bb,cb){if(!(bb-Ta<=Ka)){var Eb=Ta+bb>>1;C(ya,Aa,Eb,Ta,bb,cb%2);D(ya,Aa,Ka,Ta,Eb-1,cb+1);D(ya,Aa,Ka,Eb+1,bb,cb+
1)}}function C(ya,Aa,Ka,Ta,bb,cb){for(;bb>Ta;){if(600<bb-Ta){var Eb=bb-Ta+1,Pb=Ka-Ta+1,fc=Math.log(Eb),pb=.5*Math.exp(2*fc/3);fc=.5*Math.sqrt(fc*pb*(Eb-pb)/Eb)*(0>Pb-Eb/2?-1:1);C(ya,Aa,Ka,Math.max(Ta,Math.floor(Ka-Pb*pb/Eb+fc)),Math.min(bb,Math.floor(Ka+(Eb-Pb)*pb/Eb+fc)),cb)}Eb=Aa[2*Ka+cb];Pb=Ta;pb=bb;v(ya,Aa,Ta,Ka);for(Aa[2*bb+cb]>Eb&&v(ya,Aa,Ta,bb);Pb<pb;){v(ya,Aa,Pb,pb);Pb++;for(pb--;Aa[2*Pb+cb]<Eb;)Pb++;for(;Aa[2*pb+cb]>Eb;)pb--}Aa[2*Ta+cb]===Eb?v(ya,Aa,Ta,pb):(pb++,v(ya,Aa,pb,bb));pb<=Ka&&(Ta=
pb+1);Ka<=pb&&(bb=pb-1)}}function v(ya,Aa,Ka,Ta){y(ya,Ka,Ta);y(Aa,2*Ka,2*Ta);y(Aa,2*Ka+1,2*Ta+1)}function y(ya,Aa,Ka){var Ta=ya[Aa];ya[Aa]=ya[Ka];ya[Ka]=Ta}function F(ya){var Aa=ya.id,Ka=J(ya);return{type:"Feature",id:Aa,properties:Ka,geometry:{type:"Point",coordinates:[360*(ya.x-.5),360*Math.atan(Math.exp((180-360*ya.y)*Math.PI/180))/Math.PI-90]}}}function J(ya){var Aa=ya.numPoints,Ka=1E4<=Aa?Math.round(Aa/1E3)+"k":1E3<=Aa?Math.round(Aa/100)/10+"k":Aa;return O(O({},ya.properties),{cluster:!0,cluster_id:ya.id,
point_count:Aa,point_count_abbreviated:Ka})}function K(ya){ya=Math.sin(ya*Math.PI/180);ya=.5-.25*Math.log((1+ya)/(1-ya))/Math.PI;return 0>ya?0:1<ya?1:ya}function O(ya,Aa){for(var Ka in Aa)ya[Ka]=Aa[Ka];return ya}function I(ya){return ya.x}function L(ya){return ya.y}function H(ya,Aa,Ka,Ta){for(var bb=Ta,cb=Ka-Aa>>1,Eb=Ka-Aa,Pb,fc=ya[Aa],pb=ya[Aa+1],Db=ya[Ka],Rb=ya[Ka+1],xc=Aa+3;xc<Ka;xc+=3){var Ic=ya[xc];var Ja=ya[xc+1],Pa=fc,db=pb,Jb=Db-Pa,Gb=Rb-db;if(0!==Jb||0!==Gb){var cc=((Ic-Pa)*Jb+(Ja-db)*Gb)/
(Jb*Jb+Gb*Gb);1<cc?(Pa=Db,db=Rb):0<cc&&(Pa+=Jb*cc,db+=Gb*cc)}Jb=Ic-Pa;Gb=Ja-db;Ic=Jb*Jb+Gb*Gb;Ic>bb?(Pb=xc,bb=Ic):Ic===bb&&(Ic=Math.abs(xc-cb),Ic<Eb&&(Pb=xc,Eb=Ic))}bb>Ta&&(3<Pb-Aa&&H(ya,Aa,Pb,Ta),ya[Pb+2]=bb,3<Ka-Pb&&H(ya,Pb,Ka,Ta))}function M(ya,Aa,Ka,Ta){ya={id:"undefined"===typeof ya?null:ya,type:Aa,geometry:Ka,tags:Ta,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity};Aa=ya.geometry;Ka=ya.type;if("Point"===Ka||"MultiPoint"===Ka||"LineString"===Ka)Q(ya,Aa);else if("Polygon"===Ka||"MultiLineString"===
Ka)for(Ka=0;Ka<Aa.length;Ka++)Q(ya,Aa[Ka]);else if("MultiPolygon"===Ka)for(Ka=0;Ka<Aa.length;Ka++)for(Ta=0;Ta<Aa[Ka].length;Ta++)Q(ya,Aa[Ka][Ta]);return ya}function Q(ya,Aa){for(var Ka=0;Ka<Aa.length;Ka+=3)ya.minX=Math.min(ya.minX,Aa[Ka]),ya.minY=Math.min(ya.minY,Aa[Ka+1]),ya.maxX=Math.max(ya.maxX,Aa[Ka]),ya.maxY=Math.max(ya.maxY,Aa[Ka+1])}function Z(ya,Aa,Ka,Ta){if(Aa.geometry){var bb=Aa.geometry.coordinates,cb=Aa.geometry.type,Eb=Math.pow(Ka.tolerance/((1<<Ka.maxZoom)*Ka.extent),2),Pb=[],fc=Aa.id;
Ka.promoteId?fc=Aa.properties[Ka.promoteId]:Ka.generateId&&(fc=Ta||0);if("Point"===cb)ca(bb,Pb);else if("MultiPoint"===cb)for(var pb=0;pb<bb.length;pb++)ca(bb[pb],Pb);else if("LineString"===cb)W(bb,Pb,Eb,!1);else if("MultiLineString"===cb){if(Ka.lineMetrics){for(pb=0;pb<bb.length;pb++)Pb=[],W(bb[pb],Pb,Eb,!1),ya.push(M(fc,"LineString",Pb,Aa.properties));return}T(bb,Pb,Eb,!1)}else if("Polygon"===cb)T(bb,Pb,Eb,!0);else if("MultiPolygon"===cb)for(pb=0;pb<bb.length;pb++)Ka=[],T(bb[pb],Ka,Eb,!0),Pb.push(Ka);
else{if("GeometryCollection"===cb){for(pb=0;pb<Aa.geometry.geometries.length;pb++)Z(ya,{id:fc,geometry:Aa.geometry.geometries[pb],properties:Aa.properties},Ka,Ta);return}throw Error("Input data is not a valid GeoJSON object.");}ya.push(M(fc,cb,Pb,Aa.properties))}}function ca(ya,Aa){Aa.push(ya[0]/360+.5);Aa.push(U(ya[1]));Aa.push(0)}function W(ya,Aa,Ka,Ta){for(var bb,cb,Eb=0,Pb=0;Pb<ya.length;Pb++){var fc=ya[Pb][0]/360+.5,pb=U(ya[Pb][1]);Aa.push(fc);Aa.push(pb);Aa.push(0);0<Pb&&(Eb=Ta?Eb+(bb*pb-fc*
cb)/2:Eb+Math.sqrt(Math.pow(fc-bb,2)+Math.pow(pb-cb,2)));bb=fc;cb=pb}ya=Aa.length-3;Aa[2]=1;H(Aa,0,ya,Ka);Aa[ya+2]=1;Aa.size=Math.abs(Eb);Aa.start=0;Aa.end=Aa.size}function T(ya,Aa,Ka,Ta){for(var bb=0;bb<ya.length;bb++){var cb=[];W(ya[bb],cb,Ka,Ta);Aa.push(cb)}}function U(ya){ya=Math.sin(ya*Math.PI/180);ya=.5-.25*Math.log((1+ya)/(1-ya))/Math.PI;return 0>ya?0:1<ya?1:ya}function ha(ya,Aa,Ka,Ta,bb,cb,Eb,Pb){Ka/=Aa;Ta/=Aa;if(cb>=Ka&&Eb<Ta)return ya;if(Eb<Ka||cb>=Ta)return null;Aa=[];for(cb=0;cb<ya.length;cb++){Eb=
ya[cb];var fc=Eb.geometry,pb=Eb.type,Db=0===bb?Eb.minX:Eb.minY,Rb=0===bb?Eb.maxX:Eb.maxY;if(Db>=Ka&&Rb<Ta)Aa.push(Eb);else if(!(Rb<Ka||Db>=Ta)){Db=[];if("Point"===pb||"MultiPoint"===pb){Rb=Db;for(var xc=Ka,Ic=Ta,Ja=bb,Pa=0;Pa<fc.length;Pa+=3){var db=fc[Pa+Ja];db>=xc&&db<=Ic&&(Rb.push(fc[Pa]),Rb.push(fc[Pa+1]),Rb.push(fc[Pa+2]))}}else if("LineString"===pb)Y(fc,Db,Ka,Ta,bb,!1,Pb.lineMetrics);else if("MultiLineString"===pb)ja(fc,Db,Ka,Ta,bb,!1);else if("Polygon"===pb)ja(fc,Db,Ka,Ta,bb,!0);else if("MultiPolygon"===
pb)for(Rb=0;Rb<fc.length;Rb++)xc=[],ja(fc[Rb],xc,Ka,Ta,bb,!0),xc.length&&Db.push(xc);if(Db.length)if(Pb.lineMetrics&&"LineString"===pb)for(Rb=0;Rb<Db.length;Rb++)Aa.push(M(Eb.id,pb,Db[Rb],Eb.tags));else{if("LineString"===pb||"MultiLineString"===pb)1===Db.length?(pb="LineString",Db=Db[0]):pb="MultiLineString";if("Point"===pb||"MultiPoint"===pb)pb=3===Db.length?"Point":"MultiPoint";Aa.push(M(Eb.id,pb,Db,Eb.tags))}}}return Aa.length?Aa:null}function Y(ya,Aa,Ka,Ta,bb,cb,Eb){for(var Pb=ba(ya),fc=0===bb?
ma:ia,pb=ya.start,Db,Rb,xc=0;xc<ya.length-3;xc+=3){var Ic=ya[xc],Ja=ya[xc+1],Pa=ya[xc+2],db=ya[xc+3],Jb=ya[xc+4],Gb=0===bb?Ic:Ja,cc=0===bb?db:Jb,uc=!1;Eb&&(Db=Math.sqrt(Math.pow(Ic-db,2)+Math.pow(Ja-Jb,2)));if(Gb<Ka)cc>Ka&&(Rb=fc(Pb,Ic,Ja,db,Jb,Ka),Eb&&(Pb.start=pb+Db*Rb));else if(Gb>Ta)cc<Ta&&(Rb=fc(Pb,Ic,Ja,db,Jb,Ta),Eb&&(Pb.start=pb+Db*Rb));else{var fd=Pb,kb=Ja;fd.push(Ic);fd.push(kb);fd.push(Pa)}cc<Ka&&Gb>=Ka&&(Rb=fc(Pb,Ic,Ja,db,Jb,Ka),uc=!0);cc>Ta&&Gb<=Ta&&(Rb=fc(Pb,Ic,Ja,db,Jb,Ta),uc=!0);!cb&&
uc&&(Eb&&(Pb.end=pb+Db*Rb),Aa.push(Pb),Pb=ba(ya));Eb&&(pb+=Db)}Pa=ya.length-3;Ic=ya[Pa];Ja=ya[Pa+1];Pa=ya[Pa+2];Gb=0===bb?Ic:Ja;Gb>=Ka&&Gb<=Ta&&(ya=Pb,Ka=Pa,ya.push(Ic),ya.push(Ja),ya.push(Ka));Pa=Pb.length-3;cb&&3<=Pa&&(Pb[Pa]!==Pb[0]||Pb[Pa+1]!==Pb[1])&&(cb=Pb,Ic=Pb[1],Ja=Pb[2],cb.push(Pb[0]),cb.push(Ic),cb.push(Ja));Pb.length&&Aa.push(Pb)}function ba(ya){var Aa=[];Aa.size=ya.size;Aa.start=ya.start;Aa.end=ya.end;return Aa}function ja(ya,Aa,Ka,Ta,bb,cb){for(var Eb=0;Eb<ya.length;Eb++)Y(ya[Eb],Aa,
Ka,Ta,bb,cb,!1)}function ma(ya,Aa,Ka,Ta,bb,cb){Aa=(cb-Aa)/(Ta-Aa);ya.push(cb);ya.push(Ka+(bb-Ka)*Aa);ya.push(1);return Aa}function ia(ya,Aa,Ka,Ta,bb,cb){Ka=(cb-Ka)/(bb-Ka);ya.push(Aa+(Ta-Aa)*Ka);ya.push(cb);ya.push(1);return Ka}function oa(ya,Aa){for(var Ka=[],Ta=0;Ta<ya.length;Ta++){var bb=ya[Ta],cb=bb.type;if("Point"===cb||"MultiPoint"===cb||"LineString"===cb)var Eb=xa(bb.geometry,Aa);else if("MultiLineString"===cb||"Polygon"===cb){Eb=[];for(var Pb=0;Pb<bb.geometry.length;Pb++)Eb.push(xa(bb.geometry[Pb],
Aa))}else if("MultiPolygon"===cb)for(Eb=[],Pb=0;Pb<bb.geometry.length;Pb++){for(var fc=[],pb=0;pb<bb.geometry[Pb].length;pb++)fc.push(xa(bb.geometry[Pb][pb],Aa));Eb.push(fc)}Ka.push(M(bb.id,cb,Eb,bb.tags))}return Ka}function xa(ya,Aa){var Ka=[];Ka.size=ya.size;void 0!==ya.start&&(Ka.start=ya.start,Ka.end=ya.end);for(var Ta=0;Ta<ya.length;Ta+=3)Ka.push(ya[Ta]+Aa,ya[Ta+1],ya[Ta+2]);return Ka}function ra(ya,Aa){if(ya.transformed)return ya;var Ka=1<<ya.z,Ta=ya.x,bb=ya.y,cb,Eb;for(cb=0;cb<ya.features.length;cb++){var Pb=
ya.features[cb],fc=Pb.geometry;var pb=Pb.type;Pb.geometry=[];if(1===pb)for(pb=0;pb<fc.length;pb+=2)Pb.geometry.push([Math.round(Aa*(fc[pb]*Ka-Ta)),Math.round(Aa*(fc[pb+1]*Ka-bb))]);else for(pb=0;pb<fc.length;pb++){var Db=[];for(Eb=0;Eb<fc[pb].length;Eb+=2)Db.push([Math.round(Aa*(fc[pb][Eb]*Ka-Ta)),Math.round(Aa*(fc[pb][Eb+1]*Ka-bb))]);Pb.geometry.push(Db)}}ya.transformed=!0;return ya}function la(ya,Aa,Ka,Ta,bb,cb){var Eb=Ta*Ta;if(0<Ta&&Aa.size<(bb?Eb:Ta))Ka.numPoints+=Aa.length/3;else{for(var Pb=
[],fc=0;fc<Aa.length;fc+=3){if(0===Ta||Aa[fc+2]>Eb)Ka.numSimplified++,Pb.push(Aa[fc]),Pb.push(Aa[fc+1]);Ka.numPoints++}if(bb){Aa=Ta=0;Ka=Pb.length;for(bb=Ka-2;Aa<Ka;bb=Aa,Aa+=2)Ta+=(Pb[Aa]-Pb[bb])*(Pb[Aa+1]+Pb[bb+1]);if(0<Ta===cb)for(Aa=0,Ka=Pb.length;Aa<Ka/2;Aa+=2)cb=Pb[Aa],Ta=Pb[Aa+1],Pb[Aa]=Pb[Ka-2-Aa],Pb[Aa+1]=Pb[Ka-1-Aa],Pb[Ka-2-Aa]=cb,Pb[Ka-1-Aa]=Ta}ya.push(Pb)}}function ka(ya,Aa){var Ka=Object.create(this.options);for(Ta in Aa)Ka[Ta]=Aa[Ta];Aa=this.options=Ka;(Ka=Aa.debug)&&console.time("preprocess data");
if(0>Aa.maxZoom||24<Aa.maxZoom)throw Error("maxZoom should be in the 0-24 range");if(Aa.promoteId&&Aa.generateId)throw Error("promoteId and generateId cannot be used together.");var Ta=Aa;var bb=[];if("FeatureCollection"===ya.type)for(var cb=0;cb<ya.features.length;cb++)Z(bb,ya.features[cb],Ta,cb);else"Feature"===ya.type?Z(bb,ya,Ta):Z(bb,{geometry:ya},Ta);ya=bb;this.tiles={};this.tileCoords=[];Ka&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Aa.indexMaxZoom,
Aa.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0);Ta=Aa.buffer/Aa.extent;bb=ya;cb=ha(ya,1,-1-Ta,Ta,0,-1,2,Aa);var Eb=ha(ya,1,1-Ta,2+Ta,0,-1,2,Aa);if(cb||Eb)bb=ha(ya,1,-Ta,1+Ta,0,-1,2,Aa)||[],cb&&(bb=oa(cb,1).concat(bb)),Eb&&(bb=bb.concat(oa(Eb,-1)));ya=bb;ya.length&&this.splitTile(ya,0,0,0);Ka&&(ya.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,
JSON.stringify(this.stats)))}function na(ya,Aa){ya=ya.tileID.canonical;if(!this._geoJSONIndex)return Aa(null,null);ya=this._geoJSONIndex.getTile(ya.z,ya.x,ya.y);if(!ya)return Aa(null,null);ya=new vb(ya.features);var Ka=Bb(ya);if(0!==Ka.byteOffset||Ka.byteLength!==Ka.buffer.byteLength)Ka=new Uint8Array(Ka);Aa(null,{vectorTile:ya,rawData:Ka.buffer})}function qa(ya){var Aa=ya.superclusterOptions;ya=ya.clusterProperties;if(!ya||!Aa)return Aa;for(var Ka={},Ta={},bb={accumulated:null,zoom:0},cb={properties:null},
Eb=Object.keys(ya),Pb=0;Pb<Eb.length;Pb+=1){var fc=Eb[Pb],pb=ya[fc],Db=pb[0];pb=a.createExpression(pb[1]);Db=a.createExpression("string"===typeof Db?[Db,["accumulated"],["get",fc]]:Db);Ka[fc]=pb.value;Ta[fc]=Db.value}Aa.map=function(Rb){cb.properties=Rb;Rb={};for(var xc=0;xc<Eb.length;xc+=1){var Ic=Eb[xc];Rb[Ic]=Ka[Ic].evaluate(bb,cb)}return Rb};Aa.reduce=function(Rb,xc){cb.properties=xc;for(xc=0;xc<Eb.length;xc+=1){var Ic=Eb[xc];bb.accumulated=Rb[Ic];Rb[Ic]=Ta[Ic].evaluate(bb,cb)}};return Aa}var ta=
function(ya){this.keyCache={};ya&&this.replace(ya)};ta.prototype.replace=function(ya){this._layerConfigs={};this._layers={};this.update(ya,[])};ta.prototype.update=function(ya,Aa){for(var Ka=this,Ta=0;Ta<ya.length;Ta+=1){var bb=ya[Ta];this._layerConfigs[bb.id]=bb;var cb=this._layers[bb.id]=a.createStyleLayer(bb);cb._featureFilter=a.featureFilter(cb.filter);this.keyCache[bb.id]&&delete this.keyCache[bb.id]}for(ya=0;ya<Aa.length;ya+=1)Ta=Aa[ya],delete this.keyCache[Ta],delete this._layerConfigs[Ta],
delete this._layers[Ta];this.familiesBySource={};Aa=0;for(ya=h(a.values(this._layerConfigs),this.keyCache);Aa<ya.length;Aa+=1)if(Ta=ya[Aa].map(function(Pb){return Ka._layers[Pb.id]}),cb=Ta[0],"none"!==cb.visibility){var Eb=cb.source||"";(bb=this.familiesBySource[Eb])||(bb=this.familiesBySource[Eb]={});cb=cb.sourceLayer||"_geojsonTileLayer";(Eb=bb[cb])||(Eb=bb[cb]=[]);Eb.push(Ta)}};var za=function(ya){var Aa={},Ka=[];for(pb in ya){var Ta=ya[pb],bb=Aa[pb]={},cb;for(cb in Ta){var Eb=Ta[+cb];if(Eb&&0!==
Eb.bitmap.width&&0!==Eb.bitmap.height){var Pb={x:0,y:0,w:Eb.bitmap.width+2,h:Eb.bitmap.height+2};Ka.push(Pb);bb[cb]={rect:Pb,metrics:Eb.metrics}}}}Ka=a.potpack(Ka);Ka=new a.AlphaImage({width:Ka.w||1,height:Ka.h||1});for(var fc in ya){var pb=ya[fc];for(var Db in pb)(Ta=pb[+Db])&&0!==Ta.bitmap.width&&0!==Ta.bitmap.height&&(bb=Aa[fc][Db].rect,a.AlphaImage.copy(Ta.bitmap,Ka,{x:0,y:0},{x:bb.x+1,y:bb.y+1},Ta.bitmap))}this.image=Ka;this.positions=Aa};a.register("GlyphAtlas",za);var Ia=function(ya){this.tileID=
new a.OverscaledTileID(ya.tileID.overscaledZ,ya.tileID.wrap,ya.tileID.canonical.z,ya.tileID.canonical.x,ya.tileID.canonical.y);this.uid=ya.uid;this.zoom=ya.zoom;this.pixelRatio=ya.pixelRatio;this.tileSize=ya.tileSize;this.source=ya.source;this.overscaling=this.tileID.overscaleFactor();this.showCollisionBoxes=ya.showCollisionBoxes;this.collectResourceTiming=!!ya.collectResourceTiming;this.returnDependencies=!!ya.returnDependencies;this.promoteId=ya.promoteId};Ia.prototype.parse=function(ya,Aa,Ka,Ta,
bb){function cb(){if(Gb)return bb(Gb);if(cc&&uc&&fd){var kb=new za(cc),Qb=new a.ImageAtlas(uc,fd),dc;for(dc in pb){var Ec=pb[dc];Ec instanceof a.SymbolBucket?(r(Ec.layers,this.zoom,Ka),a.performSymbolLayout(Ec,cc,kb.positions,uc,Qb.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Ec.hasPattern&&(Ec instanceof a.LineBucket||Ec instanceof a.FillBucket||Ec instanceof a.FillExtrusionBucket)&&(r(Ec.layers,this.zoom,Ka),Ec.addFeatures(Db,this.tileID.canonical,Qb.patternPositions))}this.status=
"done";bb(null,{buckets:a.values(pb).filter(function(Qc){return!Qc.isEmpty()}),featureIndex:fc,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:kb.image,imageAtlas:Qb,glyphMap:this.returnDependencies?cc:null,iconMap:this.returnDependencies?uc:null,glyphPositions:this.returnDependencies?kb.positions:null})}}var Eb=this;this.status="parsing";this.data=ya;this.collisionBoxArray=new a.CollisionBoxArray;var Pb=new a.DictionaryCoder(Object.keys(ya.layers).sort()),fc=new a.FeatureIndex(this.tileID,
this.promoteId);fc.bucketLayerIDs=[];var pb={},Db={featureIndex:fc,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Ka};Aa=Aa.familiesBySource[this.source];for(var Rb in Aa){var xc=ya.layers[Rb];if(xc){1===xc.version&&a.warnOnce('Vector tile source "'+this.source+'" layer "'+Rb+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Ic=Pb.encode(Rb),Ja=[],Pa=0;Pa<xc.length;Pa++){var db=xc.feature(Pa),Jb=fc.getId(db,Rb);Ja.push({feature:db,
id:Jb,index:Pa,sourceLayerIndex:Ic})}xc=0;for(Pa=Aa[Rb];xc<Pa.length;xc+=1)db=Pa[xc],Jb=db[0],Jb.minzoom&&this.zoom<Math.floor(Jb.minzoom)||Jb.maxzoom&&this.zoom>=Jb.maxzoom||"none"===Jb.visibility||(r(db,this.zoom,Ka),(pb[Jb.id]=Jb.createBucket({index:fc.bucketLayerIDs.length,layers:db,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ic,sourceID:this.source})).populate(Ja,Db,this.tileID.canonical),fc.bucketLayerIDs.push(db.map(function(kb){return kb.id})))}}var Gb,
cc,uc,fd;ya=a.mapObject(Db.glyphDependencies,function(kb){return Object.keys(kb).map(Number)});Object.keys(ya).length?Ta.send("getGlyphs",{uid:this.uid,stacks:ya},function(kb,Qb){Gb||(Gb=kb,cc=Qb,cb.call(Eb))}):cc={};ya=Object.keys(Db.iconDependencies);ya.length?Ta.send("getImages",{icons:ya,source:this.source,tileID:this.tileID,type:"icons"},function(kb,Qb){Gb||(Gb=kb,uc=Qb,cb.call(Eb))}):uc={};ya=Object.keys(Db.patternDependencies);ya.length?Ta.send("getImages",{icons:ya,source:this.source,tileID:this.tileID,
type:"patterns"},function(kb,Qb){Gb||(Gb=kb,fd=Qb,cb.call(Eb))}):fd={};cb.call(this)};var Xa=function(ya,Aa,Ka,Ta){this.actor=ya;this.layerIndex=Aa;this.availableImages=Ka;this.loadVectorData=Ta||l;this.loading={};this.loaded={}};Xa.prototype.loadTile=function(ya,Aa){var Ka=this,Ta=ya.uid;this.loading||(this.loading={});var bb=ya&&ya.request&&ya.request.collectResourceTiming?new a.RequestPerformance(ya.request):!1,cb=this.loading[Ta]=new Ia(ya);cb.abort=this.loadVectorData(ya,function(Eb,Pb){delete Ka.loading[Ta];
if(Eb||!Pb)return cb.status="done",Ka.loaded[Ta]=cb,Aa(Eb);var fc=Pb.rawData,pb={};Pb.expires&&(pb.expires=Pb.expires);Pb.cacheControl&&(pb.cacheControl=Pb.cacheControl);var Db={};bb&&(Eb=bb.finish())&&(Db.resourceTiming=JSON.parse(JSON.stringify(Eb)));cb.vectorTile=Pb.vectorTile;cb.parse(Pb.vectorTile,Ka.layerIndex,Ka.availableImages,Ka.actor,function(Rb,xc){if(Rb||!xc)return Aa(Rb);Aa(null,a.extend({rawTileData:fc.slice(0)},xc,pb,Db))});Ka.loaded=Ka.loaded||{};Ka.loaded[Ta]=cb})};Xa.prototype.reloadTile=
function(ya,Aa){var Ka=this,Ta=this.loaded,bb=ya.uid,cb=this;if(Ta&&Ta[bb]){var Eb=Ta[bb];Eb.showCollisionBoxes=ya.showCollisionBoxes;ya=function(Pb,fc){var pb=Eb.reloadCallback;pb&&(delete Eb.reloadCallback,Eb.parse(Eb.vectorTile,cb.layerIndex,Ka.availableImages,cb.actor,pb));Aa(Pb,fc)};"parsing"===Eb.status?Eb.reloadCallback=ya:"done"===Eb.status&&(Eb.vectorTile?Eb.parse(Eb.vectorTile,this.layerIndex,this.availableImages,this.actor,ya):ya())}};Xa.prototype.abortTile=function(ya,Aa){var Ka=this.loading;
ya=ya.uid;Ka&&Ka[ya]&&Ka[ya].abort&&(Ka[ya].abort(),delete Ka[ya]);Aa()};Xa.prototype.removeTile=function(ya,Aa){var Ka=this.loaded;ya=ya.uid;Ka&&Ka[ya]&&delete Ka[ya];Aa()};var $a=a.window.ImageBitmap,gb=function(){this.loaded={}};gb.prototype.loadTile=function(ya,Aa){var Ka=ya.uid,Ta=ya.encoding;ya=ya.rawImageData;ya=$a&&ya instanceof $a?this.getImageData(ya):ya;Ta=new a.DEMData(Ka,ya,Ta);this.loaded=this.loaded||{};this.loaded[Ka]=Ta;Aa(null,Ta)};gb.prototype.getImageData=function(ya){this.offscreenCanvas&&
this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(ya.width,ya.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d"));this.offscreenCanvas.width=ya.width;this.offscreenCanvas.height=ya.height;this.offscreenCanvasContext.drawImage(ya,0,0,ya.width,ya.height);ya=this.offscreenCanvasContext.getImageData(-1,-1,ya.width+2,ya.height+2);this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height);return new a.RGBAImage({width:ya.width,
height:ya.height},ya.data)};gb.prototype.removeTile=function(ya){var Aa=this.loaded;ya=ya.uid;Aa&&Aa[ya]&&delete Aa[ya]};var sb=a.vectorTile.VectorTileFeature.prototype.toGeoJSON,jb=function(ya){this._feature=ya;this.extent=a.EXTENT;this.type=ya.type;this.properties=ya.tags;"id"in ya&&!isNaN(ya.id)&&(this.id=parseInt(ya.id,10))};jb.prototype.loadGeometry=function(){if(1===this._feature.type){for(var ya=[],Aa=0,Ka=this._feature.geometry;Aa<Ka.length;Aa+=1){var Ta=Ka[Aa];ya.push([new a.Point$1(Ta[0],
Ta[1])])}return ya}ya=[];Aa=0;for(Ka=this._feature.geometry;Aa<Ka.length;Aa+=1){Ta=[];for(var bb=0,cb=Ka[Aa];bb<cb.length;bb+=1){var Eb=cb[bb];Ta.push(new a.Point$1(Eb[0],Eb[1]))}ya.push(Ta)}return ya};jb.prototype.toGeoJSON=function(ya,Aa,Ka){return sb.call(this,ya,Aa,Ka)};var vb=function(ya){this.layers={_geojsonTileLayer:this};this.name="_geojsonTileLayer";this.extent=a.EXTENT;this.length=ya.length;this._features=ya};vb.prototype.feature=function(ya){return new jb(this._features[ya])};var qb=a.vectorTile.VectorTileFeature;
f.prototype.feature=function(ya){return new q(this.features[ya],this.options.extent)};q.prototype.loadGeometry=function(){var ya=this.rawGeometry;this.geometry=[];for(var Aa=0;Aa<ya.length;Aa++){for(var Ka=ya[Aa],Ta=[],bb=0;bb<Ka.length;bb++)Ta.push(new a.Point$1(Ka[bb][0],Ka[bb][1]));this.geometry.push(Ta)}return this.geometry};q.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ya=this.geometry,Aa=Infinity,Ka=-Infinity,Ta=Infinity,bb=-Infinity,cb=0;cb<ya.length;cb++)for(var Eb=
ya[cb],Pb=0;Pb<Eb.length;Pb++){var fc=Eb[Pb];Aa=Math.min(Aa,fc.x);Ka=Math.max(Ka,fc.x);Ta=Math.min(Ta,fc.y);bb=Math.max(bb,fc.y)}return[Aa,Ta,Ka,bb]};q.prototype.toGeoJSON=qb.prototype.toGeoJSON;var Bb=t;Bb.fromVectorTileJs=t;Bb.fromGeojsonVt=function(ya,Aa){Aa=Aa||{};var Ka={},Ta;for(Ta in ya)Ka[Ta]=new f(ya[Ta].features,Aa),Ka[Ta].name=Ta,Ka[Ta].version=Aa.version,Ka[Ta].extent=Aa.extent;return t({layers:Ka})};Bb.GeoJSONWrapper=f;var ub=function(ya){return ya[0]},wb=function(ya){return ya[1]},rb=
function(ya,Aa,Ka,Ta,bb){void 0===Aa&&(Aa=ub);void 0===Ka&&(Ka=wb);void 0===Ta&&(Ta=64);void 0===bb&&(bb=Float64Array);this.nodeSize=Ta;this.points=ya;var cb=this.ids=new (65536>ya.length?Uint16Array:Uint32Array)(ya.length);bb=this.coords=new bb(2*ya.length);for(var Eb=0;Eb<ya.length;Eb++)cb[Eb]=Eb,bb[2*Eb]=Aa(ya[Eb]),bb[2*Eb+1]=Ka(ya[Eb]);D(cb,bb,Ta,0,cb.length-1,0)};rb.prototype.range=function(ya,Aa,Ka,Ta){for(var bb=this.ids,cb=this.coords,Eb=this.nodeSize,Pb=[0,bb.length-1,0],fc=[],pb,Db;Pb.length;){var Rb=
Pb.pop(),xc=Pb.pop(),Ic=Pb.pop();if(xc-Ic<=Eb)for(Rb=Ic;Rb<=xc;Rb++)pb=cb[2*Rb],Db=cb[2*Rb+1],pb>=ya&&pb<=Ka&&Db>=Aa&&Db<=Ta&&fc.push(bb[Rb]);else{var Ja=Math.floor((Ic+xc)/2);pb=cb[2*Ja];Db=cb[2*Ja+1];pb>=ya&&pb<=Ka&&Db>=Aa&&Db<=Ta&&fc.push(bb[Ja]);var Pa=(Rb+1)%2;if(0===Rb?ya<=pb:Aa<=Db)Pb.push(Ic),Pb.push(Ja-1),Pb.push(Pa);if(0===Rb?Ka>=pb:Ta>=Db)Pb.push(Ja+1),Pb.push(xc),Pb.push(Pa)}}return fc};rb.prototype.within=function(ya,Aa,Ka){for(var Ta=this.ids,bb=this.coords,cb=this.nodeSize,Eb=[0,Ta.length-
1,0],Pb=[],fc=Ka*Ka;Eb.length;){var pb=Eb.pop(),Db=Eb.pop(),Rb=Eb.pop();if(Db-Rb<=cb)for(pb=Rb;pb<=Db;pb++){Rb=bb[2*pb]-ya;var xc=bb[2*pb+1]-Aa;Rb*Rb+xc*xc<=fc&&Pb.push(Ta[pb])}else{xc=Math.floor((Rb+Db)/2);var Ic=bb[2*xc],Ja=bb[2*xc+1],Pa=Ic-ya,db=Ja-Aa;Pa*Pa+db*db<=fc&&Pb.push(Ta[xc]);Pa=(pb+1)%2;if(0===pb?ya-Ka<=Ic:Aa-Ka<=Ja)Eb.push(Rb),Eb.push(xc-1),Eb.push(Pa);if(0===pb?ya+Ka>=Ic:Aa+Ka>=Ja)Eb.push(xc+1),Eb.push(Db),Eb.push(Pa)}}return Pb};var Ab={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,
log:!1,generateId:!1,reduce:null,map:function(ya){return ya}},Ma=function(ya){this.options=O(Object.create(Ab),ya);this.trees=Array(this.options.maxZoom+1)};Ma.prototype.load=function(ya){var Aa=this.options,Ka=Aa.log,Ta=Aa.minZoom,bb=Aa.maxZoom;Aa=Aa.nodeSize;Ka&&console.time("total time");var cb="prepare "+ya.length+" points";Ka&&console.time(cb);this.points=ya;for(var Eb=[],Pb=0;Pb<ya.length;Pb++)if(ya[Pb].geometry){var fc=Eb,pb=fc.push;var Db=Pb;var Rb=ya[Pb].geometry.coordinates;Db={x:Rb[0]/
360+.5,y:K(Rb[1]),zoom:Infinity,index:Db,parentId:-1};pb.call(fc,Db)}this.trees[bb+1]=new rb(Eb,I,L,Aa,Float32Array);Ka&&console.timeEnd(cb);for(ya=bb;ya>=Ta;ya--)bb=+Date.now(),Eb=this._cluster(Eb,ya),this.trees[ya]=new rb(Eb,I,L,Aa,Float32Array),Ka&&console.log("z%d: %d clusters in %dms",ya,Eb.length,+Date.now()-bb);Ka&&console.timeEnd("total time");return this};Ma.prototype.getClusters=function(ya,Aa){var Ka=((ya[0]+180)%360+360)%360-180,Ta=Math.max(-90,Math.min(90,ya[1])),bb=180===ya[2]?180:((ya[2]+
180)%360+360)%360-180,cb=Math.max(-90,Math.min(90,ya[3]));if(360<=ya[2]-ya[0])Ka=-180,bb=180;else if(Ka>bb)return Ka=this.getClusters([Ka,Ta,180,cb],Aa),Ta=this.getClusters([-180,Ta,bb,cb],Aa),Ka.concat(Ta);Aa=this.trees[this._limitZoom(Aa)];ya=[];var Eb=0;for(Ta=Aa.range(Ka/360+.5,K(cb),bb/360+.5,K(Ta));Eb<Ta.length;Eb+=1)bb=Aa.points[Ta[Eb]],ya.push(bb.numPoints?F(bb):this.points[bb.index]);return ya};Ma.prototype.getChildren=function(ya){var Aa=this._getOriginId(ya),Ka=this._getOriginZoom(ya),
Ta=this.trees[Ka];if(!Ta)throw Error("No cluster with the specified id.");var bb=Ta.points[Aa];if(!bb)throw Error("No cluster with the specified id.");Aa=[];var cb=0;for(Ka=Ta.within(bb.x,bb.y,this.options.radius/(this.options.extent*Math.pow(2,Ka-1)));cb<Ka.length;cb+=1)bb=Ta.points[Ka[cb]],bb.parentId===ya&&Aa.push(bb.numPoints?F(bb):this.points[bb.index]);if(0===Aa.length)throw Error("No cluster with the specified id.");return Aa};Ma.prototype.getLeaves=function(ya,Aa,Ka){var Ta=[];this._appendLeaves(Ta,
ya,Aa||10,Ka||0,0);return Ta};Ma.prototype.getTile=function(ya,Aa,Ka){var Ta=this.trees[this._limitZoom(ya)];ya=Math.pow(2,ya);var bb=this.options;bb=bb.radius/bb.extent;var cb=(Ka-bb)/ya,Eb=(Ka+1+bb)/ya,Pb={features:[]};this._addTileFeatures(Ta.range((Aa-bb)/ya,cb,(Aa+1+bb)/ya,Eb),Ta.points,Aa,Ka,ya,Pb);0===Aa&&this._addTileFeatures(Ta.range(1-bb/ya,cb,1,Eb),Ta.points,ya,Ka,ya,Pb);Aa===ya-1&&this._addTileFeatures(Ta.range(0,cb,bb/ya,Eb),Ta.points,-1,Ka,ya,Pb);return Pb.features.length?Pb:null};Ma.prototype.getClusterExpansionZoom=
function(ya){for(var Aa=this._getOriginZoom(ya)-1;Aa<=this.options.maxZoom;){ya=this.getChildren(ya);Aa++;if(1!==ya.length)break;ya=ya[0].properties.cluster_id}return Aa};Ma.prototype._appendLeaves=function(ya,Aa,Ka,Ta,bb){var cb=0;for(Aa=this.getChildren(Aa);cb<Aa.length;cb+=1){var Eb=Aa[cb],Pb=Eb.properties;Pb&&Pb.cluster?bb=bb+Pb.point_count<=Ta?bb+Pb.point_count:this._appendLeaves(ya,Pb.cluster_id,Ka,Ta,bb):bb<Ta?bb++:ya.push(Eb);if(ya.length===Ka)break}return bb};Ma.prototype._addTileFeatures=
function(ya,Aa,Ka,Ta,bb,cb){for(var Eb=0;Eb<ya.length;Eb+=1){var Pb=Aa[ya[Eb]],fc=Pb.numPoints,pb={type:1,geometry:[[Math.round(this.options.extent*(Pb.x*bb-Ka)),Math.round(this.options.extent*(Pb.y*bb-Ta))]],tags:fc?J(Pb):this.points[Pb.index].properties},Db=void 0;fc?Db=Pb.id:this.options.generateId?Db=Pb.index:this.points[Pb.index].id&&(Db=this.points[Pb.index].id);void 0!==Db&&(pb.id=Db);cb.features.push(pb)}};Ma.prototype._limitZoom=function(ya){return Math.max(this.options.minZoom,Math.min(ya,
this.options.maxZoom+1))};Ma.prototype._cluster=function(ya,Aa){var Ka=[],Ta=this.options,bb=Ta.reduce;Ta=Ta.radius/(Ta.extent*Math.pow(2,Aa));for(var cb=0;cb<ya.length;cb++){var Eb=ya[cb];if(!(Eb.zoom<=Aa)){Eb.zoom=Aa;for(var Pb=this.trees[Aa+1],fc=Pb.within(Eb.x,Eb.y,Ta),pb=Eb.numPoints||1,Db=Eb.x*pb,Rb=Eb.y*pb,xc=bb&&1<pb?this._map(Eb,!0):null,Ic=(cb<<5)+(Aa+1)+this.points.length,Ja=0;Ja<fc.length;Ja+=1){var Pa=Pb.points[fc[Ja]];if(!(Pa.zoom<=Aa)){Pa.zoom=Aa;var db=Pa.numPoints||1;Db+=Pa.x*db;
Rb+=Pa.y*db;pb+=db;Pa.parentId=Ic;bb&&(xc||(xc=this._map(Eb,!0)),bb(xc,this._map(Pa)))}}1===pb?Ka.push(Eb):(Eb.parentId=Ic,Ka.push({x:Db/pb,y:Rb/pb,zoom:Infinity,id:Ic,parentId:-1,numPoints:pb,properties:xc}))}}return Ka};Ma.prototype._getOriginId=function(ya){return ya-this.points.length>>5};Ma.prototype._getOriginZoom=function(ya){return(ya-this.points.length)%32};Ma.prototype._map=function(ya,Aa){if(ya.numPoints)return Aa?O({},ya.properties):ya.properties;ya=this.points[ya.index].properties;var Ka=
this.options.map(ya);return Aa&&Ka===ya?O({},Ka):Ka};ka.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1E5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};ka.prototype.splitTile=function(ya,Aa,Ka,Ta,bb,cb,Eb){for(var Pb=[ya,Aa,Ka,Ta],fc=this.options,pb=fc.debug;Pb.length;){Ta=Pb.pop();Ka=Pb.pop();Aa=Pb.pop();ya=Pb.pop();var Db=1<<Aa,Rb=32*((1<<Aa)*Ta+Ka)+Aa,xc=this.tiles[Rb];if(!xc){1<pb&&console.time("creation");xc=this.tiles;for(var Ic=ya,Ja=fc,
Pa=Aa===Ja.maxZoom?0:Ja.tolerance/((1<<Aa)*Ja.extent),db={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Ka,y:Ta,z:Aa,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Jb=0;Jb<Ic.length;Jb++){db.numFeatures++;var Gb=void 0,cc=db,uc=Ic[Jb],fd=Pa,kb=Ja,Qb=uc.geometry,dc=uc.type,Ec=[];if("Point"===dc||"MultiPoint"===dc)for(var Qc=0;Qc<Qb.length;Qc+=3)Ec.push(Qb[Qc]),Ec.push(Qb[Qc+1]),cc.numPoints++,cc.numSimplified++;else if("LineString"===dc)la(Ec,Qb,cc,fd,!1,!1);else if("MultiLineString"===
dc||"Polygon"===dc)for(Qc=0;Qc<Qb.length;Qc++)la(Ec,Qb[Qc],cc,fd,"Polygon"===dc,0===Qc);else if("MultiPolygon"===dc)for(var Tc=0;Tc<Qb.length;Tc++){var tb=Qb[Tc];for(Qc=0;Qc<tb.length;Qc++)la(Ec,tb[Qc],cc,fd,!0,0===Qc)}if(Ec.length){fd=uc.tags||null;if("LineString"===dc&&kb.lineMetrics){fd={};for(Gb in uc.tags)fd[Gb]=uc.tags[Gb];fd.mapbox_clip_start=Qb.start/Qb.size;fd.mapbox_clip_end=Qb.end/Qb.size}Gb={geometry:Ec,type:"Polygon"===dc||"MultiPolygon"===dc?3:"LineString"===dc||"MultiLineString"===
dc?2:1,tags:fd};null!==uc.id&&(Gb.id=uc.id);cc.features.push(Gb)}cc=Ic[Jb].minX;uc=Ic[Jb].minY;Gb=Ic[Jb].maxX;kb=Ic[Jb].maxY;cc<db.minX&&(db.minX=cc);uc<db.minY&&(db.minY=uc);Gb>db.maxX&&(db.maxX=Gb);kb>db.maxY&&(db.maxY=kb)}xc=xc[Rb]=db;this.tileCoords.push({z:Aa,x:Ka,y:Ta});pb&&(1<pb&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Aa,Ka,Ta,xc.numFeatures,xc.numPoints,xc.numSimplified),console.timeEnd("creation")),Rb="z"+Aa,this.stats[Rb]=(this.stats[Rb]||0)+1,this.total++)}xc.source=
ya;if(bb){if(Aa===fc.maxZoom||Aa===bb)continue;Rb=1<<bb-Aa;if(Ka!==Math.floor(cb/Rb)||Ta!==Math.floor(Eb/Rb))continue}else if(Aa===fc.indexMaxZoom||xc.numPoints<=fc.indexMaxPoints)continue;xc.source=null;0!==ya.length&&(1<pb&&console.time("clipping"),Rb=.5*fc.buffer/fc.extent,Ic=.5-Rb,Ja=.5+Rb,Pa=1+Rb,db=Jb=cc=uc=null,Gb=ha(ya,Db,Ka-Rb,Ka+Ja,0,xc.minX,xc.maxX,fc),ya=ha(ya,Db,Ka+Ic,Ka+Pa,0,xc.minX,xc.maxX,fc),Gb&&(db=ha(Gb,Db,Ta-Rb,Ta+Ja,1,xc.minY,xc.maxY,fc),Jb=ha(Gb,Db,Ta+Ic,Ta+Pa,1,xc.minY,xc.maxY,
fc)),ya&&(cc=ha(ya,Db,Ta-Rb,Ta+Ja,1,xc.minY,xc.maxY,fc),uc=ha(ya,Db,Ta+Ic,Ta+Pa,1,xc.minY,xc.maxY,fc)),1<pb&&console.timeEnd("clipping"),Pb.push(db||[],Aa+1,2*Ka,2*Ta),Pb.push(Jb||[],Aa+1,2*Ka,2*Ta+1),Pb.push(cc||[],Aa+1,2*Ka+1,2*Ta),Pb.push(uc||[],Aa+1,2*Ka+1,2*Ta+1))}};ka.prototype.getTile=function(ya,Aa,Ka){var Ta=this.options,bb=Ta.extent;Ta=Ta.debug;if(0>ya||24<ya)return null;var cb=1<<ya;Aa=(Aa%cb+cb)%cb;cb=32*((1<<ya)*Ka+Aa)+ya;if(this.tiles[cb])return ra(this.tiles[cb],bb);1<Ta&&console.log("drilling down to z%d-%d-%d",
ya,Aa,Ka);for(var Eb=ya,Pb=Aa,fc=Ka,pb;!pb&&0<Eb;)Eb--,Pb=Math.floor(Pb/2),fc=Math.floor(fc/2),pb=this.tiles[32*((1<<Eb)*fc+Pb)+Eb];if(!pb||!pb.source)return null;1<Ta&&console.log("found parent tile z%d-%d-%d",Eb,Pb,fc);1<Ta&&console.time("drilling down");this.splitTile(pb.source,Eb,Pb,fc,ya,Aa,Ka);1<Ta&&console.timeEnd("drilling down");return this.tiles[cb]?ra(this.tiles[cb],bb):null};var La=function(ya){function Aa(Ka,Ta,bb,cb){ya.call(this,Ka,Ta,bb,na);cb&&(this.loadGeoJSON=cb)}ya&&(Aa.__proto__=
ya);Aa.prototype=Object.create(ya&&ya.prototype);Aa.prototype.constructor=Aa;Aa.prototype.loadData=function(Ka,Ta){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});this._pendingCallback=Ta;this._pendingLoadDataParams=Ka;this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())};Aa.prototype._loadData=function(){var Ka=this;if(this._pendingCallback&&this._pendingLoadDataParams){var Ta=this._pendingCallback,bb=this._pendingLoadDataParams;
delete this._pendingCallback;delete this._pendingLoadDataParams;var cb=bb&&bb.request&&bb.request.collectResourceTiming?new a.RequestPerformance(bb.request):!1;this.loadGeoJSON(bb,function(Eb,Pb){if(Eb||!Pb)return Ta(Eb);if("object"!==typeof Pb)return Ta(Error("Input data given to '"+bb.source+"' is not a valid GeoJSON object."));c(Pb,!0);try{Ka._geoJSONIndex=bb.cluster?(new Ma(qa(bb))).load(Pb.features):new ka(Pb,bb.geojsonVtOptions)}catch(fc){return Ta(fc)}Ka.loaded={};Eb={};cb&&(Pb=cb.finish())&&
(Eb.resourceTiming={},Eb.resourceTiming[bb.source]=JSON.parse(JSON.stringify(Pb)));Ta(null,Eb)})}};Aa.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())};Aa.prototype.reloadTile=function(Ka,Ta){var bb=this.loaded,cb=Ka.uid;return bb&&bb[cb]?ya.prototype.reloadTile.call(this,Ka,Ta):this.loadTile(Ka,Ta)};Aa.prototype.loadGeoJSON=function(Ka,Ta){if(Ka.request)a.getJSON(Ka.request,Ta);else if("string"===
typeof Ka.data)try{return Ta(null,JSON.parse(Ka.data))}catch(bb){return Ta(Error("Input data given to '"+Ka.source+"' is not a valid GeoJSON object."))}else return Ta(Error("Input data given to '"+Ka.source+"' is not a valid GeoJSON object."))};Aa.prototype.removeSource=function(Ka,Ta){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});Ta()};Aa.prototype.getClusterExpansionZoom=function(Ka,Ta){try{Ta(null,this._geoJSONIndex.getClusterExpansionZoom(Ka.clusterId))}catch(bb){Ta(bb)}};
Aa.prototype.getClusterChildren=function(Ka,Ta){try{Ta(null,this._geoJSONIndex.getChildren(Ka.clusterId))}catch(bb){Ta(bb)}};Aa.prototype.getClusterLeaves=function(Ka,Ta){try{Ta(null,this._geoJSONIndex.getLeaves(Ka.clusterId,Ka.limit,Ka.offset))}catch(bb){Ta(bb)}};return Aa}(Xa);qb=function(ya){var Aa=this;this.self=ya;this.actor=new a.Actor(ya,this);this.layerIndexes={};this.availableImages={};this.workerSourceTypes={vector:Xa,geojson:La};this.workerSources={};this.demWorkerSources={};this.self.registerWorkerSource=
function(Ka,Ta){if(Aa.workerSourceTypes[Ka])throw Error('Worker source with name "'+Ka+'" already registered.');Aa.workerSourceTypes[Ka]=Ta};this.self.registerRTLTextPlugin=function(Ka){if(a.plugin.isParsed())throw Error("RTL text plugin already registered.");a.plugin.applyArabicShaping=Ka.applyArabicShaping;a.plugin.processBidirectionalText=Ka.processBidirectionalText;a.plugin.processStyledBidirectionalText=Ka.processStyledBidirectionalText}};qb.prototype.setReferrer=function(ya,Aa){this.referrer=
Aa};qb.prototype.setImages=function(ya,Aa,Ka){this.availableImages[ya]=Aa;for(var Ta in this.workerSources[ya]){var bb=this.workerSources[ya][Ta],cb;for(cb in bb)bb[cb].availableImages=Aa}Ka()};qb.prototype.setLayers=function(ya,Aa,Ka){this.getLayerIndex(ya).replace(Aa);Ka()};qb.prototype.updateLayers=function(ya,Aa,Ka){this.getLayerIndex(ya).update(Aa.layers,Aa.removedIds);Ka()};qb.prototype.loadTile=function(ya,Aa,Ka){this.getWorkerSource(ya,Aa.type,Aa.source).loadTile(Aa,Ka)};qb.prototype.loadDEMTile=
function(ya,Aa,Ka){this.getDEMWorkerSource(ya,Aa.source).loadTile(Aa,Ka)};qb.prototype.reloadTile=function(ya,Aa,Ka){this.getWorkerSource(ya,Aa.type,Aa.source).reloadTile(Aa,Ka)};qb.prototype.abortTile=function(ya,Aa,Ka){this.getWorkerSource(ya,Aa.type,Aa.source).abortTile(Aa,Ka)};qb.prototype.removeTile=function(ya,Aa,Ka){this.getWorkerSource(ya,Aa.type,Aa.source).removeTile(Aa,Ka)};qb.prototype.removeDEMTile=function(ya,Aa){this.getDEMWorkerSource(ya,Aa.source).removeTile(Aa)};qb.prototype.removeSource=
function(ya,Aa,Ka){if(this.workerSources[ya]&&this.workerSources[ya][Aa.type]&&this.workerSources[ya][Aa.type][Aa.source]){var Ta=this.workerSources[ya][Aa.type][Aa.source];delete this.workerSources[ya][Aa.type][Aa.source];void 0!==Ta.removeSource?Ta.removeSource(Aa,Ka):Ka()}};qb.prototype.loadWorkerSource=function(ya,Aa,Ka){try{this.self.importScripts(Aa.url),Ka()}catch(Ta){Ka(Ta.toString())}};qb.prototype.syncRTLPluginState=function(ya,Aa,Ka){try{a.plugin.setState(Aa);var Ta=a.plugin.getPluginURL();
if(a.plugin.isLoaded()&&!a.plugin.isParsed()&&null!=Ta){this.self.importScripts(Ta);var bb=a.plugin.isParsed();Ka(bb?void 0:Error("RTL Text Plugin failed to import scripts from "+Ta),bb)}}catch(cb){Ka(cb.toString())}};qb.prototype.getAvailableImages=function(ya){(ya=this.availableImages[ya])||(ya=[]);return ya};qb.prototype.getLayerIndex=function(ya){var Aa=this.layerIndexes[ya];Aa||(Aa=this.layerIndexes[ya]=new ta);return Aa};qb.prototype.getWorkerSource=function(ya,Aa,Ka){var Ta=this;this.workerSources[ya]||
(this.workerSources[ya]={});this.workerSources[ya][Aa]||(this.workerSources[ya][Aa]={});this.workerSources[ya][Aa][Ka]||(this.workerSources[ya][Aa][Ka]=new this.workerSourceTypes[Aa]({send:function(bb,cb,Eb){Ta.actor.send(bb,cb,Eb,ya)}},this.getLayerIndex(ya),this.getAvailableImages(ya)));return this.workerSources[ya][Aa][Ka]};qb.prototype.getDEMWorkerSource=function(ya,Aa){this.demWorkerSources[ya]||(this.demWorkerSources[ya]={});this.demWorkerSources[ya][Aa]||(this.demWorkerSources[ya][Aa]=new gb);
return this.demWorkerSources[ya][Aa]};qb.prototype.enforceCacheSizeLimit=function(ya,Aa){a.enforceCacheSizeLimit(Aa)};"undefined"!==typeof WorkerGlobalScope&&"undefined"!==typeof a.window&&a.window instanceof WorkerGlobalScope&&(a.window.worker=new qb(a.window));return qb});p(["./shared"],function(a){function g(mb){if(!Eb)return mb[0];for(var S=0;S<mb.length;S++)if(mb[S]in Eb)return mb[S];return mb[0]}function h(mb,S,X){function V(){if(Da)X(Da);else if(ea&&va){var Xb=a.browser.getImageData(va),jc=
{},Jc;for(Jc in ea){var Kc=ea[Jc],$c=Kc.width,ad=Kc.height,Wc=Kc.x,wd=Kc.y,Ed=Kc.sdf,Ld=Kc.pixelRatio,he=Kc.stretchX,de=Kc.stretchY;Kc=Kc.content;var me=new a.RGBAImage({width:$c,height:ad});a.RGBAImage.copy(Xb,me,{x:Wc,y:wd},{x:0,y:0},{width:$c,height:ad});jc[Jc]={data:me,pixelRatio:Ld,sdf:Ed,stretchX:he,stretchY:de,content:Kc}}X(null,jc)}}var ea,va,Da,Ra=1<a.browser.devicePixelRatio?"@2x":"",nb=a.getJSON(S.transformRequest(S.normalizeSpriteURL(mb,Ra,".json"),a.ResourceType.SpriteJSON),function(Xb,
jc){nb=null;Da||(Da=Xb,ea=jc,V())}),Nb=a.getImage(S.transformRequest(S.normalizeSpriteURL(mb,Ra,".png"),a.ResourceType.SpriteImage),function(Xb,jc){Nb=null;Da||(Da=Xb,va=jc,V())});return{cancel:function(){nb&&(nb.cancel(),nb=null);Nb&&(Nb.cancel(),Nb=null)}}}function r(mb,S,X,V,ea,va){this.fontSize=mb||24;this.buffer=void 0===S?3:S;this.cutoff=V||.25;this.fontFamily=ea||"sans-serif";this.fontWeight=va||"normal";this.radius=X||8;mb=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas");
this.canvas.width=this.canvas.height=mb;this.ctx=this.canvas.getContext("2d");this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily;this.ctx.textBaseline="middle";this.ctx.fillStyle="black";this.gridOuter=new Float64Array(mb*mb);this.gridInner=new Float64Array(mb*mb);this.f=new Float64Array(mb);this.d=new Float64Array(mb);this.z=new Float64Array(mb+1);this.v=new Int16Array(mb);this.middle=Math.round(mb/2*(0<=navigator.userAgent.indexOf("Gecko/")?1.2:1))}function l(mb,S,X,V,ea,va,Da){for(var Ra=
0;Ra<S;Ra++){for(var nb=0;nb<X;nb++)V[nb]=mb[nb*S+Ra];c(V,ea,va,Da,X);for(nb=0;nb<X;nb++)mb[nb*S+Ra]=ea[nb]}for(nb=0;nb<X;nb++){for(Ra=0;Ra<S;Ra++)V[Ra]=mb[nb*S+Ra];c(V,ea,va,Da,S);for(Ra=0;Ra<S;Ra++)mb[nb*S+Ra]=Math.sqrt(ea[Ra])}}function c(mb,S,X,V,ea){X[0]=0;V[0]=-1E20;V[1]=1E20;for(var va=1,Da=0;va<ea;va++){for(var Ra=(mb[va]+va*va-(mb[X[Da]]+X[Da]*X[Da]))/(2*va-2*X[Da]);Ra<=V[Da];)Da--,Ra=(mb[va]+va*va-(mb[X[Da]]+X[Da]*X[Da]))/(2*va-2*X[Da]);Da++;X[Da]=va;V[Da]=Ra;V[Da+1]=1E20}for(Da=va=0;va<
ea;va++){for(;V[Da+1]<va;)Da++;S[va]=(va-X[Da])*(va-X[Da])+mb[X[Da]]}}function d(mb,S,X){var V=function(ea,va){if(ea)return X(ea);va&&(ea=a.pick(a.extend(va,mb),"tiles minzoom maxzoom attribution mapbox_logo bounds scheme tileSize encoding".split(" ")),va.vector_layers&&(ea.vectorLayers=va.vector_layers,ea.vectorLayerIds=ea.vectorLayers.map(function(Da){return Da.id})),ea.tiles=S.canonicalizeTileset(ea,mb.url),X(null,ea))};return mb.url?a.getJSON(S.transformRequest(S.normalizeSourceURL(mb.url),a.ResourceType.Source),
V):a.browser.frame(function(){return V(null,mb)})}function e(mb){for(var S=Infinity,X=Infinity,V=-Infinity,ea=-Infinity,va=0;va<mb.length;va+=1){var Da=mb[va];S=Math.min(S,Da.x);X=Math.min(X,Da.y);V=Math.max(V,Da.x);ea=Math.max(ea,Da.y)}mb=Math.max(0,Math.floor(-Math.log(Math.max(V-S,ea-X))/Math.LN2));va=Math.pow(2,mb);return new a.CanonicalTileID(mb,Math.floor((S+V)/2*va),Math.floor((X+ea)/2*va))}function f(mb,S){var X=a.identity([]);a.translate(X,X,[1,1,0]);a.scale(X,X,[.5*mb.width,.5*mb.height,
1]);return a.multiply(X,X,mb.calculatePosMatrix(S.toUnwrapped()))}function q(mb,S,X){if(mb)for(var V=0;V<mb.length;V+=1){var ea=S[mb[V]];if(ea&&ea.source===X&&"fill-extrusion"===ea.type)return!0}else for(V in S)if(mb=S[V],mb.source===X&&"fill-extrusion"===mb.type)return!0;return!1}function t(mb,S,X,V,ea,va){var Da=q(ea&&ea.layers,S,mb.id),Ra=va.maxPitchScaleFactor();V=mb.tilesIn(V,Ra,Da);V.sort(z);Da=[];for(var nb=0;nb<V.length;nb+=1){var Nb=V[nb];Da.push({wrappedTileID:Nb.tileID.wrapped().key,queryResults:Nb.tile.queryRenderedFeatures(S,
X,mb._state,Nb.queryGeometry,Nb.cameraQueryGeometry,Nb.scale,ea,va,Ra,f(mb.transform,Nb.tileID))})}S=B(Da);for(var Xb in S)S[Xb].forEach(function(jc){jc=jc.feature;var Jc=mb.getFeatureState(jc.layer["source-layer"],jc.id);jc.source=jc.layer.source;jc.layer["source-layer"]&&(jc.sourceLayer=jc.layer["source-layer"]);jc.state=Jc});return S}function w(mb,S,X,V,ea,va,Da){var Ra={},nb=va.queryRenderedSymbols(V);V=[];va=0;for(var Nb=Object.keys(nb).map(Number);va<Nb.length;va+=1)V.push(Da[Nb[va]]);V.sort(z);
Da=function(){var Kc=jc[Xb],$c=Kc.featureIndex.lookupSymbolFeatures(nb[Kc.bucketInstanceId],S,Kc.bucketIndex,Kc.sourceLayerIndex,ea.filter,ea.layers,ea.availableImages,mb),ad;for(ad in $c){var Wc=Ra[ad]=Ra[ad]||[],wd=$c[ad];wd.sort(function(Ld,he){var de=Kc.featureSortOrder;return de?(Ld=de.indexOf(Ld.featureIndex),de.indexOf(he.featureIndex)-Ld):he.featureIndex-Ld.featureIndex});for(var Ed=0;Ed<wd.length;Ed+=1)Wc.push(wd[Ed])}};for(var Xb=0,jc=V;Xb<jc.length;Xb+=1)Da();Da=function(Kc){Ra[Kc].forEach(function($c){$c=
$c.feature;var ad=X[mb[Kc].source].getFeatureState($c.layer["source-layer"],$c.id);$c.source=$c.layer.source;$c.layer["source-layer"]&&($c.sourceLayer=$c.layer["source-layer"]);$c.state=ad})};for(var Jc in Ra)Da(Jc);return Ra}function x(mb,S){for(var X=mb.getRenderableIds().map(function(nb){return mb.getTileByID(nb)}),V=[],ea={},va=0;va<X.length;va++){var Da=X[va],Ra=Da.tileID.canonical.key;ea[Ra]||(ea[Ra]=!0,Da.querySourceFeatures(V,S))}return V}function z(mb,S){mb=mb.tileID;S=S.tileID;return mb.overscaledZ-
S.overscaledZ||mb.canonical.y-S.canonical.y||mb.wrap-S.wrap||mb.canonical.x-S.canonical.x}function B(mb){for(var S={},X={},V=0;V<mb.length;V+=1){var ea=mb[V],va=ea.queryResults;ea=ea.wrappedTileID;ea=X[ea]=X[ea]||{};for(var Da in va)for(var Ra=va[Da],nb=ea[Da]=ea[Da]||{},Nb=S[Da]=S[Da]||[],Xb=0;Xb<Ra.length;Xb+=1){var jc=Ra[Xb];nb[jc.featureIndex]||(nb[jc.featureIndex]=!0,Nb.push(jc))}}return S}function A(mb,S){var X=Math.abs(2*mb.wrap)-+(0>mb.wrap),V=Math.abs(2*S.wrap)-+(0>S.wrap);return mb.overscaledZ-
S.overscaledZ||V-X||S.canonical.y-mb.canonical.y||S.canonical.x-mb.canonical.x}function D(mb){return"raster"===mb||"image"===mb||"video"===mb}function C(){return new a.window.Worker(si.workerUrl)}function v(){qe||(qe=new qd);return qe}function y(mb,S){var X={},V;for(V in mb)"ref"!==V&&(X[V]=mb[V]);a.refProperties.forEach(function(ea){ea in S&&(X[ea]=S[ea])});return X}function F(mb){mb=mb.slice();for(var S=Object.create(null),X=0;X<mb.length;X++)S[mb[X].id]=mb[X];for(X=0;X<mb.length;X++)"ref"in mb[X]&&
(mb[X]=y(mb[X],S[mb[X].ref]));return mb}function J(mb,S,X,V){mb=mb||{};S=S||{};for(var ea in mb)if(mb.hasOwnProperty(ea)&&!S.hasOwnProperty(ea)){var va=ea,Da=V;X.push({command:Id.removeSource,args:[va]});Da[va]=!0}for(ea in S)if(S.hasOwnProperty(ea))if(!mb.hasOwnProperty(ea))X.push({command:Id.addSource,args:[ea,S[ea]]});else if(!a.deepEqual(mb[ea],S[ea])){if(va="geojson"===mb[ea].type&&"geojson"===S[ea].type)a:{va=void 0;Da=mb;var Ra=S,nb=ea;for(va in Da[nb])if(Da[nb].hasOwnProperty(va)&&"data"!==
va&&!a.deepEqual(Da[nb][va],Ra[nb][va])){va=!1;break a}for(va in Ra[nb])if(Ra[nb].hasOwnProperty(va)&&"data"!==va&&!a.deepEqual(Da[nb][va],Ra[nb][va])){va=!1;break a}va=!0}if(va)X.push({command:Id.setGeoJSONSourceData,args:[ea,S[ea].data]});else{va=ea;Da=S;Ra=X;nb=va;var Nb=V;Ra.push({command:Id.removeSource,args:[nb]});Nb[nb]=!0;Ra.push({command:Id.addSource,args:[va,Da[va]]})}}}function K(mb,S,X,V,ea,va){mb=mb||{};S=S||{};for(var Da in mb)mb.hasOwnProperty(Da)&&(a.deepEqual(mb[Da],S[Da])||X.push({command:va,
args:[V,Da,S[Da],ea]}));for(Da in S)S.hasOwnProperty(Da)&&!mb.hasOwnProperty(Da)&&(a.deepEqual(mb[Da],S[Da])||X.push({command:va,args:[V,Da,S[Da],ea]}))}function O(mb){return mb.id}function I(mb,S){mb[S.id]=S;return mb}function L(mb,S,X){mb=mb||[];S=S||[];var V=mb.map(O),ea=S.map(O);mb=mb.reduce(I,{});S=S.reduce(I,{});var va=V.slice(),Da=Object.create(null),Ra,nb,Nb;for(nb=Ra=0;Ra<V.length;Ra++){var Xb=V[Ra];S.hasOwnProperty(Xb)?nb++:(X.push({command:Id.removeLayer,args:[Xb]}),va.splice(va.indexOf(Xb,
nb),1))}for(nb=Ra=0;Ra<ea.length;Ra++)if(Xb=ea[ea.length-1-Ra],va[va.length-1-Ra]!==Xb){mb.hasOwnProperty(Xb)?(X.push({command:Id.removeLayer,args:[Xb]}),va.splice(va.lastIndexOf(Xb,va.length-nb),1)):nb++;var jc=va[va.length-Ra];X.push({command:Id.addLayer,args:[S[Xb],jc]});va.splice(va.length-Ra,0,Xb);Da[Xb]=!0}for(Ra=0;Ra<ea.length;Ra++)if(Xb=ea[Ra],nb=mb[Xb],V=S[Xb],!Da[Xb]&&!a.deepEqual(nb,V))if(a.deepEqual(nb.source,V.source)&&a.deepEqual(nb["source-layer"],V["source-layer"])&&a.deepEqual(nb.type,
V.type)){K(nb.layout,V.layout,X,Xb,null,Id.setLayoutProperty);K(nb.paint,V.paint,X,Xb,null,Id.setPaintProperty);a.deepEqual(nb.filter,V.filter)||X.push({command:Id.setFilter,args:[Xb,V.filter]});a.deepEqual(nb.minzoom,V.minzoom)&&a.deepEqual(nb.maxzoom,V.maxzoom)||X.push({command:Id.setLayerZoomRange,args:[Xb,V.minzoom,V.maxzoom]});for(Nb in nb)nb.hasOwnProperty(Nb)&&"layout"!==Nb&&"paint"!==Nb&&"filter"!==Nb&&"metadata"!==Nb&&"minzoom"!==Nb&&"maxzoom"!==Nb&&(0===Nb.indexOf("paint.")?K(nb[Nb],V[Nb],
X,Xb,Nb.slice(6),Id.setPaintProperty):a.deepEqual(nb[Nb],V[Nb])||X.push({command:Id.setLayerProperty,args:[Xb,Nb,V[Nb]]}));for(Nb in V)V.hasOwnProperty(Nb)&&!nb.hasOwnProperty(Nb)&&"layout"!==Nb&&"paint"!==Nb&&"filter"!==Nb&&"metadata"!==Nb&&"minzoom"!==Nb&&"maxzoom"!==Nb&&(0===Nb.indexOf("paint.")?K(nb[Nb],V[Nb],X,Xb,Nb.slice(6),Id.setPaintProperty):a.deepEqual(nb[Nb],V[Nb])||X.push({command:Id.setLayerProperty,args:[Xb,Nb,V[Nb]]}))}else X.push({command:Id.removeLayer,args:[Xb]}),jc=va[va.lastIndexOf(Xb)+
1],X.push({command:Id.addLayer,args:[V,jc]})}function H(mb,S){if(!mb)return[{command:Id.setStyle,args:[S]}];var X=[];try{if(!a.deepEqual(mb.version,S.version))return[{command:Id.setStyle,args:[S]}];a.deepEqual(mb.center,S.center)||X.push({command:Id.setCenter,args:[S.center]});a.deepEqual(mb.zoom,S.zoom)||X.push({command:Id.setZoom,args:[S.zoom]});a.deepEqual(mb.bearing,S.bearing)||X.push({command:Id.setBearing,args:[S.bearing]});a.deepEqual(mb.pitch,S.pitch)||X.push({command:Id.setPitch,args:[S.pitch]});
a.deepEqual(mb.sprite,S.sprite)||X.push({command:Id.setSprite,args:[S.sprite]});a.deepEqual(mb.glyphs,S.glyphs)||X.push({command:Id.setGlyphs,args:[S.glyphs]});a.deepEqual(mb.transition,S.transition)||X.push({command:Id.setTransition,args:[S.transition]});a.deepEqual(mb.light,S.light)||X.push({command:Id.setLight,args:[S.light]});var V={},ea=[];J(mb.sources,S.sources,ea,V);var va=[];mb.layers&&mb.layers.forEach(function(Da){V[Da.source]?X.push({command:Id.removeLayer,args:[Da.id]}):va.push(Da)});
X=X.concat(ea);L(va,S.layers,X)}catch(Da){console.warn("Unable to compute style diff:",Da),X=[{command:Id.setStyle,args:[S]}]}return X}function M(mb,S,X,V,ea){var va=a.create();S?(a.scale(va,va,[1/ea,1/ea,1]),X||a.rotateZ(va,va,V.angle)):a.multiply(va,V.labelPlaneMatrix,mb);return va}function Q(mb,S,X,V,ea){return S?(mb=a.clone(mb),a.scale(mb,mb,[ea,ea,1]),X||a.rotateZ(mb,mb,-V.angle),mb):V.glCoordMatrix}function Z(mb,S){mb=[mb.x,mb.y,0,1];ja(mb,mb,S);S=mb[3];return{point:new a.Point(mb[0]/S,mb[1]/
S),signedDistanceFromCamera:S}}function ca(mb,S,X,V,ea,va,Da,Ra){var nb=V?mb.textSizeData:mb.iconSizeData,Nb=a.evaluateSizeForZoom(nb,X.transform.zoom),Xb=[256/X.width*2+1,256/X.height*2+1],jc=V?mb.text.dynamicLayoutVertexArray:mb.icon.dynamicLayoutVertexArray;jc.clear();for(var Jc=mb.lineVertexArray,Kc=V?mb.text.placedSymbolArray:mb.icon.placedSymbolArray,$c=X.transform.width/X.transform.height,ad=!1,Wc=0;Wc<Kc.length;Wc++){var wd=Kc.get(Wc);if(wd.hidden||wd.writingMode===a.WritingMode.vertical&&
!ad)ba(wd.numGlyphs,jc);else{ad=!1;var Ed=[wd.anchorX,wd.anchorY,0,1];a.transformMat4(Ed,Ed,S);var Ld=Ed[0]/Ed[3],he=Ed[1]/Ed[3];if(Ld>=-Xb[0]&&Ld<=Xb[0]&&he>=-Xb[1]&&he<=Xb[1]){ad=.5+X.transform.cameraToCenterDistance/Ed[3]*.5;Ed=a.evaluateSizeForFeature(nb,Nb,wd);Ed=Da?Ed/ad:Ed*ad;Ld=new a.Point(wd.anchorX,wd.anchorY);he=Z(Ld,ea).point;var de={},me=U(wd,Ed,!1,Ra,S,ea,va,mb.glyphOffsetArray,Jc,jc,he,Ld,de,$c);ad=me.useVertical;(me.notEnoughRoom||ad||me.needsFlipping&&U(wd,Ed,!0,Ra,S,ea,va,mb.glyphOffsetArray,
Jc,jc,he,Ld,de,$c).notEnoughRoom)&&ba(wd.numGlyphs,jc)}else ba(wd.numGlyphs,jc)}}V?mb.text.dynamicLayoutVertexBuffer.updateData(jc):mb.icon.dynamicLayoutVertexBuffer.updateData(jc)}function W(mb,S,X,V,ea,va,Da,Ra,nb,Nb,Xb){var jc=Ra.glyphStartIndex+Ra.numGlyphs,Jc=Ra.lineStartIndex,Kc=Ra.lineStartIndex+Ra.lineLength,$c=S.getoffsetX(Ra.glyphStartIndex);S=S.getoffsetX(jc-1);$c=Y(mb*$c,X,V,ea,va,Da,Ra.segment,Jc,Kc,nb,Nb,Xb);return $c?(mb=Y(mb*S,X,V,ea,va,Da,Ra.segment,Jc,Kc,nb,Nb,Xb))?{first:$c,last:mb}:
null:null}function T(mb,S,X,V){return mb===a.WritingMode.horizontal&&Math.abs(X.y-S.y)>Math.abs(X.x-S.x)*V?{useVertical:!0}:(mb===a.WritingMode.vertical?S.y<X.y:S.x>X.x)?{needsFlipping:!0}:null}function U(mb,S,X,V,ea,va,Da,Ra,nb,Nb,Xb,jc,Jc,Kc){S/=24;var $c=mb.lineOffsetX*S,ad=mb.lineOffsetY*S;if(1<mb.numGlyphs){ea=mb.glyphStartIndex+mb.numGlyphs;var Wc=mb.lineStartIndex,wd=mb.lineStartIndex+mb.lineLength,Ed=W(S,Ra,$c,ad,X,Xb,jc,mb,nb,va,Jc);if(!Ed)return{notEnoughRoom:!0};var Ld=Z(Ed.first.point,
Da).point;Da=Z(Ed.last.point,Da).point;if(V&&!X&&(Kc=T(mb.writingMode,Ld,Da,Kc)))return Kc;Kc=[Ed.first];for(V=mb.glyphStartIndex+1;V<ea-1;V++)Kc.push(Y(S*Ra.getoffsetX(V),$c,ad,X,Xb,jc,mb.segment,Wc,wd,nb,va,Jc));Kc.push(Ed.last)}else{if(V&&!X&&(Wc=Z(jc,ea).point,wd=mb.lineStartIndex+mb.segment+1,wd=new a.Point(nb.getx(wd),nb.gety(wd)),Ed=Z(wd,ea),ea=0<Ed.signedDistanceFromCamera?Ed.point:ha(jc,wd,Wc,1,ea),Kc=T(mb.writingMode,Wc,ea,Kc)))return Kc;mb=Y(S*Ra.getoffsetX(mb.glyphStartIndex),$c,ad,X,
Xb,jc,mb.segment,mb.lineStartIndex,mb.lineStartIndex+mb.lineLength,nb,va,Jc);if(!mb)return{notEnoughRoom:!0};Kc=[mb]}mb=0;for(X=Kc;mb<X.length;mb+=1)va=X[mb],a.addDynamicAttributes(Nb,va.point,va.angle);return{}}function ha(mb,S,X,V,ea){mb=Z(mb.add(mb.sub(S)._unit()),ea).point;mb=X.sub(mb);return X.add(mb._mult(V/mb.mag()))}function Y(mb,S,X,V,ea,va,Da,Ra,nb,Nb,Xb,jc){var Jc=V?mb-S:mb+S;mb=0<Jc?1:-1;S=0;V&&(mb*=-1,S=Math.PI);0>mb&&(S+=Math.PI);V=0<mb?Ra+Da:Ra+Da+1;Da=ea;var Kc=0,$c=0,ad=Math.abs(Jc);
for(Jc=[];Kc+$c<=ad;){V+=mb;if(V<Ra||V>=nb)return null;ea=Da;Jc.push(Da);Da=jc[V];if(void 0===Da){Da=new a.Point(Nb.getx(V),Nb.gety(V));var Wc=Z(Da,Xb);0<Wc.signedDistanceFromCamera?Da=jc[V]=Wc.point:(Wc=V-mb,Wc=0===Kc?va:new a.Point(Nb.getx(Wc),Nb.gety(Wc)),Da=ha(Wc,Da,ea,ad-Kc+1,Xb))}Kc+=$c;$c=ea.dist(Da)}Ra=(ad-Kc)/$c;va=Da.sub(ea);Ra=va.mult(Ra)._add(ea);Ra._add(va._unit()._perp()._mult(X*mb));X=S+Math.atan2(Da.y-ea.y,Da.x-ea.x);Jc.push(Ra);return{point:Ra,angle:X,path:Jc}}function ba(mb,S){for(var X=
0;X<mb;X++){var V=S.length;S.resize(V+4);S.float32.set(oe,3*V)}}function ja(mb,S,X){var V=S[0];S=S[1];mb[0]=X[0]*V+X[4]*S+X[12];mb[1]=X[1]*V+X[5]*S+X[13];mb[3]=X[3]*V+X[7]*S+X[15];return mb}function ma(mb,S,X){return a.EXTENT/(mb.tileSize*Math.pow(2,X-mb.tileID.overscaledZ))*S}function ia(mb,S,X,V,ea){var va=a.getAnchorAlignment(mb);S*=-(va.horizontalAlign-.5);X*=-(va.verticalAlign-.5);mb=a.evaluateVariableOffset(mb,V);return new a.Point(S+mb[0]*ea,X+mb[1]*ea)}function oa(mb,S,X,V,ea,va){var Da=mb.x1,
Ra=mb.x2,nb=mb.y1,Nb=mb.y2,Xb=mb.anchorPointX;mb=mb.anchorPointY;S=new a.Point(S,X);V&&S._rotate(ea?va:-va);return{x1:Da+S.x,y1:nb+S.y,x2:Ra+S.x,y2:Nb+S.y,anchorPointX:Xb,anchorPointY:mb}}function xa(mb,S,X,V,ea){mb.emplaceBack(S?1:0,X?1:0,V||0,ea||0);mb.emplaceBack(S?1:0,X?1:0,V||0,ea||0);mb.emplaceBack(S?1:0,X?1:0,V||0,ea||0);mb.emplaceBack(S?1:0,X?1:0,V||0,ea||0)}function ra(mb){if(0===mb.opacity&&!mb.placed)return 0;if(1===mb.opacity&&mb.placed)return 4294967295;var S=mb.placed?1:0;mb=Math.floor(127*
mb.opacity);return mb*yc+S*vc+mb*oc+S*vd+mb*Qd+S*Yd+mb*xe+S}function la(mb,S){var X=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,V={};mb=mb.replace(X,function(ea,va,Da,Ra,nb){V[nb]=!0;return"define"===va?"\n#ifndef HAS_UNIFORM_u_"+nb+"\nvarying "+Da+" "+Ra+" "+nb+";\n#else\nuniform "+Da+" "+Ra+" u_"+nb+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+nb+"\n    "+Da+" "+Ra+" "+nb+" \x3d u_"+nb+";\n#endif\n"});S=S.replace(X,function(ea,va,Da,Ra,nb){ea="float"===Ra?"vec2":"vec4";var Nb=nb.match(/color/)?
"color":ea;return V[nb]?"define"===va?"\n#ifndef HAS_UNIFORM_u_"+nb+"\nuniform lowp float u_"+nb+"_t;\nattribute "+Da+" "+ea+" a_"+nb+";\nvarying "+Da+" "+Ra+" "+nb+";\n#else\nuniform "+Da+" "+Ra+" u_"+nb+";\n#endif\n":"vec4"===Nb?"\n#ifndef HAS_UNIFORM_u_"+nb+"\n    "+nb+" \x3d a_"+nb+";\n#else\n    "+Da+" "+Ra+" "+nb+" \x3d u_"+nb+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+nb+"\n    "+nb+" \x3d unpack_mix_"+Nb+"(a_"+nb+", u_"+nb+"_t);\n#else\n    "+Da+" "+Ra+" "+nb+" \x3d u_"+nb+";\n#endif\n":"define"===
va?"\n#ifndef HAS_UNIFORM_u_"+nb+"\nuniform lowp float u_"+nb+"_t;\nattribute "+Da+" "+ea+" a_"+nb+";\n#else\nuniform "+Da+" "+Ra+" u_"+nb+";\n#endif\n":"vec4"===Nb?"\n#ifndef HAS_UNIFORM_u_"+nb+"\n    "+Da+" "+Ra+" "+nb+" \x3d a_"+nb+";\n#else\n    "+Da+" "+Ra+" "+nb+" \x3d u_"+nb+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+nb+"\n    "+Da+" "+Ra+" "+nb+" \x3d unpack_mix_"+Nb+"(a_"+nb+", u_"+nb+"_t);\n#else\n    "+Da+" "+Ra+" "+nb+" \x3d u_"+nb+";\n#endif\n"});return{fragmentSource:mb,vertexSource:S}}
function ka(mb,S,X){var V=1/ma(X,1,S.transform.tileZoom),ea=Math.pow(2,X.tileID.overscaledZ);S=X.tileSize*Math.pow(2,S.transform.tileZoom)/ea;ea=S*(X.tileID.canonical.x+X.tileID.wrap*ea);S*=X.tileID.canonical.y;return{u_image:0,u_texsize:X.imageAtlasTexture.size,u_scale:[V,mb.fromScale,mb.toScale],u_fade:mb.t,u_pixel_coord_upper:[ea>>16,S>>16],u_pixel_coord_lower:[ea&65535,S&65535]}}function na(mb,S,X){return mb.translatePosMatrix(S.tileID.posMatrix,S,X.paint.get("line-translate"),X.paint.get("line-translate-anchor"))}
function qa(mb,S,X,V,ea,va,Da){for(var Ra=mb.context,nb=Ra.gl,Nb=mb.useProgram("collisionBox"),Xb=[],jc=0,Jc=0,Kc=0;Kc<V.length;Kc++){var $c=V[Kc],ad=S.getTile($c),Wc=ad.getBucket(X);if(Wc){var wd=$c.posMatrix;if(0!==ea[0]||0!==ea[1])wd=mb.translatePosMatrix($c.posMatrix,ad,ea,va);$c=Da?Wc.textCollisionBox:Wc.iconCollisionBox;var Ed=Wc.collisionCircleArray;if(0<Ed.length){var Ld=a.create(),he=wd;a.mul(Ld,Wc.placementInvProjMatrix,mb.transform.glCoordMatrix);a.mul(Ld,Ld,Wc.placementViewportMatrix);
Xb.push({circleArray:Ed,circleOffset:Jc,transform:he,invTransform:Ld});Jc=jc+=Ed.length/4}if($c){Wc=Nb;Ed=Wc.draw;Ld=nb.LINES;he=Rc.disabled;var de=Gd.disabled,me=mb.colorModeForRenderPass(),ve=$b.disabled,se=mb.transform,Ee=ad;ad=ma(Ee,1,se.zoom);var we=Math.pow(2,se.zoom-Ee.tileID.overscaledZ);Ee=Ee.tileID.overscaleFactor();Ed.call(Wc,Ra,Ld,he,de,me,ve,{u_matrix:wd,u_camera_to_center_distance:se.cameraToCenterDistance,u_pixels_to_tile_units:ad,u_extrude_scale:[se.pixelsToGLUnits[0]/(ad*we),se.pixelsToGLUnits[1]/
(ad*we)],u_overscale_factor:Ee},X.id,$c.layoutVertexBuffer,$c.indexBuffer,$c.segments,null,mb.transform.zoom,null,null,$c.collisionVertexBuffer)}}}if(Da&&Xb.length){S=mb.useProgram("collisionCircle");V=new a.StructArrayLayout2f1f2i16;V.resize(4*jc);V._trim();for(va=ea=0;va<Xb.length;va+=1)for(Da=Xb[va],Nb=0;Nb<Da.circleArray.length/4;Nb++)ad=4*Nb,Jc=Da.circleArray[ad+0],Kc=Da.circleArray[ad+1],$c=Da.circleArray[ad+2],ad=Da.circleArray[ad+3],V.emplace(ea++,Jc,Kc,$c,ad,0),V.emplace(ea++,Jc,Kc,$c,ad,
1),V.emplace(ea++,Jc,Kc,$c,ad,2),V.emplace(ea++,Jc,Kc,$c,ad,3);if(!Dd||Dd.length<2*jc){jc*=2;ea=new a.StructArrayLayout3ui6;ea.resize(jc);ea._trim();for(va=0;va<jc;va++)Da=6*va,ea.uint16[Da+0]=4*va,ea.uint16[Da+1]=4*va+1,ea.uint16[Da+2]=4*va+2,ea.uint16[Da+3]=4*va+2,ea.uint16[Da+4]=4*va+3,ea.uint16[Da+5]=4*va;Dd=ea}jc=Ra.createIndexBuffer(Dd,!0);V=Ra.createVertexBuffer(V,a.collisionCircleLayout.members,!0);for(ea=0;ea<Xb.length;ea+=1)va=Xb[ea],Da=mb.transform,Da={u_matrix:va.transform,u_inv_matrix:va.invTransform,
u_camera_to_center_distance:Da.cameraToCenterDistance,u_viewport_size:[Da.width,Da.height]},S.draw(Ra,nb.TRIANGLES,Rc.disabled,Gd.disabled,mb.colorModeForRenderPass(),$b.disabled,Da,X.id,V,jc,a.SegmentVector.simpleSegment(0,2*va.circleOffset,va.circleArray.length,va.circleArray.length/2),null,mb.transform.zoom,null,null,null);V.destroy();jc.destroy()}}function ta(mb,S,X,V,ea,va,Da,Ra,nb,Nb,Xb,jc){var Jc=mb.context,Kc=Jc.gl,$c=mb.transform,ad="map"===Ra,Wc="map"===nb,wd=ad&&"point"!==X.layout.get("symbol-placement"),
Ed=ad&&!Wc&&!wd,Ld=void 0!==X.layout.get("symbol-sort-key").constantOr(1);nb=mb.depthModeForSublayer(0,Rc.ReadOnly);var he=X.layout.get("text-variable-anchor");Ra=[];for(var de=0;de<V.length;de+=1){var me=V[de],ve=S.getTile(me),se=ve.getBucket(X);if(se){var Ee=ea?se.text:se.icon;if(Ee&&Ee.segments.get().length){var we=Ee.programConfigurations.get(X.id),jf=ea||se.sdfIcons,Ke=ea?se.textSizeData:se.iconSizeData,rf=Wc||0!==$c.pitch,pf=mb,cg=pf.useProgram;var uf=se.iconsInText&&ea?"symbolTextAndIcon":
jf?"symbolSDF":"symbolIcon";we=cg.call(pf,uf,we);pf=a.evaluateSizeForZoom(Ke,$c.zoom);var sg=void 0;cg=[0,0];var ef=uf=void 0,Wf=null,da=void 0;ea?(uf=ve.glyphAtlasTexture,ef=Kc.LINEAR,sg=ve.glyphAtlasTexture.size,se.iconsInText&&(cg=ve.imageAtlasTexture.size,Wf=ve.imageAtlasTexture,da="composite"===Ke.kind||"camera"===Ke.kind,da=rf||mb.options.rotating||mb.options.zooming||da?Kc.LINEAR:Kc.NEAREST)):(sg=1!==X.layout.get("icon-size").constantOr(0)||se.iconsNeedLinear,uf=ve.imageAtlasTexture,ef=jf||
mb.options.rotating||mb.options.zooming||sg||rf?Kc.LINEAR:Kc.NEAREST,sg=ve.imageAtlasTexture.size);var ua=ma(ve,1,mb.transform.zoom);rf=M(me.posMatrix,Wc,ad,mb.transform,ua);ua=Q(me.posMatrix,Wc,ad,mb.transform,ua);var Ba=he&&se.hasTextData();Ba="none"!==X.layout.get("icon-text-fit")&&Ba&&se.hasIconData();wd&&ca(se,me.posMatrix,mb,ea,rf,ua,Wc,Nb);me=mb.translatePosMatrix(me.posMatrix,ve,va,Da);rf=wd||ea&&he||Ba?ye:rf;ve=mb.translatePosMatrix(ua,ve,va,Da,!0);ua=jf&&0!==X.paint.get(ea?"text-halo-width":
"icon-halo-width").constantOr(1);Ba=void 0;Ba=jf?se.iconsInText?Fc(Ke.kind,pf,Ed,Wc,mb,me,rf,ve,sg,cg):rc(Ke.kind,pf,Ed,Wc,mb,me,rf,ve,ea,sg,!0):hc(Ke.kind,pf,Ed,Wc,mb,me,rf,ve,ea,sg);se={program:we,buffers:Ee,uniformValues:Ba,atlasTexture:uf,atlasTextureIcon:Wf,atlasInterpolation:ef,atlasInterpolationIcon:da,isSDF:jf,hasHalo:ua};if(Ld)for(jf=0,Ee=Ee.segments.get();jf<Ee.length;jf+=1)Ke=Ee[jf],Ra.push({segments:new a.SegmentVector([Ke]),sortKey:Ke.sortKey,state:se});else Ra.push({segments:Ee.segments,
sortKey:0,state:se})}}}Ld&&Ra.sort(function(Fa,Na){return Fa.sortKey-Na.sortKey});for(S=0;S<Ra.length;S+=1)V=Ra[S],ea=V.state,Jc.activeTexture.set(Kc.TEXTURE0),ea.atlasTexture.bind(ea.atlasInterpolation,Kc.CLAMP_TO_EDGE),ea.atlasTextureIcon&&(Jc.activeTexture.set(Kc.TEXTURE1),ea.atlasTextureIcon&&ea.atlasTextureIcon.bind(ea.atlasInterpolationIcon,Kc.CLAMP_TO_EDGE)),ea.isSDF&&(va=ea.uniformValues,ea.hasHalo&&(va.u_is_halo=1,za(ea.buffers,V.segments,X,mb,ea.program,nb,Xb,jc,va)),va.u_is_halo=0),za(ea.buffers,
V.segments,X,mb,ea.program,nb,Xb,jc,ea.uniformValues)}function za(mb,S,X,V,ea,va,Da,Ra,nb){var Nb=V.context;ea.draw(Nb,Nb.gl.TRIANGLES,va,Da,Ra,$b.disabled,nb,X.id,mb.layoutVertexBuffer,mb.indexBuffer,S,X.paint,V.transform.zoom,mb.programConfigurations.get(X.id),mb.dynamicLayoutVertexBuffer,mb.opacityVertexBuffer)}function Ia(mb,S,X,V,ea,va,Da){var Ra=mb.context.gl,nb=X.paint.get("fill-pattern"),Nb=nb&&nb.constantOr(1),Xb=X.getCrossfadeParameters(),jc;if(Da){var Jc=Nb&&!X.getPaintProperty("fill-outline-color")?
"fillOutlinePattern":"fillOutline";var Kc=Ra.LINES}else Jc=Nb?"fillPattern":"fill",Kc=Ra.TRIANGLES;for(var $c=0;$c<V.length;$c+=1){var ad=V[$c];var Wc=S.getTile(ad);if(!Nb||Wc.patternsLoaded()){var wd=Wc.getBucket(X);if(wd){var Ed=wd.programConfigurations.get(X.id),Ld=mb.useProgram(Jc,Ed);Nb&&(mb.context.activeTexture.set(Ra.TEXTURE0),Wc.imageAtlasTexture.bind(Ra.LINEAR,Ra.CLAMP_TO_EDGE),Ed.updatePaintBuffers(Xb));if((jc=nb.constantOr(null))&&Wc.imageAtlas){var he=Wc.imageAtlas;var de=he.patternPositions[jc.to.toString()];
jc=he.patternPositions[jc.from.toString()];de&&jc&&Ed.setConstantPatternPositions(de,jc)}he=mb.translatePosMatrix(ad.posMatrix,Wc,X.paint.get("fill-translate"),X.paint.get("fill-translate-anchor"));if(Da){de=wd.indexBuffer2;jc=wd.segments2;var me=[Ra.drawingBufferWidth,Ra.drawingBufferHeight];if("fillOutlinePattern"===Jc&&Nb){var ve=a,se=ve.extend;Wc=a.extend({u_matrix:he},ka(Xb,mb,Wc));Wc=se.call(ve,Wc,{u_world:me})}else Wc={u_matrix:he,u_world:me}}else de=wd.indexBuffer,jc=wd.segments,Wc=Nb?a.extend({u_matrix:he},
ka(Xb,mb,Wc)):{u_matrix:he};Ld.draw(mb.context,Kc,ea,mb.stencilModeForClipping(ad),va,$b.disabled,Wc,X.id,wd.layoutVertexBuffer,de,jc,X.paint,mb.transform.zoom,Ed)}}}}function Xa(mb,S,X,V,ea,va,Da){for(var Ra=mb.context,nb=Ra.gl,Nb=X.paint.get("fill-extrusion-pattern"),Xb=Nb.constantOr(1),jc=X.getCrossfadeParameters(),Jc=X.paint.get("fill-extrusion-opacity"),Kc=0;Kc<V.length;Kc+=1){var $c=V[Kc],ad=S.getTile($c),Wc=ad.getBucket(X);if(Wc){var wd=Wc.programConfigurations.get(X.id),Ed=mb.useProgram(Xb?
"fillExtrusionPattern":"fillExtrusion",wd);Xb&&(mb.context.activeTexture.set(nb.TEXTURE0),ad.imageAtlasTexture.bind(nb.LINEAR,nb.CLAMP_TO_EDGE),wd.updatePaintBuffers(jc));var Ld=Nb.constantOr(null);if(Ld&&ad.imageAtlas){var he=ad.imageAtlas,de=he.patternPositions[Ld.to.toString()];Ld=he.patternPositions[Ld.from.toString()];de&&Ld&&wd.setConstantPatternPositions(de,Ld)}de=mb.translatePosMatrix($c.posMatrix,ad,X.paint.get("fill-extrusion-translate"),X.paint.get("fill-extrusion-translate-anchor"));Ld=
X.paint.get("fill-extrusion-vertical-gradient");if(Xb){he=mb;var me=jc;ad=a.extend(Cb(de,he,Ld,Jc),ka(me,he,ad),{u_height_factor:-Math.pow(2,$c.overscaledZ)/ad.tileSize/8})}else ad=Cb(de,mb,Ld,Jc);Ed.draw(Ra,Ra.gl.TRIANGLES,ea,va,Da,$b.backCCW,ad,X.id,Wc.layoutVertexBuffer,Wc.indexBuffer,Wc.segments,X.paint,mb.transform.zoom,wd)}}}function $a(mb){var S=mb.transform.padding;gb(mb,0,mb.transform.height-(S.top||0)+1.5,mb.transform.width,3,Ae);gb(mb,0,(S.bottom||0)+1.5,mb.transform.width,3,Xe);gb(mb,
(S.left||0)-1.5,0,3,mb.transform.height,Vf);gb(mb,mb.transform.width-(S.right||0)-1.5,0,3,mb.transform.height,Je);var X=mb.transform.centerPoint;S=X.x;X=mb.transform.height-X.y;var V=Tf;gb(mb,S-1,X-10,2,20,V);gb(mb,S-10,X-1,20,2,V)}function gb(mb,S,X,V,ea,va){mb=mb.context;var Da=mb.gl;Da.enable(Da.SCISSOR_TEST);Da.scissor(S*a.browser.devicePixelRatio,X*a.browser.devicePixelRatio,V*a.browser.devicePixelRatio,ea*a.browser.devicePixelRatio);mb.clear({color:va});Da.disable(Da.SCISSOR_TEST)}function sb(mb,
S){var X=!1,V=null,ea=function(){V=null;X&&(mb(),V=setTimeout(ea,S),X=!1)};return function(){X=!0;V||ea();return V}}function jb(mb,S){if(!mb.duration||mb.duration<S.duration)mb.duration=S.duration,mb.easing=S.easing}function vb(mb,S,X){var V=X.maxSpeed,ea=X.linearity,va=X.deceleration;mb=a.clamp(mb*ea/(S/1E3),-V,V);ea=Math.abs(mb)/(va*ea);return{easing:X.easing,duration:1E3*ea,amount:ea/2*mb}}function qb(mb,S){for(var X={},V=0;V<mb.length;V++)X[mb[V].identifier]=S[V];return X}function Bb(mb,S,X){for(var V=
0;V<mb.length;V++)if(mb[V].identifier===X)return S[V]}function ub(mb){return Math.abs(mb.y)>Math.abs(mb.x)}function wb(mb){return mb*(2-mb)}function rb(mb){return mb.panDelta&&mb.panDelta.mag()||mb.zoomDelta||mb.bearingDelta||mb.pitchDelta}function Ab(mb){mb.parentNode&&mb.parentNode.removeChild(mb)}function Ma(mb,S,X){mb=new a.LngLat(mb.lng,mb.lat);if(S){var V=new a.LngLat(mb.lng-360,mb.lat),ea=new a.LngLat(mb.lng+360,mb.lat),va=X.locationPoint(mb).distSqr(S);X.locationPoint(V).distSqr(S)<va?mb=
V:X.locationPoint(ea).distSqr(S)<va&&(mb=ea)}for(;180<Math.abs(mb.lng-X.center.lng);){S=X.locationPoint(mb);if(0<=S.x&&0<=S.y&&S.x<=X.width&&S.y<=X.height)break;mb.lng=mb.lng>X.center.lng?mb.lng-360:mb.lng+360}return mb}function La(mb,S,X){mb=mb.classList;for(var V in ci)mb.remove("mapboxgl-"+X+"-anchor-"+V);mb.add("mapboxgl-"+X+"-anchor-"+S)}function ya(mb){void 0!==Mh?mb(Mh):void 0!==a.window.navigator.permissions?a.window.navigator.permissions.query({name:"geolocation"}).then(function(S){Mh="denied"!==
S.state;mb(Mh)}):(Mh=!!a.window.navigator.geolocation,mb(Mh))}function Aa(mb,S,X){var V=X&&X.maxWidth||100,ea=mb._container.clientHeight/2,va=mb.unproject([0,ea]);ea=mb.unproject([V,ea]);va=va.distanceTo(ea);X&&"imperial"===X.unit?(X=3.2808*va,5280<X?Ka(S,V,X/5280,mb._getUIString("ScaleControl.Miles")):Ka(S,V,X,mb._getUIString("ScaleControl.Feet"))):X&&"nautical"===X.unit?Ka(S,V,va/1852,mb._getUIString("ScaleControl.NauticalMiles")):1E3<=va?Ka(S,V,va/1E3,mb._getUIString("ScaleControl.Kilometers")):
Ka(S,V,va,mb._getUIString("ScaleControl.Meters"))}function Ka(mb,S,X,V){var ea=Math.pow(10,(""+Math.floor(X)).length-1);var va=X/ea;if(10<=va)va=10;else if(5<=va)va=5;else if(3<=va)va=3;else if(2<=va)va=2;else if(1<=va)va=1;else{var Da=Math.pow(10,Math.ceil(-Math.log(va)/Math.LN10));va=Math.round(va*Da)/Da}ea*=va;mb.style.width=ea/X*S+"px";mb.innerHTML=ea+"\x26nbsp;"+V}function Ta(mb){if(mb){if("number"===typeof mb){var S=Math.round(Math.sqrt(.5*Math.pow(mb,2)));return{center:new a.Point(0,0),top:new a.Point(0,
mb),"top-left":new a.Point(S,S),"top-right":new a.Point(-S,S),bottom:new a.Point(0,-mb),"bottom-left":new a.Point(S,-S),"bottom-right":new a.Point(-S,-S),left:new a.Point(mb,0),right:new a.Point(-mb,0)}}return mb instanceof a.Point||Array.isArray(mb)?(mb=a.Point.convert(mb),{center:mb,top:mb,"top-left":mb,"top-right":mb,bottom:mb,"bottom-left":mb,"bottom-right":mb,left:mb,right:mb}):{center:a.Point.convert(mb.center||[0,0]),top:a.Point.convert(mb.top||[0,0]),"top-left":a.Point.convert(mb["top-left"]||
[0,0]),"top-right":a.Point.convert(mb["top-right"]||[0,0]),bottom:a.Point.convert(mb.bottom||[0,0]),"bottom-left":a.Point.convert(mb["bottom-left"]||[0,0]),"bottom-right":a.Point.convert(mb["bottom-right"]||[0,0]),left:a.Point.convert(mb.left||[0,0]),right:a.Point.convert(mb.right||[0,0])}}return Ta(new a.Point(0,0))}var bb=a.createCommonjsModule(function(mb){function S(ea){return!X(ea)}function X(ea){if("undefined"===typeof window||"undefined"===typeof document)return"not a browser";if(!(Array.prototype&&
Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray))return"insufficent Array support";if(!Function.prototype||!Function.prototype.bind)return"insufficient Function support";if(!(Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&
Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions))return"insufficient Object support";if(!("JSON"in window&&"parse"in JSON&&"stringify"in JSON))return"insufficient JSON support";if("Worker"in window&&"Blob"in window&&"URL"in window){var va=new Blob([""],{type:"text/javascript"});va=URL.createObjectURL(va);try{var Da=new Worker(va);var Ra=!0}catch(nb){Ra=!1}Da&&Da.terminate();URL.revokeObjectURL(va)}else Ra=!1;if(!Ra)return"insufficient worker support";
if(!("Uint8ClampedArray"in window))return"insufficient Uint8ClampedArray support";if(!ArrayBuffer.isView)return"insufficient ArrayBuffer support";Ra=document.createElement("canvas");Ra.width=Ra.height=1;Ra=(Da=Ra.getContext("2d"))?(Da=Da.getImageData(0,0,1,1))&&Da.width===Ra.width:!1;if(!Ra)return"insufficient Canvas/getImageData support";ea=ea&&ea.failIfMajorPerformanceCaveat;void 0===V[ea]&&(Ra=V,Da=document.createElement("canvas"),va=Object.create(S.webGLContextAttributes),va.failIfMajorPerformanceCaveat=
ea,Da=Da.probablySupportsContext?Da.probablySupportsContext("webgl",va)||Da.probablySupportsContext("experimental-webgl",va):Da.supportsContext?Da.supportsContext("webgl",va)||Da.supportsContext("experimental-webgl",va):Da.getContext("webgl",va)||Da.getContext("experimental-webgl",va),Da?(va=Da.createShader(Da.VERTEX_SHADER),!va||Da.isContextLost()?Da=!1:(Da.shaderSource(va,"void main() {}"),Da.compileShader(va),Da=!0===Da.getShaderParameter(va,Da.COMPILE_STATUS))):Da=!1,Ra[ea]=Da);if(!V[ea])return"insufficient WebGL support"}
mb.exports?mb.exports=S:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=S,window.mapboxgl.notSupportedReason=X);var V={};S.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),cb={create:function(mb,S,X){mb=a.window.document.createElement(mb);void 0!==S&&(mb.className=S);X&&X.appendChild(mb);return mb},createNS:function(mb,S){return a.window.document.createElementNS(mb,S)}},Eb=a.window.document.documentElement.style,Pb=g(["userSelect","MozUserSelect","WebkitUserSelect",
"msUserSelect"]),fc;cb.disableDrag=function(){Eb&&Pb&&(fc=Eb[Pb],Eb[Pb]="none")};cb.enableDrag=function(){Eb&&Pb&&(Eb[Pb]=fc)};var pb=g(["transform","WebkitTransform"]);cb.setTransform=function(mb,S){mb.style[pb]=S};var Db=!1;try{var Rb=Object.defineProperty({},"passive",{get:function(){Db=!0}});a.window.addEventListener("test",Rb,Rb);a.window.removeEventListener("test",Rb,Rb)}catch(mb){Db=!1}cb.addEventListener=function(mb,S,X,V){void 0===V&&(V={});"passive"in V&&Db?mb.addEventListener(S,X,V):mb.addEventListener(S,
X,V.capture)};cb.removeEventListener=function(mb,S,X,V){void 0===V&&(V={});"passive"in V&&Db?mb.removeEventListener(S,X,V):mb.removeEventListener(S,X,V.capture)};var xc=function(mb){mb.preventDefault();mb.stopPropagation();a.window.removeEventListener("click",xc,!0)};cb.suppressClick=function(){a.window.addEventListener("click",xc,!0);a.window.setTimeout(function(){a.window.removeEventListener("click",xc,!0)},0)};cb.mousePos=function(mb,S){var X=mb.getBoundingClientRect();return new a.Point(S.clientX-
X.left-mb.clientLeft,S.clientY-X.top-mb.clientTop)};cb.touchPos=function(mb,S){for(var X=mb.getBoundingClientRect(),V=[],ea=0;ea<S.length;ea++)V.push(new a.Point(S[ea].clientX-X.left-mb.clientLeft,S[ea].clientY-X.top-mb.clientTop));return V};cb.mouseButton=function(mb){return"undefined"!==typeof a.window.InstallTrigger&&2===mb.button&&mb.ctrlKey&&0<=a.window.navigator.platform.toUpperCase().indexOf("MAC")?0:mb.button};cb.remove=function(mb){mb.parentNode&&mb.parentNode.removeChild(mb)};var Ic=function(mb){function S(){mb.call(this);
this.images={};this.updatedImages={};this.callbackDispatchedThisFrame={};this.loaded=!1;this.requestors=[];this.patterns={};this.atlasImage=new a.RGBAImage({width:1,height:1});this.dirty=!0}mb&&(S.__proto__=mb);S.prototype=Object.create(mb&&mb.prototype);S.prototype.constructor=S;S.prototype.isLoaded=function(){return this.loaded};S.prototype.setLoaded=function(X){if(this.loaded!==X&&(this.loaded=X)){X=0;for(var V=this.requestors;X<V.length;X+=1){var ea=V[X];this._notify(ea.ids,ea.callback)}this.requestors=
[]}};S.prototype.getImage=function(X){return this.images[X]};S.prototype.addImage=function(X,V){this._validate(X,V)&&(this.images[X]=V)};S.prototype._validate=function(X,V){var ea=!0;this._validateStretch(V.stretchX,V.data&&V.data.width)||(this.fire(new a.ErrorEvent(Error('Image "'+X+'" has invalid "stretchX" value'))),ea=!1);this._validateStretch(V.stretchY,V.data&&V.data.height)||(this.fire(new a.ErrorEvent(Error('Image "'+X+'" has invalid "stretchY" value'))),ea=!1);this._validateContent(V.content,
V)||(this.fire(new a.ErrorEvent(Error('Image "'+X+'" has invalid "content" value'))),ea=!1);return ea};S.prototype._validateStretch=function(X,V){if(!X)return!0;for(var ea=0,va=0;va<X.length;va+=1){var Da=X[va];if(Da[0]<ea||Da[1]<Da[0]||V<Da[1])return!1;ea=Da[1]}return!0};S.prototype._validateContent=function(X,V){return X?4!==X.length||0>X[0]||V.data.width<X[0]||0>X[1]||V.data.height<X[1]||0>X[2]||V.data.width<X[2]||0>X[3]||V.data.height<X[3]||X[2]<X[0]||X[3]<X[1]?!1:!0:!0};S.prototype.updateImage=
function(X,V){V.version=this.images[X].version+1;this.images[X]=V;this.updatedImages[X]=!0};S.prototype.removeImage=function(X){var V=this.images[X];delete this.images[X];delete this.patterns[X];if(V.userImage&&V.userImage.onRemove)V.userImage.onRemove()};S.prototype.listImages=function(){return Object.keys(this.images)};S.prototype.getImages=function(X,V){var ea=!0;if(!this.isLoaded())for(var va=0;va<X.length;va+=1)this.images[X[va]]||(ea=!1);this.isLoaded()||ea?this._notify(X,V):this.requestors.push({ids:X,
callback:V})};S.prototype._notify=function(X,V){for(var ea={},va=0;va<X.length;va+=1){var Da=X[va];this.images[Da]||this.fire(new a.Event("styleimagemissing",{id:Da}));var Ra=this.images[Da];Ra?ea[Da]={data:Ra.data.clone(),pixelRatio:Ra.pixelRatio,sdf:Ra.sdf,version:Ra.version,stretchX:Ra.stretchX,stretchY:Ra.stretchY,content:Ra.content,hasRenderCallback:!(!Ra.userImage||!Ra.userImage.render)}:a.warnOnce('Image "'+Da+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}V(null,
ea)};S.prototype.getPixelSize=function(){var X=this.atlasImage;return{width:X.width,height:X.height}};S.prototype.getPattern=function(X){var V=this.patterns[X],ea=this.getImage(X);if(!ea)return null;if(V&&V.position.version===ea.version)return V.position;V?V.position.version=ea.version:(V={w:ea.data.width+2,h:ea.data.height+2,x:0,y:0},ea=new a.ImagePosition(V,ea),this.patterns[X]={bin:V,position:ea});this._updatePatternAtlas();return this.patterns[X].position};S.prototype.bind=function(X){var V=X.gl;
this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.Texture(X,this.atlasImage,V.RGBA);this.atlasTexture.bind(V.LINEAR,V.CLAMP_TO_EDGE)};S.prototype._updatePatternAtlas=function(){var X=[];for(V in this.patterns)X.push(this.patterns[V].bin);var V=a.potpack(X);X=this.atlasImage;X.resize({width:V.w||1,height:V.h||1});for(var ea in this.patterns){var va=this.patterns[ea].bin;V=va.x+1;va=va.y+1;var Da=this.images[ea].data,Ra=Da.width,nb=Da.height;
a.RGBAImage.copy(Da,X,{x:0,y:0},{x:V,y:va},{width:Ra,height:nb});a.RGBAImage.copy(Da,X,{x:0,y:nb-1},{x:V,y:va-1},{width:Ra,height:1});a.RGBAImage.copy(Da,X,{x:0,y:0},{x:V,y:va+nb},{width:Ra,height:1});a.RGBAImage.copy(Da,X,{x:Ra-1,y:0},{x:V-1,y:va},{width:1,height:nb});a.RGBAImage.copy(Da,X,{x:0,y:0},{x:V+Ra,y:va},{width:1,height:nb})}this.dirty=!0};S.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}};S.prototype.dispatchRenderCallbacks=function(X){for(var V=0;V<X.length;V+=1){var ea=
X[V];if(!this.callbackDispatchedThisFrame[ea]){this.callbackDispatchedThisFrame[ea]=!0;var va=this.images[ea];var Da=va;var Ra=Da.userImage;Ra&&Ra.render&&Ra.render()?(Da.data.replace(new Uint8Array(Ra.data.buffer)),Da=!0):Da=!1;Da&&this.updateImage(ea,va)}}};return S}(a.Evented);r.prototype.draw=function(mb){this.ctx.clearRect(0,0,this.size,this.size);this.ctx.fillText(mb,this.buffer,this.middle);mb=this.ctx.getImageData(0,0,this.size,this.size);for(var S=new Uint8ClampedArray(this.size*this.size),
X=0;X<this.size*this.size;X++){var V=mb.data[4*X+3]/255;this.gridOuter[X]=1===V?0:0===V?1E20:Math.pow(Math.max(0,.5-V),2);this.gridInner[X]=1===V?1E20:0===V?0:Math.pow(Math.max(0,V-.5),2)}l(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z);l(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z);for(X=0;X<this.size*this.size;X++)S[X]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[X]-this.gridInner[X])/this.radius+this.cutoff))));return S};r.default=r;var Ja=function(mb,
S){this.requestManager=mb;this.localIdeographFontFamily=S;this.entries={}};Ja.prototype.setURL=function(mb){this.url=mb};Ja.prototype.getGlyphs=function(mb,S){var X=this,V=[],ea;for(ea in mb)for(var va=0,Da=mb[ea];va<Da.length;va+=1)V.push({stack:ea,id:Da[va]});a.asyncAll(V,function(Ra,nb){var Nb=Ra.stack,Xb=Ra.id,jc=X.entries[Nb];jc||(jc=X.entries[Nb]={glyphs:{},requests:{},ranges:{}});Ra=jc.glyphs[Xb];if(void 0!==Ra)nb(null,{stack:Nb,id:Xb,glyph:Ra});else if(Ra=X._tinySDF(jc,Nb,Xb))jc.glyphs[Xb]=
Ra,nb(null,{stack:Nb,id:Xb,glyph:Ra});else{var Jc=Math.floor(Xb/256);if(65535<256*Jc)nb(Error("glyphs \x3e 65535 not supported"));else if(jc.ranges[Jc])nb(null,{stack:Nb,id:Xb,glyph:Ra});else{var Kc=jc.requests[Jc];Kc||(Kc=jc.requests[Jc]=[],Ja.loadGlyphRange(Nb,Jc,X.url,X.requestManager,function($c,ad){if(ad){for(var Wc in ad)X._doesCharSupportLocalGlyph(+Wc)||(jc.glyphs[+Wc]=ad[+Wc]);jc.ranges[Jc]=!0}Wc=0;for(var wd=Kc;Wc<wd.length;Wc+=1)(0,wd[Wc])($c,ad);delete jc.requests[Jc]}));Kc.push(function($c,
ad){$c?nb($c):ad&&nb(null,{stack:Nb,id:Xb,glyph:ad[Xb]||null})})}}},function(Ra,nb){if(Ra)S(Ra);else if(nb){Ra={};for(var Nb=0;Nb<nb.length;Nb+=1){var Xb=nb[Nb],jc=Xb.stack,Jc=Xb.id;Xb=Xb.glyph;(Ra[jc]||(Ra[jc]={}))[Jc]=Xb&&{id:Xb.id,bitmap:Xb.bitmap.clone(),metrics:Xb.metrics}}S(null,Ra)}})};Ja.prototype._doesCharSupportLocalGlyph=function(mb){return!!this.localIdeographFontFamily&&(a.isChar["CJK Unified Ideographs"](mb)||a.isChar["Hangul Syllables"](mb)||a.isChar.Hiragana(mb)||a.isChar.Katakana(mb))};
Ja.prototype._tinySDF=function(mb,S,X){var V=this.localIdeographFontFamily;if(V&&this._doesCharSupportLocalGlyph(X)){var ea=mb.tinySDF;ea||(ea="400",/bold/i.test(S)?ea="900":/medium/i.test(S)?ea="500":/light/i.test(S)&&(ea="200"),ea=mb.tinySDF=new Ja.TinySDF(24,3,8,.25,V,ea));return{id:X,bitmap:new a.AlphaImage({width:30,height:30},ea.draw(String.fromCharCode(X))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}};Ja.loadGlyphRange=function(mb,S,X,V,ea){S*=256;var va=S+255;mb=V.transformRequest(V.normalizeGlyphsURL(X).replace("{fontstack}",
mb).replace("{range}",S+"-"+va),a.ResourceType.Glyphs);a.getArrayBuffer(mb,function(Da,Ra){if(Da)ea(Da);else if(Ra){Da={};var nb=0;for(Ra=a.parseGlyphPBF(Ra);nb<Ra.length;nb+=1){var Nb=Ra[nb];Da[Nb.id]=Nb}ea(null,Da)}})};Ja.TinySDF=r;var Pa=function(){this.specification=a.styleSpec.light.position};Pa.prototype.possiblyEvaluate=function(mb,S){return a.sphericalToCartesian(mb.expression.evaluate(S))};Pa.prototype.interpolate=function(mb,S,X){return{x:a.number(mb.x,S.x,X),y:a.number(mb.y,S.y,X),z:a.number(mb.z,
S.z,X)}};var db=new a.Properties({anchor:new a.DataConstantProperty(a.styleSpec.light.anchor),position:new Pa,color:new a.DataConstantProperty(a.styleSpec.light.color),intensity:new a.DataConstantProperty(a.styleSpec.light.intensity)}),Jb=function(mb){function S(X){mb.call(this);this._transitionable=new a.Transitionable(db);this.setLight(X);this._transitioning=this._transitionable.untransitioned()}mb&&(S.__proto__=mb);S.prototype=Object.create(mb&&mb.prototype);S.prototype.constructor=S;S.prototype.getLight=
function(){return this._transitionable.serialize()};S.prototype.setLight=function(X,V){void 0===V&&(V={});if(!this._validate(a.validateLight,X,V))for(var ea in X)V=X[ea],a.endsWith(ea,"-transition")?this._transitionable.setTransition(ea.slice(0,-11),V):this._transitionable.setValue(ea,V)};S.prototype.updateTransitions=function(X){this._transitioning=this._transitionable.transitioned(X,this._transitioning)};S.prototype.hasTransition=function(){return this._transitioning.hasTransition()};S.prototype.recalculate=
function(X){this.properties=this._transitioning.possiblyEvaluate(X)};S.prototype._validate=function(X,V,ea){return ea&&!1===ea.validate?!1:a.emitValidationErrors(this,X.call(a.validateStyle,a.extend({value:V,style:{glyphs:!0,sprite:!0},styleSpec:a.styleSpec})))};return S}(a.Evented),Gb=function(mb,S){this.width=mb;this.height=S;this.nextRow=0;this.data=new Uint8Array(this.width*this.height);this.dashEntry={}};Gb.prototype.getDash=function(mb,S){var X=mb.join(",")+String(S);this.dashEntry[X]||(this.dashEntry[X]=
this.addDash(mb,S));return this.dashEntry[X]};Gb.prototype.getDashRanges=function(mb,S,X){S=[];var V=1===mb.length%2?-mb[mb.length-1]*X:0,ea=mb[0]*X,va=!0;S.push({left:V,right:ea,isDash:va,zeroLength:0===mb[0]});for(var Da=mb[0],Ra=1;Ra<mb.length;Ra++){va=!va;var nb=mb[Ra];V=Da*X;Da+=nb;ea=Da*X;S.push({left:V,right:ea,isDash:va,zeroLength:0===nb})}return S};Gb.prototype.addRoundDash=function(mb,S,X){S/=2;for(var V=-X;V<=X;V++)for(var ea=this.width*(this.nextRow+X+V),va=0,Da=mb[va],Ra=0;Ra<this.width;Ra++){1<
Ra/Da.right&&(Da=mb[++va]);var nb=Math.min(Math.abs(Ra-Da.left),Math.abs(Ra-Da.right)),Nb=V/X*(S+1);Da.isDash?(Nb=S-Math.abs(Nb),nb=Math.sqrt(nb*nb+Nb*Nb)):nb=S-Math.sqrt(nb*nb+Nb*Nb);this.data[ea+Ra]=Math.max(0,Math.min(255,nb+128))}};Gb.prototype.addRegularDash=function(mb){for(var S=mb.length-1;0<=S;--S){var X=mb[S],V=mb[S+1];X.zeroLength?mb.splice(S,1):V&&V.isDash===X.isDash&&(V.left=X.left,mb.splice(S,1))}S=mb[0];X=mb[mb.length-1];S.isDash===X.isDash&&(S.left=X.left-this.width,X.right=S.right+
this.width);S=this.width*this.nextRow;X=0;V=mb[X];for(var ea=0;ea<this.width;ea++){1<ea/V.right&&(V=mb[++X]);var va=Math.min(Math.abs(ea-V.left),Math.abs(ea-V.right));this.data[S+ea]=Math.max(0,Math.min(255,(V.isDash?va:-va)+128))}};Gb.prototype.addDash=function(mb,S){var X=S?7:0,V=2*X+1;if(this.nextRow+V>this.height)return a.warnOnce("LineAtlas out of space"),null;for(var ea=0,va=0;va<mb.length;va++)ea+=mb[va];0!==ea&&(va=this.width/ea,mb=this.getDashRanges(mb,this.width,va),S?this.addRoundDash(mb,
va,X):this.addRegularDash(mb));S={y:(this.nextRow+X+.5)/this.height,height:2*X/this.height,width:ea};this.nextRow+=V;this.dirty=!0;return S};Gb.prototype.bind=function(mb){mb=mb.gl;this.texture?(mb.bindTexture(mb.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,mb.texSubImage2D(mb.TEXTURE_2D,0,0,0,this.width,this.height,mb.ALPHA,mb.UNSIGNED_BYTE,this.data))):(this.texture=mb.createTexture(),mb.bindTexture(mb.TEXTURE_2D,this.texture),mb.texParameteri(mb.TEXTURE_2D,mb.TEXTURE_WRAP_S,mb.REPEAT),mb.texParameteri(mb.TEXTURE_2D,
mb.TEXTURE_WRAP_T,mb.REPEAT),mb.texParameteri(mb.TEXTURE_2D,mb.TEXTURE_MIN_FILTER,mb.LINEAR),mb.texParameteri(mb.TEXTURE_2D,mb.TEXTURE_MAG_FILTER,mb.LINEAR),mb.texImage2D(mb.TEXTURE_2D,0,mb.ALPHA,this.width,this.height,0,mb.ALPHA,mb.UNSIGNED_BYTE,this.data))};var cc=function V(S,X){this.workerPool=S;this.actors=[];this.currentActor=0;this.id=a.uniqueId();S=this.workerPool.acquire(this.id);for(var ea=0;ea<S.length;ea++){var va=new V.Actor(S[ea],X,this.id);va.name="Worker "+ea;this.actors.push(va)}};
cc.prototype.broadcast=function(S,X,V){a.asyncAll(this.actors,function(ea,va){ea.send(S,X,va)},V||function(){})};cc.prototype.getActor=function(){this.currentActor=(this.currentActor+1)%this.actors.length;return this.actors[this.currentActor]};cc.prototype.remove=function(){this.actors.forEach(function(S){S.remove()});this.actors=[];this.workerPool.release(this.id)};cc.Actor=a.Actor;var uc=function(S,X,V){this.bounds=a.LngLatBounds.convert(this.validateBounds(S));this.minzoom=X||0;this.maxzoom=V||
24};uc.prototype.validateBounds=function(S){return Array.isArray(S)&&4===S.length?[Math.max(-180,S[0]),Math.max(-90,S[1]),Math.min(180,S[2]),Math.min(90,S[3])]:[-180,-90,180,90]};uc.prototype.contains=function(S){var X=Math.pow(2,S.z),V=Math.floor(a.mercatorXfromLng(this.bounds.getWest())*X),ea=Math.floor(a.mercatorYfromLat(this.bounds.getNorth())*X),va=Math.ceil(a.mercatorXfromLng(this.bounds.getEast())*X);X=Math.ceil(a.mercatorYfromLat(this.bounds.getSouth())*X);return S.x>=V&&S.x<va&&S.y>=ea&&
S.y<X};var fd=function(S){function X(V,ea,va,Da){S.call(this);this.id=V;this.dispatcher=va;this.type="vector";this.minzoom=0;this.maxzoom=22;this.scheme="xyz";this.tileSize=512;this.isTileClipped=this.reparseOverscaled=!0;this._loaded=!1;a.extend(this,a.pick(ea,["url","scheme","tileSize","promoteId"]));this._options=a.extend({type:"vector"},ea);this._collectResourceTiming=ea.collectResourceTiming;if(512!==this.tileSize)throw Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Da)}
S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;X.prototype.load=function(){var V=this;this._loaded=!1;this.fire(new a.Event("dataloading",{dataType:"source"}));this._tileJSONRequest=d(this._options,this.map._requestManager,function(ea,va){V._tileJSONRequest=null;V._loaded=!0;ea?V.fire(new a.ErrorEvent(ea)):va&&(a.extend(V,va),va.bounds&&(V.tileBounds=new uc(va.bounds,V.minzoom,V.maxzoom)),a.postTurnstileEvent(va.tiles,V.map._requestManager._customAccessToken),
a.postMapLoadEvent(va.tiles,V.map._getMapId(),V.map._requestManager._skuToken,V.map._requestManager._customAccessToken),V.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),V.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})};X.prototype.loaded=function(){return this._loaded};X.prototype.hasTile=function(V){return!this.tileBounds||this.tileBounds.contains(V.canonical)};X.prototype.onAdd=function(V){this.map=V;this.load()};X.prototype.onRemove=function(){this._tileJSONRequest&&
(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)};X.prototype.serialize=function(){return a.extend({},this._options)};X.prototype.loadTile=function(V,ea){function va(Ra,nb){delete V.request;if(V.aborted)return ea(null);if(Ra&&404!==Ra.status)return ea(Ra);nb&&nb.resourceTiming&&(V.resourceTiming=nb.resourceTiming);this.map._refreshExpiredTiles&&nb&&V.setExpiryData(nb);V.loadVectorData(nb,this.map.painter);a.cacheEntryPossiblyAdded(this.dispatcher);ea(null);V.reloadCallback&&(this.loadTile(V,
V.reloadCallback),V.reloadCallback=null)}var Da=this.map._requestManager.normalizeTileURL(V.tileID.canonical.url(this.tiles,this.scheme));Da={request:this.map._requestManager.transformRequest(Da,a.ResourceType.Tile),uid:V.uid,tileID:V.tileID,zoom:V.tileID.overscaledZ,tileSize:this.tileSize*V.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};Da.request.collectResourceTiming=this._collectResourceTiming;
V.actor&&"expired"!==V.state?"loading"===V.state?V.reloadCallback=ea:V.request=V.actor.send("reloadTile",Da,va.bind(this)):(V.actor=this.dispatcher.getActor(),V.request=V.actor.send("loadTile",Da,va.bind(this)))};X.prototype.abortTile=function(V){V.request&&(V.request.cancel(),delete V.request);V.actor&&V.actor.send("abortTile",{uid:V.uid,type:this.type,source:this.id},void 0)};X.prototype.unloadTile=function(V){V.unloadVectorData();V.actor&&V.actor.send("removeTile",{uid:V.uid,type:this.type,source:this.id},
void 0)};X.prototype.hasTransition=function(){return!1};return X}(a.Evented),kb=function(S){function X(V,ea,va,Da){S.call(this);this.id=V;this.dispatcher=va;this.setEventedParent(Da);this.type="raster";this.minzoom=0;this.maxzoom=22;this.roundZoom=!0;this.scheme="xyz";this.tileSize=512;this._loaded=!1;this._options=a.extend({type:"raster"},ea);a.extend(this,a.pick(ea,["url","scheme","tileSize"]))}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;X.prototype.load=
function(){var V=this;this._loaded=!1;this.fire(new a.Event("dataloading",{dataType:"source"}));this._tileJSONRequest=d(this._options,this.map._requestManager,function(ea,va){V._tileJSONRequest=null;V._loaded=!0;ea?V.fire(new a.ErrorEvent(ea)):va&&(a.extend(V,va),va.bounds&&(V.tileBounds=new uc(va.bounds,V.minzoom,V.maxzoom)),a.postTurnstileEvent(va.tiles),a.postMapLoadEvent(va.tiles,V.map._getMapId(),V.map._requestManager._skuToken),V.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),
V.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})};X.prototype.loaded=function(){return this._loaded};X.prototype.onAdd=function(V){this.map=V;this.load()};X.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)};X.prototype.serialize=function(){return a.extend({},this._options)};X.prototype.hasTile=function(V){return!this.tileBounds||this.tileBounds.contains(V.canonical)};X.prototype.loadTile=function(V,ea){var va=
this,Da=this.map._requestManager.normalizeTileURL(V.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);V.request=a.getImage(this.map._requestManager.transformRequest(Da,a.ResourceType.Tile),function(Ra,nb){delete V.request;if(V.aborted)V.state="unloaded",ea(null);else if(Ra)V.state="errored",ea(Ra);else if(nb){va.map._refreshExpiredTiles&&V.setExpiryData(nb);delete nb.cacheControl;delete nb.expires;Ra=va.map.painter.context;var Nb=Ra.gl;V.texture=va.map.painter.getTileTexture(nb.width);V.texture?
V.texture.update(nb,{useMipmap:!0}):(V.texture=new a.Texture(Ra,nb,Nb.RGBA,{useMipmap:!0}),V.texture.bind(Nb.LINEAR,Nb.CLAMP_TO_EDGE,Nb.LINEAR_MIPMAP_NEAREST),Ra.extTextureFilterAnisotropic&&Nb.texParameterf(Nb.TEXTURE_2D,Ra.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Ra.extTextureFilterAnisotropicMax));V.state="loaded";a.cacheEntryPossiblyAdded(va.dispatcher);ea(null)}})};X.prototype.abortTile=function(V,ea){V.request&&(V.request.cancel(),delete V.request);ea()};X.prototype.unloadTile=
function(V,ea){V.texture&&this.map.painter.saveTileTexture(V.texture);ea()};X.prototype.hasTransition=function(){return!1};return X}(a.Evented),Qb=function(S){function X(V,ea,va,Da){S.call(this,V,ea,va,Da);this.type="raster-dem";this.maxzoom=22;this._options=a.extend({type:"raster-dem"},ea);this.encoding=ea.encoding||"mapbox"}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;X.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,
tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}};X.prototype.loadTile=function(V,ea){function va(Ra,nb){Ra&&(V.state="errored",ea(Ra));nb&&(V.dem=nb,V.needsHillshadePrepare=!0,V.state="loaded",ea(null))}var Da=this.map._requestManager.normalizeTileURL(V.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);V.request=a.getImage(this.map._requestManager.transformRequest(Da,a.ResourceType.Tile),function(Ra,nb){delete V.request;V.aborted?(V.state="unloaded",ea(null)):Ra?(V.state="errored",
ea(Ra)):nb&&(this.map._refreshExpiredTiles&&V.setExpiryData(nb),delete nb.cacheControl,delete nb.expires,Ra=a.window.ImageBitmap&&nb instanceof a.window.ImageBitmap&&a.offscreenCanvasSupported()?nb:a.browser.getImageData(nb,1),Ra={uid:V.uid,coord:V.tileID,source:this.id,rawImageData:Ra,encoding:this.encoding},V.actor&&"expired"!==V.state||(V.actor=this.dispatcher.getActor(),V.actor.send("loadDEMTile",Ra,va.bind(this))))}.bind(this));V.neighboringTiles=this._getNeighboringTiles(V.tileID)};X.prototype._getNeighboringTiles=
function(V){var ea=V.canonical,va=Math.pow(2,ea.z),Da=(ea.x-1+va)%va,Ra=0===ea.x?V.wrap-1:V.wrap,nb=(ea.x+1+va)%va,Nb=ea.x+1===va?V.wrap+1:V.wrap,Xb={};Xb[(new a.OverscaledTileID(V.overscaledZ,Ra,ea.z,Da,ea.y)).key]={backfilled:!1};Xb[(new a.OverscaledTileID(V.overscaledZ,Nb,ea.z,nb,ea.y)).key]={backfilled:!1};0<ea.y&&(Xb[(new a.OverscaledTileID(V.overscaledZ,Ra,ea.z,Da,ea.y-1)).key]={backfilled:!1},Xb[(new a.OverscaledTileID(V.overscaledZ,V.wrap,ea.z,ea.x,ea.y-1)).key]={backfilled:!1},Xb[(new a.OverscaledTileID(V.overscaledZ,
Nb,ea.z,nb,ea.y-1)).key]={backfilled:!1});ea.y+1<va&&(Xb[(new a.OverscaledTileID(V.overscaledZ,Ra,ea.z,Da,ea.y+1)).key]={backfilled:!1},Xb[(new a.OverscaledTileID(V.overscaledZ,V.wrap,ea.z,ea.x,ea.y+1)).key]={backfilled:!1},Xb[(new a.OverscaledTileID(V.overscaledZ,Nb,ea.z,nb,ea.y+1)).key]={backfilled:!1});return Xb};X.prototype.unloadTile=function(V){V.demTexture&&this.map.painter.saveTileTexture(V.demTexture);V.fbo&&(V.fbo.destroy(),delete V.fbo);V.dem&&delete V.dem;delete V.neighboringTiles;V.state=
"unloaded";V.actor&&V.actor.send("removeDEMTile",{uid:V.uid,source:this.id})};return X}(kb),dc=function(S){function X(V,ea,va,Da){S.call(this);this.id=V;this.type="geojson";this.minzoom=0;this.maxzoom=18;this.tileSize=512;this.reparseOverscaled=this.isTileClipped=!0;this._loaded=this._removed=!1;this.actor=va.getActor();this.setEventedParent(Da);this._data=ea.data;this._options=a.extend({},ea);this._collectResourceTiming=ea.collectResourceTiming;this._resourceTiming=[];void 0!==ea.maxzoom&&(this.maxzoom=
ea.maxzoom);ea.type&&(this.type=ea.type);ea.attribution&&(this.attribution=ea.attribution);this.promoteId=ea.promoteId;V=a.EXTENT/this.tileSize;this.workerOptions=a.extend({source:this.id,cluster:ea.cluster||!1,geojsonVtOptions:{buffer:(void 0!==ea.buffer?ea.buffer:128)*V,tolerance:(void 0!==ea.tolerance?ea.tolerance:.375)*V,extent:a.EXTENT,maxZoom:this.maxzoom,lineMetrics:ea.lineMetrics||!1,generateId:ea.generateId||!1},superclusterOptions:{maxZoom:void 0!==ea.clusterMaxZoom?Math.min(ea.clusterMaxZoom,
this.maxzoom-1):this.maxzoom-1,extent:a.EXTENT,radius:(ea.clusterRadius||50)*V,log:!1,generateId:ea.generateId||!1},clusterProperties:ea.clusterProperties},ea.workerOptions)}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;X.prototype.load=function(){var V=this;this.fire(new a.Event("dataloading",{dataType:"source"}));this._updateWorkerData(function(ea){ea?V.fire(new a.ErrorEvent(ea)):(ea={dataType:"source",sourceDataType:"metadata"},V._collectResourceTiming&&
V._resourceTiming&&0<V._resourceTiming.length&&(ea.resourceTiming=V._resourceTiming,V._resourceTiming=[]),V.fire(new a.Event("data",ea)))})};X.prototype.onAdd=function(V){this.map=V;this.load()};X.prototype.setData=function(V){var ea=this;this._data=V;this.fire(new a.Event("dataloading",{dataType:"source"}));this._updateWorkerData(function(va){va?ea.fire(new a.ErrorEvent(va)):(va={dataType:"source",sourceDataType:"content"},ea._collectResourceTiming&&ea._resourceTiming&&0<ea._resourceTiming.length&&
(va.resourceTiming=ea._resourceTiming,ea._resourceTiming=[]),ea.fire(new a.Event("data",va)))});return this};X.prototype.getClusterExpansionZoom=function(V,ea){this.actor.send("geojson.getClusterExpansionZoom",{clusterId:V,source:this.id},ea);return this};X.prototype.getClusterChildren=function(V,ea){this.actor.send("geojson.getClusterChildren",{clusterId:V,source:this.id},ea);return this};X.prototype.getClusterLeaves=function(V,ea,va,Da){this.actor.send("geojson.getClusterLeaves",{source:this.id,
clusterId:V,limit:ea,offset:va},Da);return this};X.prototype._updateWorkerData=function(V){var ea=this;this._loaded=!1;var va=a.extend({},this.workerOptions),Da=this._data;"string"===typeof Da?(va.request=this.map._requestManager.transformRequest(a.browser.resolveURL(Da),a.ResourceType.Source),va.request.collectResourceTiming=this._collectResourceTiming):va.data=JSON.stringify(Da);this.actor.send(this.type+".loadData",va,function(Ra,nb){ea._removed||nb&&nb.abandoned||(ea._loaded=!0,nb&&nb.resourceTiming&&
nb.resourceTiming[ea.id]&&(ea._resourceTiming=nb.resourceTiming[ea.id].slice(0)),ea.actor.send(ea.type+".coalesce",{source:va.source},null),V(Ra))})};X.prototype.loaded=function(){return this._loaded};X.prototype.loadTile=function(V,ea){var va=this,Da=V.actor?"reloadTile":"loadTile";V.actor=this.actor;V.request=this.actor.send(Da,{type:this.type,uid:V.uid,tileID:V.tileID,zoom:V.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,
promoteId:this.promoteId},function(Ra,nb){delete V.request;V.unloadVectorData();if(V.aborted)return ea(null);if(Ra)return ea(Ra);V.loadVectorData(nb,va.map.painter,"reloadTile"===Da);return ea(null)})};X.prototype.abortTile=function(V){V.request&&(V.request.cancel(),delete V.request);V.aborted=!0};X.prototype.unloadTile=function(V){V.unloadVectorData();this.actor.send("removeTile",{uid:V.uid,type:this.type,source:this.id})};X.prototype.onRemove=function(){this._removed=!0;this.actor.send("removeSource",
{type:this.type,source:this.id})};X.prototype.serialize=function(){return a.extend({},this._options,{type:this.type,data:this._data})};X.prototype.hasTransition=function(){return!1};return X}(a.Evented),Ec=a.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Qc=function(S){function X(V,ea,va,Da){S.call(this);this.id=V;this.dispatcher=va;this.coordinates=ea.coordinates;this.type="image";this.minzoom=0;this.maxzoom=22;this.tileSize=512;this.tiles=
{};this._loaded=!1;this.setEventedParent(Da);this.options=ea}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;X.prototype.load=function(V,ea){var va=this;this._loaded=!1;this.fire(new a.Event("dataloading",{dataType:"source"}));this.url=this.options.url;a.getImage(this.map._requestManager.transformRequest(this.url,a.ResourceType.Image),function(Da,Ra){va._loaded=!0;Da?va.fire(new a.ErrorEvent(Da)):Ra&&(va.image=Ra,V&&(va.coordinates=V),ea&&ea(),va._finishLoading())})};
X.prototype.loaded=function(){return this._loaded};X.prototype.updateImage=function(V){var ea=this;if(!this.image||!V.url)return this;this.options.url=V.url;this.load(V.coordinates,function(){ea.texture=null});return this};X.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})))};X.prototype.onAdd=function(V){this.map=V;this.load()};X.prototype.setCoordinates=function(V){var ea=this;this.coordinates=
V;V=V.map(a.MercatorCoordinate.fromLngLat);this.tileID=e(V);this.minzoom=this.maxzoom=this.tileID.z;V=V.map(function(va){return ea.tileID.getTilePoint(va)._round()});this._boundsArray=new a.StructArrayLayout4i8;this._boundsArray.emplaceBack(V[0].x,V[0].y,0,0);this._boundsArray.emplaceBack(V[1].x,V[1].y,a.EXTENT,0);this._boundsArray.emplaceBack(V[3].x,V[3].y,0,a.EXTENT);this._boundsArray.emplaceBack(V[2].x,V[2].y,a.EXTENT,a.EXTENT);this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer);
this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"}));return this};X.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var V=this.map.painter.context,ea=V.gl;this.boundsBuffer||(this.boundsBuffer=V.createVertexBuffer(this._boundsArray,Ec.members));this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2));this.texture||(this.texture=new a.Texture(V,this.image,ea.RGBA),this.texture.bind(ea.LINEAR,ea.CLAMP_TO_EDGE));for(var va in this.tiles)V=
this.tiles[va],"loaded"!==V.state&&(V.state="loaded",V.texture=this.texture)}};X.prototype.loadTile=function(V,ea){this.tileID&&this.tileID.equals(V.tileID.canonical)?(this.tiles[String(V.tileID.wrap)]=V,V.buckets={}):V.state="errored";ea(null)};X.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}};X.prototype.hasTransition=function(){return!1};return X}(a.Evented),Tc=function(S){function X(V,ea,va,Da){S.call(this,V,ea,va,Da);this.roundZoom=!0;this.type=
"video";this.options=ea}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;X.prototype.load=function(){var V=this;this._loaded=!1;var ea=this.options;this.urls=[];var va=0;for(ea=ea.urls;va<ea.length;va+=1)this.urls.push(this.map._requestManager.transformRequest(ea[va],a.ResourceType.Source).url);a.getVideo(this.urls,function(Da,Ra){V._loaded=!0;Da?V.fire(new a.ErrorEvent(Da)):Ra&&(V.video=Ra,V.video.loop=!0,V.video.addEventListener("playing",function(){V.map.triggerRepaint()}),
V.map&&V.video.play(),V._finishLoading())})};X.prototype.pause=function(){this.video&&this.video.pause()};X.prototype.play=function(){this.video&&this.video.play()};X.prototype.seek=function(V){if(this.video){var ea=this.video.seekable;V<ea.start(0)||V>ea.end(0)?this.fire(new a.ErrorEvent(new a.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+ea.start(0)+" and "+ea.end(0)+"-second mark."))):this.video.currentTime=V}};X.prototype.getVideo=function(){return this.video};
X.prototype.onAdd=function(V){this.map||(this.map=V,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))};X.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||2>this.video.readyState)){var V=this.map.painter.context,ea=V.gl;this.boundsBuffer||(this.boundsBuffer=V.createVertexBuffer(this._boundsArray,Ec.members));this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2));this.texture?this.video.paused||(this.texture.bind(ea.LINEAR,
ea.CLAMP_TO_EDGE),ea.texSubImage2D(ea.TEXTURE_2D,0,0,0,ea.RGBA,ea.UNSIGNED_BYTE,this.video)):(this.texture=new a.Texture(V,this.video,ea.RGBA),this.texture.bind(ea.LINEAR,ea.CLAMP_TO_EDGE));for(var va in this.tiles)V=this.tiles[va],"loaded"!==V.state&&(V.state="loaded",V.texture=this.texture)}};X.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}};X.prototype.hasTransition=function(){return this.video&&!this.video.paused};return X}(Qc),tb=function(S){function X(V,
ea,va,Da){S.call(this,V,ea,va,Da);ea.coordinates?Array.isArray(ea.coordinates)&&4===ea.coordinates.length&&!ea.coordinates.some(function(Ra){return!Array.isArray(Ra)||2!==Ra.length||Ra.some(function(nb){return"number"!==typeof nb})})||this.fire(new a.ErrorEvent(new a.ValidationError("sources."+V,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+V,null,'missing required property "coordinates"')));ea.animate&&
"boolean"!==typeof ea.animate&&this.fire(new a.ErrorEvent(new a.ValidationError("sources."+V,null,'optional "animate" property must be a boolean value')));ea.canvas?"string"===typeof ea.canvas||ea.canvas instanceof a.window.HTMLCanvasElement||this.fire(new a.ErrorEvent(new a.ValidationError("sources."+V,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+
V,null,'missing required property "canvas"')));this.options=ea;this.animate=void 0!==ea.animate?ea.animate:!0}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;X.prototype.load=function(){this._loaded=!0;this.canvas||(this.canvas=this.options.canvas instanceof a.window.HTMLCanvasElement?this.options.canvas:a.window.document.getElementById(this.options.canvas));this.width=this.canvas.width;this.height=this.canvas.height;this._hasInvalidDimensions()?this.fire(new a.ErrorEvent(Error("Canvas dimensions cannot be less than or equal to zero."))):
(this.play=function(){this._playing=!0;this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())};X.prototype.getCanvas=function(){return this.canvas};X.prototype.onAdd=function(V){this.map=V;this.load();this.canvas&&this.animate&&this.play()};X.prototype.onRemove=function(){this.pause()};X.prototype.prepare=function(){var V=!1;this.canvas.width!==this.width&&(this.width=this.canvas.width,V=!0);this.canvas.height!==this.height&&(this.height=
this.canvas.height,V=!0);if(!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var ea=this.map.painter.context,va=ea.gl;this.boundsBuffer||(this.boundsBuffer=ea.createVertexBuffer(this._boundsArray,Ec.members));this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2));this.texture?(V||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.Texture(ea,this.canvas,va.RGBA,{premultiply:!0});for(var Da in this.tiles)V=this.tiles[Da],
"loaded"!==V.state&&(V.state="loaded",V.texture=this.texture)}};X.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}};X.prototype.hasTransition=function(){return this._playing};X.prototype._hasInvalidDimensions=function(){for(var V=0,ea=[this.canvas.width,this.canvas.height];V<ea.length;V+=1){var va=ea[V];if(isNaN(va)||0>=va)return!0}return!1};return X}(Qc),Ib={vector:fd,raster:kb,"raster-dem":Qb,geojson:dc,video:Tc,image:Qc,canvas:tb},sc=function(S,X,V,ea){X=new Ib[X.type](S,
X,V,ea);if(X.id!==S)throw Error("Expected Source id to be "+S+" instead of "+X.id);a.bindAll(["load","abort","unload","serialize","prepare"],X);return X},pc=function(S,X){this.max=S;this.onRemove=X;this.reset()};pc.prototype.reset=function(){for(var S in this.data)for(var X=0,V=this.data[S];X<V.length;X+=1){var ea=V[X];ea.timeout&&clearTimeout(ea.timeout);this.onRemove(ea.value)}this.data={};this.order=[];return this};pc.prototype.add=function(S,X,V){var ea=this,va=S.wrapped().key;void 0===this.data[va]&&
(this.data[va]=[]);var Da={value:X,timeout:void 0};void 0!==V&&(Da.timeout=setTimeout(function(){ea.remove(S,Da)},V));this.data[va].push(Da);this.order.push(va);if(this.order.length>this.max&&(X=this._getAndRemoveByKey(this.order[0])))this.onRemove(X);return this};pc.prototype.has=function(S){return S.wrapped().key in this.data};pc.prototype.getAndRemove=function(S){return this.has(S)?this._getAndRemoveByKey(S.wrapped().key):null};pc.prototype._getAndRemoveByKey=function(S){var X=this.data[S].shift();
X.timeout&&clearTimeout(X.timeout);0===this.data[S].length&&delete this.data[S];this.order.splice(this.order.indexOf(S),1);return X.value};pc.prototype.getByKey=function(S){return(S=this.data[S])?S[0].value:null};pc.prototype.get=function(S){return this.has(S)?this.data[S.wrapped().key][0].value:null};pc.prototype.remove=function(S,X){if(!this.has(S))return this;S=S.wrapped().key;X=void 0===X?0:this.data[S].indexOf(X);var V=this.data[S][X];this.data[S].splice(X,1);V.timeout&&clearTimeout(V.timeout);
0===this.data[S].length&&delete this.data[S];this.onRemove(V.value);this.order.splice(this.order.indexOf(S),1);return this};pc.prototype.setMaxSize=function(S){for(this.max=S;this.order.length>this.max;)if(S=this._getAndRemoveByKey(this.order[0]))this.onRemove(S);return this};pc.prototype.filter=function(S){var X=[];for(Da in this.data)for(var V=0,ea=this.data[Da];V<ea.length;V+=1){var va=ea[V];S(va.value)||X.push(va)}for(S=0;S<X.length;S+=1){var Da=X[S];this.remove(Da.value.tileID,Da)}};var zc=function(S,
X,V){this.context=S;var ea=S.gl;this.buffer=ea.createBuffer();this.dynamicDraw=!!V;this.context.unbindVAO();S.bindElementBuffer.set(this.buffer);ea.bufferData(ea.ELEMENT_ARRAY_BUFFER,X.arrayBuffer,this.dynamicDraw?ea.DYNAMIC_DRAW:ea.STATIC_DRAW);this.dynamicDraw||delete X.arrayBuffer};zc.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)};zc.prototype.updateData=function(S){var X=this.context.gl;this.context.unbindVAO();this.bind();X.bufferSubData(X.ELEMENT_ARRAY_BUFFER,0,S.arrayBuffer)};
zc.prototype.destroy=function(){var S=this.context.gl;this.buffer&&(S.deleteBuffer(this.buffer),delete this.buffer)};var Wb={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Ub=function(S,X,V,ea){this.length=X.length;this.attributes=V;this.itemSize=X.bytesPerElement;this.dynamicDraw=ea;this.context=S;V=S.gl;this.buffer=V.createBuffer();S.bindVertexBuffer.set(this.buffer);V.bufferData(V.ARRAY_BUFFER,X.arrayBuffer,this.dynamicDraw?
V.DYNAMIC_DRAW:V.STATIC_DRAW);this.dynamicDraw||delete X.arrayBuffer};Ub.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)};Ub.prototype.updateData=function(S){var X=this.context.gl;this.bind();X.bufferSubData(X.ARRAY_BUFFER,0,S.arrayBuffer)};Ub.prototype.enableAttributes=function(S,X){for(var V=0;V<this.attributes.length;V++){var ea=X.attributes[this.attributes[V].name];void 0!==ea&&S.enableVertexAttribArray(ea)}};Ub.prototype.setVertexAttribPointers=function(S,X,V){for(var ea=
0;ea<this.attributes.length;ea++){var va=this.attributes[ea],Da=X.attributes[va.name];void 0!==Da&&S.vertexAttribPointer(Da,va.components,S[Wb[va.type]],!1,this.itemSize,va.offset+this.itemSize*(V||0))}};Ub.prototype.destroy=function(){var S=this.context.gl;this.buffer&&(S.deleteBuffer(this.buffer),delete this.buffer)};var yb=function(S){this.gl=S.gl;this.current=this.default=this.getDefault();this.dirty=!1};yb.prototype.get=function(){return this.current};yb.prototype.set=function(S){};yb.prototype.getDefault=
function(){return this.default};yb.prototype.setDefault=function(){this.set(this.default)};var ac=function(S){function X(){S.apply(this,arguments)}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return a.Color.transparent};X.prototype.set=function(V){var ea=this.current;if(V.r!==ea.r||V.g!==ea.g||V.b!==ea.b||V.a!==ea.a||this.dirty)this.gl.clearColor(V.r,V.g,V.b,V.a),this.current=V,this.dirty=!1};return X}(yb),Vb=function(S){function X(){S.apply(this,
arguments)}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return 1};X.prototype.set=function(V){if(V!==this.current||this.dirty)this.gl.clearDepth(V),this.current=V,this.dirty=!1};return X}(yb),mc=function(S){function X(){S.apply(this,arguments)}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return 0};X.prototype.set=function(V){if(V!==this.current||this.dirty)this.gl.clearStencil(V),
this.current=V,this.dirty=!1};return X}(yb),tc=function(S){function X(){S.apply(this,arguments)}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return[!0,!0,!0,!0]};X.prototype.set=function(V){var ea=this.current;if(V[0]!==ea[0]||V[1]!==ea[1]||V[2]!==ea[2]||V[3]!==ea[3]||this.dirty)this.gl.colorMask(V[0],V[1],V[2],V[3]),this.current=V,this.dirty=!1};return X}(yb),Uc=function(S){function X(){S.apply(this,arguments)}S&&(X.__proto__=
S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return!0};X.prototype.set=function(V){if(V!==this.current||this.dirty)this.gl.depthMask(V),this.current=V,this.dirty=!1};return X}(yb),kd=function(S){function X(){S.apply(this,arguments)}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return 255};X.prototype.set=function(V){if(V!==this.current||this.dirty)this.gl.stencilMask(V),
this.current=V,this.dirty=!1};return X}(yb),Bd=function(S){function X(){S.apply(this,arguments)}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}};X.prototype.set=function(V){var ea=this.current;if(V.func!==ea.func||V.ref!==ea.ref||V.mask!==ea.mask||this.dirty)this.gl.stencilFunc(V.func,V.ref,V.mask),this.current=V,this.dirty=!1};return X}(yb),Fd=function(S){function X(){S.apply(this,
arguments)}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){var V=this.gl;return[V.KEEP,V.KEEP,V.KEEP]};X.prototype.set=function(V){var ea=this.current;if(V[0]!==ea[0]||V[1]!==ea[1]||V[2]!==ea[2]||this.dirty)this.gl.stencilOp(V[0],V[1],V[2]),this.current=V,this.dirty=!1};return X}(yb),yd=function(S){function X(){S.apply(this,arguments)}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;X.prototype.getDefault=
function(){return!1};X.prototype.set=function(V){if(V!==this.current||this.dirty){var ea=this.gl;V?ea.enable(ea.STENCIL_TEST):ea.disable(ea.STENCIL_TEST);this.current=V;this.dirty=!1}};return X}(yb),Lc=function(S){function X(){S.apply(this,arguments)}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return[0,1]};X.prototype.set=function(V){var ea=this.current;if(V[0]!==ea[0]||V[1]!==ea[1]||this.dirty)this.gl.depthRange(V[0],V[1]),
this.current=V,this.dirty=!1};return X}(yb),cd=function(S){function X(){S.apply(this,arguments)}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return!1};X.prototype.set=function(V){if(V!==this.current||this.dirty){var ea=this.gl;V?ea.enable(ea.DEPTH_TEST):ea.disable(ea.DEPTH_TEST);this.current=V;this.dirty=!1}};return X}(yb),Nc=function(S){function X(){S.apply(this,arguments)}S&&(X.__proto__=S);X.prototype=Object.create(S&&
S.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return this.gl.LESS};X.prototype.set=function(V){if(V!==this.current||this.dirty)this.gl.depthFunc(V),this.current=V,this.dirty=!1};return X}(yb),Xc=function(S){function X(){S.apply(this,arguments)}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return!1};X.prototype.set=function(V){if(V!==this.current||this.dirty){var ea=this.gl;V?ea.enable(ea.BLEND):ea.disable(ea.BLEND);
this.current=V;this.dirty=!1}};return X}(yb),Zc=function(S){function X(){S.apply(this,arguments)}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){var V=this.gl;return[V.ONE,V.ZERO]};X.prototype.set=function(V){var ea=this.current;if(V[0]!==ea[0]||V[1]!==ea[1]||this.dirty)this.gl.blendFunc(V[0],V[1]),this.current=V,this.dirty=!1};return X}(yb),Sc=function(S){function X(){S.apply(this,arguments)}S&&(X.__proto__=S);X.prototype=Object.create(S&&
S.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return a.Color.transparent};X.prototype.set=function(V){var ea=this.current;if(V.r!==ea.r||V.g!==ea.g||V.b!==ea.b||V.a!==ea.a||this.dirty)this.gl.blendColor(V.r,V.g,V.b,V.a),this.current=V,this.dirty=!1};return X}(yb),id=function(S){function X(){S.apply(this,arguments)}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return this.gl.FUNC_ADD};X.prototype.set=
function(V){if(V!==this.current||this.dirty)this.gl.blendEquation(V),this.current=V,this.dirty=!1};return X}(yb),Nd=function(S){function X(){S.apply(this,arguments)}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return!1};X.prototype.set=function(V){if(V!==this.current||this.dirty){var ea=this.gl;V?ea.enable(ea.CULL_FACE):ea.disable(ea.CULL_FACE);this.current=V;this.dirty=!1}};return X}(yb),Rd=function(S){function X(){S.apply(this,
arguments)}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return this.gl.BACK};X.prototype.set=function(V){if(V!==this.current||this.dirty)this.gl.cullFace(V),this.current=V,this.dirty=!1};return X}(yb),Wd=function(S){function X(){S.apply(this,arguments)}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return this.gl.CCW};X.prototype.set=function(V){if(V!==
this.current||this.dirty)this.gl.frontFace(V),this.current=V,this.dirty=!1};return X}(yb),Se=function(S){function X(){S.apply(this,arguments)}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return null};X.prototype.set=function(V){if(V!==this.current||this.dirty)this.gl.useProgram(V),this.current=V,this.dirty=!1};return X}(yb),Ne=function(S){function X(){S.apply(this,arguments)}S&&(X.__proto__=S);X.prototype=Object.create(S&&
S.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return this.gl.TEXTURE0};X.prototype.set=function(V){if(V!==this.current||this.dirty)this.gl.activeTexture(V),this.current=V,this.dirty=!1};return X}(yb),te=function(S){function X(){S.apply(this,arguments)}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){var V=this.gl;return[0,0,V.drawingBufferWidth,V.drawingBufferHeight]};X.prototype.set=function(V){var ea=
this.current;if(V[0]!==ea[0]||V[1]!==ea[1]||V[2]!==ea[2]||V[3]!==ea[3]||this.dirty)this.gl.viewport(V[0],V[1],V[2],V[3]),this.current=V,this.dirty=!1};return X}(yb),qf=function(S){function X(){S.apply(this,arguments)}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return null};X.prototype.set=function(V){if(V!==this.current||this.dirty){var ea=this.gl;ea.bindFramebuffer(ea.FRAMEBUFFER,V);this.current=V;this.dirty=!1}};return X}(yb),
sf=function(S){function X(){S.apply(this,arguments)}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return null};X.prototype.set=function(V){if(V!==this.current||this.dirty){var ea=this.gl;ea.bindRenderbuffer(ea.RENDERBUFFER,V);this.current=V;this.dirty=!1}};return X}(yb),of=function(S){function X(){S.apply(this,arguments)}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;X.prototype.getDefault=
function(){return null};X.prototype.set=function(V){if(V!==this.current||this.dirty){var ea=this.gl;ea.bindTexture(ea.TEXTURE_2D,V);this.current=V;this.dirty=!1}};return X}(yb),vf=function(S){function X(){S.apply(this,arguments)}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return null};X.prototype.set=function(V){if(V!==this.current||this.dirty){var ea=this.gl;ea.bindBuffer(ea.ARRAY_BUFFER,V);this.current=V;this.dirty=!1}};
return X}(yb),Bf=function(S){function X(){S.apply(this,arguments)}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return null};X.prototype.set=function(V){var ea=this.gl;ea.bindBuffer(ea.ELEMENT_ARRAY_BUFFER,V);this.current=V;this.dirty=!1};return X}(yb),Sd=function(S){function X(V){S.call(this,V);this.vao=V.extVertexArrayObject}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;X.prototype.getDefault=
function(){return null};X.prototype.set=function(V){this.vao&&(V!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(V),this.current=V,this.dirty=!1)};return X}(yb),De=function(S){function X(){S.apply(this,arguments)}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return 4};X.prototype.set=function(V){if(V!==this.current||this.dirty){var ea=this.gl;ea.pixelStorei(ea.UNPACK_ALIGNMENT,V);this.current=V;this.dirty=!1}};return X}(yb),
hf=function(S){function X(){S.apply(this,arguments)}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return!1};X.prototype.set=function(V){if(V!==this.current||this.dirty){var ea=this.gl;ea.pixelStorei(ea.UNPACK_PREMULTIPLY_ALPHA_WEBGL,V);this.current=V;this.dirty=!1}};return X}(yb),bf=function(S){function X(){S.apply(this,arguments)}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;X.prototype.getDefault=
function(){return!1};X.prototype.set=function(V){if(V!==this.current||this.dirty){var ea=this.gl;ea.pixelStorei(ea.UNPACK_FLIP_Y_WEBGL,V);this.current=V;this.dirty=!1}};return X}(yb),Qe=function(S){function X(V,ea){S.call(this,V);this.context=V;this.parent=ea}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;X.prototype.getDefault=function(){return null};return X}(yb),He=function(S){function X(){S.apply(this,arguments)}S&&(X.__proto__=S);X.prototype=Object.create(S&&
S.prototype);X.prototype.constructor=X;X.prototype.setDirty=function(){this.dirty=!0};X.prototype.set=function(V){if(V!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var ea=this.gl;ea.framebufferTexture2D(ea.FRAMEBUFFER,ea.COLOR_ATTACHMENT0,ea.TEXTURE_2D,V,0);this.current=V;this.dirty=!1}};return X}(Qe),$e=function(S){function X(){S.apply(this,arguments)}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;X.prototype.set=function(V){if(V!==
this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var ea=this.gl;ea.framebufferRenderbuffer(ea.FRAMEBUFFER,ea.DEPTH_ATTACHMENT,ea.RENDERBUFFER,V);this.current=V;this.dirty=!1}};return X}(Qe),df=function(S,X,V,ea){this.context=S;this.width=X;this.height=V;X=this.framebuffer=S.gl.createFramebuffer();this.colorAttachment=new He(S,X);ea&&(this.depthAttachment=new $e(S,X))};df.prototype.destroy=function(){var S=this.context.gl,X=this.colorAttachment.get();X&&S.deleteTexture(X);this.depthAttachment&&
(X=this.depthAttachment.get())&&S.deleteRenderbuffer(X);S.deleteFramebuffer(this.framebuffer)};var Rc=function(S,X,V){this.func=S;this.mask=X;this.range=V};Rc.ReadOnly=!1;Rc.ReadWrite=!0;Rc.disabled=new Rc(519,Rc.ReadOnly,[0,1]);var Gd=function(S,X,V,ea,va,Da){this.test=S;this.ref=X;this.mask=V;this.fail=ea;this.depthFail=va;this.pass=Da};Gd.disabled=new Gd({func:519,mask:0},0,0,7680,7680,7680);var Mb=function(S,X,V){this.blendFunction=S;this.blendColor=X;this.mask=V};Mb.Replace=[1,0];Mb.disabled=
new Mb(Mb.Replace,a.Color.transparent,[!1,!1,!1,!1]);Mb.unblended=new Mb(Mb.Replace,a.Color.transparent,[!0,!0,!0,!0]);Mb.alphaBlended=new Mb([1,771],a.Color.transparent,[!0,!0,!0,!0]);var $b=function(S,X,V){this.enable=S;this.mode=X;this.frontFace=V};$b.disabled=new $b(!1,1029,2305);$b.backCCW=new $b(!0,1029,2305);var Mc=function(S){this.gl=S;this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object");this.clearColor=new ac(this);this.clearDepth=new Vb(this);this.clearStencil=new mc(this);
this.colorMask=new tc(this);this.depthMask=new Uc(this);this.stencilMask=new kd(this);this.stencilFunc=new Bd(this);this.stencilOp=new Fd(this);this.stencilTest=new yd(this);this.depthRange=new Lc(this);this.depthTest=new cd(this);this.depthFunc=new Nc(this);this.blend=new Xc(this);this.blendFunc=new Zc(this);this.blendColor=new Sc(this);this.blendEquation=new id(this);this.cullFace=new Nd(this);this.cullFaceSide=new Rd(this);this.frontFace=new Wd(this);this.program=new Se(this);this.activeTexture=
new Ne(this);this.viewport=new te(this);this.bindFramebuffer=new qf(this);this.bindRenderbuffer=new sf(this);this.bindTexture=new of(this);this.bindVertexBuffer=new vf(this);this.bindElementBuffer=new Bf(this);this.bindVertexArrayOES=this.extVertexArrayObject&&new Sd(this);this.pixelStoreUnpack=new De(this);this.pixelStoreUnpackPremultiplyAlpha=new hf(this);this.pixelStoreUnpackFlipY=new bf(this);if(this.extTextureFilterAnisotropic=S.getExtension("EXT_texture_filter_anisotropic")||S.getExtension("MOZ_EXT_texture_filter_anisotropic")||
S.getExtension("WEBKIT_EXT_texture_filter_anisotropic"))this.extTextureFilterAnisotropicMax=S.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT);if(this.extTextureHalfFloat=S.getExtension("OES_texture_half_float"))S.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=S.getExtension("EXT_color_buffer_half_float");this.extTimerQuery=S.getExtension("EXT_disjoint_timer_query")};Mc.prototype.setDefault=function(){this.unbindVAO();this.clearColor.setDefault();
this.clearDepth.setDefault();this.clearStencil.setDefault();this.colorMask.setDefault();this.depthMask.setDefault();this.stencilMask.setDefault();this.stencilFunc.setDefault();this.stencilOp.setDefault();this.stencilTest.setDefault();this.depthRange.setDefault();this.depthTest.setDefault();this.depthFunc.setDefault();this.blend.setDefault();this.blendFunc.setDefault();this.blendColor.setDefault();this.blendEquation.setDefault();this.cullFace.setDefault();this.cullFaceSide.setDefault();this.frontFace.setDefault();
this.program.setDefault();this.activeTexture.setDefault();this.bindFramebuffer.setDefault();this.pixelStoreUnpack.setDefault();this.pixelStoreUnpackPremultiplyAlpha.setDefault();this.pixelStoreUnpackFlipY.setDefault()};Mc.prototype.setDirty=function(){this.clearColor.dirty=!0;this.clearDepth.dirty=!0;this.clearStencil.dirty=!0;this.colorMask.dirty=!0;this.depthMask.dirty=!0;this.stencilMask.dirty=!0;this.stencilFunc.dirty=!0;this.stencilOp.dirty=!0;this.stencilTest.dirty=!0;this.depthRange.dirty=
!0;this.depthTest.dirty=!0;this.depthFunc.dirty=!0;this.blend.dirty=!0;this.blendFunc.dirty=!0;this.blendColor.dirty=!0;this.blendEquation.dirty=!0;this.cullFace.dirty=!0;this.cullFaceSide.dirty=!0;this.frontFace.dirty=!0;this.program.dirty=!0;this.activeTexture.dirty=!0;this.viewport.dirty=!0;this.bindFramebuffer.dirty=!0;this.bindRenderbuffer.dirty=!0;this.bindTexture.dirty=!0;this.bindVertexBuffer.dirty=!0;this.bindElementBuffer.dirty=!0;this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=
!0);this.pixelStoreUnpack.dirty=!0;this.pixelStoreUnpackPremultiplyAlpha.dirty=!0;this.pixelStoreUnpackFlipY.dirty=!0};Mc.prototype.createIndexBuffer=function(S,X){return new zc(this,S,X)};Mc.prototype.createVertexBuffer=function(S,X,V){return new Ub(this,S,X,V)};Mc.prototype.createRenderbuffer=function(S,X,V){var ea=this.gl,va=ea.createRenderbuffer();this.bindRenderbuffer.set(va);ea.renderbufferStorage(ea.RENDERBUFFER,S,X,V);this.bindRenderbuffer.set(null);return va};Mc.prototype.createFramebuffer=
function(S,X,V){return new df(this,S,X,V)};Mc.prototype.clear=function(S){var X=S.color;S=S.depth;var V=this.gl,ea=0;X&&(ea|=V.COLOR_BUFFER_BIT,this.clearColor.set(X),this.colorMask.set([!0,!0,!0,!0]));"undefined"!==typeof S&&(ea|=V.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(S),this.depthMask.set(!0));V.clear(ea)};Mc.prototype.setCullFace=function(S){!1===S.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(S.mode),this.frontFace.set(S.frontFace))};Mc.prototype.setDepthMode=
function(S){S.func!==this.gl.ALWAYS||S.mask?(this.depthTest.set(!0),this.depthFunc.set(S.func),this.depthMask.set(S.mask),this.depthRange.set(S.range)):this.depthTest.set(!1)};Mc.prototype.setStencilMode=function(S){S.test.func!==this.gl.ALWAYS||S.mask?(this.stencilTest.set(!0),this.stencilMask.set(S.mask),this.stencilOp.set([S.fail,S.depthFail,S.pass]),this.stencilFunc.set({func:S.test.func,ref:S.ref,mask:S.test.mask})):this.stencilTest.set(!1)};Mc.prototype.setColorMode=function(S){a.deepEqual(S.blendFunction,
Mb.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(S.blendFunction),this.blendColor.set(S.blendColor));this.colorMask.set(S.mask)};Mc.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Hd=function(S){function X(V,ea,va){var Da=this;S.call(this);this.id=V;this.dispatcher=va;this.on("data",function(Ra){"source"===Ra.dataType&&"metadata"===Ra.sourceDataType&&(Da._sourceLoaded=!0);Da._sourceLoaded&&!Da._paused&&"source"===Ra.dataType&&"content"===
Ra.sourceDataType&&(Da.reload(),Da.transform&&Da.update(Da.transform))});this.on("error",function(){Da._sourceErrored=!0});this._source=sc(V,ea,va,this);this._tiles={};this._cache=new pc(0,this._unloadTile.bind(this));this._timers={};this._cacheTimers={};this._maxTileCacheSize=null;this._loadedParentTiles={};this._coveredTiles={};this._state=new a.SourceFeatureState}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;X.prototype.onAdd=function(V){this._maxTileCacheSize=
(this.map=V)?V._maxTileCacheSize:null;if(this._source&&this._source.onAdd)this._source.onAdd(V)};X.prototype.onRemove=function(V){if(this._source&&this._source.onRemove)this._source.onRemove(V)};X.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var V in this._tiles){var ea=this._tiles[V];if("loaded"!==ea.state&&"errored"!==ea.state)return!1}return!0};X.prototype.getSource=function(){return this._source};X.prototype.pause=function(){this._paused=
!0};X.prototype.resume=function(){if(this._paused){var V=this._shouldReloadOnResume;this._shouldReloadOnResume=this._paused=!1;V&&this.reload();this.transform&&this.update(this.transform)}};X.prototype._loadTile=function(V,ea){return this._source.loadTile(V,ea)};X.prototype._unloadTile=function(V){if(this._source.unloadTile)return this._source.unloadTile(V,function(){})};X.prototype._abortTile=function(V){if(this._source.abortTile)return this._source.abortTile(V,function(){})};X.prototype.serialize=
function(){return this._source.serialize()};X.prototype.prepare=function(V){this._source.prepare&&this._source.prepare();this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(var ea in this._tiles){var va=this._tiles[ea];va.upload(V);va.prepare(this.map.style.imageManager)}};X.prototype.getIds=function(){return a.values(this._tiles).map(function(V){return V.tileID}).sort(A).map(function(V){return V.key})};X.prototype.getRenderableIds=function(V){var ea=this,va=[],Da;for(Da in this._tiles)this._isIdRenderable(Da,
V)&&va.push(this._tiles[Da]);return V?va.sort(function(Ra,nb){Ra=Ra.tileID;nb=nb.tileID;var Nb=(new a.Point(Ra.canonical.x,Ra.canonical.y))._rotate(ea.transform.angle),Xb=(new a.Point(nb.canonical.x,nb.canonical.y))._rotate(ea.transform.angle);return Ra.overscaledZ-nb.overscaledZ||Xb.y-Nb.y||Xb.x-Nb.x}).map(function(Ra){return Ra.tileID.key}):va.map(function(Ra){return Ra.tileID}).sort(A).map(function(Ra){return Ra.key})};X.prototype.hasRenderableParent=function(V){return(V=this.findLoadedParent(V,
0))?this._isIdRenderable(V.tileID.key):!1};X.prototype._isIdRenderable=function(V,ea){return this._tiles[V]&&this._tiles[V].hasData()&&!this._coveredTiles[V]&&(ea||!this._tiles[V].holdingForFade())};X.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(var V in this._tiles)"errored"!==this._tiles[V].state&&this._reloadTile(V,"reloading")}};X.prototype._reloadTile=function(V,ea){var va=this._tiles[V];va&&("loading"!==va.state&&(va.state=ea),this._loadTile(va,
this._tileLoaded.bind(this,va,V,ea)))};X.prototype._tileLoaded=function(V,ea,va,Da){Da?(V.state="errored",404!==Da.status?this._source.fire(new a.ErrorEvent(Da,{tile:V})):this.update(this.transform)):(V.timeAdded=a.browser.now(),"expired"===va&&(V.refreshedUponExpiration=!0),this._setTileReloadTimer(ea,V),"raster-dem"===this.getSource().type&&V.dem&&this._backfillDEM(V),this._state.initializeTileState(V,this.map?this.map.painter:null),this._source.fire(new a.Event("data",{dataType:"source",tile:V,
coord:V.tileID})))};X.prototype._backfillDEM=function(V){function ea(nb,Nb){nb.needsHillshadePrepare=!0;var Xb=Nb.tileID.canonical.x-nb.tileID.canonical.x,jc=Nb.tileID.canonical.y-nb.tileID.canonical.y,Jc=Math.pow(2,nb.tileID.canonical.z),Kc=Nb.tileID.key;0===Xb&&0===jc||1<Math.abs(jc)||(1<Math.abs(Xb)&&(1===Math.abs(Xb+Jc)?Xb+=Jc:1===Math.abs(Xb-Jc)&&(Xb-=Jc)),Nb.dem&&nb.dem&&(nb.dem.backfillBorder(Nb.dem,Xb,jc),nb.neighboringTiles&&nb.neighboringTiles[Kc]&&(nb.neighboringTiles[Kc].backfilled=!0)))}
for(var va=this.getRenderableIds(),Da=0;Da<va.length;Da++){var Ra=va[Da];V.neighboringTiles&&V.neighboringTiles[Ra]&&(Ra=this.getTileByID(Ra),ea(V,Ra),ea(Ra,V))}};X.prototype.getTile=function(V){return this.getTileByID(V.key)};X.prototype.getTileByID=function(V){return this._tiles[V]};X.prototype._retainLoadedChildren=function(V,ea,va,Da){for(var Ra in this._tiles){var nb=this._tiles[Ra];if(!(Da[Ra]||!nb.hasData()||nb.tileID.overscaledZ<=ea||nb.tileID.overscaledZ>va)){for(var Nb=nb.tileID;nb&&nb.tileID.overscaledZ>
ea+1;){var Xb=nb.tileID.scaledTo(nb.tileID.overscaledZ-1);(nb=this._tiles[Xb.key])&&nb.hasData()&&(Nb=Xb)}for(nb=Nb;nb.overscaledZ>ea;)if(nb=nb.scaledTo(nb.overscaledZ-1),V[nb.key]){Da[Nb.key]=Nb;break}}}};X.prototype.findLoadedParent=function(V,ea){if(V.key in this._loadedParentTiles)return(V=this._loadedParentTiles[V.key])&&V.tileID.overscaledZ>=ea?V:null;for(var va=V.overscaledZ-1;va>=ea;va--){var Da=V.scaledTo(va);if(Da=this._getLoadedTile(Da))return Da}};X.prototype._getLoadedTile=function(V){var ea=
this._tiles[V.key];return ea&&ea.hasData()?ea:this._cache.getByKey(V.wrapped().key)};X.prototype.updateCacheSize=function(V){V=Math.floor((Math.ceil(V.width/this._source.tileSize)+1)*(Math.ceil(V.height/this._source.tileSize)+1)*5);this._cache.setMaxSize("number"===typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,V):V)};X.prototype.handleWrapJump=function(V){var ea=Math.round((V-(void 0===this._prevLng?V:this._prevLng))/360);this._prevLng=V;if(ea){V={};for(var va in this._tiles){var Da=
this._tiles[va];Da.tileID=Da.tileID.unwrapTo(Da.tileID.wrap+ea);V[Da.tileID.key]=Da}this._tiles=V;for(var Ra in this._timers)clearTimeout(this._timers[Ra]),delete this._timers[Ra];for(var nb in this._tiles)this._setTileReloadTimer(nb,this._tiles[nb])}};X.prototype.update=function(V){var ea=this;this.transform=V;if(this._sourceLoaded&&!this._paused){this.updateCacheSize(V);this.handleWrapJump(this.transform.center.lng);this._coveredTiles={};if(this.used)if(this._source.tileID)var va=V.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(wd){return new a.OverscaledTileID(wd.canonical.z,
wd.wrap,wd.canonical.z,wd.canonical.x,wd.canonical.y)});else va=V.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(va=va.filter(function(wd){return ea._source.hasTile(wd)}));else va=[];V=V.coveringZoomLevel(this._source);var Da=Math.max(V-X.maxOverzooming,this._source.minzoom),Ra=Math.max(V+X.maxUnderzooming,this._source.minzoom);va=this._updateRetainedTiles(va,
V);if(D(this._source.type)){for(var nb={},Nb={},Xb=0,jc=Object.keys(va);Xb<jc.length;Xb+=1){var Jc=jc[Xb],Kc=va[Jc],$c=this._tiles[Jc];if($c&&!($c.fadeEndTime&&$c.fadeEndTime<=a.browser.now())){if($c=this.findLoadedParent(Kc,Da))this._addTile($c.tileID),nb[$c.tileID.key]=$c.tileID;Nb[Jc]=Kc}}this._retainLoadedChildren(Nb,V,Ra,va);for(var ad in nb)va[ad]||(this._coveredTiles[ad]=!0,va[ad]=nb[ad])}for(var Wc in va)this._tiles[Wc].clearFadeHold();ad=0;for(Wc=a.keysDifference(this._tiles,va);ad<Wc.length;ad+=
1)V=Wc[ad],Da=this._tiles[V],Da.hasSymbolBuckets&&!Da.holdingForFade()?Da.setHoldDuration(this.map._fadeDuration):(!Da.hasSymbolBuckets||Da.symbolFadeFinished())&&this._removeTile(V);this._updateLoadedParentTileCache()}};X.prototype.releaseSymbolFadeTiles=function(){for(var V in this._tiles)this._tiles[V].holdingForFade()&&this._removeTile(V)};X.prototype._updateRetainedTiles=function(V,ea){for(var va={},Da={},Ra=Math.max(ea-X.maxOverzooming,this._source.minzoom),nb=Math.max(ea+X.maxUnderzooming,
this._source.minzoom),Nb={},Xb=0;Xb<V.length;Xb+=1){var jc=V[Xb],Jc=this._addTile(jc);va[jc.key]=jc;Jc.hasData()||ea<this._source.maxzoom&&(Nb[jc.key]=jc)}this._retainLoadedChildren(Nb,ea,nb,va);for(nb=0;nb<V.length;nb+=1)if(Nb=V[nb],Xb=this._tiles[Nb.key],!Xb.hasData()){if(ea+1>this._source.maxzoom){if(jc=Nb.children(this._source.maxzoom)[0],(Jc=this.getTile(jc))&&Jc.hasData()){va[jc.key]=jc;continue}}else if(jc=Nb.children(this._source.maxzoom),va[jc[0].key]&&va[jc[1].key]&&va[jc[2].key]&&va[jc[3].key])continue;
jc=Xb.wasRequested();for(Jc=Nb.overscaledZ-1;Jc>=Ra;--Jc){var Kc=Nb.scaledTo(Jc);if(Da[Kc.key])break;Da[Kc.key]=!0;Xb=this.getTile(Kc);!Xb&&jc&&(Xb=this._addTile(Kc));if(Xb&&(va[Kc.key]=Kc,jc=Xb.wasRequested(),Xb.hasData()))break}}return va};X.prototype._updateLoadedParentTileCache=function(){this._loadedParentTiles={};for(var V in this._tiles){for(var ea=[],va=void 0,Da=this._tiles[V].tileID;0<Da.overscaledZ;){if(Da.key in this._loadedParentTiles){va=this._loadedParentTiles[Da.key];break}ea.push(Da.key);
Da=Da.scaledTo(Da.overscaledZ-1);if(va=this._getLoadedTile(Da))break}for(Da=0;Da<ea.length;Da+=1)this._loadedParentTiles[ea[Da]]=va}};X.prototype._addTile=function(V){var ea=this._tiles[V.key];if(ea)return ea;if(ea=this._cache.getAndRemove(V))this._setTileReloadTimer(V.key,ea),ea.tileID=V,this._state.initializeTileState(ea,this.map?this.map.painter:null),this._cacheTimers[V.key]&&(clearTimeout(this._cacheTimers[V.key]),delete this._cacheTimers[V.key],this._setTileReloadTimer(V.key,ea));var va=!!ea;
va||(ea=new a.Tile(V,this._source.tileSize*V.overscaleFactor()),this._loadTile(ea,this._tileLoaded.bind(this,ea,V.key,ea.state)));if(!ea)return null;ea.uses++;this._tiles[V.key]=ea;va||this._source.fire(new a.Event("dataloading",{tile:ea,coord:ea.tileID,dataType:"source"}));return ea};X.prototype._setTileReloadTimer=function(V,ea){var va=this;V in this._timers&&(clearTimeout(this._timers[V]),delete this._timers[V]);(ea=ea.getExpiryTimeout())&&(this._timers[V]=setTimeout(function(){va._reloadTile(V,
"expired");delete va._timers[V]},ea))};X.prototype._removeTile=function(V){var ea=this._tiles[V];ea&&(ea.uses--,delete this._tiles[V],this._timers[V]&&(clearTimeout(this._timers[V]),delete this._timers[V]),0<ea.uses||(ea.hasData()&&"reloading"!==ea.state?this._cache.add(ea.tileID,ea,ea.getExpiryTimeout()):(ea.aborted=!0,this._abortTile(ea),this._unloadTile(ea))))};X.prototype.clearTiles=function(){this._paused=this._shouldReloadOnResume=!1;for(var V in this._tiles)this._removeTile(V);this._cache.reset()};
X.prototype.tilesIn=function(V,ea,va){var Da=this,Ra=[],nb=this.transform;if(!nb)return Ra;va=va?nb.getCameraQueryGeometry(V):V;var Nb=V.map(function(Wc){return nb.pointCoordinate(Wc)}),Xb=va.map(function(Wc){return nb.pointCoordinate(Wc)}),jc=this.getIds(),Jc=Infinity,Kc=Infinity,$c=-Infinity,ad=-Infinity;for(V=0;V<Xb.length;V+=1)va=Xb[V],Jc=Math.min(Jc,va.x),Kc=Math.min(Kc,va.y),$c=Math.max($c,va.x),ad=Math.max(ad,va.y);V=function(Wc){Wc=Da._tiles[jc[Wc]];if(!Wc.holdingForFade()){var wd=Wc.tileID,
Ed=Math.pow(2,nb.zoom-Wc.tileID.overscaledZ),Ld=ea*Wc.queryPadding*a.EXTENT/Wc.tileSize/Ed,he=[wd.getTilePoint(new a.MercatorCoordinate(Jc,Kc)),wd.getTilePoint(new a.MercatorCoordinate($c,ad))];he[0].x-Ld<a.EXTENT&&he[0].y-Ld<a.EXTENT&&0<=he[1].x+Ld&&0<=he[1].y+Ld&&(Ld=Nb.map(function(de){return wd.getTilePoint(de)}),he=Xb.map(function(de){return wd.getTilePoint(de)}),Ra.push({tile:Wc,tileID:wd,queryGeometry:Ld,cameraQueryGeometry:he,scale:Ed}))}};for(va=0;va<jc.length;va++)V(va);return Ra};X.prototype.getVisibleCoordinates=
function(V){var ea=this;V=this.getRenderableIds(V).map(function(Ra){return ea._tiles[Ra].tileID});for(var va=0;va<V.length;va+=1){var Da=V[va];Da.posMatrix=this.transform.calculatePosMatrix(Da.toUnwrapped())}return V};X.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(D(this._source.type))for(var V in this._tiles){var ea=this._tiles[V];if(void 0!==ea.fadeEndTime&&ea.fadeEndTime>=a.browser.now())return!0}return!1};X.prototype.setFeatureState=function(V,ea,va){this._state.updateState(V||
"_geojsonTileLayer",ea,va)};X.prototype.removeFeatureState=function(V,ea,va){this._state.removeFeatureState(V||"_geojsonTileLayer",ea,va)};X.prototype.getFeatureState=function(V,ea){return this._state.getState(V||"_geojsonTileLayer",ea)};X.prototype.setDependencies=function(V,ea,va){(V=this._tiles[V])&&V.setDependencies(ea,va)};X.prototype.reloadTilesForDependencies=function(V,ea){for(var va in this._tiles)this._tiles[va].hasDependency(V,ea)&&this._reloadTile(va,"reloading");this._cache.filter(function(Da){return!Da.hasDependency(V,
ea)})};return X}(a.Evented);Hd.maxOverzooming=10;Hd.maxUnderzooming=3;var qd=function(){this.active={}};qd.prototype.acquire=function(S){if(!this.workers)for(this.workers=[];this.workers.length<qd.workerCount;)this.workers.push(new C);this.active[S]=!0;return this.workers.slice()};qd.prototype.release=function(S){delete this.active[S];0===this.numActive()&&(this.workers.forEach(function(X){X.terminate()}),this.workers=null)};qd.prototype.isPreloaded=function(){return!!this.active.mapboxgl_preloaded_worker_pool};
qd.prototype.numActive=function(){return Object.keys(this.active).length};qd.workerCount=Math.max(Math.min(Math.floor(a.browser.hardwareConcurrency/2),6),1);var qe,Id={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",
setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"},ue=function(S,X){this.reset(S,X)};ue.prototype.reset=function(S,X){this.points=S||[];this._distances=[0];for(S=1;S<this.points.length;S++)this._distances[S]=this._distances[S-1]+this.points[S].dist(this.points[S-1]);this.length=this._distances[this._distances.length-1];this.padding=Math.min(X||0,.5*this.length);this.paddedLength=this.length-2*
this.padding};ue.prototype.lerp=function(S){if(1===this.points.length)return this.points[0];S=a.clamp(S,0,1);for(var X=1,V=this._distances[X],ea=S*this.paddedLength+this.padding;V<ea&&X<this._distances.length;)V=this._distances[++X];S=X-1;var va=this._distances[S];V-=va;V=0<V?(ea-va)/V:0;return this.points[S].mult(1-V).add(this.points[X].mult(V))};var Be=function(S,X,V){var ea=this.boxCells=[],va=this.circleCells=[];this.xCellCount=Math.ceil(S/V);this.yCellCount=Math.ceil(X/V);for(V=0;V<this.xCellCount*
this.yCellCount;V++)ea.push([]),va.push([]);this.circleKeys=[];this.boxKeys=[];this.bboxes=[];this.circles=[];this.width=S;this.height=X;this.xScale=this.xCellCount/S;this.yScale=this.yCellCount/X;this.circleUid=this.boxUid=0};Be.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length};Be.prototype.insert=function(S,X,V,ea,va){this._forEachCell(X,V,ea,va,this._insertBoxCell,this.boxUid++);this.boxKeys.push(S);this.bboxes.push(X);this.bboxes.push(V);this.bboxes.push(ea);this.bboxes.push(va)};
Be.prototype.insertCircle=function(S,X,V,ea){this._forEachCell(X-ea,V-ea,X+ea,V+ea,this._insertCircleCell,this.circleUid++);this.circleKeys.push(S);this.circles.push(X);this.circles.push(V);this.circles.push(ea)};Be.prototype._insertBoxCell=function(S,X,V,ea,va,Da){this.boxCells[va].push(Da)};Be.prototype._insertCircleCell=function(S,X,V,ea,va,Da){this.circleCells[va].push(Da)};Be.prototype._query=function(S,X,V,ea,va,Da){if(0>V||S>this.width||0>ea||X>this.height)return va?!1:[];var Ra=[];if(0>=S&&
0>=X&&this.width<=V&&this.height<=ea){if(va)return!0;for(S=0;S<this.boxKeys.length;S++)Ra.push({key:this.boxKeys[S],x1:this.bboxes[4*S],y1:this.bboxes[4*S+1],x2:this.bboxes[4*S+2],y2:this.bboxes[4*S+3]});for(S=0;S<this.circleKeys.length;S++)X=this.circles[3*S],V=this.circles[3*S+1],ea=this.circles[3*S+2],Ra.push({key:this.circleKeys[S],x1:X-ea,y1:V-ea,x2:X+ea,y2:V+ea});return Da?Ra.filter(Da):Ra}this._forEachCell(S,X,V,ea,this._queryCell,Ra,{hitTest:va,seenUids:{box:{},circle:{}}},Da);return va?0<
Ra.length:Ra};Be.prototype._queryCircle=function(S,X,V,ea,va){var Da=S-V,Ra=S+V,nb=X-V,Nb=X+V;if(0>Ra||Da>this.width||0>Nb||nb>this.height)return ea?!1:[];var Xb=[];this._forEachCell(Da,nb,Ra,Nb,this._queryCellCircle,Xb,{hitTest:ea,circle:{x:S,y:X,radius:V},seenUids:{box:{},circle:{}}},va);return ea?0<Xb.length:Xb};Be.prototype.query=function(S,X,V,ea,va){return this._query(S,X,V,ea,!1,va)};Be.prototype.hitTest=function(S,X,V,ea,va){return this._query(S,X,V,ea,!0,va)};Be.prototype.hitTestCircle=function(S,
X,V,ea){return this._queryCircle(S,X,V,!0,ea)};Be.prototype._queryCell=function(S,X,V,ea,va,Da,Ra,nb){var Nb=Ra.seenUids,Xb=this.boxCells[va];if(null!==Xb)for(var jc=this.bboxes,Jc=0;Jc<Xb.length;Jc+=1){var Kc=Xb[Jc];if(!Nb.box[Kc]){Nb.box[Kc]=!0;var $c=4*Kc;if(S<=jc[$c+2]&&X<=jc[$c+3]&&V>=jc[$c+0]&&ea>=jc[$c+1]&&(!nb||nb(this.boxKeys[Kc]))){if(Ra.hitTest)return Da.push(!0),!0;Da.push({key:this.boxKeys[Kc],x1:jc[$c],y1:jc[$c+1],x2:jc[$c+2],y2:jc[$c+3]})}}}va=this.circleCells[va];if(null!==va)for(Xb=
this.circles,jc=0;jc<va.length;jc+=1)if(Jc=va[jc],!Nb.circle[Jc]){Nb.circle[Jc]=!0;var ad=3*Jc;if(this._circleAndRectCollide(Xb[ad],Xb[ad+1],Xb[ad+2],S,X,V,ea)&&(!nb||nb(this.circleKeys[Jc]))){if(Ra.hitTest)return Da.push(!0),!0;Kc=Xb[ad];$c=Xb[ad+1];ad=Xb[ad+2];Da.push({key:this.circleKeys[Jc],x1:Kc-ad,y1:$c-ad,x2:Kc+ad,y2:$c+ad})}}};Be.prototype._queryCellCircle=function(S,X,V,ea,va,Da,Ra,nb){S=Ra.circle;Ra=Ra.seenUids;X=this.boxCells[va];if(null!==X)for(V=this.bboxes,ea=0;ea<X.length;ea+=1){var Nb=
X[ea];if(!Ra.box[Nb]){Ra.box[Nb]=!0;var Xb=4*Nb;if(this._circleAndRectCollide(S.x,S.y,S.radius,V[Xb+0],V[Xb+1],V[Xb+2],V[Xb+3])&&(!nb||nb(this.boxKeys[Nb])))return Da.push(!0),!0}}va=this.circleCells[va];if(null!==va)for(X=this.circles,V=0;V<va.length;V+=1)if(ea=va[V],!Ra.circle[ea]&&(Ra.circle[ea]=!0,Nb=3*ea,this._circlesCollide(X[Nb],X[Nb+1],X[Nb+2],S.x,S.y,S.radius)&&(!nb||nb(this.circleKeys[ea]))))return Da.push(!0),!0};Be.prototype._forEachCell=function(S,X,V,ea,va,Da,Ra,nb){for(var Nb=this._convertToXCellCoord(S),
Xb=this._convertToYCellCoord(X),jc=this._convertToXCellCoord(V),Jc=this._convertToYCellCoord(ea);Nb<=jc;Nb++)for(var Kc=Xb;Kc<=Jc;Kc++)if(va.call(this,S,X,V,ea,this.xCellCount*Kc+Nb,Da,Ra,nb))return};Be.prototype._convertToXCellCoord=function(S){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(S*this.xScale)))};Be.prototype._convertToYCellCoord=function(S){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(S*this.yScale)))};Be.prototype._circlesCollide=function(S,X,V,ea,va,Da){S=ea-S;
X=va-X;V+=Da;return V*V>S*S+X*X};Be.prototype._circleAndRectCollide=function(S,X,V,ea,va,Da,Ra){Da=(Da-ea)/2;S=Math.abs(S-(ea+Da));if(S>Da+V)return!1;Ra=(Ra-va)/2;X=Math.abs(X-(va+Ra));if(X>Ra+V)return!1;if(S<=Da||X<=Ra)return!0;va=S-Da;X-=Ra;return va*va+X*X<=V*V};var oe=new Float32Array([-Infinity,-Infinity,0,-Infinity,-Infinity,0,-Infinity,-Infinity,0,-Infinity,-Infinity,0]),zb=function(S,X,V){void 0===X&&(X=new Be(S.width+200,S.height+200,25));void 0===V&&(V=new Be(S.width+200,S.height+200,25));
this.transform=S;this.grid=X;this.ignoredGrid=V;this.pitchfactor=Math.cos(S._pitch)*S.cameraToCenterDistance;this.screenRightBoundary=S.width+100;this.screenBottomBoundary=S.height+100;this.gridRightBoundary=S.width+200;this.gridBottomBoundary=S.height+200};zb.prototype.placeCollisionBox=function(S,X,V,ea,va){ea=this.projectAndGetPerspectiveRatio(ea,S.anchorPointX,S.anchorPointY);var Da=V*ea.perspectiveRatio;V=S.x1*Da+ea.point.x;var Ra=S.y1*Da+ea.point.y,nb=S.x2*Da+ea.point.x;S=S.y2*Da+ea.point.y;
return!this.isInsideGrid(V,Ra,nb,S)||!X&&this.grid.hitTest(V,Ra,nb,S,va)?{box:[],offscreen:!1}:{box:[V,Ra,nb,S],offscreen:this.isOffscreen(V,Ra,nb,S)}};zb.prototype.placeCollisionCircles=function(S,X,V,ea,va,Da,Ra,nb,Nb,Xb,jc,Jc,Kc){var $c=[],ad=new a.Point(X.anchorX,X.anchorY);Da=Z(ad,Da);Da=.5+this.transform.cameraToCenterDistance/Da.signedDistanceFromCamera*.5;va=(Xb?va/Da:va*Da)/a.ONE_EM;Xb=Z(ad,Ra).point;va=W(va,ea,X.lineOffsetX*va,X.lineOffsetY*va,!1,Xb,ad,X,V,Ra,{});V=X=!1;ea=!0;if(va){Jc=
.5*Jc*Da+Kc;Ra=new a.Point(-100,-100);ad=new a.Point(this.screenRightBoundary,this.screenBottomBoundary);Kc=new ue;Da=va.first;Xb=va.last;va=[];for(var Wc=Da.path.length-1;1<=Wc;Wc--)va.push(Da.path[Wc]);for(Da=1;Da<Xb.path.length;Da++)va.push(Xb.path[Da]);Da=2.5*Jc;nb&&(va=va.map(function(me){return Z(me,nb)}),va=va.some(function(me){return 0>=me.signedDistanceFromCamera})?[]:va.map(function(me){return me.point}));Xb=[];if(0<va.length){Xb=va[0].clone();Wc=va[0].clone();for(var wd=1;wd<va.length;wd++)Xb.x=
Math.min(Xb.x,va[wd].x),Xb.y=Math.min(Xb.y,va[wd].y),Wc.x=Math.max(Wc.x,va[wd].x),Wc.y=Math.max(Wc.y,va[wd].y);Xb=Xb.x>=Ra.x&&Wc.x<=ad.x&&Xb.y>=Ra.y&&Wc.y<=ad.y?[va]:Wc.x<Ra.x||Xb.x>ad.x||Wc.y<Ra.y||Xb.y>ad.y?[]:a.clipLine([va],Ra.x,Ra.y,ad.x,ad.y)}Ra=0;for(ad=Xb;Ra<ad.length;Ra+=1)for(Kc.reset(ad[Ra],.25*Jc),va=0,va=Kc.length<=.5*Jc?1:Math.ceil(Kc.paddedLength/Da)+1,Xb=0;Xb<va;Xb++){wd=Kc.lerp(Xb/Math.max(va-1,1));Wc=wd.x+100;wd=wd.y+100;$c.push(Wc,wd,Jc,0);var Ed=Wc-Jc,Ld=wd-Jc,he=Wc+Jc,de=wd+Jc;
ea=ea&&this.isOffscreen(Ed,Ld,he,de);V=V||this.isInsideGrid(Ed,Ld,he,de);if(!S&&this.grid.hitTestCircle(Wc,wd,Jc,jc)&&(X=!0,!Nb))return{circles:[],offscreen:!1,collisionDetected:X}}}return{circles:!Nb&&X||!V?[]:$c,offscreen:ea,collisionDetected:X}};zb.prototype.queryRenderedSymbols=function(S){if(0===S.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var X=[],V=Infinity,ea=Infinity,va=-Infinity,Da=-Infinity,Ra=0;Ra<S.length;Ra+=1){var nb=S[Ra];nb=new a.Point(nb.x+
100,nb.y+100);V=Math.min(V,nb.x);ea=Math.min(ea,nb.y);va=Math.max(va,nb.x);Da=Math.max(Da,nb.y);X.push(nb)}S={};Ra={};nb=0;for(V=this.grid.query(V,ea,va,Da).concat(this.ignoredGrid.query(V,ea,va,Da));nb<V.length;nb+=1)va=V[nb],ea=va.key,void 0===S[ea.bucketInstanceId]&&(S[ea.bucketInstanceId]={}),S[ea.bucketInstanceId][ea.featureIndex]||(va=[new a.Point(va.x1,va.y1),new a.Point(va.x2,va.y1),new a.Point(va.x2,va.y2),new a.Point(va.x1,va.y2)],a.polygonIntersectsPolygon(X,va)&&(S[ea.bucketInstanceId][ea.featureIndex]=
!0,void 0===Ra[ea.bucketInstanceId]&&(Ra[ea.bucketInstanceId]=[]),Ra[ea.bucketInstanceId].push(ea.featureIndex)));return Ra};zb.prototype.insertCollisionBox=function(S,X,V,ea,va){(X?this.ignoredGrid:this.grid).insert({bucketInstanceId:V,featureIndex:ea,collisionGroupID:va},S[0],S[1],S[2],S[3])};zb.prototype.insertCollisionCircles=function(S,X,V,ea,va){X=X?this.ignoredGrid:this.grid;V={bucketInstanceId:V,featureIndex:ea,collisionGroupID:va};for(ea=0;ea<S.length;ea+=4)X.insertCircle(V,S[ea],S[ea+1],
S[ea+2])};zb.prototype.projectAndGetPerspectiveRatio=function(S,X,V){X=[X,V,0,1];ja(X,X,S);return{point:new a.Point((X[0]/X[3]+1)/2*this.transform.width+100,(-X[1]/X[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/X[3]*.5}};zb.prototype.isOffscreen=function(S,X,V,ea){return 100>V||S>=this.screenRightBoundary||100>ea||X>this.screenBottomBoundary};zb.prototype.isInsideGrid=function(S,X,V,ea){return 0<=V&&S<this.gridRightBoundary&&0<=ea&&X<this.gridBottomBoundary};
zb.prototype.getViewportMatrix=function(){var S=a.identity([]);a.translate(S,S,[-100,-100,0]);return S};var qc=function(S,X,V,ea){this.opacity=S?Math.max(0,Math.min(1,S.opacity+(S.placed?X:-X))):ea&&V?1:0;this.placed=V};qc.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var Yb=function(S,X,V,ea,va){this.text=new qc(S?S.text:null,X,V,va);this.icon=new qc(S?S.icon:null,X,ea,va)};Yb.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Bc=function(S,
X,V){this.text=S;this.icon=X;this.skipFade=V},bd=function(){this.invProjMatrix=a.create();this.viewportMatrix=a.create();this.circles=[]},ed=function(S,X,V,ea,va){this.bucketInstanceId=S;this.featureIndex=X;this.sourceLayerIndex=V;this.bucketIndex=ea;this.tileID=va},Vc=function(S){this.crossSourceCollisions=S;this.maxGroupID=0;this.collisionGroups={}};Vc.prototype.get=function(S){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[S]){var X=++this.maxGroupID;this.collisionGroups[S]=
{ID:X,predicate:function(V){return V.collisionGroupID===X}}}return this.collisionGroups[S]};var Pc=function(S,X,V,ea){this.transform=S.clone();this.collisionIndex=new zb(this.transform);this.placements={};this.opacities={};this.variableOffsets={};this.stale=!1;this.commitTime=0;this.fadeDuration=X;this.retainedQueryData={};this.collisionGroups=new Vc(V);this.collisionCircleArrays={};if(this.prevPlacement=ea)ea.prevPlacement=void 0;this.placedOrientations={}};Pc.prototype.getBucketParts=function(S,
X,V,ea){var va=V.getBucket(X),Da=V.latestFeatureIndex;if(va&&Da&&X.id===va.layerIds[0]){X=V.collisionBoxArray;var Ra=va.layers[0].layout,nb=Math.pow(2,this.transform.zoom-V.tileID.overscaledZ),Nb=V.tileSize/a.EXTENT,Xb=this.transform.calculatePosMatrix(V.tileID.toUnwrapped()),jc="map"===Ra.get("text-pitch-alignment"),Jc="map"===Ra.get("text-rotation-alignment"),Kc=ma(V,1,this.transform.zoom),$c=M(Xb,jc,Jc,this.transform,Kc),ad=null;jc&&(jc=Q(Xb,jc,Jc,this.transform,Kc),ad=a.multiply([],this.transform.labelPlaneMatrix,
jc));this.retainedQueryData[va.bucketInstanceId]=new ed(va.bucketInstanceId,Da,va.sourceLayerIndex,va.index,V.tileID);V={bucket:va,layout:Ra,posMatrix:Xb,textLabelPlaneMatrix:$c,labelToScreenMatrix:ad,scale:nb,textPixelRatio:Nb,holdingForFade:V.holdingForFade(),collisionBoxArray:X,partiallyEvaluatedTextSize:a.evaluateSizeForZoom(va.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(va.sourceID)};if(ea)for(ea=0,va=va.sortKeyRanges;ea<va.length;ea+=1)Da=va[ea],S.push({sortKey:Da.sortKey,
symbolInstanceStart:Da.symbolInstanceStart,symbolInstanceEnd:Da.symbolInstanceEnd,parameters:V});else S.push({symbolInstanceStart:0,symbolInstanceEnd:va.symbolInstances.length,parameters:V})}};Pc.prototype.attemptAnchorPlacement=function(S,X,V,ea,va,Da,Ra,nb,Nb,Xb,jc,Jc,Kc,$c,ad){var Wc=[Jc.textOffset0,Jc.textOffset1],wd=ia(S,V,ea,Wc,va);X=this.collisionIndex.placeCollisionBox(oa(X,wd.x,wd.y,Da,Ra,this.transform.angle),jc,nb,Nb,Xb.predicate);if((!ad||0!==this.collisionIndex.placeCollisionBox(oa(ad,
wd.x,wd.y,Da,Ra,this.transform.angle),jc,nb,Nb,Xb.predicate).box.length)&&0<X.box.length){if(this.prevPlacement&&this.prevPlacement.variableOffsets[Jc.crossTileID]&&this.prevPlacement.placements[Jc.crossTileID]&&this.prevPlacement.placements[Jc.crossTileID].text)var Ed=this.prevPlacement.variableOffsets[Jc.crossTileID].anchor;this.variableOffsets[Jc.crossTileID]={textOffset:Wc,width:V,height:ea,anchor:S,textBoxScale:va,prevAnchor:Ed};this.markUsedJustification(Kc,S,Jc,$c);Kc.allowVerticalPlacement&&
(this.markUsedOrientation(Kc,$c,Jc),this.placedOrientations[Jc.crossTileID]=$c);return{shift:wd,placedGlyphBoxes:X}}};Pc.prototype.placeLayerBucketPart=function(S,X,V){var ea=this,va=S.parameters,Da=va.bucket,Ra=va.layout,nb=va.posMatrix,Nb=va.textLabelPlaneMatrix,Xb=va.labelToScreenMatrix,jc=va.textPixelRatio,Jc=va.holdingForFade,Kc=va.collisionBoxArray,$c=va.partiallyEvaluatedTextSize,ad=va.collisionGroup,Wc=Ra.get("text-optional"),wd=Ra.get("icon-optional"),Ed=Ra.get("text-allow-overlap"),Ld=Ra.get("icon-allow-overlap"),
he="map"===Ra.get("text-rotation-alignment"),de="map"===Ra.get("text-pitch-alignment"),me="none"!==Ra.get("icon-text-fit");va="viewport-y"===Ra.get("symbol-z-order");var ve=Ed&&(Ld||!Da.hasIconData()||wd),se=Ld&&(Ed||!Da.hasTextData()||Wc);!Da.collisionArrays&&Kc&&Da.deserializeCollisionBoxes(Kc);Kc=function(we,jf){if(!X[we.crossTileID])if(Jc)ea.placements[we.crossTileID]=new Bc(!1,!1,!1);else{var Ke=!1,rf=!1,pf=!0,cg=null,uf={box:null,offscreen:null},sg={box:null,offscreen:null},ef=null,Wf=null,
da=null,ua=0,Ba=0,Fa=0;jf.textFeatureIndex?ua=jf.textFeatureIndex:we.useRuntimeCollisionCircles&&(ua=we.featureIndex);jf.verticalTextFeatureIndex&&(Ba=jf.verticalTextFeatureIndex);var Na=jf.textBox;if(Na)if(ef=function(Tb){var nc=a.WritingMode.horizontal;Da.allowVerticalPlacement&&!Tb&&ea.prevPlacement&&(Tb=ea.prevPlacement.placedOrientations[we.crossTileID])&&(nc=ea.placedOrientations[we.crossTileID]=Tb,ea.markUsedOrientation(Da,nc,we));return nc},pf=function(Tb,nc){if(Da.allowVerticalPlacement&&
0<we.numVerticalGlyphVertices&&jf.verticalTextBox)for(var kc=0,Cc=Da.writingModes;kc<Cc.length&&!(Cc[kc]===a.WritingMode.vertical?sg=uf=nc():uf=Tb(),uf&&uf.box&&uf.box.length);kc+=1);else uf=Tb()},Ra.get("text-variable-anchor")){var Wa=Ra.get("text-variable-anchor");if(ea.prevPlacement&&ea.prevPlacement.variableOffsets[we.crossTileID]){var ob=ea.prevPlacement.variableOffsets[we.crossTileID];0<Wa.indexOf(ob.anchor)&&(Wa=Wa.filter(function(Tb){return Tb!==ob.anchor}),Wa.unshift(ob.anchor))}var hb=function(Tb,
nc,kc){var Cc=Tb.x2-Tb.x1,Oc=Tb.y2-Tb.y1,Gc=we.textBoxScale;nc=me&&!Ld?nc:null;for(var Yc={box:[],offscreen:!1},ld=Ed?2*Wa.length:Wa.length,pd=0;pd<ld;++pd){var sd=ea.attemptAnchorPlacement(Wa[pd%Wa.length],Tb,Cc,Oc,Gc,he,de,jc,nb,ad,pd>=Wa.length,we,Da,kc,nc);if(sd&&(Yc=sd.placedGlyphBoxes)&&Yc.box&&Yc.box.length){Ke=!0;cg=sd.shift;break}}return Yc};pf(function(){return hb(Na,jf.iconBox,a.WritingMode.horizontal)},function(){var Tb=jf.verticalTextBox,nc=uf&&uf.box&&uf.box.length;return Da.allowVerticalPlacement&&
!nc&&0<we.numVerticalGlyphVertices&&Tb?hb(Tb,jf.verticalIconBox,a.WritingMode.vertical):{box:null,offscreen:null}});uf&&(Ke=uf.box,pf=uf.offscreen);pf=ef(uf&&uf.box);!Ke&&ea.prevPlacement&&(ef=ea.prevPlacement.variableOffsets[we.crossTileID])&&(ea.variableOffsets[we.crossTileID]=ef,ea.markUsedJustification(Da,ef.anchor,we,pf))}else{var fb=function(Tb,nc){(Tb=ea.collisionIndex.placeCollisionBox(Tb,Ed,jc,nb,ad.predicate))&&Tb.box&&Tb.box.length&&(ea.markUsedOrientation(Da,nc,we),ea.placedOrientations[we.crossTileID]=
nc);return Tb};pf(function(){return fb(Na,a.WritingMode.horizontal)},function(){var Tb=jf.verticalTextBox;return Da.allowVerticalPlacement&&0<we.numVerticalGlyphVertices&&Tb?fb(Tb,a.WritingMode.vertical):{box:null,offscreen:null}});ef(uf&&uf.box&&uf.box.length)}Ke=(ef=uf)&&ef.box&&0<ef.box.length;pf=ef&&ef.offscreen;if(we.useRuntimeCollisionCircles){Wf=Da.text.placedSymbolArray.get(we.centerJustifiedTextSymbolIndex);var xb=a.evaluateSizeForFeature(Da.textSizeData,$c,Wf),Fb=Ra.get("text-padding");
Wf=ea.collisionIndex.placeCollisionCircles(Ed,Wf,Da.lineVertexArray,Da.glyphOffsetArray,xb,nb,Nb,Xb,V,de,ad.predicate,we.collisionCircleDiameter,Fb);Ke=Ed||0<Wf.circles.length&&!Wf.collisionDetected;pf=pf&&Wf.offscreen}jf.iconFeatureIndex&&(Fa=jf.iconFeatureIndex);jf.iconBox&&(rf=function(Tb){Tb=me&&cg?oa(Tb,cg.x,cg.y,he,de,ea.transform.angle):Tb;return ea.collisionIndex.placeCollisionBox(Tb,Ld,jc,nb,ad.predicate)},da=sg&&sg.box&&sg.box.length&&jf.verticalIconBox?rf(jf.verticalIconBox):rf(jf.iconBox),
rf=0<da.box.length,pf=pf&&da.offscreen);xb=Wc||0===we.numHorizontalGlyphVertices&&0===we.numVerticalGlyphVertices;Fb=wd||0===we.numIconVertices;xb||Fb?Fb?xb||(rf=rf&&Ke):Ke=rf&&Ke:rf=Ke=rf&&Ke;Ke&&ef&&ef.box&&(sg&&sg.box&&Ba?ea.collisionIndex.insertCollisionBox(ef.box,Ra.get("text-ignore-placement"),Da.bucketInstanceId,Ba,ad.ID):ea.collisionIndex.insertCollisionBox(ef.box,Ra.get("text-ignore-placement"),Da.bucketInstanceId,ua,ad.ID));rf&&da&&ea.collisionIndex.insertCollisionBox(da.box,Ra.get("icon-ignore-placement"),
Da.bucketInstanceId,Fa,ad.ID);if(Wf&&(Ke&&ea.collisionIndex.insertCollisionCircles(Wf.circles,Ra.get("text-ignore-placement"),Da.bucketInstanceId,ua,ad.ID),V))for(Ba=Da.bucketInstanceId,ua=ea.collisionCircleArrays[Ba],void 0===ua&&(ua=ea.collisionCircleArrays[Ba]=new bd),Ba=0;Ba<Wf.circles.length;Ba+=4)ua.circles.push(Wf.circles[Ba+0]),ua.circles.push(Wf.circles[Ba+1]),ua.circles.push(Wf.circles[Ba+2]),ua.circles.push(Wf.collisionDetected?1:0);ea.placements[we.crossTileID]=new Bc(Ke||ve,rf||se,pf||
Da.justReloaded);X[we.crossTileID]=!0}};if(va)for(S=Da.getSortedSymbolIndexes(this.transform.angle),va=S.length-1;0<=va;--va){var Ee=S[va];Kc(Da.symbolInstances.get(Ee),Da.collisionArrays[Ee])}else for(va=S.symbolInstanceStart;va<S.symbolInstanceEnd;va++)Kc(Da.symbolInstances.get(va),Da.collisionArrays[va]);V&&Da.bucketInstanceId in this.collisionCircleArrays&&(Kc=this.collisionCircleArrays[Da.bucketInstanceId],a.invert(Kc.invProjMatrix,nb),Kc.viewportMatrix=this.collisionIndex.getViewportMatrix());
Da.justReloaded=!1};Pc.prototype.markUsedJustification=function(S,X,V,ea){var va={left:V.leftJustifiedTextSymbolIndex,center:V.centerJustifiedTextSymbolIndex,right:V.rightJustifiedTextSymbolIndex};X=ea===a.WritingMode.vertical?V.verticalPlacedTextSymbolIndex:va[a.getAnchorJustification(X)];ea=0;for(va=[V.leftJustifiedTextSymbolIndex,V.centerJustifiedTextSymbolIndex,V.rightJustifiedTextSymbolIndex,V.verticalPlacedTextSymbolIndex];ea<va.length;ea+=1){var Da=va[ea];0<=Da&&(0<=X&&Da!==X?S.text.placedSymbolArray.get(Da).crossTileID=
0:S.text.placedSymbolArray.get(Da).crossTileID=V.crossTileID)}};Pc.prototype.markUsedOrientation=function(S,X,V){var ea=X===a.WritingMode.horizontal||X===a.WritingMode.horizontalOnly?X:0;X=X===a.WritingMode.vertical?X:0;for(var va=0,Da=[V.leftJustifiedTextSymbolIndex,V.centerJustifiedTextSymbolIndex,V.rightJustifiedTextSymbolIndex];va<Da.length;va+=1)S.text.placedSymbolArray.get(Da[va]).placedOrientation=ea;V.verticalPlacedTextSymbolIndex&&(S.text.placedSymbolArray.get(V.verticalPlacedTextSymbolIndex).placedOrientation=
X)};Pc.prototype.commit=function(S){this.commitTime=S;this.zoomAtLastRecencyCheck=this.transform.zoom;var X=this.prevPlacement,V=!1;this.prevZoomAdjustment=X?X.zoomAdjustment(this.transform.zoom):0;var ea=X?X.symbolFadeChange(S):1,va=X?X.opacities:{},Da=X?X.variableOffsets:{},Ra=X?X.placedOrientations:{};for(jc in this.placements){var nb=this.placements[jc],Nb=va[jc];Nb?(this.opacities[jc]=new Yb(Nb,ea,nb.text,nb.icon),V=V||nb.text!==Nb.text.placed||nb.icon!==Nb.icon.placed):(this.opacities[jc]=new Yb(null,
ea,nb.text,nb.icon,nb.skipFade),V=V||nb.text||nb.icon)}for(var Xb in va){var jc=va[Xb];this.opacities[Xb]||(nb=new Yb(jc,ea,!1,!1),nb.isHidden()||(this.opacities[Xb]=nb,V=V||jc.text.placed||jc.icon.placed))}for(var Jc in Da)this.variableOffsets[Jc]||!this.opacities[Jc]||this.opacities[Jc].isHidden()||(this.variableOffsets[Jc]=Da[Jc]);for(var Kc in Ra)this.placedOrientations[Kc]||!this.opacities[Kc]||this.opacities[Kc].isHidden()||(this.placedOrientations[Kc]=Ra[Kc]);V?this.lastPlacementChangeTime=
S:"number"!==typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=X?X.lastPlacementChangeTime:S)};Pc.prototype.updateLayerOpacities=function(S,X){for(var V={},ea=0;ea<X.length;ea+=1){var va=X[ea],Da=va.getBucket(S);Da&&va.latestFeatureIndex&&S.id===Da.layerIds[0]&&this.updateBucketOpacities(Da,V,va.collisionBoxArray)}};Pc.prototype.updateBucketOpacities=function(S,X,V){var ea=this;S.hasTextData()&&S.text.opacityVertexArray.clear();S.hasIconData()&&S.icon.opacityVertexArray.clear();S.hasIconCollisionBoxData()&&
S.iconCollisionBox.collisionVertexArray.clear();S.hasTextCollisionBoxData()&&S.textCollisionBox.collisionVertexArray.clear();var va=S.layers[0].layout,Da=new Yb(null,0,!1,!1,!0),Ra=va.get("text-allow-overlap"),nb=va.get("icon-allow-overlap"),Nb=va.get("text-variable-anchor"),Xb="map"===va.get("text-rotation-alignment"),jc="map"===va.get("text-pitch-alignment"),Jc="none"!==va.get("icon-text-fit"),Kc=new Yb(null,0,Ra&&(nb||!S.hasIconData()||va.get("icon-optional")),nb&&(Ra||!S.hasTextData()||va.get("text-optional")),
!0);!S.collisionArrays&&V&&(S.hasIconCollisionBoxData()||S.hasTextCollisionBoxData())&&S.deserializeCollisionBoxes(V);var $c=function(ad,Wc,wd){for(var Ed=0;Ed<Wc/4;Ed++)ad.opacityVertexArray.emplaceBack(wd)};V=function(ad){var Wc=S.symbolInstances.get(ad),wd=Wc.numHorizontalGlyphVertices,Ed=Wc.numVerticalGlyphVertices,Ld=Wc.crossTileID,he=ea.opacities[Ld];X[Ld]?he=Da:he||(he=Kc,ea.opacities[Ld]=he);X[Ld]=!0;var de=0<Wc.numIconVertices,me=ea.placedOrientations[Wc.crossTileID],ve=me===a.WritingMode.vertical,
se=me===a.WritingMode.horizontal||me===a.WritingMode.horizontalOnly;if(0<wd||0<Ed){var Ee=ra(he.text);$c(S.text,wd,ve?Td:Ee);$c(S.text,Ed,se?Td:Ee);var we=he.text.isHidden();[Wc.rightJustifiedTextSymbolIndex,Wc.centerJustifiedTextSymbolIndex,Wc.leftJustifiedTextSymbolIndex].forEach(function(jf){0<=jf&&(S.text.placedSymbolArray.get(jf).hidden=we||ve?1:0)});0<=Wc.verticalPlacedTextSymbolIndex&&(S.text.placedSymbolArray.get(Wc.verticalPlacedTextSymbolIndex).hidden=we||se?1:0);(wd=ea.variableOffsets[Wc.crossTileID])&&
ea.markUsedJustification(S,wd.anchor,Wc,me);if(me=ea.placedOrientations[Wc.crossTileID])ea.markUsedJustification(S,"left",Wc,me),ea.markUsedOrientation(S,me,Wc)}de&&(de=ra(he.icon),me=!(Jc&&Wc.verticalPlacedIconSymbolIndex&&ve),0<=Wc.placedIconSymbolIndex&&($c(S.icon,Wc.numIconVertices,me?de:Td),S.icon.placedSymbolArray.get(Wc.placedIconSymbolIndex).hidden=he.icon.isHidden()),0<=Wc.verticalPlacedIconSymbolIndex&&($c(S.icon,Wc.numVerticalIconVertices,me?Td:de),S.icon.placedSymbolArray.get(Wc.verticalPlacedIconSymbolIndex).hidden=
he.icon.isHidden()));if(S.hasIconCollisionBoxData()||S.hasTextCollisionBoxData())if(ad=S.collisionArrays[ad]){Wc=new a.Point(0,0);if(ad.textBox||ad.verticalTextBox)de=!0,Nb&&((Ld=ea.variableOffsets[Ld])?(Wc=ia(Ld.anchor,Ld.width,Ld.height,Ld.textOffset,Ld.textBoxScale),Xb&&Wc._rotate(jc?ea.transform.angle:-ea.transform.angle)):de=!1),ad.textBox&&xa(S.textCollisionBox.collisionVertexArray,he.text.placed,!de||ve,Wc.x,Wc.y),ad.verticalTextBox&&xa(S.textCollisionBox.collisionVertexArray,he.text.placed,
!de||se,Wc.x,Wc.y);se=!(se||!ad.verticalIconBox);ad.iconBox&&xa(S.iconCollisionBox.collisionVertexArray,he.icon.placed,se,Jc?Wc.x:0,Jc?Wc.y:0);ad.verticalIconBox&&xa(S.iconCollisionBox.collisionVertexArray,he.icon.placed,!se,Jc?Wc.x:0,Jc?Wc.y:0)}};for(va=0;va<S.symbolInstances.length;va++)V(va);S.sortFeatures(this.transform.angle);this.retainedQueryData[S.bucketInstanceId]&&(this.retainedQueryData[S.bucketInstanceId].featureSortOrder=S.featureSortOrder);S.hasTextData()&&S.text.opacityVertexBuffer&&
S.text.opacityVertexBuffer.updateData(S.text.opacityVertexArray);S.hasIconData()&&S.icon.opacityVertexBuffer&&S.icon.opacityVertexBuffer.updateData(S.icon.opacityVertexArray);S.hasIconCollisionBoxData()&&S.iconCollisionBox.collisionVertexBuffer&&S.iconCollisionBox.collisionVertexBuffer.updateData(S.iconCollisionBox.collisionVertexArray);S.hasTextCollisionBoxData()&&S.textCollisionBox.collisionVertexBuffer&&S.textCollisionBox.collisionVertexBuffer.updateData(S.textCollisionBox.collisionVertexArray);
S.bucketInstanceId in this.collisionCircleArrays&&(V=this.collisionCircleArrays[S.bucketInstanceId],S.placementInvProjMatrix=V.invProjMatrix,S.placementViewportMatrix=V.viewportMatrix,S.collisionCircleArray=V.circles,delete this.collisionCircleArrays[S.bucketInstanceId])};Pc.prototype.symbolFadeChange=function(S){return 0===this.fadeDuration?1:(S-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment};Pc.prototype.zoomAdjustment=function(S){return Math.max(0,(this.transform.zoom-S)/1.5)};Pc.prototype.hasTransitions=
function(S){return this.stale||S-this.lastPlacementChangeTime<this.fadeDuration};Pc.prototype.stillRecent=function(S,X){var V=this.zoomAtLastRecencyCheck===X?1-this.zoomAdjustment(X):1;this.zoomAtLastRecencyCheck=X;return this.commitTime+this.fadeDuration*V>S};Pc.prototype.setStale=function(){this.stale=!0};var yc=Math.pow(2,25),vc=Math.pow(2,24),oc=Math.pow(2,17),vd=Math.pow(2,16),Qd=Math.pow(2,9),Yd=Math.pow(2,8),xe=Math.pow(2,1),Td=0,Oe=function(S){this._sortAcrossTiles="viewport-y"!==S.layout.get("symbol-z-order")&&
void 0!==S.layout.get("symbol-sort-key").constantOr(1);this._currentPartIndex=this._currentTileIndex=0;this._seenCrossTileIDs={};this._bucketParts=[]};Oe.prototype.continuePlacement=function(S,X,V,ea,va){for(var Da=this._bucketParts;this._currentTileIndex<S.length;)if(X.getBucketParts(Da,ea,S[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,va())return!0;this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Da.sort(function(Ra,nb){return Ra.sortKey-nb.sortKey}));for(;this._currentPartIndex<
Da.length;)if(X.placeLayerBucketPart(Da[this._currentPartIndex],this._seenCrossTileIDs,V),this._currentPartIndex++,va())return!0;return!1};var Ve=function(S,X,V,ea,va,Da,Ra){this.placement=new Pc(S,va,Da,Ra);this._currentPlacementIndex=X.length-1;this._forceFullPlacement=V;this._showCollisionBoxes=ea;this._done=!1};Ve.prototype.isDone=function(){return this._done};Ve.prototype.continuePlacement=function(S,X,V){for(var ea=this,va=a.browser.now(),Da=function(){var Nb=a.browser.now()-va;return ea._forceFullPlacement?
!1:2<Nb};0<=this._currentPlacementIndex;){var Ra=X[S[this._currentPlacementIndex]],nb=this.placement.collisionIndex.transform.zoom;if("symbol"===Ra.type&&(!Ra.minzoom||Ra.minzoom<=nb)&&(!Ra.maxzoom||Ra.maxzoom>nb)){this._inProgressLayer||(this._inProgressLayer=new Oe(Ra));if(this._inProgressLayer.continuePlacement(V[Ra.source],this.placement,this._showCollisionBoxes,Ra,Da))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0};Ve.prototype.commit=function(S){this.placement.commit(S);
return this.placement};var wf=512/a.EXTENT/2,Me=function(S,X,V){this.tileID=S;this.indexedSymbolInstances={};this.bucketInstanceId=V;for(V=0;V<X.length;V++){var ea=X.get(V),va=ea.key;this.indexedSymbolInstances[va]||(this.indexedSymbolInstances[va]=[]);this.indexedSymbolInstances[va].push({crossTileID:ea.crossTileID,coord:this.getScaledCoordinates(ea,S)})}};Me.prototype.getScaledCoordinates=function(S,X){var V=wf/Math.pow(2,X.canonical.z-this.tileID.canonical.z);return{x:Math.floor((X.canonical.x*
a.EXTENT+S.anchorX)*V),y:Math.floor((X.canonical.y*a.EXTENT+S.anchorY)*V)}};Me.prototype.findMatches=function(S,X,V){for(var ea=this.tileID.canonical.z<X.canonical.z?1:Math.pow(2,this.tileID.canonical.z-X.canonical.z),va=0;va<S.length;va++){var Da=S.get(va);if(!Da.crossTileID){var Ra=this.indexedSymbolInstances[Da.key];if(Ra)for(var nb=this.getScaledCoordinates(Da,X),Nb=0;Nb<Ra.length;Nb+=1){var Xb=Ra[Nb];if(Math.abs(Xb.coord.x-nb.x)<=ea&&Math.abs(Xb.coord.y-nb.y)<=ea&&!V[Xb.crossTileID]){V[Xb.crossTileID]=
!0;Da.crossTileID=Xb.crossTileID;break}}}}};var Af=function(){this.maxCrossTileID=0};Af.prototype.generate=function(){return++this.maxCrossTileID};var ug=function(){this.indexes={};this.usedCrossTileIDs={};this.lng=0};ug.prototype.handleWrapJump=function(S){var X=Math.round((S-this.lng)/360);if(0!==X)for(var V in this.indexes){var ea=this.indexes[V],va={},Da;for(Da in ea){var Ra=ea[Da];Ra.tileID=Ra.tileID.unwrapTo(Ra.tileID.wrap+X);va[Ra.tileID.key]=Ra}this.indexes[V]=va}this.lng=S};ug.prototype.addBucket=
function(S,X,V){if(this.indexes[S.overscaledZ]&&this.indexes[S.overscaledZ][S.key]){if(this.indexes[S.overscaledZ][S.key].bucketInstanceId===X.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(S.overscaledZ,this.indexes[S.overscaledZ][S.key])}for(var ea=0;ea<X.symbolInstances.length;ea++)X.symbolInstances.get(ea).crossTileID=0;this.usedCrossTileIDs[S.overscaledZ]||(this.usedCrossTileIDs[S.overscaledZ]={});ea=this.usedCrossTileIDs[S.overscaledZ];for(var va in this.indexes){var Da=this.indexes[va];
if(Number(va)>S.overscaledZ)for(var Ra in Da){var nb=Da[Ra];nb.tileID.isChildOf(S)&&nb.findMatches(X.symbolInstances,S,ea)}else nb=S.scaledTo(Number(va)),(Da=Da[nb.key])&&Da.findMatches(X.symbolInstances,S,ea)}for(va=0;va<X.symbolInstances.length;va++)Ra=X.symbolInstances.get(va),Ra.crossTileID||(Ra.crossTileID=V.generate(),ea[Ra.crossTileID]=!0);void 0===this.indexes[S.overscaledZ]&&(this.indexes[S.overscaledZ]={});this.indexes[S.overscaledZ][S.key]=new Me(S,X.symbolInstances,X.bucketInstanceId);
return!0};ug.prototype.removeBucketCrossTileIDs=function(S,X){for(var V in X.indexedSymbolInstances)for(var ea=0,va=X.indexedSymbolInstances[V];ea<va.length;ea+=1)delete this.usedCrossTileIDs[S][va[ea].crossTileID]};ug.prototype.removeStaleBuckets=function(S){var X=!1,V;for(V in this.indexes){var ea=this.indexes[V],va;for(va in ea)S[ea[va].bucketInstanceId]||(this.removeBucketCrossTileIDs(V,ea[va]),delete ea[va],X=!0)}return X};var vg=function(){this.layerIndexes={};this.crossTileIDs=new Af;this.maxBucketInstanceId=
0;this.bucketsInCurrentPlacement={}};vg.prototype.addLayer=function(S,X,V){var ea=this.layerIndexes[S.id];void 0===ea&&(ea=this.layerIndexes[S.id]=new ug);var va=!1,Da={};ea.handleWrapJump(V);for(V=0;V<X.length;V+=1){var Ra=X[V],nb=Ra.getBucket(S);nb&&S.id===nb.layerIds[0]&&(nb.bucketInstanceId||(nb.bucketInstanceId=++this.maxBucketInstanceId),ea.addBucket(Ra.tileID,nb,this.crossTileIDs)&&(va=!0),Da[nb.bucketInstanceId]=!0)}ea.removeStaleBuckets(Da)&&(va=!0);return va};vg.prototype.pruneUnusedLayers=
function(S){var X={};S.forEach(function(ea){X[ea]=!0});for(var V in this.layerIndexes)X[V]||delete this.layerIndexes[V]};var Gg=function(S,X){return a.emitValidationErrors(S,X&&X.filter(function(V){return"source.canvas"!==V.identifier}))},ih=a.pick(Id,"addLayer removeLayer setPaintProperty setLayoutProperty setFilter addSource removeSource setLayerZoomRange setLight setTransition setGeoJSONSourceData".split(" ")),Nh=a.pick(Id,["setCenter","setZoom","setBearing","setPitch"]),qh=function(){var S={},
X=a.styleSpec.$version,V;for(V in a.styleSpec.$root){var ea=a.styleSpec.$root[V];ea.required&&(ea="version"===V?X:"array"===ea.type?[]:{},null!=ea&&(S[V]=ea))}return S}(),Yg=function(S){function X(V,ea){var va=this;void 0===ea&&(ea={});S.call(this);this.map=V;this.dispatcher=new cc(v(),this);this.imageManager=new Ic;this.imageManager.setEventedParent(this);this.glyphManager=new Ja(V._requestManager,ea.localIdeographFontFamily);this.lineAtlas=new Gb(256,512);this.crossTileSymbolIndex=new vg;this._layers=
{};this._serializedLayers={};this._order=[];this.sourceCaches={};this.zoomHistory=new a.ZoomHistory;this._loaded=!1;this._availableImages=[];this._resetUpdates();this.dispatcher.broadcast("setReferrer",a.getReferrer());var Da=this;this._rtlTextPluginCallback=X.registerForPluginStateChange(function(Ra){Da.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:Ra.pluginStatus,pluginURL:Ra.pluginURL},function(nb,Nb){a.triggerPluginCompletionEvent(nb);if(Nb&&Nb.every(function(jc){return jc}))for(var Xb in Da.sourceCaches)Da.sourceCaches[Xb].reload()})});
this.on("data",function(Ra){if("source"===Ra.dataType&&"metadata"===Ra.sourceDataType&&(Ra=va.sourceCaches[Ra.sourceId])&&(Ra=Ra.getSource())&&Ra.vectorLayerIds)for(var nb in va._layers){var Nb=va._layers[nb];Nb.source===Ra.id&&va._validateLayer(Nb)}})}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;X.prototype.loadURL=function(V,ea){var va=this;void 0===ea&&(ea={});this.fire(new a.Event("dataloading",{dataType:"style"}));var Da="boolean"===typeof ea.validate?
ea.validate:!a.isMapboxURL(V);V=this.map._requestManager.normalizeStyleURL(V,ea.accessToken);V=this.map._requestManager.transformRequest(V,a.ResourceType.Style);this._request=a.getJSON(V,function(Ra,nb){va._request=null;Ra?va.fire(new a.ErrorEvent(Ra)):nb&&va._load(nb,Da)})};X.prototype.loadJSON=function(V,ea){var va=this;void 0===ea&&(ea={});this.fire(new a.Event("dataloading",{dataType:"style"}));this._request=a.browser.frame(function(){va._request=null;va._load(V,!1!==ea.validate)})};X.prototype.loadEmpty=
function(){this.fire(new a.Event("dataloading",{dataType:"style"}));this._load(qh,!1)};X.prototype._load=function(V,ea){if(!ea||!Gg(this,a.validateStyle(V))){this._loaded=!0;this.stylesheet=V;for(var va in V.sources)this.addSource(va,V.sources[va],{validate:!1});V.sprite?this._loadSprite(V.sprite):this.imageManager.setLoaded(!0);this.glyphManager.setURL(V.glyphs);V=F(this.stylesheet.layers);this._order=V.map(function(Da){return Da.id});this._layers={};this._serializedLayers={};for(ea=0;ea<V.length;ea+=
1)va=V[ea],va=a.createStyleLayer(va),va.setEventedParent(this,{layer:{id:va.id}}),this._layers[va.id]=va,this._serializedLayers[va.id]=va.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order));this.light=new Jb(this.stylesheet.light);this.fire(new a.Event("data",{dataType:"style"}));this.fire(new a.Event("style.load"))}};X.prototype._loadSprite=function(V){var ea=this;this._spriteRequest=h(V,this.map._requestManager,function(va,Da){ea._spriteRequest=null;if(va)ea.fire(new a.ErrorEvent(va));
else if(Da)for(var Ra in Da)ea.imageManager.addImage(Ra,Da[Ra]);ea.imageManager.setLoaded(!0);ea._availableImages=ea.imageManager.listImages();ea.dispatcher.broadcast("setImages",ea._availableImages);ea.fire(new a.Event("data",{dataType:"style"}))})};X.prototype._validateLayer=function(V){var ea=this.sourceCaches[V.source];if(ea){var va=V.sourceLayer;va&&(ea=ea.getSource(),("geojson"===ea.type||ea.vectorLayerIds&&-1===ea.vectorLayerIds.indexOf(va))&&this.fire(new a.ErrorEvent(Error('Source layer "'+
va+'" does not exist on source "'+ea.id+'" as specified by style layer "'+V.id+'"'))))}};X.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var V in this.sourceCaches)if(!this.sourceCaches[V].loaded())return!1;return this.imageManager.isLoaded()?!0:!1};X.prototype._serializeLayers=function(V){for(var ea=[],va=0;va<V.length;va+=1){var Da=this._layers[V[va]];"custom"!==Da.type&&ea.push(Da.serialize())}return ea};X.prototype.hasTransitions=function(){if(this.light&&
this.light.hasTransition())return!0;for(var V in this.sourceCaches)if(this.sourceCaches[V].hasTransition())return!0;for(var ea in this._layers)if(this._layers[ea].hasTransition())return!0;return!1};X.prototype._checkLoaded=function(){if(!this._loaded)throw Error("Style is not done loading");};X.prototype.update=function(V){if(this._loaded){var ea=this._changed;if(this._changed){var va=Object.keys(this._updatedLayers),Da=Object.keys(this._removedLayers);(va.length||Da.length)&&this._updateWorkerLayers(va,
Da);for(var Ra in this._updatedSources)va=this._updatedSources[Ra],"reload"===va?this._reloadSource(Ra):"clear"===va&&this._clearSource(Ra);this._updateTilesForChangedImages();for(var nb in this._updatedPaintProps)this._layers[nb].updateTransitions(V);this.light.updateTransitions(V);this._resetUpdates()}for(var Nb in this.sourceCaches)this.sourceCaches[Nb].used=!1;Ra=0;for(nb=this._order;Ra<nb.length;Ra+=1)Nb=this._layers[nb[Ra]],Nb.recalculate(V,this._availableImages),!Nb.isHidden(V.zoom)&&Nb.source&&
(this.sourceCaches[Nb.source].used=!0);this.light.recalculate(V);this.z=V.zoom;ea&&this.fire(new a.Event("data",{dataType:"style"}))}};X.prototype._updateTilesForChangedImages=function(){var V=Object.keys(this._changedImages);if(V.length){for(var ea in this.sourceCaches)this.sourceCaches[ea].reloadTilesForDependencies(["icons","patterns"],V);this._changedImages={}}};X.prototype._updateWorkerLayers=function(V,ea){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(V),removedIds:ea})};
X.prototype._resetUpdates=function(){this._changed=!1;this._updatedLayers={};this._removedLayers={};this._updatedSources={};this._updatedPaintProps={};this._changedImages={}};X.prototype.setState=function(V){var ea=this;this._checkLoaded();if(Gg(this,a.validateStyle(V)))return!1;V=a.clone$1(V);V.layers=F(V.layers);var va=H(this.serialize(),V).filter(function(Ra){return!(Ra.command in Nh)});if(0===va.length)return!1;var Da=va.filter(function(Ra){return!(Ra.command in ih)});if(0<Da.length)throw Error("Unimplemented: "+
Da.map(function(Ra){return Ra.command}).join(", ")+".");va.forEach(function(Ra){"setTransition"!==Ra.command&&ea[Ra.command].apply(ea,Ra.args)});this.stylesheet=V;return!0};X.prototype.addImage=function(V,ea){if(this.getImage(V))return this.fire(new a.ErrorEvent(Error("An image with this name already exists.")));this.imageManager.addImage(V,ea);this._availableImages=this.imageManager.listImages();this._changed=this._changedImages[V]=!0;this.fire(new a.Event("data",{dataType:"style"}))};X.prototype.updateImage=
function(V,ea){this.imageManager.updateImage(V,ea)};X.prototype.getImage=function(V){return this.imageManager.getImage(V)};X.prototype.removeImage=function(V){if(!this.getImage(V))return this.fire(new a.ErrorEvent(Error("No image with this name exists.")));this.imageManager.removeImage(V);this._availableImages=this.imageManager.listImages();this._changed=this._changedImages[V]=!0;this.fire(new a.Event("data",{dataType:"style"}))};X.prototype.listImages=function(){this._checkLoaded();return this.imageManager.listImages()};
X.prototype.addSource=function(V,ea,va){var Da=this;void 0===va&&(va={});this._checkLoaded();if(void 0!==this.sourceCaches[V])throw Error("There is already a source with this ID");if(!ea.type)throw Error("The type property must be defined, but the only the following properties were given: "+Object.keys(ea).join(", ")+".");if(!(0<=["vector","raster","geojson","video","image"].indexOf(ea.type)&&this._validate(a.validateStyle.source,"sources."+V,ea,null,va))){this.map&&this.map._collectResourceTiming&&
(ea.collectResourceTiming=!0);var Ra=this.sourceCaches[V]=new Hd(V,ea,this.dispatcher);Ra.style=this;Ra.setEventedParent(this,function(){return{isSourceLoaded:Da.loaded(),source:Ra.serialize(),sourceId:V}});Ra.onAdd(this.map);this._changed=!0}};X.prototype.removeSource=function(V){this._checkLoaded();if(void 0===this.sourceCaches[V])throw Error("There is no source with this ID");for(var ea in this._layers)if(this._layers[ea].source===V)return this.fire(new a.ErrorEvent(Error('Source "'+V+'" cannot be removed while layer "'+
ea+'" is using it.')));ea=this.sourceCaches[V];delete this.sourceCaches[V];delete this._updatedSources[V];ea.fire(new a.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:V}));ea.setEventedParent(null);ea.clearTiles();if(ea.onRemove)ea.onRemove(this.map);this._changed=!0};X.prototype.setGeoJSONSourceData=function(V,ea){this._checkLoaded();this.sourceCaches[V].getSource().setData(ea);this._changed=!0};X.prototype.getSource=function(V){return this.sourceCaches[V]&&this.sourceCaches[V].getSource()};
X.prototype.addLayer=function(V,ea,va){void 0===va&&(va={});this._checkLoaded();var Da=V.id;if(this.getLayer(Da))this.fire(new a.ErrorEvent(Error('Layer with id "'+Da+'" already exists on this map')));else{if("custom"===V.type){if(Gg(this,a.validateCustomStyleLayer(V)))return;V=a.createStyleLayer(V)}else{"object"===typeof V.source&&(this.addSource(Da,V.source),V=a.clone$1(V),V=a.extend(V,{source:Da}));if(this._validate(a.validateStyle.layer,"layers."+Da,V,{arrayIndex:-1},va))return;V=a.createStyleLayer(V);
this._validateLayer(V);V.setEventedParent(this,{layer:{id:Da}});this._serializedLayers[V.id]=V.serialize()}va=ea?this._order.indexOf(ea):this._order.length;if(ea&&-1===va)this.fire(new a.ErrorEvent(Error('Layer with id "'+ea+'" does not exist on this map.')));else if(this._order.splice(va,0,Da),this._layerOrderChanged=!0,this._layers[Da]=V,this._removedLayers[Da]&&V.source&&"custom"!==V.type&&(ea=this._removedLayers[Da],delete this._removedLayers[Da],ea.type!==V.type?this._updatedSources[V.source]=
"clear":(this._updatedSources[V.source]="reload",this.sourceCaches[V.source].pause())),this._updateLayer(V),V.onAdd)V.onAdd(this.map)}};X.prototype.moveLayer=function(V,ea){this._checkLoaded();this._changed=!0;if(!this._layers[V])this.fire(new a.ErrorEvent(Error("The layer '"+V+"' does not exist in the map's style and cannot be moved.")));else if(V!==ea){var va=this._order.indexOf(V);this._order.splice(va,1);va=ea?this._order.indexOf(ea):this._order.length;ea&&-1===va?this.fire(new a.ErrorEvent(Error('Layer with id "'+
ea+'" does not exist on this map.'))):(this._order.splice(va,0,V),this._layerOrderChanged=!0)}};X.prototype.removeLayer=function(V){this._checkLoaded();var ea=this._layers[V];if(ea){ea.setEventedParent(null);var va=this._order.indexOf(V);this._order.splice(va,1);this._changed=this._layerOrderChanged=!0;this._removedLayers[V]=ea;delete this._layers[V];delete this._serializedLayers[V];delete this._updatedLayers[V];delete this._updatedPaintProps[V];if(ea.onRemove)ea.onRemove(this.map)}else this.fire(new a.ErrorEvent(Error("The layer '"+
V+"' does not exist in the map's style and cannot be removed.")))};X.prototype.getLayer=function(V){return this._layers[V]};X.prototype.hasLayer=function(V){return V in this._layers};X.prototype.setLayerZoomRange=function(V,ea,va){this._checkLoaded();var Da=this.getLayer(V);if(!Da)this.fire(new a.ErrorEvent(Error("The layer '"+V+"' does not exist in the map's style and cannot have zoom extent.")));else if(Da.minzoom!==ea||Da.maxzoom!==va)null!=ea&&(Da.minzoom=ea),null!=va&&(Da.maxzoom=va),this._updateLayer(Da)};
X.prototype.setFilter=function(V,ea,va){void 0===va&&(va={});this._checkLoaded();var Da=this.getLayer(V);Da?a.deepEqual(Da.filter,ea)||(null===ea||void 0===ea?(Da.filter=void 0,this._updateLayer(Da)):this._validate(a.validateStyle.filter,"layers."+Da.id+".filter",ea,null,va)||(Da.filter=a.clone$1(ea),this._updateLayer(Da))):this.fire(new a.ErrorEvent(Error("The layer '"+V+"' does not exist in the map's style and cannot be filtered.")))};X.prototype.getFilter=function(V){return a.clone$1(this.getLayer(V).filter)};
X.prototype.setLayoutProperty=function(V,ea,va,Da){void 0===Da&&(Da={});this._checkLoaded();var Ra=this.getLayer(V);Ra?a.deepEqual(Ra.getLayoutProperty(ea),va)||(Ra.setLayoutProperty(ea,va,Da),this._updateLayer(Ra)):this.fire(new a.ErrorEvent(Error("The layer '"+V+"' does not exist in the map's style and cannot be styled.")))};X.prototype.getLayoutProperty=function(V,ea){var va=this.getLayer(V);if(va)return va.getLayoutProperty(ea);this.fire(new a.ErrorEvent(Error("The layer '"+V+"' does not exist in the map's style.")))};
X.prototype.setPaintProperty=function(V,ea,va,Da){void 0===Da&&(Da={});this._checkLoaded();var Ra=this.getLayer(V);Ra?a.deepEqual(Ra.getPaintProperty(ea),va)||(Ra.setPaintProperty(ea,va,Da)&&this._updateLayer(Ra),this._changed=!0,this._updatedPaintProps[V]=!0):this.fire(new a.ErrorEvent(Error("The layer '"+V+"' does not exist in the map's style and cannot be styled.")))};X.prototype.getPaintProperty=function(V,ea){return this.getLayer(V).getPaintProperty(ea)};X.prototype.setFeatureState=function(V,
ea){this._checkLoaded();var va=V.source,Da=V.sourceLayer,Ra=this.sourceCaches[va];void 0===Ra?this.fire(new a.ErrorEvent(Error("The source '"+va+"' does not exist in the map's style."))):(va=Ra.getSource().type,"geojson"===va&&Da?this.fire(new a.ErrorEvent(Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==va||Da?(void 0===V.id&&this.fire(new a.ErrorEvent(Error("The feature id parameter must be provided."))),Ra.setFeatureState(Da,V.id,ea)):this.fire(new a.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types."))))};
X.prototype.removeFeatureState=function(V,ea){this._checkLoaded();var va=V.source,Da=this.sourceCaches[va];if(void 0===Da)this.fire(new a.ErrorEvent(Error("The source '"+va+"' does not exist in the map's style.")));else{va=Da.getSource().type;var Ra="vector"===va?V.sourceLayer:void 0;"vector"!==va||Ra?ea&&"string"!==typeof V.id&&"number"!==typeof V.id?this.fire(new a.ErrorEvent(Error("A feature id is requred to remove its specific state property."))):Da.removeFeatureState(Ra,V.id,ea):this.fire(new a.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")))}};
X.prototype.getFeatureState=function(V){this._checkLoaded();var ea=V.source,va=V.sourceLayer,Da=this.sourceCaches[ea];if(void 0===Da)this.fire(new a.ErrorEvent(Error("The source '"+ea+"' does not exist in the map's style.")));else{if("vector"!==Da.getSource().type||va)return void 0===V.id&&this.fire(new a.ErrorEvent(Error("The feature id parameter must be provided."))),Da.getFeatureState(va,V.id);this.fire(new a.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")))}};
X.prototype.getTransition=function(){return a.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)};X.prototype.serialize=function(){return a.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,
sources:a.mapObject(this.sourceCaches,function(V){return V.serialize()}),layers:this._serializeLayers(this._order)},function(V){return void 0!==V})};X.prototype._updateLayer=function(V){this._updatedLayers[V.id]=!0;V.source&&!this._updatedSources[V.source]&&"raster"!==this.sourceCaches[V.source].getSource().type&&(this._updatedSources[V.source]="reload",this.sourceCaches[V.source].pause());this._changed=!0};X.prototype._flattenAndSortRenderedFeatures=function(V){for(var ea={},va=[],Da=this._order.length-
1;0<=Da;Da--){var Ra=this._order[Da];if("fill-extrusion"===this._layers[Ra].type){ea[Ra]=Da;for(var nb=0,Nb=V;nb<Nb.length;nb+=1){var Xb=Nb[nb][Ra];if(Xb)for(var jc=0;jc<Xb.length;jc+=1)va.push(Xb[jc])}}}va.sort(function(Kc,$c){return $c.intersectionZ-Kc.intersectionZ});Da=[];for(Ra=this._order.length-1;0<=Ra;Ra--)if(nb=this._order[Ra],"fill-extrusion"===this._layers[nb].type)for(nb=va.length-1;0<=nb;nb--){Nb=va[nb].feature;if(ea[Nb.layer.id]<Ra)break;Da.push(Nb);va.pop()}else for(Nb=0,jc=V;Nb<jc.length;Nb+=
1){var Jc=jc[Nb][nb];if(Jc)for(Xb=0;Xb<Jc.length;Xb+=1)Da.push(Jc[Xb].feature)}return Da};X.prototype.queryRenderedFeatures=function(V,ea,va){ea&&ea.filter&&this._validate(a.validateStyle.filter,"queryRenderedFeatures.filter",ea.filter,null,ea);var Da={};if(ea&&ea.layers){if(!Array.isArray(ea.layers))return this.fire(new a.ErrorEvent(Error("parameters.layers must be an Array."))),[];for(var Ra=0,nb=ea.layers;Ra<nb.length;Ra+=1){var Nb=nb[Ra],Xb=this._layers[Nb];if(!Xb)return this.fire(new a.ErrorEvent(Error("The layer '"+
Nb+"' does not exist in the map's style and cannot be queried for features."))),[];Da[Xb.source]=!0}}Ra=[];ea.availableImages=this._availableImages;for(var jc in this.sourceCaches)ea.layers&&!Da[jc]||Ra.push(t(this.sourceCaches[jc],this._layers,this._serializedLayers,V,ea,va));this.placement&&Ra.push(w(this._layers,this._serializedLayers,this.sourceCaches,V,ea,this.placement.collisionIndex,this.placement.retainedQueryData));return this._flattenAndSortRenderedFeatures(Ra)};X.prototype.querySourceFeatures=
function(V,ea){ea&&ea.filter&&this._validate(a.validateStyle.filter,"querySourceFeatures.filter",ea.filter,null,ea);return(V=this.sourceCaches[V])?x(V,ea):[]};X.prototype.addSourceType=function(V,ea,va){if(X.getSourceType(V))return va(Error('A source type called "'+V+'" already exists.'));X.setSourceType(V,ea);if(!ea.workerSourceURL)return va(null,null);this.dispatcher.broadcast("loadWorkerSource",{name:V,url:ea.workerSourceURL},va)};X.prototype.getLight=function(){return this.light.getLight()};X.prototype.setLight=
function(V,ea){void 0===ea&&(ea={});this._checkLoaded();var va=this.light.getLight(),Da=!1,Ra;for(Ra in V)if(!a.deepEqual(V[Ra],va[Ra])){Da=!0;break}Da&&(va={now:a.browser.now(),transition:a.extend({duration:300,delay:0},this.stylesheet.transition)},this.light.setLight(V,ea),this.light.updateTransitions(va))};X.prototype._validate=function(V,ea,va,Da,Ra){void 0===Ra&&(Ra={});return Ra&&!1===Ra.validate?!1:Gg(this,V.call(a.validateStyle,a.extend({key:ea,style:this.serialize(),value:va,styleSpec:a.styleSpec},
Da)))};X.prototype._remove=function(){this._request&&(this._request.cancel(),this._request=null);this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null);a.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(var V in this._layers)this._layers[V].setEventedParent(null);for(var ea in this.sourceCaches)this.sourceCaches[ea].clearTiles(),this.sourceCaches[ea].setEventedParent(null);this.imageManager.setEventedParent(null);this.setEventedParent(null);this.dispatcher.remove()};
X.prototype._clearSource=function(V){this.sourceCaches[V].clearTiles()};X.prototype._reloadSource=function(V){this.sourceCaches[V].resume();this.sourceCaches[V].reload()};X.prototype._updateSources=function(V){for(var ea in this.sourceCaches)this.sourceCaches[ea].update(V)};X.prototype._generateCollisionBoxes=function(){for(var V in this.sourceCaches)this._reloadSource(V)};X.prototype._updatePlacement=function(V,ea,va,Da,Ra){void 0===Ra&&(Ra=!1);for(var nb=!1,Nb=!1,Xb={},jc=0,Jc=this._order;jc<Jc.length;jc+=
1){var Kc=this._layers[Jc[jc]];if("symbol"===Kc.type){if(!Xb[Kc.source]){var $c=this.sourceCaches[Kc.source];Xb[Kc.source]=$c.getRenderableIds(!0).map(function(ad){return $c.getTileByID(ad)}).sort(function(ad,Wc){return Wc.tileID.overscaledZ-ad.tileID.overscaledZ||(ad.tileID.isLessThan(Wc.tileID)?-1:1)})}Kc=this.crossTileSymbolIndex.addLayer(Kc,Xb[Kc.source],V.center.lng);nb=nb||Kc}}this.crossTileSymbolIndex.pruneUnusedLayers(this._order);if((Ra=Ra||this._layerOrderChanged||0===va)||!this.pauseablePlacement||
this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.browser.now(),V.zoom))this.pauseablePlacement=new Ve(V,this._order,Ra,ea,va,Da,this.placement),this._layerOrderChanged=!1;this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Xb),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.browser.now()),Nb=!0),nb&&this.pauseablePlacement.placement.setStale());if(Nb||nb)for(V=0,ea=this._order;V<
ea.length;V+=1)va=this._layers[ea[V]],"symbol"===va.type&&this.placement.updateLayerOpacities(va,Xb[va.source]);return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.browser.now())};X.prototype._releaseSymbolFadeTiles=function(){for(var V in this.sourceCaches)this.sourceCaches[V].releaseSymbolFadeTiles()};X.prototype.getImages=function(V,ea,va){this.imageManager.getImages(ea.icons,va);this._updateTilesForChangedImages();(V=this.sourceCaches[ea.source])&&V.setDependencies(ea.tileID.key,
ea.type,ea.icons)};X.prototype.getGlyphs=function(V,ea,va){this.glyphManager.getGlyphs(ea.stacks,va)};X.prototype.getResource=function(V,ea,va){return a.makeRequest(ea,va)};return X}(a.Evented);Yg.getSourceType=function(S){return Ib[S]};Yg.setSourceType=function(S,X){Ib[S]=X};Yg.registerForPluginStateChange=a.registerForPluginStateChange;var jh=a.createLayout([{name:"a_pos",type:"Int16",components:2}]),kh=la("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif",
"#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue\x3dint(packedValue);int v0\x3dpackedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity\x3dint(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor\x3ddecode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor\x3ddecode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset\x3dmod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),
fh=la("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor\x3du_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);}"),ei=la("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord\x3dmod(v_pos_a,1.0);vec2 pos\x3dmix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1\x3dtexture2D(u_image,pos);vec2 imagecoord_b\x3dmod(v_pos_b,1.0);vec2 pos2\x3dmix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2\x3dtexture2D(u_image,pos2);gl_FragColor\x3dmix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos_a\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),
gh=la("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude\x3dv_data.xy;float extrude_length\x3dlength(extrude);lowp float antialiasblur\x3dv_data.z;float antialiased_blur\x3d-max(blur,antialiasblur);float opacity_t\x3dsmoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t\x3dstroke_width \x3c 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor\x3dopacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude\x3dvec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center\x3dfloor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position\x3dcircle_center;if (u_scale_with_map) {corner_position+\x3dextrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center\x3du_matrix*vec4(circle_center,0,1);corner_position+\x3dextrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position\x3du_matrix*vec4(corner_position,0,1);} else {gl_Position\x3du_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+\x3dextrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+\x3dextrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur\x3d1.0/u_device_pixel_ratio/(radius+stroke_width);v_data\x3dvec3(extrude.x,extrude.y,antialiasblur);}"),
ng=la("void main() {gl_FragColor\x3dvec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);}"),Zf=la("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d\x3d-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val\x3dweight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor\x3dvec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO\x3d1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude\x3dvec2(mod(a_pos,2.0)*2.0-1.0);float S\x3dsqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude\x3dS*unscaled_extrude;vec2 extrude\x3dv_extrude*radius*u_extrude_scale;vec4 pos\x3dvec4(floor(a_pos*0.5)+extrude,0,1);gl_Position\x3du_matrix*pos;}"),
og=la("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t\x3dtexture2D(u_image,v_pos).r;vec4 color\x3dtexture2D(u_color_ramp,vec2(t,0.5));gl_FragColor\x3dcolor*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position\x3du_matrix*vec4(a_pos*u_world,0,1);v_pos.x\x3da_pos.x;v_pos.y\x3d1.0-a_pos.y;}"),Hg=
la("varying float v_placed;varying float v_notUsed;void main() {float alpha\x3d0.5;gl_FragColor\x3dvec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed \x3e 0.5) {gl_FragColor\x3dvec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed \x3e 0.5) {gl_FragColor*\x3d.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint\x3du_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance\x3dprojectedPoint.w;highp float collision_perspective_ratio\x3dclamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position\x3du_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+\x3d(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed\x3da_placed.x;v_notUsed\x3da_placed.y;}"),
Tg=la("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha\x3d0.5*min(v_perspective_ratio,1.0);float stroke_radius\x3d0.9*max(v_perspective_ratio,1.0);float distance_to_center\x3dlength(v_extrude);float distance_to_edge\x3dabs(distance_to_center-v_radius);float opacity_t\x3dsmoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color\x3dmix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor\x3dcolor*alpha*opacity_t;}",
"attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart\x3du_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  \x3du_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/\x3drayStart.w;rayEnd.xyz  /\x3drayEnd.w;highp float t\x3d(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos\x3da_pos;float radius\x3da_radius;float collision\x3da_flags.x;float vertexIdx\x3da_flags.y;vec2 quadVertexOffset\x3dvec2(mix(-1.0,1.0,float(vertexIdx \x3e\x3d2.0)),mix(-1.0,1.0,float(vertexIdx \x3e\x3d1.0 \x26\x26 vertexIdx \x3c\x3d2.0)));vec2 quadVertexExtent\x3dquadVertexOffset*radius;vec3 tilePos\x3dtoTilePosition(quadCenterPos);vec4 clipPos\x3du_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance\x3dclipPos.w;highp float collision_perspective_ratio\x3dclamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor\x3d1.2;v_radius\x3dradius;v_extrude\x3dquadVertexExtent*padding_factor;v_perspective_ratio\x3dcollision_perspective_ratio;v_collision\x3dcollision;gl_Position\x3dvec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),
rh=la("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color\x3dtexture2D(u_overlay,v_uv);gl_FragColor\x3dmix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv\x3da_pos/8192.0;gl_Position\x3du_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),hh=la("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor\x3dcolor*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position\x3du_matrix*vec4(a_pos,0,1);}"),lh=la("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist\x3dlength(v_pos-gl_FragCoord.xy);float alpha\x3d1.0-smoothstep(0.0,1.0,dist);gl_FragColor\x3doutline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos\x3d(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Kf=la("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;vec2 imagecoord\x3dmod(v_pos_a,1.0);vec2 pos\x3dmix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1\x3dtexture2D(u_image,pos);vec2 imagecoord_b\x3dmod(v_pos_b,1.0);vec2 pos2\x3dmix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2\x3dtexture2D(u_image,pos2);float dist\x3dlength(v_pos-gl_FragCoord.xy);float alpha\x3d1.0-smoothstep(0.0,1.0,dist);gl_FragColor\x3dmix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;float tileRatio\x3du_scale.x;float fromScale\x3du_scale.y;float toScale\x3du_scale.z;gl_Position\x3du_matrix*vec4(a_pos,0,1);vec2 display_size_a\x3d(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b\x3d(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos\x3d(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),
Zg=la("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;vec2 imagecoord\x3dmod(v_pos_a,1.0);vec2 pos\x3dmix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1\x3dtexture2D(u_image,pos);vec2 imagecoord_b\x3dmod(v_pos_b,1.0);vec2 pos2\x3dmix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2\x3dtexture2D(u_image,pos2);gl_FragColor\x3dmix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;float tileZoomRatio\x3du_scale.x;float fromScale\x3du_scale.y;float toScale\x3du_scale.z;vec2 display_size_a\x3d(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b\x3d(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos_a\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),
$f=la("varying vec4 v_color;void main() {gl_FragColor\x3dv_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal\x3da_normal_ed.xyz;base\x3dmax(0.0,base);height\x3dmax(0.0,height);float t\x3dmod(normal.x,2.0);gl_Position\x3du_matrix*vec4(a_pos,t \x3e 0.0 ? height : base,1);float colorvalue\x3dcolor.r*0.2126+color.g*0.7152+color.b*0.0722;v_color\x3dvec4(0.0,0.0,0.0,1.0);vec4 ambientlight\x3dvec4(0.03,0.03,0.03,1.0);color+\x3dambientlight;float directional\x3dclamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional\x3dmix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !\x3d0.0) {directional*\x3d((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+\x3dclamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+\x3dclamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+\x3dclamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*\x3du_opacity;}"),
Nf=la("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;vec2 imagecoord\x3dmod(v_pos_a,1.0);vec2 pos\x3dmix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1\x3dtexture2D(u_image,pos);vec2 imagecoord_b\x3dmod(v_pos_b,1.0);vec2 pos2\x3dmix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2\x3dtexture2D(u_image,pos2);vec4 mixedColor\x3dmix(color1,color2,u_fade);gl_FragColor\x3dmixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;float tileRatio\x3du_scale.x;float fromScale\x3du_scale.y;float toScale\x3du_scale.z;vec3 normal\x3da_normal_ed.xyz;float edgedistance\x3da_normal_ed.w;vec2 display_size_a\x3d(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b\x3d(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base\x3dmax(0.0,base);height\x3dmax(0.0,height);float t\x3dmod(normal.x,2.0);float z\x3dt \x3e 0.0 ? height : base;gl_Position\x3du_matrix*vec4(a_pos,z,1);vec2 pos\x3dnormal.x\x3d\x3d1.0 \x26\x26 normal.y\x3d\x3d0.0 \x26\x26 normal.z\x3d\x3d16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting\x3dvec4(0.0,0.0,0.0,1.0);float directional\x3dclamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional\x3dmix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !\x3d0.0) {directional*\x3d((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+\x3dclamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*\x3du_opacity;}"),
vh=la("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data\x3dtexture2D(u_image,coord)*255.0;data.a\x3d-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon\x3d1.0/u_dimension;float a\x3dgetElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b\x3dgetElevation(v_pos+vec2(0,-epsilon.y),0.0);float c\x3dgetElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d\x3dgetElevation(v_pos+vec2(-epsilon.x,0),0.0);float e\x3dgetElevation(v_pos,0.0);float f\x3dgetElevation(v_pos+vec2(epsilon.x,0),0.0);float g\x3dgetElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h\x3dgetElevation(v_pos+vec2(0,epsilon.y),0.0);float i\x3dgetElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration\x3du_zoom \x3c 2.0 ? 0.4 : u_zoom \x3c 4.5 ? 0.35 : 0.3;vec2 deriv\x3dvec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor\x3dclamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);highp vec2 epsilon\x3d1.0/u_dimension;float scale\x3d(u_dimension.x-2.0)/u_dimension.x;v_pos\x3d(a_texture_pos/8192.0)*scale+epsilon;}"),mh=la("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel\x3dtexture2D(u_image,v_pos);vec2 deriv\x3d((pixel.rg*2.0)-1.0);float scaleFactor\x3dcos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope\x3datan(1.25*length(deriv)/scaleFactor);float aspect\x3dderiv.x !\x3d0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y \x3e 0.0 ? 1.0 :-1.0);float intensity\x3du_light.x;float azimuth\x3du_light.y+PI;float base\x3d1.875-intensity*1.75;float maxValue\x3d0.5*PI;float scaledSlope\x3dintensity !\x3d0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent\x3dcos(scaledSlope);vec4 accent_color\x3d(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade\x3dabs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color\x3dmix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor\x3daccent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos\x3da_texture_pos/8192.0;}"),Gh=la("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist\x3dlength(v_normal)*v_width2.s;float blur2\x3d(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha\x3dclamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor\x3dcolor*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING\x3d1.0/u_device_pixel_ratio/2.0;vec2 a_extrude\x3da_data.xy-128.0;float a_direction\x3dmod(a_data.z,4.0)-1.0;v_linesofar\x3d(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos\x3dfloor(a_pos_normal*0.5);mediump vec2 normal\x3da_pos_normal-2.0*pos;normal.y\x3dnormal.y*2.0-1.0;v_normal\x3dnormal;gapwidth\x3dgapwidth/2.0;float halfwidth\x3dwidth/2.0;offset\x3d-1.0*offset;float inset\x3dgapwidth+(gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);float outset\x3dgapwidth+halfwidth*(gapwidth \x3e 0.0 ? 2.0 : 1.0)+(halfwidth\x3d\x3d0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist\x3doutset*a_extrude*scale;mediump float u\x3d0.5*a_direction;mediump float t\x3d1.0-abs(u);mediump vec2 offset2\x3doffset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude\x3du_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position\x3du_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective\x3dlength(dist);float extrude_length_with_perspective\x3dlength(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale\x3dextrude_length_without_perspective/extrude_length_with_perspective;v_width2\x3dvec2(outset,inset);}"),
ag=la("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist\x3dlength(v_normal)*v_width2.s;float blur2\x3d(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha\x3dclamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color\x3dtexture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor\x3dcolor*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING\x3d1.0/u_device_pixel_ratio/2.0;vec2 a_extrude\x3da_data.xy-128.0;float a_direction\x3dmod(a_data.z,4.0)-1.0;v_lineprogress\x3d(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos\x3dfloor(a_pos_normal*0.5);mediump vec2 normal\x3da_pos_normal-2.0*pos;normal.y\x3dnormal.y*2.0-1.0;v_normal\x3dnormal;gapwidth\x3dgapwidth/2.0;float halfwidth\x3dwidth/2.0;offset\x3d-1.0*offset;float inset\x3dgapwidth+(gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);float outset\x3dgapwidth+halfwidth*(gapwidth \x3e 0.0 ? 2.0 : 1.0)+(halfwidth\x3d\x3d0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist\x3doutset*a_extrude*scale;mediump float u\x3d0.5*a_direction;mediump float t\x3d1.0-abs(u);mediump vec2 offset2\x3doffset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude\x3du_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position\x3du_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective\x3dlength(dist);float extrude_length_with_perspective\x3dlength(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale\x3dextrude_length_without_perspective/extrude_length_with_perspective;v_width2\x3dvec2(outset,inset);}"),
wg=la("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;float tileZoomRatio\x3du_scale.x;float fromScale\x3du_scale.y;float toScale\x3du_scale.z;vec2 display_size_a\x3d(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b\x3d(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a\x3dvec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b\x3dvec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a\x3ddisplay_size_a.y/v_width;float aspect_b\x3ddisplay_size_b.y/v_width;float dist\x3dlength(v_normal)*v_width2.s;float blur2\x3d(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha\x3dclamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a\x3dmod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b\x3dmod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y\x3d0.5*v_normal.y+0.5;vec2 texel_size\x3d1.0/u_texsize;vec2 pos_a\x3dmix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b\x3dmix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color\x3dmix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor\x3dcolor*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING\x3d1.0/u_device_pixel_ratio/2.0;vec2 a_extrude\x3da_data.xy-128.0;float a_direction\x3dmod(a_data.z,4.0)-1.0;float a_linesofar\x3d(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos\x3dfloor(a_pos_normal*0.5);mediump vec2 normal\x3da_pos_normal-2.0*pos;normal.y\x3dnormal.y*2.0-1.0;v_normal\x3dnormal;gapwidth\x3dgapwidth/2.0;float halfwidth\x3dwidth/2.0;offset\x3d-1.0*offset;float inset\x3dgapwidth+(gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);float outset\x3dgapwidth+halfwidth*(gapwidth \x3e 0.0 ? 2.0 : 1.0)+(halfwidth\x3d\x3d0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist\x3doutset*a_extrude*scale;mediump float u\x3d0.5*a_direction;mediump float t\x3d1.0-abs(u);mediump vec2 offset2\x3doffset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude\x3du_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position\x3du_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective\x3dlength(dist);float extrude_length_with_perspective\x3dlength(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale\x3dextrude_length_without_perspective/extrude_length_with_perspective;v_linesofar\x3da_linesofar;v_width2\x3dvec2(outset,inset);v_width\x3dfloorwidth;}"),
nh=la("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist\x3dlength(v_normal)*v_width2.s;float blur2\x3d(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha\x3dclamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a\x3dtexture2D(u_image,v_tex_a).a;float sdfdist_b\x3dtexture2D(u_image,v_tex_b).a;float sdfdist\x3dmix(sdfdist_a,sdfdist_b,u_mix);alpha*\x3dsmoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor\x3dcolor*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING\x3d1.0/u_device_pixel_ratio/2.0;vec2 a_extrude\x3da_data.xy-128.0;float a_direction\x3dmod(a_data.z,4.0)-1.0;float a_linesofar\x3d(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos\x3dfloor(a_pos_normal*0.5);mediump vec2 normal\x3da_pos_normal-2.0*pos;normal.y\x3dnormal.y*2.0-1.0;v_normal\x3dnormal;gapwidth\x3dgapwidth/2.0;float halfwidth\x3dwidth/2.0;offset\x3d-1.0*offset;float inset\x3dgapwidth+(gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);float outset\x3dgapwidth+halfwidth*(gapwidth \x3e 0.0 ? 2.0 : 1.0)+(halfwidth\x3d\x3d0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist\x3doutset*a_extrude*scale;mediump float u\x3d0.5*a_direction;mediump float t\x3d1.0-abs(u);mediump vec2 offset2\x3doffset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude\x3du_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position\x3du_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective\x3dlength(dist);float extrude_length_with_perspective\x3dlength(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale\x3dextrude_length_without_perspective/extrude_length_with_perspective;v_tex_a\x3dvec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b\x3dvec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2\x3dvec2(outset,inset);}"),
wh=la("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0\x3dtexture2D(u_image0,v_pos0);vec4 color1\x3dtexture2D(u_image1,v_pos1);if (color0.a \x3e 0.0) {color0.rgb\x3dcolor0.rgb/color0.a;}if (color1.a \x3e 0.0) {color1.rgb\x3dcolor1.rgb/color1.a;}vec4 color\x3dmix(color0,color1,u_fade_t);color.a*\x3du_opacity;vec3 rgb\x3dcolor.rgb;rgb\x3dvec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average\x3d(color.r+color.g+color.b)/3.0;rgb+\x3d(average-rgb)*u_saturation_factor;rgb\x3d(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec\x3dvec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec\x3dvec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor\x3dvec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos0\x3d(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1\x3d(v_pos0*u_scale_parent)+u_tl_parent;}"),Ha=la("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha\x3dopacity*v_fade_opacity;gl_FragColor\x3dtexture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"const float PI\x3d3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos\x3da_pos_offset.xy;vec2 a_offset\x3da_pos_offset.zw;vec2 a_tex\x3da_data.xy;vec2 a_size\x3da_data.zw;float a_size_min\x3dfloor(a_size[0]*0.5);vec2 a_pxoffset\x3da_pixeloffset.xy;vec2 a_minFontScale\x3da_pixeloffset.zw/256.0;highp float segment_angle\x3d-a_projected_pos[2];float size;if (!u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3dmix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3da_size_min/128.0;} else {size\x3du_size;}vec4 projectedPoint\x3du_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance\x3dprojectedPoint.w;highp float distance_ratio\x3du_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio\x3dclamp(0.5+0.5*distance_ratio,0.0,4.0);size*\x3dperspective_ratio;float fontScale\x3du_is_text ? size/24.0 : size;highp float symbol_rotation\x3d0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint\x3du_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a\x3dprojectedPoint.xy/projectedPoint.w;vec2 b\x3doffsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation\x3datan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin\x3dsin(segment_angle+symbol_rotation);highp float angle_cos\x3dcos(segment_angle+symbol_rotation);mat2 rotation_matrix\x3dmat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos\x3du_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position\x3du_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex\x3da_tex/u_texsize;vec2 fade_opacity\x3dunpack_opacity(a_fade_opacity);float fade_change\x3dfade_opacity[1] \x3e 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity\x3dmax(0.0,min(1.0,fade_opacity[0]+fade_change));}"),
Ga=la("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA\x3d0.105/u_device_pixel_ratio;vec2 tex\x3dv_data0.xy;float gamma_scale\x3dv_data1.x;float size\x3dv_data1.y;float fade_opacity\x3dv_data1[2];float fontScale\x3du_is_text ? size/24.0 : size;lowp vec4 color\x3dfill_color;highp float gamma\x3dEDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff\x3d(256.0-64.0)/256.0;if (u_is_halo) {color\x3dhalo_color;gamma\x3d(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff\x3d(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist\x3dtexture2D(u_texture,tex).a;highp float gamma_scaled\x3dgamma*gamma_scale;highp float alpha\x3dsmoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor\x3dcolor*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"const float PI\x3d3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos\x3da_pos_offset.xy;vec2 a_offset\x3da_pos_offset.zw;vec2 a_tex\x3da_data.xy;vec2 a_size\x3da_data.zw;float a_size_min\x3dfloor(a_size[0]*0.5);vec2 a_pxoffset\x3da_pixeloffset.xy;highp float segment_angle\x3d-a_projected_pos[2];float size;if (!u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3dmix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3da_size_min/128.0;} else {size\x3du_size;}vec4 projectedPoint\x3du_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance\x3dprojectedPoint.w;highp float distance_ratio\x3du_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio\x3dclamp(0.5+0.5*distance_ratio,0.0,4.0);size*\x3dperspective_ratio;float fontScale\x3du_is_text ? size/24.0 : size;highp float symbol_rotation\x3d0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint\x3du_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a\x3dprojectedPoint.xy/projectedPoint.w;vec2 b\x3doffsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation\x3datan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin\x3dsin(segment_angle+symbol_rotation);highp float angle_cos\x3dcos(segment_angle+symbol_rotation);mat2 rotation_matrix\x3dmat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos\x3du_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position\x3du_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale\x3dgl_Position.w;vec2 fade_opacity\x3dunpack_opacity(a_fade_opacity);float fade_change\x3dfade_opacity[1] \x3e 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity\x3dmax(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0\x3da_tex/u_texsize;v_data1\x3dvec3(gamma_scale,size,interpolated_fade_opacity);}"),
Oa=la("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity\x3dv_data1[2];if (v_data1.w\x3d\x3dICON) {vec2 tex_icon\x3dv_data0.zw;lowp float alpha\x3dopacity*fade_opacity;gl_FragColor\x3dtexture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\nreturn;}vec2 tex\x3dv_data0.xy;float EDGE_GAMMA\x3d0.105/u_device_pixel_ratio;float gamma_scale\x3dv_data1.x;float size\x3dv_data1.y;float fontScale\x3dsize/24.0;lowp vec4 color\x3dfill_color;highp float gamma\x3dEDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff\x3d(256.0-64.0)/256.0;if (u_is_halo) {color\x3dhalo_color;gamma\x3d(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff\x3d(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist\x3dtexture2D(u_texture,tex).a;highp float gamma_scaled\x3dgamma*gamma_scale;highp float alpha\x3dsmoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor\x3dcolor*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"const float PI\x3d3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos\x3da_pos_offset.xy;vec2 a_offset\x3da_pos_offset.zw;vec2 a_tex\x3da_data.xy;vec2 a_size\x3da_data.zw;float a_size_min\x3dfloor(a_size[0]*0.5);float is_sdf\x3da_size[0]-2.0*a_size_min;highp float segment_angle\x3d-a_projected_pos[2];float size;if (!u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3dmix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3da_size_min/128.0;} else {size\x3du_size;}vec4 projectedPoint\x3du_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance\x3dprojectedPoint.w;highp float distance_ratio\x3du_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio\x3dclamp(0.5+0.5*distance_ratio,0.0,4.0);size*\x3dperspective_ratio;float fontScale\x3dsize/24.0;highp float symbol_rotation\x3d0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint\x3du_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a\x3dprojectedPoint.xy/projectedPoint.w;vec2 b\x3doffsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation\x3datan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin\x3dsin(segment_angle+symbol_rotation);highp float angle_cos\x3dcos(segment_angle+symbol_rotation);mat2 rotation_matrix\x3dmat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos\x3du_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position\x3du_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale\x3dgl_Position.w;vec2 fade_opacity\x3dunpack_opacity(a_fade_opacity);float fade_change\x3dfade_opacity[1] \x3e 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity\x3dmax(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy\x3da_tex/u_texsize;v_data0.zw\x3da_tex/u_texsize_icon;v_data1\x3dvec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),
Sa=Object.freeze({__proto__:null,prelude:kh,background:fh,backgroundPattern:ei,circle:gh,clippingMask:ng,heatmap:Zf,heatmapTexture:og,collisionBox:Hg,collisionCircle:Tg,debug:rh,fill:hh,fillOutline:lh,fillOutlinePattern:Kf,fillPattern:Zg,fillExtrusion:$f,fillExtrusionPattern:Nf,hillshadePrepare:vh,hillshade:mh,line:Gh,lineGradient:ag,linePattern:wg,lineSDF:nh,raster:wh,symbolIcon:Ha,symbolSDF:Ga,symbolTextAndIcon:Oa}),eb=function(){this.boundLayoutVertexBuffer=this.boundProgram=null;this.boundPaintVertexBuffers=
[];this.vao=this.boundDynamicVertexBuffer=this.boundVertexOffset=this.boundIndexBuffer=null};eb.prototype.bind=function(S,X,V,ea,va,Da,Ra,nb){this.context=S;for(var Nb=this.boundPaintVertexBuffers.length!==ea.length,Xb=0;!Nb&&Xb<ea.length;Xb++)this.boundPaintVertexBuffers[Xb]!==ea[Xb]&&(Nb=!0);Nb=!this.vao||this.boundProgram!==X||this.boundLayoutVertexBuffer!==V||Nb||this.boundIndexBuffer!==va||this.boundVertexOffset!==Da||this.boundDynamicVertexBuffer!==Ra||this.boundDynamicVertexBuffer2!==nb;!S.extVertexArrayObject||
Nb?this.freshBind(X,V,ea,va,Da,Ra,nb):(S.bindVertexArrayOES.set(this.vao),Ra&&Ra.bind(),va&&va.dynamicDraw&&va.bind(),nb&&nb.bind())};eb.prototype.freshBind=function(S,X,V,ea,va,Da,Ra){var nb=S.numAttributes,Nb=this.context,Xb=Nb.gl;if(Nb.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Nb.extVertexArrayObject.createVertexArrayOES(),Nb.bindVertexArrayOES.set(this.vao),this.boundProgram=S,this.boundLayoutVertexBuffer=X,this.boundPaintVertexBuffers=V,this.boundIndexBuffer=ea,this.boundVertexOffset=
va,this.boundDynamicVertexBuffer=Da,this.boundDynamicVertexBuffer2=Ra;else{var jc=Nb.currentNumAttributes||0;for(var Jc=nb;Jc<jc;Jc++)Xb.disableVertexAttribArray(Jc)}X.enableAttributes(Xb,S);for(jc=0;jc<V.length;jc+=1)V[jc].enableAttributes(Xb,S);Da&&Da.enableAttributes(Xb,S);Ra&&Ra.enableAttributes(Xb,S);X.bind();X.setVertexAttribPointers(Xb,S,va);for(X=0;X<V.length;X+=1)jc=V[X],jc.bind(),jc.setVertexAttribPointers(Xb,S,va);Da&&(Da.bind(),Da.setVertexAttribPointers(Xb,S,va));ea&&ea.bind();Ra&&(Ra.bind(),
Ra.setVertexAttribPointers(Xb,S,va));Nb.currentNumAttributes=nb};eb.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var lb=function(S,X,V,ea,va){var Da=S.gl;this.program=Da.createProgram();var Ra=V?V.defines():[];va&&Ra.push("#define OVERDRAW_INSPECTOR;");va=Ra.concat(kh.fragmentSource,X.fragmentSource).join("\n");Ra=Ra.concat(kh.vertexSource,X.vertexSource).join("\n");X=Da.createShader(Da.FRAGMENT_SHADER);if(Da.isContextLost())this.failedToCreate=
!0;else if(Da.shaderSource(X,va),Da.compileShader(X),Da.attachShader(this.program,X),va=Da.createShader(Da.VERTEX_SHADER),Da.isContextLost())this.failedToCreate=!0;else{Da.shaderSource(va,Ra);Da.compileShader(va);Da.attachShader(this.program,va);Ra=V?V.layoutAttributes:[];for(var nb=0;nb<Ra.length;nb++)Da.bindAttribLocation(this.program,nb,Ra[nb].name);Da.linkProgram(this.program);Da.deleteShader(va);Da.deleteShader(X);this.numAttributes=Da.getProgramParameter(this.program,Da.ACTIVE_ATTRIBUTES);this.attributes=
{};X={};for(va=0;va<this.numAttributes;va++)(Ra=Da.getActiveAttrib(this.program,va))&&(this.attributes[Ra.name]=Da.getAttribLocation(this.program,Ra.name));va=Da.getProgramParameter(this.program,Da.ACTIVE_UNIFORMS);for(Ra=0;Ra<va;Ra++)(nb=Da.getActiveUniform(this.program,Ra))&&(X[nb.name]=Da.getUniformLocation(this.program,nb.name));this.fixedUniforms=ea(S,X);this.binderUniforms=V?V.getUniforms(S,X):[]}};lb.prototype.draw=function(S,X,V,ea,va,Da,Ra,nb,Nb,Xb,jc,Jc,Kc,$c,ad,Wc){var wd,Ed=S.gl;if(!this.failedToCreate){S.program.set(this.program);
S.setDepthMode(V);S.setStencilMode(ea);S.setColorMode(va);S.setCullFace(Da);for(var Ld in this.fixedUniforms)this.fixedUniforms[Ld].set(Ra[Ld]);$c&&$c.setUniforms(S,this.binderUniforms,Jc,{zoom:Kc});V=(wd={},wd[Ed.LINES]=2,wd[Ed.TRIANGLES]=3,wd[Ed.LINE_STRIP]=1,wd)[X];wd=0;for(jc=jc.get();wd<jc.length;wd+=1)ea=jc[wd],va=ea.vaos||(ea.vaos={}),(va[nb]||(va[nb]=new eb)).bind(S,this,Nb,$c?$c.getPaintVertexBuffers():[],Xb,ea.vertexOffset,ad,Wc),Ed.drawElements(X,ea.primitiveLength*V,Ed.UNSIGNED_SHORT,
ea.primitiveOffset*V*2)}};var Cb=function(S,X,V,ea){var va=X.style.light,Da=va.properties.get("position");Da=[Da.x,Da.y,Da.z];var Ra=a.create$1();"viewport"===va.properties.get("anchor")&&a.fromRotation(Ra,-X.transform.angle);a.transformMat3(Da,Da,Ra);X=va.properties.get("color");return{u_matrix:S,u_lightpos:Da,u_lightintensity:va.properties.get("intensity"),u_lightcolor:[X.r,X.g,X.b],u_vertical_gradient:+V,u_opacity:ea}},Zb=function(S,X,V,ea){var va=S.transform;if("map"===ea.paint.get("circle-pitch-alignment")){var Da=
ma(V,1,va.zoom);var Ra=!0;Da=[Da,Da]}else Ra=!1,Da=va.pixelsToGLUnits;return{u_camera_to_center_distance:va.cameraToCenterDistance,u_scale_with_map:+("map"===ea.paint.get("circle-pitch-scale")),u_matrix:S.translatePosMatrix(X.posMatrix,V,ea.paint.get("circle-translate"),ea.paint.get("circle-translate-anchor")),u_pitch_with_map:+Ra,u_device_pixel_ratio:a.browser.devicePixelRatio,u_extrude_scale:Da}},Lb=function(S,X,V){void 0===V&&(V=1);return{u_matrix:S,u_color:X,u_overlay:0,u_overlay_scale:V}},ec=
function(S,X,V){var ea=S.transform;return{u_matrix:na(S,X,V),u_ratio:1/ma(X,1,ea.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_units_to_pixels:[1/ea.pixelsToGLUnits[0],1/ea.pixelsToGLUnits[1]]}},hc=function(S,X,V,ea,va,Da,Ra,nb,Nb,Xb){var jc=va.transform;return{u_is_size_zoom_constant:+("constant"===S||"source"===S),u_is_size_feature_constant:+("constant"===S||"camera"===S),u_size_t:X?X.uSizeT:0,u_size:X?X.uSize:0,u_camera_to_center_distance:jc.cameraToCenterDistance,u_pitch:jc.pitch/360*
2*Math.PI,u_rotate_symbol:+V,u_aspect_ratio:jc.width/jc.height,u_fade_change:va.options.fadeDuration?va.symbolFadeChange:1,u_matrix:Da,u_label_plane_matrix:Ra,u_coord_matrix:nb,u_is_text:+Nb,u_pitch_with_map:+ea,u_texsize:Xb,u_texture:0}},rc=function(S,X,V,ea,va,Da,Ra,nb,Nb,Xb,jc){var Jc=va.transform;return a.extend(hc(S,X,V,ea,va,Da,Ra,nb,Nb,Xb),{u_gamma_scale:ea?Math.cos(Jc._pitch)*Jc.cameraToCenterDistance:1,u_device_pixel_ratio:a.browser.devicePixelRatio,u_is_halo:+jc})},Fc=function(S,X,V,ea,
va,Da,Ra,nb,Nb,Xb){return a.extend(rc(S,X,V,ea,va,Da,Ra,nb,!0,Nb,!0),{u_texsize_icon:Xb,u_texture_icon:1})},jd={fillExtrusion:function(S,X){return{u_matrix:new a.UniformMatrix4f(S,X.u_matrix),u_lightpos:new a.Uniform3f(S,X.u_lightpos),u_lightintensity:new a.Uniform1f(S,X.u_lightintensity),u_lightcolor:new a.Uniform3f(S,X.u_lightcolor),u_vertical_gradient:new a.Uniform1f(S,X.u_vertical_gradient),u_opacity:new a.Uniform1f(S,X.u_opacity)}},fillExtrusionPattern:function(S,X){return{u_matrix:new a.UniformMatrix4f(S,
X.u_matrix),u_lightpos:new a.Uniform3f(S,X.u_lightpos),u_lightintensity:new a.Uniform1f(S,X.u_lightintensity),u_lightcolor:new a.Uniform3f(S,X.u_lightcolor),u_vertical_gradient:new a.Uniform1f(S,X.u_vertical_gradient),u_height_factor:new a.Uniform1f(S,X.u_height_factor),u_image:new a.Uniform1i(S,X.u_image),u_texsize:new a.Uniform2f(S,X.u_texsize),u_pixel_coord_upper:new a.Uniform2f(S,X.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(S,X.u_pixel_coord_lower),u_scale:new a.Uniform3f(S,X.u_scale),
u_fade:new a.Uniform1f(S,X.u_fade),u_opacity:new a.Uniform1f(S,X.u_opacity)}},fill:function(S,X){return{u_matrix:new a.UniformMatrix4f(S,X.u_matrix)}},fillPattern:function(S,X){return{u_matrix:new a.UniformMatrix4f(S,X.u_matrix),u_image:new a.Uniform1i(S,X.u_image),u_texsize:new a.Uniform2f(S,X.u_texsize),u_pixel_coord_upper:new a.Uniform2f(S,X.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(S,X.u_pixel_coord_lower),u_scale:new a.Uniform3f(S,X.u_scale),u_fade:new a.Uniform1f(S,X.u_fade)}},
fillOutline:function(S,X){return{u_matrix:new a.UniformMatrix4f(S,X.u_matrix),u_world:new a.Uniform2f(S,X.u_world)}},fillOutlinePattern:function(S,X){return{u_matrix:new a.UniformMatrix4f(S,X.u_matrix),u_world:new a.Uniform2f(S,X.u_world),u_image:new a.Uniform1i(S,X.u_image),u_texsize:new a.Uniform2f(S,X.u_texsize),u_pixel_coord_upper:new a.Uniform2f(S,X.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(S,X.u_pixel_coord_lower),u_scale:new a.Uniform3f(S,X.u_scale),u_fade:new a.Uniform1f(S,
X.u_fade)}},circle:function(S,X){return{u_camera_to_center_distance:new a.Uniform1f(S,X.u_camera_to_center_distance),u_scale_with_map:new a.Uniform1i(S,X.u_scale_with_map),u_pitch_with_map:new a.Uniform1i(S,X.u_pitch_with_map),u_extrude_scale:new a.Uniform2f(S,X.u_extrude_scale),u_device_pixel_ratio:new a.Uniform1f(S,X.u_device_pixel_ratio),u_matrix:new a.UniformMatrix4f(S,X.u_matrix)}},collisionBox:function(S,X){return{u_matrix:new a.UniformMatrix4f(S,X.u_matrix),u_camera_to_center_distance:new a.Uniform1f(S,
X.u_camera_to_center_distance),u_pixels_to_tile_units:new a.Uniform1f(S,X.u_pixels_to_tile_units),u_extrude_scale:new a.Uniform2f(S,X.u_extrude_scale),u_overscale_factor:new a.Uniform1f(S,X.u_overscale_factor)}},collisionCircle:function(S,X){return{u_matrix:new a.UniformMatrix4f(S,X.u_matrix),u_inv_matrix:new a.UniformMatrix4f(S,X.u_inv_matrix),u_camera_to_center_distance:new a.Uniform1f(S,X.u_camera_to_center_distance),u_viewport_size:new a.Uniform2f(S,X.u_viewport_size)}},debug:function(S,X){return{u_color:new a.UniformColor(S,
X.u_color),u_matrix:new a.UniformMatrix4f(S,X.u_matrix),u_overlay:new a.Uniform1i(S,X.u_overlay),u_overlay_scale:new a.Uniform1f(S,X.u_overlay_scale)}},clippingMask:function(S,X){return{u_matrix:new a.UniformMatrix4f(S,X.u_matrix)}},heatmap:function(S,X){return{u_extrude_scale:new a.Uniform1f(S,X.u_extrude_scale),u_intensity:new a.Uniform1f(S,X.u_intensity),u_matrix:new a.UniformMatrix4f(S,X.u_matrix)}},heatmapTexture:function(S,X){return{u_matrix:new a.UniformMatrix4f(S,X.u_matrix),u_world:new a.Uniform2f(S,
X.u_world),u_image:new a.Uniform1i(S,X.u_image),u_color_ramp:new a.Uniform1i(S,X.u_color_ramp),u_opacity:new a.Uniform1f(S,X.u_opacity)}},hillshade:function(S,X){return{u_matrix:new a.UniformMatrix4f(S,X.u_matrix),u_image:new a.Uniform1i(S,X.u_image),u_latrange:new a.Uniform2f(S,X.u_latrange),u_light:new a.Uniform2f(S,X.u_light),u_shadow:new a.UniformColor(S,X.u_shadow),u_highlight:new a.UniformColor(S,X.u_highlight),u_accent:new a.UniformColor(S,X.u_accent)}},hillshadePrepare:function(S,X){return{u_matrix:new a.UniformMatrix4f(S,
X.u_matrix),u_image:new a.Uniform1i(S,X.u_image),u_dimension:new a.Uniform2f(S,X.u_dimension),u_zoom:new a.Uniform1f(S,X.u_zoom),u_maxzoom:new a.Uniform1f(S,X.u_maxzoom),u_unpack:new a.Uniform4f(S,X.u_unpack)}},line:function(S,X){return{u_matrix:new a.UniformMatrix4f(S,X.u_matrix),u_ratio:new a.Uniform1f(S,X.u_ratio),u_device_pixel_ratio:new a.Uniform1f(S,X.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(S,X.u_units_to_pixels)}},lineGradient:function(S,X){return{u_matrix:new a.UniformMatrix4f(S,
X.u_matrix),u_ratio:new a.Uniform1f(S,X.u_ratio),u_device_pixel_ratio:new a.Uniform1f(S,X.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(S,X.u_units_to_pixels),u_image:new a.Uniform1i(S,X.u_image)}},linePattern:function(S,X){return{u_matrix:new a.UniformMatrix4f(S,X.u_matrix),u_texsize:new a.Uniform2f(S,X.u_texsize),u_ratio:new a.Uniform1f(S,X.u_ratio),u_device_pixel_ratio:new a.Uniform1f(S,X.u_device_pixel_ratio),u_image:new a.Uniform1i(S,X.u_image),u_units_to_pixels:new a.Uniform2f(S,X.u_units_to_pixels),
u_scale:new a.Uniform3f(S,X.u_scale),u_fade:new a.Uniform1f(S,X.u_fade)}},lineSDF:function(S,X){return{u_matrix:new a.UniformMatrix4f(S,X.u_matrix),u_ratio:new a.Uniform1f(S,X.u_ratio),u_device_pixel_ratio:new a.Uniform1f(S,X.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(S,X.u_units_to_pixels),u_patternscale_a:new a.Uniform2f(S,X.u_patternscale_a),u_patternscale_b:new a.Uniform2f(S,X.u_patternscale_b),u_sdfgamma:new a.Uniform1f(S,X.u_sdfgamma),u_image:new a.Uniform1i(S,X.u_image),u_tex_y_a:new a.Uniform1f(S,
X.u_tex_y_a),u_tex_y_b:new a.Uniform1f(S,X.u_tex_y_b),u_mix:new a.Uniform1f(S,X.u_mix)}},raster:function(S,X){return{u_matrix:new a.UniformMatrix4f(S,X.u_matrix),u_tl_parent:new a.Uniform2f(S,X.u_tl_parent),u_scale_parent:new a.Uniform1f(S,X.u_scale_parent),u_buffer_scale:new a.Uniform1f(S,X.u_buffer_scale),u_fade_t:new a.Uniform1f(S,X.u_fade_t),u_opacity:new a.Uniform1f(S,X.u_opacity),u_image0:new a.Uniform1i(S,X.u_image0),u_image1:new a.Uniform1i(S,X.u_image1),u_brightness_low:new a.Uniform1f(S,
X.u_brightness_low),u_brightness_high:new a.Uniform1f(S,X.u_brightness_high),u_saturation_factor:new a.Uniform1f(S,X.u_saturation_factor),u_contrast_factor:new a.Uniform1f(S,X.u_contrast_factor),u_spin_weights:new a.Uniform3f(S,X.u_spin_weights)}},symbolIcon:function(S,X){return{u_is_size_zoom_constant:new a.Uniform1i(S,X.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(S,X.u_is_size_feature_constant),u_size_t:new a.Uniform1f(S,X.u_size_t),u_size:new a.Uniform1f(S,X.u_size),u_camera_to_center_distance:new a.Uniform1f(S,
X.u_camera_to_center_distance),u_pitch:new a.Uniform1f(S,X.u_pitch),u_rotate_symbol:new a.Uniform1i(S,X.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(S,X.u_aspect_ratio),u_fade_change:new a.Uniform1f(S,X.u_fade_change),u_matrix:new a.UniformMatrix4f(S,X.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(S,X.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(S,X.u_coord_matrix),u_is_text:new a.Uniform1i(S,X.u_is_text),u_pitch_with_map:new a.Uniform1i(S,X.u_pitch_with_map),u_texsize:new a.Uniform2f(S,
X.u_texsize),u_texture:new a.Uniform1i(S,X.u_texture)}},symbolSDF:function(S,X){return{u_is_size_zoom_constant:new a.Uniform1i(S,X.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(S,X.u_is_size_feature_constant),u_size_t:new a.Uniform1f(S,X.u_size_t),u_size:new a.Uniform1f(S,X.u_size),u_camera_to_center_distance:new a.Uniform1f(S,X.u_camera_to_center_distance),u_pitch:new a.Uniform1f(S,X.u_pitch),u_rotate_symbol:new a.Uniform1i(S,X.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(S,
X.u_aspect_ratio),u_fade_change:new a.Uniform1f(S,X.u_fade_change),u_matrix:new a.UniformMatrix4f(S,X.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(S,X.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(S,X.u_coord_matrix),u_is_text:new a.Uniform1i(S,X.u_is_text),u_pitch_with_map:new a.Uniform1i(S,X.u_pitch_with_map),u_texsize:new a.Uniform2f(S,X.u_texsize),u_texture:new a.Uniform1i(S,X.u_texture),u_gamma_scale:new a.Uniform1f(S,X.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(S,
X.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(S,X.u_is_halo)}},symbolTextAndIcon:function(S,X){return{u_is_size_zoom_constant:new a.Uniform1i(S,X.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(S,X.u_is_size_feature_constant),u_size_t:new a.Uniform1f(S,X.u_size_t),u_size:new a.Uniform1f(S,X.u_size),u_camera_to_center_distance:new a.Uniform1f(S,X.u_camera_to_center_distance),u_pitch:new a.Uniform1f(S,X.u_pitch),u_rotate_symbol:new a.Uniform1i(S,X.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(S,
X.u_aspect_ratio),u_fade_change:new a.Uniform1f(S,X.u_fade_change),u_matrix:new a.UniformMatrix4f(S,X.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(S,X.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(S,X.u_coord_matrix),u_is_text:new a.Uniform1i(S,X.u_is_text),u_pitch_with_map:new a.Uniform1i(S,X.u_pitch_with_map),u_texsize:new a.Uniform2f(S,X.u_texsize),u_texsize_icon:new a.Uniform2f(S,X.u_texsize_icon),u_texture:new a.Uniform1i(S,X.u_texture),u_texture_icon:new a.Uniform1i(S,X.u_texture_icon),
u_gamma_scale:new a.Uniform1f(S,X.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(S,X.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(S,X.u_is_halo)}},background:function(S,X){return{u_matrix:new a.UniformMatrix4f(S,X.u_matrix),u_opacity:new a.Uniform1f(S,X.u_opacity),u_color:new a.UniformColor(S,X.u_color)}},backgroundPattern:function(S,X){return{u_matrix:new a.UniformMatrix4f(S,X.u_matrix),u_opacity:new a.Uniform1f(S,X.u_opacity),u_image:new a.Uniform1i(S,X.u_image),u_pattern_tl_a:new a.Uniform2f(S,
X.u_pattern_tl_a),u_pattern_br_a:new a.Uniform2f(S,X.u_pattern_br_a),u_pattern_tl_b:new a.Uniform2f(S,X.u_pattern_tl_b),u_pattern_br_b:new a.Uniform2f(S,X.u_pattern_br_b),u_texsize:new a.Uniform2f(S,X.u_texsize),u_mix:new a.Uniform1f(S,X.u_mix),u_pattern_size_a:new a.Uniform2f(S,X.u_pattern_size_a),u_pattern_size_b:new a.Uniform2f(S,X.u_pattern_size_b),u_scale_a:new a.Uniform1f(S,X.u_scale_a),u_scale_b:new a.Uniform1f(S,X.u_scale_b),u_pixel_coord_upper:new a.Uniform2f(S,X.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(S,
X.u_pixel_coord_lower),u_tile_units_to_pixels:new a.Uniform1f(S,X.u_tile_units_to_pixels)}}},Dd,ye=a.identity(new Float32Array(16)),Ae=new a.Color(1,0,0,1),Xe=new a.Color(0,1,0,1),Vf=new a.Color(0,0,1,1),Je=new a.Color(1,0,1,1),Tf=new a.Color(0,1,1,1),Mf={symbol:function(S,X,V,ea,va){if("translucent"===S.renderPass){var Da=Gd.disabled,Ra=S.colorModeForRenderPass();if(V.layout.get("text-variable-anchor")){var nb=V.layout.get("text-rotation-alignment"),Nb=V.layout.get("text-pitch-alignment"),Xb=S.transform;
nb="map"===nb;Nb="map"===Nb;for(var jc=0;jc<ea.length;jc+=1){var Jc=ea[jc],Kc=X.getTile(Jc),$c=Kc.getBucket(V);if($c&&$c.text&&$c.text.segments.get().length){var ad=a.evaluateSizeForZoom($c.textSizeData,Xb.zoom),Wc=ma(Kc,1,S.transform.zoom),wd=M(Jc.posMatrix,Nb,nb,S.transform,Wc),Ed="none"!==V.layout.get("icon-text-fit")&&$c.hasIconData();if(ad){Wc=nb;var Ld=Nb,he=va,de=a.symbolSize,me=Xb;Jc=Jc.posMatrix;var ve=Math.pow(2,Xb.zoom-Kc.tileID.overscaledZ),se=ad,Ee=Ed,we=$c.text.placedSymbolArray;ad=
$c.text.dynamicLayoutVertexArray;Ed=$c.icon.dynamicLayoutVertexArray;Kc={};ad.clear();for(var jf=0;jf<we.length;jf++){var Ke=we.get(jf),rf=$c.allowVerticalPlacement&&!Ke.placedOrientation,pf=Ke.hidden||!Ke.crossTileID||rf?null:he[Ke.crossTileID];if(pf){rf=new a.Point(Ke.anchorX,Ke.anchorY);var cg=Z(rf,Ld?Jc:wd),uf=.5+me.cameraToCenterDistance/cg.signedDistanceFromCamera*.5,sg=de.evaluateSizeForFeature($c.textSizeData,se,Ke)*uf/a.ONE_EM;Ld&&(sg*=$c.tilePixelRatio/ve);uf=pf.anchor;var ef=pf.width,Wf=
pf.height,da=pf.textOffset;pf=pf.textBoxScale;var ua=a.getAnchorAlignment(uf);ef*=-(ua.horizontalAlign-.5);Wf*=-(ua.verticalAlign-.5);uf=a.evaluateVariableOffset(uf,da);uf=new a.Point((ef/pf+uf[0])*sg,(Wf/pf+uf[1])*sg);rf=Ld?Z(rf.add(uf),wd).point:cg.point.add(Wc?uf.rotate(-me.angle):uf);cg=$c.allowVerticalPlacement&&Ke.placedOrientation===a.WritingMode.vertical?Math.PI/2:0;for(uf=0;uf<Ke.numGlyphs;uf++)a.addDynamicAttributes(ad,rf,cg);Ee&&0<=Ke.associatedIconIndex&&(Kc[Ke.associatedIconIndex]={shiftedAnchor:rf,
angle:cg})}else ba(Ke.numGlyphs,ad)}if(Ee){Ed.clear();Wc=$c.icon.placedSymbolArray;for(Ld=0;Ld<Wc.length;Ld++)if(he=Wc.get(Ld),he.hidden)ba(he.numGlyphs,Ed);else if(de=Kc[Ld])for(me=0;me<he.numGlyphs;me++)a.addDynamicAttributes(Ed,de.shiftedAnchor,de.angle);else ba(he.numGlyphs,Ed);$c.icon.dynamicLayoutVertexBuffer.updateData(Ed)}$c.text.dynamicLayoutVertexBuffer.updateData(ad)}}}}0!==V.paint.get("icon-opacity").constantOr(1)&&ta(S,X,V,ea,!1,V.paint.get("icon-translate"),V.paint.get("icon-translate-anchor"),
V.layout.get("icon-rotation-alignment"),V.layout.get("icon-pitch-alignment"),V.layout.get("icon-keep-upright"),Da,Ra);0!==V.paint.get("text-opacity").constantOr(1)&&ta(S,X,V,ea,!0,V.paint.get("text-translate"),V.paint.get("text-translate-anchor"),V.layout.get("text-rotation-alignment"),V.layout.get("text-pitch-alignment"),V.layout.get("text-keep-upright"),Da,Ra);X.map.showCollisionBoxes&&(qa(S,X,V,ea,V.paint.get("text-translate"),V.paint.get("text-translate-anchor"),!0),qa(S,X,V,ea,V.paint.get("icon-translate"),
V.paint.get("icon-translate-anchor"),!1))}},circle:function(S,X,V,ea){if("translucent"===S.renderPass){var va=V.paint.get("circle-opacity"),Da=V.paint.get("circle-stroke-width"),Ra=V.paint.get("circle-stroke-opacity"),nb=void 0!==V.layout.get("circle-sort-key").constantOr(1);if(0!==va.constantOr(1)||0!==Da.constantOr(1)&&0!==Ra.constantOr(1)){va=S.context;Da=va.gl;Ra=S.depthModeForSublayer(0,Rc.ReadOnly);for(var Nb=Gd.disabled,Xb=S.colorModeForRenderPass(),jc=[],Jc=0;Jc<ea.length;Jc++){var Kc=ea[Jc],
$c=X.getTile(Kc),ad=$c.getBucket(V);if(ad){var Wc=ad.programConfigurations.get(V.id),wd=S.useProgram("circle",Wc),Ed=ad.layoutVertexBuffer,Ld=ad.indexBuffer;Kc=Zb(S,Kc,$c,V);Wc={programConfiguration:Wc,program:wd,layoutVertexBuffer:Ed,indexBuffer:Ld,uniformValues:Kc};if(nb)for(wd=0,ad=ad.segments.get();wd<ad.length;wd+=1)Ed=ad[wd],jc.push({segments:new a.SegmentVector([Ed]),sortKey:Ed.sortKey,state:Wc});else jc.push({segments:ad.segments,sortKey:0,state:Wc})}}nb&&jc.sort(function(he,de){return he.sortKey-
de.sortKey});for(X=0;X<jc.length;X+=1)ea=jc[X],nb=ea.state,nb.program.draw(va,Da.TRIANGLES,Ra,Nb,Xb,$b.disabled,nb.uniformValues,V.id,nb.layoutVertexBuffer,nb.indexBuffer,ea.segments,V.paint,S.transform.zoom,nb.programConfiguration)}}},heatmap:function(S,X,V,ea){if(0!==V.paint.get("heatmap-opacity"))if("offscreen"===S.renderPass){var va=S.context,Da=va.gl,Ra=Gd.disabled,nb=new Mb([Da.ONE,Da.ONE],a.Color.transparent,[!0,!0,!0,!0]),Nb=va.gl;va.activeTexture.set(Nb.TEXTURE1);va.viewport.set([0,0,S.width/
4,S.height/4]);var Xb=V.heatmapFbo;if(Xb)Nb.bindTexture(Nb.TEXTURE_2D,Xb.colorAttachment.get()),va.bindFramebuffer.set(Xb.framebuffer);else{var jc=Nb.createTexture();Nb.bindTexture(Nb.TEXTURE_2D,jc);Nb.texParameteri(Nb.TEXTURE_2D,Nb.TEXTURE_WRAP_S,Nb.CLAMP_TO_EDGE);Nb.texParameteri(Nb.TEXTURE_2D,Nb.TEXTURE_WRAP_T,Nb.CLAMP_TO_EDGE);Nb.texParameteri(Nb.TEXTURE_2D,Nb.TEXTURE_MIN_FILTER,Nb.LINEAR);Nb.texParameteri(Nb.TEXTURE_2D,Nb.TEXTURE_MAG_FILTER,Nb.LINEAR);Nb=Xb=V.heatmapFbo=va.createFramebuffer(S.width/
4,S.height/4,!1);Xb=va.gl;Xb.texImage2D(Xb.TEXTURE_2D,0,Xb.RGBA,S.width/4,S.height/4,0,Xb.RGBA,va.extRenderToTextureHalfFloat?va.extTextureHalfFloat.HALF_FLOAT_OES:Xb.UNSIGNED_BYTE,null);Nb.colorAttachment.set(jc)}va.clear({color:a.Color.transparent});for(jc=0;jc<ea.length;jc++){var Jc=ea[jc];if(!X.hasRenderableParent(Jc)){var Kc=X.getTile(Jc);if(Nb=Kc.getBucket(V)){Xb=Nb.programConfigurations.get(V.id);var $c=S.useProgram("heatmap",Xb),ad=S.transform.zoom,Wc=$c.draw,wd=Da.TRIANGLES,Ed=Rc.disabled,
Ld=$b.disabled,he=V.paint.get("heatmap-intensity");Jc={u_matrix:Jc.posMatrix,u_extrude_scale:ma(Kc,1,ad),u_intensity:he};Wc.call($c,va,wd,Ed,Ra,nb,Ld,Jc,V.id,Nb.layoutVertexBuffer,Nb.indexBuffer,Nb.segments,V.paint,S.transform.zoom,Xb)}}}va.viewport.set([0,0,S.width,S.height])}else"translucent"===S.renderPass&&(S.context.setColorMode(S.colorModeForRenderPass()),X=S.context,Da=X.gl,ea=V.heatmapFbo)&&(X.activeTexture.set(Da.TEXTURE0),Da.bindTexture(Da.TEXTURE_2D,ea.colorAttachment.get()),X.activeTexture.set(Da.TEXTURE1),
ea=V.colorRampTexture,ea||(ea=V.colorRampTexture=new a.Texture(X,V.colorRamp,Da.RGBA)),ea.bind(Da.LINEAR,Da.CLAMP_TO_EDGE),ea=S.useProgram("heatmapTexture"),va=ea.draw,Da=Da.TRIANGLES,Ra=Rc.disabled,nb=Gd.disabled,jc=S.colorModeForRenderPass(),Nb=$b.disabled,Xb=a.create(),a.ortho(Xb,0,S.width,S.height,0,0,1),Jc=S.context.gl,Xb={u_matrix:Xb,u_world:[Jc.drawingBufferWidth,Jc.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:V.paint.get("heatmap-opacity")},va.call(ea,X,Da,Ra,nb,jc,Nb,Xb,V.id,S.viewportBuffer,
S.quadTriangleIndexBuffer,S.viewportSegments,V.paint,S.transform.zoom))},line:function(S,X,V,ea){if("translucent"===S.renderPass){var va=V.paint.get("line-opacity"),Da=V.paint.get("line-width");if(0!==va.constantOr(1)&&0!==Da.constantOr(1)){va=S.depthModeForSublayer(0,Rc.ReadOnly);Da=S.colorModeForRenderPass();var Ra=V.paint.get("line-dasharray"),nb=V.paint.get("line-pattern"),Nb=nb.constantOr(1),Xb=V.paint.get("line-gradient"),jc=V.getCrossfadeParameters(),Jc=Nb?"linePattern":Ra?"lineSDF":Xb?"lineGradient":
"line",Kc=S.context,$c=Kc.gl,ad=!0;if(Xb){Kc.activeTexture.set($c.TEXTURE0);var Wc=V.gradientTexture;if(!V.gradient)return;Wc||(Wc=V.gradientTexture=new a.Texture(Kc,V.gradient,$c.RGBA));Wc.bind($c.LINEAR,$c.CLAMP_TO_EDGE)}for(Wc=0;Wc<ea.length;Wc+=1){var wd=ea[Wc],Ed=X.getTile(wd);if(!Nb||Ed.patternsLoaded()){var Ld=Ed.getBucket(V);if(Ld){var he=Ld.programConfigurations.get(V.id),de=S.context.program.get(),me=S.useProgram(Jc,he);ad=ad||me.program!==de;var ve=nb.constantOr(null);if(ve&&Ed.imageAtlas){var se=
Ed.imageAtlas;de=se.patternPositions[ve.to.toString()];ve=se.patternPositions[ve.from.toString()];de&&ve&&he.setConstantPatternPositions(de,ve)}if(Nb){de=S;ve=Ed;se=V;var Ee=jc,we=de.transform,jf=1/ma(ve,1,we.tileZoom);de={u_matrix:na(de,ve,se),u_texsize:ve.imageAtlasTexture.size,u_ratio:1/ma(ve,1,we.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_image:0,u_scale:[jf,Ee.fromScale,Ee.toScale],u_fade:Ee.t,u_units_to_pixels:[1/we.pixelsToGLUnits[0],1/we.pixelsToGLUnits[1]]}}else if(Ra){de=S;
ve=Ed;se=V;var Ke=Ra;Ee=jc;we=de.lineAtlas;jf=1/ma(ve,1,de.transform.tileZoom);var rf="round"===se.layout.get("line-cap"),pf=we.getDash(Ke.from,rf);Ke=we.getDash(Ke.to,rf);rf=pf.width*Ee.fromScale;var cg=Ke.width*Ee.toScale;de=a.extend(ec(de,ve,se),{u_patternscale_a:[jf/rf,-pf.height/2],u_patternscale_b:[jf/cg,-Ke.height/2],u_sdfgamma:we.width/(256*Math.min(rf,cg)*a.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:pf.y,u_tex_y_b:Ke.y,u_mix:Ee.t})}else de=Xb?a.extend(ec(S,Ed,V),{u_image:0}):ec(S,Ed,
V);Nb?(Kc.activeTexture.set($c.TEXTURE0),Ed.imageAtlasTexture.bind($c.LINEAR,$c.CLAMP_TO_EDGE),he.updatePaintBuffers(jc)):Ra&&(ad||S.lineAtlas.dirty)&&(Kc.activeTexture.set($c.TEXTURE0),S.lineAtlas.bind(Kc));me.draw(Kc,$c.TRIANGLES,va,S.stencilModeForClipping(wd),Da,$b.disabled,de,V.id,Ld.layoutVertexBuffer,Ld.indexBuffer,Ld.segments,V.paint,S.transform.zoom,he);ad=!1}}}}}},fill:function(S,X,V,ea){var va=V.paint.get("fill-color"),Da=V.paint.get("fill-opacity");if(0!==Da.constantOr(1)){var Ra=S.colorModeForRenderPass(),
nb=V.paint.get("fill-pattern");va=S.opaquePassEnabledForLayer()&&!nb.constantOr(1)&&1===va.constantOr(a.Color.transparent).a&&1===Da.constantOr(0)?"opaque":"translucent";S.renderPass===va&&(va=S.depthModeForSublayer(1,"opaque"===S.renderPass?Rc.ReadWrite:Rc.ReadOnly),Ia(S,X,V,ea,va,Ra,!1));"translucent"===S.renderPass&&V.paint.get("fill-antialias")&&(va=S.depthModeForSublayer(V.getPaintProperty("fill-outline-color")?2:0,Rc.ReadOnly),Ia(S,X,V,ea,va,Ra,!0))}},"fill-extrusion":function(S,X,V,ea){var va=
V.paint.get("fill-extrusion-opacity");if(0!==va&&"translucent"===S.renderPass){var Da=new Rc(S.context.gl.LEQUAL,Rc.ReadWrite,S.depthRangeFor3D);1!==va||V.paint.get("fill-extrusion-pattern").constantOr(1)?(Xa(S,X,V,ea,Da,Gd.disabled,Mb.disabled),Xa(S,X,V,ea,Da,S.stencilModeFor3D(),S.colorModeForRenderPass())):(va=S.colorModeForRenderPass(),Xa(S,X,V,ea,Da,Gd.disabled,va))}},hillshade:function(S,X,V,ea){if("offscreen"===S.renderPass||"translucent"===S.renderPass){var va=S.context,Da=X.getSource().maxzoom,
Ra=S.depthModeForSublayer(0,Rc.ReadOnly),nb=S.colorModeForRenderPass(),Nb="translucent"===S.renderPass?S.stencilConfigForOverlap(ea):[{},ea];ea=Nb[0];var Xb=0;for(Nb=Nb[1];Xb<Nb.length;Xb+=1){var jc=Nb[Xb],Jc=X.getTile(jc);if(Jc.needsHillshadePrepare&&"offscreen"===S.renderPass){var Kc=S,$c=V,ad=Da,Wc=Ra,wd=Gd.disabled,Ed=nb;jc=Kc.context;var Ld=jc.gl,he=Jc.dem;if(he&&he.data){var de=he.dim,me=he.stride,ve=he.getPixels();jc.activeTexture.set(Ld.TEXTURE1);jc.pixelStoreUnpackPremultiplyAlpha.set(!1);
Jc.demTexture=Jc.demTexture||Kc.getTileTexture(me);Jc.demTexture?(me=Jc.demTexture,me.update(ve,{premultiply:!1}),me.bind(Ld.NEAREST,Ld.CLAMP_TO_EDGE)):(Jc.demTexture=new a.Texture(jc,ve,Ld.RGBA,{premultiply:!1}),Jc.demTexture.bind(Ld.NEAREST,Ld.CLAMP_TO_EDGE));jc.activeTexture.set(Ld.TEXTURE0);ve=Jc.fbo;ve||(me=new a.Texture(jc,{width:de,height:de,data:null},Ld.RGBA),me.bind(Ld.LINEAR,Ld.CLAMP_TO_EDGE),ve=Jc.fbo=jc.createFramebuffer(de,de,!0),ve.colorAttachment.set(me.texture));jc.bindFramebuffer.set(ve.framebuffer);
jc.viewport.set([0,0,de,de]);de=Kc.useProgram("hillshadePrepare");ve=de.draw;Ld=Ld.TRIANGLES;me=$b.disabled;var se=Jc.tileID,Ee=he.stride,we=a.create();a.ortho(we,0,a.EXTENT,-a.EXTENT,0,0,1);a.translate(we,we,[0,-a.EXTENT,0]);ad={u_matrix:we,u_image:1,u_dimension:[Ee,Ee],u_zoom:se.overscaledZ,u_maxzoom:ad,u_unpack:he.getUnpackVector()};ve.call(de,jc,Ld,Wc,wd,Ed,me,ad,$c.id,Kc.rasterBoundsBuffer,Kc.quadTriangleIndexBuffer,Kc.rasterBoundsSegments);Jc.needsHillshadePrepare=!1}}else"translucent"===S.renderPass&&
(Kc=S,Ld=Jc,Jc=V,$c=Ra,jc=ea[jc.overscaledZ],ad=nb,he=Kc.context,de=he.gl,Ed=Ld.fbo)&&(ve=Kc.useProgram("hillshade"),he.activeTexture.set(de.TEXTURE0),de.bindTexture(de.TEXTURE_2D,Ed.colorAttachment.get()),se=Kc,Ee=Ld,Ld=Jc,Ed=Ld.paint.get("hillshade-shadow-color"),Wc=Ld.paint.get("hillshade-highlight-color"),wd=Ld.paint.get("hillshade-accent-color"),me=Ld.paint.get("hillshade-illumination-direction")*(Math.PI/180),"viewport"===Ld.paint.get("hillshade-illumination-anchor")&&(me-=se.transform.angle),
we=!se.options.moving,se=se.transform.calculatePosMatrix(Ee.tileID.toUnwrapped(),we),we=Ee.tileID,Ee=Math.pow(2,we.canonical.z),we=we.canonical.y,Ee=[(new a.MercatorCoordinate(0,we/Ee)).toLngLat().lat,(new a.MercatorCoordinate(0,(we+1)/Ee)).toLngLat().lat],Ld={u_matrix:se,u_image:0,u_latrange:Ee,u_light:[Ld.paint.get("hillshade-exaggeration"),me],u_shadow:Ed,u_highlight:Wc,u_accent:wd},ve.draw(he,de.TRIANGLES,$c,jc,ad,$b.disabled,Ld,Jc.id,Kc.rasterBoundsBuffer,Kc.quadTriangleIndexBuffer,Kc.rasterBoundsSegments))}va.viewport.set([0,
0,S.width,S.height])}},raster:function(S,X,V,ea){if("translucent"===S.renderPass&&0!==V.paint.get("raster-opacity")&&ea.length){var va=S.context,Da=va.gl,Ra=X.getSource(),nb=S.useProgram("raster"),Nb=S.colorModeForRenderPass(),Xb=Ra instanceof Qc?[{},ea]:S.stencilConfigForOverlap(ea);ea=Xb[0];Xb=Xb[1];for(var jc=Xb[Xb.length-1].overscaledZ,Jc=!S.options.moving,Kc=0;Kc<Xb.length;Kc+=1){var $c=Xb[Kc],ad=S.depthModeForSublayer($c.overscaledZ-jc,1===V.paint.get("raster-opacity")?Rc.ReadWrite:Rc.ReadOnly,
Da.LESS),Wc=X.getTile($c),wd=S.transform.calculatePosMatrix($c.toUnwrapped(),Jc);Wc.registerFadeDuration(V.paint.get("raster-fade-duration"));var Ed=X.findLoadedParent($c,0);var Ld=Wc,he=Ed,de=X,me=S.transform,ve=V.paint.get("raster-fade-duration");if(0<ve){var se=a.browser.now();var Ee=(se-Ld.timeAdded)/ve;ve=he?(se-he.timeAdded)/ve:-1;de=de.getSource();me=me.coveringZoomLevel({tileSize:de.tileSize,roundZoom:de.roundZoom});me=(me=!he||Math.abs(he.tileID.overscaledZ-me)>Math.abs(Ld.tileID.overscaledZ-
me))&&Ld.refreshedUponExpiration?1:a.clamp(me?Ee:1-ve,0,1);Ld.refreshedUponExpiration&&1<=Ee&&(Ld.refreshedUponExpiration=!1);Ee=he?{opacity:1,mix:1-me}:{opacity:me,mix:0}}else Ee={opacity:1,mix:0};he=Ld=void 0;me="nearest"===V.paint.get("raster-resampling")?Da.NEAREST:Da.LINEAR;va.activeTexture.set(Da.TEXTURE0);Wc.texture.bind(me,Da.CLAMP_TO_EDGE,Da.LINEAR_MIPMAP_NEAREST);va.activeTexture.set(Da.TEXTURE1);Ed?(Ed.texture.bind(me,Da.CLAMP_TO_EDGE,Da.LINEAR_MIPMAP_NEAREST),Ld=Math.pow(2,Ed.tileID.overscaledZ-
Wc.tileID.overscaledZ),he=[Wc.tileID.canonical.x*Ld%1,Wc.tileID.canonical.y*Ld%1]):Wc.texture.bind(me,Da.CLAMP_TO_EDGE,Da.LINEAR_MIPMAP_NEAREST);Ed=V;Wc=he||[0,0];Ld=Ld||1;he=Ee.mix;Ee=Ee.opacity*Ed.paint.get("raster-opacity");me=Ed.paint.get("raster-brightness-min");ve=Ed.paint.get("raster-brightness-max");de=Ed.paint.get("raster-saturation");de=0<de?1-1/(1.001-de):-de;se=Ed.paint.get("raster-contrast");se=0<se?1/(1-se):1+se;var we=Ed.paint.get("raster-hue-rotate");we*=Math.PI/180;Ed=Math.sin(we);
we=Math.cos(we);wd={u_matrix:wd,u_tl_parent:Wc,u_scale_parent:Ld,u_buffer_scale:1,u_fade_t:he,u_opacity:Ee,u_image0:0,u_image1:1,u_brightness_low:me,u_brightness_high:ve,u_saturation_factor:de,u_contrast_factor:se,u_spin_weights:[(2*we+1)/3,(-Math.sqrt(3)*Ed-we+1)/3,(Math.sqrt(3)*Ed-we+1)/3]};Ra instanceof Qc?nb.draw(va,Da.TRIANGLES,ad,Gd.disabled,Nb,$b.disabled,wd,V.id,Ra.boundsBuffer,S.quadTriangleIndexBuffer,Ra.boundsSegments):nb.draw(va,Da.TRIANGLES,ad,ea[$c.overscaledZ],Nb,$b.disabled,wd,V.id,
S.rasterBoundsBuffer,S.quadTriangleIndexBuffer,S.rasterBoundsSegments)}}},background:function(S,X,V){X=V.paint.get("background-color");var ea=V.paint.get("background-opacity");if(0!==ea){var va=S.context,Da=va.gl,Ra=S.transform,nb=Ra.tileSize,Nb=V.paint.get("background-pattern");if(!S.isPatternMissing(Nb)){var Xb=!Nb&&1===X.a&&1===ea&&S.opaquePassEnabledForLayer()?"opaque":"translucent";if(S.renderPass===Xb){var jc=Gd.disabled;Xb=S.depthModeForSublayer(0,"opaque"===Xb?Rc.ReadWrite:Rc.ReadOnly);var Jc=
S.colorModeForRenderPass(),Kc=S.useProgram(Nb?"backgroundPattern":"background");Ra=Ra.coveringTiles({tileSize:nb});Nb&&(va.activeTexture.set(Da.TEXTURE0),S.imageManager.bind(S.context));for(var $c=V.getCrossfadeParameters(),ad=0;ad<Ra.length;ad+=1){var Wc=Ra[ad],wd=S.transform.calculatePosMatrix(Wc.toUnwrapped());if(Nb){var Ed=ea,Ld=a,he=Ld.extend,de=Nb;var me=$c;var ve=S;Wc={tileID:Wc,tileSize:nb};var se=ve.imageManager.getPattern(de.from.toString());de=ve.imageManager.getPattern(de.to.toString());
var Ee=ve.imageManager.getPixelSize(),we=Math.pow(2,Wc.tileID.overscaledZ),jf=Wc.tileSize*Math.pow(2,ve.transform.tileZoom)/we;we=jf*(Wc.tileID.canonical.x+Wc.tileID.wrap*we);jf*=Wc.tileID.canonical.y;me={u_image:0,u_pattern_tl_a:se.tl,u_pattern_br_a:se.br,u_pattern_tl_b:de.tl,u_pattern_br_b:de.br,u_texsize:[Ee.width,Ee.height],u_mix:me.t,u_pattern_size_a:se.displaySize,u_pattern_size_b:de.displaySize,u_scale_a:me.fromScale,u_scale_b:me.toScale,u_tile_units_to_pixels:1/ma(Wc,1,ve.transform.tileZoom),
u_pixel_coord_upper:[we>>16,jf>>16],u_pixel_coord_lower:[we&65535,jf&65535]};wd=he.call(Ld,me,{u_matrix:wd,u_opacity:Ed})}else wd={u_matrix:wd,u_opacity:ea,u_color:X};Kc.draw(va,Da.TRIANGLES,Xb,jc,Jc,$b.disabled,wd,V.id,S.tileExtentBuffer,S.quadTriangleIndexBuffer,S.tileExtentSegments)}}}}},debug:function(S,X,V){for(var ea=0;ea<V.length;ea++){var va=S,Da=X,Ra=V[ea],nb=va.context,Nb=nb.gl,Xb=Ra.posMatrix,jc=va.useProgram("debug"),Jc=Rc.disabled,Kc=Gd.disabled,$c=va.colorModeForRenderPass();nb.activeTexture.set(Nb.TEXTURE0);
va.emptyTexture.bind(Nb.LINEAR,Nb.CLAMP_TO_EDGE);jc.draw(nb,Nb.LINE_STRIP,Jc,Kc,$c,$b.disabled,Lb(Xb,a.Color.red),"$debug",va.debugBuffer,va.tileBorderIndexBuffer,va.debugSegments);$c=Da.getTileByID(Ra.key).latestRawTileData;$c=Math.floor(($c&&$c.byteLength||0)/1024);Da=Da.getTile(Ra).tileSize;Da=512/Math.min(Da,512)*(Ra.overscaledZ/va.transform.zoom)*.5;var ad=Ra.canonical.toString();Ra.overscaledZ!==Ra.canonical.z&&(ad+=" \x3d\x3e "+Ra.overscaledZ);Ra=va;$c=ad+" "+$c+"kb";Ra.initDebugOverlayCanvas();
ad=Ra.debugOverlayCanvas;var Wc=Ra.context.gl,wd=Ra.debugOverlayCanvas.getContext("2d");wd.clearRect(0,0,ad.width,ad.height);wd.shadowColor="white";wd.shadowBlur=2;wd.lineWidth=1.5;wd.strokeStyle="white";wd.textBaseline="top";wd.font="bold 36px Open Sans, sans-serif";wd.fillText($c,5,5);wd.strokeText($c,5,5);Ra.debugOverlayTexture.update(ad);Ra.debugOverlayTexture.bind(Wc.LINEAR,Wc.CLAMP_TO_EDGE);jc.draw(nb,Nb.TRIANGLES,Jc,Kc,Mb.alphaBlended,$b.disabled,Lb(Xb,a.Color.transparent,Da),"$debug",va.debugBuffer,
va.quadTriangleIndexBuffer,va.debugSegments)}},custom:function(S,X,V){X=S.context;V=V.implementation;if("offscreen"===S.renderPass){var ea=V.prerender;ea&&(S.setCustomLayerDefaults(),X.setColorMode(S.colorModeForRenderPass()),ea.call(V,X.gl,S.transform.customLayerMatrix()),X.setDirty(),S.setBaseState())}else"translucent"===S.renderPass&&(S.setCustomLayerDefaults(),X.setColorMode(S.colorModeForRenderPass()),X.setStencilMode(Gd.disabled),ea="3d"===V.renderingMode?new Rc(S.context.gl.LEQUAL,Rc.ReadWrite,
S.depthRangeFor3D):S.depthModeForSublayer(0,Rc.ReadOnly),X.setDepthMode(ea),V.render(X.gl,S.transform.customLayerMatrix()),X.setDirty(),S.setBaseState(),X.bindFramebuffer.set(null))}},tf=function(S,X){this.context=new Mc(S);this.transform=X;this._tileTextures={};this.setup();this.numSublayers=Hd.maxUnderzooming+Hd.maxOverzooming+1;this.depthEpsilon=1/Math.pow(2,16);this.crossTileSymbolIndex=new vg;this.gpuTimers={}};tf.prototype.resize=function(S,X){this.width=S*a.browser.devicePixelRatio;this.height=
X*a.browser.devicePixelRatio;this.context.viewport.set([0,0,this.width,this.height]);if(this.style)for(S=0,X=this.style._order;S<X.length;S+=1)this.style._layers[X[S]].resize()};tf.prototype.setup=function(){var S=this.context,X=new a.StructArrayLayout2i4;X.emplaceBack(0,0);X.emplaceBack(a.EXTENT,0);X.emplaceBack(0,a.EXTENT);X.emplaceBack(a.EXTENT,a.EXTENT);this.tileExtentBuffer=S.createVertexBuffer(X,jh.members);this.tileExtentSegments=a.SegmentVector.simpleSegment(0,0,4,2);X=new a.StructArrayLayout2i4;
X.emplaceBack(0,0);X.emplaceBack(a.EXTENT,0);X.emplaceBack(0,a.EXTENT);X.emplaceBack(a.EXTENT,a.EXTENT);this.debugBuffer=S.createVertexBuffer(X,jh.members);this.debugSegments=a.SegmentVector.simpleSegment(0,0,4,5);X=new a.StructArrayLayout4i8;X.emplaceBack(0,0,0,0);X.emplaceBack(a.EXTENT,0,a.EXTENT,0);X.emplaceBack(0,a.EXTENT,0,a.EXTENT);X.emplaceBack(a.EXTENT,a.EXTENT,a.EXTENT,a.EXTENT);this.rasterBoundsBuffer=S.createVertexBuffer(X,Ec.members);this.rasterBoundsSegments=a.SegmentVector.simpleSegment(0,
0,4,2);X=new a.StructArrayLayout2i4;X.emplaceBack(0,0);X.emplaceBack(1,0);X.emplaceBack(0,1);X.emplaceBack(1,1);this.viewportBuffer=S.createVertexBuffer(X,jh.members);this.viewportSegments=a.SegmentVector.simpleSegment(0,0,4,2);X=new a.StructArrayLayout1ui2;X.emplaceBack(0);X.emplaceBack(1);X.emplaceBack(3);X.emplaceBack(2);X.emplaceBack(0);this.tileBorderIndexBuffer=S.createIndexBuffer(X);X=new a.StructArrayLayout3ui6;X.emplaceBack(0,1,2);X.emplaceBack(2,1,3);this.quadTriangleIndexBuffer=S.createIndexBuffer(X);
this.emptyTexture=new a.Texture(S,{width:1,height:1,data:new Uint8Array([0,0,0,0])},S.gl.RGBA);S=this.context.gl;this.stencilClearMode=new Gd({func:S.ALWAYS,mask:0},0,255,S.ZERO,S.ZERO,S.ZERO)};tf.prototype.clearStencil=function(){var S=this.context,X=S.gl;this.nextStencilID=1;this.currentStencilSource=void 0;var V=a.create();a.ortho(V,0,this.width,this.height,0,0,1);a.scale(V,V,[X.drawingBufferWidth,X.drawingBufferHeight,0]);this.useProgram("clippingMask").draw(S,X.TRIANGLES,Rc.disabled,this.stencilClearMode,
Mb.disabled,$b.disabled,{u_matrix:V},"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)};tf.prototype._renderTileClippingMasks=function(S,X){if(this.currentStencilSource!==S.source&&S.isTileClipped()&&X&&X.length){this.currentStencilSource=S.source;S=this.context;var V=S.gl;256<this.nextStencilID+X.length&&this.clearStencil();S.setColorMode(Mb.disabled);S.setDepthMode(Rc.disabled);var ea=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var va=0;va<
X.length;va+=1){var Da=X[va],Ra=this._tileClippingMaskIDs[Da.key]=this.nextStencilID++;ea.draw(S,V.TRIANGLES,Rc.disabled,new Gd({func:V.ALWAYS,mask:0},Ra,255,V.KEEP,V.KEEP,V.REPLACE),Mb.disabled,$b.disabled,{u_matrix:Da.posMatrix},"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}};tf.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0;256<this.nextStencilID+1&&this.clearStencil();var S=this.nextStencilID++,X=this.context.gl;return new Gd({func:X.NOTEQUAL,
mask:255},S,255,X.KEEP,X.KEEP,X.REPLACE)};tf.prototype.stencilModeForClipping=function(S){var X=this.context.gl;return new Gd({func:X.EQUAL,mask:255},this._tileClippingMaskIDs[S.key],0,X.KEEP,X.KEEP,X.REPLACE)};tf.prototype.stencilConfigForOverlap=function(S){var X=this.context.gl;S=S.sort(function(Ra,nb){return nb.overscaledZ-Ra.overscaledZ});var V=S[S.length-1].overscaledZ,ea=S[0].overscaledZ-V+1;if(1<ea){this.currentStencilSource=void 0;256<this.nextStencilID+ea&&this.clearStencil();var va={};
for(var Da=0;Da<ea;Da++)va[Da+V]=new Gd({func:X.GEQUAL,mask:255},Da+this.nextStencilID,255,X.KEEP,X.KEEP,X.REPLACE);this.nextStencilID+=ea;return[va,S]}return[(va={},va[V]=Gd.disabled,va),S]};tf.prototype.colorModeForRenderPass=function(){var S=this.context.gl;return this._showOverdrawInspector?new Mb([S.CONSTANT_COLOR,S.ONE],new a.Color(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?Mb.unblended:Mb.alphaBlended};tf.prototype.depthModeForSublayer=function(S,X,V){if(!this.opaquePassEnabledForLayer())return Rc.disabled;
S=1-((1+this.currentLayer)*this.numSublayers+S)*this.depthEpsilon;return new Rc(V||this.context.gl.LEQUAL,X,[S,S])};tf.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff};tf.prototype.render=function(S,X){var V=this;this.style=S;this.options=X;this.lineAtlas=S.lineAtlas;this.imageManager=S.imageManager;this.glyphManager=S.glyphManager;this.symbolFadeChange=S.placement.symbolFadeChange(a.browser.now());this.imageManager.beginFrame();var ea=this.style._order,
va=this.style.sourceCaches;for(Ra in va){var Da=va[Ra];Da.used&&Da.prepare(this.context)}var Ra={};Da={};var nb={},Nb;for(Nb in va){var Xb=va[Nb];Ra[Nb]=Xb.getVisibleCoordinates();Da[Nb]=Ra[Nb].slice().reverse();nb[Nb]=Xb.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=Infinity;for(Nb=0;Nb<ea.length;Nb++)if(this.style._layers[ea[Nb]].is3D()){this.opaquePassCutoff=Nb;break}this.renderPass="offscreen";for(Nb=0;Nb<ea.length;Nb+=1)if(Xb=this.style._layers[ea[Nb]],Xb.hasOffscreenPass()&&!Xb.isHidden(this.transform.zoom)){var jc=
Da[Xb.source];("custom"===Xb.type||jc.length)&&this.renderLayer(this,va[Xb.source],Xb,jc)}this.context.bindFramebuffer.set(null);this.context.clear({color:X.showOverdrawInspector?a.Color.black:a.Color.transparent,depth:1});this.clearStencil();this._showOverdrawInspector=X.showOverdrawInspector;this.depthRangeFor3D=[0,1-(S._order.length+2)*this.numSublayers*this.depthEpsilon];this.renderPass="opaque";for(this.currentLayer=ea.length-1;0<=this.currentLayer;this.currentLayer--)S=this.style._layers[ea[this.currentLayer]],
X=va[S.source],Nb=Ra[S.source],this._renderTileClippingMasks(S,Nb),this.renderLayer(this,X,S,Nb);this.renderPass="translucent";for(this.currentLayer=0;this.currentLayer<ea.length;this.currentLayer++)S=this.style._layers[ea[this.currentLayer]],X=va[S.source],Nb=("symbol"===S.type?nb:Da)[S.source],this._renderTileClippingMasks(S,Ra[S.source]),this.renderLayer(this,X,S,Nb);if(this.options.showTileBoundaries){var Jc,Kc;a.values(this.style._layers).forEach(function($c){$c.source&&!$c.isHidden(V.transform.zoom)&&
($c.source!==(Kc&&Kc.id)&&(Kc=V.style.sourceCaches[$c.source]),!Jc||Jc.getSource().maxzoom<Kc.getSource().maxzoom)&&(Jc=Kc)});Jc&&Mf.debug(this,Jc,Jc.getVisibleCoordinates())}this.options.showPadding&&$a(this);this.context.setDefault()};tf.prototype.renderLayer=function(S,X,V,ea){V.isHidden(this.transform.zoom)||"background"!==V.type&&"custom"!==V.type&&!ea.length||(this.id=V.id,this.gpuTimingStart(V),Mf[V.type](S,X,V,ea,this.style.placement.variableOffsets),this.gpuTimingEnd())};tf.prototype.gpuTimingStart=
function(S){if(this.options.gpuTiming){var X=this.context.extTimerQuery,V=this.gpuTimers[S.id];V||(V=this.gpuTimers[S.id]={calls:0,cpuTime:0,query:X.createQueryEXT()});V.calls++;X.beginQueryEXT(X.TIME_ELAPSED_EXT,V.query)}};tf.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var S=this.context.extTimerQuery;S.endQueryEXT(S.TIME_ELAPSED_EXT)}};tf.prototype.collectGpuTimers=function(){var S=this.gpuTimers;this.gpuTimers={};return S};tf.prototype.queryGpuTimers=function(S){var X={},V;for(V in S){var ea=
S[V],va=this.context.extTimerQuery,Da=va.getQueryObjectEXT(ea.query,va.QUERY_RESULT_EXT)/1E6;va.deleteQueryEXT(ea.query);X[V]=Da}return X};tf.prototype.translatePosMatrix=function(S,X,V,ea,va){if(!V[0]&&!V[1])return S;var Da=va?"map"===ea?this.transform.angle:0:"viewport"===ea?-this.transform.angle:0;Da&&(ea=Math.sin(Da),Da=Math.cos(Da),V=[V[0]*Da-V[1]*ea,V[0]*ea+V[1]*Da]);X=[va?V[0]:ma(X,V[0],this.transform.zoom),va?V[1]:ma(X,V[1],this.transform.zoom),0];V=new Float32Array(16);a.translate(V,S,X);
return V};tf.prototype.saveTileTexture=function(S){var X=this._tileTextures[S.size[0]];X?X.push(S):this._tileTextures[S.size[0]]=[S]};tf.prototype.getTileTexture=function(S){return(S=this._tileTextures[S])&&0<S.length?S.pop():null};tf.prototype.isPatternMissing=function(S){if(!S)return!1;if(!S.from||!S.to)return!0;var X=this.imageManager.getPattern(S.from.toString());S=this.imageManager.getPattern(S.to.toString());return!X||!S};tf.prototype.useProgram=function(S,X){this.cache=this.cache||{};var V=
""+S+(X?X.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");this.cache[V]||(this.cache[V]=new lb(this.context,Sa[S],X,jd[S],this._showOverdrawInspector));return this.cache[V]};tf.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO();this.context.cullFace.setDefault();this.context.activeTexture.setDefault();this.context.pixelStoreUnpack.setDefault();this.context.pixelStoreUnpackPremultiplyAlpha.setDefault();this.context.pixelStoreUnpackFlipY.setDefault()};tf.prototype.setBaseState=
function(){var S=this.context.gl;this.context.cullFace.set(!1);this.context.viewport.set([0,0,this.width,this.height]);this.context.blendEquation.set(S.FUNC_ADD)};tf.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=a.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))};tf.prototype.destroy=function(){this.emptyTexture.destroy();
this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var $g=function(S,X){this.points=S;this.planes=X};$g.fromInvProjectionMatrix=function(S,X,V){var ea=Math.pow(2,V),va=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(Da){return a.transformMat4([],Da,S)}).map(function(Da){return a.scale$1([],Da,1/Da[3]/X*ea)});V=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(Da){var Ra=a.sub([],va[Da[0]],va[Da[1]]),nb=a.sub([],va[Da[2]],
va[Da[1]]);Ra=a.normalize([],a.cross([],Ra,nb));Da=-a.dot(Ra,va[Da[1]]);return Ra.concat(Da)});return new $g(va,V)};var Kg=function(S,X){this.min=S;this.max=X;this.center=a.scale$2([],a.add([],this.min,this.max),.5)};Kg.prototype.quadrant=function(S){S=[0===S%2,2>S];for(var X=a.clone$2(this.min),V=a.clone$2(this.max),ea=0;ea<S.length;ea++)X[ea]=S[ea]?this.min[ea]:this.center[ea],V[ea]=S[ea]?this.center[ea]:this.max[ea];V[2]=this.max[2];return new Kg(X,V)};Kg.prototype.distanceX=function(S){return Math.max(Math.min(this.max[0],
S[0]),this.min[0])-S[0]};Kg.prototype.distanceY=function(S){return Math.max(Math.min(this.max[1],S[1]),this.min[1])-S[1]};Kg.prototype.intersects=function(S){for(var X=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],V=!0,ea=0;ea<S.planes.length;ea++){for(var va=S.planes[ea],Da=0,Ra=0;Ra<X.length;Ra++)Da+=0<=a.dot$1(va,X[Ra]);if(0===Da)return 0;Da!==X.length&&(V=!1)}if(V)return 2;for(X=0;3>X;X++){V=Number.MAX_VALUE;ea=-Number.MAX_VALUE;
for(va=0;va<S.points.length;va++)Da=S.points[va][X]-this.min[X],V=Math.min(V,Da),ea=Math.max(ea,Da);if(0>ea||V>this.max[X]-this.min[X])return 0}return 1};var Ug=function(S,X,V,ea){void 0===S&&(S=0);void 0===X&&(X=0);void 0===V&&(V=0);void 0===ea&&(ea=0);if(isNaN(S)||0>S||isNaN(X)||0>X||isNaN(V)||0>V||isNaN(ea)||0>ea)throw Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=S;this.bottom=X;this.left=V;this.right=ea};Ug.prototype.interpolate=function(S,X,
V){null!=X.top&&null!=S.top&&(this.top=a.number(S.top,X.top,V));null!=X.bottom&&null!=S.bottom&&(this.bottom=a.number(S.bottom,X.bottom,V));null!=X.left&&null!=S.left&&(this.left=a.number(S.left,X.left,V));null!=X.right&&null!=S.right&&(this.right=a.number(S.right,X.right,V));return this};Ug.prototype.getCenter=function(S,X){S=a.clamp((this.left+S-this.right)/2,0,S);X=a.clamp((this.top+X-this.bottom)/2,0,X);return new a.Point(S,X)};Ug.prototype.equals=function(S){return this.top===S.top&&this.bottom===
S.bottom&&this.left===S.left&&this.right===S.right};Ug.prototype.clone=function(){return new Ug(this.top,this.bottom,this.left,this.right)};Ug.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Ff=function(S,X,V,ea,va){this.tileSize=512;this.maxValidLatitude=85.051129;this._renderWorldCopies=void 0===va?!0:va;this._minZoom=S||0;this._maxZoom=X||22;this._minPitch=void 0===V||null===V?0:V;this._maxPitch=void 0===ea||null===ea?60:ea;this.setMaxBounds();
this.height=this.width=0;this._center=new a.LngLat(0,0);this.angle=this.zoom=0;this._fov=.6435011087932844;this._pitch=0;this._unmodified=!0;this._edgeInsets=new Ug;this._posMatrixCache={};this._alignedPosMatrixCache={}},Lf={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},
zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Ff.prototype.clone=function(){var S=new Ff(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);S.tileSize=this.tileSize;S.latRange=this.latRange;S.width=this.width;S.height=this.height;S._center=this._center;S.zoom=this.zoom;S.angle=this.angle;S._fov=this._fov;S._pitch=this._pitch;S._unmodified=this._unmodified;
S._edgeInsets=this._edgeInsets.clone();S._calcMatrices();return S};Lf.minZoom.get=function(){return this._minZoom};Lf.minZoom.set=function(S){this._minZoom!==S&&(this._minZoom=S,this.zoom=Math.max(this.zoom,S))};Lf.maxZoom.get=function(){return this._maxZoom};Lf.maxZoom.set=function(S){this._maxZoom!==S&&(this._maxZoom=S,this.zoom=Math.min(this.zoom,S))};Lf.minPitch.get=function(){return this._minPitch};Lf.minPitch.set=function(S){this._minPitch!==S&&(this._minPitch=S,this.pitch=Math.max(this.pitch,
S))};Lf.maxPitch.get=function(){return this._maxPitch};Lf.maxPitch.set=function(S){this._maxPitch!==S&&(this._maxPitch=S,this.pitch=Math.min(this.pitch,S))};Lf.renderWorldCopies.get=function(){return this._renderWorldCopies};Lf.renderWorldCopies.set=function(S){void 0===S?S=!0:null===S&&(S=!1);this._renderWorldCopies=S};Lf.worldSize.get=function(){return this.tileSize*this.scale};Lf.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))};Lf.size.get=function(){return new a.Point(this.width,
this.height)};Lf.bearing.get=function(){return-this.angle/Math.PI*180};Lf.bearing.set=function(S){S=-a.wrap(S,-180,180)*Math.PI/180;this.angle!==S&&(this._unmodified=!1,this.angle=S,this._calcMatrices(),this.rotationMatrix=a.create$2(),a.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))};Lf.pitch.get=function(){return this._pitch/Math.PI*180};Lf.pitch.set=function(S){S=a.clamp(S,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==S&&(this._unmodified=!1,this._pitch=S,this._calcMatrices())};
Lf.fov.get=function(){return this._fov/Math.PI*180};Lf.fov.set=function(S){S=Math.max(.01,Math.min(60,S));this._fov!==S&&(this._unmodified=!1,this._fov=S/180*Math.PI,this._calcMatrices())};Lf.zoom.get=function(){return this._zoom};Lf.zoom.set=function(S){S=Math.min(Math.max(S,this.minZoom),this.maxZoom);this._zoom!==S&&(this._unmodified=!1,this._zoom=S,this.scale=this.zoomScale(S),this.tileZoom=Math.floor(S),this.zoomFraction=S-this.tileZoom,this._constrain(),this._calcMatrices())};Lf.center.get=
function(){return this._center};Lf.center.set=function(S){if(S.lat!==this._center.lat||S.lng!==this._center.lng)this._unmodified=!1,this._center=S,this._constrain(),this._calcMatrices()};Lf.padding.get=function(){return this._edgeInsets.toJSON()};Lf.padding.set=function(S){this._edgeInsets.equals(S)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,S,1),this._calcMatrices())};Lf.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)};Ff.prototype.isPaddingEqual=
function(S){return this._edgeInsets.equals(S)};Ff.prototype.interpolatePadding=function(S,X,V){this._unmodified=!1;this._edgeInsets.interpolate(S,X,V);this._constrain();this._calcMatrices()};Ff.prototype.coveringZoomLevel=function(S){S=(S.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/S.tileSize));return Math.max(0,S)};Ff.prototype.getVisibleUnwrappedCoordinates=function(S){var X=[new a.UnwrappedTileID(0,S)];if(this._renderWorldCopies){var V=this.pointCoordinate(new a.Point(0,
0)),ea=this.pointCoordinate(new a.Point(this.width,0)),va=this.pointCoordinate(new a.Point(this.width,this.height)),Da=this.pointCoordinate(new a.Point(0,this.height)),Ra=Math.floor(Math.max(V.x,ea.x,va.x,Da.x));for(V=Math.floor(Math.min(V.x,ea.x,va.x,Da.x))-1;V<=Ra+1;V++)0!==V&&X.push(new a.UnwrappedTileID(V,S))}return X};Ff.prototype.coveringTiles=function(S){var X=this.coveringZoomLevel(S),V=X;if(void 0!==S.minzoom&&X<S.minzoom)return[];void 0!==S.maxzoom&&X>S.maxzoom&&(X=S.maxzoom);var ea=a.MercatorCoordinate.fromLngLat(this.center),
va=Math.pow(2,X);ea=[va*ea.x,va*ea.y,0];var Da=$g.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,X),Ra=S.minzoom||0;60>=this.pitch&&.1>this._edgeInsets.top&&(Ra=X);var nb=function(Wc){return{aabb:new Kg([Wc*va,0,0],[(Wc+1)*va,va,0]),zoom:0,x:0,y:0,wrap:Wc,fullyVisible:!1}},Nb=[],Xb=[],jc=X;S=S.reparseOverscaled?V:X;if(this._renderWorldCopies)for(X=1;3>=X;X++)Nb.push(nb(-X)),Nb.push(nb(X));for(Nb.push(nb(0));0<Nb.length;){nb=Nb.pop();X=nb.x;V=nb.y;var Jc=nb.fullyVisible;if(!Jc){Jc=nb.aabb.intersects(Da);
if(0===Jc)continue;Jc=2===Jc}var Kc=nb.aabb.distanceX(ea),$c=nb.aabb.distanceY(ea);Kc=Math.max(Math.abs(Kc),Math.abs($c));$c=3+(1<<jc-nb.zoom)-2;if(nb.zoom===jc||Kc>$c&&nb.zoom>=Ra)Xb.push({tileID:new a.OverscaledTileID(nb.zoom===jc?S:nb.zoom,nb.wrap,nb.zoom,X,V),distanceSq:a.sqrLen([ea[0]-.5-X,ea[1]-.5-V])});else for(Kc=0;4>Kc;Kc++){$c=(X<<1)+Kc%2;var ad=(V<<1)+(Kc>>1);Nb.push({aabb:nb.aabb.quadrant(Kc),zoom:nb.zoom+1,x:$c,y:ad,wrap:nb.wrap,fullyVisible:Jc})}}return Xb.sort(function(Wc,wd){return Wc.distanceSq-
wd.distanceSq}).map(function(Wc){return Wc.tileID})};Ff.prototype.resize=function(S,X){this.width=S;this.height=X;this.pixelsToGLUnits=[2/S,-2/X];this._constrain();this._calcMatrices()};Lf.unmodified.get=function(){return this._unmodified};Ff.prototype.zoomScale=function(S){return Math.pow(2,S)};Ff.prototype.scaleZoom=function(S){return Math.log(S)/Math.LN2};Ff.prototype.project=function(S){var X=a.clamp(S.lat,-this.maxValidLatitude,this.maxValidLatitude);return new a.Point(a.mercatorXfromLng(S.lng)*
this.worldSize,a.mercatorYfromLat(X)*this.worldSize)};Ff.prototype.unproject=function(S){return(new a.MercatorCoordinate(S.x/this.worldSize,S.y/this.worldSize)).toLngLat()};Lf.point.get=function(){return this.project(this.center)};Ff.prototype.setLocationAtPoint=function(S,X){X=this.pointCoordinate(X);var V=this.pointCoordinate(this.centerPoint);S=this.locationCoordinate(S);S=new a.MercatorCoordinate(S.x-(X.x-V.x),S.y-(X.y-V.y));this.center=this.coordinateLocation(S);this._renderWorldCopies&&(this.center=
this.center.wrap())};Ff.prototype.locationPoint=function(S){return this.coordinatePoint(this.locationCoordinate(S))};Ff.prototype.pointLocation=function(S){return this.coordinateLocation(this.pointCoordinate(S))};Ff.prototype.locationCoordinate=function(S){return a.MercatorCoordinate.fromLngLat(S)};Ff.prototype.coordinateLocation=function(S){return S.toLngLat()};Ff.prototype.pointCoordinate=function(S){var X=[S.x,S.y,0,1];S=[S.x,S.y,1,1];a.transformMat4(X,X,this.pixelMatrixInverse);a.transformMat4(S,
S,this.pixelMatrixInverse);var V=X[3],ea=S[3],va=X[1]/V,Da=S[1]/ea,Ra=X[2]/V,nb=S[2]/ea;Ra=Ra===nb?0:(0-Ra)/(nb-Ra);return new a.MercatorCoordinate(a.number(X[0]/V,S[0]/ea,Ra)/this.worldSize,a.number(va,Da,Ra)/this.worldSize)};Ff.prototype.coordinatePoint=function(S){S=[S.x*this.worldSize,S.y*this.worldSize,0,1];a.transformMat4(S,S,this.pixelMatrix);return new a.Point(S[0]/S[3],S[1]/S[3])};Ff.prototype.getBounds=function(){return(new a.LngLatBounds).extend(this.pointLocation(new a.Point(0,0))).extend(this.pointLocation(new a.Point(this.width,
0))).extend(this.pointLocation(new a.Point(this.width,this.height))).extend(this.pointLocation(new a.Point(0,this.height)))};Ff.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new a.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null};Ff.prototype.setMaxBounds=function(S){S?(this.lngRange=[S.getWest(),S.getEast()],this.latRange=[S.getSouth(),S.getNorth()],this._constrain()):(this.lngRange=
null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])};Ff.prototype.calculatePosMatrix=function(S,X){void 0===X&&(X=!1);var V=S.key,ea=X?this._alignedPosMatrixCache:this._posMatrixCache;if(ea[V])return ea[V];var va=S.canonical,Da=this.worldSize/this.zoomScale(va.z);S=va.x+Math.pow(2,va.z)*S.wrap;var Ra=a.identity(new Float64Array(16));a.translate(Ra,Ra,[S*Da,va.y*Da,0]);a.scale(Ra,Ra,[Da/a.EXTENT,Da/a.EXTENT,1]);a.multiply(Ra,X?this.alignedProjMatrix:this.projMatrix,Ra);ea[V]=new Float32Array(Ra);
return ea[V]};Ff.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()};Ff.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var S=-90,X=90,V=-180,ea=180,va,Da,Ra=this.size,nb=this._unmodified;if(this.latRange){var Nb=this.latRange;S=a.mercatorYfromLat(Nb[1])*this.worldSize;X=a.mercatorYfromLat(Nb[0])*this.worldSize;var Xb=X-S<Ra.y?Ra.y/(X-S):0}if(this.lngRange){ea=this.lngRange;V=a.mercatorXfromLng(ea[0])*this.worldSize;
ea=a.mercatorXfromLng(ea[1])*this.worldSize;var jc=ea-V<Ra.x?Ra.x/(ea-V):0}Nb=this.point;var Jc=Math.max(jc||0,Xb||0);if(Jc)this.center=this.unproject(new a.Point(jc?(ea+V)/2:Nb.x,Xb?(X+S)/2:Nb.y)),this.zoom+=this.scaleZoom(Jc);else if(this.latRange&&(Xb=Nb.y,jc=Ra.y/2,Xb-jc<S&&(Da=S+jc),Xb+jc>X&&(Da=X-jc)),this.lngRange&&(S=Nb.x,Ra=Ra.x/2,S-Ra<V&&(va=V+Ra),S+Ra>ea&&(va=ea-Ra)),void 0!==va||void 0!==Da)this.center=this.unproject(new a.Point(void 0!==va?va:Nb.x,void 0!==Da?Da:Nb.y));this._unmodified=
nb;this._constraining=!1}};Ff.prototype._calcMatrices=function(){if(this.height){var S=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var X=this._fov*(.5+S.y/this.height),V=Math.sin(X)*this.cameraToCenterDistance/Math.sin(a.clamp(Math.PI-(Math.PI/2+this._pitch)-X,.01,Math.PI-.01)),ea=this.point;X=ea.x;ea=ea.y;var va=1.01*(Math.cos(Math.PI/2-this._pitch)*V+this.cameraToCenterDistance),Da=this.height/50;V=new Float64Array(16);a.perspective(V,this._fov,this.width/
this.height,Da,va);V[8]=2*-S.x/this.width;V[9]=2*S.y/this.height;a.scale(V,V,[1,-1,1]);a.translate(V,V,[0,0,-this.cameraToCenterDistance]);a.rotateX(V,V,this._pitch);a.rotateZ(V,V,this.angle);a.translate(V,V,[-X,-ea,0]);this.mercatorMatrix=a.scale([],V,[this.worldSize,this.worldSize,this.worldSize]);a.scale(V,V,[1,1,a.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]);this.projMatrix=V;this.invProjMatrix=a.invert([],this.projMatrix);S=this.width%2/2;va=this.height%2/2;Da=Math.cos(this.angle);
var Ra=Math.sin(this.angle);X=X-Math.round(X)+Da*S+Ra*va;ea=ea-Math.round(ea)+Da*va+Ra*S;V=new Float64Array(V);a.translate(V,V,[.5<X?X-1:X,.5<ea?ea-1:ea,0]);this.alignedProjMatrix=V;V=a.create();a.scale(V,V,[this.width/2,-this.height/2,1]);a.translate(V,V,[1,-1,0]);this.labelPlaneMatrix=V;V=a.create();a.scale(V,V,[1,-1,1]);a.translate(V,V,[-1,-1,0]);a.scale(V,V,[2/this.width,2/this.height,1]);this.glCoordMatrix=V;this.pixelMatrix=a.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix);
V=a.invert(new Float64Array(16),this.pixelMatrix);if(!V)throw Error("failed to invert matrix");this.pixelMatrixInverse=V;this._posMatrixCache={};this._alignedPosMatrixCache={}}};Ff.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var S=this.pointCoordinate(new a.Point(0,0));S=[S.x*this.worldSize,S.y*this.worldSize,0,1];return a.transformMat4(S,S,this.pixelMatrix)[3]/this.cameraToCenterDistance};Ff.prototype.getCameraPoint=function(){return this.centerPoint.add(new a.Point(0,
Math.tan(this._pitch)*(this.cameraToCenterDistance||1)))};Ff.prototype.getCameraQueryGeometry=function(S){var X=this.getCameraPoint();if(1===S.length)return[S[0],X];var V=X.x,ea=X.y,va=X.x;X=X.y;for(var Da=0;Da<S.length;Da+=1){var Ra=S[Da];V=Math.min(V,Ra.x);ea=Math.min(ea,Ra.y);va=Math.max(va,Ra.x);X=Math.max(X,Ra.y)}return[new a.Point(V,ea),new a.Point(va,ea),new a.Point(va,X),new a.Point(V,X),new a.Point(V,ea)]};Object.defineProperties(Ff.prototype,Lf);var oh=function(S){this._hashName=S&&encodeURIComponent(S);
a.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this);this._updateHash=sb(this._updateHashUnthrottled.bind(this),300)};oh.prototype.addTo=function(S){this._map=S;a.window.addEventListener("hashchange",this._onHashChange,!1);this._map.on("moveend",this._updateHash);return this};oh.prototype.remove=function(){a.window.removeEventListener("hashchange",this._onHashChange,!1);this._map.off("moveend",this._updateHash);clearTimeout(this._updateHash());delete this._map;return this};oh.prototype.getHashString=
function(S){var X=this._map.getCenter(),V=Math.round(100*this._map.getZoom())/100,ea=Math.pow(10,Math.ceil((V*Math.LN2+Math.log(512/360/.5))/Math.LN10)),va=Math.round(X.lng*ea)/ea;X=Math.round(X.lat*ea)/ea;ea=this._map.getBearing();var Da=this._map.getPitch(),Ra="";Ra=S?Ra+("/"+va+"/"+X+"/"+V):Ra+(V+"/"+X+"/"+va);if(ea||Da)Ra+="/"+Math.round(10*ea)/10;Da&&(Ra+="/"+Math.round(Da));if(this._hashName){var nb=this._hashName,Nb=!1;S=a.window.location.hash.slice(1).split("\x26").map(function(Xb){var jc=
Xb.split("\x3d")[0];return jc===nb?(Nb=!0,jc+"\x3d"+Ra):Xb}).filter(function(Xb){return Xb});Nb||S.push(nb+"\x3d"+Ra);return"#"+S.join("\x26")}return"#"+Ra};oh.prototype._getCurrentHash=function(){var S=this,X=a.window.location.hash.replace("#","");if(this._hashName){var V;X.split("\x26").map(function(ea){return ea.split("\x3d")}).forEach(function(ea){ea[0]===S._hashName&&(V=ea)});return(V?V[1]||"":"").split("/")}return X.split("/")};oh.prototype._onHashChange=function(){var S=this._getCurrentHash();
if(3<=S.length&&!S.some(function(V){return isNaN(V)})){var X=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(S[3]||0):this._map.getBearing();this._map.jumpTo({center:[+S[2],+S[1]],zoom:+S[0],bearing:X,pitch:+(S[4]||0)});return!0}return!1};oh.prototype._updateHashUnthrottled=function(){var S=this.getHashString();try{a.window.history.replaceState(a.window.history.state,"",S)}catch(X){}};var Wh={linearity:.3,easing:a.bezier(0,0,.3,1)},Hh=a.extend({deceleration:2500,maxSpeed:1400},
Wh),vi=a.extend({deceleration:20,maxSpeed:1400},Wh),wi=a.extend({deceleration:1E3,maxSpeed:360},Wh),Oh=a.extend({deceleration:1E3,maxSpeed:90},Wh),Ya=function(S){this._map=S;this.clear()};Ya.prototype.clear=function(){this._inertiaBuffer=[]};Ya.prototype.record=function(S){this._drainInertiaBuffer();this._inertiaBuffer.push({time:a.browser.now(),settings:S})};Ya.prototype._drainInertiaBuffer=function(){for(var S=this._inertiaBuffer,X=a.browser.now();0<S.length&&160<X-S[0].time;)S.shift()};Ya.prototype._onMoveEnd=
function(S){this._drainInertiaBuffer();if(!(2>this._inertiaBuffer.length)){for(var X=0,V=0,ea=0,va=new a.Point(0,0),Da=void 0,Ra=void 0,nb=0,Nb=this._inertiaBuffer;nb<Nb.length;nb+=1){var Xb=Nb[nb].settings;X+=Xb.zoomDelta||0;V+=Xb.bearingDelta||0;ea+=Xb.pitchDelta||0;Xb.panDelta&&va._add(Xb.panDelta);Xb.around&&(Ra=Xb.around);Xb.pinchAround&&(Da=Xb.pinchAround)}Nb=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time;nb={};va.mag()&&(S=vb(va.mag(),Nb,a.extend({},Hh,S||
{})),nb.offset=va.mult(S.amount/va.mag()),nb.center=this._map.transform.center,jb(nb,S));X&&(X=vb(X,Nb,vi),nb.zoom=this._map.transform.zoom+X.amount,jb(nb,X));V&&(V=vb(V,Nb,wi),nb.bearing=this._map.transform.bearing+a.clamp(V.amount,-179,179),jb(nb,V));ea&&(ea=vb(ea,Nb,Oh),nb.pitch=this._map.transform.pitch+ea.amount,jb(nb,ea));if(nb.zoom||nb.bearing)Da=void 0===Da?Ra:Da,nb.around=Da?this._map.unproject(Da):this._map.getCenter();this.clear();return a.extend(nb,{noMoveStart:!0})}};var Qa=function(S){function X(ea,
va,Da,Ra){void 0===Ra&&(Ra={});var nb=cb.mousePos(va.getCanvasContainer(),Da),Nb=va.unproject(nb);S.call(this,ea,a.extend({point:nb,lngLat:Nb,originalEvent:Da},Ra));this._defaultPrevented=!1;this.target=va}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;var V={defaultPrevented:{configurable:!0}};X.prototype.preventDefault=function(){this._defaultPrevented=!0};V.defaultPrevented.get=function(){return this._defaultPrevented};Object.defineProperties(X.prototype,
V);return X}(a.Event),Ob=function(S){function X(ea,va,Da){var Ra="touchend"===ea?Da.changedTouches:Da.touches;Ra=cb.touchPos(va.getCanvasContainer(),Ra);var nb=Ra.map(function(jc){return va.unproject(jc)}),Nb=Ra.reduce(function(jc,Jc,Kc,$c){return jc.add(Jc.div($c.length))},new a.Point(0,0)),Xb=va.unproject(Nb);S.call(this,ea,{points:Ra,point:Nb,lngLats:nb,lngLat:Xb,originalEvent:Da});this._defaultPrevented=!1}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;
var V={defaultPrevented:{configurable:!0}};X.prototype.preventDefault=function(){this._defaultPrevented=!0};V.defaultPrevented.get=function(){return this._defaultPrevented};Object.defineProperties(X.prototype,V);return X}(a.Event),bc=function(S){function X(ea,va,Da){S.call(this,ea,{originalEvent:Da});this._defaultPrevented=!1}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;var V={defaultPrevented:{configurable:!0}};X.prototype.preventDefault=function(){this._defaultPrevented=
!0};V.defaultPrevented.get=function(){return this._defaultPrevented};Object.defineProperties(X.prototype,V);return X}(a.Event),gc=function(S,X){this._map=S;this._clickTolerance=X.clickTolerance};gc.prototype.reset=function(){delete this._mousedownPos};gc.prototype.wheel=function(S){return this._firePreventable(new bc(S.type,this._map,S))};gc.prototype.mousedown=function(S,X){this._mousedownPos=X;return this._firePreventable(new Qa(S.type,this._map,S))};gc.prototype.mouseup=function(S){this._map.fire(new Qa(S.type,
this._map,S))};gc.prototype.click=function(S,X){this._mousedownPos&&this._mousedownPos.dist(X)>=this._clickTolerance||this._map.fire(new Qa(S.type,this._map,S))};gc.prototype.dblclick=function(S){return this._firePreventable(new Qa(S.type,this._map,S))};gc.prototype.mouseover=function(S){this._map.fire(new Qa(S.type,this._map,S))};gc.prototype.mouseout=function(S){this._map.fire(new Qa(S.type,this._map,S))};gc.prototype.touchstart=function(S){return this._firePreventable(new Ob(S.type,this._map,S))};
gc.prototype.touchmove=function(S){this._map.fire(new Ob(S.type,this._map,S))};gc.prototype.touchend=function(S){this._map.fire(new Ob(S.type,this._map,S))};gc.prototype.touchcancel=function(S){this._map.fire(new Ob(S.type,this._map,S))};gc.prototype._firePreventable=function(S){this._map.fire(S);if(S.defaultPrevented)return{}};gc.prototype.isEnabled=function(){return!0};gc.prototype.isActive=function(){return!1};gc.prototype.enable=function(){};gc.prototype.disable=function(){};var dd=function(S){this._map=
S};dd.prototype.reset=function(){this._delayContextMenu=!1;delete this._contextMenuEvent};dd.prototype.mousemove=function(S){this._map.fire(new Qa(S.type,this._map,S))};dd.prototype.mousedown=function(){this._delayContextMenu=!0};dd.prototype.mouseup=function(){this._delayContextMenu=!1;this._contextMenuEvent&&(this._map.fire(new Qa("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)};dd.prototype.contextmenu=function(S){this._delayContextMenu?this._contextMenuEvent=S:
this._map.fire(new Qa(S.type,this._map,S));this._map.listens("contextmenu")&&S.preventDefault()};dd.prototype.isEnabled=function(){return!0};dd.prototype.isActive=function(){return!1};dd.prototype.enable=function(){};dd.prototype.disable=function(){};var md=function(S,X){this._map=S;this._el=S.getCanvasContainer();this._container=S.getContainer();this._clickTolerance=X.clickTolerance||1};md.prototype.isEnabled=function(){return!!this._enabled};md.prototype.isActive=function(){return!!this._active};
md.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)};md.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)};md.prototype.mousedown=function(S,X){this.isEnabled()&&S.shiftKey&&0===S.button&&(cb.disableDrag(),this._startPos=this._lastPos=X,this._active=!0)};md.prototype.mousemoveWindow=function(S,X){if(this._active&&!(this._lastPos.equals(X)||!this._box&&X.dist(this._startPos)<this._clickTolerance)){var V=this._startPos;this._lastPos=X;this._box||(this._box=cb.create("div",
"mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",S));S=Math.min(V.x,X.x);var ea=Math.max(V.x,X.x),va=Math.min(V.y,X.y);X=Math.max(V.y,X.y);cb.setTransform(this._box,"translate("+S+"px,"+va+"px)");this._box.style.width=ea-S+"px";this._box.style.height=X-va+"px"}};md.prototype.mouseupWindow=function(S,X){var V=this;if(this._active&&0===S.button){var ea=this._startPos;this.reset();cb.suppressClick();if(ea.x===X.x&&ea.y===X.y)this._fireEvent("boxzoomcancel",
S);else return this._map.fire(new a.Event("boxzoomend",{originalEvent:S})),{cameraAnimation:function(va){return va.fitScreenCoordinates(ea,X,V._map.getBearing(),{linear:!0})}}}};md.prototype.keydown=function(S){this._active&&27===S.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",S))};md.prototype.reset=function(){this._active=!1;this._container.classList.remove("mapboxgl-crosshair");this._box&&(cb.remove(this._box),this._box=null);cb.enableDrag();delete this._startPos;delete this._lastPos};
md.prototype._fireEvent=function(S,X){return this._map.fire(new a.Event(S,{originalEvent:X}))};var gd=function(S){this.reset();this.numTouches=S.numTouches};gd.prototype.reset=function(){delete this.centroid;delete this.startTime;delete this.touches;this.aborted=!1};gd.prototype.touchstart=function(S,X,V){if(this.centroid||V.length>this.numTouches)this.aborted=!0;if(!this.aborted&&(void 0===this.startTime&&(this.startTime=S.timeStamp),V.length===this.numTouches)){S=new a.Point(0,0);for(var ea=0;ea<
X.length;ea+=1)S._add(X[ea]);this.centroid=S.div(X.length);this.touches=qb(V,X)}};gd.prototype.touchmove=function(S,X,V){if(!this.aborted&&this.centroid){S=qb(V,X);for(var ea in this.touches)if(X=this.touches[ea],V=S[ea],!V||30<V.dist(X))this.aborted=!0}};gd.prototype.touchend=function(S,X,V){if(!this.centroid||500<S.timeStamp-this.startTime)this.aborted=!0;if(0===V.length&&(S=!this.aborted&&this.centroid,this.reset(),S))return S};var nd=function(S){this.singleTap=new gd(S);this.numTaps=S.numTaps;
this.reset()};nd.prototype.reset=function(){this.lastTime=Infinity;delete this.lastTap;this.count=0;this.singleTap.reset()};nd.prototype.touchstart=function(S,X,V){this.singleTap.touchstart(S,X,V)};nd.prototype.touchmove=function(S,X,V){this.singleTap.touchmove(S,X,V)};nd.prototype.touchend=function(S,X,V){if(X=this.singleTap.touchend(S,X,V)){V=500>S.timeStamp-this.lastTime;var ea=!this.lastTap||30>this.lastTap.dist(X);V&&ea||this.reset();this.count++;this.lastTime=S.timeStamp;this.lastTap=X;if(this.count===
this.numTaps)return this.reset(),X}};var rd=function(){this._zoomIn=new nd({numTouches:1,numTaps:2});this._zoomOut=new nd({numTouches:2,numTaps:1});this.reset()};rd.prototype.reset=function(){this._active=!1;this._zoomIn.reset();this._zoomOut.reset()};rd.prototype.touchstart=function(S,X,V){this._zoomIn.touchstart(S,X,V);this._zoomOut.touchstart(S,X,V)};rd.prototype.touchmove=function(S,X,V){this._zoomIn.touchmove(S,X,V);this._zoomOut.touchmove(S,X,V)};rd.prototype.touchend=function(S,X,V){var ea=
this,va=this._zoomIn.touchend(S,X,V),Da=this._zoomOut.touchend(S,X,V);if(va)return this._active=!0,S.preventDefault(),setTimeout(function(){return ea.reset()},0),{cameraAnimation:function(Ra){return Ra.easeTo({duration:300,zoom:Ra.getZoom()+1,around:Ra.unproject(va)},{originalEvent:S})}};if(Da)return this._active=!0,S.preventDefault(),setTimeout(function(){return ea.reset()},0),{cameraAnimation:function(Ra){return Ra.easeTo({duration:300,zoom:Ra.getZoom()-1,around:Ra.unproject(Da)},{originalEvent:S})}}};
rd.prototype.touchcancel=function(){this.reset()};rd.prototype.enable=function(){this._enabled=!0};rd.prototype.disable=function(){this._enabled=!1;this.reset()};rd.prototype.isEnabled=function(){return this._enabled};rd.prototype.isActive=function(){return this._active};var Od=function(S){this.reset();this._clickTolerance=S.clickTolerance||1};Od.prototype.reset=function(){this._moved=this._active=!1;delete this._lastPoint;delete this._eventButton};Od.prototype._correctButton=function(S,X){return!1};
Od.prototype._move=function(S,X){return{}};Od.prototype.mousedown=function(S,X){if(!this._lastPoint){var V=cb.mouseButton(S);this._correctButton(S,V)&&(this._lastPoint=X,this._eventButton=V)}};Od.prototype.mousemoveWindow=function(S,X){var V=this._lastPoint;if(V&&(S.preventDefault(),this._moved||!(X.dist(V)<this._clickTolerance)))return this._moved=!0,this._lastPoint=X,this._move(V,X)};Od.prototype.mouseupWindow=function(S){cb.mouseButton(S)===this._eventButton&&(this._moved&&cb.suppressClick(),this.reset())};
Od.prototype.enable=function(){this._enabled=!0};Od.prototype.disable=function(){this._enabled=!1;this.reset()};Od.prototype.isEnabled=function(){return this._enabled};Od.prototype.isActive=function(){return this._active};var xd=function(S){function X(){S.apply(this,arguments)}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;X.prototype.mousedown=function(V,ea){S.prototype.mousedown.call(this,V,ea);this._lastPoint&&(this._active=!0)};X.prototype._correctButton=
function(V,ea){return 0===ea&&!V.ctrlKey};X.prototype._move=function(V,ea){return{around:ea,panDelta:ea.sub(V)}};return X}(Od),Kd=function(S){function X(){S.apply(this,arguments)}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;X.prototype._correctButton=function(V,ea){return 0===ea&&V.ctrlKey||2===ea};X.prototype._move=function(V,ea){if(V=.8*(ea.x-V.x))return this._active=!0,{bearingDelta:V}};X.prototype.contextmenu=function(V){V.preventDefault()};return X}(Od),
$d=function(S){function X(){S.apply(this,arguments)}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;X.prototype._correctButton=function(V,ea){return 0===ea&&V.ctrlKey||2===ea};X.prototype._move=function(V,ea){if(V=-.5*(ea.y-V.y))return this._active=!0,{pitchDelta:V}};X.prototype.contextmenu=function(V){V.preventDefault()};return X}(Od),fe=function(S){this._minTouches=1;this._clickTolerance=S.clickTolerance||1;this.reset()};fe.prototype.reset=function(){this._active=
!1;this._touches={};this._sum=new a.Point(0,0)};fe.prototype.touchstart=function(S,X,V){return this._calculateTransform(S,X,V)};fe.prototype.touchmove=function(S,X,V){if(this._active)return S.preventDefault(),this._calculateTransform(S,X,V)};fe.prototype.touchend=function(S,X,V){this._calculateTransform(S,X,V);this._active&&V.length<this._minTouches&&this.reset()};fe.prototype.touchcancel=function(){this.reset()};fe.prototype._calculateTransform=function(S,X,V){0<V.length&&(this._active=!0);V=qb(V,
X);S=new a.Point(0,0);var ea=new a.Point(0,0);X=0;for(var va in V){var Da=V[va],Ra=this._touches[va];Ra&&(S._add(Da),ea._add(Da.sub(Ra)),X++,V[va]=Da)}this._touches=V;if(!(X<this._minTouches||!ea.mag()||(va=ea.div(X),this._sum._add(va),this._sum.mag()<this._clickTolerance)))return{around:S.div(X),panDelta:va}};fe.prototype.enable=function(){this._enabled=!0};fe.prototype.disable=function(){this._enabled=!1;this.reset()};fe.prototype.isEnabled=function(){return this._enabled};fe.prototype.isActive=
function(){return this._active};var ae=function(){this.reset()};ae.prototype.reset=function(){this._active=!1;delete this._firstTwoTouches};ae.prototype._start=function(S){};ae.prototype._move=function(S,X,V){return{}};ae.prototype.touchstart=function(S,X,V){this._firstTwoTouches||2>V.length||(this._firstTwoTouches=[V[0].identifier,V[1].identifier],this._start([X[0],X[1]]))};ae.prototype.touchmove=function(S,X,V){if(this._firstTwoTouches){S.preventDefault();var ea=this._firstTwoTouches,va=ea[1];ea=
Bb(V,X,ea[0]);X=Bb(V,X,va);if(ea&&X)return V=this._aroundCenter?null:ea.add(X).div(2),this._move([ea,X],V,S)}};ae.prototype.touchend=function(S,X,V){if(this._firstTwoTouches){var ea=this._firstTwoTouches;S=ea[1];ea=Bb(V,X,ea[0]);X=Bb(V,X,S);ea&&X||(this._active&&cb.suppressClick(),this.reset())}};ae.prototype.touchcancel=function(){this.reset()};ae.prototype.enable=function(S){this._enabled=!0;this._aroundCenter=!!S&&"center"===S.around};ae.prototype.disable=function(){this._enabled=!1;this.reset()};
ae.prototype.isEnabled=function(){return this._enabled};ae.prototype.isActive=function(){return this._active};var gf=function(S){function X(){S.apply(this,arguments)}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;X.prototype.reset=function(){S.prototype.reset.call(this);delete this._distance;delete this._startDistance};X.prototype._start=function(V){this._startDistance=this._distance=V[0].dist(V[1])};X.prototype._move=function(V,ea){var va=this._distance;this._distance=
V[0].dist(V[1]);if(this._active||!(.1>Math.abs(Math.log(this._distance/this._startDistance)/Math.LN2)))return this._active=!0,{zoomDelta:Math.log(this._distance/va)/Math.LN2,pinchAround:ea}};return X}(ae),Te=function(S){function X(){S.apply(this,arguments)}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;X.prototype.reset=function(){S.prototype.reset.call(this);delete this._minDiameter;delete this._startVector;delete this._vector};X.prototype._start=function(V){this._startVector=
this._vector=V[0].sub(V[1]);this._minDiameter=V[0].dist(V[1])};X.prototype._move=function(V,ea){var va=this._vector;this._vector=V[0].sub(V[1]);if(this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:180*this._vector.angleWith(va)/Math.PI,pinchAround:ea}};X.prototype._isBelowThreshold=function(V){this._minDiameter=Math.min(this._minDiameter,V.mag());var ea=25/(Math.PI*this._minDiameter)*360;V=180*V.angleWith(this._startVector)/Math.PI;return Math.abs(V)<ea};return X}(ae),
le=function(S){function X(){S.apply(this,arguments)}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;X.prototype.reset=function(){S.prototype.reset.call(this);this._valid=void 0;delete this._firstMove;delete this._lastPoints};X.prototype._start=function(V){this._lastPoints=V;ub(V[0].sub(V[1]))&&(this._valid=!1)};X.prototype._move=function(V,ea,va){ea=V[0].sub(this._lastPoints[0]);var Da=V[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(ea,
Da,va.timeStamp))return this._lastPoints=V,this._active=!0,{pitchDelta:(ea.y+Da.y)/2*-.5}};X.prototype.gestureBeginsVertically=function(V,ea,va){if(void 0!==this._valid)return this._valid;var Da=2<=V.mag(),Ra=2<=ea.mag();if(Da||Ra){if(!Da||!Ra)return void 0===this._firstMove&&(this._firstMove=va),100>va-this._firstMove?void 0:!1;va=0<V.y===0<ea.y;return ub(V)&&ub(ea)&&va}};return X}(ae),pe=function(){this._panStep=100;this._bearingStep=15;this._pitchStep=10};pe.prototype.reset=function(){this._active=
!1};pe.prototype.keydown=function(S){var X=this;if(!(S.altKey||S.ctrlKey||S.metaKey)){var V=0,ea=0,va=0,Da=0,Ra=0;switch(S.keyCode){case 61:case 107:case 171:case 187:V=1;break;case 189:case 109:case 173:V=-1;break;case 37:S.shiftKey?ea=-1:(S.preventDefault(),Da=-1);break;case 39:S.shiftKey?ea=1:(S.preventDefault(),Da=1);break;case 38:S.shiftKey?va=1:(S.preventDefault(),Ra=-1);break;case 40:S.shiftKey?va=-1:(S.preventDefault(),Ra=1);break;default:return}return{cameraAnimation:function(nb){var Nb=
nb.getZoom();nb.easeTo({duration:300,easeId:"keyboardHandler",easing:wb,zoom:V?Math.round(Nb)+V*(S.shiftKey?2:1):Nb,bearing:nb.getBearing()+ea*X._bearingStep,pitch:nb.getPitch()+va*X._pitchStep,offset:[-Da*X._panStep,-Ra*X._panStep],center:nb.getCenter()},{originalEvent:S})}}}};pe.prototype.enable=function(){this._enabled=!0};pe.prototype.disable=function(){this._enabled=!1;this.reset()};pe.prototype.isEnabled=function(){return this._enabled};pe.prototype.isActive=function(){return this._active};
var ge=1/450,Ge=function(S,X){this._map=S;this._el=S.getCanvasContainer();this._handler=X;this._delta=0;this._defaultZoomRate=.01;this._wheelZoomRate=ge;a.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};Ge.prototype.setZoomRate=function(S){this._defaultZoomRate=S};Ge.prototype.setWheelZoomRate=function(S){this._wheelZoomRate=S};Ge.prototype.isEnabled=function(){return!!this._enabled};Ge.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout};
Ge.prototype.isZooming=function(){return!!this._zooming};Ge.prototype.enable=function(S){this.isEnabled()||(this._enabled=!0,this._aroundCenter=S&&"center"===S.around)};Ge.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)};Ge.prototype.wheel=function(S){if(this.isEnabled()){var X=S.deltaMode===a.window.WheelEvent.DOM_DELTA_LINE?40*S.deltaY:S.deltaY,V=a.browser.now(),ea=V-(this._lastWheelEventTime||0);this._lastWheelEventTime=V;0!==X&&0===X%4.000244140625?this._type="wheel":0!==X&&
4>Math.abs(X)?this._type="trackpad":400<ea?(this._type=null,this._lastValue=X,this._timeout=setTimeout(this._onTimeout,40,S)):this._type||(this._type=200>Math.abs(ea*X)?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,X+=this._lastValue));S.shiftKey&&X&&(X/=4);this._type&&(this._lastWheelEvent=S,this._delta-=X,this._active||this._start(S));S.preventDefault()}};Ge.prototype._onTimeout=function(S){this._type="wheel";this._delta-=this._lastValue;this._active||this._start(S)};
Ge.prototype._start=function(S){this._delta&&(this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout),S=cb.mousePos(this._el,S),this._around=a.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(S)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame()))};Ge.prototype.renderFrame=
function(){return this._onScrollFrame()};Ge.prototype._onScrollFrame=function(){var S=this;if(this._frameId&&(this._frameId=null,this.isActive())){var X=this._map.transform;if(0!==this._delta){var V=2/(1+Math.exp(-Math.abs(this._delta*("wheel"===this._type&&4.000244140625<Math.abs(this._delta)?this._wheelZoomRate:this._defaultZoomRate))));0>this._delta&&0!==V&&(V=1/V);var ea="number"===typeof this._targetZoom?X.zoomScale(this._targetZoom):X.scale;this._targetZoom=Math.min(X.maxZoom,Math.max(X.minZoom,
X.scaleZoom(ea*V)));"wheel"===this._type&&(this._startZoom=X.zoom,this._easing=this._smoothOutEasing(200));this._delta=0}var va="number"===typeof this._targetZoom?this._targetZoom:X.zoom,Da=this._startZoom,Ra=this._easing;V=!1;"wheel"===this._type&&Da&&Ra?(ea=Math.min((a.browser.now()-this._lastWheelEventTime)/200,1),Ra=Ra(ea),va=a.number(Da,va,Ra),1>ea?this._frameId||(this._frameId=!0):V=!0):V=!0;this._active=!0;V&&(this._active=!1,this._finishTimeout=setTimeout(function(){S._zooming=!1;S._handler._triggerRenderFrame();
delete S._targetZoom;delete S._finishTimeout},200));return{noInertia:!0,needsRenderFrame:!V,zoomDelta:va-X.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}};Ge.prototype._smoothOutEasing=function(S){var X=a.ease;if(this._prevEase){X=this._prevEase;var V=(a.browser.now()-X.start)/X.duration;X=X.easing(V+.01)-X.easing(V);X=.27/Math.sqrt(X*X+1E-4)*.01;X=a.bezier(X,Math.sqrt(.0729-X*X),.25,1)}this._prevEase={start:a.browser.now(),duration:S,easing:X};return X};Ge.prototype.reset=function(){this._active=
!1};var nf=function(S,X){this._clickZoom=S;this._tapZoom=X};nf.prototype.enable=function(){this._clickZoom.enable();this._tapZoom.enable()};nf.prototype.disable=function(){this._clickZoom.disable();this._tapZoom.disable()};nf.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()};nf.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Cf=function(){this.reset()};Cf.prototype.reset=function(){this._active=!1};Cf.prototype.dblclick=
function(S,X){S.preventDefault();return{cameraAnimation:function(V){V.easeTo({duration:300,zoom:V.getZoom()+(S.shiftKey?-1:1),around:V.unproject(X)},{originalEvent:S})}}};Cf.prototype.enable=function(){this._enabled=!0};Cf.prototype.disable=function(){this._enabled=!1;this.reset()};Cf.prototype.isEnabled=function(){return this._enabled};Cf.prototype.isActive=function(){return this._active};var If=function(){this._tap=new nd({numTouches:1,numTaps:1});this.reset()};If.prototype.reset=function(){this._active=
!1;delete this._swipePoint;delete this._swipeTouch;delete this._tapTime;this._tap.reset()};If.prototype.touchstart=function(S,X,V){this._swipePoint||((this._tapTime&&500<S.timeStamp-this._tapTime&&this.reset(),this._tapTime)?0<V.length&&(this._swipePoint=X[0],this._swipeTouch=V[0].identifier):this._tap.touchstart(S,X,V))};If.prototype.touchmove=function(S,X,V){if(!this._tapTime)this._tap.touchmove(S,X,V);else if(this._swipePoint&&V[0].identifier===this._swipeTouch)return X=X[0],V=X.y-this._swipePoint.y,
this._swipePoint=X,S.preventDefault(),this._active=!0,{zoomDelta:V/128}};If.prototype.touchend=function(S,X,V){this._tapTime?this._swipePoint&&0===V.length&&this.reset():this._tap.touchend(S,X,V)&&(this._tapTime=S.timeStamp)};If.prototype.touchcancel=function(){this.reset()};If.prototype.enable=function(){this._enabled=!0};If.prototype.disable=function(){this._enabled=!1;this.reset()};If.prototype.isEnabled=function(){return this._enabled};If.prototype.isActive=function(){return this._active};var af=
function(S,X,V){this._el=S;this._mousePan=X;this._touchPan=V};af.prototype.enable=function(S){this._inertiaOptions=S||{};this._mousePan.enable();this._touchPan.enable();this._el.classList.add("mapboxgl-touch-drag-pan")};af.prototype.disable=function(){this._mousePan.disable();this._touchPan.disable();this._el.classList.remove("mapboxgl-touch-drag-pan")};af.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()};af.prototype.isActive=function(){return this._mousePan.isActive()||
this._touchPan.isActive()};var Ye=function(S,X,V){this._pitchWithRotate=S.pitchWithRotate;this._mouseRotate=X;this._mousePitch=V};Ye.prototype.enable=function(){this._mouseRotate.enable();this._pitchWithRotate&&this._mousePitch.enable()};Ye.prototype.disable=function(){this._mouseRotate.disable();this._mousePitch.disable()};Ye.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())};Ye.prototype.isActive=function(){return this._mouseRotate.isActive()||
this._mousePitch.isActive()};var hg=function(S,X,V,ea){this._el=S;this._touchZoom=X;this._touchRotate=V;this._tapDragZoom=ea;this._rotationDisabled=!1;this._enabled=!0};hg.prototype.enable=function(S){this._touchZoom.enable(S);this._rotationDisabled||this._touchRotate.enable(S);this._tapDragZoom.enable();this._el.classList.add("mapboxgl-touch-zoom-rotate")};hg.prototype.disable=function(){this._touchZoom.disable();this._touchRotate.disable();this._tapDragZoom.disable();this._el.classList.remove("mapboxgl-touch-zoom-rotate")};
hg.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()};hg.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()};hg.prototype.disableRotation=function(){this._rotationDisabled=!0;this._touchRotate.disable()};hg.prototype.enableRotation=function(){this._rotationDisabled=!1;this._touchZoom.isEnabled()&&this._touchRotate.enable()};
var eg=function(S){return S.zoom||S.drag||S.pitch||S.rotate},tg=function(S){function X(){S.apply(this,arguments)}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);return X.prototype.constructor=X}(a.Event),Sf=function(S,X){this._map=S;this._el=this._map.getCanvasContainer();this._handlers=[];this._handlersById={};this._changes=[];this._inertia=new Ya(S);this._bearingSnap=X.bearingSnap;this._previousActiveHandlers={};this._eventsInProgress={};this._addDefaultHandlers(X);a.bindAll(["handleEvent",
"handleWindowEvent"],this);S=this._el;this._listeners=[[S,"touchstart",{passive:!1}],[S,"touchmove",{passive:!1}],[S,"touchend",void 0],[S,"touchcancel",void 0],[S,"mousedown",void 0],[S,"mousemove",void 0],[S,"mouseup",void 0],[a.window.document,"mousemove",{capture:!0}],[a.window.document,"mouseup",void 0],[S,"mouseover",void 0],[S,"mouseout",void 0],[S,"dblclick",void 0],[S,"click",void 0],[S,"keydown",{capture:!1}],[S,"keyup",void 0],[S,"wheel",{passive:!1}],[S,"contextmenu",void 0],[a.window,
"blur",void 0]];S=0;for(X=this._listeners;S<X.length;S+=1){var V=X[S],ea=V[0];cb.addEventListener(ea,V[1],ea===a.window.document?this.handleWindowEvent:this.handleEvent,V[2])}};Sf.prototype.destroy=function(){for(var S=0,X=this._listeners;S<X.length;S+=1){var V=X[S],ea=V[0];cb.removeEventListener(ea,V[1],ea===a.window.document?this.handleWindowEvent:this.handleEvent,V[2])}};Sf.prototype._addDefaultHandlers=function(S){var X=this._map,V=X.getCanvasContainer();this._add("mapEvent",new gc(X,S));var ea=
X.boxZoom=new md(X,S);this._add("boxZoom",ea);ea=new rd;var va=new Cf;X.doubleClickZoom=new nf(va,ea);this._add("tapZoom",ea);this._add("clickZoom",va);ea=new If;this._add("tapDragZoom",ea);va=X.touchPitch=new le;this._add("touchPitch",va);va=new Kd(S);var Da=new $d(S);X.dragRotate=new Ye(S,va,Da);this._add("mouseRotate",va,["mousePitch"]);this._add("mousePitch",Da,["mouseRotate"]);va=new xd(S);Da=new fe(S);X.dragPan=new af(V,va,Da);this._add("mousePan",va);this._add("touchPan",Da,["touchZoom","touchRotate"]);
va=new Te;Da=new gf;X.touchZoomRotate=new hg(V,Da,va,ea);this._add("touchRotate",va,["touchPan","touchZoom"]);this._add("touchZoom",Da,["touchPan","touchRotate"]);V=X.scrollZoom=new Ge(X,this);this._add("scrollZoom",V,["mousePan"]);V=X.keyboard=new pe;this._add("keyboard",V);this._add("blockableMapEvent",new dd(X));V=0;for(ea="boxZoom doubleClickZoom tapDragZoom touchPitch dragRotate dragPan touchZoomRotate scrollZoom keyboard".split(" ");V<ea.length;V+=1)va=ea[V],S.interactive&&S[va]&&X[va].enable(S[va])};
Sf.prototype._add=function(S,X,V){this._handlers.push({handlerName:S,handler:X,allowed:V});this._handlersById[S]=X};Sf.prototype.stop=function(){if(!this._updatingCamera){for(var S=0,X=this._handlers;S<X.length;S+=1)X[S].handler.reset();this._inertia.clear();this._fireEvents({},{});this._changes=[]}};Sf.prototype.isActive=function(){for(var S=0,X=this._handlers;S<X.length;S+=1)if(X[S].handler.isActive())return!0;return!1};Sf.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()};
Sf.prototype.isRotating=function(){return!!this._eventsInProgress.rotate};Sf.prototype.isMoving=function(){return!!eg(this._eventsInProgress)||this.isZooming()};Sf.prototype._blockedByActive=function(S,X,V){for(var ea in S)if(ea!==V&&(!X||0>X.indexOf(ea)))return!0;return!1};Sf.prototype.handleWindowEvent=function(S){this.handleEvent(S,S.type+"Window")};Sf.prototype._getMapTouches=function(S){for(var X=[],V=0;V<S.length;V+=1){var ea=S[V];this._el.contains(ea.target)&&X.push(ea)}return X};Sf.prototype.handleEvent=
function(S,X){if("blur"===S.type)this.stop();else{this._updatingCamera=!0;for(var V="renderFrame"===S.type?void 0:S,ea={needsRenderFrame:!1},va={},Da={},Ra=S.touches?this._getMapTouches(S.touches):void 0,nb=Ra?cb.touchPos(this._el,Ra):cb.mousePos(this._el,S),Nb=0,Xb=this._handlers;Nb<Xb.length;Nb+=1){var jc=Xb[Nb],Jc=jc.handlerName,Kc=jc.handler;jc=jc.allowed;if(Kc.isEnabled()){var $c=void 0;this._blockedByActive(Da,jc,Jc)?Kc.reset():Kc[X||S.type]&&($c=Kc[X||S.type](S,nb,Ra),this.mergeHandlerResult(ea,
va,$c,Jc,V),$c&&$c.needsRenderFrame&&this._triggerRenderFrame());if($c||Kc.isActive())Da[Jc]=Kc}}S={};for(var ad in this._previousActiveHandlers)Da[ad]||(S[ad]=V);this._previousActiveHandlers=Da;if(Object.keys(S).length||rb(ea))this._changes.push([ea,va,S]),this._triggerRenderFrame();(Object.keys(Da).length||rb(ea))&&this._map._stop(!0);this._updatingCamera=!1;if(V=ea.cameraAnimation)this._inertia.clear(),this._fireEvents({},{}),this._changes=[],V(this._map)}};Sf.prototype.mergeHandlerResult=function(S,
X,V,ea,va){V&&(a.extend(S,V),S={handlerName:ea,originalEvent:V.originalEvent||va},void 0!==V.zoomDelta&&(X.zoom=S),void 0!==V.panDelta&&(X.drag=S),void 0!==V.pitchDelta&&(X.pitch=S),void 0!==V.bearingDelta&&(X.rotate=S))};Sf.prototype._applyChanges=function(){for(var S={},X={},V={},ea=0,va=this._changes;ea<va.length;ea+=1){var Da=va[ea],Ra=Da[0],nb=Da[1];Da=Da[2];Ra.panDelta&&(S.panDelta=(S.panDelta||new a.Point(0,0))._add(Ra.panDelta));Ra.zoomDelta&&(S.zoomDelta=(S.zoomDelta||0)+Ra.zoomDelta);Ra.bearingDelta&&
(S.bearingDelta=(S.bearingDelta||0)+Ra.bearingDelta);Ra.pitchDelta&&(S.pitchDelta=(S.pitchDelta||0)+Ra.pitchDelta);void 0!==Ra.around&&(S.around=Ra.around);void 0!==Ra.pinchAround&&(S.pinchAround=Ra.pinchAround);Ra.noInertia&&(S.noInertia=Ra.noInertia);a.extend(X,nb);a.extend(V,Da)}this._updateMapTransform(S,X,V);this._changes=[]};Sf.prototype._updateMapTransform=function(S,X,V){var ea=this._map,va=ea.transform;if(!rb(S))return this._fireEvents(X,V);var Da=S.panDelta,Ra=S.zoomDelta,nb=S.bearingDelta,
Nb=S.pitchDelta,Xb=S.around,jc=S.pinchAround;void 0!==jc&&(Xb=jc);ea._stop(!0);Xb=Xb||ea.transform.centerPoint;ea=va.pointLocation(Da?Xb.sub(Da):Xb);nb&&(va.bearing+=nb);Nb&&(va.pitch+=Nb);Ra&&(va.zoom+=Ra);va.setLocationAtPoint(ea,Xb);this._map._update();S.noInertia||this._inertia.record(S);this._fireEvents(X,V)};Sf.prototype._fireEvents=function(S,X){var V=this,ea=eg(this._eventsInProgress),va=eg(S),Da={};for(jc in S){var Ra=S[jc].originalEvent;this._eventsInProgress[jc]||(Da[jc+"start"]=Ra);this._eventsInProgress[jc]=
S[jc]}!ea&&va&&this._fireEvent("movestart",va.originalEvent);for(var nb in Da)this._fireEvent(nb,Da[nb]);S.rotate&&(this._bearingChanged=!0);va&&this._fireEvent("move",va.originalEvent);for(var Nb in S)this._fireEvent(Nb,S[Nb].originalEvent);S={};var Xb;for(Xb in this._eventsInProgress){var jc=this._eventsInProgress[Xb];Da=jc.handlerName;jc=jc.originalEvent;if(!this._handlersById[Da].isActive()){delete this._eventsInProgress[Xb];var Jc=X[Da]||jc;S[Xb+"end"]=Jc}}for(var Kc in S)this._fireEvent(Kc,
S[Kc]);X=eg(this._eventsInProgress);!ea&&!va||X||(this._updatingCamera=!0,ea=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),va=function($c){return 0!==$c&&-V._bearingSnap<$c&&$c<V._bearingSnap},ea?(va(ea.bearing||this._map.getBearing())&&(ea.bearing=0),this._map.easeTo(ea,{originalEvent:Jc})):(this._map.fire(new a.Event("moveend",{originalEvent:Jc})),va(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=this._bearingChanged=!1)};Sf.prototype._fireEvent=function(S,X){this._map.fire(new a.Event(S,
X?{originalEvent:X}:{}))};Sf.prototype._triggerRenderFrame=function(){var S=this;void 0===this._frameId&&(this._frameId=this._map._requestRenderFrame(function(X){delete S._frameId;S.handleEvent(new tg("renderFrame",{timeStamp:X}));S._applyChanges()}))};var Ie=function(S){function X(V,ea){S.call(this);this._zooming=this._moving=!1;this.transform=V;this._bearingSnap=ea.bearingSnap;a.bindAll(["_renderFrameCallback"],this)}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=
X;X.prototype.getCenter=function(){return new a.LngLat(this.transform.center.lng,this.transform.center.lat)};X.prototype.setCenter=function(V,ea){return this.jumpTo({center:V},ea)};X.prototype.panBy=function(V,ea,va){V=a.Point.convert(V).mult(-1);return this.panTo(this.transform.center,a.extend({offset:V},ea),va)};X.prototype.panTo=function(V,ea,va){return this.easeTo(a.extend({center:V},ea),va)};X.prototype.getZoom=function(){return this.transform.zoom};X.prototype.setZoom=function(V,ea){this.jumpTo({zoom:V},
ea);return this};X.prototype.zoomTo=function(V,ea,va){return this.easeTo(a.extend({zoom:V},ea),va)};X.prototype.zoomIn=function(V,ea){this.zoomTo(this.getZoom()+1,V,ea);return this};X.prototype.zoomOut=function(V,ea){this.zoomTo(this.getZoom()-1,V,ea);return this};X.prototype.getBearing=function(){return this.transform.bearing};X.prototype.setBearing=function(V,ea){this.jumpTo({bearing:V},ea);return this};X.prototype.getPadding=function(){return this.transform.padding};X.prototype.setPadding=function(V,
ea){this.jumpTo({padding:V},ea);return this};X.prototype.rotateTo=function(V,ea,va){return this.easeTo(a.extend({bearing:V},ea),va)};X.prototype.resetNorth=function(V,ea){this.rotateTo(0,a.extend({duration:1E3},V),ea);return this};X.prototype.resetNorthPitch=function(V,ea){this.easeTo(a.extend({bearing:0,pitch:0,duration:1E3},V),ea);return this};X.prototype.snapToNorth=function(V,ea){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(V,ea):this};X.prototype.getPitch=function(){return this.transform.pitch};
X.prototype.setPitch=function(V,ea){this.jumpTo({pitch:V},ea);return this};X.prototype.cameraForBounds=function(V,ea){V=a.LngLatBounds.convert(V);return this._cameraForBoxAndBearing(V.getNorthWest(),V.getSouthEast(),0,ea)};X.prototype._cameraForBoxAndBearing=function(V,ea,va,Da){var Ra={top:0,bottom:0,right:0,left:0};Da=a.extend({padding:Ra,offset:[0,0],maxZoom:this.transform.maxZoom},Da);if("number"===typeof Da.padding){var nb=Da.padding;Da.padding={top:nb,bottom:nb,right:nb,left:nb}}Da.padding=
a.extend(Ra,Da.padding);Ra=this.transform;nb=Ra.padding;V=Ra.project(a.LngLat.convert(V));ea=Ra.project(a.LngLat.convert(ea));var Nb=V.rotate(-va*Math.PI/180),Xb=ea.rotate(-va*Math.PI/180),jc=new a.Point(Math.max(Nb.x,Xb.x),Math.max(Nb.y,Xb.y));Nb=new a.Point(Math.min(Nb.x,Xb.x),Math.min(Nb.y,Xb.y));Nb=jc.sub(Nb);jc=(Ra.width-(nb.left+nb.right+Da.padding.left+Da.padding.right))/Nb.x;nb=(Ra.height-(nb.top+nb.bottom+Da.padding.top+Da.padding.bottom))/Nb.y;if(0>nb||0>jc)a.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");
else return nb=Math.min(Ra.scaleZoom(Ra.scale*Math.min(jc,nb)),Da.maxZoom),jc=a.Point.convert(Da.offset),Da=(new a.Point(jc.x+(Da.padding.left-Da.padding.right)/2,jc.y+(Da.padding.top-Da.padding.bottom)/2)).mult(Ra.scale/Ra.zoomScale(nb)),{center:Ra.unproject(V.add(ea).div(2).sub(Da)),zoom:nb,bearing:va}};X.prototype.fitBounds=function(V,ea,va){return this._fitInternal(this.cameraForBounds(V,ea),ea,va)};X.prototype.fitScreenCoordinates=function(V,ea,va,Da,Ra){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.Point.convert(V)),
this.transform.pointLocation(a.Point.convert(ea)),va,Da),Da,Ra)};X.prototype._fitInternal=function(V,ea,va){if(!V)return this;ea=a.extend(V,ea);delete ea.padding;return ea.linear?this.easeTo(ea,va):this.flyTo(ea,va)};X.prototype.jumpTo=function(V,ea){this.stop();var va=this.transform,Da=!1,Ra=!1,nb=!1;"zoom"in V&&va.zoom!==+V.zoom&&(Da=!0,va.zoom=+V.zoom);void 0!==V.center&&(va.center=a.LngLat.convert(V.center));"bearing"in V&&va.bearing!==+V.bearing&&(Ra=!0,va.bearing=+V.bearing);"pitch"in V&&va.pitch!==
+V.pitch&&(nb=!0,va.pitch=+V.pitch);null==V.padding||va.isPaddingEqual(V.padding)||(va.padding=V.padding);this.fire(new a.Event("movestart",ea)).fire(new a.Event("move",ea));Da&&this.fire(new a.Event("zoomstart",ea)).fire(new a.Event("zoom",ea)).fire(new a.Event("zoomend",ea));Ra&&this.fire(new a.Event("rotatestart",ea)).fire(new a.Event("rotate",ea)).fire(new a.Event("rotateend",ea));nb&&this.fire(new a.Event("pitchstart",ea)).fire(new a.Event("pitch",ea)).fire(new a.Event("pitchend",ea));return this.fire(new a.Event("moveend",
ea))};X.prototype.easeTo=function(V,ea){var va=this;this._stop(!1,V.easeId);V=a.extend({offset:[0,0],duration:500,easing:a.ease},V);if(!1===V.animate||!V.essential&&a.browser.prefersReducedMotion)V.duration=0;var Da=this.transform,Ra=this.getZoom(),nb=this.getBearing(),Nb=this.getPitch(),Xb=this.getPadding(),jc="zoom"in V?+V.zoom:Ra,Jc="bearing"in V?this._normalizeBearing(V.bearing,nb):nb,Kc="pitch"in V?+V.pitch:Nb,$c="padding"in V?V.padding:Da.padding,ad=a.Point.convert(V.offset),Wc=Da.centerPoint.add(ad),
wd=Da.pointLocation(Wc),Ed=a.LngLat.convert(V.center||wd);this._normalizeCenter(Ed);var Ld=Da.project(wd),he=Da.project(Ed).sub(Ld),de=Da.zoomScale(jc-Ra);if(V.around){var me=a.LngLat.convert(V.around);var ve=Da.locationPoint(me)}wd={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};this._zooming=this._zooming||jc!==Ra;this._rotating=this._rotating||nb!==Jc;this._pitching=this._pitching||Kc!==Nb;this._padding=!Da.isPaddingEqual($c);this._easeId=V.easeId;this._prepareEase(ea,
V.noMoveStart,wd);clearTimeout(this._easeEndTimeoutID);this._ease(function(se){va._zooming&&(Da.zoom=a.number(Ra,jc,se));va._rotating&&(Da.bearing=a.number(nb,Jc,se));va._pitching&&(Da.pitch=a.number(Nb,Kc,se));va._padding&&(Da.interpolatePadding(Xb,$c,se),Wc=Da.centerPoint.add(ad));if(me)Da.setLocationAtPoint(me,ve);else{var Ee=Da.zoomScale(Da.zoom-Ra);se=Da.unproject(Ld.add(he.mult(se*Math.pow(jc>Ra?Math.min(2,de):Math.max(.5,de),1-se))).mult(Ee));Da.setLocationAtPoint(Da.renderWorldCopies?se.wrap():
se,Wc)}va._fireMoveEvents(ea)},function(se){va._afterEase(ea,se)},V);return this};X.prototype._prepareEase=function(V,ea,va){void 0===va&&(va={});this._moving=!0;ea||va.moving||this.fire(new a.Event("movestart",V));this._zooming&&!va.zooming&&this.fire(new a.Event("zoomstart",V));this._rotating&&!va.rotating&&this.fire(new a.Event("rotatestart",V));this._pitching&&!va.pitching&&this.fire(new a.Event("pitchstart",V))};X.prototype._fireMoveEvents=function(V){this.fire(new a.Event("move",V));this._zooming&&
this.fire(new a.Event("zoom",V));this._rotating&&this.fire(new a.Event("rotate",V));this._pitching&&this.fire(new a.Event("pitch",V))};X.prototype._afterEase=function(V,ea){if(!this._easeId||!ea||this._easeId!==ea){delete this._easeId;ea=this._zooming;var va=this._rotating,Da=this._pitching;this._padding=this._pitching=this._rotating=this._zooming=this._moving=!1;ea&&this.fire(new a.Event("zoomend",V));va&&this.fire(new a.Event("rotateend",V));Da&&this.fire(new a.Event("pitchend",V));this.fire(new a.Event("moveend",
V))}};X.prototype.flyTo=function(V,ea){function va(ef){ef=(we*we-Ee*Ee+(ef?-1:1)*Ke*Ke*jf*jf)/(2*(ef?we:Ee)*Ke*jf);return Math.log(Math.sqrt(ef*ef+1)-ef)}function Da(ef){return(Math.exp(ef)+Math.exp(-ef))/2}var Ra=this;if(!V.essential&&a.browser.prefersReducedMotion)return V=a.pick(V,["center","zoom","bearing","pitch","around"]),this.jumpTo(V,ea);this.stop();V=a.extend({offset:[0,0],speed:1.2,curve:1.42,easing:a.ease},V);var nb=this.transform,Nb=this.getZoom(),Xb=this.getBearing(),jc=this.getPitch(),
Jc=this.getPadding(),Kc="zoom"in V?a.clamp(+V.zoom,nb.minZoom,nb.maxZoom):Nb,$c="bearing"in V?this._normalizeBearing(V.bearing,Xb):Xb,ad="pitch"in V?+V.pitch:jc,Wc="padding"in V?V.padding:nb.padding,wd=nb.zoomScale(Kc-Nb),Ed=a.Point.convert(V.offset),Ld=nb.centerPoint.add(Ed),he=nb.pointLocation(Ld),de=a.LngLat.convert(V.center||he);this._normalizeCenter(de);var me=nb.project(he),ve=nb.project(de).sub(me),se=V.curve,Ee=Math.max(nb.width,nb.height),we=Ee/wd,jf=ve.mag();"minZoom"in V&&(wd=a.clamp(Math.min(V.minZoom,
Nb,Kc),nb.minZoom,nb.maxZoom),wd=Ee/nb.zoomScale(wd-Nb),se=Math.sqrt(wd/jf*2));var Ke=se*se,rf=va(0),pf=function(ef){return Da(rf)/Da(rf+se*ef)},cg=function(ef){var Wf=Da(rf);ef=rf+se*ef;ef=(Math.exp(ef)-Math.exp(-ef))/2/Da(ef);return(Wf*ef-(Math.exp(rf)-Math.exp(-rf))/2)/Ke*Ee/jf},uf=(va(1)-rf)/se;if(1E-6>Math.abs(jf)||!isFinite(uf)){if(1E-6>Math.abs(Ee-we))return this.easeTo(V,ea);var sg=we<Ee?-1:1;uf=Math.abs(Math.log(we/Ee))/se;cg=function(){return 0};pf=function(ef){return Math.exp(sg*se*ef)}}V.duration=
"duration"in V?+V.duration:1E3*uf/("screenSpeed"in V?+V.screenSpeed/se:+V.speed);V.maxDuration&&V.duration>V.maxDuration&&(V.duration=0);this._zooming=!0;this._rotating=Xb!==$c;this._pitching=ad!==jc;this._padding=!nb.isPaddingEqual(Wc);this._prepareEase(ea,!1);this._ease(function(ef){var Wf=ef*uf,da=1/pf(Wf);nb.zoom=1===ef?Kc:Nb+nb.scaleZoom(da);Ra._rotating&&(nb.bearing=a.number(Xb,$c,ef));Ra._pitching&&(nb.pitch=a.number(jc,ad,ef));Ra._padding&&(nb.interpolatePadding(Jc,Wc,ef),Ld=nb.centerPoint.add(Ed));
ef=1===ef?de:nb.unproject(me.add(ve.mult(cg(Wf))).mult(da));nb.setLocationAtPoint(nb.renderWorldCopies?ef.wrap():ef,Ld);Ra._fireMoveEvents(ea)},function(){return Ra._afterEase(ea)},V);return this};X.prototype.isEasing=function(){return!!this._easeFrameId};X.prototype.stop=function(){return this._stop()};X.prototype._stop=function(V,ea){this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame);if(this._onEaseEnd){var va=this._onEaseEnd;delete this._onEaseEnd;
va.call(this,ea)}V||(V=this.handlers)&&V.stop();return this};X.prototype._ease=function(V,ea,va){!1===va.animate||0===va.duration?(V(1),ea()):(this._easeStart=a.browser.now(),this._easeOptions=va,this._onEaseFrame=V,this._onEaseEnd=ea,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))};X.prototype._renderFrameCallback=function(){var V=Math.min((a.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(V));1>V?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):
this.stop()};X.prototype._normalizeBearing=function(V,ea){V=a.wrap(V,-180,180);var va=Math.abs(V-ea);Math.abs(V-360-ea)<va&&(V-=360);Math.abs(V+360-ea)<va&&(V+=360);return V};X.prototype._normalizeCenter=function(V){var ea=this.transform;ea.renderWorldCopies&&!ea.lngRange&&(ea=V.lng-ea.center.lng,V.lng+=180<ea?-360:-180>ea?360:0)};return X}(a.Evented),Of=function(S){void 0===S&&(S={});this.options=S;a.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Of.prototype.getDefaultPosition=
function(){return"bottom-right"};Of.prototype.onAdd=function(S){var X=this.options&&this.options.compact;this._map=S;this._container=cb.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib");this._innerContainer=cb.create("div","mapboxgl-ctrl-attrib-inner",this._container);X&&this._container.classList.add("mapboxgl-compact");this._updateAttributions();this._updateEditLink();this._map.on("styledata",this._updateData);this._map.on("sourcedata",this._updateData);this._map.on("moveend",this._updateEditLink);
void 0===X&&(this._map.on("resize",this._updateCompact),this._updateCompact());return this._container};Of.prototype.onRemove=function(){cb.remove(this._container);this._map.off("styledata",this._updateData);this._map.off("sourcedata",this._updateData);this._map.off("moveend",this._updateEditLink);this._map.off("resize",this._updateCompact);this._attribHTML=this._map=void 0};Of.prototype._updateEditLink=function(){var S=this._editLink;S||(S=this._editLink=this._container.querySelector(".mapbox-improve-map"));
var X=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||a.config.ACCESS_TOKEN}];if(S){var V=X.reduce(function(ea,va,Da){va.value&&(ea+=va.key+"\x3d"+va.value+(Da<X.length-1?"\x26":""));return ea},"?");S.href=a.config.FEEDBACK_URL+"/"+V+(this._map._hash?this._map._hash.getHashString(!0):"");S.rel="noopener nofollow"}};Of.prototype._updateData=function(S){!S||"metadata"!==S.sourceDataType&&"style"!==S.dataType||
(this._updateAttributions(),this._updateEditLink())};Of.prototype._updateAttributions=function(){if(this._map.style){var S=[];this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?S=S.concat(this.options.customAttribution.map(function(va){return"string"!==typeof va?"":va})):"string"===typeof this.options.customAttribution&&S.push(this.options.customAttribution));if(this._map.style.stylesheet){var X=this._map.style.stylesheet;this.styleOwner=X.owner;this.styleId=X.id}X=this._map.style.sourceCaches;
for(var V in X){var ea=X[V];ea.used&&(ea=ea.getSource(),ea.attribution&&0>S.indexOf(ea.attribution)&&S.push(ea.attribution))}S.sort(function(va,Da){return va.length-Da.length});S=S.filter(function(va,Da){for(Da+=1;Da<S.length;Da++)if(0<=S[Da].indexOf(va))return!1;return!0});V=S.join(" | ");V!==this._attribHTML&&(this._attribHTML=V,S.length?(this._innerContainer.innerHTML=V,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=
null)}};Of.prototype._updateCompact=function(){640>=this._map.getCanvasContainer().offsetWidth?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Eg=function(){a.bindAll(["_updateLogo"],this);a.bindAll(["_updateCompact"],this)};Eg.prototype.onAdd=function(S){this._map=S;this._container=cb.create("div","mapboxgl-ctrl");S=cb.create("a","mapboxgl-ctrl-logo");S.target="_blank";S.rel="noopener nofollow";S.href="https://www.mapbox.com/";S.setAttribute("aria-label",
this._map._getUIString("LogoControl.Title"));S.setAttribute("rel","noopener nofollow");this._container.appendChild(S);this._container.style.display="none";this._map.on("sourcedata",this._updateLogo);this._updateLogo();this._map.on("resize",this._updateCompact);this._updateCompact();return this._container};Eg.prototype.onRemove=function(){cb.remove(this._container);this._map.off("sourcedata",this._updateLogo);this._map.off("resize",this._updateCompact)};Eg.prototype.getDefaultPosition=function(){return"bottom-left"};
Eg.prototype._updateLogo=function(S){S&&"metadata"!==S.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")};Eg.prototype._logoRequired=function(){if(this._map.style){var S=this._map.style.sourceCaches,X;for(X in S)if(S[X].getSource().mapbox_logo)return!0;return!1}};Eg.prototype._updateCompact=function(){var S=this._container.children;S.length&&(S=S[0],250>this._map.getCanvasContainer().offsetWidth?S.classList.add("mapboxgl-compact"):S.classList.remove("mapboxgl-compact"))};
var ah=function(){this._queue=[];this._id=0;this._currentlyRunning=this._cleared=!1};ah.prototype.add=function(S){var X=++this._id;this._queue.push({callback:S,id:X,cancelled:!1});return X};ah.prototype.remove=function(S){var X=this._currentlyRunning,V=0;for(X=X?this._queue.concat(X):this._queue;V<X.length;V+=1){var ea=X[V];if(ea.id===S){ea.cancelled=!0;break}}};ah.prototype.run=function(S){void 0===S&&(S=0);var X=this._currentlyRunning=this._queue;this._queue=[];for(var V=0;V<X.length;V+=1){var ea=
X[V];if(!ea.cancelled&&(ea.callback(S),this._cleared))break}this._currentlyRunning=this._cleared=!1};ah.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0);this._queue=[]};var Wi={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in",
"NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Li=a.window.HTMLImageElement,Xi=a.window.HTMLElement,uh=a.window.ImageBitmap,Ji={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,
pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Vh=function(S){function X(ea){var va=this;ea=a.extend({},Ji,ea);if(null!=ea.minZoom&&null!=ea.maxZoom&&ea.minZoom>ea.maxZoom)throw Error("maxZoom must be greater than or equal to minZoom");if(null!=
ea.minPitch&&null!=ea.maxPitch&&ea.minPitch>ea.maxPitch)throw Error("maxPitch must be greater than or equal to minPitch");if(null!=ea.minPitch&&0>ea.minPitch)throw Error("minPitch must be greater than or equal to 0");if(null!=ea.maxPitch&&60<ea.maxPitch)throw Error("maxPitch must be less than or equal to 60");var Da=new Ff(ea.minZoom,ea.maxZoom,ea.minPitch,ea.maxPitch,ea.renderWorldCopies);S.call(this,Da,ea);this._interactive=ea.interactive;this._maxTileCacheSize=ea.maxTileCacheSize;this._failIfMajorPerformanceCaveat=
ea.failIfMajorPerformanceCaveat;this._preserveDrawingBuffer=ea.preserveDrawingBuffer;this._antialias=ea.antialias;this._trackResize=ea.trackResize;this._bearingSnap=ea.bearingSnap;this._refreshExpiredTiles=ea.refreshExpiredTiles;this._fadeDuration=ea.fadeDuration;this._crossSourceCollisions=ea.crossSourceCollisions;this._crossFadingFactor=1;this._collectResourceTiming=ea.collectResourceTiming;this._renderTaskQueue=new ah;this._controls=[];this._mapId=a.uniqueId();this._locale=a.extend({},Wi,ea.locale);
this._requestManager=new a.RequestManager(ea.transformRequest,ea.accessToken);if("string"===typeof ea.container){if(this._container=a.window.document.getElementById(ea.container),!this._container)throw Error("Container '"+ea.container+"' not found.");}else if(ea.container instanceof Xi)this._container=ea.container;else throw Error("Invalid type: 'container' must be a String or HTMLElement.");ea.maxBounds&&this.setMaxBounds(ea.maxBounds);a.bindAll(["_onWindowOnline","_onWindowResize","_contextLost",
"_contextRestored"],this);this._setupContainer();this._setupPainter();if(void 0===this.painter)throw Error("Failed to initialize WebGL.");this.on("move",function(){return va._update(!1)});this.on("moveend",function(){return va._update(!1)});this.on("zoom",function(){return va._update(!0)});"undefined"!==typeof a.window&&(a.window.addEventListener("online",this._onWindowOnline,!1),a.window.addEventListener("resize",this._onWindowResize,!1));this.handlers=new Sf(this,ea);Da="string"===typeof ea.hash&&
ea.hash||void 0;this._hash=ea.hash&&(new oh(Da)).addTo(this);this._hash&&this._hash._onHashChange()||(this.jumpTo({center:ea.center,zoom:ea.zoom,bearing:ea.bearing,pitch:ea.pitch}),ea.bounds&&(this.resize(),this.fitBounds(ea.bounds,a.extend({},ea.fitBoundsOptions,{duration:0}))));this.resize();this._localIdeographFontFamily=ea.localIdeographFontFamily;ea.style&&this.setStyle(ea.style,{localIdeographFontFamily:ea.localIdeographFontFamily});ea.attributionControl&&this.addControl(new Of({customAttribution:ea.customAttribution}));
this.addControl(new Eg,ea.logoPosition);this.on("style.load",function(){va.transform.unmodified&&va.jumpTo(va.style.stylesheet)});this.on("data",function(Ra){va._update("style"===Ra.dataType);va.fire(new a.Event(Ra.dataType+"data",Ra))});this.on("dataloading",function(Ra){va.fire(new a.Event(Ra.dataType+"dataloading",Ra))})}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;var V={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},
showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};X.prototype._getMapId=function(){return this._mapId};X.prototype.addControl=function(ea,va){void 0===va&&ea.getDefaultPosition&&(va=ea.getDefaultPosition());void 0===va&&(va="top-right");if(!ea||!ea.onAdd)return this.fire(new a.ErrorEvent(Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var Da=ea.onAdd(this);this._controls.push(ea);
ea=this._controlPositions[va];-1!==va.indexOf("bottom")?ea.insertBefore(Da,ea.firstChild):ea.appendChild(Da);return this};X.prototype.removeControl=function(ea){if(!ea||!ea.onRemove)return this.fire(new a.ErrorEvent(Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var va=this._controls.indexOf(ea);-1<va&&this._controls.splice(va,1);ea.onRemove(this);return this};X.prototype.resize=function(ea){var va=this._containerDimensions(),Da=va[0];
va=va[1];this._resizeCanvas(Da,va);this.transform.resize(Da,va);this.painter.resize(Da,va);if(Da=!this._moving)this.stop(),this.fire(new a.Event("movestart",ea)).fire(new a.Event("move",ea));this.fire(new a.Event("resize",ea));Da&&this.fire(new a.Event("moveend",ea));return this};X.prototype.getBounds=function(){return this.transform.getBounds()};X.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()};X.prototype.setMaxBounds=function(ea){this.transform.setMaxBounds(a.LngLatBounds.convert(ea));
return this._update()};X.prototype.setMinZoom=function(ea){ea=null===ea||void 0===ea?-2:ea;if(-2<=ea&&ea<=this.transform.maxZoom)return this.transform.minZoom=ea,this._update(),this.getZoom()<ea&&this.setZoom(ea),this;throw Error("minZoom must be between -2 and the current maxZoom, inclusive");};X.prototype.getMinZoom=function(){return this.transform.minZoom};X.prototype.setMaxZoom=function(ea){ea=null===ea||void 0===ea?22:ea;if(ea>=this.transform.minZoom)return this.transform.maxZoom=ea,this._update(),
this.getZoom()>ea&&this.setZoom(ea),this;throw Error("maxZoom must be greater than the current minZoom");};X.prototype.getMaxZoom=function(){return this.transform.maxZoom};X.prototype.setMinPitch=function(ea){ea=null===ea||void 0===ea?0:ea;if(0>ea)throw Error("minPitch must be greater than or equal to 0");if(0<=ea&&ea<=this.transform.maxPitch)return this.transform.minPitch=ea,this._update(),this.getPitch()<ea&&this.setPitch(ea),this;throw Error("minPitch must be between 0 and the current maxPitch, inclusive");
};X.prototype.getMinPitch=function(){return this.transform.minPitch};X.prototype.setMaxPitch=function(ea){ea=null===ea||void 0===ea?60:ea;if(60<ea)throw Error("maxPitch must be less than or equal to 60");if(ea>=this.transform.minPitch)return this.transform.maxPitch=ea,this._update(),this.getPitch()>ea&&this.setPitch(ea),this;throw Error("maxPitch must be greater than the current minPitch");};X.prototype.getMaxPitch=function(){return this.transform.maxPitch};X.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies};
X.prototype.setRenderWorldCopies=function(ea){this.transform.renderWorldCopies=ea;return this._update()};X.prototype.project=function(ea){return this.transform.locationPoint(a.LngLat.convert(ea))};X.prototype.unproject=function(ea){return this.transform.pointLocation(a.Point.convert(ea))};X.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()};X.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()};X.prototype.isRotating=function(){return this._rotating||
this.handlers.isRotating()};X.prototype._createDelegatedListener=function(ea,va,Da){var Ra=this,nb;if("mouseenter"===ea||"mouseover"===ea){var Nb=!1;return{layer:va,listener:Da,delegates:{mousemove:function(jc){var Jc=Ra.getLayer(va)?Ra.queryRenderedFeatures(jc.point,{layers:[va]}):[];Jc.length?Nb||(Nb=!0,Da.call(Ra,new Qa(ea,Ra,jc.originalEvent,{features:Jc}))):Nb=!1},mouseout:function(){Nb=!1}}}}if("mouseleave"===ea||"mouseout"===ea){var Xb=!1;return{layer:va,listener:Da,delegates:{mousemove:function(jc){(Ra.getLayer(va)?
Ra.queryRenderedFeatures(jc.point,{layers:[va]}):[]).length?Xb=!0:Xb&&(Xb=!1,Da.call(Ra,new Qa(ea,Ra,jc.originalEvent)))},mouseout:function(jc){Xb&&(Xb=!1,Da.call(Ra,new Qa(ea,Ra,jc.originalEvent)))}}}}return{layer:va,listener:Da,delegates:(nb={},nb[ea]=function(jc){var Jc=Ra.getLayer(va)?Ra.queryRenderedFeatures(jc.point,{layers:[va]}):[];Jc.length&&(jc.features=Jc,Da.call(Ra,jc),delete jc.features)},nb)}};X.prototype.on=function(ea,va,Da){if(void 0===Da)return S.prototype.on.call(this,ea,va);va=
this._createDelegatedListener(ea,va,Da);this._delegatedListeners=this._delegatedListeners||{};this._delegatedListeners[ea]=this._delegatedListeners[ea]||[];this._delegatedListeners[ea].push(va);for(var Ra in va.delegates)this.on(Ra,va.delegates[Ra]);return this};X.prototype.once=function(ea,va,Da){if(void 0===Da)return S.prototype.once.call(this,ea,va);ea=this._createDelegatedListener(ea,va,Da);for(var Ra in ea.delegates)this.once(Ra,ea.delegates[Ra]);return this};X.prototype.off=function(ea,va,Da){if(void 0===
Da)return S.prototype.off.call(this,ea,va);if(this._delegatedListeners&&this._delegatedListeners[ea])a:{ea=this._delegatedListeners[ea];for(var Ra=0;Ra<ea.length;Ra++){var nb=ea[Ra];if(nb.layer===va&&nb.listener===Da){for(var Nb in nb.delegates)this.off(Nb,nb.delegates[Nb]);ea.splice(Ra,1);break a}}}return this};X.prototype.queryRenderedFeatures=function(ea,va){if(!this.style)return[];void 0!==va||void 0===ea||ea instanceof a.Point||Array.isArray(ea)||(va=ea,ea=void 0);va=va||{};ea=ea||[[0,0],[this.transform.width,
this.transform.height]];if(ea instanceof a.Point||"number"===typeof ea[0])var Da=[a.Point.convert(ea)];else Da=a.Point.convert(ea[0]),ea=a.Point.convert(ea[1]),Da=[Da,new a.Point(ea.x,Da.y),ea,new a.Point(Da.x,ea.y),Da];return this.style.queryRenderedFeatures(Da,va,this.transform)};X.prototype.querySourceFeatures=function(ea,va){return this.style.querySourceFeatures(ea,va)};X.prototype.setStyle=function(ea,va){va=a.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},va);if(!1!==va.diff&&
va.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&ea)return this._diffStyle(ea,va),this;this._localIdeographFontFamily=va.localIdeographFontFamily;return this._updateStyle(ea,va)};X.prototype._getUIString=function(ea){var va=this._locale[ea];if(null==va)throw Error("Missing UI string '"+ea+"'");return va};X.prototype._updateStyle=function(ea,va){this.style&&(this.style.setEventedParent(null),this.style._remove());if(ea)this.style=new Yg(this,va||{});else return delete this.style,
this;this.style.setEventedParent(this,{style:this.style});"string"===typeof ea?this.style.loadURL(ea):this.style.loadJSON(ea);return this};X.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Yg(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())};X.prototype._diffStyle=function(ea,va){var Da=this;"string"===typeof ea?(ea=this._requestManager.normalizeStyleURL(ea),ea=this._requestManager.transformRequest(ea,a.ResourceType.Style),a.getJSON(ea,function(Ra,
nb){Ra?Da.fire(new a.ErrorEvent(Ra)):nb&&Da._updateDiff(nb,va)})):"object"===typeof ea&&this._updateDiff(ea,va)};X.prototype._updateDiff=function(ea,va){try{this.style.setState(ea)&&this._update(!0)}catch(Da){a.warnOnce("Unable to perform style diff: "+(Da.message||Da.error||Da)+".  Rebuilding the style from scratch."),this._updateStyle(ea,va)}};X.prototype.getStyle=function(){if(this.style)return this.style.serialize()};X.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():a.warnOnce("There is no style added to the map.")};
X.prototype.addSource=function(ea,va){this._lazyInitEmptyStyle();this.style.addSource(ea,va);return this._update(!0)};X.prototype.isSourceLoaded=function(ea){var va=this.style&&this.style.sourceCaches[ea];if(void 0===va)this.fire(new a.ErrorEvent(Error("There is no source with ID '"+ea+"'")));else return va.loaded()};X.prototype.areTilesLoaded=function(){var ea=this.style&&this.style.sourceCaches,va;for(va in ea){var Da=ea[va]._tiles,Ra;for(Ra in Da){var nb=Da[Ra];if("loaded"!==nb.state&&"errored"!==
nb.state)return!1}}return!0};X.prototype.addSourceType=function(ea,va,Da){this._lazyInitEmptyStyle();return this.style.addSourceType(ea,va,Da)};X.prototype.removeSource=function(ea){this.style.removeSource(ea);return this._update(!0)};X.prototype.getSource=function(ea){return this.style.getSource(ea)};X.prototype.addImage=function(ea,va,Da){void 0===Da&&(Da={});var Ra=Da.pixelRatio;void 0===Ra&&(Ra=1);var nb=Da.sdf;void 0===nb&&(nb=!1);var Nb=Da.stretchX,Xb=Da.stretchY;Da=Da.content;this._lazyInitEmptyStyle();
if(va instanceof Li||uh&&va instanceof uh)va=a.browser.getImageData(va),this.style.addImage(ea,{data:new a.RGBAImage({width:va.width,height:va.height},va.data),pixelRatio:Ra,stretchX:Nb,stretchY:Xb,content:Da,sdf:nb,version:0});else{if(void 0===va.width||void 0===va.height)return this.fire(new a.ErrorEvent(Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));
this.style.addImage(ea,{data:new a.RGBAImage({width:va.width,height:va.height},new Uint8Array(va.data)),pixelRatio:Ra,stretchX:Nb,stretchY:Xb,content:Da,sdf:nb,version:0,userImage:va});if(va.onAdd)va.onAdd(this,ea)}};X.prototype.updateImage=function(ea,va){var Da=this.style.getImage(ea);if(!Da)return this.fire(new a.ErrorEvent(Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var Ra=va instanceof Li||uh&&va instanceof uh?a.browser.getImageData(va):
va,nb=Ra.width,Nb=Ra.height;Ra=Ra.data;if(void 0===nb||void 0===Nb)return this.fire(new a.ErrorEvent(Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(nb!==Da.data.width||Nb!==Da.data.height)return this.fire(new a.ErrorEvent(Error("The width and height of the updated image must be that same as the previous version of the image")));
Da.data.replace(Ra,!(va instanceof Li||uh&&va instanceof uh));this.style.updateImage(ea,Da)};X.prototype.hasImage=function(ea){return ea?!!this.style.getImage(ea):(this.fire(new a.ErrorEvent(Error("Missing required image id"))),!1)};X.prototype.removeImage=function(ea){this.style.removeImage(ea)};X.prototype.loadImage=function(ea,va){a.getImage(this._requestManager.transformRequest(ea,a.ResourceType.Image),va)};X.prototype.listImages=function(){return this.style.listImages()};X.prototype.addLayer=
function(ea,va){this._lazyInitEmptyStyle();this.style.addLayer(ea,va);return this._update(!0)};X.prototype.moveLayer=function(ea,va){this.style.moveLayer(ea,va);return this._update(!0)};X.prototype.removeLayer=function(ea){this.style.removeLayer(ea);return this._update(!0)};X.prototype.getLayer=function(ea){return this.style.getLayer(ea)};X.prototype.setLayerZoomRange=function(ea,va,Da){this.style.setLayerZoomRange(ea,va,Da);return this._update(!0)};X.prototype.setFilter=function(ea,va,Da){void 0===
Da&&(Da={});this.style.setFilter(ea,va,Da);return this._update(!0)};X.prototype.getFilter=function(ea){return this.style.getFilter(ea)};X.prototype.setPaintProperty=function(ea,va,Da,Ra){void 0===Ra&&(Ra={});this.style.setPaintProperty(ea,va,Da,Ra);return this._update(!0)};X.prototype.getPaintProperty=function(ea,va){return this.style.getPaintProperty(ea,va)};X.prototype.setLayoutProperty=function(ea,va,Da,Ra){void 0===Ra&&(Ra={});this.style.setLayoutProperty(ea,va,Da,Ra);return this._update(!0)};
X.prototype.getLayoutProperty=function(ea,va){return this.style.getLayoutProperty(ea,va)};X.prototype.setLight=function(ea,va){void 0===va&&(va={});this._lazyInitEmptyStyle();this.style.setLight(ea,va);return this._update(!0)};X.prototype.getLight=function(){return this.style.getLight()};X.prototype.setFeatureState=function(ea,va){this.style.setFeatureState(ea,va);return this._update()};X.prototype.removeFeatureState=function(ea,va){this.style.removeFeatureState(ea,va);return this._update()};X.prototype.getFeatureState=
function(ea){return this.style.getFeatureState(ea)};X.prototype.getContainer=function(){return this._container};X.prototype.getCanvasContainer=function(){return this._canvasContainer};X.prototype.getCanvas=function(){return this._canvas};X.prototype._containerDimensions=function(){var ea=0,va=0;this._container&&(ea=this._container.clientWidth||400,va=this._container.clientHeight||300);return[ea,va]};X.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==a.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&
a.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")};X.prototype._setupContainer=function(){var ea=this._container;ea.classList.add("mapboxgl-map");(this._missingCSSCanary=cb.create("div","mapboxgl-canary",ea)).style.visibility="hidden";this._detectMissingCSS();var va=this._canvasContainer=cb.create("div","mapboxgl-canvas-container",
ea);this._interactive&&va.classList.add("mapboxgl-interactive");this._canvas=cb.create("canvas","mapboxgl-canvas",va);this._canvas.addEventListener("webglcontextlost",this._contextLost,!1);this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1);this._canvas.setAttribute("tabindex","0");this._canvas.setAttribute("aria-label","Map");va=this._containerDimensions();this._resizeCanvas(va[0],va[1]);var Da=this._controlContainer=cb.create("div","mapboxgl-control-container",ea),Ra=
this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(nb){Ra[nb]=cb.create("div","mapboxgl-ctrl-"+nb,Da)})};X.prototype._resizeCanvas=function(ea,va){var Da=a.browser.devicePixelRatio||1;this._canvas.width=Da*ea;this._canvas.height=Da*va;this._canvas.style.width=ea+"px";this._canvas.style.height=va+"px"};X.prototype._setupPainter=function(){var ea=a.extend({},bb.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,
antialias:this._antialias||!1});(ea=this._canvas.getContext("webgl",ea)||this._canvas.getContext("experimental-webgl",ea))?(this.painter=new tf(ea,this.transform),a.webpSupported.testSupport(ea)):this.fire(new a.ErrorEvent(Error("Failed to initialize WebGL")))};X.prototype._contextLost=function(ea){ea.preventDefault();this._frame&&(this._frame.cancel(),this._frame=null);this.fire(new a.Event("webglcontextlost",{originalEvent:ea}))};X.prototype._contextRestored=function(ea){this._setupPainter();this.resize();
this._update();this.fire(new a.Event("webglcontextrestored",{originalEvent:ea}))};X.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()};X.prototype._update=function(ea){if(!this.style)return this;this._styleDirty=this._styleDirty||ea;this._sourcesDirty=!0;this.triggerRepaint();return this};X.prototype._requestRenderFrame=function(ea){this._update();return this._renderTaskQueue.add(ea)};X.prototype._cancelRenderFrame=function(ea){this._renderTaskQueue.remove(ea)};
X.prototype._render=function(ea){var va=this,Da=0,Ra=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")){var nb=Ra.createQueryEXT();Ra.beginQueryEXT(Ra.TIME_ELAPSED_EXT,nb);Da=a.browser.now()}this.painter.context.setDirty();this.painter.setBaseState();this._renderTaskQueue.run(ea);if(!this._removed){ea=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Nb=this.transform.zoom,Xb=a.browser.now();this.style.zoomHistory.update(Nb,Xb);Nb=new a.EvaluationParameters(Nb,{now:Xb,
fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()});Xb=Nb.crossFadingFactor();if(1!==Xb||Xb!==this._crossFadingFactor)ea=!0,this._crossFadingFactor=Xb;this.style.update(Nb)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform));this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions);this.painter.render(this.style,
{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")});this.fire(new a.Event("render"));this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new a.Event("load")));this.style&&(this.style.hasTransitions()||ea)&&(this._styleDirty=!0);this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();
if(this.listens("gpu-timing-frame")){var jc=a.browser.now()-Da;Ra.endQueryEXT(Ra.TIME_ELAPSED_EXT,nb);setTimeout(function(){var Kc=Ra.getQueryObjectEXT(nb,Ra.QUERY_RESULT_EXT)/1E6;Ra.deleteQueryEXT(nb);va.fire(new a.Event("gpu-timing-frame",{cpuTime:jc,gpuTime:Kc}))},50)}if(this.listens("gpu-timing-layer")){var Jc=this.painter.collectGpuTimers();setTimeout(function(){var Kc=va.painter.queryGpuTimers(Jc);va.fire(new a.Event("gpu-timing-layer",{layerTimes:Kc}))},50)}this._sourcesDirty||this._styleDirty||
this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new a.Event("idle")));return this}};X.prototype.remove=function(){this._hash&&this._hash.remove();for(var ea=0,va=this._controls;ea<va.length;ea+=1)va[ea].onRemove(this);this._controls=[];this._frame&&(this._frame.cancel(),this._frame=null);this._renderTaskQueue.clear();this.painter.destroy();this.handlers.destroy();delete this.handlers;this.setStyle(null);
"undefined"!==typeof a.window&&(a.window.removeEventListener("resize",this._onWindowResize,!1),a.window.removeEventListener("online",this._onWindowOnline,!1));(ea=this.painter.context.gl.getExtension("WEBGL_lose_context"))&&ea.loseContext();Ab(this._canvasContainer);Ab(this._controlContainer);Ab(this._missingCSSCanary);this._container.classList.remove("mapboxgl-map");this._removed=!0;this.fire(new a.Event("remove"))};X.prototype.triggerRepaint=function(){var ea=this;this.style&&!this._frame&&(this._frame=
a.browser.frame(function(va){ea._frame=null;ea._render(va)}))};X.prototype._onWindowOnline=function(){this._update()};X.prototype._onWindowResize=function(ea){this._trackResize&&this.resize({originalEvent:ea})._update()};V.showTileBoundaries.get=function(){return!!this._showTileBoundaries};V.showTileBoundaries.set=function(ea){this._showTileBoundaries!==ea&&(this._showTileBoundaries=ea,this._update())};V.showPadding.get=function(){return!!this._showPadding};V.showPadding.set=function(ea){this._showPadding!==
ea&&(this._showPadding=ea,this._update())};V.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes};V.showCollisionBoxes.set=function(ea){this._showCollisionBoxes!==ea&&((this._showCollisionBoxes=ea)?this.style._generateCollisionBoxes():this._update())};V.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector};V.showOverdrawInspector.set=function(ea){this._showOverdrawInspector!==ea&&(this._showOverdrawInspector=ea,this._update())};V.repaint.get=function(){return!!this._repaint};
V.repaint.set=function(ea){this._repaint!==ea&&(this._repaint=ea,this.triggerRepaint())};V.vertices.get=function(){return!!this._vertices};V.vertices.set=function(ea){this._vertices=ea;this._update()};X.prototype._setCacheLimits=function(ea,va){a.setCacheLimits(ea,va)};V.version.get=function(){return a.version};Object.defineProperties(X.prototype,V);return X}(Ie),jj={showCompass:!0,showZoom:!0,visualizePitch:!1},yh=function(S){var X=this;this.options=a.extend({},jj,S);this._container=cb.create("div",
"mapboxgl-ctrl mapboxgl-ctrl-group");this._container.addEventListener("contextmenu",function(V){return V.preventDefault()});this.options.showZoom&&(a.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(V){return X._map.zoomIn({},{originalEvent:V})}),cb.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(V){return X._map.zoomOut({},
{originalEvent:V})}),cb.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0));this.options.showCompass&&(a.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(V){X.options.visualizePitch?X._map.resetNorthPitch({},{originalEvent:V}):X._map.resetNorth({},{originalEvent:V})}),this._compassIcon=cb.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};yh.prototype._updateZoomButtons=
function(){var S=this._map.getZoom();this._zoomInButton.disabled=S===this._map.getMaxZoom();this._zoomOutButton.disabled=S===this._map.getMinZoom()};yh.prototype._rotateCompassArrow=function(){this._compassIcon.style.transform=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(Math.PI/180*this._map.transform.pitch),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+180/Math.PI*this._map.transform.angle+"deg)":"rotate("+180/Math.PI*this._map.transform.angle+"deg)"};yh.prototype.onAdd=
function(S){this._map=S;this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons());if(this.options.showCompass){this._setButtonTitle(this._compass,"ResetBearing");if(this.options.visualizePitch)this._map.on("pitch",this._rotateCompassArrow);this._map.on("rotate",this._rotateCompassArrow);this._rotateCompassArrow();this._handler=new kg(this._map,this._compass,this.options.visualizePitch)}return this._container};
yh.prototype.onRemove=function(){cb.remove(this._container);this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons);this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler);delete this._map};yh.prototype._createButton=function(S,X){S=cb.create("button",S,this._container);S.type="button";S.addEventListener("click",X);return S};yh.prototype._setButtonTitle=
function(S,X){X=this._map._getUIString("NavigationControl."+X);S.title=X;S.setAttribute("aria-label",X)};var kg=function(S,X,V){void 0===V&&(V=!1);this._clickTolerance=10;this.element=X;this.mouseRotate=new Kd({clickTolerance:S.dragRotate._mouseRotate._clickTolerance});this.map=S;V&&(this.mousePitch=new $d({clickTolerance:S.dragRotate._mousePitch._clickTolerance}));a.bindAll("mousedown mousemove mouseup touchstart touchmove touchend reset".split(" "),this);cb.addEventListener(X,"mousedown",this.mousedown);
cb.addEventListener(X,"touchstart",this.touchstart,{passive:!1});cb.addEventListener(X,"touchmove",this.touchmove);cb.addEventListener(X,"touchend",this.touchend);cb.addEventListener(X,"touchcancel",this.reset)};kg.prototype.down=function(S,X){this.mouseRotate.mousedown(S,X);this.mousePitch&&this.mousePitch.mousedown(S,X);cb.disableDrag()};kg.prototype.move=function(S,X){var V=this.map,ea=this.mouseRotate.mousemoveWindow(S,X);ea&&ea.bearingDelta&&V.setBearing(V.getBearing()+ea.bearingDelta);this.mousePitch&&
(S=this.mousePitch.mousemoveWindow(S,X))&&S.pitchDelta&&V.setPitch(V.getPitch()+S.pitchDelta)};kg.prototype.off=function(){var S=this.element;cb.removeEventListener(S,"mousedown",this.mousedown);cb.removeEventListener(S,"touchstart",this.touchstart,{passive:!1});cb.removeEventListener(S,"touchmove",this.touchmove);cb.removeEventListener(S,"touchend",this.touchend);cb.removeEventListener(S,"touchcancel",this.reset);this.offTemp()};kg.prototype.offTemp=function(){cb.enableDrag();cb.removeEventListener(a.window,
"mousemove",this.mousemove);cb.removeEventListener(a.window,"mouseup",this.mouseup)};kg.prototype.mousedown=function(S){this.down(a.extend({},S,{ctrlKey:!0,preventDefault:function(){return S.preventDefault()}}),cb.mousePos(this.element,S));cb.addEventListener(a.window,"mousemove",this.mousemove);cb.addEventListener(a.window,"mouseup",this.mouseup)};kg.prototype.mousemove=function(S){this.move(S,cb.mousePos(this.element,S))};kg.prototype.mouseup=function(S){this.mouseRotate.mouseupWindow(S);this.mousePitch&&
this.mousePitch.mouseupWindow(S);this.offTemp()};kg.prototype.touchstart=function(S){1!==S.targetTouches.length?this.reset():(this._startPos=this._lastPos=cb.touchPos(this.element,S.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return S.preventDefault()}},this._startPos))};kg.prototype.touchmove=function(S){1!==S.targetTouches.length?this.reset():(this._lastPos=cb.touchPos(this.element,S.targetTouches)[0],this.move({preventDefault:function(){return S.preventDefault()}},
this._lastPos))};kg.prototype.touchend=function(S){0===S.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click();this.reset()};kg.prototype.reset=function(){this.mouseRotate.reset();this.mousePitch&&this.mousePitch.reset();delete this._startPos;delete this._lastPos;this.offTemp()};var ci={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)",
"bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},Rg=function(S){function X(V,ea){var va=this;S.call(this);if(V instanceof a.window.HTMLElement||ea)V=a.extend({element:V},ea);a.bindAll("_update _onMove _onUp _addDragHandler _onMapClick _onKeyPress".split(" "),this);this._anchor=V&&V.anchor||"center";this._color=V&&V.color||"#3FB1CE";this._draggable=V&&V.draggable||!1;this._state="inactive";this._rotation=V&&V.rotation||
0;this._rotationAlignment=V&&V.rotationAlignment||"auto";this._pitchAlignment=V&&V.pitchAlignment&&"auto"!==V.pitchAlignment?V.pitchAlignment:this._rotationAlignment;if(V&&V.element)this._element=V.element,this._offset=a.Point.convert(V&&V.offset||[0,0]);else{this._defaultMarker=!0;this._element=cb.create("div");this._element.setAttribute("aria-label","Map marker");ea=cb.createNS("http://www.w3.org/2000/svg","svg");ea.setAttributeNS(null,"display","block");ea.setAttributeNS(null,"height","41px");
ea.setAttributeNS(null,"width","27px");ea.setAttributeNS(null,"viewBox","0 0 27 41");var Da=cb.createNS("http://www.w3.org/2000/svg","g");Da.setAttributeNS(null,"stroke","none");Da.setAttributeNS(null,"stroke-width","1");Da.setAttributeNS(null,"fill","none");Da.setAttributeNS(null,"fill-rule","evenodd");Da=cb.createNS("http://www.w3.org/2000/svg","g");Da.setAttributeNS(null,"fill-rule","nonzero");var Ra=cb.createNS("http://www.w3.org/2000/svg","g");Ra.setAttributeNS(null,"transform","translate(3.0, 29.0)");
Ra.setAttributeNS(null,"fill","#000000");for(var nb=0,Nb=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];nb<Nb.length;nb+=1){var Xb=Nb[nb],jc=cb.createNS("http://www.w3.org/2000/svg","ellipse");jc.setAttributeNS(null,"opacity","0.04");jc.setAttributeNS(null,"cx","10.5");jc.setAttributeNS(null,"cy","5.80029008");jc.setAttributeNS(null,
"rx",Xb.rx);jc.setAttributeNS(null,"ry",Xb.ry);Ra.appendChild(jc)}nb=cb.createNS("http://www.w3.org/2000/svg","g");nb.setAttributeNS(null,"fill",this._color);Nb=cb.createNS("http://www.w3.org/2000/svg","path");Nb.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z");nb.appendChild(Nb);Nb=cb.createNS("http://www.w3.org/2000/svg",
"g");Nb.setAttributeNS(null,"opacity","0.25");Nb.setAttributeNS(null,"fill","#000000");Xb=cb.createNS("http://www.w3.org/2000/svg","path");Xb.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z");
Nb.appendChild(Xb);Xb=cb.createNS("http://www.w3.org/2000/svg","g");Xb.setAttributeNS(null,"transform","translate(6.0, 7.0)");Xb.setAttributeNS(null,"fill","#FFFFFF");jc=cb.createNS("http://www.w3.org/2000/svg","g");jc.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Jc=cb.createNS("http://www.w3.org/2000/svg","circle");Jc.setAttributeNS(null,"fill","#000000");Jc.setAttributeNS(null,"opacity","0.25");Jc.setAttributeNS(null,"cx","5.5");Jc.setAttributeNS(null,"cy","5.5");Jc.setAttributeNS(null,
"r","5.4999962");var Kc=cb.createNS("http://www.w3.org/2000/svg","circle");Kc.setAttributeNS(null,"fill","#FFFFFF");Kc.setAttributeNS(null,"cx","5.5");Kc.setAttributeNS(null,"cy","5.5");Kc.setAttributeNS(null,"r","5.4999962");jc.appendChild(Jc);jc.appendChild(Kc);Da.appendChild(Ra);Da.appendChild(nb);Da.appendChild(Nb);Da.appendChild(Xb);Da.appendChild(jc);ea.appendChild(Da);this._element.appendChild(ea);this._offset=a.Point.convert(V&&V.offset||[0,-14])}this._element.classList.add("mapboxgl-marker");
this._element.addEventListener("dragstart",function($c){$c.preventDefault()});this._element.addEventListener("mousedown",function($c){$c.preventDefault()});this._element.addEventListener("focus",function(){var $c=va._map.getContainer();$c.scrollTop=0;$c.scrollLeft=0});La(this._element,this._anchor,"marker");this._popup=null}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;X.prototype.addTo=function(V){this.remove();this._map=V;V.getCanvasContainer().appendChild(this._element);
V.on("move",this._update);V.on("moveend",this._update);this.setDraggable(this._draggable);this._update();this._map.on("click",this._onMapClick);return this};X.prototype.remove=function(){this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",
this._onMove),this._map.off("touchmove",this._onMove),delete this._map);cb.remove(this._element);this._popup&&this._popup.remove();return this};X.prototype.getLngLat=function(){return this._lngLat};X.prototype.setLngLat=function(V){this._lngLat=a.LngLat.convert(V);this._pos=null;this._popup&&this._popup.setLngLat(this._lngLat);this._update();return this};X.prototype.getElement=function(){return this._element};X.prototype.setPopup=function(V){this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",
this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex"));if(V){if(!("offset"in V.options)){var ea=Math.sqrt(Math.pow(13.5,2)/2);V.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[ea,-1*(24.6+ea)],"bottom-right":[-ea,-1*(24.6+ea)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=V;this._lngLat&&this._popup.setLngLat(this._lngLat);(this._originalTabIndex=this._element.getAttribute("tabindex"))||
this._element.setAttribute("tabindex","0");this._element.addEventListener("keypress",this._onKeyPress)}return this};X.prototype._onKeyPress=function(V){var ea=V.code;V=V.charCode||V.keyCode;"Space"!==ea&&"Enter"!==ea&&32!==V&&13!==V||this.togglePopup()};X.prototype._onMapClick=function(V){V=V.originalEvent.target;var ea=this._element;this._popup&&(V===ea||ea.contains(V))&&this.togglePopup()};X.prototype.getPopup=function(){return this._popup};X.prototype.togglePopup=function(){var V=this._popup;V&&
(V.isOpen()?V.remove():V.addTo(this._map));return this};X.prototype._update=function(V){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Ma(this._lngLat,this._pos,this._map.transform));this._pos=this._map.project(this._lngLat)._add(this._offset);var ea="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?ea="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(ea="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var va="";"viewport"===this._pitchAlignment||
"auto"===this._pitchAlignment?va="rotateX(0deg)":"map"===this._pitchAlignment&&(va="rotateX("+this._map.getPitch()+"deg)");V&&"moveend"!==V.type||(this._pos=this._pos.round());cb.setTransform(this._element,ci[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+va+" "+ea)}};X.prototype.getOffset=function(){return this._offset};X.prototype.setOffset=function(V){this._offset=a.Point.convert(V);this._update();return this};X.prototype._onMove=function(V){this._pos=V.point.sub(this._positionDelta);
this._lngLat=this._map.unproject(this._pos);this.setLngLat(this._lngLat);this._element.style.pointerEvents="none";"pending"===this._state&&(this._state="active",this.fire(new a.Event("dragstart")));this.fire(new a.Event("drag"))};X.prototype._onUp=function(){this._element.style.pointerEvents="auto";this._positionDelta=null;this._map.off("mousemove",this._onMove);this._map.off("touchmove",this._onMove);"active"===this._state&&this.fire(new a.Event("dragend"));this._state="inactive"};X.prototype._addDragHandler=
function(V){this._element.contains(V.originalEvent.target)&&(V.preventDefault(),this._positionDelta=V.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))};X.prototype.setDraggable=function(V){this._draggable=!!V;this._map&&(V?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",
this._addDragHandler),this._map.off("touchstart",this._addDragHandler)));return this};X.prototype.isDraggable=function(){return this._draggable};X.prototype.setRotation=function(V){this._rotation=V||0;this._update();return this};X.prototype.getRotation=function(){return this._rotation};X.prototype.setRotationAlignment=function(V){this._rotationAlignment=V||"auto";this._update();return this};X.prototype.getRotationAlignment=function(){return this._rotationAlignment};X.prototype.setPitchAlignment=function(V){this._pitchAlignment=
V&&"auto"!==V?V:this._rotationAlignment;this._update();return this};X.prototype.getPitchAlignment=function(){return this._pitchAlignment};return X}(a.Evented),di={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6E3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Mh,ri=0,Ph=!1,ui=function(S){function X(V){S.call(this);this.options=a.extend({},di,V);a.bindAll("_onSuccess _onError _onZoom _finish _setupUI _updateCamera _updateMarker".split(" "),
this)}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;X.prototype.onAdd=function(V){this._map=V;this._container=cb.create("div","mapboxgl-ctrl mapboxgl-ctrl-group");ya(this._setupUI);return this._container};X.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(a.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0);this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove();
this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove();cb.remove(this._container);this._map.off("zoom",this._onZoom);this._map=void 0;ri=0;Ph=!1};X.prototype._isOutOfMapMaxBounds=function(V){var ea=this._map.getMaxBounds();V=V.coords;return ea&&(V.longitude<ea.getWest()||V.longitude>ea.getEast()||V.latitude<ea.getSouth()||V.latitude>ea.getNorth())};X.prototype._setErrorState=function(){switch(this._watchState){case "WAITING_ACTIVE":this._watchState="ACTIVE_ERROR";
this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case "ACTIVE_LOCK":this._watchState="ACTIVE_ERROR";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case "BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),
this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}};X.prototype._onSuccess=function(V){if(this._map){if(this._isOutOfMapMaxBounds(V))this._setErrorState(),this.fire(new a.Event("outofmaxbounds",V)),this._updateMarker();else{if(this.options.trackUserLocation)switch(this._lastKnownPosition=V,this._watchState){case "WAITING_ACTIVE":case "ACTIVE_LOCK":case "ACTIVE_ERROR":this._watchState="ACTIVE_LOCK";
this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case "BACKGROUND":case "BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&
"OFF"!==this._watchState&&this._updateMarker(V);this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(V);this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale");this.fire(new a.Event("geolocate",V))}this._finish()}};X.prototype._updateCamera=function(V){var ea=new a.LngLat(V.coords.longitude,V.coords.latitude);V=V.coords.accuracy;var va=this._map.getBearing();va=a.extend({bearing:va},this.options.fitBoundsOptions);this._map.fitBounds(ea.toBounds(V),
va,{geolocateSource:!0})};X.prototype._updateMarker=function(V){if(V){var ea=new a.LngLat(V.coords.longitude,V.coords.latitude);this._accuracyCircleMarker.setLngLat(ea).addTo(this._map);this._userLocationDotMarker.setLngLat(ea).addTo(this._map);this._accuracy=V.coords.accuracy;this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()};X.prototype._updateCircleRadius=function(){var V=this._map._container.clientHeight/
2,ea=this._map.unproject([0,V]);V=this._map.unproject([1,V]);ea=ea.distanceTo(V);ea=Math.ceil(2*this._accuracy/ea);this._circleElement.style.width=ea+"px";this._circleElement.style.height=ea+"px"};X.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()};X.prototype._onError=function(V){if(this._map){if(this.options.trackUserLocation)if(1===V.code){this._watchState="OFF";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");
this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error");this._geolocateButton.disabled=!0;var ea=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=ea;this._geolocateButton.setAttribute("aria-label",ea);void 0!==
this._geolocationWatchID&&this._clearWatch()}else{if(3===V.code&&Ph)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale");this.fire(new a.Event("error",V));this._finish()}};X.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId);this._timeoutId=void 0};X.prototype._setupUI=function(V){var ea=this;this._container.addEventListener("contextmenu",function(va){return va.preventDefault()});
this._geolocateButton=cb.create("button","mapboxgl-ctrl-geolocate",this._container);cb.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0);this._geolocateButton.type="button";!1===V?(a.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled."),V=this._map._getUIString("GeolocateControl.LocationNotAvailable"),this._geolocateButton.disabled=!0,this._geolocateButton.title=V,this._geolocateButton.setAttribute("aria-label",V)):(V=this._map._getUIString("GeolocateControl.FindMyLocation"),
this._geolocateButton.title=V,this._geolocateButton.setAttribute("aria-label",V));this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF");this.options.showUserLocation&&(this._dotElement=cb.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Rg(this._dotElement),this._circleElement=cb.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Rg({element:this._circleElement,pitchAlignment:"map"}),
this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom));this._geolocateButton.addEventListener("click",this.trigger.bind(this));this._setup=!0;if(this.options.trackUserLocation)this._map.on("movestart",function(va){var Da=va.originalEvent&&"resize"===va.originalEvent.type;va.geolocateSource||"ACTIVE_LOCK"!==ea._watchState||Da||(ea._watchState="BACKGROUND",ea._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),ea._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),
ea.fire(new a.Event("trackuserlocationend")))})};X.prototype.trigger=function(){if(!this._setup)return a.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case "OFF":this._watchState="WAITING_ACTIVE";this.fire(new a.Event("trackuserlocationstart"));break;case "WAITING_ACTIVE":case "ACTIVE_LOCK":case "ACTIVE_ERROR":case "BACKGROUND_ERROR":ri--;Ph=!1;this._watchState="OFF";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");
this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error");this.fire(new a.Event("trackuserlocationend"));break;case "BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&
this._updateCamera(this._lastKnownPosition),this.fire(new a.Event("trackuserlocationstart"))}switch(this._watchState){case "WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case "ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case "ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");
break;case "BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case "BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.setAttribute("aria-pressed",
"true");ri++;if(1<ri){var V={maximumAge:6E5,timeout:0};Ph=!0}else V=this.options.positionOptions,Ph=!1;this._geolocationWatchID=a.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,V)}}else a.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1E4);return!0};X.prototype._clearWatch=function(){a.window.navigator.geolocation.clearWatch(this._geolocationWatchID);this._geolocationWatchID=
void 0;this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.setAttribute("aria-pressed","false");this.options.showUserLocation&&this._updateMarker(null)};return X}(a.Evented),zg={maxWidth:100,unit:"metric"},Ue=function(S){this.options=a.extend({},zg,S);a.bindAll(["_onMove","setUnit"],this)};Ue.prototype.getDefaultPosition=function(){return"bottom-left"};Ue.prototype._onMove=function(){Aa(this._map,this._container,this.options)};Ue.prototype.onAdd=function(S){this._map=
S;this._container=cb.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",S.getContainer());this._map.on("move",this._onMove);this._onMove();return this._container};Ue.prototype.onRemove=function(){cb.remove(this._container);this._map.off("move",this._onMove);this._map=void 0};Ue.prototype.setUnit=function(S){this.options.unit=S;Aa(this._map,this._container,this.options)};var Dg=function(S){this._fullscreen=!1;S&&S.container&&(S.container instanceof a.window.HTMLElement?this._container=S.container:a.warnOnce("Full screen control 'container' must be a DOM element."));
a.bindAll(["_onClickFullscreen","_changeIcon"],this);"onfullscreenchange"in a.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in a.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in a.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in a.window.document&&(this._fullscreenchange="MSFullscreenChange")};Dg.prototype.onAdd=function(S){this._map=S;this._container||(this._container=this._map.getContainer());
this._controlContainer=cb.create("div","mapboxgl-ctrl mapboxgl-ctrl-group");this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",a.warnOnce("This device does not support fullscreen mode."));return this._controlContainer};Dg.prototype.onRemove=function(){cb.remove(this._controlContainer);this._map=null;a.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)};Dg.prototype._checkFullscreenSupport=function(){return!!(a.window.document.fullscreenEnabled||
a.window.document.mozFullScreenEnabled||a.window.document.msFullscreenEnabled||a.window.document.webkitFullscreenEnabled)};Dg.prototype._setupUI=function(){var S=this._fullscreenButton=cb.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);cb.create("span","mapboxgl-ctrl-icon",S).setAttribute("aria-hidden",!0);S.type="button";this._updateTitle();this._fullscreenButton.addEventListener("click",this._onClickFullscreen);a.window.document.addEventListener(this._fullscreenchange,this._changeIcon)};
Dg.prototype._updateTitle=function(){var S=this._getTitle();this._fullscreenButton.setAttribute("aria-label",S);this._fullscreenButton.title=S};Dg.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")};Dg.prototype._isFullscreen=function(){return this._fullscreen};Dg.prototype._changeIcon=function(){(a.window.document.fullscreenElement||a.window.document.mozFullScreenElement||a.window.document.webkitFullscreenElement||
a.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())};Dg.prototype._onClickFullscreen=function(){this._isFullscreen()?a.window.document.exitFullscreen?a.window.document.exitFullscreen():a.window.document.mozCancelFullScreen?a.window.document.mozCancelFullScreen():a.window.document.msExitFullscreen?
a.window.document.msExitFullscreen():a.window.document.webkitCancelFullScreen&&a.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Sg={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},ti=function(S){function X(V){S.call(this);
this.options=a.extend(Object.create(Sg),V);a.bindAll("_update _onClose remove _onMouseMove _onMouseUp _onDrag".split(" "),this)}S&&(X.__proto__=S);X.prototype=Object.create(S&&S.prototype);X.prototype.constructor=X;X.prototype.addTo=function(V){this._map&&this.remove();this._map=V;if(this.options.closeOnClick)this._map.on("click",this._onClose);if(this.options.closeOnMove)this._map.on("move",this._onClose);this._map.on("remove",this.remove);this._update();if(this._trackPointer)this._map.on("mousemove",
this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer");else this._map.on("move",this._update);this.fire(new a.Event("open"));return this};X.prototype.isOpen=function(){return!!this._map};X.prototype.remove=function(){this._content&&cb.remove(this._content);this._container&&(cb.remove(this._container),delete this._container);this._map&&(this._map.off("move",
this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map);this.fire(new a.Event("close"));return this};X.prototype.getLngLat=function(){return this._lngLat};X.prototype.setLngLat=function(V){this._lngLat=a.LngLat.convert(V);this._pos=null;this._trackPointer=!1;this._update();this._map&&(this._map.on("move",
this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer"));return this};X.prototype.trackPointer=function(){this._trackPointer=!0;this._pos=null;this._update();this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),
this._map._canvasContainer.classList.add("mapboxgl-track-pointer"));return this};X.prototype.getElement=function(){return this._container};X.prototype.setText=function(V){return this.setDOMContent(a.window.document.createTextNode(V))};X.prototype.setHTML=function(V){var ea=a.window.document.createDocumentFragment(),va=a.window.document.createElement("body");for(va.innerHTML=V;;){V=va.firstChild;if(!V)break;ea.appendChild(V)}return this.setDOMContent(ea)};X.prototype.getMaxWidth=function(){return this._container&&
this._container.style.maxWidth};X.prototype.setMaxWidth=function(V){this.options.maxWidth=V;this._update();return this};X.prototype.setDOMContent=function(V){this._createContent();this._content.appendChild(V);this._update();return this};X.prototype.addClassName=function(V){this._container&&this._container.classList.add(V)};X.prototype.removeClassName=function(V){this._container&&this._container.classList.remove(V)};X.prototype.toggleClassName=function(V){if(this._container)return this._container.classList.toggle(V)};
X.prototype._createContent=function(){this._content&&cb.remove(this._content);this._content=cb.create("div","mapboxgl-popup-content",this._container);this.options.closeButton&&(this._closeButton=cb.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="\x26#215;",this._closeButton.addEventListener("click",this._onClose))};X.prototype._onMouseUp=function(V){this._update(V.point)};
X.prototype._onMouseMove=function(V){this._update(V.point)};X.prototype._onDrag=function(V){this._update(V.point)};X.prototype._update=function(V){var ea=this,va=this._lngLat||this._trackPointer;if(this._map&&va&&this._content&&(this._container||(this._container=cb.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=cb.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(nb){return ea._container.classList.add(nb)}),
this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Ma(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||V)){V=this._pos=this._trackPointer&&V?V:this._map.project(this._lngLat);var Da=this.options.anchor;va=Ta(this.options.offset);if(!Da){Da=this._container.offsetWidth;
var Ra=this._container.offsetHeight;Ra=V.y+va.bottom.y<Ra?["top"]:V.y>this._map.transform.height-Ra?["bottom"]:[];V.x<Da/2?Ra.push("left"):V.x>this._map.transform.width-Da/2&&Ra.push("right");Da=0===Ra.length?"bottom":Ra.join("-")}V=V.add(va[Da]).round();cb.setTransform(this._container,ci[Da]+" translate("+V.x+"px,"+V.y+"px)");La(this._container,Da,"popup")}};X.prototype._onClose=function(){this.remove()};return X}(a.Evented),si={version:a.version,supported:bb,setRTLTextPlugin:a.setRTLTextPlugin,
getRTLTextPluginStatus:a.getRTLTextPluginStatus,Map:Vh,NavigationControl:yh,GeolocateControl:ui,AttributionControl:Of,ScaleControl:Ue,FullscreenControl:Dg,Popup:ti,Marker:Rg,Style:Yg,LngLat:a.LngLat,LngLatBounds:a.LngLatBounds,Point:a.Point,MercatorCoordinate:a.MercatorCoordinate,Evented:a.Evented,config:a.config,prewarm:function(){v().acquire("mapboxgl_preloaded_worker_pool")},clearPrewarmedResources:function(){var S=qe;S&&(S.isPreloaded()&&1===S.numActive()?(S.release("mapboxgl_preloaded_worker_pool"),
qe=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return a.config.ACCESS_TOKEN},set accessToken(S){a.config.ACCESS_TOKEN=S},get baseApiUrl(){return a.config.API_URL},set baseApiUrl(S){a.config.API_URL=S},get workerCount(){return qd.workerCount},set workerCount(S){qd.workerCount=S},get maxParallelImageRequests(){return a.config.MAX_PARALLEL_IMAGE_REQUESTS},
set maxParallelImageRequests(S){a.config.MAX_PARALLEL_IMAGE_REQUESTS=S},clearStorage:function(S){a.clearTileCache(S)},workerUrl:""};return si});return m})},{}],462:[function(b,N,G){function p(k,m,a){for(var g=Array(k),h=0;h<k;++h)g[h]=0,h===m&&(g[h]+=.5),h===a&&(g[h]+=.5);return g}N.exports=function(k){for(var m=1<<k+1,a=Array(m),g=0;g<m;++g){var h=g;var r=k,l=g;if(0===l||l===(1<<r+1)-1)var c=[];else{var d=[];c=[];for(var e=0;e<=r;++e)if(l&1<<e){d.push(p(r,e-1,e-1));c.push(null);for(var f=0;f<=r;++f)~l&
1<<f&&(d.push(p(r,e-1,f-1)),c.push([e,f]))}r=n(d);l=[];e=0;b:for(;e<r.length;++e){d=r[e];var q=[];for(f=0;f<d.length;++f){if(!c[d[f]])continue b;q.push(c[d[f]].slice())}l.push(q)}c=l}a[h]=c}return a};var n=b("convex-hull")},{"convex-hull":141}],463:[function(b,N,G){function p(f,q,t,w,x){f[0]=q[0]*w+t[0]*x;f[1]=q[1]*w+t[1]*x;f[2]=q[2]*w+t[2]*x}var n=b("./normalize");G=b("gl-mat4/create");var k=b("gl-mat4/clone"),m=b("gl-mat4/determinant"),a=b("gl-mat4/invert"),g=b("gl-mat4/transpose"),h={length:b("gl-vec3/length"),
normalize:b("gl-vec3/normalize"),dot:b("gl-vec3/dot"),cross:b("gl-vec3/cross")},r=G(),l=G(),c=[0,0,0,0],d=[[0,0,0],[0,0,0],[0,0,0]],e=[0,0,0];N.exports=function(f,q,t,w,x,z){q||(q=[0,0,0]);t||(t=[0,0,0]);w||(w=[0,0,0]);x||(x=[0,0,0,1]);z||(z=[0,0,0,1]);if(!n(r,f))return!1;k(l,r);l[3]=0;l[7]=0;l[11]=0;l[15]=1;if(Math.abs(1E-8>m(l)))return!1;var B=r[3],A=r[7],D=r[11];f=r[12];var C=r[13],v=r[14],y=r[15];if(0!==B||0!==A||0!==D){c[0]=B;c[1]=A;c[2]=D;c[3]=y;if(!a(l,l))return!1;g(l,l);B=c[0];A=c[1];D=c[2];
y=c[3];x[0]=l[0]*B+l[4]*A+l[8]*D+l[12]*y;x[1]=l[1]*B+l[5]*A+l[9]*D+l[13]*y;x[2]=l[2]*B+l[6]*A+l[10]*D+l[14]*y;x[3]=l[3]*B+l[7]*A+l[11]*D+l[15]*y}else x[0]=x[1]=x[2]=0,x[3]=1;q[0]=f;q[1]=C;q[2]=v;d[0][0]=r[0];d[0][1]=r[1];d[0][2]=r[2];d[1][0]=r[4];d[1][1]=r[5];d[1][2]=r[6];d[2][0]=r[8];d[2][1]=r[9];d[2][2]=r[10];t[0]=h.length(d[0]);h.normalize(d[0],d[0]);w[0]=h.dot(d[0],d[1]);p(d[1],d[1],d[0],1,-w[0]);t[1]=h.length(d[1]);h.normalize(d[1],d[1]);w[0]/=t[1];w[1]=h.dot(d[0],d[2]);p(d[2],d[2],d[0],1,-w[1]);
w[2]=h.dot(d[1],d[2]);p(d[2],d[2],d[1],1,-w[2]);t[2]=h.length(d[2]);h.normalize(d[2],d[2]);w[1]/=t[2];w[2]/=t[2];h.cross(e,d[1],d[2]);if(0>h.dot(d[0],e))for(q=0;3>q;q++)t[q]*=-1,d[q][0]*=-1,d[q][1]*=-1,d[q][2]*=-1;z[0]=.5*Math.sqrt(Math.max(1+d[0][0]-d[1][1]-d[2][2],0));z[1]=.5*Math.sqrt(Math.max(1-d[0][0]+d[1][1]-d[2][2],0));z[2]=.5*Math.sqrt(Math.max(1-d[0][0]-d[1][1]+d[2][2],0));z[3]=.5*Math.sqrt(Math.max(1+d[0][0]+d[1][1]+d[2][2],0));d[2][1]>d[1][2]&&(z[0]=-z[0]);d[0][2]>d[2][0]&&(z[1]=-z[1]);
d[1][0]>d[0][1]&&(z[2]=-z[2]);return!0}},{"./normalize":464,"gl-mat4/clone":284,"gl-mat4/create":286,"gl-mat4/determinant":287,"gl-mat4/invert":299,"gl-mat4/transpose":312,"gl-vec3/cross":368,"gl-vec3/dot":373,"gl-vec3/length":383,"gl-vec3/normalize":390}],464:[function(b,N,G){N.exports=function(p,n){var k=n[15];if(0===k)return!1;k=1/k;for(var m=0;16>m;m++)p[m]=n[m]*k;return!0}},{}],465:[function(b,N,G){function p(){return{translate:[0,0,0],scale:[1,1,1],skew:[0,0,0],perspective:[0,0,0,1],quaternion:[0,
0,0,1]}}var n=b("gl-vec3/lerp"),k=b("mat4-recompose"),m=b("mat4-decompose"),a=b("gl-mat4/determinant"),g=b("quat-slerp"),h=p(),r=p(),l=p();N.exports=function(c,d,e,f){if(0===a(d)||0===a(e))return!1;d=m(d,h.translate,h.scale,h.skew,h.perspective,h.quaternion);e=m(e,r.translate,r.scale,r.skew,r.perspective,r.quaternion);if(!d||!e)return!1;n(l.translate,h.translate,r.translate,f);n(l.skew,h.skew,r.skew,f);n(l.scale,h.scale,r.scale,f);n(l.perspective,h.perspective,r.perspective,f);g(l.quaternion,h.quaternion,
r.quaternion,f);k(c,l.translate,l.scale,l.skew,l.perspective,l.quaternion);return!0}},{"gl-mat4/determinant":287,"gl-vec3/lerp":384,"mat4-decompose":463,"mat4-recompose":466,"quat-slerp":529}],466:[function(b,N,G){var p={identity:b("gl-mat4/identity"),translate:b("gl-mat4/translate"),multiply:b("gl-mat4/multiply"),create:b("gl-mat4/create"),scale:b("gl-mat4/scale"),fromRotationTranslation:b("gl-mat4/fromRotationTranslation")};p.create();var n=p.create();N.exports=function(k,m,a,g,h,r){p.identity(k);
p.fromRotationTranslation(k,r,m);k[3]=h[0];k[7]=h[1];k[11]=h[2];k[15]=h[3];p.identity(n);0!==g[2]&&(n[9]=g[2],p.multiply(k,k,n));0!==g[1]&&(n[9]=0,n[8]=g[1],p.multiply(k,k,n));0!==g[0]&&(n[8]=0,n[4]=g[0],p.multiply(k,k,n));p.scale(k,k,a);return k}},{"gl-mat4/create":286,"gl-mat4/fromRotationTranslation":290,"gl-mat4/identity":297,"gl-mat4/multiply":301,"gl-mat4/scale":309,"gl-mat4/translate":311}],467:[function(b,N,G){N.exports=Math.log2||function(p){return Math.log(p)*Math.LOG2E}},{}],468:[function(b,
N,G){function p(f){this._components=f.slice();this._time=[0];this.prevMatrix=f.slice();this.nextMatrix=f.slice();this.computedMatrix=f.slice();this.computedInverse=f.slice();this.computedEye=[0,0,0];this.computedUp=[0,0,0];this.computedCenter=[0,0,0];this.computedRadius=[0];this._limits=[-Infinity,Infinity]}var n=b("binary-search-bounds"),k=b("mat4-interpolate"),m=b("gl-mat4/invert"),a=b("gl-mat4/rotateX"),g=b("gl-mat4/rotateY"),h=b("gl-mat4/rotateZ"),r=b("gl-mat4/lookAt"),l=b("gl-mat4/translate");
b("gl-mat4/scale");var c=b("gl-vec3/normalize"),d=[0,0,0];N.exports=function(f){f=f||{};return new p(f.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};b=p.prototype;b.recalcMatrix=function(f){var q=this._time,t=n.le(q,f),w=this.computedMatrix;if(!(0>t)){var x=this._components;if(t===q.length-1)for(var z=16*t,B=0;16>B;++B)w[B]=x[z++];else{var A=q[t+1]-q[t];z=16*t;var D=this.prevMatrix,C=!0;for(B=0;16>B;++B)D[B]=x[z++];var v=this.nextMatrix;for(B=0;16>B;++B)v[B]=x[z++],C=C&&D[B]===v[B];if(1E-6>A||C)for(B=
0;16>B;++B)w[B]=D[B];else k(w,D,v,(f-q[t])/A)}B=this.computedUp;B[0]=w[1];B[1]=w[5];B[2]=w[9];c(B,B);B=this.computedInverse;m(B,w);f=this.computedEye;q=B[15];f[0]=B[12]/q;f[1]=B[13]/q;f[2]=B[14]/q;q=this.computedCenter;t=Math.exp(this.computedRadius[0]);for(B=0;3>B;++B)q[B]=f[B]-w[2+4*B]*t}};b.idle=function(f){if(!(f<this.lastT())){for(var q=this._components,t=q.length-16,w=0;16>w;++w)q.push(q[t++]);this._time.push(f)}};b.flush=function(f){f=n.gt(this._time,f)-2;0>f||(this._time.splice(0,f),this._components.splice(0,
16*f))};b.lastT=function(){return this._time[this._time.length-1]};b.lookAt=function(f,q,t,w){this.recalcMatrix(f);q=q||this.computedEye;t=t||d;w=w||this.computedUp;this.setMatrix(f,r(this.computedMatrix,q,t,w));for(w=f=0;3>w;++w)f+=Math.pow(t[w]-q[w],2);f=Math.log(Math.sqrt(f));this.computedRadius[0]=f};b.rotate=function(f,q,t,w){this.recalcMatrix(f);var x=this.computedInverse;q&&g(x,x,q);t&&a(x,x,t);w&&h(x,x,w);this.setMatrix(f,m(this.computedMatrix,x))};var e=[0,0,0];b.pan=function(f,q,t,w){e[0]=
-(q||0);e[1]=-(t||0);e[2]=-(w||0);this.recalcMatrix(f);q=this.computedInverse;l(q,q,e);this.setMatrix(f,m(q,q))};b.translate=function(f,q,t,w){e[0]=q||0;e[1]=t||0;e[2]=w||0;this.recalcMatrix(f);q=this.computedMatrix;l(q,q,e);this.setMatrix(f,q)};b.setMatrix=function(f,q){if(!(f<this.lastT()))for(this._time.push(f),f=0;16>f;++f)this._components.push(q[f])};b.setDistance=function(f,q){this.computedRadius[0]=q};b.setDistanceLimits=function(f,q){var t=this._limits;t[0]=f;t[1]=q};b.getDistanceLimits=function(f){var q=
this._limits;return f?(f[0]=q[0],f[1]=q[1],f):q}},{"binary-search-bounds":103,"gl-mat4/invert":299,"gl-mat4/lookAt":300,"gl-mat4/rotateX":306,"gl-mat4/rotateY":307,"gl-mat4/rotateZ":308,"gl-mat4/scale":309,"gl-mat4/translate":311,"gl-vec3/normalize":390,"mat4-interpolate":465}],469:[function(b,N,G){N.exports=function(n){var k=n.length;if(3>k){for(var m=Array(k),a=0;a<k;++a)m[a]=a;return 2===k&&n[0][0]===n[1][0]&&n[0][1]===n[1][1]?[0]:m}m=Array(k);for(a=0;a<k;++a)m[a]=a;m.sort(function(d,e){var f=
n[d][0]-n[e][0];return f?f:n[d][1]-n[e][1]});var g=[m[0],m[1]],h=[m[0],m[1]];for(a=2;a<k;++a){for(var r=m[a],l=n[r],c=g.length;1<c&&0>=p(n[g[c-2]],n[g[c-1]],l);)--c,g.pop();g.push(r);for(c=h.length;1<c&&0<=p(n[h[c-2]],n[h[c-1]],l);)--c,h.pop();h.push(r)}m=Array(h.length+g.length-2);a=k=0;for(r=g.length;a<r;++a)m[k++]=g[a];for(a=h.length-2;0<a;--a)m[k++]=h[a];return m};var p=b("robust-orientation")[3]},{"robust-orientation":548}],470:[function(b,N,G){N.exports=function(n,k){function m(B){var A=!1;
"altKey"in B&&(A=A||B.altKey!==w.alt,w.alt=!!B.altKey);"shiftKey"in B&&(A=A||B.shiftKey!==w.shift,w.shift=!!B.shiftKey);"ctrlKey"in B&&(A=A||B.ctrlKey!==w.control,w.control=!!B.ctrlKey);"metaKey"in B&&(A=A||B.metaKey!==w.meta,w.meta=!!B.metaKey);return A}function a(B,A){var D=p.x(A),C=p.y(A);"buttons"in A&&(B=A.buttons|0);if(B!==f||D!==q||C!==t||m(A))f=B|0,q=D||0,t=C||0,k&&k(f,q,t,w)}function g(B){a(0,B)}function h(){if(f||q||t||w.shift||w.alt||w.meta||w.control)f=q=t=0,w.shift=w.alt=w.control=w.meta=
!1,k&&k(0,0,0,w)}function r(B){m(B)&&k&&k(f,q,t,w)}function l(B){0===p.buttons(B)?a(0,B):a(f,B)}function c(B){a(f|p.buttons(B),B)}function d(B){a(f&~p.buttons(B),B)}function e(){x||(x=!0,n.addEventListener("mousemove",l),n.addEventListener("mousedown",c),n.addEventListener("mouseup",d),n.addEventListener("mouseleave",g),n.addEventListener("mouseenter",g),n.addEventListener("mouseout",g),n.addEventListener("mouseover",g),n.addEventListener("blur",h),n.addEventListener("keyup",r),n.addEventListener("keydown",
r),n.addEventListener("keypress",r),n!==window&&(window.addEventListener("blur",h),window.addEventListener("keyup",r),window.addEventListener("keydown",r),window.addEventListener("keypress",r)))}k||(k=n,n=window);var f=0,q=0,t=0,w={shift:!1,alt:!1,control:!1,meta:!1},x=!1;e();var z={element:n};Object.defineProperties(z,{enabled:{get:function(){return x},set:function(B){B?e():x&&(x=!1,n.removeEventListener("mousemove",l),n.removeEventListener("mousedown",c),n.removeEventListener("mouseup",d),n.removeEventListener("mouseleave",
g),n.removeEventListener("mouseenter",g),n.removeEventListener("mouseout",g),n.removeEventListener("mouseover",g),n.removeEventListener("blur",h),n.removeEventListener("keyup",r),n.removeEventListener("keydown",r),n.removeEventListener("keypress",r),n!==window&&(window.removeEventListener("blur",h),window.removeEventListener("keyup",r),window.removeEventListener("keydown",r),window.removeEventListener("keypress",r)))},enumerable:!0},buttons:{get:function(){return f},enumerable:!0},x:{get:function(){return q},
enumerable:!0},y:{get:function(){return t},enumerable:!0},mods:{get:function(){return w},enumerable:!0}});return z};var p=b("mouse-event")},{"mouse-event":472}],471:[function(b,N,G){var p={left:0,top:0};N.exports=function(n,k,m){k=k||n.currentTarget||n.srcElement;Array.isArray(m)||(m=[0,0]);var a=n.clientX||0;n=n.clientY||0;k=k===window||k===document||k===document.body?p:k.getBoundingClientRect();m[0]=a-k.left;m[1]=n-k.top;return m}},{}],472:[function(b,N,G){function p(n){return n.target||n.srcElement||
window}G.buttons=function(n){if("object"===typeof n){if("buttons"in n)return n.buttons;if("which"in n){n=n.which;if(2===n)return 4;if(3===n)return 2;if(0<n)return 1<<n-1}else if("button"in n){n=n.button;if(1===n)return 4;if(2===n)return 2;if(0<=n)return 1<<n}}return 0};G.element=p;G.x=function(n){if("object"===typeof n){if("offsetX"in n)return n.offsetX;var k=p(n).getBoundingClientRect();return n.clientX-k.left}return 0};G.y=function(n){if("object"===typeof n){if("offsetY"in n)return n.offsetY;var k=
p(n).getBoundingClientRect();return n.clientY-k.top}return 0}},{}],473:[function(b,N,G){var p=b("to-px");N.exports=function(n,k,m){"function"===typeof n&&(m=!!k,k=n,n=window);var a=p("ex",n),g=function(h){m&&h.preventDefault();var r=h.deltaX||0,l=h.deltaY||0,c=h.deltaZ||0,d=1;switch(h.deltaMode){case 1:d=a;break;case 2:d=window.innerHeight}r*=d;l*=d;c*=d;if(r||l||c)return k(r,l,c,h)};n.addEventListener("wheel",g);return g}},{"to-px":600}],474:[function(b,N,G){(function(p,n){(function(){(function(k,
m,a){m[k]=m[k]||a();"undefined"!=typeof N&&N.exports&&(N.exports=m[k])})("Promise","undefined"!=typeof p?p:this,function(){function k(z,B){w.add(z,B);e||(e=q(w.drain))}function m(z){var B=typeof z;if(null!=z&&("object"==B||"function"==B))var A=z.then;return"function"==typeof A?A:!1}function a(){for(var z=0;z<this.chain.length;z++){var B=void 0,A=void 0,D=1===this.state?this.chain[z].success:this.chain[z].failure,C=this.chain[z];try{!1===D?C.reject(this.msg):(A=!0===D?this.msg:D.call(void 0,this.msg),
A===C.promise?C.reject(TypeError("Promise-chain cycle")):(B=m(A))?B.call(A,C.resolve,C.reject):C.resolve(A))}catch(v){C.reject(v)}}this.chain.length=0}function g(z){var B,A=this;if(!A.triggered){A.triggered=!0;A.def&&(A=A.def);try{(B=m(z))?k(function(){var D=new l(A);try{B.call(z,function(){g.apply(D,arguments)},function(){h.apply(D,arguments)})}catch(C){h.call(D,C)}}):(A.msg=z,A.state=1,0<A.chain.length&&k(a,A))}catch(D){h.call(new l(A),D)}}}function h(z){var B=this;B.triggered||(B.triggered=!0,
B.def&&(B=B.def),B.msg=z,B.state=2,0<B.chain.length&&k(a,B))}function r(z,B,A,D){for(var C=0;C<B.length;C++)(function(v){z.resolve(B[v]).then(function(y){A(v,y)},D)})(C)}function l(z){this.def=z;this.triggered=!1}function c(z){this.promise=z;this.state=0;this.triggered=!1;this.chain=[];this.msg=void 0}function d(z){if("function"!=typeof z)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var B=new c(this);this.then=function(A,D){var C={success:"function"==
typeof A?A:!0,failure:"function"==typeof D?D:!1};C.promise=new this.constructor(function(v,y){if("function"!=typeof v||"function"!=typeof y)throw TypeError("Not a function");C.resolve=v;C.reject=y});B.chain.push(C);0!==B.state&&k(a,B);return C.promise};this["catch"]=function(A){return this.then(void 0,A)};try{z.call(void 0,function(A){g.call(B,A)},function(A){h.call(B,A)})}catch(A){h.call(B,A)}}var e,f=Object.prototype.toString,q="undefined"!=typeof n?function(z){return n(z)}:setTimeout;try{Object.defineProperty({},
"x",{});var t=function(z,B,A,D){return Object.defineProperty(z,B,{value:A,writable:!0,configurable:!1!==D})}}catch(z){t=function(B,A,D){B[A]=D;return B}}var w=function(){function z(C,v){this.fn=C;this.self=v;this.next=void 0}var B,A,D;return{add:function(C,v){D=new z(C,v);A?A.next=D:B=D;A=D;D=void 0},drain:function(){var C=B;for(B=A=e=void 0;C;)C.fn.call(C.self),C=C.next}}}();var x=t({},"constructor",d,!1);d.prototype=x;t(x,"__NPO__",0,!1);t(d,"resolve",function(z){return z&&"object"==typeof z&&1===
z.__NPO__?z:new this(function(B,A){if("function"!=typeof B||"function"!=typeof A)throw TypeError("Not a function");B(z)})});t(d,"reject",function(z){return new this(function(B,A){if("function"!=typeof B||"function"!=typeof A)throw TypeError("Not a function");A(z)})});t(d,"all",function(z){var B=this;return"[object Array]"!=f.call(z)?B.reject(TypeError("Not an array")):0===z.length?B.resolve([]):new B(function(A,D){if("function"!=typeof A||"function"!=typeof D)throw TypeError("Not a function");var C=
z.length,v=Array(C),y=0;r(B,z,function(F,J){v[F]=J;++y===C&&A(v)},D)})});t(d,"race",function(z){var B=this;return"[object Array]"!=f.call(z)?B.reject(TypeError("Not an array")):new B(function(A,D){if("function"!=typeof A||"function"!=typeof D)throw TypeError("Not a function");r(B,z,function(C,v){A(v)},D)})});return d})}).call(this)}).call(this,"undefined"!==typeof Re?Re:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},b("timers").setImmediate)},{timers:597}],475:[function(b,N,
G){function p(c,d,e){for(var f=0,q=0;q<c;++q)d&1<<q&&(f|=1<<e[q]);return f}function n(c,d,e,f,q,t){function w(L,H){v.push("for(","i"+q[L],"\x3d",H,";","i"+q[L],"\x3c","s"+q[L],";","++","i"+q[L],"){")}function x(L){for(var H=0;H<A;++H)v.push("p"+H,"+\x3d","u"+H+"_"+q[L],";");v.push("}")}function z(){for(var L=1;L<1<<D;++L)v.push(l,"\x3d","e"+L,";","e"+L,"\x3d","y"+L,";","y"+L,"\x3d",l,";")}function B(L,H){if(0>L){for(var M=0;M<A;++M)t[M]?v.push("c"+M+"_0","\x3d","d"+M,".get(","p"+M,");"):v.push("c"+
M+"_0","\x3d","d"+M,"[","p"+M,"];");L=[];for(M=0;M<A;++M)L.push("c"+M+"_0");for(M=0;M<f;++M)L.push("x"+M);v.push("b0","\x3d",a,"[",r,"]\x3dphase(",L.join(),");");for(L=1;L<1<<D;++L)v.push("b"+L,"\x3d",a,"[",r,"+","e"+L,"];");M=[];for(L=1;L<1<<D;++L)M.push("(b0!\x3d\x3db"+L+")");v.push("if(",M.join("||"),"){");var Q=[];for(M=0;M<D;++M)Q.push("i"+M);for(M=0;M<A;++M)for(Q.push("c"+M+"_0"),L=1;L<1<<D;++L)t[M]?v.push("c"+M+"_"+L,"\x3d","d"+M,".get(","p"+M,"+","d"+M+"_"+L,");"):v.push("c"+M+"_"+L,"\x3d",
"d"+M,"[","p"+M,"+","d"+M+"_"+L,"];"),Q.push("c"+M+"_"+L);for(M=0;M<1<<D;++M)Q.push("b"+M);for(M=0;M<f;++M)Q.push("x"+M);v.push("vertex(",Q.join(),");","v0","\x3d",m,"[",r,"]\x3d",g,"++;");M=(1<<D)-1;Q="b"+M;for(L=0;L<D;++L)if(0===(H&~(1<<L))){for(var Z=M^1<<L,ca="b"+Z,W=[],T=Z;0<T;T=T-1&Z)W.push(m+"["+r+"+e"+T+"]");W.push("v0");for(T=0;T<A;++T)L&1?W.push("c"+T+"_"+M,"c"+T+"_"+Z):W.push("c"+T+"_"+Z,"c"+T+"_"+M);L&1?W.push(Q,ca):W.push(ca,Q);for(T=0;T<f;++T)W.push("x"+T);v.push("if(",Q,"!\x3d\x3d",
ca,"){","face(",W.join(),")}")}v.push("}",r,"+\x3d1;")}else{for(M=L-1;0<=M;--M)w(M,0);Q=[];for(M=0;M<A;++M)t[M]?Q.push("d"+M+".get(p"+M+")"):Q.push("d"+M+"[p"+M+"]");for(M=0;M<f;++M)Q.push("x"+M);v.push(a,"[",r,"++]\x3dphase(",Q.join(),");");for(M=0;M<L;++M)x(M);for(M=0;M<A;++M)v.push("p"+M,"+\x3d","u"+M+"_"+q[L],";");v.push("if(","s"+q[L],"\x3e0){","i"+q[L],"\x3d1;");B(L-1,H|1<<q[L]);for(M=0;M<A;++M)v.push("p"+M,"+\x3d","u"+M+"_"+q[L],";");L===D-1&&(v.push(r,"\x3d0;"),z());w(L,2);B(L-1,H);L===D-
1&&(v.push("if(","i"+q[D-1],"\x261){",r,"\x3d0;}"),z());x(L);v.push("}")}}var A=t.length,D=q.length;if(2>D)throw Error("ndarray-extract-contour: Dimension must be at least 2");for(var C="extractContour"+q.join("_"),v=[],y=[],F=[],J=0;J<A;++J)F.push("a"+J);for(J=0;J<f;++J)F.push("x"+J);for(J=0;J<D;++J)y.push("s"+J+"\x3da0.shape["+J+"]|0");for(J=0;J<A;++J){y.push("d"+J+"\x3da"+J+".data","o"+J+"\x3da"+J+".offset|0");for(var K=0;K<D;++K)y.push("t"+J+"_"+K+"\x3da"+J+".stride["+K+"]|0")}for(J=0;J<A;++J)for(y.push("p"+
J+"\x3do"+J),y.push("c"+J+"_0"),K=1;K<1<<D;++K){for(var O=[],I=0;I<D;++I)K&1<<I&&O.push("-t"+(J+"_"+I));y.push("d"+J+"_"+K+"\x3d("+O.join("")+")|0");y.push("c"+J+"_"+K+"\x3d0")}for(J=0;J<A;++J)for(K=0;K<D;++K)I=["t"+J+"_"+q[K]],0<K&&I.push("t"+J+"_"+q[K-1]+"*s"+q[K-1]),y.push("u"+J+"_"+q[K]+"\x3d("+I.join("-")+")|0");for(J=0;J<D;++J)y.push("i"+J+"\x3d0");y.push(g+"\x3d0");K=["2"];for(J=D-2;0<=J;--J)K.push("s"+q[J]);y.push(h+"\x3d("+K.join("*")+")|0",a+"\x3dmallocUint32("+h+")",m+"\x3dmallocUint32("+
h+")",r+"\x3d0");y.push("b0\x3d0");for(K=1;K<1<<D;++K){J=[];O=[];for(I=0;I<D;++I)K&1<<I&&(0===O.length?J.push("1"):J.unshift(O.join("*"))),O.push("s"+q[I]);I="";0>J[0].indexOf("s"+q[D-2])&&(I="-");O=p(D,K,q);y.push("e"+O+"\x3d(-"+J.join("-")+")|0","y"+O+"\x3d("+I+J.join("-")+")|0","b"+O+"\x3d0")}y.push("v0\x3d0",l+"\x3d0");B(D-1,0);v.push("freeUint32(",m,");freeUint32(",a,");");C=["'use strict';function ",C,"(",F.join(),"){var ",y.join(),";",v.join(""),"}return ",C].join("");return(new Function("vertex",
"face","phase","mallocUint32","freeUint32",C))(c,d,e,k.mallocUint32,k.freeUint32)}var k=b("typedarray-pool");N.exports=function(c){function d(z){throw Error("ndarray-extract-contour: "+z);}"object"!==typeof c&&d("Must specify arguments");var e=c.order;Array.isArray(e)||d("Must specify order");var f=c.arrayArguments||1;1>f&&d("Must have at least one array argument");var q=c.scalarArguments||0;0>q&&d("Scalar arg count must be \x3e 0");"function"!==typeof c.vertex&&d("Must specify vertex creation function");
"function"!==typeof c.cell&&d("Must specify cell creation function");"function"!==typeof c.phase&&d("Must specify phase function");for(var t=c.getters||[],w=Array(f),x=0;x<f;++x)0<=t.indexOf(x)?w[x]=!0:w[x]=!1;return n(c.vertex,c.cell,c.phase,q,e,w)};var m="V",a="P",g="N",h="Q",r="X",l="T"},{"typedarray-pool":617}],476:[function(b,N,G){function p(l){if(l in m)return m[l];for(var c=[],d=0;d<l;++d)c.push("out",d,"s\x3d0.5*(inp",d,"l-inp",d,"r);");var e=["array"],f=["junk"];for(d=0;d<l;++d){e.push("array");
f.push("out"+d+"s");var q=n(l);q[d]=-1;e.push({array:0,offset:q.slice()});q[d]=1;e.push({array:0,offset:q.slice()});f.push("inp"+d+"l","inp"+d+"r")}return m[l]=k({args:e,pre:g,post:g,body:{body:c.join(""),args:f.map(function(t){return{name:t,lvalue:0===t.indexOf("out"),rvalue:0===t.indexOf("inp"),count:"junk"!==t|0}}),thisVars:[],localVars:[]},funcName:"fdTemplate"+l})}N.exports=function(l,c,d){if(Array.isArray(d)){if(d.length!==c.dimension)throw Error("ndarray-gradient: invalid boundary conditions");
}else d="string"===typeof d?n(c.dimension,d):n(c.dimension,"clamp");if(l.dimension!==c.dimension+1)throw Error("ndarray-gradient: output dimension must be +1 input dimension");if(l.shape[c.dimension]!==c.dimension)throw Error("ndarray-gradient: output shape must match input shape");for(var e=0;e<c.dimension;++e)if(l.shape[e]!==c.shape[e])throw Error("ndarray-gradient: shape mismatch");if(0===c.size)return l;if(0>=c.dimension)return l.set(0),l;var f=d;d=f.join();e=a[d];if(!e){e=f.length;for(var q=
["function gradient(dst,src){var s\x3dsrc.shape.slice();"],t=0;t<1<<e;++t){for(var w=[],x=0;x<e;++x)t&1<<x&&w.push(x+1);for(var z=0;z<1<<w.length;++z){var B=w.slice();for(x=0;x<w.length;++x)z&1<<x&&(B[x]=-B[x]);x=B;B=e-x.length;for(var A=[],D=[],C=[],v=0;v<e;++v)0<=x.indexOf(v+1)?C.push("0"):0<=x.indexOf(-(v+1))?C.push("s["+v+"]-1"):(C.push("-1"),A.push("1"),D.push("s["+v+"]-2"));D=".lo("+A.join()+").hi("+D.join()+")";0===A.length&&(D="");if(0<B){q.push("if(1");for(v=0;v<e;++v)0<=x.indexOf(v+1)||
0<=x.indexOf(-(v+1))||q.push("\x26\x26s[",v,"]\x3e2");q.push("){grad",B,"(src.pick(",C.join(),")",D);for(v=0;v<e;++v)0<=x.indexOf(v+1)||0<=x.indexOf(-(v+1))||q.push(",dst.pick(",C.join(),",",v,")",D);q.push(");")}for(v=0;v<x.length;++v){A=Math.abs(x[v])-1;var y="dst.pick("+C.join()+","+A+")"+D;switch(f[A]){case "clamp":var F=C.slice(),J=C.slice();0>x[v]?F[A]="s["+A+"]-2":J[A]="1";0===B?q.push("if(s[",A,"]\x3e1){dst.set(",C.join(),",",A,",0.5*(src.get(",F.join(),")-src.get(",J.join(),")))}else{dst.set(",
C.join(),",",A,",0)};"):q.push("if(s[",A,"]\x3e1){diff(",y,",src.pick(",F.join(),")",D,",src.pick(",J.join(),")",D,");}else{zero(",y,");};");break;case "mirror":0===B?q.push("dst.set(",C.join(),",",A,",0);"):q.push("zero(",y,");");break;case "wrap":F=C.slice();J=C.slice();0>x[v]?(F[A]="s["+A+"]-2",J[A]="0"):(F[A]="s["+A+"]-1",J[A]="1");0===B?q.push("if(s[",A,"]\x3e2){dst.set(",C.join(),",",A,",0.5*(src.get(",F.join(),")-src.get(",J.join(),")))}else{dst.set(",C.join(),",",A,",0)};"):q.push("if(s[",
A,"]\x3e2){diff(",y,",src.pick(",F.join(),")",D,",src.pick(",J.join(),")",D,");}else{zero(",y,");};");break;default:throw Error("ndarray-gradient: Invalid boundary condition");}}0<B&&q.push("};")}}q.push("return dst;};return gradient");f=["diff","zero"];w=[h,r];for(t=1;t<=e;++t)f.push("grad"+t),w.push(p(t));f.push(q.join(""));e=Function.apply(void 0,f).apply(void 0,w);m[d]=e}return e(l,c)};var n=b("dup"),k=b("cwise-compiler"),m={},a={},g={body:"",args:[],thisVars:[],localVars:[]},h=k({args:["array",
"array","array"],pre:g,post:g,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1},{name:"left",lvalue:!1,rvalue:!0,count:1},{name:"right",lvalue:!1,rvalue:!0,count:1}],body:"out\x3d0.5*(left-right)",thisVars:[],localVars:[]},funcName:"cdiff"}),r=k({args:["array"],pre:g,post:g,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1}],body:"out\x3d0",thisVars:[],localVars:[]},funcName:"zero"})},{"cwise-compiler":157,dup:185}],477:[function(b,N,G){function p(a,g){var h=Math.floor(g);g-=h;var r=0<=h+1&&
h+1<a.shape[0],l=0<=h&&h<a.shape[0]?+a.get(h):0;a=r?+a.get(h+1):0;return(1-g)*l+g*a}function n(a,g,h){var r=Math.floor(g);g-=r;var l=0<=r&&r<a.shape[0],c=0<=r+1&&r+1<a.shape[0],d=Math.floor(h);h-=d;var e=0<=d&&d<a.shape[1],f=0<=d+1&&d+1<a.shape[1],q=l&&e?a.get(r,d):0;l=l&&f?a.get(r,d+1):0;e=c&&e?a.get(r+1,d):0;a=c&&f?a.get(r+1,d+1):0;return(1-h)*((1-g)*q+g*e)+h*((1-g)*l+g*a)}function k(a,g,h,r){var l=Math.floor(g);g-=l;var c=0<=l&&l<a.shape[0],d=0<=l+1&&l+1<a.shape[0],e=Math.floor(h);h-=e;var f=0<=
e&&e<a.shape[1],q=0<=e+1&&e+1<a.shape[1],t=Math.floor(r);r-=t;var w=0<=t&&t<a.shape[2],x=0<=t+1&&t+1<a.shape[2],z=c&&f&&w?a.get(l,e,t):0,B=c&&q&&w?a.get(l,e+1,t):0,A=d&&f&&w?a.get(l+1,e,t):0;w=d&&q&&w?a.get(l+1,e+1,t):0;var D=c&&f&&x?a.get(l,e,t+1):0;c=c&&q&&x?a.get(l,e+1,t+1):0;f=d&&f&&x?a.get(l+1,e,t+1):0;a=d&&q&&x?a.get(l+1,e+1,t+1):0;return(1-r)*((1-h)*((1-g)*z+g*A)+h*((1-g)*B+g*w))+r*((1-h)*((1-g)*D+g*f)+h*((1-g)*c+g*a))}function m(a){var g=a.shape.length|0,h=Array(g),r=Array(g),l=Array(g),c=
Array(g),d;for(d=0;d<g;++d){var e=+arguments[d+1];h[d]=Math.floor(e);r[d]=e-h[d];l[d]=0<=h[d]&&h[d]<a.shape[d];c[d]=0<=h[d]+1&&h[d]+1<a.shape[d]}e=0;var f;d=0;a:for(;d<1<<g;++d){var q=1;var t=a.offset;for(f=0;f<g;++f)if(d&1<<f){if(!c[f])continue a;q*=r[f];t+=a.stride[f]*(h[f]+1)}else{if(!l[f])continue a;q*=1-r[f];t+=a.stride[f]*h[f]}e+=q*a.data[t]}return e}N.exports=function(a,g,h,r){switch(a.shape.length){case 0:return 0;case 1:return p(a,g);case 2:return n(a,g,h);case 3:return k(a,g,h,r);default:return m.apply(void 0,
arguments)}};N.exports.d1=p;N.exports.d2=n;N.exports.d3=k},{}],478:[function(b,N,G){function p(d){if(!d)return m;for(var e=0;e<d.args.length;++e){var f=d.args[e];d.args[e]=0===e?{name:f,lvalue:!0,rvalue:!!d.rvalue,count:d.count||1}:{name:f,lvalue:!1,rvalue:!0,count:1}}d.thisVars||(d.thisVars=[]);d.localVars||(d.localVars=[]);return d}function n(d){for(var e=[],f=0;f<d.args.length;++f)e.push("a"+f);e=new Function("P",["return function ",d.funcName,"_ndarrayops(",e.join(","),") {P(",e.join(","),");return a0}"].join(""));
d=k({args:d.args,pre:p(d.pre),body:p(d.body),post:p(d.proc),funcName:d.funcName});return e(d)}var k=b("cwise-compiler"),m={body:"",args:[],thisVars:[],localVars:[]},a={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"\x26",bor:"|",bxor:"^",lshift:"\x3c\x3c",rshift:"\x3e\x3e",rrshift:"\x3e\x3e\x3e"};(function(){for(var d in a){var e=a[d];G[d]=n({args:["array","array","array"],body:{args:["a","b","c"],body:"a\x3db"+e+"c"},funcName:d});G[d+"eq"]=n({args:["array","array"],body:{args:["a","b"],body:"a"+e+
"\x3db"},rvalue:!0,funcName:d+"eq"});G[d+"s"]=n({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a\x3db"+e+"s"},funcName:d+"s"});G[d+"seq"]=n({args:["array","scalar"],body:{args:["a","s"],body:"a"+e+"\x3ds"},rvalue:!0,funcName:d+"seq"})}})();var g={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var d in g){var e=g[d];G[d]=n({args:["array","array"],body:{args:["a","b"],body:"a\x3d"+e+"b"},funcName:d});G[d+"eq"]=n({args:["array"],body:{args:["a"],body:"a\x3d"+e+"a"},rvalue:!0,
count:2,funcName:d+"eq"})}})();var h={and:"\x26\x26",or:"||",eq:"\x3d\x3d\x3d",neq:"!\x3d\x3d",lt:"\x3c",gt:"\x3e",leq:"\x3c\x3d",geq:"\x3e\x3d"};(function(){for(var d in h){var e=h[d];G[d]=n({args:["array","array","array"],body:{args:["a","b","c"],body:"a\x3db"+e+"c"},funcName:d});G[d+"s"]=n({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a\x3db"+e+"s"},funcName:d+"s"});G[d+"eq"]=n({args:["array","array"],body:{args:["a","b"],body:"a\x3da"+e+"b"},rvalue:!0,count:2,funcName:d+"eq"});
G[d+"seq"]=n({args:["array","scalar"],body:{args:["a","s"],body:"a\x3da"+e+"s"},rvalue:!0,count:2,funcName:d+"seq"})}})();var r="abs acos asin atan ceil cos exp floor log round sin sqrt tan".split(" ");(function(){for(var d=0;d<r.length;++d){var e=r[d];G[e]=n({args:["array","array"],pre:{args:[],body:"this_f\x3dMath."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a\x3dthis_f(b)",thisVars:["this_f"]},funcName:e});G[e+"eq"]=n({args:["array"],pre:{args:[],body:"this_f\x3dMath."+e,thisVars:["this_f"]},
body:{args:["a"],body:"a\x3dthis_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"eq"})}})();var l=["max","min","atan2","pow"];(function(){for(var d=0;d<l.length;++d){var e=l[d];G[e]=n({args:["array","array","array"],pre:{args:[],body:"this_f\x3dMath."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a\x3dthis_f(b,c)",thisVars:["this_f"]},funcName:e});G[e+"s"]=n({args:["array","array","scalar"],pre:{args:[],body:"this_f\x3dMath."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a\x3dthis_f(b,c)",
thisVars:["this_f"]},funcName:e+"s"});G[e+"eq"]=n({args:["array","array"],pre:{args:[],body:"this_f\x3dMath."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a\x3dthis_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"eq"});G[e+"seq"]=n({args:["array","scalar"],pre:{args:[],body:"this_f\x3dMath."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a\x3dthis_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"seq"})}})();var c=["atan2","pow"];(function(){for(var d=0;d<c.length;++d){var e=
c[d];G[e+"op"]=n({args:["array","array","array"],pre:{args:[],body:"this_f\x3dMath."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a\x3dthis_f(c,b)",thisVars:["this_f"]},funcName:e+"op"});G[e+"ops"]=n({args:["array","array","scalar"],pre:{args:[],body:"this_f\x3dMath."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a\x3dthis_f(c,b)",thisVars:["this_f"]},funcName:e+"ops"});G[e+"opeq"]=n({args:["array","array"],pre:{args:[],body:"this_f\x3dMath."+e,thisVars:["this_f"]},body:{args:["a",
"b"],body:"a\x3dthis_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"opeq"});G[e+"opseq"]=n({args:["array","scalar"],pre:{args:[],body:"this_f\x3dMath."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a\x3dthis_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"opseq"})}})();G.any=k({args:["array"],pre:m,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"});
G.all=k({args:["array"],pre:m,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"});G.sum=k({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+\x3da",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"});G.prod=
k({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*\x3da",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"});G.norm2squared=k({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+\x3da*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],
thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"});G.norm2=k({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+\x3da*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"});G.norminf=k({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,
count:4}],body:"if(-a\x3ethis_s){this_s\x3d-a}else if(a\x3ethis_s){this_s\x3da}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"});G.norm1=k({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+\x3da\x3c0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"});
G.sup=k({args:["array"],pre:{body:"this_h\x3d-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_\x3ethis_h)this_h\x3d_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}});G.inf=k({args:["array"],pre:{body:"this_h\x3dInfinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_\x3cthis_h)this_h\x3d_inline_1_arg0_",args:[{name:"_inline_1_arg0_",
lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}});G.argmin=k({args:["index","array","shape"],pre:{body:"{this_v\x3dInfinity;this_i\x3d_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_\x3cthis_v){this_v\x3d_inline_1_arg1_;for(var _inline_1_k\x3d0;_inline_1_k\x3c_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]\x3d_inline_1_arg0_[_inline_1_k]}}}",
args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}});G.argmax=k({args:["index","array","shape"],pre:{body:"{this_v\x3d-Infinity;this_i\x3d_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,
count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_\x3ethis_v){this_v\x3d_inline_1_arg1_;for(var _inline_1_k\x3d0;_inline_1_k\x3c_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]\x3d_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}});G.random=
n({args:["array"],pre:{args:[],body:"this_f\x3dMath.random",thisVars:["this_f"]},body:{args:["a"],body:"a\x3dthis_f()",thisVars:["this_f"]},funcName:"random"});G.assign=n({args:["array","array"],body:{args:["a","b"],body:"a\x3db"},funcName:"assign"});G.assigns=n({args:["array","scalar"],body:{args:["a","b"],body:"a\x3db"},funcName:"assigns"});G.equals=k({args:["array","array"],pre:m,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!\x3d\x3dy){return false}",
localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":157}],479:[function(b,N,G){var p=b("ndarray"),n=b("./doConvert.js");N.exports=function(k,m){for(var a=[],g=k,h=1;Array.isArray(g);)a.push(g.length),h*=g.length,g=g[0];if(0===a.length)return p();m||(m=p(new Float64Array(h),a));n(m,k);return m}},{"./doConvert.js":480,ndarray:483}],480:[function(b,N,G){N.exports=b("cwise-compiler")({args:["array","scalar","index"],pre:{body:"{}",
args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v\x3d_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i\x3d0;_inline_1_i\x3c_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v\x3d_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_\x3d_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i",
"_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},{"cwise-compiler":157}],481:[function(b,N,G){function p(g){switch(g){case "uint8":return[a.mallocUint8,a.freeUint8];case "uint16":return[a.mallocUint16,a.freeUint16];case "uint32":return[a.mallocUint32,a.freeUint32];case "int8":return[a.mallocInt8,a.freeInt8];case "int16":return[a.mallocInt16,a.freeInt16];case "int32":return[a.mallocInt32,a.freeInt32];case "float32":return[a.mallocFloat,a.freeFloat];
case "float64":return[a.mallocDouble,a.freeDouble];default:return null}}function n(g){for(var h=[],r=0;r<g;++r)h.push("s"+r);for(r=0;r<g;++r)h.push("n"+r);for(r=1;r<g;++r)h.push("d"+r);for(r=1;r<g;++r)h.push("e"+r);for(r=1;r<g;++r)h.push("f"+r);return h}function k(g,h){function r(x){return"generic"===h?["data.get(",x,")"].join(""):["data[",x,"]"].join("")}function l(x,z){return"generic"===h?["data.set(",x,",",z,")"].join(""):["data[",x,"]\x3d",z].join("")}var c=["'use strict'"],d=["ndarrayInsertionSort",
g.join("d"),h].join(""),e=["left","right","data","offset"].concat(n(g.length)),f=p(h),q=["i,j,cptr,ptr\x3dleft*s0+offset"];if(1<g.length){for(var t=[],w=1;w<g.length;++w)q.push("i"+w),t.push("n"+w);f?q.push("scratch\x3dmalloc("+t.join("*")+")"):q.push("scratch\x3dnew Array("+t.join("*")+")");q.push("dptr","sptr","a","b")}else q.push("scratch");c.push(["function ",d,"(",e.join(","),"){var ",q.join(",")].join(""),"for(i\x3dleft+1;i\x3c\x3dright;++i){","j\x3di;ptr+\x3ds0","cptr\x3dptr");if(1<g.length){c.push("dptr\x3d0;sptr\x3dptr");
for(w=g.length-1;0<=w;--w)e=g[w],0!==e&&c.push(["for(i",e,"\x3d0;i",e,"\x3cn",e,";++i",e,"){"].join(""));c.push("scratch[dptr++]\x3d",r("sptr"));for(w=0;w<g.length;++w)e=g[w],0!==e&&c.push("sptr+\x3dd"+e,"}");c.push("__g:while(j--\x3eleft){","dptr\x3d0","sptr\x3dcptr-s0");for(w=1;w<g.length;++w)1===w&&c.push("__l:"),c.push(["for(i",w,"\x3d0;i",w,"\x3cn",w,";++i",w,"){"].join(""));c.push(["a\x3d",r("sptr"),"\nb\x3dscratch[dptr]\nif(a\x3cb){break __g}\nif(a\x3eb){break __l}"].join(""));for(w=g.length-
1;1<=w;--w)c.push("sptr+\x3de"+w,"dptr+\x3df"+w,"}");c.push("dptr\x3dcptr;sptr\x3dcptr-s0");for(w=g.length-1;0<=w;--w)e=g[w],0!==e&&c.push(["for(i",e,"\x3d0;i",e,"\x3cn",e,";++i",e,"){"].join(""));c.push(l("dptr",r("sptr")));for(w=0;w<g.length;++w)e=g[w],0!==e&&c.push(["dptr+\x3dd",e,";sptr+\x3dd",e].join(""),"}");c.push("cptr-\x3ds0\n}");c.push("dptr\x3dcptr;sptr\x3d0");for(w=g.length-1;0<=w;--w)e=g[w],0!==e&&c.push(["for(i",e,"\x3d0;i",e,"\x3cn",e,";++i",e,"){"].join(""));c.push(l("dptr","scratch[sptr++]"));
for(w=0;w<g.length;++w)e=g[w],0!==e&&c.push("dptr+\x3dd"+e,"}")}else c.push("scratch\x3d"+r("ptr"),"while((j--\x3eleft)\x26\x26("+r("cptr-s0")+"\x3escratch)){",l("cptr",r("cptr-s0")),"cptr-\x3ds0","}",l("cptr","scratch"));c.push("}");1<g.length&&f&&c.push("free(scratch)");c.push("} return "+d);if(f)return g=new Function("malloc","free",c.join("\n")),g(f[0],f[1]);g=new Function(c.join("\n"));return g()}function m(g,h,r){function l(H){return["(offset+",H,"*s0)"].join("")}function c(H){return"generic"===
h?["data.get(",H,")"].join(""):["data[",H,"]"].join("")}function d(H,M){return"generic"===h?["data.set(",H,",",M,")"].join(""):["data[",H,"]\x3d",M].join("")}function e(H,M,Q){if(1===H.length)y.push("ptr0\x3d"+l(H[0]));else for(var Z=0;Z<H.length;++Z)y.push(["b_ptr",Z,"\x3ds0*",H[Z]].join(""));M&&y.push("pivot_ptr\x3d0");y.push("ptr_shift\x3doffset");for(Z=g.length-1;0<=Z;--Z){var ca=g[Z];0!==ca&&y.push(["for(i",ca,"\x3d0;i",ca,"\x3cn",ca,";++i",ca,"){"].join(""))}if(1<H.length)for(Z=0;Z<H.length;++Z)y.push(["ptr",
Z,"\x3db_ptr",Z,"+ptr_shift"].join(""));y.push(Q);M&&y.push("++pivot_ptr");for(Z=0;Z<g.length;++Z)ca=g[Z],0!==ca&&(1<H.length?y.push("ptr_shift+\x3dd"+ca):y.push("ptr0+\x3dd"+ca),y.push("}"))}function f(H,M,Q,Z){if(1===M.length)y.push("ptr0\x3d"+l(M[0]));else{for(var ca=0;ca<M.length;++ca)y.push(["b_ptr",ca,"\x3ds0*",M[ca]].join(""));y.push("ptr_shift\x3doffset")}Q&&y.push("pivot_ptr\x3d0");H&&y.push(H+":");for(ca=1;ca<g.length;++ca)y.push(["for(i",ca,"\x3d0;i",ca,"\x3cn",ca,";++i",ca,"){"].join(""));
if(1<M.length)for(ca=0;ca<M.length;++ca)y.push(["ptr",ca,"\x3db_ptr",ca,"+ptr_shift"].join(""));y.push(Z);for(ca=g.length-1;1<=ca;--ca)Q&&y.push("pivot_ptr+\x3df"+ca),1<M.length?y.push("ptr_shift+\x3de"+ca):y.push("ptr0+\x3de"+ca),y.push("}")}function q(){1<g.length&&K&&y.push("free(pivot1)","free(pivot2)")}function t(H,M){H="el"+H;M="el"+M;if(1<g.length){var Q="__l"+ ++O;f(Q,[H,M],!1,["comp\x3d",c("ptr0"),"-",c("ptr1"),"\nif(comp\x3e0){tmp0\x3d",H,";",H,"\x3d",M,";",M,"\x3dtmp0;break ",Q,"}\nif(comp\x3c0){break ",
Q,"}"].join(""))}else y.push(["if(",c(l(H)),"\x3e",c(l(M)),"){tmp0\x3d",H,";",H,"\x3d",M,";",M,"\x3dtmp0}"].join(""))}function w(H,M){1<g.length?e([H,M],!1,d("ptr0",c("ptr1"))):y.push(d(l(H),c(l(M))))}function x(H,M,Q){if(1<g.length){var Z="__l"+ ++O;f(Z,[M],!0,[H,"\x3d",c("ptr0"),"-pivot",Q,"[pivot_ptr]\nif(",H,"!\x3d\x3d0){break ",Z,"}"].join(""))}else y.push([H,"\x3d",c(l(M)),"-pivot",Q].join(""))}function z(H,M){1<g.length?e([H,M],!1,["tmp\x3d",c("ptr0"),"\n",d("ptr0",c("ptr1")),"\n",d("ptr1",
"tmp")].join("")):y.push(["ptr0\x3d",l(H),"\nptr1\x3d",l(M),"\ntmp\x3d",c("ptr0"),"\n",d("ptr0",c("ptr1")),"\n",d("ptr1","tmp")].join(""))}function B(H,M,Q){1<g.length?(e([H,M,Q],!1,["tmp\x3d",c("ptr0"),"\n",d("ptr0",c("ptr1")),"\n",d("ptr1",c("ptr2")),"\n",d("ptr2","tmp")].join("")),y.push("++"+M,"--"+Q)):y.push(["ptr0\x3d",l(H),"\nptr1\x3d",l(M),"\nptr2\x3d",l(Q),"\n++",M,"\n--",Q,"\ntmp\x3d",c("ptr0"),"\n",d("ptr0",c("ptr1")),"\n",d("ptr1",c("ptr2")),"\n",d("ptr2","tmp")].join(""))}function A(H,
M){z(H,M);y.push("--"+M)}function D(H,M,Q){1<g.length?e([H,M],!0,[d("ptr0",c("ptr1")),"\n",d("ptr1",["pivot",Q,"[pivot_ptr]"].join(""))].join("")):y.push(d(l(H),c(l(M))),d(l(M),"pivot"+Q))}function C(H,M){y.push(["if((",M,"-",H,")\x3c\x3d32){\ninsertionSort(",H,",",M,",data,offset,",n(g.length).join(","),")\n}else{\n",F,"(",H,",",M,",data,offset,",n(g.length).join(","),")\n}"].join(""))}function v(H,M,Q){1<g.length?(y.push(["__l",++O,":while(true){"].join("")),e([H],!0,["if(",c("ptr0"),"!\x3d\x3dpivot",
M,"[pivot_ptr]){break __l",O,"}"].join("")),y.push(Q,"}")):y.push(["while(",c(l(H)),"\x3d\x3d\x3dpivot",M,"){",Q,"}"].join(""))}var y=["'use strict'"],F=["ndarrayQuickSort",g.join("d"),h].join(""),J=["left","right","data","offset"].concat(n(g.length)),K=p(h),O=0;y.push(["function ",F,"(",J.join(","),"){"].join(""));J="sixth\x3d((right-left+1)/6)|0 index1\x3dleft+sixth index5\x3dright-sixth index3\x3d(left+right)\x3e\x3e1 index2\x3dindex3-sixth index4\x3dindex3+sixth el1\x3dindex1 el2\x3dindex2 el3\x3dindex3 el4\x3dindex4 el5\x3dindex5 less\x3dleft+1 great\x3dright-1 pivots_are_equal\x3dtrue tmp tmp0 x y z k ptr0 ptr1 ptr2 comp_pivot1\x3d0 comp_pivot2\x3d0 comp\x3d0".split(" ");
if(1<g.length){for(var I=[],L=1;L<g.length;++L)I.push("n"+L),J.push("i"+L);for(L=0;8>L;++L)J.push("b_ptr"+L);J.push("ptr3","ptr4","ptr5","ptr6","ptr7","pivot_ptr","ptr_shift","elementSize\x3d"+I.join("*"));K?J.push("pivot1\x3dmalloc(elementSize)","pivot2\x3dmalloc(elementSize)"):J.push("pivot1\x3dnew Array(elementSize),pivot2\x3dnew Array(elementSize)")}else J.push("pivot1","pivot2");y.push("var "+J.join(","));t(1,2);t(4,5);t(1,3);t(2,3);t(1,4);t(3,4);t(2,5);t(2,3);t(4,5);1<g.length?e("el1 el2 el3 el4 el5 index1 index3 index5".split(" "),
!0,["pivot1[pivot_ptr]\x3d",c("ptr1"),"\npivot2[pivot_ptr]\x3d",c("ptr3"),"\npivots_are_equal\x3dpivots_are_equal\x26\x26(pivot1[pivot_ptr]\x3d\x3d\x3dpivot2[pivot_ptr])\nx\x3d",c("ptr0"),"\ny\x3d",c("ptr2"),"\nz\x3d",c("ptr4"),"\n",d("ptr5","x"),"\n",d("ptr6","y"),"\n",d("ptr7","z")].join("")):y.push(["pivot1\x3d",c(l("el2")),"\npivot2\x3d",c(l("el4")),"\npivots_are_equal\x3dpivot1\x3d\x3d\x3dpivot2\nx\x3d",c(l("el1")),"\ny\x3d",c(l("el3")),"\nz\x3d",c(l("el5")),"\n",d(l("index1"),"x"),"\n",d(l("index3"),
"y"),"\n",d(l("index5"),"z")].join(""));w("index2","left");w("index4","right");y.push("if(pivots_are_equal){");y.push("for(k\x3dless;k\x3c\x3dgreat;++k){");x("comp","k",1);y.push("if(comp\x3d\x3d\x3d0){continue}");y.push("if(comp\x3c0){");y.push("if(k!\x3d\x3dless){");z("k","less");y.push("}");y.push("++less");y.push("}else{");y.push("while(true){");x("comp","great",1);y.push("if(comp\x3e0){");y.push("great--");y.push("}else if(comp\x3c0){");B("k","less","great");y.push("break");y.push("}else{");
A("k","great");y.push("break");y.push("}");y.push("}");y.push("}");y.push("}");y.push("}else{");y.push("for(k\x3dless;k\x3c\x3dgreat;++k){");x("comp_pivot1","k",1);y.push("if(comp_pivot1\x3c0){");y.push("if(k!\x3d\x3dless){");z("k","less");y.push("}");y.push("++less");y.push("}else{");x("comp_pivot2","k",2);y.push("if(comp_pivot2\x3e0){");y.push("while(true){");x("comp","great",2);y.push("if(comp\x3e0){");y.push("if(--great\x3ck){break}");y.push("continue");y.push("}else{");x("comp","great",1);y.push("if(comp\x3c0){");
B("k","less","great");y.push("}else{");A("k","great");y.push("}");y.push("break");y.push("}");y.push("}");y.push("}");y.push("}");y.push("}");y.push("}");D("left","(less-1)",1);D("right","(great+1)",2);C("left","(less-2)");C("(great+2)","right");y.push("if(pivots_are_equal){");q();y.push("return");y.push("}");y.push("if(less\x3cindex1\x26\x26great\x3eindex5){");v("less",1,"++less");v("great",2,"--great");y.push("for(k\x3dless;k\x3c\x3dgreat;++k){");x("comp_pivot1","k",1);y.push("if(comp_pivot1\x3d\x3d\x3d0){");
y.push("if(k!\x3d\x3dless){");z("k","less");y.push("}");y.push("++less");y.push("}else{");x("comp_pivot2","k",2);y.push("if(comp_pivot2\x3d\x3d\x3d0){");y.push("while(true){");x("comp","great",2);y.push("if(comp\x3d\x3d\x3d0){");y.push("if(--great\x3ck){break}");y.push("continue");y.push("}else{");x("comp","great",1);y.push("if(comp\x3c0){");B("k","less","great");y.push("}else{");A("k","great");y.push("}");y.push("break");y.push("}");y.push("}");y.push("}");y.push("}");y.push("}");y.push("}");q();
C("less","great");y.push("}return "+F);if(1<g.length&&K)return J=new Function("insertionSort","malloc","free",y.join("\n")),J(r,K[0],K[1]);J=new Function("insertionSort",y.join("\n"));return J(r)}var a=b("typedarray-pool");N.exports=function(g,h){var r=["'use strict'"],l=["ndarraySortWrapper",g.join("d"),h].join("");r.push(["function ",l,"(array){"].join(""));for(var c=["data\x3darray.data,offset\x3darray.offset|0,shape\x3darray.shape,stride\x3darray.stride"],d=0;d<g.length;++d)c.push(["s",d,"\x3dstride[",
d,"]|0,n",d,"\x3dshape[",d,"]|0"].join(""));var e=Array(g.length),f=[];for(d=0;d<g.length;++d){var q=g[d];0!==q&&(e[q]=0===f.length?"1":f.join("*"),f.push("n"+q))}var t=f=-1;for(d=0;d<g.length;++d)q=g[d],0!==q&&(0<f?c.push(["d",q,"\x3ds",q,"-d",f,"*n",f].join("")):c.push(["d",q,"\x3ds",q].join("")),f=q),q=g.length-1-d,0!==q&&(0<t?c.push(["e",q,"\x3ds",q,"-e",t,"*n",t,",f",q,"\x3d",e[q],"-f",t,"*n",t].join("")):c.push(["e",q,"\x3ds",q,",f",q,"\x3d",e[q]].join("")),t=q);r.push("var "+c.join(","));c=
["0","n0-1","data","offset"].concat(n(g.length));r.push(["if(n0\x3c\x3d32){insertionSort(",c.join(","),")}else{quickSort(",c.join(","),")}"].join(""));r.push("}return "+l);r=new Function("insertionSort","quickSort",r.join("\n"));l=k(g,h);g=m(g,h,l);return r(l,g)}},{"typedarray-pool":617}],482:[function(b,N,G){var p=b("./lib/compile_sort.js"),n={};N.exports=function(k){var m=k.order,a=k.dtype,g=[m,a].join(":"),h=n[g];h||(n[g]=h=p(m,a));h(k);return k}},{"./lib/compile_sort.js":481}],483:[function(b,
N,G){function p(l,c){return l[0]-c[0]}function n(){var l=this.stride,c=Array(l.length),d;for(d=0;d<c.length;++d)c[d]=[Math.abs(l[d]),d];c.sort(p);l=Array(c.length);for(d=0;d<l.length;++d)l[d]=c[d][1];return l}function k(l,c){var d=["View",c,"d",l].join("");0>c&&(d="View_Nil"+l);var e="generic"===l;if(-1===c)return c=new Function("function "+d+"(a){this.data\x3da;};var proto\x3d"+d+".prototype;proto.dtype\x3d'"+l+"';proto.index\x3dfunction(){return -1};proto.size\x3d0;proto.dimension\x3d-1;proto.shape\x3dproto.stride\x3dproto.order\x3d[];proto.lo\x3dproto.hi\x3dproto.transpose\x3dproto.step\x3dfunction(){return new "+
d+"(this.data);};proto.get\x3dproto.set\x3dfunction(){};proto.pick\x3dfunction(){return null};return function construct_"+d+"(a){return new "+d+"(a);}"),c();if(0===c)return c=new Function("TrivialArray","function "+d+"(a,d) {this.data \x3d a;this.offset \x3d d};var proto\x3d"+d+".prototype;proto.dtype\x3d'"+l+"';proto.index\x3dfunction(){return this.offset};proto.dimension\x3d0;proto.size\x3d1;proto.shape\x3dproto.stride\x3dproto.order\x3d[];proto.lo\x3dproto.hi\x3dproto.transpose\x3dproto.step\x3dfunction "+
d+"_copy() {return new "+d+"(this.data,this.offset)};proto.pick\x3dfunction "+d+"_pick(){return TrivialArray(this.data);};proto.valueOf\x3dproto.get\x3dfunction "+d+"_get(){return "+(e?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set\x3dfunction "+d+"_set(v){return "+(e?"this.data.set(this.offset,v)":"this.data[this.offset]\x3dv")+"};return function construct_"+d+"(a,b,c,d){return new "+d+"(a,d)}"),c(r[l][0]);var f=["'use strict'"];var q=a(c),t=q.map(function(B){return"i"+B}),w=
"this.offset+"+q.map(function(B){return"this.stride["+B+"]*i"+B}).join("+"),x=q.map(function(B){return"b"+B}).join(","),z=q.map(function(B){return"c"+B}).join(",");f.push("function "+d+"(a,"+x+","+z+",d){this.data\x3da","this.shape\x3d["+x+"]","this.stride\x3d["+z+"]","this.offset\x3dd|0}","var proto\x3d"+d+".prototype","proto.dtype\x3d'"+l+"'","proto.dimension\x3d"+c);f.push("Object.defineProperty(proto,'size',{get:function "+d+"_size(){return "+q.map(function(B){return"this.shape["+B+"]"}).join("*"),
"}})");1===c?f.push("proto.order\x3d[0]"):(f.push("Object.defineProperty(proto,'order',{get:"),4>c?(f.push("function "+d+"_order(){"),2===c?f.push("return (Math.abs(this.stride[0])\x3eMath.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===c&&f.push("var s0\x3dMath.abs(this.stride[0]),s1\x3dMath.abs(this.stride[1]),s2\x3dMath.abs(this.stride[2]);if(s0\x3es1){if(s1\x3es2){return [2,1,0];}else if(s0\x3es2){return [1,2,0];}else{return [1,0,2];}}else if(s0\x3es2){return [2,0,1];}else if(s2\x3es1){return [0,1,2];}else{return [0,2,1];}}})")):
f.push("ORDER})"));f.push("proto.set\x3dfunction "+d+"_set("+t.join(",")+",v){");e?f.push("return this.data.set("+w+",v)}"):f.push("return this.data["+w+"]\x3dv}");f.push("proto.get\x3dfunction "+d+"_get("+t.join(",")+"){");e?f.push("return this.data.get("+w+")}"):f.push("return this.data["+w+"]}");f.push("proto.index\x3dfunction "+d+"_index(",t.join(),"){return "+w+"}");f.push("proto.hi\x3dfunction "+d+"_hi("+t.join(",")+"){return new "+d+"(this.data,"+q.map(function(B){return["(typeof i",B,"!\x3d\x3d'number'||i",
B,"\x3c0)?this.shape[",B,"]:i",B,"|0"].join("")}).join(",")+","+q.map(function(B){return"this.stride["+B+"]"}).join(",")+",this.offset)}");e=q.map(function(B){return"a"+B+"\x3dthis.shape["+B+"]"});w=q.map(function(B){return"c"+B+"\x3dthis.stride["+B+"]"});f.push("proto.lo\x3dfunction "+d+"_lo("+t.join(",")+"){var b\x3dthis.offset,d\x3d0,"+e.join(",")+","+w.join(","));for(e=0;e<c;++e)f.push("if(typeof i"+e+"\x3d\x3d\x3d'number'\x26\x26i"+e+"\x3e\x3d0){d\x3di"+e+"|0;b+\x3dc"+e+"*d;a"+e+"-\x3dd}");f.push("return new "+
d+"(this.data,"+q.map(function(B){return"a"+B}).join(",")+","+q.map(function(B){return"c"+B}).join(",")+",b)}");f.push("proto.step\x3dfunction "+d+"_step("+t.join(",")+"){var "+q.map(function(B){return"a"+B+"\x3dthis.shape["+B+"]"}).join(",")+","+q.map(function(B){return"b"+B+"\x3dthis.stride["+B+"]"}).join(",")+",c\x3dthis.offset,d\x3d0,ceil\x3dMath.ceil");for(e=0;e<c;++e)f.push("if(typeof i"+e+"\x3d\x3d\x3d'number'){d\x3di"+e+"|0;if(d\x3c0){c+\x3db"+e+"*(a"+e+"-1);a"+e+"\x3dceil(-a"+e+"/d)}else{a"+
e+"\x3dceil(a"+e+"/d)}b"+e+"*\x3dd}");f.push("return new "+d+"(this.data,"+q.map(function(B){return"a"+B}).join(",")+","+q.map(function(B){return"b"+B}).join(",")+",c)}");w=Array(c);x=Array(c);for(e=0;e<c;++e)w[e]="a[i"+e+"]",x[e]="b[i"+e+"]";f.push("proto.transpose\x3dfunction "+d+"_transpose("+t+"){"+t.map(function(B,A){return B+"\x3d("+B+"\x3d\x3d\x3dundefined?"+A+":"+B+"|0)"}).join(";"),"var a\x3dthis.shape,b\x3dthis.stride;return new "+d+"(this.data,"+w.join(",")+","+x.join(",")+",this.offset)}");
f.push("proto.pick\x3dfunction "+d+"_pick("+t+"){var a\x3d[],b\x3d[],c\x3dthis.offset");for(e=0;e<c;++e)f.push("if(typeof i"+e+"\x3d\x3d\x3d'number'\x26\x26i"+e+"\x3e\x3d0){c\x3d(c+this.stride["+e+"]*i"+e+")|0}else{a.push(this.shape["+e+"]);b.push(this.stride["+e+"])}");f.push("var ctor\x3dCTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}");f.push("return function construct_"+d+"(data,shape,stride,offset){return new "+d+"(data,"+q.map(function(B){return"shape["+B+"]"}).join(",")+","+q.map(function(B){return"stride["+
B+"]"}).join(",")+",offset)}");c=new Function("CTOR_LIST","ORDER",f.join("\n"));return c(r[l],n)}function m(l){if(g(l))return"buffer";if(h)switch(Object.prototype.toString.call(l)){case "[object Float64Array]":return"float64";case "[object Float32Array]":return"float32";case "[object Int8Array]":return"int8";case "[object Int16Array]":return"int16";case "[object Int32Array]":return"int32";case "[object Uint8Array]":return"uint8";case "[object Uint16Array]":return"uint16";case "[object Uint32Array]":return"uint32";
case "[object Uint8ClampedArray]":return"uint8_clamped";case "[object BigInt64Array]":return"bigint64";case "[object BigUint64Array]":return"biguint64"}return Array.isArray(l)?"array":"generic"}var a=b("iota-array"),g=b("is-buffer"),h="undefined"!==typeof Float64Array,r={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};(function(){for(var l in r)r[l].push(k(l,-1))});N.exports=function(l,c,d,e){if(void 0===
l){var f=r.array[0];return f([])}"number"===typeof l&&(l=[l]);void 0===c&&(c=[l.length]);f=c.length;if(void 0===d){d=Array(f);for(var q=f-1,t=1;0<=q;--q)d[q]=t,t*=c[q]}if(void 0===e)for(q=e=0;q<f;++q)0>d[q]&&(e-=(c[q]-1)*d[q]);q=m(l);for(t=r[q];t.length<=f+1;)t.push(k(q,t.length-1));f=t[f+1];return f(l,c,d,e)}},{"iota-array":451,"is-buffer":453}],484:[function(b,N,G){var p=b("double-bits"),n=Math.pow(2,-1074);N.exports=function(k,m){if(isNaN(k)||isNaN(m))return NaN;if(k===m)return k;if(0===k)return 0>
m?-n:n;var a=p.hi(k),g=p.lo(k);m>k===0<k?4294967295===g?(a+=1,g=0):g+=1:0===g?(g=4294967295,--a):--g;return p.pack(g,a)}},{"double-bits":182}],485:[function(b,N,G){function p(h,r,l,c){return["C",h,r,l,c,l,c]}function n(h,r,l,c,d,e){return["C",h/3+2/3*l,r/3+2/3*c,d/3+2/3*l,e/3+2/3*c,d,e]}function k(h,r,l,c,d,e,f,q,t,w){if(w)A=w[0],e=w[1],z=w[2],B=w[3];else{A=m(h,r,-d);h=A.x;r=A.y;A=m(q,t,-d);q=A.x;t=A.y;A=(h-q)/2;z=(r-t)/2;B=A*A/(l*l)+z*z/(c*c);1<B&&(B=Math.sqrt(B),l*=B,c*=B);B=l*l;var x=c*c;e=(e==
f?-1:1)*Math.sqrt(Math.abs((B*x-B*z*z-x*A*A)/(B*z*z+x*A*A)));Infinity==e&&(e=1);var z=e*l*z/c+(h+q)/2,B=e*-c*A/l+(r+t)/2,A=Math.asin(((r-B)/c).toFixed(9));e=Math.asin(((t-B)/c).toFixed(9));A=h<z?a-A:A;e=q<z?a-e:e;0>A&&(A=2*a+A);0>e&&(e=2*a+e);f&&A>e&&(A-=2*a);!f&&e>A&&(e-=2*a)}if(Math.abs(e-A)>g){var D=e;x=q;var C=t;e=A+g*(f&&e>A?1:-1);q=z+l*Math.cos(e);t=B+c*Math.sin(e);D=k(q,t,l,c,d,0,f,x,C,[e,D,z,B])}f=Math.tan((e-A)/4);l=4/3*l*f;c=4/3*c*f;h=[2*h-(h+l*Math.sin(A)),2*r-(r-c*Math.cos(A)),q+l*Math.sin(e),
t-c*Math.cos(e),q,t];if(w)return h;D&&(h=h.concat(D));for(w=0;w<h.length;)r=m(h[w],h[w+1],d),h[w++]=r.x,h[w++]=r.y;return h}function m(h,r,l){return{x:h*Math.cos(l)-r*Math.sin(l),y:h*Math.sin(l)+r*Math.cos(l)}}var a=Math.PI,g=a/180*120;N.exports=function(h){for(var r,l=[],c=0,d=0,e=0,f=0,q=null,t=null,w=0,x=0,z=0,B=h.length;z<B;z++){var A=h[z],D=A[0];switch(D){case "M":e=A[1];f=A[2];break;case "A":A=k(w,x,A[1],A[2],a/180*A[3],A[4],A[5],A[6],A[7]);A.unshift("C");7<A.length&&(l.push(A.splice(0,7)),
A.unshift("C"));break;case "S":if("C"==r||"S"==r)w+=w-c,x+=x-d;A=["C",w,x,A[1],A[2],A[3],A[4]];break;case "T":"Q"==r||"T"==r?(q=2*w-q,t=2*x-t):(q=w,t=x);A=n(w,x,q,t,A[1],A[2]);break;case "Q":q=A[1];t=A[2];A=n(w,x,A[1],A[2],A[3],A[4]);break;case "L":A=p(w,x,A[1],A[2]);break;case "H":A=p(w,x,A[1],x);break;case "V":A=p(w,x,w,A[1]);break;case "Z":A=p(w,x,e,f)}r=D;w=A[A.length-2];x=A[A.length-1];4<A.length?(c=A[A.length-4],d=A[A.length-3]):(c=w,d=x);l.push(A)}return l}},{}],486:[function(b,N,G){G.vertexNormals=
function(p,n,k){var m=n.length,a=Array(m);k=void 0===k?1E-6:k;for(var g=0;g<m;++g)a[g]=[0,0,0];for(g=0;g<p.length;++g)for(var h=p[g],r,l=h[h.length-1],c=h[0],d=0;d<h.length;++d){r=l;l=c;c=h[(d+1)%h.length];var e=n[r],f=n[l],q=n[c],t=Array(3),w=0,x=Array(3),z=0;for(r=0;3>r;++r)t[r]=e[r]-f[r],w+=t[r]*t[r],x[r]=q[r]-f[r],z+=x[r]*x[r];if(w*z>k)for(e=a[l],w=1/Math.sqrt(w*z),r=0;3>r;++r)z=(r+1)%3,f=(r+2)%3,e[r]+=w*(x[z]*t[f]-x[f]*t[z])}for(g=0;g<m;++g){e=a[g];for(r=p=0;3>r;++r)p+=e[r]*e[r];if(p>k)for(w=
1/Math.sqrt(p),r=0;3>r;++r)e[r]*=w;else for(r=0;3>r;++r)e[r]=0}return a};G.faceNormals=function(p,n,k){var m=p.length,a=Array(m);k=void 0===k?1E-6:k;for(var g=0;g<m;++g){for(var h=p[g],r=Array(3),l=0;3>l;++l)r[l]=n[h[l]];h=Array(3);var c=Array(3);for(l=0;3>l;++l)h[l]=r[1][l]-r[0][l],c[l]=r[2][l]-r[0][l];r=Array(3);var d=0;for(l=0;3>l;++l){var e=(l+1)%3,f=(l+2)%3;r[l]=h[e]*c[f]-h[f]*c[e];d+=r[l]*r[l]}d=d>k?1/Math.sqrt(d):0;for(l=0;3>l;++l)r[l]*=d;a[g]=r}return a}},{}],487:[function(b,N,G){var p=Object.getOwnPropertySymbols,
n=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;N.exports=function(){try{if(!Object.assign)return!1;var m=new String("abc");m[5]="de";if("5"===Object.getOwnPropertyNames(m)[0])return!1;var a={};for(m=0;10>m;m++)a["_"+String.fromCharCode(m)]=m;if("0123456789"!==Object.getOwnPropertyNames(a).map(function(h){return a[h]}).join(""))return!1;var g={};"abcdefghijklmnopqrst".split("").forEach(function(h){g[h]=h});return"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},g)).join("")?
!1:!0}catch(h){return!1}}()?Object.assign:function(m,a){if(null===m||void 0===m)throw new TypeError("Object.assign cannot be called with null or undefined");var g=Object(m);for(var h,r=1;r<arguments.length;r++){var l=Object(arguments[r]);for(var c in l)n.call(l,c)&&(g[c]=l[c]);if(p){h=p(l);for(var d=0;d<h.length;d++)k.call(l,h[d])&&(g[h[d]]=l[h[d]])}}return g}},{}],488:[function(b,N,G){N.exports=function(p,n,k,m,a,g,h,r,l,c){var d=n+g+c;if(0<e){var e=Math.sqrt(d+1);p[0]=.5*(h-l)/e;p[1]=.5*(r-m)/e;
p[2]=.5*(k-g)/e;p[3]=.5*e}else c=Math.max(n,g,c),e=Math.sqrt(2*c-d+1),n>=c?(p[0]=.5*e,p[1]=.5*(a+k)/e,p[2]=.5*(r+m)/e,p[3]=.5*(h-l)/e):g>=c?(p[0]=.5*(k+a)/e,p[1]=.5*e,p[2]=.5*(l+h)/e,p[3]=.5*(r-m)/e):(p[0]=.5*(m+r)/e,p[1]=.5*(h+l)/e,p[2]=.5*e,p[3]=.5*(k-a)/e);return p}},{}],489:[function(b,N,G){function p(c,d,e){return Math.sqrt(Math.pow(c,2)+Math.pow(d,2)+Math.pow(e,2))}function n(c,d,e,f){return Math.sqrt(Math.pow(c,2)+Math.pow(d,2)+Math.pow(e,2)+Math.pow(f,2))}function k(c,d){var e=d[0],f=d[1],
q=d[2];d=d[3];var t=n(e,f,q,d);1E-6<t?(c[0]=e/t,c[1]=f/t,c[2]=q/t,c[3]=d/t):(c[0]=c[1]=c[2]=0,c[3]=1)}function m(c,d,e){this.radius=a([e]);this.center=a(d);this.rotation=a(c);this.computedRadius=this.radius.curve(0);this.computedCenter=this.center.curve(0);this.computedRotation=this.rotation.curve(0);this.computedUp=[.1,0,0];this.computedEye=[.1,0,0];this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.recalcMatrix(0)}N.exports=function(c){c=c||{};var d=c.center||[0,0,0],e=c.rotation||[0,0,
0,1],f=c.radius||1;d=[].slice.call(d,0,3);e=[].slice.call(e,0,4);k(e,e);d=new m(e,d,Math.log(f));d.setDistanceLimits(c.zoomMin,c.zoomMax);("eye"in c||"up"in c)&&d.lookAt(0,c.eye,c.center,c.up);return d};var a=b("filtered-vector"),g=b("gl-mat4/lookAt"),h=b("gl-mat4/fromQuat"),r=b("gl-mat4/invert"),l=b("./lib/quatFromFrame");b=m.prototype;b.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())};b.recalcMatrix=function(c){this.radius.curve(c);this.center.curve(c);
this.rotation.curve(c);var d=this.computedRotation;k(d,d);c=this.computedMatrix;h(c,d);var e=this.computedCenter;d=this.computedEye;var f=this.computedUp,q=Math.exp(this.computedRadius[0]);d[0]=e[0]+q*c[2];d[1]=e[1]+q*c[6];d[2]=e[2]+q*c[10];f[0]=c[1];f[1]=c[5];f[2]=c[9];for(e=0;3>e;++e){for(q=f=0;3>q;++q)f+=c[e+4*q]*d[q];c[12+e]=-f}};b.getMatrix=function(c,d){this.recalcMatrix(c);c=this.computedMatrix;if(d){for(var e=0;16>e;++e)d[e]=c[e];return d}return c};b.idle=function(c){this.center.idle(c);this.radius.idle(c);
this.rotation.idle(c)};b.flush=function(c){this.center.flush(c);this.radius.flush(c);this.rotation.flush(c)};b.pan=function(c,d,e,f){d=d||0;e=e||0;f=f||0;this.recalcMatrix(c);var q=this.computedMatrix,t=q[1],w=q[5],x=q[9],z=p(t,w,x);t/=z;w/=z;x/=z;z=q[0];var B=q[4],A=q[8],D=z*t+B*w+A*x;z-=t*D;B-=w*D;A-=x*D;D=p(z,B,A);z/=D;B/=D;A/=D;D=q[2];var C=q[6];q=q[10];var v=D*t+C*w+q*x,y=D*z+C*B+q*A;p(D-(v*t+y*z),C-(v*w+y*B),q-(v*x+y*A));this.center.move(c,z*d+t*e,B*d+w*e,A*d+x*e);d=Math.exp(this.computedRadius[0]);
d=Math.max(1E-4,d+f);this.radius.set(c,Math.log(d))};b.rotate=function(c,d,e,f){this.recalcMatrix(c);d=d||0;e=e||0;var q=this.computedMatrix,t=q[2],w=q[6],x=q[10],z=d*q[0]+e*q[1],B=d*q[4]+e*q[5];q=d*q[8]+e*q[9];e=-(w*q-x*B);q=-(x*z-t*q);z=-(t*B-w*z);B=Math.sqrt(Math.max(0,1-Math.pow(e,2)-Math.pow(q,2)-Math.pow(z,2)));var A=n(e,q,z,B);1E-6<A?(e/=A,q/=A,z/=A,B/=A):(e=q=z=0,B=1);A=this.computedRotation;var D=A[0],C=A[1],v=A[2],y=A[3];A=D*B+y*e+C*z-v*q;var F=C*B+y*q+v*e-D*z,J=v*B+y*z+D*q-C*e;D=y*B-D*
e-C*q-v*z;f&&(e=t,q=w,z=x,f=Math.sin(f)/p(e,q,z),e*=f,q*=f,z*=f,B=Math.cos(d),A=A*B+D*e+F*z-J*q,F=F*B+D*q+J*e-A*z,J=J*B+D*z+A*q-F*e,D=D*B-A*e-F*q-J*z);d=n(A,F,J,D);1E-6<d?(A/=d,F/=d,J/=d,D/=d):(A=F=J=0,D=1);this.rotation.set(c,A,F,J,D)};b.lookAt=function(c,d,e,f){this.recalcMatrix(c);e=e||this.computedCenter;d=d||this.computedEye;f=f||this.computedUp;var q=this.computedMatrix;g(q,d,e,f);f=this.computedRotation;l(f,q[0],q[1],q[2],q[4],q[5],q[6],q[8],q[9],q[10]);k(f,f);this.rotation.set(c,f[0],f[1],
f[2],f[3]);for(f=q=0;3>f;++f)q+=Math.pow(e[f]-d[f],2);this.radius.set(c,.5*Math.log(Math.max(q,1E-6)));this.center.set(c,e[0],e[1],e[2])};b.translate=function(c,d,e,f){this.center.move(c,d||0,e||0,f||0)};b.setMatrix=function(c,d){var e=this.computedRotation;l(e,d[0],d[1],d[2],d[4],d[5],d[6],d[8],d[9],d[10]);k(e,e);this.rotation.set(c,e[0],e[1],e[2],e[3]);e=this.computedMatrix;r(e,d);var f=e[15];if(1E-6<Math.abs(f)){d=e[12]/f;var q=e[13]/f;f=e[14]/f;this.recalcMatrix(c);var t=Math.exp(this.computedRadius[0]);
this.center.set(c,d-e[2]*t,q-e[6]*t,f-e[10]*t)}else this.center.idle(c);this.radius.idle(c)};b.setDistance=function(c,d){0<d&&this.radius.set(c,Math.log(d))};b.setDistanceLimits=function(c,d){c=0<c?Math.log(c):-Infinity;d=0<d?Math.log(d):Infinity;d=Math.max(d,c);this.radius.bounds[0][0]=c;this.radius.bounds[1][0]=d};b.getDistanceLimits=function(c){var d=this.radius.bounds;return c?(c[0]=Math.exp(d[0][0]),c[1]=Math.exp(d[1][0]),c):[Math.exp(d[0][0]),Math.exp(d[1][0])]};b.toJSON=function(){this.recalcMatrix(this.lastT());
return{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}};b.fromJSON=function(c){var d=this.lastT(),e=c.center;e&&this.center.set(d,e[0],e[1],e[2]);(e=c.rotation)&&this.rotation.set(d,e[0],e[1],e[2],e[3]);(e=c.distance)&&0<e&&this.radius.set(d,Math.log(e));this.setDistanceLimits(c.zoomMin,c.zoomMax)}},{"./lib/quatFromFrame":488,"filtered-vector":250,"gl-mat4/fromQuat":288,
"gl-mat4/invert":299,"gl-mat4/lookAt":300}],490:[function(b,N,G){var p=b("repeat-string");N.exports=function(n,k,m){return p("undefined"!==typeof m?m+"":" ",k)+n}},{"repeat-string":541}],491:[function(b,N,G){function p(m,a){function g(c,d,e){e=[];for(var f,q=0;f=l.exec(c);){if(1E4<q++)throw Error("Circular references in parenthesis");e.push(c.slice(0,f.index));e.push(g(d[f[1]],d));c=c.slice(f.index+f[0].length)}e.push(c);return e}if("string"!==typeof m)return[m];var h=[m];"string"===typeof a||Array.isArray(a)?
a={brackets:a}:a||(a={});m=a.brackets?Array.isArray(a.brackets)?a.brackets:[a.brackets]:["{}","[]","()"];var r=a.escape||"___";a=!!a.flat;m.forEach(function(c){function d(q,t,w){q=h.push(q.slice(c[0].length,-c[1].length))-1;f.push(q);return r+q+r}var e=new RegExp(["\\",c[0],"[^\\",c[0],"\\",c[1],"]*\\",c[1]].join("")),f=[];h.forEach(function(q,t){for(var w,x=0;q!=w;)if(w=q,q=q.replace(e,d),1E4<x++)throw Error("References have circular dependency. Please, check them.");h[t]=q});f=f.reverse();h=h.map(function(q){f.forEach(function(t){q=
q.replace(new RegExp("(\\"+r+t+"\\"+r+")","g"),c[0]+"$1"+c[1])});return q})});var l=new RegExp("\\"+r+"([0-9]+)\\"+r);return a?h:g(h[0],h)}function n(m,a){function g(c,d){if(null==m[d])throw Error("Reference "+d+"is undefined");return m[d]}if(a&&a.flat){var h=a&&a.escape||"___";a=m[0];if(!a)return"";h=new RegExp("\\"+h+"([0-9]+)\\"+h);for(var r=0;a!=l;){if(1E4<r++)throw Error("Circular references in "+m);var l=a;a=a.replace(h,g)}return a}return m.reduce(function f(d,e){Array.isArray(e)&&(e=e.reduce(f,
""));return d+e},"")}function k(m,a){return Array.isArray(m)?n(m,a):p(m,a)}k.parse=p;k.stringify=n;N.exports=k},{}],492:[function(b,N,G){var p=b("pick-by-alias");N.exports=function(n){1<arguments.length&&(n=arguments);"string"===typeof n?n=n.split(/\s/).map(parseFloat):"number"===typeof n&&(n=[n]);if(n.length&&"number"===typeof n[0])var k=1===n.length?{width:n[0],height:n[0],x:0,y:0}:2===n.length?{width:n[0],height:n[1],x:0,y:0}:{x:n[0],y:n[1],width:n[2]-n[0]||0,height:n[3]-n[1]||0};else n&&(n=p(n,
{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"}),k={x:n.left||0,y:n.top||0},k.width=null==n.width?n.right?n.right-k.x:0:n.width,k.height=null==n.height?n.bottom?n.bottom-k.y:0:n.height);return k}},{"pick-by-alias":498}],493:[function(b,N,G){N.exports=function(m){var a=[];m.replace(n,function(g,h,r){g=h.toLowerCase();r=(r=r.match(k))?r.map(Number):[];"m"==g&&2<r.length&&(a.push([h].concat(r.splice(0,2))),g="l",
h="m"==h?"l":"L");for(;;){if(r.length==p[g])return r.unshift(h),a.push(r);if(r.length<p[g])throw Error("malformed path data");a.push([h].concat(r.splice(0,p[g])))}});return a};var p={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},n=/([astvzqmhlc])([^astvzqmhlc]*)/ig,k=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig},{}],494:[function(b,N,G){N.exports=function(p,n){n||(n=[0,""]);p=String(p);var k=parseFloat(p,10);n[0]=k;n[1]=p.match(/[\d.\-\+]*\s*(.*)/)[1]||"";return n}},{}],495:[function(b,N,G){(function(p){(function(){(function(){if("undefined"!==
typeof performance&&null!==performance&&performance.now)N.exports=function(){return performance.now()};else if("undefined"!==typeof p&&null!==p&&p.hrtime){N.exports=function(){return(k()-g)/1E6};var n=p.hrtime;var k=function(){var r=n();return 1E9*r[0]+r[1]};var m=k();var a=1E9*p.uptime();var g=m-a}else if(Date.now){N.exports=function(){return Date.now()-h};var h=Date.now()}else N.exports=function(){return(new Date).getTime()-h},h=(new Date).getTime()}).call(this)}).call(this)}).call(this,b("_process"))},
{_process:528}],496:[function(b,N,G){N.exports=function(k){var m=k.length;if(m<p)for(var a=1,g=0;g<m;++g)for(var h=0;h<g;++h)if(k[g]<k[h])a=-a;else{if(k[g]===k[h])return 0}else{var r=n.mallocUint8(m);for(g=0;g<m;++g)r[g]=0;a=1;for(g=0;g<m;++g)if(!r[g]){var l=1;r[g]=1;for(h=k[g];h!==g;h=k[h]){if(r[h])return n.freeUint8(r),0;l+=1;r[h]=1}l&1||(a=-a)}n.freeUint8(r)}return a};var p=32,n=b("typedarray-pool")},{"typedarray-pool":617}],497:[function(b,N,G){var p=b("typedarray-pool"),n=b("invert-permutation");
G.rank=function(k){var m=k.length;switch(m){case 0:case 1:return 0;case 2:return k[1]}var a=p.mallocUint32(m),g=p.mallocUint32(m),h=0,r;n(k,g);for(r=0;r<m;++r)a[r]=k[r];for(r=m-1;0<r;--r)m=g[r],k=a[r],a[r]=a[m],a[m]=k,g[r]=g[k],g[k]=m,h=(h+k)*r;p.freeUint32(g);p.freeUint32(a);return h};G.unrank=function(k,m,a){switch(k){case 0:return a?a:[];case 1:return a?(a[0]=0,a):[0];case 2:return a?(m?(a[0]=0,a[1]=1):(a[0]=1,a[1]=0),a):m?[0,1]:[1,0]}a=a||Array(k);var g,h=1;a[0]=0;for(g=1;g<k;++g)a[g]=g,h=h*g|
0;for(g=k-1;0<g;--g){k=m/h|0;m=m-k*h|0;h=h/g|0;var r=a[g]|0;a[g]=a[k]|0;a[k]=r|0}return a}},{"invert-permutation":450,"typedarray-pool":617}],498:[function(b,N,G){function p(k){if(n[k])return n[k];"string"===typeof k&&(k=n[k]=k.split(/\s*,\s*|\s+/));return k}N.exports=function(k,m,a){var g={},h,r;"string"===typeof m&&(m=p(m));if(Array.isArray(m)){var l={};for(r=0;r<m.length;r++)l[m[r]]=!0;m=l}for(h in m)m[h]=p(m[h]);l={};for(h in m){var c=m[h];if(Array.isArray(c))for(r=0;r<c.length;r++){var d=c[r];
a&&(l[d]=!0);if(d in k){g[h]=k[d];if(a)for(;r<c.length;r++)l[c[r]]=!0;break}}else h in k&&(m[h]&&(g[h]=k[h]),a&&(l[h]=!0))}if(a)for(h in k)l[h]||(g[h]=k[h]);return g};var n={}},{}],499:[function(b,N,G){N.exports=function(n,k){function m(f,q){q=l[q][f[q]];q.splice(q.indexOf(f),1)}function a(f,q,t){var w;for(w=0;2>w;++w)if(0<l[w][q].length){var x=l[w][q][0];var z=w;break}w=x[z^1];for(var B=0;2>B;++B)for(var A=l[B][q],D=0;D<A.length;++D){var C=A[D],v=C[B^1];0<p(k[f],k[q],k[w],k[v])&&(x=C,w=v,z=B)}if(t)return w;
x&&m(x,z);return w}function g(f,q){var t=l[q][f][0],w=[f];m(t,q);for(q=t[q^1];;){for(;q!==f;)w.push(q),q=a(w[w.length-2],q,!1);if(0===l[0][f].length+l[1][f].length)break;q=w[w.length-1];t=f;var x=w[1],z=a(q,t,!0);if(0>p(k[q],k[t],k[x],k[z]))break;w.push(f);q=a(q,t)}return w}for(var h=k.length|0,r=n.length,l=[Array(h),Array(h)],c=0;c<h;++c)l[0][c]=[],l[1][c]=[];for(c=0;c<r;++c){var d=n[c];l[0][d[0]].push(d);l[1][d[1]].push(d)}n=[];for(c=0;c<h;++c)0===l[0][c].length+l[1][c].length&&n.push([c]);for(c=
0;c<h;++c)for(r=0;2>r;++r){for(d=[];0<l[r][c].length;){var e=g(c,r);e[1]===e[e.length-1]?d.push.apply(d,e):(0<d.length&&n.push(d),d=e)}0<d.length&&n.push(d)}return n};var p=b("compare-angle")},{"compare-angle":138}],500:[function(b,N,G){N.exports=function(n,k){for(var m=p(n,k.length),a=Array(k.length),g=Array(k.length),h=[],r=0;r<k.length;++r){var l=m[r].length;g[r]=l;a[r]=!0;1>=l&&h.push(r)}for(;0<h.length;)for(l=h.pop(),a[l]=!1,l=m[l],r=0;r<l.length;++r){var c=l[r];0===--g[c]&&h.push(c)}m=Array(k.length);
g=[];for(r=0;r<k.length;++r)a[r]?(l=g.length,m[r]=l,g.push(k[r])):m[r]=-1;k=[];for(r=0;r<n.length;++r)h=n[r],a[h[0]]&&a[h[1]]&&k.push([m[h[0]],m[h[1]]]);return[k,g]};var p=b("edges-to-adjacency-list")},{"edges-to-adjacency-list":187}],501:[function(b,N,G){function p(c,d){for(var e=Array(c),f=0;f<c;++f)e[f]=d;return e}function n(c){for(var d=Array(c),e=0;e<c;++e)d[e]=[];return d}N.exports=function(c,d){function e(O){for(var I=O.length,L=0;L<I;++L)if(!J[O[L]])return!1;return!0}var f=l(c,d);c=f[0];d=
f[1];for(var q=d.length,t=k(c,d.length),w=0;w<q;++w)if(1===t[w].length%2)throw Error("planar-graph-to-polyline: graph must be manifold");c=m(c,d);c=c.filter(function(O){for(var I=O.length,L=[0],H=0;H<I;++H){var M=d[O[H]],Q=d[O[(H+1)%I]],Z=g(-M[0],M[1]),ca=g(-M[0],Q[1]);M=g(Q[0],M[1]);Q=g(Q[0],Q[1]);L=h(L,h(h(Z,ca),h(M,Q)))}return 0<L[L.length-1]});f=c.length;var x=Array(f),z=Array(f);for(w=0;w<f;++w){x[w]=w;var B=Array(f);t=c[w].map(function(O){return d[O]});var A=a([t]),D=0,C=0;a:for(;C<f;++C)if(B[C]=
0,w!==C){t=c[C];for(var v=t.length,y=0;y<v;++y){var F=A(d[t[y]]);if(0!==F){0>F&&(B[C]=1,D+=1);continue a}}B[C]=1;D+=1}z[w]=[D,w,B]}z.sort(function(O,I){return I[0]-O[0]});for(w=0;w<f;++w)for(B=z[w],t=B[1],v=B[2],C=0;C<f;++C)v[C]&&(x[C]=t);z=n(f);for(w=0;w<f;++w)z[w].push(x[w]),z[x[w]].push(w);B={};var J=p(q,!1);for(w=0;w<f;++w)for(t=c[w],v=t.length,C=0;C<v;++C)q=t[C],A=t[(C+1)%v],D=Math.min(q,A)+":"+Math.max(q,A),D in B?(D=B[D],z[D].push(w),z[w].push(D),J[q]=J[A]=!0):B[D]=w;C=[];q=p(f,-1);for(w=0;w<
f;++w)x[w]!==w||e(c[w])?q[w]=-1:(C.push(w),q[w]=0);for(f=[];0<C.length;){w=C.pop();x=z[w];r(x,function(O,I){return O-I});v=x.length;B=q[w];if(0===B){t=c[w];var K=[t]}for(w=0;w<v;++w)t=x[w],0<=q[t]||(q[t]=B^1,C.push(t),0===B&&(t=c[t],e(t)||(t.reverse(),K.push(t))));0===B&&f.push(K)}return f};var k=b("edges-to-adjacency-list"),m=b("planar-dual"),a=b("point-in-big-polygon"),g=b("two-product"),h=b("robust-sum"),r=b("uniq"),l=b("./lib/trim-leaves")},{"./lib/trim-leaves":500,"edges-to-adjacency-list":187,
"planar-dual":499,"point-in-big-polygon":503,"robust-sum":553,"two-product":604,uniq:619}],502:[function(b,N,G){arguments[4][251][0].apply(G,arguments)},{dup:251}],503:[function(b,N,G){function p(){return!0}function n(e){return function(f,q){return(f=e[f])?!!f.queryPoint(q,p):!1}}function k(e){for(var f={},q=0;q<e.length;++q){var t=e[q],w=t[0][0],x=t[0][1];t=t[1][1];x=[Math.min(x,t),Math.max(x,t)];w in f?f[w].push(x):f[w]=[x]}e={};w=Object.keys(f);for(q=0;q<w.length;++q)e[w[q]]=c(f[w[q]]);return n(e)}
function m(e,f){return function(q){var t=d.le(f,q[0]);if(0>t)return 1;var w=e[t];if(!w)if(0<t&&f[t]===q[0])w=e[t-1];else return 1;for(t=1;w;){var x=w.key,z=r(q,x[0],x[1]);if(x[0][0]<x[1][0])if(0>z)w=w.left;else if(0<z)t=-1,w=w.right;else return 0;else if(0<z)w=w.left;else if(0>z)t=1,w=w.right;else return 0}return t}}function a(e){return 1}function g(e){return function(f){return e(f[0],f[1])?0:1}}function h(e,f){return function(q){return e(q[0],q[1])?0:f(q)}}N.exports=function(e){for(var f=e.length,
q=[],t=[],w=0;w<f;++w)for(var x=e[w],z=x.length,B=z-1,A=0;A<z;B=A++){B=x[B];var D=x[A];B[0]===D[0]?t.push([B,D]):q.push([B,D])}if(0===q.length)return 0===t.length?a:g(k(t));e=l(q);e=m(e.slabs,e.coordinates);return 0===t.length?e:h(k(t),e)};var r=b("robust-orientation")[3],l=b("slab-decomposition"),c=b("interval-tree-1d"),d=b("binary-search-bounds")},{"binary-search-bounds":502,"interval-tree-1d":448,"robust-orientation":548,"slab-decomposition":566}],504:[function(b,N,G){function p(c,d,e){c=l.segments(c);
d=l.segments(d);d=l.combine(c,d);e=e(d);return l.polygon(e)}var n=b("./lib/build-log");G=b("./lib/epsilon");var k=b("./lib/intersecter"),m=b("./lib/segment-chainer"),a=b("./lib/segment-selector"),g=b("./lib/geojson"),h=!1,r=G();var l={buildLog:function(c){!0===c?h=n():!1===c&&(h=!1);return!1===h?!1:h.list},epsilon:function(c){return r.epsilon(c)},segments:function(c){var d=k(!0,r,h);c.regions.forEach(d.addRegion);return{segments:d.calculate(c.inverted),inverted:c.inverted}},combine:function(c,d){return{combined:k(!1,
r,h).calculate(c.segments,c.inverted,d.segments,d.inverted),inverted1:c.inverted,inverted2:d.inverted}},selectUnion:function(c){return{segments:a.union(c.combined,h),inverted:c.inverted1||c.inverted2}},selectIntersect:function(c){return{segments:a.intersect(c.combined,h),inverted:c.inverted1&&c.inverted2}},selectDifference:function(c){return{segments:a.difference(c.combined,h),inverted:c.inverted1&&!c.inverted2}},selectDifferenceRev:function(c){return{segments:a.differenceRev(c.combined,h),inverted:!c.inverted1&&
c.inverted2}},selectXor:function(c){return{segments:a.xor(c.combined,h),inverted:c.inverted1!==c.inverted2}},polygon:function(c){return{regions:m(c.segments,r,h),inverted:c.inverted}},polygonFromGeoJSON:function(c){return g.toPolygon(l,c)},polygonToGeoJSON:function(c){return g.fromPolygon(l,r,c)},union:function(c,d){return p(c,d,l.selectUnion)},intersect:function(c,d){return p(c,d,l.selectIntersect)},difference:function(c,d){return p(c,d,l.selectDifference)},differenceRev:function(c,d){return p(c,
d,l.selectDifferenceRev)},xor:function(c,d){return p(c,d,l.selectXor)}};"object"===typeof window&&(window.PolyBool=l);N.exports=l},{"./lib/build-log":505,"./lib/epsilon":506,"./lib/geojson":507,"./lib/intersecter":508,"./lib/segment-chainer":510,"./lib/segment-selector":511}],505:[function(b,N,G){N.exports=function(){function p(a,g){n.list.push({type:a,data:g?JSON.parse(JSON.stringify(g)):void 0});return n}var n,k=0,m=!1;return n={list:[],segmentId:function(){return k++},checkIntersection:function(a,
g){return p("check",{seg1:a,seg2:g})},segmentChop:function(a,g){p("div_seg",{seg:a,pt:g});return p("chop",{seg:a,pt:g})},statusRemove:function(a){return p("pop_seg",{seg:a})},segmentUpdate:function(a){return p("seg_update",{seg:a})},segmentNew:function(a,g){return p("new_seg",{seg:a,primary:g})},segmentRemove:function(a){return p("rem_seg",{seg:a})},tempStatus:function(a,g,h){return p("temp_status",{seg:a,above:g,below:h})},rewind:function(a){return p("rewind",{seg:a})},status:function(a,g,h){return p("status",
{seg:a,above:g,below:h})},vert:function(a){if(a===m)return n;m=a;return p("vert",{x:a})},log:function(a){"string"!==typeof a&&(a=JSON.stringify(a,!1,"  "));return p("log",{txt:a})},reset:function(){return p("reset")},selected:function(a){return p("selected",{segs:a})},chainStart:function(a){return p("chain_start",{seg:a})},chainRemoveHead:function(a,g){return p("chain_rem_head",{index:a,pt:g})},chainRemoveTail:function(a,g){return p("chain_rem_tail",{index:a,pt:g})},chainNew:function(a,g){return p("chain_new",
{pt1:a,pt2:g})},chainMatch:function(a){return p("chain_match",{index:a})},chainClose:function(a){return p("chain_close",{index:a})},chainAddHead:function(a,g){return p("chain_add_head",{index:a,pt:g})},chainAddTail:function(a,g){return p("chain_add_tail",{index:a,pt:g})},chainConnect:function(a,g){return p("chain_con",{index1:a,index2:g})},chainReverse:function(a){return p("chain_rev",{index:a})},chainJoin:function(a,g){return p("chain_join",{index1:a,index2:g})},done:function(){return p("done")}}}},
{}],506:[function(b,N,G){N.exports=function(p){"number"!==typeof p&&(p=1E-10);var n={epsilon:function(k){"number"===typeof k&&(p=k);return p},pointAboveOrOnLine:function(k,m,a){var g=m[0];m=m[1];return(a[0]-g)*(k[1]-m)-(a[1]-m)*(k[0]-g)>=-p},pointBetween:function(k,m,a){var g=a[0]-m[0];a=a[1]-m[1];k=(k[0]-m[0])*g+(k[1]-m[1])*a;return k<p||k-(g*g+a*a)>-p?!1:!0},pointsSameX:function(k,m){return Math.abs(k[0]-m[0])<p},pointsSameY:function(k,m){return Math.abs(k[1]-m[1])<p},pointsSame:function(k,m){return n.pointsSameX(k,
m)&&n.pointsSameY(k,m)},pointsCompare:function(k,m){return n.pointsSameX(k,m)?n.pointsSameY(k,m)?0:k[1]<m[1]?-1:1:k[0]<m[0]?-1:1},pointsCollinear:function(k,m,a){return Math.abs((k[0]-m[0])*(m[1]-a[1])-(m[0]-a[0])*(k[1]-m[1]))<p},linesIntersect:function(k,m,a,g){var h=m[0]-k[0];m=m[1]-k[1];var r=g[0]-a[0],l=g[1]-a[1];g=h*l-m*r;if(Math.abs(g)<p)return!1;var c=k[0]-a[0];a=k[1]-a[1];r=(r*a-l*c)/g;a=(h*a-m*c)/g;k={alongA:0,alongB:0,pt:[k[0]+r*h,k[1]+r*m]};k.alongA=r<=-p?-2:r<p?-1:r-1<=-p?0:r-1<p?1:2;
k.alongB=a<=-p?-2:a<p?-1:a-1<=-p?0:a-1<p?1:2;return k},pointInsideRegion:function(k,m){var a=k[0];k=k[1];for(var g=m[m.length-1][0],h=m[m.length-1][1],r=!1,l=0;l<m.length;l++){var c=m[l][0],d=m[l][1];d-k>p!=h-k>p&&(g-c)*(k-d)/(h-d)+c-a>p&&(r=!r);g=c;h=d}return r}};return n}},{}],507:[function(b,N,G){N.exports={toPolygon:function(p,n){function k(g){function h(c){c=c.slice(0,c.length-1);return p.segments({inverted:!1,regions:[c]})}if(0>=g.length)return p.segments({inverted:!1,regions:[]});for(var r=
h(g[0]),l=1;l<g.length;l++)r=p.selectDifference(p.combine(r,h(g[l])));return r}if("Polygon"===n.type)return p.polygon(k(n.coordinates));if("MultiPolygon"===n.type){for(var m=p.segments({inverted:!1,regions:[]}),a=0;a<n.coordinates.length;a++)m=p.selectUnion(p.combine(m,k(n.coordinates[a])));return p.polygon(m)}throw Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon");},fromPolygon:function(p,n,k){function m(d,e){return n.pointInsideRegion([.5*(d[0][0]+d[1][0]),.5*(d[0][1]+d[1][1])],
e)}function a(d,e){for(var f=0;f<d.children.length;f++){var q=d.children[f];if(m(e,q.region)){a(q,e);return}}var t={region:e,children:[]};for(f=0;f<d.children.length;f++)q=d.children[f],m(q.region,e)&&(t.children.push(q),d.children.splice(f,1),f--);d.children.push(t)}function g(d,e){for(var f=0,q=d[d.length-1][0],t=d[d.length-1][1],w=[],x=0;x<d.length;x++){var z=d[x][0],B=d[x][1];w.push([z,B]);f+=B*q-z*t;q=z;t=B}0>f!==e&&w.reverse();w.push([w[0][0],w[0][1]]);return w}function h(d){var e=[g(d.region,
!1)];c.push(e);for(var f=0;f<d.children.length;f++){var q=e,t=q.push;var w=d.children[f];for(var x=0;x<w.children.length;x++)h(w.children[x]);w=g(w.region,!0);t.call(q,w)}}k=p.polygon(p.segments(k));p={region:null,children:[]};for(var r=0;r<k.regions.length;r++){var l=k.regions[r];3>l.length||a(p,l)}var c=[];for(r=0;r<p.children.length;r++)h(p.children[r]);return 0>=c.length?{type:"Polygon",coordinates:[]}:1==c.length?{type:"Polygon",coordinates:c[0]}:{type:"MultiPolygon",coordinates:c}}}},{}],508:[function(b,
N,G){var p=b("./linked-list");N.exports=function(n,k,m){function a(d,e,f){return{id:m?m.segmentId():-1,start:d,end:e,myFill:{above:f.myFill.above,below:f.myFill.below},otherFill:null}}function g(d,e){c.insertBefore(d,function(f){var q=d.isStart;var t=f.isStart,w=f.pt;f=f.other.pt;var x=k.pointsCompare(d.pt,w);q=0!==x?x:k.pointsSame(e,f)?0:q!==t?q?1:-1:k.pointAboveOrOnLine(e,t?w:f,t?f:w)?1:-1;return 0>q})}function h(d,e){var f=p.node({isStart:!0,pt:d.start,seg:d,primary:e,other:null,status:null});
g(f,d.end);d=p.node({isStart:!1,pt:d.end,seg:d,primary:e,other:f,status:null});f.other=d;g(d,f.pt);return f}function r(d,e){var f=a(e,d.seg.end,d.seg);m&&m.segmentChop(d.seg,e);d.other.remove();d.seg.end=e;d.other.pt=e;g(d.other,d.pt);return h(f,d.primary)}function l(d,e){function f(v){return t.findTransition(function(y){var F=y.ev;y=v.seg.start;var J=v.seg.end,K=F.seg.start;F=F.seg.end;y=k.pointsCollinear(y,K,F)?k.pointsCollinear(J,K,F)?1:k.pointAboveOrOnLine(J,K,F)?1:-1:k.pointAboveOrOnLine(y,K,
F)?1:-1;return 0<y})}function q(v,y){var F=v.seg,J=y.seg,K=F.start,O=F.end,I=J.start,L=J.end;m&&m.checkIntersection(F,J);F=k.linesIntersect(K,O,I,L);if(!1===F){if(!k.pointsCollinear(K,O,I)||k.pointsSame(K,L)||k.pointsSame(O,I))return!1;F=k.pointsSame(K,I);J=k.pointsSame(O,L);if(F&&J)return y;var H=!F&&k.pointBetween(K,I,L);I=!J&&k.pointBetween(O,I,L);if(F)return I?r(y,O):r(v,L),y;H&&(J||(I?r(y,O):r(v,L)),r(y,K))}else 0===F.alongA&&(-1===F.alongB?r(v,I):0===F.alongB?r(v,F.pt):1===F.alongB&&r(v,L)),
0===F.alongB&&(-1===F.alongA?r(y,K):0===F.alongA?r(y,F.pt):1===F.alongA&&r(y,O));return!1}for(var t=p.create(),w=[];!c.isEmpty();){var x=c.getHead();m&&m.vert(x.pt[0]);if(x.isStart){m&&m.segmentNew(x.seg,x.primary);var z=f(x),B=z.before?z.before.ev:null,A=z.after?z.after.ev:null;m&&m.tempStatus(x.seg,B?B.seg:!1,A?A.seg:!1);var D=function(){if(B){var v=q(x,B);if(v)return v}return A?q(x,A):!1}();if(D){if(n){var C;if(C=null===x.seg.myFill.below?!0:x.seg.myFill.above!==x.seg.myFill.below)D.seg.myFill.above=
!D.seg.myFill.above}else D.seg.otherFill=x.seg.myFill;m&&m.segmentUpdate(D.seg);x.other.remove();x.remove()}if(c.getHead()!==x){m&&m.rewind(x.seg);continue}n?(C=null===x.seg.myFill.below?!0:x.seg.myFill.above!==x.seg.myFill.below,x.seg.myFill.below=A?A.seg.myFill.above:d,x.seg.myFill.above=C?!x.seg.myFill.below:x.seg.myFill.below):null===x.seg.otherFill&&(D=A?x.primary===A.primary?A.seg.otherFill.above:A.seg.myFill.above:x.primary?e:d,x.seg.otherFill={above:D,below:D});m&&m.status(x.seg,B?B.seg:!1,
A?A.seg:!1);x.other.status=z.insert(p.node({ev:x}))}else{z=x.status;if(null===z)throw Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");t.exists(z.prev)&&t.exists(z.next)&&q(z.prev.ev,z.next.ev);m&&m.statusRemove(z.ev.seg);z.remove();x.primary||(z=x.seg.myFill,x.seg.myFill=x.seg.otherFill,x.seg.otherFill=z);w.push(x.seg)}c.getHead().remove()}m&&m.done();return w}var c=p.create();return n?{addRegion:function(d){for(var e,f=d[d.length-1],q=0;q<d.length;q++){e=
f;f=d[q];var t=k.pointsCompare(e,f);if(0!==t){var w=0>t?e:f;e=0>t?f:e;w={id:m?m.segmentId():-1,start:w,end:e,myFill:{above:null,below:null},otherFill:null};h(w,!0)}}},calculate:function(d){return l(d,!1)}}:{calculate:function(d,e,f,q){d.forEach(function(t){h(a(t.start,t.end,t),!0)});f.forEach(function(t){h(a(t.start,t.end,t),!1)});return l(e,q)}}}},{"./linked-list":509}],509:[function(b,N,G){N.exports={create:function(){var p={root:{root:!0,next:null},exists:function(n){return null===n||n===p.root?
!1:!0},isEmpty:function(){return null===p.root.next},getHead:function(){return p.root.next},insertBefore:function(n,k){for(var m=p.root,a=p.root.next;null!==a;){if(k(a)){n.prev=a.prev;n.next=a;a.prev.next=n;a.prev=n;return}m=a;a=a.next}m.next=n;n.prev=m;n.next=null},findTransition:function(n){for(var k=p.root,m=p.root.next;null!==m&&!n(m);)k=m,m=m.next;return{before:k===p.root?null:k,after:m,insert:function(a){a.prev=k;a.next=m;k.next=a;null!==m&&(m.prev=a);return a}}}};return p},node:function(p){p.prev=
null;p.next=null;p.remove=function(){if(p.prev.next=p.next)p.next.prev=p.prev;p.prev=null;p.next=null};return p}}},{}],510:[function(b,N,G){N.exports=function(p,n,k){var m=[],a=[];p.forEach(function(g){function h(A,D,C){q.index=A;q.matches_head=D;q.matches_pt1=C;if(q===e)return q=f,!1;q=null;return!0}function r(A){k&&k.chainReverse(A);m[A].reverse()}function l(A,D){var C=m[A],v=m[D],y=C[C.length-1],F=C[C.length-2],J=v[0],K=v[1];n.pointsCollinear(F,y,J)&&(k&&k.chainRemoveTail(A,y),C.pop(),y=F);n.pointsCollinear(y,
J,K)&&(k&&k.chainRemoveHead(D,J),v.shift());k&&k.chainJoin(A,D);m[A]=C.concat(v);m.splice(D,1)}var c=g.start,d=g.end;if(n.pointsSame(c,d))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{k&&k.chainStart(g);for(var e={index:0,matches_head:!1,matches_pt1:!1},f={index:0,matches_head:!1,matches_pt1:!1},q=e,t=0;t<m.length;t++){g=m[t];var w=g[0];g=g[g.length-1];if(n.pointsSame(w,c)){if(h(t,!0,!0))break}else if(n.pointsSame(w,d)){if(h(t,
!0,!1))break}else if(n.pointsSame(g,c)){if(h(t,!1,!0))break}else if(n.pointsSame(g,d)&&h(t,!1,!1))break}if(q===e)m.push([c,d]),k&&k.chainNew(c,d);else if(q===f){k&&k.chainMatch(e.index);t=e.index;c=e.matches_pt1?d:c;d=e.matches_head;g=m[t];w=d?g[0]:g[g.length-1];var x=d?g[1]:g[g.length-2],z=d?g[g.length-1]:g[0],B=d?g[g.length-2]:g[1];n.pointsCollinear(x,w,c)&&(d?(k&&k.chainRemoveHead(e.index,c),g.shift()):(k&&k.chainRemoveTail(e.index,c),g.pop()),w=x);n.pointsSame(z,c)?(m.splice(t,1),n.pointsCollinear(B,
z,w)&&(d?(k&&k.chainRemoveTail(e.index,w),g.pop()):(k&&k.chainRemoveHead(e.index,w),g.shift())),k&&k.chainClose(e.index),a.push(g)):d?(k&&k.chainAddHead(e.index,c),g.unshift(c)):(k&&k.chainAddTail(e.index,c),g.push(c))}else g=e.index,t=f.index,k&&k.chainConnect(g,t),c=m[g].length<m[t].length,e.matches_head?f.matches_head?c?(r(g),l(g,t)):(r(t),l(t,g)):l(t,g):f.matches_head?l(g,t):c?(r(g),l(t,g)):(r(t),l(g,t))}});return a}},{}],511:[function(b,N,G){function p(n,k,m){var a=[];n.forEach(function(g){var h=
(g.myFill.above?8:0)+(g.myFill.below?4:0)+(g.otherFill&&g.otherFill.above?2:0)+(g.otherFill&&g.otherFill.below?1:0);0!==k[h]&&a.push({id:m?m.segmentId():-1,start:g.start,end:g.end,myFill:{above:1===k[h],below:2===k[h]},otherFill:null})});m&&m.selected(a);return a}N.exports={union:function(n,k){return p(n,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],k)},intersect:function(n,k){return p(n,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],k)},difference:function(n,k){return p(n,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],k)},differenceRev:function(n,
k){return p(n,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],k)},xor:function(n,k){return p(n,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],k)}}},{}],512:[function(b,N,G){var p=new Float64Array(4),n=new Float64Array(4),k=new Float64Array(4);N.exports=function(m,a,g,h,r){p.length<h.length&&(p=new Float64Array(h.length),n=new Float64Array(h.length),k=new Float64Array(h.length));for(var l=0;l<h.length;++l)p[l]=m[l]-h[l],n[l]=a[l]-m[l],k[l]=g[l]-m[l];var c=0,d=0,e=0,f=0,q=0,t=0;for(l=0;l<h.length;++l){var w=n[l],x=k[l],z=p[l];
c+=w*w;d+=w*x;e+=x*x;f+=z*w;q+=z*x;t+=z*z}l=Math.abs(c*e-d*d);w=d*q-e*f;x=d*f-c*q;w+x<=l?0>w?0>x?0>f?(x=0,-f>=c?(w=1,c=c+2*f+t):(w=-f/c,c=f*w+t)):(w=0,0<=q?(x=0,c=t):-q>=e?(x=1,c=e+2*q+t):(x=-q/e,c=q*x+t)):(w=0,0<=q?(x=0,c=t):-q>=e?(x=1,c=e+2*q+t):(x=-q/e,c=q*x+t)):0>x?(x=0,0<=f?(w=0,c=t):-f>=c?(w=1,c=c+2*f+t):(w=-f/c,c=f*w+t)):(l=1/l,w*=l,x*=l,c=w*(c*w+d*x+2*f)+x*(d*w+e*x+2*q)+t):0>w?(w=d+f,l=e+q,l>w?(l-=w,w=c-2*d+e,l>=w?(w=1,x=0,c=c+2*f+t):(w=l/w,x=1-w,c=w*(c*w+d*x+2*f)+x*(d*w+e*x+2*q)+t)):(w=0,
0>=l?(x=1,c=e+2*q+t):0<=q?(x=0,c=t):(x=-q/e,c=q*x+t))):0>x?(w=d+q,l=c+f,l>w?(l-=w,w=c-2*d+e,l>=w?(x=1,w=0,c=e+2*q+t):(x=l/w,w=1-x,c=w*(c*w+d*x+2*f)+x*(d*w+e*x+2*q)+t)):(x=0,0>=l?(w=1,c=c+2*f+t):0<=f?(w=0,c=t):(w=-f/c,c=f*w+t))):(l=e+q-d-f,0>=l?(w=0,x=1,c=e+2*q+t):(w=c-2*d+e,l>=w?(w=1,x=0,c=c+2*f+t):(w=l/w,x=1-w,c=w*(c*w+d*x+2*f)+x*(d*w+e*x+2*q)+t)));d=1-w-x;for(l=0;l<h.length;++l)r[l]=d*m[l]+w*a[l]+x*g[l];return 0>c?0:c}},{}],513:[function(b,N,G){function p(){k.call(this,{readableObjectMode:!0})}
function n(m,a,g){Error.call(this);Error.captureStackTrace(this,this.constructor);this.name=this.constructor.name;this.message=m;a&&(this.code=a);g&&(this.statusCode=g)}var k=b("stream").Transform;b=b("stream-parser");p.prototype=Object.create(k.prototype);p.prototype.constructor=p;b(p.prototype);G.ParserStream=p;G.sliceEq=function(m,a,g){for(var h=0;h<g.length;)if(m[a++]!==g[h++])return!1;return!0};G.str2arr=function(m,a){var g=[],h=0;if(a&&"hex"===a)for(;h<m.length;)g.push(parseInt(m.slice(h,h+
2),16)),h+=2;else for(;h<m.length;h++)g.push(m.charCodeAt(h)&255);return g};G.readUInt16LE=function(m,a){return m[a]|m[a+1]<<8};G.readUInt16BE=function(m,a){return m[a+1]|m[a]<<8};G.readUInt32LE=function(m,a){return m[a]|m[a+1]<<8|m[a+2]<<16|16777216*m[a+3]};G.readUInt32BE=function(m,a){return m[a+3]|m[a+2]<<8|m[a+1]<<16|16777216*m[a]};n.prototype=Object.create(Error.prototype);n.prototype.constructor=n;G.ProbeError=n},{stream:569,"stream-parser":585}],514:[function(b,N,G){function p(k,m){k=Error(k);
k.code=m;return k}function n(k,m,a){this.input=k.subarray(m,a);this.start=m;k=String.fromCharCode.apply(null,this.input.subarray(0,4));if("II*\x00"!==k&&"MM\x00*"!==k)throw p("invalid TIFF signature","EBADDATA");this.big_endian="M"===k[0]}n.prototype.each=function(k){this.aborted=!1;for(this.ifds_to_read=[{id:0,offset:this.read_uint32(4)}];0<this.ifds_to_read.length&&!this.aborted;){var m=this.ifds_to_read.shift();m.offset&&this.scan_ifd(m.id,m.offset,k)}};n.prototype.read_uint16=function(k){var m=
this.input;if(k+2>m.length)throw p("unexpected EOF","EBADDATA");return this.big_endian?256*m[k]+m[k+1]:m[k]+256*m[k+1]};n.prototype.read_uint32=function(k){var m=this.input;if(k+4>m.length)throw p("unexpected EOF","EBADDATA");return this.big_endian?16777216*m[k]+65536*m[k+1]+256*m[k+2]+m[k+3]:m[k]+256*m[k+1]+65536*m[k+2]+16777216*m[k+3]};n.prototype.is_subifd_link=function(k,m){return 0===k&&34665===m||0===k&&34853===m||34665===k&&40965===m};n.prototype.exif_format_length=function(k){switch(k){case 1:case 2:case 6:case 7:return 1;
case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}};n.prototype.exif_format_read=function(k,m){switch(k){case 1:case 2:return k=this.input[m];case 6:return k=this.input[m],k|33554430*(k&128);case 3:return k=this.read_uint16(m);case 8:return k=this.read_uint16(m),k|131070*(k&32768);case 4:return k=this.read_uint32(m);case 9:return k=this.read_uint32(m),k|0;case 5:case 10:case 11:case 12:return null;case 7:return null;default:return null}};n.prototype.scan_ifd=
function(k,m,a){var g=this.read_uint16(m);m+=2;for(var h=0;h<g;h++){var r=this.read_uint16(m),l=this.read_uint16(m+2),c=this.read_uint32(m+4),d=this.exif_format_length(l),e=c*d,f=4>=e?m+8:this.read_uint32(m+8),q=!1;if(f+e>this.input.length)throw p("unexpected EOF","EBADDATA");for(var t=[],w=f,x=0;x<c;x++,w+=d){var z=this.exif_format_read(l,w);if(null===z){t=null;break}t.push(z)}if(Array.isArray(t)&&2===l){d=String.fromCharCode.apply(null,t);try{t=decodeURIComponent(escape(d))}catch(B){t=d}t&&"\x00"===
t[t.length-1]&&(t=t.slice(0,-1))}this.is_subifd_link(k,r)&&Array.isArray(t)&&Number.isInteger(t[0])&&0<t[0]&&(this.ifds_to_read.push({id:r,offset:t[0]}),q=!0);if(!1===a({is_big_endian:this.big_endian,ifd:k,tag:r,format:l,count:c,entry_offset:m+this.start,data_length:e,data_offset:f+this.start,value:t,is_subifd_link:q})){this.aborted=!0;return}m+=12}0===k&&this.ifds_to_read.push({id:1,offset:this.read_uint32(m)})};N.exports.ExifParser=n;N.exports.get_orientation=function(k){var m=0;try{return(new n(k,
0,k.length)).each(function(a){if(0===a.ifd&&274===a.tag&&Array.isArray(a.value))return m=a.value[0],!1}),m}catch(a){return-1}}},{}],515:[function(b,N,G){function p(h,r){if(h.length<4+r)return null;var l=g(h,r);return h.length<l+r||8>l?null:{boxtype:String.fromCharCode.apply(null,h.slice(r+4,r+8)),data:h.slice(r+8,r+l),end:r+l}}function n(h,r,l){for(var c=0,d=0;d<l;d++)c=256*c+(h[r+d]||0);return c}function k(h,r){for(var l=4;;){l=p(h,l);if(!l)break;if("iprp"===l.boxtype)for(var c=l.data,d=r,e=0;;){e=
p(c,e);if(!e)break;if("ipco"===e.boxtype)for(var f=e.data,q=d,t=0;;){t=p(f,t);if(!t)break;switch(t.boxtype){case "ispe":q.sizes.push({width:g(t.data,4),height:g(t.data,8)});break;case "irot":q.transforms.push({type:"irot",value:t.data[0]&3});break;case "imir":q.transforms.push({type:"imir",value:t.data[0]&1})}t=t.end}e=e.end}if("iloc"===l.boxtype){c=l.data;d=r;e=c[4]>>4&15;f=c[4]&15;q=c[5]>>4&15;t=a(c,6);for(var w=8,x=0;x<t;x++){var z=a(c,w);w+=2;var B=a(c,w);w+=2;var A=n(c,w,q);w+=q;var D=a(c,w);
w+=2;if(0===B&&1===D){B=n(c,w,e);var C=n(c,w+e,f);d.item_loc[z]={length:C,offset:B+A}}w+=D*(e+f)}}if("iinf"===l.boxtype)for(c=l.data,d=r,e=a(c,4),q=6,f=0;f<e;f++){q=p(c,q);if(!q)break;if("infe"===q.boxtype){t=a(q.data,4);w="";for(x=8;x<q.data.length&&q.data[x];x++)w+=String.fromCharCode(q.data[x]);d.item_inf[w]=t}q=q.end}l=l.end}}function m(h){var r=h.reduce(function(l,c){return l.width>c.width||l.width===c.width&&l.height>c.height?l:c});h=h.reduce(function(l,c){return l.height>c.height||l.height===
c.height&&l.width>c.width?l:c});return r.width>h.height||r.width===h.height&&r.height>h.width?r:h}var a=b("./common").readUInt16BE,g=b("./common").readUInt32BE;N.exports.unbox=p;N.exports.readSizeFromMeta=function(h){var r={sizes:[],transforms:[],item_inf:{},item_loc:{}};k(h,r);if(r.sizes.length){h=m(r.sizes);var l=1;r.transforms.forEach(function(d){var e={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},f={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};"imir"===d.type&&(0===d.value?l=f[l]:(l=f[l],l=e[l],l=e[l]));if("irot"===
d.type)for(f=0;f<d.value;f++)l=e[l]});var c=null;r.item_inf.Exif&&(c=r.item_loc[r.item_inf.Exif]);return{width:h.width,height:h.height,orientation:r.transforms.length?l:null,variants:r.sizes,exif_location:c}}};N.exports.getMimeType=function(h){var r=String.fromCharCode.apply(null,h.slice(0,4)),l={};l[r]=!0;for(var c=8;c<h.length;c+=4)l[String.fromCharCode.apply(null,h.slice(c,c+4))]=!0;if(l.mif1||l.msf1||l.miaf)return"avif"===r||"avis"===r||"avio"===r?{type:"avif",mime:"image/avif"}:"heic"===r||"heix"===
r?{type:"heic",mime:"image/heic"}:"hevc"===r||"hevx"===r?{type:"heic",mime:"image/heic-sequence"}:l.avif||l.avis?{type:"avif",mime:"image/avif"}:l.heic||l.heix||l.hevc||l.hevx||l.heis?l.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},{"./common":513}],516:[function(b,N,G){G=b("../common").str2arr;var p=b("../common").sliceEq,n=b("../common").readUInt32BE,k=b("../miaf_utils"),m=b("../exif_utils"),a=G("ftyp");N.exports=function(g){if(p(g,
4,a)){var h=k.unbox(g,0);if(h){var r=k.getMimeType(h.data);if(r){for(h=h.end;;){var l=k.unbox(g,h);if(!l)break;h=l.end;if("mdat"===l.boxtype)return;if("meta"===l.boxtype){var c=l.data;break}}if(c&&(c=k.readSizeFromMeta(c)))return r={width:c.width,height:c.height,type:r.type,mime:r.mime,wUnits:"px",hUnits:"px"},1<c.variants.length&&(r.variants=c.variants),c.orientation&&(r.orientation=c.orientation),c.exif_location&&c.exif_location.offset+c.exif_location.length<=g.length&&(h=n(g,c.exif_location.offset),
g=g.slice(c.exif_location.offset+h+4,c.exif_location.offset+c.exif_location.length),g=m.get_orientation(g),0<g&&(r.orientation=g)),r}}}}},{"../common":513,"../exif_utils":514,"../miaf_utils":515}],517:[function(b,N,G){G=b("../common").str2arr;var p=b("../common").sliceEq,n=b("../common").readUInt16LE,k=G("BM");N.exports=function(m){if(!(26>m.length)&&p(m,0,k))return{width:n(m,18),height:n(m,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},{"../common":513}],518:[function(b,N,G){G=b("../common").str2arr;
var p=b("../common").sliceEq,n=b("../common").readUInt16LE,k=G("GIF87a"),m=G("GIF89a");N.exports=function(a){if(!(10>a.length)&&(p(a,0,k)||p(a,0,m)))return{width:n(a,6),height:n(a,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},{"../common":513}],519:[function(b,N,G){var p=b("../common").readUInt16LE;N.exports=function(n){var k=p(n,0),m=p(n,2),a=p(n,4);if(0===k&&1===m&&a){k=[];m={width:0,height:0};for(var g=0;g<a;g++){var h=n[6+16*g]||256,r=n[16*g+7]||256,l={width:h,height:r};k.push(l);
if(h>m.width||r>m.height)m=l}return{width:m.width,height:m.height,variants:k,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},{"../common":513}],520:[function(b,N,G){var p=b("../common").readUInt16BE;G=b("../common").str2arr;var n=b("../common").sliceEq,k=b("../exif_utils"),m=G("Exif\x00\x00");N.exports=function(a){if(!(2>a.length)&&255===a[0]&&216===a[1])for(var g=2;!(2>a.length-g)&&255===a[g++];){for(var h=a[g++],r;255===h;)h=a[g++];if(208<=h&&217>=h||1===h)r=0;else if(192<=h&&254>=h){if(2>
a.length-g)break;r=p(a,g)-2;g+=2}else break;if(217===h||218===h)break;var l;225===h&&10<=r&&n(a,g,m)&&(l=k.get_orientation(a.slice(g+6,g+r)));if(5<=r&&192<=h&&207>=h&&196!==h&&200!==h&&204!==h){if(a.length-g<r)break;a={width:p(a,g+3),height:p(a,g+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};0<l&&(a.orientation=l);return a}g+=r}}},{"../common":513,"../exif_utils":514}],521:[function(b,N,G){G=b("../common").str2arr;var p=b("../common").sliceEq,n=b("../common").readUInt32BE,k=G("PNG\r\n\n"),
m=G("IHDR");N.exports=function(a){if(!(24>a.length)&&p(a,0,k)&&p(a,12,m))return{width:n(a,16),height:n(a,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},{"../common":513}],522:[function(b,N,G){G=b("../common").str2arr;var p=b("../common").sliceEq,n=b("../common").readUInt32BE,k=G("8BPS\x00");N.exports=function(m){if(!(22>m.length)&&p(m,0,k))return{width:n(m,18),height:n(m,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},{"../common":513}],523:[function(b,N,G){function p(c){return 32===
c||9===c||13===c||10===c}function n(c){return"number"===typeof c&&isFinite(c)&&0<c}function k(c){return l.test(c)?c.match(l)[0]:"px"}var m=/<[-_.:a-zA-Z0-9][^>]*>/,a=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,g=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,h=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,r=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,l=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;N.exports=function(c){var d=0;var e=c.length;for(239===c[0]&&187===c[1]&&191===c[2]&&(d=3);d<e&&p(c[d]);)d++;d=d===e?!1:60===c[d];
if(d){d="";for(e=0;e<c.length;e++)d+=String.fromCharCode(c[e]);e=(d.match(m)||[""])[0];if(a.test(e)){c=e.match(g);d=e.match(h);e=e.match(r);c=c&&(c[1]||c[2]);d=d&&(d[1]||d[2]);var f=e&&(e[1]||e[2]);e=parseFloat(c);var q=parseFloat(d);if(c&&d)return n(e)&&n(q)?{width:e,height:q,type:"svg",mime:"image/svg+xml",wUnits:k(c),hUnits:k(d)}:void 0;var t=(f||"").split(" ");f=t[2];t=t[3];var w=parseFloat(f),x=parseFloat(t);if(n(w)&&n(x)&&k(f)===k(t)){var z=w/x;return c?n(e)?{width:e,height:e/z,type:"svg",mime:"image/svg+xml",
wUnits:k(c),hUnits:k(c)}:void 0:d?n(q)?{width:q*z,height:q,type:"svg",mime:"image/svg+xml",wUnits:k(d),hUnits:k(d)}:void 0:{width:w,height:x,type:"svg",mime:"image/svg+xml",wUnits:k(f),hUnits:k(t)}}}}}},{}],524:[function(b,N,G){function p(d,e,f){return f?g(d,e):a(d,e)}function n(d,e,f){return f?r(d,e):h(d,e)}function k(d,e,f){var q=p(d,e+2,f);return 1!==n(d,e+4,f)||3!==q&&4!==q?null:3===q?p(d,e+8,f):n(d,e+8,f)}G=b("../common").str2arr;var m=b("../common").sliceEq,a=b("../common").readUInt16LE,g=b("../common").readUInt16BE,
h=b("../common").readUInt32LE,r=b("../common").readUInt32BE,l=G("II*\x00"),c=G("MM\x00*");N.exports=function(d){if(!(8>d.length)&&(m(d,0,l)||m(d,0,c))){var e=77===d[0],f=n(d,4,e)-8;if(!(0>f||(f+=8,2>d.length-f))){var q=12*p(d,f+0,e);if(!(0>=q||(f+=2,d.length-f<q))){var t,w,x;for(t=0;t<q;t+=12){var z=p(d,f+t,e);256===z?w=k(d,f+t,e):257===z&&(x=k(d,f+t,e))}if(w&&x)return{width:w,height:x,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}}}}}},{"../common":513}],525:[function(b,N,G){G=b("../common").str2arr;
var p=b("../common").sliceEq,n=b("../common").readUInt16LE,k=b("../common").readUInt32LE,m=b("../exif_utils"),a=G("RIFF"),g=G("WEBP");N.exports=function(h){if(!(16>h.length)&&(p(h,0,a)||p(h,8,g))){var r=12,l=null,c=0,d=k(h,4)+8;if(!(d>h.length)){for(;r+8<d;)if(0===h[r])r++;else{var e=String.fromCharCode.apply(null,h.slice(r,r+4)),f=k(h,r+4);"VP8 "===e&&10<=f?l||(l=h,e=r+8,l=157!==l[e+3]||1!==l[e+4]||42!==l[e+5]?void 0:{width:n(l,e+6)&16383,height:n(l,e+8)&16383,type:"webp",mime:"image/webp",wUnits:"px",
hUnits:"px"}):"VP8L"===e&&9<=f?l||(l=r+8,47!==h[l]?l=void 0:(l=k(h,l+1),l={width:(l&16383)+1,height:(l>>14&16383)+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"})):"VP8X"===e&&10<=f?l||(l=r+8,l={width:(h[l+6]<<16|h[l+5]<<8|h[l+4])+1,height:(h[l+9]<<l|h[l+8]<<8|h[l+7])+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}):"EXIF"===e&&(c=m.get_orientation(h.slice(r+8,r+8+f)),r=Infinity);r+=8+f}if(l)return 0<c&&(l.orientation=c),l}}}},{"../common":513,"../exif_utils":514}],526:[function(b,
N,G){N.exports={avif:b("./parse_sync/avif"),bmp:b("./parse_sync/bmp"),gif:b("./parse_sync/gif"),ico:b("./parse_sync/ico"),jpeg:b("./parse_sync/jpeg"),png:b("./parse_sync/png"),psd:b("./parse_sync/psd"),svg:b("./parse_sync/svg"),tiff:b("./parse_sync/tiff"),webp:b("./parse_sync/webp")}},{"./parse_sync/avif":516,"./parse_sync/bmp":517,"./parse_sync/gif":518,"./parse_sync/ico":519,"./parse_sync/jpeg":520,"./parse_sync/png":521,"./parse_sync/psd":522,"./parse_sync/svg":523,"./parse_sync/tiff":524,"./parse_sync/webp":525}],
527:[function(b,N,G){var p=b("./lib/parsers_sync");N.exports=function(n){a:{for(var k=Object.keys(p),m=0;m<k.length;m++){var a=p[k[m]](n);if(a){n=a;break a}}n=null}return n};N.exports.parsers=p},{"./lib/parsers_sync":526}],528:[function(b,N,G){function p(){throw Error("setTimeout has not been defined");}function n(){throw Error("clearTimeout has not been defined");}function k(t){if(l===setTimeout)return setTimeout(t,0);if((l===p||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,
0)}catch(w){try{return l.call(null,t,0)}catch(x){return l.call(this,t,0)}}}function m(t){if(c===clearTimeout)return clearTimeout(t);if((c===n||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(t);try{return c(t)}catch(w){try{return c.call(null,t)}catch(x){return c.call(this,t)}}}function a(){e&&f&&(e=!1,f.length?d=f.concat(d):q=-1,d.length&&g())}function g(){if(!e){var t=k(a);e=!0;for(var w=d.length;w;){f=d;for(d=[];++q<w;)f&&f[q].run();q=-1;w=d.length}f=null;e=!1;m(t)}}function h(t,w){this.fun=
t;this.array=w}function r(){}b=N.exports={};try{var l="function"===typeof setTimeout?setTimeout:p}catch(t){l=p}try{var c="function"===typeof clearTimeout?clearTimeout:n}catch(t){c=n}var d=[],e=!1,f,q=-1;b.nextTick=function(t){var w=Array(arguments.length-1);if(1<arguments.length)for(var x=1;x<arguments.length;x++)w[x-1]=arguments[x];d.push(new h(t,w));1!==d.length||e||k(g)};h.prototype.run=function(){this.fun.apply(null,this.array)};b.title="browser";b.browser=!0;b.env={};b.argv=[];b.version="";b.versions=
{};b.on=r;b.addListener=r;b.once=r;b.off=r;b.removeListener=r;b.removeAllListeners=r;b.emit=r;b.prependListener=r;b.prependOnceListener=r;b.listeners=function(t){return[]};b.binding=function(t){throw Error("process.binding is not supported");};b.cwd=function(){return"/"};b.chdir=function(t){throw Error("process.chdir is not supported");};b.umask=function(){return 0}},{}],529:[function(b,N,G){N.exports=b("gl-quat/slerp")},{"gl-quat/slerp":329}],530:[function(b,N,G){(function(p){(function(){for(var n=
b("performance-now"),k="undefined"===typeof window?p:window,m=["moz","webkit"],a=k.requestAnimationFrame,g=k.cancelAnimationFrame||k.cancelRequestAnimationFrame,h=0;!a&&h<m.length;h++)a=k[m[h]+"RequestAnimationFrame"],g=k[m[h]+"CancelAnimationFrame"]||k[m[h]+"CancelRequestAnimationFrame"];if(!a||!g){var r=0,l=0,c=[],d=1E3/60;a=function(e){if(0===c.length){var f=n(),q=Math.max(0,d-(f-r));r=q+f;setTimeout(function(){for(var t=c.slice(0),w=c.length=0;w<t.length;w++)if(!t[w].cancelled)try{t[w].callback(r)}catch(x){setTimeout(function(){throw x;
},0)}},Math.round(q))}c.push({handle:++l,callback:e,cancelled:!1});return l};g=function(e){for(var f=0;f<c.length;f++)c[f].handle===e&&(c[f].cancelled=!0)}}N.exports=function(e){return a.call(k,e)};N.exports.cancel=function(){g.apply(k,arguments)};N.exports.polyfill=function(e){e||(e=k);e.requestAnimationFrame=a;e.cancelAnimationFrame=g}}).call(this)}).call(this,"undefined"!==typeof Re?Re:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"performance-now":495}],531:[function(b,
N,G){var p=b("big-rat/add");N.exports=function(n,k){for(var m=n.length,a=Array(m),g=0;g<m;++g)a[g]=p(n[g],k[g]);return a}},{"big-rat/add":87}],532:[function(b,N,G){N.exports=function(n){for(var k=Array(n.length),m=0;m<n.length;++m)k[m]=p(n[m]);return k};var p=b("big-rat")},{"big-rat":90}],533:[function(b,N,G){var p=b("big-rat"),n=b("big-rat/mul");N.exports=function(k,m){m=p(m);for(var a=k.length,g=Array(a),h=0;h<a;++h)g[h]=n(k[h],m);return g}},{"big-rat":90,"big-rat/mul":99}],534:[function(b,N,G){var p=
b("big-rat/sub");N.exports=function(n,k){for(var m=n.length,a=Array(m),g=0;g<m;++g)a[g]=p(n[g],k[g]);return a}},{"big-rat/sub":101}],535:[function(b,N,G){var p=b("compare-cell"),n=b("compare-oriented-cell"),k=b("cell-orientation");N.exports=function(m){m.sort(n);for(var a=m.length,g=0,h=0;h<a;++h){var r=m[h],l=k(r);if(0!==l){if(0<g){var c=m[g-1];if(0===p(r,c)&&k(c)!==l){--g;continue}}m[g++]=r}}m.length=g;return m}},{"cell-orientation":123,"compare-cell":139,"compare-oriented-cell":140}],536:[function(b,
N,G){var p=b("array-bounds"),n=b("color-normalize"),k=b("update-diff"),m=b("pick-by-alias"),a=b("object-assign"),g=b("flatten-vertex-data");b=b("to-float32");var h=b.float32,r=b.fract32;N.exports=function(c,d){function e(J){J?t(J):null===J&&w();f()}function f(J){if("number"===typeof J)return q(J);J&&!Array.isArray(J)&&(J=[J]);c._refresh();B.forEach(function(K,O){K&&(J&&(K.draw=J[O]?!0:!1),K.draw?q(O):K.draw=!0)})}function q(J){"number"===typeof J&&(J=B[J]);null!=J&&J&&J.count&&J.color&&J.opacity&&
J.positions&&1<J.positions.length&&(J.scaleRatio=[J.scale[0]*J.viewport.width,J.scale[1]*J.viewport.height],F(J),J.after&&J.after(J))}function t(J){if(J){null!=J.length?"number"===typeof J[0]&&(J=[{positions:J}]):Array.isArray(J)||(J=[J]);var K=0,O=0;e.groups=B=J.map(function(M,Q){var Z=B[Q];if(M)"function"===typeof M?M={after:M}:"number"===typeof M[0]&&(M={positions:M});else return Z;M=m(M,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",
opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"});Z||(B[Q]=Z={id:Q,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},M=a({},z,M));k(Z,M,[{lineWidth:function(ca){return.5*+ca},capSize:function(ca){return.5*+ca},opacity:parseFloat,errors:function(ca){ca=g(ca);O+=ca.length;return ca},positions:function(ca,W){ca=g(ca,"float64");W.count=Math.floor(ca.length/2);W.bounds=p(ca,2);W.offset=K;K+=
W.count;return ca}},{color:function(ca,W){W=W.count;ca||(ca="transparent");if(!Array.isArray(ca)||"number"===typeof ca[0]){var T=ca;ca=Array(W);for(var U=0;U<W;U++)ca[U]=T}if(ca.length<W)throw Error("Not enough colors");T=new Uint8Array(4*W);for(U=0;U<W;U++){var ha=n(ca[U],"uint8");T.set(ha,4*U)}return T},range:function(ca,W,T){T=W.bounds;ca||(ca=T);W.scale=[1/(ca[2]-ca[0]),1/(ca[3]-ca[1])];W.translate=[-ca[0],-ca[1]];W.scaleFract=r(W.scale);W.translateFract=r(W.translate);return ca},viewport:function(ca){if(Array.isArray(ca))var W=
{x:ca[0],y:ca[1],width:ca[2]-ca[0],height:ca[3]-ca[1]};else ca?(W={x:ca.x||ca.left||0,y:ca.y||ca.top||0},W.width=ca.right?ca.right-W.x:ca.w||ca.width||0,W.height=ca.bottom?ca.bottom-W.y:ca.h||ca.height||0):W={x:0,y:0,width:x.drawingBufferWidth,height:x.drawingBufferHeight};return W}}]);return Z});if(K||O){J=B.reduce(function(M,Q,Z){return M+(Q?Q.count:0)},0);var I=new Float64Array(2*J),L=new Uint8Array(4*J),H=new Float32Array(4*J);B.forEach(function(M,Q){if(M){Q=M.positions;var Z=M.offset,ca=M.errors;
M.count&&(L.set(M.color,4*Z),H.set(ca,4*Z),I.set(Q,2*Z))}});J=h(I);D(J);J=r(I,J);C(J);A(L);v(H)}}}function w(){D.destroy();C.destroy();A.destroy();v.destroy();y.destroy()}"function"===typeof c?(d||(d={}),d.regl=c):d=c;d.length&&(d.positions=d);c=d.regl;if(!c.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var x=c._gl,z={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],
errors:[]},B=[];var A=c.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)});var D=c.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});var C=c.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});var v=c.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});var y=c.buffer({usage:"static",type:"float",data:l});t(d);var F=c({vert:"\n\t\tprecision highp float;\n\n\t\tattribute vec2 position, positionFract;\n\t\tattribute vec4 error;\n\t\tattribute vec4 color;\n\n\t\tattribute vec2 direction, lineOffset, capOffset;\n\n\t\tuniform vec4 viewport;\n\t\tuniform float lineWidth, capSize;\n\t\tuniform vec2 scale, scaleFract, translate, translateFract;\n\n\t\tvarying vec4 fragColor;\n\n\t\tvoid main() {\n\t\t\tfragColor \x3d color / 255.;\n\n\t\t\tvec2 pixelOffset \x3d lineWidth * lineOffset + (capSize + lineWidth) * capOffset;\n\n\t\t\tvec2 dxy \x3d -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;\n\n\t\t\tvec2 position \x3d position + dxy;\n\n\t\t\tvec2 pos \x3d (position + translate) * scale\n\t\t\t\t+ (positionFract + translateFract) * scale\n\t\t\t\t+ (position + translate) * scaleFract\n\t\t\t\t+ (positionFract + translateFract) * scaleFract;\n\n\t\t\tpos +\x3d pixelOffset / viewport.zw;\n\n\t\t\tgl_Position \x3d vec4(pos * 2. - 1., 0, 1);\n\t\t}\n\t\t",
frag:"\n\t\tprecision highp float;\n\n\t\tvarying vec4 fragColor;\n\n\t\tuniform float opacity;\n\n\t\tvoid main() {\n\t\t\tgl_FragColor \x3d fragColor;\n\t\t\tgl_FragColor.a *\x3d opacity;\n\t\t}\n\t\t",uniforms:{range:c.prop("range"),lineWidth:c.prop("lineWidth"),capSize:c.prop("capSize"),opacity:c.prop("opacity"),scale:c.prop("scale"),translate:c.prop("translate"),scaleFract:c.prop("scaleFract"),translateFract:c.prop("translateFract"),viewport:function(J,K){return[K.viewport.x,K.viewport.y,J.viewportWidth,
J.viewportHeight]}},attributes:{color:{buffer:A,offset:function(J,K){return 4*K.offset},divisor:1},position:{buffer:D,offset:function(J,K){return 8*K.offset},divisor:1},positionFract:{buffer:C,offset:function(J,K){return 8*K.offset},divisor:1},error:{buffer:v,offset:function(J,K){return 16*K.offset},divisor:1},direction:{buffer:y,stride:24,offset:0},lineOffset:{buffer:y,stride:24,offset:8},capOffset:{buffer:y,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",
alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:c.prop("viewport")},viewport:c.prop("viewport"),stencil:!1,instances:c.prop("count"),count:l.length});a(e,{update:t,draw:f,destroy:w,regl:c,gl:x,canvas:x.canvas,groups:B});return e};var l=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,
1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},{"array-bounds":76,"color-normalize":131,"flatten-vertex-data":252,"object-assign":487,"pick-by-alias":498,
"to-float32":599,"update-diff":621}],537:[function(b,N,G){function p(q,t){if(!(this instanceof p))return new p(q,t);"function"===typeof q?(t||(t={}),t.regl=q):t=q;t.length&&(t.positions=t);q=t.regl;if(!q.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=q._gl;this.regl=q;this.passes=[];this.shaders=p.shaders.has(q)?p.shaders.get(q):p.shaders.set(q,p.createShaders(q)).get(q);this.update(t)}var n=b("color-normalize"),k=b("array-bounds"),
m=b("object-assign"),a=b("glslify"),g=b("pick-by-alias"),h=b("flatten-vertex-data"),r=b("earcut"),l=b("array-normalize");G=b("to-float32");var c=G.float32,d=G.fract32;G=b("es6-weak-map");var e=b("parse-rect"),f=b("array-find-index");N.exports=p;p.dashMult=2;p.maxPatternLength=256;p.precisionThreshold=3E6;p.maxPoints=1E4;p.maxLines=2048;p.shaders=new G;p.createShaders=function(q){var t=q.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),w={primitive:"triangle strip",instances:q.prop("count"),
count:4,offset:0,uniforms:{miterMode:function(B,A){return"round"===A.join?2:1},miterLimit:q.prop("miterLimit"),scale:q.prop("scale"),scaleFract:q.prop("scaleFract"),translateFract:q.prop("translateFract"),translate:q.prop("translate"),thickness:q.prop("thickness"),dashPattern:q.prop("dashTexture"),opacity:q.prop("opacity"),pixelRatio:q.context("pixelRatio"),id:q.prop("id"),dashSize:q.prop("dashLength"),viewport:function(B,A){return[A.viewport.x,A.viewport.y,B.viewportWidth,B.viewportHeight]},depth:q.prop("depth")},
blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(B,A){return!A.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:q.prop("viewport")},viewport:q.prop("viewport")},x=q(m({vert:a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;\nattribute vec4 color;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {\n\t// the order is important\n\treturn position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n}\n\nvoid main() {\n\tfloat lineStart \x3d 1. - lineEnd;\n\tfloat lineOffset \x3d lineTop * 2. - 1.;\n\n\tvec2 diff \x3d (bCoord + bCoordFract - aCoord - aCoordFract);\n\ttangent \x3d normalize(diff * scale * viewport.zw);\n\tvec2 normal \x3d vec2(-tangent.y, tangent.x);\n\n\tvec2 position \x3d project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart\n\t\t+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd\n\n\t\t+ thickness * normal * .5 * lineOffset / viewport.zw;\n\n\tgl_Position \x3d vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor \x3d color / 255.;\n}\n"]),
frag:a(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D dashPattern;\n\nuniform float dashSize, pixelRatio, thickness, opacity, id;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvoid main() {\n\tfloat alpha \x3d 1.;\n\n\tfloat t \x3d fract(dot(tangent, gl_FragCoord.xy) / dashSize) * .5 + .25;\n\tfloat dash \x3d texture2D(dashPattern, vec2(t, .5)).r;\n\n\tgl_FragColor \x3d fragColor;\n\tgl_FragColor.a *\x3d alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:t,divisor:0,
stride:8,offset:0},lineTop:{buffer:t,divisor:0,stride:8,offset:4},aCoord:{buffer:q.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:q.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:q.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:q.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:q.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},w));try{var z=q(m({cull:{enable:!0,face:"back"},vert:a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, nextCoord, prevCoord;\nattribute vec4 aColor, bColor;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, translate;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\nuniform float miterLimit, miterMode;\n\nvarying vec4 fragColor;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 tangent;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nconst float REVERSE_THRESHOLD \x3d -.875;\nconst float MIN_DIFF \x3d 1e-6;\n\n// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead\n// TODO: precalculate dot products, normalize things beforehead etc.\n// TODO: refactor to rectangular algorithm\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff \x3d b - a;\n\tvec2 perp \x3d normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nbool isNaN( float val ){\n  return ( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 ) ? false : true;\n}\n\nvoid main() {\n\tvec2 aCoord \x3d aCoord, bCoord \x3d bCoord, prevCoord \x3d prevCoord, nextCoord \x3d nextCoord;\n\n  vec2 adjustedScale;\n  adjustedScale.x \x3d (abs(scale.x) \x3c MIN_DIFF) ? MIN_DIFF : scale.x;\n  adjustedScale.y \x3d (abs(scale.y) \x3c MIN_DIFF) ? MIN_DIFF : scale.y;\n\n  vec2 scaleRatio \x3d adjustedScale * viewport.zw;\n\tvec2 normalWidth \x3d thickness / scaleRatio;\n\n\tfloat lineStart \x3d 1. - lineEnd;\n\tfloat lineBot \x3d 1. - lineTop;\n\n\tfragColor \x3d (lineStart * aColor + lineEnd * bColor) / 255.;\n\n\tif (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;\n\n\tif (aCoord \x3d\x3d prevCoord) prevCoord \x3d aCoord + normalize(bCoord - aCoord);\n\tif (bCoord \x3d\x3d nextCoord) nextCoord \x3d bCoord - normalize(bCoord - aCoord);\n\n\tvec2 prevDiff \x3d aCoord - prevCoord;\n\tvec2 currDiff \x3d bCoord - aCoord;\n\tvec2 nextDiff \x3d nextCoord - bCoord;\n\n\tvec2 prevTangent \x3d normalize(prevDiff * scaleRatio);\n\tvec2 currTangent \x3d normalize(currDiff * scaleRatio);\n\tvec2 nextTangent \x3d normalize(nextDiff * scaleRatio);\n\n\tvec2 prevNormal \x3d vec2(-prevTangent.y, prevTangent.x);\n\tvec2 currNormal \x3d vec2(-currTangent.y, currTangent.x);\n\tvec2 nextNormal \x3d vec2(-nextTangent.y, nextTangent.x);\n\n\tvec2 startJoinDirection \x3d normalize(prevTangent - currTangent);\n\tvec2 endJoinDirection \x3d normalize(currTangent - nextTangent);\n\n\t// collapsed/unidirectional segment cases\n\t// FIXME: there should be more elegant solution\n\tvec2 prevTanDiff \x3d abs(prevTangent - currTangent);\n\tvec2 nextTanDiff \x3d abs(nextTangent - currTangent);\n\tif (max(prevTanDiff.x, prevTanDiff.y) \x3c MIN_DIFF) {\n\t\tstartJoinDirection \x3d currNormal;\n\t}\n\tif (max(nextTanDiff.x, nextTanDiff.y) \x3c MIN_DIFF) {\n\t\tendJoinDirection \x3d currNormal;\n\t}\n\tif (aCoord \x3d\x3d bCoord) {\n\t\tendJoinDirection \x3d startJoinDirection;\n\t\tcurrNormal \x3d prevNormal;\n\t\tcurrTangent \x3d prevTangent;\n\t}\n\n\ttangent \x3d currTangent;\n\n\t//calculate join shifts relative to normals\n\tfloat startJoinShift \x3d dot(currNormal, startJoinDirection);\n\tfloat endJoinShift \x3d dot(currNormal, endJoinDirection);\n\n\tfloat startMiterRatio \x3d abs(1. / startJoinShift);\n\tfloat endMiterRatio \x3d abs(1. / endJoinShift);\n\n\tvec2 startJoin \x3d startJoinDirection * startMiterRatio;\n\tvec2 endJoin \x3d endJoinDirection * endMiterRatio;\n\n\tvec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;\n\tstartTopJoin \x3d sign(startJoinShift) * startJoin * .5;\n\tstartBotJoin \x3d -startTopJoin;\n\n\tendTopJoin \x3d sign(endJoinShift) * endJoin * .5;\n\tendBotJoin \x3d -endTopJoin;\n\n\tvec2 aTopCoord \x3d aCoord + normalWidth * startTopJoin;\n\tvec2 bTopCoord \x3d bCoord + normalWidth * endTopJoin;\n\tvec2 aBotCoord \x3d aCoord + normalWidth * startBotJoin;\n\tvec2 bBotCoord \x3d bCoord + normalWidth * endBotJoin;\n\n\t//miter anti-clipping\n\tfloat baClipping \x3d distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));\n\tfloat abClipping \x3d distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));\n\n\t//prevent close to reverse direction switch\n\tbool prevReverse \x3d dot(currTangent, prevTangent) \x3c\x3d REVERSE_THRESHOLD \x26\x26 abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) \x3c  length(normalWidth * currNormal);\n\tbool nextReverse \x3d dot(currTangent, nextTangent) \x3c\x3d REVERSE_THRESHOLD \x26\x26 abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) \x3c  length(normalWidth * currNormal);\n\n\tif (prevReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift \x3d normalWidth * startJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust \x3d 1. - min(miterLimit / startMiterRatio, 1.);\n\t\taBotCoord \x3d aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\taTopCoord \x3d aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!nextReverse \x26\x26 baClipping \x3e 0. \x26\x26 baClipping \x3c length(normalWidth * endBotJoin)) {\n\t\t//handle miter clipping\n\t\tbTopCoord -\x3d normalWidth * endTopJoin;\n\t\tbTopCoord +\x3d normalize(endTopJoin * normalWidth) * baClipping;\n\t}\n\n\tif (nextReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift \x3d normalWidth * endJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust \x3d 1. - min(miterLimit / endMiterRatio, 1.);\n\t\tbBotCoord \x3d bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\tbTopCoord \x3d bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!prevReverse \x26\x26 abClipping \x3e 0. \x26\x26 abClipping \x3c length(normalWidth * startBotJoin)) {\n\t\t//handle miter clipping\n\t\taBotCoord -\x3d normalWidth * startBotJoin;\n\t\taBotCoord +\x3d normalize(startBotJoin * normalWidth) * abClipping;\n\t}\n\n\tvec2 aTopPosition \x3d (aTopCoord) * adjustedScale + translate;\n\tvec2 aBotPosition \x3d (aBotCoord) * adjustedScale + translate;\n\n\tvec2 bTopPosition \x3d (bTopCoord) * adjustedScale + translate;\n\tvec2 bBotPosition \x3d (bBotCoord) * adjustedScale + translate;\n\n\t//position is normalized 0..1 coord on the screen\n\tvec2 position \x3d (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;\n\n\tstartCoord \x3d aCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\tendCoord \x3d bCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\n\tgl_Position \x3d vec4(position  * 2.0 - 1.0, depth, 1);\n\n\tenableStartMiter \x3d step(dot(currTangent, prevTangent), .5);\n\tenableEndMiter \x3d step(dot(currTangent, nextTangent), .5);\n\n\t//bevel miter cutoffs\n\tif (miterMode \x3d\x3d 1.) {\n\t\tif (enableStartMiter \x3d\x3d 1.) {\n\t\t\tvec2 startMiterWidth \x3d vec2(startJoinDirection) * thickness * miterLimit * .5;\n\t\t\tstartCutoff \x3d vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw +\x3d vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff \x3d startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff +\x3d viewport.xyxy;\n\t\t\tstartCutoff +\x3d startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter \x3d\x3d 1.) {\n\t\t\tvec2 endMiterWidth \x3d vec2(endJoinDirection) * thickness * miterLimit * .5;\n\t\t\tendCutoff \x3d vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw +\x3d vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff \x3d endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff +\x3d viewport.xyxy;\n\t\t\tendCutoff +\x3d endMiterWidth.xyxy;\n\t\t}\n\t}\n\n\t//round miter cutoffs\n\telse if (miterMode \x3d\x3d 2.) {\n\t\tif (enableStartMiter \x3d\x3d 1.) {\n\t\t\tvec2 startMiterWidth \x3d vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;\n\t\t\tstartCutoff \x3d vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw +\x3d vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff \x3d startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff +\x3d viewport.xyxy;\n\t\t\tstartCutoff +\x3d startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter \x3d\x3d 1.) {\n\t\t\tvec2 endMiterWidth \x3d vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;\n\t\t\tendCutoff \x3d vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw +\x3d vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff \x3d endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff +\x3d viewport.xyxy;\n\t\t\tendCutoff +\x3d endMiterWidth.xyxy;\n\t\t}\n\t}\n}\n"]),
frag:a(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D dashPattern;\nuniform float dashSize, pixelRatio, thickness, opacity, id, miterMode;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff \x3d b - a;\n\tvec2 perp \x3d normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nvoid main() {\n\tfloat alpha \x3d 1., distToStart, distToEnd;\n\tfloat cutoff \x3d thickness * .5;\n\n\t//bevel miter\n\tif (miterMode \x3d\x3d 1.) {\n\t\tif (enableStartMiter \x3d\x3d 1.) {\n\t\t\tdistToStart \x3d distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart \x3c -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *\x3d min(max(distToStart + 1., 0.), 1.);\n\t\t}\n\n\t\tif (enableEndMiter \x3d\x3d 1.) {\n\t\t\tdistToEnd \x3d distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd \x3c -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *\x3d min(max(distToEnd + 1., 0.), 1.);\n\t\t}\n\t}\n\n\t// round miter\n\telse if (miterMode \x3d\x3d 2.) {\n\t\tif (enableStartMiter \x3d\x3d 1.) {\n\t\t\tdistToStart \x3d distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart \x3c 0.) {\n\t\t\t\tfloat radius \x3d length(gl_FragCoord.xy - startCoord);\n\n\t\t\t\tif(radius \x3e cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -\x3d smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\n\t\tif (enableEndMiter \x3d\x3d 1.) {\n\t\t\tdistToEnd \x3d distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd \x3c 0.) {\n\t\t\t\tfloat radius \x3d length(gl_FragCoord.xy - endCoord);\n\n\t\t\t\tif(radius \x3e cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -\x3d smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\t}\n\n\tfloat t \x3d fract(dot(tangent, gl_FragCoord.xy) / dashSize) * .5 + .25;\n\tfloat dash \x3d texture2D(dashPattern, vec2(t, .5)).r;\n\n\tgl_FragColor \x3d fragColor;\n\tgl_FragColor.a *\x3d alpha * opacity * dash;\n}\n"]),
attributes:{lineEnd:{buffer:t,divisor:0,stride:8,offset:0},lineTop:{buffer:t,divisor:0,stride:8,offset:4},aColor:{buffer:q.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:q.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:q.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:q.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:q.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:q.prop("positionBuffer"),stride:8,
offset:24,divisor:1}}},w))}catch(B){z=x}return{fill:q({primitive:"triangle",elements:function(B,A){return A.triangles},offset:0,vert:a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\n\nuniform vec4 color;\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio, id;\nuniform vec4 viewport;\nuniform float opacity;\n\nvarying vec4 fragColor;\n\nconst float MAX_LINES \x3d 256.;\n\nvoid main() {\n\tfloat depth \x3d (MAX_LINES - 4. - id) / (MAX_LINES);\n\n\tvec2 position \x3d position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n\n\tgl_Position \x3d vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor \x3d color / 255.;\n\tfragColor.a *\x3d opacity;\n}\n"]),
frag:a(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n\tgl_FragColor \x3d fragColor;\n}\n"]),uniforms:{scale:q.prop("scale"),color:q.prop("fill"),scaleFract:q.prop("scaleFract"),translateFract:q.prop("translateFract"),translate:q.prop("translate"),opacity:q.prop("opacity"),pixelRatio:q.context("pixelRatio"),id:q.prop("id"),viewport:function(B,A){return[A.viewport.x,A.viewport.y,B.viewportWidth,B.viewportHeight]}},attributes:{position:{buffer:q.prop("positionBuffer"),
stride:8,offset:8},positionFract:{buffer:q.prop("positionFractBuffer"),stride:8,offset:8}},blend:w.blend,depth:{enable:!1},scissor:w.scissor,stencil:w.stencil,viewport:w.viewport}),rect:x,miter:z}};p.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null};p.prototype.render=function(){for(var q=[],t=arguments.length;t--;)q[t]=arguments[t];q.length&&this.update.apply(this,q);this.draw()};p.prototype.draw=
function(){for(var q=this,t=[],w=arguments.length;w--;)t[w]=arguments[w];(t.length?t:this.passes).forEach(function(x,z){if(x&&Array.isArray(x))return q.draw.apply(q,x);"number"===typeof x&&(x=q.passes[x]);x&&1<x.count&&x.opacity&&(q.regl._refresh(),x.fill&&x.triangles&&2<x.triangles.length&&q.shaders.fill(x),x.thickness&&(x.scale[0]*x.viewport.width>p.precisionThreshold||x.scale[1]*x.viewport.height>p.precisionThreshold?q.shaders.rect(x):"rect"===x.join||!x.join&&(2>=x.thickness||x.count>=p.maxPoints)?
q.shaders.rect(x):q.shaders.miter(x)))});return this};p.prototype.update=function(q){var t=this;if(q){null!=q.length?"number"===typeof q[0]&&(q=[{positions:q}]):Array.isArray(q)||(q=[q]);var w=this.regl,x=this.gl;q.forEach(function(A,D){var C=t.passes[D];if(void 0!==A)if(null===A)t.passes[D]=null;else{"number"===typeof A[0]&&(A={positions:A});A=g(A,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",
miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"});C||(t.passes[D]=C={id:D,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,
dashLength:1,dashTexture:w.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:w.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:w.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:w.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},A=m({},p.defaults,A));null!=A.thickness&&(C.thickness=parseFloat(A.thickness));null!=A.opacity&&(C.opacity=parseFloat(A.opacity));null!=A.miterLimit&&(C.miterLimit=
parseFloat(A.miterLimit));null!=A.overlay&&(C.overlay=!!A.overlay,D<p.maxLines&&(C.depth=2*(p.maxLines-1-D%p.maxLines)/p.maxLines-1));null!=A.join&&(C.join=A.join);null!=A.hole&&(C.hole=A.hole);null!=A.fill&&(C.fill=A.fill?n(A.fill,"uint8"):null);null!=A.viewport&&(C.viewport=e(A.viewport));C.viewport||(C.viewport=e([x.drawingBufferWidth,x.drawingBufferHeight]));null!=A.close&&(C.close=A.close);null===A.positions&&(A.positions=[]);if(A.positions){if(A.positions.x&&A.positions.y){var v=A.positions.x,
y=A.positions.y;var F=C.count=Math.max(v.length,y.length);D=new Float64Array(2*F);for(var J=0;J<F;J++)D[2*J]=v[J],D[2*J+1]=y[J]}else D=h(A.positions,"float64"),F=C.count=Math.floor(D.length/2);v=C.bounds=k(D,2);if(C.fill){var K=[];y={};for(var O=J=0,I=0,L=C.count;O<L;O++){var H=D[2*O],M=D[2*O+1];isNaN(H)||isNaN(M)||null==H||null==M?(H=D[2*J],M=D[2*J+1],y[O]=J):J=O;K[I++]=H;K[I++]=M}if(A.splitNull){C.count-1 in y||(y[C.count]=C.count-1);var Q=Object.keys(y).map(Number).sort(function(T,U){return T-
U}),Z=[],ca=0,W=null!=C.hole?C.hole[0]:null;null!=W&&(J=f(Q,function(T){return T>=W}),Q=Q.slice(0,J),Q.push(W));J=function(T){var U=K.slice(2*ca,2*Q[T]).concat(W?K.slice(2*W):[]),ha=(C.hole||[]).map(function(Y){return Y-W+(Q[T]-ca)});U=r(U,ha);U=U.map(function(Y){return Y+ca+(Y+ca<Q[T]?0:W-Q[T])});Z.push.apply(Z,U);ca=Q[T]+1};for(O=0;O<Q.length;O++)J(O);J=0;for(O=Z.length;J<O;J++)null!=y[Z[J]]&&(Z[J]=y[Z[J]]);C.triangles=Z}else{J=r(K,C.hole||[]);O=0;for(I=J.length;O<I;O++)null!=y[J[O]]&&(J[O]=y[J[O]]);
C.triangles=J}}y=new Float64Array(D);l(y,2,v);v=new Float64Array(2*F+6);C.close?D[0]===D[2*F-2]&&D[1]===D[2*F-1]?(v[0]=y[2*F-4],v[1]=y[2*F-3]):(v[0]=y[2*F-2],v[1]=y[2*F-1]):(v[0]=y[0],v[1]=y[1]);v.set(y,2);C.close?D[0]===D[2*F-2]&&D[1]===D[2*F-1]?(v[2*F+2]=y[2],v[2*F+3]=y[3],--C.count):(v[2*F+2]=y[0],v[2*F+3]=y[1],v[2*F+4]=y[2],v[2*F+5]=y[3]):(v[2*F+2]=y[2*F-2],v[2*F+3]=y[2*F-1],v[2*F+4]=y[2*F-2],v[2*F+5]=y[2*F-1]);D=c(v);C.positionBuffer(D);D=d(v,D);C.positionFractBuffer(D)}A.range?C.range=A.range:
C.range||(C.range=C.bounds);(A.range||A.positions)&&C.count&&(D=C.bounds,F=C.range[2]-C.range[0],v=C.range[3]-C.range[1],C.scale=[(D[2]-D[0])/F,(D[3]-D[1])/v],C.translate=[-C.range[0]/F+D[0]/F||0,-C.range[1]/v+D[1]/v||0],C.scaleFract=d(C.scale),C.translateFract=d(C.translate));if(A.dashes){D=0;if(!A.dashes||2>A.dashes.length)D=1,F=new Uint8Array([255,255,255,255,255,255,255,255]);else{for(F=D=0;F<A.dashes.length;++F)D+=A.dashes[F];F=new Uint8Array(D*p.dashMult);v=0;y=255;for(J=0;2>J;J++)for(O=0;O<
A.dashes.length;++O){I=0;for(L=A.dashes[O]*p.dashMult*.5;I<L;++I)F[v++]=y;y^=255}}C.dashLength=D;C.dashTexture({channels:1,data:F,width:F.length,height:1,mag:"linear",min:"linear"},0,0)}if(A.color){D=C.count;(F=A.color)||(F="transparent");A=new Uint8Array(4*D+4);if(Array.isArray(F)&&"number"!==typeof F[0]){for(v=0;v<D;v++)y=n(F[v],"uint8"),A.set(y,4*v);A.set(n(F[0],"uint8"),4*D)}else for(F=n(F,"uint8"),v=0;v<D+1;v++)A.set(F,4*v);C.colorBuffer({usage:"dynamic",type:"uint8",data:A})}}});if(q.length<
this.passes.length){for(var z=q.length;z<this.passes.length;z++){var B=this.passes[z];B&&(B.colorBuffer.destroy(),B.positionBuffer.destroy(),B.dashTexture.destroy())}this.passes.length=q.length}q=[];for(z=0;z<this.passes.length;z++)null!==this.passes[z]&&q.push(this.passes[z]);this.passes=q;return this}};p.prototype.destroy=function(){this.passes.forEach(function(q){q.colorBuffer.destroy();q.positionBuffer.destroy();q.dashTexture.destroy()});this.passes.length=0;return this}},{"array-bounds":76,"array-find-index":77,
"array-normalize":78,"color-normalize":131,earcut:186,"es6-weak-map":241,"flatten-vertex-data":252,glslify:442,"object-assign":487,"parse-rect":492,"pick-by-alias":498,"to-float32":599}],538:[function(b,N,G){function p(x,z){if(x){if("string"===typeof x)return n(x,z);var B=Object.prototype.toString.call(x).slice(8,-1);"Object"===B&&x.constructor&&(B=x.constructor.name);if("Map"===B||"Set"===B)return Array.from(x);if("Arguments"===B||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(B))return n(x,z)}}
function n(x,z){if(null==z||z>x.length)z=x.length;for(var B=0,A=Array(z);B<z;B++)A[B]=x[B];return A}function k(x,z){var B=this;if(!(this instanceof k))return new k(x,z);"function"===typeof x?(z||(z={}),z.regl=x):(z=x,x=null);z&&z.length&&(z.positions=z);x=z.regl;var A=x._gl,D=[];this.tooManyColors=f;var C=x.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"});r(this,{regl:x,gl:A,groups:[],markerCache:[null],markerTextures:[null],
palette:D,paletteIds:{},paletteTexture:C,maxColors:255,maxSize:100,canvas:A.canvas});this.update(z);A={uniforms:{constPointSize:!!z.constPointSize,pixelRatio:x.context("pixelRatio"),palette:C,paletteSize:function(v,y){return[B.tooManyColors?0:255,C.height]},scale:x.prop("scale"),scaleFract:x.prop("scaleFract"),translate:x.prop("translate"),translateFract:x.prop("translateFract"),opacity:x.prop("opacity"),marker:x.prop("markerTexture")},attributes:{x:function(v,y){return y.xAttr||{buffer:y.positionBuffer,
stride:8,offset:0}},y:function(v,y){return y.yAttr||{buffer:y.positionBuffer,stride:8,offset:4}},xFract:function(v,y){return y.xAttr?{constant:[0,0]}:{buffer:y.positionFractBuffer,stride:8,offset:0}},yFract:function(v,y){return y.yAttr?{constant:[0,0]}:{buffer:y.positionFractBuffer,stride:8,offset:4}},size:function(v,y){return y.size.length?{buffer:y.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*y.size/B.maxSize)]}},borderSize:function(v,y){return y.borderSize.length?{buffer:y.sizeBuffer,
stride:2,offset:1}:{constant:[Math.round(255*y.borderSize/B.maxSize)]}},colorId:function(v,y){return y.color.length?{buffer:y.colorBuffer,stride:B.tooManyColors?8:4,offset:0}:{constant:B.tooManyColors?D.slice(4*y.color,4*y.color+4):[y.color]}},borderColorId:function(v,y){return y.borderColor.length?{buffer:y.colorBuffer,stride:B.tooManyColors?8:4,offset:B.tooManyColors?4:2}:{constant:B.tooManyColors?D.slice(4*y.borderColor,4*y.borderColor+4):[y.borderColor]}},isActive:function(v,y){return!0===y.activation?
{constant:[1]}:y.activation?y.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:x.prop("viewport")},viewport:x.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:x.prop("elements"),count:x.prop("count"),offset:x.prop("offset"),primitive:"points"};z=r({},A);z.frag=l(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragWidth, fragBorderColorLevel, fragColorLevel;\n\nuniform sampler2D marker;\nuniform float opacity;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float dist \x3d texture2D(marker, gl_PointCoord).r, delta \x3d fragWidth;\n\n  // max-distance alpha\n  if (dist \x3c 0.003) discard;\n\n  // null-border case\n  if (fragBorderColorLevel \x3d\x3d fragColorLevel || fragBorderColor.a \x3d\x3d 0.) {\n    float colorAmt \x3d smoothstep(.5 - delta, .5 + delta, dist);\n    gl_FragColor \x3d vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);\n  }\n  else {\n    float borderColorAmt \x3d smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);\n    float colorAmt \x3d smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);\n\n    vec4 color \x3d fragBorderColor;\n    color.a *\x3d borderColorAmt;\n    color \x3d mix(color, fragColor, colorAmt);\n    color.a *\x3d opacity;\n\n    gl_FragColor \x3d color;\n  }\n\n}\n"]);
z.vert=l(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform vec2 scale, scaleFract, translate, translateFract, paletteSize;\nuniform float pixelRatio;\nuniform bool constPointSize;\nuniform sampler2D palette;\n\nconst float maxSize \x3d 100.;\nconst float borderLevel \x3d .5;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat pointSizeScale \x3d (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect \x3d (paletteSize.x \x3c 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(palette,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive \x3d\x3d 0.) return;\n\n  vec2 position \x3d vec2(x, y);\n  vec2 positionFract \x3d vec2(xFract, yFract);\n\n  vec4 color \x3d getColor(colorId);\n  vec4 borderColor \x3d getColor(borderColorId);\n\n  float size \x3d size * maxSize / 255.;\n  float borderSize \x3d borderSize * maxSize / 255.;\n\n  gl_PointSize \x3d 2. * size * pointSizeScale;\n  fragPointSize \x3d size * pixelRatio;\n\n  vec2 pos \x3d (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position \x3d vec4(pos * 2. - 1., 0., 1.);\n\n  fragColor \x3d color;\n  fragBorderColor \x3d borderColor;\n  fragWidth \x3d 1. / gl_PointSize;\n\n  fragBorderColorLevel \x3d clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);\n  fragColorLevel \x3d clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);\n}"]);
this.drawMarker=x(z);A=r({},A);A.frag=l(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\n\nuniform float opacity;\nvarying float fragBorderRadius, fragWidth;\n\nfloat smoothStep(float edge0, float edge1, float x) {\n\tfloat t;\n\tt \x3d clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n\treturn t * t * (3.0 - 2.0 * t);\n}\n\nvoid main() {\n\tfloat radius, alpha \x3d 1.0, delta \x3d fragWidth;\n\n\tradius \x3d length(2.0 * gl_PointCoord.xy - 1.0);\n\n\tif (radius \x3e 1.0 + delta) {\n\t\tdiscard;\n\t}\n\n\talpha -\x3d smoothstep(1.0 - delta, 1.0 + delta, radius);\n\n\tfloat borderRadius \x3d fragBorderRadius;\n\tfloat ratio \x3d smoothstep(borderRadius - delta, borderRadius + delta, radius);\n\tvec4 color \x3d mix(fragColor, fragBorderColor, ratio);\n\tcolor.a *\x3d alpha * opacity;\n\tgl_FragColor \x3d color;\n}\n"]);
A.vert=l(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio;\nuniform bool constPointSize;\nuniform sampler2D palette;\nuniform vec2 paletteSize;\n\nconst float maxSize \x3d 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nfloat pointSizeScale \x3d (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect \x3d (paletteSize.x \x3c 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(palette,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive \x3d\x3d 0.) return;\n\n  vec2 position \x3d vec2(x, y);\n  vec2 positionFract \x3d vec2(xFract, yFract);\n\n  vec4 color \x3d getColor(colorId);\n  vec4 borderColor \x3d getColor(borderColorId);\n\n  float size \x3d size * maxSize / 255.;\n  float borderSize \x3d borderSize * maxSize / 255.;\n\n  gl_PointSize \x3d (size + borderSize) * pointSizeScale;\n\n  vec2 pos \x3d (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position \x3d vec4(pos * 2. - 1., 0., 1.);\n\n  fragBorderRadius \x3d 1. - 2. * borderSize / (size + borderSize);\n  fragColor \x3d color;\n  fragBorderColor \x3d borderColor.a \x3d\x3d 0. || borderSize \x3d\x3d 0. ? vec4(color.rgb, 0.) : borderColor;\n  fragWidth \x3d 1. / gl_PointSize;\n}\n"]);
f&&(A.frag=A.frag.replace("smoothstep","smoothStep"),z.frag=z.frag.replace("smoothstep","smoothStep"));this.drawCircle=x(A)}var m=b("color-normalize"),a=b("array-bounds"),g=b("color-id"),h=b("@plotly/point-cluster"),r=b("object-assign"),l=b("glslify"),c=b("pick-by-alias"),d=b("update-diff"),e=b("flatten-vertex-data"),f=b("is-iexplorer"),q=b("to-float32"),t=b("parse-rect");k.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,
count:0,offset:0,bounds:null,positions:[],snap:1E4};k.prototype.render=function(){arguments.length&&this.update.apply(this,arguments);this.draw();return this};k.prototype.draw=function(){for(var x=this,z=arguments.length,B=Array(z),A=0;A<z;A++)B[A]=arguments[A];z=this.groups;1===B.length&&Array.isArray(B[0])&&(null===B[0][0]||Array.isArray(B[0][0]))&&(B=B[0]);this.regl._refresh();if(B.length)for(z=0;z<B.length;z++)this.drawItem(z,B[z]);else z.forEach(function(D,C){x.drawItem(C)});return this};k.prototype.drawItem=
function(x,z){var B=this.groups;x=B[x];"number"===typeof z&&(x=B[z],z=null);if(x&&x.count&&x.opacity){x.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,x,z));B=[];for(var A=1;A<x.activation.length;A++)if(x.activation[A]&&(!0===x.activation[A]||x.activation[A].data.length)){var D=B.push,C=D.apply,v=this.getMarkerDrawOptions(A,x,z);var y=v;y=Array.isArray(y)?n(y):void 0;y||(y="undefined"!==typeof Symbol&&null!=v[Symbol.iterator]||null!=v["@@iterator"]?Array.from(v):void 0);if(!(v=y||p(v)))throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
C.call(D,B,v)}B.length&&this.drawMarker(B)}};k.prototype.getMarkerDrawOptions=function(x,z,B){var A=z.range,D=z.tree,C=z.viewport,v=z.activation,y=z.selectionBuffer,F=z.count;if(!D)return B?[r({},z,{markerTexture:this.markerTextures[x],activation:v[x],count:B.length,elements:B,offset:0})]:[r({},z,{markerTexture:this.markerTextures[x],activation:v[x],offset:0})];var J=[];A=D.range(A,{lod:!0,px:[(A[2]-A[0])/C.width,(A[3]-A[1])/C.height]});if(B){D=v[x].data;F=new Uint8Array(F);for(C=0;C<B.length;C++){var K=
B[C];F[K]=D?D[K]:1}y.subdata(F)}for(F=A.length;F--;){D=A[F];C=D;C=Array.isArray(C)?C:void 0;if(!C){K=C=void 0;var O=null==D?null:"undefined"!==typeof Symbol&&D[Symbol.iterator]||D["@@iterator"];if(null!=O){var I=[],L=!0,H=!1;try{for(O=O.call(D);!(L=(K=O.next()).done)&&(I.push(K.value),2!==I.length);L=!0);}catch(M){H=!0,C=M}finally{try{if(!L&&null!=O["return"])O["return"]()}finally{if(H)throw C;}}C=I}else C=void 0}if(!(D=C||p(D,2)))throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
C=D[0];J.push(r({},z,{markerTexture:this.markerTextures[x],activation:B?y:v[x],offset:C,count:D[1]-C}))}return J};k.prototype.update=function(){for(var x=this,z=arguments.length,B=Array(z),A=0;A<z;A++)B[A]=arguments[A];if(B.length){1===B.length&&Array.isArray(B[0])&&(B=B[0]);var D=this.groups,C=this.gl,v=this.regl,y=this.maxSize,F=this.maxColors,J=this.palette;this.groups=D=B.map(function(K,O){var I=D[O];if(void 0===K)return I;null===K?K={positions:null}:"function"===typeof K?K={ondraw:K}:"number"===
typeof K[0]&&(K={positions:K});K=c(K,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",
opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"});null===K.positions&&(K.positions=[]);null!=K.tooManyColors&&(x.tooManyColors=K.tooManyColors);I||(D[O]=I={id:O,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:v.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:v.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:v.buffer({data:new Uint8Array(0),
usage:"dynamic",type:"uint8"}),positionBuffer:v.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:v.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},K=r({},k.defaults,K));!K.positions||"marker"in K||(K.marker=I.marker,delete I.marker);!K.marker||"positions"in K||(K.positions=I.positions,delete I.positions);var L=0,H=0;d(I,K,[{snap:!0,size:function(T,U){null==T&&(T=k.defaults.size);L+=T&&T.length?1:0;return T},borderSize:function(T,U){null==T&&(T=k.defaults.borderSize);
L+=T&&T.length?1:0;return T},opacity:parseFloat,color:function(T,U){null==T&&(T=k.defaults.color);T=x.updateColor(T);H++;return T},borderColor:function(T,U){null==T&&(T=k.defaults.borderColor);T=x.updateColor(T);H++;return T},bounds:function(T,U,ha){"range"in ha||(ha.range=null);return T},positions:function(T,U,ha){var Y=U.snap,ba=U.positionBuffer,ja=U.positionFractBuffer,ma=U.selectionBuffer;if(T.x||T.y)return U.xAttr=T.x.length?{buffer:v.buffer(T.x),offset:0,stride:4,count:T.x.length}:{buffer:T.x.buffer,
offset:4*T.x.offset||0,stride:4*(T.x.stride||1),count:T.x.count},U.yAttr=T.y.length?{buffer:v.buffer(T.y),offset:0,stride:4,count:T.y.length}:{buffer:T.y.buffer,offset:4*T.y.offset||0,stride:4*(T.y.stride||1),count:T.y.count},U.count=Math.max(U.xAttr.count,U.yAttr.count),T;T=e(T,"float64");var ia=U.count=Math.floor(T.length/2),oa=U.bounds=ia?a(T,2):null;ha.range||U.range||(delete U.range,ha.range=oa);ha.marker||U.marker||(delete U.marker,ha.marker=null);Y&&(!0===Y||ia>Y)?U.tree=h(T,{bounds:oa}):Y&&
Y.length&&(U.tree=Y);U.tree&&(ha={primitive:"points",usage:"static",data:U.tree,type:"uint32"},U.elements?U.elements(ha):U.elements=v.elements(ha));U=q.float32(T);ba({data:U,usage:"dynamic"});ba=q.fract32(T,U);ja({data:ba,usage:"dynamic"});ma({data:new Uint8Array(ia),type:"uint8",usage:"stream"});return T}},{marker:function(T,U,ha){ha=U.activation;ha.forEach(function(ia){return ia&&ia.destroy&&ia.destroy()});ha.length=0;if(T&&"number"!==typeof T[0]){for(var Y=[],ba=0,ja=Math.min(T.length,U.count);ba<
ja;ba++){var ma=x.addMarker(T[ba]);Y[ma]||(Y[ma]=new Uint8Array(U.count));Y[ma][ba]=1}for(U=0;U<Y.length;U++)if(Y[U]){ba={data:Y[U],type:"uint8",usage:"static"};if(ha[U])ha[U](ba);else ha[U]=v.buffer(ba);ha[U].data=Y[U]}}else Y=x.addMarker(T),ha[Y]=!0;return T},range:function(T,U,ha){if(ha=U.bounds)return T||(T=ha),U.scale=[1/(T[2]-T[0]),1/(T[3]-T[1])],U.translate=[-T[0],-T[1]],U.scaleFract=q.fract(U.scale),U.translateFract=q.fract(U.translate),T},viewport:function(T){return t(T||[C.drawingBufferWidth,
C.drawingBufferHeight])}}]);if(L){var M=I;K=M.count;O=M.size;var Q=M.borderSize;M=M.sizeBuffer;var Z=new Uint8Array(2*K);if(O.length||Q.length)for(var ca=0;ca<K;ca++)Z[2*ca]=Math.round(255*(null==O[ca]?O:O[ca])/y),Z[2*ca+1]=Math.round(255*(null==Q[ca]?Q:Q[ca])/y);M({data:Z,usage:"dynamic"})}if(H){M=I;K=M.count;O=M.color;Q=M.borderColor;M=M.colorBuffer;if(x.tooManyColors){if(O.length||Q.length){var W=new Uint8Array(8*K);for(Z=0;Z<K;Z++)ca=O[Z],W[8*Z]=J[4*ca],W[8*Z+1]=J[4*ca+1],W[8*Z+2]=J[4*ca+2],W[8*
Z+3]=J[4*ca+3],ca=Q[Z],W[8*Z+4]=J[4*ca],W[8*Z+5]=J[4*ca+1],W[8*Z+6]=J[4*ca+2],W[8*Z+7]=J[4*ca+3]}}else if(O.length||Q.length)for(W=new Uint8Array(4*K+2),Z=0;Z<K;Z++)null!=O[Z]&&(W[4*Z]=O[Z]%F,W[4*Z+1]=Math.floor(O[Z]/F)),null!=Q[Z]&&(W[4*Z+2]=Q[Z]%F,W[4*Z+3]=Math.floor(Q[Z]/F));M({data:W||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return I})}};k.prototype.addMarker=function(x){var z=this.markerTextures,B=this.regl,A=this.markerCache,D=null==x?0:A.indexOf(x);if(0<=D)return D;if(x instanceof Uint8Array||
x instanceof Uint8ClampedArray)var C=x;else{C=new Uint8Array(x.length);D=0;for(var v=x.length;D<v;D++)C[D]=255*x[D]}v=Math.floor(Math.sqrt(C.length));D=z.length;A.push(x);z.push(B.texture({channels:1,data:C,radius:v,mag:"linear",min:"linear"}));return D};k.prototype.updateColor=function(x){var z=this.paletteIds,B=this.palette,A=this.maxColors;Array.isArray(x)||(x=[x]);var D=[];if("number"===typeof x[0]){var C=[];if(Array.isArray(x))for(var v=0;v<x.length;v+=4)C.push(x.slice(v,v+4));else for(v=0;v<
x.length;v+=4)C.push(x.subarray(v,v+4));x=C}for(C=0;C<x.length;C++){v=x[C];v=m(v,"uint8");var y=g(v,!1);if(null==z[y]){var F=B.length;z[y]=Math.floor(F/4);B[F]=v[0];B[F+1]=v[1];B[F+2]=v[2];B[F+3]=v[3]}D[C]=z[y]}!this.tooManyColors&&B.length>4*A&&(this.tooManyColors=!0);this.updatePalette(B);return 1===D.length?D[0]:D};k.prototype.updatePalette=function(x){if(!this.tooManyColors){var z=this.maxColors,B=this.paletteTexture,A=Math.ceil(.25*x.length/z);if(1<A){x=x.slice();for(var D=.25*x.length%z;D<A*
z;D++)x.push(0,0,0,0)}B.height<A&&B.resize(z,A);B.subimage({width:Math.min(.25*x.length,z),height:A,data:x},0,0)}};k.prototype.destroy=function(){this.groups.forEach(function(x){x.sizeBuffer.destroy();x.positionBuffer.destroy();x.positionFractBuffer.destroy();x.colorBuffer.destroy();x.activation.forEach(function(z){return z&&z.destroy&&z.destroy()});x.selectionBuffer.destroy();x.elements&&x.elements.destroy()});this.groups.length=0;this.paletteTexture.destroy();this.markerTextures.forEach(function(x){return x&&
x.destroy&&x.destroy()});return this};var w=b("object-assign");N.exports=function(x,z){x=new k(x,z);z=x.render.bind(x);w(z,{render:z,update:x.update.bind(x),draw:x.draw.bind(x),destroy:x.destroy.bind(x),regl:x.regl,gl:x.gl,canvas:x.gl.canvas,groups:x.groups,markers:x.markerCache,palette:x.palette});return z}},{"@plotly/point-cluster":59,"array-bounds":76,"color-id":129,"color-normalize":131,"flatten-vertex-data":252,glslify:442,"is-iexplorer":454,"object-assign":487,"parse-rect":492,"pick-by-alias":498,
"to-float32":599,"update-diff":621}],539:[function(b,N,G){function p(d,e){if(!(this instanceof p))return new p(d,e);this.traces=[];this.passes={};this.regl=d;this.scatter=m(d);this.canvas=this.scatter.canvas}function n(d,e,f){e=d[e];var q=d[f];2<e.length?(d=e[1],e=e[3]):e.length?(d=e[0],e=e[1]):(d=e.y,e=e.y+e.height);2<q.length?(f=q[0],q=q[2]):q.length?(f=q[0],q=q[1]):(f=q.x,q=q.x+q.width);return[f,d,q,e]}function k(d){if("number"===typeof d)return[d,d,d,d];if(2===d.length)return[d[0],d[1],d[0],d[1]];
d=l(d);return[d.x,d.y,d.x+d.width,d.y+d.height]}var m=b("regl-scatter2d"),a=b("pick-by-alias"),g=b("array-bounds"),h=b("raf"),r=b("array-range"),l=b("parse-rect"),c=b("flatten-vertex-data");N.exports=p;p.prototype.render=function(){for(var d=this,e=[],f=arguments.length;f--;)e[f]=arguments[f];e.length&&this.update.apply(this,e);if(this.regl.attributes.preserveDrawingBuffer)return this.draw();this.dirty?null==this.planned&&(this.planned=h(function(){d.draw();d.dirty=!0;d.planned=null})):(this.draw(),
this.dirty=!0,h(function(){d.dirty=!1}));return this};p.prototype.update=function(){for(var d,e=[],f=arguments.length;f--;)e[f]=arguments[f];if(e.length){for(f=0;f<e.length;f++)this.updateItem(f,e[f]);this.traces=this.traces.filter(Boolean);e=[];for(var q=f=0;q<this.traces.length;q++){for(var t=this.traces[q],w=this.traces[q].passes,x=0;x<w.length;x++)e.push(this.passes[w[x]]);t.passOffset=f;f+=t.passes.length}(d=this.scatter).update.apply(d,e);return this}};p.prototype.updateItem=function(d,e){var f=
this.regl;if(null===e)return this.traces[d]=null,this;if(!e)return this;e=a(e,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",
marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"});d=this.traces[d]||(this.traces[d]={id:d,buffer:f.buffer({usage:"dynamic",type:"float",
data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:l([f._gl.drawingBufferWidth,f._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});null!=e.color&&(d.color=e.color);null!=e.size&&(d.size=e.size);null!=e.marker&&(d.marker=e.marker);null!=e.borderColor&&(d.borderColor=e.borderColor);null!=e.borderSize&&(d.borderSize=e.borderSize);null!=e.opacity&&(d.opacity=e.opacity);e.viewport&&(d.viewport=l(e.viewport));null!=
e.diagonal&&(d.diagonal=e.diagonal);null!=e.upper&&(d.upper=e.upper);null!=e.lower&&(d.lower=e.lower);if(e.data)for(d.buffer(c(e.data)),d.columns=e.data.length,d.count=e.data[0].length,d.bounds=[],f=0;f<d.columns;f++)d.bounds[f]=g(e.data[f],1);if(e.range){d.range=e.range;var q=d.range&&"number"!==typeof d.range[0]}e.domain&&(d.domain=e.domain);f=!1;null!=e.padding&&(Array.isArray(e.padding)&&e.padding.length===d.columns&&"number"===typeof e.padding[e.padding.length-1]?(d.padding=e.padding.map(k),
f=!0):d.padding=k(e.padding));var t=d.columns,w=d.count,x=d.viewport.width,z=d.viewport.height,B=d.viewport.x,A=d.viewport.y,D=x/t,C=z/t;d.passes=[];for(var v=0;v<t;v++)for(var y=0;y<t;y++)if(d.diagonal||y!==v)if(d.upper||!(v>y))if(d.lower||!(v<y)){var F=d.id;F=(null!=F.id?F.id:F)<<16|(v&255)<<8|y&255;var J=this.passes[F]||(this.passes[F]={});e.data&&(J.positions=e.transpose?{x:{buffer:d.buffer,offset:y,count:w,stride:t},y:{buffer:d.buffer,offset:v,count:w,stride:t}}:{x:{buffer:d.buffer,offset:y*
w,count:w},y:{buffer:d.buffer,offset:v*w,count:w}},J.bounds=n(d.bounds,v,y));if(e.domain||e.viewport||e.data){var K=f?n(d.padding,v,y):d.padding;if(d.domain){var O=n(d.domain,v,y);J.viewport=[B+O[0]*x+K[0],A+O[1]*z+K[1],B+O[2]*x-K[2],A+O[3]*z-K[3]]}else J.viewport=[B+y*D+D*K[0],A+v*C+C*K[1],B+(y+1)*D-D*K[2],A+(v+1)*C-C*K[3]]}e.color&&(J.color=d.color);e.size&&(J.size=d.size);e.marker&&(J.marker=d.marker);e.borderSize&&(J.borderSize=d.borderSize);e.borderColor&&(J.borderColor=d.borderColor);e.opacity&&
(J.opacity=d.opacity);e.range&&(J.range=q?n(d.range,v,y):d.range||J.bounds);d.passes.push(F)}return this};p.prototype.draw=function(){for(var d,e=[],f=arguments.length;f--;)e[f]=arguments[f];if(e.length){var q=[];for(f=0;f<e.length;f++)if("number"===typeof e[f]){var t=this.traces[e[f]],w=t.passOffset;q.push.apply(q,r(w,w+t.passes.length))}else if(e[f].length){var x=e[f];t=this.traces[f];w=t.passes;var z=t.passOffset;w=w.map(function(B,A){q[z+A]=x})}(d=this.scatter).draw.apply(d,q)}else this.scatter.draw();
return this};p.prototype.destroy=function(){this.traces.forEach(function(d){d.buffer&&d.buffer.destroy&&d.buffer.destroy()});this.passes=this.traces=null;this.scatter.destroy();return this}},{"array-bounds":76,"array-range":79,"flatten-vertex-data":252,"parse-rect":492,"pick-by-alias":498,raf:530,"regl-scatter2d":538}],540:[function(b,N,G){(function(p,n){"object"===typeof G&&"undefined"!==typeof N?N.exports=n():p.createREGL=n()})(this,function(){function p(kb,Qb){this.id=ka++;this.type=kb;this.data=
Qb}function n(kb){if(0===kb.length)return[];var Qb=kb.charAt(0),dc=kb.charAt(kb.length-1);if(1<kb.length&&Qb===dc&&('"'===Qb||"'"===Qb))return['"'+kb.substr(1,kb.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(Qb=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(kb))return n(kb.substr(0,Qb.index)).concat(n(Qb[1])).concat(n(kb.substr(Qb.index+Qb[0].length)));Qb=kb.split(".");if(1===Qb.length)return['"'+kb.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];kb=[];for(dc=0;dc<Qb.length;++dc)kb=
kb.concat(n(Qb[dc]));return kb}function k(kb){return"["+n(kb).join("][")+"]"}function m(){var kb={"":0},Qb=[""];return{id:function(dc){var Ec=kb[dc];if(Ec)return Ec;Ec=kb[dc]=Qb.length;Qb.push(dc);return Ec},str:function(dc){return Qb[dc]}}}function a(kb,Qb,dc){function Ec(){var tb=window.innerWidth,Ib=window.innerHeight;kb!==document.body&&(Ib=kb.getBoundingClientRect(),tb=Ib.right-Ib.left,Ib=Ib.bottom-Ib.top);Qc.width=dc*tb;Qc.height=dc*Ib;la(Qc.style,{width:tb+"px",height:Ib+"px"})}var Qc=document.createElement("canvas");
la(Qc.style,{border:0,margin:0,padding:0,top:0,left:0});kb.appendChild(Qc);kb===document.body&&(Qc.style.position="absolute",la(kb.style,{margin:0,padding:0}));var Tc;kb!==document.body&&"function"===typeof ResizeObserver?(Tc=new ResizeObserver(function(){setTimeout(Ec)}),Tc.observe(kb)):window.addEventListener("resize",Ec,!1);Ec();return{canvas:Qc,onDestroy:function(){Tc?Tc.disconnect():window.removeEventListener("resize",Ec);kb.removeChild(Qc)}}}function g(kb,Qb){function dc(Ec){try{return kb.getContext(Ec,
Qb)}catch(Qc){return null}}return dc("webgl")||dc("experimental-webgl")||dc("webgl-experimental")}function h(kb){return"string"===typeof kb?kb.split():kb}function r(kb){return"string"===typeof kb?document.querySelector(kb):kb}function l(kb){var Qb=kb||{},dc,Ec,Qc,Tc;kb={};var tb=[],Ib=[],sc="undefined"===typeof window?1:window.devicePixelRatio,pc=!1,zc=function(Ub){},Wb=function(){};"string"===typeof Qb?dc=document.querySelector(Qb):"object"===typeof Qb&&("string"===typeof Qb.nodeName&&"function"===
typeof Qb.appendChild&&"function"===typeof Qb.getBoundingClientRect?dc=Qb:"function"===typeof Qb.drawArrays||"function"===typeof Qb.drawElements?(Tc=Qb,Qc=Tc.canvas):("gl"in Qb?Tc=Qb.gl:"canvas"in Qb?Qc=r(Qb.canvas):"container"in Qb&&(Ec=r(Qb.container)),"attributes"in Qb&&(kb=Qb.attributes),"extensions"in Qb&&(tb=h(Qb.extensions)),"optionalExtensions"in Qb&&(Ib=h(Qb.optionalExtensions)),"onDone"in Qb&&(zc=Qb.onDone),"profile"in Qb&&(pc=!!Qb.profile),"pixelRatio"in Qb&&(sc=+Qb.pixelRatio)));dc&&("canvas"===
dc.nodeName.toLowerCase()?Qc=dc:Ec=dc);if(!Tc){if(!Qc){dc=a(Ec||document.body,zc,sc);if(!dc)return null;Qc=dc.canvas;Wb=dc.onDestroy}void 0===kb.premultipliedAlpha&&(kb.premultipliedAlpha=!0);Tc=g(Qc,kb)}return Tc?{gl:Tc,canvas:Qc,container:Ec,extensions:tb,optionalExtensions:Ib,pixelRatio:sc,profile:pc,onDone:zc,onDestroy:Wb}:(Wb(),zc("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function c(kb,Qb){function dc(tb){tb=tb.toLowerCase();try{var Ib=
Ec[tb]=kb.getExtension(tb)}catch(sc){}return!!Ib}for(var Ec={},Qc=0;Qc<Qb.extensions.length;++Qc){var Tc=Qb.extensions[Qc];if(!dc(Tc))return Qb.onDestroy(),Qb.onDone('"'+Tc+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}Qb.optionalExtensions.forEach(dc);return{extensions:Ec,restore:function(){Object.keys(Ec).forEach(function(tb){if(Ec[tb]&&!dc(tb))throw Error("(regl): error restoring extension "+tb);})}}}function d(kb,Qb){for(var dc=
Array(kb),Ec=0;Ec<kb;++Ec)dc[Ec]=Qb(Ec);return dc}function e(kb){var Qb=(65535<kb)<<4;kb>>>=Qb;var dc=(255<kb)<<3;kb>>>=dc;Qb|=dc;dc=(15<kb)<<2;kb>>>=dc;Qb|=dc;dc=(3<kb)<<1;return Qb|dc|kb>>>dc>>1}function f(){function kb(Ec){a:{for(var Qc=16;268435456>=Qc;Qc*=16)if(Ec<=Qc){Ec=Qc;break a}Ec=0}Qc=dc[e(Ec)>>2];return 0<Qc.length?Qc.pop():new ArrayBuffer(Ec)}function Qb(Ec){dc[e(Ec.byteLength)>>2].push(Ec)}var dc=d(8,function(){return[]});return{alloc:kb,free:Qb,allocType:function(Ec,Qc){switch(Ec){case 5120:Ec=
new Int8Array(kb(Qc),0,Qc);break;case 5121:Ec=new Uint8Array(kb(Qc),0,Qc);break;case 5122:Ec=new Int16Array(kb(2*Qc),0,Qc);break;case 5123:Ec=new Uint16Array(kb(2*Qc),0,Qc);break;case 5124:Ec=new Int32Array(kb(4*Qc),0,Qc);break;case 5125:Ec=new Uint32Array(kb(4*Qc),0,Qc);break;case 5126:Ec=new Float32Array(kb(4*Qc),0,Qc);break;default:return null}return Ec.length!==Qc?Ec.subarray(0,Qc):Ec},freeType:function(Ec){Qb(Ec.buffer)}}}function q(kb){return!!kb&&"object"===typeof kb&&Array.isArray(kb.shape)&&
Array.isArray(kb.stride)&&"number"===typeof kb.offset&&kb.shape.length===kb.stride.length&&(Array.isArray(kb.data)||Xa(kb.data))}function t(kb,Qb,dc,Ec,Qc,Tc){for(var tb=0;tb<Qb;++tb)for(var Ib=kb[tb],sc=0;sc<dc;++sc)for(var pc=Ib[sc],zc=0;zc<Ec;++zc)Qc[Tc++]=pc[zc]}function w(kb,Qb,dc,Ec,Qc){for(var Tc=1,tb=dc+1;tb<Qb.length;++tb)Tc*=Qb[tb];var Ib=Qb[dc];if(4===Qb.length-dc){var sc=Qb[dc+1],pc=Qb[dc+2];Qb=Qb[dc+3];for(tb=0;tb<Ib;++tb)t(kb[tb],sc,pc,Qb,Ec,Qc),Qc+=Tc}else for(tb=0;tb<Ib;++tb)w(kb[tb],
Qb,dc+1,Ec,Qc),Qc+=Tc}function x(kb){return sb[Object.prototype.toString.call(kb)]|0}function z(kb,Qb){for(var dc=0;dc<Qb.length;++dc)kb[dc]=Qb[dc]}function B(kb,Qb,dc,Ec,Qc,Tc,tb){for(var Ib=0,sc=0;sc<dc;++sc)for(var pc=0;pc<Ec;++pc)kb[Ib++]=Qb[Qc*sc+Tc*pc+tb]}function A(kb,Qb,dc,Ec){function Qc(Wb){this.id=sc++;this.buffer=kb.createBuffer();this.type=Wb;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;dc.profile&&(this.stats={size:0})}function Tc(Wb,Ub,
yb){Wb.byteLength=Ub.byteLength;kb.bufferData(Wb.type,Ub,yb)}function tb(Wb,Ub,yb,ac,Vb,mc){Wb.usage=yb;if(Array.isArray(Ub)){if(Wb.dtype=ac||5126,0<Ub.length)if(Array.isArray(Ub[0])){Vb=Bb(Ub);for(var tc=ac=1;tc<Vb.length;++tc)ac*=Vb[tc];Wb.dimension=ac;Ub=qb(Ub,Vb,Wb.dtype);Tc(Wb,Ub,yb);mc?Wb.persistentData=Ub:za.freeType(Ub)}else"number"===typeof Ub[0]?(Wb.dimension=Vb,Vb=za.allocType(Wb.dtype,Ub.length),z(Vb,Ub),Tc(Wb,Vb,yb),mc?Wb.persistentData=Vb:za.freeType(Vb)):Xa(Ub[0])&&(Wb.dimension=Ub[0].length,
Wb.dtype=ac||x(Ub[0])||5126,Ub=qb(Ub,[Ub.length,Ub[0].length],Wb.dtype),Tc(Wb,Ub,yb),mc?Wb.persistentData=Ub:za.freeType(Ub))}else if(Xa(Ub))Wb.dtype=ac||x(Ub),Wb.dimension=Vb,Tc(Wb,Ub,yb),mc&&(Wb.persistentData=new Uint8Array(new Uint8Array(Ub.buffer)));else if(q(Ub)){Vb=Ub.shape;var Uc=Ub.stride;tc=Ub.offset;var kd=0,Bd=0,Fd=0,yd=0;1===Vb.length?(kd=Vb[0],Bd=1,Fd=Uc[0],yd=0):2===Vb.length&&(kd=Vb[0],Bd=Vb[1],Fd=Uc[0],yd=Uc[1]);Wb.dtype=ac||x(Ub.data)||5126;Wb.dimension=Bd;Vb=za.allocType(Wb.dtype,
kd*Bd);B(Vb,Ub.data,kd,Bd,Fd,yd,tc);Tc(Wb,Vb,yb);mc?Wb.persistentData=Vb:za.freeType(Vb)}else Ub instanceof ArrayBuffer&&(Wb.dtype=5121,Wb.dimension=Vb,Tc(Wb,Ub,yb),mc&&(Wb.persistentData=new Uint8Array(new Uint8Array(Ub))))}function Ib(Wb){Qb.bufferCount--;Ec(Wb);kb.deleteBuffer(Wb.buffer);Wb.buffer=null;delete pc[Wb.id]}var sc=0,pc={};Qc.prototype.bind=function(){kb.bindBuffer(this.type,this.buffer)};Qc.prototype.destroy=function(){Ib(this)};var zc=[];dc.profile&&(Qb.getTotalBufferSize=function(){var Wb=
0;Object.keys(pc).forEach(function(Ub){Wb+=pc[Ub].stats.size});return Wb});return{create:function(Wb,Ub,yb,ac){function Vb(tc){var Uc=35044,kd=null,Bd=0,Fd=0,yd=1;Array.isArray(tc)||Xa(tc)||q(tc)||tc instanceof ArrayBuffer?kd=tc:"number"===typeof tc?Bd=tc|0:tc&&("data"in tc&&(kd=tc.data),"usage"in tc&&(Uc=vb[tc.usage]),"type"in tc&&(Fd=jb[tc.type]),"dimension"in tc&&(yd=tc.dimension|0),"length"in tc&&(Bd=tc.length|0));mc.bind();kd?tb(mc,kd,Uc,Fd,yd,ac):(Bd&&kb.bufferData(mc.type,Bd,Uc),mc.dtype=Fd||
5121,mc.usage=Uc,mc.dimension=yd,mc.byteLength=Bd);dc.profile&&(mc.stats.size=mc.byteLength*ub[mc.dtype]);return Vb}Qb.bufferCount++;var mc=new Qc(Ub);pc[mc.id]=mc;yb||Vb(Wb);Vb._reglType="buffer";Vb._buffer=mc;Vb.subdata=function(tc,Uc){Uc=(Uc||0)|0;mc.bind();if(Xa(tc)||tc instanceof ArrayBuffer)kb.bufferSubData(mc.type,Uc,tc);else if(Array.isArray(tc)){if(0<tc.length)if("number"===typeof tc[0]){var kd=za.allocType(mc.dtype,tc.length);z(kd,tc);kb.bufferSubData(mc.type,Uc,kd);za.freeType(kd)}else if(Array.isArray(tc[0])||
Xa(tc[0])){var Bd=Bb(tc);kd=qb(tc,Bd,mc.dtype);kb.bufferSubData(mc.type,Uc,kd);za.freeType(kd)}}else if(q(tc)){Bd=tc.shape;var Fd=tc.stride,yd=kd=0,Lc=0,cd=0;1===Bd.length?(kd=Bd[0],yd=1,Lc=Fd[0],cd=0):2===Bd.length&&(kd=Bd[0],yd=Bd[1],Lc=Fd[0],cd=Fd[1]);Bd=Array.isArray(tc.data)?mc.dtype:x(tc.data);Bd=za.allocType(Bd,kd*yd);B(Bd,tc.data,kd,yd,Lc,cd,tc.offset);kb.bufferSubData(mc.type,Uc,Bd);za.freeType(Bd)}return Vb};dc.profile&&(Vb.stats=mc.stats);Vb.destroy=function(){Ib(mc)};return Vb},createStream:function(Wb,
Ub){var yb=zc.pop();yb||(yb=new Qc(Wb));yb.bind();tb(yb,Ub,35040,0,1,!1);return yb},destroyStream:function(Wb){zc.push(Wb)},clear:function(){$a(pc).forEach(Ib);zc.forEach(Ib)},getBuffer:function(Wb){return Wb&&Wb._buffer instanceof Qc?Wb._buffer:null},restore:function(){$a(pc).forEach(function(Wb){Wb.buffer=kb.createBuffer();kb.bindBuffer(Wb.type,Wb.buffer);kb.bufferData(Wb.type,Wb.persistentData||Wb.byteLength,Wb.usage)})},_initBuffer:tb}}function D(kb,Qb,dc,Ec){function Qc(Wb){this.id=sc++;Ib[this.id]=
this;this.buffer=Wb;this.primType=4;this.type=this.vertCount=0}function Tc(Wb,Ub,yb,ac,Vb,mc,tc){Wb.buffer.bind();var Uc;Ub?((Uc=tc)||Xa(Ub)&&(!q(Ub)||Xa(Ub.data))||(Uc=Qb.oes_element_index_uint?5125:5123),dc._initBuffer(Wb.buffer,Ub,yb,Uc,3)):(kb.bufferData(34963,mc,yb),Wb.buffer.dtype=Uc||5121,Wb.buffer.usage=yb,Wb.buffer.dimension=3,Wb.buffer.byteLength=mc);Uc=tc;if(!tc){switch(Wb.buffer.dtype){case 5121:case 5120:Uc=5121;break;case 5123:case 5122:Uc=5123;break;case 5125:case 5124:Uc=5125}Wb.buffer.dtype=
Uc}Wb.type=Uc;Ub=Vb;0>Ub&&(Ub=Wb.buffer.byteLength,5123===Uc?Ub>>=1:5125===Uc&&(Ub>>=2));Wb.vertCount=Ub;Ub=ac;0>ac&&(Ub=4,ac=Wb.buffer.dimension,1===ac&&(Ub=0),2===ac&&(Ub=1),3===ac&&(Ub=4));Wb.primType=Ub}function tb(Wb){Ec.elementsCount--;delete Ib[Wb.id];Wb.buffer.destroy();Wb.buffer=null}var Ib={},sc=0,pc={uint8:5121,uint16:5123};Qb.oes_element_index_uint&&(pc.uint32=5125);Qc.prototype.bind=function(){this.buffer.bind()};var zc=[];return{create:function(Wb,Ub){function yb(mc){if(mc)if("number"===
typeof mc)ac(mc),Vb.primType=4,Vb.vertCount=mc|0,Vb.type=5121;else{var tc=null,Uc=35044,kd=-1,Bd=-1,Fd=0,yd=0;if(Array.isArray(mc)||Xa(mc)||q(mc))tc=mc;else if("data"in mc&&(tc=mc.data),"usage"in mc&&(Uc=vb[mc.usage]),"primitive"in mc&&(kd=wb[mc.primitive]),"count"in mc&&(Bd=mc.count|0),"type"in mc&&(yd=pc[mc.type]),"length"in mc)Fd=mc.length|0;else if(Fd=Bd,5123===yd||5122===yd)Fd*=2;else if(5125===yd||5124===yd)Fd*=4;Tc(Vb,tc,Uc,kd,Bd,Fd,yd)}else ac(),Vb.primType=4,Vb.vertCount=0,Vb.type=5121;return yb}
var ac=dc.create(null,34963,!0),Vb=new Qc(ac._buffer);Ec.elementsCount++;yb(Wb);yb._reglType="elements";yb._elements=Vb;yb.subdata=function(mc,tc){ac.subdata(mc,tc);return yb};yb.destroy=function(){tb(Vb)};return yb},createStream:function(Wb){var Ub=zc.pop();Ub||(Ub=new Qc(dc.create(null,34963,!0,!1)._buffer));Tc(Ub,Wb,35040,-1,-1,0,0);return Ub},destroyStream:function(Wb){zc.push(Wb)},getElements:function(Wb){return"function"===typeof Wb&&Wb._elements instanceof Qc?Wb._elements:null},clear:function(){$a(Ib).forEach(tb)}}}
function C(kb){for(var Qb=za.allocType(5123,kb.length),dc=0;dc<kb.length;++dc)if(isNaN(kb[dc]))Qb[dc]=65535;else if(Infinity===kb[dc])Qb[dc]=31744;else if(-Infinity===kb[dc])Qb[dc]=64512;else{rb[0]=kb[dc];var Ec=Ab[0],Qc=Ec>>>31<<15,Tc=(Ec<<1>>>24)-127;Ec=Ec>>13&1023;Qb[dc]=-24>Tc?Qc:-14>Tc?Qc+(Ec+1024>>-14-Tc):15<Tc?Qc+31744:Qc+(Tc+15<<10)+Ec}return Qb}function v(kb){return Array.isArray(kb)||Xa(kb)}function y(kb){return"[object "+kb+"]"}function F(kb){return Array.isArray(kb)&&(0===kb.length||"number"===
typeof kb[0])}function J(kb){return Array.isArray(kb)&&0!==kb.length&&v(kb[0])?!0:!1}function K(kb){return Object.prototype.toString.call(kb)}function O(kb){if(!kb)return!1;var Qb=K(kb);return 0<=Pb.indexOf(Qb)?!0:F(kb)||J(kb)||q(kb)}function I(kb,Qb){36193===kb.type?(kb.data=C(Qb),za.freeType(Qb)):kb.data=Qb}function L(kb,Qb,dc,Ec,Qc,Tc){kb="undefined"!==typeof pb[kb]?pb[kb]:ya[kb]*fc[Qb];Tc&&(kb*=6);if(Qc){for(Ec=0;1<=dc;)Ec+=kb*dc*dc,dc/=2;return Ec}return kb*dc*Ec}function H(kb,Qb,dc,Ec,Qc,Tc,
tb){function Ib(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function sc(Mb,$b){Mb.internalformat=$b.internalformat;Mb.format=$b.format;Mb.type=$b.type;Mb.compressed=$b.compressed;Mb.premultiplyAlpha=$b.premultiplyAlpha;Mb.flipY=$b.flipY;Mb.unpackAlignment=$b.unpackAlignment;Mb.colorSpace=$b.colorSpace;Mb.width=$b.width;Mb.height=$b.height;Mb.channels=$b.channels}
function pc(Mb,$b){if("object"===typeof $b&&$b){"premultiplyAlpha"in $b&&(Mb.premultiplyAlpha=$b.premultiplyAlpha);"flipY"in $b&&(Mb.flipY=$b.flipY);"alignment"in $b&&(Mb.unpackAlignment=$b.alignment);"colorSpace"in $b&&(Mb.colorSpace=Se[$b.colorSpace]);"type"in $b&&(Mb.type=Ne[$b.type]);var Mc=Mb.width,Hd=Mb.height,qd=Mb.channels,qe=!1;"shape"in $b?(Mc=$b.shape[0],Hd=$b.shape[1],3===$b.shape.length&&(qd=$b.shape[2],qe=!0)):("radius"in $b&&(Mc=Hd=$b.radius),"width"in $b&&(Mc=$b.width),"height"in $b&&
(Hd=$b.height),"channels"in $b&&(qd=$b.channels,qe=!0));Mb.width=Mc|0;Mb.height=Hd|0;Mb.channels=qd|0;Mc=!1;"format"in $b&&(Mc=$b.format,Hd=Mb.internalformat=te[Mc],Mb.format=bf[Hd],Mc in Ne&&!("type"in $b)&&(Mb.type=Ne[Mc]),Mc in qf&&(Mb.compressed=!0),Mc=!0);!qe&&Mc?Mb.channels=ya[Mb.format]:qe&&!Mc&&Mb.channels!==La[Mb.format]&&(Mb.format=Mb.internalformat=La[Mb.channels])}}function zc(Mb){kb.pixelStorei(37440,Mb.flipY);kb.pixelStorei(37441,Mb.premultiplyAlpha);kb.pixelStorei(37443,Mb.colorSpace);
kb.pixelStorei(3317,Mb.unpackAlignment)}function Wb(){Ib.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function Ub(Mb,$b){var Mc=null;O($b)?Mc=$b:$b&&(pc(Mb,$b),"x"in $b&&(Mb.xOffset=$b.x|0),"y"in $b&&(Mb.yOffset=$b.y|0),O($b.data)&&(Mc=$b.data));if($b.copy){$b=Qc.viewportWidth;var Hd=Qc.viewportHeight;Mb.width=Mb.width||$b-Mb.xOffset;Mb.height=Mb.height||Hd-Mb.yOffset;Mb.needsCopy=!0}else if(!Mc)Mb.width=Mb.width||1,Mb.height=Mb.height||
1,Mb.channels=Mb.channels||4;else if(Xa(Mc))Mb.channels=Mb.channels||4,Mb.data=Mc,"type"in $b||5121!==Mb.type||(Mb.type=sb[Object.prototype.toString.call(Mc)]|0);else if(F(Mc)){Mb.channels=Mb.channels||4;$b=Mc;Hd=$b.length;switch(Mb.type){case 5121:case 5123:case 5125:case 5126:Hd=za.allocType(Mb.type,Hd);Hd.set($b);Mb.data=Hd;break;case 36193:Mb.data=C($b)}Mb.alignment=1;Mb.needsFree=!0}else if(q(Mc)){$b=Mc.data;Array.isArray($b)||5121!==Mb.type||(Mb.type=sb[Object.prototype.toString.call($b)]|0);
Hd=Mc.shape;var qd=Mc.stride,qe,Id;3===Hd.length?(qe=Hd[2],Id=qd[2]):Id=qe=1;var ue=Hd[0];var Be=Hd[1];Hd=qd[0];qd=qd[1];Mb.alignment=1;Mb.width=ue;Mb.height=Be;Mb.channels=qe;Mb.format=Mb.internalformat=La[qe];Mb.needsFree=!0;ue=Id;Mc=Mc.offset;qe=Mb.width;Id=Mb.height;Be=Mb.channels;for(var oe=za.allocType(36193===Mb.type?5126:Mb.type,qe*Id*Be),zb=0,qc=0;qc<Id;++qc)for(var Yb=0;Yb<qe;++Yb)for(var Bc=0;Bc<Be;++Bc)oe[zb++]=$b[Hd*Yb+qd*qc+ue*Bc+Mc];I(Mb,oe)}else if(K(Mc)===Aa||K(Mc)===Ka||K(Mc)===
Ta)K(Mc)===Aa||K(Mc)===Ka?Mb.element=Mc:Mb.element=Mc.canvas,Mb.width=Mb.element.width,Mb.height=Mb.element.height,Mb.channels=4;else if(K(Mc)===bb)Mb.element=Mc,Mb.width=Mc.width,Mb.height=Mc.height,Mb.channels=4;else if(K(Mc)===cb)Mb.element=Mc,Mb.width=Mc.naturalWidth,Mb.height=Mc.naturalHeight,Mb.channels=4;else if(K(Mc)===Eb)Mb.element=Mc,Mb.width=Mc.videoWidth,Mb.height=Mc.videoHeight,Mb.channels=4;else if(J(Mc)){$b=Mb.width||Mc[0].length;Hd=Mb.height||Mc.length;qd=Mb.channels;qd=v(Mc[0][0])?
qd||Mc[0][0].length:qd||1;ue=gb.shape(Mc);qe=1;for(Id=0;Id<ue.length;++Id)qe*=ue[Id];qe=za.allocType(36193===Mb.type?5126:Mb.type,qe);gb.flatten(Mc,ue,"",qe);I(Mb,qe);Mb.alignment=1;Mb.width=$b;Mb.height=Hd;Mb.channels=qd;Mb.format=Mb.internalformat=La[qd];Mb.needsFree=!0}}function yb(Mb,$b,Mc,Hd,qd){var qe=Mb.element,Id=Mb.data,ue=Mb.internalformat,Be=Mb.format,oe=Mb.type,zb=Mb.width,qc=Mb.height;zc(Mb);qe?kb.texSubImage2D($b,qd,Mc,Hd,Be,oe,qe):Mb.compressed?kb.compressedTexSubImage2D($b,qd,Mc,Hd,
ue,zb,qc,Id):Mb.needsCopy?(Ec(),kb.copyTexSubImage2D($b,qd,Mc,Hd,Mb.xOffset,Mb.yOffset,zb,qc)):kb.texSubImage2D($b,qd,Mc,Hd,zb,qc,Be,oe,Id)}function ac(){return Qe.pop()||new Wb}function Vb(Mb){Mb.needsFree&&za.freeType(Mb.data);Wb.call(Mb);Qe.push(Mb)}function mc(){Ib.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=Array(16)}function tc(Mb,$b,Mc){var Hd=Mb.images[0]=ac();Mb.mipmask=1;Hd.width=Mb.width=$b;Hd.height=Mb.height=Mc;Hd.channels=Mb.channels=4}function Uc(Mb,
$b){if(O($b)){var Mc=Mb.images[0]=ac();sc(Mc,Mb);Ub(Mc,$b);Mb.mipmask=1}else if(pc(Mb,$b),Array.isArray($b.mipmap)){$b=$b.mipmap;for(var Hd=0;Hd<$b.length;++Hd)Mc=Mb.images[Hd]=ac(),sc(Mc,Mb),Mc.width>>=Hd,Mc.height>>=Hd,Ub(Mc,$b[Hd]),Mb.mipmask|=1<<Hd}else Mc=Mb.images[0]=ac(),sc(Mc,Mb),Ub(Mc,$b),Mb.mipmask=1;sc(Mb,Mb.images[0])}function kd(Mb,$b){Mb=Mb.images;for(var Mc=0;Mc<Mb.length&&Mb[Mc];++Mc){var Hd=Mb[Mc],qd=$b,qe=Mc,Id=Hd.element,ue=Hd.data,Be=Hd.internalformat,oe=Hd.format,zb=Hd.type,qc=
Hd.width,Yb=Hd.height;zc(Hd);Id?kb.texImage2D(qd,qe,oe,oe,zb,Id):Hd.compressed?kb.compressedTexImage2D(qd,qe,Be,qc,Yb,0,ue):Hd.needsCopy?(Ec(),kb.copyTexImage2D(qd,qe,oe,Hd.xOffset,Hd.yOffset,qc,Yb,0)):kb.texImage2D(qd,qe,oe,qc,Yb,0,oe,zb,ue||null)}}function Bd(){var Mb=He.pop()||new mc;Ib.call(Mb);for(var $b=Mb.mipmask=0;16>$b;++$b)Mb.images[$b]=null;return Mb}function Fd(Mb){for(var $b=Mb.images,Mc=0;Mc<$b.length;++Mc)$b[Mc]&&Vb($b[Mc]),$b[Mc]=null;He.push(Mb)}function yd(){this.magFilter=this.minFilter=
9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function Lc(Mb,$b){"min"in $b&&(Mb.minFilter=Wd[$b.min],0<=Ma.indexOf(Mb.minFilter)&&!("faces"in $b)&&(Mb.genMipmaps=!0));"mag"in $b&&(Mb.magFilter=Rd[$b.mag]);var Mc=Mb.wrapS,Hd=Mb.wrapT;if("wrap"in $b){var qd=$b.wrap;"string"===typeof qd?Mc=Hd=Nd[qd]:Array.isArray(qd)&&(Mc=Nd[qd[0]],Hd=Nd[qd[1]])}else"wrapS"in $b&&(Mc=Nd[$b.wrapS]),"wrapT"in $b&&(Hd=Nd[$b.wrapT]);Mb.wrapS=Mc;Mb.wrapT=Hd;"anisotropic"in $b&&
(Mb.anisotropic=$b.anisotropic);if("mipmap"in $b){Mc=!1;switch(typeof $b.mipmap){case "string":Mb.mipmapHint=id[$b.mipmap];Mc=Mb.genMipmaps=!0;break;case "boolean":Mc=Mb.genMipmaps=$b.mipmap;break;case "object":Mb.genMipmaps=!1,Mc=!0}!Mc||"min"in $b||(Mb.minFilter=9984)}}function cd(Mb,$b){kb.texParameteri($b,10241,Mb.minFilter);kb.texParameteri($b,10240,Mb.magFilter);kb.texParameteri($b,10242,Mb.wrapS);kb.texParameteri($b,10243,Mb.wrapT);Qb.ext_texture_filter_anisotropic&&kb.texParameteri($b,34046,
Mb.anisotropic);Mb.genMipmaps&&(kb.hint(33170,Mb.mipmapHint),kb.generateMipmap($b))}function Nc(Mb){Ib.call(this);this.mipmask=0;this.internalformat=6408;this.id=$e++;this.refCount=1;this.target=Mb;this.texture=kb.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new yd;tb.profile&&(this.stats={size:0})}function Xc(Mb){kb.activeTexture(33984);kb.bindTexture(Mb.target,Mb.texture)}function Zc(){var Mb=Gd[0];Mb?kb.bindTexture(Mb.target,Mb.texture):kb.bindTexture(3553,null)}function Sc(Mb){var $b=
Mb.texture,Mc=Mb.unit,Hd=Mb.target;0<=Mc&&(kb.activeTexture(33984+Mc),kb.bindTexture(Hd,null),Gd[Mc]=null);kb.deleteTexture($b);Mb.texture=null;Mb.params=null;Mb.pixels=null;Mb.refCount=0;delete df[Mb.id];Tc.textureCount--}var id={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Nd={repeat:10497,clamp:33071,mirror:33648},Rd={nearest:9728,linear:9729},Wd=la({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},Rd),Se=
{none:0,browser:37444},Ne={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},te={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},qf={};Qb.ext_srgb&&(te.srgb=35904,te.srgba=35906);Qb.oes_texture_float&&(Ne.float32=Ne["float"]=5126);Qb.oes_texture_half_float&&(Ne.float16=Ne["half float"]=36193);Qb.webgl_depth_texture&&(la(te,{depth:6402,"depth stencil":34041}),la(Ne,{uint16:5123,uint32:5125,"depth stencil":34042}));Qb.webgl_compressed_texture_s3tc&&
la(qf,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});Qb.webgl_compressed_texture_atc&&la(qf,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});Qb.webgl_compressed_texture_pvrtc&&la(qf,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});Qb.webgl_compressed_texture_etc1&&(qf["rgb etc1"]=36196);var sf=Array.prototype.slice.call(kb.getParameter(34467));Object.keys(qf).forEach(function(Mb){var $b=
qf[Mb];0<=sf.indexOf($b)&&(te[Mb]=$b)});var of=Object.keys(te);dc.textureFormats=of;var vf=[];Object.keys(te).forEach(function(Mb){vf[te[Mb]]=Mb});var Bf=[];Object.keys(Ne).forEach(function(Mb){Bf[Ne[Mb]]=Mb});var Sd=[];Object.keys(Rd).forEach(function(Mb){Sd[Rd[Mb]]=Mb});var De=[];Object.keys(Wd).forEach(function(Mb){De[Wd[Mb]]=Mb});var hf=[];Object.keys(Nd).forEach(function(Mb){hf[Nd[Mb]]=Mb});var bf=of.reduce(function(Mb,$b){var Mc=te[$b];6409===Mc||6406===Mc||6409===Mc||6410===Mc||6402===Mc||
34041===Mc||Qb.ext_srgb&&(35904===Mc||35906===Mc)?Mb[Mc]=Mc:32855===Mc||0<=$b.indexOf("rgba")?Mb[Mc]=6408:Mb[Mc]=6407;return Mb},{}),Qe=[],He=[],$e=0,df={},Rc=dc.maxTextureUnits,Gd=Array(Rc).map(function(){return null});la(Nc.prototype,{bind:function(){this.bindCount+=1;var Mb=this.unit;if(0>Mb){for(var $b=0;$b<Rc;++$b){var Mc=Gd[$b];if(Mc){if(0<Mc.bindCount)continue;Mc.unit=-1}Gd[$b]=this;Mb=$b;break}tb.profile&&Tc.maxTextureUnits<Mb+1&&(Tc.maxTextureUnits=Mb+1);this.unit=Mb;kb.activeTexture(33984+
Mb);kb.bindTexture(this.target,this.texture)}return Mb},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&Sc(this)}});tb.profile&&(Tc.getTotalTextureSize=function(){var Mb=0;Object.keys(df).forEach(function($b){Mb+=df[$b].stats.size});return Mb});return{create2D:function(Mb,$b){function Mc(qd,qe){var Id=Hd.texInfo;yd.call(Id);var ue=Bd();"number"===typeof qd?"number"===typeof qe?tc(ue,qd|0,qe|0):tc(ue,qd|0,qd|0):qd?(Lc(Id,qd),Uc(ue,qd)):tc(ue,1,1);Id.genMipmaps&&(ue.mipmask=
(ue.width<<1)-1);Hd.mipmask=ue.mipmask;sc(Hd,ue);Hd.internalformat=ue.internalformat;Mc.width=ue.width;Mc.height=ue.height;Xc(Hd);kd(ue,3553);cd(Id,3553);Zc();Fd(ue);tb.profile&&(Hd.stats.size=L(Hd.internalformat,Hd.type,ue.width,ue.height,Id.genMipmaps,!1));Mc.format=vf[Hd.internalformat];Mc.type=Bf[Hd.type];Mc.mag=Sd[Id.magFilter];Mc.min=De[Id.minFilter];Mc.wrapS=hf[Id.wrapS];Mc.wrapT=hf[Id.wrapT];return Mc}var Hd=new Nc(3553);df[Hd.id]=Hd;Tc.textureCount++;Mc(Mb,$b);Mc.subimage=function(qd,qe,
Id,ue){qe|=0;Id|=0;ue|=0;var Be=ac();sc(Be,Hd);Be.width=0;Be.height=0;Ub(Be,qd);Be.width=Be.width||(Hd.width>>ue)-qe;Be.height=Be.height||(Hd.height>>ue)-Id;Xc(Hd);yb(Be,3553,qe,Id,ue);Zc();Vb(Be);return Mc};Mc.resize=function(qd,qe){qd|=0;qe=qe|0||qd;if(qd===Hd.width&&qe===Hd.height)return Mc;Mc.width=Hd.width=qd;Mc.height=Hd.height=qe;Xc(Hd);for(var Id=0;Hd.mipmask>>Id;++Id){var ue=qd>>Id,Be=qe>>Id;if(!ue||!Be)break;kb.texImage2D(3553,Id,Hd.format,ue,Be,0,Hd.format,Hd.type,null)}Zc();tb.profile&&
(Hd.stats.size=L(Hd.internalformat,Hd.type,qd,qe,!1,!1));return Mc};Mc._reglType="texture2d";Mc._texture=Hd;tb.profile&&(Mc.stats=Hd.stats);Mc.destroy=function(){Hd.decRef()};return Mc},createCube:function(Mb,$b,Mc,Hd,qd,qe){function Id(oe,zb,qc,Yb,Bc,bd){var ed,Vc=ue.texInfo;yd.call(Vc);for(ed=0;6>ed;++ed)Be[ed]=Bd();if("number"===typeof oe||!oe)for(oe=oe|0||1,ed=0;6>ed;++ed)tc(Be[ed],oe,oe);else if("object"===typeof oe)if(zb)Uc(Be[0],oe),Uc(Be[1],zb),Uc(Be[2],qc),Uc(Be[3],Yb),Uc(Be[4],Bc),Uc(Be[5],
bd);else if(Lc(Vc,oe),pc(ue,oe),"faces"in oe)for(oe=oe.faces,ed=0;6>ed;++ed)sc(Be[ed],ue),Uc(Be[ed],oe[ed]);else for(ed=0;6>ed;++ed)Uc(Be[ed],oe);sc(ue,Be[0]);ue.mipmask=Vc.genMipmaps?(Be[0].width<<1)-1:Be[0].mipmask;ue.internalformat=Be[0].internalformat;Id.width=Be[0].width;Id.height=Be[0].height;Xc(ue);for(ed=0;6>ed;++ed)kd(Be[ed],34069+ed);cd(Vc,34067);Zc();tb.profile&&(ue.stats.size=L(ue.internalformat,ue.type,Id.width,Id.height,Vc.genMipmaps,!0));Id.format=vf[ue.internalformat];Id.type=Bf[ue.type];
Id.mag=Sd[Vc.magFilter];Id.min=De[Vc.minFilter];Id.wrapS=hf[Vc.wrapS];Id.wrapT=hf[Vc.wrapT];for(ed=0;6>ed;++ed)Fd(Be[ed]);return Id}var ue=new Nc(34067);df[ue.id]=ue;Tc.cubeCount++;var Be=Array(6);Id(Mb,$b,Mc,Hd,qd,qe);Id.subimage=function(oe,zb,qc,Yb,Bc){qc|=0;Yb|=0;Bc|=0;var bd=ac();sc(bd,ue);bd.width=0;bd.height=0;Ub(bd,zb);bd.width=bd.width||(ue.width>>Bc)-qc;bd.height=bd.height||(ue.height>>Bc)-Yb;Xc(ue);yb(bd,34069+oe,qc,Yb,Bc);Zc();Vb(bd);return Id};Id.resize=function(oe){oe|=0;if(oe!==ue.width){Id.width=
ue.width=oe;Id.height=ue.height=oe;Xc(ue);for(var zb=0;6>zb;++zb)for(var qc=0;ue.mipmask>>qc;++qc)kb.texImage2D(34069+zb,qc,ue.format,oe>>qc,oe>>qc,0,ue.format,ue.type,null);Zc();tb.profile&&(ue.stats.size=L(ue.internalformat,ue.type,Id.width,Id.height,!1,!0));return Id}};Id._reglType="textureCube";Id._texture=ue;tb.profile&&(Id.stats=ue.stats);Id.destroy=function(){ue.decRef()};return Id},clear:function(){for(var Mb=0;Mb<Rc;++Mb)kb.activeTexture(33984+Mb),kb.bindTexture(3553,null),Gd[Mb]=null;$a(df).forEach(Sc);
Tc.cubeCount=0;Tc.textureCount=0},getTexture:function(Mb){return null},restore:function(){for(var Mb=0;Mb<Rc;++Mb){var $b=Gd[Mb];$b&&($b.bindCount=0,$b.unit=-1,Gd[Mb]=null)}$a(df).forEach(function(Mc){Mc.texture=kb.createTexture();kb.bindTexture(Mc.target,Mc.texture);for(var Hd=0;32>Hd;++Hd)if(0!==(Mc.mipmask&1<<Hd))if(3553===Mc.target)kb.texImage2D(3553,Hd,Mc.internalformat,Mc.width>>Hd,Mc.height>>Hd,0,Mc.internalformat,Mc.type,null);else for(var qd=0;6>qd;++qd)kb.texImage2D(34069+qd,Hd,Mc.internalformat,
Mc.width>>Hd,Mc.height>>Hd,0,Mc.internalformat,Mc.type,null);cd(Mc.texInfo,Mc.target)})}}}function M(kb,Qb,dc,Ec,Qc,Tc){function tb(Nc,Xc,Zc){this.target=Nc;this.texture=Xc;this.renderbuffer=Zc;var Sc=Nc=0;Xc?(Nc=Xc.width,Sc=Xc.height):Zc&&(Nc=Zc.width,Sc=Zc.height);this.width=Nc;this.height=Sc}function Ib(Nc){Nc&&(Nc.texture&&Nc.texture._texture.decRef(),Nc.renderbuffer&&Nc.renderbuffer._renderbuffer.decRef())}function sc(Nc,Xc,Zc){Nc&&(Nc.texture?Nc.texture._texture.refCount+=1:Nc.renderbuffer._renderbuffer.refCount+=
1)}function pc(Nc,Xc){Xc&&(Xc.texture?kb.framebufferTexture2D(36160,Nc,Xc.target,Xc.texture._texture.texture,0):kb.framebufferRenderbuffer(36160,Nc,36161,Xc.renderbuffer._renderbuffer.renderbuffer))}function zc(Nc){var Xc=3553,Zc=null,Sc=null,id=Nc;"object"===typeof Nc&&(id=Nc.data,"target"in Nc&&(Xc=Nc.target|0));Nc=id._reglType;"texture2d"===Nc?Zc=id:"textureCube"===Nc?Zc=id:"renderbuffer"===Nc&&(Sc=id,Xc=36161);return new tb(Xc,Zc,Sc)}function Wb(Nc,Xc,Zc,Sc,id){if(Zc)return Nc=Ec.create2D({width:Nc,
height:Xc,format:Sc,type:id}),Nc._texture.refCount=0,new tb(3553,Nc,null);Nc=Qc.create({width:Nc,height:Xc,format:Sc});Nc._renderbuffer.refCount=0;return new tb(36161,null,Nc)}function Ub(Nc){return Nc&&(Nc.texture||Nc.renderbuffer)}function yb(Nc,Xc,Zc){Nc&&(Nc.texture?Nc.texture.resize(Xc,Zc):Nc.renderbuffer&&Nc.renderbuffer.resize(Xc,Zc),Nc.width=Xc,Nc.height=Zc)}function ac(){this.id=Lc++;cd[this.id]=this;this.framebuffer=kb.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];
this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function Vb(Nc){Nc.colorAttachments.forEach(Ib);Ib(Nc.depthAttachment);Ib(Nc.stencilAttachment);Ib(Nc.depthStencilAttachment)}function mc(Nc){kb.deleteFramebuffer(Nc.framebuffer);Nc.framebuffer=null;Tc.framebufferCount--;delete cd[Nc.id]}function tc(Nc){var Xc;kb.bindFramebuffer(36160,Nc.framebuffer);var Zc=Nc.colorAttachments;for(Xc=0;Xc<Zc.length;++Xc)pc(36064+Xc,Zc[Xc]);for(Xc=Zc.length;Xc<dc.maxColorAttachments;++Xc)kb.framebufferTexture2D(36160,
36064+Xc,3553,null,0);kb.framebufferTexture2D(36160,33306,3553,null,0);kb.framebufferTexture2D(36160,36096,3553,null,0);kb.framebufferTexture2D(36160,36128,3553,null,0);pc(36096,Nc.depthAttachment);pc(36128,Nc.stencilAttachment);pc(33306,Nc.depthStencilAttachment);kb.checkFramebufferStatus(36160);kb.isContextLost();kb.bindFramebuffer(36160,kd.next?kd.next.framebuffer:null);kd.cur=kd.next;kb.getError()}function Uc(Nc,Xc){function Zc(id,Nd){var Rd=0,Wd=0,Se=!0,Ne=!0;var te=null;var qf=!0,sf="rgba",
of="uint8",vf=1,Bf=null,Sd=null,De=null,hf=!1;if("number"===typeof id)Rd=id|0,Wd=Nd|0||Rd;else if(id){"shape"in id?(Wd=id.shape,Rd=Wd[0],Wd=Wd[1]):("radius"in id&&(Rd=Wd=id.radius),"width"in id&&(Rd=id.width),"height"in id&&(Wd=id.height));if("color"in id||"colors"in id)te=id.color||id.colors,Array.isArray(te);if(!te){"colorCount"in id&&(vf=id.colorCount|0);"colorTexture"in id&&(qf=!!id.colorTexture,sf="rgba4");if("colorType"in id&&(of=id.colorType,!qf))if("half float"===of||"float16"===of)sf="rgba16f";
else if("float"===of||"float32"===of)sf="rgba32f";"colorFormat"in id&&(sf=id.colorFormat,0<=Bd.indexOf(sf)?qf=!0:0<=Fd.indexOf(sf)&&(qf=!1))}if("depthTexture"in id||"depthStencilTexture"in id)hf=!(!id.depthTexture&&!id.depthStencilTexture);"depth"in id&&("boolean"===typeof id.depth?Se=id.depth:(Bf=id.depth,Ne=!1));"stencil"in id&&("boolean"===typeof id.stencil?Ne=id.stencil:(Sd=id.stencil,Se=!1));"depthStencil"in id&&("boolean"===typeof id.depthStencil?Se=Ne=id.depthStencil:(De=id.depthStencil,Ne=
Se=!1))}else Rd=Wd=1;var bf=Nd=null,Qe=null;if(Array.isArray(te))id=te.map(zc);else if(te)id=[zc(te)];else for(id=Array(vf),te=0;te<vf;++te)id[te]=Wb(Rd,Wd,qf,sf,of);Rd=Rd||id[0].width;Wd=Wd||id[0].height;Bf?Nd=zc(Bf):Se&&!Ne&&(Nd=Wb(Rd,Wd,hf,"depth","uint32"));Sd?bf=zc(Sd):Ne&&!Se&&(bf=Wb(Rd,Wd,!1,"stencil","uint8"));De?Qe=zc(De):!Bf&&!Sd&&Ne&&Se&&(Qe=Wb(Rd,Wd,hf,"depth stencil","depth stencil"));Se=null;for(te=0;te<id.length;++te)sc(id[te],Rd,Wd),id[te]&&id[te].texture&&(Ne=xc[id[te].texture._texture.format]*
Ic[id[te].texture._texture.type],null===Se&&(Se=Ne));sc(Nd,Rd,Wd);sc(bf,Rd,Wd);sc(Qe,Rd,Wd);Vb(Sc);Sc.width=Rd;Sc.height=Wd;Sc.colorAttachments=id;Sc.depthAttachment=Nd;Sc.stencilAttachment=bf;Sc.depthStencilAttachment=Qe;Zc.color=id.map(Ub);Zc.depth=Ub(Nd);Zc.stencil=Ub(bf);Zc.depthStencil=Ub(Qe);Zc.width=Sc.width;Zc.height=Sc.height;tc(Sc);return Zc}var Sc=new ac;Tc.framebufferCount++;Zc(Nc,Xc);return la(Zc,{resize:function(id,Nd){id=Math.max(id|0,1);Nd=Math.max(Nd|0||id,1);if(id===Sc.width&&Nd===
Sc.height)return Zc;for(var Rd=Sc.colorAttachments,Wd=0;Wd<Rd.length;++Wd)yb(Rd[Wd],id,Nd);yb(Sc.depthAttachment,id,Nd);yb(Sc.stencilAttachment,id,Nd);yb(Sc.depthStencilAttachment,id,Nd);Sc.width=Zc.width=id;Sc.height=Zc.height=Nd;tc(Sc);return Zc},_reglType:"framebuffer",_framebuffer:Sc,destroy:function(){mc(Sc);Vb(Sc)},use:function(id){kd.setFBO({framebuffer:Zc},id)}})}var kd={cur:null,next:null,dirty:!1,setFBO:null},Bd=["rgba"],Fd=["rgba4","rgb565","rgb5 a1"];Qb.ext_srgb&&Fd.push("srgba");Qb.ext_color_buffer_half_float&&
Fd.push("rgba16f","rgb16f");Qb.webgl_color_buffer_float&&Fd.push("rgba32f");var yd=["uint8"];Qb.oes_texture_half_float&&yd.push("half float","float16");Qb.oes_texture_float&&yd.push("float","float32");var Lc=0,cd={};return la(kd,{getFramebuffer:function(Nc){return"function"===typeof Nc&&"framebuffer"===Nc._reglType&&(Nc=Nc._framebuffer,Nc instanceof ac)?Nc:null},create:Uc,createCube:function(Nc){function Xc(Sc){var id={color:null},Nd=0,Rd=null;var Wd="rgba";var Se="uint8",Ne=1;if("number"===typeof Sc)Nd=
Sc|0;else if(Sc){"shape"in Sc?Nd=Sc.shape[0]:("radius"in Sc&&(Nd=Sc.radius|0),"width"in Sc?Nd=Sc.width|0:"height"in Sc&&(Nd=Sc.height|0));if("color"in Sc||"colors"in Sc)Rd=Sc.color||Sc.colors,Array.isArray(Rd);Rd||("colorCount"in Sc&&(Ne=Sc.colorCount|0),"colorType"in Sc&&(Se=Sc.colorType),"colorFormat"in Sc&&(Wd=Sc.colorFormat));"depth"in Sc&&(id.depth=Sc.depth);"stencil"in Sc&&(id.stencil=Sc.stencil);"depthStencil"in Sc&&(id.depthStencil=Sc.depthStencil)}else Nd=1;if(Rd)if(Array.isArray(Rd))for(Sc=
[],Wd=0;Wd<Rd.length;++Wd)Sc[Wd]=Rd[Wd];else Sc=[Rd];else for(Sc=Array(Ne),Rd={radius:Nd,format:Wd,type:Se},Wd=0;Wd<Ne;++Wd)Sc[Wd]=Ec.createCube(Rd);id.color=Array(Sc.length);for(Wd=0;Wd<Sc.length;++Wd)Ne=Sc[Wd],Nd=Nd||Ne.width,id.color[Wd]={target:34069,data:Sc[Wd]};for(Wd=0;6>Wd;++Wd){for(Ne=0;Ne<Sc.length;++Ne)id.color[Ne].target=34069+Wd;0<Wd&&(id.depth=Zc[0].depth,id.stencil=Zc[0].stencil,id.depthStencil=Zc[0].depthStencil);if(Zc[Wd])Zc[Wd](id);else Zc[Wd]=Uc(id)}return la(Xc,{width:Nd,height:Nd,
color:Sc})}var Zc=Array(6);Xc(Nc);return la(Xc,{faces:Zc,resize:function(Sc){var id=Sc|0;if(id===Xc.width)return Xc;var Nd=Xc.color;for(Sc=0;Sc<Nd.length;++Sc)Nd[Sc].resize(id);for(Sc=0;6>Sc;++Sc)Zc[Sc].resize(id);Xc.width=Xc.height=id;return Xc},_reglType:"framebufferCube",destroy:function(){Zc.forEach(function(Sc){Sc.destroy()})}})},clear:function(){$a(cd).forEach(mc)},restore:function(){kd.cur=null;kd.next=null;kd.dirty=!0;$a(cd).forEach(function(Nc){Nc.framebuffer=kb.createFramebuffer();tc(Nc)})}})}
function Q(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}function Z(kb,Qb,dc,Ec,Qc){function Tc(Vb){if(Vb!==ac.currentVAO){var mc=Qb.oes_vertex_array_object;Vb?mc.bindVertexArrayOES(Vb.vao):mc.bindVertexArrayOES(null);ac.currentVAO=Vb}}function tb(Vb){if(Vb!==ac.currentVAO){if(Vb)Vb.bindAttrs();else for(var mc=Qb.angle_instanced_arrays,tc=0;tc<Wb.length;++tc){var Uc=Wb[tc];Uc.buffer?(kb.enableVertexAttribArray(tc),
kb.vertexAttribPointer(tc,Uc.size,Uc.type,Uc.normalized,Uc.stride,Uc.offfset),mc&&mc.vertexAttribDivisorANGLE(tc,Uc.divisor)):(kb.disableVertexAttribArray(tc),kb.vertexAttrib4f(tc,Uc.x,Uc.y,Uc.z,Uc.w))}ac.currentVAO=Vb}}function Ib(){$a(yb).forEach(function(Vb){Vb.destroy()})}function sc(){this.id=++Ub;this.attributes=[];var Vb=Qb.oes_vertex_array_object;this.vao=Vb?Vb.createVertexArrayOES():null;yb[this.id]=this;this.buffers=[]}function pc(){Qb.oes_vertex_array_object&&$a(yb).forEach(function(Vb){Vb.refresh()})}
var zc=dc.maxAttributes,Wb=Array(zc);for(dc=0;dc<zc;++dc)Wb[dc]=new Q;var Ub=0,yb={},ac={Record:Q,scope:{},state:Wb,currentVAO:null,targetVAO:null,restore:Qb.oes_vertex_array_object?pc:function(){},createVAO:function(Vb){function mc(Uc){for(var kd=0;kd<tc.buffers.length;++kd)tc.buffers[kd].destroy();tc.buffers.length=0;kd=tc.attributes;kd.length=Uc.length;for(var Bd=0;Bd<Uc.length;++Bd){var Fd=Uc[Bd],yd=kd[Bd]=new Q;Array.isArray(Fd)||Xa(Fd)||q(Fd)?(Fd=Qc.create(Fd,34962,!1,!0),yd.buffer=Qc.getBuffer(Fd),
yd.size=yd.buffer.dimension|0,yd.normalized=!1,yd.type=yd.buffer.dtype,yd.offset=0,yd.stride=0,yd.divisor=0,yd.state=1,tc.buffers.push(Fd)):Qc.getBuffer(Fd)?(yd.buffer=Qc.getBuffer(Fd),yd.size=yd.buffer.dimension|0,yd.normalized=!1,yd.type=yd.buffer.dtype,yd.offset=0,yd.stride=0,yd.divisor=0,yd.state=1):Qc.getBuffer(Fd.buffer)?(yd.buffer=Qc.getBuffer(Fd.buffer),yd.size=(+Fd.size||yd.buffer.dimension)|0,yd.normalized=!!Fd.normalized||!1,yd.type="type"in Fd?jb[Fd.type]:yd.buffer.dtype,yd.offset=(Fd.offset||
0)|0,yd.stride=(Fd.stride||0)|0,yd.divisor=(Fd.divisor||0)|0,yd.state=1):"x"in Fd&&(yd.x=+Fd.x||0,yd.y=+Fd.y||0,yd.z=+Fd.z||0,yd.w=+Fd.w||0,yd.state=2)}tc.refresh();return mc}var tc=new sc;Ec.vaoCount+=1;mc.destroy=function(){tc.destroy()};mc._vao=tc;mc._reglType="vao";return mc(Vb)},getVAO:function(Vb){return"function"===typeof Vb&&Vb._vao?Vb._vao:null},destroyBuffer:function(Vb){for(var mc=0;mc<Wb.length;++mc){var tc=Wb[mc];tc.buffer===Vb&&(kb.disableVertexAttribArray(mc),tc.buffer=null)}},setVAO:Qb.oes_vertex_array_object?
Tc:tb,clear:Qb.oes_vertex_array_object?Ib:function(){}};sc.prototype.bindAttrs=function(){for(var Vb=Qb.angle_instanced_arrays,mc=this.attributes,tc=0;tc<mc.length;++tc){var Uc=mc[tc];Uc.buffer?(kb.enableVertexAttribArray(tc),kb.bindBuffer(34962,Uc.buffer.buffer),kb.vertexAttribPointer(tc,Uc.size,Uc.type,Uc.normalized,Uc.stride,Uc.offset),Vb&&Vb.vertexAttribDivisorANGLE(tc,Uc.divisor)):(kb.disableVertexAttribArray(tc),kb.vertexAttrib4f(tc,Uc.x,Uc.y,Uc.z,Uc.w))}for(Vb=mc.length;Vb<zc;++Vb)kb.disableVertexAttribArray(Vb)};
sc.prototype.refresh=function(){var Vb=Qb.oes_vertex_array_object;Vb&&(Vb.bindVertexArrayOES(this.vao),this.bindAttrs(),ac.currentVAO=this)};sc.prototype.destroy=function(){if(this.vao){var Vb=Qb.oes_vertex_array_object;this===ac.currentVAO&&(ac.currentVAO=null,Vb.bindVertexArrayOES(null));Vb.deleteVertexArrayOES(this.vao);this.vao=null}yb[this.id]&&(delete yb[this.id],--Ec.vaoCount)};return ac}function ca(kb,Qb,dc,Ec){function Qc(ac,Vb,mc,tc){this.name=ac;this.id=Vb;this.location=mc;this.info=tc}
function Tc(ac,Vb){for(var mc=0;mc<ac.length;++mc)if(ac[mc].id===Vb.id){ac[mc].location=Vb.location;return}ac.push(Vb)}function tb(ac,Vb,mc){mc=35632===ac?pc:zc;var tc=mc[Vb];if(!tc){var Uc=Qb.str(Vb);tc=kb.createShader(ac);kb.shaderSource(tc,Uc);kb.compileShader(tc);mc[Vb]=tc}return tc}function Ib(ac,Vb){this.id=yb++;this.fragId=ac;this.vertId=Vb;this.program=null;this.uniforms=[];this.attributes=[];Ec.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function sc(ac,Vb,mc){var tc=tb(35632,
ac.fragId);var Uc=tb(35633,ac.vertId);Vb=ac.program=kb.createProgram();kb.attachShader(Vb,tc);kb.attachShader(Vb,Uc);if(mc)for(tc=0;tc<mc.length;++tc)Uc=mc[tc],kb.bindAttribLocation(Vb,Uc[0],Uc[1]);kb.linkProgram(Vb);Uc=kb.getProgramParameter(Vb,35718);Ec.profile&&(ac.stats.uniformsCount=Uc);var kd=ac.uniforms;for(tc=0;tc<Uc;++tc)if(mc=kb.getActiveUniform(Vb,tc))if(1<mc.size)for(var Bd=0;Bd<mc.size;++Bd){var Fd=mc.name.replace("[0]","["+Bd+"]");Tc(kd,new Qc(Fd,Qb.id(Fd),kb.getUniformLocation(Vb,Fd),
mc))}else Tc(kd,new Qc(mc.name,Qb.id(mc.name),kb.getUniformLocation(Vb,mc.name),mc));Uc=kb.getProgramParameter(Vb,35721);Ec.profile&&(ac.stats.attributesCount=Uc);ac=ac.attributes;for(tc=0;tc<Uc;++tc)(mc=kb.getActiveAttrib(Vb,tc))&&Tc(ac,new Qc(mc.name,Qb.id(mc.name),kb.getAttribLocation(Vb,mc.name),mc))}var pc={},zc={},Wb={},Ub=[],yb=0;Ec.profile&&(dc.getMaxUniformsCount=function(){var ac=0;Ub.forEach(function(Vb){Vb.stats.uniformsCount>ac&&(ac=Vb.stats.uniformsCount)});return ac},dc.getMaxAttributesCount=
function(){var ac=0;Ub.forEach(function(Vb){Vb.stats.attributesCount>ac&&(ac=Vb.stats.attributesCount)});return ac});return{clear:function(){var ac=kb.deleteShader.bind(kb);$a(pc).forEach(ac);pc={};$a(zc).forEach(ac);zc={};Ub.forEach(function(Vb){kb.deleteProgram(Vb.program)});Ub.length=0;Wb={};dc.shaderCount=0},program:function(ac,Vb,mc,tc){var Uc=Wb[Vb];Uc||(Uc=Wb[Vb]={});var kd=Uc[ac];if(kd&&!tc)return kd;Vb=new Ib(Vb,ac);dc.shaderCount++;sc(Vb,mc,tc);kd||(Uc[ac]=Vb);Ub.push(Vb);return Vb},restore:function(){pc=
{};zc={};for(var ac=0;ac<Ub.length;++ac)sc(Ub[ac],null,Ub[ac].attributes.map(function(Vb){return[Vb.location,Vb.name]}))},shader:tb,frag:-1,vert:-1}}function W(kb,Qb,dc,Ec,Qc,Tc,tb){function Ib(pc){var zc=null===Qb.next?5121:Qb.next.colorAttachments[0].texture._texture.type;var Wb=0,Ub=0,yb=Ec.framebufferWidth,ac=Ec.framebufferHeight,Vb=null;Xa(pc)?Vb=pc:pc&&(Wb=pc.x|0,Ub=pc.y|0,yb=(pc.width||Ec.framebufferWidth-Wb)|0,ac=(pc.height||Ec.framebufferHeight-Ub)|0,Vb=pc.data||null);dc();pc=yb*ac*4;Vb||
(5121===zc?Vb=new Uint8Array(pc):5126===zc&&(Vb=Vb||new Float32Array(pc)));kb.pixelStorei(3333,4);kb.readPixels(Wb,Ub,yb,ac,6408,zc,Vb);return Vb}function sc(pc){var zc;Qb.setFBO({framebuffer:pc.framebuffer},function(){zc=Ib(pc)});return zc}return function(pc){return pc&&"framebuffer"in pc?sc(pc):Ib(pc)}}function T(kb){return Array.prototype.slice.call(kb)}function U(kb){return T(kb).join("")}function ha(){function kb(){var Ib=[],sc=[];return la(function(){Ib.push.apply(Ib,T(arguments))},{def:function(){var pc=
"v"+dc++;sc.push(pc);0<arguments.length&&(Ib.push(pc,"\x3d"),Ib.push.apply(Ib,T(arguments)),Ib.push(";"));return pc},toString:function(){return U([0<sc.length?"var "+sc.join(",")+";":"",U(Ib)])}})}function Qb(){function Ib(Ub,yb){pc(Ub,yb,"\x3d",sc.def(Ub,yb),";")}var sc=kb(),pc=kb(),zc=sc.toString,Wb=pc.toString;return la(function(){sc.apply(sc,T(arguments))},{def:sc.def,entry:sc,exit:pc,save:Ib,set:function(Ub,yb,ac){Ib(Ub,yb);sc(Ub,yb,"\x3d",ac,";")},toString:function(){return zc()+Wb()}})}var dc=
0,Ec=[],Qc=[],Tc=kb(),tb={};return{global:Tc,link:function(Ib){for(var sc=0;sc<Qc.length;++sc)if(Qc[sc]===Ib)return Ec[sc];sc="g"+dc++;Ec.push(sc);Qc.push(Ib);return sc},block:kb,proc:function(Ib,sc){function pc(){var yb="a"+zc.length;zc.push(yb);return yb}var zc=[];sc=sc||0;for(var Wb=0;Wb<sc;++Wb)pc();Wb=Qb();var Ub=Wb.toString;return tb[Ib]=la(Wb,{arg:pc,toString:function(){return U(["function(",zc.join(),"){",Ub(),"}"])}})},scope:Qb,cond:function(){var Ib=U(arguments),sc=Qb(),pc=Qb(),zc=sc.toString,
Wb=pc.toString;return la(sc,{then:function(){sc.apply(sc,T(arguments));return this},"else":function(){pc.apply(pc,T(arguments));return this},toString:function(){var Ub=Wb();Ub&&(Ub="else{"+Ub+"}");return U(["if(",Ib,"){",zc(),"}",Ub])}})},compile:function(){var Ib=['"use strict";',Tc,"return {"];Object.keys(tb).forEach(function(pc){Ib.push('"',pc,'":',tb[pc].toString(),",")});Ib.push("}");var sc=U(Ib).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,Ec.concat(sc)).apply(null,
Qc)}}}function Y(kb){return Array.isArray(kb)||Xa(kb)||q(kb)}function ba(kb){return kb.sort(function(Qb,dc){return"viewport"===Qb?-1:"viewport"===dc?1:Qb<dc?-1:1})}function ja(kb,Qb,dc,Ec){this.thisDep=kb;this.contextDep=Qb;this.propDep=dc;this.append=Ec}function ma(kb){return kb&&!(kb.thisDep||kb.contextDep||kb.propDep)}function ia(kb){return new ja(!1,!1,!1,kb)}function oa(kb,Qb){var dc=kb.type;return 0===dc?(dc=kb.data.length,new ja(!0,1<=dc,2<=dc,Qb)):4===dc?(dc=kb.data,new ja(dc.thisDep,dc.contextDep,
dc.propDep,Qb)):new ja(3===dc,2===dc,1===dc,Qb)}function xa(kb,Qb,dc,Ec,Qc,Tc,tb,Ib,sc,pc,zc,Wb,Ub,yb,ac){function Vb(zb){return zb.replace(".","_")}function mc(zb,qc,Yb){var Bc=Vb(zb);qd.push(zb);Hd[Bc]=Mc[Bc]=!!Yb;qe[Bc]=qc}function tc(zb,qc,Yb){var Bc=Vb(zb);qd.push(zb);Array.isArray(Yb)?(Mc[Bc]=Yb.slice(),Hd[Bc]=Yb.slice()):Mc[Bc]=Hd[Bc]=Yb;Id[Bc]=qc}function Uc(){var zb=ha(),qc=zb.link,Yb=zb.global;zb.id=oe++;zb.batchId="0";var Bc=qc(ue),bd=zb.shared={props:"a0"};Object.keys(ue).forEach(function(vc){bd[vc]=
Yb.def(Bc,".",vc)});var ed=zb.next={},Vc=zb.current={};Object.keys(Id).forEach(function(vc){Array.isArray(Mc[vc])&&(ed[vc]=Yb.def(bd.next,".",vc),Vc[vc]=Yb.def(bd.current,".",vc))});var Pc=zb.constants={};Object.keys(Be).forEach(function(vc){Pc[vc]=Yb.def(JSON.stringify(Be[vc]))});zb.invoke=function(vc,oc){switch(oc.type){case 0:var vd=["this",bd.context,bd.props,zb.batchId];return vc.def(qc(oc.data),".call(",vd.slice(0,Math.max(oc.data.length+1,4)),")");case 1:return vc.def(bd.props,oc.data);case 2:return vc.def(bd.context,
oc.data);case 3:return vc.def("this",oc.data);case 4:return oc.data.append(zb,vc),oc.data.ref}};zb.attribCache={};var yc={};zb.scopeAttrib=function(vc){vc=Qb.id(vc);if(vc in yc)return yc[vc];var oc=pc.scope[vc];oc||(oc=pc.scope[vc]=new Rc);return yc[vc]=qc(oc)};return zb}function kd(zb){var qc=zb["static"];zb=zb.dynamic;if("profile"in qc){var Yb=!!qc.profile;var Bc=ia(function(ed,Vc){return Yb});Bc.enable=Yb}else if("profile"in zb){var bd=zb.profile;Bc=oa(bd,function(ed,Vc){return ed.invoke(Vc,bd)})}return Bc}
function Bd(zb,qc){qc=zb["static"];zb=zb.dynamic;if("framebuffer"in qc){var Yb=qc.framebuffer;return Yb?(Yb=Ib.getFramebuffer(Yb),ia(function(bd,ed){var Vc=bd.link(Yb);bd=bd.shared;ed.set(bd.framebuffer,".next",Vc);bd=bd.context;ed.set(bd,".framebufferWidth",Vc+".width");ed.set(bd,".framebufferHeight",Vc+".height");return Vc})):ia(function(bd,ed){bd=bd.shared;ed.set(bd.framebuffer,".next","null");bd=bd.context;ed.set(bd,".framebufferWidth",bd+".drawingBufferWidth");ed.set(bd,".framebufferHeight",
bd+".drawingBufferHeight");return"null"})}if("framebuffer"in zb){var Bc=zb.framebuffer;return oa(Bc,function(bd,ed){var Vc=bd.invoke(ed,Bc);bd=bd.shared;var Pc=bd.framebuffer;Vc=ed.def(Pc,".getFramebuffer(",Vc,")");ed.set(Pc,".next",Vc);bd=bd.context;ed.set(bd,".framebufferWidth",Vc+"?"+Vc+".width:"+bd+".drawingBufferWidth");ed.set(bd,".framebufferHeight",Vc+"?"+Vc+".height:"+bd+".drawingBufferHeight");return Vc})}return null}function Fd(zb,qc,Yb){function Bc(Pc){if(Pc in bd){var yc=bd[Pc];Pc=!0;
var vc=yc.x|0,oc=yc.y|0,vd,Qd;"width"in yc?vd=yc.width|0:Pc=!1;"height"in yc?Qd=yc.height|0:Pc=!1;return new ja(!Pc&&qc&&qc.thisDep,!Pc&&qc&&qc.contextDep,!Pc&&qc&&qc.propDep,function(xe,Td){xe=xe.shared.context;var Oe=vd;"width"in yc||(Oe=Td.def(xe,".","framebufferWidth","-",vc));var Ve=Qd;"height"in yc||(Ve=Td.def(xe,".","framebufferHeight","-",oc));return[vc,oc,Oe,Ve]})}if(Pc in ed){var Yd=ed[Pc];Pc=oa(Yd,function(xe,Td){var Oe=xe.invoke(Td,Yd);xe=xe.shared.context;var Ve=Td.def(Oe,".x|0"),wf=
Td.def(Oe,".y|0"),Me=Td.def('"width" in ',Oe,"?",Oe,".width|0:","(",xe,".","framebufferWidth","-",Ve,")");Oe=Td.def('"height" in ',Oe,"?",Oe,".height|0:","(",xe,".","framebufferHeight","-",wf,")");return[Ve,wf,Me,Oe]});qc&&(Pc.thisDep=Pc.thisDep||qc.thisDep,Pc.contextDep=Pc.contextDep||qc.contextDep,Pc.propDep=Pc.propDep||qc.propDep);return Pc}return qc?new ja(qc.thisDep,qc.contextDep,qc.propDep,function(xe,Td){xe=xe.shared.context;return[0,0,Td.def(xe,".","framebufferWidth"),Td.def(xe,".","framebufferHeight")]}):
null}var bd=zb["static"],ed=zb.dynamic;if(zb=Bc("viewport")){var Vc=zb;zb=new ja(zb.thisDep,zb.contextDep,zb.propDep,function(Pc,yc){var vc=Vc.append(Pc,yc);Pc=Pc.shared.context;yc.set(Pc,".viewportWidth",vc[2]);yc.set(Pc,".viewportHeight",vc[3]);return vc})}return{viewport:zb,scissor_box:Bc("scissor.box")}}function yd(zb,qc){zb=zb["static"];if("string"===typeof zb.frag&&"string"===typeof zb.vert){if(0<Object.keys(qc.dynamic).length)return null;zb=qc["static"];qc=Object.keys(zb);if(0<qc.length&&"number"===
typeof zb[qc[0]]){for(var Yb=[],Bc=0;Bc<qc.length;++Bc)Yb.push([zb[qc[Bc]]|0,qc[Bc]]);return Yb}}return null}function Lc(zb,qc,Yb){function Bc(vc){if(vc in bd){var oc=Qb.id(bd[vc]);vc=ia(function(){return oc});vc.id=oc;return vc}if(vc in ed){var vd=ed[vc];return oa(vd,function(Qd,Yd){var xe=Qd.invoke(Yd,vd);return Yd.def(Qd.shared.strings,".id(",xe,")")})}return null}var bd=zb["static"],ed=zb.dynamic,Vc=Bc("frag"),Pc=Bc("vert"),yc=null;ma(Vc)&&ma(Pc)?(yc=zc.program(Pc.id,Vc.id,null,Yb),zb=ia(function(vc,
oc){return vc.link(yc)})):zb=new ja(Vc&&Vc.thisDep||Pc&&Pc.thisDep,Vc&&Vc.contextDep||Pc&&Pc.contextDep,Vc&&Vc.propDep||Pc&&Pc.propDep,function(vc,oc){var vd=vc.shared.shader;var Qd=Vc?Vc.append(vc,oc):oc.def(vd,".","frag");vc=Pc?Pc.append(vc,oc):oc.def(vd,".","vert");return oc.def(vd+".program("+vc+","+Qd+")")});return{frag:Vc,vert:Pc,progVar:zb,program:yc}}function cd(zb,qc){function Yb(Pc,yc){if(Pc in Bc){var vc=Bc[Pc]|0;return ia(function(vd,Qd){yc&&(vd.OFFSET=vc);return vc})}if(Pc in bd){var oc=
bd[Pc];return oa(oc,function(vd,Qd){Qd=vd.invoke(Qd,oc);yc&&(vd.OFFSET=Qd);return Qd})}return yc&&ed?ia(function(vd,Qd){vd.OFFSET="0";return 0}):null}var Bc=zb["static"],bd=zb.dynamic,ed=function(){if("elements"in Bc){var Pc=Bc.elements;Y(Pc)?Pc=Tc.getElements(Tc.create(Pc,!0)):Pc&&(Pc=Tc.getElements(Pc));var yc=ia(function(oc,vd){return Pc?(vd=oc.link(Pc),oc.ELEMENTS=vd):oc.ELEMENTS=null});yc.value=Pc;return yc}if("elements"in bd){var vc=bd.elements;return oa(vc,function(oc,vd){var Qd=oc.shared,
Yd=Qd.isBufferArgs;Qd=Qd.elements;var xe=oc.invoke(vd,vc),Td=vd.def("null");Yd=vd.def(Yd,"(",xe,")");xe=oc.cond(Yd).then(Td,"\x3d",Qd,".createStream(",xe,");")["else"](Td,"\x3d",Qd,".getElements(",xe,");");vd.entry(xe);vd.exit(oc.cond(Yd).then(Qd,".destroyStream(",Td,");"));return oc.ELEMENTS=Td})}return null}(),Vc=Yb("offset",!0);return{elements:ed,primitive:function(){if("primitive"in Bc){var Pc=Bc.primitive;return ia(function(vc,oc){return wb[Pc]})}if("primitive"in bd){var yc=bd.primitive;return oa(yc,
function(vc,oc){var vd=vc.constants.primTypes;vc=vc.invoke(oc,yc);return oc.def(vd,"[",vc,"]")})}return ed?ma(ed)?ed.value?ia(function(vc,oc){return oc.def(vc.ELEMENTS,".primType")}):ia(function(){return 4}):new ja(ed.thisDep,ed.contextDep,ed.propDep,function(vc,oc){vc=vc.ELEMENTS;return oc.def(vc,"?",vc,".primType:",4)}):null}(),count:function(){if("count"in Bc){var Pc=Bc.count|0;return ia(function(){return Pc})}if("count"in bd){var yc=bd.count;return oa(yc,function(vc,oc){return vc.invoke(oc,yc)})}return ed?
ma(ed)?ed?Vc?new ja(Vc.thisDep,Vc.contextDep,Vc.propDep,function(vc,oc){return oc.def(vc.ELEMENTS,".vertCount-",vc.OFFSET)}):ia(function(vc,oc){return oc.def(vc.ELEMENTS,".vertCount")}):ia(function(){return-1}):new ja(ed.thisDep||Vc.thisDep,ed.contextDep||Vc.contextDep,ed.propDep||Vc.propDep,function(vc,oc){var vd=vc.ELEMENTS;return vc.OFFSET?oc.def(vd,"?",vd,".vertCount-",vc.OFFSET,":-1"):oc.def(vd,"?",vd,".vertCount:-1")}):null}(),instances:Yb("instances",!1),offset:Vc}}function Nc(zb,qc){var Yb=
zb["static"],Bc=zb.dynamic,bd={};qd.forEach(function(ed){function Vc(yc,vc){if(ed in Yb){var oc=yc(Yb[ed]);bd[Pc]=ia(function(){return oc})}else if(ed in Bc){var vd=Bc[ed];bd[Pc]=oa(vd,function(Qd,Yd){return vc(Qd,Yd,Qd.invoke(Yd,vd))})}}var Pc=Vb(ed);switch(ed){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return Vc(function(yc){return yc},
function(yc,vc,oc){return oc});case "depth.func":return Vc(function(yc){return Jb[yc]},function(yc,vc,oc){return vc.def(yc.constants.compareFuncs,"[",oc,"]")});case "depth.range":return Vc(function(yc){return yc},function(yc,vc,oc){yc=vc.def("+",oc,"[0]");vc=vc.def("+",oc,"[1]");return[yc,vc]});case "blend.func":return Vc(function(yc){return[db["srcRGB"in yc?yc.srcRGB:yc.src],db["dstRGB"in yc?yc.dstRGB:yc.dst],db["srcAlpha"in yc?yc.srcAlpha:yc.src],db["dstAlpha"in yc?yc.dstAlpha:yc.dst]]},function(yc,
vc,oc){function vd(Td,Oe){return vc.def('"',Td,Oe,'" in ',oc,"?",oc,".",Td,Oe,":",oc,".",Td)}yc=yc.constants.blendFuncs;var Qd=vd("src","RGB"),Yd=vd("dst","RGB");Qd=vc.def(yc,"[",Qd,"]");var xe=vc.def(yc,"[",vd("src","Alpha"),"]");Yd=vc.def(yc,"[",Yd,"]");yc=vc.def(yc,"[",vd("dst","Alpha"),"]");return[Qd,Yd,xe,yc]});case "blend.equation":return Vc(function(yc){if("string"===typeof yc)return[Gd[yc],Gd[yc]];if("object"===typeof yc)return[Gd[yc.rgb],Gd[yc.alpha]]},function(yc,vc,oc){var vd=yc.constants.blendEquations,
Qd=vc.def(),Yd=vc.def();yc=yc.cond("typeof ",oc,'\x3d\x3d\x3d"string"');yc.then(Qd,"\x3d",Yd,"\x3d",vd,"[",oc,"];");yc["else"](Qd,"\x3d",vd,"[",oc,".rgb];",Yd,"\x3d",vd,"[",oc,".alpha];");vc(yc);return[Qd,Yd]});case "blend.color":return Vc(function(yc){return d(4,function(vc){return+yc[vc]})},function(yc,vc,oc){return d(4,function(vd){return vc.def("+",oc,"[",vd,"]")})});case "stencil.mask":return Vc(function(yc){return yc|0},function(yc,vc,oc){return vc.def(oc,"|0")});case "stencil.func":return Vc(function(yc){return[Jb[yc.cmp||
"keep"],yc.ref||0,"mask"in yc?yc.mask:-1]},function(yc,vc,oc){yc=vc.def('"cmp" in ',oc,"?",yc.constants.compareFuncs,"[",oc,".cmp]",":",7680);var vd=vc.def(oc,".ref|0");vc=vc.def('"mask" in ',oc,"?",oc,".mask|0:-1");return[yc,vd,vc]});case "stencil.opFront":case "stencil.opBack":return Vc(function(yc){return["stencil.opBack"===ed?1029:1028,Gb[yc.fail||"keep"],Gb[yc.zfail||"keep"],Gb[yc.zpass||"keep"]]},function(yc,vc,oc){function vd(Yd){return vc.def('"',Yd,'" in ',oc,"?",Qd,"[",oc,".",Yd,"]:",7680)}
var Qd=yc.constants.stencilOps;return["stencil.opBack"===ed?1029:1028,vd("fail"),vd("zfail"),vd("zpass")]});case "polygonOffset.offset":return Vc(function(yc){return[yc.factor|0,yc.units|0]},function(yc,vc,oc){yc=vc.def(oc,".factor|0");vc=vc.def(oc,".units|0");return[yc,vc]});case "cull.face":return Vc(function(yc){var vc=0;"front"===yc?vc=1028:"back"===yc&&(vc=1029);return vc},function(yc,vc,oc){return vc.def(oc,'\x3d\x3d\x3d"front"?',1028,":",1029)});case "lineWidth":return Vc(function(yc){return yc},
function(yc,vc,oc){return oc});case "frontFace":return Vc(function(yc){return cc[yc]},function(yc,vc,oc){return vc.def(oc+'\x3d\x3d\x3d"cw"?2304:2305')});case "colorMask":return Vc(function(yc){return yc.map(function(vc){return!!vc})},function(yc,vc,oc){return d(4,function(vd){return"!!"+oc+"["+vd+"]"})});case "sample.coverage":return Vc(function(yc){return["value"in yc?yc.value:1,!!yc.invert]},function(yc,vc,oc){yc=vc.def('"value" in ',oc,"?+",oc,".value:1");vc=vc.def("!!",oc,".invert");return[yc,
vc]})}});return bd}function Xc(zb,qc){var Yb=zb["static"],Bc=zb.dynamic,bd={};Object.keys(Yb).forEach(function(ed){var Vc=Yb[ed];if("number"===typeof Vc||"boolean"===typeof Vc)var Pc=ia(function(){return Vc});else if("function"===typeof Vc){var yc=Vc._reglType;if("texture2d"===yc||"textureCube"===yc)Pc=ia(function(vc){return vc.link(Vc)});else if("framebuffer"===yc||"framebufferCube"===yc)Pc=ia(function(vc){return vc.link(Vc.color[0])})}else v(Vc)&&(Pc=ia(function(vc){return vc.global.def("[",d(Vc.length,
function(oc){return Vc[oc]}),"]")}));Pc.value=Vc;bd[ed]=Pc});Object.keys(Bc).forEach(function(ed){var Vc=Bc[ed];bd[ed]=oa(Vc,function(Pc,yc){return Pc.invoke(yc,Vc)})});return bd}function Zc(zb,qc){var Yb=zb["static"],Bc=zb.dynamic,bd={};Object.keys(Yb).forEach(function(ed){var Vc=Yb[ed],Pc=Qb.id(ed),yc=new Rc;if(Y(Vc))yc.state=1,yc.buffer=Qc.getBuffer(Qc.create(Vc,34962,!1,!0)),yc.type=0;else{var vc=Qc.getBuffer(Vc);if(vc)yc.state=1,yc.buffer=vc,yc.type=0;else if("constant"in Vc){var oc=Vc.constant;
yc.buffer="null";yc.state=2;"number"===typeof oc?yc.x=oc:Ja.forEach(function(Oe,Ve){Ve<oc.length&&(yc[Oe]=oc[Ve])})}else{vc=Y(Vc.buffer)?Qc.getBuffer(Qc.create(Vc.buffer,34962,!1,!0)):Qc.getBuffer(Vc.buffer);var vd=Vc.offset|0,Qd=Vc.stride|0,Yd=Vc.size|0,xe=!!Vc.normalized,Td=0;"type"in Vc&&(Td=jb[Vc.type]);Vc=Vc.divisor|0;yc.buffer=vc;yc.state=1;yc.size=Yd;yc.normalized=xe;yc.type=Td||vc.dtype;yc.offset=vd;yc.stride=Qd;yc.divisor=Vc}}bd[ed]=ia(function(Oe,Ve){Ve=Oe.attribCache;if(Pc in Ve)return Ve[Pc];
var wf={isStream:!1};Object.keys(yc).forEach(function(Me){wf[Me]=yc[Me]});yc.buffer&&(wf.buffer=Oe.link(yc.buffer),wf.type=wf.type||wf.buffer+".dtype");return Ve[Pc]=wf})});Object.keys(Bc).forEach(function(ed){var Vc=Bc[ed];bd[ed]=oa(Vc,function(Pc,yc){function vc(Ve){yc(Yd[Ve],"\x3d",oc,".",Ve,"|0;")}var oc=Pc.invoke(yc,Vc),vd=Pc.shared;Pc=Pc.constants;var Qd=vd.isBufferArgs;vd=vd.buffer;var Yd={isStream:yc.def(!1)},xe=new Rc;xe.state=1;Object.keys(xe).forEach(function(Ve){Yd[Ve]=yc.def(""+xe[Ve])});
var Td=Yd.buffer,Oe=Yd.type;yc("if(",Qd,"(",oc,")){",Yd.isStream,"\x3dtrue;",Td,"\x3d",vd,".createStream(",34962,",",oc,");",Oe,"\x3d",Td,".dtype;","}else{",Td,"\x3d",vd,".getBuffer(",oc,");","if(",Td,"){",Oe,"\x3d",Td,".dtype;",'}else if("constant" in ',oc,"){",Yd.state,"\x3d",2,";","if(typeof "+oc+'.constant \x3d\x3d\x3d "number"){',Yd[Ja[0]],"\x3d",oc,".constant;",Ja.slice(1).map(function(Ve){return Yd[Ve]}).join("\x3d"),"\x3d0;","}else{",Ja.map(function(Ve,wf){return Yd[Ve]+"\x3d"+oc+".constant.length\x3e"+
wf+"?"+oc+".constant["+wf+"]:0;"}).join(""),"}}else{","if(",Qd,"(",oc,".buffer)){",Td,"\x3d",vd,".createStream(",34962,",",oc,".buffer);","}else{",Td,"\x3d",vd,".getBuffer(",oc,".buffer);","}",Oe,'\x3d"type" in ',oc,"?",Pc.glTypes,"[",oc,".type]:",Td,".dtype;",Yd.normalized,"\x3d!!",oc,".normalized;");vc("size");vc("offset");vc("stride");vc("divisor");yc("}}");yc.exit("if(",Yd.isStream,"){",vd,".destroyStream(",Td,");","}");return Yd})});return bd}function Sc(zb,qc){qc=zb["static"];zb=zb.dynamic;
if("vao"in qc){var Yb=qc.vao;null!==Yb&&null===pc.getVAO(Yb)&&(Yb=pc.createVAO(Yb));return ia(function(bd){return bd.link(pc.getVAO(Yb))})}if("vao"in zb){var Bc=zb.vao;return oa(Bc,function(bd,ed){var Vc=bd.invoke(ed,Bc);return ed.def(bd.shared.vao+".getVAO("+Vc+")")})}return null}function id(zb){var qc=zb["static"],Yb=zb.dynamic,Bc={};Object.keys(qc).forEach(function(bd){var ed=qc[bd];Bc[bd]=ia(function(Vc,Pc){return"number"===typeof ed||"boolean"===typeof ed?""+ed:Vc.link(ed)})});Object.keys(Yb).forEach(function(bd){var ed=
Yb[bd];Bc[bd]=oa(ed,function(Vc,Pc){return Vc.invoke(Pc,ed)})});return Bc}function Nd(zb,qc,Yb,Bc,bd){function ed(Td){var Oe=yc[Td];Oe&&(oc[Td]=Oe)}var Vc=yd(zb,qc),Pc=Bd(zb,bd),yc=Fd(zb,Pc,bd),vc=cd(zb,bd),oc=Nc(zb,bd),vd=Lc(zb,bd,Vc);ed("viewport");ed(Vb("scissor.box"));var Qd=0<Object.keys(oc).length;Pc={framebuffer:Pc,draw:vc,shader:vd,state:oc,dirty:Qd,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};Pc.profile=kd(zb,bd);Pc.uniforms=Xc(Yb,bd);Pc.drawVAO=Pc.scopeVAO=Sc(zb,bd);if(!Pc.drawVAO&&
vd.program&&!Vc&&dc.angle_instanced_arrays){var Yd=!0;zb=vd.program.attributes.map(function(Td){Td=qc["static"][Td];Yd=Yd&&!!Td;return Td});if(Yd&&0<zb.length){var xe=pc.getVAO(pc.createVAO(zb));Pc.drawVAO=new ja(null,null,null,function(Td,Oe){return Td.link(xe)});Pc.useVAO=!0}}Vc?Pc.useVAO=!0:Pc.attributes=Zc(qc,bd);Pc.context=id(Bc,bd);return Pc}function Rd(zb,qc,Yb){var Bc=zb.shared.context,bd=zb.scope();Object.keys(Yb).forEach(function(ed){qc.save(Bc,"."+ed);bd(Bc,".",ed,"\x3d",Yb[ed].append(zb,
qc),";")});qc(bd)}function Wd(zb,qc,Yb,Bc){var bd=zb.shared,ed=bd.gl,Vc=bd.framebuffer,Pc;$b&&(Pc=qc.def(bd.extensions,".webgl_draw_buffers"));var yc=zb.constants;bd=yc.drawBuffer;yc=yc.backBuffer;zb=Yb?Yb.append(zb,qc):qc.def(Vc,".next");Bc||qc("if(",zb,"!\x3d\x3d",Vc,".cur){");qc("if(",zb,"){",ed,".bindFramebuffer(",36160,",",zb,".framebuffer);");$b&&qc(Pc,".drawBuffersWEBGL(",bd,"[",zb,".colorAttachments.length]);");qc("}else{",ed,".bindFramebuffer(",36160,",null);");$b&&qc(Pc,".drawBuffersWEBGL(",
yc,");");qc("}",Vc,".cur\x3d",zb,";");Bc||qc("}")}function Se(zb,qc,Yb){var Bc=zb.shared,bd=Bc.gl,ed=zb.current,Vc=zb.next,Pc=Bc.current,yc=Bc.next,vc=zb.cond(Pc,".dirty");qd.forEach(function(oc){oc=Vb(oc);if(!(oc in Yb.state))if(oc in Vc){var vd=Vc[oc];var Qd=ed[oc];var Yd=d(Mc[oc].length,function(xe){return vc.def(vd,"[",xe,"]")});vc(zb.cond(Yd.map(function(xe,Td){return xe+"!\x3d\x3d"+Qd+"["+Td+"]"}).join("||")).then(bd,".",Id[oc],"(",Yd,");",Yd.map(function(xe,Td){return Qd+"["+Td+"]\x3d"+xe}).join(";"),
";"))}else vd=vc.def(yc,".",oc),Yd=zb.cond(vd,"!\x3d\x3d",Pc,".",oc),vc(Yd),oc in qe?Yd(zb.cond(vd).then(bd,".enable(",qe[oc],");")["else"](bd,".disable(",qe[oc],");"),Pc,".",oc,"\x3d",vd,";"):Yd(bd,".",Id[oc],"(",vd,");",Pc,".",oc,"\x3d",vd,";")});0===Object.keys(Yb.state).length&&vc(Pc,".dirty\x3dfalse;");qc(vc)}function Ne(zb,qc,Yb,Bc){var bd=zb.shared,ed=zb.current,Vc=bd.current,Pc=bd.gl;ba(Object.keys(Yb)).forEach(function(yc){var vc=Yb[yc];if(!Bc||Bc(vc)){var oc=vc.append(zb,qc);if(qe[yc]){var vd=
qe[yc];ma(vc)?oc?qc(Pc,".enable(",vd,");"):qc(Pc,".disable(",vd,");"):qc(zb.cond(oc).then(Pc,".enable(",vd,");")["else"](Pc,".disable(",vd,");"));qc(Vc,".",yc,"\x3d",oc,";")}else if(v(oc)){var Qd=ed[yc];qc(Pc,".",Id[yc],"(",oc,");",oc.map(function(Yd,xe){return Qd+"["+xe+"]\x3d"+Yd}).join(";"),";")}else qc(Pc,".",Id[yc],"(",oc,");",Vc,".",yc,"\x3d",oc,";")}})}function te(zb,qc){Mb&&(zb.instancing=qc.def(zb.shared.extensions,".angle_instanced_arrays"))}function qf(zb,qc,Yb,Bc,bd){function ed(){return"undefined"===
typeof performance?"Date.now()":"performance.now()"}function Vc(Td){Yd=qc.def();Td(Yd,"\x3d",ed(),";");"string"===typeof bd?Td(oc,".count+\x3d",bd,";"):Td(oc,".count++;");yb&&(Bc?(xe=qc.def(),Td(xe,"\x3d",Qd,".getNumPendingQueries();")):Td(Qd,".beginQuery(",oc,");"))}function Pc(Td){Td(oc,".cpuTime+\x3d",ed(),"-",Yd,";");yb&&(Bc?Td(Qd,".pushScopeStats(",xe,",",Qd,".getNumPendingQueries(),",oc,");"):Td(Qd,".endQuery();"))}function yc(Td){var Oe=qc.def(vd,".profile");qc(vd,".profile\x3d",Td,";");qc.exit(vd,
".profile\x3d",Oe,";")}var vc=zb.shared,oc=zb.stats,vd=vc.current,Qd=vc.timer;Yb=Yb.profile;var Yd,xe;if(Yb){if(ma(Yb)){Yb.enable?(Vc(qc),Pc(qc.exit),yc("true")):yc("false");return}Yb=Yb.append(zb,qc);yc(Yb)}else Yb=qc.def(vd,".profile");vc=zb.block();Vc(vc);qc("if(",Yb,"){",vc,"}");zb=zb.block();Pc(zb);qc.exit("if(",Yb,"){",zb,"}")}function sf(zb,qc,Yb,Bc,bd){function ed(yc){switch(yc){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;
default:return 1}}function Vc(yc,vc,oc){function vd(){qc("if(!",Td,".buffer){",Yd,".enableVertexAttribArray(",xe,");}");var Me=oc.type;var Af=oc.size?qc.def(oc.size,"||",vc):vc;qc("if(",Td,".type!\x3d\x3d",Me,"||",Td,".size!\x3d\x3d",Af,"||",wf.map(function(ug){return Td+"."+ug+"!\x3d\x3d"+oc[ug]}).join("||"),"){",Yd,".bindBuffer(",34962,",",Oe,".buffer);",Yd,".vertexAttribPointer(",[xe,Af,Me,oc.normalized,oc.stride,oc.offset],");",Td,".type\x3d",Me,";",Td,".size\x3d",Af,";",wf.map(function(ug){return Td+
"."+ug+"\x3d"+oc[ug]+";"}).join(""),"}");Mb&&(Me=oc.divisor,qc("if(",Td,".divisor!\x3d\x3d",Me,"){",zb.instancing,".vertexAttribDivisorANGLE(",[xe,Me],");",Td,".divisor\x3d",Me,";}"))}function Qd(){qc("if(",Td,".buffer){",Yd,".disableVertexAttribArray(",xe,");",Td,".buffer\x3dnull;","}if(",Ja.map(function(Me,Af){return Td+"."+Me+"!\x3d\x3d"+Ve[Af]}).join("||"),"){",Yd,".vertexAttrib4f(",xe,",",Ve,");",Ja.map(function(Me,Af){return Td+"."+Me+"\x3d"+Ve[Af]+";"}).join(""),"}")}var Yd=Pc.gl,xe=qc.def(yc,
".location"),Td=qc.def(Pc.attributes,"[",xe,"]");yc=oc.state;var Oe=oc.buffer,Ve=[oc.x,oc.y,oc.z,oc.w],wf=["buffer","normalized","offset","stride"];1===yc?vd():2===yc?Qd():(qc("if(",yc,"\x3d\x3d\x3d",1,"){"),vd(),qc("}else{"),Qd(),qc("}"))}var Pc=zb.shared;Bc.forEach(function(yc){var vc=yc.name,oc=Yb.attributes[vc];if(oc){if(!bd(oc))return;var vd=oc.append(zb,qc)}else{if(!bd(uc))return;var Qd=zb.scopeAttrib(vc);vd={};Object.keys(new Rc).forEach(function(Yd){vd[Yd]=qc.def(Qd,".",Yd)})}Vc(zb.link(yc),
ed(yc.info.type),vd)})}function of(zb,qc,Yb,Bc,bd){for(var ed=zb.shared,Vc=ed.gl,Pc,yc=0;yc<Bc.length;++yc){var vc=Bc[yc],oc=vc.name,vd=vc.info.type,Qd=Yb.uniforms[oc];vc=zb.link(vc)+".location";if(Qd){if(!bd(Qd))continue;if(ma(Qd)){oc=Qd.value;if(35678===vd||35680===vd)vd=zb.link(oc._texture||oc.color[0]._texture),qc(Vc,".uniform1i(",vc,",",vd+".bind());"),qc.exit(vd,".unbind();");else if(35674===vd||35675===vd||35676===vd)oc=zb.global.def("new Float32Array(["+Array.prototype.slice.call(oc)+"])"),
Qd=2,35675===vd?Qd=3:35676===vd&&(Qd=4),qc(Vc,".uniformMatrix",Qd,"fv(",vc,",false,",oc,");");else{switch(vd){case 5126:Pc="1f";break;case 35664:Pc="2f";break;case 35665:Pc="3f";break;case 35666:Pc="4f";break;case 35670:Pc="1i";break;case 5124:Pc="1i";break;case 35671:Pc="2i";break;case 35667:Pc="2i";break;case 35672:Pc="3i";break;case 35668:Pc="3i";break;case 35673:Pc="4i";break;case 35669:Pc="4i"}qc(Vc,".uniform",Pc,"(",vc,",",v(oc)?Array.prototype.slice.call(oc):oc,");")}continue}else var Yd=Qd.append(zb,
qc)}else{if(!bd(uc))continue;Yd=qc.def(ed.uniforms,"[",Qb.id(oc),"]")}35678===vd?qc("if(",Yd,"\x26\x26",Yd,'._reglType\x3d\x3d\x3d"framebuffer"){',Yd,"\x3d",Yd,".color[0];","}"):35680===vd&&qc("if(",Yd,"\x26\x26",Yd,'._reglType\x3d\x3d\x3d"framebufferCube"){',Yd,"\x3d",Yd,".color[0];","}");oc=1;switch(vd){case 35678:case 35680:vd=qc.def(Yd,"._texture");qc(Vc,".uniform1i(",vc,",",vd,".bind());");qc.exit(vd,".unbind();");continue;case 5124:case 35670:Pc="1i";break;case 35667:case 35671:Pc="2i";oc=2;
break;case 35668:case 35672:Pc="3i";oc=3;break;case 35669:case 35673:Pc="4i";oc=4;break;case 5126:Pc="1f";break;case 35664:Pc="2f";oc=2;break;case 35665:Pc="3f";oc=3;break;case 35666:Pc="4f";oc=4;break;case 35674:Pc="Matrix2fv";break;case 35675:Pc="Matrix3fv";break;case 35676:Pc="Matrix4fv"}qc(Vc,".uniform",Pc,"(",vc,",");if("M"===Pc.charAt(0)){vc=Math.pow(vd-35674+2,2);var xe=zb.global.def("new Float32Array(",vc,")");qc("false,(Array.isArray(",Yd,")||",Yd," instanceof Float32Array)?",Yd,":(",d(vc,
function(Td){return xe+"["+Td+"]\x3d"+Yd+"["+Td+"]"}),",",xe,")")}else 1<oc?qc(d(oc,function(Td){return Yd+"["+Td+"]"})):qc(Yd);qc(");")}}function vf(zb,qc,Yb,Bc){function bd(Me){var Af=oc[Me];return Af?Af.contextDep&&Bc.contextDynamic||Af.propDep?Af.append(zb,Yb):Af.append(zb,qc):qc.def(vc,".",Me)}function ed(){function Me(){Yb(Oe,".drawElementsInstancedANGLE(",[Qd,xe,Ve,Yd+"\x3c\x3c(("+Ve+"-5121)\x3e\x3e1)",Td],");")}function Af(){Yb(Oe,".drawArraysInstancedANGLE(",[Qd,Yd,xe,Td],");")}vd?wf?Me():
(Yb("if(",vd,"){"),Me(),Yb("}else{"),Af(),Yb("}")):Af()}function Vc(){function Me(){Yb(yc+".drawElements("+[Qd,xe,Ve,Yd+"\x3c\x3c(("+Ve+"-5121)\x3e\x3e1)"]+");")}function Af(){Yb(yc+".drawArrays("+[Qd,Yd,xe]+");")}vd?wf?Me():(Yb("if(",vd,"){"),Me(),Yb("}else{"),Af(),Yb("}")):Af()}var Pc=zb.shared,yc=Pc.gl,vc=Pc.draw,oc=Bc.draw,vd=function(){var Me=oc.elements,Af=qc;if(Me){if(Me.contextDep&&Bc.contextDynamic||Me.propDep)Af=Yb;Me=Me.append(zb,Af)}else Me=Af.def(vc,".","elements");Me&&Af("if("+Me+")"+
yc+".bindBuffer(34963,"+Me+".buffer.buffer);");return Me}(),Qd=bd("primitive"),Yd=bd("offset"),xe=function(){var Me=oc.count,Af=qc;if(Me){if(Me.contextDep&&Bc.contextDynamic||Me.propDep)Af=Yb;Me=Me.append(zb,Af)}else Me=Af.def(vc,".","count");return Me}();if("number"===typeof xe){if(0===xe)return}else Yb("if(",xe,"){"),Yb.exit("}");var Td,Oe;Mb&&(Td=bd("instances"),Oe=zb.instancing);var Ve=vd+".type",wf=oc.elements&&ma(oc.elements);Mb&&("number"!==typeof Td||0<=Td)?"string"===typeof Td?(Yb("if(",
Td,"\x3e0){"),ed(),Yb("}else if(",Td,"\x3c0){"),Vc(),Yb("}")):ed():Vc()}function Bf(zb,qc,Yb,Bc,bd){qc=Uc();bd=qc.proc("body",bd);Mb&&(qc.instancing=bd.def(qc.shared.extensions,".angle_instanced_arrays"));zb(qc,bd,Yb,Bc);return qc.compile().body}function Sd(zb,qc,Yb,Bc){te(zb,qc);Yb.useVAO?Yb.drawVAO?qc(zb.shared.vao,".setVAO(",Yb.drawVAO.append(zb,qc),");"):qc(zb.shared.vao,".setVAO(",zb.shared.vao,".targetVAO);"):(qc(zb.shared.vao,".setVAO(null);"),sf(zb,qc,Yb,Bc.attributes,function(){return!0}));
of(zb,qc,Yb,Bc.uniforms,function(){return!0});vf(zb,qc,qc,Yb)}function De(zb,qc){var Yb=zb.proc("draw",1);te(zb,Yb);Rd(zb,Yb,qc.context);Wd(zb,Yb,qc.framebuffer);Se(zb,Yb,qc);Ne(zb,Yb,qc.state);qf(zb,Yb,qc,!1,!0);var Bc=qc.shader.progVar.append(zb,Yb);Yb(zb.shared.gl,".useProgram(",Bc,".program);");if(qc.shader.program)Sd(zb,Yb,qc,qc.shader.program);else{Yb(zb.shared.vao,".setVAO(null);");var bd=zb.global.def("{}"),ed=Yb.def(Bc,".id"),Vc=Yb.def(bd,"[",ed,"]");Yb(zb.cond(Vc).then(Vc,".call(this,a0);")["else"](Vc,
"\x3d",bd,"[",ed,"]\x3d",zb.link(function(Pc){return Bf(Sd,zb,qc,Pc,1)}),"(",Bc,");",Vc,".call(this,a0);"))}0<Object.keys(qc.state).length&&Yb(zb.shared.current,".dirty\x3dtrue;")}function hf(zb,qc,Yb,Bc){function bd(){return!0}zb.batchId="a1";te(zb,qc);sf(zb,qc,Yb,Bc.attributes,bd);of(zb,qc,Yb,Bc.uniforms,bd);vf(zb,qc,qc,Yb)}function bf(zb,qc,Yb,Bc){function bd(vd){return vd.contextDep&&Vc||vd.propDep}function ed(vd){return!bd(vd)}te(zb,qc);var Vc=Yb.contextDep,Pc=qc.def(),yc=qc.def();zb.shared.props=
yc;zb.batchId=Pc;var vc=zb.scope(),oc=zb.scope();qc(vc.entry,"for(",Pc,"\x3d0;",Pc,"\x3c","a1",";++",Pc,"){",yc,"\x3d","a0","[",Pc,"];",oc,"}",vc.exit);Yb.needsContext&&Rd(zb,oc,Yb.context);Yb.needsFramebuffer&&Wd(zb,oc,Yb.framebuffer);Ne(zb,oc,Yb.state,bd);Yb.profile&&bd(Yb.profile)&&qf(zb,oc,Yb,!1,!0);Bc?(Yb.useVAO?Yb.drawVAO?bd(Yb.drawVAO)?oc(zb.shared.vao,".setVAO(",Yb.drawVAO.append(zb,oc),");"):vc(zb.shared.vao,".setVAO(",Yb.drawVAO.append(zb,vc),");"):vc(zb.shared.vao,".setVAO(",zb.shared.vao,
".targetVAO);"):(vc(zb.shared.vao,".setVAO(null);"),sf(zb,vc,Yb,Bc.attributes,ed),sf(zb,oc,Yb,Bc.attributes,bd)),of(zb,vc,Yb,Bc.uniforms,ed),of(zb,oc,Yb,Bc.uniforms,bd),vf(zb,vc,oc,Yb)):(qc=zb.global.def("{}"),Bc=Yb.shader.progVar.append(zb,oc),yc=oc.def(Bc,".id"),vc=oc.def(qc,"[",yc,"]"),oc(zb.shared.gl,".useProgram(",Bc,".program);","if(!",vc,"){",vc,"\x3d",qc,"[",yc,"]\x3d",zb.link(function(vd){return Bf(hf,zb,Yb,vd,2)}),"(",Bc,");}",vc,".call(this,a0[",Pc,"],",Pc,");"))}function Qe(zb,qc){function Yb(vc){return vc.contextDep&&
bd||vc.propDep}var Bc=zb.proc("batch",2);zb.batchId="0";te(zb,Bc);var bd=!1,ed=!0;Object.keys(qc.context).forEach(function(vc){bd=bd||qc.context[vc].propDep});bd||(Rd(zb,Bc,qc.context),ed=!1);var Vc=qc.framebuffer,Pc=!1;Vc?(Vc.propDep?bd=Pc=!0:Vc.contextDep&&bd&&(Pc=!0),Pc||Wd(zb,Bc,Vc)):Wd(zb,Bc,null);qc.state.viewport&&qc.state.viewport.propDep&&(bd=!0);Se(zb,Bc,qc);Ne(zb,Bc,qc.state,function(vc){return!Yb(vc)});qc.profile&&Yb(qc.profile)||qf(zb,Bc,qc,!1,"a1");qc.contextDep=bd;qc.needsContext=ed;
qc.needsFramebuffer=Pc;ed=qc.shader.progVar;if(ed.contextDep&&bd||ed.propDep)bf(zb,Bc,qc,null);else if(ed=ed.append(zb,Bc),Bc(zb.shared.gl,".useProgram(",ed,".program);"),qc.shader.program)bf(zb,Bc,qc,qc.shader.program);else{Bc(zb.shared.vao,".setVAO(null);");Vc=zb.global.def("{}");Pc=Bc.def(ed,".id");var yc=Bc.def(Vc,"[",Pc,"]");Bc(zb.cond(yc).then(yc,".call(this,a0,a1);")["else"](yc,"\x3d",Vc,"[",Pc,"]\x3d",zb.link(function(vc){return Bf(bf,zb,qc,vc,2)}),"(",ed,");",yc,".call(this,a0,a1);"))}0<
Object.keys(qc.state).length&&Bc(zb.shared.current,".dirty\x3dtrue;")}function He(zb,qc){function Yb(Vc){var Pc=qc.shader[Vc];Pc&&Bc.set(bd.shader,"."+Vc,Pc.append(zb,Bc))}var Bc=zb.proc("scope",3);zb.batchId="a2";var bd=zb.shared,ed=bd.current;Rd(zb,Bc,qc.context);qc.framebuffer&&qc.framebuffer.append(zb,Bc);ba(Object.keys(qc.state)).forEach(function(Vc){var Pc=qc.state[Vc].append(zb,Bc);v(Pc)?Pc.forEach(function(yc,vc){Bc.set(zb.next[Vc],"["+vc+"]",yc)}):Bc.set(bd.next,"."+Vc,Pc)});qf(zb,Bc,qc,
!0,!0);["elements","offset","count","instances","primitive"].forEach(function(Vc){var Pc=qc.draw[Vc];Pc&&Bc.set(bd.draw,"."+Vc,""+Pc.append(zb,Bc))});Object.keys(qc.uniforms).forEach(function(Vc){Bc.set(bd.uniforms,"["+Qb.id(Vc)+"]",qc.uniforms[Vc].append(zb,Bc))});Object.keys(qc.attributes).forEach(function(Vc){var Pc=qc.attributes[Vc].append(zb,Bc),yc=zb.scopeAttrib(Vc);Object.keys(new Rc).forEach(function(vc){Bc.set(yc,"."+vc,Pc[vc])})});qc.scopeVAO&&Bc.set(bd.vao,".targetVAO",qc.scopeVAO.append(zb,
Bc));Yb("vert");Yb("frag");0<Object.keys(qc.state).length&&(Bc(ed,".dirty\x3dtrue;"),Bc.exit(ed,".dirty\x3dtrue;"));Bc("a1(",zb.shared.context,",a0,",zb.batchId,");")}function $e(zb){if("object"===typeof zb&&!v(zb)){for(var qc=Object.keys(zb),Yb=0;Yb<qc.length;++Yb)if(na.isDynamic(zb[qc[Yb]]))return!0;return!1}}function df(zb,qc,Yb){function Bc(vd,Qd){Vc.forEach(function(Yd){var xe=bd[Yd];na.isDynamic(xe)&&(xe=vd.invoke(Qd,xe),Qd(oc,".",Yd,"\x3d",xe,";"))})}var bd=qc["static"][Yb];if(bd&&$e(bd)){var ed=
zb.global,Vc=Object.keys(bd),Pc=!1,yc=!1,vc=!1,oc=zb.global.def("{}");Vc.forEach(function(vd){var Qd=bd[vd];if(na.isDynamic(Qd))"function"===typeof Qd&&(Qd=bd[vd]=na.unbox(Qd)),vd=oa(Qd,null),Pc=Pc||vd.thisDep,vc=vc||vd.propDep,yc=yc||vd.contextDep;else{ed(oc,".",vd,"\x3d");switch(typeof Qd){case "number":ed(Qd);break;case "string":ed('"',Qd,'"');break;case "object":Array.isArray(Qd)&&ed("[",Qd.join(),"]");break;default:ed(zb.link(Qd))}ed(";")}});qc.dynamic[Yb]=new na.DynamicVariable(4,{thisDep:Pc,
contextDep:yc,propDep:vc,ref:oc,append:Bc});delete qc["static"][Yb]}}var Rc=pc.Record,Gd={add:32774,subtract:32778,"reverse subtract":32779};dc.ext_blend_minmax&&(Gd.min=32775,Gd.max=32776);var Mb=dc.angle_instanced_arrays,$b=dc.webgl_draw_buffers,Mc={dirty:!0,profile:ac.profile},Hd={},qd=[],qe={},Id={};mc("dither",3024);mc("blend.enable",3042);tc("blend.color","blendColor",[0,0,0,0]);tc("blend.equation","blendEquationSeparate",[32774,32774]);tc("blend.func","blendFuncSeparate",[1,0,1,0]);mc("depth.enable",
2929,!0);tc("depth.func","depthFunc",513);tc("depth.range","depthRange",[0,1]);tc("depth.mask","depthMask",!0);tc("colorMask","colorMask",[!0,!0,!0,!0]);mc("cull.enable",2884);tc("cull.face","cullFace",1029);tc("frontFace","frontFace",2305);tc("lineWidth","lineWidth",1);mc("polygonOffset.enable",32823);tc("polygonOffset.offset","polygonOffset",[0,0]);mc("sample.alpha",32926);mc("sample.enable",32928);tc("sample.coverage","sampleCoverage",[1,!1]);mc("stencil.enable",2960);tc("stencil.mask","stencilMask",
-1);tc("stencil.func","stencilFunc",[519,0,-1]);tc("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);tc("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);mc("scissor.enable",3089);tc("scissor.box","scissor",[0,0,kb.drawingBufferWidth,kb.drawingBufferHeight]);tc("viewport","viewport",[0,0,kb.drawingBufferWidth,kb.drawingBufferHeight]);var ue={gl:kb,context:Ub,strings:Qb,next:Hd,current:Mc,draw:Wb,elements:Tc,buffer:Qc,shader:zc,attributes:pc.state,vao:pc,uniforms:sc,framebuffer:Ib,
extensions:dc,timer:yb,isBufferArgs:Y},Be={primTypes:wb,compareFuncs:Jb,blendFuncs:db,blendEquations:Gd,stencilOps:Gb,glTypes:jb,orientationType:cc};$b&&(Be.backBuffer=[1029],Be.drawBuffer=d(Ec.maxDrawbuffers,function(zb){return 0===zb?[0]:d(zb,function(qc){return 36064+qc})}));var oe=0;return{next:Hd,current:Mc,procs:function(){var zb=Uc(),qc=zb.proc("poll"),Yb=zb.proc("refresh"),Bc=zb.block();qc(Bc);Yb(Bc);var bd=zb.shared,ed=bd.gl,Vc=bd.next,Pc=bd.current;Bc(Pc,".dirty\x3dfalse;");Wd(zb,qc);Wd(zb,
Yb,null,!0);var yc;Mb&&(yc=zb.link(Mb));dc.oes_vertex_array_object&&Yb(zb.link(dc.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var vc=0;vc<Ec.maxAttributes;++vc){var oc=Yb.def(bd.attributes,"[",vc,"]"),vd=zb.cond(oc,".buffer");vd.then(ed,".enableVertexAttribArray(",vc,");",ed,".bindBuffer(",34962,",",oc,".buffer.buffer);",ed,".vertexAttribPointer(",vc,",",oc,".size,",oc,".type,",oc,".normalized,",oc,".stride,",oc,".offset);")["else"](ed,".disableVertexAttribArray(",vc,");",ed,".vertexAttrib4f(",
vc,",",oc,".x,",oc,".y,",oc,".z,",oc,".w);",oc,".buffer\x3dnull;");Yb(vd);Mb&&Yb(yc,".vertexAttribDivisorANGLE(",vc,",",oc,".divisor);")}Yb(zb.shared.vao,".currentVAO\x3dnull;",zb.shared.vao,".setVAO(",zb.shared.vao,".targetVAO);");Object.keys(qe).forEach(function(Qd){var Yd=qe[Qd],xe=Bc.def(Vc,".",Qd),Td=zb.block();Td("if(",xe,"){",ed,".enable(",Yd,")}else{",ed,".disable(",Yd,")}",Pc,".",Qd,"\x3d",xe,";");Yb(Td);qc("if(",xe,"!\x3d\x3d",Pc,".",Qd,"){",Td,"}")});Object.keys(Id).forEach(function(Qd){var Yd=
Id[Qd],xe=Mc[Qd],Td,Oe,Ve=zb.block();Ve(ed,".",Yd,"(");v(xe)?(Yd=xe.length,Td=zb.global.def(Vc,".",Qd),Oe=zb.global.def(Pc,".",Qd),Ve(d(Yd,function(wf){return Td+"["+wf+"]"}),");",d(Yd,function(wf){return Oe+"["+wf+"]\x3d"+Td+"["+wf+"];"}).join("")),qc("if(",d(Yd,function(wf){return Td+"["+wf+"]!\x3d\x3d"+Oe+"["+wf+"]"}).join("||"),"){",Ve,"}")):(Td=Bc.def(Vc,".",Qd),Oe=Bc.def(Pc,".",Qd),Ve(Td,");",Pc,".",Qd,"\x3d",Td,";"),qc("if(",Td,"!\x3d\x3d",Oe,"){",Ve,"}"));Yb(Ve)});return zb.compile()}(),compile:function(zb,
qc,Yb,Bc,bd){var ed=Uc();ed.stats=ed.link(bd);Object.keys(qc["static"]).forEach(function(Vc){df(ed,qc,Vc)});Pa.forEach(function(Vc){df(ed,zb,Vc)});Yb=Nd(zb,qc,Yb,Bc,ed);De(ed,Yb);He(ed,Yb);Qe(ed,Yb);return ed.compile()}}}function ra(kb,Qb){for(var dc=0;dc<kb.length;++dc)if(kb[dc]===Qb)return dc;return-1}var la=function(kb,Qb){for(var dc=Object.keys(Qb),Ec=0;Ec<dc.length;++Ec)kb[dc[Ec]]=Qb[dc[Ec]];return kb},ka=0,na={DynamicVariable:p,define:function(kb,Qb){return new p(kb,k(Qb+""))},isDynamic:function(kb){return"function"===
typeof kb&&!kb._reglType||kb instanceof p},unbox:function(kb,Qb){return"function"===typeof kb?new p(0,kb):kb},accessor:k},qa={next:"function"===typeof requestAnimationFrame?function(kb){return requestAnimationFrame(kb)}:function(kb){return setTimeout(kb,16)},cancel:"function"===typeof cancelAnimationFrame?function(kb){return cancelAnimationFrame(kb)}:clearTimeout},ta="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},za=f();za.zero=f();
var Ia=function(kb,Qb){var dc=1;Qb.ext_texture_filter_anisotropic&&(dc=kb.getParameter(34047));var Ec=1,Qc=1;Qb.webgl_draw_buffers&&(Ec=kb.getParameter(34852),Qc=kb.getParameter(36063));var Tc=!!Qb.oes_texture_float;if(Tc){Tc=kb.createTexture();kb.bindTexture(3553,Tc);kb.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var tb=kb.createFramebuffer();kb.bindFramebuffer(36160,tb);kb.framebufferTexture2D(36160,36064,3553,Tc,0);kb.bindTexture(3553,null);if(36053!==kb.checkFramebufferStatus(36160))Tc=!1;else{kb.viewport(0,
0,1,1);kb.clearColor(1,0,0,1);kb.clear(16384);var Ib=za.allocType(5126,4);kb.readPixels(0,0,1,1,6408,5126,Ib);kb.getError()?Tc=!1:(kb.deleteFramebuffer(tb),kb.deleteTexture(Tc),Tc=1===Ib[0]);za.freeType(Ib)}}Ib=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(Ib=kb.createTexture(),tb=za.allocType(5121,36),kb.activeTexture(33984),kb.bindTexture(34067,Ib),kb.texImage2D(34069,0,6408,3,3,0,6408,5121,tb),za.freeType(tb),
kb.bindTexture(34067,null),kb.deleteTexture(Ib),Ib=!kb.getError());return{colorBits:[kb.getParameter(3410),kb.getParameter(3411),kb.getParameter(3412),kb.getParameter(3413)],depthBits:kb.getParameter(3414),stencilBits:kb.getParameter(3415),subpixelBits:kb.getParameter(3408),extensions:Object.keys(Qb).filter(function(sc){return!!Qb[sc]}),maxAnisotropic:dc,maxDrawbuffers:Ec,maxColorAttachments:Qc,pointSizeDims:kb.getParameter(33901),lineWidthDims:kb.getParameter(33902),maxViewportDims:kb.getParameter(3386),
maxCombinedTextureUnits:kb.getParameter(35661),maxCubeMapSize:kb.getParameter(34076),maxRenderbufferSize:kb.getParameter(34024),maxTextureUnits:kb.getParameter(34930),maxTextureSize:kb.getParameter(3379),maxAttributes:kb.getParameter(34921),maxVertexUniforms:kb.getParameter(36347),maxVertexTextureUnits:kb.getParameter(35660),maxVaryingVectors:kb.getParameter(36348),maxFragmentUniforms:kb.getParameter(36349),glsl:kb.getParameter(35724),renderer:kb.getParameter(7937),vendor:kb.getParameter(7936),version:kb.getParameter(7938),
readFloat:Tc,npotTextureCube:Ib}},Xa=function(kb){return kb instanceof Uint8Array||kb instanceof Uint16Array||kb instanceof Uint32Array||kb instanceof Int8Array||kb instanceof Int16Array||kb instanceof Int32Array||kb instanceof Float32Array||kb instanceof Float64Array||kb instanceof Uint8ClampedArray},$a=function(kb){return Object.keys(kb).map(function(Qb){return kb[Qb]})},gb={shape:function(kb){for(var Qb=[];kb.length;kb=kb[0])Qb.push(kb.length);return Qb},flatten:function(kb,Qb,dc,Ec){var Qc=1;
if(Qb.length)for(var Tc=0;Tc<Qb.length;++Tc)Qc*=Qb[Tc];else Qc=0;dc=Ec||za.allocType(dc,Qc);switch(Qb.length){case 0:break;case 1:Ec=Qb[0];for(Qb=0;Qb<Ec;++Qb)dc[Qb]=kb[Qb];break;case 2:Ec=Qb[0];Qb=Qb[1];for(Tc=Qc=0;Tc<Ec;++Tc)for(var tb=kb[Tc],Ib=0;Ib<Qb;++Ib)dc[Qc++]=tb[Ib];break;case 3:t(kb,Qb[0],Qb[1],Qb[2],dc,0);break;default:w(kb,Qb,0,dc,0)}return dc}},sb={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,
"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},jb={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126},vb={dynamic:35048,stream:35040,"static":35044},qb=gb.flatten,Bb=gb.shape,ub=[];ub[5120]=1;ub[5122]=2;ub[5124]=4;ub[5121]=1;ub[5123]=2;ub[5125]=4;ub[5126]=4;var wb={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,
"triangle fan":6},rb=new Float32Array(1),Ab=new Uint32Array(rb.buffer),Ma=[9984,9986,9985,9987],La=[0,6409,6410,6407,6408],ya={};ya[6409]=ya[6406]=ya[6402]=1;ya[34041]=ya[6410]=2;ya[6407]=ya[35904]=3;ya[6408]=ya[35906]=4;var Aa=y("HTMLCanvasElement"),Ka=y("OffscreenCanvas"),Ta=y("CanvasRenderingContext2D"),bb=y("ImageBitmap"),cb=y("HTMLImageElement"),Eb=y("HTMLVideoElement"),Pb=Object.keys(sb).concat([Aa,Ka,Ta,bb,cb,Eb]),fc=[];fc[5121]=1;fc[5126]=4;fc[36193]=2;fc[5123]=2;fc[5125]=4;var pb=[];pb[32854]=
2;pb[32855]=2;pb[36194]=2;pb[34041]=4;pb[33776]=.5;pb[33777]=.5;pb[33778]=1;pb[33779]=1;pb[35986]=.5;pb[35987]=1;pb[34798]=1;pb[35840]=.5;pb[35841]=.25;pb[35842]=.5;pb[35843]=.25;pb[36196]=.5;var Db=[];Db[32854]=2;Db[32855]=2;Db[36194]=2;Db[33189]=2;Db[36168]=1;Db[34041]=4;Db[35907]=4;Db[34836]=16;Db[34842]=8;Db[34843]=6;var Rb=function(kb,Qb,dc,Ec,Qc){function Tc(Wb){this.id=pc++;this.refCount=1;this.renderbuffer=Wb;this.format=32854;this.height=this.width=0;Qc.profile&&(this.stats={size:0})}function tb(Wb){var Ub=
Wb.renderbuffer;kb.bindRenderbuffer(36161,null);kb.deleteRenderbuffer(Ub);Wb.renderbuffer=null;Wb.refCount=0;delete zc[Wb.id];Ec.renderbufferCount--}var Ib={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};Qb.ext_srgb&&(Ib.srgba=35907);Qb.ext_color_buffer_half_float&&(Ib.rgba16f=34842,Ib.rgb16f=34843);Qb.webgl_color_buffer_float&&(Ib.rgba32f=34836);var sc=[];Object.keys(Ib).forEach(function(Wb){sc[Ib[Wb]]=Wb});var pc=0,zc={};Tc.prototype.decRef=function(){0>=
--this.refCount&&tb(this)};Qc.profile&&(Ec.getTotalRenderbufferSize=function(){var Wb=0;Object.keys(zc).forEach(function(Ub){Wb+=zc[Ub].stats.size});return Wb});return{create:function(Wb,Ub){function yb(Vb,mc){var tc=0,Uc=0,kd=32854;"object"===typeof Vb&&Vb?("shape"in Vb?(Uc=Vb.shape,tc=Uc[0]|0,Uc=Uc[1]|0):("radius"in Vb&&(tc=Uc=Vb.radius|0),"width"in Vb&&(tc=Vb.width|0),"height"in Vb&&(Uc=Vb.height|0)),"format"in Vb&&(kd=Ib[Vb.format])):"number"===typeof Vb?(tc=Vb|0,Uc="number"===typeof mc?mc|0:
tc):Vb||(tc=Uc=1);if(tc!==ac.width||Uc!==ac.height||kd!==ac.format)return yb.width=ac.width=tc,yb.height=ac.height=Uc,ac.format=kd,kb.bindRenderbuffer(36161,ac.renderbuffer),kb.renderbufferStorage(36161,kd,tc,Uc),Qc.profile&&(ac.stats.size=Db[ac.format]*ac.width*ac.height),yb.format=sc[ac.format],yb}var ac=new Tc(kb.createRenderbuffer());zc[ac.id]=ac;Ec.renderbufferCount++;yb(Wb,Ub);yb.resize=function(Vb,mc){Vb|=0;mc=mc|0||Vb;if(Vb===ac.width&&mc===ac.height)return yb;yb.width=ac.width=Vb;yb.height=
ac.height=mc;kb.bindRenderbuffer(36161,ac.renderbuffer);kb.renderbufferStorage(36161,ac.format,Vb,mc);Qc.profile&&(ac.stats.size=Db[ac.format]*ac.width*ac.height);return yb};yb._reglType="renderbuffer";yb._renderbuffer=ac;Qc.profile&&(yb.stats=ac.stats);yb.destroy=function(){ac.decRef()};return yb},clear:function(){$a(zc).forEach(tb)},restore:function(){$a(zc).forEach(function(Wb){Wb.renderbuffer=kb.createRenderbuffer();kb.bindRenderbuffer(36161,Wb.renderbuffer);kb.renderbufferStorage(36161,Wb.format,
Wb.width,Wb.height)});kb.bindRenderbuffer(36161,null)}}},xc=[];xc[6408]=4;xc[6407]=3;var Ic=[];Ic[5121]=1;Ic[5126]=4;Ic[36193]=2;var Ja=["x","y","z","w"],Pa="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),db={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,
"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Jb={never:512,less:513,"\x3c":513,equal:514,"\x3d":514,"\x3d\x3d":514,"\x3d\x3d\x3d":514,lequal:515,"\x3c\x3d":515,greater:516,"\x3e":516,notequal:517,"!\x3d":517,"!\x3d\x3d":517,gequal:518,"\x3e\x3d":518,always:519},Gb={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},cc={cw:2304,ccw:2305},uc=new ja(!1,!1,!1,function(){}),
fd=function(kb,Qb){function dc(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function Ec(zc,Wb,Ub){var yb=tb.pop()||new dc;yb.startQueryIndex=zc;yb.endQueryIndex=Wb;yb.sum=0;yb.stats=Ub;Ib.push(yb)}if(!Qb.ext_disjoint_timer_query)return null;var Qc=[],Tc=[],tb=[],Ib=[],sc=[],pc=[];return{beginQuery:function(zc){var Wb=Qc.pop()||Qb.ext_disjoint_timer_query.createQueryEXT();Qb.ext_disjoint_timer_query.beginQueryEXT(35007,Wb);Tc.push(Wb);Ec(Tc.length-1,Tc.length,zc)},endQuery:function(){Qb.ext_disjoint_timer_query.endQueryEXT(35007)},
pushScopeStats:Ec,update:function(){var zc;var Wb=Tc.length;if(0!==Wb){pc.length=Math.max(pc.length,Wb+1);sc.length=Math.max(sc.length,Wb+1);sc[0]=0;var Ub=pc[0]=0;for(zc=Wb=0;zc<Tc.length;++zc){var yb=Tc[zc];Qb.ext_disjoint_timer_query.getQueryObjectEXT(yb,34919)?(Ub+=Qb.ext_disjoint_timer_query.getQueryObjectEXT(yb,34918),Qc.push(yb)):Tc[Wb++]=yb;sc[zc+1]=Ub;pc[zc+1]=Wb}Tc.length=Wb;for(zc=Wb=0;zc<Ib.length;++zc){Ub=Ib[zc];var ac=Ub.startQueryIndex;yb=Ub.endQueryIndex;Ub.sum+=sc[yb]-sc[ac];ac=pc[ac];
yb=pc[yb];yb===ac?(Ub.stats.gpuTime+=Ub.sum/1E6,tb.push(Ub)):(Ub.startQueryIndex=ac,Ub.endQueryIndex=yb,Ib[Wb++]=Ub)}Ib.length=Wb}},getNumPendingQueries:function(){return Tc.length},clear:function(){Qc.push.apply(Qc,Tc);for(var zc=0;zc<Qc.length;zc++)Qb.ext_disjoint_timer_query.deleteQueryEXT(Qc[zc]);Tc.length=0;Qc.length=0},restore:function(){Tc.length=0;Qc.length=0}}};return function(kb){function Qb(){if(0===te.length)kd&&kd.update(),vf=null;else{vf=qa.next(Qb);zc();for(var Sd=te.length-1;0<=Sd;--Sd){var De=
te[Sd];De&&De(Lc,null,0)}yb.flush();kd&&kd.update()}}function dc(){!vf&&0<te.length&&(vf=qa.next(Qb))}function Ec(){vf&&(qa.cancel(Qb),vf=null)}function Qc(Sd){Sd.preventDefault();Ec();qf.forEach(function(De){De()})}function Tc(Sd){yb.getError();Vb.restore();Sc.restore();Nc.restore();id.restore();Nd.restore();Rd.restore();Xc.restore();kd&&kd.restore();Wd.procs.refresh();dc();sf.forEach(function(De){De()})}function tb(Sd){function De(Mb){var $b={},Mc={};Object.keys(Mb).forEach(function(Hd){var qd=
Mb[Hd];na.isDynamic(qd)?Mc[Hd]=na.unbox(qd,Hd):$b[Hd]=qd});return{dynamic:Mc,"static":$b}}var hf=De(Sd.context||{}),bf=De(Sd.uniforms||{}),Qe=De(Sd.attributes||{}),He=De(function(Mb){function $b(Hd){if(Hd in Mc){var qd=Mc[Hd];delete Mc[Hd];Object.keys(qd).forEach(function(qe){Mc[Hd+"."+qe]=qd[qe]})}}var Mc=la({},Mb);delete Mc.uniforms;delete Mc.attributes;delete Mc.context;delete Mc.vao;"stencil"in Mc&&Mc.stencil.op&&(Mc.stencil.opBack=Mc.stencil.opFront=Mc.stencil.op,delete Mc.stencil.op);$b("blend");
$b("depth");$b("cull");$b("stencil");$b("polygonOffset");$b("scissor");$b("sample");"vao"in Mb&&(Mc.vao=Mb.vao);return Mc}(Sd));Sd={gpuTime:0,cpuTime:0,count:0};hf=Wd.compile(He,Qe,bf,hf,Sd);var $e=hf.draw,df=hf.batch,Rc=hf.scope,Gd=[];return la(function(Mb,$b){var Mc;if("function"===typeof Mb)return Rc.call(this,null,Mb,0);if("function"===typeof $b)if("number"===typeof Mb)for(Mc=0;Mc<Mb;++Mc)Rc.call(this,null,$b,Mc);else if(Array.isArray(Mb))for(Mc=0;Mc<Mb.length;++Mc)Rc.call(this,Mb[Mc],$b,Mc);
else return Rc.call(this,Mb,$b,0);else if("number"===typeof Mb){if(0<Mb){$b=df.call;for(Mc=Mb|0;Gd.length<Mc;)Gd.push(null);return $b.call(df,this,Gd,Mb|0)}}else if(Array.isArray(Mb)){if(Mb.length)return df.call(this,Mb,Mb.length)}else return $e.call(this,Mb)},{stats:Sd})}function Ib(Sd,De){Sd=0;Wd.procs.poll();var hf=De.color;hf&&(yb.clearColor(+hf[0]||0,+hf[1]||0,+hf[2]||0,+hf[3]||0),Sd|=16384);"depth"in De&&(yb.clearDepth(+De.depth),Sd|=256);"stencil"in De&&(yb.clearStencil(De.stencil|0),Sd|=1024);
yb.clear(Sd)}function sc(Sd){te.push(Sd);dc();return{cancel:function(){function De(){var bf=ra(te,De);te[bf]=te[te.length-1];--te.length;0>=te.length&&Ec()}var hf=ra(te,Sd);te[hf]=De}}}function pc(){var Sd=Se.viewport,De=Se.scissor_box;Sd[0]=Sd[1]=De[0]=De[1]=0;Lc.viewportWidth=Lc.framebufferWidth=Lc.drawingBufferWidth=Sd[2]=De[2]=yb.drawingBufferWidth;Lc.viewportHeight=Lc.framebufferHeight=Lc.drawingBufferHeight=Sd[3]=De[3]=yb.drawingBufferHeight}function zc(){Lc.tick+=1;Lc.time=Ub();pc();Wd.procs.poll()}
function Wb(){pc();Wd.procs.refresh();kd&&kd.update()}function Ub(){return(ta()-Bd)/1E3}kb=l(kb);if(!kb)return null;var yb=kb.gl,ac=yb.getContextAttributes();yb.isContextLost();var Vb=c(yb,kb);if(!Vb)return null;var mc=m(),tc={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},Uc=Vb.extensions,kd=fd(yb,Uc),Bd=ta(),Fd=yb.drawingBufferWidth,yd=yb.drawingBufferHeight,Lc={tick:0,time:0,viewportWidth:Fd,viewportHeight:yd,
framebufferWidth:Fd,framebufferHeight:yd,drawingBufferWidth:Fd,drawingBufferHeight:yd,pixelRatio:kb.pixelRatio},cd=Ia(yb,Uc),Nc=A(yb,tc,kb,function(Sd){return Xc.destroyBuffer(Sd)}),Xc=Z(yb,Uc,cd,tc,Nc),Zc=D(yb,Uc,Nc,tc),Sc=ca(yb,mc,tc,kb),id=H(yb,Uc,cd,function(){Wd.procs.poll()},Lc,tc,kb),Nd=Rb(yb,Uc,cd,tc,kb),Rd=M(yb,Uc,cd,id,Nd,tc),Wd=xa(yb,mc,Uc,cd,Nc,Zc,id,Rd,{},Xc,Sc,{elements:null,primitive:4,count:-1,offset:0,instances:-1},Lc,kd,kb);mc=W(yb,Rd,Wd.procs.poll,Lc,ac,Uc,cd);var Se=Wd.next,Ne=
yb.canvas,te=[],qf=[],sf=[],of=[kb.onDestroy],vf=null;Ne&&(Ne.addEventListener("webglcontextlost",Qc,!1),Ne.addEventListener("webglcontextrestored",Tc,!1));var Bf=Rd.setFBO=tb({framebuffer:na.define.call(null,1,"framebuffer")});Wb();ac=la(tb,{clear:function(Sd){if("framebuffer"in Sd)if(Sd.framebuffer&&"framebufferCube"===Sd.framebuffer_reglType)for(var De=0;6>De;++De)Bf(la({framebuffer:Sd.framebuffer.faces[De]},Sd),Ib);else Bf(Sd,Ib);else Ib(null,Sd)},prop:na.define.bind(null,1),context:na.define.bind(null,
2),"this":na.define.bind(null,3),draw:tb({}),buffer:function(Sd){return Nc.create(Sd,34962,!1,!1)},elements:function(Sd){return Zc.create(Sd,!1)},texture:id.create2D,cube:id.createCube,renderbuffer:Nd.create,framebuffer:Rd.create,framebufferCube:Rd.createCube,vao:Xc.createVAO,attributes:ac,frame:sc,on:function(Sd,De){switch(Sd){case "frame":return sc(De);case "lost":var hf=qf;break;case "restore":hf=sf;break;case "destroy":hf=of}hf.push(De);return{cancel:function(){for(var bf=0;bf<hf.length;++bf)if(hf[bf]===
De){hf[bf]=hf[hf.length-1];hf.pop();break}}}},limits:cd,hasExtension:function(Sd){return 0<=cd.extensions.indexOf(Sd.toLowerCase())},read:mc,destroy:function(){te.length=0;Ec();Ne&&(Ne.removeEventListener("webglcontextlost",Qc),Ne.removeEventListener("webglcontextrestored",Tc));Sc.clear();Rd.clear();Nd.clear();id.clear();Zc.clear();Nc.clear();Xc.clear();kd&&kd.clear();of.forEach(function(Sd){Sd()})},_gl:yb,_refresh:Wb,poll:function(){zc();kd&&kd.update()},now:Ub,stats:tc});kb.onDone(null,ac);return ac}})},
{}],541:[function(b,N,G){var p="",n;N.exports=function(k,m){if("string"!==typeof k)throw new TypeError("expected a string");if(1===m)return k;if(2===m)return k+k;var a=k.length*m;if(n!==k||"undefined"===typeof n)n=k,p="";else if(p.length>=a)return p.substr(0,a);for(;a>p.length&&1<m;)m&1&&(p+=k),m>>=1,k+=k;p+=k;return p=p.substr(0,a)}},{}],542:[function(b,N,G){(function(p){(function(){N.exports=p.performance&&p.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this)}).call(this,
"undefined"!==typeof Re?Re:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],543:[function(b,N,G){N.exports=function(p){for(var n=p.length,k=p[p.length-1],m=n,a=n-2;0<=a;--a){var g=k,h=p[a];k=g+h;g=k-g;if(h-=g)p[--m]=k,k=h}var r=0;for(a=m;a<n;++a)g=p[a],h=k,k=g+h,g=k-g,(h-=g)&&(p[r++]=h);p[r++]=k;p.length=r;return p}},{}],544:[function(b,N,G){function p(l){if(1===l.length)return l[0];if(2===l.length)return["sum(",l[0],",",l[1],")"].join("");var c=l.length>>1;return["sum(",
p(l.slice(0,c)),",",p(l.slice(c)),")"].join("")}function n(l){if(2===l.length)return["sum(prod(",l[0][0],",",l[1][1],"),prod(-",l[0][1],",",l[1][0],"))"].join("");for(var c=[],d=0;d<l.length;++d){for(var e=c,f=e.push,q=l,t=d,w=Array(q.length-1),x=1;x<q.length;++x)for(var z=w[x-1]=Array(q.length-1),B=0,A=0;B<q.length;++B)B!==t&&(z[A++]=q[x][B]);q=n(w);t=d&1?"-":"";f.call(e,["scale(",q,",",t,l[0][d],")"].join(""))}return p(c)}function k(l){for(var c=Function,d=Array(l),e=0;e<l;++e){d[e]=Array(l);for(var f=
0;f<l;++f)d[e][f]=["m[",e,"][",f,"]"].join("")}return(new c("sum","scale","prod","compress",["function robustDeterminant",l,"(m){return compress(",n(d),")};return robustDeterminant",l].join("")))(a,g,m,h)}var m=b("two-product"),a=b("robust-sum"),g=b("robust-scale"),h=b("robust-compress"),r=[function(){return[0]},function(l){return[l[0][0]]}];(function(){for(;6>r.length;)r.push(k(r.length));for(var l=[],c=["function robustDeterminant(m){switch(m.length){"],d=0;6>d;++d)l.push("det"+d),c.push("case ",
d,":return det",d,"(m);");c.push("}var det\x3dCACHE[m.length];if(!det)det\x3dCACHE[m.length]\x3dgen(m.length);return det(m);}return robustDeterminant");l.push("CACHE","gen",c.join(""));l=Function.apply(void 0,l);N.exports=l.apply(void 0,r.concat([r,k]));for(d=0;d<r.length;++d)N.exports[d]=r[d]})()},{"robust-compress":543,"robust-scale":550,"robust-sum":553,"two-product":604}],545:[function(b,N,G){var p=b("two-product"),n=b("robust-sum");N.exports=function(k,m){for(var a=p(k[0],m[0]),g=1;g<k.length;++g)a=
n(a,p(k[g],m[g]));return a}},{"robust-sum":553,"two-product":604}],546:[function(b,N,G){function p(e,f){for(var q=Array(e.length-1),t=1;t<e.length;++t)for(var w=q[t-1]=Array(e.length-1),x=0,z=0;x<e.length;++x)x!==f&&(w[z++]=e[t][x]);return q}function n(e){if(1===e.length)return e[0];if(2===e.length)return["sum(",e[0],",",e[1],")"].join("");var f=e.length>>1;return["sum(",n(e.slice(0,f)),",",n(e.slice(f)),")"].join("")}function k(e,f){return"m"===e.charAt(0)?"w"===f.charAt(0)?(e=e.split("["),["w",
f.substr(1),"m",e[0].substr(1)].join("")):["prod(",e,",",f,")"].join(""):k(f,e)}function m(e){if(2===e.length)return[["diff(",k(e[0][0],e[1][1]),",",k(e[1][0],e[0][1]),")"].join("")];for(var f=[],q=0;q<e.length;++q){var t=f,w=t.push,x=n(m(p(e,q)));var z=q&1?"-":"";w.call(t,["scale(",x,",",z,e[0][q],")"].join(""))}return f}function a(e){for(var f=[],q=[],t=Array(e),w=0;w<e;++w){t[w]=Array(e);for(var x=0;x<e;++x)t[w][x]=["m",x,"[",e-w-2,"]"].join("")}for(w=0;w<e;++w)t[0][w]="1",t[e-1][w]="w"+w;for(w=
0;w<e;++w)0===(w&1)?f.push.apply(f,m(p(t,w))):q.push.apply(q,m(p(t,w)));f=n(f);q=n(q);t="exactInSphere"+e;x=[];for(w=0;w<e;++w)x.push("m"+w);x=["function ",t,"(",x.join(),"){"];for(w=0;w<e;++w){var z=x,B=z.push,A=w;var D=w;for(var C=e,v=[],y=0;y<C-2;++y)v.push(["prod(m",D,"[",y,"],m",D,"[",y,"])"].join(""));D=n(v);B.call(z,"var w",A,"\x3d",D,";");for(z=0;z<e;++z)z!==w&&x.push("var w",w,"m",z,"\x3dscale(w",w,",m",z,"[0]);")}x.push("var p\x3d",f,",n\x3d",q,",d\x3ddiff(p,n);return d[d.length-1];}return ",
t);return(new Function("sum","diff","prod","scale",x.join("")))(r,l,h,c)}function g(e){var f=d[e.length];f||(f=d[e.length]=a(e.length));return f.apply(void 0,e)}var h=b("two-product"),r=b("robust-sum"),l=b("robust-subtract"),c=b("robust-scale"),d=[function(){return 0},function(){return 0},function(){return 0}];(function(){for(;6>=d.length;)d.push(a(d.length));for(var e=[],f=["slow"],q=0;6>=q;++q)e.push("a"+q),f.push("o"+q);var t=["function testInSphere(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];
for(q=2;6>=q;++q)t.push("case ",q,":return o",q,"(",e.slice(0,q).join(),");");t.push("}var s\x3dnew Array(arguments.length);for(var i\x3d0;i\x3carguments.length;++i){s[i]\x3darguments[i]};return slow(s);}return testInSphere");f.push(t.join(""));e=Function.apply(void 0,f);N.exports=e.apply(void 0,[g].concat(d));for(q=0;6>=q;++q)N.exports[q]=d[q]})()},{"robust-scale":550,"robust-subtract":552,"robust-sum":553,"two-product":604}],547:[function(b,N,G){function p(m){for(var a="robustLinearSolve"+m+"d",
g=["function ",a,"(A,b){return ["],h=0;h<m;++h){g.push("det([");for(var r=0;r<m;++r){0<r&&g.push(",");g.push("[");for(var l=0;l<m;++l)0<l&&g.push(","),l===h?g.push("+b[",r,"]"):g.push("+A[",r,"][",l,"]");g.push("]")}g.push("]),")}g.push("det(A)]}return ",a);a=new Function("det",g.join(""));return 6>m?a(n[m]):a(n)}var n=b("robust-determinant"),k=[function(){return[0]},function(m,a){return[[a[0]],[m[0][0]]]}];(function(){for(;6>k.length;)k.push(p(k.length));for(var m=[],a=["function dispatchLinearSolve(A,b){switch(A.length){"],
g=0;6>g;++g)m.push("s"+g),a.push("case ",g,":return s",g,"(A,b);");a.push("}var s\x3dCACHE[A.length];if(!s)s\x3dCACHE[A.length]\x3dg(A.length);return s(A,b)}return dispatchLinearSolve");m.push("CACHE","g",a.join(""));m=Function.apply(void 0,m);N.exports=m.apply(void 0,k.concat([k,p]));for(g=0;6>g;++g)N.exports[g]=k[g]})()},{"robust-determinant":544}],548:[function(b,N,G){function p(f,q){for(var t=Array(f.length-1),w=1;w<f.length;++w)for(var x=t[w-1]=Array(f.length-1),z=0,B=0;z<f.length;++z)z!==q&&
(x[B++]=f[w][z]);return t}function n(f){if(1===f.length)return f[0];if(2===f.length)return["sum(",f[0],",",f[1],")"].join("");var q=f.length>>1;return["sum(",n(f.slice(0,q)),",",n(f.slice(q)),")"].join("")}function k(f){if(2===f.length)return[["sum(prod(",f[0][0],",",f[1][1],"),prod(-",f[0][1],",",f[1][0],"))"].join("")];for(var q=[],t=0;t<f.length;++t){var w=q,x=w.push,z=n(k(p(f,t)));var B=t&1?"-":"";x.call(w,["scale(",z,",",B,f[0][t],")"].join(""))}return q}function m(f){for(var q=[],t=[],w=Array(f),
x=0;x<f;++x){w[x]=Array(f);for(var z=0;z<f;++z)w[x][z]=["m",z,"[",f-x-1,"]"].join("")}x=[];for(z=0;z<f;++z)0===(z&1)?q.push.apply(q,k(p(w,z))):t.push.apply(t,k(p(w,z))),x.push("m"+z);q=n(q);t=n(t);f="orientation"+f+"Exact";f=["function ",f,"(",x.join(),"){var p\x3d",q,",n\x3d",t,",d\x3dsub(p,n);return d[d.length-1];};return ",f].join("");return(new Function("sum","prod","scale","sub",f))(h,g,r,l)}function a(f){var q=e[f.length];q||(q=e[f.length]=m(f.length));return q.apply(void 0,f)}var g=b("two-product"),
h=b("robust-sum"),r=b("robust-scale"),l=b("robust-subtract"),c=m(3),d=m(4),e=[function(){return 0},function(){return 0},function(f,q){return q[0]-f[0]},function(f,q,t){var w=(f[1]-t[1])*(q[0]-t[0]),x=(f[0]-t[0])*(q[1]-t[1]),z=w-x;if(0<w){if(0>=x)return z;w+=x}else if(0>w){if(0<=x)return z;w=-(w+x)}else return z;w*=3.3306690738754716E-16;return z>=w||z<=-w?z:c(f,q,t)},function(f,q,t,w){var x=f[0]-w[0],z=q[0]-w[0],B=t[0]-w[0],A=f[1]-w[1],D=q[1]-w[1],C=t[1]-w[1],v=f[2]-w[2],y=q[2]-w[2],F=t[2]-w[2],J=
z*C,K=B*D;B*=A;C*=x;x*=D;A*=z;z=v*(J-K)+y*(B-C)+F*(x-A);v=7.771561172376103E-16*((Math.abs(J)+Math.abs(K))*Math.abs(v)+(Math.abs(B)+Math.abs(C))*Math.abs(y)+(Math.abs(x)+Math.abs(A))*Math.abs(F));return z>v||-z>v?z:d(f,q,t,w)}];(function(){for(;5>=e.length;)e.push(m(e.length));for(var f=[],q=["slow"],t=0;5>=t;++t)f.push("a"+t),q.push("o"+t);var w=["function getOrientation(",f.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(t=2;5>=t;++t)w.push("case ",t,":return o",t,"(",f.slice(0,
t).join(),");");w.push("}var s\x3dnew Array(arguments.length);for(var i\x3d0;i\x3carguments.length;++i){s[i]\x3darguments[i]};return slow(s);}return getOrientation");q.push(w.join(""));f=Function.apply(void 0,q);N.exports=f.apply(void 0,[a].concat(e));for(t=0;5>=t;++t)N.exports[t]=e[t]})()},{"robust-scale":550,"robust-subtract":552,"robust-sum":553,"two-product":604}],549:[function(b,N,G){var p=b("robust-sum"),n=b("robust-scale");N.exports=function(k,m){if(1===k.length)return n(m,k[0]);if(1===m.length)return n(k,
m[0]);if(0===k.length||0===m.length)return[0];var a=[0];if(k.length<m.length)for(var g=0;g<k.length;++g)a=p(a,n(m,k[g]));else for(g=0;g<m.length;++g)a=p(a,n(k,m[g]));return a}},{"robust-scale":550,"robust-sum":553}],550:[function(b,N,G){var p=b("two-product"),n=b("two-sum");N.exports=function(k,m){var a=k.length;if(1===a)return k=p(k[0],m),k[0]?k:[k[1]];var g=Array(2*a),h=[.1,.1],r=[.1,.1],l=0;p(k[0],m,h);h[0]&&(g[l++]=h[0]);for(var c=1;c<a;++c){p(k[c],m,r);n(h[1],r[0],h);h[0]&&(g[l++]=h[0]);var d=
r[1],e=h[1],f=d+e;d=e-(f-d);h[1]=f;d&&(g[l++]=d)}h[1]&&(g[l++]=h[1]);0===l&&(g[l++]=0);g.length=l;return g}},{"two-product":604,"two-sum":605}],551:[function(b,N,G){N.exports=function(n,k,m,a){var g=p(n,m,a),h=p(k,m,a);if(0<g&&0<h||0>g&&0>h)return!1;var r=p(m,n,k),l=p(a,n,k);if(0<r&&0<l||0>r&&0>l)return!1;if(0===g&&0===h&&0===r&&0===l){a:{for(g=0;2>g;++g){h=n[g];r=k[g];l=Math.max(h,r);var c=m[g],d=a[g],e=Math.min(c,d);if(Math.max(c,d)<Math.min(h,r)||l<e){n=!1;break a}}n=!0}return n}return!0};var p=
b("robust-orientation")[3]},{"robust-orientation":548}],552:[function(b,N,G){N.exports=function(p,n){var k=p.length|0,m=n.length|0;if(1===k&&1===m)return p=p[0],k=-n[0],n=p+k,m=n-p,n=(p=p-(n-m)+(k-m))?[p,n]:[n],n;var a=Array(k+m),g=0,h=0,r=0,l=Math.abs,c=p[h],d=l(c),e=-n[r],f=l(e);if(d<f){var q=c;h+=1;h<k&&(c=p[h],d=l(c))}else q=e,r+=1,r<m&&(e=-n[r],f=l(e));if(h<k&&d<f||r>=m){var t=c;h+=1;h<k&&(c=p[h],d=l(c))}else t=e,r+=1,r<m&&(e=-n[r],f=l(e));var w=t+q;q-=w-t;for(var x=w,z;h<k&&r<m;)d<f?(t=c,h+=
1,h<k&&(c=p[h],d=l(c))):(t=e,r+=1,r<m&&(e=-n[r],f=l(e))),w=t+q,t=w-t,(t=q-t)&&(a[g++]=t),t=x+w,z=t-x,q=t-z,w-=z,x-=q,q=x+w,x=t;for(;h<k;)t=c,w=t+q,t=w-t,(t=q-t)&&(a[g++]=t),t=x+w,z=t-x,q=t-z,w-=z,x-=q,q=x+w,x=t,h+=1,h<k&&(c=p[h]);for(;r<m;)t=e,w=t+q,t=w-t,(t=q-t)&&(a[g++]=t),t=x+w,z=t-x,q=t-z,w-=z,x-=q,q=x+w,x=t,r+=1,r<m&&(e=-n[r]);q&&(a[g++]=q);x&&(a[g++]=x);g||(a[g++]=0);a.length=g;return a}},{}],553:[function(b,N,G){N.exports=function(p,n){var k=p.length|0,m=n.length|0;if(1===k&&1===m)return p=
p[0],k=n[0],n=p+k,m=n-p,n=(p=p-(n-m)+(k-m))?[p,n]:[n],n;var a=Array(k+m),g=0,h=0,r=0,l=Math.abs,c=p[h],d=l(c),e=n[r],f=l(e);if(d<f){var q=c;h+=1;h<k&&(c=p[h],d=l(c))}else q=e,r+=1,r<m&&(e=n[r],f=l(e));if(h<k&&d<f||r>=m){var t=c;h+=1;h<k&&(c=p[h],d=l(c))}else t=e,r+=1,r<m&&(e=n[r],f=l(e));var w=t+q;q-=w-t;for(var x=w,z;h<k&&r<m;)d<f?(t=c,h+=1,h<k&&(c=p[h],d=l(c))):(t=e,r+=1,r<m&&(e=n[r],f=l(e))),w=t+q,t=w-t,(t=q-t)&&(a[g++]=t),t=x+w,z=t-x,q=t-z,w-=z,x-=q,q=x+w,x=t;for(;h<k;)t=c,w=t+q,t=w-t,(t=q-t)&&
(a[g++]=t),t=x+w,z=t-x,q=t-z,w-=z,x-=q,q=x+w,x=t,h+=1,h<k&&(c=p[h]);for(;r<m;)t=e,w=t+q,t=w-t,(t=q-t)&&(a[g++]=t),t=x+w,z=t-x,q=t-z,w-=z,x-=q,q=x+w,x=t,r+=1,r<m&&(e=n[r]);q&&(a[g++]=q);x&&(a[g++]=x);g||(a[g++]=0);a.length=g;return a}},{}],554:[function(b,N,G){function p(a,g){for(var h in a)g[h]=a[h]}function n(a,g,h){return m(a,g,h)}var k=b("buffer"),m=k.Buffer;m.from&&m.alloc&&m.allocUnsafe&&m.allocUnsafeSlow?N.exports=k:(p(k,G),G.Buffer=n);n.prototype=Object.create(m.prototype);p(m,n);n.from=function(a,
g,h){if("number"===typeof a)throw new TypeError("Argument must not be a number");return m(a,g,h)};n.alloc=function(a,g,h){if("number"!==typeof a)throw new TypeError("Argument must be a number");a=m(a);void 0!==g?"string"===typeof h?a.fill(g,h):a.fill(g):a.fill(0);return a};n.allocUnsafe=function(a){if("number"!==typeof a)throw new TypeError("Argument must be a number");return m(a)};n.allocUnsafeSlow=function(a){if("number"!==typeof a)throw new TypeError("Argument must be a number");return k.SlowBuffer(a)}},
{buffer:117}],555:[function(b,N,G){N.exports=function(p){return 0>p?-1:0<p?1:0}},{}],556:[function(b,N,G){N.exports=function(k){return n(p(k))};var p=b("boundary-cells"),n=b("reduce-simplicial-complex")},{"boundary-cells":107,"reduce-simplicial-complex":535}],557:[function(b,N,G){N.exports=function(a,g,h,r){h=h||0;if("undefined"===typeof r){for(var l=a.length,c=r=0;c<l;++c)r=Math.max(r,a[c].length)|0;--r}if(0===a.length||1>r)return{cells:[],vertexIds:[],vertexWeights:[]};c=+h;var d=g.length;l=n.mallocUint8(d);
for(var e=0;e<d;++e)l[e]=g[e]<c|0;var f=r,q=a.length;c=n.mallocUint32(2*(f*(f+1)/2*q|0));for(e=d=0;e<q;++e){var t=a[e];f=t.length;for(var w=0;w<f;++w)for(var x=0;x<w;++x){var z=t[x],B=t[w];c[d++]=Math.min(z,B)|0;c[d++]=Math.max(z,B)|0}}k(p(c,[d/2|0,2]));for(e=f=2;e<d;e+=2)if(c[e-2]!==c[e]||c[e-1]!==c[e+1])c[f++]=c[e],c[f++]=c[e+1];c=p(c,[f/2|0,2]);h=+h;d=c.data;e=c.shape[0];f=n.mallocDouble(e);for(t=q=0;t<e;++t)w=d[2*t],x=d[2*t+1],l[w]!==l[x]&&(z=g[w],B=g[x],d[2*q]=w,d[2*q+1]=x,f[q++]=(B-h)/(B-z));
c.shape[0]=q;h=p(f,[q]);d=g.length|0;g=n.mallocInt32(2*d);e=c.shape[0];f=c.data;for(t=q=g[0]=0;t<e;++t)if(w=f[2*t],w!==q){for(g[2*q+1]=t;++q<w;)g[2*q]=t,g[2*q+1]=t;g[2*q]=t}for(g[2*q+1]=e;++q<d;)g[2*q]=g[2*q+1]=e;a=m(r)(a,c.data,g,l);d=c.shape[0]|0;e=c.data;r=Array(d);for(f=0;f<d;++f)r[f]=[e[2*f],e[2*f+1]];d=[].slice.call(h.data,0,h.shape[0]);n.free(l);n.free(c.data);n.free(h.data);n.free(g);return{cells:a,vertexIds:r,vertexWeights:d}};var p=b("ndarray"),n=b("typedarray-pool"),k=b("ndarray-sort"),
m=b("./lib/codegen")},{"./lib/codegen":558,ndarray:483,"ndarray-sort":482,"typedarray-pool":617}],558:[function(b,N,G){N.exports=function(m){var a=k[m];if(!a){a=k;var g=Array(m+1);g[0]=[[]];for(var h=1;h<=m;++h)for(var r=g[h]=n(h),l=0;l<r.length;++l);var c=["function B(C,E,i,j){","var a\x3dMath.min(i,j)|0,b\x3dMath.max(i,j)|0,l\x3dC[2*a],h\x3dC[2*a+1];","while(l\x3ch){","var m\x3d(l+h)\x3e\x3e1,v\x3dE[2*m+1];","if(v\x3d\x3d\x3db){return m}","if(b\x3cv){h\x3dm}else{l\x3dm+1}","}","return l;","};",
"function getContour",m,"d(F,E,C,S){","var n\x3dF.length,R\x3d[];","for(var i\x3d0;i\x3cn;++i){var c\x3dF[i],l\x3dc.length;"];for(h=m+1;1<h;--h){h<m+1&&c.push("else ");c.push("if(l\x3d\x3d\x3d",h,"){");r=[];for(l=0;l<h;++l)r.push("(S[c["+l+"]]\x3c\x3c"+l+")");c.push("var M\x3d",r.join("+"),";if(M\x3d\x3d\x3d0||M\x3d\x3d\x3d",(1<<h)-1,"){continue}switch(M){");r=g[h-1];for(l=0;l<r.length;++l){c.push("case ",l,":");var d=r[l];if(!(0>=d.length)){c.push("R.push(");for(var e=0;e<d.length;++e){var f=d[e];
0<e&&c.push(",");c.push("[");for(var q=0;q<f.length;++q){var t=f[q];0<q&&c.push(",");c.push("B(C,E,c[",t[0],"],c[",t[1],"])")}c.push("]")}c.push(");")}c.push("break;")}c.push("}}")}c.push("}return R;};return getContour",m,"d");g=(new Function("pool",c.join("")))(p);a=a[m]=g}return a};var p=b("typedarray-pool"),n=b("marching-simplex-table"),k={}},{"marching-simplex-table":462,"typedarray-pool":617}],559:[function(b,N,G){function p(c,d){var e=c.length,f=c.length-d.length,q=Math.min;if(f)return f;switch(e){case 0:return 0;
case 1:return c[0]-d[0];case 2:return(e=c[0]+c[1]-d[0]-d[1])?e:q(c[0],c[1])-q(d[0],d[1]);case 3:f=c[0]+c[1];var t=d[0]+d[1];if(e=f+c[2]-(t+d[2]))return e;var w=q(c[0],c[1]),x=q(d[0],d[1]);return(e=q(w,c[2])-q(x,d[2]))?e:q(w+c[2],f)-q(x+d[2],t);default:c=c.slice(0);c.sort();d=d.slice(0);d.sort();for(q=0;q<e;++q)if(f=c[q]-d[q])return f;return 0}}function n(c,d){return p(c[0],d[0])}function k(c,d){if(d){for(var e=c.length,f=Array(e),q=0;q<e;++q)f[q]=[c[q],d[q]];f.sort(n);for(q=0;q<e;++q)c[q]=f[q][0],
d[q]=f[q][1]}else c.sort(p);return c}function m(c){if(0===c.length)return[];for(var d=1,e=c.length,f=1;f<e;++f){var q=c[f];p(q,c[f-1])&&(f===d?d++:c[d++]=q)}c.length=d;return c}function a(c,d){for(var e=0,f=c.length-1,q=-1;e<=f;){var t=e+f>>1,w=p(c[t],d);0>=w?(0===w&&(q=t),e=t+1):0<w&&(f=t-1)}return q}function g(c,d){for(var e=Array(c.length),f=0,q=e.length;f<q;++f)e[f]=[];q=[];f=0;for(var t=d.length;f<t;++f)for(var w=d[f],x=w.length,z=1,B=1<<x;z<B;++z){q.length=r.popCount(z);for(var A=0,D=0;D<x;++D)z&
1<<D&&(q[A++]=w[D]);A=a(c,q);if(!(0>A))for(;!(e[A++].push(f),A>=c.length||0!==p(c[A],q)););}return e}function h(c,d){if(0>d)return[];for(var e=[],f=(1<<d+1)-1,q=0;q<c.length;++q)for(var t=c[q],w=f;w<1<<t.length;w=r.nextCombination(w)){for(var x=Array(d+1),z=0,B=0;B<t.length;++B)w&1<<B&&(x[z++]=t[B]);e.push(x)}return k(e)}"use restrict";var r=b("bit-twiddle"),l=b("union-find");G.dimension=function(c){for(var d=0,e=Math.max,f=0,q=c.length;f<q;++f)d=e(d,c[f].length);return d-1};G.countVertices=function(c){for(var d=
-1,e=Math.max,f=0,q=c.length;f<q;++f)for(var t=c[f],w=0,x=t.length;w<x;++w)d=e(d,t[w]);return d+1};G.cloneCells=function(c){for(var d=Array(c.length),e=0,f=c.length;e<f;++e)d[e]=c[e].slice(0);return d};G.compareCells=p;G.normalize=k;G.unique=m;G.findCell=a;G.incidence=g;G.dual=function(c,d){if(!d)return g(m(h(c,0)),c,0);for(var e=Array(d),f=0;f<d;++f)e[f]=[];f=0;for(d=c.length;f<d;++f)for(var q=c[f],t=0,w=q.length;t<w;++t)e[q[t]].push(f);return e};G.explode=function(c){for(var d=[],e=0,f=c.length;e<
f;++e)for(var q=c[e],t=q.length|0,w=1,x=1<<t;w<x;++w){for(var z=[],B=0;B<t;++B)w>>>B&1&&z.push(q[B]);d.push(z)}return k(d)};G.skeleton=h;G.boundary=function(c){for(var d=[],e=0,f=c.length;e<f;++e)for(var q=c[e],t=0,w=q.length;t<w;++t){for(var x=Array(q.length-1),z=0,B=0;z<w;++z)z!==t&&(x[B++]=q[z]);d.push(x)}return k(d)};G.connectedComponents=function(c,d){if(d){d=new l(d);for(var e=0;e<c.length;++e)for(var f=c[e],q=0;q<f.length;++q)for(var t=q+1;t<f.length;++t)d.link(f[q],f[t]);f=[];q=d.ranks;for(e=
0;e<q.length;++e)q[e]=-1;for(e=0;e<c.length;++e)t=d.find(c[e][0]),0>q[t]?(q[t]=f.length,f.push([c[e].slice(0)])):f[q[t]].push(c[e].slice(0));return f}d=m(k(h(c,0)));e=new l(d.length);for(f=0;f<c.length;++f)for(q=c[f],t=0;t<q.length;++t)for(var w=a(d,[q[t]]),x=t+1;x<q.length;++x)e.link(w,a(d,[q[x]]));q=[];t=e.ranks;for(f=0;f<t.length;++f)t[f]=-1;for(f=0;f<c.length;++f)w=e.find(a(d,[c[f][0]])),0>t[w]?(t[w]=q.length,q.push([c[f].slice(0)])):q[t[w]].push(c[f].slice(0));return q}},{"bit-twiddle":104,"union-find":618}],
560:[function(b,N,G){arguments[4][104][0].apply(G,arguments)},{dup:104}],561:[function(b,N,G){arguments[4][559][0].apply(G,arguments)},{"bit-twiddle":560,dup:559,"union-find":562}],562:[function(b,N,G){function p(n){this.roots=Array(n);this.ranks=Array(n);for(var k=0;k<n;++k)this.roots[k]=k,this.ranks[k]=0}"use restrict";N.exports=p;p.prototype.length=function(){return this.roots.length};p.prototype.makeSet=function(){var n=this.roots.length;this.roots.push(n);this.ranks.push(0);return n};p.prototype.find=
function(n){for(var k=this.roots;k[n]!==n;){var m=k[n];k[n]=k[m];n=m}return n};p.prototype.link=function(n,k){n=this.find(n);k=this.find(k);if(n!==k){var m=this.ranks,a=this.roots,g=m[n],h=m[k];g<h?a[n]=k:h<g?a[k]=n:(a[k]=n,++m[n])}}},{}],563:[function(b,N,G){N.exports=function(k,m,a){function g(K){if(B[K])return Infinity;var O=w[K],I=x[K];if(0>O||0>I)return Infinity;O=m[O];I=m[I];return Math.abs(p(m[K],O,I))/Math.sqrt(Math.pow(O[0]-I[0],2)+Math.pow(O[1]-I[1],2))}function h(K,O){var I=v[K],L=v[O];
v[K]=L;v[O]=I;y[I]=O;y[L]=K}function r(K){for(var O=z[v[K]];;){var I=O,L=2*K+1,H=2*(K+1),M=K;if(L<F){var Q=z[v[L]];Q<I&&(M=L,I=Q)}H<F&&z[v[H]]<I&&(M=H);if(M===K)return K;h(K,M);K=M}}function l(K){for(var O=z[v[K]];0<K;){var I=K&1?K-1>>1:(K>>1)-1;if(0<=I&&O<z[v[I]])h(K,I),K=I;else return K}}function c(){if(0<F){var K=v[0];h(0,F-1);--F;r(0);return K}return-1}function d(K,O){var I=v[K];if(z[I]===O)return K;z[I]=-Infinity;l(K);c();z[I]=O;F+=1;return l(F-1)}function e(K){if(!B[K]){B[K]=!0;var O=w[K];K=
x[K];0<=w[K]&&(w[K]=O);0<=x[O]&&(x[O]=K);0<=y[O]&&d(y[O],g(O));0<=y[K]&&d(y[K],g(K))}}function f(K,O){if(0>K[O])return O;var I=O,L=O;do{var H=K[L];if(!B[L]||0>H||H===L)break;L=H;H=K[L];if(!B[L]||0>H||H===L)break;L=H;I=K[I]}while(I!==L);for(;O!==L;O=K[O])K[O]=L;return L}for(var q=m.length,t=k.length,w=Array(q),x=Array(q),z=Array(q),B=Array(q),A=0;A<q;++A)w[A]=x[A]=-1,z[A]=Infinity,B[A]=!1;for(A=0;A<t;++A){var D=k[A];if(2!==D.length)throw Error("Input must be a graph");var C=D[1];D=D[0];x[D]=-1!==x[D]?
-2:C;w[C]=-1!==w[C]?-2:D}var v=[],y=Array(q);for(A=0;A<q;++A)Infinity>(z[A]=g(A))?(y[A]=v.length,v.push(A)):y[A]=-1;var F=v.length;for(A=F>>1;0<=A;--A)r(A);for(;;){A=c();if(0>A||z[A]>a)break;e(A)}a=[];for(A=0;A<q;++A)B[A]||(y[A]=a.length,a.push(m[A].slice()));var J=[];k.forEach(function(K){var O=f(w,K[0]);K=f(x,K[1]);0<=O&&0<=K&&O!==K&&(O=y[O],K=y[K],O!==K&&J.push([O,K]))});n.unique(n.normalize(J));return{positions:a,edges:J}};var p=b("robust-orientation"),n=b("simplicial-complex")},{"robust-orientation":548,
"simplicial-complex":561}],564:[function(b,N,G){function p(k,m){if(m[0][0]<m[1][0]){var a=m[0];m=m[1]}else if(m[0][0]>m[1][0])a=m[1],m=m[0];else{a=Math.min(k[0][1],k[1][1]);k=Math.max(k[0][1],k[1][1]);var g=Math.min(m[0][1],m[1][1]);m=Math.max(m[0][1],m[1][1]);return k<g?k-g:a>m?a-m:k-m}k[0][1]<k[1][1]?(g=k[0],k=k[1]):(g=k[1],k=k[0]);return(g=n(m,a,g))?g:(g=n(m,a,k))?g:k-m}N.exports=function(k,m){if(m[0][0]<m[1][0]){var a=m[0];var g=m[1]}else if(m[0][0]>m[1][0])a=m[1],g=m[0];else return p(m,k);if(k[0][0]<
k[1][0])m=k[0],k=k[1];else if(k[0][0]>k[1][0])m=k[1],k=k[0];else return-p(k,m);var h=n(a,g,k),r=n(a,g,m);if(0>h){if(0>=r)return h}else if(0<h){if(0<=r)return h}else if(r)return r;h=n(k,m,g);r=n(k,m,a);if(0>h){if(0>=r)return h}else if(0<h){if(0<=r)return h}else if(r)return r;return g[0]-k[0]};var n=b("robust-orientation")},{"robust-orientation":548}],565:[function(b,N,G){arguments[4][251][0].apply(G,arguments)},{dup:251}],566:[function(b,N,G){function p(c,d,e){this.slabs=c;this.coordinates=d;this.horizontal=
e}function n(c,d){return c.y-d}function k(c,d){for(var e=null;c;){var f=c.key;if(f[0][0]<f[1][0]){var q=f[0];var t=f[1]}else q=f[1],t=f[0];q=r(q,t,d);if(0>q)c=c.left;else if(0<q)if(d[0]!==f[1][0])e=c,c=c.right;else{if(f=k(c.right,d))return f;c=c.left}else{if(d[0]!==f[1][0])return c;if(f=k(c.right,d))return f;c=c.left}}return e}function m(c,d,e,f){this.y=c;this.index=d;this.start=e;this.closed=f}function a(c,d,e,f){this.x=c;this.segment=d;this.create=e;this.index=f}N.exports=function(c){for(var d=
c.length,e=2*d,f=Array(e),q=0;q<d;++q){var t=c[q],w=t[0][0]<t[1][0];f[2*q]=new a(t[0][0],t,w,q);f[2*q+1]=new a(t[1][0],t,!w,q)}f.sort(function(A,D){var C=A.x-D.x;return C?C:(C=A.create-D.create)?C:Math.min(A.segment[0][1],A.segment[1][1])-Math.min(D.segment[0][1],D.segment[1][1])});c=h(l);d=[];t=[];w=[];for(q=0;q<e;){for(var x=f[q].x,z=[];q<e;){var B=f[q];if(B.x!==x)break;q+=1;B.segment[0][0]===B.x&&B.segment[1][0]===B.x?B.create&&(B.segment[0][1]<B.segment[1][1]?(z.push(new m(B.segment[0][1],B.index,
!0,!0)),z.push(new m(B.segment[1][1],B.index,!1,!1))):(z.push(new m(B.segment[1][1],B.index,!0,!1)),z.push(new m(B.segment[0][1],B.index,!1,!0)))):c=B.create?c.insert(B.segment,B.index):c.remove(B.segment)}d.push(c.root);t.push(x);w.push(z)}return new p(d,t,w)};var g=b("binary-search-bounds"),h=b("functional-red-black-tree"),r=b("robust-orientation"),l=b("./lib/order-segments");p.prototype.castUp=function(c){var d=g.le(this.coordinates,c[0]);if(0>d)return-1;var e=k(this.slabs[d],c),f=-1;e&&(f=e.value);
if(this.coordinates[d]===c[0]){var q=null;e&&(q=e.key);0<d&&(e=k(this.slabs[d-1],c))&&(q?0<l(e.key,q)&&(q=e.key,f=e.value):(f=e.value,q=e.key));e=this.horizontal[d];if(0<e.length){var t=g.ge(e,c[1],n);if(t<e.length){d=e[t];if(c[1]===d.y){if(d.closed)return d.index;for(;t<e.length-1&&e[t+1].y===c[1];)if(t+=1,d=e[t],d.closed)return d.index;if(d.y===c[1]&&!d.start){t+=1;if(t>=e.length)return f;d=e[t]}}d.start?q?(c=r(q[0],q[1],[c[0],d.y]),q[0][0]>q[1][0]&&(c=-c),0<c&&(f=d.index)):f=d.index:d.y!==c[1]&&
(f=d.index)}}}return f}},{"./lib/order-segments":564,"binary-search-bounds":565,"functional-red-black-tree":255,"robust-orientation":548}],567:[function(b,N,G){function p(a,g){a=m(k(a,g),[g[g.length-1]]);return a[a.length-1]}function n(a,g,h,r){g=-g/(r-g);0>g?g=0:1<g&&(g=1);r=1-g;for(var l=a.length,c=Array(l),d=0;d<l;++d)c[d]=g*a[d]+r*h[d];return c}var k=b("robust-dot-product"),m=b("robust-sum");N.exports=function(a,g){for(var h=[],r=[],l=p(a[a.length-1],g),c=a[a.length-1],d,e=0;e<a.length;++e,c=
d){d=a[e];var f=p(d,g);if(0>l&&0<f||0<l&&0>f)l=n(c,f,d,l),h.push(l),r.push(l.slice());0>f?r.push(d.slice()):0<f?h.push(d.slice()):(h.push(d.slice()),r.push(d.slice()));l=f}return{positive:h,negative:r}};N.exports.positive=function(a,g){for(var h=[],r=p(a[a.length-1],g),l=a[a.length-1],c,d=0;d<a.length;++d,l=c){c=a[d];var e=p(c,g);(0>r&&0<e||0<r&&0>e)&&h.push(n(l,e,c,r));0<=e&&h.push(c.slice());r=e}return h};N.exports.negative=function(a,g){for(var h=[],r=p(a[a.length-1],g),l=a[a.length-1],c,d=0;d<
a.length;++d,l=c){c=a[d];var e=p(c,g);(0>r&&0<e||0<r&&0>e)&&h.push(n(l,e,c,r));0>=e&&h.push(c.slice());r=e}return h}},{"robust-dot-product":545,"robust-sum":553}],568:[function(b,N,G){!function(){function p(a){var g=a;if(m[g])g=m[g];else{for(var h=g,r,l=[],c=0;h;){if(null!==(r=k.text.exec(h)))l.push(r[0]);else if(null!==(r=k.modulo.exec(h)))l.push("%");else if(null!==(r=k.placeholder.exec(h))){if(r[2]){c|=1;var d=[],e=r[2],f;if(null!==(f=k.key.exec(e)))for(d.push(f[1]);""!==(e=e.substring(f[0].length));)if(null!==
(f=k.key_access.exec(e)))d.push(f[1]);else if(null!==(f=k.index_access.exec(e)))d.push(f[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");r[2]=d}else c|=2;if(3===c)throw Error("[sprintf] mixing positional and named placeholders is not (yet) supported");l.push({placeholder:r[0],param_no:r[1],keys:r[2],sign:r[3],pad_char:r[4],align:r[5],width:r[6],precision:r[7],type:r[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");
h=h.substring(r[0].length)}g=m[g]=l}h=arguments;r=1;l=g.length;d="";var q,t;for(e=0;e<l;e++)if("string"===typeof g[e])d+=g[e];else if("object"===typeof g[e]){f=g[e];if(f.keys)for(c=h[r],q=0;q<f.keys.length;q++){if(void 0==c)throw Error(p('[sprintf] Cannot access property "%s" of undefined value "%s"',f.keys[q],f.keys[q-1]));c=c[f.keys[q]]}else c=f.param_no?h[f.param_no]:h[r++];k.not_type.test(f.type)&&k.not_primitive.test(f.type)&&c instanceof Function&&(c=c());if(k.numeric_arg.test(f.type)&&"number"!==
typeof c&&isNaN(c))throw new TypeError(p("[sprintf] expecting number but found %T",c));k.number.test(f.type)&&(t=0<=c);switch(f.type){case "b":c=parseInt(c,10).toString(2);break;case "c":c=String.fromCharCode(parseInt(c,10));break;case "d":case "i":c=parseInt(c,10);break;case "j":c=JSON.stringify(c,null,f.width?parseInt(f.width):0);break;case "e":c=f.precision?parseFloat(c).toExponential(f.precision):parseFloat(c).toExponential();break;case "f":c=f.precision?parseFloat(c).toFixed(f.precision):parseFloat(c);
break;case "g":c=f.precision?String(Number(c.toPrecision(f.precision))):parseFloat(c);break;case "o":c=(parseInt(c,10)>>>0).toString(8);break;case "s":c=String(c);c=f.precision?c.substring(0,f.precision):c;break;case "t":c=String(!!c);c=f.precision?c.substring(0,f.precision):c;break;case "T":c=Object.prototype.toString.call(c).slice(8,-1).toLowerCase();c=f.precision?c.substring(0,f.precision):c;break;case "u":c=parseInt(c,10)>>>0;break;case "v":c=c.valueOf();c=f.precision?c.substring(0,f.precision):
c;break;case "x":c=(parseInt(c,10)>>>0).toString(16);break;case "X":c=(parseInt(c,10)>>>0).toString(16).toUpperCase()}if(k.json.test(f.type))d+=c;else{if(!k.number.test(f.type)||t&&!f.sign)var w="";else w=t?"+":"-",c=c.toString().replace(k.sign,"");q=f.pad_char?"0"===f.pad_char?"0":f.pad_char.charAt(1):" ";var x=f.width-(w+c).length;x=f.width?0<x?q.repeat(x):"":"";d+=f.align?w+c+x:"0"===q?w+x+c:x+w+c}}return d}function n(a,g){return p.apply(null,[a].concat(g||[]))}var k={not_string:/[^s]/,not_bool:/[^t]/,
not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/},m=Object.create(null);"undefined"!==typeof G&&(G.sprintf=p,G.vsprintf=n);"undefined"!==typeof window&&(window.sprintf=p,window.vsprintf=n)}()},{}],569:[function(b,
N,G){function p(){n.call(this)}N.exports=p;var n=b("events").EventEmitter;b("inherits")(p,n);p.Readable=b("readable-stream/lib/_stream_readable.js");p.Writable=b("readable-stream/lib/_stream_writable.js");p.Duplex=b("readable-stream/lib/_stream_duplex.js");p.Transform=b("readable-stream/lib/_stream_transform.js");p.PassThrough=b("readable-stream/lib/_stream_passthrough.js");p.finished=b("readable-stream/lib/internal/streams/end-of-stream.js");p.pipeline=b("readable-stream/lib/internal/streams/pipeline.js");
p.Stream=p;p.prototype.pipe=function(k,m){function a(f){k.writable&&!1===k.write(f)&&d.pause&&d.pause()}function g(){d.readable&&d.resume&&d.resume()}function h(){e||(e=!0,k.end())}function r(){e||(e=!0,"function"===typeof k.destroy&&k.destroy())}function l(f){c();if(0===n.listenerCount(this,"error"))throw f;}function c(){d.removeListener("data",a);k.removeListener("drain",g);d.removeListener("end",h);d.removeListener("close",r);d.removeListener("error",l);k.removeListener("error",l);d.removeListener("end",
c);d.removeListener("close",c);k.removeListener("close",c)}var d=this;d.on("data",a);k.on("drain",g);k._isStdio||m&&!1===m.end||(d.on("end",h),d.on("close",r));var e=!1;d.on("error",l);k.on("error",l);d.on("end",c);d.on("close",c);k.on("close",c);k.emit("pipe",d);return k}},{events:116,inherits:447,"readable-stream/lib/_stream_duplex.js":571,"readable-stream/lib/_stream_passthrough.js":572,"readable-stream/lib/_stream_readable.js":573,"readable-stream/lib/_stream_transform.js":574,"readable-stream/lib/_stream_writable.js":575,
"readable-stream/lib/internal/streams/end-of-stream.js":579,"readable-stream/lib/internal/streams/pipeline.js":581}],570:[function(b,N,G){function p(a,g){a.prototype=Object.create(g.prototype);a.prototype.constructor=a;a.__proto__=g}function n(a,g,h){h||(h=Error);var r=function(l){function c(d,e,f){var q=l.call;d="string"===typeof g?g:g(d,e,f);return q.call(l,this,d)||this}p(c,l);return c}(h);r.prototype.name=h.name;r.prototype.code=a;m[a]=r}function k(a,g){if(Array.isArray(a)){var h=a.length;a=a.map(function(r){return String(r)});
return 2<h?"one of ".concat(g," ").concat(a.slice(0,h-1).join(", "),", or ")+a[h-1]:2===h?"one of ".concat(g," ").concat(a[0]," or ").concat(a[1]):"of ".concat(g," ").concat(a[0])}return"of ".concat(g," ").concat(String(a))}var m={};n("ERR_INVALID_OPT_VALUE",function(a,g){return'The value "'+g+'" is invalid for option "'+a+'"'},TypeError);n("ERR_INVALID_ARG_TYPE",function(a,g,h){var r;if(r="string"===typeof g)r="not "===g.substr(0,4);r?(r="must not be",g=g.replace(/^not /,"")):r="must be";var l=void 0;
if(void 0===l||l>a.length)l=a.length;" argument"===a.substring(l-9,l)?a="The ".concat(a," ").concat(r," ").concat(k(g,"type")):(l=void 0,"number"!==typeof l&&(l=0),l=l+1>a.length?!1:-1!==a.indexOf(".",l),l=l?"property":"argument",a='The "'.concat(a,'" ').concat(l," ").concat(r," ").concat(k(g,"type")));return a+=". Received type ".concat(typeof h)},TypeError);n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");n("ERR_METHOD_NOT_IMPLEMENTED",function(a){return"The "+a+" method is not implemented"});
n("ERR_STREAM_PREMATURE_CLOSE","Premature close");n("ERR_STREAM_DESTROYED",function(a){return"Cannot call "+a+" after a stream was destroyed"});n("ERR_MULTIPLE_CALLBACK","Callback called multiple times");n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");n("ERR_STREAM_WRITE_AFTER_END","write after end");n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);n("ERR_UNKNOWN_ENCODING",function(a){return"Unknown encoding: "+a},TypeError);n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT",
"stream.unshift() after end event");N.exports.codes=m},{}],571:[function(b,N,G){(function(p){(function(){function n(c){if(!(this instanceof n))return new n(c);g.call(this,c);h.call(this,c);this.allowHalfOpen=!0;c&&(!1===c.readable&&(this.readable=!1),!1===c.writable&&(this.writable=!1),!1===c.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",k)))}function k(){this._writableState.ended||p.nextTick(m,this)}function m(c){c.end()}var a=Object.keys||function(c){var d=[],e;for(e in c)d.push(e);return d};
N.exports=n;var g=b("./_stream_readable"),h=b("./_stream_writable");b("inherits")(n,g);a=a(h.prototype);for(var r=0;r<a.length;r++){var l=a[r];n.prototype[l]||(n.prototype[l]=h.prototype[l])}Object.defineProperty(n.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(n.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(n.prototype,
"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});Object.defineProperty(n.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._readableState||void 0===this._writableState?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(c){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=c,this._writableState.destroyed=c)}})}).call(this)}).call(this,b("_process"))},{"./_stream_readable":573,
"./_stream_writable":575,_process:528,inherits:447}],572:[function(b,N,G){function p(k){if(!(this instanceof p))return new p(k);n.call(this,k)}N.exports=p;var n=b("./_stream_transform");b("inherits")(p,n);p.prototype._transform=function(k,m,a){a(null,k)}},{"./_stream_transform":574,inherits:447}],573:[function(b,N,G){(function(p,n){(function(){function k(Y,ba,ja){if("function"===typeof Y.prependListener)return Y.prependListener(ba,ja);if(Y._events&&Y._events[ba])Array.isArray(Y._events[ba])?Y._events[ba].unshift(ja):
Y._events[ba]=[ja,Y._events[ba]];else Y.on(ba,ja)}function m(Y,ba,ja){C=C||b("./_stream_duplex");Y=Y||{};"boolean"!==typeof ja&&(ja=ba instanceof C);this.objectMode=!!Y.objectMode;ja&&(this.objectMode=this.objectMode||!!Y.readableObjectMode);this.highWaterMark=I(this,Y,"readableHighWaterMark",ja);this.buffer=new O;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=
this.needReadable=!1;this.paused=!0;this.emitClose=!1!==Y.emitClose;this.autoDestroy=!!Y.autoDestroy;this.destroyed=!1;this.defaultEncoding=Y.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;Y.encoding&&(ca||(ca=b("string_decoder/").StringDecoder),this.decoder=new ca(Y.encoding),this.encoding=Y.encoding)}function a(Y){C=C||b("./_stream_duplex");if(!(this instanceof a))return new a(Y);this._readableState=new m(Y,this,this instanceof C);this.readable=!0;
Y&&("function"===typeof Y.read&&(this._read=Y.read),"function"===typeof Y.destroy&&(this._destroy=Y.destroy));v.call(this)}function g(Y,ba,ja,ma,ia){K("readableAddChunk",ba);var oa=Y._readableState;if(null===ba)oa.reading=!1,K("onEofChunk"),oa.ended||(oa.decoder&&(ba=oa.decoder.end())&&ba.length&&(oa.buffer.push(ba),oa.length+=oa.objectMode?1:ba.length),oa.ended=!0,oa.sync?l(Y):(oa.needReadable=!1,oa.emittedReadable||(oa.emittedReadable=!0,c(Y))));else{if(!ia){ia=ba;var xa;y.isBuffer(ia)||ia instanceof
F||"string"===typeof ia||void 0===ia||oa.objectMode||(xa=new H("chunk",["string","Buffer","Uint8Array"],ia));var ra=xa}if(ra)U(Y,ra);else if(oa.objectMode||ba&&0<ba.length)if("string"===typeof ba||oa.objectMode||Object.getPrototypeOf(ba)===y.prototype||(ba=y.from(ba)),ma)oa.endEmitted?U(Y,new Z):h(Y,oa,ba,!0);else if(oa.ended)U(Y,new M);else{if(oa.destroyed)return!1;oa.reading=!1;oa.decoder&&!ja?(ba=oa.decoder.write(ba),oa.objectMode||0!==ba.length?h(Y,oa,ba,!1):d(Y,oa)):h(Y,oa,ba,!1)}else ma||(oa.reading=
!1,d(Y,oa))}return!oa.ended&&(oa.length<oa.highWaterMark||0===oa.length)}function h(Y,ba,ja,ma){ba.flowing&&0===ba.length&&!ba.sync?(ba.awaitDrain=0,Y.emit("data",ja)):(ba.length+=ba.objectMode?1:ja.length,ma?ba.buffer.unshift(ja):ba.buffer.push(ja),ba.needReadable&&l(Y));d(Y,ba)}function r(Y,ba){if(0>=Y||0===ba.length&&ba.ended)return 0;if(ba.objectMode)return 1;if(Y!==Y)return ba.flowing&&ba.length?ba.buffer.head.data.length:ba.length;if(Y>ba.highWaterMark){var ja=Y;1073741824<=ja?ja=1073741824:
(ja--,ja|=ja>>>1,ja|=ja>>>2,ja|=ja>>>4,ja|=ja>>>8,ja|=ja>>>16,ja++);ba.highWaterMark=ja}return Y<=ba.length?Y:ba.ended?ba.length:(ba.needReadable=!0,0)}function l(Y){var ba=Y._readableState;K("emitReadable",ba.needReadable,ba.emittedReadable);ba.needReadable=!1;ba.emittedReadable||(K("emitReadable",ba.flowing),ba.emittedReadable=!0,p.nextTick(c,Y))}function c(Y){var ba=Y._readableState;K("emitReadable_",ba.destroyed,ba.length,ba.ended);ba.destroyed||!ba.length&&!ba.ended||(Y.emit("readable"),ba.emittedReadable=
!1);ba.needReadable=!ba.flowing&&!ba.ended&&ba.length<=ba.highWaterMark;x(Y)}function d(Y,ba){ba.readingMore||(ba.readingMore=!0,p.nextTick(e,Y,ba))}function e(Y,ba){for(;!ba.reading&&!ba.ended&&(ba.length<ba.highWaterMark||ba.flowing&&0===ba.length);){var ja=ba.length;K("maybeReadMore read 0");Y.read(0);if(ja===ba.length)break}ba.readingMore=!1}function f(Y){return function(){var ba=Y._readableState;K("pipeOnDrain",ba.awaitDrain);ba.awaitDrain&&ba.awaitDrain--;0===ba.awaitDrain&&Y.listeners("data").length&&
(ba.flowing=!0,x(Y))}}function q(Y){var ba=Y._readableState;ba.readableListening=0<Y.listenerCount("readable");ba.resumeScheduled&&!ba.paused?ba.flowing=!0:0<Y.listenerCount("data")&&Y.resume()}function t(Y){K("readable nexttick read 0");Y.read(0)}function w(Y,ba){K("resume",ba.reading);ba.reading||Y.read(0);ba.resumeScheduled=!1;Y.emit("resume");x(Y);ba.flowing&&!ba.reading&&Y.read(0)}function x(Y){var ba=Y._readableState;for(K("flow",ba.flowing);ba.flowing&&null!==Y.read(););}function z(Y,ba){if(0===
ba.length)return null;ba.objectMode?Y=ba.buffer.shift():!Y||Y>=ba.length?(Y=ba.decoder?ba.buffer.join(""):1===ba.buffer.length?ba.buffer.first():ba.buffer.concat(ba.length),ba.buffer.clear()):Y=ba.buffer.consume(Y,ba.decoder);return Y}function B(Y){var ba=Y._readableState;K("endReadable",ba.endEmitted);ba.endEmitted||(ba.ended=!0,p.nextTick(A,ba,Y))}function A(Y,ba){K("endReadableNT",Y.endEmitted,Y.length);Y.endEmitted||0!==Y.length||(Y.endEmitted=!0,ba.readable=!1,ba.emit("end"),Y.autoDestroy&&(Y=
ba._writableState,(!Y||Y.autoDestroy&&Y.finished)&&ba.destroy()))}function D(Y,ba){for(var ja=0,ma=Y.length;ja<ma;ja++)if(Y[ja]===ba)return ja;return-1}N.exports=a;var C;a.ReadableState=m;b("events");var v=b("./internal/streams/stream"),y=b("buffer").Buffer,F=n.Uint8Array||function(){},J=b("util");var K=J&&J.debuglog?J.debuglog("stream"):function(){};var O=b("./internal/streams/buffer_list");J=b("./internal/streams/destroy");var I=b("./internal/streams/state").getHighWaterMark,L=b("../errors").codes,
H=L.ERR_INVALID_ARG_TYPE,M=L.ERR_STREAM_PUSH_AFTER_EOF,Q=L.ERR_METHOD_NOT_IMPLEMENTED,Z=L.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,ca,W,T;b("inherits")(a,v);var U=J.errorOrDestroy,ha=["error","close","destroy","pause","resume"];Object.defineProperty(a.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._readableState?!1:this._readableState.destroyed},set:function(Y){this._readableState&&(this._readableState.destroyed=Y)}});a.prototype.destroy=J.destroy;a.prototype._undestroy=J.undestroy;
a.prototype._destroy=function(Y,ba){ba(Y)};a.prototype.push=function(Y,ba){var ja=this._readableState;if(ja.objectMode)var ma=!0;else"string"===typeof Y&&(ba=ba||ja.defaultEncoding,ba!==ja.encoding&&(Y=y.from(Y,ba),ba=""),ma=!0);return g(this,Y,ba,!1,ma)};a.prototype.unshift=function(Y){return g(this,Y,null,!0,!1)};a.prototype.isPaused=function(){return!1===this._readableState.flowing};a.prototype.setEncoding=function(Y){ca||(ca=b("string_decoder/").StringDecoder);Y=new ca(Y);this._readableState.decoder=
Y;this._readableState.encoding=this._readableState.decoder.encoding;for(var ba=this._readableState.buffer.head,ja="";null!==ba;)ja+=Y.write(ba.data),ba=ba.next;this._readableState.buffer.clear();""!==ja&&this._readableState.buffer.push(ja);this._readableState.length=ja.length;return this};a.prototype.read=function(Y){K("read",Y);Y=parseInt(Y,10);var ba=this._readableState,ja=Y;0!==Y&&(ba.emittedReadable=!1);if(0===Y&&ba.needReadable&&((0!==ba.highWaterMark?ba.length>=ba.highWaterMark:0<ba.length)||
ba.ended))return K("read: emitReadable",ba.length,ba.ended),0===ba.length&&ba.ended?B(this):l(this),null;Y=r(Y,ba);if(0===Y&&ba.ended)return 0===ba.length&&B(this),null;var ma=ba.needReadable;K("need readable",ma);if(0===ba.length||ba.length-Y<ba.highWaterMark)ma=!0,K("length less than watermark",ma);ba.ended||ba.reading?K("reading or ended",!1):ma&&(K("do read"),ba.reading=!0,ba.sync=!0,0===ba.length&&(ba.needReadable=!0),this._read(ba.highWaterMark),ba.sync=!1,ba.reading||(Y=r(ja,ba)));ma=0<Y?z(Y,
ba):null;null===ma?(ba.needReadable=ba.length<=ba.highWaterMark,Y=0):(ba.length-=Y,ba.awaitDrain=0);0===ba.length&&(ba.ended||(ba.needReadable=!0),ja!==Y&&ba.ended&&B(this));null!==ma&&this.emit("data",ma);return ma};a.prototype._read=function(Y){U(this,new Q("_read()"))};a.prototype.pipe=function(Y,ba){function ja(za,Ia){K("onunpipe");za===ka&&Ia&&!1===Ia.hasUnpiped&&(Ia.hasUnpiped=!0,K("cleanup"),Y.removeListener("close",xa),Y.removeListener("finish",ra),Y.removeListener("drain",qa),Y.removeListener("error",
oa),Y.removeListener("unpipe",ja),ka.removeListener("end",ma),ka.removeListener("end",la),ka.removeListener("data",ia),ta=!0,!na.awaitDrain||Y._writableState&&!Y._writableState.needDrain||qa())}function ma(){K("onend");Y.end()}function ia(za){K("ondata");za=Y.write(za);K("dest.write",za);!1===za&&((1===na.pipesCount&&na.pipes===Y||1<na.pipesCount&&-1!==D(na.pipes,Y))&&!ta&&(K("false write response, pause",na.awaitDrain),na.awaitDrain++),ka.pause())}function oa(za){K("onerror",za);la();Y.removeListener("error",
oa);0===Y.listeners("error").length&&U(Y,za)}function xa(){Y.removeListener("finish",ra);la()}function ra(){K("onfinish");Y.removeListener("close",xa);la()}function la(){K("unpipe");ka.unpipe(Y)}var ka=this,na=this._readableState;switch(na.pipesCount){case 0:na.pipes=Y;break;case 1:na.pipes=[na.pipes,Y];break;default:na.pipes.push(Y)}na.pipesCount+=1;K("pipe count\x3d%d opts\x3d%j",na.pipesCount,ba);ba=ba&&!1===ba.end||Y===p.stdout||Y===p.stderr?la:ma;if(na.endEmitted)p.nextTick(ba);else ka.once("end",
ba);Y.on("unpipe",ja);var qa=f(ka);Y.on("drain",qa);var ta=!1;ka.on("data",ia);k(Y,"error",oa);Y.once("close",xa);Y.once("finish",ra);Y.emit("pipe",ka);na.flowing||(K("pipe resume"),ka.resume());return Y};a.prototype.unpipe=function(Y){var ba=this._readableState,ja={hasUnpiped:!1};if(0===ba.pipesCount)return this;if(1===ba.pipesCount){if(Y&&Y!==ba.pipes)return this;Y||(Y=ba.pipes);ba.pipes=null;ba.pipesCount=0;ba.flowing=!1;Y&&Y.emit("unpipe",this,ja);return this}if(!Y){Y=ba.pipes;ja=ba.pipesCount;
ba.pipes=null;ba.pipesCount=0;ba.flowing=!1;for(ba=0;ba<ja;ba++)Y[ba].emit("unpipe",this,{hasUnpiped:!1});return this}var ma=D(ba.pipes,Y);if(-1===ma)return this;ba.pipes.splice(ma,1);--ba.pipesCount;1===ba.pipesCount&&(ba.pipes=ba.pipes[0]);Y.emit("unpipe",this,ja);return this};a.prototype.on=function(Y,ba){ba=v.prototype.on.call(this,Y,ba);var ja=this._readableState;"data"===Y?(ja.readableListening=0<this.listenerCount("readable"),!1!==ja.flowing&&this.resume()):"readable"!==Y||ja.endEmitted||ja.readableListening||
(ja.readableListening=ja.needReadable=!0,ja.flowing=!1,ja.emittedReadable=!1,K("on readable",ja.length,ja.reading),ja.length?l(this):ja.reading||p.nextTick(t,this));return ba};a.prototype.addListener=a.prototype.on;a.prototype.removeListener=function(Y,ba){ba=v.prototype.removeListener.call(this,Y,ba);"readable"===Y&&p.nextTick(q,this);return ba};a.prototype.removeAllListeners=function(Y){var ba=v.prototype.removeAllListeners.apply(this,arguments);"readable"!==Y&&void 0!==Y||p.nextTick(q,this);return ba};
a.prototype.resume=function(){var Y=this._readableState;Y.flowing||(K("resume"),Y.flowing=!Y.readableListening,Y.resumeScheduled||(Y.resumeScheduled=!0,p.nextTick(w,this,Y)));Y.paused=!1;return this};a.prototype.pause=function(){K("call pause flowing\x3d%j",this._readableState.flowing);!1!==this._readableState.flowing&&(K("pause"),this._readableState.flowing=!1,this.emit("pause"));this._readableState.paused=!0;return this};a.prototype.wrap=function(Y){var ba=this,ja=this._readableState,ma=!1;Y.on("end",
function(){K("wrapped end");if(ja.decoder&&!ja.ended){var oa=ja.decoder.end();oa&&oa.length&&ba.push(oa)}ba.push(null)});Y.on("data",function(oa){K("wrapped data");ja.decoder&&(oa=ja.decoder.write(oa));ja.objectMode&&(null===oa||void 0===oa)||!(ja.objectMode||oa&&oa.length)||ba.push(oa)||(ma=!0,Y.pause())});for(var ia in Y)void 0===this[ia]&&"function"===typeof Y[ia]&&(this[ia]=function(oa){return function(){return Y[oa].apply(Y,arguments)}}(ia));for(ia=0;ia<ha.length;ia++)Y.on(ha[ia],this.emit.bind(this,
ha[ia]));this._read=function(oa){K("wrapped _read",oa);ma&&(ma=!1,Y.resume())};return this};"function"===typeof Symbol&&(a.prototype[Symbol.asyncIterator]=function(){void 0===W&&(W=b("./internal/streams/async_iterator"));return W(this)});Object.defineProperty(a.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(a.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});
Object.defineProperty(a.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(Y){this._readableState&&(this._readableState.flowing=Y)}});a._fromList=z;Object.defineProperty(a.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});"function"===typeof Symbol&&(a.from=function(Y,ba){void 0===T&&(T=b("./internal/streams/from"));return T(a,Y,ba)})}).call(this)}).call(this,b("_process"),"undefined"!==typeof Re?Re:
"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"../errors":570,"./_stream_duplex":571,"./internal/streams/async_iterator":576,"./internal/streams/buffer_list":577,"./internal/streams/destroy":578,"./internal/streams/from":580,"./internal/streams/state":582,"./internal/streams/stream":583,_process:528,buffer:117,events:116,inherits:447,"string_decoder/":584,util:115}],574:[function(b,N,G){function p(c,d){var e=this._transformState;e.transforming=!1;var f=e.writecb;if(null===
f)return this.emit("error",new g);e.writechunk=null;e.writecb=null;null!=d&&this.push(d);f(c);c=this._readableState;c.reading=!1;(c.needReadable||c.length<c.highWaterMark)&&this._read(c.highWaterMark)}function n(c){if(!(this instanceof n))return new n(c);l.call(this,c);this._transformState={afterTransform:p.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=!0;this._readableState.sync=!1;c&&("function"===typeof c.transform&&
(this._transform=c.transform),"function"===typeof c.flush&&(this._flush=c.flush));this.on("prefinish",k)}function k(){var c=this;"function"!==typeof this._flush||this._readableState.destroyed?m(this,null,null):this._flush(function(d,e){m(c,d,e)})}function m(c,d,e){if(d)return c.emit("error",d);null!=e&&c.push(e);if(c._writableState.length)throw new r;if(c._transformState.transforming)throw new h;return c.push(null)}N.exports=n;N=b("../errors").codes;var a=N.ERR_METHOD_NOT_IMPLEMENTED,g=N.ERR_MULTIPLE_CALLBACK,
h=N.ERR_TRANSFORM_ALREADY_TRANSFORMING,r=N.ERR_TRANSFORM_WITH_LENGTH_0,l=b("./_stream_duplex");b("inherits")(n,l);n.prototype.push=function(c,d){this._transformState.needTransform=!1;return l.prototype.push.call(this,c,d)};n.prototype._transform=function(c,d,e){e(new a("_transform()"))};n.prototype._write=function(c,d,e){var f=this._transformState;f.writecb=e;f.writechunk=c;f.writeencoding=d;f.transforming||(c=this._readableState,(f.needTransform||c.needReadable||c.length<c.highWaterMark)&&this._read(c.highWaterMark))};
n.prototype._read=function(c){c=this._transformState;null===c.writechunk||c.transforming?c.needTransform=!0:(c.transforming=!0,this._transform(c.writechunk,c.writeencoding,c.afterTransform))};n.prototype._destroy=function(c,d){l.prototype._destroy.call(this,c,function(e){d(e)})}},{"../errors":570,"./_stream_duplex":571,inherits:447}],575:[function(b,N,G){(function(p,n){(function(){function k(H){var M=this;this.entry=this.next=null;this.finish=function(){var Q=M.entry;for(M.entry=null;Q;){var Z=Q.callback;
H.pendingcb--;Z(void 0);Q=Q.next}H.corkedRequestsFree.next=M}}function m(){}function a(H,M,Q){f=f||b("./_stream_duplex");H=H||{};"boolean"!==typeof Q&&(Q=M instanceof f);this.objectMode=!!H.objectMode;Q&&(this.objectMode=this.objectMode||!!H.writableObjectMode);this.highWaterMark=B(this,H,"writableHighWaterMark",Q);this.destroyed=this.finished=this.ended=this.ending=this.needDrain=this.finalCalled=!1;this.decodeStrings=!1!==H.decodeStrings;this.defaultEncoding=H.defaultEncoding||"utf8";this.length=
0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(Z){var ca=M._writableState,W=ca.sync,T=ca.writecb;if("function"!==typeof T)throw new v;ca.writing=!1;ca.writecb=null;ca.length-=ca.writelen;ca.writelen=0;Z?(--ca.pendingcb,W?(p.nextTick(T,Z),p.nextTick(e,M,ca),M._writableState.errorEmitted=!0,I(M,Z)):(T(Z),M._writableState.errorEmitted=!0,I(M,Z),e(M,ca))):((Z=c(ca)||M.destroyed)||ca.corked||ca.bufferProcessing||!ca.bufferedRequest||l(M,ca),W?p.nextTick(r,M,
ca,Z,T):r(M,ca,Z,T))};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.emitClose=!1!==H.emitClose;this.autoDestroy=!!H.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new k(this)}function g(H){f=f||b("./_stream_duplex");var M=this instanceof f;if(!M&&!L.call(g,this))return new g(H);this._writableState=new a(H,this,M);this.writable=!0;H&&("function"===typeof H.write&&(this._write=H.write),
"function"===typeof H.writev&&(this._writev=H.writev),"function"===typeof H.destroy&&(this._destroy=H.destroy),"function"===typeof H.final&&(this._final=H.final));t.call(this)}function h(H,M,Q,Z,ca,W,T){M.writelen=Z;M.writecb=T;M.writing=!0;M.sync=!0;if(M.destroyed)M.onwrite(new F("write"));else Q?H._writev(ca,M.onwrite):H._write(ca,W,M.onwrite);M.sync=!1}function r(H,M,Q,Z){!Q&&0===M.length&&M.needDrain&&(M.needDrain=!1,H.emit("drain"));M.pendingcb--;Z();e(H,M)}function l(H,M){M.bufferProcessing=
!0;var Q=M.bufferedRequest;if(H._writev&&Q&&Q.next){var Z=Array(M.bufferedRequestCount),ca=M.corkedRequestsFree;ca.entry=Q;for(var W=0,T=!0;Q;)Z[W]=Q,Q.isBuf||(T=!1),Q=Q.next,W+=1;Z.allBuffers=T;h(H,M,!0,M.length,Z,"",ca.finish);M.pendingcb++;M.lastBufferedRequest=null;ca.next?(M.corkedRequestsFree=ca.next,ca.next=null):M.corkedRequestsFree=new k(M);M.bufferedRequestCount=0}else{for(;Q&&(Z=Q.chunk,h(H,M,!1,M.objectMode?1:Z.length,Z,Q.encoding,Q.callback),Q=Q.next,M.bufferedRequestCount--,!M.writing););
null===Q&&(M.lastBufferedRequest=null)}M.bufferedRequest=Q;M.bufferProcessing=!1}function c(H){return H.ending&&0===H.length&&null===H.bufferedRequest&&!H.finished&&!H.writing}function d(H,M){H._final(function(Q){M.pendingcb--;Q&&I(H,Q);M.prefinished=!0;H.emit("prefinish");e(H,M)})}function e(H,M){var Q=c(M);Q&&(M.prefinished||M.finalCalled||("function"!==typeof H._final||M.destroyed?(M.prefinished=!0,H.emit("prefinish")):(M.pendingcb++,M.finalCalled=!0,p.nextTick(d,H,M))),0===M.pendingcb&&(M.finished=
!0,H.emit("finish"),M.autoDestroy&&(M=H._readableState,(!M||M.autoDestroy&&M.endEmitted)&&H.destroy())));return Q}N.exports=g;var f;g.WritableState=a;var q={deprecate:b("util-deprecate")},t=b("./internal/streams/stream"),w=b("buffer").Buffer,x=n.Uint8Array||function(){},z=b("./internal/streams/destroy"),B=b("./internal/streams/state").getHighWaterMark,A=b("../errors").codes,D=A.ERR_INVALID_ARG_TYPE,C=A.ERR_METHOD_NOT_IMPLEMENTED,v=A.ERR_MULTIPLE_CALLBACK,y=A.ERR_STREAM_CANNOT_PIPE,F=A.ERR_STREAM_DESTROYED,
J=A.ERR_STREAM_NULL_VALUES,K=A.ERR_STREAM_WRITE_AFTER_END,O=A.ERR_UNKNOWN_ENCODING,I=z.errorOrDestroy;b("inherits")(g,t);a.prototype.getBuffer=function(){for(var H=this.bufferedRequest,M=[];H;)M.push(H),H=H.next;return M};(function(){try{Object.defineProperty(a.prototype,"buffer",{get:q.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(H){}})();if("function"===typeof Symbol&&Symbol.hasInstance&&"function"===
typeof Function.prototype[Symbol.hasInstance]){var L=Function.prototype[Symbol.hasInstance];Object.defineProperty(g,Symbol.hasInstance,{value:function(H){return L.call(this,H)?!0:this!==g?!1:H&&H._writableState instanceof a}})}else L=function(H){return H instanceof this};g.prototype.pipe=function(){I(this,new y)};g.prototype.write=function(H,M,Q){var Z=this._writableState,ca=!1,W;if(W=!Z.objectMode)W=H,W=w.isBuffer(W)||W instanceof x;W&&!w.isBuffer(H)&&(H=w.from(H));"function"===typeof M&&(Q=M,M=
null);W?M="buffer":M||(M=Z.defaultEncoding);"function"!==typeof Q&&(Q=m);if(Z.ending)Z=Q,Q=new K,I(this,Q),p.nextTick(Z,Q);else{var T;if(!(T=W)){T=H;var U=Q,ha;null===T?ha=new J:"string"===typeof T||Z.objectMode||(ha=new D("chunk",["string","Buffer"],T));ha?(I(this,ha),p.nextTick(U,ha),T=!1):T=!0}T&&(Z.pendingcb++,ca=W,ca||(ha=H,Z.objectMode||!1===Z.decodeStrings||"string"!==typeof ha||(ha=w.from(ha,M)),H!==ha&&(ca=!0,M="buffer",H=ha)),W=Z.objectMode?1:H.length,Z.length+=W,ha=Z.length<Z.highWaterMark,
ha||(Z.needDrain=!0),Z.writing||Z.corked?(W=Z.lastBufferedRequest,Z.lastBufferedRequest={chunk:H,encoding:M,isBuf:ca,callback:Q,next:null},W?W.next=Z.lastBufferedRequest:Z.bufferedRequest=Z.lastBufferedRequest,Z.bufferedRequestCount+=1):h(this,Z,!1,W,H,M,Q),ca=ha)}return ca};g.prototype.cork=function(){this._writableState.corked++};g.prototype.uncork=function(){var H=this._writableState;H.corked&&(H.corked--,H.writing||H.corked||H.bufferProcessing||!H.bufferedRequest||l(this,H))};g.prototype.setDefaultEncoding=
function(H){"string"===typeof H&&(H=H.toLowerCase());if(!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((H+"").toLowerCase())))throw new O(H);this._writableState.defaultEncoding=H;return this};Object.defineProperty(g.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});
g.prototype._write=function(H,M,Q){Q(new C("_write()"))};g.prototype._writev=null;g.prototype.end=function(H,M,Q){var Z=this._writableState;"function"===typeof H?(Q=H,M=H=null):"function"===typeof M&&(Q=M,M=null);null!==H&&void 0!==H&&this.write(H,M);Z.corked&&(Z.corked=1,this.uncork());if(!Z.ending){H=Q;Z.ending=!0;e(this,Z);if(H)if(Z.finished)p.nextTick(H);else this.once("finish",H);Z.ended=!0;this.writable=!1}return this};Object.defineProperty(g.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});
Object.defineProperty(g.prototype,"destroyed",{enumerable:!1,get:function(){return void 0===this._writableState?!1:this._writableState.destroyed},set:function(H){this._writableState&&(this._writableState.destroyed=H)}});g.prototype.destroy=z.destroy;g.prototype._undestroy=z.undestroy;g.prototype._destroy=function(H,M){M(H)}}).call(this)}).call(this,b("_process"),"undefined"!==typeof Re?Re:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"../errors":570,"./_stream_duplex":571,
"./internal/streams/destroy":578,"./internal/streams/state":582,"./internal/streams/stream":583,_process:528,buffer:117,inherits:447,"util-deprecate":622}],576:[function(b,N,G){(function(p){(function(){function n(z,B,A){B in z?Object.defineProperty(z,B,{value:A,enumerable:!0,configurable:!0,writable:!0}):z[B]=A;return z}function k(z,B){return{value:z,done:B}}function m(z){var B=z[l];if(null!==B){var A=z[t].read();null!==A&&(z[f]=null,z[l]=null,z[c]=null,B(k(A,!1)))}}function a(z){p.nextTick(m,z)}
function g(z,B){return function(A,D){z.then(function(){if(B[e])A(k(void 0,!0));else B[q](A,D)},D)}}var h,r=b("./end-of-stream"),l=Symbol("lastResolve"),c=Symbol("lastReject"),d=Symbol("error"),e=Symbol("ended"),f=Symbol("lastPromise"),q=Symbol("handlePromise"),t=Symbol("stream"),w=Object.getPrototypeOf(function(){}),x=Object.setPrototypeOf((h={get stream(){return this[t]},next:function(){var z=this,B=this[d];if(null!==B)return Promise.reject(B);if(this[e])return Promise.resolve(k(void 0,!0));if(this[t].destroyed)return new Promise(function(A,
D){p.nextTick(function(){z[d]?D(z[d]):A(k(void 0,!0))})});if(B=this[f])B=new Promise(g(B,this));else{B=this[t].read();if(null!==B)return Promise.resolve(k(B,!1));B=new Promise(this[q])}return this[f]=B}},n(h,Symbol.asyncIterator,function(){return this}),n(h,"return",function(){var z=this;return new Promise(function(B,A){z[t].destroy(null,function(D){D?A(D):B(k(void 0,!0))})})}),h),w);N.exports=function(z){var B,A=Object.create(x,(B={},n(B,t,{value:z,writable:!0}),n(B,l,{value:null,writable:!0}),n(B,
c,{value:null,writable:!0}),n(B,d,{value:null,writable:!0}),n(B,e,{value:z._readableState.endEmitted,writable:!0}),n(B,q,{value:function(D,C){var v=A[t].read();v?(A[f]=null,A[l]=null,A[c]=null,D(k(v,!1))):(A[l]=D,A[c]=C)},writable:!0}),B));A[f]=null;r(z,function(D){if(D&&"ERR_STREAM_PREMATURE_CLOSE"!==D.code){var C=A[c];null!==C&&(A[f]=null,A[l]=null,A[c]=null,C(D));A[d]=D}else D=A[l],null!==D&&(A[f]=null,A[l]=null,A[c]=null,D(k(void 0,!0))),A[e]=!0});z.on("readable",a.bind(null,A));return A}}).call(this)}).call(this,
b("_process"))},{"./end-of-stream":579,_process:528}],577:[function(b,N,G){function p(r,l){var c=Object.keys(r);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(r);l&&(d=d.filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}));c.push.apply(c,d)}return c}function n(r){for(var l=1;l<arguments.length;l++){var c=null!=arguments[l]?arguments[l]:{};l%2?p(Object(c),!0).forEach(function(d){var e=c[d];d in r?Object.defineProperty(r,d,{value:e,enumerable:!0,configurable:!0,
writable:!0}):r[d]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(c)):p(Object(c)).forEach(function(d){Object.defineProperty(r,d,Object.getOwnPropertyDescriptor(c,d))})}return r}function k(r,l){for(var c=0;c<l.length;c++){var d=l[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(r,d.key,d)}}function m(r,l,c){l&&k(r.prototype,l);c&&k(r,c);return r}var a=b("buffer").Buffer,g=b("util").inspect,h=g&&g.custom||
"inspect";N.exports=function(){function r(){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");this.tail=this.head=null;this.length=0}m(r,[{key:"push",value:function(l){l={data:l,next:null};0<this.length?this.tail.next=l:this.head=l;this.tail=l;++this.length}},{key:"unshift",value:function(l){l={data:l,next:this.head};0===this.length&&(this.tail=l);this.head=l;++this.length}},{key:"shift",value:function(){if(0!==this.length){var l=this.head.data;this.head=1===this.length?
this.tail=null:this.head.next;--this.length;return l}}},{key:"clear",value:function(){this.head=this.tail=null;this.length=0}},{key:"join",value:function(l){if(0===this.length)return"";for(var c=this.head,d=""+c.data;c=c.next;)d+=l+c.data;return d}},{key:"concat",value:function(l){if(0===this.length)return a.alloc(0);l=a.allocUnsafe(l>>>0);for(var c=this.head,d=0;c;)a.prototype.copy.call(c.data,l,d),d+=c.data.length,c=c.next;return l}},{key:"consume",value:function(l,c){l<this.head.data.length?(c=
this.head.data.slice(0,l),this.head.data=this.head.data.slice(l)):c=l===this.head.data.length?this.shift():c?this._getString(l):this._getBuffer(l);return c}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(l){var c=this.head,d=1,e=c.data;for(l-=e.length;c=c.next;){var f=c.data,q=l>f.length?f.length:l;e=q===f.length?e+f:e+f.slice(0,l);l-=q;if(0===l){q===f.length?(++d,this.head=c.next?c.next:this.tail=null):(this.head=c,c.data=f.slice(q));break}++d}this.length-=
d;return e}},{key:"_getBuffer",value:function(l){var c=a.allocUnsafe(l),d=this.head,e=1;d.data.copy(c);for(l-=d.data.length;d=d.next;){var f=d.data,q=l>f.length?f.length:l;f.copy(c,c.length-l,0,q);l-=q;if(0===l){q===f.length?(++e,this.head=d.next?d.next:this.tail=null):(this.head=d,d.data=f.slice(q));break}++e}this.length-=e;return c}},{key:h,value:function(l,c){return g(this,n({},c,{depth:0,customInspect:!1}))}}]);return r}()},{buffer:117,util:115}],578:[function(b,N,G){(function(p){(function(){function n(a,
g){m(a,g);k(a)}function k(a){a._writableState&&!a._writableState.emitClose||a._readableState&&!a._readableState.emitClose||a.emit("close")}function m(a,g){a.emit("error",g)}N.exports={destroy:function(a,g){var h=this,r=this._writableState&&this._writableState.destroyed;if(this._readableState&&this._readableState.destroyed||r)return g?g(a):a&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,p.nextTick(m,this,a)):p.nextTick(m,this,a)),this;this._readableState&&
(this._readableState.destroyed=!0);this._writableState&&(this._writableState.destroyed=!0);this._destroy(a||null,function(l){!g&&l?h._writableState?h._writableState.errorEmitted?p.nextTick(k,h):(h._writableState.errorEmitted=!0,p.nextTick(n,h,l)):p.nextTick(n,h,l):g?(p.nextTick(k,h),g(l)):p.nextTick(k,h)});return this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1);this._writableState&&
(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(a,g){var h=a._readableState,r=a._writableState;h&&h.autoDestroy||r&&r.autoDestroy?a.destroy(g):a.emit("error",g)}}}).call(this)}).call(this,b("_process"))},{_process:528}],579:[function(b,N,G){function p(a){var g=!1;return function(){if(!g){g=!0;
for(var h=arguments.length,r=Array(h),l=0;l<h;l++)r[l]=arguments[l];a.apply(this,r)}}}function n(){}function k(a,g,h){if("function"===typeof g)return k(a,null,g);g||(g={});h=p(h||n);var r=g.readable||!1!==g.readable&&a.readable,l=g.writable||!1!==g.writable&&a.writable,c=function(){a.writable||e()},d=a._writableState&&a._writableState.finished,e=function(){l=!1;d=!0;r||h.call(a)},f=a._readableState&&a._readableState.endEmitted,q=function(){r=!1;f=!0;l||h.call(a)},t=function(z){h.call(a,z)},w=function(){var z;
if(r&&!f)return a._readableState&&a._readableState.ended||(z=new m),h.call(a,z);if(l&&!d)return a._writableState&&a._writableState.ended||(z=new m),h.call(a,z)},x=function(){a.req.on("finish",e)};if(a.setHeader&&"function"===typeof a.abort)if(a.on("complete",e),a.on("abort",w),a.req)x();else a.on("request",x);else l&&!a._writableState&&(a.on("end",c),a.on("close",c));a.on("end",q);a.on("finish",e);if(!1!==g.error)a.on("error",t);a.on("close",w);return function(){a.removeListener("complete",e);a.removeListener("abort",
w);a.removeListener("request",x);a.req&&a.req.removeListener("finish",e);a.removeListener("end",c);a.removeListener("close",c);a.removeListener("finish",e);a.removeListener("end",q);a.removeListener("error",t);a.removeListener("close",w)}}var m=b("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;N.exports=k},{"../../../errors":570}],580:[function(b,N,G){N.exports=function(){throw Error("Readable.from is not available in the browser");}},{}],581:[function(b,N,G){function p(l){var c=!1;return function(){c||
(c=!0,l.apply(void 0,arguments))}}function n(l){if(l)throw l;}function k(l,c,d,e){e=p(e);var f=!1;l.on("close",function(){f=!0});void 0===g&&(g=b("./end-of-stream"));g(l,{readable:c,writable:d},function(t){if(t)return e(t);f=!0;e()});var q=!1;return function(t){if(!f&&!q){q=!0;if(l.setHeader&&"function"===typeof l.abort)return l.abort();if("function"===typeof l.destroy)return l.destroy();e(t||new r("pipe"))}}}function m(l){l()}function a(l,c){return l.pipe(c)}var g;G=b("../../../errors").codes;var h=
G.ERR_MISSING_ARGS,r=G.ERR_STREAM_DESTROYED;N.exports=function(){for(var l=arguments.length,c=Array(l),d=0;d<l;d++)c[d]=arguments[d];var e=c.length?"function"!==typeof c[c.length-1]?n:c.pop():n;Array.isArray(c[0])&&(c=c[0]);if(2>c.length)throw new h("streams");var f,q=c.map(function(t,w){var x=w<c.length-1;return k(t,x,0<w,function(z){f||(f=z);z&&q.forEach(m);x||(q.forEach(m),e(f))})});return c.reduce(a)}},{"../../../errors":570,"./end-of-stream":579}],582:[function(b,N,G){var p=b("../../../errors").codes.ERR_INVALID_OPT_VALUE;
N.exports={getHighWaterMark:function(n,k,m,a){k=null!=k.highWaterMark?k.highWaterMark:a?k[m]:null;if(null!=k){if(!isFinite(k)||Math.floor(k)!==k||0>k)throw new p(a?m:"highWaterMark",k);return Math.floor(k)}return n.objectMode?16:16384}}},{"../../../errors":570}],583:[function(b,N,G){N.exports=b("events").EventEmitter},{events:116}],584:[function(b,N,G){function p(q){if(!q)return"utf8";for(var t;;)switch(q){case "utf8":case "utf-8":return"utf8";case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return"utf16le";
case "latin1":case "binary":return"latin1";case "base64":case "ascii":case "hex":return q;default:if(t)return;q=(""+q).toLowerCase();t=!0}}function n(q){var t=p(q);if("string"!==typeof t&&(e.isEncoding===f||!f(q)))throw Error("Unknown encoding: "+q);this.encoding=t||q;switch(this.encoding){case "utf16le":this.text=g;this.end=h;q=4;break;case "utf8":this.fillLast=a;q=4;break;case "base64":this.text=r;this.end=l;q=3;break;default:this.write=c;this.end=d;return}this.lastTotal=this.lastNeed=0;this.lastChar=
e.allocUnsafe(q)}function k(q){return 127>=q?0:6===q>>5?2:14===q>>4?3:30===q>>3?4:2===q>>6?-1:-2}function m(q,t,w){var x=t.length-1;if(x<w)return 0;var z=k(t[x]);if(0<=z)return 0<z&&(q.lastNeed=z-1),z;if(--x<w||-2===z)return 0;z=k(t[x]);if(0<=z)return 0<z&&(q.lastNeed=z-2),z;if(--x<w||-2===z)return 0;z=k(t[x]);return 0<=z?(0<z&&(2===z?z=0:q.lastNeed=z-3),z):0}function a(q){var t=this.lastTotal-this.lastNeed;a:if(128!==(q[0]&192)){this.lastNeed=0;var w=""}else{if(1<this.lastNeed&&1<q.length){if(128!==
(q[1]&192)){this.lastNeed=1;w="";break a}if(2<this.lastNeed&&2<q.length&&128!==(q[2]&192)){this.lastNeed=2;w="";break a}}w=void 0}if(void 0!==w)return w;if(this.lastNeed<=q.length)return q.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);q.copy(this.lastChar,t,0,q.length);this.lastNeed-=q.length}function g(q,t){if(0===(q.length-t)%2){if(t=q.toString("utf16le",t)){var w=t.charCodeAt(t.length-1);if(55296<=w&&56319>=w)return this.lastNeed=2,this.lastTotal=
4,this.lastChar[0]=q[q.length-2],this.lastChar[1]=q[q.length-1],t.slice(0,-1)}return t}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=q[q.length-1];return q.toString("utf16le",t,q.length-1)}function h(q){q=q&&q.length?this.write(q):"";return this.lastNeed?q+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):q}function r(q,t){var w=(q.length-t)%3;if(0===w)return q.toString("base64",t);this.lastNeed=3-w;this.lastTotal=3;1===w?this.lastChar[0]=q[q.length-1]:(this.lastChar[0]=q[q.length-
2],this.lastChar[1]=q[q.length-1]);return q.toString("base64",t,q.length-w)}function l(q){q=q&&q.length?this.write(q):"";return this.lastNeed?q+this.lastChar.toString("base64",0,3-this.lastNeed):q}function c(q){return q.toString(this.encoding)}function d(q){return q&&q.length?this.write(q):""}var e=b("safe-buffer").Buffer,f=e.isEncoding||function(q){q=""+q;switch(q&&q.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;
default:return!1}};G.StringDecoder=n;n.prototype.write=function(q){if(0===q.length)return"";if(this.lastNeed){var t=this.fillLast(q);if(void 0===t)return"";var w=this.lastNeed;this.lastNeed=0}else w=0;return w<q.length?t?t+this.text(q,w):this.text(q,w):t||""};n.prototype.end=function(q){q=q&&q.length?this.write(q):"";return this.lastNeed?q+"":q};n.prototype.text=function(q,t){var w=m(this,q,t);if(!this.lastNeed)return q.toString("utf8",t);this.lastTotal=w;w=q.length-(w-this.lastNeed);q.copy(this.lastChar,
0,w);return q.toString("utf8",t,w)};n.prototype.fillLast=function(q){if(this.lastNeed<=q.length)return q.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);q.copy(this.lastChar,this.lastTotal-this.lastNeed,0,q.length);this.lastNeed-=q.length}},{"safe-buffer":554}],585:[function(b,N,G){(function(p,n){(function(){function k(B){f("initializing parser stream");B._parserBytesLeft=0;B._parserBuffers=[];B._parserBuffered=0;B._parserState=
q;B._parserCallback=null;"function"==typeof B.push&&(B._parserOutput=B.push.bind(B));B._parserInit=!0}function m(B,A){e(!this._parserCallback,'there is already a "callback" set!');e(isFinite(B)&&0<B,'can only buffer a finite number of bytes \x3e 0, got "'+B+'"');this._parserInit||k(this);f("buffering %o bytes",B);this._parserBytesLeft=B;this._parserCallback=A;this._parserState=t}function a(B,A){e(!this._parserCallback,'there is already a "callback" set!');e(0<B,'can only skip \x3e 0 bytes, got "'+
B+'"');this._parserInit||k(this);f("skipping %o bytes",B);this._parserBytesLeft=B;this._parserCallback=A;this._parserState=w}function g(B,A){e(!this._parserCallback,'There is already a "callback" set!');e(0<B,'can only pass through \x3e 0 bytes, got "'+B+'"');this._parserInit||k(this);f("passing through %o bytes",B);this._parserBytesLeft=B;this._parserCallback=A;this._parserState=x}function h(B,A,D){this._parserInit||k(this);f("write(%o bytes)",B.length);"function"==typeof A&&(D=A);z(this,B,null,
D)}function r(B,A,D){this._parserInit||k(this);f("transform(%o bytes)",B.length);"function"!=typeof A&&(A=this._parserOutput);z(this,B,A,D)}function l(B,A,D,C){return 0>=B._parserBytesLeft?C(Error("got data but not currently parsing anything")):A.length<=B._parserBytesLeft?function(){return c(B,A,D,C)}:function(){var v=A.slice(0,B._parserBytesLeft);return c(B,v,D,function(y){if(y)return C(y);if(A.length>v.length)return function(){return l(B,A.slice(v.length),D,C)}})}}function c(B,A,D,C){B._parserBytesLeft-=
A.length;f("%o bytes left for stream piece",B._parserBytesLeft);B._parserState===t?(B._parserBuffers.push(A),B._parserBuffered+=A.length):B._parserState===x&&D(A);if(0===B._parserBytesLeft){var v=B._parserCallback;v&&B._parserState===t&&1<B._parserBuffers.length&&(A=n.concat(B._parserBuffers,B._parserBuffered));B._parserState!==t&&(A=null);B._parserCallback=null;B._parserBuffered=0;B._parserState=q;B._parserBuffers.splice(0);if(v){var y=[];A&&y.push(A);D&&y.push(D);(A=v.length>y.length)&&y.push(d(C));
B=v.apply(B,y);if(!A||C===B)return C}}else return C}function d(B){return function(){for(var A=B.apply(this,arguments);"function"==typeof A;)A=A();return A}}var e=b("assert"),f=b("debug")("stream-parser");N.exports=function(B){var A=B&&"function"==typeof B._transform,D=B&&"function"==typeof B._write;if(!A&&!D)throw Error("must pass a Writable or Transform stream in");f("extending Parser into stream");B._bytes=m;B._skipBytes=a;A&&(B._passthrough=g);A?B._transform=r:B._write=h};var q=-1,t=0,w=1,x=2,
z=d(l)}).call(this)}).call(this,b("_process"),b("buffer").Buffer)},{_process:528,assert:80,buffer:117,debug:586}],586:[function(b,N,G){(function(p){(function(){function n(){try{var a=G.storage.debug}catch(g){}!a&&"undefined"!==typeof p&&"env"in p&&(a=p.env.DEBUG);return a}G=N.exports=b("./debug");G.log=function(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)};G.formatArgs=function(a){var g=this.useColors;a[0]=(g?"%c":"")+this.namespace+
(g?" %c":" ")+a[0]+(g?"%c ":" ")+"+"+G.humanize(this.diff);if(g){g="color: "+this.color;a.splice(1,0,g,"color: inherit");var h=0,r=0;a[0].replace(/%[a-zA-Z%]/g,function(l){"%%"!==l&&(h++,"%c"===l&&(r=h))});a.splice(r,0,g)}};G.save=function(a){try{null==a?G.storage.removeItem("debug"):G.storage.debug=a}catch(g){}};G.load=n;G.useColors=function(){return"undefined"!==typeof window&&window.process&&"renderer"===window.process.type?!0:"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&
document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)};var k=G;if("undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage)var m=
chrome.storage.local;else a:{try{m=window.localStorage;break a}catch(a){}m=void 0}k.storage=m;G.colors="lightseagreen forestgreen goldenrod dodgerblue darkorchid crimson".split(" ");G.formatters.j=function(a){try{return JSON.stringify(a)}catch(g){return"[UnexpectedJSONParseError]: "+g.message}};G.enable(n())}).call(this)}).call(this,b("_process"))},{"./debug":587,_process:528}],587:[function(b,N,G){function p(m){var a=0,g;for(g in m)a=(a<<5)-a+m.charCodeAt(g),a|=0;return G.colors[Math.abs(a)%G.colors.length]}
function n(m){function a(){if(a.enabled){var g=+new Date;a.diff=g-(k||g);a.prev=k;k=a.curr=g;var h=Array(arguments.length);for(g=0;g<h.length;g++)h[g]=arguments[g];h[0]=G.coerce(h[0]);"string"!==typeof h[0]&&h.unshift("%O");var r=0;h[0]=h[0].replace(/%([a-zA-Z%])/g,function(l,c){if("%%"===l)return l;r++;c=G.formatters[c];"function"===typeof c&&(l=c.call(a,h[r]),h.splice(r,1),r--);return l});G.formatArgs.call(a,h);(a.log||G.log||console.log.bind(console)).apply(a,h)}}a.namespace=m;a.enabled=G.enabled(m);
a.useColors=G.useColors();a.color=p(m);"function"===typeof G.init&&G.init(a);return a}G=N.exports=n.debug=n["default"]=n;G.coerce=function(m){return m instanceof Error?m.stack||m.message:m};G.disable=function(){G.enable("")};G.enable=function(m){G.save(m);G.names=[];G.skips=[];for(var a=("string"===typeof m?m:"").split(/[\s,]+/),g=a.length,h=0;h<g;h++)a[h]&&(m=a[h].replace(/\*/g,".*?"),"-"===m[0]?G.skips.push(new RegExp("^"+m.substr(1)+"$")):G.names.push(new RegExp("^"+m+"$")))};G.enabled=function(m){var a;
var g=0;for(a=G.skips.length;g<a;g++)if(G.skips[g].test(m))return!1;g=0;for(a=G.names.length;g<a;g++)if(G.names[g].test(m))return!0;return!1};G.humanize=b("ms");G.names=[];G.skips=[];G.formatters={};var k},{ms:588}],588:[function(b,N,G){function p(m){m=String(m);if(!(100<m.length)&&(m=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(m))){var a=parseFloat(m[1]);switch((m[2]||"ms").toLowerCase()){case "years":case "year":case "yrs":case "yr":case "y":return a*
k;case "days":case "day":case "d":return 864E5*a;case "hours":case "hour":case "hrs":case "hr":case "h":return 36E5*a;case "minutes":case "minute":case "mins":case "min":case "m":return 6E4*a;case "seconds":case "second":case "secs":case "sec":case "s":return 1E3*a;case "milliseconds":case "millisecond":case "msecs":case "msec":case "ms":return a}}}function n(m,a,g){if(!(m<a))return m<1.5*a?Math.floor(m/a)+" "+g:Math.ceil(m/a)+" "+g+"s"}var k=315576E5;N.exports=function(m,a){a=a||{};var g=typeof m;
if("string"===g&&0<m.length)return p(m);if("number"===g&&!1===isNaN(m))return a.long?n(m,864E5,"day")||n(m,36E5,"hour")||n(m,6E4,"minute")||n(m,1E3,"second")||m+" ms":864E5<=m?Math.round(m/864E5)+"d":36E5<=m?Math.round(m/36E5)+"h":6E4<=m?Math.round(m/6E4)+"m":1E3<=m?Math.round(m/1E3)+"s":m+"ms";throw Error("val is not a non-empty string or a valid number. val\x3d"+JSON.stringify(m));}},{}],589:[function(b,N,G){var p=b("parenthesis");N.exports=function(n,k,m){if(null==n)throw Error("First argument should be a string");
if(null==k)throw Error("Separator should be a string or a RegExp");if(!m)m={};else if("string"===typeof m||Array.isArray(m))m={ignore:m};null==m.escape&&(m.escape=!0);null==m.ignore?m.ignore="[] () {} \x3c\x3e \"\" '' ``  ".split(" "):("string"===typeof m.ignore&&(m.ignore=[m.ignore]),m.ignore=m.ignore.map(function(l){1===l.length&&(l+=l);return l}));n=p.parse(n,{flat:!0,brackets:m.ignore});var a=n[0].split(k);if(m.escape){m=[];for(var g=0;g<a.length;g++){var h=a[g],r=a[g+1];"\\"===h[h.length-
1]&&"\\"!==h[h.length-2]?(m.push(h+k+r),g++):m.push(h)}a=m}for(g=0;g<a.length;g++)n[0]=a[g],a[g]=p.stringify(n,{flat:!0});return a}},{parenthesis:491}],590:[function(b,N,G){N.exports=function(p){function n(w){var x=[w],z=[w];m[w]=a[w]=d;g[w]=!0;for(d+=1;0<z.length;){w=z[z.length-1];var B=p[w];if(h[w]<B.length){for(var A=h[w];A<B.length;++A){var D=B[A];if(0>m[D]){m[D]=a[D]=d;g[D]=!0;d+=1;x.push(D);z.push(D);break}else g[D]&&(a[w]=Math.min(a[w],a[D])|0);0<=r[D]&&l[w].push(r[D])}h[w]=A}else{if(a[w]===
m[w]){var C=[];B=[];D=0;for(A=x.length-1;0<=A;--A){var v=x[A];g[v]=!1;C.push(v);B.push(l[v]);D+=l[v].length;r[v]=e.length;if(v===w){x.length=A;break}}e.push(C);w=Array(D);for(A=0;A<B.length;A++)for(C=0;C<B[A].length;C++)w[--D]=B[A][C];f.push(w)}z.pop()}}}for(var k=p.length,m=Array(k),a=Array(k),g=Array(k),h=Array(k),r=Array(k),l=Array(k),c=0;c<k;++c)m[c]=-1,a[c]=0,g[c]=!1,h[c]=0,r[c]=-1,l[c]=[];var d=0,e=[],f=[];for(c=0;c<k;++c)0>m[c]&&n(c);for(c=0;c<f.length;c++){var q=f[c];if(0!==q.length){q.sort(function(w,
x){return w-x});k=[q[0]];for(var t=1;t<q.length;t++)q[t]!==q[t-1]&&k.push(q[t]);f[c]=k}}return{components:e,adjacencyList:f}}},{}],591:[function(b,N,G){function p(g,h){var r=g.length,l=["'use strict';"],c="surfaceNets"+g.join("_")+"d"+h;l.push("var contour\x3dgenContour({","order:[",g.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p \x3e c)|0 },");"generic"===h&&l.push("getters:[0],");var d=[];h=[];for(g=0;g<r;++g)d.push("d"+g),h.push("d"+g);for(g=0;g<1<<r;++g)d.push("v"+
g),h.push("v"+g);for(g=0;g<1<<r;++g)d.push("p"+g),h.push("p"+g);d.push("a","b","c");h.push("a","c");l.push("vertex:function vertexFunc(",d.join(),"){");d=[];for(g=0;g<1<<r;++g)d.push("(p"+g+"\x3c\x3c"+g+")");l.push("var m\x3d(",d.join("+"),")|0;if(m\x3d\x3d\x3d0||m\x3d\x3d\x3d",(1<<(1<<r))-1,"){return}");d=[];var e=[];128>=1<<(1<<r)?(l.push("switch(m){"),e=l):l.push("switch(m\x3e\x3e\x3e7){");for(g=0;g<1<<(1<<r);++g){128<1<<(1<<r)&&0===g%128&&(0<d.length&&e.push("}}"),e="vExtra"+d.length,l.push("case ",
g>>>7,":",e,"(m\x260x7f,",h.join(),");break;"),e=["function ",e,"(m,",h.join(),"){switch(m){"],d.push(e));e.push("case ",g&127,":");for(var f=Array(r),q=Array(r),t=Array(r),w=Array(r),x=0,z=0;z<r;++z)f[z]=[],q[z]=[],t[z]=0,w[z]=0;for(z=0;z<1<<r;++z)for(var B=0;B<r;++B){var A=z^1<<B;if(!(A>z)&&!(g&1<<A)!==!(g&1<<z)){var D=1;g&1<<A?q[B].push("v"+A+"-v"+z):(q[B].push("v"+z+"-v"+A),D=-D);0>D?(f[B].push("-v"+z+"-v"+A),t[B]+=2):(f[B].push("v"+z+"+v"+A),t[B]-=2);x+=1;for(D=0;D<r;++D)D!==B&&(A&1<<D?w[D]+=
1:--w[D])}}z=[];for(B=0;B<r;++B)0===f[B].length?z.push("d"+B+"-0.5"):(A="",0>t[B]?A=t[B]+"*c":0<t[B]&&(A="+"+t[B]+"*c"),z.push("d"+B+"-"+(.5+w[B]/x*.5)+"-"+f[B].length/x*.5+"*("+f[B].join("+")+A+")/("+q[B].join("+")+")"));e.push("a.push([",z.join(),"]);","break;")}l.push("}},");0<d.length&&e.push("}}");h=[];for(g=0;g<1<<r-1;++g)h.push("v"+g);h.push("c0","c1","p0","p1","a","b","c");l.push("cell:function cellFunc(",h.join(),"){");r=k(r-1);l.push("if(p0){b.push(",r.map(function(C){return"["+C.map(function(v){return"v"+
v})+"]"}).join(),")}else{b.push(",r.map(function(C){C=C.slice();C.reverse();return"["+C.map(function(v){return"v"+v})+"]"}).join(),")}}});function ",c,"(array,level){var verts\x3d[],cells\x3d[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",c,";");for(g=0;g<d.length;++g)l.push(d[g].join(""));return(new Function("genContour",l.join("")))(n)}N.exports=function(g,h){if(0>=g.dimension)return{positions:[],cells:[]};if(1===g.dimension){g=m(g,h);h=g.length;for(var r=Array(h),
l=Array(h),c=0;c<h;++c)r[c]=[g[c]],l[c]=[c];return{positions:r,cells:l}}r=g.order.join()+"-"+g.dtype;l=a[r];h=+h||0;l||(l=a[r]=p(g.order,g.dtype));return l(g,h)};var n=b("ndarray-extract-contour"),k=b("triangulate-hypercube"),m=b("zero-crossings"),a={}},{"ndarray-extract-contour":475,"triangulate-hypercube":602,"zero-crossings":647}],592:[function(b,N,G){Object.defineProperty(G,"__esModule",{value:!0});var p=function(){return function(h,r){if(Array.isArray(h))return h;if(Symbol.iterator in Object(h)){var l=
[],c=!0,d=!1,e=void 0;try{for(var f=h[Symbol.iterator](),q;!(c=(q=f.next()).done)&&(l.push(q.value),!r||l.length!==r);c=!0);}catch(t){d=!0,e=t}finally{try{if(!c&&f["return"])f["return"]()}finally{if(d)throw e;}}return l}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),n=2*Math.PI,k=function(h,r,l,c,d,e,f){var q=h.x;h=h.y;q*=r;h*=l;return{x:c*q-d*h+e,y:d*q+c*h+f}},m=function(h,r){var l=1.5707963267948966===r?.551915024494:-1.5707963267948966===r?-.551915024494:4/3*Math.tan(r/
4),c=Math.cos(h),d=Math.sin(h),e=Math.cos(h+r);h=Math.sin(h+r);return[{x:c-d*l,y:d+c*l},{x:e+h*l,y:h-e*l},{x:e,y:h}]},a=function(h,r,l,c){var d=h*l+r*c;1<d&&(d=1);-1>d&&(d=-1);return(0>h*c-r*l?-1:1)*Math.acos(d)},g=function(h,r,l,c,d,e,f,q,t,w,x,z){var B=Math.pow(d,2),A=Math.pow(e,2),D=Math.pow(x,2),C=Math.pow(z,2),v=B*A-B*C-A*D;0>v&&(v=0);v=Math.sqrt(v/(B*C+A*D))*(f===q?-1:1);f=v*d/e*z;v=v*-e/d*x;h=w*f-t*v+(h+l)/2;r=t*f+w*v+(r+c)/2;c=(x-f)/d;t=(z-v)/e;d=(-x-f)/d;z=(-z-v)/e;e=a(1,0,c,t);z=a(c,t,d,
z);0===q&&0<z&&(z-=n);1===q&&0>z&&(z+=n);return[h,r,e,z]};G.default=function(h){var r=h.px,l=h.py,c=h.cx,d=h.cy,e=h.rx,f=h.ry,q=h.xAxisRotation,t=void 0===q?0:q;q=h.largeArcFlag;var w=h.sweepFlag;h=[];if(0===e||0===f)return[];var x=Math.sin(t*n/360),z=Math.cos(t*n/360);t=z*(r-c)/2+x*(l-d)/2;var B=-x*(r-c)/2+z*(l-d)/2;if(0===t&&0===B)return[];e=Math.abs(e);f=Math.abs(f);var A=Math.pow(t,2)/Math.pow(e,2)+Math.pow(B,2)/Math.pow(f,2);1<A&&(e*=Math.sqrt(A),f*=Math.sqrt(A));r=g(r,l,c,d,e,f,void 0===q?0:
q,void 0===w?0:w,x,z,t,B);l=p(r,4);var D=l[0],C=l[1];r=l[2];l=l[3];c=Math.abs(l)/(n/4);1E-7>Math.abs(1-c)&&(c=1);c=Math.max(Math.ceil(c),1);l/=c;for(d=0;d<c;d++)h.push(m(r,l)),r+=l;return h.map(function(v){var y=k(v[0],e,f,z,x,D,C),F=y.x;y=y.y;var J=k(v[1],e,f,z,x,D,C),K=J.x;J=J.y;v=k(v[2],e,f,z,x,D,C);return{x1:F,y1:y,x2:K,y2:J,x:v.x,y:v.y}})};N.exports=G.default},{}],593:[function(b,N,G){var p=b("parse-svg-path"),n=b("abs-svg-path"),k=b("normalize-svg-path"),m=b("is-svg-path"),a=b("assert");N.exports=
function(g){Array.isArray(g)&&1===g.length&&"string"===typeof g[0]&&(g=g[0]);"string"===typeof g&&(a(m(g),"String is not an SVG path."),g=p(g));a(Array.isArray(g),"Argument should be a string or an array of path segments.");g=n(g);g=k(g);if(!g.length)return[0,0,0,0];for(var h=[Infinity,Infinity,-Infinity,-Infinity],r=0,l=g.length;r<l;r++)for(var c=g[r].slice(1),d=0;d<c.length;d+=2)c[d+0]<h[0]&&(h[0]=c[d+0]),c[d+1]<h[1]&&(h[1]=c[d+1]),c[d+0]>h[2]&&(h[2]=c[d+0]),c[d+1]>h[3]&&(h[3]=c[d+1]);return h}},
{"abs-svg-path":71,assert:80,"is-svg-path":459,"normalize-svg-path":594,"parse-svg-path":493}],594:[function(b,N,G){function p(m,a,g,h){return["C",m,a,g,h,g,h]}function n(m,a,g,h,r,l){return["C",m/3+2/3*g,a/3+2/3*h,r/3+2/3*g,l/3+2/3*h,r,l]}N.exports=function(m){for(var a,g=[],h=0,r=0,l=0,c=0,d=null,e=null,f=0,q=0,t=0,w=m.length;t<w;t++){var x=m[t],z=x[0];switch(z){case "M":l=x[1];c=x[2];break;case "A":var B=k({px:f,py:q,cx:x[6],cy:x[7],rx:x[1],ry:x[2],xAxisRotation:x[3],largeArcFlag:x[4],sweepFlag:x[5]});
if(!B.length)continue;for(a=0;a<B.length;a++)x=B[a],x=["C",x.x1,x.y1,x.x2,x.y2,x.x,x.y],a<B.length-1&&g.push(x);break;case "S":B=f;if("C"==a||"S"==a)B+=B-h,q+=q-r;x=["C",B,q,x[1],x[2],x[3],x[4]];break;case "T":"Q"==a||"T"==a?(d=2*f-d,e=2*q-e):(d=f,e=q);x=n(f,q,d,e,x[1],x[2]);break;case "Q":d=x[1];e=x[2];x=n(f,q,x[1],x[2],x[3],x[4]);break;case "L":x=p(f,q,x[1],x[2]);break;case "H":x=p(f,q,x[1],q);break;case "V":x=p(f,q,f,x[1]);break;case "Z":x=p(f,q,l,c)}a=z;f=x[x.length-2];q=x[x.length-1];4<x.length?
(h=x[x.length-4],r=x[x.length-3]):(h=f,r=q);g.push(x)}return g};var k=b("svg-arc-to-cubic-bezier")},{"svg-arc-to-cubic-bezier":592}],595:[function(b,N,G){function p(){if(null!=l)return l;var c=document.createElement("canvas").getContext("2d");c.canvas.width=c.canvas.height=1;if(!window.Path2D)return l=!1;var d=new Path2D("M0,0h1v1h-1v-1Z");c.fillStyle="black";c.fill(d);return l=(c=c.getImageData(0,0,1,1))&&c.data&&255===c.data[3]}var n=b("svg-path-bounds"),k=b("parse-svg-path"),m=b("draw-svg-path"),
a=b("is-svg-path"),g=b("bitmap-sdf"),h=document.createElement("canvas"),r=h.getContext("2d");N.exports=function(c,d){if(!a(c))throw Error("Argument should be valid svg path string");d||(d={});if(d.shape){var e=d.shape[0];var f=d.shape[1]}else e=h.width=d.w||d.width||200,f=h.height=d.h||d.height||200;var q=Math.min(e,f),t=d.stroke||0,w=d.viewbox||d.viewBox||n(c);w=[e/(w[2]-w[0]),f/(w[3]-w[1])];w=Math.min(w[0]||0,w[1]||0)/2;r.fillStyle="black";r.fillRect(0,0,e,f);r.fillStyle="white";t&&("number"!=typeof t&&
(t=1),r.strokeStyle=0<t?"white":"black",r.lineWidth=Math.abs(t));r.translate(.5*e,.5*f);r.scale(w,w);p()?(c=new Path2D(c),r.fill(c),t&&r.stroke(c)):(c=k(c),m(r,c),r.fill(),t&&r.stroke());r.setTransform(1,0,0,1,0,0);return g(r,{cutoff:null!=d.cutoff?d.cutoff:.5,radius:null!=d.radius?d.radius:.5*q})};var l},{"bitmap-sdf":105,"draw-svg-path":183,"is-svg-path":459,"parse-svg-path":493,"svg-path-bounds":593}],596:[function(b,N,G){(function(p){(function(){function n(g,h,r){r=r||{};var l=a[g];l||(l=a[g]=
{" ":{data:new Float32Array(0),shape:.2}});var c=l[h];if(!c)if(1>=h.length||!/\d/.test(h)){c=k(h,{triangles:!0,font:g,textAlign:r.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}});r=c.cells;c=c.positions;for(var d=new Float32Array(6*r.length),e=g=0,f=0;f<r.length;++f)for(var q=r[f],t=0;3>t;++t){var w=c[q[t]];d[g++]=w[0];d[g++]=w[1]+1.4;e=Math.max(w[0],e)}c=l[h]={data:d,shape:e}}else{e=h.split(/(\d|\s)/);r=Array(e.length);for(d=
c=f=0;d<e.length;++d)r[d]=n(g,e[d]),f+=r[d].data.length,c+=r[d].shape,0<d&&(c+=.02);g=new Float32Array(f);e=0;f=-.5*c;for(d=0;d<r.length;++d){q=r[d].data;for(t=0;t<q.length;t+=2)g[e++]=q[t]+f,g[e++]=q[t+1];f+=r[d].shape+.02}c=l[h]={data:g,shape:c}}return c}N.exports=n;var k=b("vectorize-text"),m=window||p.global||{},a=m.__TEXT_CACHE||{};m.__TEXT_CACHE={}}).call(this)}).call(this,b("_process"))},{_process:528,"vectorize-text":623}],597:[function(b,N,G){(function(p,n){(function(){function k(l,c){this._id=
l;this._clearFn=c}var m=b("process/browser.js").nextTick,a=Function.prototype.apply,g=Array.prototype.slice,h={},r=0;G.setTimeout=function(){return new k(a.call(setTimeout,window,arguments),clearTimeout)};G.setInterval=function(){return new k(a.call(setInterval,window,arguments),clearInterval)};G.clearTimeout=G.clearInterval=function(l){l.close()};k.prototype.unref=k.prototype.ref=function(){};k.prototype.close=function(){this._clearFn.call(window,this._id)};G.enroll=function(l,c){clearTimeout(l._idleTimeoutId);
l._idleTimeout=c};G.unenroll=function(l){clearTimeout(l._idleTimeoutId);l._idleTimeout=-1};G._unrefActive=G.active=function(l){clearTimeout(l._idleTimeoutId);var c=l._idleTimeout;0<=c&&(l._idleTimeoutId=setTimeout(function(){l._onTimeout&&l._onTimeout()},c))};G.setImmediate="function"===typeof p?p:function(l){var c=r++,d=2>arguments.length?!1:g.call(arguments,1);h[c]=!0;m(function(){h[c]&&(d?l.apply(null,d):l.call(null),G.clearImmediate(c))});return c};G.clearImmediate="function"===typeof n?n:function(l){delete h[l]}}).call(this)}).call(this,
b("timers").setImmediate,b("timers").clearImmediate)},{"process/browser.js":528,timers:597}],598:[function(b,N,G){(function(p){function n(W,T){var U;W=W?W:"";T=T||{};if(W instanceof n)return W;if(!(this instanceof n))return new n(W,T);var ha=W;var Y={r:0,g:0,b:0};var ba=1;var ja=U=!1;if("string"==typeof ha)a:{var ma=ha.replace(J,"").replace(K,"").toLowerCase();var ia=!1;if(Q[ma])ma=Q[ma],ia=!0;else if("transparent"==ma){ha={r:0,g:0,b:0,a:0,format:"name"};break a}var oa;ha=(oa=ca.rgb.exec(ma))?{r:oa[1],
g:oa[2],b:oa[3]}:(oa=ca.rgba.exec(ma))?{r:oa[1],g:oa[2],b:oa[3],a:oa[4]}:(oa=ca.hsl.exec(ma))?{h:oa[1],s:oa[2],l:oa[3]}:(oa=ca.hsla.exec(ma))?{h:oa[1],s:oa[2],l:oa[3],a:oa[4]}:(oa=ca.hsv.exec(ma))?{h:oa[1],s:oa[2],v:oa[3]}:(oa=ca.hsva.exec(ma))?{h:oa[1],s:oa[2],v:oa[3],a:oa[4]}:(oa=ca.hex8.exec(ma))?{r:parseInt(oa[1],16),g:parseInt(oa[2],16),b:parseInt(oa[3],16),a:parseInt(oa[4],16)/255,format:ia?"name":"hex8"}:(oa=ca.hex6.exec(ma))?{r:parseInt(oa[1],16),g:parseInt(oa[2],16),b:parseInt(oa[3],16),
format:ia?"name":"hex"}:(oa=ca.hex4.exec(ma))?{r:parseInt(oa[1]+""+oa[1],16),g:parseInt(oa[2]+""+oa[2],16),b:parseInt(oa[3]+""+oa[3],16),a:parseInt(oa[4]+""+oa[4],16)/255,format:ia?"name":"hex8"}:(oa=ca.hex3.exec(ma))?{r:parseInt(oa[1]+""+oa[1],16),g:parseInt(oa[2]+""+oa[2],16),b:parseInt(oa[3]+""+oa[3],16),format:ia?"name":"hex"}:!1}"object"==typeof ha&&(F(ha.r)&&F(ha.g)&&F(ha.b)?(Y=ha.g,U=ha.b,Y={r:255*C(ha.r,255),g:255*C(Y,255),b:255*C(U,255)},U=!0,ja="%"===String(ha.r).substr(-1)?"prgb":"rgb"):
F(ha.h)&&F(ha.s)&&F(ha.v)?(Y=y(ha.s),ja=y(ha.v),ma=ha.h,U=Y,Y=ja,ma=6*C(ma,360),U=C(U,100),Y=C(Y,100),ja=p.floor(ma),oa=ma-ja,ma=Y*(1-U),ia=Y*(1-oa*U),U=Y*(1-(1-oa)*U),ja%=6,Y={r:255*[Y,ia,ma,ma,U,Y][ja],g:255*[U,Y,Y,ia,ma,ma][ja],b:255*[ma,ma,U,Y,Y,ia][ja]},U=!0,ja="hsv"):F(ha.h)&&F(ha.s)&&F(ha.l)&&(Y=y(ha.s),U=y(ha.l),Y=m(ha.h,Y,U),U=!0,ja="hsl"),ha.hasOwnProperty("a")&&(ba=ha.a));ba=D(ba);ha=ha.format||ja;ja=L(255,H(Y.r,0));ma=L(255,H(Y.g,0));Y=L(255,H(Y.b,0));this._originalInput=W;this._r=ja;
this._g=ma;this._b=Y;this._a=ba;this._roundA=I(100*this._a)/100;this._format=T.format||ha;this._gradientType=T.gradientType;1>this._r&&(this._r=I(this._r));1>this._g&&(this._g=I(this._g));1>this._b&&(this._b=I(this._b));this._ok=U;this._tc_id=O++}function k(W,T,U){W=C(W,255);T=C(T,255);U=C(U,255);var ha=H(W,T,U),Y=L(W,T,U),ba=(ha+Y)/2;if(ha==Y)var ja=Y=0;else{var ma=ha-Y;Y=.5<ba?ma/(2-ha-Y):ma/(ha+Y);switch(ha){case W:ja=(T-U)/ma+(T<U?6:0);break;case T:ja=(U-W)/ma+2;break;case U:ja=(W-T)/ma+4}ja/=
6}return{h:ja,s:Y,l:ba}}function m(W,T,U){function ha(ja,ma,ia){0>ia&&(ia+=1);1<ia&&--ia;return ia<1/6?ja+6*(ma-ja)*ia:.5>ia?ma:ia<2/3?ja+(ma-ja)*(2/3-ia)*6:ja}W=C(W,360);T=C(T,100);U=C(U,100);if(0===T)U=T=W=U;else{var Y=.5>U?U*(1+T):U+T-U*T,ba=2*U-Y;U=ha(ba,Y,W+1/3);T=ha(ba,Y,W);W=ha(ba,Y,W-1/3)}return{r:255*U,g:255*T,b:255*W}}function a(W,T,U){W=C(W,255);T=C(T,255);U=C(U,255);var ha=H(W,T,U),Y=L(W,T,U),ba=ha-Y;if(ha==Y)var ja=0;else{switch(ha){case W:ja=(T-U)/ba+(T<U?6:0);break;case T:ja=(U-W)/
ba+2;break;case U:ja=(W-T)/ba+4}ja/=6}return{h:ja,s:0===ha?0:ba/ha,v:ha}}function g(W,T,U,ha){W=[v(I(W).toString(16)),v(I(T).toString(16)),v(I(U).toString(16))];return ha&&W[0].charAt(0)==W[0].charAt(1)&&W[1].charAt(0)==W[1].charAt(1)&&W[2].charAt(0)==W[2].charAt(1)?W[0].charAt(0)+W[1].charAt(0)+W[2].charAt(0):W.join("")}function h(W,T,U,ha){return[v(p.round(255*parseFloat(ha)).toString(16)),v(I(W).toString(16)),v(I(T).toString(16)),v(I(U).toString(16))].join("")}function r(W,T){T=0===T?0:T||10;W=
n(W).toHsl();W.s-=T/100;W.s=L(1,H(0,W.s));return n(W)}function l(W,T){T=0===T?0:T||10;W=n(W).toHsl();W.s+=T/100;W.s=L(1,H(0,W.s));return n(W)}function c(W){return n(W).desaturate(100)}function d(W,T){T=0===T?0:T||10;W=n(W).toHsl();W.l+=T/100;W.l=L(1,H(0,W.l));return n(W)}function e(W,T){T=0===T?0:T||10;W=n(W).toRgb();W.r=H(0,L(255,W.r-I(255*-(T/100))));W.g=H(0,L(255,W.g-I(255*-(T/100))));W.b=H(0,L(255,W.b-I(255*-(T/100))));return n(W)}function f(W,T){T=0===T?0:T||10;W=n(W).toHsl();W.l-=T/100;W.l=
L(1,H(0,W.l));return n(W)}function q(W,T){W=n(W).toHsl();T=(W.h+T)%360;W.h=0>T?360+T:T;return n(W)}function t(W){W=n(W).toHsl();W.h=(W.h+180)%360;return n(W)}function w(W){var T=n(W).toHsl(),U=T.h;return[n(W),n({h:(U+120)%360,s:T.s,l:T.l}),n({h:(U+240)%360,s:T.s,l:T.l})]}function x(W){var T=n(W).toHsl(),U=T.h;return[n(W),n({h:(U+90)%360,s:T.s,l:T.l}),n({h:(U+180)%360,s:T.s,l:T.l}),n({h:(U+270)%360,s:T.s,l:T.l})]}function z(W){var T=n(W).toHsl(),U=T.h;return[n(W),n({h:(U+72)%360,s:T.s,l:T.l}),n({h:(U+
216)%360,s:T.s,l:T.l})]}function B(W,T,U){T=T||6;U=U||30;var ha=n(W).toHsl();U=360/U;W=[n(W)];for(ha.h=(ha.h-(U*T>>1)+720)%360;--T;)ha.h=(ha.h+U)%360,W.push(n(ha));return W}function A(W,T){T=T||6;var U=n(W).toHsv();W=U.h;var ha=U.s;U=U.v;for(var Y=[],ba=1/T;T--;)Y.push(n({h:W,s:ha,v:U})),U=(U+ba)%1;return Y}function D(W){W=parseFloat(W);if(isNaN(W)||0>W||1<W)W=1;return W}function C(W,T){var U=W;"string"==typeof U&&-1!=U.indexOf(".")&&1===parseFloat(U)&&(W="100%");U="string"===typeof W&&-1!=W.indexOf("%");
W=L(T,H(0,parseFloat(W)));U&&(W=parseInt(W*T,10)/100);return 1E-6>p.abs(W-T)?1:W%T/parseFloat(T)}function v(W){return 1==W.length?"0"+W:""+W}function y(W){1>=W&&(W=100*W+"%");return W}function F(W){return!!ca.CSS_UNIT.exec(W)}var J=/^\s+/,K=/\s+$/,O=0,I=p.round,L=p.min,H=p.max,M=p.random;n.prototype={isDark:function(){return 128>this.getBrightness()},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},
getAlpha:function(){return this._a},getBrightness:function(){var W=this.toRgb();return(299*W.r+587*W.g+114*W.b)/1E3},getLuminance:function(){var W=this.toRgb();var T=W.r/255;var U=W.g/255;W=W.b/255;T=.03928>=T?T/12.92:p.pow((T+.055)/1.055,2.4);U=.03928>=U?U/12.92:p.pow((U+.055)/1.055,2.4);W=.03928>=W?W/12.92:p.pow((W+.055)/1.055,2.4);return.2126*T+.7152*U+.0722*W},setAlpha:function(W){this._a=D(W);this._roundA=I(100*this._a)/100;return this},toHsv:function(){var W=a(this._r,this._g,this._b);return{h:360*
W.h,s:W.s,v:W.v,a:this._a}},toHsvString:function(){var W=a(this._r,this._g,this._b),T=I(360*W.h),U=I(100*W.s);W=I(100*W.v);return 1==this._a?"hsv("+T+", "+U+"%, "+W+"%)":"hsva("+T+", "+U+"%, "+W+"%, "+this._roundA+")"},toHsl:function(){var W=k(this._r,this._g,this._b);return{h:360*W.h,s:W.s,l:W.l,a:this._a}},toHslString:function(){var W=k(this._r,this._g,this._b),T=I(360*W.h),U=I(100*W.s);W=I(100*W.l);return 1==this._a?"hsl("+T+", "+U+"%, "+W+"%)":"hsla("+T+", "+U+"%, "+W+"%, "+this._roundA+")"},
toHex:function(W){return g(this._r,this._g,this._b,W)},toHexString:function(W){return"#"+this.toHex(W)},toHex8:function(W){var T=this._g,U=this._b,ha=this._a;T=[v(I(this._r).toString(16)),v(I(T).toString(16)),v(I(U).toString(16)),v(p.round(255*parseFloat(ha)).toString(16))];W=W&&T[0].charAt(0)==T[0].charAt(1)&&T[1].charAt(0)==T[1].charAt(1)&&T[2].charAt(0)==T[2].charAt(1)&&T[3].charAt(0)==T[3].charAt(1)?T[0].charAt(0)+T[1].charAt(0)+T[2].charAt(0)+T[3].charAt(0):T.join("");return W},toHex8String:function(W){return"#"+
this.toHex8(W)},toRgb:function(){return{r:I(this._r),g:I(this._g),b:I(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+I(this._r)+", "+I(this._g)+", "+I(this._b)+")":"rgba("+I(this._r)+", "+I(this._g)+", "+I(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:I(100*C(this._r,255))+"%",g:I(100*C(this._g,255))+"%",b:I(100*C(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+I(100*C(this._r,255))+"%, "+I(100*C(this._g,255))+"%, "+
I(100*C(this._b,255))+"%)":"rgba("+I(100*C(this._r,255))+"%, "+I(100*C(this._g,255))+"%, "+I(100*C(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":1>this._a?!1:Z[g(this._r,this._g,this._b,!0)]||!1},toFilter:function(W){var T="#"+h(this._r,this._g,this._b,this._a),U=T,ha=this._gradientType?"GradientType \x3d 1, ":"";W&&(W=n(W),U="#"+h(W._r,W._g,W._b,W._a));return"progid:DXImageTransform.Microsoft.gradient("+ha+"startColorstr\x3d"+T+",endColorstr\x3d"+U+")"},
toString:function(W){var T=!!W;W=W||this._format;var U=!1,ha=1>this._a&&0<=this._a;if(!T&&ha&&("hex"===W||"hex6"===W||"hex3"===W||"hex4"===W||"hex8"===W||"name"===W))return"name"===W&&0===this._a?this.toName():this.toRgbString();"rgb"===W&&(U=this.toRgbString());"prgb"===W&&(U=this.toPercentageRgbString());if("hex"===W||"hex6"===W)U=this.toHexString();"hex3"===W&&(U=this.toHexString(!0));"hex4"===W&&(U=this.toHex8String(!0));"hex8"===W&&(U=this.toHex8String());"name"===W&&(U=this.toName());"hsl"===
W&&(U=this.toHslString());"hsv"===W&&(U=this.toHsvString());return U||this.toHexString()},clone:function(){return n(this.toString())},_applyModification:function(W,T){W=W.apply(null,[this].concat([].slice.call(T)));this._r=W._r;this._g=W._g;this._b=W._b;this.setAlpha(W._a);return this},lighten:function(){return this._applyModification(d,arguments)},brighten:function(){return this._applyModification(e,arguments)},darken:function(){return this._applyModification(f,arguments)},desaturate:function(){return this._applyModification(r,
arguments)},saturate:function(){return this._applyModification(l,arguments)},greyscale:function(){return this._applyModification(c,arguments)},spin:function(){return this._applyModification(q,arguments)},_applyCombination:function(W,T){return W.apply(null,[this].concat([].slice.call(T)))},analogous:function(){return this._applyCombination(B,arguments)},complement:function(){return this._applyCombination(t,arguments)},monochromatic:function(){return this._applyCombination(A,arguments)},splitcomplement:function(){return this._applyCombination(z,
arguments)},triad:function(){return this._applyCombination(w,arguments)},tetrad:function(){return this._applyCombination(x,arguments)}};n.fromRatio=function(W,T){if("object"==typeof W){var U={},ha;for(ha in W)W.hasOwnProperty(ha)&&(U[ha]="a"===ha?W[ha]:y(W[ha]));W=U}return n(W,T)};n.equals=function(W,T){return W&&T?n(W).toRgbString()==n(T).toRgbString():!1};n.random=function(){return n.fromRatio({r:M(),g:M(),b:M()})};n.mix=function(W,T,U){U=0===U?0:U||50;W=n(W).toRgb();T=n(T).toRgb();U/=100;return n({r:(T.r-
W.r)*U+W.r,g:(T.g-W.g)*U+W.g,b:(T.b-W.b)*U+W.b,a:(T.a-W.a)*U+W.a})};n.readability=function(W,T){W=n(W);T=n(T);return(p.max(W.getLuminance(),T.getLuminance())+.05)/(p.min(W.getLuminance(),T.getLuminance())+.05)};n.isReadable=function(W,T,U){W=n.readability(W,T);T=!1;var ha=U||{level:"AA",size:"small"};U=(ha.level||"AA").toUpperCase();ha=(ha.size||"small").toLowerCase();"AA"!==U&&"AAA"!==U&&(U="AA");"small"!==ha&&"large"!==ha&&(ha="small");switch(U+ha){case "AAsmall":case "AAAlarge":T=4.5<=W;break;
case "AAlarge":T=3<=W;break;case "AAAsmall":T=7<=W}return T};n.mostReadable=function(W,T,U){var ha=null,Y=0;U=U||{};var ba=U.includeFallbackColors;var ja=U.level;var ma=U.size;for(var ia=0;ia<T.length;ia++){var oa=n.readability(W,T[ia]);oa>Y&&(Y=oa,ha=n(T[ia]))}if(n.isReadable(W,ha,{level:ja,size:ma})||!ba)return ha;U.includeFallbackColors=!1;return n.mostReadable(W,["#fff","#000"],U)};var Q=n.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",
bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",
darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",
indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",
maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",
palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",
tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Z=n.hexNames=function(W){var T={},U;for(U in W)W.hasOwnProperty(U)&&(T[W[U]]=U);return T}(Q),ca={CSS_UNIT:RegExp("(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)"),rgb:RegExp("rgb[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),rgba:RegExp("rgba[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),
hsl:RegExp("hsl[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),hsla:RegExp("hsla[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),hsv:RegExp("hsv[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),
hsva:RegExp("hsva[\\s|\\(]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))[,|\\s]+((?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?))\\s*\\)?"),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};
"undefined"!==typeof N&&N.exports?N.exports=n:window.tinycolor=n})(Math)},{}],599:[function(b,N,G){function p(k){if(k.length)return k instanceof Float32Array?k:new Float32Array(k);n[0]=k;return n[0]}N.exports=p;N.exports.float32=N.exports.float=p;N.exports.fract32=N.exports.fract=function(k,m){if(k.length){if(k instanceof Float32Array)return new Float32Array(k.length);m instanceof Float32Array||(m=p(k));for(var a=0,g=m.length;a<g;a++)m[a]=k[a]-m[a];return m}return p(k-p(k))};var n=new Float32Array(1)},
{}],600:[function(b,N,G){function p(a,g){g=k(getComputedStyle(a).getPropertyValue(g));return g[0]*n(g[1],a)}function n(a,g){g=g||document.body;a=(a||"px").trim().toLowerCase();if(g===window||g===document)g=document.body;switch(a){case "%":return g.clientHeight/100;case "ch":case "ex":var h=document.createElement("div");h.style["font-size"]="128"+a;g.appendChild(h);a=p(h,"font-size")/128;g.removeChild(h);return a;case "em":return p(g,"font-size");case "rem":return p(document.body,"font-size");case "vw":return window.innerWidth/
100;case "vh":return window.innerHeight/100;case "vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case "vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case "in":return m;case "cm":return m/2.54;case "mm":return m/25.4;case "pt":return m/72;case "pc":return m/6}return 1}var k=b("parse-unit");N.exports=n;var m=96},{"parse-unit":494}],601:[function(b,N,G){(function(p,n){"object"===typeof G&&"undefined"!==typeof N?n(G):(p=p||self,n(p.topojson=p.topojson||{}))})(this,function(p){function n(f){return f}
function k(f){if(null==f)return n;var q,t,w=f.scale[0],x=f.scale[1],z=f.translate[0],B=f.translate[1];return function(A,D){D||(q=t=0);D=2;var C=A.length,v=Array(C);v[0]=(q+=A[0])*w+z;for(v[1]=(t+=A[1])*x+B;D<C;)v[D]=A[D],++D;return v}}function m(f){function q(C){C=w(C);C[0]<z&&(z=C[0]);C[0]>A&&(A=C[0]);C[1]<B&&(B=C[1]);C[1]>D&&(D=C[1])}function t(C){switch(C.type){case "GeometryCollection":C.geometries.forEach(t);break;case "Point":q(C.coordinates);break;case "MultiPoint":C.coordinates.forEach(q)}}
var w=k(f.transform),x,z=Infinity,B=z,A=-z,D=-z;f.arcs.forEach(function(C){for(var v=-1,y=C.length,F;++v<y;)F=w(C[v],v),F[0]<z&&(z=F[0]),F[0]>A&&(A=F[0]),F[1]<B&&(B=F[1]),F[1]>D&&(D=F[1])});for(x in f.objects)t(f.objects[x]);return[z,B,A,D]}function a(f,q){var t=q.id,w=q.bbox,x=null==q.properties?{}:q.properties;f=g(f,q);return null==t&&null==w?{type:"Feature",properties:x,geometry:f}:null==w?{type:"Feature",id:t,properties:x,geometry:f}:{type:"Feature",id:t,bbox:w,properties:x,geometry:f}}function g(f,
q){function t(C){return A(C)}function w(C){for(var v=[],y=0,F=C.length;y<F;++y){var J=C[y],K=v;K.length&&K.pop();for(var O=D[0>J?~J:J],I=0,L=O.length;I<L;++I)K.push(A(O[I],I));if(0>J)for(J=K,K=J.length,O=K-L;O<--K;)L=J[O],J[O++]=J[K],J[K]=L}2>v.length&&v.push(v[0]);return v}function x(C){for(C=w(C);4>C.length;)C.push(C[0]);return C}function z(C){return C.map(x)}function B(C){var v=C.type;switch(v){case "GeometryCollection":return{type:v,geometries:C.geometries.map(B)};case "Point":C=A(C.coordinates);
break;case "MultiPoint":C=C.coordinates.map(t);break;case "LineString":C=w(C.arcs);break;case "MultiLineString":C=C.arcs.map(w);break;case "Polygon":C=z(C.arcs);break;case "MultiPolygon":C=C.arcs.map(z);break;default:return null}return{type:v,coordinates:C}}var A=k(f.transform),D=f.arcs;return B(q)}function h(f,q){function t(C){var v=f.arcs[0>C?~C:C],y=v[0];if(f.transform){var F=[0,0];v.forEach(function(J){F[0]+=J[0];F[1]+=J[1]})}else F=v[v.length-1];return 0>C?[F,y]:[y,F]}function w(C,v){for(var y in C){var F=
C[y];delete v[F.start];delete F.start;delete F.end;F.forEach(function(J){x[0>J?~J:J]=1});A.push(F)}}var x={},z={},B={},A=[],D=-1;q.forEach(function(C,v){var y=f.arcs[0>C?~C:C];3>y.length&&!y[1][0]&&!y[1][1]&&(y=q[++D],q[D]=C,q[v]=y)});q.forEach(function(C){var v=t(C),y=v[0],F=v[1];(v=B[y])?(delete B[v.end],v.push(C),v.end=F,(C=z[F])?(delete z[C.start],y=C===v?v:v.concat(C),z[y.start=v.start]=B[y.end=C.end]=y):z[v.start]=B[v.end]=v):(v=z[F])?(delete z[v.start],v.unshift(C),v.start=y,(C=B[y])?(delete B[C.end],
y=C===v?v:C.concat(v),z[y.start=C.start]=B[y.end=v.end]=y):z[v.start]=B[v.end]=v):(v=[C],z[v.start=y]=B[v.end=F]=v)});w(B,z);w(z,B);q.forEach(function(C){x[0>C?~C:C]||A.push([C])});return A}function r(f,q,t){var w;if(1<arguments.length)var x=l(f,q,t);else{var z=0;for(x=Array(w=f.arcs.length);z<w;++z)x[z]=z}return{type:"MultiLineString",arcs:h(f,x)}}function l(f,q,t){function w(v){var y=0>v?~v:v;(D[y]||(D[y]=[])).push({i:v,g:C})}function x(v){v.forEach(w)}function z(v){v.forEach(x)}function B(v){switch(C=
v,v.type){case "GeometryCollection":v.geometries.forEach(B);break;case "LineString":x(v.arcs);break;case "MultiLineString":case "Polygon":z(v.arcs);break;case "MultiPolygon":v.arcs.forEach(z)}}var A=[],D=[],C;B(q);D.forEach(null==t?function(v){A.push(v[0].i)}:function(v){t(v[0].g,v[v.length-1].g)&&A.push(v[0].i)});return A}function c(f,q){function t(D){switch(D.type){case "GeometryCollection":D.geometries.forEach(t);break;case "Polygon":w(D.arcs);break;case "MultiPolygon":D.arcs.forEach(w)}}function w(D){D.forEach(function(C){C.forEach(function(v){(z[v=
0>v?~v:v]||(z[v]=[])).push(D)})});B.push(D)}function x(D){D=g(f,{type:"Polygon",arcs:[D]}).coordinates[0];for(var C=-1,v=D.length,y,F=D[v-1],J=0;++C<v;)y=F,F=D[C],J+=y[0]*F[1]-y[1]*F[0];return Math.abs(J)}var z={},B=[],A=[];q.forEach(t);B.forEach(function(D){if(!D._){var C=[],v=[D];D._=1;for(A.push(C);D=v.pop();)C.push(D),D.forEach(function(y){y.forEach(function(F){z[0>F?~F:F].forEach(function(J){J._||(J._=1,v.push(J))})})})}});B.forEach(function(D){delete D._});return{type:"MultiPolygon",arcs:A.map(function(D){var C=
[];D.forEach(function(J){J.forEach(function(K){K.forEach(function(O){2>z[0>O?~O:O].length&&C.push(O)})})});C=h(f,C);if(1<(D=C.length))for(var v=1,y=x(C[0]),F;v<D;++v)(F=x(C[v]))>y&&(y=C[0],C[0]=C[v],C[v]=y,y=F);return C}).filter(function(D){return 0<D.length})}}function d(f,q){for(var t=0,w=f.length;t<w;){var x=t+w>>>1;f[x]<q?t=x+1:w=x}return t}function e(f){if(null==f)return n;var q,t,w=f.scale[0],x=f.scale[1],z=f.translate[0],B=f.translate[1];return function(A,D){D||(q=t=0);D=2;var C=A.length,v=
Array(C),y=Math.round((A[0]-z)/w),F=Math.round((A[1]-B)/x);v[0]=y-q;q=y;v[1]=F-t;for(t=F;D<C;)v[D]=A[D],++D;return v}}p.bbox=m;p.feature=function(f,q){"string"===typeof q&&(q=f.objects[q]);return"GeometryCollection"===q.type?{type:"FeatureCollection",features:q.geometries.map(function(t){return a(f,t)})}:a(f,q)};p.merge=function(f){return g(f,c.apply(this,arguments))};p.mergeArcs=c;p.mesh=function(f){return g(f,r.apply(this,arguments))};p.meshArcs=r;p.neighbors=function(f){function q(K,O){K.forEach(function(I){0>
I&&(I=~I);var L=x[I];L?L.push(O):x[I]=[O]})}function t(K,O){K.forEach(function(I){q(I,O)})}function w(K,O){if("GeometryCollection"===K.type)K.geometries.forEach(function(I){w(I,O)});else if(K.type in B)B[K.type](K.arcs,O)}var x={},z=f.map(function(){return[]}),B={LineString:q,MultiLineString:t,Polygon:t,MultiPolygon:function(K,O){K.forEach(function(I){t(I,O)})}};f.forEach(w);for(var A in x){f=x[A];for(var D=f.length,C=0;C<D;++C)for(var v=C+1;v<D;++v){var y=f[C],F=f[v],J;(J=z[y])[A=d(J,F)]!==F&&J.splice(A,
0,F);(J=z[F])[A=d(J,y)]!==y&&J.splice(A,0,y)}}return z};p.quantize=function(f,q){function t(y){return C(y)}function w(y){switch(y.type){case "GeometryCollection":var F={type:"GeometryCollection",geometries:y.geometries.map(w)};break;case "Point":F={type:"Point",coordinates:C(y.coordinates)};break;case "MultiPoint":F={type:"MultiPoint",coordinates:y.coordinates.map(t)};break;default:return y}null!=y.id&&(F.id=y.id);null!=y.bbox&&(F.bbox=y.bbox);null!=y.properties&&(F.properties=y.properties);return F}
if(f.transform)throw Error("already quantized");if(q&&q.scale)var x=f.bbox;else{if(!(2<=(D=Math.floor(q))))throw Error("n must be 2");x=f.bbox||m(f);q=x[0];var z=x[1],B=x[2],A=x[3],D;q={scale:[B-q?(B-q)/(D-1):1,A-z?(A-z)/(D-1):1],translate:[q,z]}}var C=e(q),v;z=f.objects;B={};for(v in z)B[v]=w(z[v]);return{type:"Topology",bbox:x,transform:q,objects:B,arcs:f.arcs.map(function(y){var F=0,J=1,K=y.length,O,I=Array(K);for(I[0]=C(y[0],0);++F<K;)if((O=C(y[F],F))[0]||O[1])I[J++]=O;1===J&&(I[J++]=[0,0]);
I.length=J;return I})}};p.transform=k;p.untransform=e;Object.defineProperty(p,"__esModule",{value:!0})})},{}],602:[function(b,N,G){N.exports=function(m){if(0>m)return[];if(0===m)return[[0]];for(var a=Math.round(k(m+1))|0,g=[],h=0;h<a;++h){for(var r=p.unrank(m,h),l=[0],c=0,d=0;d<r.length;++d)c+=1<<r[d],l.push(c);1>n(r)&&(l[0]=c,l[m]=0);g.push(l)}return g};var p=b("permutation-rank"),n=b("permutation-parity"),k=b("gamma")},{gamma:256,"permutation-parity":496,"permutation-rank":497}],603:[function(b,
N,G){function p(d,e,f){return Math.sqrt(Math.pow(d,2)+Math.pow(e,2)+Math.pow(f,2))}function n(d){var e=Math.abs(d[0]),f=Math.abs(d[1]),q=Math.abs(d[2]),t=[0,0,0];e>Math.max(f,q)?t[2]=1:f>Math.max(e,q)?t[0]=1:t[1]=1;for(q=f=e=0;3>q;++q)e+=d[q]*d[q],f+=t[q]*d[q];for(q=0;3>q;++q)t[q]-=f/e*d[q];r(t,t);return t}function k(d,e,f,q,t,w,x,z){this.center=m(f);this.up=m(q);this.right=m(t);this.radius=m([w]);this.angle=m([x,z]);this.angle.bounds=[[-Infinity,-Math.PI/2],[Infinity,Math.PI/2]];this.setDistanceLimits(d,
e);this.computedCenter=this.center.curve(0);this.computedUp=this.up.curve(0);this.computedRight=this.right.curve(0);this.computedRadius=this.radius.curve(0);this.computedAngle=this.angle.curve(0);this.computedToward=[0,0,0];this.computedEye=[0,0,0];this.computedMatrix=Array(16);for(d=0;16>d;++d)this.computedMatrix[d]=.5;this.recalcMatrix(0)}N.exports=function(d){d=d||{};var e=d.center||[0,0,0],f=d.up||[0,1,0],q=d.right||n(f),t=d.radius||1,w=d.theta||0,x=d.phi||0;e=[].slice.call(e,0,3);f=[].slice.call(f,
0,3);r(f,f);q=[].slice.call(q,0,3);r(q,q);"eye"in d&&(t=d.eye,w=[t[0]-e[0],t[1]-e[1],t[2]-e[2]],h(q,w,f),1E-6>p(q[0],q[1],q[2])?q=n(f):r(q,q),t=p(w[0],w[1],w[2]),x=l(f,w)/t,w=l(q,w)/t,x=Math.acos(x),w=Math.acos(w));t=Math.log(t);return new k(d.zoomMin,d.zoomMax,e,f,q,t,w,x)};var m=b("filtered-vector"),a=b("gl-mat4/invert"),g=b("gl-mat4/rotate"),h=b("gl-vec3/cross"),r=b("gl-vec3/normalize"),l=b("gl-vec3/dot");b=k.prototype;b.setDistanceLimits=function(d,e){d=0<d?Math.log(d):-Infinity;e=0<e?Math.log(e):
Infinity;e=Math.max(e,d);this.radius.bounds[0][0]=d;this.radius.bounds[1][0]=e};b.getDistanceLimits=function(d){var e=this.radius.bounds[0];return d?(d[0]=Math.exp(e[0][0]),d[1]=Math.exp(e[1][0]),d):[Math.exp(e[0][0]),Math.exp(e[1][0])]};b.recalcMatrix=function(d){this.center.curve(d);this.up.curve(d);this.right.curve(d);this.radius.curve(d);this.angle.curve(d);for(var e=this.computedUp,f=this.computedRight,q=0,t=0,w=0;3>w;++w)t+=e[w]*f[w],q+=e[w]*e[w];var x=Math.sqrt(q);for(w=d=0;3>w;++w)f[w]-=e[w]*
t/q,d+=f[w]*f[w],e[w]/=x;d=Math.sqrt(d);for(w=0;3>w;++w)f[w]/=d;var z=this.computedToward;h(z,e,f);r(z,z);d=Math.exp(this.computedRadius[0]);x=this.computedAngle[0];q=this.computedAngle[1];t=Math.cos(x);x=Math.sin(x);var B=Math.cos(q),A=Math.sin(q);q=this.computedCenter;var D=t*B,C=x*B,v=-t*A,y=-x*A;t=this.computedEye;x=this.computedMatrix;for(w=0;3>w;++w){var F=D*f[w]+C*z[w]+A*e[w];x[4*w+1]=v*f[w]+y*z[w]+B*e[w];x[4*w+2]=F;x[4*w+3]=0}f=x[1];w=x[5];A=x[9];z=x[2];B=x[6];D=x[10];e=w*D-A*B;A=A*z-f*D;
f=f*B-w*z;w=p(e,A,f);x[0]=e/w;x[4]=A/w;x[8]=f/w;for(w=0;3>w;++w)t[w]=q[w]+x[2+4*w]*d;for(w=0;3>w;++w){for(q=d=0;3>q;++q)d+=x[w+4*q]*t[q];x[12+w]=-d}x[15]=1};b.getMatrix=function(d,e){this.recalcMatrix(d);d=this.computedMatrix;if(e){for(var f=0;16>f;++f)e[f]=d[f];return e}return d};var c=[0,0,0];b.rotate=function(d,e,f,q){this.angle.move(d,e,f);if(q){this.recalcMatrix(d);e=this.computedMatrix;c[0]=e[2];c[1]=e[6];c[2]=e[10];f=this.computedUp;for(var t=this.computedRight,w=this.computedToward,x=0;3>
x;++x)e[4*x]=f[x],e[4*x+1]=t[x],e[4*x+2]=w[x];g(e,e,q,c);for(x=0;3>x;++x)f[x]=e[4*x],t[x]=e[4*x+1];this.up.set(d,f[0],f[1],f[2]);this.right.set(d,t[0],t[1],t[2])}};b.pan=function(d,e,f,q){e=e||0;f=f||0;q=q||0;this.recalcMatrix(d);var t=this.computedMatrix,w=t[1],x=t[5],z=t[9],B=p(w,x,z);w/=B;x/=B;z/=B;B=t[0];var A=t[4];t=t[8];var D=B*w+A*x+t*z;B-=w*D;A-=x*D;t-=z*D;D=p(B,A,t);this.center.move(d,B/D*e+w*f,A/D*e+x*f,t/D*e+z*f);e=Math.exp(this.computedRadius[0]);e=Math.max(1E-4,e+q);this.radius.set(d,
Math.log(e))};b.translate=function(d,e,f,q){this.center.move(d,e||0,f||0,q||0)};b.setMatrix=function(d,e,f,q){var t=1;"number"===typeof f&&(t=f|0);if(0>t||3<t)t=1;var w=(t+2)%3;e||(this.recalcMatrix(d),e=this.computedMatrix);f=e[t];var x=e[t+4],z=e[t+8];if(q){q=Math.abs(f);var B=Math.abs(z),A=Math.max(q,Math.abs(x),B);q===A?(f=0>f?-1:1,x=z=0):B===A?(z=0>z?-1:1,f=x=0):(x=0>x?-1:1,f=z=0)}else q=p(f,x,z),f/=q,x/=q,z/=q;q=e[w];B=e[w+4];w=e[w+8];A=q*f+B*x+w*z;q-=f*A;B-=x*A;w-=z*A;A=p(q,B,w);q/=A;B/=A;
w/=A;A=x*w-z*B;var D=z*q-f*w,C=f*B-x*q,v=p(A,D,C);A/=v;D/=v;C/=v;this.center.jump(d,F,J,K);this.radius.idle(d);this.up.jump(d,f,x,z);this.right.jump(d,q,B,w);if(2===t)J=e[1],K=e[5],f=e[9],F=0>y?-Math.PI/2:Math.PI/2,J=Math.atan2(J*A+K*D+f*C,J*q+K*B+f*w);else{J=e[2];K=e[6];var y=e[10];F=Math.asin(Math.min(1,Math.max(-1,J*f+K*x+y*z)));J=Math.atan2(J*A+K*D+y*C,J*q+K*B+y*w)}this.angle.jump(d,J,F);this.recalcMatrix(d);y=e[2];f=e[6];x=e[10];K=this.computedMatrix;a(K,e);e=K[15];var F=K[12]/e,J=K[13]/e,K=
K[14]/e;e=Math.exp(this.computedRadius[0]);this.center.jump(d,F-y*e,J-f*e,K-x*e)};b.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())};b.idle=function(d){this.center.idle(d);this.up.idle(d);this.right.idle(d);this.radius.idle(d);this.angle.idle(d)};b.flush=function(d){this.center.flush(d);this.up.flush(d);this.right.flush(d);this.radius.flush(d);this.angle.flush(d)};b.setDistance=function(d,e){0<e&&this.radius.set(d,Math.log(e))};
b.lookAt=function(d,e,f,q){this.recalcMatrix(d);e=e||this.computedEye;f=f||this.computedCenter;q=q||this.computedUp;var t=q[0],w=q[1];q=q[2];var x=p(t,w,q);if(!(1E-6>x)){t/=x;w/=x;q/=x;x=e[0]-f[0];var z=e[1]-f[1];e=e[2]-f[2];var B=p(x,z,e);if(!(1E-6>B)){x/=B;z/=B;e/=B;var A=this.computedRight,D=A[0],C=A[1];A=A[2];var v=t*D+w*C+q*A;D-=v*t;C-=v*w;A-=v*q;v=p(D,C,A);if(.01>v&&(D=w*e-q*z,C=q*x-t*e,A=t*z-w*x,v=p(D,C,A),1E-6>v))return;D/=v;C/=v;A/=v;this.up.set(d,t,w,q);this.right.set(d,D,C,A);this.center.set(d,
f[0],f[1],f[2]);this.radius.set(d,Math.log(B));f=w*A-q*C;B=q*D-t*A;v=t*C-w*D;var y=p(f,B,v);t=Math.asin(Math.min(1,Math.max(-1,t*x+w*z+q*e)));w=Math.atan2(f/y*x+B/y*z+v/y*e,D*x+C*z+A*e);x=this.angle._state;q=x[x.length-1];x=x[x.length-2];q%=2*Math.PI;z=Math.abs(q-w);e=Math.abs(q-2*Math.PI-w);Math.abs(q+2*Math.PI-w)<z&&(q+=2*Math.PI);e<z&&(q-=2*Math.PI);this.angle.jump(this.angle.lastT(),q,x);this.angle.set(d,w,t)}}}},{"filtered-vector":250,"gl-mat4/invert":299,"gl-mat4/rotate":305,"gl-vec3/cross":368,
"gl-vec3/dot":373,"gl-vec3/normalize":390}],604:[function(b,N,G){N.exports=function(n,k,m){var a=n*k,g=p*n;g-=g-n;n-=g;var h=p*k;h-=h-k;k-=h;k=n*k-(a-g*h-n*h-g*k);return m?(m[0]=k,m[1]=a,m):[k,a]};var p=+(Math.pow(2,27)+1)},{}],605:[function(b,N,G){N.exports=function(p,n,k){var m=p+n,a=m-p;n-=a;p-=m-a;return k?(k[0]=p+n,k[1]=m,k):[p+n,m]}},{}],606:[function(b,N,G){var p=b("../prototype/is");N.exports=function(n){if("function"!==typeof n||!hasOwnProperty.call(n,"length"))return!1;try{if("number"!==
typeof n.length||"function"!==typeof n.call||"function"!==typeof n.apply)return!1}catch(k){return!1}return!p(n)}},{"../prototype/is":613}],607:[function(b,N,G){var p=b("../value/is"),n=b("../object/is"),k=b("../string/coerce"),m=b("./to-short-string");N.exports=function(a,g,h){if(!n(h))throw new TypeError(g.replace("%v",m(a)));if(!p(a)){if("default"in h)return h["default"];if(h.isOptional)return null}h=k(h.errorMessage);p(h)||(h=g);throw new TypeError(h.replace("%v",m(a)));}},{"../object/is":610,
"../string/coerce":614,"../value/is":616,"./to-short-string":609}],608:[function(b,N,G){N.exports=function(p){try{return p.toString()}catch(n){try{return String(p)}catch(k){return null}}}},{}],609:[function(b,N,G){var p=b("./safe-to-string"),n=/[\n\r\u2028\u2029]/g;N.exports=function(k){k=p(k);if(null===k)return"\x3cNon-coercible to string value\x3e";100<k.length&&(k=k.slice(0,99)+"");return k=k.replace(n,function(m){switch(m){case "\n":return"\\n";case "\r":return"\\r";case "":return"\\u2028";
case "":return"\\u2029";default:throw Error("Unexpected character");}})}},{"./safe-to-string":608}],610:[function(b,N,G){var p=b("../value/is"),n={object:!0,"function":!0,undefined:!0};N.exports=function(k){return p(k)?hasOwnProperty.call(n,typeof k):!1}},{"../value/is":616}],611:[function(b,N,G){var p=b("../lib/resolve-exception"),n=b("./is");N.exports=function(k,m){return n(k)?k:p(k,"%v is not a plain function",m)}},{"../lib/resolve-exception":607,"./is":612}],612:[function(b,N,G){var p=b("../function/is"),
n=/^\s*class[\s{/}]/,k=Function.prototype.toString;N.exports=function(m){return!p(m)||n.test(k.call(m))?!1:!0}},{"../function/is":606}],613:[function(b,N,G){var p=b("../object/is");N.exports=function(n){if(!p(n))return!1;try{return n.constructor?n.constructor.prototype===n:!1}catch(k){return!1}}},{"../object/is":610}],614:[function(b,N,G){var p=b("../value/is"),n=b("../object/is"),k=Object.prototype.toString;N.exports=function(m){if(!p(m))return null;if(n(m)){var a=m.toString;if("function"!==typeof a||
a===k)return null}return""+m}},{"../object/is":610,"../value/is":616}],615:[function(b,N,G){var p=b("../lib/resolve-exception"),n=b("./is");N.exports=function(k,m){return n(k)?k:p(k,"Cannot use %v",m)}},{"../lib/resolve-exception":607,"./is":616}],616:[function(b,N,G){N.exports=function(p){return void 0!==p&&null!==p}},{}],617:[function(b,N,G){(function(p){(function(){function n(J){if(J){var K=x.log2(J.length||J.byteLength);y[K].push(J)}}function k(J){J=x.nextPow2(J);var K=x.log2(J);K=y[K];return 0<
K.length?K.pop():new ArrayBuffer(J)}function m(J){return new Uint8Array(k(J),0,J)}function a(J){return new Uint16Array(k(2*J),0,J)}function g(J){return new Uint32Array(k(4*J),0,J)}function h(J){return new Int8Array(k(J),0,J)}function r(J){return new Int16Array(k(2*J),0,J)}function l(J){return new Int32Array(k(4*J),0,J)}function c(J){return new Float32Array(k(4*J),0,J)}function d(J){return new Float64Array(k(8*J),0,J)}function e(J){return A?new Uint8ClampedArray(k(J),0,J):m(J)}function f(J){return D?
new BigUint64Array(k(8*J),0,J):null}function q(J){return C?new BigInt64Array(k(8*J),0,J):null}function t(J){return new DataView(k(J),0,J)}function w(J){J=x.nextPow2(J);var K=x.log2(J);K=F[K];return 0<K.length?K.pop():new B(J)}var x=b("bit-twiddle"),z=b("dup"),B=b("buffer").Buffer;p.__TYPEDARRAY_POOL||(p.__TYPEDARRAY_POOL={UINT8:z([32,0]),UINT16:z([32,0]),UINT32:z([32,0]),BIGUINT64:z([32,0]),INT8:z([32,0]),INT16:z([32,0]),INT32:z([32,0]),BIGINT64:z([32,0]),FLOAT:z([32,0]),DOUBLE:z([32,0]),DATA:z([32,
0]),UINT8C:z([32,0]),BUFFER:z([32,0])});var A="undefined"!==typeof Uint8ClampedArray,D="undefined"!==typeof BigUint64Array,C="undefined"!==typeof BigInt64Array,v=p.__TYPEDARRAY_POOL;v.UINT8C||(v.UINT8C=z([32,0]));v.BIGUINT64||(v.BIGUINT64=z([32,0]));v.BIGINT64||(v.BIGINT64=z([32,0]));v.BUFFER||(v.BUFFER=z([32,0]));var y=v.DATA,F=v.BUFFER;G.free=function(J){if(B.isBuffer(J))F[x.log2(J.length)].push(J);else if("[object ArrayBuffer]"!==Object.prototype.toString.call(J)&&(J=J.buffer),J){var K=x.log2(J.length||
J.byteLength)|0;y[K].push(J)}};G.freeUint8=G.freeUint16=G.freeUint32=G.freeBigUint64=G.freeInt8=G.freeInt16=G.freeInt32=G.freeBigInt64=G.freeFloat32=G.freeFloat=G.freeFloat64=G.freeDouble=G.freeUint8Clamped=G.freeDataView=function(J){n(J.buffer)};G.freeArrayBuffer=n;G.freeBuffer=function(J){F[x.log2(J.length)].push(J)};G.malloc=function(J,K){if(void 0===K||"arraybuffer"===K)return k(J);switch(K){case "uint8":return m(J);case "uint16":return a(J);case "uint32":return g(J);case "int8":return h(J);case "int16":return r(J);
case "int32":return l(J);case "float":case "float32":return c(J);case "double":case "float64":return d(J);case "uint8_clamped":return e(J);case "bigint64":return q(J);case "biguint64":return f(J);case "buffer":return w(J);case "data":case "dataview":return t(J)}return null};G.mallocArrayBuffer=k;G.mallocUint8=m;G.mallocUint16=a;G.mallocUint32=g;G.mallocInt8=h;G.mallocInt16=r;G.mallocInt32=l;G.mallocFloat32=G.mallocFloat=c;G.mallocFloat64=G.mallocDouble=d;G.mallocUint8Clamped=e;G.mallocBigUint64=f;
G.mallocBigInt64=q;G.mallocDataView=t;G.mallocBuffer=w;G.clearCache=function(){for(var J=0;32>J;++J)v.UINT8[J].length=0,v.UINT16[J].length=0,v.UINT32[J].length=0,v.INT8[J].length=0,v.INT16[J].length=0,v.INT32[J].length=0,v.FLOAT[J].length=0,v.DOUBLE[J].length=0,v.BIGUINT64[J].length=0,v.BIGINT64[J].length=0,v.UINT8C[J].length=0,y[J].length=0,F[J].length=0}}).call(this)}).call(this,"undefined"!==typeof Re?Re:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"bit-twiddle":104,
buffer:117,dup:185}],618:[function(b,N,G){function p(n){this.roots=Array(n);this.ranks=Array(n);for(var k=0;k<n;++k)this.roots[k]=k,this.ranks[k]=0}"use restrict";N.exports=p;b=p.prototype;Object.defineProperty(b,"length",{get:function(){return this.roots.length}});b.makeSet=function(){var n=this.roots.length;this.roots.push(n);this.ranks.push(0);return n};b.find=function(n){for(var k=n,m=this.roots;m[n]!==n;)n=m[n];for(;m[k]!==n;){var a=m[k];m[k]=n;k=a}return n};b.link=function(n,k){n=this.find(n);
k=this.find(k);if(n!==k){var m=this.ranks,a=this.roots,g=m[n],h=m[k];g<h?a[n]=k:h<g?a[k]=n:(a[k]=n,++m[n])}}},{}],619:[function(b,N,G){N.exports=function(p,n,k){if(0===p.length)return p;if(n){k||p.sort(n);k=1;for(var m=p.length,a=p[0],g,h=1;h<m;++h)g=a,a=p[h],n(a,g)&&(h===k?k++:p[k++]=a);p.length=k;return p}k||p.sort();n=1;k=p.length;m=p[0];for(g=1;g<k;++g)a=m,m=p[g],m!==a&&(g===n?n++:p[n++]=m);p.length=n;return p}},{}],620:[function(b,N,G){var p=/['"]/;N.exports=function(n){if(!n)return"";p.test(n.charAt(0))&&
(n=n.substr(1));p.test(n.charAt(n.length-1))&&(n=n.substr(0,n.length-1));return n}},{}],621:[function(b,N,G){N.exports=function(p,n,k){Array.isArray(k)||(k=[].slice.call(arguments,2));for(var m=0,a=k.length;m<a;m++){var g=k[m],h;for(h in g)if((void 0===n[h]||Array.isArray(n[h])||p[h]!==n[h])&&h in n){if(!0===g[h])var r=n[h];else if(!1===g[h])continue;else if("function"===typeof g[h]&&(r=g[h](n[h],p,n),void 0===r))continue;p[h]=r}}return p}},{}],622:[function(b,N,G){(function(p){(function(){function n(k){try{if(!p.localStorage)return!1}catch(m){return!1}k=
p.localStorage[k];return null==k?!1:"true"===String(k).toLowerCase()}N.exports=function(k,m){if(n("noDeprecation"))return k;var a=!1;return function(){if(!a){if(n("throwDeprecation"))throw Error(m);n("traceDeprecation")?console.trace(m):console.warn(m);a=!0}return k.apply(this,arguments)}}}).call(this)}).call(this,"undefined"!==typeof Re?Re:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],623:[function(b,N,G){N.exports=function(m,a){if("object"!==typeof a||null===a)a={};
return p(m,a.canvas||n,a.context||k,a)};var p=b("./lib/vtext"),n=null,k=null;"undefined"!==typeof document&&(n=document.createElement("canvas"),n.width=8192,n.height=1024,k=n.getContext("2d"))},{"./lib/vtext":624}],624:[function(b,N,G){function p(C,v,y,F){var J="\x3c"+C+"\x3e";C="\x3c/"+C+"\x3e";for(var K=J.length,O=C.length,I=v[0]===x||v[0]===A,L=0,H;-1<L;){L=y.indexOf(J,L);if(-1===L)break;H=y.indexOf(C,L+K);if(-1===H)break;if(H<=L)break;for(var M=L;M<H+O;++M)if(M<L+K||M>=H)F[M]=null,y=y.substr(0,
M)+" "+y.substr(M+1);else if(null!==F[M]){var Q=F[M].indexOf(v[0]);-1===Q?F[M]+=v:I&&(F[M]=F[M].substr(0,Q+1)+(1+parseInt(F[M][Q+1]))+F[M].substr(Q+2))}L+=K;L=y.substr(L,H-L).indexOf(J);L=-1!==L?L:H+O}return F}function n(C,v,y){for(var F=v.textAlign||"start",J=v.textBaseline||"alphabetic",K=[1073741824,1073741824],O=[0,0],I=C.length,L=0;L<I;++L)for(var H=C[L],M=0;2>M;++M)K[M]=Math.min(K[M],H[M])|0,O[M]=Math.max(O[M],H[M])|0;var Q=0;switch(F){case "center":Q=-.5*(K[0]+O[0]);break;case "right":case "end":Q=
-O[0];break;case "left":case "start":Q=-K[0];break;default:throw Error("vectorize-text: Unrecognized textAlign: '"+F+"'");}var Z=0;switch(J){case "hanging":case "top":Z=-K[1];break;case "middle":Z=-.5*(K[1]+O[1]);break;case "alphabetic":case "ideographic":Z=-3*y;break;case "bottom":Z=-O[1];break;default:throw Error("vectorize-text: Unrecoginized textBaseline: '"+J+"'");}var ca=1/y;"lineHeight"in v?ca*=+v.lineHeight:"width"in v?ca=v.width/(O[0]-K[0]):"height"in v&&(ca=v.height/(O[1]-K[1]));return C.map(function(W){return[ca*
(W[0]+Q),ca*(W[1]+Z)]})}function k(C,v,y,F,J,K){function O(){if(""!==ha){var oa=v.measureText(ha).width;v.fillText(ha,W+ba,T+ja);ba+=oa}}function I(){return""+Math.round(ma)+"px "}function L(oa,xa){var ra=""+v.font;if(!0===K.subscripts){var la=oa.indexOf(A),ka=xa.indexOf(A);la=-1<la?parseInt(oa[1+la]):0;ka=-1<ka?parseInt(xa[1+ka]):0;la!==ka&&(ra=ra.replace(I(),"?px "),ma*=Math.pow(.75,ka-la),ra=ra.replace("?px ",I()));ja+=.25*ca*(ka-la)}!0===K.superscripts&&(la=oa.indexOf(x),ka=xa.indexOf(x),la=-1<
la?parseInt(oa[1+la]):0,ka=-1<ka?parseInt(xa[1+ka]):0,la!==ka&&(ra=ra.replace(I(),"?px "),ma*=Math.pow(.75,ka-la),ra=ra.replace("?px ",I())),ja-=.25*ca*(ka-la));!0===K.bolds&&(ka=-1<oa.indexOf(f),la=-1<xa.indexOf(f),!ka&&la&&(ra=na?ra.replace("italic ","italic bold "):"bold "+ra),ka&&!la&&(ra=ra.replace("bold ","")));if(!0===K.italics){var na=-1<oa.indexOf(t);oa=-1<xa.indexOf(t);!na&&oa&&(ra="italic "+ra);na&&!oa&&(ra=ra.replace("italic ",""))}v.font=ra}y=y.replace(/\n/g,"");y=!0===K.breaklines?y.replace(/<br>/g,
"\n"):y.replace(/<br>/g," ");var H="",M=[];for(U=0;U<y.length;++U)M[U]=H;!0===K.bolds&&(M=p(e,f,y,M));!0===K.italics&&(M=p(q,t,y,M));!0===K.superscripts&&(M=p(w,z,y,M));!0===K.subscripts&&(M=p(B,D,y,M));var Q=[],Z="";for(U=0;U<y.length;++U)null!==M[U]&&(Z+=y[U],Q.push(M[U]));M=Z.split("\n");y=M.length;var ca=Math.round(J*F),W=F,T=2*F;J=0;U=y*ca+T;C.height<U&&(C.height=U);v.fillStyle="#000";v.fillRect(0,0,C.width,C.height);v.fillStyle="#fff";var U;Z=0;var ha="";for(C=0;C<y;++C){var Y=M[C]+"\n";var ba=
0;var ja=C*ca;var ma=F;ha="";for(U=0;U<Y.length;++U){var ia=U+Z<Q.length?Q[U+Z]:Q[Q.length-1];H===ia?ha+=Y[U]:(O(),ha=Y[U],void 0!==ia&&(L(H,ia),H=ia))}O();Z+=Y.length;U=Math.round(ba+2*W)|0;J<U&&(J=U)}F=J;H=T+ca*y;return h(v.getImageData(0,0,F,H).data,[H,F,4]).pick(-1,-1,0).transpose(1,0)}function m(C,v,y,F){C=g(C,128);F=F?r(C.cells,C.positions,.25):{edges:C.cells,positions:C.positions};y=n(F.positions,v,y);C=F.edges;F="ccw"===v.orientation;l(y,C);if(v.polygons||v.polygon||v.polyline){v=d(C,y);C=
Array(v.length);for(var J=0;J<v.length;++J){for(var K=v[J],O=Array(K.length),I=0;I<K.length;++I){for(var L=K[I],H=Array(L.length),M=0;M<L.length;++M)H[M]=y[L[M]].slice();F&&H.reverse();O[I]=H}C[J]=O}return C}return v.triangles||v.triangulate||v.triangle?{cells:c(y,C,{delaunay:!1,exterior:!1,interior:!0}),positions:y}:{edges:C,positions:y}}function a(C,v,y){try{return m(C,v,y,!0)}catch(F){}try{return m(C,v,y,!1)}catch(F){}return v.polygons||v.polyline||v.polygon?[]:v.triangles||v.triangulate||v.triangle?
{cells:[],positions:[]}:{edges:[],positions:[]}}N.exports=function(C,v,y,F){var J=64,K=1.25,O={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};F&&(F.size&&0<F.size&&(J=F.size),F.lineSpacing&&0<F.lineSpacing&&(K=F.lineSpacing),F.styletags&&F.styletags.breaklines&&(O.breaklines=F.styletags.breaklines?!0:!1),F.styletags&&F.styletags.bolds&&(O.bolds=F.styletags.bolds?!0:!1),F.styletags&&F.styletags.italics&&(O.italics=F.styletags.italics?!0:!1),F.styletags&&F.styletags.subscripts&&(O.subscripts=
F.styletags.subscripts?!0:!1),F.styletags&&F.styletags.superscripts&&(O.superscripts=F.styletags.superscripts?!0:!1));y.font=[F.fontStyle,F.fontVariant,F.fontWeight,J+"px",F.font].filter(function(I){return I}).join(" ");y.textAlign="start";y.textBaseline="alphabetic";y.direction="ltr";C=k(v,y,C,J,K,O);return a(C,F,J)};N.exports.processPixels=a;var g=b("surface-nets"),h=b("ndarray"),r=b("simplify-planar-graph"),l=b("clean-pslg"),c=b("cdt2d"),d=b("planar-graph-to-polyline"),e="b",f="b|",q="i",t="i|",
w="sup",x="+",z="+1",B="sub",A="-",D="-1"},{cdt2d:118,"clean-pslg":127,ndarray:483,"planar-graph-to-polyline":501,"simplify-planar-graph":563,"surface-nets":591}],625:[function(b,N,G){(function(){function p(z){z.permitHostObjects___&&z.permitHostObjects___(p)}function n(z){return!("weakmap:"==z.substr(0,8)&&"___"===z.substr(z.length-3))}function k(z){if(z!==Object(z))throw new TypeError("Not an object: "+z);var B=z[f];if(B&&B.key===z)return B;if(e(z)){B={key:z};try{return d(z,f,{value:B,writable:!1,
enumerable:!1,configurable:!1}),B}catch(A){}}}function m(z){z.prototype=null;return Object.freeze(z)}function a(){t||"undefined"===typeof console||(t=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}if("undefined"===typeof ses||!ses.ok||ses.ok()){"undefined"!==typeof ses&&(ses.weakMapPermitHostObjects=p);var g=!1;if("function"===typeof WeakMap){var h=WeakMap;if("undefined"===typeof navigator||!/Firefox/.test(navigator.userAgent)){var r=
new h,l=Object.freeze({});r.set(l,1);if(1!==r.get(l))g=!0;else{N.exports=WeakMap;return}}}var c=Object.getOwnPropertyNames,d=Object.defineProperty,e=Object.isExtensible,f="weakmap:ident:"+Math.random()+"___";"undefined"!==typeof crypto&&"function"===typeof crypto.getRandomValues&&"function"===typeof ArrayBuffer&&"function"===typeof Uint8Array&&(r=new ArrayBuffer(25),r=new Uint8Array(r),crypto.getRandomValues(r),f="weakmap:rand:"+Array.prototype.map.call(r,function(z){return(z%36).toString(36)}).join("")+
"___");d(Object,"getOwnPropertyNames",{value:function(z){return c(z).filter(n)}});if("getPropertyNames"in Object){var q=Object.getPropertyNames;d(Object,"getPropertyNames",{value:function(z){return q(z).filter(n)}})}(function(){var z=Object.freeze;d(Object,"freeze",{value:function(D){k(D);return z(D)}});var B=Object.seal;d(Object,"seal",{value:function(D){k(D);return B(D)}});var A=Object.preventExtensions;d(Object,"preventExtensions",{value:function(D){k(D);return A(D)}})})();var t=!1,w=0,x=function(){this instanceof
x||a();var z=[],B=[],A=w++;return Object.create(x.prototype,{get___:{value:m(function(D,C){var v=k(D);if(v)return A in v?v[A]:C;D=z.indexOf(D);return 0<=D?B[D]:C})},has___:{value:m(function(D){var C=k(D);return C?A in C:0<=z.indexOf(D)})},set___:{value:m(function(D,C){var v;(v=k(D))?v[A]=C:(v=z.indexOf(D),0<=v?B[v]=C:(v=z.length,B[v]=C,z[v]=D));return this})},delete___:{value:m(function(D){var C=k(D);if(C)return A in C&&delete C[A];D=z.indexOf(D);if(0>D)return!1;C=z.length-1;z[D]=void 0;B[D]=B[C];
z[D]=z[C];z.length=C;B.length=C;return!0})}})};x.prototype=Object.create(Object.prototype,{get:{value:function(z,B){return this.get___(z,B)},writable:!0,configurable:!0},has:{value:function(z){return this.has___(z)},writable:!0,configurable:!0},set:{value:function(z,B){return this.set___(z,B)},writable:!0,configurable:!0},"delete":{value:function(z){return this.delete___(z)},writable:!0,configurable:!0}});"function"===typeof h?function(){function z(){this instanceof x||a();var B=new h,A=void 0,D=
!1;var C=g?function(v,y){B.set(v,y);B.has(v)||(A||(A=new x),A.set(v,y));return this}:function(v,y){if(D)try{B.set(v,y)}catch(F){A||(A=new x),A.set___(v,y)}else B.set(v,y);return this};return Object.create(x.prototype,{get___:{value:m(function(v,y){return A?B.has(v)?B.get(v):A.get___(v,y):B.get(v,y)})},has___:{value:m(function(v){return B.has(v)||(A?A.has___(v):!1)})},set___:{value:m(C)},delete___:{value:m(function(v){var y=!!B["delete"](v);return A?A.delete___(v)||y:y})},permitHostObjects___:{value:m(function(v){if(v===
p)D=!0;else throw Error("bogus call to permitHostObjects___");})}})}g&&"undefined"!==typeof Proxy&&(Proxy=void 0);z.prototype=x.prototype;N.exports=z;Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!==typeof Proxy&&(Proxy=void 0),N.exports=x)}})()},{}],626:[function(b,N,G){var p=b("./hidden-store.js");N.exports=function(){var n={};return function(k){if(("object"!==typeof k||null===k)&&"function"!==typeof k)throw Error("Weakmap-shim: Key must be object");
var m=k.valueOf(n);return m&&m.identity===n?m:p(k,n)}}},{"./hidden-store.js":627}],627:[function(b,N,G){N.exports=function(p,n){var k={identity:n},m=p.valueOf;Object.defineProperty(p,"valueOf",{value:function(a){return a!==n?m.apply(this,arguments):k},writable:!0});return k}},{}],628:[function(b,N,G){var p=b("./create-store.js");N.exports=function(){var n=p();return{get:function(k,m){k=n(k);return k.hasOwnProperty("value")?k.value:m},set:function(k,m){n(k).value=m;return this},has:function(k){return"value"in
n(k)},"delete":function(k){return delete n(k).value}}}},{"./create-store.js":626}],629:[function(b,N,G){var p=b("get-canvas-context");N.exports=function(n){return p("webgl",n)}},{"get-canvas-context":257}],630:[function(b,N,G){function p(c){this.local=this.regionalOptions[c||""]||this.regionalOptions[""]}var n=b("../main");b=b("object-assign");var k=n.instance();p.prototype=new n.baseCalendar;b(p.prototype,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",
epochs:["BEC","EC"],monthNumbers:function(c,d){if("string"===typeof c)return(d=c.match(a))?d[0]:"";var e=this._validateYear(c);c=c.month();var f=""+this.toChineseMonth(e,c);d&&2>f.length&&(f="0"+f);this.isIntercalaryMonth(e,c)&&(f+="i");return f},monthNames:function(c){if("string"===typeof c){var d=c.match(g);return d?d[0]:""}d=this._validateYear(c);c=c.month();var e="           ".split(" ")[this.toChineseMonth(d,c)-1];this.isIntercalaryMonth(d,c)&&(e=""+e);return e},monthNamesShort:function(c){if("string"===
typeof c){var d=c.match(h);return d?d[0]:""}d=this._validateYear(c);c=c.month();var e="           ".split(" ")[this.toChineseMonth(d,c)-1];this.isIntercalaryMonth(d,c)&&(e=""+e);return e},parseMonth:function(c,d){c=this._validateYear(c);var e=parseInt(d);if(isNaN(e)){if(""===d[0]){var f=!0;d=d.substring(1)}""===d[d.length-1]&&(d=d.substring(0,d.length-1));e=1+"           ".split(" ").indexOf(d)}else d=d[d.length-1],f="i"===d||"I"===d;return this.toMonthIndex(c,e,f)},
dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(c,d){c.year&&(c=c.year());if("number"!==typeof c||1888>c||2111<c)throw d.replace(/\{0\}/,this.local.name);return c},toMonthIndex:function(c,d,e){c=this.intercalaryMonth(c);if(e&&d!==c||1>d||12<d)throw n.local.invalidMonth.replace(/\{0\}/,this.local.name);
return c?!e&&d<=c?d-1:d:d-1},toChineseMonth:function(c,d){c.year&&(c=c.year(),d=c.month());c=this.intercalaryMonth(c);if(0>d||d>(c?12:11))throw n.local.invalidMonth.replace(/\{0\}/,this.local.name);return c?d<c?d+1:d:d+1},intercalaryMonth:function(c){c=this._validateYear(c);return r[c-r[0]]>>13},isIntercalaryMonth:function(c,d){c.year&&(c=c.year(),d=c.month());c=this.intercalaryMonth(c);return!!c&&c===d},leapYear:function(c){return 0!==this.intercalaryMonth(c)},weekOfYear:function(c,d,e){var f=this._validateYear(c,
n.local.invalidyear);f=l[f-l[0]];f=k.newDate(f>>9&4095,f>>5&15,f&31);f.add(4-(f.dayOfWeek()||7),"d");c=this.toJD(c,d,e)-f.toJD();return 1+Math.floor(c/7)},monthsInYear:function(c){return this.leapYear(c)?13:12},daysInMonth:function(c,d){c.year&&(d=c.month(),c=c.year());c=this._validateYear(c);c=r[c-r[0]];if(d>(c>>13?12:11))throw n.local.invalidMonth.replace(/\{0\}/,this.local.name);return c&1<<12-d?30:29},weekDay:function(c,d,e){return 6>(this.dayOfWeek(c,d,e)||7)},toJD:function(c,d,e){q=this._validate(c,
q,e,n.local.invalidDate);c=this._validateYear(q.year());d=q.month();e=q.day();var f=this.isIntercalaryMonth(c,d),q=this.toChineseMonth(c,d);if("object"===typeof c)d=q||{};else{if(!("number"===typeof c&&1888<=c&&2111>=c))throw Error("Lunar year outside range 1888-2111");if(!("number"===typeof q&&1<=q&&12>=q))throw Error("Lunar month outside range 1 - 12");if(!("number"===typeof e&&1<=e&&30>=e))throw Error("Lunar day outside range 1 - 30");if("object"===typeof f){var t=!1;d=f}else t=!!f,d={};c={year:c,
month:q,day:e,isIntercalary:t}}q=c.day-1;e=r[c.year-r[0]];f=(f=e>>13)?c.month>f?c.month:c.isIntercalary?c.month:c.month-1:c.month-1;for(t=0;t<f;t++)q+=e&1<<12-t?30:29;c=l[c.year-l[0]];c=new Date(c>>9&4095,(c>>5&15)-1,(c&31)+q);d.year=c.getFullYear();d.month=1+c.getMonth();d.day=c.getDate();return k.toJD(d.year,d.month,d.day)},fromJD:function(c){var d=k.fromJD(c),e=d.year();c=d.month();d=d.day();if("object"===typeof e)c=c||{};else{if(!("number"===typeof e&&1888<=e&&2111>=e))throw Error("Solar year outside range 1888-2111");
if(!("number"===typeof c&&1<=c&&12>=c))throw Error("Solar month outside range 1 - 12");if(!("number"===typeof d&&1<=d&&31>=d))throw Error("Solar day outside range 1 - 31");e={year:e,month:c,day:d};c={}}d=l[e.year-l[0]];c.year=(e.year<<9|e.month<<5|e.day)>=d?e.year:e.year-1;d=l[c.year-l[0]];e=Math.round((new Date(e.year,e.month-1,e.day)-new Date(d>>9&4095,(d>>5&15)-1,d&31))/864E5);var f=r[c.year-r[0]];for(d=0;13>d;d++){var q=f&1<<12-d?30:29;if(e<q)break;e-=q}f>>=13;!f||d<f?(c.isIntercalary=!1,c.month=
1+d):(c.isIntercalary=d===f?!0:!1,c.month=d);c.day=1+e;e=this.toMonthIndex(c.year,c.month,c.isIntercalary);return this.newDate(c.year,e,c.day)},fromString:function(c){c=c.match(m);var d=this._validateYear(+c[1]),e=this.toMonthIndex(d,+c[2],!!c[3]);return this.newDate(d,e,+c[4])},add:function(c,d,e){var f=c.year(),q=c.month(),t=this.isIntercalaryMonth(f,q);f=this.toChineseMonth(f,q);c=Object.getPrototypeOf(p.prototype).add.call(this,c,d,e);"y"===e&&(d=c.year(),e=c.month(),q=this.isIntercalaryMonth(d,
f),t=t&&q?this.toMonthIndex(d,f,!0):this.toMonthIndex(d,f,!1),t!==e&&c.month(t));return c}});var m=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,a=/^\d?\d[iI]?/m,g=/^??[]?/m,h=/^??[]?/m;n.calendars.chinese=p;var r=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,
1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,
6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],l=[1887,966732,967231,967733,968265,968766,969297,969798,
970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,
1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,
1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,
1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},{"../main":644,"object-assign":487}],631:[function(b,N,G){function p(k){this.local=this.regionalOptions[k||""]||this.regionalOptions[""]}var n=b("../main");b=b("object-assign");p.prototype=new n.baseCalendar;b(p.prototype,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,
firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:"Thout;Paopi;Hathor;Koiak;Tobi;Meshir;Paremhat;Paremoude;Pashons;Paoni;Epip;Mesori;Pi Kogi Enavot".split(";"),monthNamesShort:"Tho Pao Hath Koi Tob Mesh Pat Pad Pash Pao Epi Meso PiK".split(" "),dayNames:"Tkyriaka Pesnau Pshoment Peftoou Ptiou Psoou Psabbaton".split(" "),dayNamesShort:"Tky Pes Psh Pef Pti Pso Psa".split(" "),dayNamesMin:"Tk Pes Psh Pef Pt Pso Psa".split(" "),digits:null,dateFormat:"dd/mm/yyyy",
firstDay:0,isRTL:!1}},leapYear:function(k){k=this._validate(k,this.minMonth,this.minDay,n.local.invalidYear);k=k.year()+(0>k.year()?1:0);return 3===k%4||-1===k%4},monthsInYear:function(k){this._validate(k,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear);return 13},weekOfYear:function(k,m,a){k=this.newDate(k,m,a);k.add(-k.dayOfWeek(),"d");return Math.floor((k.dayOfYear()-1)/7)+1},daysInMonth:function(k,m){k=this._validate(k,m,this.minDay,n.local.invalidMonth);return this.daysPerMonth[k.month()-
1]+(13===k.month()&&this.leapYear(k.year())?1:0)},weekDay:function(k,m,a){return 6>(this.dayOfWeek(k,m,a)||7)},toJD:function(k,m,a){m=this._validate(k,m,a,n.local.invalidDate);k=m.year();0>k&&k++;return m.day()+30*(m.month()-1)+365*(k-1)+Math.floor(k/4)+this.jdEpoch-1},fromJD:function(k){var m=Math.floor(k)+.5-this.jdEpoch,a=Math.floor((m-Math.floor((m+366)/1461))/365)+1;0>=a&&a--;m=Math.floor(k)+.5-this.newDate(a,1,1).toJD();k=Math.floor(m/30)+1;return this.newDate(a,k,m-30*(k-1)+1)}});n.calendars.coptic=
p},{"../main":644,"object-assign":487}],632:[function(b,N,G){function p(m){this.local=this.regionalOptions[m||""]||this.regionalOptions[""]}var n=b("../main");b=b("object-assign");p.prototype=new n.baseCalendar;b(p.prototype,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:"Ick Offle February March April May June Grune August Spune Sektober Ember December".split(" "),
monthNamesShort:"Ick Off Feb Mar Apr May Jun Gru Aug Spu Sek Emb Dec".split(" "),dayNames:"Sunday Octeday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Oct Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Oc Mo Tu We Th Fr Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(m){this._validate(m,this.minMonth,this.minDay,n.local.invalidYear);return!1},monthsInYear:function(m){this._validate(m,this.minMonth,this.minDay,n.local.invalidYear);
return 13},daysInYear:function(m){this._validate(m,this.minMonth,this.minDay,n.local.invalidYear);return 400},weekOfYear:function(m,a,g){m=this.newDate(m,a,g);m.add(-m.dayOfWeek(),"d");return Math.floor((m.dayOfYear()-1)/8)+1},daysInMonth:function(m,a){m=this._validate(m,a,this.minDay,n.local.invalidMonth);return this.daysPerMonth[m.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(m,a,g){return(this._validate(m,a,g,n.local.invalidDate).day()+1)%8},weekDay:function(m,a,g){m=this.dayOfWeek(m,
a,g);return 2<=m&&6>=m},extraInfo:function(m,a,g){m=this._validate(m,a,g,n.local.invalidDate);return{century:k[Math.floor((m.year()-1)/100)+1]||""}},toJD:function(m,a,g){g=this._validate(m,a,g,n.local.invalidDate);m=g.year()+(0>g.year()?1:0);a=g.month();g=g.day();return g+(1<a?16:0)+(2<a?32*(a-2):0)+400*(m-1)+this.jdEpoch-1},fromJD:function(m){m=Math.floor(m+.5)-Math.floor(this.jdEpoch)-1;var a=Math.floor(m/400)+1;m-=400*(a-1);m+=15<m?16:0;var g=Math.floor(m/32)+1;return this.newDate(0>=a?a-1:a,g,
m-32*(g-1)+1)}});var k={20:"Fruitbat",21:"Anchovy"};n.calendars.discworld=p},{"../main":644,"object-assign":487}],633:[function(b,N,G){function p(k){this.local=this.regionalOptions[k||""]||this.regionalOptions[""]}var n=b("../main");b=b("object-assign");p.prototype=new n.baseCalendar;b(p.prototype,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:"Meskerem Tikemet Hidar Tahesas Tir Yekatit Megabit Miazia Genbot Sene Hamle Nehase Pagume".split(" "),
monthNamesShort:"Mes Tik Hid Tah Tir Yek Meg Mia Gen Sen Ham Neh Pag".split(" "),dayNames:"Ehud Segno Maksegno Irob Hamus Arb Kidame".split(" "),dayNamesShort:"Ehu Seg Mak Iro Ham Arb Kid".split(" "),dayNamesMin:"Eh Se Ma Ir Ha Ar Ki".split(" "),digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(k){k=this._validate(k,this.minMonth,this.minDay,n.local.invalidYear);k=k.year()+(0>k.year()?1:0);return 3===k%4||-1===k%4},monthsInYear:function(k){this._validate(k,this.minMonth,
this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear);return 13},weekOfYear:function(k,m,a){k=this.newDate(k,m,a);k.add(-k.dayOfWeek(),"d");return Math.floor((k.dayOfYear()-1)/7)+1},daysInMonth:function(k,m){k=this._validate(k,m,this.minDay,n.local.invalidMonth);return this.daysPerMonth[k.month()-1]+(13===k.month()&&this.leapYear(k.year())?1:0)},weekDay:function(k,m,a){return 6>(this.dayOfWeek(k,m,a)||7)},toJD:function(k,m,a){m=this._validate(k,m,a,n.local.invalidDate);k=m.year();0>
k&&k++;return m.day()+30*(m.month()-1)+365*(k-1)+Math.floor(k/4)+this.jdEpoch-1},fromJD:function(k){var m=Math.floor(k)+.5-this.jdEpoch,a=Math.floor((m-Math.floor((m+366)/1461))/365)+1;0>=a&&a--;m=Math.floor(k)+.5-this.newDate(a,1,1).toJD();k=Math.floor(m/30)+1;return this.newDate(a,k,m-30*(k-1)+1)}});n.calendars.ethiopian=p},{"../main":644,"object-assign":487}],634:[function(b,N,G){function p(m){this.local=this.regionalOptions[m||""]||this.regionalOptions[""]}function n(m,a){return m-a*Math.floor(m/
a)}var k=b("../main");b=b("object-assign");p.prototype=new k.baseCalendar;b(p.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:"Nisan;Iyar;Sivan;Tammuz;Av;Elul;Tishrei;Cheshvan;Kislev;Tevet;Shevat;Adar;Adar II".split(";"),monthNamesShort:"Nis Iya Siv Tam Av Elu Tis Che Kis Tev She Ada Ad2".split(" "),dayNames:"Yom Rishon;Yom Sheni;Yom Shlishi;Yom Revi'i;Yom Chamishi;Yom Shishi;Yom Shabbat".split(";"),
dayNamesShort:"Ris She Shl Rev Cha Shi Sha".split(" "),dayNamesMin:"Ri She Shl Re Ch Shi Sha".split(" "),digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(m){m=this._validate(m,this.minMonth,this.minDay,k.local.invalidYear);return this._leapYear(m.year())},_leapYear:function(m){return 7>n(7*(0>m?m+1:m)+1,19)},monthsInYear:function(m){this._validate(m,this.minMonth,this.minDay,k.local.invalidYear);return this._leapYear(m.year?m.year():m)?13:12},weekOfYear:function(m,a,g){m=
this.newDate(m,a,g);m.add(-m.dayOfWeek(),"d");return Math.floor((m.dayOfYear()-1)/7)+1},daysInYear:function(m){m=this._validate(m,this.minMonth,this.minDay,k.local.invalidYear).year();return this.toJD(-1===m?1:m+1,7,1)-this.toJD(m,7,1)},daysInMonth:function(m,a){m.year&&(a=m.month(),m=m.year());this._validate(m,a,this.minDay,k.local.invalidMonth);return 12===a&&this.leapYear(m)?30:8===a&&5===n(this.daysInYear(m),10)?30:9===a&&3===n(this.daysInYear(m),10)?29:this.daysPerMonth[a-1]},weekDay:function(m,
a,g){return 6!==this.dayOfWeek(m,a,g)},extraInfo:function(m,a,g){m=this._validate(m,a,g,k.local.invalidDate);return{yearType:(this.leapYear(m)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(m)%10-3]}},toJD:function(m,a,g){g=this._validate(m,a,g,k.local.invalidDate);m=g.year();a=g.month();g=g.day();var h=0>=m?m+1:m;g=this.jdEpoch+this._delay1(h)+this._delay2(h)+g+1;if(7>a){for(h=7;h<=this.monthsInYear(m);h++)g+=this.daysInMonth(m,h);h=1}else h=7;for(;h<a;h++)g+=this.daysInMonth(m,
h);return g},_delay1:function(m){m=Math.floor((235*m-234)/19);m=29*m+Math.floor((12084+13753*m)/25920);3>n(3*(m+1),7)&&m++;return m},_delay2:function(m){var a=this._delay1(m-1),g=this._delay1(m);return 356===this._delay1(m+1)-g?2:382===g-a?1:0},fromJD:function(m){m=Math.floor(m)+.5;for(var a=Math.floor(98496*(m-this.jdEpoch)/35975351)-1;m>=this.toJD(-1===a?1:a+1,7,1);)a++;for(var g=m<this.toJD(a,1,1)?7:1;m>this.toJD(a,g,this.daysInMonth(a,g));)g++;m=m-this.toJD(a,g,1)+1;return this.newDate(a,g,m)}});
k.calendars.hebrew=p},{"../main":644,"object-assign":487}],635:[function(b,N,G){function p(k){this.local=this.regionalOptions[k||""]||this.regionalOptions[""]}var n=b("../main");b=b("object-assign");p.prototype=new n.baseCalendar;b(p.prototype,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:"Muharram;Safar;Rabi' al-awwal;Rabi' al-thani;Jumada al-awwal;Jumada al-thani;Rajab;Sha'aban;Ramadan;Shawwal;Dhu al-Qi'dah;Dhu al-Hijjah".split(";"),
monthNamesShort:"Muh Saf Rab1 Rab2 Jum1 Jum2 Raj Sha' Ram Shaw DhuQ DhuH".split(" "),dayNames:"Yawm al-ahad;Yawm al-ithnayn;Yawm ath-thulaathaa';Yawm al-arbi'aa';Yawm al-khams;Yawm al-jum'a;Yawm as-sabt".split(";"),dayNamesShort:"Aha Ith Thu Arb Kha Jum Sab".split(" "),dayNamesMin:"Ah It Th Ar Kh Ju Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(k){return 11>(11*this._validate(k,this.minMonth,this.minDay,n.local.invalidYear).year()+14)%30},weekOfYear:function(k,
m,a){k=this.newDate(k,m,a);k.add(-k.dayOfWeek(),"d");return Math.floor((k.dayOfYear()-1)/7)+1},daysInYear:function(k){return this.leapYear(k)?355:354},daysInMonth:function(k,m){k=this._validate(k,m,this.minDay,n.local.invalidMonth);return this.daysPerMonth[k.month()-1]+(12===k.month()&&this.leapYear(k.year())?1:0)},weekDay:function(k,m,a){return 5!==this.dayOfWeek(k,m,a)},toJD:function(k,m,a){a=this._validate(k,m,a,n.local.invalidDate);k=a.year();m=a.month();a=a.day();k=0>=k?k+1:k;return a+Math.ceil(29.5*
(m-1))+354*(k-1)+Math.floor((3+11*k)/30)+this.jdEpoch-1},fromJD:function(k){k=Math.floor(k)+.5;var m=Math.floor((30*(k-this.jdEpoch)+10646)/10631);m=0>=m?m-1:m;var a=Math.min(12,Math.ceil((k-29-this.toJD(m,1,1))/29.5)+1);k=k-this.toJD(m,a,1)+1;return this.newDate(m,a,k)}});n.calendars.islamic=p},{"../main":644,"object-assign":487}],636:[function(b,N,G){function p(k){this.local=this.regionalOptions[k||""]||this.regionalOptions[""]}var n=b("../main");b=b("object-assign");p.prototype=new n.baseCalendar;
b(p.prototype,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),
dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(k){k=this._validate(k,this.minMonth,this.minDay,n.local.invalidYear);k=0>k.year()?k.year()+1:k.year();return 0===k%4},weekOfYear:function(k,m,a){k=this.newDate(k,m,a);k.add(4-(k.dayOfWeek()||7),"d");return Math.floor((k.dayOfYear()-1)/7)+1},daysInMonth:function(k,m){k=this._validate(k,m,this.minDay,n.local.invalidMonth);return this.daysPerMonth[k.month()-1]+(2===k.month()&&this.leapYear(k.year())?
1:0)},weekDay:function(k,m,a){return 6>(this.dayOfWeek(k,m,a)||7)},toJD:function(k,m,a){a=this._validate(k,m,a,n.local.invalidDate);k=a.year();m=a.month();a=a.day();0>k&&k++;2>=m&&(k--,m+=12);return Math.floor(365.25*(k+4716))+Math.floor(30.6001*(m+1))+a-1524.5},fromJD:function(k){var m=Math.floor(k+.5)+1524,a=Math.floor((m-122.1)/365.25),g=Math.floor(365.25*a),h=Math.floor((m-g)/30.6001);k=h-Math.floor(14>h?1:13);a-=Math.floor(2<k?4716:4715);m=m-g-Math.floor(30.6001*h);0>=a&&a--;return this.newDate(a,
k,m)}});n.calendars.julian=p},{"../main":644,"object-assign":487}],637:[function(b,N,G){function p(m){this.local=this.regionalOptions[m||""]||this.regionalOptions[""]}function n(m,a){return m-a*Math.floor(m/a)}var k=b("../main");b=b("object-assign");p.prototype=new k.baseCalendar;b(p.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17".split(" "),monthNamesShort:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17".split(" "),
dayNames:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19".split(" "),dayNamesShort:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19".split(" "),dayNamesMin:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19".split(" "),digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:"Pop Uo Zip Zotz Tzec Xul Yaxkin Mol Chen Yax Zac Ceh Mac Kankin Muan Pax Kayab Cumku Uayeb".split(" "),tzolkinMonths:"Imix Ik Akbal Kan Chicchan Cimi Manik Lamat Muluc Oc Chuen Eb Ben Ix Men Cib Caban Etznab Cauac Ahau".split(" ")}},
leapYear:function(m){this._validate(m,this.minMonth,this.minDay,k.local.invalidYear);return!1},formatYear:function(m){m=this._validate(m,this.minMonth,this.minDay,k.local.invalidYear).year();var a=Math.floor(m/400);m%=400;m+=0>m?400:0;return a+"."+Math.floor(m/20)+"."+m%20},forYear:function(m){m=m.split(".");if(3>m.length)throw"Invalid Mayan year";for(var a=0,g=0;g<m.length;g++){var h=parseInt(m[g],10);if(19<Math.abs(h)||0<g&&0>h)throw"Invalid Mayan year";a=20*a+h}return a},monthsInYear:function(m){this._validate(m,
this.minMonth,this.minDay,k.local.invalidYear);return 18},weekOfYear:function(m,a,g){this._validate(m,a,g,k.local.invalidDate);return 0},daysInYear:function(m){this._validate(m,this.minMonth,this.minDay,k.local.invalidYear);return 360},daysInMonth:function(m,a){this._validate(m,a,this.minDay,k.local.invalidMonth);return 20},daysInWeek:function(){return 5},dayOfWeek:function(m,a,g){return this._validate(m,a,g,k.local.invalidDate).day()},weekDay:function(m,a,g){this._validate(m,a,g,k.local.invalidDate);
return!0},extraInfo:function(m,a,g){a=this._validate(m,a,g,k.local.invalidDate).toJD();m=this._toHaab(a);a=this._toTzolkin(a);return{haabMonthName:this.local.haabMonths[m[0]-1],haabMonth:m[0],haabDay:m[1],tzolkinDayName:this.local.tzolkinMonths[a[0]-1],tzolkinDay:a[0],tzolkinTrecena:a[1]}},_toHaab:function(m){m-=this.jdEpoch;m=n(m+8+340,365);return[Math.floor(m/20)+1,n(m,20)]},_toTzolkin:function(m){m-=this.jdEpoch;return[n(m+20-1,20)+1,n(m+4-1,13)+1]},toJD:function(m,a,g){m=this._validate(m,a,g,
k.local.invalidDate);return m.day()+20*m.month()+360*m.year()+this.jdEpoch},fromJD:function(m){m=Math.floor(m)+.5-this.jdEpoch;var a=Math.floor(m/360);m%=360;m+=0>m?360:0;return this.newDate(a,Math.floor(m/20),m%20)}});k.calendars.mayan=p},{"../main":644,"object-assign":487}],638:[function(b,N,G){function p(m){this.local=this.regionalOptions[m||""]||this.regionalOptions[""]}var n=b("../main");b=b("object-assign");p.prototype=new n.baseCalendar;var k=n.instance("gregorian");b(p.prototype,{name:"Nanakshahi",
jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:"Chet Vaisakh Jeth Harh Sawan Bhadon Assu Katak Maghar Poh Magh Phagun".split(" "),monthNamesShort:"Che Vai Jet Har Saw Bha Ass Kat Mgr Poh Mgh Pha".split(" "),dayNames:"Somvaar Mangalvar Budhvaar Veervaar Shukarvaar Sanicharvaar Etvaar".split(" "),dayNamesShort:"Som Mangal Budh Veer Shukar Sanichar Et".split(" "),
dayNamesMin:"So Ma Bu Ve Sh Sa Et".split(" "),digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(m){m=this._validate(m,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear);return k.leapYear(m.year()+(1>m.year()?1:0)+1469)},weekOfYear:function(m,a,g){m=this.newDate(m,a,g);m.add(1-(m.dayOfWeek()||7),"d");return Math.floor((m.dayOfYear()-1)/7)+1},daysInMonth:function(m,a){m=this._validate(m,a,this.minDay,n.local.invalidMonth);return this.daysPerMonth[m.month()-
1]+(12===m.month()&&this.leapYear(m.year())?1:0)},weekDay:function(m,a,g){return 6>(this.dayOfWeek(m,a,g)||7)},toJD:function(m,a,g){a=this._validate(m,a,g,n.local.invalidMonth);m=a.year();0>m&&m++;g=a.day();for(var h=1;h<a.month();h++)g+=this.daysPerMonth[h-1];return g+k.toJD(m+1468,3,13)},fromJD:function(m){m=Math.floor(m+.5);for(var a=Math.floor((m-(this.jdEpoch-1))/366);m>=this.toJD(a+1,1,1);)a++;m=m-Math.floor(this.toJD(a,1,1)+.5)+1;for(var g=1;m>this.daysInMonth(a,g);)m-=this.daysInMonth(a,g),
g++;return this.newDate(a,g,m)}});n.calendars.nanakshahi=p},{"../main":644,"object-assign":487}],639:[function(b,N,G){function p(k){this.local=this.regionalOptions[k||""]||this.regionalOptions[""]}var n=b("../main");b=b("object-assign");p.prototype=new n.baseCalendar;b(p.prototype,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:"Baisakh Jestha Ashadh Shrawan Bhadra Ashwin Kartik Mangsir Paush Mangh Falgun Chaitra".split(" "),
monthNamesShort:"Bai Je As Shra Bha Ash Kar Mang Pau Ma Fal Chai".split(" "),dayNames:"Aaitabaar Sombaar Manglbaar Budhabaar Bihibaar Shukrabaar Shanibaar".split(" "),dayNamesShort:"Aaita Som Mangl Budha Bihi Shukra Shani".split(" "),dayNamesMin:"Aai So Man Bu Bi Shu Sha".split(" "),digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(k){return this.daysInYear(k)!==this.daysPerYear},weekOfYear:function(k,m,a){k=this.newDate(k,m,a);k.add(-k.dayOfWeek(),"d");return Math.floor((k.dayOfYear()-
1)/7)+1},daysInYear:function(k){k=this._validate(k,this.minMonth,this.minDay,n.local.invalidYear).year();if("undefined"===typeof this.NEPALI_CALENDAR_DATA[k])return this.daysPerYear;for(var m=0,a=this.minMonth;12>=a;a++)m+=this.NEPALI_CALENDAR_DATA[k][a];return m},daysInMonth:function(k,m){k.year&&(m=k.month(),k=k.year());this._validate(k,m,this.minDay,n.local.invalidMonth);return"undefined"===typeof this.NEPALI_CALENDAR_DATA[k]?this.daysPerMonth[m-1]:this.NEPALI_CALENDAR_DATA[k][m]},weekDay:function(k,
m,a){return 6!==this.dayOfWeek(k,m,a)},toJD:function(k,m,a){a=this._validate(k,m,a,n.local.invalidDate);k=a.year();m=a.month();a=a.day();var g=n.instance(),h=0,r=m,l=k;this._createMissingCalendarData(k);k-=9<r||9===r&&a>=this.NEPALI_CALENDAR_DATA[l][0]?56:57;9!==m&&(h=a,r--);for(;9!==r;)0>=r&&(r=12,l--),h+=this.NEPALI_CALENDAR_DATA[l][r],r--;9===m?(h+=a-this.NEPALI_CALENDAR_DATA[l][0],0>h&&(h+=g.daysInYear(k))):h+=this.NEPALI_CALENDAR_DATA[l][9]-this.NEPALI_CALENDAR_DATA[l][0];return g.newDate(k,
1,1).add(h,"d").toJD()},fromJD:function(k){k=n.instance().fromJD(k);var m=k.year();k=k.dayOfYear();m+=56;this._createMissingCalendarData(m);for(var a=9,g=this.NEPALI_CALENDAR_DATA[m][a]-this.NEPALI_CALENDAR_DATA[m][0]+1;k>g;)a++,12<a&&(a=1,m++),g+=this.NEPALI_CALENDAR_DATA[m][a];return this.newDate(m,a,this.NEPALI_CALENDAR_DATA[m][a]-(g-k))},_createMissingCalendarData:function(k){var m=this.daysPerMonth.slice(0);m.unshift(17);for(var a=k-1;a<k+2;a++)"undefined"===typeof this.NEPALI_CALENDAR_DATA[a]&&
(this.NEPALI_CALENDAR_DATA[a]=m)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,
30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,
29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2E3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,
30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,
31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,
31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,
32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,
31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,
31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,
31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,
31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,
31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,
31,32,31,32,30,31,30,29,30,29,30,30]}});n.calendars.nepali=p},{"../main":644,"object-assign":487}],640:[function(b,N,G){function p(k){this.local=this.regionalOptions[k||""]||this.regionalOptions[""]}var n=b("../main");b=b("object-assign");p.prototype=new n.baseCalendar;b(p.prototype,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:"Farvardin Ordibehesht Khordad Tir Mordad Shahrivar Mehr Aban Azar Day Bahman Esfand".split(" "),
monthNamesShort:"Far Ord Kho Tir Mor Sha Meh Aba Aza Day Bah Esf".split(" "),dayNames:"Yekshambe Doshambe Seshambe Chharshambe Panjshambe Jom'e Shambe".split(" "),dayNamesShort:"Yek Do Se Ch Panj Jom Sha".split(" "),dayNamesMin:"Ye Do Se Ch Pa Jo Sh".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(k){k=this._validate(k,this.minMonth,this.minDay,n.local.invalidYear);return 682>682*((k.year()-(0<k.year()?474:473))%2820+512)%2816},weekOfYear:function(k,m,a){k=
this.newDate(k,m,a);k.add(-((k.dayOfWeek()+1)%7),"d");return Math.floor((k.dayOfYear()-1)/7)+1},daysInMonth:function(k,m){k=this._validate(k,m,this.minDay,n.local.invalidMonth);return this.daysPerMonth[k.month()-1]+(12===k.month()&&this.leapYear(k.year())?1:0)},weekDay:function(k,m,a){return 5!==this.dayOfWeek(k,m,a)},toJD:function(k,m,a){a=this._validate(k,m,a,n.local.invalidDate);k=a.year();m=a.month();a=a.day();k-=0<=k?474:473;var g=474+(k-2820*Math.floor(k/2820));return a+(7>=m?31*(m-1):30*(m-
1)+6)+Math.floor((682*g-110)/2816)+365*(g-1)+1029983*Math.floor(k/2820)+this.jdEpoch-1},fromJD:function(k){k=Math.floor(k)+.5;var m=k-this.toJD(475,1,1),a=Math.floor(m/1029983);m-=1029983*Math.floor(m/1029983);var g=2820;1029982!==m&&(g=Math.floor(m/366),g=Math.floor((2134*g+2816*(m-366*Math.floor(m/366))+2815)/1028522)+g+1);a=g+2820*a+474;a=0>=a?a-1:a;m=k-this.toJD(a,1,1)+1;m=186>=m?Math.ceil(m/31):Math.ceil((m-6)/30);k=k-this.toJD(a,m,1)+1;return this.newDate(a,m,k)}});n.calendars.persian=p;n.calendars.jalali=
p},{"../main":644,"object-assign":487}],641:[function(b,N,G){function p(m){this.local=this.regionalOptions[m||""]||this.regionalOptions[""]}var n=b("../main");b=b("object-assign");var k=n.instance();p.prototype=new n.baseCalendar;b(p.prototype,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:"January February March April May June July August September October November December".split(" "),
monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(m){m=this._validate(m,this.minMonth,this.minDay,n.local.invalidYear);m=this._t2gYear(m.year());return k.leapYear(m)},weekOfYear:function(m,a,g){a=this._validate(m,this.minMonth,
this.minDay,n.local.invalidYear);m=this._t2gYear(a.year());return k.weekOfYear(m,a.month(),a.day())},daysInMonth:function(m,a){m=this._validate(m,a,this.minDay,n.local.invalidMonth);return this.daysPerMonth[m.month()-1]+(2===m.month()&&this.leapYear(m.year())?1:0)},weekDay:function(m,a,g){return 6>(this.dayOfWeek(m,a,g)||7)},toJD:function(m,a,g){a=this._validate(m,a,g,n.local.invalidDate);m=this._t2gYear(a.year());return k.toJD(m,a.month(),a.day())},fromJD:function(m){m=k.fromJD(m);var a=this._g2tYear(m.year());
return this.newDate(a,m.month(),m.day())},_t2gYear:function(m){return m+this.yearsOffset+(m>=-this.yearsOffset&&-1>=m?1:0)},_g2tYear:function(m){return m-this.yearsOffset-(1<=m&&m<=this.yearsOffset?1:0)}});n.calendars.taiwan=p},{"../main":644,"object-assign":487}],642:[function(b,N,G){function p(m){this.local=this.regionalOptions[m||""]||this.regionalOptions[""]}var n=b("../main");b=b("object-assign");var k=n.instance();p.prototype=new n.baseCalendar;b(p.prototype,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,
daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),
digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(m){m=this._validate(m,this.minMonth,this.minDay,n.local.invalidYear);m=this._t2gYear(m.year());return k.leapYear(m)},weekOfYear:function(m,a,g){a=this._validate(m,this.minMonth,this.minDay,n.local.invalidYear);m=this._t2gYear(a.year());return k.weekOfYear(m,a.month(),a.day())},daysInMonth:function(m,a){m=this._validate(m,a,this.minDay,n.local.invalidMonth);return this.daysPerMonth[m.month()-1]+(2===m.month()&&this.leapYear(m.year())?
1:0)},weekDay:function(m,a,g){return 6>(this.dayOfWeek(m,a,g)||7)},toJD:function(m,a,g){a=this._validate(m,a,g,n.local.invalidDate);m=this._t2gYear(a.year());return k.toJD(m,a.month(),a.day())},fromJD:function(m){m=k.fromJD(m);var a=this._g2tYear(m.year());return this.newDate(a,m.month(),m.day())},_t2gYear:function(m){return m-this.yearsOffset-(1<=m&&m<=this.yearsOffset?1:0)},_g2tYear:function(m){return m+this.yearsOffset+(m>=-this.yearsOffset&&-1>=m?1:0)}});n.calendars.thai=p},{"../main":644,"object-assign":487}],
643:[function(b,N,G){function p(m){this.local=this.regionalOptions[m||""]||this.regionalOptions[""]}var n=b("../main");b=b("object-assign");p.prototype=new n.baseCalendar;b(p.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:"Al-Muharram;Safar;Rabi' al-awwal;Rabi' Al-Thani;Jumada Al-Awwal;Jumada Al-Thani;Rajab;Sha'aban;Ramadan;Shawwal;Dhu al-Qi'dah;Dhu al-Hijjah".split(";"),monthNamesShort:"Muh Saf Rab1 Rab2 Jum1 Jum2 Raj Sha' Ram Shaw DhuQ DhuH".split(" "),
dayNames:"Yawm al-Ahad;Yawm al-Ithnain;Yawm al-Thalth;Yawm al-Arba;Yawm al-Khams;Yawm al-Juma;Yawm al-Sabt".split(";"),dayNamesMin:"Ah Ith Th Ar Kh Ju Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(m){m=this._validate(m,this.minMonth,this.minDay,n.local.invalidYear);return 355===this.daysInYear(m.year())},weekOfYear:function(m,a,g){m=this.newDate(m,a,g);m.add(-m.dayOfWeek(),"d");return Math.floor((m.dayOfYear()-1)/7)+1},daysInYear:function(m){for(var a=
0,g=1;12>=g;g++)a+=this.daysInMonth(m,g);return a},daysInMonth:function(m,a){m=this._validate(m,a,this.minDay,n.local.invalidMonth).toJD()-24E5+.5;for(var g=a=0;g<k.length;g++){if(k[g]>m)return k[a]-k[a-1];a++}return 30},weekDay:function(m,a,g){return 5!==this.dayOfWeek(m,a,g)},toJD:function(m,a,g){m=this._validate(m,a,g,n.local.invalidDate);a=12*(m.year()-1)+m.month()-15292;return m.day()+k[a-1]-1+24E5-.5},fromJD:function(m){m=m-24E5+.5;for(var a=0,g=0;g<k.length&&!(k[g]>m);g++)a++;g=a+15292;var h=
Math.floor((g-1)/12);return this.newDate(h+1,g-12*h,m-k[a-1]+1)},isValid:function(m,a,g){var h=n.baseCalendar.prototype.isValid.apply(this,arguments);h&&(m=null!=m.year?m.year:m,h=1276<=m&&1500>=m);return h},_validate:function(m,a,g,h){var r=n.baseCalendar.prototype._validate.apply(this,arguments);if(1276>r.year||1500<r.year)throw h.replace(/\{0\}/,this.local.name);return r}});n.calendars.ummalqura=p;var k=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,
729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,
3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,
6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,
9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,
12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,
14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,
17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,
19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,
22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,
24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,
27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,
29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,
32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,
34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,
37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,
39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,
42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,
44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,
46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,
49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,
51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,
54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,
56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,
59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,
61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,
64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,
66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68E3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,
69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,
71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,
74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,
76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,
79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":644,"object-assign":487}],644:[function(b,N,G){function p(){this.regionalOptions=[];this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"};this.local=this.regionalOptions[""];
this.calendars={};this._localCals={}}function n(h,r,l,c){this._calendar=h;this._year=r;this._month=l;this._day=c;if(0===this._calendar._validateLevel&&!this._calendar.isValid(this._year,this._month,this._day))throw(g.local.invalidDate||g.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);}function k(h,r){h=""+h;return"000000".substring(0,r-h.length)+h}function m(){this.shortYearCutoff="+10"}function a(h){this.local=this.regionalOptions[h]||this.regionalOptions[""]}b=b("object-assign");
b(p.prototype,{instance:function(h,r){h=(h||"gregorian").toLowerCase();r=r||"";var l=this._localCals[h+"-"+r];!l&&this.calendars[h]&&(l=new this.calendars[h](r),this._localCals[h+"-"+r]=l);if(!l)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,h);return l},newDate:function(h,r,l,c,d){c=(null!=h&&h.year?h.calendar():"string"===typeof c?this.instance(c,d):c)||this.instance();return c.newDate(h,r,l)},substituteDigits:function(h){return function(r){return(r+
"").replace(/[0-9]/g,function(l){return h[l]})}},substituteChineseDigits:function(h,r){return function(l){for(var c="",d=0;0<l;){var e=l%10;c=(0===e?"":h[e]+r[d])+c;d++;l=Math.floor(l/10)}0===c.indexOf(h[1]+r[1])&&(c=c.substr(1));return c||h[0]}}});b(n.prototype,{newDate:function(h,r,l){return this._calendar.newDate(null==h?this:h,r,l)},year:function(h){return 0===arguments.length?this._year:this.set(h,"y")},month:function(h){return 0===arguments.length?this._month:this.set(h,"m")},day:function(h){return 0===
arguments.length?this._day:this.set(h,"d")},date:function(h,r,l){if(!this._calendar.isValid(h,r,l))throw(g.local.invalidDate||g.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);this._year=h;this._month=r;this._day=l;return this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},
daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(h,r){return this._calendar.add(this,h,r)},set:function(h,r){return this._calendar.set(this,h,r)},compareTo:function(h){if(this._calendar.name!==
h._calendar.name)throw(g.local.differentCalendars||g.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,h._calendar.local.name);h=this._year!==h._year?this._year-h._year:this._month!==h._month?this.monthOfYear()-h.monthOfYear():this._day-h._day;return 0===h?0:0>h?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(h){return this._calendar.fromJD(h)},toJSDate:function(){return this._calendar.toJSDate(this)},
fromJSDate:function(h){return this._calendar.fromJSDate(h)},toString:function(){return(0>this.year()?"-":"")+k(Math.abs(this.year()),4)+"-"+k(this.month(),2)+"-"+k(this.day(),2)}});b(m.prototype,{_validateLevel:0,newDate:function(h,r,l){if(null==h)return this.today();h.year&&(this._validate(h,r,l,g.local.invalidDate||g.regionalOptions[""].invalidDate),l=h.day(),r=h.month(),h=h.year());return new n(this,h,r,l)},today:function(){return this.fromJSDate(new Date)},epoch:function(h){return 0>this._validate(h,
this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear).year()?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(h){h=this._validate(h,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear);return(0>h.year()?"-":"")+k(Math.abs(h.year()),4)},monthsInYear:function(h){this._validate(h,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear);return 12},monthOfYear:function(h,r){h=this._validate(h,r,this.minDay,
g.local.invalidMonth||g.regionalOptions[""].invalidMonth);return(h.month()+this.monthsInYear(h)-this.firstMonth)%this.monthsInYear(h)+this.minMonth},fromMonthOfYear:function(h,r){r=(r+this.firstMonth-2*this.minMonth)%this.monthsInYear(h)+this.minMonth;this._validate(h,r,this.minDay,g.local.invalidMonth||g.regionalOptions[""].invalidMonth);return r},daysInYear:function(h){h=this._validate(h,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear);return this.leapYear(h)?366:
365},dayOfYear:function(h,r,l){h=this._validate(h,r,l,g.local.invalidDate||g.regionalOptions[""].invalidDate);return h.toJD()-this.newDate(h.year(),this.fromMonthOfYear(h.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(h,r,l){h=this._validate(h,r,l,g.local.invalidDate||g.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(h))+2)%this.daysInWeek()},extraInfo:function(h,r,l){this._validate(h,r,l,g.local.invalidDate||g.regionalOptions[""].invalidDate);
return{}},add:function(h,r,l){this._validate(h,this.minMonth,this.minDay,g.local.invalidDate||g.regionalOptions[""].invalidDate);return this._correctAdd(h,this._add(h,r,l),r,l)},_add:function(h,r,l){this._validateLevel++;if("d"===l||"w"===l){r=h.toJD()+r*("w"===l?this.daysInWeek():1);var c=h.calendar().fromJD(r);this._validateLevel--;return[c.year(),c.month(),c.day()]}try{var d=h.year()+("y"===l?r:0),e=h.monthOfYear()+("m"===l?r:0);c=h.day();if("y"===l)h.month()!==this.fromMonthOfYear(d,e)&&(e=this.newDate(d,
h.month(),this.minDay).monthOfYear()),e=Math.min(e,this.monthsInYear(d)),c=Math.min(c,this.daysInMonth(d,this.fromMonthOfYear(d,e)));else if("m"===l){for(;e<this.minMonth;)d--,e+=this.monthsInYear(d);for(var f=this.monthsInYear(d);e>f-1+this.minMonth;)d++,e-=f,f=this.monthsInYear(d);c=Math.min(c,this.daysInMonth(d,this.fromMonthOfYear(d,e)))}var q=[d,this.fromMonthOfYear(d,e),c];this._validateLevel--;return q}catch(t){throw this._validateLevel--,t;}},_correctAdd:function(h,r,l,c){this.hasYearZero||
"y"!==c&&"m"!==c||0!==r[0]&&0<h.year()===0<r[0]||(r={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[c],r=this._add(h,l*r[0]+(0>l?-1:1)*r[1],r[2]));return h.date(r[0],r[1],r[2])},set:function(h,r,l){this._validate(h,this.minMonth,this.minDay,g.local.invalidDate||g.regionalOptions[""].invalidDate);var c="y"===l?r:h.year(),d="m"===l?r:h.month();r="d"===l?r:h.day();if("y"===l||"m"===l)r=Math.min(r,this.daysInMonth(c,d));return h.date(c,
d,r)},isValid:function(h,r,l){this._validateLevel++;var c=this.hasYearZero||0!==h;c&&(h=this.newDate(h,r,this.minDay),c=r>=this.minMonth&&r-this.minMonth<this.monthsInYear(h)&&l>=this.minDay&&l-this.minDay<this.daysInMonth(h));this._validateLevel--;return c},toJSDate:function(h,r,l){h=this._validate(h,r,l,g.local.invalidDate||g.regionalOptions[""].invalidDate);return g.instance().fromJD(this.toJD(h)).toJSDate()},fromJSDate:function(h){return this.fromJD(g.instance().fromJSDate(h).toJD())},_validate:function(h,
r,l,c){if(h.year){if(0===this._validateLevel&&this.name!==h.calendar().name)throw(g.local.differentCalendars||g.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,h.calendar().local.name);return h}try{this._validateLevel++;if(1===this._validateLevel&&!this.isValid(h,r,l))throw c.replace(/\{0\}/,this.local.name);var d=this.newDate(h,r,l);this._validateLevel--;return d}catch(e){throw this._validateLevel--,e;}}});a.prototype=new m;b(a.prototype,{name:"Gregorian",
jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),
digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(h){h=this._validate(h,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear);h=h.year()+(0>h.year()?1:0);return 0===h%4&&(0!==h%100||0===h%400)},weekOfYear:function(h,r,l){h=this.newDate(h,r,l);h.add(4-(h.dayOfWeek()||7),"d");return Math.floor((h.dayOfYear()-1)/7)+1},daysInMonth:function(h,r){h=this._validate(h,r,this.minDay,g.local.invalidMonth||g.regionalOptions[""].invalidMonth);return this.daysPerMonth[h.month()-
1]+(2===h.month()&&this.leapYear(h.year())?1:0)},weekDay:function(h,r,l){return 6>(this.dayOfWeek(h,r,l)||7)},toJD:function(h,r,l){l=this._validate(h,r,l,g.local.invalidDate||g.regionalOptions[""].invalidDate);h=l.year();r=l.month();l=l.day();0>h&&h++;3>r&&(r+=12,h--);var c=Math.floor(h/100);return Math.floor(365.25*(h+4716))+Math.floor(30.6001*(r+1))+l+(2-c+Math.floor(c/4))-1524.5},fromJD:function(h){h=Math.floor(h+.5);var r=Math.floor((h-1867216.25)/36524.25);r=h+1+r-Math.floor(r/4);var l=r+1524;
h=Math.floor((l-122.1)/365.25);var c=Math.floor(365.25*h);r=Math.floor((l-c)/30.6001);l=l-c-Math.floor(30.6001*r);r-=13.5<r?13:1;h-=2.5<r?4716:4715;0>=h&&h--;return this.newDate(h,r,l)},toJSDate:function(h,r,l){h=this._validate(h,r,l,g.local.invalidDate||g.regionalOptions[""].invalidDate);h=new Date(h.year(),h.month()-1,h.day());h.setHours(0);h.setMinutes(0);h.setSeconds(0);h.setMilliseconds(0);h.setHours(12<h.getHours()?h.getHours()+2:0);return h},fromJSDate:function(h){return this.newDate(h.getFullYear(),
h.getMonth()+1,h.getDate())}});var g=N.exports=new p;g.cdate=n;g.baseCalendar=m;g.calendars.gregorian=a},{"object-assign":487}],645:[function(b,N,G){N=b("object-assign");var p=b("./main");N(p.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"});
p.local=p.regionalOptions[""];N(p.cdate.prototype,{formatDate:function(n,k){"string"!==typeof n&&(k=n,n="");return this._calendar.formatDate(n||"",this,k)}});N(p.baseCalendar.prototype,{UNIX_EPOCH:p.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:p.instance().jdEpoch,TICKS_PER_DAY:864E9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",
RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(n,k,m){"string"!==typeof n&&(m=k,k=n,n="");if(!k)return"";if(k.calendar()!==this)throw p.local.invalidFormat||p.regionalOptions[""].invalidFormat;n=n||this.local.dateFormat;m=m||{};for(var a=m.dayNamesShort||this.local.dayNamesShort,g=m.dayNames||this.local.dayNames,h=m.monthNumbers||this.local.monthNumbers,r=m.monthNamesShort||this.local.monthNamesShort,l=m.monthNames||this.local.monthNames,c=function(D,C){for(var v=1;A+
v<n.length&&n.charAt(A+v)===D;)v++;A+=v-1;return 1<Math.floor(v/(C||1))},d=function(D,C,v,y){C=""+C;if(c(D,y))for(;C.length<v;)C="0"+C;return C},e=function(D,C,v,y){return c(D)?y[C]:v[C]},f=this,q=function(D){return"function"===typeof h?h.call(f,D,c("m")):x(d("m",D.month(),2))},t=function(D,C){return C?"function"===typeof l?l.call(f,D):l[D.month()-f.minMonth]:"function"===typeof r?r.call(f,D):r[D.month()-f.minMonth]},w=this.local.digits,x=function(D){return m.localNumbers&&w?w(D):D},z="",B=!1,A=0;A<
n.length;A++)if(B)"'"!==n.charAt(A)||c("'")?z+=n.charAt(A):B=!1;else switch(n.charAt(A)){case "d":z+=x(d("d",k.day(),2));break;case "D":z+=e("D",k.dayOfWeek(),a,g);break;case "o":z+=d("o",k.dayOfYear(),3);break;case "w":z+=d("w",k.weekOfYear(),2);break;case "m":z+=q(k);break;case "M":z+=t(k,c("M"));break;case "y":z+=c("y",2)?k.year():(10>k.year()%100?"0":"")+k.year()%100;break;case "Y":c("Y",2);z+=k.formatYear();break;case "J":z+=k.toJD();break;case "@":z+=(k.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;
break;case "!":z+=(k.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case "'":c("'")?z+="'":B=!0;break;default:z+=n.charAt(A)}return z},parseDate:function(n,k,m){if(null==k)throw p.local.invalidArguments||p.regionalOptions[""].invalidArguments;k="object"===typeof k?k.toString():k+"";if(""===k)return null;n=n||this.local.dateFormat;m=m||{};var a=m.shortYearCutoff||this.shortYearCutoff;a="string"!==typeof a?a:this.today().year()%100+parseInt(a,10);for(var g=m.dayNamesShort||this.local.dayNamesShort,
h=m.dayNames||this.local.dayNames,r=m.parseMonth||this.local.parseMonth,l=m.monthNumbers||this.local.monthNumbers,c=m.monthNamesShort||this.local.monthNamesShort,d=m.monthNames||this.local.monthNames,e=m=-1,f=-1,q=-1,t=-1,w=!1,x=!1,z=function(K,O){for(var I=1;J+I<n.length&&n.charAt(J+I)===K;)I++;J+=I-1;return 1<Math.floor(I/(O||1))},B=function(K,O){O=z(K,O);K=[2,3,O?4:2,O?4:2,10,11,20]["oyYJ@!".indexOf(K)+1];K=new RegExp("^-?\\d{1,"+K+"}");K=k.substring(F).match(K);if(!K)throw(p.local.missingNumberAt||
p.regionalOptions[""].missingNumberAt).replace(/\{0\}/,F);F+=K[0].length;return parseInt(K[0],10)},A=this,D=function(){if("function"===typeof l){z("m");var K=l.call(A,k.substring(F));F+=K.length;return K}return B("m")},C=function(K,O,I,L){K=z(K,L)?I:O;for(O=0;O<K.length;O++)if(k.substr(F,K[O].length).toLowerCase()===K[O].toLowerCase())return F+=K[O].length,O+A.minMonth;throw(p.local.unknownNameAt||p.regionalOptions[""].unknownNameAt).replace(/\{0\}/,F);},v=function(){if("function"===typeof d){var K=
z("M")?d.call(A,k.substring(F)):c.call(A,k.substring(F));F+=K.length;return K}return C("M",c,d)},y=function(){if(k.charAt(F)!==n.charAt(J))throw(p.local.unexpectedLiteralAt||p.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,F);F++},F=0,J=0;J<n.length;J++)if(x)"'"!==n.charAt(J)||z("'")?y():x=!1;else switch(n.charAt(J)){case "d":q=B("d");break;case "D":C("D",g,h);break;case "o":t=B("o");break;case "w":B("w");break;case "m":f=D();break;case "M":f=v();break;case "y":e=J;w=!z("y",2);J=e;e=B("y",
2);break;case "Y":e=B("Y",2);break;case "J":m=B("J")+.5;"."===k.charAt(F)&&(F++,B("J"));break;case "@":m=B("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case "!":m=B("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case "*":F=k.length;break;case "'":z("'")?y():x=!0;break;default:y()}if(F<k.length)throw p.local.unexpectedText||p.regionalOptions[""].unexpectedText;-1===e?e=this.today().year():100>e&&w&&(e+=-1===a?1900:this.today().year()-this.today().year()%100-(e<=a?0:100));"string"===typeof f&&(f=r.call(this,
e,f));if(-1<t)for(f=1,q=t,a=this.daysInMonth(e,f);q>a;a=this.daysInMonth(e,f))f++,q-=a;return-1<m?this.fromJD(m):this.newDate(e,f,q)},determineDate:function(n,k,m,a,g){m&&"object"!==typeof m&&(g=a,a=m,m=null);"string"!==typeof a&&(g=a,a="");k=k?k.newDate():null;if(null==n)n=k;else{if("string"===typeof n)a:{try{var h=this.parseDate(a,n,g);break a}catch(r){}n=n.toLowerCase();m=(n.match(/^c/)&&m?m.newDate():null)||this.today();a=/([+-]?[0-9]+)\s*(d|w|m|y)?/g;for(g=a.exec(n);g;)m.add(parseInt(g[1],10),
g[2]||"d"),g=a.exec(n);h=m}else h="number"===typeof n?isNaN(n)||Infinity===n||-Infinity===n?k:this.today().add(n,"d"):this.newDate(n);n=h}return n}})},{"./main":644,"object-assign":487}],646:[function(b,N,G){N.exports=b("cwise-compiler")({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da \x3d _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db \x3d _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da \x3e\x3d 0) !\x3d\x3d (_inline_1_db \x3e\x3d 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",
args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":157}],647:[function(b,N,G){N.exports=function(n,k){var m=[];k=+k||0;p(n.hi(n.shape[0]-1),m,k);return m};var p=b("./lib/zc-core")},
{"./lib/zc-core":646}],648:[function(b,N,G){N.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],649:[function(b,N,G){G=
b("./arrow_paths");var p=b("../../plots/font_attributes"),n=b("../../plots/cartesian/constants"),k=b("../../plot_api/plot_template").templatedArray;b("../../constants/axis_placeable_objects");N.exports=k("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:p({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},
height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,
dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:G.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:G.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",
min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",n.idRegex.x.toString()],editType:"calc"},
ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",n.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",n.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",n.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},
yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},
font:p({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":772,"../../plot_api/plot_template":843,"../../plots/cartesian/constants":861,"../../plots/font_attributes":883,"./arrow_paths":648}],650:[function(b,N,G){function p(g){k.filterVisible(g._fullLayout.annotations).forEach(function(h){var r=m.getFromId(g,h.xref),l=m.getFromId(g,h.yref),
c=m.getRefType(h.xref),d=m.getRefType(h.yref);h._extremes={};"range"===c&&n(h,r);"range"===d&&n(h,l)})}function n(g,h){var r=h._id,l=r.charAt(0),c=g[l],d=g["a"+l],e=g["_"+l+"padplus"],f=g["_"+l+"padminus"],q={x:1,y:-1}[l]*g[l+"shift"],t=3*g.arrowsize*g.arrowwidth||0,w=t+q,x=t-q,z=3*g.startarrowsize*g.arrowwidth||0;t=z+q;q=z-q;g["a"+l+"ref"]===g[l+"ref"]?(l=m.findExtremes(h,[h.r2c(c)],{ppadplus:w,ppadminus:x}),h=m.findExtremes(h,[h.r2c(d)],{ppadplus:Math.max(e,t),ppadminus:Math.max(f,q)}),h={min:[l.min[0],
h.min[0]],max:[l.max[0],h.max[0]]}):(t=d?t+d:t,q=d?q-d:q,h=m.findExtremes(h,[h.r2c(c)],{ppadplus:Math.max(e,w,t),ppadminus:Math.max(f,x,q)}));g._extremes[r]=h}var k=b("../../lib"),m=b("../../plots/cartesian/axes"),a=b("./draw").draw;N.exports=function(g){if(k.filterVisible(g._fullLayout.annotations).length&&g._fullData.length)return k.syncOrAsync([a,p],g)}},{"../../lib":803,"../../plots/cartesian/axes":854,"./draw":655}],651:[function(b,N,G){function p(g,h){g=g._fullLayout.annotations;var r=[],l=
[],c=[],d=(h||[]).length,e,f,q;for(e=0;e<g.length;e++){var t=g[e];if(q=t.clicktoshow){for(f=0;f<d;f++){var w=h[f];var x=w.xaxis;var z=w.yaxis;if(x._id===t.xref&&z._id===t.yref&&x.d2r(w.x)===n(t._xclick,x)&&z.d2r(w.y)===n(t._yclick,z)){w=t.visible?"onout"===q?l:c:r;w.push(e);break}}f===d&&t.visible&&"onout"===q&&l.push(e)}}return{on:r,off:l,explicitOff:c}}function n(g,h){return"log"===h.type?h.l2r(g):h.d2r(g)}var k=b("../../lib"),m=b("../../registry"),a=b("../../plot_api/plot_template").arrayEditor;
N.exports={hasClickToShow:function(g,h){g=p(g,h);return 0<g.on.length||0<g.explicitOff.length},onClick:function(g,h){var r=p(g,h);h=r.on;r=r.off.concat(r.explicitOff);var l={},c=g._fullLayout.annotations,d;if(h.length||r.length){for(d=0;d<h.length;d++){var e=a(g.layout,"annotations",c[h[d]]);e.modifyItem("visible",!0);k.extendFlat(l,e.getUpdateObj())}for(d=0;d<r.length;d++)e=a(g.layout,"annotations",c[r[d]]),e.modifyItem("visible",!1),k.extendFlat(l,e.getUpdateObj());return m.call("update",g,{},l)}}}},
{"../../lib":803,"../../plot_api/plot_template":843,"../../registry":931}],652:[function(b,N,G){var p=b("../../lib"),n=b("../color");N.exports=function(k,m,a,g){g("opacity");k=g("bgcolor");var h=g("bordercolor");h=n.opacity(h);g("borderpad");var r=g("borderwidth"),l=g("showarrow");g("text",l?" ":a._dfltTitle.annotation);g("textangle");p.coerceFont(g,"font",a.font);g("width");g("align");g("height")&&g("valign");if(l){l=g("arrowside");if(-1!==l.indexOf("end")){var c=g("arrowhead");var d=g("arrowsize")}-1!==
l.indexOf("start")&&(g("startarrowhead",c),g("startarrowsize",d));g("arrowcolor",h?m.bordercolor:n.defaultLine);g("arrowwidth",2*(h&&r||1));g("standoff");g("startstandoff")}m=g("hovertext");a=a.hoverlabel||{};m&&(k=g("hoverlabel.bgcolor",a.bgcolor||(n.opacity(k)?n.rgb(k):n.defaultLine)),k=g("hoverlabel.bordercolor",a.bordercolor||n.contrast(k)),p.coerceFont(g,"hoverlabel.font",{family:a.font.family,size:a.font.size,color:a.font.color||k}));g("captureevents",!!m)}},{"../../lib":803,"../color":666}],
653:[function(b,N,G){var p=b("fast-isnumeric"),n=b("../../lib/to_log_range");N.exports=function(k,m,a,g){function h(e){var f=l[e];f=r?n(f,m.range):Math.pow(10,f);p(f)||(f=null);g(c+e,f)}m=m||{};var r="log"===a&&"linear"===m.type;a="linear"===a&&"log"===m.type;if(r||a){k=k._fullLayout.annotations;a=m._id.charAt(0);for(var l,c,d=0;d<k.length;d++)l=k[d],c="annotations["+d+"].",l[a+"ref"]===m._id&&h(a),l["a"+a+"ref"]===m._id&&h("a"+a)}}},{"../../lib/to_log_range":831,"fast-isnumeric":249}],654:[function(b,
N,G){function p(h,r,l){function c(A,D){return n.coerce(h,r,g,A,D)}var d=c("visible"),e=c("clicktoshow");if(d||e){a(h,r,l,c);d=r.showarrow;var f=["x","y"],q=[-10,-30];l={_fullLayout:l};for(var t=0;2>t;t++){var w=f[t],x=k.coerceRef(h,r,l,w,"","paper");"paper"!==x&&k.getFromId(l,x)._annIndices.push(r._index);k.coercePosition(r,l,c,x,w,.5);if(d){var z="a"+w,B=k.coerceRef(h,r,l,z,"pixel",["pixel","paper"]);"pixel"!==B&&B!==x&&(B=r[z]="pixel");k.coercePosition(r,l,c,B,z,"pixel"===B?q[t]:.4)}c(w+"anchor");
c(w+"shift")}n.noneOrAll(h,r,["x","y"]);d&&n.noneOrAll(h,r,["ax","ay"]);e&&(e=c("xclick"),d=c("yclick"),r._xclick=void 0===e?r.x:k.cleanPosition(e,l,r.xref),r._yclick=void 0===d?r.y:k.cleanPosition(d,l,r.yref))}}var n=b("../../lib"),k=b("../../plots/cartesian/axes"),m=b("../../plots/array_container_defaults"),a=b("./common_defaults"),g=b("./attributes");N.exports=function(h,r){m(h,r,{name:"annotations",handleItemDefaults:p})}},{"../../lib":803,"../../plots/array_container_defaults":849,"../../plots/cartesian/axes":854,
"./attributes":649,"./common_defaults":652}],655:[function(b,N,G){function p(z,B){var A=z._fullLayout.annotations[B]||{},D=l.getFromId(z,A.xref),C=l.getFromId(z,A.yref);D&&D.setScale();C&&C.setScale();k(z,A,B,!1,D,C)}function n(z,B,A,D,C){var v=C[A];C=C[A+"ref"];A=-1!==A.indexOf("y");C="domain"===l.getRefType(C);D=A?D.h:D.w;return z?C?v+(A?-B:B)/z._length:z.p2r(z.r2p(v)+B):v+(A?-B:B)/D}function k(z,B,A,D,C,v){function y(ka){ka={index:A,annotation:B._input,fullAnnotation:B,event:ka};D&&(ka.subplotId=
D);return ka}function F(ka){ka.call(d.font,ra).attr({"text-anchor":{left:"start",right:"end"}[B.align]||"middle"});f.convertToTspans(ka,z,J);return ka}function J(){function ka(Pb,fc){"auto"===fc&&(fc=Pb<1/3?"left":Pb>2/3?"right":"center");return{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[fc]}var na=la.selectAll("a");1===na.size()&&na.text()===la.text()&&ba.insert("a",":first-child").attr({"xlink:xlink:href":na.attr("xlink:href"),"xlink:xlink:show":na.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(ia.node());
na=ba.select(".annotation-text-math-group");for(var qa=!na.empty(),ta=d.bBox((qa?na:la).node()),za=ta.width,Ia=ta.height,Xa=B.width||za,$a=B.height||Ia,gb=Math.round(Xa+2*ma),sb=Math.round($a+2*ma),jb=!1,vb=["x","y"],qb=0;qb<vb.length;qb++){var Bb=vb[qb],ub=B[Bb+"ref"]||Bb,wb=B["a"+Bb+"ref"],rb={x:C,y:v}[Bb],Ab=(T+("x"===Bb?0:-90))*Math.PI/180,Ma=gb*Math.cos(Ab),La=sb*Math.sin(Ab);Ab=Math.abs(Ma)+Math.abs(La);var ya=B[Bb+"anchor"],Aa=B[Bb+"shift"]*("x"===Bb?1:-1),Ka=W[Bb];var Ta=l.getRefType(ub);
if(rb&&"domain"!==Ta){Ta=rb.r2fraction(B[Bb]);if(0>Ta||1<Ta)if(wb===ub){if(Ta=rb.r2fraction(B["a"+Bb]),0>Ta||1<Ta)jb=!0}else jb=!0;Ta=rb._offset+rb.r2p(B[Bb]);var bb=.5}else Ta="domain"===Ta,"x"===Bb?(bb=B[Bb],Ta=Ta?rb._offset+rb._length*bb:Ta=O.l+O.w*bb):(bb=1-B[Bb],Ta=Ta?rb._offset+rb._length*bb:Ta=O.t+O.h*bb),bb=B.showarrow?.5:bb;B.showarrow?(Ka.head=Ta,ya=B["a"+Bb],Ma=Ma*ka(.5,B.xanchor)-La*ka(.5,B.yanchor),wb===ub?(La=l.getRefType(wb),"domain"===La?("y"===Bb&&(ya=1-ya),Ka.tail=rb._offset+rb._length*
ya):"paper"===La?"y"===Bb?(ya=1-ya,Ka.tail=O.t+O.h*ya):Ka.tail=O.l+O.w*ya:Ka.tail=rb._offset+rb.r2p(ya),rb=Ma):(Ka.tail=Ta+ya,rb=Ma+ya),Ka.text=Ka.tail+Ma,La=K["x"===Bb?"width":"height"],"paper"===ub&&(Ka.head=h.constrain(Ka.head,1,La-1)),"pixel"===wb&&(ub=-Math.max(Ka.tail-3,Ka.text),wb=Math.min(Ka.tail+3,Ka.text)-La,0<ub?(Ka.tail+=ub,Ka.text+=ub):0<wb&&(Ka.tail-=wb,Ka.text-=wb)),Ka.tail+=Aa,Ka.head+=Aa):(rb=Ma=Ab*ka(bb,ya),Ka.text=Ta+Ma);Ka.text+=Aa;Ma+=Aa;rb+=Aa;B["_"+Bb+"padplus"]=Ab/2+rb;B["_"+
Bb+"padminus"]=Ab/2-rb;B["_"+Bb+"size"]=Ab;B["_"+Bb+"shift"]=Ma}if(jb)ba.remove();else{vb=jb=0;"left"!==B.align&&(jb=(Xa-za)*("center"===B.align?.5:1));"top"!==B.valign&&(vb=($a-Ia)*("middle"===B.valign?.5:1));qa?na.select("svg").attr({x:ma+jb-1,y:ma+vb}).call(d.setClipUrl,oa?ca:null,z):la.call(f.positionText,ma+jb-ta.left,ma+vb-ta.top).call(d.setClipUrl,oa?ca:null,z);xa.select("rect").call(d.setRect,ma,ma,Xa,$a);ia.call(d.setRect,ja/2,ja/2,gb-ja,sb-ja);ba.call(d.setTranslate,Math.round(W.x.text-
gb/2),Math.round(W.y.text-sb/2));ha.attr({transform:"rotate("+T+","+W.x.text+","+W.y.text+")"});var cb=function(Pb,fc){U.selectAll(".annotation-arrow-g").remove();var pb=W.x.head,Db=W.y.head,Rb=W.x.tail+Pb,xc=W.y.tail+fc,Ic=W.x.text+Pb;Pb=W.y.text+fc;fc=h.rotationXYMatrix(T,Ic,Pb);var Ja=h.apply2DTransform(fc);fc=h.apply2DTransform2(fc);var Pa=+ia.attr("width"),db=+ia.attr("height");Ic-=.5*Pa;Pa=Ic+Pa;Pb-=.5*db;db=Pb+db;fc=[[Ic,Pb,Ic,db],[Ic,db,Pa,db],[Pa,db,Pa,Pb],[Pa,Pb,Ic,Pb]].map(fc);if(!fc.reduce(function(uc,
fd){return uc^!!h.segmentsIntersect(pb,Db,pb+1E6,Db+1E6,fd[0],fd[1],fd[2],fd[3])},!1)){fc.forEach(function(uc){if(uc=h.segmentsIntersect(Rb,xc,pb,Db,uc[0],uc[1],uc[2],uc[3]))Rb=uc.x,xc=uc.y});fc=B.arrowwidth;db=B.arrowcolor;Pb=B.arrowside;var Jb=U.append("g").style({opacity:c.opacity(db)}).classed("annotation-arrow-g",!0);db=Jb.append("path").attr("d","M"+Rb+","+xc+"L"+pb+","+Db).style("stroke-width",fc+"px").call(c.stroke,c.rgb(db));x(db,Pb,B);if(I.annotationPosition&&db.node().parentNode&&!D){Pb=
pb;db=Db;B.standoff&&(Ic=Math.sqrt(Math.pow(pb-Rb,2)+Math.pow(Db-xc,2)),Pb+=B.standoff*(Rb-pb)/Ic,db+=B.standoff*(xc-Db)/Ic);fc=Jb.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(Rb-Pb)+","+(xc-db),transform:r(Pb,db)}).style("stroke-width",fc+6+"px").call(c.stroke,"rgba(0,0,0,0)").call(c.fill,"rgba(0,0,0,0)");var Gb,cc;t.init({element:fc.node(),gd:z,prepFn:function(){var uc=d.getTranslate(ba);Gb=uc.x;cc=uc.y;C&&C.autorange&&
M(C._name+".autorange",!0);v&&v.autorange&&M(v._name+".autorange",!0)},moveFn:function(uc,fd){var kb=Ja(Gb,cc),Qb=kb[0]+uc;kb=kb[1]+fd;ba.call(d.setTranslate,Qb,kb);Q("x",n(C,uc,"x",O,B));Q("y",n(v,fd,"y",O,B));B.axref===B.xref&&Q("ax",n(C,uc,"ax",O,B));B.ayref===B.yref&&Q("ay",n(v,fd,"ay",O,B));Jb.attr("transform",r(uc,fd));ha.attr({transform:"rotate("+T+","+Qb+","+kb+")"})},doneFn:function(){a.call("_guiRelayout",z,Z());var uc=document.querySelector(".js-notes-box-panel");uc&&uc.redraw(uc.selectedObj)}})}}};
B.showarrow&&cb(0,0);if(Y){var Eb;t.init({element:ba.node(),gd:z,prepFn:function(){Eb=ha.attr("transform")},moveFn:function(Pb,fc){var pb="pointer";if(B.showarrow)B.axref===B.xref?Q("ax",n(C,Pb,"ax",O,B)):Q("ax",B.ax+Pb),B.ayref===B.yref?Q("ay",n(v,fc,"ay",O.w,B)):Q("ay",B.ay+fc),cb(Pb,fc);else{if(D)return;if(C)var Db=n(C,Pb,"x",O,B);else Db=B._xsize/O.w,Db=t.align(B.x+(B._xshift-B.xshift)/O.w-Db/2+Pb/O.w,Db,0,1,B.xanchor);if(v)var Rb=n(v,fc,"y",O,B);else Rb=B._ysize/O.h,Rb=t.align(B.y-(B._yshift+
B.yshift)/O.h-Rb/2-fc/O.h,Rb,0,1,B.yanchor);Q("x",Db);Q("y",Rb);C&&v||(pb=t.getCursor(C?.5:Db,v?.5:Rb,B.xanchor,B.yanchor))}ha.attr({transform:r(Pb,fc)+Eb});q(ba,pb)},clickFn:function(Pb,fc){B.captureevents&&z.emit("plotly_clickannotation",y(fc))},doneFn:function(){q(ba);a.call("_guiRelayout",z,Z());var Pb=document.querySelector(".js-notes-box-panel");Pb&&Pb.redraw(Pb.selectedObj)}})}}}var K=z._fullLayout,O=z._fullLayout._size,I=z._context.edits;if(D){var L="annotation-"+D;var H=D+".annotations"}else L=
"annotation",H="annotations";H=w(z.layout,H,B);var M=H.modifyBase,Q=H.modifyItem,Z=H.getUpdateObj;K._infolayer.selectAll("."+L+'[data-index\x3d"'+A+'"]').remove();var ca="clip"+K._uid+"_ann"+A;if(B._input&&!1!==B.visible){var W={x:{},y:{}},T=+B.textangle||0,U=K._infolayer.append("g").classed(L,!0).attr("data-index",String(A)).style("opacity",B.opacity),ha=U.append("g").classed("annotation-text-g",!0),Y=I[B.showarrow?"annotationTail":"annotationPosition"];L=B.captureevents||I.annotationText||Y;var ba=
ha.append("g").style("pointer-events",L?"all":null).call(q,"pointer").on("click",function(){z._dragging=!1;z.emit("plotly_clickannotation",y(m.event))});if(B.hovertext)ba.on("mouseover",function(){var ka=B.hoverlabel,na=ka.font,qa=this.getBoundingClientRect(),ta=z.getBoundingClientRect();e.loneHover({x0:qa.left-ta.left,x1:qa.right-ta.left,y:(qa.top+qa.bottom)/2-ta.top,text:B.hovertext,color:ka.bgcolor,borderColor:ka.bordercolor,fontFamily:na.family,fontSize:na.size,fontColor:na.color},{container:K._hoverlayer.node(),
outerContainer:K._paper.node(),gd:z})}).on("mouseout",function(){e.loneUnhover(K._hoverlayer.node())});var ja=B.borderwidth,ma=ja+B.borderpad,ia=ba.append("rect").attr("class","bg").style("stroke-width",ja+"px").call(c.stroke,B.bordercolor).call(c.fill,B.bgcolor),oa=B.width||B.height,xa=K._topclips.selectAll("#"+ca).data(oa?[0]:[]);xa.enter().append("clipPath").classed("annclip",!0).attr("id",ca).append("rect");xa.exit().remove();var ra=B.font;L=K._meta?h.templateString(B.text,K._meta):B.text;var la=
ba.append("text").classed("annotation-text",!0).text(L);if(I.annotationText)la.call(f.makeEditable,{delegate:ba,gd:z}).call(F).on("edit",function(ka){B.text=ka;this.call(F);Q("text",ka);C&&C.autorange&&M(C._name+".autorange",!0);v&&v.autorange&&M(v._name+".autorange",!0);a.call("_guiRelayout",z,Z())});else la.call(F)}else m.selectAll("#"+ca).remove()}var m=b("@plotly/d3"),a=b("../../registry"),g=b("../../plots/plots"),h=b("../../lib"),r=h.strTranslate,l=b("../../plots/cartesian/axes"),c=b("../color"),
d=b("../drawing"),e=b("../fx"),f=b("../../lib/svg_text_utils"),q=b("../../lib/setcursor"),t=b("../dragelement"),w=b("../../plot_api/plot_template").arrayEditor,x=b("./draw_arrow_head");N.exports={draw:function(z){var B=z._fullLayout;B._infolayer.selectAll(".annotation").remove();for(var A=0;A<B.annotations.length;A++)B.annotations[A].visible&&p(z,A);return g.previousPromises(z)},drawOne:p,drawRaw:k}},{"../../lib":803,"../../lib/setcursor":824,"../../lib/svg_text_utils":829,"../../plot_api/plot_template":843,
"../../plots/cartesian/axes":854,"../../plots/plots":917,"../../registry":931,"../color":666,"../dragelement":685,"../drawing":688,"../fx":706,"./draw_arrow_head":656,"@plotly/d3":58}],656:[function(b,N,G){var p=b("@plotly/d3"),n=b("../color"),k=b("./arrow_paths");b=b("../../lib");var m=b.strScale,a=b.strRotate,g=b.strTranslate;N.exports=function(h,r,l){function c(){h.style("stroke-dasharray","0px,100px")}function d(K,O,I,L){K.path&&(K.noRotate&&(I=0),p.select(e.parentNode).append("path").attr({"class":h.attr("class"),
d:K.path,transform:g(O.x,O.y)+a(180*I/Math.PI)+m(L)}).style({fill:n.rgb(l.arrowcolor),"stroke-width":0}))}var e=h.node(),f=k[l.arrowhead||0],q=k[l.startarrowhead||0],t=(l.arrowwidth||1)*(l.arrowsize||1),w=(l.arrowwidth||1)*(l.startarrowsize||1),x=0<=r.indexOf("start");r=0<=r.indexOf("end");var z=f.backoff*t+l.standoff,B=q.backoff*w+l.startstandoff;if("line"===e.nodeName){var A={x:+h.attr("x1"),y:+h.attr("y1")};var D={x:+h.attr("x2"),y:+h.attr("y2")};var C=A.x-D.x,v=A.y-D.y;var y=Math.atan2(v,C);var F=
y+Math.PI;if(z&&B&&z+B>Math.sqrt(C*C+v*v)){c();return}if(z){if(z*z>C*C+v*v){c();return}var J=z*Math.sin(y);D.x+=z*Math.cos(y);D.y+=J;h.attr({x2:D.x,y2:D.y})}if(B){if(B*B>C*C+v*v){c();return}z=B*Math.sin(y);A.x-=B*Math.cos(y);A.y-=z;h.attr({x1:A.x,y1:A.y})}}else if("path"===e.nodeName){C=e.getTotalLength();v="";if(C<z+B){c();return}A=e.getPointAtLength(0);y=e.getPointAtLength(.1);y=Math.atan2(A.y-y.y,A.x-y.x);A=e.getPointAtLength(Math.min(B,C));v="0px,"+B+"px,";D=e.getPointAtLength(C);F=e.getPointAtLength(C-
.1);F=Math.atan2(D.y-F.y,D.x-F.x);D=e.getPointAtLength(Math.max(0,C-z));h.style("stroke-dasharray",v+(C-(v?B+z:z)+"px,"+C+"px"))}x&&d(q,A,y,w);r&&d(f,D,F,t)}},{"../../lib":803,"../color":666,"./arrow_paths":648,"@plotly/d3":58}],657:[function(b,N,G){G=b("./draw");var p=b("./click");N.exports={moduleType:"component",name:"annotations",layoutAttributes:b("./attributes"),supplyLayoutDefaults:b("./defaults"),includeBasePlot:b("../../plots/cartesian/include_components")("annotations"),calcAutorange:b("./calc_autorange"),
draw:G.draw,drawOne:G.drawOne,drawRaw:G.drawRaw,hasClickToShow:p.hasClickToShow,onClick:p.onClick,convertCoords:b("./convert_coords")}},{"../../plots/cartesian/include_components":867,"./attributes":649,"./calc_autorange":650,"./click":651,"./convert_coords":653,"./defaults":654,"./draw":655}],658:[function(b,N,G){G=b("../annotations/attributes");var p=b("../../plot_api/edit_types").overrideAll;b=b("../../plot_api/plot_template").templatedArray;N.exports=p(b("annotation",{visible:G.visible,x:{valType:"any"},
y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:G.xanchor,xshift:G.xshift,yanchor:G.yanchor,yshift:G.yshift,text:G.text,textangle:G.textangle,font:G.font,width:G.width,height:G.height,opacity:G.opacity,align:G.align,valign:G.valign,bgcolor:G.bgcolor,bordercolor:G.bordercolor,borderpad:G.borderpad,borderwidth:G.borderwidth,showarrow:G.showarrow,arrowcolor:G.arrowcolor,arrowhead:G.arrowhead,startarrowhead:G.startarrowhead,arrowside:G.arrowside,arrowsize:G.arrowsize,
startarrowsize:G.startarrowsize,arrowwidth:G.arrowwidth,standoff:G.standoff,startstandoff:G.startstandoff,hovertext:G.hovertext,hoverlabel:G.hoverlabel,captureevents:G.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":836,"../../plot_api/plot_template":843,"../annotations/attributes":649}],659:[function(b,N,G){function p(m,a){var g=a.fullSceneLayout.domain,h=a.fullLayout._size;a={pdata:null,type:"linear",autorange:!1,range:[-Infinity,Infinity]};m._xa={};n.extendFlat(m._xa,a);k.setConvert(m._xa);
m._xa._offset=h.l+g.x[0]*h.w;m._xa.l2p=function(){return.5*(1+m._pdata[0]/m._pdata[3])*h.w*(g.x[1]-g.x[0])};m._ya={};n.extendFlat(m._ya,a);k.setConvert(m._ya);m._ya._offset=h.t+(1-g.y[1])*h.h;m._ya.l2p=function(){return.5*(1-m._pdata[1]/m._pdata[3])*h.h*(g.y[1]-g.y[0])}}var n=b("../../lib"),k=b("../../plots/cartesian/axes");N.exports=function(m){for(var a=m.fullSceneLayout.annotations,g=0;g<a.length;g++)p(a[g],m);m.fullLayout._infolayer.selectAll(".annotation-"+m.id).remove()}},{"../../lib":803,"../../plots/cartesian/axes":854}],
660:[function(b,N,G){function p(h,r,l,c){function d(f,q){return n.coerce(h,r,g,f,q)}function e(f){var q=f+"axis",t={_fullLayout:{}};t._fullLayout[q]=l[q];return k.coercePosition(r,t,d,f,f,.5)}d("visible")&&(a(h,r,c.fullLayout,d),e("x"),e("y"),e("z"),n.noneOrAll(h,r,["x","y","z"]),r.xref="x",r.yref="y",r.zref="z",d("xanchor"),d("yanchor"),d("xshift"),d("yshift"),r.showarrow&&(r.axref="pixel",r.ayref="pixel",d("ax",-10),d("ay",-30),n.noneOrAll(h,r,["ax","ay"])))}var n=b("../../lib"),k=b("../../plots/cartesian/axes"),
m=b("../../plots/array_container_defaults"),a=b("../annotations/common_defaults"),g=b("./attributes");N.exports=function(h,r,l){m(h,r,{name:"annotations",handleItemDefaults:p,fullLayout:l.fullLayout})}},{"../../lib":803,"../../plots/array_container_defaults":849,"../../plots/cartesian/axes":854,"../annotations/common_defaults":652,"./attributes":658}],661:[function(b,N,G){var p=b("../annotations/draw").drawRaw,n=b("../../plots/gl3d/project"),k=["x","y","z"];N.exports=function(m){for(var a=m.fullSceneLayout,
g=m.dataScale,h=a.annotations,r=0;r<h.length;r++){for(var l=h[r],c=!1,d=0;3>d;d++){var e=k[d];e=a[e+"axis"].r2fraction(l[e]);if(0>e||1<e){c=!0;break}}c?m.fullLayout._infolayer.select(".annotation-"+m.id+'[data-index\x3d"'+r+'"]').remove():(l._pdata=n(m.glplot.cameraParams,[a.xaxis.r2l(l.x)*g[0],a.yaxis.r2l(l.y)*g[1],a.zaxis.r2l(l.z)*g[2]]),p(m.graphDiv,l,r,m.id,l._xa,l._ya))}}},{"../../plots/gl3d/project":905,"../annotations/draw":655}],662:[function(b,N,G){var p=b("../../registry"),n=b("../../lib");
N.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:b("./attributes")}}},layoutAttributes:b("./attributes"),handleDefaults:b("./defaults"),includeBasePlot:function(k,m){var a=p.subplotsRegistry.gl3d;if(a)for(var g=a.attrRegex,h=Object.keys(k),r=0;r<h.length;r++){var l=h[r];g.test(l)&&(k[l].annotations||[]).length&&(n.pushUnique(m._basePlotModules,a),n.pushUnique(m._subplots.gl3d,l))}},convert:b("./convert"),draw:b("./draw")}},{"../../lib":803,"../../registry":931,
"./attributes":658,"./convert":659,"./defaults":660,"./draw":661}],663:[function(b,N,G){N.exports=b("world-calendars/dist/main");b("world-calendars/dist/plus");b("world-calendars/dist/calendars/chinese");b("world-calendars/dist/calendars/coptic");b("world-calendars/dist/calendars/discworld");b("world-calendars/dist/calendars/ethiopian");b("world-calendars/dist/calendars/hebrew");b("world-calendars/dist/calendars/islamic");b("world-calendars/dist/calendars/julian");b("world-calendars/dist/calendars/mayan");
b("world-calendars/dist/calendars/nanakshahi");b("world-calendars/dist/calendars/nepali");b("world-calendars/dist/calendars/persian");b("world-calendars/dist/calendars/taiwan");b("world-calendars/dist/calendars/thai");b("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":630,"world-calendars/dist/calendars/coptic":631,"world-calendars/dist/calendars/discworld":632,"world-calendars/dist/calendars/ethiopian":633,"world-calendars/dist/calendars/hebrew":634,"world-calendars/dist/calendars/islamic":635,
"world-calendars/dist/calendars/julian":636,"world-calendars/dist/calendars/mayan":637,"world-calendars/dist/calendars/nanakshahi":638,"world-calendars/dist/calendars/nepali":639,"world-calendars/dist/calendars/persian":640,"world-calendars/dist/calendars/taiwan":641,"world-calendars/dist/calendars/thai":642,"world-calendars/dist/calendars/ummalqura":643,"world-calendars/dist/main":644,"world-calendars/dist/plus":645}],664:[function(b,N,G){function p(q){var t=d[q];return t?t:t=d[q]=m.instance(q)}
function n(q){return a.extendFlat({},r,{description:q})}function k(q){return"Sets the calendar system to use with `"+q+"` date data."}var m=b("./calendars"),a=b("../../lib");b=b("../../constants/numerical");var g=b.EPOCHJD,h=b.ONEDAY,r={valType:"enumerated",values:a.sortObjectKeys(m.calendars),editType:"calc",dflt:"gregorian"},l=function(q,t,w,x){var z={};z[w]=r;return a.coerce(q,t,z,w,x)},c={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},
m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:"##",w:"##",c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},d={};b={xcalendar:n(k("x"))};G=a.extendFlat({},b,{ycalendar:n(k("y"))});var e=a.extendFlat({},G,{zcalendar:n(k("z"))}),f=n("Sets the calendar system to use for `range` and `tick0` if this is a date axis. This does not set the calendar for interpreting data on this axis, that's specified in the trace or via the global `layout.calendar`");
N.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:G,bar:G,box:G,heatmap:G,contour:G,histogram:G,histogram2d:G,histogram2dcontour:G,scatter3d:e,surface:e,mesh3d:e,scattergl:G,ohlc:b,candlestick:b},layout:{calendar:n("Sets the default calendar system to use for interpreting and displaying dates throughout the plot.")},subplots:{xaxis:{calendar:f},yaxis:{calendar:f},scene:{xaxis:{calendar:f},yaxis:{calendar:f},zaxis:{calendar:f}},polar:{radialaxis:{calendar:f}}},transforms:{filter:{valuecalendar:n("WARNING: All transforms are deprecated and may be removed from the API in next major version. Sets the calendar system to use for `value`, if it is a date."),
targetcalendar:n("WARNING: All transforms are deprecated and may be removed from the API in next major version. Sets the calendar system to use for `target`, if it is an array of dates. If `target` is a string (eg *x*) we use the corresponding trace attribute (eg `xcalendar`) if it exists, even if `targetcalendar` is provided.")}}},layoutAttributes:r,handleDefaults:l,handleTraceDefaults:function(q,t,w,x){for(var z=0;z<w.length;z++)l(q,t,w[z]+"calendar",x.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",
coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",
persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],
jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:p,worldCalFmt:function(q,t,w){t=Math.floor((t+.05)/h)+g;w=p(w).fromJD(t);t=0;for(var x,z,B;-1!==(t=q.indexOf("%",t));)x=q.charAt(t+1),"0"===x||"-"===x||"_"===x?(B=3,z=q.charAt(t+2),"_"===x&&(x="-")):(z=x,x="0",B=2),(z=c[z])?(x="##"===z?"##":w.formatDate(z[x]),q=q.substr(0,t)+x+q.substr(t+B),t+=x.length):t+=B;return q}}},{"../../constants/numerical":779,
"../../lib":803,"./calendars":663}],665:[function(b,N,G){G.defaults="#1f77b4 #ff7f0e #2ca02c #d62728 #9467bd #8c564b #e377c2 #7f7f7f #bcbd22 #17becf".split(" ");G.defaultLine="#444";G.lightLine="#eee";G.background="#fff";G.borderLine="#BEC8D9";G.lightFraction=1E3/11},{}],666:[function(b,N,G){function p(r){if(k(r)||"string"!==typeof r)return r;var l=r.trim();if("rgb"!==l.substr(0,3))return r;var c=l.match(/^rgba?\s*\(([^()]*)\)$/);if(!c)return r;c=c[1].trim().split(/\s*[\s,]\s*/);l="a"===l.charAt(3)&&
4===c.length;if(!l&&3!==c.length)return r;for(var d=0;d<c.length;d++){if(!c[d].length)return r;c[d]=Number(c[d]);if(!(0<=c[d]))return r;if(3===d)1<c[d]&&(c[d]=1);else if(1<=c[d])return r}r=Math.round(255*c[0])+", "+Math.round(255*c[1])+", "+Math.round(255*c[2]);return l?"rgba("+r+", "+c[3]+")":"rgb("+r+")"}var n=b("tinycolor2"),k=b("fast-isnumeric"),m=b("../../lib/array").isTypedArray,a=N.exports={};b=b("./attributes");a.defaults=b.defaults;var g=a.defaultLine=b.defaultLine;a.lightLine=b.lightLine;
var h=a.background=b.background;a.tinyRGB=function(r){r=r.toRgb();return"rgb("+Math.round(r.r)+", "+Math.round(r.g)+", "+Math.round(r.b)+")"};a.rgb=function(r){return a.tinyRGB(n(r))};a.opacity=function(r){return r?n(r).getAlpha():0};a.addOpacity=function(r,l){r=n(r).toRgb();return"rgba("+Math.round(r.r)+", "+Math.round(r.g)+", "+Math.round(r.b)+", "+l+")"};a.combine=function(r,l){var c=n(r).toRgb();if(1===c.a)return n(r).toRgbString();r=n(l||h).toRgb();r=1===r.a?r:{r:255*(1-r.a)+r.r*r.a,g:255*(1-
r.a)+r.g*r.a,b:255*(1-r.a)+r.b*r.a};return n({r:r.r*(1-c.a)+c.r*c.a,g:r.g*(1-c.a)+c.g*c.a,b:r.b*(1-c.a)+c.b*c.a}).toRgbString()};a.contrast=function(r,l,c){var d=n(r);1!==d.getAlpha()&&(d=n(a.combine(r,h)));return(d.isDark()?l?d.lighten(l):h:c?d.darken(c):g).toString()};a.stroke=function(r,l){l=n(l);r.style({stroke:a.tinyRGB(l),"stroke-opacity":l.getAlpha()})};a.fill=function(r,l){l=n(l);r.style({fill:a.tinyRGB(l),"fill-opacity":l.getAlpha()})};a.clean=function(r){if(r&&"object"===typeof r){var l=
Object.keys(r),c;for(c=0;c<l.length;c++){var d=l[c];var e=r[d];if("color"===d.substr(d.length-5))if(Array.isArray(e))for(d=0;d<e.length;d++)e[d]=p(e[d]);else r[d]=p(e);else if("colorscale"===d.substr(d.length-10)&&Array.isArray(e))for(d=0;d<e.length;d++)Array.isArray(e[d])&&(e[d][1]=p(e[d][1]));else if(Array.isArray(e)){if(d=e[0],!Array.isArray(d)&&d&&"object"===typeof d)for(d=0;d<e.length;d++)a.clean(e[d])}else e&&"object"===typeof e&&!m(e)&&a.clean(e)}}}},{"../../lib/array":785,"./attributes":665,
"fast-isnumeric":249,tinycolor2:598}],667:[function(b,N,G){G=b("../../plots/cartesian/layout_attributes");var p=b("../../plots/font_attributes"),n=b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;N.exports=b({thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",dflt:1.02,
min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",dflt:.5,min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle"},ypad:{valType:"number",min:0,dflt:10},outlinecolor:G.linecolor,outlinewidth:G.linewidth,bordercolor:G.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:G.tickmode,nticks:G.nticks,tick0:G.tick0,
dtick:G.dtick,tickvals:G.tickvals,ticktext:G.ticktext,ticks:n({},G.ticks,{dflt:""}),ticklabeloverflow:n({},G.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:"outside;inside;outside top;inside top;outside bottom;inside bottom".split(";"),dflt:"outside"},ticklen:G.ticklen,tickwidth:G.tickwidth,tickcolor:G.tickcolor,showticklabels:G.showticklabels,tickfont:p({}),tickangle:G.tickangle,tickformat:G.tickformat,tickformatstops:G.tickformatstops,tickprefix:G.tickprefix,showtickprefix:G.showtickprefix,
ticksuffix:G.ticksuffix,showticksuffix:G.showticksuffix,separatethousands:G.separatethousands,exponentformat:G.exponentformat,minexponent:G.minexponent,showexponent:G.showexponent,title:{text:{valType:"string"},font:p({}),side:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}},_deprecated:{title:{valType:"string"},titlefont:p({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":793,"../../plot_api/edit_types":836,
"../../plots/cartesian/layout_attributes":869,"../../plots/font_attributes":883}],668:[function(b,N,G){N.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],669:[function(b,N,G){var p=b("../../lib"),n=b("../../plot_api/plot_template"),k=b("../../plots/cartesian/tick_value_defaults"),m=b("../../plots/cartesian/tick_mark_defaults"),
a=b("../../plots/cartesian/tick_label_defaults"),g=b("./attributes");N.exports=function(h,r,l){function c(q,t){return p.coerce(e,d,g,q,t)}var d=n.newContainer(r,"colorbar"),e=h.colorbar||{};h=c("thicknessmode");c("thickness","fraction"===h?30/(l.width-l.margin.l-l.margin.r):30);h=c("lenmode");c("len","fraction"===h?1:l.height-l.margin.t-l.margin.b);c("x");c("xanchor");c("xpad");c("y");c("yanchor");c("ypad");p.noneOrAll(e,d,["x","y"]);c("outlinecolor");c("outlinewidth");c("bordercolor");c("borderwidth");
c("bgcolor");r=c("ticklabelposition");c("ticklabeloverflow",-1!==r.indexOf("inside")?"hide past domain":"hide past div");k(e,d,c,"linear");h=l.font;var f={outerTicks:!1,font:h};-1!==r.indexOf("inside")&&(f.bgColor="black");a(e,d,c,"linear",f);m(e,d,c,"linear",f);c("title.text",l._dfltTitle.colorbar);l=d.tickfont;l=p.extendFlat({},l,{color:h.color,size:p.bigFont(l.size)});p.coerceFont(c,"title.font",l);c("title.side")}},{"../../lib":803,"../../plot_api/plot_template":843,"../../plots/cartesian/tick_label_defaults":876,
"../../plots/cartesian/tick_mark_defaults":877,"../../plots/cartesian/tick_value_defaults":878,"./attributes":667}],670:[function(b,N,G){function p(O){function I(ia){return q(ia,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function L(){"function"===typeof T.calc?T.calc(O,W,Z):(Z._fillgradient=ca.reversescale?A(ca.colorscale):ca.colorscale,Z._zrange=[ca[T.min],ca[T.max]])}for(var H=O._fullLayout,
M=O.calcdata,Q=[],Z,ca,W,T,U=0;U<M.length;U++){W=M[U][0].trace;var ha=W._module.colorbar;if(!0===W.visible&&ha){var Y=Array.isArray(ha);ha=Y?ha:[ha];for(var ba=0;ba<ha.length;ba++){T=ha[ba];var ja=T.container;(ca=ja?W[ja]:W)&&ca.showscale&&(Z=I(ca.colorbar),Z._id="cb"+W.uid+(Y&&ja?"-"+ja:""),Z._traceIndex=W.index,Z._propPrefix=(ja?ja+".":"")+"colorbar.",Z._meta=W._meta,L(),Q.push(Z))}}}for(var ma in H._colorAxes)ca=H[ma],ca.showscale&&(M=H._colorAxes[ma],Z=I(ca.colorbar),Z._id="cb"+ma,Z._propPrefix=
ma+".colorbar.",Z._meta=H._meta,T={min:"cmin",max:"cmax"},"heatmap"!==M[0]&&(W=M[1],T.calc=W._module.colorbar.calc),L(),Q.push(Z));return Q}function n(O,I,L){function H(qb,Bb){var ub={propContainer:$a,propName:I._propPrefix+"title",traceIndex:I._traceIndex,_meta:I._meta,placeholder:M._dfltTitle.colorbar,containerGroup:O.select("."+K.cbtitle)},wb="h"===qb.charAt(0)?qb.substr(1):"h"+qb;O.selectAll("."+wb+",."+wb+"-math-group").remove();z.draw(L,qb,q(ub,Bb||{}))}var M=L._fullLayout,Q=M._size,Z=I._fillcolor,
ca=I._line,W=I.title,T=W.side,U=I._zrange||g.extent(("function"===typeof Z?Z:ca.color).domain()),ha="function"===typeof ca.color?ca.color:function(){return ca.color},Y="function"===typeof Z?Z:function(){return Z},ba=I._levels,ja=m(L,I,U),ma=ja.fill,ia=ja.line,oa=Math.round(I.thickness*("fraction"===I.thicknessmode?Q.w:1));ja=oa/Q.w;var xa=Math.round(I.len*("fraction"===I.lenmode?Q.h:1)),ra=xa/Q.h,la=I.xpad/Q.w,ka=(I.borderwidth+I.outlinewidth)/2,na=I.ypad/Q.h,qa=Math.round(I.x*Q.w+I.xpad),ta=I.x-
ja*({middle:.5,right:1}[I.xanchor]||0),za=I.y+ra*(({top:-.5,bottom:.5}[I.yanchor]||0)-.5),Ia=Math.round(Q.h*(1-za)),Xa=Ia-xa;I._lenFrac=ra;I._thickFrac=ja;I._xLeftFrac=ta;I._yBottomFrac=za;var $a=I._axis=a(L,I,U);$a.position=I.x+la+ja;-1!==["top","bottom"].indexOf(T)&&($a.title.side=T,$a.titlex=I.x+la,$a.titley=za+("top"===W.side?ra-na:na));ca.color&&"auto"===I.tickmode&&($a.tickmode="linear",$a.tick0=ba.start,W=ba.size,ja=e.constrain((Ia-Xa)/50,4,15)+1,ja=(U[1]-U[0])/((I.nticks||ja)*W),1<ja&&(xa=
Math.pow(10,Math.floor(Math.log(ja)/Math.LN10)),W*=xa*e.roundUp(ja/xa,[2,5,10]),2E-6>(Math.abs(ba.start)/ba.size+1E-6)%1&&($a.tick0=0)),$a.dtick=W);$a.domain=[za+na,za+ra-na];$a.setScale();O.attr("transform",f(Math.round(Q.l),Math.round(Q.t)));var gb=O.select("."+K.cbtitleunshift).attr("transform",f(-Math.round(Q.l),-Math.round(Q.t))),sb=O.select("."+K.cbaxis),jb,vb=0;return e.syncOrAsync([r.previousPromises,function(){if(-1!==["top","bottom"].indexOf(T)){var qb=$a.title.font.size;H($a._id+"title",
{attributes:{x:Q.l+(I.x+la)*Q.w,y:"top"===T?(1-(za+ra-na))*Q.h+Q.t+3+.75*qb:(1-(za+na))*Q.h+Q.t-3-.25*qb,"text-anchor":"start"}})}},function(){if(-1!==["top","bottom"].indexOf(T)){var qb=O.select("."+K.cbtitle),Bb=qb.select("text"),ub=[-I.outlinewidth/2,I.outlinewidth/2],wb=qb.select(".h"+$a._id+"title-math-group").node(),rb=15.6;Bb.node()&&(rb=parseInt(Bb.node().style.fontSize,10)*y);wb?(vb=w.bBox(wb).height,vb>rb&&(ub[1]-=(vb-rb)/2)):Bb.node()&&!Bb.classed(K.jsPlaceholder)&&(vb=w.bBox(Bb.node()).height);
vb&&(vb+=5,"top"===T?($a.domain[1]-=vb/Q.h,ub[1]*=-1):($a.domain[0]+=vb/Q.h,Bb=B.lineCount(Bb),ub[1]+=(1-Bb)*rb),qb.attr("transform",f(ub[0],ub[1])),$a.setScale())}O.selectAll("."+K.cbfills+",."+K.cblines).attr("transform",f(0,Math.round(Q.h*(1-$a.domain[1]))));sb.attr("transform",f(0,Math.round(-Q.t)));qb=O.select("."+K.cbfills).selectAll("rect."+K.cbfill).attr("style","").data(ma);qb.enter().append("rect").classed(K.cbfill,!0).style("stroke","none");qb.exit().remove();var Ab=U.map($a.c2p).map(Math.round).sort(function(Ma,
La){return Ma-La});qb.each(function(Ma,La){La=[0===La?U[0]:(ma[La]+ma[La-1])/2,La===ma.length-1?U[1]:(ma[La]+ma[La+1])/2].map($a.c2p).map(Math.round);La[1]=e.constrain(La[1]+(La[1]>La[0])?1:-1,Ab[0],Ab[1]);La=g.select(this).attr({x:qa,width:Math.max(oa,2),y:g.min(La),height:Math.max(g.max(La)-g.min(La),2)});I._fillgradient?w.gradient(La,L,I._id,"vertical",I._fillgradient,"fill"):(Ma=Y(Ma).replace("e-",""),La.attr("fill",h(Ma).toHexString()))});qb=O.select("."+K.cblines).selectAll("path."+K.cbline).data(ca.color&&
ca.width?ia:[]);qb.enter().append("path").classed(K.cbline,!0);qb.exit().remove();qb.each(function(Ma){g.select(this).attr("d","M"+qa+","+(Math.round($a.c2p(Ma))+ca.width/2%1)+"h"+oa).call(w.lineGroupStyle,ca.width,ha(Ma),ca.dash)});sb.selectAll("g."+$a._id+"tick,path").remove();qb=qa+oa+(I.outlinewidth||0)/2-("outside"===I.ticks?1:0);ub=c.calcTicks($a);rb=c.getTickSigns($a)[2];c.drawTicks(L,$a,{vals:"inside"===$a.ticks?c.clipEnds($a,ub):ub,layer:sb,path:c.makeTickPath($a,qb,rb),transFn:c.makeTransTickFn($a)});
return c.drawLabels(L,$a,{vals:ub,layer:sb,transFn:c.makeTransTickLabelFn($a),labelFns:c.makeLabelFns($a,qb)})},function(){if(-1===["top","bottom"].indexOf(T)){var qb=$a.title.font.size,Bb=$a._offset+$a._length/2;qb=Q.l+($a.position||0)*Q.w+("right"===$a.side?10+qb*($a.showticklabels?1:.5):-10-qb*($a.showticklabels?.5:0));H("h"+$a._id+"title",{avoid:{selection:g.select(L).selectAll("g."+$a._id+"tick"),side:T,offsetLeft:Q.l,offsetTop:0,maxShift:M.width},attributes:{x:qb,y:Bb,"text-anchor":"middle"},
transform:{rotate:"-90",offset:0}})}},r.previousPromises,function(){var qb=oa+I.outlinewidth/2;-1===$a.ticklabelposition.indexOf("inside")&&(qb+=w.bBox(sb.node()).width);jb=gb.select("text");if(jb.node()&&!jb.classed(K.jsPlaceholder)){var Bb=gb.select(".h"+$a._id+"title-math-group").node();Bb=Bb&&-1!==["top","bottom"].indexOf(T)?w.bBox(Bb).width:w.bBox(gb.node()).right-qa-Q.l;qb=Math.max(qb,Bb)}Bb=2*I.xpad+qb+I.borderwidth+I.outlinewidth/2;var ub=Ia-Xa;O.select("."+K.cbbg).attr({x:qa-I.xpad-(I.borderwidth+
I.outlinewidth)/2,y:Xa-ka,width:Math.max(Bb,2),height:Math.max(ub+2*ka,2)}).call(x.fill,I.bgcolor).call(x.stroke,I.bordercolor).style("stroke-width",I.borderwidth);O.selectAll("."+K.cboutline).attr({x:qa,y:Xa+I.ypad+("top"===T?vb:0),width:Math.max(oa,2),height:Math.max(ub-2*I.ypad-vb,2)}).call(x.stroke,I.outlinecolor).style({fill:"none","stroke-width":I.outlinewidth});O.attr("transform",f(Q.l-({center:.5,right:1}[I.xanchor]||0)*Bb,Q.t));qb={};var wb=F[I.yanchor],rb=J[I.yanchor];"pixels"===I.lenmode?
(qb.y=I.y,qb.t=ub*wb,qb.b=ub*rb):(qb.t=qb.b=0,qb.yt=I.y+I.len*wb,qb.yb=I.y-I.len*rb);ub=F[I.xanchor];wb=J[I.xanchor];"pixels"===I.thicknessmode?(qb.x=I.x,qb.l=Bb*ub,qb.r=Bb*wb):(Bb-=oa,qb.l=Bb*ub,qb.r=Bb*wb,qb.xl=I.x-I.thickness*ub,qb.xr=I.x+I.thickness*wb);r.autoMargin(L,I._id,qb)}],L)}function k(O,I,L){var H=L._fullLayout._size,M,Q,Z;d.init({element:O.node(),gd:L,prepFn:function(){M=O.attr("transform");t(O)},moveFn:function(ca,W){O.attr("transform",M+f(ca,W));Q=d.align(I._xLeftFrac+ca/H.w,I._thickFrac,
0,1,I.xanchor);Z=d.align(I._yBottomFrac-W/H.h,I._lenFrac,0,1,I.yanchor);ca=d.getCursor(Q,Z,I.xanchor,I.yanchor);t(O,ca)},doneFn:function(){t(O);if(void 0!==Q&&void 0!==Z){var ca={};ca[I._propPrefix+"x"]=Q;ca[I._propPrefix+"y"]=Z;void 0!==I._traceIndex?l.call("_guiRestyle",L,ca,I._traceIndex):l.call("_guiRelayout",L,ca)}}})}function m(O,I,L){var H=I._levels;O=[];var M=[],Q,Z=H.end+H.size/100,ca=H.size,W=1.001*L[0]-.001*L[1],T=1.001*L[1]-.001*L[0];for(Q=0;1E5>Q;Q++){var U=H.start+Q*ca;if(0<ca?U>=Z:
U<=Z)break;U>W&&U<T&&O.push(U)}if(I._fillgradient)M=[0];else if("function"===typeof I._fillcolor)if(I=I._filllevels)for(Z=I.end+I.size/100,ca=I.size,Q=0;1E5>Q;Q++){U=I.start+Q*ca;if(0<ca?U>=Z:U<=Z)break;U>L[0]&&U<L[1]&&M.push(U)}else M=O.map(function(ha){return ha-H.size/2}),M.push(M[M.length-1]+H.size);else I._fillcolor&&"string"===typeof I._fillcolor&&(M=[0]);0>H.size&&(O.reverse(),M.reverse());return{line:O,fill:M}}function a(O,I,L){function H(Z,ca){return e.coerce(M,Q,v,Z,ca)}O=O._fullLayout;
var M={type:"linear",range:L,tickmode:I.tickmode,nticks:I.nticks,tick0:I.tick0,dtick:I.dtick,tickvals:I.tickvals,ticktext:I.ticktext,ticks:I.ticks,ticklen:I.ticklen,tickwidth:I.tickwidth,tickcolor:I.tickcolor,showticklabels:I.showticklabels,ticklabelposition:I.ticklabelposition,ticklabeloverflow:I.ticklabeloverflow,tickfont:I.tickfont,tickangle:I.tickangle,tickformat:I.tickformat,exponentformat:I.exponentformat,minexponent:I.minexponent,separatethousands:I.separatethousands,showexponent:I.showexponent,
showtickprefix:I.showtickprefix,tickprefix:I.tickprefix,showticksuffix:I.showticksuffix,ticksuffix:I.ticksuffix,title:I.title,showline:!0,anchor:"free",side:"right",position:1},Q={type:"linear",_id:"y"+I._id};I={letter:"y",font:O.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:O.calendar};D(M,Q,H,I,O);C(M,Q,H,I);return Q}var g=b("@plotly/d3"),h=b("tinycolor2"),r=b("../../plots/plots"),l=b("../../registry"),c=b("../../plots/cartesian/axes"),d=b("../dragelement"),e=b("../../lib"),f=e.strTranslate,
q=b("../../lib/extend").extendFlat,t=b("../../lib/setcursor"),w=b("../drawing"),x=b("../color"),z=b("../titles"),B=b("../../lib/svg_text_utils"),A=b("../colorscale/helpers").flipScale,D=b("../../plots/cartesian/axis_defaults"),C=b("../../plots/cartesian/position_defaults"),v=b("../../plots/cartesian/layout_attributes");G=b("../../constants/alignment");var y=G.LINE_SPACING,F=G.FROM_TL,J=G.FROM_BR,K=b("./constants").cn;N.exports={draw:function(O){var I=O._fullLayout._infolayer.selectAll("g."+K.colorbar).data(p(O),
function(L){return L._id});I.enter().append("g").attr("class",function(L){return L._id}).classed(K.colorbar,!0);I.each(function(L){var H=g.select(this);e.ensureSingle(H,"rect",K.cbbg);e.ensureSingle(H,"g",K.cbfills);e.ensureSingle(H,"g",K.cblines);e.ensureSingle(H,"g",K.cbaxis,function(Q){Q.classed(K.crisp,!0)});e.ensureSingle(H,"g",K.cbtitleunshift,function(Q){Q.append("g").classed(K.cbtitle,!0)});e.ensureSingle(H,"rect",K.cboutline);var M=n(H,L,O);M&&M.then&&(O._promises||[]).push(M);O._context.edits.colorbarPosition&&
k(H,L,O)});I.exit().each(function(L){r.autoMargin(O,L._id)}).remove();I.order()}}},{"../../constants/alignment":771,"../../lib":803,"../../lib/extend":793,"../../lib/setcursor":824,"../../lib/svg_text_utils":829,"../../plots/cartesian/axes":854,"../../plots/cartesian/axis_defaults":856,"../../plots/cartesian/layout_attributes":869,"../../plots/cartesian/position_defaults":872,"../../plots/plots":917,"../../registry":931,"../color":666,"../colorscale/helpers":677,"../dragelement":685,"../drawing":688,
"../titles":764,"./constants":668,"@plotly/d3":58,tinycolor2:598}],671:[function(b,N,G){var p=b("../../lib");N.exports=function(n){return p.isPlainObject(n.colorbar)}},{"../../lib":803}],672:[function(b,N,G){N.exports={moduleType:"component",name:"colorbar",attributes:b("./attributes"),supplyDefaults:b("./defaults"),draw:b("./draw").draw,hasColorbar:b("./has_colorbar")}},{"./attributes":667,"./defaults":669,"./draw":670,"./has_colorbar":671}],673:[function(b,N,G){var p=b("../colorbar/attributes"),
n=b("../../lib/regex").counter;G=b("../../lib/sort_object_keys");var k=b("./scales.js").scales;G(k);N.exports=function(m,a){a=a||{};var g=a.cLetter||"c";m="noScale"in a?a.noScale:"marker.line"===(m||"");var h="showScaleDflt"in a?a.showScaleDflt:"z"===g,r="string"===typeof a.colorscaleDflt?k[a.colorscaleDflt]:null,l=a.editTypeOverride||"";var c="colorAttr"in a?a.colorAttr:{z:"z",c:"color"}[g];var d=g+"auto",e=g+"min",f=g+"max",q={};q[e]=q[f]=void 0;var t={};t[d]=!1;var w={};"color"===c&&(w.color={valType:"color",
arrayOk:!0,editType:l||"style"},a.anim&&(w.color.anim=!0));w[d]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:q};w[e]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:t};w[f]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:t};w[g+"mid"]={valType:"number",dflt:null,editType:"calc",impliedEdits:q};w.colorscale={valType:"colorscale",editType:"calc",dflt:r,impliedEdits:{autocolorscale:!1}};w.autocolorscale={valType:"boolean",dflt:!1===a.autoColorDflt?!1:!0,editType:"calc",
impliedEdits:{colorscale:void 0}};w.reversescale={valType:"boolean",dflt:!1,editType:"plot"};m||(w.showscale={valType:"boolean",dflt:h,editType:"calc"},w.colorbar=p);a.noColorAxis||(w.coloraxis={valType:"subplotid",regex:n("coloraxis"),dflt:null,editType:"calc"});return w}},{"../../lib/regex":820,"../../lib/sort_object_keys":826,"../colorbar/attributes":667,"./scales.js":681}],674:[function(b,N,G){var p=b("fast-isnumeric"),n=b("../../lib"),k=b("./helpers").extractOpts;N.exports=function(m,a,g){m=
m._fullLayout;var h=g.vals;a=(g=g.containerStr)?n.nestedProperty(a,g).get():a;g=k(a);var r=!1!==g.auto,l=g.min,c=g.max,d=g.mid;void 0===l?l=n.aggNums(Math.min,null,h):r&&(l=a._colorAx&&p(l)?Math.min(l,n.aggNums(Math.min,null,h)):n.aggNums(Math.min,null,h));void 0===c?c=n.aggNums(Math.max,null,h):r&&(c=a._colorAx&&p(c)?Math.max(c,n.aggNums(Math.max,null,h)):n.aggNums(Math.max,null,h));r&&void 0!==d&&(c-d>d-l?l=d-(c-d):c-d<d-l&&(c=d+(d-l)));l===c&&(l-=.5,c+=.5);g._sync("min",l);g._sync("max",c);g.autocolorscale&&
g._sync("colorscale",0>l*c?m.colorscale.diverging:0<=l?m.colorscale.sequential:m.colorscale.sequentialminus)}},{"../../lib":803,"./helpers":677,"fast-isnumeric":249}],675:[function(b,N,G){var p=b("../../lib"),n=b("./helpers").hasColorscale,k=b("./helpers").extractOpts;N.exports=function(m,a){function g(f,q){var t=f["_"+q];void 0!==t&&(f[q]=t)}function h(f,q){if(f=q.container?p.nestedProperty(f,q.container).get():f)if(f.coloraxis)f._colorAx=a[f.coloraxis];else{var t=k(f),w=t.auto;(w||void 0===t.min)&&
g(f,q.min);(w||void 0===t.max)&&g(f,q.max);t.autocolorscale&&g(f,"colorscale")}}for(var r=0;r<m.length;r++){var l=m[r],c=l._module.colorbar;if(c)if(Array.isArray(c))for(var d=0;d<c.length;d++)h(l,c[d]);else h(l,c);n(l,"marker.line")&&h(l,{container:"marker.line",min:"cmin",max:"cmax"})}for(var e in a._colorAxes)h(a[e],{min:"cmin",max:"cmax"})}},{"../../lib":803,"./helpers":677}],676:[function(b,N,G){function p(r,l){var c=l.slice(0,l.length-1);return l?k.nestedProperty(r,c).get()||{}:r}var n=b("fast-isnumeric"),
k=b("../../lib"),m=b("../colorbar/has_colorbar"),a=b("../colorbar/defaults"),g=b("./scales").isValid,h=b("../../registry").traceIs;N.exports=function q(l,c,d,e,f){var t=f.prefix,w=f.cLetter,x="_module"in c,z=p(l,t),B=p(c,t),A=p(c._template||{},t)||{},D=function(){delete l.coloraxis;delete c.coloraxis;return q(l,c,d,e,f)};if(x){var C=d._colorAxes||{},v=e(t+"coloraxis");if(v){t=h(c,"contour")&&k.nestedProperty(c,"contours.coloring").get()||"heatmap";(x=C[v])?(x[2].push(D),x[0]!==t&&(x[0]=!1,k.warn(["Ignoring coloraxis:",
v,"setting as it is linked to incompatible colorscales."].join(" ")))):C[v]=[t,c,[D]];return}}D=z[w+"min"];C=z[w+"max"];D=n(D)&&n(C)&&D<C;e(t+w+"auto",!D)?e(t+w+"mid"):(e(t+w+"min"),e(t+w+"max"));w=z.colorscale;D=A.colorscale;var y;void 0!==w&&(y=!g(w));void 0!==D&&(y=!g(D));e(t+"autocolorscale",y);e(t+"colorscale");e(t+"reversescale");if("marker.line."!==t){var F;t&&x&&(F=m(z));e(t+"showscale",F)&&(t&&A&&(B._template=A),a(z,B,d))}}},{"../../lib":803,"../../registry":931,"../colorbar/defaults":669,
"../colorbar/has_colorbar":671,"./scales":681,"fast-isnumeric":249}],677:[function(b,N,G){function p(q){var t=q._colorAx,w=t?t:q;q={};var x;for(x=0;x<e.length;x++){var z=e[x];q[z]=w[z]}if(t){var B="c";for(x=0;x<f.length;x++)z=f[x],q[z]=w["c"+z]}else{for(x=0;x<f.length;x++){z=f[x];var A="c"+z;A in w?q[z]=w[A]:(A="z"+z,A in w&&(q[z]=w[A]))}B=A.charAt(0)}q._sync=function(D,C){D=-1!==f.indexOf(D)?B+D:D;w[D]=w["_"+D]=C};return q}function n(q){var t=p(q);q=t.min;var w=t.max;t=t.reversescale?k(t.colorscale):
t.colorscale;for(var x=t.length,z=Array(x),B=Array(x),A=0;A<x;A++){var D=t[A];z[A]=q+D[0]*(w-q);B[A]=D[1]}return{domain:z,range:B}}function k(q){var t=q.length,w=Array(t);--t;for(var x=0;0<=t;t--,x++){var z=q[t];w[x]=[1-z[0],z[1]]}return w}function m(q,t){t=t||{};var w=q.domain,x=q.range;q=x.length;for(var z=Array(q),B=0;B<q;B++){var A=h(x[B]).toRgb();z[B]=[A.r,A.g,A.b,A.a]}var D=g.scale.linear().domain(w).range(z).clamp(!0);w=t.noNumericCheck;t=t.returnArray;t=w&&t?D:w?function(C){return a(D(C))}:
t?function(C){return r(C)?D(C):h(C).isValid()?C:c.defaultLine}:function(C){return r(C)?a(D(C)):h(C).isValid()?C:c.defaultLine};t.domain=D.domain;t.range=function(){return x};return t}function a(q){return h({r:q[0],g:q[1],b:q[2],a:q[3]}).toRgbString()}var g=b("@plotly/d3"),h=b("tinycolor2"),r=b("fast-isnumeric"),l=b("../../lib"),c=b("../color"),d=b("./scales").isValid,e=["showscale","autocolorscale","colorscale","reversescale","colorbar"],f=["min","max","mid","auto"];N.exports={hasColorscale:function(q,
t,w){q=t?l.nestedProperty(q,t).get()||{}:q;w=q[w||"color"];t=!1;if(l.isArrayOrTypedArray(w))for(var x=0;x<w.length;x++)if(r(w[x])){t=!0;break}return l.isPlainObject(q)&&(t||!0===q.showscale||r(q.cmin)&&r(q.cmax)||d(q.colorscale)||l.isPlainObject(q.colorbar))},extractOpts:p,extractScale:n,flipScale:k,makeColorScaleFunc:m,makeColorScaleFuncFromTrace:function(q,t){return m(n(q),t)}}},{"../../lib":803,"../color":666,"./scales":681,"@plotly/d3":58,"fast-isnumeric":249,tinycolor2:598}],678:[function(b,
N,G){G=b("./scales");var p=b("./helpers");N.exports={moduleType:"component",name:"colorscale",attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyLayoutDefaults:b("./layout_defaults"),handleDefaults:b("./defaults"),crossTraceDefaults:b("./cross_trace_defaults"),calc:b("./calc"),scales:G.scales,defaultScale:G.defaultScale,getScale:G.get,isValidScale:G.isValid,hasColorscale:p.hasColorscale,extractOpts:p.extractOpts,extractScale:p.extractScale,flipScale:p.flipScale,makeColorScaleFunc:p.makeColorScaleFunc,
makeColorScaleFuncFromTrace:p.makeColorScaleFuncFromTrace}},{"./attributes":673,"./calc":674,"./cross_trace_defaults":675,"./defaults":676,"./helpers":677,"./layout_attributes":679,"./layout_defaults":680,"./scales":681}],679:[function(b,N,G){G=b("../../lib/extend").extendFlat;var p=b("./attributes");b=b("./scales").scales;N.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:b.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:b.Blues,editType:"calc"},
diverging:{valType:"colorscale",dflt:b.RdBu,editType:"calc"}},coloraxis:G({_isSubplotObj:!0,editType:"calc"},p("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":793,"./attributes":673,"./scales":681}],680:[function(b,N,G){var p=b("../../lib"),n=b("../../plot_api/plot_template"),k=b("./layout_attributes"),m=b("./defaults");N.exports=function(a,g){function h(q,t){return p.coerce(d,e,k.coloraxis,q,t)}p.coerce(a,g,k,"colorscale.sequential",void 0);
p.coerce(a,g,k,"colorscale.sequentialminus",void 0);p.coerce(a,g,k,"colorscale.diverging",void 0);var r=g._colorAxes,l;for(l in r){var c=r[l];if(c[0]){var d=a[l]||{};var e=n.newContainer(g,l,"coloraxis");e._name=l;m(d,e,g,h,{prefix:"",cLetter:"c"})}else{for(var f=0;f<c[2].length;f++)c[2][f]();delete g._colorAxes[l]}}}},{"../../lib":803,"../../plot_api/plot_template":843,"./defaults":676,"./layout_attributes":679}],681:[function(b,N,G){function p(a){var g=0;if(!Array.isArray(a)||2>a.length||!a[0]||
!a[a.length-1]||0!==+a[0][0]||1!==+a[a.length-1][0])return!1;for(var h=0;h<a.length;h++){var r=a[h];if(2!==r.length||+r[0]<g||!n(r[1]).isValid())return!1;g=+r[0]}return!0}var n=b("tinycolor2"),k={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],
[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],
[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],
[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,
"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],
Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,
"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},m=k.RdBu;N.exports=
{scales:k,defaultScale:m,get:function(a,g){function h(){try{a=k[a]||JSON.parse(a)}catch(r){a=g}}g||(g=m);if(!a)return g;"string"===typeof a&&(h(),"string"===typeof a&&h());return p(a)?a:g},isValid:function(a){return void 0!==k[a]?!0:p(a)}}},{tinycolor2:598}],682:[function(b,N,G){N.exports=function(p,n,k,m,a){p=(p-k)/(m-k);n=p+n/(m-k);k=(p+n)/2;return"left"===a||"bottom"===a?p:"center"===a||"middle"===a?k:"right"===a||"top"===a?n:p<2/3-k?p:n>4/3-k?n:k}},{}],683:[function(b,N,G){var p=b("../../lib"),
n=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];N.exports=function(k,m,a,g){k="left"===a?0:"center"===a?1:"right"===a?2:p.constrain(Math.floor(3*k),0,2);m="bottom"===g?0:"middle"===g?1:"top"===g?2:p.constrain(Math.floor(3*m),0,2);return n[m][k]}},{"../../lib":803}],684:[function(b,N,G){G.selectMode=function(p){return"lasso"===p||"select"===p};G.drawMode=function(p){return"drawclosedpath"===p||"drawopenpath"===p||"drawline"===p||"drawrect"===
p||"drawcircle"===p};G.openMode=function(p){return"drawline"===p||"drawopenpath"===p};G.rectMode=function(p){return"select"===p||"drawline"===p||"drawrect"===p||"drawcircle"===p};G.freeMode=function(p){return"lasso"===p||"drawclosedpath"===p||"drawopenpath"===p};G.selectingOrDrawing=function(p){return G.freeMode(p)||G.rectMode(p)}},{}],685:[function(b,N,G){function p(){var l=document.createElement("div");l.className="dragcover";var c=l.style;c.position="fixed";c.left=0;c.right=0;c.top=0;c.bottom=
0;c.zIndex=999999999;c.background="none";document.body.appendChild(l);return l}function n(l){return k(l.changedTouches?l.changedTouches[0]:l,document.body)}var k=b("mouse-event-offset"),m=b("has-hover"),a=b("has-passive-events"),g=b("../../lib").removeElement,h=b("../../plots/cartesian/constants"),r=N.exports={};r.align=b("./align");r.getCursor=b("./cursor");b=b("./unhover");r.unhover=b.wrapped;r.unhoverRaw=b.raw;r.init=function(l){function c(K,O,I){Math.abs(K)<I&&(K=0);Math.abs(O)<I&&(O=0);return[K,
O]}function d(K){q._dragged=!1;q._dragging=!0;var O=n(K);z=O[0];B=O[1];y=K.target;v=K;F=2===K.buttons||K.ctrlKey;"undefined"===typeof K.clientX&&"undefined"===typeof K.clientY&&(K.clientX=z,K.clientY=B);A=(new Date).getTime();A-q._mouseDownTime<w?t+=1:(t=1,q._mouseDownTime=A);l.prepFn&&l.prepFn(K,z,B);m&&!F?(C=p(),C.style.cursor=window.getComputedStyle(x).cursor):m||(C=document,D=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(x).cursor);
document.addEventListener("mouseup",f);document.addEventListener("touchend",f);!1!==l.dragmode&&(K.preventDefault(),document.addEventListener("mousemove",e),document.addEventListener("touchmove",e,{passive:!1}))}function e(K){K.preventDefault();var O=n(K),I=J(O[0]-z,O[1]-B,l.minDrag||h.MINDRAG);O=I[0];I=I[1];if(O||I)q._dragged=!0,r.unhover(q,K);q._dragged&&l.moveFn&&!F&&(q._dragdata={element:x,dx:O,dy:I},l.moveFn(O,I))}function f(K){delete q._dragdata;!1!==l.dragmode&&(K.preventDefault(),document.removeEventListener("mousemove",
e),document.removeEventListener("touchmove",e));document.removeEventListener("mouseup",f);document.removeEventListener("touchend",f);m?g(C):D&&(C.documentElement.style.cursor=D,D=null);if(q._dragging){q._dragging=!1;(new Date).getTime()-q._mouseDownTime>w&&(t=Math.max(t-1,1));if(q._dragged)l.doneFn&&l.doneFn();else if(l.clickFn&&l.clickFn(t,v),!F){try{var O=new MouseEvent("click",K)}catch(L){var I=n(K);O=document.createEvent("MouseEvents");O.initMouseEvent("click",K.bubbles,K.cancelable,K.view,K.detail,
K.screenX,K.screenY,I[0],I[1],K.ctrlKey,K.altKey,K.shiftKey,K.metaKey,K.button,K.relatedTarget)}y.dispatchEvent(O)}q._dragging=!1}q._dragged=!1}var q=l.gd,t=1,w=q._context.doubleClickDelay,x=l.element,z,B,A,D,C,v,y,F;q._mouseDownTime||(q._mouseDownTime=0);x.style.pointerEvents="all";x.onmousedown=d;a?(x._ontouchstart&&x.removeEventListener("touchstart",x._ontouchstart),x._ontouchstart=d,x.addEventListener("touchstart",d,{passive:!1})):x.ontouchstart=d;var J=l.clampFn||c};r.coverSlip=p},{"../../lib":803,
"../../plots/cartesian/constants":861,"./align":682,"./cursor":683,"./unhover":686,"has-hover":443,"has-passive-events":444,"mouse-event-offset":471}],686:[function(b,N,G){var p=b("../../lib/events"),n=b("../../lib/throttle"),k=b("../../lib/dom").getGraphDiv,m=b("../fx/constants"),a=N.exports={};a.wrapped=function(g,h,r){g=k(g);g._fullLayout&&n.clear(g._fullLayout._uid+m.HOVERID);a.raw(g,h,r)};a.raw=function(g,h){var r=g._fullLayout,l=g._hoverdata;h||(h={});if(!h.target||g._dragged||!1!==p.triggerHandler(g,
"plotly_beforehover",h))r._hoverlayer.selectAll("g").remove(),r._hoverlayer.selectAll("line").remove(),r._hoverlayer.selectAll("circle").remove(),g._hoverdata=void 0,h.target&&l&&g.emit("plotly_unhover",{event:h,points:l})}},{"../../lib/dom":791,"../../lib/events":792,"../../lib/throttle":830,"../fx/constants":700}],687:[function(b,N,G){G.dash={valType:"string",values:"solid dot dash longdash dashdot longdashdot".split(" "),dflt:"solid",editType:"style"};G.pattern={shape:{valType:"enumerated",values:" / \\ x - | + .".split(" "),
dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},{}],688:[function(b,N,G){function p(Q,Z){return C.symbolFuncs[Q%
100](Z)+(200<=Q?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}function n(Q,Z,ca,W){var T=h.select(Q.node().parentNode),U=-1!==Z.indexOf("top")?"top":-1!==Z.indexOf("bottom")?"bottom":"middle";Z=-1!==Z.indexOf("left")?"end":-1!==Z.indexOf("right")?"start":"middle";var ha=W?W/.8+1:0,Y=(t.lineCount(Q)-1)*x+1;W=K[Z]*ha;ca=.75*ca+K[U]*ha+(K[U]-1)*Y*ca/2;Q.attr("text-anchor",Z);T.attr("transform",q(W,ca))}function k(Q,Z){Q=Q.ts||Z.textfont.size;return l(Q)&&0<Q?Q:0}function m(Q,Z,ca,W){var T=Q[0]-Z[0],U=Q[1]-Z[1],
ha=ca[0]-Z[0],Y=ca[1]-Z[1];ca=Math.pow(T*T+U*U,.25);Q=Math.pow(ha*ha+Y*Y,.25);T=(Q*Q*T-ca*ca*ha)*W;W*=Q*Q*U-ca*ca*Y;U=3*Q*(ca+Q);ca=3*ca*(ca+Q);return[[h.round(Z[0]+(U&&T/U),2),h.round(Z[1]+(U&&W/U),2)],[h.round(Z[0]-(ca&&T/ca),2),h.round(Z[1]-(ca&&W/ca),2)]]}function a(Q){var Z=Q.getAttribute("data-unformatted");if(null!==Z)return Z+Q.getAttribute("data-math")+Q.getAttribute("text-anchor")+Q.getAttribute("style")}function g(Q,Z){if(!Q)return null;Z=Z._context;return(Z=Z._exportedPlot?"":Z._baseUrl||
"")?"url('"+Z+"#"+Q+"')":"url(#"+Q+")"}var h=b("@plotly/d3"),r=b("../../lib");G=r.numberFormat;var l=b("fast-isnumeric"),c=b("tinycolor2"),d=b("../../registry"),e=b("../color"),f=b("../colorscale"),q=r.strTranslate,t=b("../../lib/svg_text_utils"),w=b("../../constants/xmlns_namespaces"),x=b("../../constants/alignment").LINE_SPACING,z=b("../../constants/interactions").DESELECTDIM,B=b("../../traces/scatter/subtypes"),A=b("../../traces/scatter/make_bubble_size_func"),D=b("../../components/fx/helpers").appendArrayPointValue,
C=N.exports={};C.font=function(Q,Z,ca,W){r.isPlainObject(Z)&&(W=Z.color,ca=Z.size,Z=Z.family);Z&&Q.style("font-family",Z);ca+1&&Q.style("font-size",ca+"px");W&&Q.call(e.fill,W)};C.setPosition=function(Q,Z,ca){Q.attr("x",Z).attr("y",ca)};C.setSize=function(Q,Z,ca){Q.attr("width",Z).attr("height",ca)};C.setRect=function(Q,Z,ca,W,T){Q.call(C.setPosition,Z,ca).call(C.setSize,W,T)};C.translatePoint=function(Q,Z,ca,W){ca=ca.c2p(Q.x);Q=W.c2p(Q.y);if(l(ca)&&l(Q)&&Z.node())"text"===Z.node().nodeName?Z.attr("x",
ca).attr("y",Q):Z.attr("transform",q(ca,Q));else return!1;return!0};C.translatePoints=function(Q,Z,ca){Q.each(function(W){var T=h.select(this);C.translatePoint(W,T,Z,ca)})};C.hideOutsideRangePoint=function(Q,Z,ca,W,T,U){Z.attr("display",ca.isPtWithinRange(Q,T)&&W.isPtWithinRange(Q,U)?null:"none")};C.hideOutsideRangePoints=function(Q,Z){if(Z._hasClipOnAxisFalse){var ca=Z.xaxis,W=Z.yaxis;Q.each(function(T){T=T[0].trace;var U=T.xcalendar,ha=T.ycalendar;T=d.traceIs(T,"bar-like")?".bartext":".point,.textpoint";
Q.selectAll(T).each(function(Y){C.hideOutsideRangePoint(Y,h.select(this),ca,W,U,ha)})})}};C.crispRound=function(Q,Z,ca){return Z&&l(Z)?Q._context.staticPlot?Z:1>Z?1:Math.round(Z):ca||0};C.singleLineStyle=function(Q,Z,ca,W,T){Z.style("fill","none");Q=(((Q||[])[0]||{}).trace||{}).line||{};ca=ca||Q.width||0;T=T||Q.dash||"";e.stroke(Z,W||Q.color);C.dashLine(Z,T,ca)};C.lineGroupStyle=function(Q,Z,ca,W){Q.style("fill","none").each(function(T){T=(((T||[])[0]||{}).trace||{}).line||{};var U=Z||T.width||0,
ha=W||T.dash||"";h.select(this).call(e.stroke,ca||T.color).call(C.dashLine,ha,U)})};C.dashLine=function(Q,Z,ca){ca=+ca||0;Z=C.dashStyle(Z,ca);Q.style({"stroke-dasharray":Z,"stroke-width":ca+"px"})};C.dashStyle=function(Q,Z){Z=Math.max(+Z||1,3);"solid"===Q?Q="":"dot"===Q?Q=Z+"px,"+Z+"px":"dash"===Q?Q=3*Z+"px,"+3*Z+"px":"longdash"===Q?Q=5*Z+"px,"+5*Z+"px":"dashdot"===Q?Q=3*Z+"px,"+Z+"px,"+Z+"px,"+Z+"px":"longdashdot"===Q&&(Q=5*Z+"px,"+2*Z+"px,"+Z+"px,"+2*Z+"px");return Q};C.singleFillStyle=function(Q){var Z=
(((h.select(Q.node()).data()[0]||[])[0]||{}).trace||{}).fillcolor;Z&&Q.call(e.fill,Z)};C.fillGroupStyle=function(Q){Q.style("stroke-width",0).each(function(Z){var ca=h.select(this);Z[0].trace&&ca.call(e.fill,Z[0].trace.fillcolor)})};var v=b("./symbol_defs");C.symbolNames=[];C.symbolFuncs=[];C.symbolNeedLines={};C.symbolNoDot={};C.symbolNoFill={};C.symbolList=[];Object.keys(v).forEach(function(Q){var Z=v[Q],ca=Z.n;C.symbolList.push(ca,String(ca),Q,ca+100,String(ca+100),Q+"-open");C.symbolNames[ca]=
Q;C.symbolFuncs[ca]=Z.f;Z.needLine&&(C.symbolNeedLines[ca]=!0);Z.noDot?C.symbolNoDot[ca]=!0:C.symbolList.push(ca+200,String(ca+200),Q+"-dot",ca+300,String(ca+300),Q+"-open-dot");Z.noFill&&(C.symbolNoFill[ca]=!0)});var y=C.symbolNames.length;C.symbolNumber=function(Q){if(l(Q))Q=+Q;else if("string"===typeof Q){var Z=0;0<Q.indexOf("-open")&&(Z=100,Q=Q.replace("-open",""));0<Q.indexOf("-dot")&&(Z+=200,Q=Q.replace("-dot",""));Q=C.symbolNames.indexOf(Q);0<=Q&&(Q+=Z)}return Q%100>=y||400<=Q?0:Math.floor(Math.max(Q,
0))};b={x1:1,x2:0,y1:0,y2:0};N={x1:0,x2:0,y1:1,y2:0};var F=G("~f"),J={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:b},horizontalreversed:{node:"linearGradient",attrs:b,reversed:!0},vertical:{node:"linearGradient",attrs:N},verticalreversed:{node:"linearGradient",attrs:N,reversed:!0}};C.gradient=function(Q,Z,ca,W,T,U){for(var ha=T.length,Y=J[W],ba=Array(ha),ja=0;ja<ha;ja++)Y.reversed?ba[ha-1-ja]=[F(100*(1-T[ja][0])),T[ja][1]]:
ba[ja]=[F(100*T[ja][0]),T[ja][1]];T=Z._fullLayout;var ma="g"+T._uid+"-"+ca;ca=T._defs.select(".gradients").selectAll("#"+ma).data([W+ba.join(";")],r.identity);ca.exit().remove();ca.enter().append(Y.node).each(function(){var ia=h.select(this);Y.attrs&&ia.attr(Y.attrs);ia.attr("id",ma);ia=ia.selectAll("stop").data(ba);ia.exit().remove();ia.enter().append("stop");ia.each(function(oa){var xa=c(oa[1]);h.select(this).attr({offset:oa[0]+"%","stop-color":e.tinyRGB(xa),"stop-opacity":xa.getAlpha()})})});Q.style(U,
g(ma,Z)).style(U+"-opacity",null);Q="."+h.select(Q.node().parentNode).attr("class").replace(/\s/g,".")+"\x3e."+Q.attr("class").replace(/\s/g,".");T._gradientUrlQueryParts[Q]=1};C.pattern=function(Q,Z,ca,W,T,U,ha,Y,ba,ja,ma,ia){var oa="legend"===Z;Y&&("overlay"===ba?(ja=Y,ma=e.contrast(ja)):(ja=void 0,ma=Y));Z=ca._fullLayout;var xa="p"+Z._uid+"-"+W;W=function(qa,ta,za,Ia,Xa){return Ia+(Xa-Ia)*(qa-ta)/(za-ta)};var ra={};switch(T){case "/":var la=U*Math.sqrt(2);var ka=U*Math.sqrt(2);var na="path";ra=
{d:"M-"+la/4+","+ka/4+"l"+la/2+",-"+ka/2+"M0,"+ka+"L"+la+",0M"+la/4*3+","+ka/4*5+"l"+la/2+",-"+ka/2,opacity:ia,stroke:ma,"stroke-width":ha*U+"px"};break;case "\\":la=U*Math.sqrt(2);ka=U*Math.sqrt(2);na="path";ra={d:"M"+la/4*3+",-"+ka/4+"l"+la/2+","+ka/2+"M0,0L"+la+","+ka+"M-"+la/4+","+ka/4*3+"l"+la/2+","+ka/2,opacity:ia,stroke:ma,"stroke-width":ha*U+"px"};break;case "x":la=U*Math.sqrt(2);ka=U*Math.sqrt(2);W=U-U*Math.sqrt(1-ha);na="path";ra={d:"M-"+la/4+","+ka/4+"l"+la/2+",-"+ka/2+"M0,"+ka+"L"+la+
",0M"+la/4*3+","+ka/4*5+"l"+la/2+",-"+ka/2+"M"+la/4*3+",-"+ka/4+"l"+la/2+","+ka/2+"M0,0L"+la+","+ka+"M-"+la/4+","+ka/4*3+"l"+la/2+","+ka/2,opacity:ia,stroke:ma,"stroke-width":W+"px"};break;case "|":ka=la=U;na=na="path";ra={d:"M"+la/2+",0L"+la/2+","+ka,opacity:ia,stroke:ma,"stroke-width":ha*U+"px"};break;case "-":ka=la=U;na=na="path";ra={d:"M0,"+ka/2+"L"+la+","+ka/2,opacity:ia,stroke:ma,"stroke-width":ha*U+"px"};break;case "+":ka=la=U;na="path";W=U-U*Math.sqrt(1-ha);na="path";ra={d:"M"+la/2+",0L"+
la/2+","+ka+"M0,"+ka/2+"L"+la+","+ka/2,opacity:ia,stroke:ma,"stroke-width":W+"px"};break;case ".":ka=la=U,W=ha<Math.PI/4?Math.sqrt(ha*U*U/Math.PI):W(ha,Math.PI/4,1,U/2,U/Math.sqrt(2)),na="circle",ra={cx:la/2,cy:ka/2,r:W,opacity:ia,fill:ma}}T=[T||"noSh",ja||"noBg",ma||"noFg",U,ha].join(";");T=Z._defs.select(".patterns").selectAll("#"+xa).data([T],r.identity);T.exit().remove();T.enter().append("pattern").each(function(){var qa=h.select(this);qa.attr({id:xa,width:la+"px",height:ka+"px",patternUnits:"userSpaceOnUse",
patternTransform:oa?"scale(0.8)":""});if(ja){var ta=qa.selectAll("rect").data([0]);ta.exit().remove();ta.enter().append("rect").attr({width:la+"px",height:ka+"px",fill:ja})}qa=qa.selectAll(na).data([0]);qa.exit().remove();qa.enter().append(na).attr(ra)});Q.style("fill",g(xa,ca)).style("fill-opacity",null);Q.classed("pattern_filled",!0);Q="."+h.select(Q.node().parentNode).attr("class").replace(/\s/g,".")+"\x3e.pattern_filled";Z._patternUrlQueryParts[Q]=1};C.initGradients=function(Q){Q=Q._fullLayout;
r.ensureSingle(Q._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove();Q._gradientUrlQueryParts={}};C.initPatterns=function(Q){Q=Q._fullLayout;r.ensureSingle(Q._defs,"g","patterns").selectAll("pattern").remove();Q._patternUrlQueryParts={}};C.getPatternAttr=function(Q,Z,ca){return Q&&r.isArrayOrTypedArray(Q)?Z<Q.length?Q[Z]:ca:Q};C.pointStyle=function(Q,Z,ca){if(Q.size()){var W=C.makePointStyleFns(Z);Q.each(function(T){C.singlePointStyle(T,h.select(this),Z,W,ca)})}};C.singlePointStyle=
function(Q,Z,ca,W,T){var U=ca.marker,ha=U.line;Z.style("opacity",W.selectedOpacityFn?W.selectedOpacityFn(Q):void 0===Q.mo?U.opacity:Q.mo);if(W.ms2mrc){var Y="various"===Q.ms||"various"===U.size?3:W.ms2mrc(Q.ms);Q.mrc=Y;W.selectedSizeFn&&(Y=Q.mrc=W.selectedSizeFn(Q));var ba=C.symbolNumber(Q.mx||U.symbol)||0;Q.om=100<=ba%200;Z.attr("d",p(ba,Y))}ba=!1;if(Q.so){Y=ha.outlierwidth;ha=ha.outliercolor;var ja=U.outliercolor}else Y=(ha||{}).width,Y=(Q.mlw+1||Y+1||(Q.trace?(Q.trace.marker.line||{}).width:0)+
1)-1||0,ha="mlc"in Q?Q.mlcc=W.lineScale(Q.mlc):r.isArrayOrTypedArray(ha.color)?e.defaultLine:ha.color,r.isArrayOrTypedArray(U.color)&&(ba=!0),ja="mc"in Q?Q.mcc=W.markerScale(Q.mc):U.color||"rgba(0,0,0,0)",W.selectedColorFn&&(ja=W.selectedColorFn(Q));if(Q.om)Z.call(e.stroke,ja).style({"stroke-width":(Y||1)+"px",fill:"none"});else{Z.style("stroke-width",(Q.isBlank?0:Y)+"px");var ma=U.gradient,ia=Q.mgt;ia?ba=!0:ia=ma&&ma.type;r.isArrayOrTypedArray(ia)&&(ia=ia[0],J[ia]||(ia=0));W=(U=U.pattern)&&C.getPatternAttr(U.shape,
Q.i,"");if(ia&&"none"!==ia)(U=Q.mgc)?ba=!0:U=ma.color,ca=ca.uid,ba&&(ca+="-"+Q.i),C.gradient(Z,T,ca,ia,[[0,U],[1,ja]],"fill");else if(W){ba=C.getPatternAttr(U.bgcolor,Q.i,null);ja=C.getPatternAttr(U.fgcolor,Q.i,null);ia=U.fgopacity;ma=C.getPatternAttr(U.size,Q.i,8);var oa=C.getPatternAttr(U.solidity,Q.i,.3),xa=Q.mcc||r.isArrayOrTypedArray(U.shape)||r.isArrayOrTypedArray(U.bgcolor)||r.isArrayOrTypedArray(U.size)||r.isArrayOrTypedArray(U.solidity);ca=ca.uid;xa&&(ca+="-"+Q.i);C.pattern(Z,"point",T,ca,
W,ma,oa,Q.mcc,U.fillmode,ba,ja,ia)}else e.fill(Z,ja);Y&&e.stroke(Z,ha)}};C.makePointStyleFns=function(Q){var Z={},ca=Q.marker;Z.markerScale=C.tryColorscale(ca,"");Z.lineScale=C.tryColorscale(ca,"line");d.traceIs(Q,"symbols")&&(Z.ms2mrc=B.isBubble(Q)?A(Q):function(){return(ca.size||6)/2});Q.selectedpoints&&r.extendFlat(Z,C.makeSelectedPointStyleFns(Q));return Z};C.makeSelectedPointStyleFns=function(Q){var Z={},ca=Q.marker||{},W=(Q.selected||{}).marker||{},T=(Q.unselected||{}).marker||{},U=W.opacity,
ha=T.opacity,Y=void 0!==U,ba=void 0!==ha;if(r.isArrayOrTypedArray(ca.opacity)||Y||ba)Z.selectedOpacityFn=function(na){var qa=void 0===na.mo?ca.opacity:na.mo;return na.selected?Y?U:qa:ba?ha:z*qa};var ja=ca.color,ma=W.color,ia=T.color;if(ma||ia)Z.selectedColorFn=function(na){var qa=na.mcc||ja;return na.selected?ma||qa:ia||qa};var oa=ca.size,xa=W.size,ra=T.size,la=void 0!==xa,ka=void 0!==ra;d.traceIs(Q,"symbols")&&(la||ka)&&(Z.selectedSizeFn=function(na){var qa=na.mrc||oa/2;return na.selected?la?xa/
2:qa:ka?ra/2:qa});return Z};C.makeSelectedTextStyleFns=function(Q){var Z={},ca=(Q.textfont||{}).color,W=((Q.selected||{}).textfont||{}).color,T=((Q.unselected||{}).textfont||{}).color;Z.selectedTextColorFn=function(U){var ha=U.tc||ca;return U.selected?W||ha:T?T:W?ha:e.addOpacity(ha,z)};return Z};C.selectedPointStyle=function(Q,Z){if(Q.size()&&Z.selectedpoints){var ca=C.makeSelectedPointStyleFns(Z),W=Z.marker||{},T=[];ca.selectedOpacityFn&&T.push(function(U,ha){U.style("opacity",ca.selectedOpacityFn(ha))});
ca.selectedColorFn&&T.push(function(U,ha){e.fill(U,ca.selectedColorFn(ha))});ca.selectedSizeFn&&T.push(function(U,ha){var Y=ha.mx||W.symbol||0,ba=ca.selectedSizeFn(ha);U.attr("d",p(C.symbolNumber(Y),ba));ha.mrc2=ba});T.length&&Q.each(function(U){for(var ha=h.select(this),Y=0;Y<T.length;Y++)T[Y](ha,U)})}};C.tryColorscale=function(Q,Z){if(Q=Z?r.nestedProperty(Q,Z).get():Q)if(Z=Q.color,(Q.colorscale||Q._colorAx)&&r.isArrayOrTypedArray(Z))return f.makeColorScaleFuncFromTrace(Q);return r.identity};var K=
{start:1,end:-1,middle:0,bottom:1,top:-1};C.textPointStyle=function(Q,Z,ca){if(Q.size()){if(Z.selectedpoints)var W=C.makeSelectedTextStyleFns(Z).selectedTextColorFn;var T=Z.texttemplate,U=ca._fullLayout;Q.each(function(ha){var Y=h.select(this),ba=T?r.extractOption(ha,Z,"txt","texttemplate"):r.extractOption(ha,Z,"tx","text");if(ba||0===ba){if(T){var ja=Z._module.formatLabels;ja=ja?ja(ha,Z,U):{};var ma={};D(ma,Z,ha.i);ba=r.texttemplateString(ba,ja,U._d3locale,ma,ha,Z._meta||{})}ja=ha.tp||Z.textposition;
ma=k(ha,Z);var ia=W?W(ha):ha.tc||Z.textfont.color;Y.call(C.font,ha.tf||Z.textfont.family,ma,ia).text(ba).call(t.convertToTspans,ca).call(n,ja,ma,ha.mrc)}else Y.remove()})}};C.selectedTextStyle=function(Q,Z){if(Q.size()&&Z.selectedpoints){var ca=C.makeSelectedTextStyleFns(Z);Q.each(function(W){var T=h.select(this),U=ca.selectedTextColorFn(W),ha=W.tp||Z.textposition,Y=k(W,Z);e.fill(T,U);n(T,ha,Y,W.mrc2||W.mrc)})}};C.smoothopen=function(Q,Z){if(3>Q.length)return"M"+Q.join("L");var ca="M"+Q[0],W=[],T;
for(T=1;T<Q.length-1;T++)W.push(m(Q[T-1],Q[T],Q[T+1],Z));ca+="Q"+W[0][0]+" "+Q[1];for(T=2;T<Q.length-1;T++)ca+="C"+W[T-2][1]+" "+W[T-1][0]+" "+Q[T];return ca+="Q"+W[Q.length-3][1]+" "+Q[Q.length-1]};C.smoothclosed=function(Q,Z){if(3>Q.length)return"M"+Q.join("L")+"Z";var ca="M"+Q[0],W=Q.length-1,T=[m(Q[W],Q[0],Q[1],Z)],U;for(U=1;U<W;U++)T.push(m(Q[U-1],Q[U],Q[U+1],Z));T.push(m(Q[W-1],Q[W],Q[0],Z));for(U=1;U<=W;U++)ca+="C"+T[U-1][1]+" "+T[U][0]+" "+Q[U];return ca+="C"+T[W][1]+" "+T[0][0]+" "+Q[0]+
"Z"};var O={hv:function(Q,Z){return"H"+h.round(Z[0],2)+"V"+h.round(Z[1],2)},vh:function(Q,Z){return"V"+h.round(Z[1],2)+"H"+h.round(Z[0],2)},hvh:function(Q,Z){return"H"+h.round((Q[0]+Z[0])/2,2)+"V"+h.round(Z[1],2)+"H"+h.round(Z[0],2)},vhv:function(Q,Z){return"V"+h.round((Q[1]+Z[1])/2,2)+"H"+h.round(Z[0],2)+"V"+h.round(Z[1],2)}},I=function(Q,Z){return"L"+h.round(Z[0],2)+","+h.round(Z[1],2)};C.steps=function(Q){var Z=O[Q]||I;return function(ca){for(var W="M"+h.round(ca[0][0],2)+","+h.round(ca[0][1],
2),T=1;T<ca.length;T++)W+=Z(ca[T-1],ca[T]);return W}};C.makeTester=function(){var Q=r.ensureSingleById(h.select("body"),"svg","js-plotly-tester",function(ca){ca.attr(w.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),Z=r.ensureSingle(Q,"path","js-reference-point",function(ca){ca.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});C.tester=Q;C.testref=Z};C.savedBBoxes={};var L=0;C.bBox=function(Q,Z,ca){ca||(ca=a(Q));var W;
if(ca){if(W=C.savedBBoxes[ca])return r.extendFlat({},W)}else if(1===Q.childNodes.length){var T=Q.childNodes[0];if(ca=a(T)){W=+T.getAttribute("x")||0;var U=+T.getAttribute("y")||0,ha=T.getAttribute("transform");if(!ha)return ca=C.bBox(T,!1,ca),W&&(ca.left+=W,ca.right+=W),U&&(ca.top+=U,ca.bottom+=U),ca;ca+="~"+W+"~"+U+"~"+ha;if(W=C.savedBBoxes[ca])return r.extendFlat({},W)}}if(!Z){var Y=C.tester.node();Q=Q.cloneNode(!0);Y.appendChild(Q)}h.select(Q).attr("transform",null).call(t.positionText,0,0);W=
Q.getBoundingClientRect();U=C.testref.node().getBoundingClientRect();Z||Y.removeChild(Q);Z={height:W.height,width:W.width,left:W.left-U.left,top:W.top-U.top,right:W.right-U.left,bottom:W.bottom-U.top};1E4<=L&&(C.savedBBoxes={},L=0);ca&&(C.savedBBoxes[ca]=Z);L++;return r.extendFlat({},Z)};C.setClipUrl=function(Q,Z,ca){Q.attr("clip-path",g(Z,ca))};C.getTranslate=function(Q){Q=(Q[Q.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(Z,
ca,W){return[ca,W].join(" ")}).split(" ");return{x:+Q[0]||0,y:+Q[1]||0}};C.setTranslate=function(Q,Z,ca){var W=Q.attr?"attr":"setAttribute",T=Q[Q.attr?"attr":"getAttribute"]("transform")||"";Z=Z||0;ca=ca||0;T=T.replace(/(\btranslate\(.*?\);?)/,"").trim();T+=q(Z,ca);T=T.trim();Q[W]("transform",T);return T};C.getScale=function(Q){Q=(Q[Q.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(Z,ca,W){return[ca,W].join(" ")}).split(" ");return{x:+Q[0]||
1,y:+Q[1]||1}};C.setScale=function(Q,Z,ca){var W=Q.attr?"attr":"setAttribute",T=Q[Q.attr?"attr":"getAttribute"]("transform")||"";Z=Z||1;ca=ca||1;T=T.replace(/(\bscale\(.*?\);?)/,"").trim();T=(T+("scale("+Z+","+ca+")")).trim();Q[W]("transform",T);return T};var H=/\s*sc.*/;C.setPointGroupScale=function(Q,Z,ca){Z=Z||1;ca=ca||1;if(Q){var W=1===Z&&1===ca?"":"scale("+Z+","+ca+")";Q.each(function(){var T=(this.getAttribute("transform")||"").replace(H,"");T+=W;T=T.trim();this.setAttribute("transform",T)})}};
var M=/translate\([^)]*\)\s*$/;C.setTextPointsScale=function(Q,Z,ca){Q&&Q.each(function(){var W=h.select(this),T=W.select("text");if(T.node()){var U=parseFloat(T.attr("x")||0);var ha=parseFloat(T.attr("y")||0);T=(W.attr("transform")||"").match(M);U=1===Z&&1===ca?[]:[q(U,ha),"scale("+Z+","+ca+")",q(-U,-ha)];T&&U.push(T);W.attr("transform",U.join(""))}})}},{"../../components/fx/helpers":702,"../../constants/alignment":771,"../../constants/interactions":778,"../../constants/xmlns_namespaces":780,"../../lib":803,
"../../lib/svg_text_utils":829,"../../registry":931,"../../traces/scatter/make_bubble_size_func":1235,"../../traces/scatter/subtypes":1243,"../color":666,"../colorscale":678,"./symbol_defs":689,"@plotly/d3":58,"fast-isnumeric":249,tinycolor2:598}],689:[function(b,N,G){var p=b("@plotly/d3");N.exports={circle:{n:0,f:function(n){n=p.round(n,2);return"M"+n+",0A"+n+","+n+" 0 1,1 0,-"+n+"A"+n+","+n+" 0 0,1 "+n+",0Z"}},square:{n:1,f:function(n){n=p.round(n,2);return"M"+n+","+n+"H-"+n+"V-"+n+"H"+n+"Z"}},
diamond:{n:2,f:function(n){n=p.round(1.3*n,2);return"M"+n+",0L0,"+n+"L-"+n+",0L0,-"+n+"Z"}},cross:{n:3,f:function(n){var k=p.round(.4*n,2);n=p.round(1.2*n,2);return"M"+n+","+k+"H"+k+"V"+n+"H-"+k+"V"+k+"H-"+n+"V-"+k+"H-"+k+"V-"+n+"H"+k+"V-"+k+"H"+n+"Z"}},x:{n:4,f:function(n){n=p.round(.8*n/Math.sqrt(2),2);var k="l"+n+","+n,m="l"+n+",-"+n,a="l-"+n+",-"+n,g="l-"+n+","+n;return"M0,"+n+k+m+a+m+a+g+a+g+k+g+k+"Z"}},"triangle-up":{n:5,f:function(n){var k=p.round(2*n/Math.sqrt(3),2),m=p.round(n/2,2);n=p.round(n,
2);return"M-"+k+","+m+"H"+k+"L0,-"+n+"Z"}},"triangle-down":{n:6,f:function(n){var k=p.round(2*n/Math.sqrt(3),2),m=p.round(n/2,2);n=p.round(n,2);return"M-"+k+",-"+m+"H"+k+"L0,"+n+"Z"}},"triangle-left":{n:7,f:function(n){var k=p.round(2*n/Math.sqrt(3),2),m=p.round(n/2,2);n=p.round(n,2);return"M"+m+",-"+k+"V"+k+"L-"+n+",0Z"}},"triangle-right":{n:8,f:function(n){var k=p.round(2*n/Math.sqrt(3),2),m=p.round(n/2,2);n=p.round(n,2);return"M-"+m+",-"+k+"V"+k+"L"+n+",0Z"}},"triangle-ne":{n:9,f:function(n){var k=
p.round(.6*n,2);n=p.round(1.2*n,2);return"M-"+n+",-"+k+"H"+k+"V"+n+"Z"}},"triangle-se":{n:10,f:function(n){var k=p.round(.6*n,2);n=p.round(1.2*n,2);return"M"+k+",-"+n+"V"+k+"H-"+n+"Z"}},"triangle-sw":{n:11,f:function(n){var k=p.round(.6*n,2);n=p.round(1.2*n,2);return"M"+n+","+k+"H-"+k+"V-"+n+"Z"}},"triangle-nw":{n:12,f:function(n){var k=p.round(.6*n,2);n=p.round(1.2*n,2);return"M-"+k+","+n+"V-"+k+"H"+n+"Z"}},pentagon:{n:13,f:function(n){var k=p.round(.951*n,2),m=p.round(.588*n,2),a=p.round(-n,2),
g=p.round(-.309*n,2);n=p.round(.809*n,2);return"M"+k+","+g+"L"+m+","+n+"H-"+m+"L-"+k+","+g+"L0,"+a+"Z"}},hexagon:{n:14,f:function(n){var k=p.round(n,2),m=p.round(n/2,2);n=p.round(n*Math.sqrt(3)/2,2);return"M"+n+",-"+m+"V"+m+"L0,"+k+"L-"+n+","+m+"V-"+m+"L0,-"+k+"Z"}},hexagon2:{n:15,f:function(n){var k=p.round(n,2),m=p.round(n/2,2);n=p.round(n*Math.sqrt(3)/2,2);return"M-"+m+","+n+"H"+m+"L"+k+",0L"+m+",-"+n+"H-"+m+"L-"+k+",0Z"}},octagon:{n:16,f:function(n){var k=p.round(.924*n,2);n=p.round(.383*n,2);
return"M-"+n+",-"+k+"H"+n+"L"+k+",-"+n+"V"+n+"L"+n+","+k+"H-"+n+"L-"+k+","+n+"V-"+n+"Z"}},star:{n:17,f:function(n){var k=1.4*n;n=p.round(.225*k,2);var m=p.round(.951*k,2),a=p.round(.363*k,2),g=p.round(.588*k,2),h=p.round(-k,2),r=p.round(-.309*k,2),l=p.round(.118*k,2),c=p.round(.809*k,2);k=p.round(.382*k,2);return"M"+n+","+r+"H"+m+"L"+a+","+l+"L"+g+","+c+"L0,"+k+"L-"+g+","+c+"L-"+a+","+l+"L-"+m+","+r+"H-"+n+"L0,"+h+"Z"}},hexagram:{n:18,f:function(n){var k=p.round(.66*n,2),m=p.round(.38*n,2);n=p.round(.76*
n,2);return"M-"+n+",0l-"+m+",-"+k+"h"+n+"l"+m+",-"+k+"l"+m+","+k+"h"+n+"l-"+m+","+k+"l"+m+","+k+"h-"+n+"l-"+m+","+k+"l-"+m+",-"+k+"h-"+n+"Z"}},"star-triangle-up":{n:19,f:function(n){var k=p.round(n*Math.sqrt(3)*.8,2),m=p.round(.8*n,2),a=p.round(1.6*n,2);n=p.round(4*n,2);n="A "+n+","+n+" 0 0 1 ";return"M-"+k+","+m+n+k+","+m+n+"0,-"+a+n+"-"+k+","+m+"Z"}},"star-triangle-down":{n:20,f:function(n){var k=p.round(n*Math.sqrt(3)*.8,2),m=p.round(.8*n,2),a=p.round(1.6*n,2);n=p.round(4*n,2);n="A "+n+","+n+" 0 0 1 ";
return"M"+k+",-"+m+n+"-"+k+",-"+m+n+"0,"+a+n+k+",-"+m+"Z"}},"star-square":{n:21,f:function(n){var k=p.round(1.1*n,2);n=p.round(2*n,2);n="A "+n+","+n+" 0 0 1 ";return"M-"+k+",-"+k+n+"-"+k+","+k+n+k+","+k+n+k+",-"+k+n+"-"+k+",-"+k+"Z"}},"star-diamond":{n:22,f:function(n){var k=p.round(1.4*n,2);n=p.round(1.9*n,2);n="A "+n+","+n+" 0 0 1 ";return"M-"+k+",0"+n+"0,"+k+n+k+",0"+n+"0,-"+k+n+"-"+k+",0Z"}},"diamond-tall":{n:23,f:function(n){var k=p.round(.7*n,2);n=p.round(1.4*n,2);return"M0,"+n+"L"+k+",0L0,-"+
n+"L-"+k+",0Z"}},"diamond-wide":{n:24,f:function(n){var k=p.round(1.4*n,2);n=p.round(.7*n,2);return"M0,"+n+"L"+k+",0L0,-"+n+"L-"+k+",0Z"}},hourglass:{n:25,f:function(n){n=p.round(n,2);return"M"+n+","+n+"H-"+n+"L"+n+",-"+n+"H-"+n+"Z"},noDot:!0},bowtie:{n:26,f:function(n){n=p.round(n,2);return"M"+n+","+n+"V-"+n+"L-"+n+","+n+"V-"+n+"Z"},noDot:!0},"circle-cross":{n:27,f:function(n){n=p.round(n,2);return"M0,"+n+"V-"+n+"M"+n+",0H-"+n+"M"+n+",0A"+n+","+n+" 0 1,1 0,-"+n+"A"+n+","+n+" 0 0,1 "+n+",0Z"},needLine:!0,
noDot:!0},"circle-x":{n:28,f:function(n){var k=p.round(n,2);n=p.round(n/Math.sqrt(2),2);return"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n+"M"+k+",0A"+k+","+k+" 0 1,1 0,-"+k+"A"+k+","+k+" 0 0,1 "+k+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(n){n=p.round(n,2);return"M0,"+n+"V-"+n+"M"+n+",0H-"+n+"M"+n+","+n+"H-"+n+"V-"+n+"H"+n+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(n){n=p.round(n,2);return"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n+"M"+n+","+n+"H-"+n+
"V-"+n+"H"+n+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(n){n=p.round(1.3*n,2);return"M"+n+",0L0,"+n+"L-"+n+",0L0,-"+n+"ZM0,-"+n+"V"+n+"M-"+n+",0H"+n},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(n){var k=p.round(1.3*n,2);n=p.round(.65*n,2);return"M"+k+",0L0,"+k+"L-"+k+",0L0,-"+k+"ZM-"+n+",-"+n+"L"+n+","+n+"M-"+n+","+n+"L"+n+",-"+n},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(n){n=p.round(1.4*n,2);return"M0,"+n+"V-"+n+"M"+n+",0H-"+n},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,
f:function(n){n=p.round(n,2);return"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(n){var k=p.round(1.2*n,2);n=p.round(.85*n,2);return"M0,"+k+"V-"+k+"M"+k+",0H-"+k+"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(n){var k=p.round(n/2,2);n=p.round(n,2);return"M"+k+","+n+"V-"+n+"m-"+n+",0V"+n+"M"+n+","+k+"H-"+n+"m0,-"+n+"H"+n},needLine:!0,noFill:!0},"y-up":{n:37,f:function(n){var k=
p.round(1.2*n,2),m=p.round(1.6*n,2);n=p.round(.8*n,2);return"M-"+k+","+n+"L0,0M"+k+","+n+"L0,0M0,-"+m+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(n){var k=p.round(1.2*n,2),m=p.round(1.6*n,2);n=p.round(.8*n,2);return"M-"+k+",-"+n+"L0,0M"+k+",-"+n+"L0,0M0,"+m+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(n){var k=p.round(1.2*n,2),m=p.round(1.6*n,2);n=p.round(.8*n,2);return"M"+n+","+k+"L0,0M"+n+",-"+k+"L0,0M-"+m+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,
f:function(n){var k=p.round(1.2*n,2),m=p.round(1.6*n,2);n=p.round(.8*n,2);return"M-"+n+","+k+"L0,0M-"+n+",-"+k+"L0,0M"+m+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(n){n=p.round(1.4*n,2);return"M"+n+",0H-"+n},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(n){n=p.round(1.4*n,2);return"M0,"+n+"V-"+n},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(n){n=p.round(n,2);return"M"+n+",-"+n+"L-"+n+","+n},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(n){n=
p.round(n,2);return"M"+n+","+n+"L-"+n+",-"+n},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(n){var k=p.round(n,2);n=p.round(2*n,2);return"M0,0L-"+k+","+n+"H"+k+"Z"},noDot:!0},"arrow-down":{n:46,f:function(n){var k=p.round(n,2);n=p.round(2*n,2);return"M0,0L-"+k+",-"+n+"H"+k+"Z"},noDot:!0},"arrow-left":{n:47,f:function(n){var k=p.round(2*n,2);n=p.round(n,2);return"M0,0L"+k+",-"+n+"V"+n+"Z"},noDot:!0},"arrow-right":{n:48,f:function(n){var k=p.round(2*n,2);n=p.round(n,2);return"M0,0L-"+
k+",-"+n+"V"+n+"Z"},noDot:!0},"arrow-bar-up":{n:49,f:function(n){var k=p.round(n,2);n=p.round(2*n,2);return"M-"+k+",0H"+k+"M0,0L-"+k+","+n+"H"+k+"Z"},needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(n){var k=p.round(n,2);n=p.round(2*n,2);return"M-"+k+",0H"+k+"M0,0L-"+k+",-"+n+"H"+k+"Z"},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(n){var k=p.round(2*n,2);n=p.round(n,2);return"M0,-"+n+"V"+n+"M0,0L"+k+",-"+n+"V"+n+"Z"},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(n){var k=
p.round(2*n,2);n=p.round(n,2);return"M0,-"+n+"V"+n+"M0,0L-"+k+",-"+n+"V"+n+"Z"},needLine:!0,noDot:!0}}},{"@plotly/d3":58}],690:[function(b,N,G){N.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",
min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],691:[function(b,N,G){function p(h,
r,l,c){var d=r["error_"+c]||{},e=[];if(d.visible&&-1!==["linear","log"].indexOf(l.type)){d=g(d);for(var f=0;f<h.length;f++){var q=h[f],t=q.i;if(void 0===t)t=f;else if(null===t)continue;var w=q[c];if(n(l.c2l(w))){var x=d(w,t);n(x[0])&&n(x[1])&&(t=q[c+"s"]=w-x[0],q=q[c+"h"]=w+x[1],e.push(t,q))}}h=r._extremes[l._id];l=m.findExtremes(l,e,a.extendFlat({tozero:h.opts.tozero},{padded:!0}));h.min=h.min.concat(l.min);h.max=h.max.concat(l.max)}}var n=b("fast-isnumeric"),k=b("../../registry"),m=b("../../plots/cartesian/axes"),
a=b("../../lib"),g=b("./compute_error");N.exports=function(h){for(var r=h.calcdata,l=0;l<r.length;l++){var c=r[l],d=c[0].trace;if(!0===d.visible&&k.traceIs(d,"errorBarsOK")){var e=m.getFromId(h,d.xaxis),f=m.getFromId(h,d.yaxis);p(c,d,e,"x");p(c,d,f,"y")}}}},{"../../lib":803,"../../plots/cartesian/axes":854,"../../registry":931,"./compute_error":692,"fast-isnumeric":249}],692:[function(b,N,G){function p(n,k){if("percent"===n)return function(m){return Math.abs(m*k/100)};if("constant"===n)return function(){return Math.abs(k)};
if("sqrt"===n)return function(m){return Math.sqrt(Math.abs(m))}}N.exports=function(n){var k=n.type,m=n.symmetric;if("data"===k){var a=n.array||[];if(m)return function(l,c){l=+a[c];return[l,l]};var g=n.arrayminus||[];return function(l,c){l=+a[c];c=+g[c];return isNaN(l)&&isNaN(c)?[NaN,NaN]:[c||0,l||0]}}var h=p(k,n.value),r=p(k,n.valueminus);return m||void 0===n.valueminus?function(l){l=h(l);return[l,l]}:function(l){return[r(l),h(l)]}}},{}],693:[function(b,N,G){var p=b("fast-isnumeric"),n=b("../../registry"),
k=b("../../lib"),m=b("../../plot_api/plot_template"),a=b("./attributes");N.exports=function(g,h,r,l){function c(q,t){return k.coerce(f,e,a,q,t)}var d="error_"+l.axis,e=m.newContainer(h,d),f=g[d]||{};if(!1!==c("visible",void 0!==f.array||void 0!==f.value||"sqrt"===f.type)){g=c("type","array"in f?"data":"percent");d=!0;"sqrt"!==g&&(d=c("symmetric",!(("data"===g?"arrayminus":"valueminus")in f)));if("data"===g)c("array"),c("traceref"),d||(c("arrayminus"),c("tracerefminus"));else if("percent"===g||"constant"===
g)c("value"),d||c("valueminus");g="copy_"+l.inherit+"style";l.inherit&&(h["error_"+l.inherit]||{}).visible&&c(g,!(f.color||p(f.thickness)||p(f.width)));l.inherit&&e[g]||(c("color",r),c("thickness"),c("width",n.traceIs(h,"gl3d")?0:4))}}},{"../../lib":803,"../../plot_api/plot_template":843,"../../registry":931,"./attributes":690,"fast-isnumeric":249}],694:[function(b,N,G){var p=b("../../lib");G=b("../../plot_api/edit_types").overrideAll;var n=b("./attributes"),k={error_x:p.extendFlat({},n),error_y:p.extendFlat({},
n)};delete k.error_x.copy_zstyle;delete k.error_y.copy_zstyle;delete k.error_y.copy_ystyle;p={error_x:p.extendFlat({},n),error_y:p.extendFlat({},n),error_z:p.extendFlat({},n)};delete p.error_x.copy_ystyle;delete p.error_y.copy_ystyle;delete p.error_z.copy_ystyle;delete p.error_z.copy_zstyle;N.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:k,bar:k,histogram:k,scatter3d:G(p,"calc","nested"),scattergl:G(k,"calc","nested")}},supplyDefaults:b("./defaults"),calc:b("./calc"),makeComputeError:b("./compute_error"),
plot:b("./plot"),style:b("./style"),hoverInfo:function(m,a,g){(a.error_y||{}).visible&&(g.yerr=m.yh-m.y,a.error_y.symmetric||(g.yerrneg=m.y-m.ys));(a.error_x||{}).visible&&(g.xerr=m.xh-m.x,a.error_x.symmetric||(g.xerrneg=m.x-m.xs))}}},{"../../lib":803,"../../plot_api/edit_types":836,"./attributes":690,"./calc":691,"./compute_error":692,"./defaults":693,"./plot":695,"./style":696}],695:[function(b,N,G){var p=b("@plotly/d3"),n=b("fast-isnumeric"),k=b("../drawing"),m=b("../../traces/scatter/subtypes");
N.exports=function(a,g,h,r){var l,c=h.xaxis,d=h.yaxis,e=r&&0<r.duration;g.each(function(f){var q=f[0].trace,t=q.error_x||{},w=q.error_y||{},x;q.ids&&(x=function(B){return B.id});var z=m.hasMarkers(q)&&0<q.marker.maxdisplayed;w.visible||t.visible||(f=[]);q=p.select(this).selectAll("g.errorbar").data(f,x);q.exit().remove();f.length&&(t.visible||q.selectAll("path.xerror").remove(),w.visible||q.selectAll("path.yerror").remove(),q.style("opacity",1),f=q.enter().append("g").classed("errorbar",!0),e&&f.style("opacity",
0).transition().duration(r.duration).style("opacity",1),k.setClipUrl(q,h.layerClipId,a),q.each(function(B){var A=p.select(this),D=c.c2p(B.x),C=d.c2p(B.y);if(void 0!==B.yh){var v=d.c2p(B.yh);var y=d.c2p(B.ys);if(!n(y)){var F=!0;y=d.c2p(B.ys,!0)}}if(void 0!==B.xh){var J=c.c2p(B.xh);var K=c.c2p(B.xs);if(!n(K)){var O=!0;K=c.c2p(B.xs,!0)}}if(!z||B.vis){B=A.select("path.yerror");if(w.visible&&n(D)&&n(v)&&n(y)){var I=w.width;D="M"+(D-I)+","+v+"h"+2*I+"m-"+I+",0V"+y;F||(D+="m-"+I+",0h"+2*I);(l=!B.size())?
B=A.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):e&&(B=B.transition().duration(r.duration).ease(r.easing));B.attr("d",D)}else B.remove();F=A.select("path.xerror");t.visible&&n(C)&&n(J)&&n(K)?(v=(t.copy_ystyle?w:t).width,D="M"+J+","+(C-v)+"v"+2*v+"m0,-"+v+"H"+K,O||(D+="m0,-"+v+"v"+2*v),(l=!F.size())?F=A.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0):e&&(F=F.transition().duration(r.duration).ease(r.easing)),F.attr("d",D)):F.remove()}}))})}},
{"../../traces/scatter/subtypes":1243,"../drawing":688,"@plotly/d3":58,"fast-isnumeric":249}],696:[function(b,N,G){var p=b("@plotly/d3"),n=b("../color");N.exports=function(k){k.each(function(m){var a=m[0].trace;m=a.error_y||{};a=a.error_x||{};var g=p.select(this);g.selectAll("path.yerror").style("stroke-width",m.thickness+"px").call(n.stroke,m.color);a.copy_ystyle&&(a=m);g.selectAll("path.xerror").style("stroke-width",a.thickness+"px").call(n.stroke,a.color)})}},{"../color":666,"@plotly/d3":58}],
697:[function(b,N,G){G=b("../../plots/font_attributes");var p=b("./layout_attributes").hoverlabel;b=b("../../lib/extend").extendFlat;N.exports={hoverlabel:{bgcolor:b({},p.bgcolor,{arrayOk:!0}),bordercolor:b({},p.bordercolor,{arrayOk:!0}),font:G({arrayOk:!0,editType:"none"}),align:b({},p.align,{arrayOk:!0}),namelength:b({},p.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":793,"../../plots/font_attributes":883,"./layout_attributes":707}],698:[function(b,N,G){function p(m,a,g,h){h=h||
n.identity;Array.isArray(m)&&(a[0][g]=h(m))}var n=b("../../lib"),k=b("../../registry");N.exports=function(m){function a(d){return function(e){return n.coerceHoverinfo({hoverinfo:e},{_module:d._module},h)}}var g=m.calcdata,h=m._fullLayout;for(m=0;m<g.length;m++){var r=g[m],l=r[0].trace;if(!k.traceIs(l,"pie-like")){var c=k.traceIs(l,"2dMap")?p:n.fillArray;c(l.hoverinfo,r,"hi",a(l));l.hovertemplate&&c(l.hovertemplate,r,"ht");l.hoverlabel&&(c(l.hoverlabel.bgcolor,r,"hbg"),c(l.hoverlabel.bordercolor,r,
"hbc"),c(l.hoverlabel.font.size,r,"hts"),c(l.hoverlabel.font.color,r,"htc"),c(l.hoverlabel.font.family,r,"htf"),c(l.hoverlabel.namelength,r,"hnl"),c(l.hoverlabel.align,r,"hta"))}}}},{"../../lib":803,"../../registry":931}],699:[function(b,N,G){var p=b("../../registry"),n=b("./hover").hover;N.exports=function(k,m,a){function g(){k.emit("plotly_click",{points:k._hoverdata,event:m})}var h=p.getComponentMethod("annotations","onClick")(k,k._hoverdata);void 0!==a&&n(k,m,a,!0);k._hoverdata&&m&&m.target&&
(h&&h.then?h.then(g):g(),m.stopImmediatePropagation&&m.stopImmediatePropagation())}},{"../../registry":931,"./hover":703}],700:[function(b,N,G){N.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],701:[function(b,N,G){var p=b("../../lib"),n=b("./attributes"),k=b("./hoverlabel_defaults");N.exports=function(m,a,g,h){g=p.extendFlat({},h.hoverlabel);a.hovertemplate&&(g.namelength=-1);k(m,a,function(r,l){return p.coerce(m,
a,n,r,l)},g)}},{"../../lib":803,"./attributes":697,"./hoverlabel_defaults":704}],702:[function(b,N,G){function p(g,h){if(Array.isArray(h)){if(Array.isArray(g)&&Array.isArray(g[h[0]]))return g[h[0]][h[1]]}else return g[h]}var n=b("../../lib");G.getSubplot=function(g){return g.subplot||g.xaxis+g.yaxis||g.geo};G.isTraceInSubplots=function(g,h){if("splom"===g.type){var r=g.xaxes||[];g=g.yaxes||[];for(var l=0;l<r.length;l++)for(var c=0;c<g.length;c++)if(-1!==h.indexOf(r[l]+g[c]))return!0;return!1}return-1!==
h.indexOf(G.getSubplot(g))};G.flat=function(g,h){for(var r=Array(g.length),l=0;l<g.length;l++)r[l]=h;return r};G.p2c=function(g,h){for(var r=Array(g.length),l=0;l<g.length;l++)r[l]=g[l].p2c(h);return r};G.getDistanceFunction=function(g,h,r,l){return"closest"===g?l||G.quadrature(h,r):"x"===g.charAt(0)?h:r};G.getClosest=function(g,h,r){if(!1!==r.index)0<=r.index&&r.index<g.length?r.distance=0:r.index=!1;else for(var l=0;l<g.length;l++){var c=h(g[l]);c<=r.distance&&(r.index=l,r.distance=c)}return r};
G.inbox=function(g,h,r){return 0>g*h||0===g?r:Infinity};G.quadrature=function(g,h){return function(r){var l=g(r);r=h(r);return Math.sqrt(l*l+r*r)}};G.makeEventData=function(g,h,r){var l="index"in g?g.index:g.pointNumber,c={data:h._input,fullData:h,curveNumber:h.index,pointNumber:l};if(h._indexToPoints){var d=h._indexToPoints[l];1===d.length?c.pointIndex=d[0]:c.pointIndices=d}else c.pointIndex=l;h._module.eventData?c=h._module.eventData(c,g,h,r,l):("xVal"in g?c.x=g.xVal:"x"in g&&(c.x=g.x),"yVal"in
g?c.y=g.yVal:"y"in g&&(c.y=g.y),g.xa&&(c.xaxis=g.xa),g.ya&&(c.yaxis=g.ya),void 0!==g.zLabelVal&&(c.z=g.zLabelVal));G.appendArrayPointValue(c,h,l);return c};G.appendArrayPointValue=function(g,h,r){var l=h._arrayAttrs;if(l)for(var c=0;c<l.length;c++){var d=l[c],e=k[d]||d;void 0===g[e]&&(d=n.nestedProperty(h,d).get(),d=p(d,r),void 0!==d&&(g[e]=d))}};G.appendArrayMultiPointValues=function(g,h,r){var l=h._arrayAttrs;if(l)for(var c=0;c<l.length;c++){var d=l[c],e=k[d]||d;if(void 0===g[e]){d=n.nestedProperty(h,
d).get();for(var f=Array(r.length),q=0;q<r.length;q++)f[q]=p(d,r[q]);g[e]=f}}};var k={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"},m={x:!0,y:!0},a={"x unified":!0,"y unified":!0};G.isUnifiedHover=function(g){return"string"!==typeof g?!1:!!a[g]};G.isXYhover=function(g){return"string"!==typeof g?!1:!!m[g]}},{"../../lib":803}],703:[function(b,N,G){function p(Y,ba,ja,ma){function ia(xc,Ic){for(qb=0;qb<vb.length;qb++)if((Bb=vb[qb])&&Bb[0]&&Bb[0].trace&&
(Ka=Bb[0].trace,!0===Ka.visible&&0!==Ka._length&&-1===["carpet","contourcarpet"].indexOf(Ka._module.name))){"splom"===Ka.type?(wb=0,ub=ra[wb]):(ub=K.getSubplot(Ka),wb=ra.indexOf(ub));rb=$a;K.isUnifiedHover(rb)&&(rb=rb.charAt(0));La={cd:Bb,trace:Ka,xa:qa[wb],ya:ta[wb],maxHoverDistance:gb,maxSpikeDistance:sb,index:!1,distance:Math.min(cb,gb),spikeDistance:Infinity,xSpike:void 0,ySpike:void 0,color:v.defaultLine,name:Ka.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,
text:void 0};la[ub]&&(La.subplot=la[ub]._subplot);la._splomScenes&&la._splomScenes[Ka.uid]&&(La.scene=la._splomScenes[Ka.uid]);ya=jb.length;if("array"===rb){var Ja=ba[qb];"pointNumber"in Ja?(La.index=Ja.pointNumber,rb="closest"):(rb="","xval"in Ja&&(Ab=Ja.xval,rb="x"),"yval"in Ja&&(Ma=Ja.yval,rb=rb?"closest":"y"))}else void 0!==xc&&void 0!==Ic?(Ab=xc,Ma=Ic):(Ab=Ta[wb],Ma=bb[wb]);if(0!==gb)if(Ka._module&&Ka._module.hoverPoints){if(Ja=Ka._module.hoverPoints(La,Ab,Ma,rb,{finiteRange:!0,hoverLayer:la._hoverlayer}))for(var Pa,
db=0;db<Ja.length;db++)Pa=Ja[db],q(Pa.x0)&&q(Pa.y0)&&jb.push(h(Pa,$a))}else w.log("Unrecognized trace type in hover:",Ka);"closest"===$a&&jb.length>ya&&(jb.splice(0,ya),cb=jb[0].distance);na&&0!==sb&&0===jb.length&&(La.distance=sb,La.index=!1,(Ja=Ka._module.hoverPoints(La,Ab,Ma,"closest",{hoverLayer:la._hoverlayer}))&&(Ja=Ja.filter(function(Jb){return Jb.spikeDistance<=sb})),Ja&&Ja.length)&&(Pa=Ja.filter(function(Jb){return Jb.xa.showspikes&&"hovered data"!==Jb.xa.spikesnap}),Pa.length&&(Pa=Pa[0],
q(Pa.x0)&&q(Pa.y0)&&(Pa=xa(Pa),!Aa.vLinePoint||Aa.vLinePoint.spikeDistance>Pa.spikeDistance))&&(Aa.vLinePoint=Pa),Ja=Ja.filter(function(Jb){return Jb.ya.showspikes&&"hovered data"!==Jb.ya.spikesnap}),Ja.length&&(Ja=Ja[0],q(Ja.x0)&&q(Ja.y0)&&(Pa=xa(Ja),!Aa.hLinePoint||Aa.hLinePoint.spikeDistance>Pa.spikeDistance))&&(Aa.hLinePoint=Pa))}}function oa(xc,Ic,Ja){for(var Pa=null,db=Infinity,Jb,Gb=0;Gb<xc.length;Gb++)Jb=xc[Gb].spikeDistance,Ja&&0===Gb&&(Jb=-Infinity),Jb<=db&&Jb<=Ic&&(Pa=xc[Gb],db=Jb);return Pa}
function xa(xc){return xc?{xa:xc.xa,ya:xc.ya,x:void 0!==xc.xSpike?xc.xSpike:(xc.x0+xc.x1)/2,y:void 0!==xc.ySpike?xc.ySpike:(xc.y0+xc.y1)/2,distance:xc.distance,spikeDistance:xc.spikeDistance,curveNumber:xc.trace.index,color:xc.color,pointNumber:xc.index}:null}ja||(ja="xy");var ra=Array.isArray(ja)?ja:[ja],la=Y._fullLayout,ka=la._plots||[];ja=ka[ja];var na=la._has("cartesian");ja&&(ja=ja.overlays.map(function(xc){return xc.id}),ra=ra.concat(ja));ja=ra.length;for(var qa=Array(ja),ta=Array(ja),za=!1,
Ia=0;Ia<ja;Ia++){var Xa=ra[Ia];if(ka[Xa])za=!0,qa[Ia]=ka[Xa].xaxis,ta[Ia]=ka[Xa].yaxis;else if(la[Xa]&&la[Xa]._subplot)Xa=la[Xa]._subplot,qa[Ia]=Xa.xaxis,ta[Ia]=Xa.yaxis;else{w.warn("Unrecognized subplot: "+Xa);return}}var $a=ba.hovermode||la.hovermode;$a&&!za&&($a="closest");if(-1===["x","y","closest","x unified","y unified"].indexOf($a)||!Y.calcdata||Y.querySelector(".zoombox")||Y._dragging)return y.unhoverRaw(Y,ba);var gb=la.hoverdistance;-1===gb&&(gb=Infinity);var sb=la.spikedistance;-1===sb&&
(sb=Infinity);var jb=[],vb=[],qb,Bb,ub,wb,rb,Ab,Ma,La,ya,Aa={hLinePoint:null,vLinePoint:null};ka=!1;if(Array.isArray(ba))for($a="array",Ia=0;Ia<ba.length;Ia++){if(Bb=Y.calcdata[ba[Ia].curveNumber||0]){var Ka=Bb[0].trace;"skip"!==Bb[0].trace.hoverinfo&&(vb.push(Bb),"h"===Ka.orientation&&(ka=!0))}}else{for(qb=0;qb<Y.calcdata.length;qb++)Bb=Y.calcdata[qb],Ka=Bb[0].trace,"skip"!==Ka.hoverinfo&&K.isTraceInSubplots(Ka,ra)&&(vb.push(Bb),"h"===Ka.orientation&&(ka=!0));if(ba.target){if(!1===B.triggerHandler(Y,
"plotly_beforehover",ba))return;ja=ba.composedPath&&ba.composedPath()[0];ja||(ja=ba.target);za=ja.getBoundingClientRect();ja=ba.clientX-za.left;za=ba.clientY-za.top;la._calcInverseTransform(Y);za=w.apply3DTransform(la._invTransform)(ja,za);ja=za[0];za=za[1];if(0>ja||ja>qa[0]._length||0>za||za>ta[0]._length)return y.unhoverRaw(Y,ba)}else ja="xpx"in ba?ba.xpx:qa[0]._length/2,za="ypx"in ba?ba.ypx:ta[0]._length/2;ba.pointerX=ja+qa[0]._offset;ba.pointerY=za+ta[0]._offset;var Ta="xval"in ba?K.flat(ra,ba.xval):
K.p2c(qa,ja);var bb="yval"in ba?K.flat(ra,ba.yval):K.p2c(ta,za);if(!q(Ta[0])||!q(bb[0]))return w.warn("Fx.hover failed",ba,Y),y.unhoverRaw(Y,ba)}var cb=Infinity;ia();za={fullLayout:la,container:la._hoverlayer,outerContainer:la._paperdiv,event:ba};Y._spikepoints={vLinePoint:Aa.vLinePoint,hLinePoint:Aa.hLinePoint};ja=function(){jb.sort(function(xc,Ic){return xc.distance-Ic.distance});jb=d(jb,$a)};ja();Ia=$a.charAt(0);Ia=("x"===Ia||"y"===Ia)&&jb[0]&&U[jb[0].trace.type];na&&0!==sb&&0!==jb.length&&(Xa=
jb.filter(function(xc){return xc.ya.showspikes}),Xa=oa(Xa,sb,Ia),Aa.hLinePoint=xa(Xa),Xa=jb.filter(function(xc){return xc.xa.showspikes}),Ia=oa(Xa,sb,Ia),Aa.vLinePoint=xa(Ia));if(0===jb.length)return ma=y.unhoverRaw(Y,ba),!na||null===Aa.hLinePoint&&null===Aa.vLinePoint||r(Y,Aa,za),ma;na&&r(Y,Aa,za);if(K.isXYhover(rb)&&0!==jb[0].length&&"splom"!==jb[0].trace.type){var Eb=jb[0];jb=T[Eb.trace.type]?jb.filter(function(xc){return xc.trace.index===Eb.trace.index}):[Eb];za=jb.length;Ia=e("x",Eb,la);Xa=e("y",
Eb,la);ia(Ia,Xa);var Pb=[],fc={},pb=0;Ia=function(xc){var Ic=T[xc.trace.type]?n(xc):xc.trace.index;if(fc[Ic]){Ic=fc[Ic]-1;var Ja=Pb[Ic];0<Ic&&Math.abs(xc.distance)<Math.abs(Ja.distance)&&(Pb[Ic]=xc)}else pb++,fc[Ic]=pb,Pb.push(xc)};for(Xa=0;Xa<za;Xa++)Ia(jb[Xa]);for(Xa=jb.length-1;Xa>za-1;Xa--)Ia(jb[Xa]);jb=Pb;ja()}ja=Y._hoverdata;za=[];for(Ia=0;Ia<jb.length;Ia++){Xa=jb[Ia];var Db=K.makeEventData(Xa,Xa.trace,Xa.cd);if(!1!==Xa.hovertemplate){var Rb=!1;Xa.cd[Xa.index]&&Xa.cd[Xa.index].ht&&(Rb=Xa.cd[Xa.index].ht);
Xa.hovertemplate=Rb||Xa.trace.hovertemplate||!1}Xa.eventData=[Db];za.push(Db)}Y._hoverdata=za;ka="y"===$a&&(1<vb.length||1<jb.length)||"closest"===$a&&ka&&1<jb.length;Ia=v.combine(la.plot_bgcolor||v.background,la.paper_bgcolor);Ia=k(jb,{hovermode:$a,rotateLabels:ka,bgColor:Ia,container:la._hoverlayer,outerContainer:la._paperdiv,commonLabelOpts:la.hoverlabel,hoverdistance:la.hoverdistance},Y);K.isUnifiedHover($a)||(a(Ia,ka?"xa":"ya",la),g(Ia,ka,la._invScaleX,la._invScaleY));ba.target&&ba.target.tagName&&
(ka=J.getComponentMethod("annotations","hasClickToShow")(Y,za),D(f.select(ba.target),ka?"pointer":""));ba.target&&!ma&&l(Y,ba,ja)&&(ja&&Y.emit("plotly_unhover",{event:ba,points:ja}),Y.emit("plotly_hover",{event:ba,points:Y._hoverdata,xaxes:qa,yaxes:ta,xvals:Ta,yvals:bb}))}function n(Y){return[Y.trace.index,Y.index,Y.x0,Y.y0,Y.name,Y.attr,Y.xa,Y.ya||""].join()}function k(Y,ba,ja){var ma=ja._fullLayout,ia=ba.hovermode,oa=ba.rotateLabels,xa=ba.bgColor,ra=ba.container,la=ba.outerContainer,ka=ba.commonLabelOpts||
{},na=ba.fontFamily||O.HOVERFONT,qa=ba.fontSize||O.HOVERFONTSIZE,ta=Y[0],za=ta.xa,Ia=ta.ya,Xa=ia.charAt(0),$a=ta[Xa+"Label"];la=la.node().getBoundingClientRect();var gb=la.top,sb=la.width,jb=la.height,vb=void 0!==$a&&ta.distance<=ba.hoverdistance&&("x"===ia||"y"===ia);if(vb){ba=!0;var qb;for(la=0;la<Y.length;la++)if(ba&&void 0===Y[la].zLabel&&(ba=!1),qb=Y[la].hoverinfo||Y[la].trace.hoverinfo)if(qb=Array.isArray(qb)?qb:qb.split("+"),-1===qb.indexOf("all")&&-1===qb.indexOf(ia)){vb=!1;break}ba&&(vb=
!1)}ba=ra.selectAll("g.axistext").data(vb?[0]:[]);ba.enter().append("g").classed("axistext",!0);ba.exit().remove();ba.each(function(){var Ma=f.select(this),La=w.ensureSingle(Ma,"path","",function(Db){Db.style({"stroke-width":"1px"})}),ya=w.ensureSingle(Ma,"text","",function(Db){Db.attr("data-notex",1)}),Aa=ka.bgcolor||v.defaultLine,Ka=ka.bordercolor||v.contrast(Aa),Ta=v.contrast(Aa),bb={family:ka.font.family||na,size:ka.font.size||qa,color:ka.font.color||Ta};La.style({fill:Aa,stroke:Ka});ya.text($a).call(C.font,
bb).call(A.positionText,0,0).call(A.convertToTspans,ja);Ma.attr("transform","");var cb=ya.node().getBoundingClientRect();if("x"===ia)Ta="top"===za.side?"-":"",ya.attr("text-anchor","middle").call(A.positionText,0,"top"===za.side?gb-cb.bottom-ca-W:gb-cb.top+ca+W),Aa=za._offset+(ta.x0+ta.x1)/2,Ka=Ia._offset+("top"===za.side?0:Ia._length),ya=cb.width/2+W,Aa<ya?(Aa=ya,La.attr("d","M-"+(ya-ca)+",0L-"+(ya-2*ca)+","+Ta+ca+"H"+(W+cb.width/2)+"v"+Ta+(2*W+cb.height)+"H-"+ya+"V"+Ta+ca+"Z")):Aa>ma.width-ya?(Aa=
ma.width-ya,La.attr("d","M"+(ya-ca)+",0L"+ya+","+Ta+ca+"v"+Ta+(2*W+cb.height)+"H-"+ya+"V"+Ta+ca+"H"+(ya-2*ca)+"Z")):La.attr("d","M0,0L"+ca+","+Ta+ca+"H"+(W+cb.width/2)+"v"+Ta+(2*W+cb.height)+"H-"+(W+cb.width/2)+"V"+Ta+ca+"H-"+ca+"Z");else{if("right"===Ia.side){Ta="start";var Eb=1;var Pb="";Aa=za._offset+za._length}else Ta="end",Eb=-1,Pb="-",Aa=za._offset;Ka=Ia._offset+(ta.y0+ta.y1)/2;ya.attr("text-anchor",Ta);La.attr("d","M0,0L"+Pb+ca+","+ca+"V"+(W+cb.height/2)+"h"+Pb+(2*W+cb.width)+"V-"+(W+cb.height/
2)+"H"+Pb+ca+"V-"+ca+"Z");var fc=cb.height/2;Pb=gb-cb.top-fc;La="clip"+ma._uid+"commonlabel"+Ia._id;if(Aa<cb.width+2*W+ca){Eb="M-"+(ca+W)+"-"+fc+"h-"+(cb.width-W)+"V"+fc+"h"+(cb.width-W)+"Z";var pb=cb.width-Aa+W;A.positionText(ya,pb,Pb);"end"===Ta&&ya.selectAll("tspan").each(function(){var Db=f.select(this),Rb=C.tester.append("text").text(Db.text()).call(C.font,bb),xc=Rb.node().getBoundingClientRect();Math.round(xc.width)<Math.round(cb.width)&&Db.attr("x",pb-xc.width);Rb.remove()})}else A.positionText(ya,
Eb*(W+ca),Pb),Eb=null;Ta=ma._topclips.selectAll("#"+La).data(Eb?[0]:[]);Ta.enter().append("clipPath").attr("id",La).append("path");Ta.exit().remove();Ta.select("path").attr("d",Eb);C.setClipUrl(ya,Eb?La:null,ja)}Ma.attr("transform",x(Aa,Ka))});if(K.isUnifiedHover(ia)){ra.selectAll("g.hovertext").remove();if(0===Y.length)return;ba={};I({showlegend:!0,legend:{title:{text:$a,font:ma.hoverlabel.font},font:ma.hoverlabel.font,bgcolor:ma.hoverlabel.bgcolor,bordercolor:ma.hoverlabel.bordercolor,borderwidth:1,
tracegroupgap:7,traceorder:ma.legend?ma.legend.traceorder:void 0,orientation:"v"}},ba,ja._fullData);ba=ba.legend;ba.entries=[];for(la=0;la<Y.length;la++){var Bb=m(Y[la],!0,ia,ma,$a);qb=Bb[0];var ub=Bb[1];Bb=Y[la];Bb.name=ub;Bb.text=""!==ub?ub+" : "+qb:qb;if(qb=Bb.cd[Bb.index])qb.mc&&(Bb.mc=qb.mc),qb.mcc&&(Bb.mc=qb.mcc),qb.mlc&&(Bb.mlc=qb.mlc),qb.mlcc&&(Bb.mlc=qb.mlcc),qb.mlw&&(Bb.mlw=qb.mlw),qb.mrc&&(Bb.mrc=qb.mrc),qb.dir&&(Bb.dir=qb.dir);Bb._distinct=!0;ba.entries.push([Bb])}ba.entries.sort(function(Ma,
La){return Ma[0].trace.index-La[0].trace.index});ba.layer=ra;ba._inHover=!0;L(ja,ba);ra=ra.select("g.legend");la=ra.node().getBoundingClientRect();ba=la.width+2*W;la=la.height+2*W;ub=Y[0];Bb=(ub.x0+ub.x1)/2;qb=(ub.y0+ub.y1)/2;var wb=!(J.traceIs(ub.trace,"bar-like")||J.traceIs(ub.trace,"box-violin"));if("y"===Xa)if(wb){var rb=qb-W;ub=qb+W}else rb=Math.min.apply(null,Y.map(function(Ma){return Math.min(Ma.y0,Ma.y1)})),ub=Math.max.apply(null,Y.map(function(Ma){return Math.max(Ma.y0,Ma.y1)}));else rb=
ub=w.mean(Y.map(function(Ma){return(Ma.y0+Ma.y1)/2}))-la/2;"x"===Xa?wb?(Xa=Bb+W,wb=Bb-W):(Xa=Math.max.apply(null,Y.map(function(Ma){return Math.max(Ma.x0,Ma.x1)})),wb=Math.min.apply(null,Y.map(function(Ma){return Math.min(Ma.x0,Ma.x1)}))):Xa=wb=w.mean(Y.map(function(Ma){return(Ma.x0+Ma.x1)/2}))-ba/2;var Ab=za._offset;Y=Ia._offset;ub+=Y;Xa+=Ab;wb+=Ab-ba;rb+=Y-la;Xa=(Xa+ba<sb&&0<=Xa?Xa:wb+ba<sb&&0<=wb?wb:Ab+ba<sb?Ab:Xa-Bb<Bb-wb+ba?sb-ba:0)+W;Y=(ub+la<jb&&0<=ub?ub:rb+la<jb&&0<=rb?rb:Y+la<jb?Y:ub-qb<
qb-rb+la?jb-la:0)+W;ra.attr("transform",x(Xa-1,Y-1));return ra}Y=ra.selectAll("g.hovertext").data(Y,function(Ma){return n(Ma)});Y.enter().append("g").classed("hovertext",!0).each(function(){var Ma=f.select(this);Ma.append("rect").call(v.fill,v.addOpacity(xa,.8));Ma.append("text").classed("name",!0);Ma.append("path").style("stroke-width","1px");Ma.append("text").classed("nums",!0).call(C.font,na,qa)});Y.exit().remove();Y.each(function(Ma){var La=f.select(this).attr("transform",""),ya=Ma.color;Array.isArray(ya)&&
(ya=ya[Ma.eventData[0].pointNumber]);var Aa=Ma.bgcolor||ya,Ka=v.combine(v.opacity(Aa)?Aa:v.defaultLine,xa),Ta=v.combine(v.opacity(ya)?ya:v.defaultLine,xa),bb=Ma.borderColor||v.contrast(Ka);ya=m(Ma,vb,ia,ma,$a,La);var cb=ya[0],Eb=ya[1];ya=La.select("text.nums").call(C.font,Ma.fontFamily||na,Ma.fontSize||qa,Ma.fontColor||bb).text(cb).attr("data-notex",1).call(A.positionText,0,0).call(A.convertToTspans,ja);Aa=La.select("text.name");var Pb=0,fc=0;Eb&&Eb!==cb?(Aa.call(C.font,Ma.fontFamily||na,Ma.fontSize||
qa,Ta).text(Eb).attr("data-notex",1).call(A.positionText,0,0).call(A.convertToTspans,ja),fc=Aa.node().getBoundingClientRect(),Pb=fc.width+2*W,fc=fc.height+2*W):(Aa.remove(),La.select("rect").remove());La.select("path").style({fill:Ka,stroke:bb});var pb=ya.node().getBoundingClientRect();Ka=Ma.xa._offset+(Ma.x0+Ma.x1)/2;bb=Ma.ya._offset+(Ma.y0+Ma.y1)/2;Ta=Math.abs(Ma.x1-Ma.x0);cb=Math.abs(Ma.y1-Ma.y0);Eb=pb.width+ca+W+Pb;Ma.ty0=gb-pb.top;Ma.bx=pb.width+2*W;Ma.by=Math.max(pb.height+2*W,fc);Ma.anchor=
"start";Ma.txwidth=pb.width;Ma.tx2width=Pb;Ma.offset=0;oa?(Ma.pos=Ka,fc=bb+cb/2+Eb<=jb,("top"===Ma.idealAlign||!fc)&&0<=bb-cb/2-Eb?(bb-=cb/2,Ma.anchor="end"):fc?(bb+=cb/2,Ma.anchor="start"):Ma.anchor="middle"):(Ma.pos=bb,fc=Ka+Ta/2+Eb<=sb,("left"===Ma.idealAlign||!fc)&&0<=Ka-Ta/2-Eb?(Ka-=Ta/2,Ma.anchor="end"):fc?(Ka+=Ta/2,Ma.anchor="start"):(Ma.anchor="middle",Ta=Eb/2,fc=Ka+Ta-sb,Ta=Ka-Ta,0<fc&&(Ka-=fc),0>Ta&&(Ka+=-Ta)));ya.attr("text-anchor",Ma.anchor);Pb&&Aa.attr("text-anchor",Ma.anchor);La.attr("transform",
x(Ka,bb)+(oa?z(H):""))});return Y}function m(Y,ba,ja,ma,ia,oa){var xa="",ra="";void 0!==Y.nameOverride&&(Y.name=Y.nameOverride);Y.name&&(Y.trace._meta&&(Y.name=w.templateString(Y.name,Y.trace._meta)),xa=c(Y.name,Y.nameLength));ja=ja.charAt(0);var la="x"===ja?"y":"x";void 0!==Y.zLabel?(void 0!==Y.xLabel&&(ra+="x: "+Y.xLabel+"\x3cbr\x3e"),void 0!==Y.yLabel&&(ra+="y: "+Y.yLabel+"\x3cbr\x3e"),"choropleth"!==Y.trace.type&&"choroplethmapbox"!==Y.trace.type&&(ra+=(ra?"z: ":"")+Y.zLabel)):ba&&Y[ja+"Label"]===
ia?ra=Y[la+"Label"]||"":void 0===Y.xLabel?void 0!==Y.yLabel&&"scattercarpet"!==Y.trace.type&&(ra=Y.yLabel):ra=void 0===Y.yLabel?Y.xLabel:"("+Y.xLabel+", "+Y.yLabel+")";!Y.text&&0!==Y.text||Array.isArray(Y.text)||(ra+=(ra?"\x3cbr\x3e":"")+Y.text);void 0!==Y.extraText&&(ra+=(ra?"\x3cbr\x3e":"")+Y.extraText);oa&&""===ra&&!Y.hovertemplate&&(""===xa&&oa.remove(),ra=xa);if(ba=Y.hovertemplate||!1)ra=Y.hovertemplateLabels||Y,Y[ja+"Label"]!==ia&&(ra[ja+"other"]=ra[ja+"Val"],ra[ja+"otherLabel"]=ra[ja+"Label"]),
ra=w.hovertemplateString(ba,ra,ma._d3locale,Y.eventData[0]||{},Y.trace._meta),ra=ra.replace(ha,function(ka,na){xa=c(na,Y.nameLength);return""});return[ra,xa]}function a(Y,ba,ja){function ma(sb){var jb=sb[0],vb=sb[sb.length-1];na=jb.pmin-jb.pos-jb.dp+jb.size;qa=vb.pos+vb.dp+vb.size-jb.pmax;if(.01<na){for(za=sb.length-1;0<=za;za--)sb[za].dp+=na;ka=!1}if(!(.01>qa)){if(-.01>na){for(za=sb.length-1;0<=za;za--)sb[za].dp-=qa;ka=!1}if(ka){for(ta=vb=0;ta<sb.length;ta++)Ia=sb[ta],Ia.pos+Ia.dp+Ia.size>jb.pmax&&
vb++;for(ta=sb.length-1;0<=ta&&!(0>=vb);ta--)Ia=sb[ta],Ia.pos>jb.pmax-1&&(Ia.del=!0,vb--);for(ta=0;ta<sb.length&&!(0>=vb);ta++)if(Ia=sb[ta],Ia.pos<jb.pmin+1)for(Ia.del=!0,vb--,qa=2*Ia.size,za=sb.length-1;0<=za;za--)sb[za].dp-=qa;for(ta=sb.length-1;0<=ta&&!(0>=vb);ta--)Ia=sb[ta],Ia.pos+Ia.dp+Ia.size>jb.pmax&&(Ia.del=!0,vb--)}}}var ia=0,oa=1,xa=Y.size(),ra=Array(xa),la=0;Y.each(function(sb){var jb=sb[ba],vb="x"===jb._id.charAt(0);jb=jb.range;0===la&&jb&&jb[0]>jb[1]!==vb&&(oa=-1);ra[la++]=[{datum:sb,
traceIndex:sb.trace.index,dp:0,pos:sb.pos,posref:sb.posref,size:sb.by*(vb?M:1)/2,pmin:0,pmax:vb?ja.width:ja.height}]});ra.sort(function(sb,jb){return sb[0].posref-jb[0].posref||oa*(jb[0].traceIndex-sb[0].traceIndex)});for(var ka,na,qa,ta,za,Ia,Xa;!ka&&ia<=xa;){ia++;ka=!0;for(ta=0;ta<ra.length-1;){Y=ra[ta];Xa=ra[ta+1];var $a=Y[Y.length-1],gb=Xa[0];na=$a.pos+$a.dp+$a.size-gb.pos-gb.dp+gb.size;if(.01<na&&$a.pmin===gb.pmin&&$a.pmax===gb.pmax){for(za=Xa.length-1;0<=za;za--)Xa[za].dp+=na;Y.push.apply(Y,
Xa);ra.splice(ta+1,1);Xa=0;for(za=Y.length-1;0<=za;za--)Xa+=Y[za].dp;qa=Xa/Y.length;for(za=Y.length-1;0<=za;za--)Y[za].dp-=qa;ka=!1}else ta++}ra.forEach(ma)}for(ta=ra.length-1;0<=ta;ta--)for(ia=ra[ta],za=ia.length-1;0<=za;za--)xa=ia[za],Y=xa.datum,Y.offset=xa.dp,Y.del=xa.del}function g(Y,ba,ja,ma){Y.each(function(ia){var oa=f.select(this);if(ia.del)return oa.remove();var xa=oa.select("text.nums"),ra=ia.anchor,la="end"===ra?-1:1,ka={start:1,end:-1,middle:0}[ra],na=ka*(ca+W),qa=na+ka*(ia.txwidth+W),
ta=0,za=ia.offset,Ia="middle"===ra;Ia&&(na-=ia.tx2width/2,qa+=ia.txwidth/2+W);ba&&(za*=-Z,ta=ia.offset*Q);oa.select("path").attr("d",Ia?"M-"+(ia.bx/2+ia.tx2width/2)*ja+","+(za-ia.by/2)*ma+"h"+ia.bx*ja+"v"+ia.by*ma+"h-"+ia.bx*ja+"Z":"M0,0L"+(la*ca+ta)*ja+","+(ca+za)*ma+"v"+(ia.by/2-ca)*ma+"h"+la*ia.bx*ja+"v-"+ia.by*ma+"H"+(la*ca+ta)*ja+"V"+(za-ca)*ma+"Z");la=ta+na;na=za+ia.ty0-ia.by/2+W;var Xa=ia.textAlign||"auto";"auto"!==Xa&&("left"===Xa&&"start"!==ra?(xa.attr("text-anchor","start"),la=Ia?-ia.bx/
2-ia.tx2width/2+W:-ia.bx-W):"right"===Xa&&"end"!==ra&&(xa.attr("text-anchor","end"),la=Ia?ia.bx/2-ia.tx2width/2-W:ia.bx+W));xa.call(A.positionText,la*ja,na*ma);ia.tx2width&&(oa.select("text.name").call(A.positionText,(qa+ka*W+ta)*ja,(za+ia.ty0-ia.by/2+W)*ma),oa.select("rect").call(C.setRect,(qa+(ka-1)*ia.tx2width/2+ta)*ja,(za-ia.by/2-1)*ma,ia.tx2width*ja,(ia.by+2)*ma))})}function h(Y,ba){function ja(na){return na||q(na)&&0===na}function ma(na,qa,ta){qa=la(qa,ta);ja(qa)&&(Y[na]=qa)}var ia=Y.index,
oa=Y.trace||{},xa=Y.cd[0],ra=Y.cd[ia]||{},la=Array.isArray(ia)?function(na,qa){na=w.castOption(xa,ia,na);return ja(na)?na:w.extractOption({},oa,"",qa)}:function(na,qa){return w.extractOption(ra,oa,na,qa)};ma("hoverinfo","hi","hoverinfo");ma("bgcolor","hbg","hoverlabel.bgcolor");ma("borderColor","hbc","hoverlabel.bordercolor");ma("fontFamily","htf","hoverlabel.font.family");ma("fontSize","hts","hoverlabel.font.size");ma("fontColor","htc","hoverlabel.font.color");ma("nameLength","hnl","hoverlabel.namelength");
ma("textAlign","hta","hoverlabel.align");Y.posref="y"===ba||"closest"===ba&&"h"===oa.orientation?Y.xa._offset+(Y.x0+Y.x1)/2:Y.ya._offset+(Y.y0+Y.y1)/2;Y.x0=w.constrain(Y.x0,0,Y.xa._length);Y.x1=w.constrain(Y.x1,0,Y.xa._length);Y.y0=w.constrain(Y.y0,0,Y.ya._length);Y.y1=w.constrain(Y.y1,0,Y.ya._length);void 0!==Y.xLabelVal&&(Y.xLabel="xLabel"in Y?Y.xLabel:F.hoverLabelText(Y.xa,Y.xLabelVal,oa.xhoverformat),Y.xVal=Y.xa.c2d(Y.xLabelVal));void 0!==Y.yLabelVal&&(Y.yLabel="yLabel"in Y?Y.yLabel:F.hoverLabelText(Y.ya,
Y.yLabelVal,oa.yhoverformat),Y.yVal=Y.ya.c2d(Y.yLabelVal));void 0!==Y.zLabelVal&&void 0===Y.zLabel&&(Y.zLabel=String(Y.zLabelVal));if(!(isNaN(Y.xerr)||"log"===Y.xa.type&&0>=Y.xerr)){var ka=F.tickText(Y.xa,Y.xa.c2l(Y.xerr),"hover").text;Y.xLabel=void 0!==Y.xerrneg?Y.xLabel+(" +"+ka+" / -"+F.tickText(Y.xa,Y.xa.c2l(Y.xerrneg),"hover").text):Y.xLabel+("  "+ka);"x"===ba&&(Y.distance+=1)}isNaN(Y.yerr)||"log"===Y.ya.type&&0>=Y.yerr||(ka=F.tickText(Y.ya,Y.ya.c2l(Y.yerr),"hover").text,Y.yLabel=void 0!==Y.yerrneg?
Y.yLabel+(" +"+ka+" / -"+F.tickText(Y.ya,Y.ya.c2l(Y.yerrneg),"hover").text):Y.yLabel+("  "+ka),"y"===ba&&(Y.distance+=1));(ba=Y.hoverinfo||Y.trace.hoverinfo)&&"all"!==ba&&(ba=Array.isArray(ba)?ba:ba.split("+"),-1===ba.indexOf("x")&&(Y.xLabel=void 0),-1===ba.indexOf("y")&&(Y.yLabel=void 0),-1===ba.indexOf("z")&&(Y.zLabel=void 0),-1===ba.indexOf("text")&&(Y.text=void 0),-1===ba.indexOf("name")&&(Y.name=void 0));return Y}function r(Y,ba,ja){var ma=ja.container,ia=ja.fullLayout,oa=ia._size;ja=ja.event;
var xa=!!ba.hLinePoint,ra=!!ba.vLinePoint;ma.selectAll(".spikeline").remove();if(ra||xa){ia=v.combine(ia.plot_bgcolor,ia.paper_bgcolor);if(xa){var la=ba.hLinePoint;var ka=la&&la.xa;xa=la&&la.ya;if("cursor"===xa.spikesnap){var na=ja.pointerX;ka=ja.pointerY}else na=ka._offset+la.x,ka=xa._offset+la.y;var qa=1.5>t.readability(la.color,ia)?v.contrast(ia):la.color;la=xa.spikemode;var ta=xa.spikethickness;qa=xa.spikecolor||qa;var za=F.getPxPosition(Y,xa);if(-1!==la.indexOf("toaxis")||-1!==la.indexOf("across")){if(-1!==
la.indexOf("toaxis")){var Ia=za;var Xa=na}-1!==la.indexOf("across")&&(Ia=xa._counterDomainMin,Xa=xa._counterDomainMax,"free"===xa.anchor&&(Ia=Math.min(Ia,xa.position),Xa=Math.max(Xa,xa.position)),Ia=oa.l+Ia*oa.w,Xa=oa.l+Xa*oa.w);ma.insert("line",":first-child").attr({x1:Ia,x2:Xa,y1:ka,y2:ka,"stroke-width":ta,stroke:qa,"stroke-dasharray":C.dashStyle(xa.spikedash,ta)}).classed("spikeline",!0).classed("crisp",!0);ma.insert("line",":first-child").attr({x1:Ia,x2:Xa,y1:ka,y2:ka,"stroke-width":ta+2,stroke:ia}).classed("spikeline",
!0).classed("crisp",!0)}-1!==la.indexOf("marker")&&ma.insert("circle",":first-child").attr({cx:za+("right"!==xa.side?ta:-ta),cy:ka,r:ta,fill:qa}).classed("spikeline",!0)}if(ra){ka=(ra=ba.vLinePoint)&&ra.xa;xa=ra&&ra.ya;"cursor"===ka.spikesnap?(ba=ja.pointerX,xa=ja.pointerY):(ba=ka._offset+ra.x,xa=xa._offset+ra.y);Ia=1.5>t.readability(ra.color,ia)?v.contrast(ia):ra.color;ja=ka.spikemode;ra=ka.spikethickness;Ia=ka.spikecolor||Ia;Y=F.getPxPosition(Y,ka);if(-1!==ja.indexOf("toaxis")||-1!==ja.indexOf("across")){if(-1!==
ja.indexOf("toaxis")){var $a=Y;var gb=xa}-1!==ja.indexOf("across")&&(gb=ka._counterDomainMin,$a=ka._counterDomainMax,"free"===ka.anchor&&(gb=Math.min(gb,ka.position),$a=Math.max($a,ka.position)),$a=oa.t+(1-$a)*oa.h,gb=oa.t+(1-gb)*oa.h);ma.insert("line",":first-child").attr({x1:ba,x2:ba,y1:$a,y2:gb,"stroke-width":ra,stroke:Ia,"stroke-dasharray":C.dashStyle(ka.spikedash,ra)}).classed("spikeline",!0).classed("crisp",!0);ma.insert("line",":first-child").attr({x1:ba,x2:ba,y1:$a,y2:gb,"stroke-width":ra+
2,stroke:ia}).classed("spikeline",!0).classed("crisp",!0)}-1!==ja.indexOf("marker")&&ma.insert("circle",":first-child").attr({cx:ba,cy:Y-("top"!==ka.side?ra:-ra),r:ra,fill:Ia}).classed("spikeline",!0)}}}function l(Y,ba,ja){if(!ja||ja.length!==Y._hoverdata.length)return!0;for(ba=ja.length-1;0<=ba;ba--){var ma=ja[ba],ia=Y._hoverdata[ba];if(ma.curveNumber!==ia.curveNumber||String(ma.pointNumber)!==String(ia.pointNumber)||String(ma.pointNumbers)!==String(ia.pointNumbers))return!0}return!1}function c(Y,
ba){return A.plainText(Y||"",{len:ba,allowedTags:"br sub sup b i em".split(" ")})}function d(Y,ba){ba=ba.charAt(0);for(var ja=[],ma=[],ia=[],oa=0;oa<Y.length;oa++){var xa=Y[oa];J.traceIs(xa.trace,"bar-like")||J.traceIs(xa.trace,"box-violin")?ia.push(xa):xa.trace[ba+"period"]?ma.push(xa):ja.push(xa)}return ja.concat(ma).concat(ia)}function e(Y,ba,ja){var ma=ba[Y+"a"],ia=ba[Y+"Val"];"category"===ma.type?ia=ma._categoriesMap[ia]:"date"===ma.type&&(Y=ba[Y+"Period"],ia=ma.d2c(void 0!==Y?Y:ia));(ba=ba.cd[ba.index])&&
ba.t&&ba.t.posLetter===ma._id&&("group"===ja.boxmode||"group"===ja.violinmode)&&(ia+=ba.t.dPos);return ia}var f=b("@plotly/d3"),q=b("fast-isnumeric"),t=b("tinycolor2"),w=b("../../lib"),x=w.strTranslate,z=w.strRotate,B=b("../../lib/events"),A=b("../../lib/svg_text_utils"),D=b("../../lib/override_cursor"),C=b("../drawing"),v=b("../color"),y=b("../dragelement"),F=b("../../plots/cartesian/axes"),J=b("../../registry"),K=b("./helpers"),O=b("./constants"),I=b("../legend/defaults"),L=b("../legend/draw"),
H=O.YANGLE;b=Math.PI*H/180;var M=1/Math.sin(b),Q=Math.cos(b),Z=Math.sin(b),ca=O.HOVERARROWSIZE,W=O.HOVERTEXTPAD,T={box:!0,ohlc:!0,violin:!0,candlestick:!0},U={scatter:!0,scattergl:!0,splom:!0};G.hover=function(Y,ba,ja,ma){Y=w.getGraphDiv(Y);w.throttle(Y._fullLayout._uid+O.HOVERID,O.HOVERMINTIME,function(){p(Y,ba,ja,ma)})};G.loneHover=function(Y,ba){var ja=!0;Array.isArray(Y)||(ja=!1,Y=[Y]);Y=Y.map(function(ra){return{color:ra.color||v.defaultLine,x0:ra.x0||ra.x||0,x1:ra.x1||ra.x||0,y0:ra.y0||ra.y||
0,y1:ra.y1||ra.y||0,xLabel:ra.xLabel,yLabel:ra.yLabel,zLabel:ra.zLabel,text:ra.text,name:ra.name,idealAlign:ra.idealAlign,borderColor:ra.borderColor,fontFamily:ra.fontFamily,fontSize:ra.fontSize,fontColor:ra.fontColor,nameLength:ra.nameLength,textAlign:ra.textAlign,trace:ra.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:ra.hovertemplate||!1,eventData:ra.eventData||!1,hovertemplateLabels:ra.hovertemplateLabels||!1}});var ma=f.select(ba.container),ia=ba.outerContainer?
f.select(ba.outerContainer):ma;ma={hovermode:"closest",rotateLabels:!1,bgColor:ba.bgColor||v.background,container:ma,outerContainer:ia};Y=k(Y,ma,ba.gd);var oa=0,xa=0;Y.sort(function(ra,la){return ra.y0-la.y0}).each(function(ra,la){var ka=ra.y0-ra.by/2;ra.offset=ka-5<oa?oa-ka+5:0;oa=ka+ra.by+ra.offset;la===ba.anchorIndex&&(xa=ra.offset)}).each(function(ra){ra.offset-=xa});g(Y,ma.rotateLabels,ba.gd._fullLayout._invScaleX,ba.gd._fullLayout._invScaleY);return ja?Y:Y.node()};var ha=/<extra>([\s\S]*)<\/extra>/},
{"../../lib":803,"../../lib/events":792,"../../lib/override_cursor":814,"../../lib/svg_text_utils":829,"../../plots/cartesian/axes":854,"../../registry":931,"../color":666,"../dragelement":685,"../drawing":688,"../legend/defaults":718,"../legend/draw":719,"./constants":700,"./helpers":702,"@plotly/d3":58,"fast-isnumeric":249,tinycolor2:598}],704:[function(b,N,G){var p=b("../../lib"),n=b("../color"),k=b("./helpers").isUnifiedHover;N.exports=function(m,a,g,h){function r(l){h.font[l]||(h.font[l]=a.legend?
a.legend.font[l]:a.font[l])}h=h||{};a&&k(a.hovermode)&&(h.font||(h.font={}),r("size"),r("family"),r("color"),a.legend?(h.bgcolor||(h.bgcolor=n.combine(a.legend.bgcolor,a.paper_bgcolor)),h.bordercolor||(h.bordercolor=a.legend.bordercolor)):h.bgcolor||(h.bgcolor=a.paper_bgcolor));g("hoverlabel.bgcolor",h.bgcolor);g("hoverlabel.bordercolor",h.bordercolor);g("hoverlabel.namelength",h.namelength);p.coerceFont(g,"hoverlabel.font",h.font);g("hoverlabel.align",h.align)}},{"../../lib":803,"../color":666,"./helpers":702}],
705:[function(b,N,G){var p=b("../../lib"),n=b("./layout_attributes");N.exports=function(k,m){function a(g,h){return void 0!==m[g]?m[g]:p.coerce(k,m,n,g,h)}a("clickmode");return a("hovermode")}},{"../../lib":803,"./layout_attributes":707}],706:[function(b,N,G){var p=b("@plotly/d3"),n=b("../../lib");G=b("../dragelement");var k=b("./helpers"),m=b("./layout_attributes"),a=b("./hover");N.exports={moduleType:"component",name:"fx",constants:b("./constants"),schema:{layout:m},attributes:b("./attributes"),
layoutAttributes:m,supplyLayoutGlobalDefaults:b("./layout_global_defaults"),supplyDefaults:b("./defaults"),supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc"),getDistanceFunction:k.getDistanceFunction,getClosest:k.getClosest,inbox:k.inbox,quadrature:k.quadrature,appendArrayPointValue:k.appendArrayPointValue,castHoverOption:function(g,h,r){return n.castOption(g,h,"hoverlabel."+r)},castHoverinfo:function(g,h,r){return n.castOption(g,r,"hoverinfo",function(l){return n.coerceHoverinfo({hoverinfo:l},
{_module:g._module},h)})},hover:a.hover,unhover:G.unhover,loneHover:a.loneHover,loneUnhover:function(g){g=n.isD3Selection(g)?g:p.select(g);g.selectAll("g.hovertext").remove();g.selectAll(".spikeline").remove()},click:b("./click")}},{"../../lib":803,"../dragelement":685,"./attributes":697,"./calc":698,"./click":699,"./constants":700,"./defaults":701,"./helpers":702,"./hover":703,"./layout_attributes":707,"./layout_defaults":708,"./layout_global_defaults":709,"@plotly/d3":58}],707:[function(b,N,G){G=
b("./constants");b=b("../../plots/font_attributes")({editType:"none"});b.family.dflt=G.HOVERFONT;b.size.dflt=G.HOVERFONTSIZE;N.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified",
"y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:b,align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h",
"v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":883,"./constants":700}],708:[function(b,N,G){var p=b("../../lib"),n=b("./layout_attributes"),k=b("./hovermode_defaults"),m=b("./hoverlabel_defaults");N.exports=function(a,g){function h(d,e){return p.coerce(a,g,n,d,e)}k(a,g)&&(h("hoverdistance"),h("spikedistance"));"select"===h("dragmode")&&h("selectdirection");var r=g._has("mapbox"),l=g._has("geo"),c=g._basePlotModules.length;"zoom"===g.dragmode&&((r||l)&&1===c||r&&l&&2===
c)&&(g.dragmode="pan");m(a,g,h)}},{"../../lib":803,"./hoverlabel_defaults":704,"./hovermode_defaults":705,"./layout_attributes":707}],709:[function(b,N,G){var p=b("../../lib"),n=b("./hoverlabel_defaults"),k=b("./layout_attributes");N.exports=function(m,a){n(m,a,function(g,h){return p.coerce(m,a,k,g,h)})}},{"../../lib":803,"./hoverlabel_defaults":704,"./layout_attributes":707}],710:[function(b,N,G){function p(l,c,d){c=c[d+"axes"];l=Object.keys((l._splomAxes||{})[d]||{});if(Array.isArray(c))return c;
if(l.length)return l}function n(l,c,d,e,f,q){d=c(l+"gap",d);var t=c("domain."+l);c(l+"side",e);l=Array(f);c=t[0];t=(t[1]-c)/(f-d);d=t*(1-d);for(e=0;e<f;e++){var w=c+t*e;l[q?f-1-e:e]=[w,w+d]}return l}function k(l,c,d,e,f){function q(x,z){-1!==c.indexOf(z)&&void 0===e[z]?(t[x]=z,e[z]=x):t[x]=""}var t=Array(d),w;if(Array.isArray(l))for(w=0;w<d;w++)q(w,l[w]);else for(q(0,f),w=1;w<d;w++)q(w,f+(w+1));return t}var m=b("../../lib");G=b("../../lib/regex").counter;var a=b("../../plots/domain").attributes,g=
b("../../plots/cartesian/constants").idRegex,h=b("../../plot_api/plot_template"),r={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[G("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",
values:[g.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[g.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:a({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot",
"top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};N.exports={moduleType:"component",name:"grid",schema:{layout:{grid:r}},layoutAttributes:r,sizeDefaults:function(l,c){function d(v,y){return m.coerce(e,A,r,v,y)}var e=l.grid||{},f=p(c,e,"x"),q=p(c,e,"y");if(l.grid||f||q){l=Array.isArray(e.subplots)&&Array.isArray(e.subplots[0]);var t=Array.isArray(f),w=Array.isArray(q),
x=t&&f!==e.xaxes&&w&&q!==e.yaxes;if(l){var z=e.subplots.length;var B=e.subplots[0].length}else w&&(z=q.length),t&&(B=f.length);var A=h.newContainer(c,"grid");f=d("rows",z);B=d("columns",B);if(1<f*B){l||t||w||"independent"===d("pattern")&&(l=!0);A._hasSubplotGrid=l;t="top to bottom"===d("roworder");w=l?.3:.1;if(x&&c._splomGridDflt){var D=c._splomGridDflt.xside;var C=c._splomGridDflt.yside}A._domains={x:n("x",d,l?.2:.1,D,B),y:n("y",d,w,C,f,t)}}else delete c.grid}},contentDefaults:function(l,c){var d=
c.grid;if(d&&d._domains){var e=l.grid||{};l=c._subplots;var f=d._hasSubplotGrid,q=d.rows,t=d.columns,w="independent"===d.pattern,x,z=d._axisMap={};if(f){var B=e.subplots||[];var A=d.subplots=Array(q);var D=1;for(c=0;c<q;c++){var C=A[c]=Array(t),v=B[c]||[];for(x=0;x<t;x++)if(w?(e=1===D?"xy":"x"+D+"y"+D,D++):e=v[x],C[x]="",-1!==l.cartesian.indexOf(e)){var y=e.indexOf("y");var F=e.slice(0,y);y=e.slice(y);void 0!==z[F]&&z[F]!==x||void 0!==z[y]&&z[y]!==c||(C[x]=e,z[F]=x,z[y]=c)}}}else y=p(c,e,"x"),c=p(c,
e,"y"),d.xaxes=k(y,l.xaxis,t,z,"x"),d.yaxes=k(c,l.yaxis,q,z,"y");w=d._anchors={};x="top to bottom"===d.roworder;for(var J in z)if(c=J.charAt(0),e=d[c+"side"],8>e.length)w[J]="free";else if("x"===c)if("t"===e.charAt(0)===x?(c=0,B=1,D=q):(c=q-1,D=B=-1),f)for(F=z[J];c!==D;c+=B){if(e=A[c][F])if(y=e.indexOf("y"),e.slice(0,y)===J){w[J]=e.slice(y);break}}else for(;c!==D;c+=B){if(y=d.yaxes[c],-1!==l.cartesian.indexOf(J+y)){w[J]=y;break}}else if("l"===e.charAt(0)?(c=0,B=1,D=t):(c=t-1,D=B=-1),f)for(F=z[J];c!==
D;c+=B){if(e=A[F][c])if(y=e.indexOf("y"),e.slice(y)===J){w[J]=e.slice(0,y);break}}else for(;c!==D;c+=B)if(F=d.xaxes[c],-1!==l.cartesian.indexOf(F+J)){w[J]=F;break}}}}},{"../../lib":803,"../../lib/regex":820,"../../plot_api/plot_template":843,"../../plots/cartesian/constants":861,"../../plots/domain":882}],711:[function(b,N,G){G=b("../../plots/cartesian/constants");var p=b("../../plot_api/plot_template").templatedArray;b("../../constants/axis_placeable_objects");N.exports=p("image",{visible:{valType:"boolean",
dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",
dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",G.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",G.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":772,"../../plot_api/plot_template":843,
"../../plots/cartesian/constants":861}],712:[function(b,N,G){var p=b("fast-isnumeric"),n=b("../../lib/to_log_range");N.exports=function(k,m,a,g){m=m||{};var h="log"===a&&"linear"===m.type;a="linear"===a&&"log"===m.type;if(h||a){k=k._fullLayout.images;a=m._id.charAt(0);for(var r,l,c=0;c<k.length;c++)if(r=k[c],l="images["+c+"].",r[a+"ref"]===m._id){var d=r[a];r=r["size"+a];h?(d=n(d,m.range),r=r/Math.pow(10,d)/2,r=2*Math.log(r+Math.sqrt(1+r*r))/Math.LN10):(d=Math.pow(10,d),r=d*(Math.pow(10,r/2)-Math.pow(10,
-r/2)));p(d)?p(r)||(r=null):r=d=null;g(l+a,d);g(l+"size"+a,r)}}}},{"../../lib/to_log_range":831,"fast-isnumeric":249}],713:[function(b,N,G){function p(g,h,r){function l(q,t){return n.coerce(g,h,a,q,t)}var c=l("source");if(!l("visible",!!c))return h;l("layer");l("xanchor");l("yanchor");l("sizex");l("sizey");l("sizing");l("opacity");r={_fullLayout:r};c=["x","y"];for(var d=0;2>d;d++){var e=c[d],f=k.coerceRef(g,h,r,e,"paper",void 0);"paper"!==f&&k.getFromId(r,f)._imgIndices.push(h._index);k.coercePosition(h,
r,l,f,e,0)}return h}var n=b("../../lib"),k=b("../../plots/cartesian/axes"),m=b("../../plots/array_container_defaults"),a=b("./attributes");N.exports=function(g,h){m(g,h,{name:"images",handleItemDefaults:p})}},{"../../lib":803,"../../plots/array_container_defaults":849,"../../plots/cartesian/axes":854,"./attributes":711}],714:[function(b,N,G){var p=b("@plotly/d3"),n=b("../drawing"),k=b("../../plots/cartesian/axes"),m=b("../../plots/cartesian/axis_ids"),a=b("../../constants/xmlns_namespaces");N.exports=
function(g){function h(z){var B=p.select(this);if(this._imgSrc!==z.source)if(B.attr("xmlns",a.svg),z.source&&"data:"===z.source.slice(0,5))B.attr("xlink:href",z.source),this._imgSrc=z.source;else{var A=new Promise(function(D){function C(){B.remove();D()}var v=new Image;this.img=v;v.setAttribute("crossOrigin","anonymous");v.onerror=C;v.onload=function(){var y=document.createElement("canvas");y.width=this.width;y.height=this.height;y.getContext("2d").drawImage(this,0,0);y=y.toDataURL("image/png");B.attr("xlink:href",
y);D()};B.on("error",C);this._imgSrc=v.src=z.source}.bind(this));g._promises.push(A)}}function r(z){var B=p.select(this),A=k.getFromId(g,z.xref),D=k.getFromId(g,z.yref),C="domain"===k.getRefType(z.xref),v="domain"===k.getRefType(z.yref),y=l._size;var F=void 0!==A?"string"===typeof z.xref&&C?A._length*z.sizex:Math.abs(A.l2p(z.sizex)-A.l2p(0)):z.sizex*y.w;var J=void 0!==D?"string"===typeof z.yref&&v?D._length*z.sizey:Math.abs(D.l2p(z.sizey)-D.l2p(0)):z.sizey*y.h;var K=F*x.x[z.xanchor].offset,O=J*x.y[z.yanchor].offset,
I=x.x[z.xanchor].sizing+x.y[z.yanchor].sizing;C=void 0!==A?"string"===typeof z.xref&&C?A._length*z.x+A._offset:A.r2p(z.x)+A._offset:z.x*y.w+y.l;C+=K;v=void 0!==D?"string"===typeof z.yref&&v?D._length*(1-z.y)+D._offset:D.r2p(z.y)+D._offset:y.h-z.y*y.h+y.t;switch(z.sizing){case "fill":I+=" slice";break;case "stretch":I="none"}B.attr({x:C,y:v+O,width:F,height:J,preserveAspectRatio:I,opacity:z.opacity});A=A&&"domain"!==k.getRefType(z.xref)?A._id:"";z=D&&"domain"!==k.getRefType(z.yref)?D._id:"";z=A+z;
n.setClipUrl(B,z?"clip"+l._uid+z:null,g)}var l=g._fullLayout,c=[],d={},e=[],f;for(f=0;f<l.images.length;f++){var q=l.images[f];if(q.visible)if("below"===q.layer&&"paper"!==q.xref&&"paper"!==q.yref){var t=m.ref2id(q.xref)+m.ref2id(q.yref);var w=l._plots[t];w?(w.mainplot&&(t=w.mainplot.id),d[t]||(d[t]=[]),d[t].push(q)):e.push(q)}else"above"===q.layer?c.push(q):e.push(q)}var x={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},
middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}}};f=l._imageLowerLayer.selectAll("image").data(e);t=l._imageUpperLayer.selectAll("image").data(c);f.enter().append("image");t.enter().append("image");f.exit().remove();t.exit().remove();f.each(function(z){h.bind(this)(z);r.bind(this)(z)});t.each(function(z){h.bind(this)(z);r.bind(this)(z)});c=Object.keys(l._plots);for(f=0;f<c.length;f++)t=c[f],e=l._plots[t],e.imagelayer&&(t=e.imagelayer.selectAll("image").data(d[t]||[]),t.enter().append("image"),
t.exit().remove(),t.each(function(z){h.bind(this)(z);r.bind(this)(z)}))}},{"../../constants/xmlns_namespaces":780,"../../plots/cartesian/axes":854,"../../plots/cartesian/axis_ids":858,"../drawing":688,"@plotly/d3":58}],715:[function(b,N,G){N.exports={moduleType:"component",name:"images",layoutAttributes:b("./attributes"),supplyLayoutDefaults:b("./defaults"),includeBasePlot:b("../../plots/cartesian/include_components")("images"),draw:b("./draw"),convertCoords:b("./convert_coords")}},{"../../plots/cartesian/include_components":867,
"./attributes":711,"./convert_coords":712,"./defaults":713,"./draw":714}],716:[function(b,N,G){G=b("../../plots/font_attributes");b=b("../color/attributes");N.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:b.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:G({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],
extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},x:{valType:"number",min:-2,max:3,
editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:G({editType:"legend"}),side:{valType:"enumerated",
values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":883,"../color/attributes":665}],717:[function(b,N,G){N.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],718:[function(b,N,G){var p=b("../../registry"),n=b("../../lib"),k=b("../../plot_api/plot_template"),m=b("./attributes"),a=b("../../plots/layout_attributes"),
g=b("./helpers");N.exports=function(h,r,l){function c(z,B){return n.coerce(d,x,m,z,B)}for(var d=h.legend||{},e=0,f=!1,q="normal",t=0;t<l.length;t++){var w=l[t];if(w.visible){if(w.showlegend||w._dfltShowLegend&&!(w._module&&w._module.attributes&&w._module.attributes.showlegend&&!1===w._module.attributes.showlegend.dflt))e++,w.showlegend&&(f=!0,(p.traceIs(w,"pie-like")||!0===w._input.showlegend)&&e++);if(p.traceIs(w,"bar")&&"stack"===r.barmode||-1!==["tonextx","tonexty"].indexOf(w.fill))q=g.isGrouped({traceorder:q})?
"grouped+reversed":"reversed";void 0!==w.legendgroup&&""!==w.legendgroup&&(q=g.isReversed({traceorder:q})?"reversed+grouped":"grouped")}}l=n.coerce(h,r,a,"showlegend",f&&1<e);if(!1!==l||d.uirevision){var x=k.newContainer(r,"legend");c("uirevision",r.uirevision);!1!==l&&(c("bgcolor",r.paper_bgcolor),c("bordercolor"),c("borderwidth"),l=n.coerceFont(c,"font",r.font),(e="h"===c("orientation"))?(f=0,p.getComponentMethod("rangeslider","isVisible")(h.xaxis)?(h=1.1,t="bottom"):(h=-.1,t="top")):(f=1.02,h=
1,t="auto"),c("traceorder",q),g.isGrouped(r.legend)&&c("tracegroupgap"),c("itemsizing"),c("itemwidth"),c("itemclick"),c("itemdoubleclick"),c("x",f),c("xanchor"),c("y",h),c("yanchor",t),c("valign"),n.noneOrAll(d,x,["x","y"]),c("title.text")&&(c("title.side",e?"left":"top"),r=n.extendFlat({},l,{size:n.bigFont(l.size)}),n.coerceFont(c,"title.font",r)))}}},{"../../lib":803,"../../plot_api/plot_template":843,"../../plots/layout_attributes":908,"../../registry":931,"./attributes":716,"./helpers":722}],
719:[function(b,N,G){function p(I,L){var H=I._fullLayout,M="legend"+H._uid,Q=L._inHover;if(Q){var Z=L.layer;M+="-hover"}else Z=H._infolayer;if(Z){I._legendMouseDownTime||(I._legendMouseDownTime=0);if(Q){if(!L.entries)return;var ca=J(L.entries,L)}else{if(!I.calcdata)return;ca=H.showlegend&&J(I.calcdata,L)}var W=H.hiddenlabels||[];if(!(Q||H.showlegend&&ca.length))return Z.selectAll(".legend").remove(),H._topdefs.select("#"+M).remove(),q.autoMargin(I,"legend");var T=f.ensureSingle(Z,"g","legend",function(xa){Q||
xa.attr("pointer-events","all")}),U=f.ensureSingleById(H._topdefs,"clipPath",M,function(xa){xa.append("rect")}),ha=f.ensureSingle(T,"rect","bg",function(xa){xa.attr("shape-rendering","crispEdges")});ha.call(B.stroke,L.bordercolor).call(B.fill,L.bgcolor).style("stroke-width",L.borderwidth+"px");var Y=f.ensureSingle(T,"g","scrollbox"),ba=L.title;L._titleWidth=0;L._titleHeight=0;if(ba.text){var ja=f.ensureSingle(Y,"text","legendtitletext");ja.attr("text-anchor","start").call(z.font,ba.font).text(ba.text);
g(ja,Y,I,L,1)}else Y.selectAll(".legendtitletext").remove();var ma=f.ensureSingle(T,"rect","scrollbar",function(xa){xa.attr(C.scrollBarEnterAttrs).call(B.fill,C.scrollBarColor)}),ia=Y.selectAll("g.groups").data(ca);ia.enter().append("g").attr("class","groups");ia.exit().remove();var oa=ia.selectAll("g.traces").data(f.identity);oa.enter().append("g").attr("class","traces");oa.exit().remove();oa.style("opacity",function(xa){var ra=xa[0].trace;return t.traceIs(ra,"pie-like")?-1!==W.indexOf(xa[0].label)?
.5:1:"legendonly"===ra.visible?.5:1}).each(function(){e.select(this).call(k,I,L)}).call(K,I,L).each(function(){Q||e.select(this).call(a,I)});f.syncOrAsync([q.previousPromises,function(){return r(I,ia,oa,L)},function(){function xa(rb,Ab,Ma){L._scrollY=I._fullLayout.legend._scrollY=rb;z.setTranslate(Y,0,-rb);z.setRect(ma,L._width,C.scrollBarMargin+rb*Ma,C.scrollBarWidth,Ab);U.select("rect").attr("y",la+rb)}if(Q||!l(I)){var ra=H._size,la=L.borderwidth,ka=ra.l+ra.w*L.x-y[c(L)]*L._width,na=ra.t+ra.h*(1-
L.y)-y[d(L)]*L._effHeight;if(!Q&&H.margin.autoexpand){var qa=ka,ta=na;ka=f.constrain(ka,0,H.width-L._width);na=f.constrain(na,0,H.height-L._effHeight);ka!==qa&&f.log("Constrain legend.x to make legend fit inside graph");na!==ta&&f.log("Constrain legend.y to make legend fit inside graph")}Q||z.setTranslate(T,ka,na);ma.on(".drag",null);T.on("wheel",null);if(Q||L._height<=L._maxHeight||I._context.staticPlot)ka=L._effHeight,Q&&(ka=L._height),ha.attr({width:L._width-la,height:ka-la,x:la/2,y:la/2}),z.setTranslate(Y,
0,0),U.select("rect").attr({width:L._width-2*la,height:ka-2*la,x:la,y:la}),z.setClipUrl(Y,M,I),z.setRect(ma,0,0,0,0),delete L._scrollY;else{var za=Math.max(C.scrollBarMinHeight,L._effHeight*L._effHeight/L._height),Ia=L._effHeight-za-2*C.scrollBarMargin,Xa=L._height-L._effHeight,$a=Ia/Xa,gb=Math.min(L._scrollY||0,Xa);ha.attr({width:L._width-2*la+C.scrollBarWidth+C.scrollBarMargin,height:L._effHeight-la,x:la/2,y:la/2});U.select("rect").attr({width:L._width-2*la+C.scrollBarWidth+C.scrollBarMargin,height:L._effHeight-
2*la,x:la,y:la+gb});z.setClipUrl(Y,M,I);xa(gb,za,$a);T.on("wheel",function(){gb=f.constrain(L._scrollY+e.event.deltaY/Ia*Xa,0,Xa);xa(gb,za,$a);0!==gb&&gb!==Xa&&e.event.preventDefault()});var sb,jb,vb;ka=e.behavior.drag().on("dragstart",function(){var rb=e.event.sourceEvent;sb="touchstart"===rb.type?rb.changedTouches[0].clientY:rb.clientY;vb=gb}).on("drag",function(){var rb=e.event.sourceEvent;2===rb.buttons||rb.ctrlKey||(jb="touchmove"===rb.type?rb.changedTouches[0].clientY:rb.clientY,gb=f.constrain((jb-
sb)/$a+vb,0,Xa),xa(gb,za,$a))});ma.call(ka);ka=e.behavior.drag().on("dragstart",function(){var rb=e.event.sourceEvent;"touchstart"===rb.type&&(sb=rb.changedTouches[0].clientY,vb=gb)}).on("drag",function(){var rb=e.event.sourceEvent;"touchmove"===rb.type&&(jb=rb.changedTouches[0].clientY,gb=f.constrain((sb-jb)/$a+vb,0,Xa),xa(gb,za,$a))});Y.call(ka)}if(I._context.edits.legendPosition){var qb,Bb,ub,wb;T.classed("cursor-move",!0);x.init({element:T.node(),gd:I,prepFn:function(){var rb=z.getTranslate(T);
ub=rb.x;wb=rb.y},moveFn:function(rb,Ab){rb=ub+rb;Ab=wb+Ab;z.setTranslate(T,rb,Ab);qb=x.align(rb,0,ra.l,ra.l+ra.w,L.xanchor);Bb=x.align(Ab,0,ra.t+ra.h,ra.t,L.yanchor)},doneFn:function(){void 0!==qb&&void 0!==Bb&&t.call("_guiRelayout",I,{"legend.x":qb,"legend.y":Bb})},clickFn:function(rb,Ab){var Ma=Z.selectAll("g.traces").filter(function(){var La=this.getBoundingClientRect();return Ab.clientX>=La.left&&Ab.clientX<=La.right&&Ab.clientY>=La.top&&Ab.clientY<=La.bottom});0<Ma.size()&&n(I,T,Ma,rb,Ab)}})}}}],
I)}}function n(I,L,H,M,Q){var Z=H.data()[0][0].trace;Q={event:Q,node:H.node(),curveNumber:Z.index,expandedIndex:Z._expandedIndex,data:I.data,layout:I.layout,frames:I._transitionData._frames,config:I._context,fullData:I._fullData,fullLayout:I._fullLayout};Z._group&&(Q.group=Z._group);t.traceIs(Z,"pie-like")&&(Q.label=H.datum()[0].label);!1!==w.triggerHandler(I,"plotly_legendclick",Q)&&(1===M?L._clickTimeout=setTimeout(function(){I._fullLayout&&D(H,I,M)},I._context.doubleClickDelay):2===M&&(L._clickTimeout&&
clearTimeout(L._clickTimeout),I._legendMouseDownTime=0,!1!==w.triggerHandler(I,"plotly_legenddoubleclick",Q)&&D(H,I,M)))}function k(I,L,H){var M=I.data()[0][0],Q=M.trace,Z=t.traceIs(Q,"pie-like"),ca=!H._inHover&&L._context.edits.legendText&&!Z,W=H._maxNameLength;if(M.groupTitle){Z=M.groupTitle.text;var T=M.groupTitle.font}else T=H.font,H.entries?Z=M.text:(Z=Z?M.label:Q.name,Q._meta&&(Z=f.templateString(Z,Q._meta)));var U=f.ensureSingle(I,"text","legendtext");U.attr("text-anchor","start").call(z.font,
T).text(ca?m(Z,W):Z);A.positionText(U,H.itemwidth+2*C.itemGap,0);if(ca)U.call(A.makeEditable,{gd:L,text:Z}).call(g,I,L,H).on("edit",function(ha){this.text(m(ha,W)).call(g,I,L,H);var Y=M.trace._fullInput||{},ba={};t.hasTransform(Y,"groupby")?(ba=t.getTransformIndices(Y,"groupby"),Y=f.keyedContainer(Y,"transforms["+ba[ba.length-1]+"].styles","target","value.name"),Y.set(M.trace._group,ha),ba=Y.constructUpdate()):ba.name=ha;return t.call("_guiRestyle",L,ba,Q.index)});else g(U,I,L,H)}function m(I,L){L=
Math.max(4,L);if(I&&I.trim().length>=L/2)return I;I=I||"";for(L-=I.length;0<L;L--)I+=" ";return I}function a(I,L){var H=L._context.doubleClickDelay,M,Q=1,Z=f.ensureSingle(I,"rect","legendtoggle",function(ca){L._context.staticPlot||ca.style("cursor","pointer").attr("pointer-events","all");ca.call(B.fill,"rgba(0,0,0,0)")});L._context.staticPlot||(Z.on("mousedown",function(){M=(new Date).getTime();M-L._legendMouseDownTime<H?Q+=1:(Q=1,L._legendMouseDownTime=M)}),Z.on("mouseup",function(){if(!L._dragged&&
!L._editing){var ca=L._fullLayout.legend;(new Date).getTime()-L._legendMouseDownTime>H&&(Q=Math.max(Q-1,1));n(L,ca,I,Q,e.event)}}))}function g(I,L,H,M,Q){M._inHover&&I.attr("data-notex",!0);A.convertToTspans(I,H,function(){var Z=M,ca=L.data()[0][0];if(Z._inHover||!ca||ca.trace.showlegend){var W=L.select("g[class*\x3dmath-group]"),T=W.node();Z||(Z=H._fullLayout.legend);var U=Z.borderwidth,ha=(1===Q?Z.title.font:ca.groupTitle?ca.groupTitle.font:Z.font).size*v;if(T){var Y=z.bBox(T);T=Y.height;Y=Y.width;
1===Q?z.setTranslate(W,U,U+.75*T):z.setTranslate(W,0,.25*T)}else{W=L.select(1===Q?".legendtitletext":".legendtext");var ba=A.lineCount(W);Y=W.node();T=ha*ba;Y=Y?z.bBox(Y).width:0;1===Q?("left"===Z.title.side&&(Y+=2*C.itemGap),A.positionText(W,U+C.titlePad,U+ha)):(U=2*C.itemGap+Z.itemwidth,ca.groupTitle&&(U=C.itemGap,Y-=Z.itemwidth),A.positionText(W,U,-ha*((ba-1)/2-.3)))}1===Q?(Z._titleWidth=Y,Z._titleHeight=T):(ca.lineHeight=ha,ca.height=Math.max(T,16)+3,ca.width=Y)}else L.remove()})}function h(I){var L=
0,H=0,M=I.title.side;M&&(-1!==M.indexOf("left")&&(L=I._titleWidth),-1!==M.indexOf("top")&&(H=I._titleHeight));return[L,H]}function r(I,L,H,M){var Q=I._fullLayout;M||(M=Q.legend);var Z=Q._size,ca=O.isVertical(M),W=O.isGrouped(M),T=M.borderwidth,U=2*T,ha=C.itemGap,Y=M.itemwidth+2*ha,ba=2*(T+ha),ja=d(M),ma=0>M.y||0===M.y&&"top"===ja,ia=1<M.y||1===M.y&&"bottom"===ja,oa=M.tracegroupgap;M._maxHeight=Math.max(ma||ia?Q.height/2:Z.h,30);var xa=0;M._width=0;M._height=0;var ra=h(M);if(ca)H.each(function(qb){var Bb=
qb[0].height;z.setTranslate(this,T+ra[0],T+ra[1]+M._height+Bb/2+ha);M._height+=Bb;M._width=Math.max(M._width,qb[0].width)}),xa=Y+M._width,M._width+=ha+Y+U,M._height+=ba,W&&(L.each(function(qb,Bb){z.setTranslate(this,0,Bb*M.tracegroupgap)}),M._height+=(M._lgroupsLength-1)*M.tracegroupgap);else{ja=c(M);var la=1<M.x||1===M.x&&"left"===ja;ma=ia||ma;Q=Q.width/2;M._maxWidth=Math.max(0>M.x||0===M.x&&"right"===ja?ma&&"left"===ja?Z.l+Z.w:Q:la?ma&&"right"===ja?Z.r+Z.w:Q:Z.w,2*Y);var ka=0,na=0;H.each(function(qb){qb=
qb[0].width+Y;ka=Math.max(ka,qb);na+=qb});xa=null;var qa=0;if(W){var ta=0,za=0,Ia=0;L.each(function(){var qb=0,Bb=0;e.select(this).selectAll("g.traces").each(function(wb){var rb=wb[0].height;z.setTranslate(this,ra[0],ra[1]+T+ha+rb/2+Bb);Bb+=rb;qb=Math.max(qb,Y+wb[0].width)});ta=Math.max(ta,Bb);var ub=qb+ha;ub+T+za>M._maxWidth&&(qa=Math.max(qa,za),za=0,Ia+=ta+oa,ta=Bb);z.setTranslate(this,za,Ia);za+=ub});M._width=Math.max(qa,za)+T;M._height=Ia+ta+ba}else{L=H.size();var Xa=na+U+(L-1)*ha<M._maxWidth,
$a=0,gb=0,sb=0,jb=0;H.each(function(qb){var Bb=qb[0].height;qb=Y+qb[0].width;var ub=(Xa?qb:ka)+ha;ub+T+gb-ha>=M._maxWidth&&(qa=Math.max(qa,jb),gb=0,sb+=$a,M._height+=$a,$a=0);z.setTranslate(this,ra[0]+T+gb,ra[1]+T+sb+Bb/2+ha);jb=gb+qb+ha;gb+=ub;$a=Math.max($a,Bb)});Xa?(M._width=gb+U,M._height=$a+ba):(M._width=Math.max(qa,jb)+U,M._height+=$a+ba)}}M._width=Math.ceil(Math.max(M._width+ra[0],M._titleWidth+2*(T+C.titlePad)));M._height=Math.ceil(Math.max(M._height+ra[1],M._titleHeight+2*(T+C.itemGap)));
M._effHeight=Math.min(M._height,M._maxHeight);I=I._context.edits;var vb=I.legendText||I.legendPosition;H.each(function(qb){var Bb=e.select(this).select(".legendtoggle"),ub=qb[0].height;qb=vb?Y:xa||Y+qb[0].width;ca||(qb+=ha/2);z.setRect(Bb,0,-ub/2,qb,ub)})}function l(I){var L=I._fullLayout.legend,H=c(L),M=d(L);return q.autoMargin(I,"legend",{x:L.x,y:L.y,l:L._width*y[H],r:L._width*F[H],b:L._effHeight*F[M],t:L._effHeight*y[M]})}function c(I){return f.isRightAnchor(I)?"right":f.isCenterAnchor(I)?"center":
"left"}function d(I){return f.isBottomAnchor(I)?"bottom":f.isMiddleAnchor(I)?"middle":"top"}var e=b("@plotly/d3"),f=b("../../lib"),q=b("../../plots/plots"),t=b("../../registry"),w=b("../../lib/events"),x=b("../dragelement"),z=b("../drawing"),B=b("../color"),A=b("../../lib/svg_text_utils"),D=b("./handle_click"),C=b("./constants");G=b("../../constants/alignment");var v=G.LINE_SPACING,y=G.FROM_TL,F=G.FROM_BR,J=b("./get_legend_data"),K=b("./style"),O=b("./helpers");N.exports=function(I,L){L||(L=I._fullLayout.legend||
{});return p(I,L)}},{"../../constants/alignment":771,"../../lib":803,"../../lib/events":792,"../../lib/svg_text_utils":829,"../../plots/plots":917,"../../registry":931,"../color":666,"../dragelement":685,"../drawing":688,"./constants":717,"./get_legend_data":720,"./handle_click":721,"./helpers":722,"./style":724,"@plotly/d3":58}],720:[function(b,N,G){var p=b("../../registry"),n=b("./helpers");N.exports=function(k,m){function a(A,D){""!==A&&n.isGrouped(m)?-1===l.indexOf(A)?(l.push(A),c=!0,r[A]=[D]):
r[A].push(D):(A="~~i"+e,l.push(A),r[A]=[D],e++)}var g=n.isGrouped(m),h=n.isReversed(m),r={},l=[],c=!1,d={},e=0,f=0,q;for(q=0;q<k.length;q++){var t=k[q];var w=t[0];var x=w.trace,z=x.legendgroup;if(m._inHover||x.visible&&x.showlegend)if(p.traceIs(x,"pie-like"))for(d[z]||(d[z]={}),w=0;w<t.length;w++){var B=t[w].label;d[z][B]||(a(z,{label:B,color:t[w].color,i:t[w].i,trace:x,pts:t[w].pts}),d[z][B]=!0,f=Math.max(f,(B||"").length))}else a(z,w),f=Math.max(f,(x.name||"").length)}if(!l.length)return[];w=!c||
!g;k=[];for(q=0;q<l.length;q++)g=r[l[q]],w?k.push(g[0]):k.push(g);w&&(k=[k]);for(q=0;q<k.length;q++){g=Infinity;for(w=0;w<k[q].length;w++)d=k[q][w].trace.legendrank,g>d&&(g=d);k[q][0]._groupMinRank=g;k[q][0]._preGroupSort=q}g=function(A,D){return A.trace.legendrank-D.trace.legendrank||A._preSort-D._preSort};k.forEach(function(A,D){A[0]._preGroupSort=D});k.sort(function(A,D){return A[0]._groupMinRank-D[0]._groupMinRank||A[0]._preGroupSort-D[0]._preGroupSort});for(q=0;q<k.length;q++){k[q].forEach(function(A,
D){A._preSort=D});k[q].sort(g);d=k[q][0].trace;t=null;for(w=0;w<k[q].length;w++)if((x=k[q][w].trace.legendgrouptitle)&&x.text){t=x;break}h&&k[q].reverse();if(t){x=!1;for(w=0;w<k[q].length;w++)if(p.traceIs(k[q][w].trace,"pie-like")){x=!0;break}k[q].unshift({i:-1,groupTitle:t,noClick:x,trace:{showlegend:d.showlegend,legendgroup:d.legendgroup,visible:d.visible}})}for(w=0;w<k[q].length;w++)k[q][w]=[k[q][w]]}m._lgroupsLength=k.length;m._maxNameLength=f;return k}},{"../../registry":931,"./helpers":722}],
721:[function(b,N,G){var p=b("../../lib"),n=b("../../registry"),k=!0;N.exports=function(m,a,g){function h(C,v,y){var F=t.indexOf(C),J=q[v];J||(J=q[v]=[]);-1===t.indexOf(C)&&(t.push(C),F=t.length-1);J[F]=y;return F}function r(C,v){var y=C._fullInput;if(n.hasTransform(y,"groupby")){var F=w[y.index];F||(F=n.getTransformIndices(y,"groupby"),F=p.keyedContainer(y,"transforms["+F[F.length-1]+"].styles","target","value.visible"),w[y.index]=F);var J=F.get(C._group);void 0===J&&(J=!0);!1!==J&&F.set(C._group,
v);x[y.index]=h(y.index,"visible",!1===y.visible?!1:!0)}else h(y.index,"visible",!1===y.visible?!1:v)}var l=a._fullLayout;if(!a._dragged&&!a._editing){var c=l.legend.itemclick,d=l.legend.itemdoubleclick;1===g&&"toggle"===c&&"toggleothers"===d&&k&&a.data&&a._context.showTips&&p.notifier(p._(a,"Double-click on legend to isolate one trace"),"long");k=!1;var e;1===g?e=c:2===g&&(e=d);if(e){var f=l.hiddenlabels?l.hiddenlabels.slice():[];m=m.data()[0][0];if(!m.groupTitle||!m.noClick){g=a._fullData;l=m.trace;
c=l.legendgroup;var q={},t=[],w=[],x=[];if(n.traceIs(l,"pie-like")){var z=m.label;m=f.indexOf(z);"toggle"===e?-1===m?f.push(z):f.splice(m,1):"toggleothers"===e&&(f=[],a.calcdata[0].forEach(function(C){z!==C.label&&f.push(C.label)}),a._fullLayout.hiddenlabels&&a._fullLayout.hiddenlabels.length===f.length&&-1===m&&(f=[]));n.call("_guiRelayout",a,"hiddenlabels",f)}else{d=c&&c.length;var B=[];if(d)for(m=0;m<g.length;m++){var A=g[m];A.visible&&A.legendgroup===c&&B.push(m)}if("toggle"===e){switch(l.visible){case !0:var D=
"legendonly";break;case !1:D=!1;break;case "legendonly":D=!0}if(d)for(m=0;m<g.length;m++)!1!==g[m].visible&&g[m].legendgroup===c&&r(g[m],D);else r(l,D)}else if("toggleothers"===e){B=!0;for(m=0;m<g.length;m++)if(A=g[m]===l,e=!0!==g[m].showlegend,!(A||e||(A=d&&g[m].legendgroup===c,A||!0!==g[m].visible||n.traceIs(g[m],"notLegendIsolatable")))){B=!1;break}for(m=0;m<g.length;m++)if(!1!==g[m].visible&&!n.traceIs(g[m],"notLegendIsolatable"))switch(l.visible){case "legendonly":r(g[m],!0);break;case !0:D=
B?!0:"legendonly",A=g[m]===l,e=!0!==g[m].showlegend&&!g[m].legendgroup,A=A||d&&g[m].legendgroup===c,r(g[m],A||e?!0:D)}}for(m=0;m<w.length;m++)if(e=w[m])for(c=e.constructUpdate(),D=Object.keys(c),e=0;e<D.length;e++)g=D[e],l=q[g]=q[g]||[],l[x[m]]=c[g];l=Object.keys(q);for(m=0;m<l.length;m++)for(g=l[m],e=0;e<t.length;e++)q[g].hasOwnProperty(e)||(q[g][e]=void 0);n.call("_guiRestyle",a,q,t)}}}}}},{"../../lib":803,"../../registry":931}],722:[function(b,N,G){G.isGrouped=function(p){return-1!==(p.traceorder||
"").indexOf("grouped")};G.isVertical=function(p){return"h"!==p.orientation};G.isReversed=function(p){return-1!==(p.traceorder||"").indexOf("reversed")}},{}],723:[function(b,N,G){N.exports={moduleType:"component",name:"legend",layoutAttributes:b("./attributes"),supplyLayoutDefaults:b("./defaults"),draw:b("./draw"),style:b("./style")}},{"./attributes":716,"./defaults":718,"./draw":719,"./style":724}],724:[function(b,N,G){function p(q,t){return(t?"radial":"horizontal")+(q?"":"reversed")}function n(q){var t=
q[0].trace;q=t.contours;var w=c.hasLines(t),x=c.hasMarkers(t);t=t.visible&&t.fill&&"none"!==t.fill;var z=!1,B=!1;if(q){var A=q.coloring;"lines"===A?z=!0:w="none"===A||"heatmap"===A||q.showlines;if("constraint"===q.type)t="\x3d"!==q._operation;else if("fill"===A||"heatmap"===A)B=!0}return{showMarker:x,showLine:w,showFill:t,showGradientLine:z,showGradientFill:B,anyLine:w||z,anyFill:t||B}}var k=b("@plotly/d3"),m=b("../../registry"),a=b("../../lib"),g=a.strTranslate,h=b("../drawing"),r=b("../color"),
l=b("../colorscale/helpers").extractOpts,c=b("../../traces/scatter/subtypes"),d=b("../../traces/pie/style_one"),e=b("../../traces/pie/helpers").castOption,f=b("./constants");N.exports=function(q,t,w){function x(y,F,J){var K=y[0].trace,O=K.marker||{},I=O.line||{},L=J?K.visible&&K.type===J:m.traceIs(K,"bar");y=k.select(F).select("g.legendpoints").selectAll("path.legend"+J).data(L?[y]:[]);y.enter().append("path").classed("legend"+J,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",C);y.exit().remove();
y.each(function(H){var M=k.select(this);H=H[0];var Q=v(H.mlw,O.line,5,2);M.style("stroke-width",Q+"px");var Z=H.mcc;if(!w._inHover&&"mc"in H){Z=l(O);var ca=Z.mid;void 0===ca&&(ca=(Z.max+Z.min)/2);Z=h.tryColorscale(O,"")(ca)}var W=Z||H.mc||O.color,T=(ca=O.pattern)&&h.getPatternAttr(ca.shape,0,"");if(T){W=h.getPatternAttr(ca.bgcolor,0,null);var U=h.getPatternAttr(ca.fgcolor,0,null),ha=ca.fgopacity;var Y=(Y=ca.size)&&a.isArrayOrTypedArray(Y)?8:10<Y?10:Y;var ba=(ba=ca.solidity)&&a.isArrayOrTypedArray(ba)?
.5:1<ba?1:ba;M.call(h.pattern,"legend",t,"legend-"+K.uid,T,Y,ba,Z,ca.fillmode,W,U,ha)}else M.call(r.fill,W);Q&&r.stroke(M,H.mlc||I.color)})}function z(y,F,J){var K=y[0],O=K.trace,I=J?O.visible&&O.type===J:m.traceIs(O,J);y=k.select(F).select("g.legendpoints").selectAll("path.legend"+J).data(I?[y]:[]);y.enter().append("path").classed("legend"+J,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",C);y.exit().remove();y.size()&&(J=(O.marker||{}).line,F=v(e(J.width,K.pts),J,5,2),O=a.minExtend(O,{marker:{line:{width:F}}}),
O.marker.line.color=J.color,K=a.minExtend(K,{trace:O}),d(y,K,O))}var B=t._fullLayout;w||(w=B.legend);var A="constant"===w.itemsizing,D=w.itemwidth,C=g((D+2*f.itemGap)/2,0),v=function(y,F,J,K){if(!(y+1))if(F&&0<F.width)y=F.width;else return 0;return A?K:Math.min(y,J)};q.each(function(y){var F=k.select(this);F=a.ensureSingle(F,"g","layers");F.style("opacity",y[0].trace.opacity);var J=w.valign,K=y[0].lineHeight,O=y[0].height;"middle"!==J&&K&&O?F.attr("transform",g(0,.5*{top:1,bottom:-1}[J]*(K-O+3))):
F.attr("transform",null);F.selectAll("g.legendfill").data([y]).enter().append("g").classed("legendfill",!0);F.selectAll("g.legendlines").data([y]).enter().append("g").classed("legendlines",!0);F=F.selectAll("g.legendsymbols").data([y]);F.enter().append("g").classed("legendsymbols",!0);F.selectAll("g.legendpoints").data([y]).enter().append("g").classed("legendpoints",!0)}).each(function(y){var F=y[0].trace;y=[];if(F.visible)switch(F.type){case "histogram2d":case "heatmap":y=[["M-15,-2V4H15V-2Z"]];
var J=!0;break;case "choropleth":case "choroplethmapbox":y=[["M-6,-6V6H6V-6Z"]];J=!0;break;case "densitymapbox":y=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]];J="radial";break;case "cone":y=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]];J=!1;break;case "streamtube":y=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]];J=!1;break;case "surface":y=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],
["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]];J=!0;break;case "mesh3d":y=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]];J=!1;break;case "volume":y=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]];J=!0;break;case "isosurface":y=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],J=!1}y=k.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(y);y.enter().append("path").classed("legend3dandfriends",!0).attr("transform",C).style("stroke-miterlimit",
1);y.exit().remove();y.each(function(K,O){var I=k.select(this),L=l(F),H=L.colorscale,M=L.reversescale;L=function(Z){Z.size()&&h.gradient(Z,t,"legendfill-"+F.uid,p(M,"radial"===J),H,"fill")};if(H)J||(Q=H.length,Q=0===O?H[M?Q-1:0][1]:1===O?H[M?0:Q-1][1]:H[Math.floor((Q-1)/2)][1]);else{var Q=F.vertexcolor||F.facecolor||F.color;Q=a.isArrayOrTypedArray(Q)?Q[O]||Q[0]:Q}I.attr("d",K[0]);Q?I.call(r.fill,Q):I.call(L)})}).each(function(y){var F=y[0].trace,J="waterfall"===F.type;if(y[0]._distinct&&J)return J=
y[0].trace[y[0].dir].marker,y[0].mc=J.color,y[0].mlw=J.line.width,y[0].mlc=J.line.color,x(y,this,"waterfall");var K=[];F.visible&&J&&(K=y[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);y=k.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(K);y.enter().append("path").classed("legendwaterfall",!0).attr("transform",C).style("stroke-miterlimit",1);y.exit().remove();
y.each(function(O){var I=k.select(this),L=F[O[0]].marker,H=v(void 0,L.line,5,2);I.attr("d",O[1]).style("stroke-width",H+"px").call(r.fill,L.color);H&&I.call(r.stroke,L.line.color)})}).each(function(y){x(y,this,"funnel")}).each(function(y){x(y,this)}).each(function(y){var F=y[0].trace,J=k.select(this).select("g.legendpoints").selectAll("path.legendbox").data(F.visible&&m.traceIs(F,"box-violin")?[y]:[]);J.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",C);J.exit().remove();
J.each(function(){var K=k.select(this);if("all"!==F.boxpoints&&"all"!==F.points||0!==r.opacity(F.fillcolor)||0!==r.opacity((F.line||{}).color)){var O=v(void 0,F.line,5,2);K.style("stroke-width",O+"px").call(r.fill,F.fillcolor);O&&r.stroke(K,F.line.color)}else K=a.minExtend(F,{marker:{size:A?12:a.constrain(F.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}}),J.call(h.pointStyle,K,t)})}).each(function(y){z(y,this,"funnelarea")}).each(function(y){z(y,this,"pie")}).each(function(y){var F=n(y),
J=F.showFill,K=F.showLine,O=F.showGradientLine,I=F.showGradientFill,L=F.anyFill,H=F.anyLine;F=y[0];var M=F.trace,Q=l(M),Z=Q.colorscale,ca=Q.reversescale,W=function(U){U.size()&&h.gradient(U,t,"legendfill-"+M.uid,p(ca),Z,"fill")};Q=function(U){if(U.size()){var ha="legendline-"+M.uid;h.lineGroupStyle(U);h.gradient(U,t,ha,p(ca),Z,"stroke")}};L=c.hasMarkers(M)||!L?"M5,0":H?"M5,-2":"M5,-3";H=k.select(this);y=H.select(".legendfill").selectAll("path").data(J||I?[y]:[]);y.enter().append("path").classed("js-fill",
!0);y.exit().remove();y.attr("d",L+"h"+D+"v6h-"+D+"z").call(J?h.fillGroupStyle:W);if(K||O){J=v(void 0,M.line,10,5);J=a.minExtend(M,{line:{width:J}});var T=[a.minExtend(F,{trace:J})]}F=H.select(".legendlines").selectAll("path").data(K||O?[T]:[]);F.enter().append("path").classed("js-line",!0);F.exit().remove();F.attr("d",L+(O?"l"+D+",0.0001":"h"+D)).call(K?h.lineGroupStyle:Q)}).each(function(y){function F(ca,W,T,U){ca=a.nestedProperty(M,ca).get();W=a.isArrayOrTypedArray(ca)&&W?W(ca):ca;A&&W&&void 0!==
U&&(W=U);if(T){if(W<T[0])return T[0];if(W>T[1])return T[1]}return W}function J(ca){return H._distinct&&H.index&&ca[H.index]?ca[H.index]:ca[0]}var K=n(y),O=K.anyFill,I=K.anyLine,L=K.showLine;K=K.showMarker;var H=y[0],M=H.trace;y=!K&&!I&&!O&&c.hasText(M);if(K||y||L){var Q={};var Z={};K&&(Q.mc=F("marker.color",J),Q.mx=F("marker.symbol",J),Q.mo=F("marker.opacity",a.mean,[.2,1]),Q.mlc=F("marker.line.color",J),Q.mlw=F("marker.line.width",a.mean,[0,5],2),Z.marker={sizeref:1,sizemin:1,sizemode:"diameter"},
O=F("marker.size",a.mean,[2,16],12),Q.ms=O,Z.marker.size=O);L&&(Z.line={width:F("line.width",J,[0,10],5)});y&&(Q.tx="Aa",Q.tp=F("textposition",J),Q.ts=10,Q.tc=F("textfont.color",J),Q.tf=F("textfont.family",J));Q=[a.minExtend(H,Q)];Z=a.minExtend(M,Z);Z.selectedpoints=null;Z.texttemplate=null}L=k.select(this).select("g.legendpoints");O=L.selectAll("path.scatterpts").data(K?Q:[]);O.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",C);O.exit().remove();O.call(h.pointStyle,
Z,t);K&&(Q[0].mrc=3);K=L.selectAll("g.pointtext").data(y?Q:[]);K.enter().append("g").classed("pointtext",!0).append("text").attr("transform",C);K.exit().remove();K.selectAll("text").call(h.textPointStyle,Z,t)}).each(function(y){var F=y[0].trace;y=k.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(F.visible&&"candlestick"===F.type?[y,y]:[]);y.enter().append("path").classed("legendcandle",!0).attr("d",function(J,K){return K?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",
C).style("stroke-miterlimit",1);y.exit().remove();y.each(function(J,K){J=k.select(this);K=F[K?"increasing":"decreasing"];var O=v(void 0,K.line,5,2);J.style("stroke-width",O+"px").call(r.fill,K.fillcolor);O&&r.stroke(J,K.line.color)})}).each(function(y){var F=y[0].trace;y=k.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(F.visible&&"ohlc"===F.type?[y,y]:[]);y.enter().append("path").classed("legendohlc",!0).attr("d",function(J,K){return K?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",
C).style("stroke-miterlimit",1);y.exit().remove();y.each(function(J,K){J=k.select(this);K=F[K?"increasing":"decreasing"];var O=v(void 0,K.line,5,2);J.style("fill","none").call(h.dashLine,K.line.dash,O);O&&r.stroke(J,K.line.color)})})}},{"../../lib":803,"../../registry":931,"../../traces/pie/helpers":1197,"../../traces/pie/style_one":1203,"../../traces/scatter/subtypes":1243,"../color":666,"../colorscale/helpers":677,"../drawing":688,"./constants":717,"@plotly/d3":58}],725:[function(b,N,G){b("./constants");
N.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},{"./constants":727}],726:[function(b,N,G){function p(w,x){var z=x.currentTarget,B=z.getAttribute("data-attr");
x=z.getAttribute("data-val")||!0;var A=w._fullLayout,D={},C=e.list(w,null,!0),v=A._cartesianSpikesEnabled,y;if("zoom"===B){B="in"===x?.5:2;z=(1+B)/2;var F=(1-B)/2;for(y=0;y<C.length;y++)if(B=C[y],!B.fixedrange){var J=B._name;if("auto"===x)D[J+".autorange"]=!0;else if("reset"===x){if(void 0===B._rangeInitial)D[J+".autorange"]=!0;else{var K=B._rangeInitial.slice();D[J+".range[0]"]=K[0];D[J+".range[1]"]=K[1]}void 0!==B._showSpikeInitial&&(D[J+".showspikes"]=B._showSpikeInitial,"on"!==v||B._showSpikeInitial||
(v="off"))}else K=[B.r2l(B.range[0]),B.r2l(B.range[1])],K=[z*K[0]+F*K[1],z*K[1]+F*K[0]],D[J+".range[0]"]=B.l2r(K[0]),D[J+".range[1]"]=B.l2r(K[1])}}else"hovermode"!==B||"x"!==x&&"y"!==x||(x=A._isHoriz?"y":"x",z.setAttribute("data-val",x)),D[B]=x;A._cartesianSpikesEnabled=v;c.call("_guiRelayout",w,D)}function n(w,x){x=x.currentTarget;var z=x.getAttribute("data-attr");x=x.getAttribute("data-val")||!0;var B=w._fullLayout._subplots.gl3d||[],A={};z=z.split(".");for(var D=0;D<B.length;D++)A[B[D]+"."+z[1]]=
x;A.dragmode="pan"===x?x:"zoom";c.call("_guiRelayout",w,A)}function k(w,x){var z=x.currentTarget.getAttribute("data-attr");x="resetLastSave"===z;z="resetDefault"===z;for(var B=w._fullLayout,A=B._subplots.gl3d||[],D={},C=0;C<A.length;C++){var v=A[C],y=v+".camera",F=v+".aspectratio",J=v+".aspectmode";v=B[v]._scene;if(x){D[y+".up"]=v.viewInitial.up;D[y+".eye"]=v.viewInitial.eye;D[y+".center"]=v.viewInitial.center;var K=!0}else z&&(D[y+".up"]=null,D[y+".eye"]=null,D[y+".center"]=null,K=!0);K&&(D[F+".x"]=
v.viewInitial.aspectratio.x,D[F+".y"]=v.viewInitial.aspectratio.y,D[F+".z"]=v.viewInitial.aspectratio.z,D[J]=v.viewInitial.aspectmode)}c.call("_guiRelayout",w,D)}function m(w,x){x=x.currentTarget;var z=x._previousVal;w=w._fullLayout;var B=w._subplots.gl3d||[],A=["xaxis","yaxis","zaxis"],D={},C={};if(z)C=z,x._previousVal=null;else{for(z=0;z<B.length;z++){var v=B[z],y=w[v],F=v+".hovermode";D[F]=y.hovermode;C[F]=!1;for(F=0;3>F;F++){var J=A[F],K=v+"."+J+".showspikes";C[K]=!1;D[K]=y[J].showspikes}}x._previousVal=
D}return C}function a(w,x){var z=x.currentTarget;x=z.getAttribute("data-attr");z=z.getAttribute("data-val")||!0;for(var B=w._fullLayout,A=B._subplots.geo||[],D=0;D<A.length;D++){var C=A[D],v=B[C];"zoom"===x&&(v=v.projection.scale,c.call("_guiRelayout",w,C+".projection.scale","in"===z?2*v:.5*v))}"reset"===x&&l(w,"geo")}function g(w){w=w._fullLayout;return w.hovermode?!1:w._has("cartesian")?w._isHoriz?"y":"x":"closest"}function h(w){var x=g(w);c.call("_guiRelayout",w,"hovermode",x)}function r(w,x){x=
x.currentTarget.getAttribute("data-val");for(var z=w._fullLayout,B=z._subplots.mapbox||[],A={},D=0;D<B.length;D++){var C=B[D],v=z[C].zoom;A[C+".zoom"]="in"===x?1.05*v:v/1.05}c.call("_guiRelayout",w,A)}function l(w,x){var z=w._fullLayout;x=z._subplots[x]||[];for(var B={},A=0;A<x.length;A++)for(var D=x[A],C=z[D]._subplot.viewInitial,v=Object.keys(C),y=0;y<v.length;y++){var F=v[y];B[D+"."+F]=C[F]}c.call("_guiRelayout",w,B)}var c=b("../../registry"),d=b("../../plots/plots"),e=b("../../plots/cartesian/axis_ids");
G=b("../../fonts/ploticon");var f=b("../shapes/draw").eraseActiveShape,q=b("../../lib"),t=q._;b=N.exports={};b.toImage={name:"toImage",title:function(w){return"png"===((w._context.toImageButtonOptions||{}).format||"png")?t(w,"Download plot as a png"):t(w,"Download plot")},icon:G.camera,click:function(w){var x=w._context.toImageButtonOptions,z={format:x.format||"png"};q.notifier(t(w,"Taking snapshot - this may take a few seconds"),"long");"svg"!==z.format&&q.isIE()&&(q.notifier(t(w,"IE only supports svg.  Changing format to svg."),
"long"),z.format="svg");["filename","width","height","scale"].forEach(function(B){B in x&&(z[B]=x[B])});c.call("downloadImage",w,z).then(function(B){q.notifier(t(w,"Snapshot succeeded")+" - "+B,"long")}).catch(function(){q.notifier(t(w,"Sorry, there was a problem downloading your snapshot!"),"long")})}};b.sendDataToCloud={name:"sendDataToCloud",title:function(w){return t(w,"Edit in Chart Studio")},icon:G.disk,click:function(w){d.sendDataToCloud(w)}};b.editInChartStudio={name:"editInChartStudio",title:function(w){return t(w,
"Edit in Chart Studio")},icon:G.pencil,click:function(w){d.sendDataToCloud(w)}};b.zoom2d={name:"zoom2d",_cat:"zoom",title:function(w){return t(w,"Zoom")},attr:"dragmode",val:"zoom",icon:G.zoombox,click:p};b.pan2d={name:"pan2d",_cat:"pan",title:function(w){return t(w,"Pan")},attr:"dragmode",val:"pan",icon:G.pan,click:p};b.select2d={name:"select2d",_cat:"select",title:function(w){return t(w,"Box Select")},attr:"dragmode",val:"select",icon:G.selectbox,click:p};b.lasso2d={name:"lasso2d",_cat:"lasso",
title:function(w){return t(w,"Lasso Select")},attr:"dragmode",val:"lasso",icon:G.lasso,click:p};b.drawclosedpath={name:"drawclosedpath",title:function(w){return t(w,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:G.drawclosedpath,click:p};b.drawopenpath={name:"drawopenpath",title:function(w){return t(w,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:G.drawopenpath,click:p};b.drawline={name:"drawline",title:function(w){return t(w,"Draw line")},attr:"dragmode",val:"drawline",
icon:G.drawline,click:p};b.drawrect={name:"drawrect",title:function(w){return t(w,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:G.drawrect,click:p};b.drawcircle={name:"drawcircle",title:function(w){return t(w,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:G.drawcircle,click:p};b.eraseshape={name:"eraseshape",title:function(w){return t(w,"Erase active shape")},icon:G.eraseshape,click:f};b.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(w){return t(w,"Zoom in")},attr:"zoom",val:"in",
icon:G.zoom_plus,click:p};b.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(w){return t(w,"Zoom out")},attr:"zoom",val:"out",icon:G.zoom_minus,click:p};b.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(w){return t(w,"Autoscale")},attr:"zoom",val:"auto",icon:G.autoscale,click:p};b.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(w){return t(w,"Reset axes")},attr:"zoom",val:"reset",icon:G.home,click:p};b.hoverClosestCartesian={name:"hoverClosestCartesian",
_cat:"hoverclosest",title:function(w){return t(w,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:G.tooltip_basic,gravity:"ne",click:p};b.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(w){return t(w,"Compare data on hover")},attr:"hovermode",val:function(w){return w._fullLayout._isHoriz?"y":"x"},icon:G.tooltip_compare,gravity:"ne",click:p};b.zoom3d={name:"zoom3d",_cat:"zoom",title:function(w){return t(w,"Zoom")},attr:"scene.dragmode",val:"zoom",
icon:G.zoombox,click:n};b.pan3d={name:"pan3d",_cat:"pan",title:function(w){return t(w,"Pan")},attr:"scene.dragmode",val:"pan",icon:G.pan,click:n};b.orbitRotation={name:"orbitRotation",title:function(w){return t(w,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:G["3d_rotate"],click:n};b.tableRotation={name:"tableRotation",title:function(w){return t(w,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:G["z-axis"],click:n};b.resetCameraDefault3d={name:"resetCameraDefault3d",
_cat:"resetCameraDefault",title:function(w){return t(w,"Reset camera to default")},attr:"resetDefault",icon:G.home,click:k};b.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(w){return t(w,"Reset camera to last save")},attr:"resetLastSave",icon:G.movie,click:k};b.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(w){return t(w,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:G.tooltip_basic,gravity:"ne",
click:function(w,x){x=m(w,x);c.call("_guiRelayout",w,x)}};b.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(w){return t(w,"Zoom in")},attr:"zoom",val:"in",icon:G.zoom_plus,click:a};b.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(w){return t(w,"Zoom out")},attr:"zoom",val:"out",icon:G.zoom_minus,click:a};b.resetGeo={name:"resetGeo",_cat:"reset",title:function(w){return t(w,"Reset")},attr:"reset",val:null,icon:G.autoscale,click:a};b.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",
title:function(w){return t(w,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:G.tooltip_basic,gravity:"ne",click:h};b.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(w){return t(w,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:G.tooltip_basic,gravity:"ne",click:h};b.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(w){return t(w,"Toggle show closest data on hover")},attr:"hovermode",
val:"closest",icon:G.tooltip_basic,gravity:"ne",click:h};b.resetViewSankey={name:"resetSankeyGroup",title:function(w){return t(w,"Reset view")},icon:G.home,click:function(w){for(var x={"node.groups":[],"node.x":[],"node.y":[]},z=0;z<w._fullData.length;z++){var B=w._fullData[z]._viewInitial;x["node.groups"].push(B.node.groups.slice());x["node.x"].push(B.node.x.slice());x["node.y"].push(B.node.y.slice())}c.call("restyle",w,x)}};b.toggleHover={name:"toggleHover",title:function(w){return t(w,"Toggle show closest data on hover")},
attr:"hovermode",val:null,toggle:!0,icon:G.tooltip_basic,gravity:"ne",click:function(w,x){x=m(w,x);x.hovermode=g(w);c.call("_guiRelayout",w,x)}};b.resetViews={name:"resetViews",title:function(w){return t(w,"Reset views")},icon:G.home,click:function(w,x){var z=x.currentTarget;z.setAttribute("data-attr","zoom");z.setAttribute("data-val","reset");p(w,x);z.setAttribute("data-attr","resetLastSave");k(w,x);l(w,"geo");l(w,"mapbox")}};b.toggleSpikelines={name:"toggleSpikelines",title:function(w){return t(w,
"Toggle Spike Lines")},icon:G.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(w){var x=w._fullLayout;x._cartesianSpikesEnabled="on"===x._cartesianSpikesEnabled?"off":"on";x=c;for(var z=x.call,B="on"===w._fullLayout._cartesianSpikesEnabled,A=e.list(w,null,!0),D={},C=0;C<A.length;C++){var v=A[C];D[v._name+".showspikes"]=B?!0:v._showSpikeInitial}z.call(x,"_guiRelayout",w,D)}};b.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(w){return t(w,"Reset view")},attr:"reset",
icon:G.home,click:function(w){l(w,"mapbox")}};b.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(w){return t(w,"Zoom in")},attr:"zoom",val:"in",icon:G.zoom_plus,click:r};b.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(w){return t(w,"Zoom out")},attr:"zoom",val:"out",icon:G.zoom_minus,click:r}},{"../../fonts/ploticon":782,"../../lib":803,"../../plots/cartesian/axis_ids":858,"../../plots/plots":917,"../../registry":931,"../shapes/draw":750}],727:[function(b,N,G){var p=
b("./buttons");b=Object.keys(p);G="drawline drawopenpath drawclosedpath drawcircle drawrect eraseshape".split(" ");var n=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(G),k=[];b.forEach(function(m){var a=p[m];-1===n.indexOf(a._cat||a.name)&&(m=a.name,a=(a._cat||a.name).toLowerCase(),-1===k.indexOf(m)&&k.push(m),-1===k.indexOf(a)&&k.push(a))});k.sort();N.exports={DRAW_MODES:G,backButtons:n,foreButtons:k}},{"./buttons":726}],728:[function(b,N,G){var p=b("../../lib"),
n=b("../color"),k=b("../../plot_api/plot_template"),m=b("./attributes");N.exports=function(a,g){function h(c,d){return p.coerce(r,l,m,c,d)}var r=a.modebar||{},l=k.newContainer(g,"modebar");h("orientation");h("bgcolor",n.addOpacity(g.paper_bgcolor,.5));a=n.contrast(n.rgb(g.modebar.bgcolor));h("color",n.addOpacity(a,.3));h("activecolor",n.addOpacity(a,.7));h("uirevision",g.uirevision);h("add");h("remove")}},{"../../lib":803,"../../plot_api/plot_template":843,"../color":666,"./attributes":725}],729:[function(b,
N,G){N.exports={moduleType:"component",name:"modebar",layoutAttributes:b("./attributes"),supplyLayoutDefaults:b("./defaults"),manage:b("./manage")}},{"./attributes":725,"./defaults":728,"./manage":730}],730:[function(b,N,G){function p(f){function q(U,ha){if("string"===typeof ha){if(ha.toLowerCase()===U.toLowerCase())return!0}else{var Y=ha._cat||ha.name;if(ha.name===U||Y===U.toLowerCase())return!0}return!1}function t(U){if(U.length){for(var ha=[],Y=0;Y<U.length;Y++){var ba=U[Y],ja=d[ba],ma=ja.name.toLowerCase();
ja=(ja._cat||ja.name).toLowerCase();for(var ia=!1,oa=0;oa<A.length;oa++){var xa=A[oa].toLowerCase();if(xa===ma||xa===ja){ia=!0;break}}ia||ha.push(d[ba])}Q.push(ha)}}var w=f._fullLayout,x=f._fullData,z=f._context;f=w.modebar.add;"string"===typeof f&&(f=[f]);var B=w.modebar.remove;"string"===typeof B&&(B=[B]);f=z.modeBarButtonsToAdd.concat(f.filter(function(U){for(var ha=0;ha<z.modeBarButtonsToRemove.length;ha++)if(q(U,z.modeBarButtonsToRemove[ha]))return!1;return!0}));var A=z.modeBarButtonsToRemove.concat(B.filter(function(U){for(var ha=
0;ha<z.modeBarButtonsToAdd.length;ha++)if(q(U,z.modeBarButtonsToAdd[ha]))return!1;return!0})),D=w._has("cartesian"),C=w._has("gl3d"),v=w._has("geo"),y=w._has("pie"),F=w._has("funnelarea"),J=w._has("gl2d"),K=w._has("ternary"),O=w._has("mapbox"),I=w._has("polar"),L=w._has("sankey"),H=n(w),M=l(w.hovermode),Q=[];B=["toImage"];z.showEditInChartStudio?B.push("editInChartStudio"):z.showSendToCloud&&B.push("sendDataToCloud");t(B);B=[];var Z=[],ca=[],W=[];1<(D||J||y||F||K)+v+C+O+I?(Z=["toggleHover"],ca=["resetViews"]):
v?(B=["zoomInGeo","zoomOutGeo"],Z=["hoverClosestGeo"],ca=["resetGeo"]):C?(Z=["hoverClosest3d"],ca=["resetCameraDefault3d","resetCameraLastSave3d"]):O?(B=["zoomInMapbox","zoomOutMapbox"],Z=["toggleHover"],ca=["resetViewMapbox"]):J?Z=["hoverClosestGl2d"]:y?Z=["hoverClosestPie"]:L?(Z=["hoverClosestCartesian","hoverCompareCartesian"],ca=["resetViewSankey"]):Z=["toggleHover"];D&&(Z=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]);if(m(x)||M)Z=[];!D&&!J||H||(B=["zoomIn2d","zoomOut2d",
"autoScale2d"],"resetViews"!==ca[0]&&(ca=["resetScale2d"]));C?W=["zoom3d","pan3d","orbitRotation","tableRotation"]:(D||J)&&!H||K?W=["zoom2d","pan2d"]:O||v?W=["pan2d"]:I&&(W=["zoom2d"]);k(x)&&W.push("select2d","lasso2d");var T=[];x=function(U){-1===T.indexOf(U)&&-1!==Z.indexOf(U)&&T.push(U)};if(Array.isArray(f)){D=[];for(C=0;C<f.length;C++)v=f[C],"string"===typeof v?(v=v.toLowerCase(),-1!==e.indexOf(v)?(w._has("mapbox")||w._has("cartesian"))&&W.push(v):"togglespikelines"===v?x("toggleSpikelines"):
"togglehover"===v?x("toggleHover"):"hovercompare"===v?x("hoverCompareCartesian"):"hoverclosest"===v?(x("hoverClosestCartesian"),x("hoverClosestGeo"),x("hoverClosest3d"),x("hoverClosestGl2d"),x("hoverClosestPie")):"v1hovermode"===v&&(x("toggleHover"),x("hoverClosestCartesian"),x("hoverCompareCartesian"),x("hoverClosestGeo"),x("hoverClosest3d"),x("hoverClosestGl2d"),x("hoverClosestPie"))):D.push(v);f=D}t(W);t(B.concat(ca));t(T);return a(Q,f)}function n(f){f=g.list({_fullLayout:f},null,!0);for(var q=
0;q<f.length;q++)if(!f[q].fixedrange)return!1;return!0}function k(f){for(var q=!1,t=0;t<f.length&&!q;t++){var w=f[t];if(w._module&&w._module.selectPoints)if(r.traceIs(w,"scatter-like")){if(h.hasMarkers(w)||h.hasText(w))q=!0}else if(r.traceIs(w,"box-violin")){if("all"===w.boxpoints||"all"===w.points)q=!0}else q=!0}return q}function m(f){for(var q=0;q<f.length;q++)if(!r.traceIs(f[q],"noHover"))return!1;return!0}function a(f,q){if(q.length)if(Array.isArray(q[0]))for(var t=0;t<q.length;t++)f.push(q[t]);
else f.push(q);return f}var g=b("../../plots/cartesian/axis_ids"),h=b("../../traces/scatter/subtypes"),r=b("../../registry"),l=b("../fx/helpers").isUnifiedHover,c=b("./modebar"),d=b("./buttons"),e=b("./constants").DRAW_MODES;N.exports=function(f){var q=f._fullLayout,t=f._context,w=q._modeBar;if(t.displayModeBar||t.watermark){if(!Array.isArray(t.modeBarButtonsToRemove))throw Error("*modeBarButtonsToRemove* configuration options must be an array.");if(!Array.isArray(t.modeBarButtonsToAdd))throw Error("*modeBarButtonsToAdd* configuration options must be an array.");
var x=t.modeBarButtons;if(Array.isArray(x)&&x.length)for(t=0;t<x.length;t++)for(var z=x[t],B=0;B<z.length;B++){var A=z[B];if("string"===typeof A)if(void 0!==d[A])x[t][B]=d[A];else throw Error("*modeBarButtons* configuration options invalid button name");}else x=!t.displayModeBar&&t.watermark?[]:p(f);w?w.update(f,x):q._modeBar=c(f,x)}else w&&(w.destroy(),delete q._modeBar)}},{"../../plots/cartesian/axis_ids":858,"../../registry":931,"../../traces/scatter/subtypes":1243,"../fx/helpers":702,"./buttons":726,
"./constants":727,"./modebar":731}],731:[function(b,N,G){function p(h){this.container=h.container;this.element=document.createElement("div");this.update(h.graphInfo,h.buttons);this.container.appendChild(this.element)}var n=b("@plotly/d3"),k=b("fast-isnumeric"),m=b("../../lib"),a=b("../../fonts/ploticon"),g=new DOMParser;b=p.prototype;b.update=function(h,r){this.graphInfo=h;h=this.graphInfo._context;var l=this.graphInfo._fullLayout,c="modebar-"+l._uid;this.element.setAttribute("id",c);this._uid=c;
this.element.className="modebar";"hover"===h.displayModeBar&&(this.element.className+=" modebar--hover ease-bg");"v"===l.modebar.orientation&&(this.element.className+=" vertical",r=r.reverse());var d=l.modebar,e="hover"===h.displayModeBar?".js-plotly-plot .plotly:hover ":"";m.deleteRelatedStyleRule(c);m.addRelatedStyleRule(c,e+"#"+c+" .modebar-group","background-color: "+d.bgcolor);m.addRelatedStyleRule(c,"#"+c+" .modebar-btn .icon path","fill: "+d.color);m.addRelatedStyleRule(c,"#"+c+" .modebar-btn:hover .icon path",
"fill: "+d.activecolor);m.addRelatedStyleRule(c,"#"+c+" .modebar-btn.active .icon path","fill: "+d.activecolor);c=!this.hasButtons(r);d=this.hasLogo!==h.displaylogo;e=this.locale!==h.locale;this.locale=h.locale;if(c||d||e)if(this.removeAllButtons(),this.updateButtons(r),h.watermark||h.displaylogo)r=this.getLogo(),h.watermark&&(r.className+=" watermark"),"v"===l.modebar.orientation?this.element.insertBefore(r,this.element.childNodes[0]):this.element.appendChild(r),this.hasLogo=!0;this.updateActiveButton()};
b.updateButtons=function(h){var r=this;this.buttons=h;this.buttonElements=[];this.buttonsNames=[];this.buttons.forEach(function(l){var c=r.createGroup();l.forEach(function(d){var e=d.name;if(!e)throw Error("must provide button 'name' in button config");if(-1!==r.buttonsNames.indexOf(e))throw Error("button name '"+e+"' is taken");r.buttonsNames.push(e);d=r.createButton(d);r.buttonElements.push(d);c.appendChild(d)});r.element.appendChild(c)})};b.createGroup=function(){var h=document.createElement("div");
h.className="modebar-group";return h};b.createButton=function(h){var r=this,l=document.createElement("a");l.setAttribute("rel","tooltip");l.className="modebar-btn";var c=h.title;void 0===c?c=h.name:"function"===typeof c&&(c=c(this.graphInfo));(c||0===c)&&l.setAttribute("data-title",c);void 0!==h.attr&&l.setAttribute("data-attr",h.attr);c=h.val;void 0!==c&&("function"===typeof c&&(c=c(this.graphInfo)),l.setAttribute("data-val",c));if("function"!==typeof h.click)throw Error("must provide button 'click' function in button config");
l.addEventListener("click",function(d){h.click(r.graphInfo,d);r.updateActiveButton(d.currentTarget)});l.setAttribute("data-toggle",h.toggle||!1);h.toggle&&n.select(l).classed("active",!0);c=h.icon;"function"===typeof c?l.appendChild(c()):l.appendChild(this.createIcon(c||a.question));l.setAttribute("data-gravity",h.gravity||"n");return l};b.createIcon=function(h){var r=k(h.height)?Number(h.height):h.ascent-h.descent;if(h.path){var l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.setAttribute("viewBox",
[0,0,h.width,r].join(" "));l.setAttribute("class","icon");r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("d",h.path);h.transform?r.setAttribute("transform",h.transform):void 0!==h.ascent&&r.setAttribute("transform","matrix(1 0 0 -1 0 "+h.ascent+")");l.appendChild(r)}h.svg&&(l=g.parseFromString(h.svg,"application/xml").childNodes[0]);l.setAttribute("height","1em");l.setAttribute("width","1em");return l};b.updateActiveButton=function(h){var r=this.graphInfo._fullLayout,
l=void 0!==h?h.getAttribute("data-attr"):null;this.buttonElements.forEach(function(c){var d=c.getAttribute("data-val")||!0,e=c.getAttribute("data-attr"),f="true"===c.getAttribute("data-toggle");c=n.select(c);f?e===l&&c.classed("active",!c.classed("active")):(e=null===e?e:m.nestedProperty(r,e).get(),c.classed("active",e===d))})};b.hasButtons=function(h){var r=this.buttons;if(!r||h.length!==r.length)return!1;for(var l=0;l<h.length;++l){if(h[l].length!==r[l].length)return!1;for(var c=0;c<h[l].length;c++)if(h[l][c].name!==
r[l][c].name)return!1}return!0};b.getLogo=function(){var h=this.createGroup(),r=document.createElement("a");r.href="https://plotly.com/";r.target="_blank";r.setAttribute("data-title",m._(this.graphInfo,"Produced with Plotly"));r.className="modebar-btn plotlyjsicon modebar-btn--logo";r.appendChild(this.createIcon(a.newplotlylogo));h.appendChild(r);return h};b.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1};b.destroy=function(){m.removeElement(this.container.querySelector(".modebar"));
m.deleteRelatedStyleRule(this._uid)};N.exports=function(h,r){var l=h._fullLayout;h=new p({graphInfo:h,container:l._modebardiv.node(),buttons:r});l._privateplot&&n.select(h.element).append("span").classed("badge-private float--left",!0).text("PRIVATE");return h}},{"../../fonts/ploticon":782,"../../lib":803,"@plotly/d3":58,"fast-isnumeric":249}],732:[function(b,N,G){G=b("../../plots/font_attributes");var p=b("../color/attributes");b=b("../../plot_api/plot_template").templatedArray;b=b("button",{visible:{valType:"boolean",
dflt:!0,editType:"plot"},step:{valType:"enumerated",values:"month year day hour minute second all".split(" "),dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});N.exports={visible:{valType:"boolean",editType:"plot"},buttons:b,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto",
"left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:G({editType:"plot"}),bgcolor:{valType:"color",dflt:p.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:p.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":843,
"../../plots/font_attributes":883,"../color/attributes":665}],733:[function(b,N,G){N.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],734:[function(b,N,G){function p(l,c,d,e){function f(q,t){return k.coerce(l,c,h.buttons,q,t)}d=e.calendar;f("visible")&&(e=f("step"),"all"!==e&&(!d||"gregorian"===d||"month"!==e&&"year"!==e?f("stepmode"):c.stepmode="backward",f("count")),f("label"))}function n(l,c,d){d=d.filter(function(t){return c[t].anchor===l._id});for(var e=0,f=0;f<
d.length;f++){var q=c[d[f]].domain;q&&(e=Math.max(q[1],e))}return[l.domain[0],e+r.yPad]}var k=b("../../lib"),m=b("../color"),a=b("../../plot_api/plot_template"),g=b("../../plots/array_container_defaults"),h=b("./attributes"),r=b("./constants");N.exports=function(l,c,d,e,f){function q(x,z){return k.coerce(t,w,h,x,z)}var t=l.rangeselector||{},w=a.newContainer(c,"rangeselector");f=g(t,w,{name:"buttons",handleItemDefaults:p,calendar:f});q("visible",0<f.length)&&(e=n(c,d,e),q("x",e[0]),q("y",e[1]),k.noneOrAll(l,
c,["x","y"]),q("xanchor"),q("yanchor"),k.coerceFont(q,"font",d.font),l=q("bgcolor"),q("activecolor",m.contrast(l,r.lightAmount,r.darkAmount)),q("bordercolor"),q("borderwidth"))}},{"../../lib":803,"../../plot_api/plot_template":843,"../../plots/array_container_defaults":849,"../color":666,"./attributes":732,"./constants":733}],735:[function(b,N,G){function p(C){C=w.list(C,"x",!0);for(var v=[],y=0;y<C.length;y++){var F=C[y];F.rangeselector&&F.rangeselector.visible&&v.push(F)}return v}function n(C){return C._id}
function k(C,v,y){if("all"===v.step)return!0===C.autorange;v=Object.keys(y);return C.range[0]===y[v[0]]&&C.range[1]===y[v[1]]}function m(C,v,y){C=f.ensureSingle(C,"rect","selector-rect",function(F){F.attr("shape-rendering","crispEdges")});C.attr({rx:A.rx,ry:A.ry});C.call(d.stroke,v.bordercolor).call(d.fill,y._isActive||y._isHovered?v.activecolor:v.bgcolor).style("stroke-width",v.borderwidth+"px")}function a(C,v,y,F){f.ensureSingle(C,"text","selector-text",function(J){J.attr("text-anchor","middle")}).call(e.font,
v.font).text(g(y,F._fullLayout._meta)).call(function(J){t.convertToTspans(J,F)})}function g(C,v){return C.label?v?f.templateString(C.label,v):C.label:"all"===C.step?"all":C.count+C.step.charAt(0)}function h(C,v,y,F,J){var K=0,O=0,I=y.borderwidth;v.each(function(){var Q=r.select(this).select(".selector-text");Q=Math.max(y.font.size*x*t.lineCount(Q),16)+3;O=Math.max(O,Q)});v.each(function(){var Q=r.select(this),Z=Q.select(".selector-rect"),ca=Q.select(".selector-text"),W=ca.node()&&e.bBox(ca.node()).width,
T=y.font.size*x,U=t.lineCount(ca);W=Math.max(W+10,A.minButtonWidth);Q.attr("transform",q(I+K,I));Z.attr({x:0,y:0,width:W,height:O});t.positionText(ca,W/2,O/2-(U-1)*T/2+3);K+=W+5});var L=C._fullLayout._size;v=L.l+L.w*y.x;L=L.t+L.h*(1-y.y);var H="left";f.isRightAnchor(y)&&(v-=K,H="right");f.isCenterAnchor(y)&&(v-=K/2,H="center");var M="top";f.isBottomAnchor(y)&&(L-=O,M="bottom");f.isMiddleAnchor(y)&&(L-=O/2,M="middle");K=Math.ceil(K);O=Math.ceil(O);v=Math.round(v);L=Math.round(L);c.autoMargin(C,F+"-range-selector",
{x:y.x,y:y.y,l:K*z[H],r:K*B[H],b:O*B[M],t:O*z[M]});J.attr("transform",q(v,L))}var r=b("@plotly/d3"),l=b("../../registry"),c=b("../../plots/plots"),d=b("../color"),e=b("../drawing"),f=b("../../lib"),q=f.strTranslate,t=b("../../lib/svg_text_utils"),w=b("../../plots/cartesian/axis_ids");G=b("../../constants/alignment");var x=G.LINE_SPACING,z=G.FROM_TL,B=G.FROM_BR,A=b("./constants"),D=b("./get_update_object");N.exports=function(C){var v=C._fullLayout._infolayer.selectAll(".rangeselector").data(p(C),n);
v.enter().append("g").classed("rangeselector",!0);v.exit().remove();v.style({cursor:"pointer","pointer-events":"all"});v.each(function(y){var F=r.select(this),J=y.rangeselector,K=F.selectAll("g.button").data(f.filterVisible(J.buttons));K.enter().append("g").classed("button",!0);K.exit().remove();K.each(function(O){var I=r.select(this),L=D(y,O);O._isActive=k(y,O,L);I.call(m,J,O);I.call(a,J,O,C);I.on("click",function(){C._dragged||l.call("_guiRelayout",C,L)});I.on("mouseover",function(){O._isHovered=
!0;I.call(m,J,O)});I.on("mouseout",function(){O._isHovered=!1;I.call(m,J,O)})});h(C,K,J,y._name,F)})}},{"../../constants/alignment":771,"../../lib":803,"../../lib/svg_text_utils":829,"../../plots/cartesian/axis_ids":858,"../../plots/plots":917,"../../registry":931,"../color":666,"../drawing":688,"./constants":733,"./get_update_object":736,"@plotly/d3":58}],736:[function(b,N,G){var p=b("d3-time"),n=b("../../lib").titleCase;N.exports=function(k,m){var a=k._name,g={};if("all"===m.step)g[a+".autorange"]=
!0;else{var h=k.range,r=new Date(k.r2l(h[1])),l=p["utc"+n(m.step)],c=m.count;switch(m.stepmode){case "backward":var d=k.l2r(+l.offset(r,-c));break;case "todate":m=l.offset(r,-c),d=k.l2r(+l.ceil(m))}k=[d,h[1]];g[a+".range[0]"]=k[0];g[a+".range[1]"]=k[1]}return g}},{"../../lib":803,"d3-time":177}],737:[function(b,N,G){N.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:b("./attributes")}}},layoutAttributes:b("./attributes"),handleDefaults:b("./defaults"),draw:b("./draw")}},
{"./attributes":732,"./defaults":734,"./draw":735}],738:[function(b,N,G){b=b("../color/attributes");N.exports={bgcolor:{valType:"color",dflt:b.background,editType:"plot"},bordercolor:{valType:"color",dflt:b.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",
editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":665}],739:[function(b,N,G){var p=b("../../plots/cartesian/axis_ids").list,n=b("../../plots/cartesian/autorange").getAutoRange,k=b("./constants");N.exports=function(m){for(var a=p(m,"x",!0),g=0;g<a.length;g++){var h=a[g],r=h[k.name];r&&r.visible&&r.autorange&&
(r._input.autorange=!0,r._input.range=r.range=n(m,h))}}},{"../../plots/cartesian/autorange":853,"../../plots/cartesian/axis_ids":858,"./constants":740}],740:[function(b,N,G){N.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",
handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,
handleStrokeWidth:1,extraPad:15}},{}],741:[function(b,N,G){var p=b("../../lib"),n=b("../../plot_api/plot_template"),k=b("../../plots/cartesian/axis_ids"),m=b("./attributes"),a=b("./oppaxis_attributes");N.exports=function(g,h,r){function l(z,B){return p.coerce(e,f,m,z,B)}function c(z,B){return p.coerce(t,w,a,z,B)}g=g[r];var d=h[r];if(g.rangeslider||h._requestRangeslider[d._id]){p.isPlainObject(g.rangeslider)||(g.rangeslider={});var e=g.rangeslider,f=n.newContainer(d,"rangeslider");if(l("visible")){l("bgcolor",
h.plot_bgcolor);l("bordercolor");l("borderwidth");l("thickness");l("autorange",!d.isValidRange(e.range));l("range");if(g=h._subplots)for(g=g.cartesian.filter(function(z){return z.substr(0,z.indexOf("y"))===k.name2id(r)}).map(function(z){return z.substr(z.indexOf("y"),z.length)}),g=p.simpleMap(g,k.id2name),d=0;d<g.length;d++){var q=g[d];var t=e[q]||{};var w=n.newContainer(f,q,"yaxis");q=h[q];var x;t.range&&q.isValidRange(t.range)&&(x="fixed");"match"!==c("rangemode",x)&&c("range",q.range.slice())}f._input=
e}}}},{"../../lib":803,"../../plot_api/plot_template":843,"../../plots/cartesian/axis_ids":858,"./attributes":738,"./oppaxis_attributes":745}],742:[function(b,N,G){function p(v,y,F,J){function K(){function H(Y){var ba=+(Y.clientX||Y.touches[0].clientX)-ca;switch(Z){case O:var ja="ew-resize";Y=T+ba;ba=U+ba;break;case I:ja="col-resize";Y=T+ba;ba=U;break;case L:ja="col-resize";Y=T;ba=U+ba;break;default:ja="ew-resize",Y=W,ba=W+ba}if(ba<Y){var ma=ba;ba=Y;Y=ma}J._pixelMin=Y;J._pixelMax=ba;D(c.select(ha),
ja);n(v,y,F,J)}function M(){ha.removeEventListener("mousemove",H);ha.removeEventListener("mouseup",M);this.removeEventListener("touchmove",H);this.removeEventListener("touchend",M);f.removeElement(ha)}var Q=c.event,Z=Q.target,ca=Q.clientX||Q.touches[0].clientX,W=ca-v.node().getBoundingClientRect().left,T=J.d2p(F._rl[0]),U=J.d2p(F._rl[1]),ha=A.coverSlip();this.addEventListener("touchmove",H);this.addEventListener("touchend",M);ha.addEventListener("mousemove",H);ha.addEventListener("mouseup",M)}if(!y._context.staticPlot){var O=
v.select("rect."+C.slideBoxClassName).node(),I=v.select("rect."+C.grabAreaMinClassName).node(),L=v.select("rect."+C.grabAreaMaxClassName).node();v.on("mousedown",K);v.on("touchstart",K)}}function n(v,y,F,J){var K=F.l2r(f.constrain(J.p2d(J._pixelMin),J._rl[0],J._rl[1])),O=F.l2r(f.constrain(J.p2d(J._pixelMax),J._rl[0],J._rl[1]));window.requestAnimationFrame(function(){d.call("_guiRelayout",y,F._name+".range",[K,O])})}function k(v,y,F,J,K,O){y=C.handleWidth/2;var I=f.constrain(J.d2p(F._rl[0]),0,J._width);
F=f.constrain(J.d2p(F._rl[1]),0,J._width);v.select("rect."+C.slideBoxClassName).attr("x",I).attr("width",F-I);v.select("rect."+C.maskMinClassName).attr("width",I);v.select("rect."+C.maskMaxClassName).attr("x",F).attr("width",J._width-F);"match"!==O.rangemode&&(O=J._height-f.constrain(J.d2pOppAxis(K._rl[1]),0,J._height),K=J._height-f.constrain(J.d2pOppAxis(K._rl[0]),0,J._height),v.select("rect."+C.maskMinOppAxisClassName).attr("x",I).attr("height",O).attr("width",F-I),v.select("rect."+C.maskMaxOppAxisClassName).attr("x",
I).attr("y",K).attr("height",J._height-K).attr("width",F-I),v.select("rect."+C.slideBoxClassName).attr("y",O).attr("height",K-O));K=Math.round(f.constrain(I-y,-y,J._width+y))-.5;J=Math.round(f.constrain(F-y,-y,J._width+y))+.5;v.select("g."+C.grabberMinClassName).attr("transform",q(K,.5));v.select("g."+C.grabberMaxClassName).attr("transform",q(J,.5))}function m(v,y,F,J){v=f.ensureSingle(v,"rect",C.bgClassName,function(O){O.attr({x:0,y:0,"shape-rendering":"crispEdges"})});F=0===J.borderwidth%2?J.borderwidth:
J.borderwidth-1;var K=-J._offsetShift;y=t.crispRound(y,J.borderwidth);v.attr({width:J._width+F,height:J._height+F,transform:q(K,K),fill:J.bgcolor,stroke:J.bordercolor,"stroke-width":y})}function a(v,y,F,J){f.ensureSingleById(y._fullLayout._topdefs,"clipPath",J._clipId,function(K){K.append("rect").attr({x:0,y:0})}).select("rect").attr({width:J._width,height:J._height})}function g(v,y,F,J){var K=y.calcdata;v=v.selectAll("g."+C.rangePlotClassName).data(F._subplotsWith,f.identity);v.enter().append("g").attr("class",
function(I){return C.rangePlotClassName+" "+I}).call(t.setClipUrl,J._clipId,y);v.order();v.exit().remove();var O;v.each(function(I,L){var H=c.select(this);L=0===L;var M=B.getFromId(y,I,"y"),Q=M._name,Z=J[Q],ca={data:[],layout:{xaxis:{type:F.type,domain:[0,1],range:J.range.slice(),calendar:F.calendar},width:J._width,height:J._height,margin:{t:0,b:0,l:0,r:0}},_context:y._context};F.rangebreaks&&(ca.layout.xaxis.rangebreaks=F.rangebreaks);ca.layout[Q]={type:M.type,domain:[0,1],range:"match"!==Z.rangemode?
Z.range.slice():M.range.slice(),calendar:M.calendar};M.rangebreaks&&(ca.layout[Q].rangebreaks=M.rangebreaks);e.supplyDefaults(ca);M=ca._fullLayout.xaxis;Q=ca._fullLayout[Q];M.clearCalc();M.setScale();Q.clearCalc();Q.setScale();H={id:I,plotgroup:H,xaxis:M,yaxis:Q,isRangePlot:!0};L?O=H:(H.mainplot="xy",H.mainplotinfo=O);L=z;Q=L.rangePlot;ca=[];for(M=0;M<K.length;M++){Z=K[M];var W=Z[0].trace;W.xaxis+W.yaxis===I&&ca.push(Z)}Q.call(L,y,H,ca)})}function h(v,y,F,J,K){f.ensureSingle(v,"rect",C.maskMinClassName,
function(O){O.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",J._height).call(w.fill,C.maskColor);f.ensureSingle(v,"rect",C.maskMaxClassName,function(O){O.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",J._height).call(w.fill,C.maskColor);"match"!==K.rangemode&&(f.ensureSingle(v,"rect",C.maskMinOppAxisClassName,function(O){O.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",J._width).call(w.fill,C.maskOppAxisColor),f.ensureSingle(v,"rect",C.maskMaxOppAxisClassName,
function(O){O.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",J._width).style("border-top",C.maskOppBorder).call(w.fill,C.maskOppAxisColor))}function r(v,y,F,J){y._context.staticPlot||f.ensureSingle(v,"rect",C.slideBoxClassName,function(K){K.attr({y:0,cursor:C.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:J._height,fill:C.slideBoxFill})}function l(v,y,F,J){F=f.ensureSingle(v,"g",C.grabberMinClassName);v=f.ensureSingle(v,"g",C.grabberMaxClassName);var K={x:0,width:C.handleWidth,
rx:C.handleRadius,fill:w.background,stroke:w.defaultLine,"stroke-width":C.handleStrokeWidth,"shape-rendering":"crispEdges"},O={y:Math.round(J._height/4),height:Math.round(J._height/2)};f.ensureSingle(F,"rect",C.handleMinClassName,function(L){L.attr(K)}).attr(O);f.ensureSingle(v,"rect",C.handleMaxClassName,function(L){L.attr(K)}).attr(O);var I={width:C.grabAreaWidth,x:0,y:0,fill:C.grabAreaFill,cursor:y._context.staticPlot?void 0:C.grabAreaCursor};f.ensureSingle(F,"rect",C.grabAreaMinClassName,function(L){L.attr(I)}).attr("height",
J._height);f.ensureSingle(v,"rect",C.grabAreaMaxClassName,function(L){L.attr(I)}).attr("height",J._height)}var c=b("@plotly/d3"),d=b("../../registry"),e=b("../../plots/plots"),f=b("../../lib"),q=f.strTranslate,t=b("../drawing"),w=b("../color"),x=b("../titles"),z=b("../../plots/cartesian"),B=b("../../plots/cartesian/axis_ids"),A=b("../dragelement"),D=b("../../lib/setcursor"),C=b("./constants");N.exports=function(v){for(var y=v._fullLayout,F=y._rangeSliderData,J=0;J<F.length;J++){var K=F[J][C.name];
K._clipId=K._id+"-"+y._uid}J=y._infolayer.selectAll("g."+C.containerClassName).data(F,function(O){return O._name});J.exit().each(function(O){y._topdefs.select("#"+O[C.name]._clipId).remove()}).remove();0!==F.length&&(J.enter().append("g").classed(C.containerClassName,!0).attr("pointer-events","all"),J.each(function(O){var I=c.select(this),L=O[C.name],H=y[B.id2name(O.anchor)],M=L[B.id2name(O.anchor)];if(L.range){var Q=f.simpleMap(L.range,O.r2l),Z=f.simpleMap(O.range,O.r2l);L.range=L._input.range=f.simpleMap(Z[0]<
Z[1]?[Math.min(Q[0],Z[0]),Math.max(Q[1],Z[1])]:[Math.max(Q[0],Z[0]),Math.min(Q[1],Z[1])],O.l2r)}O.cleanRange("rangeslider.range");Z=y._size;var ca=O.domain;L._width=Z.w*(ca[1]-ca[0]);Q=Math.round(Z.t+Z.h*(1-O._counterDomainMin)+("bottom"===O.side?O._depth:0)+L._offsetShift+C.extraPad);I.attr("transform",q(Math.round(Z.l+Z.w*ca[0]),Q));L._rl=f.simpleMap(L.range,O.r2l);var W=L._rl[0];Z=L._rl[1];var T=Z-W;L.p2d=function(oa){return oa/L._width*T+W};L.d2p=function(oa){return(oa-W)/T*L._width};if(O.rangebreaks){var U=
O.locateBreaks(W,Z);if(U.length){var ha=0;for(ca=0;ca<U.length;ca++){var Y=U[ca];ha+=Y.max-Y.min}var ba=L._width/(Z-W-ha),ja=[-ba*W];for(ca=0;ca<U.length;ca++)Y=U[ca],ja.push(ja[ja.length-1]-ba*(Y.max-Y.min));L.d2p=function(oa){for(var xa=ja[0],ra=0;ra<U.length;ra++){var la=U[ra];if(oa>=la.max)xa=ja[ra+1];else if(oa<la.min)break}return xa+ba*oa};for(ca=0;ca<U.length;ca++)Y=U[ca],Y.pmin=L.d2p(Y.min),Y.pmax=L.d2p(Y.max);L.p2d=function(oa){for(var xa=ja[0],ra=0;ra<U.length;ra++){var la=U[ra];if(oa>=
la.pmax)xa=ja[ra+1];else if(oa<la.pmin)break}return(oa-xa)/ba}}}if("match"!==M.rangemode){var ma=H.r2l(M.range[0]),ia=H.r2l(M.range[1])-ma;L.d2pOppAxis=function(oa){return(oa-ma)/ia*L._height}}I.call(m,v,O,L).call(a,v,O,L).call(g,v,O,L).call(h,v,O,L,M).call(r,v,O,L).call(l,v,O,L);p(I,v,O,L);k(I,v,O,L,H,M);"bottom"===O.side&&x.draw(v,O._id+"title",{propContainer:O,propName:O._name+".title",placeholder:y._dfltTitle.x,attributes:{x:O._offset+O._length/2,y:Q+L._height+L._offsetShift+10+1.5*O.title.font.size,
"text-anchor":"middle"}})}))}},{"../../lib":803,"../../lib/setcursor":824,"../../plots/cartesian":868,"../../plots/cartesian/axis_ids":858,"../../plots/plots":917,"../../registry":931,"../color":666,"../dragelement":685,"../drawing":688,"../titles":764,"./constants":740,"@plotly/d3":58}],743:[function(b,N,G){function p(h){return(h=h&&h[g])&&h.visible}var n=b("../../plots/cartesian/axis_ids"),k=b("../../lib/svg_text_utils"),m=b("./constants"),a=b("../../constants/alignment").LINE_SPACING,g=m.name;
G.isVisible=p;G.makeData=function(h){var r=n.list({_fullLayout:h},"x",!0),l=h.margin,c=[];if(!h._has("gl2d"))for(var d=0;d<r.length;d++){var e=r[d];if(p(e)){c.push(e);var f=e[g];f._id=g+e._id;f._height=(h.height-l.b-l.t)*f.thickness;f._offsetShift=Math.floor(f.borderwidth/2)}}h._rangeSliderData=c};G.autoMarginOpts=function(h,r){h=h._fullLayout;var l=r[g],c=r._id.charAt(0),d=0,e=0;"bottom"===r.side&&(d=r._depth,r.title.text!==h._dfltTitle[c]&&(e=1.5*r.title.font.size+10+l._offsetShift,c=(r.title.text.match(k.BR_TAG_ALL)||
[]).length,e+=c*r.title.font.size*a));return{x:0,y:r._counterDomainMin,l:0,r:0,t:0,b:l._height+d+Math.max(h.margin.b,e),pad:m.extraPad+2*l._offsetShift}}},{"../../constants/alignment":771,"../../lib/svg_text_utils":829,"../../plots/cartesian/axis_ids":858,"./constants":740}],744:[function(b,N,G){G=b("../../lib");var p=b("./attributes"),n=b("./oppaxis_attributes"),k=b("./helpers");N.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:G.extendFlat({},p,{yaxis:n})}}},
layoutAttributes:b("./attributes"),handleDefaults:b("./defaults"),calcAutorange:b("./calc_autorange"),draw:b("./draw"),isVisible:k.isVisible,makeData:k.makeData,autoMarginOpts:k.autoMarginOpts}},{"../../lib":803,"./attributes":738,"./calc_autorange":739,"./defaults":741,"./draw":742,"./helpers":743,"./oppaxis_attributes":745}],745:[function(b,N,G){N.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",
editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],746:[function(b,N,G){G=b("../annotations/attributes");var p=b("../../traces/scatter/attributes").line,n=b("../drawing/attributes").dash,k=b("../../lib/extend").extendFlat,m=b("../../plot_api/plot_template").templatedArray;b("../../constants/axis_placeable_objects");N.exports=m("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],
editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:k({},G.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:k({},G.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",
editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:k({},p.color,{editType:"arraydraw"}),width:k({},p.width,{editType:"calc+arraydraw"}),dash:k({},n,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd",
"nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":772,"../../lib/extend":793,"../../plot_api/plot_template":843,"../../traces/scatter/attributes":1218,"../annotations/attributes":649,"../drawing/attributes":687}],747:[function(b,N,G){function p(h,r,l,c,d,e){h/=2;return"pixel"===r?(l=d?g.extractPathCoords(d,e?a.paramIsY:a.paramIsX):[l,c],r=k.aggNums(Math.max,null,l),l=k.aggNums(Math.min,
null,l),l=0>l?Math.abs(l)+h:h,r=0<r?r+h:h,{ppad:h,ppadplus:e?l:r,ppadminus:e?r:l}):{ppad:h}}function n(h,r,l,c,d){var e="category"===h.type||"multicategory"===h.type?h.r2c:h.d2c;if(void 0!==r)return[e(r),e(l)];if(c){r=Infinity;l=-Infinity;c=c.match(a.segmentRE);var f;"date"===h.type&&(e=g.decodeDate(e));for(h=0;h<c.length;h++){var q=c[h];q=d[q.charAt(0)].drawn;void 0!==q&&(!(f=c[h].substr(1).match(a.paramRE))||f.length<q||(q=e(f[q]),q<r&&(r=q),q>l&&(l=q)))}if(l>=r)return[r,l]}}var k=b("../../lib"),
m=b("../../plots/cartesian/axes"),a=b("./constants"),g=b("./helpers");N.exports=function(h){var r=k.filterVisible(h._fullLayout.shapes);if(r.length&&h._fullData.length)for(var l=0;l<r.length;l++){var c=r[l];c._extremes={};var d=m.getRefType(c.xref);var e=m.getRefType(c.yref);if("paper"!==c.xref&&"domain"!==d){var f="pixel"===c.xsizemode?c.xanchor:c.x0;var q="pixel"===c.xsizemode?c.xanchor:c.x1;d=m.getFromId(h,c.xref);(f=n(d,f,q,c.path,a.paramIsX))&&(c._extremes[d._id]=m.findExtremes(d,f,p(c.line.width,
c.xsizemode,c.x0,c.x1,c.path,!1)))}"paper"!==c.yref&&"domain"!==e&&(e="pixel"===c.ysizemode?c.yanchor:c.y0,f="pixel"===c.ysizemode?c.yanchor:c.y1,d=m.getFromId(h,c.yref),(f=n(d,e,f,c.path,a.paramIsY))&&(c._extremes[d._id]=m.findExtremes(d,f,p(c.line.width,c.ysizemode,c.y0,c.y1,c.path,!0))))}}},{"../../lib":803,"../../plots/cartesian/axes":854,"./constants":748,"./helpers":757}],748:[function(b,N,G){N.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,
drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],749:[function(b,N,G){function p(h,r,l){function c(J,K){return n.coerce(h,r,a,J,K)}if(c("visible")){var d=c("path");d=c("type",d?"path":"rect");"path"!==r.type&&delete r.path;
c("editable");c("layer");c("opacity");c("fillcolor");c("fillrule");c("line.width")&&(c("line.color"),c("line.dash"));for(var e=c("xsizemode"),f=c("ysizemode"),q=["x","y"],t=0;2>t;t++){var w=q[t],x=w+"anchor",z="x"===w?e:f,B={_fullLayout:l},A=k.coerceRef(h,r,B,w,void 0,"paper");if("range"===k.getRefType(A)){var D=k.getFromId(B,A);D._shapeIndices.push(r._index);var C=g.rangeToShapePosition(D);D=g.shapePositionToRange(D)}else D=C=n.identity;if("path"!==d){var v=w+"0";w+="1";var y=h[v],F=h[w];h[v]=D(h[v],
!0);h[w]=D(h[w],!0);"pixel"===z?(c(v,0),c(w,10)):(k.coercePosition(r,B,c,A,v,.25),k.coercePosition(r,B,c,A,w,.75));r[v]=C(r[v]);r[w]=C(r[w]);h[v]=y;h[w]=F}"pixel"===z&&(z=h[x],h[x]=D(h[x],!0),k.coercePosition(r,B,c,A,x,.25),r[x]=C(r[x]),h[x]=z)}"path"===d?c("path"):n.noneOrAll(h,r,["x0","x1","y0","y1"])}}var n=b("../../lib"),k=b("../../plots/cartesian/axes"),m=b("../../plots/array_container_defaults"),a=b("./attributes"),g=b("./helpers");N.exports=function(h,r){m(h,r,{name:"shapes",handleItemDefaults:p})}},
{"../../lib":803,"../../plots/array_container_defaults":849,"../../plots/cartesian/axes":854,"./attributes":746,"./helpers":757}],750:[function(b,N,G){function p(C){var v=C._fullLayout;v._shapeUpperLayer.selectAll("path").remove();v._shapeLowerLayer.selectAll("path").remove();for(var y in v._plots){var F=v._plots[y].shapelayer;F&&F.selectAll("path").remove()}for(y=0;y<v.shapes.length;y++)v.shapes[y].visible&&n(C,y)}function n(C,v){function y(O){var I=a(C,J),L={"data-index":v,"fill-rule":J.fillrule,
d:I},H=J.opacity,M=J.fillcolor,Q=J.line.width?J.line.color:"rgba(0,0,0,0)",Z=J.line.width,ca=J.line.dash;Z||!0!==J.editable||(Z=5,ca="solid");var W="Z"!==I[I.length-1],T=!C._context.edits.shapePosition&&J.editable&&C._fullLayout._activeShapeIndex===v;T&&(M=W?"rgba(0,0,0,0)":C._fullLayout.activeshape.fillcolor,H=C._fullLayout.activeshape.opacity);var U=O.append("path").attr(L).style("opacity",H).call(t.stroke,Q).call(t.fill,M).call(w.dashLine,ca,Z);k(U,C,J);if(T||C._context.edits.shapePosition)var ha=
x(C.layout,"shapes",J);T?(U.style({cursor:"move"}),O={element:U.node(),plotinfo:K,gd:C,editHelpers:ha,isActiveShape:!0},I=e(I,C),f(I,U,O)):C._context.edits.shapePosition?m(C,U,J,v,O,ha):!0===J.editable&&U.style("pointer-events",W||.5>=t.opacity(M)*H?"stroke":"all");U.node().addEventListener("click",function(){a:{if(!C._context.edits.shapePosition){var Y=+U.node().getAttribute("data-index");if(0<=Y){if(Y===C._fullLayout._activeShapeIndex){r(C);Y=void 0;break a}C._fullLayout._activeShapeIndex=Y;C._fullLayout._deactivateShape=
r;p(C)}}Y=void 0}return Y})}C._fullLayout._paperdiv.selectAll('.shapelayer [data-index\x3d"'+v+'"]').remove();var F=D.makeOptionsAndPlotinfo(C,v),J=F.options,K=F.plotinfo;J._input&&!1!==J.visible&&("below"!==J.layer?y(C._fullLayout._shapeUpperLayer):"paper"===J.xref||"paper"===J.yref?y(C._fullLayout._shapeLowerLayer):K._hadPlotinfo?y((K.mainplotinfo||K).shapelayer):y(C._fullLayout._shapeLowerLayer))}function k(C,v,y){y=(y.xref+y.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");w.setClipUrl(C,
y?"clip"+v._fullLayout._uid+y:null,v)}function m(C,v,y,F,J,K){function O(){var ub=Math.max(y.line.width,10),wb=J.append("g").attr("data-index",F);wb.append("path").attr("d",v.attr("d")).style({cursor:"move","stroke-width":ub,"stroke-opacity":"0"});var rb={"fill-opacity":"0"};ub=Math.max(ub/2,10);wb.append("circle").attr({"data-line-point":"start-point",cx:Q?gb(y.xanchor)+y.x0:gb(y.x0),cy:Z?sb(y.yanchor)-y.y0:sb(y.y0),r:ub}).style(rb).classed("cursor-grab",!0);wb.append("circle").attr({"data-line-point":"end-point",
cx:Q?gb(y.xanchor)+y.x1:gb(y.x1),cy:Z?sb(y.yanchor)-y.y1:sb(y.y1),r:ub}).style(rb).classed("cursor-grab",!0);return wb}function I(ub){if(C._fullLayout._drawing)Bb=null;else if(ca)Bb="path"===ub.target.tagName?"move":"start-point"===ub.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var wb=qb.element.getBoundingClientRect(),rb=wb.right-wb.left,Ab=wb.bottom-wb.top,Ma=ub.clientX-wb.left;wb=ub.clientY-wb.top;ub=!W&&10<rb&&10<Ab&&!ub.shiftKey?z.getCursor(Ma/
rb,1-wb/Ab):"move";B(v,ub);Bb=ub.split("-")[0]}}function L(ub,wb){if("path"===y.type){var rb=function(Ma){return Ma},Ab=rb;Q?T("xanchor",y.xanchor=jb(ja+ub)):(Ab=function(Ma){return jb(gb(Ma)+ub)},za&&"date"===za.type&&(Ab=D.encodeDate(Ab)));Z?T("yanchor",y.yanchor=vb(ma+wb)):(rb=function(Ma){return vb(sb(Ma)+wb)},Xa&&"date"===Xa.type&&(rb=D.encodeDate(rb)));T("path",y.path=h(ta,Ab,rb))}else Q?T("xanchor",y.xanchor=jb(ja+ub)):(T("x0",y.x0=jb(U+ub)),T("x1",y.x1=jb(Y+ub))),Z?T("yanchor",y.yanchor=vb(ma+
wb)):(T("y0",y.y0=vb(ha+wb)),T("y1",y.y1=vb(ba+wb)));v.attr("d",a(C,y));M(J,y)}function H(ub,wb){if(W){var rb=function(Ka){return Ka},Ab=rb;Q?T("xanchor",y.xanchor=jb(ja+ub)):(Ab=function(Ka){return jb(gb(Ka)+ub)},za&&"date"===za.type&&(Ab=D.encodeDate(Ab)));Z?T("yanchor",y.yanchor=vb(ma+wb)):(rb=function(Ka){return vb(sb(Ka)+wb)},Xa&&"date"===Xa.type&&(rb=D.encodeDate(rb)));T("path",y.path=h(ta,Ab,rb))}else if(ca)"resize-over-start-point"===Bb?(Ab=U+ub,rb=Z?ha-wb:ha+wb,T("x0",y.x0=Q?Ab:jb(Ab)),T("y0",
y.y0=Z?rb:vb(rb))):"resize-over-end-point"===Bb&&(Ab=Y+ub,rb=Z?ba-wb:ba+wb,T("x1",y.x1=Q?Ab:jb(Ab)),T("y1",y.y1=Z?rb:vb(rb)));else{Ab=-1!==Bb.indexOf("n");rb=-1!==Bb.indexOf("s");var Ma=-1!==Bb.indexOf("w"),La=-1!==Bb.indexOf("e"),ya=Ab?ia+wb:ia,Aa=rb?oa+wb:oa;Ma=Ma?xa+ub:xa;La=La?ra+ub:ra;Z&&(Ab&&(ya=ia-wb),rb&&(Aa=oa-wb));if(!Z&&10<Aa-ya||Z&&10<ya-Aa)T(la,y[la]=Z?ya:vb(ya)),T(ka,y[ka]=Z?Aa:vb(Aa));10<La-Ma&&(T(na,y[na]=Q?Ma:jb(Ma)),T(qa,y[qa]=Q?La:jb(La)))}v.attr("d",a(C,y));M(J,y)}function M(ub,
wb){if(Q||Z){var rb="path"!==wb.type;ub=ub.selectAll(".visual-cue").data([0]);ub.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var Ab=gb(Q?wb.xanchor:c.midRange(rb?[wb.x0,wb.x1]:D.extractPathCoords(wb.path,A.paramIsX)));wb=sb(Z?wb.yanchor:c.midRange(rb?[wb.y0,wb.y1]:D.extractPathCoords(wb.path,A.paramIsY)));Ab=D.roundPositionForSharpStrokeRendering(Ab,1);wb=D.roundPositionForSharpStrokeRendering(wb,1);Q&&Z?ub.attr("d","M"+
(Ab-1-1)+","+(wb-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z"):Q?ub.attr("d","M"+(Ab-1-1)+","+(wb-9-1)+"v18 h2 v-18 Z"):ub.attr("d","M"+(Ab-9-1)+","+(wb-1-1)+"h18 v2 h-18 Z")}}var Q="pixel"===y.xsizemode,Z="pixel"===y.ysizemode,ca="line"===y.type,W="path"===y.type,T=K.modifyItem,U,ha,Y,ba,ja,ma,ia,oa,xa,ra,la,ka,na,qa,ta,za=d.getFromId(C,y.xref),Ia=d.getRefType(y.xref),Xa=d.getFromId(C,y.yref),$a=d.getRefType(y.yref),gb=D.getDataToPixel(C,za,!1,Ia),sb=D.getDataToPixel(C,Xa,!0,$a),jb=D.getPixelToData(C,
za,!1,Ia),vb=D.getPixelToData(C,Xa,!0,$a);Ia=ca?O():v;var qb={element:Ia.node(),gd:C,prepFn:function(ub){if(!C._fullLayout._drawing){Q&&(ja=gb(y.xanchor));Z&&(ma=sb(y.yanchor));"path"===y.type?ta=y.path:(U=Q?y.x0:gb(y.x0),ha=Z?y.y0:sb(y.y0),Y=Q?y.x1:gb(y.x1),ba=Z?y.y1:sb(y.y1));U<Y?(xa=U,na="x0",ra=Y,qa="x1"):(xa=Y,na="x1",ra=U,qa="x0");!Z&&ha<ba||Z&&ha>ba?(ia=ha,la="y0",oa=ba,ka="y1"):(ia=ba,la="y1",oa=ha,ka="y0");I(ub);M(J,y);var wb=y.xref,rb=y.yref,Ab=d.getFromId(C,wb),Ma=d.getFromId(C,rb),La=
"";"paper"===wb||Ab.autorange||(La+=wb);"paper"===rb||Ma.autorange||(La+=rb);w.setClipUrl(v,La?"clip"+C._fullLayout._uid+La:null,C);qb.moveFn="move"===Bb?L:H;qb.altKey=ub.altKey}},doneFn:function(){C._fullLayout._drawing||(B(v),J.selectAll(".visual-cue").remove(),k(v,C,y),l.call("_guiRelayout",C,K.getUpdateObj()))},clickFn:function(){C._fullLayout._drawing||J.selectAll(".visual-cue").remove()}},Bb;z.init(qb);Ia.node().onmousemove=I}function a(C,v){var y=v.type,F=d.getRefType(v.xref),J=d.getRefType(v.yref),
K=d.getFromId(C,v.xref),O=d.getFromId(C,v.yref),I=C._fullLayout._size;if(K)if("domain"===F)C=function(Q){return K._offset+K._length*Q};else{var L=D.shapePositionToRange(K);C=function(Q){return K._offset+K.r2p(L(Q,!0))}}else C=function(Q){return I.l+I.w*Q};if(O)if("domain"===J)F=function(Q){return O._offset+O._length*(1-Q)};else{var H=D.shapePositionToRange(O);F=function(Q){return O._offset+O.r2p(H(Q,!0))}}else F=function(Q){return I.t+I.h*(1-Q)};if("path"===y)return K&&"date"===K.type&&(C=D.decodeDate(C)),
O&&"date"===O.type&&(F=D.decodeDate(F)),g(v,C,F);if("pixel"===v.xsizemode){C=C(v.xanchor);J=C+v.x0;var M=C+v.x1}else J=C(v.x0),M=C(v.x1);"pixel"===v.ysizemode?(F=F(v.yanchor),C=F-v.y0,v=F-v.y1):(C=F(v.y0),v=F(v.y1));if("line"===y)return"M"+J+","+C+"L"+M+","+v;if("rect"===y)return"M"+J+","+C+"H"+M+"V"+v+"H"+J+"Z";y=(J+M)/2;v=(C+v)/2;J=Math.abs(y-J);C=Math.abs(v-C);F="A"+J+","+C;J=y+J+","+v;return"M"+J+F+" 0 1,1 "+(y+","+(v-C))+F+" 0 0,1 "+J+"Z"}function g(C,v,y){var F=C.xsizemode,J=C.ysizemode,K=C.xanchor,
O=C.yanchor;return C.path.replace(A.segmentRE,function(I){var L=0,H=I.charAt(0),M=A.paramIsX[H],Q=A.paramIsY[H],Z=A.numParams[H],ca=I.substr(1).replace(A.paramRE,function(W){M[L]?W="pixel"===F?v(K)+Number(W):v(W):Q[L]&&(W="pixel"===J?y(O)-Number(W):y(W));L++;L>Z&&(W="X");return W});L>Z&&(ca=ca.replace(/[\s,]*X.*/,""),c.log("Ignoring extra params in segment "+I));return H+ca})}function h(C,v,y){return C.replace(A.segmentRE,function(F){var J=0,K=F.charAt(0),O=A.paramIsX[K],I=A.paramIsY[K],L=A.numParams[K];
F=F.substr(1).replace(A.paramRE,function(H){if(J>=L)return H;O[J]?H=v(H):I[J]&&(H=y(H));J++;return H});return K+F})}function r(C){!C._context.edits.shapePosition&&0<=C._fullLayout._activeShapeIndex&&(q(C),delete C._fullLayout._activeShapeIndex,p(C))}var l=b("../../registry"),c=b("../../lib"),d=b("../../plots/cartesian/axes"),e=b("./draw_newshape/helpers").readPaths,f=b("./draw_newshape/display_outlines"),q=b("../../plots/cartesian/handle_outline").clearOutlineControllers,t=b("../color"),w=b("../drawing"),
x=b("../../plot_api/plot_template").arrayEditor,z=b("../dragelement"),B=b("../../lib/setcursor"),A=b("./constants"),D=b("./helpers");N.exports={draw:p,drawOne:n,eraseActiveShape:function(C){if(!C._context.edits.shapePosition){q(C);var v=C._fullLayout._activeShapeIndex,y=(C.layout||{}).shapes||[];if(v<y.length){for(var F=[],J=0;J<y.length;J++)J!==v&&F.push(y[J]);delete C._fullLayout._activeShapeIndex;l.call("_guiRelayout",C,{shapes:F})}}}}},{"../../lib":803,"../../lib/setcursor":824,"../../plot_api/plot_template":843,
"../../plots/cartesian/axes":854,"../../plots/cartesian/handle_outline":865,"../../registry":931,"../color":666,"../dragelement":685,"../drawing":688,"./constants":748,"./draw_newshape/display_outlines":754,"./draw_newshape/helpers":755,"./helpers":757}],751:[function(b,N,G){G=b("../../drawing/attributes").dash;b=b("../../../lib/extend").extendFlat;N.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:b({},G,{dflt:"solid",editType:"none"}),
editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",
editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":793,"../../drawing/attributes":687}],752:[function(b,N,G){N.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],753:[function(b,N,G){var p=b("../../color");N.exports=function(n,k,m){m("newshape.drawdirection");m("newshape.layer");m("newshape.fillcolor");m("newshape.fillrule");m("newshape.opacity");
m("newshape.line.width")&&(m("newshape.line.color",p.contrast((n||{}).plot_bgcolor||"#FFF")),m("newshape.line.dash"));m("activeshape.fillcolor");m("activeshape.opacity")}},{"../../color":666}],754:[function(b,N,G){function p(q,t){for(var w=0;w<t.length;w++){var x=t[w];q[w]=[];for(var z=0;z<x.length;z++){q[w][z]=[];for(var B=0;B<x[z].length;B++)q[w][z][B]=x[z][B]}}return q}var n=b("../../dragelement"),k=b("../../dragelement/helpers").drawMode,m=b("../../../registry");G=b("./constants");var a=G.i000,
g=G.i090,h=G.i180,r=G.i270,l=b("../../../plots/cartesian/handle_outline").clearOutlineControllers;G=b("./helpers");var c=G.pointsShapeRectangle,d=G.pointsShapeEllipse,e=G.writePaths,f=b("./newshapes");N.exports=function B(t,w,x,z){function A(){B(t,w,x,z++);d(t[0])&&D({redrawing:!0})}function D(U){x.isActiveShape=!1;var ha=f(w,x);Object.keys(ha).length&&m.call((U||{}).redrawing?"relayout":"_guiRelayout",L,ha)}function C(U){Z=+U.srcElement.getAttribute("data-i");ca=+U.srcElement.getAttribute("data-j");
Q[Z][ca].moveFn=v}function v(U,ha){if(t.length){var Y=W[Z][ca][1],ba=W[Z][ca][2],ja=t[Z],ma=ja.length;if(c(ja)){for(var ia=0;ia<ma;ia++)if(ia!==ca){var oa=ja[ia];oa[1]===ja[ca][1]&&(oa[1]=Y+U);oa[2]===ja[ca][2]&&(oa[2]=ba+ha)}ja[ca][1]=Y+U;ja[ca][2]=ba+ha;if(!c(ja))for(U=0;U<ma;U++)for(ha=0;ha<ja[U].length;ha++)ja[U][ha]=W[Z][U][ha]}else ja[ca][1]=Y+U,ja[ca][2]=ba+ha;A()}}function y(){D()}function F(U,ha){if(2===U&&(Z=+ha.srcElement.getAttribute("data-i"),ca=+ha.srcElement.getAttribute("data-j"),
U=t[Z],!c(U)&&!d(U)&&t.length&&t[Z]&&t[Z].length)){U=[];for(ha=0;ha<t[Z].length;ha++)ha!==ca&&U.push(t[Z][ha]);1<U.length&&(2!==U.length||"Z"!==U[1][0])&&(0===ca&&(U[0][0]="M"),t[Z]=U,A(),D())}}function J(U){Q=[];for(var ha=0;ha<t.length;ha++){var Y=t[ha],ba=!c(Y)&&d(Y);Q[ha]=[];for(var ja=0;ja<Y.length;ja++)if("Z"!==Y[ja][0]&&(!ba||ja===a||ja===g||ja===h||ja===r)){var ma=Y[ja][1],ia=Y[ja][2];ma=U.append("circle").classed("cursor-grab",!0).attr("data-i",ha).attr("data-j",ja).attr("cx",ma).attr("cy",
ia).attr("r",4).style({"mix-blend-mode":"luminosity",fill:"black",stroke:"white","stroke-width":1});Q[ha][ja]={element:ma.node(),gd:L,prepFn:C,doneFn:y,clickFn:F};n.init(Q[ha][ja])}}}function K(U,ha){if(t.length)for(var Y=0;Y<t.length;Y++)for(var ba=0;ba<t[Y].length;ba++)for(var ja=0;ja+2<t[Y][ba].length;ja+=2)t[Y][ba][ja+1]=W[Y][ba][ja+1]+U,t[Y][ba][ja+2]=W[Y][ba][ja+2]+ha;A()}function O(U){(Z=+U.srcElement.getAttribute("data-i"))||(Z=0);T[Z].moveFn=K}function I(){D()}z||(z=0);var L=x.gd,H=x.isActiveShape,
M=L._fullLayout._zoomlayer;k(x.dragmode)?L._fullLayout._drawing=!0:0<=L._fullLayout._activeShapeIndex&&l(L);w.attr("d",e(t));var Q,Z,ca;if(H&&!z){var W=p([],t);H=M.append("g").attr("class","outline-controllers");J(H);var T=[];t.length&&(T[0]={element:w[0][0],gd:L,prepFn:O,doneFn:I},n.init(T[0]))}}},{"../../../plots/cartesian/handle_outline":865,"../../../registry":931,"../../dragelement":685,"../../dragelement/helpers":684,"./constants":752,"./helpers":755,"./newshapes":756}],755:[function(b,N,G){function p(c,
d){return 1E-6>=Math.abs(c-d)}function n(c,d){var e=d[1]-c[1];c=d[2]-c[2];return Math.sqrt(e*e+c*c)}var k=b("parse-svg-path");N=b("./constants");var m=N.CIRCLE_SIDES,a=N.SQRT2;b=b("../../../plots/cartesian/helpers");var g=b.p2r,h=b.r2p,r=[0,3,4,5,6,1,2],l=[0,3,4,1,2];G.writePaths=function(c){var d=c.length;if(!d)return"M0,0Z";for(var e="",f=0;f<d;f++)for(var q=c[f].length,t=0;t<q;t++){var w=c[f][t][0];if("Z"===w)e+="Z";else for(var x=c[f][t].length,z=0;z<x;z++){var B=z;"Q"===w||"S"===w?B=l[z]:"C"===
w&&(B=r[z]);e+=c[f][t][B];0<z&&z<x-1&&(e+=",")}}return e};G.readPaths=function(c,d,e,f){c=k(c);var q=[],t=-1,w,x=0,z=0;var B=x;var A=z;for(var D=0;D<c.length;D++){var C=[],v=w=c[D][0];switch(w){case "M":t++;q[t]=[];x=+c[D][1];z=+c[D][2];C.push([v,x,z]);B=x;A=z;break;case "Q":case "S":w=+c[D][1];var y=+c[D][2];x=+c[D][3];z=+c[D][4];C.push([v,x,z,w,y]);break;case "C":w=+c[D][1];y=+c[D][2];var F=+c[D][3];var J=+c[D][4];x=+c[D][5];z=+c[D][6];C.push([v,x,z,w,y,F,J]);break;case "T":case "L":x=+c[D][1];
z=+c[D][2];C.push([v,x,z]);break;case "H":v="L";x=+c[D][1];C.push([v,x,z]);break;case "V":v="L";z=+c[D][1];C.push([v,x,z]);break;case "A":v="L";F=+c[D][1];y=+c[D][2];+c[D][4]||(F=-F,y=-y);J=x-F;var K=z;for(w=1;w<=m/2;w++){var O=2*Math.PI*w/m;C.push([v,J+F*Math.cos(O),K+y*Math.sin(O)])}break;case "Z":if(x!==B||z!==A)x=B,z=A,C.push([v,x,z])}v=(e||{}).domain;F=d._fullLayout._size;y=e&&"pixel"===e.xsizemode;J=e&&"pixel"===e.ysizemode;K=!1===f;for(O=0;O<C.length;O++){for(w=0;7>w+2;w+=2){var I=C[O][w+1],
L=C[O][w+2];void 0!==I&&void 0!==L&&(x=I,z=L,e&&(e.xaxis&&e.xaxis.p2r?(K&&(I-=e.xaxis._offset),I=y?h(e.xaxis,e.xanchor)+I:g(e.xaxis,I)):(K&&(I-=F.l),I=v?v.x[0]+I/F.w:I/F.w),e.yaxis&&e.yaxis.p2r?(K&&(L-=e.yaxis._offset),L=J?h(e.yaxis,e.yanchor)-L:g(e.yaxis,L)):(K&&(L-=F.t),L=v?v.y[1]-L/F.h:1-L/F.h)),C[O][w+1]=I,C[O][w+2]=L)}q[t].push(C[O].slice())}}return q};G.pointsShapeRectangle=function(c){if(5!==c.length)return!1;for(var d=1;3>d;d++)if(!p(c[0][d]-c[1][d],c[3][d]-c[2][d])||!p(c[0][d]-c[3][d],c[1][d]-
c[2][d]))return!1;return p(c[0][1],c[1][1])||p(c[0][1],c[3][1])?!!(n(c[0],c[1])*n(c[0],c[3])):!1};G.pointsShapeEllipse=function(c){var d=c.length;if(d!==m+1)return!1;d=m;for(var e=0;e<d;e++){var f=(2*d-e)%d,q=(d/2+f)%d;if(!p(n(c[e],c[(d/2+e)%d]),n(c[f],c[q])))return!1}return!0};G.handleEllipse=function(c,d,e){if(!c)return[d,e];var f=G.ellipseOver({x0:d[0],y0:d[1],x1:e[0],y1:e[1]});c=(f.x1+f.x0)/2;d=(f.y1+f.y0)/2;e=(f.x1-f.x0)/2;f=(f.y1-f.y0)/2;e||(e=f/=a);f||(f=e/=a);for(var q=[],t=0;t<m;t++){var w=
2*t*Math.PI/m;q.push([c+e*Math.cos(w),d+f*Math.sin(w)])}return q};G.ellipseOver=function(c){var d=c.x0,e=c.y0,f=c.x1,q=c.y1;c=f-d;var t=q-e;d=(d-c+f)/2;e=(e-t+q)/2;c*=a;t*=a;return{x0:d-c,y0:e-t,x1:d+c,y1:e+t}}},{"../../../plots/cartesian/helpers":866,"./constants":752,"parse-svg-path":493}],756:[function(b,N,G){G=b("../../dragelement/helpers");var p=G.drawMode,n=G.openMode;G=b("./constants");var k=G.i000,m=G.i090,a=G.i180,g=G.i270,h=G.cos45,r=G.sin45;G=b("../../../plots/cartesian/helpers");var l=
G.p2r,c=G.r2p,d=b("../../../plots/cartesian/handle_outline").clearSelect;b=b("./helpers");var e=b.readPaths,f=b.writePaths,q=b.ellipseOver;N.exports=function(t,w){if(t.length&&(t=t[0][0])){var x=t.getAttribute("d");t=w.gd;var z=t._fullLayout.newshape,B=w.plotinfo,A=B.xaxis,D=B.yaxis,C=!!B.domain||!B.xaxis,v=!!B.domain||!B.yaxis,y=w.isActiveShape,F=w.dragmode,J=(t.layout||{}).shapes||[];if(!p(F)&&void 0!==y){var K=t._fullLayout._activeShapeIndex;if(K<J.length)switch(t._fullLayout.shapes[K].type){case "rect":F=
"drawrect";break;case "circle":F="drawcircle";break;case "line":F="drawline";break;case "path":F=J[K].path||"",F="Z"===F[F.length-1]?"drawclosedpath":"drawopenpath"}}K=n(F);x=e(x,t,B,y);C={editable:!0,xref:C?"paper":A._id,yref:v?"paper":D._id,layer:z.layer,opacity:z.opacity,line:{color:z.line.color,width:z.line.width,dash:z.line.dash}};K||(C.fillcolor=z.fillcolor,C.fillrule=z.fillrule);var O;1===x.length&&(O=x[0]);if(O&&"drawrect"===F)C.type="rect",C.x0=O[0][1],C.y0=O[0][2],C.x1=O[2][1],C.y1=O[2][2];
else if(O&&"drawline"===F)C.type="line",C.x0=O[0][1],C.y0=O[0][2],C.x1=O[1][1],C.y1=O[1][2];else if(O&&"drawcircle"===F){C.type="circle";x=O[k][1];D=O[m][1];z=O[a][1];A=O[g][1];v=O[k][2];F=O[m][2];K=O[a][2];var I=O[g][2];O=B.xaxis&&("date"===B.xaxis.type||"log"===B.xaxis.type);var L=B.yaxis&&("date"===B.yaxis.type||"log"===B.yaxis.type);O&&(x=c(B.xaxis,x),D=c(B.xaxis,D),z=c(B.xaxis,z),A=c(B.xaxis,A));L&&(v=c(B.yaxis,v),F=c(B.yaxis,F),K=c(B.yaxis,K),I=c(B.yaxis,I));var H=(D+A)/2,M=(v+K)/2;x=q({x0:H,
y0:M,x1:H+(A-D+z-x)/2*h,y1:M+(I-F+K-v)/2*r});O&&(x.x0=l(B.xaxis,x.x0),x.x1=l(B.xaxis,x.x1));L&&(x.y0=l(B.yaxis,x.y0),x.y1=l(B.yaxis,x.y1));C.x0=x.x0;C.y0=x.y0;C.x1=x.x1;C.y1=x.y1}else{C.type="path";if(A&&D&&(B="date"===A.type,O="date"===D.type,B||O))for(D=0;D<x.length;D++)for(z=0;z<x[D].length;z++)for(A=0;A+2<x[D][z].length;A+=2)B&&(x[D][z][A+1]=x[D][z][A+1].replace(" ","_")),O&&(x[D][z][A+2]=x[D][z][A+2].replace(" ","_"));C.path=f(x)}d(t);w=w.editHelpers;B=(w||{}).modifyItem;O=[];for(x=0;x<J.length;x++)if(D=
t._fullLayout.shapes[x],O[x]=D._input,void 0!==y&&x===t._fullLayout._activeShapeIndex)switch(z=C,D.type){case "line":case "rect":case "circle":B("x0",z.x0);B("x1",z.x1);B("y0",z.y0);B("y1",z.y1);break;case "path":B("path",z.path)}return void 0===y?(O.push(C),O):w?w.getUpdateObj():{}}}},{"../../../plots/cartesian/handle_outline":865,"../../../plots/cartesian/helpers":866,"../../dragelement/helpers":684,"./constants":752,"./helpers":755}],757:[function(b,N,G){var p=b("./constants"),n=b("../../lib");
G.rangeToShapePosition=function(k){return"log"===k.type?k.r2d:function(m){return m}};G.shapePositionToRange=function(k){return"log"===k.type?k.d2r:function(m){return m}};G.decodeDate=function(k){return function(m){m.replace&&(m=m.replace("_"," "));return k(m)}};G.encodeDate=function(k){return function(m){return k(m).replace(" ","_")}};G.extractPathCoords=function(k,m){var a=[];k.match(p.segmentRE).forEach(function(g){var h=m[g.charAt(0)].drawn;void 0!==h&&(g=g.substr(1).match(p.paramRE),!g||g.length<
h||a.push(n.cleanNumber(g[h])))});return a};G.getDataToPixel=function(k,m,a,g){var h=k._fullLayout._size;if(m)if("domain"===g)k=function(l){return m._length*(a?1-l:l)+m._offset};else{var r=G.shapePositionToRange(m);k=function(l){return m._offset+m.r2p(r(l,!0))};"date"===m.type&&(k=G.decodeDate(k))}else k=a?function(l){return h.t+h.h*(1-l)}:function(l){return h.l+h.w*l};return k};G.getPixelToData=function(k,m,a,g){var h=k._fullLayout._size;if(m)if("domain"===g)k=function(l){l=(l-m._offset)/m._length;
return a?1-l:l};else{var r=G.rangeToShapePosition(m);k=function(l){return r(m.p2r(l-m._offset))}}else k=a?function(l){return 1-(l-h.t)/h.h}:function(l){return(l-h.l)/h.w};return k};G.roundPositionForSharpStrokeRendering=function(k,m){k=Math.round(k);return 1===Math.round(m%2)?k+.5:k};G.makeOptionsAndPlotinfo=function(k,m){m=k._fullLayout.shapes[m]||{};var a=k._fullLayout._plots[m.xref+m.yref];a?a._hadPlotinfo=!0:(a={},m.xref&&"paper"!==m.xref&&(a.xaxis=k._fullLayout[m.xref+"axis"]),m.yref&&"paper"!==
m.yref&&(a.yaxis=k._fullLayout[m.yref+"axis"]));a.xsizemode=m.xsizemode;a.ysizemode=m.ysizemode;a.xanchor=m.xanchor;a.yanchor=m.yanchor;return{options:m,plotinfo:a}}},{"../../lib":803,"./constants":748}],758:[function(b,N,G){G=b("./draw");N.exports={moduleType:"component",name:"shapes",layoutAttributes:b("./attributes"),supplyLayoutDefaults:b("./defaults"),supplyDrawNewShapeDefaults:b("./draw_newshape/defaults"),includeBasePlot:b("../../plots/cartesian/include_components")("shapes"),calcAutorange:b("./calc_autorange"),
draw:G.draw,drawOne:G.drawOne}},{"../../plots/cartesian/include_components":867,"./attributes":746,"./calc_autorange":747,"./defaults":749,"./draw":750,"./draw_newshape/defaults":753}],759:[function(b,N,G){G=b("../../plots/font_attributes");var p=b("../../plots/pad_attributes"),n=b("../../lib/extend").extendDeepAll,k=b("../../plot_api/edit_types").overrideAll,m=b("../../plots/animation_attributes"),a=b("../../plot_api/plot_template").templatedArray;b=b("./constants");var g=a("step",{visible:{valType:"boolean",
dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});N.exports=k(a("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:g,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",
min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:n(p({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:m.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},
xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:G({})},font:G({}),activebgcolor:{valType:"color",dflt:b.gripBgActiveColor},bgcolor:{valType:"color",dflt:b.railBgColor},bordercolor:{valType:"color",dflt:b.railBorderColor},borderwidth:{valType:"number",min:0,dflt:b.railBorderWidth},ticklen:{valType:"number",min:0,dflt:b.tickLength},tickcolor:{valType:"color",dflt:b.tickColor},tickwidth:{valType:"number",
min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:b.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":793,"../../plot_api/edit_types":836,"../../plot_api/plot_template":843,"../../plots/animation_attributes":848,"../../plots/font_attributes":883,"../../plots/pad_attributes":916,"./constants":760}],760:[function(b,N,G){N.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",
railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",
railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],761:[function(b,N,G){function p(r,l,c){function d(t,w){return k.coerce(r,l,a,t,w)}for(var e=m(r,l,{name:"steps",handleItemDefaults:n}),
f=0,q=0;q<e.length;q++)e[q].visible&&f++;if(2>f?l.visible=!1:d("visible"))l._stepCount=f,f=l._visibleSteps=k.filterVisible(e),q=d("active"),(e[q]||{}).visible||(l.active=f[0]._index),d("x"),d("y"),k.noneOrAll(r,l,["x","y"]),d("xanchor"),d("yanchor"),d("len"),d("lenmode"),d("pad.t"),d("pad.r"),d("pad.b"),d("pad.l"),k.coerceFont(d,"font",c.font),d("currentvalue.visible")&&(d("currentvalue.xanchor"),d("currentvalue.prefix"),d("currentvalue.suffix"),d("currentvalue.offset"),k.coerceFont(d,"currentvalue.font",
l.font)),d("transition.duration"),d("transition.easing"),d("bgcolor"),d("activebgcolor"),d("bordercolor"),d("borderwidth"),d("ticklen"),d("tickwidth"),d("tickcolor"),d("minorticklen")}function n(r,l){function c(e,f){return k.coerce(r,l,h,e,f)}if("skip"===r.method||Array.isArray(r.args)?c("visible"):l.visible=!1){c("method");c("args");var d=c("label","step-"+l._index);c("value",d);c("execute")}}var k=b("../../lib"),m=b("../../plots/array_container_defaults"),a=b("./attributes"),g=b("./constants").name,
h=a.steps;N.exports=function(r,l){m(r,l,{name:g,handleItemDefaults:p})}},{"../../lib":803,"../../plots/array_container_defaults":849,"./attributes":759,"./constants":760}],762:[function(b,N,G){function p(H,M){H=H[K.name];for(var Q=[],Z=0;Z<H.length;Z++){var ca=H[Z];ca.visible&&(ca._gd=M,Q.push(ca))}return Q}function n(H){return H._index}function k(H,M){var Q=C.tester.selectAll("g."+K.labelGroupClass).data(M._visibleSteps);Q.enter().append("g").classed(K.labelGroupClass,!0);var Z=0,ca=0;Q.each(function(ha){var Y=
B.select(this);if(ha=h(Y,{step:ha},M).node())ha=C.bBox(ha),ca=Math.max(ca,ha.height),Z=Math.max(Z,ha.width)});Q.remove();var W=M._dims={};W.inputAreaWidth=Math.max(K.railWidth,K.gripHeight);var T=H._fullLayout._size;W.lx=T.l+T.w*M.x;W.ly=T.t+T.h*(1-M.y);W.outerLength="fraction"===M.lenmode?Math.round(T.w*M.len):M.len;W.inputAreaStart=0;W.inputAreaLength=Math.round(W.outerLength-M.pad.l-M.pad.r);W.labelStride=Math.max(1,Math.ceil((Z+K.labelPadding)/((W.inputAreaLength-2*K.stepInset)/(M._stepCount-
1))));W.labelHeight=ca;W.currentValueMaxWidth=0;W.currentValueHeight=0;W.currentValueTotalHeight=0;W.currentValueMaxLines=1;if(M.currentvalue.visible){var U=C.tester.append("g");Q.each(function(ha){var Y=a(U,M,ha.label);ha=Y.node()&&C.bBox(Y.node())||{width:0,height:0};Y=F.lineCount(Y);W.currentValueMaxWidth=Math.max(W.currentValueMaxWidth,Math.ceil(ha.width));W.currentValueHeight=Math.max(W.currentValueHeight,Math.ceil(ha.height));W.currentValueMaxLines=Math.max(W.currentValueMaxLines,Y)});W.currentValueTotalHeight=
W.currentValueHeight+M.currentvalue.offset;U.remove()}W.height=W.currentValueTotalHeight+K.tickOffset+M.ticklen+K.labelOffset+W.labelHeight+M.pad.t+M.pad.b;Q="left";v.isRightAnchor(M)&&(W.lx-=W.outerLength,Q="right");v.isCenterAnchor(M)&&(W.lx-=W.outerLength/2,Q="center");T="top";v.isBottomAnchor(M)&&(W.ly-=W.height,T="bottom");v.isMiddleAnchor(M)&&(W.ly-=W.height/2,T="middle");W.outerLength=Math.ceil(W.outerLength);W.height=Math.ceil(W.height);W.lx=Math.round(W.lx);W.ly=Math.round(W.ly);T={y:M.y,
b:W.height*L[T],t:W.height*I[T]};"fraction"===M.lenmode?(T.l=0,T.xl=M.x-M.len*I[Q],T.r=0,T.xr=M.x+M.len*L[Q]):(T.x=M.x,T.l=W.outerLength*I[Q],T.r=W.outerLength*L[Q]);A.autoMargin(H,K.autoMarginIdRoot+M._index,T)}function m(H,M,Q){(Q.steps[Q.active]||{}).visible||(Q.active=Q._visibleSteps[0]._index);M.call(a,Q).call(z,Q).call(r,Q).call(e,Q).call(x,H,Q).call(g,H,Q);H=Q._dims;C.setTranslate(M,H.lx+Q.pad.l,H.ly+Q.pad.t);M.call(q,Q,!1);M.call(a,Q)}function a(H,M,Q){if(M.currentvalue.visible){var Z=M._dims;
switch(M.currentvalue.xanchor){case "right":var ca=Z.inputAreaLength-K.currentValueInset-Z.currentValueMaxWidth;var W="left";break;case "center":ca=.5*Z.inputAreaLength;W="middle";break;default:ca=K.currentValueInset,W="left"}H=v.ensureSingle(H,"text",K.labelClass,function(ha){ha.attr({"text-anchor":W,"data-notex":1})});var T=M.currentvalue.prefix?M.currentvalue.prefix:"";if("string"===typeof Q)T+=Q;else{Q=M.steps[M.active].label;var U=M._gd._fullLayout._meta;U&&(Q=v.templateString(Q,U));T+=Q}M.currentvalue.suffix&&
(T+=M.currentvalue.suffix);H.call(C.font,M.currentvalue.font).text(T).call(F.convertToTspans,M._gd);T=F.lineCount(H);F.positionText(H,ca,(Z.currentValueMaxLines+1-T)*M.currentvalue.font.size*O);return H}}function g(H,M,Q){v.ensureSingle(H,"rect",K.gripRectClass,function(Z){Z.call(d,M,H,Q).style("pointer-events","all")}).attr({width:K.gripWidth,height:K.gripHeight,rx:K.gripRadius,ry:K.gripRadius}).call(D.stroke,Q.bordercolor).call(D.fill,Q.bgcolor).style("stroke-width",Q.borderwidth+"px")}function h(H,
M,Q){H=v.ensureSingle(H,"text",K.labelClass,function(ca){ca.attr({"text-anchor":"middle","data-notex":1})});M=M.step.label;var Z=Q._gd._fullLayout._meta;Z&&(M=v.templateString(M,Z));H.call(C.font,Q.font).text(M).call(F.convertToTspans,Q._gd);return H}function r(H,M){H=v.ensureSingle(H,"g",K.labelsClass);var Q=M._dims;H=H.selectAll("g."+K.labelGroupClass).data(Q.labelSteps);H.enter().append("g").classed(K.labelGroupClass,!0);H.exit().remove();H.each(function(Z){var ca=B.select(this);ca.call(h,Z,M);
C.setTranslate(ca,t(M,Z.fraction),K.tickOffset+M.ticklen+M.font.size*O+K.labelOffset+Q.currentValueTotalHeight)})}function l(H,M,Q,Z,ca){Z=Q._visibleSteps[Math.round(Z*(Q._stepCount-1))]._index;Z!==Q.active&&c(H,M,Q,Z,!0,ca)}function c(H,M,Q,Z,ca,W){var T=Q.active;Q.active=Z;J(H.layout,K.name,Q).applyUpdate("active",Z);Z=Q.steps[Q.active];M.call(q,Q,W);M.call(a,Q);H.emit("plotly_sliderchange",{slider:Q,step:Q.steps[Q.active],interaction:ca,previousActive:T});Z&&Z.method&&ca&&(M._nextMethod?(M._nextMethod.step=
Z,M._nextMethod.doCallback=ca,M._nextMethod.doTransition=W):(M._nextMethod={step:Z,doCallback:ca,doTransition:W},M._nextMethodRaf=window.requestAnimationFrame(function(){var U=M._nextMethod.step;U.method&&(U.execute&&A.executeAPICommand(H,U.method,U.args),M._nextMethod=null,M._nextMethodRaf=null)})))}function d(H,M,Q){var Z=Q.node(),ca=B.select(M);H.on("mousedown",function(){var W=Q.data()[0];M.emit("plotly_sliderstart",{slider:W});var T=Q.select("."+K.gripRectClass);B.event.stopPropagation();B.event.preventDefault();
T.call(D.fill,W.activebgcolor);var U=w(W,B.mouse(Z)[0]);l(M,Q,W,U,!0);W._dragging=!0;ca.on("mousemove",function(){var ha=Q.data()[0],Y=w(ha,B.mouse(Z)[0]);l(M,Q,ha,Y,!1)});ca.on("mouseup",function(){var ha=Q.data()[0];ha._dragging=!1;T.call(D.fill,ha.bgcolor);ca.on("mouseup",null);ca.on("mousemove",null);M.emit("plotly_sliderend",{slider:ha,step:ha.steps[ha.active]})})})}function e(H,M){H=H.selectAll("rect."+K.tickRectClass).data(M._visibleSteps);var Q=M._dims;H.enter().append("rect").classed(K.tickRectClass,
!0);H.exit().remove();H.attr({width:M.tickwidth+"px","shape-rendering":"crispEdges"});H.each(function(Z,ca){Z=0===ca%Q.labelStride;var W=B.select(this);W.attr({height:Z?M.ticklen:M.minorticklen}).call(D.fill,M.tickcolor);C.setTranslate(W,t(M,ca/(M._stepCount-1))-.5*M.tickwidth,(Z?K.tickOffset:K.minorTickOffset)+Q.currentValueTotalHeight)})}function f(H){var M=H._dims;M.labelSteps=[];for(var Q=H._stepCount,Z=0;Z<Q;Z+=M.labelStride)M.labelSteps.push({fraction:Z/(Q-1),step:H._visibleSteps[Z]})}function q(H,
M,Q){H=H.select("rect."+K.gripRectClass);for(var Z=0,ca=0;ca<M._stepCount;ca++)if(M._visibleSteps[ca]._index===M.active){Z=ca;break}Z=t(M,Z/(M._stepCount-1));M._invokingCommand||(Q&&0<M.transition.duration&&(H=H.transition().duration(M.transition.duration).ease(M.transition.easing)),H.attr("transform",y(Z-.5*K.gripWidth,M._dims.currentValueTotalHeight)))}function t(H,M){H=H._dims;return H.inputAreaStart+K.stepInset+(H.inputAreaLength-2*K.stepInset)*Math.min(1,Math.max(0,M))}function w(H,M){H=H._dims;
return Math.min(1,Math.max(0,(M-K.stepInset-H.inputAreaStart)/(H.inputAreaLength-2*K.stepInset-2*H.inputAreaStart)))}function x(H,M,Q){var Z=Q._dims,ca=v.ensureSingle(H,"rect",K.railTouchRectClass,function(W){W.call(d,M,H,Q).style("pointer-events","all")});ca.attr({width:Z.inputAreaLength,height:Math.max(Z.inputAreaWidth,K.tickOffset+Q.ticklen+Z.labelHeight)}).call(D.fill,Q.bgcolor).attr("opacity",0);C.setTranslate(ca,0,Z.currentValueTotalHeight)}function z(H,M){var Q=M._dims,Z=Q.inputAreaLength-
2*K.railInset;H=v.ensureSingle(H,"rect",K.railRectClass);H.attr({width:Z,height:K.railWidth,rx:K.railRadius,ry:K.railRadius,"shape-rendering":"crispEdges"}).call(D.stroke,M.bordercolor).call(D.fill,M.bgcolor).style("stroke-width",M.borderwidth+"px");C.setTranslate(H,K.railInset,.5*(Q.inputAreaWidth-K.railWidth)+Q.currentValueTotalHeight)}var B=b("@plotly/d3"),A=b("../../plots/plots"),D=b("../color"),C=b("../drawing"),v=b("../../lib"),y=v.strTranslate,F=b("../../lib/svg_text_utils"),J=b("../../plot_api/plot_template").arrayEditor,
K=b("./constants");b=b("../../constants/alignment");var O=b.LINE_SPACING,I=b.FROM_TL,L=b.FROM_BR;N.exports=function(H){function M(W){W._commandObserver&&(W._commandObserver.remove(),delete W._commandObserver);A.autoMargin(H,K.autoMarginIdRoot+W._index)}var Q=H._fullLayout,Z=p(Q,H);Q=Q._infolayer.selectAll("g."+K.containerClassName).data(0<Z.length?[0]:[]);Q.enter().append("g").classed(K.containerClassName,!0).style("cursor","ew-resize");Q.exit().each(function(){B.select(this).selectAll("g."+K.groupClassName).each(M)}).remove();
if(0!==Z.length){Q=Q.selectAll("g."+K.groupClassName).data(Z,n);Q.enter().append("g").classed(K.groupClassName,!0);Q.exit().each(M).remove();for(var ca=0;ca<Z.length;ca++)k(H,Z[ca]);Q.each(function(W){var T=B.select(this);f(W);A.manageCommandObserver(H,W,W._visibleSteps,function(U){var ha=T.data()[0];ha.active!==U.index&&(ha._dragging||c(H,T,ha,U.index,!1,!0))});m(H,B.select(this),W)})}}},{"../../constants/alignment":771,"../../lib":803,"../../lib/svg_text_utils":829,"../../plot_api/plot_template":843,
"../../plots/plots":917,"../color":666,"../drawing":688,"./constants":760,"@plotly/d3":58}],763:[function(b,N,G){G=b("./constants");N.exports={moduleType:"component",name:G.name,layoutAttributes:b("./attributes"),supplyLayoutDefaults:b("./defaults"),draw:b("./draw")}},{"./attributes":759,"./constants":760,"./defaults":761,"./draw":762}],764:[function(b,N,G){var p=b("@plotly/d3"),n=b("fast-isnumeric"),k=b("../../plots/plots"),m=b("../../registry"),a=b("../../lib"),g=a.strTranslate,h=b("../drawing"),
r=b("../color"),l=b("../../lib/svg_text_utils"),c=b("../../constants/interactions"),d=b("../../constants/alignment").OPPOSITE_SIDE,e=/ [XY][0-9]* /;N.exports={draw:function(f,q,t){function w(T){a.syncOrAsync([x,z],T)}function x(T){if(F){var U="";F.rotate&&(U+="rotate("+[F.rotate,y.x,y.y]+")");F.offset&&(U+=g(0,F.offset))}else U=null;T.attr("transform",U);T.style({"font-family":M,"font-size":p.round(Q,2)+"px",fill:r.rgb(Z),opacity:O*r.opacity(Z),"font-weight":k.fontWeight}).attr(y).call(l.convertToTspans,
f);return k.previousPromises(f)}function z(T){T=p.select(T.node().parentNode);if(v&&v.selection&&v.side&&H){T.attr("transform",null);var U=d[v.side],ha="left"===v.side||"top"===v.side?-1:1,Y=n(v.pad)?v.pad:2,ba=h.bBox(T.node()),ja={left:0,top:0,right:K.width,bottom:K.height};ja=v.maxShift||ha*(ja[v.side]-ba[v.side]);var ma=0;if(0>ja)ma=ja;else{var ia=v.offsetLeft||0,oa=v.offsetTop||0;ba.left-=ia;ba.right-=ia;ba.top-=oa;ba.bottom-=oa;v.selection.each(function(){var xa=h.bBox(this);a.bBoxIntersect(ba,
xa,Y)&&(ma=Math.max(ma,ha*(xa[v.side]-ba[U])+Y))});ma=Math.min(ja,ma)}if(0<ma||0>ja)ja={left:[-ma,0],right:[ma,0],top:[0,-ma],bottom:[0,ma]}[v.side],T.attr("transform",g(ja[0],ja[1]))}}function B(){O=0;I=!0;W.text(D).on("mouseover.opacity",function(){p.select(this).transition().duration(c.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){p.select(this).transition().duration(c.HIDE_PLACEHOLDER).style("opacity",0)})}var A=t.propName,D=t.placeholder,C=t.traceIndex,v=t.avoid||{},
y=t.attributes,F=t.transform,J=t.containerGroup,K=f._fullLayout,O=1,I=!1,L=t.propContainer.title,H=(L&&L.text?L.text:"").trim();L=L&&L.font?L.font:{};var M=L.family,Q=L.size,Z=L.color,ca;"title.text"===A?ca="titleText":-1!==A.indexOf("axis")?ca="axisTitleText":A.indexOf(!0)&&(ca="colorbarTitleText");ca=f._context.edits[ca];""===H?O=0:H.replace(e," % ")===D.replace(e," % ")&&(O=.2,I=!0,ca||(H=""));t._meta?H=a.templateString(H,t._meta):K._meta&&(H=a.templateString(H,K._meta));t=H||ca;J||(J=a.ensureSingle(K._infolayer,
"g","g-"+q));var W=J.selectAll("text").data(t?[0]:[]);W.enter().append("text");W.text(H).attr("class",q);W.exit().remove();if(!t)return J;W.call(w);if(ca){if(H)W.on(".opacity",null);else B();W.call(l.makeEditable,{gd:f}).on("edit",function(T){void 0!==C?m.call("_guiRestyle",f,A,T,C):m.call("_guiRelayout",f,A,T)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(w)}).on("input",function(T){this.text(T||" ").call(l.positionText,y.x,y.y)})}W.classed("js-placeholder",I);return J}}},
{"../../constants/alignment":771,"../../constants/interactions":778,"../../lib":803,"../../lib/svg_text_utils":829,"../../plots/plots":917,"../../registry":931,"../color":666,"../drawing":688,"@plotly/d3":58,"fast-isnumeric":249}],765:[function(b,N,G){G=b("../../plots/font_attributes");var p=b("../color/attributes"),n=b("../../lib/extend").extendFlat,k=b("../../plot_api/edit_types").overrideAll,m=b("../../plots/pad_attributes");b=b("../../plot_api/plot_template").templatedArray;var a=b("button",{visible:{valType:"boolean"},
method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});N.exports=k(b("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",
values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:a,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:n(m({editType:"arraydraw"}),
{}),font:G({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:p.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":793,"../../plot_api/edit_types":836,"../../plot_api/plot_template":843,"../../plots/font_attributes":883,"../../plots/pad_attributes":916,"../color/attributes":665}],766:[function(b,N,G){N.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",
headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,
arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"",right:"",up:"",down:""}}},{}],767:[function(b,N,G){function p(r,l,c){function d(f,q){return k.coerce(r,l,a,f,q)}var e=m(r,l,{name:"buttons",handleItemDefaults:n});d("visible",0<e.length)&&(d("active"),d("direction"),d("type"),d("showactive"),d("x"),d("y"),k.noneOrAll(r,l,["x","y"]),d("xanchor"),d("yanchor"),d("pad.t"),d("pad.r"),d("pad.b"),d("pad.l"),k.coerceFont(d,"font",c.font),d("bgcolor",
c.paper_bgcolor),d("bordercolor"),d("borderwidth"))}function n(r,l){function c(d,e){return k.coerce(r,l,h,d,e)}c("visible","skip"===r.method||Array.isArray(r.args))&&(c("method"),c("args"),c("args2"),c("label"),c("execute"))}var k=b("../../lib"),m=b("../../plots/array_container_defaults"),a=b("./attributes"),g=b("./constants").name,h=a.buttons;N.exports=function(r,l){m(r,l,{name:g,handleItemDefaults:p})}},{"../../lib":803,"../../plots/array_container_defaults":849,"./attributes":765,"./constants":766}],
768:[function(b,N,G){function p(K){return K._index}function n(K,O){return+K.attr(F.menuIndexAttrName)===O._index}function k(K,O,I,L,H,M,Q,Z){O.active=Q;v(K.layout,F.name,O).applyUpdate("active",Q);"buttons"===O.type?a(K,L,null,null,O):"dropdown"===O.type&&(H.attr(F.menuIndexAttrName,"-1"),m(K,L,H,M,O),Z||a(K,L,H,M,O))}function m(K,O,I,L,H){var M=D.ensureSingle(O,"g",F.headerClassName,function(W){W.style("pointer-events","all")}),Q=H._dims,Z={y:H.pad.t,yPad:0,x:H.pad.l,xPad:0,index:0},ca={width:Q.headerWidth,
height:Q.headerHeight};M.call(r,H,H.buttons[H.active]||F.blankHeaderOpts,K).call(t,H,Z,ca);D.ensureSingle(O,"text",F.headerArrowClassName,function(W){W.attr("text-anchor","end").call(A.font,H.font).text(F.arrowSymbol[H.direction])}).attr({x:Q.headerWidth-F.arrowOffsetX+H.pad.l,y:Q.headerHeight/2+F.textOffsetY+H.pad.t});M.on("click",function(){I.call(w,String(n(I,H)?-1:H._index));a(K,O,I,L,H)});M.on("mouseover",function(){M.call(e)});M.on("mouseout",function(){M.call(f,H)});A.setTranslate(O,Q.lx,Q.ly)}
function a(K,O,I,L,H){I||(I=O,I.attr("pointer-events","all"));var M=-1!==+I.attr(F.menuIndexAttrName)||"buttons"===H.type?H.buttons:[],Q="dropdown"===H.type?F.dropdownButtonClassName:F.buttonClassName,Z=I.selectAll("g."+Q).data(D.filterVisible(M));M=Z.enter().append("g").classed(Q,!0);Q=Z.exit();"dropdown"===H.type?(M.attr("opacity","0").transition().attr("opacity","1"),Q.transition().attr("opacity","0").remove()):Q.remove();var ca=0,W=0;M=H._dims;Q=-1!==["up","down"].indexOf(H.direction);"dropdown"===
H.type&&(Q?W=M.headerHeight+F.gapButtonHeader:ca=M.headerWidth+F.gapButtonHeader);"dropdown"===H.type&&"up"===H.direction&&(W=-F.gapButtonHeader+F.gapButton-M.openHeight);"dropdown"===H.type&&"left"===H.direction&&(ca=-F.gapButtonHeader+F.gapButton-M.openWidth);var T={x:M.lx+ca+H.pad.l,y:M.ly+W+H.pad.t,yPad:F.gapButton,xPad:F.gapButton,index:0};ca={l:T.x+H.borderwidth,t:T.y+H.borderwidth};Z.each(function(U,ha){var Y=x.select(this);Y.call(r,H,U,K).call(t,H,T);Y.on("click",function(){x.event.defaultPrevented||
(U.execute&&(U.args2&&H.active===ha?(k(K,H,U,O,I,L,-1),z.executeAPICommand(K,U.method,U.args2)):(k(K,H,U,O,I,L,ha),z.executeAPICommand(K,U.method,U.args))),K.emit("plotly_buttonclicked",{menu:H,button:U,active:H.active}))});Y.on("mouseover",function(){Y.call(e)});Y.on("mouseout",function(){Y.call(f,H);Z.call(d,H)})});Z.call(d,H);Q?(ca.w=Math.max(M.openWidth,M.headerWidth),ca.h=T.y-ca.t):(ca.w=T.x-ca.l,ca.h=Math.max(M.openHeight,M.headerHeight));ca.direction=H.direction;L&&(Z.size()?g(K,O,I,L,H,ca):
h(L))}function g(K,O,I,L,H,M){O=H.direction;K=H._dims;H=H.active;var Q,Z;if("up"===O||"down"===O)for(O=Z=0;O<H;O++)Z+=K.heights[O]+F.gapButton;else for(O=Q=0;O<H;O++)Q+=K.widths[O]+F.gapButton;L.enable(M,Q,Z);L.hbar&&L.hbar.attr("opacity","0").transition().attr("opacity","1");L.vbar&&L.vbar.attr("opacity","0").transition().attr("opacity","1")}function h(K){var O=!!K.hbar,I=!!K.vbar;O&&K.hbar.transition().attr("opacity","0").each("end",function(){O=!1;I||K.disable()});I&&K.vbar.transition().attr("opacity",
"0").each("end",function(){I=!1;O||K.disable()})}function r(K,O,I,L){K.call(l,O).call(c,O,I,L)}function l(K,O){D.ensureSingle(K,"rect",F.itemRectClassName,function(I){I.attr({rx:F.rx,ry:F.ry,"shape-rendering":"crispEdges"})}).call(B.stroke,O.bordercolor).call(B.fill,O.bgcolor).style("stroke-width",O.borderwidth+"px")}function c(K,O,I,L){K=D.ensureSingle(K,"text",F.itemTextClassName,function(M){M.attr({"text-anchor":"start","data-notex":1})});I=I.label;var H=L._fullLayout._meta;H&&(I=D.templateString(I,
H));K.call(A.font,O.font).text(I).call(C.convertToTspans,L)}function d(K,O){var I=O.active;K.each(function(L,H){L=x.select(this);H===I&&O.showactive&&L.select("rect."+F.itemRectClassName).call(B.fill,F.activeColor)})}function e(K){K.select("rect."+F.itemRectClassName).call(B.fill,F.hoverColor)}function f(K,O){K.select("rect."+F.itemRectClassName).call(B.fill,O.bgcolor)}function q(K,O){var I=O._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},
L=A.tester.selectAll("g."+F.dropdownButtonClassName).data(D.filterVisible(O.buttons));L.enter().append("g").classed(F.dropdownButtonClassName,!0);var H=-1!==["up","down"].indexOf(O.direction);L.each(function(ca,W){var T=x.select(this);T.call(r,O,ca,K);T=T.select("."+F.itemTextClassName);ca=T.node()&&A.bBox(T.node()).width;ca=Math.max(ca+F.textPadX,F.minWidth);var U=O.font.size*y;T=C.lineCount(T);T=Math.max(U*T,F.minHeight)+F.textOffsetY;T=Math.ceil(T);ca=Math.ceil(ca);I.widths[W]=ca;I.heights[W]=
T;I.height1=Math.max(I.height1,T);I.width1=Math.max(I.width1,ca);H?(I.totalWidth=Math.max(I.totalWidth,ca),I.openWidth=I.totalWidth,I.totalHeight+=T+F.gapButton,I.openHeight+=T+F.gapButton):(I.totalWidth+=ca+F.gapButton,I.openWidth+=ca+F.gapButton,I.totalHeight=Math.max(I.totalHeight,T),I.openHeight=I.totalHeight)});H?I.totalHeight-=F.gapButton:I.totalWidth-=F.gapButton;I.headerWidth=I.width1+F.arrowPadX;I.headerHeight=I.height1;"dropdown"===O.type&&(H?(I.width1+=F.arrowPadX,I.totalHeight=I.height1):
I.totalWidth=I.width1,I.totalWidth+=F.arrowPadX);L.remove();L=I.totalWidth+O.pad.l+O.pad.r;var M=I.totalHeight+O.pad.t+O.pad.b,Q=K._fullLayout._size;I.lx=Q.l+Q.w*O.x;I.ly=Q.t+Q.h*(1-O.y);Q="left";D.isRightAnchor(O)&&(I.lx-=L,Q="right");D.isCenterAnchor(O)&&(I.lx-=L/2,Q="center");var Z="top";D.isBottomAnchor(O)&&(I.ly-=M,Z="bottom");D.isMiddleAnchor(O)&&(I.ly-=M/2,Z="middle");I.totalWidth=Math.ceil(I.totalWidth);I.totalHeight=Math.ceil(I.totalHeight);I.lx=Math.round(I.lx);I.ly=Math.round(I.ly);z.autoMargin(K,
F.autoMarginIdRoot+O._index,{x:O.x,y:O.y,l:L*({right:1,center:.5}[Q]||0),r:L*({left:1,center:.5}[Q]||0),b:M*({top:1,middle:.5}[Z]||0),t:M*({bottom:1,middle:.5}[Z]||0)})}function t(K,O,I,L){L=L||{};var H=K.select("."+F.itemRectClassName),M=K.select("."+F.itemTextClassName),Q=O.borderwidth,Z=I.index,ca=O._dims;A.setTranslate(K,Q+I.x,Q+I.y);K=-1!==["up","down"].indexOf(O.direction);Q=L.height||(K?ca.heights[Z]:ca.height1);H.attr({x:0,y:0,width:L.width||(K?ca.width1:ca.widths[Z]),height:Q});O=O.font.size*
y;L=C.lineCount(M);C.positionText(M,F.textOffsetX,Q/2-(L-1)*O/2+F.textOffsetY);K?I.y+=ca.heights[Z]+I.yPad:I.x+=ca.widths[Z]+I.xPad;I.index++}function w(K,O){K.attr(F.menuIndexAttrName,O||"-1").selectAll("g."+F.dropdownButtonClassName).remove()}var x=b("@plotly/d3"),z=b("../../plots/plots"),B=b("../color"),A=b("../drawing"),D=b("../../lib"),C=b("../../lib/svg_text_utils"),v=b("../../plot_api/plot_template").arrayEditor,y=b("../../constants/alignment").LINE_SPACING,F=b("./constants"),J=b("./scrollbox");
N.exports=function(K){function O(ca){z.autoMargin(K,F.autoMarginIdRoot+ca._index)}var I=K._fullLayout,L=D.filterVisible(I[F.name]),H=I._menulayer.selectAll("g."+F.containerClassName).data(0<L.length?[0]:[]);H.enter().append("g").classed(F.containerClassName,!0).style("cursor","pointer");H.exit().each(function(){x.select(this).selectAll("g."+F.headerGroupClassName).each(O)}).remove();if(0!==L.length){var M=H.selectAll("g."+F.headerGroupClassName).data(L,p);M.enter().append("g").classed(F.headerGroupClassName,
!0);var Q=D.ensureSingle(H,"g",F.dropdownButtonGroupClassName,function(ca){ca.style("pointer-events","all")});for(H=0;H<L.length;H++)q(K,L[H]);var Z=new J(K,Q,"updatemenus"+I._uid);M.enter().size()&&(Q.node().parentNode.appendChild(Q.node()),Q.call(w));M.exit().each(function(ca){Q.call(w);O(ca)}).remove();M.each(function(ca){var W=x.select(this),T="dropdown"===ca.type?Q:null;z.manageCommandObserver(K,ca,ca.buttons,function(U){k(K,ca,ca.buttons[U.index],W,T,Z,U.index,!0)});"dropdown"===ca.type?(m(K,
W,Q,Z,ca),n(Q,ca)&&a(K,W,Q,Z,ca)):a(K,W,null,null,ca)})}}},{"../../constants/alignment":771,"../../lib":803,"../../lib/svg_text_utils":829,"../../plot_api/plot_template":843,"../../plots/plots":917,"../color":666,"../drawing":688,"./constants":766,"./scrollbox":770,"@plotly/d3":58}],769:[function(b,N,G){arguments[4][763][0].apply(G,arguments)},{"./attributes":765,"./constants":766,"./defaults":767,"./draw":768,dup:763}],770:[function(b,N,G){function p(g,h,r){this.gd=g;this.container=h;this.id=r;this.vbar=
this.hbar=this.translateY=this.translateX=this.position=null;this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]);this.bg.exit().on(".drag",null).on("wheel",null).remove();this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}N.exports=p;var n=b("@plotly/d3"),k=b("../color"),m=b("../drawing"),a=b("../../lib");p.barWidth=2;p.barLength=20;p.barRadius=2;p.barPad=1;p.barColor="#808BA4";p.prototype.enable=function(g,
h,r){var l=this.gd._fullLayout,c=l.width,d=l.height;this.position=g;g=this.position.l;var e=this.position.w,f=this.position.t,q=this.position.h,t=this.position.direction,w="down"===t,x="left"===t,z="up"===t,B=e,A=q;w||x||"right"===t||z||(this.position.direction="down",w=!0);if(w||z){var D=g;var C=D+B;w?(z=f,t=Math.min(z+A,d)):(t=f+A,z=Math.max(t-A,0));A=t-z}else z=f,t=z+A,x?(C=g+B,D=Math.max(C-B,0)):(D=g,C=Math.min(D+B,c)),B=C-D;this._box={l:D,t:z,w:B,h:A};w=e>B;var v=p.barLength+2*p.barPad;x=p.barWidth+
2*p.barPad;var y=f+q;y+x>d&&(y=d-x);d=this.container.selectAll("rect.scrollbar-horizontal").data(w?[0]:[]);d.exit().on(".drag",null).remove();d.enter().append("rect").classed("scrollbar-horizontal",!0).call(k.fill,p.barColor);w?(this.hbar=d.attr({rx:p.barRadius,ry:p.barRadius,x:g,y,width:v,height:x}),this._hbarXMin=g+v/2,this._hbarTranslateMax=B-v):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);d=q>A;B=p.barWidth+2*p.barPad;v=p.barLength+2*p.barPad;y=g+e;y+B>c&&(y=c-B);c=this.container.selectAll("rect.scrollbar-vertical").data(d?
[0]:[]);c.exit().on(".drag",null).remove();c.enter().append("rect").classed("scrollbar-vertical",!0).call(k.fill,p.barColor);d?(this.vbar=c.attr({rx:p.barRadius,ry:p.barRadius,x:y,y:f,width:B,height:v}),this._vbarYMin=f+v/2,this._vbarTranslateMax=A-v):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);c=this.id;A=D-.5;C=d?C+B+.5:C+.5;z-=.5;t=w?t+x+.5:t+.5;l=l._topdefs.selectAll("#"+c).data(w||d?[0]:[]);l.exit().remove();l.enter().append("clipPath").attr("id",c).append("rect");
w||d?(this._clipRect=l.select("rect").attr({x:Math.floor(A),y:Math.floor(z),width:Math.ceil(C)-Math.floor(A),height:Math.ceil(t)-Math.floor(z)}),this.container.call(m.setClipUrl,c,this.gd),this.bg.attr({x:g,y:f,width:e,height:q})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(m.setClipUrl,null),delete this._clipRect);if(w||d)l=n.behavior.drag().on("dragstart",function(){n.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this)),this.container.on("wheel",
null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(l),l=n.behavior.drag().on("dragstart",function(){n.event.sourceEvent.preventDefault();n.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this)),w&&this.hbar.on(".drag",null).call(l),d&&this.vbar.on(".drag",null).call(l);this.setTranslate(h,r)};p.prototype.disable=function(){if(this.hbar||this.vbar)this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(m.setClipUrl,null),delete this._clipRect;
this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)};p.prototype._onBoxDrag=function(){var g=this.translateX,h=this.translateY;this.hbar&&(g-=n.event.dx);this.vbar&&(h-=n.event.dy);this.setTranslate(g,h)};p.prototype._onBoxWheel=function(){var g=this.translateX,h=this.translateY;this.hbar&&(g+=n.event.deltaY);
this.vbar&&(h+=n.event.deltaY);this.setTranslate(g,h)};p.prototype._onBarDrag=function(){var g=this.translateX,h=this.translateY;if(this.hbar){g+=this._hbarXMin;var r=g+this._hbarTranslateMax;g=(a.constrain(n.event.x,g,r)-g)/(r-g)*(this.position.w-this._box.w)}this.vbar&&(h+=this._vbarYMin,r=h+this._vbarTranslateMax,h=(a.constrain(n.event.y,h,r)-h)/(r-h)*(this.position.h-this._box.h));this.setTranslate(g,h)};p.prototype.setTranslate=function(g,h){var r=this.position.w-this._box.w,l=this.position.h-
this._box.h;g=a.constrain(g||0,0,r);h=a.constrain(h||0,0,l);this.translateX=g;this.translateY=h;this.container.call(m.setTranslate,this._box.l-this.position.l-g,this._box.t-this.position.t-h);this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+g-.5),y:Math.floor(this.position.t+h-.5)});this.hbar&&this.hbar.call(m.setTranslate,g+g/r*this._hbarTranslateMax,h);this.vbar&&this.vbar.call(m.setTranslate,g,h+h/l*this._vbarTranslateMax)}},{"../../lib":803,"../color":666,"../drawing":688,"@plotly/d3":58}],
771:[function(b,N,G){N.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],772:[function(b,N,G){N.exports={axisRefDescription:function(p,n,k){return["If set to a",p,"axis id (e.g. *"+p+"* or","*"+p+"2*), the `"+p+"` position refers to a",p,"coordinate. If set to *paper*, the `"+
p+"`","position refers to the distance from the",n,"of the plotting area in normalized coordinates where *0* (*1*) corresponds to the",n,"("+k+"). If set to a",p,"axis ID followed by *domain* (separated by a space), the position behaves like for *paper*, but refers to the distance in fractions of the domain length from the",n,"of the domain of that axis: e.g.,","*"+p+"2 domain* refers to the domain of the second",p," axis and a",p,"position of 0.5 refers to the point between the",n,"and the",k,"of the domain of the second",
p,"axis."].join(" ")}}},{}],773:[function(b,N,G){N.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:""},DECREASING:{COLOR:"#FF4136",SYMBOL:""}}},{}],774:[function(b,N,G){N.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},{}],775:[function(b,N,G){N.exports={COMPARISON_OPS:"\x3d !\x3d \x3c \x3e\x3d \x3e \x3c\x3d".split(" "),COMPARISON_OPS2:["\x3d","\x3c","\x3e\x3d","\x3e","\x3c\x3d"],INTERVAL_OPS:"[] () [) (] ][ )( ]( )[".split(" "),
SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"\x3d":"\x3d","\x3c":"\x3c","\x3c\x3d":"\x3c","\x3e":"\x3e","\x3e\x3d":"\x3e","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],776:[function(b,N,G){N.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],777:[function(b,N,G){N.exports={circle:"","circle-open":"",square:"","square-open":"",diamond:"","diamond-open":"",cross:"+",
x:""}},{}],778:[function(b,N,G){N.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1E3,DESELECTDIM:.2}},{}],779:[function(b,N,G){N.exports={BADNUM:void 0,FP_SAFE:1E-4*Number.MAX_VALUE,ONEMAXYEAR:316224E5,ONEAVGYEAR:315576E5,ONEMINYEAR:31536E6,ONEMAXQUARTER:79488E5,ONEAVGQUARTER:78894E5,ONEMINQUARTER:76896E5,ONEMAXMONTH:26784E5,ONEAVGMONTH:26298E5,ONEMINMONTH:24192E5,ONEWEEK:6048E5,ONEDAY:864E5,ONEHOUR:36E5,ONEMIN:6E4,ONESEC:1E3,EPOCHJD:2440587.5,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:""}},{}],
780:[function(b,N,G){G.xmlns="http://www.w3.org/2000/xmlns/";G.svg="http://www.w3.org/2000/svg";G.xlink="http://www.w3.org/1999/xlink";G.svgAttrs={xmlns:G.svg,"xmlns:xlink":G.xlink}},{}],781:[function(b,N,G){G.version=b("./version").version;b("native-promise-only");b("../build/plotcss");N=b("./registry");N=G.register=N.register;for(var p=b("./plot_api"),n=Object.keys(p),k=0;k<n.length;k++){var m=n[k];"_"!==m.charAt(0)&&(G[m]=p[m]);N({moduleType:"apiMethod",name:m,fn:p[m]})}N(b("./traces/scatter"));
N([b("./components/legend"),b("./components/fx"),b("./components/annotations"),b("./components/annotations3d"),b("./components/shapes"),b("./components/images"),b("./components/updatemenus"),b("./components/sliders"),b("./components/rangeslider"),b("./components/rangeselector"),b("./components/grid"),b("./components/errorbars"),b("./components/colorscale"),b("./components/colorbar"),b("./components/modebar")]);N([b("./locale-en"),b("./locale-en-us")]);window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&
(N(window.PlotlyLocales),delete window.PlotlyLocales);G.Icons=b("./fonts/ploticon");N=b("./components/fx");p=b("./plots/plots");G.Plots={resize:p.resize,graphJson:p.graphJson,sendDataToCloud:p.sendDataToCloud};G.Fx={hover:N.hover,unhover:N.unhover,loneHover:N.loneHover,loneUnhover:N.loneUnhover};G.Snapshot=b("./snapshot");G.PlotSchema=b("./plot_api/plot_schema")},{"../build/plotcss":1,"./components/annotations":657,"./components/annotations3d":662,"./components/colorbar":672,"./components/colorscale":678,
"./components/errorbars":694,"./components/fx":706,"./components/grid":710,"./components/images":715,"./components/legend":723,"./components/modebar":729,"./components/rangeselector":737,"./components/rangeslider":744,"./components/shapes":758,"./components/sliders":763,"./components/updatemenus":769,"./fonts/ploticon":782,"./locale-en":834,"./locale-en-us":833,"./plot_api":838,"./plot_api/plot_schema":842,"./plots/plots":917,"./registry":931,"./snapshot":936,"./traces/scatter":1230,"./version":1404,
"native-promise-only":474}],782:[function(b,N,G){N.exports={undo:{width:857.1,height:1E3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1E3,
path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1E3,height:1E3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",
transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1E3,height:1E3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1E3,height:1E3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",
transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1E3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1E3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1E3,height:1E3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",
transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1E3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1E3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1E3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",
transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1E3,height:1E3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",
transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1E3,height:1E3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",
transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1E3,height:1E3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",
transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1E3,height:1E3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",
transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1E3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",
transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1E3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},
drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",
transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},
lasso:{width:1031,height:1E3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",
transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1E3,height:1E3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},
drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",
transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},
eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1E3,height:1E3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",
transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"\x3csvg xmlns\x3d'http://www.w3.org/2000/svg' viewBox\x3d'0 0 132 132'\x3e\x3cdefs\x3e\x3cstyle\x3e.cls-1 {fill: #3f4f75;} .cls-2 {fill: #80cfbe;} .cls-3 {fill: #fff;}\x3c/style\x3e\x3c/defs\x3e\x3ctitle\x3eplotly-logomark\x3c/title\x3e\x3cg id\x3d'symbol'\x3e\x3crect class\x3d'cls-1' width\x3d'132' height\x3d'132' rx\x3d'6' ry\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'78' cy\x3d'54' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'102' cy\x3d'30' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'78' cy\x3d'30' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'54' cy\x3d'30' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'30' cy\x3d'30' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'30' cy\x3d'54' r\x3d'6'/\x3e\x3cpath class\x3d'cls-3' d\x3d'M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/\x3e\x3cpath class\x3d'cls-3' d\x3d'M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/\x3e\x3cpath class\x3d'cls-3' d\x3d'M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/\x3e\x3cpath class\x3d'cls-3' d\x3d'M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/\x3e\x3c/g\x3e\x3c/svg\x3e"}}},
{}],783:[function(b,N,G){G.isLeftAnchor=function(p){return"left"===p.xanchor||"auto"===p.xanchor&&p.x<=1/3};G.isCenterAnchor=function(p){return"center"===p.xanchor||"auto"===p.xanchor&&p.x>1/3&&p.x<2/3};G.isRightAnchor=function(p){return"right"===p.xanchor||"auto"===p.xanchor&&p.x>=2/3};G.isTopAnchor=function(p){return"top"===p.yanchor||"auto"===p.yanchor&&p.y>=2/3};G.isMiddleAnchor=function(p){return"middle"===p.yanchor||"auto"===p.yanchor&&p.y>1/3&&p.y<2/3};G.isBottomAnchor=function(p){return"bottom"===
p.yanchor||"auto"===p.yanchor&&p.y<=1/3}},{}],784:[function(b,N,G){function p(l){return Math.abs(l[1]-l[0])>r-1E-14}function n(l,c){return g(c-l,r)}function k(l,c){if(p(c))return!0;if(c[0]<c[1]){var d=c[0];c=c[1]}else d=c[1],c=c[0];d=a(d,r);c=a(c,r);d>c&&(c+=r);l=a(l,r);var e=l+r;return l>=d&&l<=c||e>=d&&e<=c}function m(l,c,d,e,f,q,t){function w(C,v){return[C*Math.cos(v)+f,q-C*Math.sin(v)]}function x(C,v,y){return"A"+[C,C]+" "+[0,D,y]+" "+w(C,v)}f=f||0;q=q||0;var z=p([d,e]);if(z){var B=0;var A=h;
d=r}else d<e?(B=d,d=e):B=e;l<c?(e=l,l=c):e=c;var D=Math.abs(d-B)<=h?0:1;z?z=null===e?"M"+w(l,B)+x(l,A,0)+x(l,d,0)+"Z":"M"+w(e,B)+x(e,A,0)+x(e,d,0)+"ZM"+w(l,B)+x(l,A,1)+x(l,d,1)+"Z":null===e?(z="M"+w(l,B)+x(l,d,0),t&&(z+="L0,0Z")):z="M"+w(e,B)+"L"+w(l,B)+x(l,d,0)+"L"+w(e,d)+x(e,B,1)+"Z";return z}b=b("./mod");var a=b.mod,g=b.modHalf,h=Math.PI,r=2*h;N.exports={deg2rad:function(l){return l/180*h},rad2deg:function(l){return l/h*180},angleDelta:n,angleDist:function(l,c){return Math.abs(n(l,c))},isFullCircle:p,
isAngleInsideSector:k,isPtInsideSector:function(l,c,d,e){if(!k(c,e))return!1;d[0]<d[1]?(c=d[0],d=d[1]):(c=d[1],d=d[0]);return l>=c&&l<=d},pathArc:function(l,c,d,e,f){return m(null,l,c,d,e,f,0)},pathSector:function(l,c,d,e,f){return m(null,l,c,d,e,f,1)},pathAnnulus:function(l,c,d,e,f,q){return m(l,c,d,e,f,q,1)}}},{"./mod":810}],785:[function(b,N,G){function p(h){return a.isView(h)&&!(h instanceof g)}function n(h){return m(h)||p(h)}function k(h,r,l){if(n(h)){if(n(h[0])){for(var c=0;c<h.length;c++)l=
r(l,h[c].length);return l}return h.length}return 0}var m=Array.isArray,a=ArrayBuffer,g=DataView;G.isTypedArray=p;G.isArrayOrTypedArray=n;G.isArray1D=function(h){return!n(h[0])};G.ensureArray=function(h,r){m(h)||(h=[]);h.length=r;return h};G.concat=function(){var h=[],r=!0,l=0,c,d;for(c=0;c<arguments.length;c++){var e=arguments[c];if(d=e.length){if(f)h.push(e);else{var f=e;var q=d}if(m(e))var t=!1;else r=!1,l?t!==e.constructor&&(t=!1):t=e.constructor;l+=d}}if(!l)return[];if(!h.length)return f;if(r)return f.concat.apply(f,
h);if(t){r=new t(l);r.set(f);for(c=0;c<h.length;c++)e=h[c],r.set(e,q),q+=e.length;return r}r=Array(l);for(l=0;l<f.length;l++)r[l]=f[l];for(c=0;c<h.length;c++){e=h[c];for(l=0;l<e.length;l++)r[q+l]=e[l];q+=l}return r};G.maxRowLength=function(h){return k(h,Math.max,0)};G.minRowLength=function(h){return k(h,Math.min,Infinity)}},{}],786:[function(b,N,G){var p=b("fast-isnumeric"),n=b("../constants/numerical").BADNUM,k=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;N.exports=function(m){"string"===typeof m&&(m=m.replace(k,
""));return p(m)?Number(m):n}},{"../constants/numerical":779,"fast-isnumeric":249}],787:[function(b,N,G){N.exports=function(p){p=p._fullLayout;p._glcanvas&&p._glcanvas.size()&&p._glcanvas.each(function(n){n.regl&&n.regl.clear({color:!0,depth:!0})})}},{}],788:[function(b,N,G){N.exports=function(p){p._responsiveChartHandler&&(window.removeEventListener("resize",p._responsiveChartHandler),delete p._responsiveChartHandler)}},{}],789:[function(b,N,G){function p(e,f){var q=G.valObjectMeta[f.valType];if(f.arrayOk&&
d(e))return!0;if(q.validateFunction)return q.validateFunction(e,f);var t={},w=t;q.coerceFunction(e,{set:function(x){w=x}},t,f);return w!==t}var n=b("fast-isnumeric"),k=b("tinycolor2"),m=b("../plots/attributes"),a=b("../components/colorscale/scales"),g=b("../components/color"),h=b("../constants/interactions").DESELECTDIM,r=b("./nested_property"),l=b("./regex").counter,c=b("./mod").modHalf,d=b("./array").isArrayOrTypedArray;G.valObjectMeta={data_array:{coerceFunction:function(e,f,q){d(e)?f.set(e):void 0!==
q&&f.set(q)}},enumerated:{coerceFunction:function(e,f,q,t){t.coerceNumber&&(e=+e);-1===t.values.indexOf(e)?f.set(q):f.set(e)},validateFunction:function(e,f){f.coerceNumber&&(e=+e);f=f.values;for(var q=0;q<f.length;q++){var t=String(f[q]);if("/"===t.charAt(0)&&"/"===t.charAt(t.length-1)){if((new RegExp(t.substr(1,t.length-2))).test(e))return!0}else if(e===f[q])return!0}return!1}},"boolean":{coerceFunction:function(e,f,q){!0===e||!1===e?f.set(e):f.set(q)}},number:{coerceFunction:function(e,f,q,t){!n(e)||
void 0!==t.min&&e<t.min||void 0!==t.max&&e>t.max?f.set(q):f.set(+e)}},integer:{coerceFunction:function(e,f,q,t){e%1||!n(e)||void 0!==t.min&&e<t.min||void 0!==t.max&&e>t.max?f.set(q):f.set(+e)}},string:{coerceFunction:function(e,f,q,t){"string"!==typeof e?!0===t.strict||"number"!==typeof e?f.set(q):f.set(String(e)):t.noBlank&&!e?f.set(q):f.set(e)}},color:{coerceFunction:function(e,f,q){k(e).isValid()?f.set(e):f.set(q)}},colorlist:{coerceFunction:function(e,f,q){function t(w){return k(w).isValid()}
Array.isArray(e)&&e.length?e.every(t)?f.set(e):f.set(q):f.set(q)}},colorscale:{coerceFunction:function(e,f,q){f.set(a.get(e,q))}},angle:{coerceFunction:function(e,f,q){"auto"===e?f.set("auto"):n(e)?f.set(c(+e,360)):f.set(q)}},subplotid:{coerceFunction:function(e,f,q,t){t=t.regex||l(q);"string"===typeof e&&t.test(e)?f.set(e):f.set(q)},validateFunction:function(e,f){f=f.dflt;return e===f?!0:"string"!==typeof e?!1:l(f).test(e)?!0:!1}},flaglist:{coerceFunction:function(e,f,q,t){if("string"!==typeof e)f.set(q);
else if(-1!==(t.extras||[]).indexOf(e))f.set(e);else{e=e.split("+");for(var w=0;w<e.length;){var x=e[w];-1===t.flags.indexOf(x)||e.indexOf(x)<w?e.splice(w,1):w++}e.length?f.set(e.join("+")):f.set(q)}}},any:{coerceFunction:function(e,f,q){void 0===e?f.set(q):f.set(e)}},info_array:{coerceFunction:function(e,f,q,t){function w(J,K,O){var I;void 0===O&&(O=K.dflt);G.valObjectMeta[K.valType].coerceFunction(J,{set:function(L){I=L}},O,K);return I}var x=2===t.dimensions||"1-2"===t.dimensions&&Array.isArray(e)&&
Array.isArray(e[0]);if(Array.isArray(e)){t=t.items;var z=[],B=Array.isArray(t),A=B&&x&&Array.isArray(t[0]);A=x&&B&&!A;var D=B&&!A?t.length:e.length,C;q=Array.isArray(q)?q:[];if(x)for(x=0;x<D;x++){z[x]=[];var v=Array.isArray(e[x])?e[x]:[];var y=A?t.length:B?t[x].length:v.length;for(C=0;C<y;C++){var F=A?t[C]:B?t[x][C]:t;F=w(v[C],F,(q[x]||[])[C]);void 0!==F&&(z[x][C]=F)}}else for(x=0;x<D;x++)F=w(e[x],B?t[x]:t,q[x]),void 0!==F&&(z[x]=F);f.set(z)}else f.set(q)},validateFunction:function(e,f){if(!Array.isArray(e))return!1;
var q=f.items,t=Array.isArray(q),w=2===f.dimensions;if(!f.freeLength&&e.length!==q.length)return!1;for(var x=0;x<e.length;x++)if(w){if(!Array.isArray(e[x])||!f.freeLength&&e[x].length!==q[x].length)return!1;for(var z=0;z<e[x].length;z++)if(!p(e[x][z],t?q[x][z]:q))return!1}else if(!p(e[x],t?q[x]:q))return!1;return!0}}};G.coerce=function(e,f,q,t,w){q=r(q,t).get();var x=r(e,t);e=r(f,t);x=x.get();f=f._template;void 0===x&&f&&(x=r(f,t).get(),f=0);void 0===w&&(w=q.dflt);if(q.arrayOk&&d(x))return e.set(x),
x;var z=G.valObjectMeta[q.valType].coerceFunction;z(x,e,w,q);var B=e.get();f&&B===w&&!p(x,q)&&(x=r(f,t).get(),z(x,e,w,q),B=e.get());return B};G.coerce2=function(e,f,q,t,w){var x=r(e,t);e=G.coerce(e,f,q,t,w);x=x.get();return void 0!==x&&null!==x?e:!1};G.coerceFont=function(e,f,q){var t={};q=q||{};t.family=e(f+".family",q.family);t.size=e(f+".size",q.size);t.color=e(f+".color",q.color);return t};G.coercePattern=function(e,f,q,t){if(e(f+".shape")){e(f+".solidity");e(f+".size");var w="overlay"===e(f+
".fillmode");t||(t=e(f+".bgcolor",w?q:void 0),e(f+".fgcolor",w?g.contrast(t):q));e(f+".fgopacity",w?.5:1)}};G.coerceHoverinfo=function(e,f,q){var t=f._module.attributes;t=t.hoverinfo?t:m;var w=t.hoverinfo;if(1===q._dataLength){q="all"===w.dflt?w.flags.slice():w.dflt.split("+");q.splice(q.indexOf("name"),1);var x=q.join("+")}return G.coerce(e,f,t,"hoverinfo",x)};G.coerceSelectionMarkerOpacity=function(e,f){if(e.marker){var q=e.marker.opacity;if(void 0!==q){if(!d(q)&&!e.selected&&!e.unselected){var t=
q;var w=h*q}f("selected.marker.opacity",t);f("unselected.marker.opacity",w)}}};G.validate=p},{"../components/color":666,"../components/colorscale/scales":681,"../constants/interactions":778,"../plots/attributes":850,"./array":785,"./mod":810,"./nested_property":811,"./regex":820,"fast-isnumeric":249,tinycolor2:598}],790:[function(b,N,G){function p(L){return L&&t.componentsRegistry.calendars&&"string"===typeof L&&"gregorian"!==L}function n(L,H){return String(L+Math.pow(10,H)).substr(1)}function k(L,
H,M,Q,Z){if(H||M||Q||Z)if(L+=" "+n(H,2)+":"+n(M,2),Q||Z)if(L+=":"+n(Q,2),Z){for(H=4;0===Z%10;)--H,Z/=10;L+="."+n(Z,H)}return L}function m(L,H,M,Q){L=L.replace(F,function(ca){ca=Math.min(+ca.charAt(1)||6,6);return(H/1E3%1+2).toFixed(ca).substr(2).replace(/0+$/,"")||"0"});var Z=new Date(Math.floor(H+.05));L=L.replace(J,function(){return K[M("%q")(Z)]});if(p(Q))try{L=t.getComponentMethod("calendars","worldCalFmt")(L,H,Q)}catch(ca){return"Invalid"}return M(L)(Z)}var a=b("d3-time-format").timeFormat,g=
b("fast-isnumeric"),h=b("./loggers"),r=b("./mod").mod;N=b("../constants/numerical");var l=N.BADNUM,c=N.ONEDAY,d=N.ONEHOUR,e=N.ONEMIN,f=N.ONESEC,q=N.EPOCHJD,t=b("../registry"),w=b("d3-time-format").utcFormat,x=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,z=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,B=(new Date).getFullYear()-
70;G.dateTick0=function(L,H){var M=!!H;M=p(L)?M?t.getComponentMethod("calendars","CANONICAL_SUNDAY")[L]:t.getComponentMethod("calendars","CANONICAL_TICK")[L]:M?"2000-01-02":"2000-01-01";if(2>H)return M;M=G.dateTime2ms(M,L);M+=c*(H-1);return G.ms2DateTime(M,0,L)};G.dfltRange=function(L){return p(L)?t.getComponentMethod("calendars","DFLTRANGE")[L]:["2000-01-01","2001-01-01"]};G.isJSDate=function(L){return"object"===typeof L&&null!==L&&"function"===typeof L.getTime};G.dateTime2ms=function(L,H){if(G.isJSDate(L)){H=
L.getTimezoneOffset()*e;var M=(L.getUTCMinutes()-L.getMinutes())*e+(L.getUTCSeconds()-L.getSeconds())*f+(L.getUTCMilliseconds()-L.getMilliseconds());if(M){var Q=3*e;H=H-Q/2+r(M-H+Q/2,Q)}L=Number(L)-H;return L>=A&&L<=D?L:l}if("string"!==typeof L&&"number"!==typeof L)return l;L=String(L);M=p(H);var Z=L.charAt(0);!M||"G"!==Z&&"g"!==Z||(L=L.substr(1),H="");Z=M&&"chinese"===H.substr(0,7);var ca=L.match(Z?z:x);if(!ca)return l;L=ca[1];var W=ca[3]||"1",T=Number(ca[5]||1),U=Number(ca[7]||0),ha=Number(ca[9]||
0);ca=Number(ca[11]||0);if(M){if(2===L.length)return l;L=Number(L);try{var Y=t.getComponentMethod("calendars","getCal")(H);if(Z){var ba="i"===W.charAt(W.length-1);W=parseInt(W,10);Q=Y.newDate(L,Y.toMonthIndex(L,W,ba),T)}else Q=Y.newDate(L,Number(W),T)}catch(ja){return l}return Q?(Q.toJD()-q)*c+U*d+ha*e+ca*f:l}L=2===L.length?(Number(L)+2E3-B)%100+B:Number(L);--W;H=new Date(Date.UTC(2E3,W,T,U,ha));H.setUTCFullYear(L);return H.getUTCMonth()!==W||H.getUTCDate()!==T?l:H.getTime()+ca*f};var A=G.MIN_MS=
G.dateTime2ms("-9999");var D=G.MAX_MS=G.dateTime2ms("9999-12-31 23:59:59.9999");G.isDateTime=function(L,H){return G.dateTime2ms(L,H)!==l};var C=90*c,v=3*d,y=5*e;G.ms2DateTime=function(L,H,M){if("number"!==typeof L||!(L>=A&&L<=D))return l;H||(H=0);var Q=Math.floor(10*r(L+.05,1)),Z=Math.round(L-Q/10);if(p(M)){var ca=Math.floor(Z/c)+q;L=Math.floor(r(L,c));try{var W=t.getComponentMethod("calendars","getCal")(M).fromJD(ca).formatDate("yyyy-mm-dd")}catch(T){W=w("G%Y-%m-%d")(new Date(Z))}if("-"===W.charAt(0))for(;11>
W.length;)W="-0"+W.substr(1);else for(;10>W.length;)W="0"+W;M=H<C?Math.floor(L/d):0;Z=H<C?Math.floor(L%d/e):0;ca=H<v?Math.floor(L%e/f):0;H=H<y?L%f*10+Q:0}else L=new Date(Z),W=w("%Y-%m-%d")(L),M=H<C?L.getUTCHours():0,Z=H<C?L.getUTCMinutes():0,ca=H<v?L.getUTCSeconds():0,H=H<y?10*L.getUTCMilliseconds()+Q:0;return k(W,M,Z,ca,H)};G.ms2DateTimeLocal=function(L){if(!(L>=A+c&&L<=D-c))return l;var H=Math.floor(10*r(L+.05,1)),M=new Date(Math.round(L-H/10));L=a("%Y-%m-%d")(M);var Q=M.getHours(),Z=M.getMinutes(),
ca=M.getSeconds();H=10*M.getUTCMilliseconds()+H;return k(L,Q,Z,ca,H)};G.cleanDate=function(L,H,M){if(L===l)return H;if(G.isJSDate(L)||"number"===typeof L&&isFinite(L)){if(p(M))return h.error("JS Dates and milliseconds are incompatible with world calendars",L),H;L=G.ms2DateTimeLocal(+L);if(!L&&void 0!==H)return H}else if(!G.isDateTime(L,M))return h.error("unrecognized date",L),H;return L};var F=/%\d?f/g,J=/%h/g,K={1:"1",2:"1",3:"2",4:"2"},O=[59,59.9,59.99,59.999,59.9999];G.formatDate=function(L,H,
M,Q,Z,ca){Z=p(Z)&&Z;if(!H)if("y"===M)H=ca.year;else if("m"===M)H=ca.month;else if("d"===M)H=ca.dayMonth+"\n"+ca.year;else{H=M;M=r(L+.05,c);M=n(Math.floor(M/d),2)+":"+n(r(Math.floor(M/e),60),2);if("M"!==H){g(H)||(H=0);var W=(100+Math.min(r(L/f,60),O[H])).toFixed(H).substr(1);0<H&&(W=W.replace(/0+$/,"").replace(/[\.]$/,""));M+=":"+W}return M+"\n"+m(ca.dayMonthYear,L,Q,Z)}return m(H,L,Q,Z)};var I=3*c;G.incrementMonth=function(L,H,M){M=p(M)&&M;var Q=r(L,c);L=Math.round(L-Q);if(M)try{var Z=Math.round(L/
c)+q,ca=t.getComponentMethod("calendars","getCal")(M),W=ca.fromJD(Z);H%12?ca.add(W,H,"m"):ca.add(W,H/12,"y");return(W.toJD()-q)*c+Q}catch(T){h.error("invalid ms "+L+" in calendar "+M)}L=new Date(L+I);return L.setUTCMonth(L.getUTCMonth()+H)+Q-I};G.findExactDates=function(L,H){for(var M=0,Q=0,Z=0,ca=0,W,T=p(H)&&t.getComponentMethod("calendars","getCal")(H),U=0;U<L.length;U++)if(H=L[U],!g(H))ca++;else if(!(H%c))if(T)try{W=T.fromJD(H/c+q),1===W.day()?1===W.month()?M++:Q++:Z++}catch(ha){}else W=new Date(H),
1===W.getUTCDate()?0===W.getUTCMonth()?M++:Q++:Z++;Q+=M;L=L.length-ca;return{exactYears:M/L,exactMonths:Q/L,exactDays:(Z+Q)/L}}},{"../constants/numerical":779,"../registry":931,"./loggers":807,"./mod":810,"d3-time-format":175,"fast-isnumeric":249}],791:[function(b,N,G){function p(l){var c=l&&l.parentNode;c&&c.removeChild(l)}function n(l,c,d){l="plotly.js-style-"+l;var e=document.getElementById(l);e||(e=document.createElement("style"),e.setAttribute("id",l),e.appendChild(document.createTextNode("")),
document.head.appendChild(e));l=e.sheet;l.insertRule?l.insertRule(c+"{"+d+"}",0):l.addRule?l.addRule(c,d,0):g.warn("addStyleRule failed")}function k(l){l=window.getComputedStyle(l,null);l=l.getPropertyValue("-webkit-transform")||l.getPropertyValue("-moz-transform")||l.getPropertyValue("-ms-transform")||l.getPropertyValue("-o-transform")||l.getPropertyValue("transform");return"none"===l?null:l.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(c){return+c})}function m(l){for(var c=
[];l&&(l instanceof Element||l instanceof HTMLElement);)c.push(l),l=l.parentNode;return c}var a=b("@plotly/d3"),g=b("./loggers"),h=b("./matrix"),r=b("gl-mat4");N.exports={getGraphDiv:function(l){if("string"===typeof l){var c=document.getElementById(l);if(null===c)throw Error("No DOM element with id '"+l+"' exists on the page.");return c}if(null===l||void 0===l)throw Error("DOM element provided is null or undefined");return l},isPlotDiv:function(l){l=a.select(l);return l.node()instanceof HTMLElement&&
l.size()&&l.classed("js-plotly-plot")},removeElement:p,addStyleRule:function(l,c){n("global",l,c)},addRelatedStyleRule:n,deleteRelatedStyleRule:function(l){(l=document.getElementById("plotly.js-style-"+l))&&p(l)},getFullTransformMatrix:function(l){var c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];m(l).forEach(function(d){if(d=k(d))d=h.convertCssMatrix(d),c=r.multiply(c,c,d)});return c},getElementTransformMatrix:k,getElementAndAncestors:m,equalDomRects:function(l,c){return l&&c&&l.x===c.x&&l.y===c.y&&l.top===
c.top&&l.left===c.left&&l.right===c.right&&l.bottom===c.bottom}}},{"./loggers":807,"./matrix":809,"@plotly/d3":58,"gl-mat4":298}],792:[function(b,N,G){var p=b("events").EventEmitter;N.exports={init:function(n){if(n._ev instanceof p)return n;var k=new p,m=new p;n._ev=k;n._internalEv=m;n.on=k.on.bind(k);n.once=k.once.bind(k);n.removeListener=k.removeListener.bind(k);n.removeAllListeners=k.removeAllListeners.bind(k);n._internalOn=m.on.bind(m);n._internalOnce=m.once.bind(m);n._removeInternalListener=
m.removeListener.bind(m);n._removeAllInternalListeners=m.removeAllListeners.bind(m);n.emit=function(a,g){"undefined"!==typeof jQuery&&jQuery(n).trigger(a,g);k.emit(a,g);m.emit(a,g)};return n},triggerHandler:function(n,k,m){function a(l){if(l.listener){if(h.removeListener(k,l.listener),!l.fired)return l.fired=!0,l.listener.apply(h,[m])}else return l.apply(h,[m])}var g;"undefined"!==typeof jQuery&&(g=jQuery(n).triggerHandler(k,m));var h=n._ev;if(!h)return g;n=h._events[k];if(!n)return g;n=Array.isArray(n)?
n:[n];var r;for(r=0;r<n.length-1;r++)a(n[r]);n=a(n[r]);return void 0!==g?g:n},purge:function(n){delete n._ev;delete n.on;delete n.once;delete n.removeListener;delete n.removeAllListeners;delete n.emit;delete n._ev;delete n._internalEv;delete n._internalOn;delete n._internalOnce;delete n._removeInternalListener;delete n._removeAllInternalListeners;return n}}},{events:116}],793:[function(b,N,G){function p(m,a,g,h){var r=m[0],l=m.length,c,d,e;if(2===l&&k(r)&&k(m[1])&&0===r.length){a:{var f=m[1];for(d=
0;d<f.length;d++){var q=f[d];if(null!==q&&"object"===typeof q){f=!1;break a}void 0!==q&&(r[d]=q)}f=!0}if(f)return r;r.splice(0,r.length)}for(q=1;q<l;q++)for(c in f=m[q],f){var t=r[c];d=f[c];if(h&&k(d))r[c]=d;else if(a&&d&&(n(d)||(e=k(d))))e?(e=!1,t=t&&k(t)?t:[]):t=t&&n(t)?t:{},r[c]=p([t,d],a,g,h);else if("undefined"!==typeof d||g)r[c]=d}return r}var n=b("./is_plain_object.js"),k=Array.isArray;G.extendFlat=function(){return p(arguments,!1,!1,!1)};G.extendDeep=function(){return p(arguments,!0,!1,!1)};
G.extendDeepAll=function(){return p(arguments,!0,!0,!1)};G.extendDeepNoArrays=function(){return p(arguments,!0,!1,!0)}},{"./is_plain_object.js":804}],794:[function(b,N,G){N.exports=function(p){for(var n={},k=[],m=0,a=0;a<p.length;a++){var g=p[a];1!==n[g]&&(n[g]=1,k[m++]=g)}return k}},{}],795:[function(b,N,G){function p(k){return!0===k.visible}function n(k){k=k[0].trace;return!0===k.visible&&0!==k._length}N.exports=function(k){for(var m=Array.isArray(k)&&Array.isArray(k[0])&&k[0][0]&&k[0][0].trace?
n:p,a=[],g=0;g<k.length;g++){var h=k[g];m(h)&&a.push(h)}return a}},{}],796:[function(b,N,G){function p(f){f=f.geojson;var q=window.PlotlyGeoAssets||{};q="string"===typeof f?q[f]:f;return r(q)?q:(h.error("Oops ... something went wrong when fetching "+f),!1)}var n=b("@plotly/d3"),k=b("country-regex"),m=b("@turf/area"),a=b("@turf/centroid"),g=b("@turf/bbox");G=b("./identity");var h=b("./loggers"),r=b("./is_plain_object"),l=b("./nested_property"),c=b("./polygon"),d=Object.keys(k),e={"ISO-3":G,"USA-states":G,
"country names":function(f){for(var q=0;q<d.length;q++){var t=d[q];if((new RegExp(k[t])).test(f.trim().toLowerCase()))return t}h.log("Unrecognized country name: "+f+".");return!1}};N.exports={locationToFeature:function(f,q,t){if(!q||"string"!==typeof q)return!1;q=e[f](q);var w;if(q){if("USA-states"===f)for(f=[],w=0;w<t.length;w++){var x=t[w];x.properties&&x.properties.gu&&"USA"===x.properties.gu&&f.push(x)}else f=t;for(w=0;w<f.length;w++)if(x=f[w],x.id===q)return x;h.log(["Location with id",q,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},
feature2polygons:function(f){function q(A){for(var D=0;D<A.length-1;D++)if(0<A[D][0]&&0>A[D+1][0])return D;return null}var t=f.geometry,w=t.coordinates;f=f.id;var x=[],z,B;f="RUS"===f||"FJI"===f?function(A){if(null===q(A))var D=A;else for(D=Array(A.length),B=0;B<A.length;B++)D[B]=[0>A[B][0]?A[B][0]+360:A[B][0],A[B][1]];x.push(c.tester(D))}:"ATA"===f?function(A){var D=q(A);if(null===D)return x.push(c.tester(A));var C=Array(A.length+1),v=0;for(B=0;B<A.length;B++)B>D?C[v++]=[A[B][0]+360,A[B][1]]:B===
D?(C[v++]=A[B],C[v++]=[A[B][0],-90]):C[v++]=A[B];A=c.tester(C);A.pts.pop();x.push(A)}:function(A){x.push(c.tester(A))};switch(t.type){case "MultiPolygon":for(t=0;t<w.length;t++)for(z=0;z<w[t].length;z++)f(w[t][z]);break;case "Polygon":for(t=0;t<w.length;t++)f(w[t])}return x},getTraceGeojson:p,extractTraceFeature:function(f){function q(C){var v=l(C,t.featureidkey||"id").get(),y=x[v];if(y){var F=C.geometry;if("Polygon"===F.type||"MultiPolygon"===F.type){F={type:"Feature",id:v,geometry:F,properties:{}};
var J=F.properties,K=F.geometry;if("MultiPolygon"===K.type){K=K.coordinates;for(var O=0,I=0;I<K.length;I++){var L={type:"Polygon",coordinates:K[I]},H=m.default(L);if(H>O){O=H;var M=L}}}else M=K;M=a.default(M).geometry.coordinates;J.ct=M;y.fIn=C;y.fOut=F;z.push(F)}else h.log(["Location",y.loc,"does not have a valid GeoJSON geometry. Traces with locationmode *geojson-id* only support *Polygon* and *MultiPolygon* geometries."].join(" "))}delete x[v]}var t=f[0].trace,w=p(t);if(!w)return!1;var x={},z=
[],B;for(B=0;B<t._length;B++){var A=f[B];if(A.loc||0===A.loc)x[A.loc]=A}switch(w.type){case "FeatureCollection":f=w.features;for(B=0;B<f.length;B++)q(f[B]);break;case "Feature":q(w);break;default:return h.warn(["Invalid GeoJSON type",(w.type||"none")+".","Traces with locationmode *geojson-id* only support *FeatureCollection* and *Feature* types."].join(" ")),!1}for(var D in x)h.log(["Location *"+D+"*","does not have a matching feature with id-key","*"+t.featureidkey+"*."].join(" "));return z},fetchTraceGeoData:function(f){function q(A){return new Promise(function(D,
C){n.json(A,function(v,y){if(v)return delete w[A],C(Error(404===v.status?'GeoJSON at URL "'+A+'" does not exist.':"Unexpected error while fetching from "+A));w[A]=y;return D(y)})})}function t(A){return new Promise(function(D,C){var v=0,y=setInterval(function(){if(w[A]&&"pending"!==w[A])return clearInterval(y),D(w[A]);if(100<v)return clearInterval(y),C("Unexpected error while fetching from "+A);v++},50)})}for(var w=window.PlotlyGeoAssets||{},x=[],z=0;z<f.length;z++){var B=f[z][0].trace.geojson;"string"===
typeof B&&(w[B]?"pending"===w[B]&&x.push(t(B)):(w[B]="pending",x.push(q(B))))}return x},computeBbox:function(f){return g.default(f)}}},{"./identity":801,"./is_plain_object":804,"./loggers":807,"./nested_property":811,"./polygon":815,"@plotly/d3":58,"@turf/area":61,"@turf/bbox":64,"@turf/centroid":67,"country-regex":145}],797:[function(b,N,G){var p=b("../constants/numerical").BADNUM;G.calcTraceToLineCoords=function(n){for(var k=n[0].trace.connectgaps,m=[],a=[],g=0;g<n.length;g++){var h=n[g].lonlat;
h[0]!==p?a.push(h):!k&&0<a.length&&(m.push(a),a=[])}0<a.length&&m.push(a);return m};G.makeLine=function(n){return 1===n.length?{type:"LineString",coordinates:n[0]}:{type:"MultiLineString",coordinates:n}};G.makePolygon=function(n){if(1===n.length)return{type:"Polygon",coordinates:n};for(var k=Array(n.length),m=0;m<n.length;m++)k[m]=[n[m]];return{type:"MultiPolygon",coordinates:k}};G.makeBlank=function(){return{type:"Point",coordinates:[]}}},{"../constants/numerical":779}],798:[function(b,N,G){function p(h,
r,l,c,d,e,f,q){l-=h;var t=d-h;d=f-d;c-=r;f=e-r;q-=e;e=l*q-d*c;if(0===e)return null;q=(t*q-d*f)/e;t=(t*c-l*f)/e;return 0>t||1<t||0>q||1<q?null:{x:h+l*q,y:r+c*q}}function n(h,r,l,c,d){var e=c*h+d*r;if(0>e)return c*c+d*d;if(e>l)return l=c-h,r=d-r,l*l+r*r;r=c*r-d*h;return r*r/l}var k=b("./mod").mod;G.segmentsIntersect=p;G.segmentDistance=function(h,r,l,c,d,e,f,q){if(p(h,r,l,c,d,e,f,q))return 0;var t=l-h,w=c-r,x=f-d,z=q-e,B=t*t+w*w,A=x*x+z*z;h=Math.min(n(t,w,B,d-h,e-r),n(t,w,B,f-h,q-r),n(x,z,A,h-d,r-e),
n(x,z,A,l-d,c-e));return Math.sqrt(h)};var m,a,g;G.getTextLocation=function(h,r,l,c){if(h!==a||c!==g)m={},a=h,g=c;if(m[l])return m[l];var d=h.getPointAtLength(k(l-c/2,r));c=h.getPointAtLength(k(l+c/2,r));var e=Math.atan((c.y-d.y)/(c.x-d.x));h=h.getPointAtLength(k(l,r));d={x:(4*h.x+d.x+c.x)/6,y:(4*h.y+d.y+c.y)/6,theta:e};return m[l]=d};G.clearLocationCache=function(){a=null};G.getVisibleSegment=function(h,r,l){function c(A){var D=h.getPointAtLength(A);0===A?x=D:A===t&&(z=D);A=D.x<d?d-D.x:D.x>e?D.x-
e:0;D=D.y<f?f-D.y:D.y>q?D.y-q:0;return Math.sqrt(A*A+D*D)}var d=r.left,e=r.right,f=r.top,q=r.bottom;r=0;for(var t=h.getTotalLength(),w=t,x,z,B=c(r);B;){r+=B+l;if(r>w)return;B=c(r)}for(B=c(w);B;){w-=B+l;if(r>w)return;B=c(w)}return{min:r,max:w,len:w-r,total:t,isClosed:0===r&&w===t&&.1>Math.abs(x.x-z.x)&&.1>Math.abs(x.y-z.y)}};G.findPointOnPath=function(h,r,l,c){c=c||{};var d=c.pathLength||h.getTotalLength(),e=c.tolerance||.001;c=c.iterationLimit||30;for(var f=h.getPointAtLength(0)[l]>h.getPointAtLength(d)[l]?
-1:1,q=0,t=0,w,x,z;q<c&&!(w=(t+d)/2,x=h.getPointAtLength(w),z=x[l]-r,Math.abs(z)<e);)0<f*z?d=w:t=w,q++;return x}},{"./mod":810}],799:[function(b,N,G){function p(c,d){c[3]*=d;return c}function n(c){if(m(c))return l;c=g(c);return c.length?c:l}function k(c){return m(c)?c:1}var m=b("fast-isnumeric"),a=b("tinycolor2"),g=b("color-normalize"),h=b("../components/colorscale");G=b("../components/color/attributes").defaultLine;var r=b("./array").isArrayOrTypedArray,l=g(G);N.exports={formatColor:function(c,d,
e){var f=c.color,q=r(f),t=r(d),w=[];var x=void 0!==h.extractOpts(c).colorscale?h.makeColorScaleFuncFromTrace(c):n;c=q?function(A,D){return void 0===A[D]?l:g(x(A[D]))}:n;var z=t?function(A,D){return void 0===A[D]?1:k(A[D])}:k;if(q||t)for(var B=0;B<e;B++)q=c(f,B),t=z(d,B),w[B]=p(q,t);else w=p(g(f),d);return w},parseColorScale:function(c){c=h.extractOpts(c);var d=c.colorscale;c.reversescale&&(d=h.flipScale(c.colorscale));return d.map(function(e){var f=e[0];e=a(e[1]).toRgb();return{index:f,rgb:[e.r,e.g,
e.b,e.a]}})}}},{"../components/color/attributes":665,"../components/colorscale":678,"./array":785,"color-normalize":131,"fast-isnumeric":249,tinycolor2:598}],800:[function(b,N,G){function p(n){return[n]}b=b("./identity");N.exports={keyFun:function(n){return n.key},repeat:p,descend:b,wrap:p,unwrap:function(n){return n[0]}}},{"./identity":801}],801:[function(b,N,G){N.exports=function(p){return p}},{}],802:[function(b,N,G){N.exports=function(p,n){if(!n)return p;var k=1/Math.abs(n);k=1<k?(k*p+k*n)/k:
p+n;var m=String(k).length;16<m&&m>=String(p).length+String(n).length&&(p=parseFloat(k).toPrecision(12),-1===p.indexOf("e+")&&(k=+p));return k}},{}],803:[function(b,N,G){function p(v){var y={},F;for(F in v)for(var J=v[F],K=0;K<J.length;K++)y[J[K]]=+F;return y}function n(v,y,F){var J=this,K=arguments;y||(y={});var O={};return v.replace(c.TEMPLATE_STRING_REGEX,function(I,L,H){var M="_xother"===L||"_yother"===L,Q="_xother_"===L||"_yother_"===L,Z="xother_"===L||"yother_"===L,ca="xother"===L||"yother"===
L||M||Z||Q;if(M||Q)L=L.substring(1);if(Z||Q)L=L.substring(0,L.length-1);if(ca){var W=y[L];if(void 0===W)return""}else{var T,U;for(U=3;U<K.length;U++)if(T=K[U]){if(T.hasOwnProperty(L)){W=T[L];break}x.test(L)||(c.nestedProperty(T,L).get(),(W=O[L]||c.nestedProperty(T,L).get())&&(O[L]=W));if(void 0!==W)break}}if(void 0===W&&J)return J.count<J.max&&c.warn("Variable '"+L+"' in "+J.name+" could not be found!"),J.count===J.max&&c.warn("Too many "+J.name+" warnings - additional warnings will be suppressed"),
J.count++,I;H?(":"===H[0]&&(I=F?F.numberFormat:c.numberFormat,W=I(H.replace(A,""))(W)),"|"===H[0]&&(I=F?F.timeFormat:m,W=c.dateTime2ms(W),W=c.formatDate(W,H.replace(A,""),!1,I))):(H=L+"Label",y.hasOwnProperty(H)&&(W=y[H]));if(ca){W="("+W+")";if(M||Q)W=" "+W;if(Z||Q)W+=" "}return W})}var k=b("@plotly/d3"),m=b("d3-time-format").utcFormat,a=b("d3-format").format,g=b("fast-isnumeric");G=b("../constants/numerical");var h=G.FP_SAFE,r=-h,l=G.BADNUM,c=N.exports={};c.adjustFormat=function(v){return!v||/^\d[.]\df/.test(v)||
/[.]\d%/.test(v)?v:"0.f"===v?"~f":/^\d%/.test(v)?"~%":/^\ds/.test(v)?"~s":!/^[~,.0$]/.test(v)&&/[&fps]/.test(v)?"~"+v:v};var d={};c.warnBadFormat=function(v){v=String(v);d[v]||(d[v]=1,c.warn('encountered bad format: "'+v+'"'))};c.noFormat=function(v){return String(v)};c.numberFormat=function(v){try{var y=a(c.adjustFormat(v))}catch(F){return c.warnBadFormat(v),c.noFormat}return y};c.nestedProperty=b("./nested_property");c.keyedContainer=b("./keyed_container");c.relativeAttr=b("./relative_attr");c.isPlainObject=
b("./is_plain_object");c.toLogRange=b("./to_log_range");c.relinkPrivateKeys=b("./relink_private");N=b("./array");c.isTypedArray=N.isTypedArray;c.isArrayOrTypedArray=N.isArrayOrTypedArray;c.isArray1D=N.isArray1D;c.ensureArray=N.ensureArray;c.concat=N.concat;c.maxRowLength=N.maxRowLength;c.minRowLength=N.minRowLength;N=b("./mod");c.mod=N.mod;c.modHalf=N.modHalf;N=b("./coerce");c.valObjectMeta=N.valObjectMeta;c.coerce=N.coerce;c.coerce2=N.coerce2;c.coerceFont=N.coerceFont;c.coercePattern=N.coercePattern;
c.coerceHoverinfo=N.coerceHoverinfo;c.coerceSelectionMarkerOpacity=N.coerceSelectionMarkerOpacity;c.validate=N.validate;N=b("./dates");c.dateTime2ms=N.dateTime2ms;c.isDateTime=N.isDateTime;c.ms2DateTime=N.ms2DateTime;c.ms2DateTimeLocal=N.ms2DateTimeLocal;c.cleanDate=N.cleanDate;c.isJSDate=N.isJSDate;c.formatDate=N.formatDate;c.incrementMonth=N.incrementMonth;c.dateTick0=N.dateTick0;c.dfltRange=N.dfltRange;c.findExactDates=N.findExactDates;c.MIN_MS=N.MIN_MS;c.MAX_MS=N.MAX_MS;N=b("./search");c.findBin=
N.findBin;c.sorterAsc=N.sorterAsc;c.sorterDes=N.sorterDes;c.distinctVals=N.distinctVals;c.roundUp=N.roundUp;c.sort=N.sort;c.findIndexOfMin=N.findIndexOfMin;c.sortObjectKeys=b("./sort_object_keys");N=b("./stats");c.aggNums=N.aggNums;c.len=N.len;c.mean=N.mean;c.median=N.median;c.midRange=N.midRange;c.variance=N.variance;c.stdev=N.stdev;c.interp=N.interp;N=b("./matrix");c.init2dArray=N.init2dArray;c.transposeRagged=N.transposeRagged;c.dot=N.dot;c.translationMatrix=N.translationMatrix;c.rotationMatrix=
N.rotationMatrix;c.rotationXYMatrix=N.rotationXYMatrix;c.apply3DTransform=N.apply3DTransform;c.apply2DTransform=N.apply2DTransform;c.apply2DTransform2=N.apply2DTransform2;c.convertCssMatrix=N.convertCssMatrix;c.inverseTransformMatrix=N.inverseTransformMatrix;N=b("./angles");c.deg2rad=N.deg2rad;c.rad2deg=N.rad2deg;c.angleDelta=N.angleDelta;c.angleDist=N.angleDist;c.isFullCircle=N.isFullCircle;c.isAngleInsideSector=N.isAngleInsideSector;c.isPtInsideSector=N.isPtInsideSector;c.pathArc=N.pathArc;c.pathSector=
N.pathSector;c.pathAnnulus=N.pathAnnulus;N=b("./anchor_utils");c.isLeftAnchor=N.isLeftAnchor;c.isCenterAnchor=N.isCenterAnchor;c.isRightAnchor=N.isRightAnchor;c.isTopAnchor=N.isTopAnchor;c.isMiddleAnchor=N.isMiddleAnchor;c.isBottomAnchor=N.isBottomAnchor;N=b("./geometry2d");c.segmentsIntersect=N.segmentsIntersect;c.segmentDistance=N.segmentDistance;c.getTextLocation=N.getTextLocation;c.clearLocationCache=N.clearLocationCache;c.getVisibleSegment=N.getVisibleSegment;c.findPointOnPath=N.findPointOnPath;
N=b("./extend");c.extendFlat=N.extendFlat;c.extendDeep=N.extendDeep;c.extendDeepAll=N.extendDeepAll;c.extendDeepNoArrays=N.extendDeepNoArrays;N=b("./loggers");c.log=N.log;c.warn=N.warn;c.error=N.error;N=b("./regex");c.counterRegex=N.counter;N=b("./throttle");c.throttle=N.throttle;c.throttleDone=N.done;c.clearThrottle=N.clear;N=b("./dom");c.getGraphDiv=N.getGraphDiv;c.isPlotDiv=N.isPlotDiv;c.removeElement=N.removeElement;c.addStyleRule=N.addStyleRule;c.addRelatedStyleRule=N.addRelatedStyleRule;c.deleteRelatedStyleRule=
N.deleteRelatedStyleRule;c.getFullTransformMatrix=N.getFullTransformMatrix;c.getElementTransformMatrix=N.getElementTransformMatrix;c.getElementAndAncestors=N.getElementAndAncestors;c.equalDomRects=N.equalDomRects;c.clearResponsive=b("./clear_responsive");c.preserveDrawingBuffer=b("./preserve_drawing_buffer");c.makeTraceGroups=b("./make_trace_groups");c._=b("./localize");c.notifier=b("./notifier");c.filterUnique=b("./filter_unique");c.filterVisible=b("./filter_visible");c.pushUnique=b("./push_unique");
c.increment=b("./increment");c.cleanNumber=b("./clean_number");c.ensureNumber=function(v){if(!g(v))return l;v=Number(v);return v>h||v<r?l:v};c.isIndex=function(v,y){return void 0!==y&&v>=y?!1:g(v)&&0<=v&&0===v%1};c.noop=b("./noop");c.identity=b("./identity");c.repeat=function(v,y){for(var F=Array(y),J=0;J<y;J++)F[J]=v;return F};c.swapAttrs=function(v,y,F,J){F||(F="x");J||(J="y");for(var K=0;K<y.length;K++){var O=y[K],I=c.nestedProperty(v,O.replace("?",F));O=c.nestedProperty(v,O.replace("?",J));var L=
I.get();I.set(O.get());O.set(L)}};c.raiseToTop=function(v){v.parentNode.appendChild(v)};c.cancelTransition=function(v){return v.transition().duration(0)};c.constrain=function(v,y,F){return y>F?Math.max(F,Math.min(y,v)):Math.max(y,Math.min(F,v))};c.bBoxIntersect=function(v,y,F){F=F||0;return v.left<=y.right+F&&y.left<=v.right+F&&v.top<=y.bottom+F&&y.top<=v.bottom+F};c.simpleMap=function(v,y,F,J,K){for(var O=v.length,I=Array(O),L=0;L<O;L++)I[L]=y(v[L],F,J,K);return I};c.randstr=function O(y,F,J,K){J||
(J=16);void 0===F&&(F=24);if(0>=F)return"0";var I=Math.log(Math.pow(2,F))/Math.log(J),L="",H;for(H=2;Infinity===I;H*=2)I=Math.log(Math.pow(2,F/H))/Math.log(J)*H;var M=I-Math.floor(I);for(H=0;H<Math.floor(I);H++){var Q=Math.floor(Math.random()*J).toString(J);L=Q+L}M&&(I=Math.pow(J,M),Q=Math.floor(Math.random()*I).toString(J),L=Q+L);I=parseInt(L,J);return y&&y[L]||Infinity!==I&&I>=Math.pow(2,F)?10<K?(c.warn("randstr failed uniqueness"),L):O(y,F,J,(K||0)+1):L};c.OptionControl=function(y,F){y||(y={});
F||(F="opt");var J={optionList:[],_newoption:function(K){K[F]=y;J[K.name]=K;J.optionList.push(K)}};J["_"+F]=y;return J};c.smooth=function(y,F){F=Math.round(F)||0;if(2>F)return y;var J=y.length,K=2*J,O=2*F-1,I=Array(O),L=Array(J),H,M,Q;for(H=0;H<O;H++)I[H]=(1-Math.cos(Math.PI*(H+1)/F))/(2*F);for(H=0;H<J;H++){for(M=Q=0;M<O;M++){var Z=H+M+1-F;Z<-J?Z-=K*Math.round(Z/K):Z>=K&&(Z-=K*Math.floor(Z/K));0>Z?Z=-1-Z:Z>=J&&(Z=K-1-Z);Q+=y[Z]*I[M]}L[H]=Q}return L};c.syncOrAsync=function(y,F,J){function K(){return c.syncOrAsync(y,
F,J)}for(var O;y.length;)if(O=y.splice(0,1)[0],(O=O(F))&&O.then)return O.then(K).then(void 0,c.promiseError);return J&&J(F)};c.stripTrailingSlash=function(y){return"/"===y.substr(-1)?y.substr(0,y.length-1):y};c.noneOrAll=function(y,F,J){if(y){var K=!1,O=!0,I;for(I=0;I<J.length;I++){var L=y[J[I]];void 0!==L&&null!==L?K=!0:O=!1}if(K&&!O)for(I=0;I<J.length;I++)y[J[I]]=F[J[I]]}};c.mergeArray=function(y,F,J,K){var O="function"===typeof K;if(c.isArrayOrTypedArray(y))for(var I=Math.min(y.length,F.length),
L=0;L<I;L++){var H=y[L];F[L][J]=O?K(H):H}};c.mergeArrayCastPositive=function(y,F,J){return c.mergeArray(y,F,J,function(K){K=+K;return isFinite(K)?0<K?K:0:0})};c.fillArray=function(y,F,J,K){K=K||c.identity;if(c.isArrayOrTypedArray(y))for(var O=0;O<F.length;O++)F[O][J]=K(y[O])};c.castOption=function(y,F,J,K){K=K||c.identity;y=c.nestedProperty(y,J).get();return c.isArrayOrTypedArray(y)?Array.isArray(F)&&c.isArrayOrTypedArray(y[F[0]])?K(y[F[0]][F[1]]):K(y[F]):y};c.extractOption=function(y,F,J,K){if(J in
y)return y[J];y=c.nestedProperty(F,K).get();if(!Array.isArray(y))return y};c.tagSelected=function(y,F,J){var K=F.selectedpoints;F=F._indexToPoints;var O;F&&(O=p(F));for(F=0;F<K.length;F++){var I=K[F];if(c.isIndex(I)||c.isArrayOrTypedArray(I)&&c.isIndex(I[0])&&c.isIndex(I[1]))I=O?O[I]:I,I=J?J[I]:I,void 0!==I&&I<y.length&&(y[I].selected=1)}};c.selIndices2selPoints=function(y){var F=y.selectedpoints;if(y=y._indexToPoints){y=p(y);for(var J=[],K=0;K<F.length;K++){var O=F[K];c.isIndex(O)&&(O=y[O],c.isIndex(O)&&
J.push(O))}return J}return F};c.getTargetArray=function(y,F){F=F.target;return"string"===typeof F&&F?(y=c.nestedProperty(y,F).get(),Array.isArray(y)?y:!1):Array.isArray(F)?F:!1};c.minExtend=function(y,F){var J={};"object"!==typeof F&&(F={});var K=Object.keys(y),O;for(O=0;O<K.length;O++){var I=K[O];var L=y[I];"_"!==I.charAt(0)&&"function"!==typeof L&&("module"===I?J[I]=L:Array.isArray(L)?J[I]="colorscale"===I?L.slice():L.slice(0,3):c.isTypedArray(L)?J[I]=L.subarray(0,3):J[I]=L&&"object"===typeof L?
c.minExtend(y[I],F[I]):L)}K=Object.keys(F);for(O=0;O<K.length;O++)I=K[O],L=F[I],"object"===typeof L&&I in J&&"object"===typeof J[I]||(J[I]=L);return J};c.titleCase=function(y){return y.charAt(0).toUpperCase()+y.substr(1)};c.containsAny=function(y,F){for(var J=0;J<F.length;J++)if(-1!==y.indexOf(F[J]))return!0;return!1};c.isIE=function(){return"undefined"!==typeof window.navigator.msSaveBlob};var e=/Version\/[\d\.]+.*Safari/;c.isSafari=function(){return e.test(window.navigator.userAgent)};var f=/iPad|iPhone|iPod/;
c.isIOS=function(){return f.test(window.navigator.userAgent)};var q=/Firefox\/(\d+)\.\d+/;c.getFirefoxVersion=function(){var y=q.exec(window.navigator.userAgent);return y&&2===y.length&&(y=parseInt(y[1]),!isNaN(y))?y:null};c.isD3Selection=function(y){return y instanceof k.selection};c.ensureSingle=function(y,F,J,K){var O=y.select(F+(J?"."+J:""));if(O.size())return O;y=y.append(F);J&&y.classed(J,!0);K&&y.call(K);return y};c.ensureSingleById=function(y,F,J,K){var O=y.select(F+"#"+J);if(O.size())return O;
y=y.append(F).attr("id",J);K&&y.call(K);return y};c.objectFromPath=function(y,F){y=y.split(".");for(var J,K=J={},O=0;O<y.length;O++){var I=y[O],L;(L=y[O].match(/(.*)\[([0-9]+)\]/))?(I=L[1],L=L[2],J=J[I]=[],J[L]=O===y.length-1?F:{},J=J[L]):(J[I]=O===y.length-1?F:{},J=J[I])}return K};var t=/^([^\[\.]+)\.(.+)?/,w=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;c.expandObjectPaths=function(y){var F,J;if("object"===typeof y&&!Array.isArray(y))for(J in y)if(y.hasOwnProperty(J))if(F=J.match(t)){var K=y[J];var O=F[1];
delete y[J];y[O]=c.extendDeepNoArrays(y[O]||{},c.objectFromPath(J,c.expandObjectPaths(K))[O])}else if(F=J.match(w)){K=y[J];O=F[1];var I=parseInt(F[2]);delete y[J];y[O]=y[O]||[];"."===F[3]?(F=F[4],O=y[O][I]=y[O][I]||{},c.extendDeepNoArrays(O,c.objectFromPath(F,c.expandObjectPaths(K)))):y[O][I]=c.expandObjectPaths(K)}else y[J]=c.expandObjectPaths(y[J]);return y};c.numSeparate=function(y,F,J){J||(J=!1);if("string"!==typeof F||0===F.length)throw Error("Separator string required for formatting!");"number"===
typeof y&&(y=String(y));var K=/(\d+)(\d{3})/,O=F.charAt(0);F=F.charAt(1);y=y.split(".");var I=y[0];O=1<y.length?O+y[1]:"";if(F&&(1<y.length||4<I.length||J))for(;K.test(I);)I=I.replace(K,"$1"+F+"$2");return I+O};c.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var x=/^\w*$/;c.templateString=function(y,F){var J={};return y.replace(c.TEMPLATE_STRING_REGEX,function(K,O){x.test(O)?K=F[O]:(J[O]=J[O]||c.nestedProperty(F,O).get,K=J[O]());return c.isValidTextValue(K)?K:""})};var z={max:10,count:0,
name:"hovertemplate"};c.hovertemplateString=function(){return n.apply(z,arguments)};var B={max:10,count:0,name:"texttemplate"};c.texttemplateString=function(){return n.apply(B,arguments)};var A=/^[:|\|]/;c.subplotSort=function(y,F){for(var J=Math.min(y.length,F.length)+1,K=0,O=0,I=0;I<J;I++){var L=y.charCodeAt(I)||0,H=F.charCodeAt(I)||0,M=48<=L&&57>=L,Q=48<=H&&57>=H;M&&(K=10*K+L-48);Q&&(O=10*O+H-48);if(!M||!Q){if(K!==O)return K-O;if(L!==H)return L-H}}return O-K};var D=2E9;c.seedPseudoRandom=function(){D=
2E9};c.pseudoRandom=function(){var y=D;D=(69069*D+1)%4294967296;return 429496729>Math.abs(D-y)?c.pseudoRandom():D/4294967296};c.fillText=function(y,F,J){var K=Array.isArray(J)?function(I){J.push(I)}:function(I){J.text=I},O=c.extractOption(y,F,"htx","hovertext");if(c.isValidTextValue(O))return K(O);y=c.extractOption(y,F,"tx","text");if(c.isValidTextValue(y))return K(y)};c.isValidTextValue=function(y){return y||0===y};c.formatPercent=function(y,F){F=F||0;y=(Math.round(100*y*Math.pow(10,F))*Math.pow(.1,
F)).toFixed(F)+"%";for(var J=0;J<F;J++)-1!==y.indexOf(".")&&(y=y.replace("0%","%"),y=y.replace(".%","%"));return y};c.isHidden=function(y){y=window.getComputedStyle(y).display;return!y||"none"===y};c.strTranslate=function(y,F){return y||F?"translate("+y+","+F+")":""};c.strRotate=function(y){return y?"rotate("+y+")":""};c.strScale=function(y){return 1!==y?"scale("+y+")":""};c.getTextTransform=function(y){var F=y.noCenter,J=y.textX,K=y.textY,O=y.targetX,I=y.targetY,L=y.anchorX||0,H=y.anchorY||0,M=y.rotate;
(y=y.scale)?1<y&&(y=1):y=0;return c.strTranslate(O-y*(J+L),I-y*(K+H))+c.strScale(y)+(M?"rotate("+M+(F?"":" "+J+" "+K)+")":"")};c.ensureUniformFontSize=function(y,F){var J=c.extendFlat({},F);J.size=Math.max(F.size,y._fullLayout.uniformtext.minsize||0);return J};c.join2=function(y,F,J){var K=y.length;return 1<K?y.slice(0,-1).join(F)+J+y[K-1]:y.join(F)};c.bigFont=function(y){return Math.round(1.2*y)};b=c.getFirefoxVersion();var C=null!==b&&86>b;c.getPositionFromD3Event=function(){return C?[k.event.layerX,
k.event.layerY]:[k.event.offsetX,k.event.offsetY]}},{"../constants/numerical":779,"./anchor_utils":783,"./angles":784,"./array":785,"./clean_number":786,"./clear_responsive":788,"./coerce":789,"./dates":790,"./dom":791,"./extend":793,"./filter_unique":794,"./filter_visible":795,"./geometry2d":798,"./identity":801,"./increment":802,"./is_plain_object":804,"./keyed_container":805,"./localize":806,"./loggers":807,"./make_trace_groups":808,"./matrix":809,"./mod":810,"./nested_property":811,"./noop":812,
"./notifier":813,"./preserve_drawing_buffer":817,"./push_unique":818,"./regex":820,"./relative_attr":821,"./relink_private":822,"./search":823,"./sort_object_keys":826,"./stats":827,"./throttle":830,"./to_log_range":831,"@plotly/d3":58,"d3-format":167,"d3-time-format":175,"fast-isnumeric":249}],804:[function(b,N,G){N.exports=function(p){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(p):"[object Object]"===Object.prototype.toString.call(p)&&
Object.getPrototypeOf(p).hasOwnProperty("hasOwnProperty")}},{}],805:[function(b,N,G){var p=b("./nested_property"),n=/^\w*$/;N.exports=function(k,m,a,g){a=a||"name";g=g||"value";var h,r={};if(m&&m.length){var l=p(k,m);var c=l.get()}else c=k;m=m||"";var d={};if(c)for(h=0;h<c.length;h++)d[c[h][a]]=h;var e=n.test(g),f={set:function(q,t){var w=null===t?4:0;if(!c){if(!l||4===w)return;c=[];l.set(c)}var x=d[q];if(void 0===x){if(4===w)return;w|=3;x=c.length;d[q]=x}else t!==(e?c[x][g]:p(c[x],g).get())&&(w|=
2);var z=c[x]=c[x]||{};z[a]=q;e?z[g]=t:p(z,g).set(t);null!==t&&(w&=-5);r[x]|=w;return f},get:function(q){if(c&&(q=d[q],void 0!==q))return e?c[q][g]:p(c[q],g).get()},rename:function(q,t){var w=d[q];if(void 0===w)return f;r[w]|=1;d[t]=w;delete d[q];c[w][a]=t;return f},remove:function(q){var t=d[q];if(void 0===t)return f;var w=c[t];if(2<Object.keys(w).length)return r[t]|=2,f.set(q,null);if(e){for(h=t;h<c.length;h++)r[h]|=3;for(h=t;h<c.length;h++)d[c[h][a]]--;c.splice(t,1);delete d[q]}else p(w,g).set(null),
r[t]|=6;return f},constructUpdate:function(){for(var q,t,w={},x=Object.keys(r),z=0;z<x.length;z++)t=x[z],q=m+"["+t+"]",c[t]?(r[t]&1&&(w[q+"."+a]=c[t][a]),r[t]&2&&(w[q+"."+g]=e?r[t]&4?null:c[t][g]:r[t]&4?null:p(c[t],g).get())):w[q]=null;return w}};return f}},{"./nested_property":811}],806:[function(b,N,G){var p=b("../registry");N.exports=function(n,k){for(var m=n._context.locale,a=0;2>a;a++){for(var g=n._context.locales,h=0;2>h;h++){if(g=(g[m]||{}).dictionary)if(g=g[k])return g;g=p.localeRegistry}h=
m.split("-")[0];if(h===m)break;m=h}return k}},{"../registry":931}],807:[function(b,N,G){var p=b("../plot_api/plot_config").dfltConfig,n=b("./notifier");b=N.exports={};b.log=function(){var k;if(1<p.logging){var m=["LOG:"];for(k=0;k<arguments.length;k++)m.push(arguments[k]);console.trace.apply(console,m)}if(1<p.notifyOnLogging){m=[];for(k=0;k<arguments.length;k++)m.push(arguments[k]);n(m.join("\x3cbr\x3e"),"long")}};b.warn=function(){var k;if(0<p.logging){var m=["WARN:"];for(k=0;k<arguments.length;k++)m.push(arguments[k]);
console.trace.apply(console,m)}if(0<p.notifyOnLogging){m=[];for(k=0;k<arguments.length;k++)m.push(arguments[k]);n(m.join("\x3cbr\x3e"),"stick")}};b.error=function(){var k;if(0<p.logging){var m=["ERROR:"];for(k=0;k<arguments.length;k++)m.push(arguments[k]);console.error.apply(console,m)}if(0<p.notifyOnLogging){m=[];for(k=0;k<arguments.length;k++)m.push(arguments[k]);n(m.join("\x3cbr\x3e"),"stick")}}},{"../plot_api/plot_config":841,"./notifier":813}],808:[function(b,N,G){var p=b("@plotly/d3");N.exports=
function(n,k,m){k=n.selectAll("g."+m.replace(/\s/g,".")).data(k,function(g){return g[0].trace.uid});k.exit().remove();k.enter().append("g").attr("class",m);k.order();var a=n.classed("rangeplot")?"nodeRangePlot3":"node3";k.each(function(g){g[0][a]=p.select(this)});return k}},{"@plotly/d3":58}],809:[function(b,N,G){var p=b("gl-mat4");G.init2dArray=function(n,k){for(var m=Array(n),a=0;a<n;a++)m[a]=Array(k);return m};G.transposeRagged=function(n){var k=0,m=n.length,a,g;for(a=0;a<m;a++)k=Math.max(k,n[a].length);
var h=Array(k);for(a=0;a<k;a++)for(h[a]=Array(m),g=0;g<m;g++)h[a][g]=n[g][a];return h};G.dot=function(n,k){if(!n.length||!k.length||n.length!==k.length)return null;var m=n.length,a;if(n[0].length){var g=Array(m);for(a=0;a<m;a++)g[a]=G.dot(n[a],k)}else if(k[0].length)for(k=G.transposeRagged(k),g=Array(k.length),a=0;a<k.length;a++)g[a]=G.dot(n,k[a]);else for(a=g=0;a<m;a++)g+=n[a]*k[a];return g};G.translationMatrix=function(n,k){return[[1,0,n],[0,1,k],[0,0,1]]};G.rotationMatrix=function(n){n=n*Math.PI/
180;return[[Math.cos(n),-Math.sin(n),0],[Math.sin(n),Math.cos(n),0],[0,0,1]]};G.rotationXYMatrix=function(n,k,m){return G.dot(G.dot(G.translationMatrix(k,m),G.rotationMatrix(n)),G.translationMatrix(-k,-m))};G.apply3DTransform=function(n){return function(){var k=arguments;k=1===arguments.length?k[0]:[k[0],k[1],k[2]||0];return G.dot(n,[k[0],k[1],k[2],1]).slice(0,3)}};G.apply2DTransform=function(n){return function(){var k=arguments;3===k.length&&(k=k[0]);k=1===arguments.length?k[0]:[k[0],k[1]];return G.dot(n,
[k[0],k[1],1]).slice(0,2)}};G.apply2DTransform2=function(n){var k=G.apply2DTransform(n);return function(m){return k(m.slice(0,2)).concat(k(m.slice(2,4)))}};G.convertCssMatrix=function(n){if(n){var k=n.length;if(16===k)return n;if(6===k)return[n[0],n[1],0,0,n[2],n[3],0,0,0,0,1,0,n[4],n[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]};G.inverseTransformMatrix=function(n){var k=[];p.invert(k,n);return[[k[0],k[1],k[2],k[3]],[k[4],k[5],k[6],k[7]],[k[8],k[9],k[10],k[11]],[k[12],k[13],k[14],k[15]]]}},{"gl-mat4":298}],
810:[function(b,N,G){N.exports={mod:function(p,n){p%=n;return 0>p?p+n:p},modHalf:function(p,n){return Math.abs(p)>n/2?p-Math.round(p/n)*n:p}}},{}],811:[function(b,N,G){function p(l,c){return function(){var d=l,e,f;for(e=0;e<c.length-1;e++){var q=c[e];if(-1===q){q=!0;var t=[];for(f=0;f<d.length;f++)t[f]=p(d[f],c.slice(e+1))(),t[f]!==t[0]&&(q=!1);return q?t[0]:t}if("number"===typeof q&&!h(d))return;d=d[q];if("object"!==typeof d||null===d)return}if("object"===typeof d&&null!==d&&(t=d[c[e]],null!==t))return t}}
function n(l,c){return void 0===l||null===l&&!c.match(r)}function k(l,c,d){return function(e){var f=l,q="",t=[[l,q]],w=n(e,d),x;for(x=0;x<c.length-1;x++){var z=c[x];if("number"===typeof z&&!h(f))throw"array index but container is not an array";if(-1===z){w=f;q=c.slice(x+1);z=e;var B=d,A=h(z),D=!0,C=z,v=B.replace("-1",0),y=A?!1:n(z,v),F=q[0];for(t=0;t<w.length;t++)v=B.replace("-1",t),A&&(C=z[t%z.length],y=n(C,v)),y&&(D=!1),m(w,t,F,y)&&k(w[t],q,B.replace("-1",t))(C);if(w=!D)break;else return}if(!m(f,
z,c[x+1],w))break;f=f[z];if("object"!==typeof f||null===f)throw"container is not an object";B=z;g(z)?B="["+z+"]":q&&(B="."+z);q+=B;t.push([f,q])}if(w){if(x===c.length-1&&(delete f[c[x]],Array.isArray(f)&&+c[x]===f.length-1))for(;f.length&&void 0===f[f.length-1];)f.pop()}else f[c[x]]=e}}function m(l,c,d,e){if(void 0===l[c]){if(e)return!1;l[c]="number"===typeof d?[]:{}}return!0}function a(l,c,d){return{set:function(){throw"bad container";},get:function(){},astr:c,parts:d,obj:l}}var g=b("fast-isnumeric"),
h=b("./array").isArrayOrTypedArray;N.exports=function(l,c){if(g(c))c=String(c);else if("string"!==typeof c||"[-1]"===c.substr(c.length-4))throw"bad property string";for(var d=0,e=c.split("."),f,q;d<e.length;){if(f=String(e[d]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(f[1])e[d]=f[1];else if(0===d)e.splice(0,1);else throw"bad property string";f=f[2].substr(1,f[2].length-2).split("][");for(q=0;q<f.length;q++)d++,e.splice(d,0,Number(f[q]))}d++}return"object"!==typeof l?a(l,c,e):{set:k(l,e,c),get:p(l,
e),astr:c,parts:e,obj:l}};var r=/(^|\.)args\[/},{"./array":785,"fast-isnumeric":249}],812:[function(b,N,G){N.exports=function(){}},{}],813:[function(b,N,G){var p=b("@plotly/d3"),n=b("fast-isnumeric"),k=[];N.exports=function(m,a){function g(r){r.duration(700).style("opacity",0).each("end",function(l){l=k.indexOf(l);-1!==l&&k.splice(l,1);p.select(this).remove()})}if(-1===k.indexOf(m)){k.push(m);var h=1E3;n(a)?h=a:"long"===a&&(h=3E3);m=p.select("body").selectAll(".plotly-notifier").data([0]);m.enter().append("div").classed("plotly-notifier",
!0);m.selectAll(".notifier-note").data(k).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(r){var l=p.select(this);l.append("button").classed("notifier-close",!0).html("\x26times;").on("click",function(){l.transition().call(g)});var c=l.append("p");r=r.split(/<br\s*\/?>/g);for(var d=0;d<r.length;d++)d&&c.append("br"),c.append("span").text(r[d]);"stick"===a?l.transition().duration(350).style("opacity",1):l.transition().duration(700).style("opacity",1).transition().delay(h).call(g)})}}},
{"@plotly/d3":58,"fast-isnumeric":249}],814:[function(b,N,G){var p=b("./setcursor");N.exports=function(n,k){var m=n.attr("data-savedcursor");if(k){if(!m){m=(n.attr("class")||"").split(" ");for(var a=0;a<m.length;a++){var g=m[a];0===g.indexOf("cursor-")&&n.attr("data-savedcursor",g.substr(7)).classed(g,!1)}n.attr("data-savedcursor")||n.attr("data-savedcursor","!!")}p(n,k)}else m&&(n.attr("data-savedcursor",null),"!!"===m?p(n):p(n,m))}},{"./setcursor":824}],815:[function(b,N,G){var p=b("./matrix").dot,
n=b("../constants/numerical").BADNUM,k=N.exports={};k.tester=function(m){function a(w,x){var z=w[0],B=w[1];return z===n||z<r||z>l||B===n||B<c||B>d||x&&f(w)?!1:!0}function g(w,x){var z=w[0];w=w[1];if(z===n||z<r||z>l||w===n||w<c||w>d)return!1;var B=h.length,A=h[0][0],D=h[0][1],C=0,v;for(v=1;v<B;v++){var y=A;var F=D;A=h[v][0];D=h[v][1];var J=Math.min(y,A);if(!(z<J||z>Math.max(y,A)||w>Math.max(F,D)))if(w<Math.min(F,D))z!==J&&C++;else{y=A===y?w:F+(z-y)*(D-F)/(A-y);if(w===y)return 1===v&&x?!1:!0;w<=y&&
z!==J&&C++}}return 1===C%2}var h=m.slice(),r=h[0][0],l=r,c=h[0][1],d=c;h.push(h[0]);for(m=1;m<h.length;m++)r=Math.min(r,h[m][0]),l=Math.max(l,h[m][0]),c=Math.min(c,h[m][1]),d=Math.max(d,h[m][1]);var e=!1;if(5===h.length)if(h[0][0]===h[1][0]){if(h[2][0]===h[3][0]&&h[0][1]===h[3][1]&&h[1][1]===h[2][1]){e=!0;var f=function(w){return w[0]===h[0][0]}}}else h[0][1]===h[1][1]&&h[2][1]===h[3][1]&&h[0][0]===h[3][0]&&h[1][0]===h[2][0]&&(e=!0,f=function(w){return w[1]===h[0][1]});var q=!0,t=h[0];for(m=1;m<h.length;m++)if(t[0]!==
h[m][0]||t[1]!==h[m][1]){q=!1;break}return{xmin:r,xmax:l,ymin:c,ymax:d,pts:h,contains:e?a:g,isRect:e,degenerate:q}};k.isSegmentBent=function(m,a,g,h){var r=m[a],l=[m[g][0]-r[0],m[g][1]-r[1]],c=p(l,l),d=Math.sqrt(c);d=[-l[1]/d,l[0]/d];for(a+=1;a<g;a++){var e=[m[a][0]-r[0],m[a][1]-r[1]];var f=p(e,l);if(0>f||f>c||Math.abs(p(e,d))>h)return!0}return!1};k.filter=function(m,a){function g(d){m.push(d);d=h.length;var e=r;h.splice(l+1);for(var f=e+1;f<m.length;f++)if(f===m.length-1||k.isSegmentBent(m,e,f+1,
a))h.push(m[f]),h.length<d-2&&(r=f,l=h.length-1),e=f}var h=[m[0]],r=0,l=0;if(1<m.length){var c=m.pop();g(c)}return{addPt:g,raw:m,filtered:h}}},{"../constants/numerical":779,"./matrix":809}],816:[function(b,N,G){(function(p){(function(){var n=b("./show_no_webgl_msg"),k=b("regl");N.exports=function(m,a){var g=m._fullLayout,h=!0;g._glcanvas.each(function(r){if(!r.regl&&(!r.pick||g._has("parcoords"))){try{r.regl=k({canvas:this,attributes:{antialias:!r.pick,preserveDrawingBuffer:!0},pixelRatio:m._context.plotGlPixelRatio||
p.devicePixelRatio,extensions:a||[]})}catch(l){h=!1}r.regl||(h=!1);h&&this.addEventListener("webglcontextlost",function(l){m&&m.emit&&m.emit("plotly_webglcontextlost",{event:l,layer:r.key})},!1)}});h||n({container:g._glcontainer.node()});return h}}).call(this)}).call(this,"undefined"!==typeof Re?Re:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./show_no_webgl_msg":825,regl:540}],817:[function(b,N,G){var p=b("fast-isnumeric"),n=b("is-mobile");N.exports=function(k){if(k&&
k.hasOwnProperty("userAgent"))var m=k.userAgent;else"undefined"!==typeof navigator&&(m=navigator.userAgent),m&&m.headers&&"string"===typeof m.headers["user-agent"]&&(m=m.headers["user-agent"]);if("string"!==typeof m)return!0;k=n({ua:{headers:{"user-agent":m}},tablet:!0,featureDetect:!1});if(!k){m=m.split(" ");for(var a=1;a<m.length;a++)if(-1!==m[a].indexOf("Safari"))for(var g=a-1;-1<g;g--){var h=m[g];if("Version/"===h.substr(0,8)&&(h=h.substr(8).split(".")[0],p(h)&&(h=+h),13<=h))return!0}}return k}},
{"fast-isnumeric":249,"is-mobile":455}],818:[function(b,N,G){N.exports=function(p,n){if(n instanceof RegExp){for(var k=n.toString(),m=0;m<p.length;m++)if(p[m]instanceof RegExp&&p[m].toString()===k)return p;p.push(n)}else!n&&0!==n||-1!==p.indexOf(n)||p.push(n);return p}},{}],819:[function(b,N,G){var p=b("../lib"),n=b("../plot_api/plot_config").dfltConfig,k={add:function(m,a,g,h,r){m.undoQueue=m.undoQueue||{index:0,queue:[],sequence:!1};var l=m.undoQueue.index;if(m.autoplay)m.undoQueue.inSequence||
(m.autoplay=!1);else{if(!m.undoQueue.sequence||m.undoQueue.beginSequence){var c={undo:{calls:[],args:[]},redo:{calls:[],args:[]}};m.undoQueue.queue.splice(l,m.undoQueue.queue.length-l,c);m.undoQueue.index+=1}else c=m.undoQueue.queue[l-1];m.undoQueue.beginSequence=!1;c&&(c.undo.calls.unshift(a),c.undo.args.unshift(g),c.redo.calls.push(h),c.redo.args.push(r));m.undoQueue.queue.length>n.queueLength&&(m.undoQueue.queue.shift(),m.undoQueue.index--)}},startSequence:function(m){m.undoQueue=m.undoQueue||
{index:0,queue:[],sequence:!1};m.undoQueue.sequence=!0;m.undoQueue.beginSequence=!0},stopSequence:function(m){m.undoQueue=m.undoQueue||{index:0,queue:[],sequence:!1};m.undoQueue.sequence=!1;m.undoQueue.beginSequence=!1},undo:function(m){var a;if(!(void 0===m.undoQueue||isNaN(m.undoQueue.index)||0>=m.undoQueue.index)){m.undoQueue.index--;var g=m.undoQueue.queue[m.undoQueue.index];m.undoQueue.inSequence=!0;for(a=0;a<g.undo.calls.length;a++)k.plotDo(m,g.undo.calls[a],g.undo.args[a]);m.undoQueue.inSequence=
!1;m.autoplay=!1}},redo:function(m){var a;if(!(void 0===m.undoQueue||isNaN(m.undoQueue.index)||m.undoQueue.index>=m.undoQueue.queue.length)){var g=m.undoQueue.queue[m.undoQueue.index];m.undoQueue.inSequence=!0;for(a=0;a<g.redo.calls.length;a++)k.plotDo(m,g.redo.calls[a],g.redo.args[a]);m.undoQueue.inSequence=!1;m.autoplay=!1;m.undoQueue.index++}},plotDo:function(m,a,g){m.autoplay=!0;for(var h=[],r,l=0;l<g.length;l++)r=g[l],h[l]=r===m?r:"object"===typeof r?Array.isArray(r)?p.extendDeep([],r):p.extendDeepAll({},
r):r;g=h;a.apply(null,g)}};N.exports=k},{"../lib":803,"../plot_api/plot_config":841}],820:[function(b,N,G){G.counter=function(p,n,k,m){n=(n||"")+(k?"":"$");m=!1===m?"":"^";return"xy"===p?new RegExp(m+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+n):new RegExp(m+p+"([2-9]|[1-9][0-9]+)?"+n)}},{}],821:[function(b,N,G){var p=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,n=/^[^\.\[\]]+$/;N.exports=function(k,m){for(;m;){var a=k.match(p);if(a)k=a[1];else if(k.match(n))k="";else throw Error("bad relativeAttr call:"+[k,m]);
if("^"===m.charAt(0))m=m.slice(1);else break}return k&&"["!==m.charAt(0)?k+"."+m:k+m}},{}],822:[function(b,N,G){var p=b("./array").isArrayOrTypedArray,n=b("./is_plain_object");N.exports=function g(m,a){for(var h in a){var r=a[h],l=m[h];if(l!==r)if("_"===h.charAt(0)||"function"===typeof r)h in m||(m[h]=r);else if(p(r)&&p(l)&&n(r[0])){if("customdata"!==h&&"ids"!==h)for(var c=Math.min(r.length,l.length),d=0;d<c;d++)l[d]!==r[d]&&n(r[d])&&n(l[d])&&g(l[d],r[d])}else n(r)&&n(l)&&(g(l,r),Object.keys(l).length||
delete m[h])}}},{"./array":785,"./is_plain_object":804}],823:[function(b,N,G){function p(l,c){return l<c}function n(l,c){return l<=c}function k(l,c){return l>c}function m(l,c){return l>=c}var a=b("fast-isnumeric"),g=b("./loggers"),h=b("./identity"),r=b("../constants/numerical").BADNUM;G.findBin=function(l,c,d){if(a(c.start))return d?Math.ceil((l-c.start)/c.size-1E-9)-1:Math.floor((l-c.start)/c.size+1E-9);var e=0,f=c.length,q=0,t=1<f?(c[f-1]-c[0])/(f-1):1;var w=0<=t?d?p:n:d?m:k;for(l+=1E-9*t*(d?-1:
1)*(0<=t?1:-1);e<f&&100>q++;)d=Math.floor((e+f)/2),w(c[d],l)?e=d+1:f=d;90<q&&g.log("Long binary search...");return e-1};G.sorterAsc=function(l,c){return l-c};G.sorterDes=function(l,c){return c-l};G.distinctVals=function(l){l=l.slice();l.sort(G.sorterAsc);var c;for(c=l.length-1;-1<c&&l[c]===r;c--);for(var d=l[c]-l[0]||1,e=d/(c||1)/1E4,f=[],q,t=0;t<=c;t++){var w=l[t],x=w-q;void 0===q?(f.push(w),q=w):x>e&&(d=Math.min(d,x),f.push(w),q=w)}return{vals:f,minDiff:d}};G.roundUp=function(l,c,d){for(var e=0,
f=c.length-1,q=0,t=d?0:1,w=d?1:0,x=d?Math.ceil:Math.floor;e<f&&100>q++;)d=x((e+f)/2),c[d]<=l?e=d+t:f=d-w;return c[e]};G.sort=function(l,c){for(var d=0,e=0,f=1;f<l.length;f++){var q=c(l[f],l[f-1]);0>q?d=1:0<q&&(e=1);if(d&&e)return l.sort(c)}return e?l:l.reverse()};G.findIndexOfMin=function(l,c){c=c||h;for(var d=Infinity,e,f=0;f<l.length;f++){var q=c(l[f]);q<d&&(d=q,e=f)}return e}},{"../constants/numerical":779,"./identity":801,"./loggers":807,"fast-isnumeric":249}],824:[function(b,N,G){N.exports=function(p,
n){(p.attr("class")||"").split(" ").forEach(function(k){0===k.indexOf("cursor-")&&p.classed(k,!1)});n&&p.classed("cursor-"+n,!0)}},{}],825:[function(b,N,G){var p=b("../components/color"),n=function(){};N.exports=function(k){for(var m in k)"function"===typeof k[m]&&(k[m]=n);k.destroy=function(){k.container.parentNode.removeChild(k.container)};m=document.createElement("div");m.className="no-webgl";m.style.cursor="pointer";m.style.fontSize="24px";m.style.color=p.defaults[0];m.style.position="absolute";
m.style.left=m.style.top="0px";m.style.width=m.style.height="100%";m.style["background-color"]=p.lightLine;m.style["z-index"]=30;var a=document.createElement("p");a.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info";a.style.position="relative";a.style.top="50%";a.style.left="50%";a.style.height="30%";a.style.width="50%";a.style.margin="-15% 0 0 -25%";m.appendChild(a);k.container.appendChild(m);k.container.style.background="#FFFFFF";k.container.onclick=
function(){window.open("https://get.webgl.org")};return!1}},{"../components/color":666}],826:[function(b,N,G){N.exports=function(p){return Object.keys(p).sort()}},{}],827:[function(b,N,G){var p=b("fast-isnumeric"),n=b("./array").isArrayOrTypedArray;G.aggNums=function(k,m,a,g){var h;if(!g||g>a.length)g=a.length;p(m)||(m=!1);if(n(a[0])){var r=Array(g);for(h=0;h<g;h++)r[h]=G.aggNums(k,m,a[h]);a=r}for(h=0;h<g;h++)p(m)?p(a[h])&&(m=k(+m,+a[h])):m=a[h];return m};G.len=function(k){return G.aggNums(function(m){return m+
1},0,k)};G.mean=function(k,m){m||(m=G.len(k));return G.aggNums(function(a,g){return a+g},0,k)/m};G.midRange=function(k){if(void 0!==k&&0!==k.length)return(G.aggNums(Math.max,null,k)+G.aggNums(Math.min,null,k))/2};G.variance=function(k,m,a){m||(m=G.len(k));p(a)||(a=G.mean(k,m));return G.aggNums(function(g,h){return g+Math.pow(h-a,2)},0,k)/m};G.stdev=function(k,m,a){return Math.sqrt(G.variance(k,m,a))};G.median=function(k){k=k.slice().sort();return G.interp(k,.5)};G.interp=function(k,m){if(!p(m))throw"n should be a finite number";
m=m*k.length-.5;if(0>m)return k[0];if(m>k.length-1)return k[k.length-1];var a=m%1;return a*k[Math.ceil(m)]+(1-a)*k[Math.floor(m)]}},{"./array":785,"fast-isnumeric":249}],828:[function(b,N,G){var p=b("color-normalize");N.exports=function(n){return n?p(n):[0,0,0,1]}},{"color-normalize":131}],829:[function(b,N,G){function p(H,M,Q){var Z,ca,W,T;MathJax.Hub.Queue(function(){ca=r.extendDeepAll({},MathJax.Hub.config);W=MathJax.Hub.processSectionDelay;void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=
0);return MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]},displayAlign:"left"})},function(){Z=MathJax.Hub.config.menuSettings.renderer;if("SVG"!==Z)return MathJax.Hub.setRenderer("SVG")},function(){var U="math-output-"+r.randstr({},64);T=h.select("body").append("div").attr({id:U}).style({visibility:"hidden",position:"absolute"}).style({"font-size":M.fontSize+"px"}).text(H.replace(f,"\\lt ").replace(q,"\\gt "));return MathJax.Hub.Typeset(T.node())},function(){var U=
h.select("body").select("#MathJax_SVG_glyphs");if(T.select(".MathJax_SVG").empty()||!T.select("svg").node())r.log("There was an error in the tex syntax.",H),Q();else{var ha=T.select("svg").node().getBoundingClientRect();Q(T.select(".MathJax_SVG"),U,ha)}T.remove();if("SVG"!==Z)return MathJax.Hub.setRenderer(Z)},function(){void 0!==W&&(MathJax.Hub.processSectionDelay=W);return MathJax.Hub.Config(ca)})}function n(H,M){return H?(H=(H=H.match(M))&&(H[3]||H[4]))&&k(H):null}function k(H){return H.replace(L,
function(M,Q){if("#"===Q.charAt(0))if(Q="x"===Q.charAt(1)?parseInt(Q.substr(2),16):parseInt(Q.substr(1),10),1114111<Q)Q=void 0;else{var Z=String.fromCodePoint;Z?Q=Z(Q):(Z=String.fromCharCode,Q=65535>=Q?Z(Q):Z((Q>>10)+55232,Q%1024+56320))}else Q=I[Q];return Q||M})}function m(H,M){function Q(){ha++;var la=document.createElementNS(c.svg,"tspan");h.select(la).attr({class:"line",dy:ha*d+"em"});H.appendChild(la);Y=la;var ka=U;U=[{node:la}];if(1<ka.length)for(la=1;la<ka.length;la++)Z(ka[la])}function Z(la){var ka=
la.type,na={};if("a"===ka){var qa="a";var ta=la.target,za=la.href,Ia=la.popup;za&&(na={"xlink:xlink:show":"_blank"===ta||"_"!==ta.charAt(0)?"new":"replace",target:ta,"xlink:xlink:href":za},Ia&&(na.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+Ia+'");return false;'))}else qa="tspan";la.style&&(na.style=la.style);qa=document.createElementNS(c.svg,qa);"sup"===ka||"sub"===ka?(ca(Y,z),Y.appendChild(qa),ta=document.createElementNS(c.svg,"tspan"),ca(ta,z),h.select(ta).attr("dy",x[ka]),na.dy=
w[ka],Y.appendChild(qa),Y.appendChild(ta)):Y.appendChild(qa);h.select(qa).attr(na);Y=la.node=qa;U.push(la)}function ca(la,ka){la.appendChild(document.createTextNode(ka))}function W(la){if(1===U.length)r.log("Ignoring unexpected end tag \x3c/"+la+"\x3e.",M);else{var ka=U.pop();la!==ka.type&&r.log("Start tag \x3c"+ka.type+"\x3e doesnt match end tag \x3c"+la+"\x3e. Pretending it did match.",M);Y=U[U.length-1].node}}M=M.replace(A," ");var T=!1,U=[],ha=-1;if(v.test(M))Q();else{var Y=H;U=[{node:H}]}for(var ba=
M.split(D),ja=0;ja<ba.length;ja++){var ma=ba[ja],ia=ma.match(C),oa=ia&&ia[2].toLowerCase(),xa=t[oa];if("br"===oa)Q();else if(void 0===xa)ca(Y,k(ma));else if(ia[1])W(oa);else{ma=ia[4];ia={type:oa};var ra=n(ma,y);ra?(ra=ra.replace(O,"$1 fill:"),xa&&(ra+=";"+xa)):xa&&(ra=xa);ra&&(ia.style=ra);"a"===oa&&(T=!0,oa=n(ma,F))&&(oa=a(oa))&&(ia.href=oa,ia.target=n(ma,J)||"_blank",ia.popup=n(ma,K));Z(ia)}}return T}function a(H){var M=encodeURI(decodeURI(H)),Q=document.createElement("a"),Z=document.createElement("a");
Q.href=H;Z.href=M;H=Z.protocol;return-1!==B.indexOf(Q.protocol)&&-1!==B.indexOf(H)?M:""}function g(H,M,Q){var Z=Q.horizontalAlign,ca=Q.verticalAlign||"top",W=H.node().getBoundingClientRect(),T=M.node().getBoundingClientRect(),U;var ha="bottom"===ca?function(){return W.bottom-U.height}:"middle"===ca?function(){return W.top+(W.height-U.height)/2}:function(){return W.top};var Y="right"===Z?function(){return W.right-U.width}:"center"===Z?function(){return W.left+(W.width-U.width)/2}:function(){return W.left};
return function(){U=this.node().getBoundingClientRect();var ba=Y()-T.left,ja=ha()-T.top,ma=Q.gd||{};Q.gd&&(ma._fullLayout._calcInverseTransform(ma),ja=r.apply3DTransform(ma._fullLayout._invTransform)(ba,ja),ba=ja[0],ja=ja[1]);this.style({top:ja+"px",left:ba+"px","z-index":1E3});return this}}var h=b("@plotly/d3"),r=b("../lib"),l=r.strTranslate,c=b("../constants/xmlns_namespaces"),d=b("../constants/alignment").LINE_SPACING,e=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;G.convertToTspans=function(H,M,Q){function Z(){T.empty()||
(U=H.attr("class")+"-math",T.select("svg."+U).remove());H.text("").style("white-space","pre");m(H.node(),ca)&&H.style("pointer-events","all");G.positionText(H);Q&&Q.call(H)}var ca=H.text(),W=!H.attr("data-notex")&&"undefined"!==typeof MathJax&&ca.match(e),T=h.select(H.node().parentNode);if(!T.empty()){var U=H.attr("class")?H.attr("class").split(" ")[0]:"text";U+="-math";T.selectAll("svg."+U).remove();T.selectAll("g."+U+"-group").remove();H.style("display",null).attr({"data-unformatted":ca,"data-math":"N"});
W?(M&&M._promises||[]).push(new Promise(function(ha){H.style("display","none");var Y=parseInt(H.node().style.fontSize,10);p(W[2],{fontSize:Y},function(ba,ja,ma){T.selectAll("svg."+U).remove();T.selectAll("g."+U+"-group").remove();if((ba=ba&&ba.select("svg"))&&ba.node()){var ia=T.append("g").classed(U+"-group",!0).attr({"pointer-events":"none","data-unformatted":ca,"data-math":"Y"});ia.node().appendChild(ba.node());ja&&ja.node()&&ba.node().insertBefore(ja.node().cloneNode(!0),ba.node().firstChild);
ba.attr({"class":U,height:ma.height,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});ja=H.node().style.fill||"black";ma=ba.select("g");ma.attr({fill:ja,stroke:ja});ja=ma.node().getBoundingClientRect().width;ma=ma.node().getBoundingClientRect().height;var oa=+H.attr("x")-ja*{start:0,middle:.5,end:1}[H.attr("text-anchor")||"start"],xa=-(Y||H.node().getBoundingClientRect().height)/4;"y"===U[0]?(ia.attr({transform:"rotate("+[-90,+H.attr("x"),+H.attr("y")]+")"+
l(-ja/2,xa-ma/2)}),ba.attr({x:+H.attr("x"),y:+H.attr("y")})):"l"===U[0]?ba.attr({x:H.attr("x"),y:xa-ma/2}):"a"===U[0]&&0!==U.indexOf("atitle")?ba.attr({x:0,y:xa}):ba.attr({x:oa,y:+H.attr("y")+xa-ma/2});Q&&Q.call(H,ia);ha(ia)}else Z(),ha()})})):Z();return H}};var f=/(<|&lt;|&#60;)/g,q=/(>|&gt;|&#62;)/g,t={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},w={sub:"0.3em",sup:"-0.6em"},x={sub:"-0.21em",
sup:"0.42em"},z="",B=["http:","https:","mailto:","",void 0,":"],A=G.NEWLINES=/(\r\n?|\n)/g,D=/(<[^<>]*>)/,C=/<(\/?)([^ >]*)(\s+(.*))?>/i,v=/<br(\s+.*)?>/i;G.BR_TAG_ALL=/<br(\s+.*)?>/gi;var y=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,F=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,J=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,K=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i,O=/(^|;)\s*color:/;G.plainText=function(H,M){M=M||{};var Q=void 0!==M.len&&-1!==M.len?M.len:Infinity;M=
void 0!==M.allowedTags?M.allowedTags:["br"];var Z=H.split(D);H=[];for(var ca="",W=0,T=0;T<Z.length;T++){var U=Z[T],ha=U.match(C);if(ha=ha&&ha[2].toLowerCase())-1!==M.indexOf(ha)&&(H.push(U),ca=ha);else{ha=U.length;if(W+ha<Q)H.push(U),W+=ha;else if(W<Q){M=Q-W;ca&&("br"!==ca||3>=M||3>=ha)&&H.pop();3<Q?H.push(U.substr(0,M-3)+"..."):H.push(U.substr(0,M));break}ca=""}}return H.join("")};var I={mu:"",amp:"\x26",lt:"\x3c",gt:"\x3e",nbsp:"",times:"",plusmn:"",deg:""},L=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;
G.convertEntities=k;G.sanitizeHTML=function(H){H=H.replace(A," ");var M=document.createElement("p"),Q=M,Z=[];H=H.split(D);for(var ca=0;ca<H.length;ca++){var W=H[ca],T=W.match(C),U=T&&T[2].toLowerCase();if(U in t)if(T[1])Z.length&&(Q=Z.pop());else{T=T[4];W=(W=n(T,y))?{style:W}:{};if("a"===U){var ha=n(T,F);ha&&(ha=a(ha))&&(W.href=ha,T=n(T,J))&&(W.target=T)}U=document.createElement(U);Q.appendChild(U);h.select(U).attr(W);Q=U;Z.push(U)}else Q.appendChild(document.createTextNode(k(W)))}return M.innerHTML};
G.lineCount=function(H){return H.selectAll("tspan.line").size()||1};G.positionText=function(H,M,Q){return H.each(function(){function Z(U,ha){void 0===ha?(ha=ca.attr(U),null===ha&&(ca.attr(U,0),ha=0)):ca.attr(U,ha);return ha}var ca=h.select(this),W=Z("x",M),T=Z("y",Q);"text"===this.nodeName&&ca.selectAll("tspan.line").attr({x:W,y:T})})};G.makeTextShadow=function(H){return"1px 1px 1px "+H+", -1px -1px 1px "+H+", 1px -1px 1px "+H+", -1px 1px 1px "+H};G.makeEditable=function(H,M){function Q(){ca();H.style({opacity:0});
var Y=ha.attr("class");(Y=Y?"."+Y.split(" ")[0]+"-math-group":"[class*\x3d-math-group]")&&h.select(H.node().parentNode).select(Y).style({opacity:0})}function Z(Y){Y=Y.node();var ba=document.createRange();ba.selectNodeContents(Y);var ja=window.getSelection();ja.removeAllRanges();ja.addRange(ba);Y.focus()}function ca(){var Y=h.select(W).select(".svg-container"),ba=Y.append("div"),ja=H.node().style,ma=parseFloat(ja.fontSize||12),ia=M.text;void 0===ia&&(ia=H.attr("data-unformatted"));ba.classed("plugin-editable editable",
!0).style({position:"absolute","font-family":ja.fontFamily||"Arial","font-size":ma,color:M.fill||ja.fill||"black",opacity:1,"background-color":M.background||"transparent",outline:"#ffffff33 1px solid",margin:[-ma/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(ia).call(g(H,Y,M)).on("blur",function(){W._editing=!1;H.text(this.textContent).style({opacity:1});var oa=h.select(this).attr("class");(oa=oa?"."+oa.split(" ")[0]+"-math-group":"[class*\x3d-math-group]")&&
h.select(H.node().parentNode).select(oa).style({opacity:0});oa=this.textContent;h.select(this).transition().duration(0).remove();h.select(document).on("mouseup",null);U.edit.call(H,oa)}).on("focus",function(){var oa=this;W._editing=!0;h.select(document).on("mouseup",function(){if(h.event.target===oa)return!1;document.activeElement===ba.node()&&ba.node().blur()})}).on("keyup",function(){27===h.event.which?(W._editing=!1,H.style({opacity:1}),h.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),
U.cancel.call(H,this.textContent)):(U.input.call(H,this.textContent),h.select(this).call(g(H,Y,M)))}).on("keydown",function(){13===h.event.which&&this.blur()}).call(Z)}var W=M.gd,T=M.delegate,U=h.dispatch("edit","input","cancel"),ha=T||H;H.style({"pointer-events":T?"none":"all"});if(1!==H.size())throw Error("boo");if(M.immediate)Q();else ha.on("click",Q);return h.rebind(H,U,"on")}},{"../constants/alignment":771,"../constants/xmlns_namespaces":780,"../lib":803,"@plotly/d3":58}],830:[function(b,N,G){function p(k){k&&
null!==k.timer&&(clearTimeout(k.timer),k.timer=null)}var n={};G.throttle=function(k,m,a){function g(){a();h.ts=Date.now();h.onDone&&(h.onDone(),h.onDone=null)}var h=n[k],r=Date.now();if(!h){for(var l in n)n[l].ts<r-6E4&&delete n[l];h=n[k]={ts:0,timer:null}}p(h);r>h.ts+m?g():h.timer=setTimeout(function(){g();h.timer=null},m)};G.done=function(k){var m=n[k];return m&&m.timer?new Promise(function(a){var g=m.onDone;m.onDone=function(){g&&g();a();m.onDone=null}}):Promise.resolve()};G.clear=function(k){if(k)p(n[k]),
delete n[k];else for(var m in n)G.clear(m)}},{}],831:[function(b,N,G){var p=b("fast-isnumeric");N.exports=function(n,k){if(0<n)return Math.log(n)/Math.LN10;n=Math.log(Math.min(k[0],k[1]))/Math.LN10;p(n)||(n=Math.log(Math.max(k[0],k[1]))/Math.LN10-6);return n}},{"fast-isnumeric":249}],832:[function(b,N,G){N=N.exports={};var p=b("../plots/geo/constants").locationmodeToLayer,n=b("topojson-client").feature;N.getTopojsonName=function(k){return[k.scope.replace(/ /g,"-"),"_",k.resolution.toString(),"m"].join("")};
N.getTopojsonPath=function(k,m){return k+m+".json"};N.getTopojsonFeatures=function(k,m){return n(m,m.objects[p[k.locationmode]]).features}},{"../plots/geo/constants":885,"topojson-client":601}],833:[function(b,N,G){N.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],834:[function(b,N,G){N.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},
format:{days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},
{}],835:[function(b,N,G){var p=b("../registry");N.exports=function(n){for(var k=p.layoutArrayContainers,m=p.layoutArrayRegexes,a=n.split("[")[0],g,h,r=0;r<m.length;r++)if((h=n.match(m[r]))&&0===h.index){g=h[0];break}g||(g=k[k.indexOf(a)]);if(!g)return!1;n=n.substr(g.length);return n?(h=n.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))?{array:g,index:Number(h[1]),property:h[3]||""}:!1:{array:g,index:"",property:""}}},{"../registry":931}],836:[function(b,N,G){function p(r){for(var l={},c=0;c<r.length;c++)l[r[c]]=
!1;return l}function n(r,l,c){r=m({},r);for(var d in r){var e=r[d];a(e)&&(r[d]=k(e,l,c,d))}"from-root"===c&&(r.editType=l);return r}function k(r,l,c,d){if(r.valType){c=m({},r);c.editType=l;if(Array.isArray(r.items))for(c.items=Array(r.items.length),d=0;d<r.items.length;d++)c.items[d]=k(r.items[d],l,"from-root");return c}return n(r,l,"_"===d.charAt(0)?"nested":"from-root")}b=b("../lib");var m=b.extendFlat,a=b.isPlainObject;b={valType:"flaglist",extras:["none"],flags:"calc clearAxisTypes plot style markerSize colorbars".split(" ")};
G={valType:"flaglist",extras:["none"],flags:"calc plot legend ticks axrange layoutstyle modebar camera arraydraw colorbars".split(" ")};var g=b.flags.slice().concat(["fullReplot"]),h=G.flags.slice().concat("layoutReplot");N.exports={traces:b,layout:G,traceFlags:function(){return p(g)},layoutFlags:function(){return p(h)},update:function(r,l){if((l=l.editType)&&"none"!==l){l=l.split("+");for(var c=0;c<l.length;c++)r[l[c]]=!0}},overrideAll:n}},{"../lib":803}],837:[function(b,N,G){function p(z,B){var A=
z[B],D=B.charAt(0);A&&"paper"!==A&&(z[B]=f(A,D,!0))}function n(z){function B(A,D){var C=z.title&&z.title[D];z[A]&&!C&&(z.title||(z.title={}),z.title[D]=z[A],delete z[A])}if(z){if("string"===typeof z.title||"number"===typeof z.title)z.title={text:z.title};B("titlefont","font");B("titleposition","position");B("titleside","side");B("titleoffset","offset")}}function k(z){if(!c.isPlainObject(z))return!1;var B=z.name;delete z.name;delete z.showlegend;return("string"===typeof B||"number"===typeof B)&&String(B)}
function m(z){var B="middle",A="center";"string"===typeof z&&(-1!==z.indexOf("top")?B="top":-1!==z.indexOf("bottom")&&(B="bottom"),-1!==z.indexOf("left")?A="left":-1!==z.indexOf("right")&&(A="right"));return B+" "+A}function a(z,B){return B in z&&"object"===typeof z[B]&&0===Object.keys(z[B]).length}function g(z){var B=z.search(w);if(0<B)return z.substr(0,B)}var h=b("fast-isnumeric"),r=b("gl-mat4/fromQuat"),l=b("../registry"),c=b("../lib"),d=b("../plots/plots");N=b("../plots/cartesian/axis_ids");var e=
b("../components/color"),f=N.cleanId,q=N.getFromTrace,t=l.traceIs;G.clearPromiseQueue=function(z){Array.isArray(z._promises)&&0<z._promises.length&&c.log("Clearing previous rejected promises from queue.");z._promises=[]};G.cleanLayout=function(z){var B;z||(z={});z.xaxis1&&(z.xaxis||(z.xaxis=z.xaxis1),delete z.xaxis1);z.yaxis1&&(z.yaxis||(z.yaxis=z.yaxis1),delete z.yaxis1);z.scene1&&(z.scene||(z.scene=z.scene1),delete z.scene1);var A=(d.subplotsRegistry.cartesian||{}).attrRegex,D=(d.subplotsRegistry.polar||
{}).attrRegex,C=(d.subplotsRegistry.ternary||{}).attrRegex,v=(d.subplotsRegistry.gl3d||{}).attrRegex,y=Object.keys(z);for(B=0;B<y.length;B++){var F=y[B];if(A&&A.test(F)){F=z[F];F.anchor&&"free"!==F.anchor&&(F.anchor=f(F.anchor));F.overlaying&&(F.overlaying=f(F.overlaying));F.type||(F.isdate?F.type="date":F.islog?F.type="log":!1===F.isdate&&!1===F.islog&&(F.type="linear"));if("withzero"===F.autorange||"tozero"===F.autorange)F.autorange=!0,F.rangemode="tozero";delete F.islog;delete F.isdate;delete F.categories;
a(F,"domain")&&delete F.domain;void 0!==F.autotick&&(void 0===F.tickmode&&(F.tickmode=F.autotick?"auto":"linear"),delete F.autotick);n(F)}else if(D&&D.test(F))n(z[F].radialaxis);else if(C&&C.test(F))F=z[F],n(F.aaxis),n(F.baxis),n(F.caxis);else if(v&&v.test(F)){F=z[F];var J=F.cameraposition;if(Array.isArray(J)&&4===J[0].length){var K=J[1],O=J[2],I=r([],J[0]),L=[];for(J=0;3>J;++J)L[J]=K[J]+O*I[2+4*J];F.camera={eye:{x:L[0],y:L[1],z:L[2]},center:{x:K[0],y:K[1],z:K[2]},up:{x:0,y:0,z:1}};delete F.cameraposition}n(F.xaxis);
n(F.yaxis);n(F.zaxis)}}A=Array.isArray(z.annotations)?z.annotations.length:0;for(B=0;B<A;B++)D=z.annotations[B],c.isPlainObject(D)&&(D.ref&&("paper"===D.ref?(D.xref="paper",D.yref="paper"):"data"===D.ref&&(D.xref="x",D.yref="y"),delete D.ref),p(D,"xref"),p(D,"yref"));A=Array.isArray(z.shapes)?z.shapes.length:0;for(B=0;B<A;B++)D=z.shapes[B],c.isPlainObject(D)&&(p(D,"xref"),p(D,"yref"));A=Array.isArray(z.images)?z.images.length:0;for(B=0;B<A;B++)D=z.images[B],c.isPlainObject(D)&&(p(D,"xref"),p(D,"yref"));
if(B=z.legend)3<B.x?(B.x=1.02,B.xanchor="left"):-2>B.x&&(B.x=-.02,B.xanchor="right"),3<B.y?(B.y=1.02,B.yanchor="bottom"):-2>B.y&&(B.y=-.02,B.yanchor="top");n(z);"rotate"===z.dragmode&&(z.dragmode="orbit");e.clean(z);z.template&&z.template.layout&&G.cleanLayout(z.template.layout);return z};G.cleanData=function(z){for(var B=0;B<z.length;B++){var A=z[B];"histogramy"===A.type&&"xbins"in A&&!("ybins"in A)&&(A.ybins=A.xbins,delete A.xbins);if(A.error_y&&"opacity"in A.error_y){var D=e.defaults;D=A.error_y.color||
(t(A,"bar")?e.defaultLine:D[B%D.length]);A.error_y.color=e.addOpacity(e.rgb(D),e.opacity(D)*A.error_y.opacity);delete A.error_y.opacity}"bardir"in A&&("h"!==A.bardir||!t(A,"bar")&&"histogram"!==A.type.substr(0,9)||(A.orientation="h",G.swapXYData(A)),delete A.bardir);"histogramy"===A.type&&G.swapXYData(A);if("histogramx"===A.type||"histogramy"===A.type)A.type="histogram";"scl"in A&&!("colorscale"in A)&&(A.colorscale=A.scl,delete A.scl);"reversescl"in A&&!("reversescale"in A)&&(A.reversescale=A.reversescl,
delete A.reversescl);A.xaxis&&(A.xaxis=f(A.xaxis,"x"));A.yaxis&&(A.yaxis=f(A.yaxis,"y"));t(A,"gl3d")&&A.scene&&(A.scene=d.subplotsRegistry.gl3d.cleanId(A.scene));if(!t(A,"pie-like")&&!t(A,"bar-like"))if(Array.isArray(A.textposition))for(D=0;D<A.textposition.length;D++)A.textposition[D]=m(A.textposition[D]);else A.textposition&&(A.textposition=m(A.textposition));(D=l.getModule(A))&&D.colorbar&&(D=(D=D.colorbar.container)?A[D]:A)&&D.colorscale&&("YIGnBu"===D.colorscale&&(D.colorscale="YlGnBu"),"YIOrRd"===
D.colorscale&&(D.colorscale="YlOrRd"));if("surface"===A.type&&c.isPlainObject(A.contours)){var C=["x","y","z"];for(D=0;D<C.length;D++){var v=A.contours[C[D]];c.isPlainObject(v)&&(v.highlightColor&&(v.highlightcolor=v.highlightColor,delete v.highlightColor),v.highlightWidth&&(v.highlightwidth=v.highlightWidth,delete v.highlightWidth))}}if("candlestick"===A.type||"ohlc"===A.type){C=!1!==(A.increasing||{}).showlegend;v=!1!==(A.decreasing||{}).showlegend;D=k(A.increasing);var y=k(A.decreasing);if(!1!==
D&&!1!==y){if(!C||v)if(v&&!C)D=y;else if(D.trim()){if(y.trim()){v=Math.min(D.length,y.length);for(C=0;C<v&&D.charAt(C)===y.charAt(C);C++);D=D.substr(0,C).trim()}}else D=y;D&&(A.name=D)}else!D&&!y||A.name||(A.name=D||y)}if(Array.isArray(A.transforms))for(C=A.transforms,D=0;D<C.length;D++)if(v=C[D],c.isPlainObject(v))switch(v.type){case "filter":v.filtersrc&&(v.target=v.filtersrc,delete v.filtersrc);v.calendar&&(v.valuecalendar||(v.valuecalendar=v.calendar),delete v.calendar);break;case "groupby":if(v.styles=
v.styles||v.style,v.styles&&!Array.isArray(v.styles)){y=v.styles;var F=Object.keys(y);v.styles=[];for(var J=0;J<F.length;J++)v.styles.push({target:F[J],value:y[F[J]]})}}a(A,"line")&&delete A.line;"marker"in A&&(a(A.marker,"line")&&delete A.marker.line,a(A,"marker")&&delete A.marker);e.clean(A);A.autobinx&&(delete A.autobinx,delete A.xbins);A.autobiny&&(delete A.autobiny,delete A.ybins);n(A);A.colorbar&&n(A.colorbar);A.marker&&A.marker.colorbar&&n(A.marker.colorbar);A.line&&A.line.colorbar&&n(A.line.colorbar);
A.aaxis&&n(A.aaxis);A.baxis&&n(A.baxis)}};G.swapXYData=function(z){c.swapAttrs(z,"? ?0 d? ?bins nbins? autobin? ?src error_?".split(" "));Array.isArray(z.z)&&Array.isArray(z.z[0])&&(z.transpose?delete z.transpose:z.transpose=!0);if(z.error_x&&z.error_y){var B=z.error_y;B="copy_ystyle"in B?B.copy_ystyle:!(B.color||B.thickness||B.width);c.swapAttrs(z,["error_?.copy_ystyle"]);B&&c.swapAttrs(z,["error_?.color","error_?.thickness","error_?.width"])}if("string"===typeof z.hoverinfo){var A=z.hoverinfo.split("+");
for(B=0;B<A.length;B++)"x"===A[B]?A[B]="y":"y"===A[B]&&(A[B]="x");z.hoverinfo=A.join("+")}};G.coerceTraceIndices=function(z,B){if(h(B))return[B];if(!Array.isArray(B)||!B.length)return z.data.map(function(C,v){return v});if(Array.isArray(B)){for(var A=[],D=0;D<B.length;D++)c.isIndex(B[D],z.data.length)?A.push(B[D]):c.warn("trace index (",B[D],") is not a number or is out of bounds");return A}return B};G.manageArrayContainers=function(z,B,A){var D=z.obj,C=z.parts,v=C.length,y=C[v-1],F=h(y);F&&null===
B?(z=C.slice(0,v-1).join("."),c.nestedProperty(D,z).get().splice(y,1)):(F&&void 0===z.get()&&void 0===z.get()&&(A[z.astr]=null),z.set(B))};var w=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;G.hasParent=function(z,B){for(B=g(B);B;){if(B in z)return!0;B=g(B)}return!1};var x=["x","y","z"];G.clearAxisTypes=function(z,B,A){for(var D=0;D<B.length;D++)for(var C=z._fullData[D],v=0;3>v;v++){var y=q(z,C,x[v]);if(y&&"log"!==y.type){var F=y._name;y=y._id.substr(1);if("scene"===y.substr(0,5)){if(void 0!==A[y])continue;F=
y+"."+F}y=F+".type";void 0===A[F]&&void 0===A[y]&&c.nestedProperty(z.layout,y).set(null)}}}},{"../components/color":666,"../lib":803,"../plots/cartesian/axis_ids":858,"../plots/plots":917,"../registry":931,"fast-isnumeric":249,"gl-mat4/fromQuat":288}],838:[function(b,N,G){N=b("./plot_api");G._doPlot=N._doPlot;G.newPlot=N.newPlot;G.restyle=N.restyle;G.relayout=N.relayout;G.redraw=N.redraw;G.update=N.update;G._guiRestyle=N._guiRestyle;G._guiRelayout=N._guiRelayout;G._guiUpdate=N._guiUpdate;G._storeDirectGUIEdit=
N._storeDirectGUIEdit;G.react=N.react;G.extendTraces=N.extendTraces;G.prependTraces=N.prependTraces;G.addTraces=N.addTraces;G.deleteTraces=N.deleteTraces;G.moveTraces=N.moveTraces;G.purge=N.purge;G.addFrames=N.addFrames;G.deleteFrames=N.deleteFrames;G.animate=N.animate;G.setPlotConfig=N.setPlotConfig;G.toImage=b("./to_image");G.validate=b("./validate");G.downloadImage=b("../snapshot/download");b=b("./template_api");G.makeTemplate=b.makeTemplate;G.validateTemplate=b.validateTemplate},{"../snapshot/download":933,
"./plot_api":840,"./template_api":845,"./to_image":846,"./validate":847}],839:[function(b,N,G){var p=b("../lib/is_plain_object"),n=b("../lib/noop"),k=b("../lib/loggers"),m=b("../lib/search").sorterAsc,a=b("../registry");G.containerArrayMatch=b("./container_array_match");var g=G.isAddVal=function(r){return"add"===r||p(r)},h=G.isRemoveVal=function(r){return null===r||"remove"===r};G.applyContainerArrayChanges=function(r,l,c,d,e){var f=l.astr,q=a.getComponentMethod(f,"supplyLayoutDefaults"),t=a.getComponentMethod(f,
"draw"),w=a.getComponentMethod(f,"drawOne");d=d.replot||d.recalc||q===n||t===n;var x=r.layout,z=r._fullLayout;if(c[""]){1<Object.keys(c).length&&k.warn("Full array edits are incompatible with other edits",f);w=c[""][""];if(h(w))l.set(null);else if(Array.isArray(w))l.set(w);else return k.warn("Unrecognized full array edit value",f,w),!0;if(d)return!1;q(x,z);t(r);return!0}var B=Object.keys(c).map(Number).sort(m),A=l.get(),D=A||[],C=e(z,f).get(),v=[],y=-1,F=D.length,J;for(J=0;J<B.length;J++){var K=B[J];
var O=c[K];var I=Object.keys(O);var L=O[""];var H=g(L);if(0>K||K>D.length-(H?0:1))k.warn("index out of range",f,K);else if(void 0!==L)1<I.length&&k.warn("Insertion \x26 removal are incompatible with edits to the same index.",f,K),h(L)?v.push(K):H?("add"===L&&(L={}),D.splice(K,0,L),C&&C.splice(K,0,{})):k.warn("Unrecognized full object edit value",f,K,L),-1===y&&(y=K);else for(L=0;L<I.length;L++)H=f+"["+K+"].",e(D[K],I[L],H).set(O[I[L]])}for(J=v.length-1;0<=J;J--)D.splice(v[J],1),C&&C.splice(v[J],1);
D.length?A||l.set(D):l.set(null);if(d)return!1;q(x,z);if(w!==n){if(-1===y)l=B;else{F=Math.max(D.length,F);l=[];for(J=0;J<B.length;J++){K=B[J];if(K>=y)break;l.push(K)}for(J=y;J<F;J++)l.push(J)}for(J=0;J<l.length;J++)w(r,l[J])}else t(r);return!0}},{"../lib/is_plain_object":804,"../lib/loggers":807,"../lib/noop":812,"../lib/search":823,"../registry":931,"./container_array_match":835}],840:[function(b,N,G){function p(Ma){var La=Ma._fullLayout;La._redrawFromAutoMarginCount?La._redrawFromAutoMarginCount--:
Ma.emit("plotly_afterplot")}function n(Ma,La){try{Ma._fullLayout._paper.style("background",La)}catch(ya){ja.error(ya)}}function k(Ma,La){La=qa.combine(La,"white");n(Ma,La)}function m(Ma,La){if(!Ma._context){Ma._context=ja.extendDeep({},Xa);var ya=ha.select("base");Ma._context._baseUrl=ya.size()&&ya.attr("href")?window.location.href.split("#")[0]:""}var Aa=Ma._context;if(La){var Ka=Object.keys(La);for(ya=0;ya<Ka.length;ya++){var Ta=Ka[ya];"editable"!==Ta&&"edits"!==Ta&&Ta in Aa&&(Aa[Ta]="setBackground"===
Ta&&"opaque"===La[Ta]?k:La[Ta])}La.plot3dPixelRatio&&!Aa.plotGlPixelRatio&&(Aa.plotGlPixelRatio=Aa.plot3dPixelRatio);Ta=La.editable;if(void 0!==Ta)for(Aa.editable=Ta,Ka=Object.keys(Aa.edits),ya=0;ya<Ka.length;ya++)Aa.edits[Ka[ya]]=Ta;if(La.edits)for(Ka=Object.keys(La.edits),ya=0;ya<Ka.length;ya++)Ta=Ka[ya],Ta in Aa.edits&&(Aa.edits[Ta]=La.edits[Ta]);Aa._exportedPlot=La._exportedPlot}Aa.staticPlot&&(Aa.editable=!1,Aa.edits={},Aa.autosizable=!1,Aa.scrollZoom=!1,Aa.doubleClick=!1,Aa.showTips=!1,Aa.showLink=
!1,Aa.displayModeBar=!1);"hover"!==Aa.displayModeBar||ba||(Aa.displayModeBar=!0);if("transparent"===Aa.setBackground||"function"!==typeof Aa.setBackground)Aa.setBackground=n;Aa._hasZeroHeight=Aa._hasZeroHeight||0===Ma.clientHeight;Aa._hasZeroWidth=Aa._hasZeroWidth||0===Ma.clientWidth;ya=Aa.scrollZoom;Ma=Aa._scrollZoom={};if(!0===ya)Ma.cartesian=1,Ma.gl3d=1,Ma.geo=1,Ma.mapbox=1;else if("string"===typeof ya)for(La=ya.split("+"),ya=0;ya<La.length;ya++)Ma[La[ya]]=1;else!1!==ya&&(Ma.gl3d=1,Ma.geo=1,Ma.mapbox=
1)}function a(Ma,La){La+=1;var ya=[],Aa;for(Aa=0;Aa<Ma.length;Aa++){var Ka=Ma[Aa];0>Ka?ya.push(La+Ka):ya.push(Ka)}return ya}function g(Ma,La,ya){var Aa;for(Aa=0;Aa<La.length;Aa++){var Ka=La[Aa];if(Ka!==parseInt(Ka,10))throw Error("all values in "+ya+" must be integers");if(Ka>=Ma.data.length||Ka<-Ma.data.length)throw Error(ya+" must be valid indices for gd.data.");if(-1<La.indexOf(Ka,Aa+1)||0<=Ka&&-1<La.indexOf(-Ma.data.length+Ka)||0>Ka&&-1<La.indexOf(Ma.data.length+Ka))throw Error("each index in "+
ya+" must be unique.");}}function h(Ma,La,ya){if(!Array.isArray(Ma.data))throw Error("gd.data must be an array.");if("undefined"===typeof La)throw Error("currentIndices is a required argument.");Array.isArray(La)||(La=[La]);g(Ma,La,"currentIndices");"undefined"===typeof ya||Array.isArray(ya)||(ya=[ya]);"undefined"!==typeof ya&&g(Ma,ya,"newIndices");if("undefined"!==typeof ya&&La.length!==ya.length)throw Error("current and new indices must be of equal length.");}function r(Ma,La,ya){if(!Array.isArray(Ma.data))throw Error("gd.data must be an array.");
if("undefined"===typeof La)throw Error("traces must be defined.");Array.isArray(La)||(La=[La]);for(Ma=0;Ma<La.length;Ma++){var Aa=La[Ma];if("object"!==typeof Aa||Array.isArray(Aa)||null===Aa)throw Error("all values in traces array must be non-array objects");}"undefined"===typeof ya||Array.isArray(ya)||(ya=[ya]);if("undefined"!==typeof ya&&ya.length!==La.length)throw Error("if indices is specified, traces.length must equal indices.length");}function l(Ma,La,ya,Aa,Ka){var Ta=ja.isPlainObject(Aa);if(!Array.isArray(Ma.data))throw Error("gd.data must be an array");
if(!ja.isPlainObject(La))throw Error("update must be a key:value object");if("undefined"===typeof ya)throw Error("indices must be an integer or array of integers");g(Ma,ya,"indices");for(var bb in La){if(!Array.isArray(La[bb])||La[bb].length!==ya.length)throw Error("attribute "+bb+" must be an array of length equal to indices array length");if(Ta&&!(bb in Aa&&Array.isArray(Aa[bb])&&Aa[bb].length===La[bb].length))throw Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object");
}Ta=ya;bb=ja.isPlainObject(Aa);ya=[];Array.isArray(Ta)||(Ta=[Ta]);Ta=a(Ta,Ma.data.length-1);for(var cb in La)for(var Eb=0;Eb<Ta.length;Eb++){var Pb=Ma.data[Ta[Eb]];var fc=ma(Pb,cb);Pb=fc.get();var pb=La[cb][Eb];if(!ja.isArrayOrTypedArray(pb))throw Error("attribute: "+cb+" index: "+Eb+" must be an array");if(!ja.isArrayOrTypedArray(Pb))throw Error("cannot extend missing or non-array attribute: "+cb);if(Pb.constructor!==pb.constructor)throw Error("cannot extend array with an array of a different type: "+
cb);var Db=bb?Aa[cb][Eb]:Aa;Y(Db)||(Db=-1);ya.push({prop:fc,target:Pb,insert:pb,maxp:Math.floor(Db)})}Ma={};La={};for(Aa=0;Aa<ya.length;Aa++)cb=ya[Aa].prop,Ta=Ka(ya[Aa].target,ya[Aa].insert,ya[Aa].maxp),cb.set(Ta[0]),Array.isArray(Ma[cb.astr])||(Ma[cb.astr]=[]),Ma[cb.astr].push(Ta[1]),Array.isArray(La[cb.astr])||(La[cb.astr]=[]),La[cb.astr].push(ya[Aa].target.length);return{update:Ma,maxPoints:La}}function c(Ma,La){var ya=new Ma.constructor(Ma.length+La.length);ya.set(Ma);ya.set(La,Ma.length);return ya}
function d(Ma,La,ya,Aa){Ma=ja.getGraphDiv(Ma);var Ka=l(Ma,La,ya,Aa,function(bb,cb,Eb){if(ja.isTypedArray(bb))if(0>Eb){var Pb=new bb.constructor(0);bb=c(bb,cb);if(0>Eb)var fc=bb;else fc=Pb,Pb=bb}else if(fc=new bb.constructor(Eb),Pb=new bb.constructor(bb.length+cb.length-Eb),Eb===cb.length)fc.set(cb),Pb.set(bb);else if(Eb<cb.length)Eb=cb.length-Eb,fc.set(cb.subarray(Eb)),Pb.set(bb),Pb.set(cb.subarray(0,Eb),bb.length);else{Eb-=cb.length;var pb=bb.length-Eb;fc.set(bb.subarray(pb));fc.set(cb,Eb);Pb.set(bb.subarray(0,
pb))}else fc=bb.concat(cb),Pb=0<=Eb&&Eb<fc.length?fc.splice(0,fc.length-Eb):[];return[fc,Pb]}),Ta=G.redraw(Ma);oa.add(Ma,G.prependTraces,[Ma,Ka.update,ya,Ka.maxPoints],d,arguments);return Ta}function e(Ma,La,ya,Aa){Ma=ja.getGraphDiv(Ma);var Ka=l(Ma,La,ya,Aa,function(bb,cb,Eb){if(ja.isTypedArray(bb))if(0>=Eb){var Pb=new bb.constructor(0);bb=c(cb,bb);if(0>Eb)var fc=bb;else fc=Pb,Pb=bb}else fc=new bb.constructor(Eb),Pb=new bb.constructor(bb.length+cb.length-Eb),Eb===cb.length?(fc.set(cb),Pb.set(bb)):
Eb<cb.length?(Eb=cb.length-Eb,fc.set(cb.subarray(0,Eb)),Pb.set(cb.subarray(Eb)),Pb.set(bb,Eb)):(Eb-=cb.length,fc.set(cb),fc.set(bb.subarray(0,Eb),cb.length),Pb.set(bb.subarray(Eb)));else fc=cb.concat(bb),Pb=0<=Eb&&Eb<fc.length?fc.splice(Eb,fc.length):[];return[fc,Pb]}),Ta=G.redraw(Ma);oa.add(Ma,G.extendTraces,[Ma,Ka.update,ya,Ka.maxPoints],e,arguments);return Ta}function f(Ma,La,ya){Ma=ja.getGraphDiv(Ma);var Aa=[],Ka=G.deleteTraces,Ta=[Ma,Aa],bb=[Ma,La],cb;r(Ma,La,ya);Array.isArray(La)||(La=[La]);
La=La.map(function(Eb){return ja.extendFlat({},Eb)});gb.cleanData(La);for(cb=0;cb<La.length;cb++)Ma.data.push(La[cb]);for(cb=0;cb<La.length;cb++)Aa.push(-La.length+cb);if("undefined"===typeof ya)return La=G.redraw(Ma),oa.add(Ma,Ka,Ta,f,bb),La;Array.isArray(ya)||(ya=[ya]);try{h(Ma,Aa,ya)}catch(Eb){throw Ma.data.splice(Ma.data.length-La.length,La.length),Eb;}oa.startSequence(Ma);oa.add(Ma,Ka,Ta,f,bb);La=G.moveTraces(Ma,Aa,ya);oa.stopSequence(Ma);return La}function q(Ma,La){Ma=ja.getGraphDiv(Ma);var ya=
[],Aa=G.addTraces,Ka=[Ma,ya,La],Ta=[Ma,La],bb;if("undefined"===typeof La)throw Error("indices must be an integer or array of integers.");Array.isArray(La)||(La=[La]);g(Ma,La,"indices");La=a(La,Ma.data.length-1);La.sort(ja.sorterDes);for(bb=0;bb<La.length;bb+=1){var cb=Ma.data.splice(La[bb],1)[0];ya.push(cb)}La=G.redraw(Ma);oa.add(Ma,Aa,Ka,q,Ta);return La}function t(Ma,La,ya){Ma=ja.getGraphDiv(Ma);var Aa=[],Ka=[],Ta=[Ma,ya,La],bb=[Ma,La,ya],cb;h(Ma,La,ya);La=Array.isArray(La)?La:[La];if("undefined"===
typeof ya)for(ya=[],cb=0;cb<La.length;cb++)ya.push(-La.length+cb);ya=Array.isArray(ya)?ya:[ya];La=a(La,Ma.data.length-1);ya=a(ya,Ma.data.length-1);for(cb=0;cb<Ma.data.length;cb++)-1===La.indexOf(cb)&&Aa.push(Ma.data[cb]);for(cb=0;cb<La.length;cb++)Ka.push({newIndex:ya[cb],trace:Ma.data[La[cb]]});Ka.sort(function(Eb,Pb){return Eb.newIndex-Pb.newIndex});for(cb=0;cb<Ka.length;cb+=1)Aa.splice(Ka[cb].newIndex,0,Ka[cb].trace);Ma.data=Aa;La=G.redraw(Ma);oa.add(Ma,t,Ta,t,bb);return La}function w(Ma,La,ya,
Aa){Ma=ja.getGraphDiv(Ma);gb.clearPromiseQueue(Ma);var Ka={};if("string"===typeof La)Ka[La]=ya;else if(ja.isPlainObject(La))Ka=ja.extendFlat({},La),void 0===Aa&&(Aa=ya);else return ja.warn("Restyle fail.",La,ya,Aa),Promise.reject();Object.keys(Ka).length&&(Ma.changed=!0);La=gb.coerceTraceIndices(Ma,Aa);var Ta=A(Ma,Ka,La);Ka=Ta.flags;Ka.calc&&(Ma.calcdata=void 0);Ka.clearAxisTypes&&gb.clearAxisTypes(Ma,La,{});La=[];Ka.fullReplot?La.push(G._doPlot):(La.push(la.previousPromises),la.supplyDefaults(Ma),
Ka.markerSize&&(la.doCalcdata(Ma),y(La)),Ka.style&&La.push(sb.doTraceStyle),Ka.colorbars&&La.push(sb.doColorBars),La.push(p));La.push(la.rehover,la.redrag);oa.add(Ma,w,[Ma,Ta.undoit,Ta.traces],w,[Ma,Ta.redoit,Ta.traces]);(Ka=ja.syncOrAsync(La,Ma))&&Ka.then||(Ka=Promise.resolve());return Ka.then(function(){Ma.emit("plotly_restyle",Ta.eventData);return Ma})}function x(Ma){return void 0===Ma?null:Ma}function z(Ma,La){return La?function(ya,Aa,Ka){var Ta=ma(ya,Aa),bb=Ta.set;Ta.set=function(cb){B((Ka||
"")+Aa,Ta.get(),cb,Ma);bb(cb)};return Ta}:ma}function B(Ma,La,ya,Aa){if(Array.isArray(La)||Array.isArray(ya)){var Ka=Array.isArray(La)?La:[];ya=Array.isArray(ya)?ya:[];La=Math.max(Ka.length,ya.length);for(var Ta=0;Ta<La;Ta++)B(Ma+"["+Ta+"]",Ka[Ta],ya[Ta],Aa)}else if(ja.isPlainObject(La)||ja.isPlainObject(ya))for(Ka in La=ja.isPlainObject(La)?La:{},ya=ja.isPlainObject(ya)?ya:{},Ta=ja.extendFlat({},La,ya),Ta)B(Ma+"."+Ka,La[Ka],ya[Ka],Aa);else void 0===Aa[Ma]&&(Aa[Ma]=x(La))}function A(Ma,La,ya){function Aa(){return ya.map(function(){})}
function Ka(Ub){Ub=ka.id2name(Ub);-1===Wb.indexOf(Ub)&&Wb.push(Ub)}function Ta(Ub){return"LAYOUT"+Ub+".autorange"}function bb(Ub){return"LAYOUT"+Ub+".range"}function cb(Ub){for(var yb=Ub;yb<Db.length;yb++)if(Db[yb]._input===Rb[Ub])return Db[yb]}function Eb(Ub,yb,ac){if(Array.isArray(Ub))Ub.forEach(function(tc){Eb(tc,yb,ac)});else if(!(Ub in La||gb.hasParent(La,Ub))){if("LAYOUT"===Ub.substr(0,6))var Vb=Ic(Ma.layout,Ub.replace("LAYOUT",""));else{Vb=ya[ac];var mc=pb._tracePreGUI[cb(Vb)._fullInput.uid];
Vb=z(mc,xc)(Rb[Vb],Ub)}Ub in Gb||(Gb[Ub]=Aa());void 0===Gb[Ub][ac]&&(Gb[Ub][ac]=x(Vb.get()));void 0!==yb&&Vb.set(yb)}}function Pb(Ub){return function(yb){return Db[yb][Ub]}}function fc(Ub){return function(yb,ac){return!1===yb?Db[ya[ac]][Ub]:null}}var pb=Ma._fullLayout,Db=Ma._fullData,Rb=Ma.data,xc=pb._guiEditing,Ic=z(pb._preGUI,xc),Ja=ja.extendDeepAll({},La),Pa;D(La);var db=jb.traceFlags(),Jb={},Gb={};for(fd in La){if(gb.hasParent(La,fd))throw Error("cannot set "+fd+" and a parent attribute simultaneously");
var cc=La[fd],uc;if("autobinx"===fd||"autobiny"===fd){var fd=fd.charAt(fd.length-1)+"bins";cc=Array.isArray(cc)?cc.map(fc(fd)):!1===cc?ya.map(Pb(fd)):null}Jb[fd]=cc;if("LAYOUT"===fd.substr(0,6)){var kb=Ic(Ma.layout,fd.replace("LAYOUT",""));Gb[fd]=[x(kb.get())];kb.set(Array.isArray(cc)?cc[0]:cc);db.calc=!0}else{Gb[fd]=Aa();for(Pa=0;Pa<ya.length;Pa++){var Qb=Rb[ya[Pa]];var dc=cb(ya[Pa]);kb=z(pb._tracePreGUI[dc._fullInput.uid],xc)(Qb,fd);var Ec=kb.get();var Qc=Array.isArray(cc)?cc[Pa%cc.length]:cc;if(void 0!==
Qc){var Tc=kb.parts[kb.parts.length-1],tb=(uc=fd.substr(0,fd.length-Tc.length-1))?uc+".":"",Ib=uc?ma(dc,uc).get():dc;if((uc=ra.getTraceValObject(dc,kb.parts))&&uc.impliedEdits&&null!==Qc)for(var sc in uc.impliedEdits)Eb(ja.relativeAttr(fd,sc),uc.impliedEdits[sc],Pa);else if("thicknessmode"!==Tc&&"lenmode"!==Tc||Ec===Qc||"fraction"!==Qc&&"pixels"!==Qc||!Ib)"type"!==fd||"pie"===Qc===("pie"===Ec)&&"funnelarea"===Qc===("funnelarea"===Ec)||(tb="x",Ib="y","bar"!==Qc&&"bar"!==Ec||"h"!==Qb.orientation||(tb=
"y",Ib="x"),ja.swapAttrs(Qb,["?","?src"],"labels",tb),ja.swapAttrs(Qb,["d?","?0"],"label",tb),ja.swapAttrs(Qb,["?","?src"],"values",Ib),"pie"===Ec||"funnelarea"===Ec?(ma(Qb,"marker.color").set(ma(Qb,"marker.colors").get()),pb._pielayer.selectAll("g.trace").remove()):xa.traceIs(Qb,"cartesian")&&ma(Qb,"marker.colors").set(ma(Qb,"marker.color").get()));else{var pc=pb._size,zc=Ib.orient;zc="top"===zc||"bottom"===zc;"thicknessmode"===Tc?(Tc=zc?pc.h:pc.w,Eb(tb+"thickness",Ib.thickness*("fraction"===Qc?
1/Tc:Tc),Pa)):(Tc=zc?pc.w:pc.h,Eb(tb+"len",Ib.len*("fraction"===Qc?1/Tc:Tc),Pa))}Gb[fd][Pa]=x(Ec);if(-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(fd)){if("orientation"===fd){if(kb.set(Qc),Ec=Qb.x&&!Qb.y?"h":"v",(kb.get()||Ec)===dc.orientation)continue}else"orientationaxes"===fd&&(Qb.orientation={v:"h",h:"v"}[dc.orientation]);gb.swapXYData(Qb);db.calc=db.clearAxisTypes=!0}else-1!==la.dataArrayContainers.indexOf(kb.parts[0])?(gb.manageArrayContainers(kb,Qc,Gb),db.calc=!0):(uc?
uc.arrayOk&&!xa.traceIs(dc,"regl")&&(ja.isArrayOrTypedArray(Qc)||ja.isArrayOrTypedArray(Ec))?db.calc=!0:jb.update(db,uc):db.calc=!0,kb.set(Qc))}}-1!==["swapxyaxes","orientationaxes"].indexOf(fd)&&ka.swap(Ma,ya);"orientationaxes"===fd&&(Pa=ma(Ma.layout,"hovermode"),cc=Pa.get(),"x"===cc?Pa.set("y"):"y"===cc?Pa.set("x"):"x unified"===cc?Pa.set("y unified"):"y unified"===cc&&Pa.set("x unified"));if(-1!==["orientation","type"].indexOf(fd)){var Wb=[];for(Pa=0;Pa<ya.length;Pa++)cc=Rb[ya[Pa]],xa.traceIs(cc,
"cartesian")&&(Ka(cc.xaxis||"x"),Ka(cc.yaxis||"y"));Eb(Wb.map(Ta),!0,0);Eb(Wb.map(bb),[0,1],0)}}}if(db.calc||db.plot)db.fullReplot=!0;return{flags:db,undoit:Gb,redoit:Jb,traces:ya,eventData:ja.extendDeepNoArrays([],[Ja,ya])}}function D(Ma){function La(Eb,Pb){Ma[Pb]=Ma[Eb];delete Ma[Eb]}var ya=ja.counterRegex("axis",".title",!1,!1),Aa=/colorbar\.title$/,Ka=Object.keys(Ma),Ta;for(Ta=0;Ta<Ka.length;Ta++){var bb=Ka[Ta];var cb=Ma[bb];"title"!==bb&&!ya.test(bb)&&!Aa.test(bb)||"string"!==typeof cb&&"number"!==
typeof cb?-1<bb.indexOf("titlefont")?La(bb,bb.replace("titlefont","title.font")):-1<bb.indexOf("titleposition")?La(bb,bb.replace("titleposition","title.position")):-1<bb.indexOf("titleside")?La(bb,bb.replace("titleside","title.side")):-1<bb.indexOf("titleoffset")&&La(bb,bb.replace("titleoffset","title.offset")):La(bb,bb.replace("title","title.text"))}}function C(Ma,La,ya){Ma=ja.getGraphDiv(Ma);gb.clearPromiseQueue(Ma);var Aa={};if("string"===typeof La)Aa[La]=ya;else if(ja.isPlainObject(La))Aa=ja.extendFlat({},
La);else return ja.warn("Relayout fail.",La,ya),Promise.reject();Object.keys(Aa).length&&(Ma.changed=!0);var Ka=F(Ma,Aa);La=Ka.flags;La.calc&&(Ma.calcdata=void 0);ya=[la.previousPromises];La.layoutReplot?ya.push(sb.layoutReplot):Object.keys(Aa).length&&(v(Ma,La,Ka)||la.supplyDefaults(Ma),La.legend&&ya.push(sb.doLegend),La.layoutstyle&&ya.push(sb.layoutStyles),La.axrange&&y(ya,Ka.rangesAltered),La.ticks&&ya.push(sb.doTicksRelayout),La.modebar&&ya.push(sb.doModeBar),La.camera&&ya.push(sb.doCamera),
La.colorbars&&ya.push(sb.doColorBars),ya.push(p));ya.push(la.rehover,la.redrag);oa.add(Ma,C,[Ma,Ka.undoit],C,[Ma,Ka.redoit]);(Aa=ja.syncOrAsync(ya,Ma))&&Aa.then||(Aa=Promise.resolve(Ma));return Aa.then(function(){Ma.emit("plotly_relayout",Ka.eventData);return Ma})}function v(Ma,La,ya){var Aa=Ma._fullLayout;if(!La.axrange)return!1;for(var Ka in La)if("axrange"!==Ka&&La[Ka])return!1;for(var Ta in ya.rangesAltered)if(ya=ka.id2name(Ta),La=Ma.layout[ya],ya=Aa[ya],ya.autorange=La.autorange,La.range&&(ya.range=
La.range.slice()),ya.cleanRange(),ya._matchGroup)for(var bb in ya._matchGroup)bb!==Ta&&(La=Aa[ka.id2name(bb)],La.autorange=ya.autorange,La.range=ya.range.slice(),La._input.range=ya.range.slice());return!0}function y(Ma,La){Ma.push(Ia,sb.doAutoRangeAndConstraints,La?function(ya){var Aa=[],Ka=!0,Ta;for(Ta in La){var bb=ka.getFromId(ya,Ta);Aa.push(Ta);-1!==(bb.ticklabelposition||"").indexOf("inside")&&bb._anchorAxis&&Aa.push(bb._anchorAxis._id);if(bb._matchGroup)for(var cb in bb._matchGroup)La[cb]||
Aa.push(cb);bb.automargin&&(Ka=!1)}return ka.draw(ya,Aa,{skipTitle:Ka})}:function(ya){return ka.draw(ya,"redraw")},sb.drawData,sb.finalDraw)}function F(Ma,La){function ya(Tc,tb){if(Array.isArray(Tc))Tc.forEach(function(sc){ya(sc,tb)});else if(!(Tc in La||gb.hasParent(La,Tc))){var Ib=bb(Ka,Tc);Tc in xc||(xc[Tc]=x(Ib.get()));void 0!==tb&&Ib.set(tb)}}function Aa(Tc){Tc=ka.name2id(Tc.split(".")[0]);Ic[Tc]=1;return Tc}var Ka=Ma.layout,Ta=Ma._fullLayout,bb=z(Ta._preGUI,Ta._guiEditing),cb=Object.keys(La),
Eb=ka.list(Ma),Pb=ja.extendDeepAll({},La),fc={},pb,Db;D(La);cb=Object.keys(La);for(pb=0;pb<cb.length;pb++)if(0===cb[pb].indexOf("allaxes")){for(Db=0;Db<Eb.length;Db++){var Rb=Eb[Db]._id.substr(1);Rb=-1!==Rb.indexOf("scene")?Rb+".":"";Rb=cb[pb].replace("allaxes",Rb+Eb[Db]._name);La[Rb]||(La[Rb]=La[cb[pb]])}delete La[cb[pb]]}cb=jb.layoutFlags();Eb={};var xc={},Ic={},Ja;for(Ja in La){if(gb.hasParent(La,Ja))throw Error("cannot set "+Ja+" and a parent attribute simultaneously");pb=bb(Ka,Ja);Db=La[Ja];
for(Rb=pb.parts.length-1;0<Rb&&"string"!==typeof pb.parts[Rb];)Rb--;var Pa=pb.parts[Rb],db=pb.parts[Rb-1]+"."+Pa,Jb=pb.parts.slice(0,Rb).join("."),Gb=ma(Ma.layout,Jb).get(),cc=ma(Ta,Jb).get(),uc=pb.get();if(void 0!==Db){Eb[Ja]=Db;xc[Ja]="reverse"===Pa?Db:x(uc);if((Rb=ra.getLayoutValObject(Ta,pb.parts))&&Rb.impliedEdits&&null!==Db)for(var fd in Rb.impliedEdits)ya(ja.relativeAttr(Ja,fd),Rb.impliedEdits[fd]);-1!==["width","height"].indexOf(Ja)?Db?(ya("autosize",null),db="height"===Ja?"width":"height",
ya(db,Ta[db])):Ta[Ja]=Ma._initialAutoSize[Ja]:"autosize"===Ja?(ya("width",Db?null:Ta.width),ya("height",Db?null:Ta.height)):db.match(Bb)?(Aa(db),ma(Ta,Jb+"._inputRange").set(null)):db.match(ub)?(Aa(db),ma(Ta,Jb+"._inputRange").set(null),db=ma(Ta,Jb).get(),db._inputDomain&&(db._input.domain=db._inputDomain.slice())):db.match(wb)&&ma(Ta,Jb+"._inputDomain").set(null);if("type"===Pa){var kb=Gb;db="linear"===cc.type&&"log"===Db;var Qb="log"===cc.type&&"linear"===Db;db||Qb?(kb&&kb.range?cc.autorange?db&&
(kb.range=kb.range[1]>kb.range[0]?[1,2]:[2,1]):(Qb=kb.range[0],kb=kb.range[1],db?(0>=Qb&&0>=kb&&ya(Jb+".autorange",!0),0>=Qb?Qb=kb/1E6:0>=kb&&(kb=Qb/1E6),ya(Jb+".range[0]",Math.log(Qb)/Math.LN10),ya(Jb+".range[1]",Math.log(kb)/Math.LN10)):(ya(Jb+".range[0]",Math.pow(10,Qb)),ya(Jb+".range[1]",Math.pow(10,kb)))):ya(Jb+".autorange",!0),Array.isArray(Ta._subplots.polar)&&Ta._subplots.polar.length&&Ta[pb.parts[0]]&&"radialaxis"===pb.parts[1]&&delete Ta[pb.parts[0]]._subplot.viewInitial["radialaxis.range"],
xa.getComponentMethod("annotations","convertCoords")(Ma,cc,Db,ya),xa.getComponentMethod("images","convertCoords")(Ma,cc,Db,ya)):(ya(Jb+".autorange",!0),ya(Jb+".range",null));ma(Ta,Jb+"._inputRange").set(null)}else Pa.match(vb)&&(db=ma(Ta,Ja).get(),(kb=(Db||{}).type)&&"-"!==kb||(kb="linear"),xa.getComponentMethod("annotations","convertCoords")(Ma,db,kb,ya),xa.getComponentMethod("images","convertCoords")(Ma,db,kb,ya));if(db=$a.containerArrayMatch(Ja)){var dc=db.array;pb=db.index;Pa=db.property;Rb=Rb||
{editType:"calc"};""!==pb&&""===Pa&&($a.isAddVal(Db)?xc[Ja]=null:$a.isRemoveVal(Db)?xc[Ja]=(ma(Ka,dc).get()||[])[pb]:ja.warn("unrecognized full object value",La));jb.update(cb,Rb);fc[dc]||(fc[dc]={});(Rb=fc[dc][pb])||(Rb=fc[dc][pb]={});Rb[Pa]=Db;delete La[Ja]}else"reverse"===Pa?(Gb.range?Gb.range.reverse():(ya(Jb+".autorange",!0),Gb.range=[1,0]),cc.autorange?cb.calc=!0:cb.plot=!0):(Ta._has("scatter-like")&&Ta._has("regl")&&"dragmode"===Ja&&("lasso"===Db||"select"===Db)&&"lasso"!==uc&&"select"!==uc?
cb.plot=!0:Ta._has("gl2d")?cb.plot=!0:Rb?jb.update(cb,Rb):cb.calc=!0,pb.set(Db))}}for(dc in fc)$a.applyContainerArrayChanges(Ma,bb(Ka,dc),fc[dc],cb,bb)||(cb.plot=!0);for(var Ec in Ic)if(Ta=(kb=ka.getFromId(Ma,Ec))&&kb._constraintGroup){cb.calc=!0;for(var Qc in Ta)Ic[Qc]||(ka.getFromId(Ma,Qc)._constraintShrinkable=!0)}if(J(Ma)||La.height||La.width)cb.plot=!0;if(cb.plot||cb.calc)cb.layoutReplot=!0;return{flags:cb,rangesAltered:Ic,undoit:xc,redoit:Eb,eventData:Pb}}function J(Ma){var La=Ma._fullLayout,
ya=La.width,Aa=La.height;Ma.layout.autosize&&la.plotAutoSize(Ma,Ma.layout,La);return La.width!==ya||La.height!==Aa}function K(Ma,La,ya,Aa){Ma=ja.getGraphDiv(Ma);gb.clearPromiseQueue(Ma);ja.isPlainObject(La)||(La={});ja.isPlainObject(ya)||(ya={});Object.keys(La).length&&(Ma.changed=!0);Object.keys(ya).length&&(Ma.changed=!0);Aa=gb.coerceTraceIndices(Ma,Aa);var Ka=A(Ma,ja.extendFlat({},La),Aa);La=Ka.flags;var Ta=F(Ma,ja.extendFlat({},ya)),bb=Ta.flags;if(La.calc||bb.calc)Ma.calcdata=void 0;La.clearAxisTypes&&
gb.clearAxisTypes(Ma,Aa,ya);ya=[];bb.layoutReplot?ya.push(sb.layoutReplot):La.fullReplot?ya.push(G._doPlot):(ya.push(la.previousPromises),v(Ma,bb,Ta)||la.supplyDefaults(Ma),La.style&&ya.push(sb.doTraceStyle),(La.colorbars||bb.colorbars)&&ya.push(sb.doColorBars),bb.legend&&ya.push(sb.doLegend),bb.layoutstyle&&ya.push(sb.layoutStyles),bb.axrange&&y(ya,Ta.rangesAltered),bb.ticks&&ya.push(sb.doTicksRelayout),bb.modebar&&ya.push(sb.doModeBar),bb.camera&&ya.push(sb.doCamera),ya.push(p));ya.push(la.rehover,
la.redrag);oa.add(Ma,K,[Ma,Ka.undoit,Ta.undoit,Ka.traces],K,[Ma,Ka.redoit,Ta.redoit,Ka.traces]);(ya=ja.syncOrAsync(ya,Ma))&&ya.then||(ya=Promise.resolve(Ma));return ya.then(function(){Ma.emit("plotly_update",{data:Ka.eventData,layout:Ta.eventData});return Ma})}function O(Ma){return function(La){La._fullLayout._guiEditing=!0;var ya=Ma.apply(null,arguments);La._fullLayout._guiEditing=!1;return ya}}function I(Ma,La){for(var ya=0;ya<La.length;ya++){var Aa=La[ya],Ka=Ma.match(Aa.pattern);if(Ka)return{head:Ka[1],
attr:Aa.attr}}}function L(Ma,La){var ya=ma(La,Ma).get();if(void 0!==ya)return ya;Ma=Ma.split(".");for(Ma.pop();1<Ma.length;)if(Ma.pop(),ya=ma(La,Ma.join(".")+".uirevision").get(),void 0!==ya)return ya;return La.uirevision}function H(Ma,La){var ya=ja.isPlainObject(Ma),Aa=Array.isArray(Ma);return ya||Aa?(ya&&ja.isPlainObject(La)||Aa&&Array.isArray(La))&&JSON.stringify(Ma)===JSON.stringify(La):Ma===La}function M(Ma,La,ya,Aa){var Ka=Aa._preGUI,Ta,bb,cb,Eb=[],Pb={};for(Ta in Ka){if(bb=I(Ta,rb)){if(bb=
bb.attr||bb.head+".uirevision",(bb=(cb=ma(Aa,bb).get())&&L(bb,La))&&bb===cb){cb=Ka[Ta];null===cb&&(cb=void 0);bb=ma(La,Ta);var fc=bb.get();if(H(fc,cb)){void 0===fc&&"autorange"===Ta.substr(Ta.length-9)&&Eb.push(Ta.substr(0,Ta.length-10));bb.set(x(ma(Aa,Ta).get()));continue}}}else ja.warn("unrecognized GUI edit: "+Ta);delete Ka[Ta];"range["===Ta.substr(Ta.length-8,6)&&(Pb[Ta.substr(0,Ta.length-9)]=1)}for(Ka=0;Ka<Eb.length;Ka++)cb=Eb[Ka],Pb[cb]&&(cb=ma(La,cb).get())&&delete cb.autorange;Eb=Aa._tracePreGUI;
for(var pb in Eb)for(Ta in Pb=Eb[pb],Ka=null,Pb){if(!Ka){a:{for(Ka=0;Ka<ya.length;Ka++)if(ya[Ka]._fullInput.uid===pb)break a;Ka=-1}if(0>Ka){delete Eb[pb];break}var Db=ya[Ka]._fullInput;a:{Ka=Db.index;for(cb=0;cb<Ma.length;cb++)if(Ma[cb].uid===pb){Ka=cb;break a}Ka=!Ma[Ka]||Ma[Ka].uid?-1:Ka}if(0>Ka){delete Eb[pb];break}Ka=Ma[Ka]}if(bb=I(Ta,Ab)){if(bb.attr?bb=(cb=ma(Aa,bb.attr).get())&&L(bb.attr,La):(cb=Db.uirevision,bb=Ka.uirevision,void 0===bb&&(bb=La.uirevision)),bb&&bb===cb&&(cb=Pb[Ta],null===cb&&
(cb=void 0),bb=ma(Ka,Ta),fc=bb.get(),H(fc,cb))){bb.set(x(ma(Db,Ta).get()));continue}}else ja.warn("unrecognized GUI edit: "+Ta+" in trace uid "+pb);delete Pb[Ta]}}function Q(Ma,La,ya,Aa,Ka,Ta){var bb=La.length===ya.length;if(!Ka&&!bb)return{fullReplot:!0,calc:!0};var cb=jb.traceFlags();cb.arrays={};cb.nChanges=0;cb.nChangesAnim=0;Aa={getValObject:function(Pb){Pb=ra.getTraceValObject(Eb,Pb);!Eb._module.animatable&&Pb.anim&&(Pb.anim=!1);return Pb},flags:cb,immutable:Aa,transition:Ka,newDataRevision:Ta,
gd:Ma};Ta={};for(Ma=0;Ma<La.length;Ma++)if(ya[Ma]){var Eb=ya[Ma]._fullInput;la.hasMakesDataTransform(Eb)&&(Eb=ya[Ma]);Ta[Eb.uid]||(Ta[Eb.uid]=1,ca(La[Ma]._fullInput,Eb,[],Aa))}if(cb.calc||cb.plot)cb.fullReplot=!0;Ka&&cb.nChanges&&cb.nChangesAnim&&(cb.anim=cb.nChanges===cb.nChangesAnim&&bb?"all":"some");return cb}function Z(Ma,La,ya,Aa,Ka){var Ta=jb.layoutFlags();Ta.arrays={};Ta.rangesAltered={};Ta.nChanges=0;Ta.nChangesAnim=0;ca(La,ya,[],{getValObject:function(bb){return ra.getLayoutValObject(ya,
bb)},flags:Ta,immutable:Aa,transition:Ka,gd:Ma});if(Ta.plot||Ta.calc)Ta.layoutReplot=!0;Ka&&Ta.nChanges&&Ta.nChangesAnim&&(Ta.anim=Ta.nChanges===Ta.nChangesAnim?"all":"some");return Ta}function ca(Ma,La,ya,Aa){function Ka(){var uc=Ta.editType;if(fc&&-1!==uc.indexOf("arraydraw"))ja.pushUnique(Eb.arrays[fc],pb);else{jb.update(Eb,Ta);"none"!==uc&&Eb.nChanges++;Aa.transition&&Ta.anim&&Eb.nChangesAnim++;if(Bb.test(Ic)||ub.test(Ic))Eb.rangesAltered[ya[0]]=1;wb.test(Ic)&&ma(La,"_inputDomain").set(null);
"datarevision"===bb&&(Eb.newDataRevision=1)}}var Ta,bb,cb=Aa.getValObject,Eb=Aa.flags,Pb=Aa.immutable,fc=Aa.inArray,pb=Aa.arrayIndex;for(bb in Ma){if(Eb.calc&&!Aa.transition)return;var Db=Ma[bb],Rb=La[bb],xc=ya.concat(bb);var Ic=xc.join(".");if("_"!==bb.charAt(0)&&"function"!==typeof Db&&Db!==Rb){if(("tick0"===bb||"dtick"===bb)&&"geo"!==ya[0]){var Ja=La.tickmode;if("auto"===Ja||"array"===Ja||!Ja)continue}if(!("range"===bb&&La.autorange||("zmin"===bb||"zmax"===bb)&&"contourcarpet"===La.type||!(Ta=
cb(xc))||Ta._compareAsJSON&&JSON.stringify(Db)===JSON.stringify(Rb))){Ja=Ta.valType;var Pa="data_array"===Ta.valType||Ta.arrayOk,db=Array.isArray(Db),Jb=Array.isArray(Rb);if(db&&Jb){var Gb="_input_"+bb,cc=Ma[Gb];Gb=La[Gb];if(Array.isArray(cc)&&cc===Gb)continue}if(void 0===Rb)Pa&&db?Eb.calc=!0:Ka();else if(Ta._isLinkedToArray){Pa=[];db=!1;fc||(Eb.arrays[bb]=Pa);Jb=Math.min(Db.length,Rb.length);cc=Math.max(Db.length,Rb.length);if(Jb!==cc)if("arraydraw"===Ta.editType)db=!0;else{Ka();continue}for(Ja=
0;Ja<Jb;Ja++)ca(Db[Ja],Rb[Ja],xc.concat(Ja),ja.extendFlat({inArray:bb,arrayIndex:Ja},Aa));if(db)for(Ja=Jb;Ja<cc;Ja++)Pa.push(Ja)}else!Ja&&ja.isPlainObject(Db)?ca(Db,Rb,xc,Aa):Pa?db&&Jb?(Pb&&(Eb.calc=!0),(Pb||Aa.newDataRevision)&&Ka()):db!==Jb?Eb.calc=!0:Ka():db&&Jb?(Db.length!==Rb.length||String(Db)!==String(Rb))&&Ka():Ka()}}}for(bb in La)if(!(bb in Ma||"_"===bb.charAt(0)||"function"===typeof La[bb]))if(Ta=cb(ya.concat(bb)),("data_array"===Ta.valType||Ta.arrayOk)&&Array.isArray(La[bb])){Eb.calc=!0;
break}else Ka()}function W(Ma,La){for(var ya in Ma)if("_"!==ya.charAt(0)){var Aa=Ma[ya],Ka=La[ya];if(Aa!==Ka)if(ja.isPlainObject(Aa)&&ja.isPlainObject(Ka)){if(W(Aa,Ka))return!0}else if(Array.isArray(Aa)&&Array.isArray(Ka)){if(Aa.length!==Ka.length)return!0;for(var Ta=0;Ta<Aa.length;Ta++)if(Aa[Ta]!==Ka[Ta])if(ja.isPlainObject(Aa[Ta])&&ja.isPlainObject(Ka[Ta])){if(W(Aa[Ta],Ka[Ta]))return!0}else return!0}else return!0}}function T(Ma){var La=Ma._fullLayout,ya=Ma.getBoundingClientRect();ja.equalDomRects(ya,
La._lastBBox)||(Ma=La._invTransform=ja.inverseTransformMatrix(ja.getFullTransformMatrix(Ma)),La._invScaleX=Math.sqrt(Ma[0][0]*Ma[0][0]+Ma[0][1]*Ma[0][1]+Ma[0][2]*Ma[0][2]),La._invScaleY=Math.sqrt(Ma[1][0]*Ma[1][0]+Ma[1][1]*Ma[1][1]+Ma[1][2]*Ma[1][2]),La._lastBBox=ya)}function U(Ma){var La=ha.select(Ma),ya=Ma._fullLayout;ya._calcInverseTransform=T;ya._calcInverseTransform(Ma);ya._container=La.selectAll(".plot-container").data([0]);ya._container.enter().insert("div",":first-child").classed("plot-container",
!0).classed("plotly",!0);ya._paperdiv=ya._container.selectAll(".svg-container").data([0]);ya._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative");ya._glcontainer=ya._paperdiv.selectAll(".gl-container").data([{}]);ya._glcontainer.enter().append("div").classed("gl-container",!0);ya._paperdiv.selectAll(".main-svg").remove();ya._paperdiv.select(".modebar-container").remove();ya._paper=ya._paperdiv.insert("svg",":first-child").classed("main-svg",
!0);ya._toppaper=ya._paperdiv.append("svg").classed("main-svg",!0);ya._modebardiv=ya._paperdiv.append("div");delete ya._modeBar;ya._hoverpaper=ya._paperdiv.append("svg").classed("main-svg",!0);if(!ya._uid){var Aa={};ha.selectAll("defs").each(function(){this.id&&(Aa[this.id.split("-")[1]]=1)});ya._uid=ja.randstr(Aa)}ya._paperdiv.selectAll(".main-svg").attr(za.svgAttrs);ya._defs=ya._paper.append("defs").attr("id","defs-"+ya._uid);ya._clips=ya._defs.append("g").classed("clips",!0);ya._topdefs=ya._toppaper.append("defs").attr("id",
"topdefs-"+ya._uid);ya._topclips=ya._topdefs.append("g").classed("clips",!0);ya._bgLayer=ya._paper.append("g").classed("bglayer",!0);ya._draggers=ya._paper.append("g").classed("draglayer",!0);La=ya._paper.append("g").classed("layer-below",!0);ya._imageLowerLayer=La.append("g").classed("imagelayer",!0);ya._shapeLowerLayer=La.append("g").classed("shapelayer",!0);ya._cartesianlayer=ya._paper.append("g").classed("cartesianlayer",!0);ya._polarlayer=ya._paper.append("g").classed("polarlayer",!0);ya._ternarylayer=
ya._paper.append("g").classed("ternarylayer",!0);ya._geolayer=ya._paper.append("g").classed("geolayer",!0);ya._funnelarealayer=ya._paper.append("g").classed("funnelarealayer",!0);ya._pielayer=ya._paper.append("g").classed("pielayer",!0);ya._iciclelayer=ya._paper.append("g").classed("iciclelayer",!0);ya._treemaplayer=ya._paper.append("g").classed("treemaplayer",!0);ya._sunburstlayer=ya._paper.append("g").classed("sunburstlayer",!0);ya._indicatorlayer=ya._toppaper.append("g").classed("indicatorlayer",
!0);ya._glimages=ya._paper.append("g").classed("glimages",!0);La=ya._toppaper.append("g").classed("layer-above",!0);ya._imageUpperLayer=La.append("g").classed("imagelayer",!0);ya._shapeUpperLayer=La.append("g").classed("shapelayer",!0);ya._infolayer=ya._toppaper.append("g").classed("infolayer",!0);ya._menulayer=ya._toppaper.append("g").classed("menulayer",!0);ya._zoomlayer=ya._toppaper.append("g").classed("zoomlayer",!0);ya._hoverlayer=ya._hoverpaper.append("g").classed("hoverlayer",!0);ya._modebardiv.classed("modebar-container",
!0).style("position","absolute").style("top","0px").style("right","0px");Ma.emit("plotly_framework")}var ha=b("@plotly/d3"),Y=b("fast-isnumeric"),ba=b("has-hover"),ja=b("../lib"),ma=ja.nestedProperty,ia=b("../lib/events"),oa=b("../lib/queue"),xa=b("../registry"),ra=b("./plot_schema"),la=b("../plots/plots"),ka=b("../plots/cartesian/axes"),na=b("../components/drawing"),qa=b("../components/color"),ta=b("../plots/cartesian/graph_interact").initInteractions,za=b("../constants/xmlns_namespaces"),Ia=b("../plots/cartesian/select").clearSelect,
Xa=b("./plot_config").dfltConfig,$a=b("./manage_arrays"),gb=b("./helpers"),sb=b("./subroutines"),jb=b("./edit_types"),vb=b("../plots/cartesian/constants").AX_NAME_PATTERN,qb=0,Bb=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,ub=/^[xyz]axis[0-9]*\.autorange$/,wb=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/,rb=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},
{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],Ab=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},
{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];G.animate=function(Ma,La,ya){function Aa(cb,Eb){var Pb=0;return function(){if(cb&&++Pb===Eb)return cb()}}Ma=ja.getGraphDiv(Ma);if(!ja.isPlotDiv(Ma))throw Error("This element is not a Plotly plot: "+Ma+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");
var Ka=Ma._transitionData;Ka._frameQueue||(Ka._frameQueue=[]);ya=la.supplyAnimationDefaults(ya);var Ta=ya.transition,bb=ya.frame;void 0===Ka._frameWaitingCnt&&(Ka._frameWaitingCnt=0);return new Promise(function(cb,Eb){function Pb(){if(0!==Ka._frameQueue.length){for(;Ka._frameQueue.length;){var Gb=Ka._frameQueue.pop();if(Gb.onInterrupt)Gb.onInterrupt()}Ma.emit("plotly_animationinterrupted",[])}}function fc(Gb){if(0!==Gb.length){for(var cc=0;cc<Gb.length;cc++){var uc="byname"===Gb[cc].type?la.computeFrame(Ma,
Gb[cc].name):Gb[cc].data;var fd=cc;fd=Array.isArray(bb)?fd>=bb.length?bb[0]:bb[fd]:bb;var kb=cc;kb=Array.isArray(Ta)?kb>=Ta.length?Ta[0]:Ta[kb]:Ta;kb.duration=Math.min(kb.duration,fd.duration);uc={frame:uc,name:Gb[cc].name,frameOpts:fd,transitionOpts:kb};cc===Gb.length-1&&(uc.onComplete=Aa(cb,2),uc.onInterrupt=Eb);Ka._frameQueue.push(uc)}"immediate"===ya.mode&&(Ka._lastFrameAt=-Infinity);Ka._animationRaf||Db()}}function pb(){if(Ka._currentFrame&&Ka._currentFrame.onComplete)Ka._currentFrame.onComplete();
var Gb=Ka._currentFrame=Ka._frameQueue.shift();if(Gb){var cc=Gb.name?Gb.name.toString():null;Ma._fullLayout._currentFrame=cc;Ka._lastFrameAt=Date.now();Ka._timeToNext=Gb.frameOpts.duration;la.transition(Ma,Gb.frame.data,Gb.frame.layout,gb.coerceTraceIndices(Ma,Gb.frame.traces),Gb.frameOpts,Gb.transitionOpts).then(function(){if(Gb.onComplete)Gb.onComplete()});Ma.emit("plotly_animatingframe",{name:cc,frame:Gb.frame,animation:{frame:Gb.frameOpts,transition:Gb.transitionOpts}})}else Ma.emit("plotly_animated"),
window.cancelAnimationFrame(Ka._animationRaf),Ka._animationRaf=null}function Db(){Ma.emit("plotly_animating");Ka._lastFrameAt=-Infinity;Ka._timeToNext=0;Ka._runningTransitions=0;Ka._currentFrame=null;var Gb=function(){Ka._animationRaf=window.requestAnimationFrame(Gb);Date.now()-Ka._lastFrameAt>Ka._timeToNext&&pb()};Gb()}function Rb(Gb){Array.isArray(Ta)?Gb.transitionOpts=xc>=Ta.length?Ta[xc]:Ta[0]:Gb.transitionOpts=Ta;xc++;return Gb}var xc=0,Ic,Ja=[],Pa=void 0===La||null===La;var db=Array.isArray(La);
if(!Pa&&!db&&ja.isPlainObject(La))Ja.push({type:"object",data:Rb(ja.extendFlat({},La))});else if(Pa||-1!==["string","number"].indexOf(typeof La))for(db=0;db<Ka._frames.length;db++)(Ic=Ka._frames[db])&&(Pa||String(Ic.group)===String(La))&&Ja.push({type:"byname",name:String(Ic.name),data:Rb({name:Ic.name})});else if(db)for(db=0;db<La.length;db++)Ic=La[db],-1!==["number","string"].indexOf(typeof Ic)?(Ic=String(Ic),Ja.push({type:"byname",name:Ic,data:Rb({name:Ic})})):ja.isPlainObject(Ic)&&Ja.push({type:"object",
data:Rb(ja.extendFlat({},Ic))});for(db=0;db<Ja.length;db++)if(Ic=Ja[db],"byname"===Ic.type&&!Ka._frameHash[Ic.data.name]){ja.warn('animate failure: frame not found: "'+Ic.data.name+'"');Eb();return}-1!==["next","immediate"].indexOf(ya.mode)&&Pb();"reverse"===ya.direction&&Ja.reverse();var Jb=Ma._fullLayout._currentFrame;if(Jb&&ya.fromcurrent){Pa=-1;for(db=0;db<Ja.length;db++)if(Ic=Ja[db],"byname"===Ic.type&&Ic.name===Jb){Pa=db;break}if(0<Pa&&Pa<Ja.length-1){Jb=[];for(db=0;db<Ja.length;db++)Ic=Ja[db],
("byname"!==Ja[db].type||db>Pa)&&Jb.push(Ic);Ja=Jb}}0<Ja.length?fc(Ja):(Ma.emit("plotly_animated"),cb())})};G.addFrames=function(Ma,La,ya){Ma=ja.getGraphDiv(Ma);if(null===La||void 0===La)return Promise.resolve();if(!ja.isPlotDiv(Ma))throw Error("This element is not a Plotly plot: "+Ma+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var Aa,Ka=Ma._transitionData._frames,Ta=Ma._transitionData._frameHash;if(!Array.isArray(La))throw Error("addFrames failure: frameList must be an Array of frame definitions"+
La);var bb=Ka.length+2*La.length;var cb=[],Eb={};for(Aa=La.length-1;0<=Aa;Aa--)if(ja.isPlainObject(La[Aa])){var Pb=La[Aa].name;var fc=(Ta[Pb]||Eb[Pb]||{}).name,pb=La[Aa].name,Db=Ta[fc]||Eb[fc];fc&&pb&&"number"===typeof pb&&Db&&5>qb&&(qb++,ja.warn('addFrames: overwriting frame "'+(Ta[fc]||Eb[fc]).name+'" with a frame whose name of type "number" also equates to "'+fc+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),
5===qb&&ja.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed."));Eb[Pb]={name:Pb};cb.push({frame:la.supplyFrameDefaults(La[Aa]),index:ya&&void 0!==ya[Aa]&&null!==ya[Aa]?ya[Aa]:bb+Aa})}cb.sort(function(Rb,xc){return Rb.index>xc.index?-1:Rb.index<xc.index?1:0});La=[];ya=[];Eb=Ka.length;for(Aa=cb.length-1;0<=Aa;Aa--){bb=cb[Aa].frame;"number"===typeof bb.name&&ja.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings");
if(!bb.name)for(;Ta[bb.name="frame "+Ma._transitionData._counter++];);if(Ta[bb.name]){for(Pb=0;Pb<Ka.length&&(Ka[Pb]||{}).name!==bb.name;Pb++);La.push({type:"replace",index:Pb,value:bb});ya.unshift({type:"replace",index:Pb,value:Ka[Pb]})}else Pb=Math.max(0,Math.min(cb[Aa].index,Eb)),La.push({type:"insert",index:Pb,value:bb}),ya.unshift({type:"delete",index:Pb}),Eb++}Ka=Aa=la.modifyFrames;Ta=[Ma,ya];cb=[Ma,La];oa&&oa.add(Ma,Aa,Ta,Ka,cb);return la.modifyFrames(Ma,La)};G.deleteFrames=function(Ma,La){Ma=
ja.getGraphDiv(Ma);if(!ja.isPlotDiv(Ma))throw Error("This element is not a Plotly plot: "+Ma);var ya,Aa=Ma._transitionData._frames,Ka=[],Ta=[];if(!La)for(La=[],ya=0;ya<Aa.length;ya++)La.push(ya);La=La.slice();La.sort();for(ya=La.length-1;0<=ya;ya--){var bb=La[ya];Ka.push({type:"delete",index:bb});Ta.unshift({type:"insert",index:bb,value:Aa[bb]})}ya=La=la.modifyFrames;Ta=[Ma,Ta];bb=[Ma,Ka];oa&&oa.add(Ma,La,Ta,ya,bb);return la.modifyFrames(Ma,Ka)};G.addTraces=f;G.deleteTraces=q;G.extendTraces=d;G.moveTraces=
t;G.prependTraces=e;G.newPlot=function(Ma,La,ya,Aa){Ma=ja.getGraphDiv(Ma);la.cleanPlot([],{},Ma._fullData||[],Ma._fullLayout||{});la.purge(Ma);return G._doPlot(Ma,La,ya,Aa)};G._doPlot=function(Ma,La,ya,Aa){function Ka(){for(var Ja=Db._basePlotModules,Pa=0;Pa<Ja.length;Pa++)Ja[Pa].drawFramework&&Ja[Pa].drawFramework(Ma);!Db._glcanvas&&Db._has("gl")&&(Db._glcanvas=Db._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",
context:!1,pick:!0}],function(db){return db.key}),Db._glcanvas.enter().append("canvas").attr("class",function(db){return"gl-canvas gl-canvas-"+db.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));Ja=Ma._context.plotGlPixelRatio;if(Db._glcanvas&&(Db._glcanvas.attr("width",Db.width*Ja).attr("height",Db.height*Ja).style("width",Db.width+"px").style("height",Db.height+"px"),(Pa=Db._glcanvas.data()[0].regl)&&(Math.floor(Db.width*Ja)!==Pa._gl.drawingBufferWidth||
Math.floor(Db.height*Ja)!==Pa._gl.drawingBufferHeight)))if(Ic)ja.error("WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.");else return ja.log("WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug. Clearing graph and plotting again."),la.cleanPlot([],{},Ma._fullData,Db),la.supplyDefaults(Ma),Db=Ma._fullLayout,la.doCalcdata(Ma),Ic++,Ka();"h"===Db.modebar.orientation?Db._modebardiv.style("height",null).style("width","100%"):Db._modebardiv.style("width",
null).style("height",Db.height+"px");return la.previousPromises(Ma)}function Ta(){la.clearAutoMarginIds(Ma);sb.drawMarginPushers(Ma);ka.allowAutoMargin(Ma);if(Db._has("pie"))for(var Ja=Ma._fullData,Pa=0;Pa<Ja.length;Pa++){var db=Ja[Pa];"pie"===db.type&&db.automargin&&la.allowAutoMargin(Ma,"pie."+db.uid+".automargin")}la.doAutoMargin(Ma);return la.previousPromises(Ma)}function bb(){if(Rb)return ja.syncOrAsync([xa.getComponentMethod("shapes","calcAutorange"),xa.getComponentMethod("annotations","calcAutorange"),
cb],Ma);cb()}function cb(){Ma._transitioning||(sb.doAutoRangeAndConstraints(Ma),pb&&ka.saveRangeInitial(Ma),xa.getComponentMethod("rangeslider","calcAutorange")(Ma))}function Eb(){return ka.draw(Ma,pb?"":"redraw")}Ma=ja.getGraphDiv(Ma);ia.init(Ma);if(ja.isPlainObject(La)){var Pb=La;La=Pb.data;ya=Pb.layout;Aa=Pb.config;var fc=Pb.frames}if(!1===ia.triggerHandler(Ma,"plotly_beforeplot",[La,ya,Aa]))return Promise.reject();La||ya||ja.isPlotDiv(Ma)||ja.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",
Ma);m(Ma,Aa);ya||(ya={});ha.select(Ma).classed("js-plotly-plot",!0);na.makeTester();Array.isArray(Ma._promises)||(Ma._promises=[]);var pb=0===(Ma.data||[]).length&&Array.isArray(La);Array.isArray(La)&&(gb.cleanData(La),pb?Ma.data=La:Ma.data.push.apply(Ma.data,La),Ma.empty=!1);if(!Ma.layout||pb)Ma.layout=gb.cleanLayout(ya);la.supplyDefaults(Ma);var Db=Ma._fullLayout;La=Db._has("cartesian");Db._replotting=!0;if(pb||Db._shouldCreateBgLayer)U(Ma),Db._shouldCreateBgLayer&&delete Db._shouldCreateBgLayer;
na.initGradients(Ma);na.initPatterns(Ma);pb&&ka.saveShowSpikeInitial(Ma);var Rb=!Ma.calcdata||Ma.calcdata.length!==(Ma._fullData||[]).length;Rb&&la.doCalcdata(Ma);for(ya=0;ya<Ma.calcdata.length;ya++)Ma.calcdata[ya][0].trace=Ma._fullData[ya];Ma._context.responsive?Ma._responsiveChartHandler||(Ma._responsiveChartHandler=function(){ja.isHidden(Ma)||la.resize(Ma)},window.addEventListener("resize",Ma._responsiveChartHandler)):ja.clearResponsive(Ma);var xc=ja.extendFlat({},Db._size),Ic=0;ya=[la.previousPromises,
function(){if(fc)return G.addFrames(Ma,fc)},Ka,Ta,function(){if(la.didMarginChange(xc,Db._size))return ja.syncOrAsync([Ta,sb.layoutStyles],Ma)}];La&&ya.push(bb);ya.push(sb.layoutStyles);La&&ya.push(Eb,function(Ja){Ja._fullLayout._insideTickLabelsAutorange&&C(Ja,Ja._fullLayout._insideTickLabelsAutorange).then(function(){Ja._fullLayout._insideTickLabelsAutorange=void 0})});ya.push(sb.drawData,sb.finalDraw,ta,la.addLinks,la.rehover,la.redrag,la.doAutoMargin,function(Ja){Ja._fullLayout._insideTickLabelsAutorange&&
pb&&ka.saveRangeInitial(Ja,!0)},la.previousPromises);(La=ja.syncOrAsync(ya,Ma))&&La.then||(La=Promise.resolve());return La.then(function(){p(Ma);return Ma})};G.purge=function(Ma){Ma=ja.getGraphDiv(Ma);var La=Ma._fullLayout||{};la.cleanPlot([],{},Ma._fullData||[],La);la.purge(Ma);ia.purge(Ma);La._container&&La._container.remove();delete Ma._context;return Ma};G.react=function(Ma,La,ya,Aa){function Ka(){return G.addFrames(Ma,Pb)}var Ta;Ma=ja.getGraphDiv(Ma);gb.clearPromiseQueue(Ma);var bb=Ma._fullData,
cb=Ma._fullLayout;if(ja.isPlotDiv(Ma)&&bb&&cb){if(ja.isPlainObject(La)){var Eb=La;La=Eb.data;ya=Eb.layout;Aa=Eb.config;var Pb=Eb.frames}Eb=!1;Aa&&(Eb=ja.extendDeep({},Ma._context),Ma._context=void 0,m(Ma,Aa),Eb=W(Eb,Ma._context));Ma.data=La||[];gb.cleanData(Ma.data);Ma.layout=ya||{};gb.cleanLayout(Ma.layout);M(Ma.data,Ma.layout,bb,cb);la.supplyDefaults(Ma,{skipUpdateCalc:!0});var fc=Ma._fullData;Aa=Ma._fullLayout;var pb=void 0===Aa.datarevision,Db=Aa.transition,Rb=Z(Ma,cb,Aa,pb,Db),xc=Q(Ma,bb,fc,
pb,Db,Rb.newDataRevision);J(Ma)&&(Rb.layoutReplot=!0);if(xc.calc||Rb.calc)for(Ma.calcdata=void 0,bb=Object.getOwnPropertyNames(Aa),fc=0;fc<bb.length;fc++)pb=bb[fc],Db=pb.substring(0,5),("xaxis"===Db||"yaxis"===Db)&&(pb=Aa[pb]._emptyCategories)&&pb();else la.supplyDefaultsUpdateCalc(Ma.calcdata,fc);bb=[];Pb&&(Ma._transitionData={},la.createTransitionData(Ma),bb.push(Ka));if(Aa.transition&&!Eb&&(xc.anim||Rb.anim))Rb.ticks&&bb.push(sb.doTicksRelayout),la.doCalcdata(Ma),sb.doAutoRangeAndConstraints(Ma),
bb.push(function(){return la.transitionFromReact(Ma,xc,Rb,cb)});else if(xc.fullReplot||Rb.layoutReplot||Eb)Ma._fullLayout._skipDefaults=!0,bb.push(G._doPlot);else{for(Ta in Rb.arrays)if(Eb=Rb.arrays[Ta],Eb.length)if(Aa=xa.getComponentMethod(Ta,"drawOne"),Aa!==ja.noop)for(fc=0;fc<Eb.length;fc++)Aa(Ma,Eb[fc]);else{Eb=xa.getComponentMethod(Ta,"draw");if(Eb===ja.noop)throw Error("cannot draw components: "+Ta);Eb(Ma)}bb.push(la.previousPromises);xc.style&&bb.push(sb.doTraceStyle);(xc.colorbars||Rb.colorbars)&&
bb.push(sb.doColorBars);Rb.legend&&bb.push(sb.doLegend);Rb.layoutstyle&&bb.push(sb.layoutStyles);Rb.axrange&&y(bb);Rb.ticks&&bb.push(sb.doTicksRelayout);Rb.modebar&&bb.push(sb.doModeBar);Rb.camera&&bb.push(sb.doCamera);bb.push(p)}bb.push(la.rehover,la.redrag);(Ta=ja.syncOrAsync(bb,Ma))&&Ta.then||(Ta=Promise.resolve(Ma))}else Ta=G.newPlot(Ma,La,ya,Aa);return Ta.then(function(){Ma.emit("plotly_react",{data:La,layout:ya});return Ma})};G.redraw=function(Ma){Ma=ja.getGraphDiv(Ma);if(!ja.isPlotDiv(Ma))throw Error("This element is not a Plotly plot: "+
Ma);gb.cleanData(Ma.data);gb.cleanLayout(Ma.layout);Ma.calcdata=void 0;return G._doPlot(Ma).then(function(){Ma.emit("plotly_redraw");return Ma})};G.relayout=C;G.restyle=w;G.setPlotConfig=function(Ma){return ja.extendFlat(Xa,Ma)};G.update=K;G._guiRelayout=O(C);G._guiRestyle=O(w);G._guiUpdate=O(K);G._storeDirectGUIEdit=function(Ma,La,ya){for(var Aa in ya){var Ka=ma(Ma,Aa);B(Aa,Ka.get(),ya[Aa],La)}}},{"../components/color":666,"../components/drawing":688,"../constants/xmlns_namespaces":780,"../lib":803,
"../lib/events":792,"../lib/queue":819,"../plots/cartesian/axes":854,"../plots/cartesian/constants":861,"../plots/cartesian/graph_interact":864,"../plots/cartesian/select":874,"../plots/plots":917,"../registry":931,"./edit_types":836,"./helpers":837,"./manage_arrays":839,"./plot_config":841,"./plot_schema":842,"./subroutines":844,"@plotly/d3":58,"fast-isnumeric":249,"has-hover":443}],841:[function(b,N,G){function p(n,k){for(var m in n){var a=n[m];a.valType?k[m]=a.dflt:(k[m]||(k[m]={}),p(a,k[m]))}}
b={staticPlot:{valType:"boolean",dflt:!1},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",
dflt:!1},titleText:{valType:"boolean",dflt:!1}},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",
dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",
dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",
min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}};G={};p(b,G);N.exports={configAttributes:b,dfltConfig:G}},{}],842:[function(b,N,G){function p(J,K){var O,I,L=J._basePlotModules;if(L){for(O=0;O<L.length;O++){var H=L[O];if(H.attrRegex&&H.attrRegex.test(K)){if(H.layoutAttrOverrides)return H.layoutAttrOverrides;if(!M&&H.layoutAttributes)var M=H.layoutAttributes}if((H=H.baseLayoutAttrOverrides)&&K in H)return H[K]}if(M)return M}if(L=
J._modules)for(O=0;O<L.length;O++)if((J=L[O].layoutAttributes)&&K in J)return J[K];for(I in f.componentsRegistry){H=f.componentsRegistry[I];if("colorscale"===H.name&&0===K.indexOf("coloraxis"))return H.layoutAttributes[K];if(!H.schema&&K===H.name)return H.layoutAttributes}return K in t?t[K]:!1}function n(J,K,O){if(!J)return!1;if(J._isLinkedToArray)if(k(K[O]))O++;else if(O<K.length)return!1;for(;O<K.length;O++){var I=J[K[O]];if(D(I))J=I;else break;if(O===K.length-1)break;if(J._isLinkedToArray){if(O++,
!k(K[O]))return!1}else if("info_array"===J.valType){O++;I=K[O];if(!k(I))return!1;var L=J.items;if(Array.isArray(L)){if(I>=L.length)return!1;if(2===J.dimensions){O++;if(K.length===O)break;J=K[O];if(!k(J))return!1;J=L[I][J]}else J=L[I]}else J=L}}return J}function k(J){return J===Math.round(J)&&0<=J}function m(J){var K=f.modules[J]._module;var O=K.basePlotModule;var I={type:null},L=A({},q),H=A({},K.attributes);G.crawl(H,function(M,Q,Z,ca,W){v(L,W).set(void 0);void 0===M&&v(H,W).set(void 0)});A(I,L);
f.traceIs(J,"noOpacity")&&delete I.opacity;f.traceIs(J,"showLegend")||(delete I.showlegend,delete I.legendgroup);f.traceIs(J,"noHover")&&(delete I.hoverinfo,delete I.hoverlabel);K.selectPoints||delete I.selectedpoints;A(I,H);O.attributes&&A(I,O.attributes);I.type=J;J={meta:K.meta||{},categories:K.categories||{},animatable:!!K.animatable,type:J,attributes:r(I)};K.layoutAttributes&&(O={},A(O,K.layoutAttributes),J.layoutAttributes=r(O));K.animatable||G.crawl(J,function(M){G.isValObject(M)&&"anim"in M&&
delete M.anim});return J}function a(){var J={},K;A(J,t);for(K in f.subplotsRegistry){var O=f.subplotsRegistry[K];if(O.layoutAttributes)if(Array.isArray(O.attr))for(var I=0;I<O.attr.length;I++)e(J,O,O.attr[I]);else e(J,O,"subplot"===O.attr?O.name:O.attr)}for(K in f.componentsRegistry)if(O=f.componentsRegistry[K],(I=O.schema)&&(I.subplots||I.layout)){if((O=I.subplots)&&O.xaxis&&!O.yaxis)for(var L in O.xaxis)delete J.yaxis[L]}else"colorscale"===O.name?A(J,O.layoutAttributes):O.layoutAttributes&&(I=O.layoutAttributes,
O=v(J,O.name),O.set(A(O.get()||{},I)));return{layoutAttributes:r(J)}}function g(J){var K=A({},f.transformsRegistry[J].attributes);Object.keys(f.componentsRegistry).forEach(function(O){var I=f.componentsRegistry[O];I.schema&&I.schema.transforms&&I.schema.transforms[J]&&Object.keys(I.schema.transforms[J]).forEach(function(L){var H=I.schema.transforms[J][L];L=v(K,L);L.set(A(L.get()||{},H))})});return{attributes:r(K)}}function h(){var J={frames:A({},w)};r(J);return J.frames}function r(J){l(J);c(J);d(J);
return J}function l(J){G.crawl(J,function(K,O,I){if(G.isValObject(K)){if(!0===K.arrayOk||"data_array"===K.valType)I[O+"src"]={valType:"string",editType:"none"}}else D(K)&&(K.role="object")})}function c(J){G.crawl(J,function(K,O,I){if(K){var L=K._isLinkedToArray;L&&(delete K._isLinkedToArray,I[O]={items:{}},I[O].items[L]=K,I[O].role="object")}})}function d(J){function K(O){for(var I in O)if(D(O[I]))K(O[I]);else if(Array.isArray(O[I]))for(var L=0;L<O[I].length;L++)K(O[I][L]);else O[I]instanceof RegExp&&
(O[I]=O[I].toString())}K(J)}function e(J,K,O){J=v(J,O);K=A({},K.layoutAttributes);K._isSubplotObj=!0;J.set(K)}var f=b("../registry");N=b("../lib");var q=b("../plots/attributes"),t=b("../plots/layout_attributes"),w=b("../plots/frame_attributes"),x=b("../plots/animation_attributes"),z=b("./plot_config").configAttributes,B=b("./edit_types"),A=N.extendDeepAll,D=N.isPlainObject,C=N.isArrayOrTypedArray,v=N.nestedProperty,y=N.valObjectMeta,F=["_isSubplotObj","_isLinkedToArray","_arrayAttrRegexps","_deprecated"];
G.IS_SUBPLOT_OBJ="_isSubplotObj";G.IS_LINKED_TO_ARRAY="_isLinkedToArray";G.DEPRECATED="_deprecated";G.UNDERSCORE_ATTRS=F;G.get=function(){var J={};f.allTypes.forEach(function(O){J[O]=m(O)});var K={};Object.keys(f.transformsRegistry).forEach(function(O){K[O]=g(O)});return{defs:{valObjects:y,metaKeys:F.concat(["description","role","editType","impliedEdits"]),editType:{traces:B.traces,layout:B.layout},impliedEdits:{}},traces:J,layout:a(),transforms:K,frames:h(),animation:r(x),config:r(z)}};G.crawl=function(J,
K,O,I){var L=O||0;I=I||"";Object.keys(J).forEach(function(H){var M=J[H];if(-1===F.indexOf(H)){var Q=(I?I+".":"")+H;K(M,H,J,L,Q);G.isValObject(M)||D(M)&&"impliedEdits"!==H&&G.crawl(M,K,L+1,Q)}})};G.isValObject=function(J){return J&&void 0!==J.valType};G.findArrayAttributes=function(J){function K(T,U,ha,Y){L=L.slice(0,Y).concat([U]);H=H.slice(0,Y).concat([T&&T._isLinkedToArray]);!T||"data_array"!==T.valType&&!0!==T.arrayOk||"colorbar"===L[Y-1]&&("ticktext"===U||"tickvals"===U)||O(M,0,"")}function O(T,
U,ha){T=T[L[U]];ha+=L[U];if(U===L.length-1)C(T)&&I.push(Q+ha);else if(H[U]){if(Array.isArray(T))for(var Y=0;Y<T.length;Y++)D(T[Y])&&O(T[Y],U+1,ha+"["+Y+"].")}else D(T)&&O(T,U+1,ha+".")}var I=[],L=[],H=[];var M=J;var Q="";G.crawl(q,K);J._module&&J._module.attributes&&G.crawl(J._module.attributes,K);if(J=J.transforms)for(var Z=0;Z<J.length;Z++){var ca=J[Z],W=ca._module;W&&(Q="transforms["+Z+"].",M=ca,G.crawl(W.attributes,K))}return I};G.getTraceValObject=function(J,K){var O=K[0],I=1;if("transforms"===
O){if(1===K.length)return q.transforms;O=J.transforms;if(!Array.isArray(O)||!O.length)return!1;I=K[1];if(!k(I)||I>=O.length)return!1;J=(J=(f.transformsRegistry[O[I].type]||{}).attributes)&&J[K[2]];I=3}else{var L=J._module;L||(L=(f.modules[J.type||q.type.dflt]||{})._module);if(!L)return!1;J=(J=L.attributes)&&J[O];J||(L=L.basePlotModule)&&L.attributes&&(J=L.attributes[O]);J||(J=q[O])}return n(J,K,I)};G.getLayoutValObject=function(J,K){J=p(J,K[0]);return n(J,K,1)}},{"../lib":803,"../plots/animation_attributes":848,
"../plots/attributes":850,"../plots/frame_attributes":884,"../plots/layout_attributes":908,"../registry":931,"./edit_types":836,"./plot_config":841}],843:[function(b,N,G){function p(a){"s"!==a.charAt(a.length-1)&&n.warn("bad argument to arrayDefaultKey: "+a);return a.substr(0,a.length-1)+"defaults"}var n=b("../lib"),k=b("../plots/attributes"),m={name:{valType:"string",editType:"none"},templateitemname:{valType:"string",editType:"calc"}};G.templatedArray=function(a,g){g._isLinkedToArray=a;g.name=m.name;
g.templateitemname=m.templateitemname;return g};G.traceTemplater=function(a){var g={},h;for(h in a){var r=a[h];Array.isArray(r)&&r.length&&(g[h]=0)}return{newTrace:function(l){h=n.coerce(l,{},k,"type");l={type:h,_template:null};if(h in g){r=a[h];var c=g[h]%r.length;g[h]++;l._template=r[c]}return l}}};G.newContainer=function(a,g,h){var r=a._template;h=r&&(r[g]||h&&r[h]);n.isPlainObject(h)||(h=null);return a[g]={_template:h}};G.arrayTemplater=function(a,g,h){var r=(a=a._template)&&a[p(g)],l=a&&a[g];
Array.isArray(l)&&l.length||(l=[]);var c={};return{newItem:function(d){var e={name:d.name,_input:d},f=e.templateitemname=d.templateitemname;if(!f||"string"!==typeof f)return e._template=r,e;for(var q=0;q<l.length;q++){var t=l[q];if(t.name===f)return c[f]=1,e._template=t,e}e[h]=d[h]||!1;e._template=!1;return e},defaultItems:function(){for(var d=[],e=0;e<l.length;e++){var f=l[e],q=f.name;if(q&&"string"===typeof q&&!c[q]){var t={_template:f,name:q,_input:{_templateitemname:q}};t.templateitemname=f.templateitemname;
d.push(t);c[q]=1}}return d}}};G.arrayDefaultKey=p;G.arrayEditor=function(a,g,h){function r(){t={};f&&(t[q]={},t[q].templateitemname=f)}function l(w,x){f?n.nestedProperty(t[q],w).set(x):t[q+"."+w]=x}function c(){var w=t;r();return w}var d=(n.nestedProperty(a,g).get()||[]).length,e=h._index,f=e>=d&&(h._input||{})._templateitemname;f&&(e=d);var q=g+"["+e+"]",t;r();return{modifyBase:function(w,x){t[w]=x},modifyItem:l,getUpdateObj:c,applyUpdate:function(w,x){w&&l(w,x);w=c();for(var z in w)n.nestedProperty(a,
z).set(w[z])}}}},{"../lib":803,"../plots/attributes":850}],844:[function(b,N,G){function p(A,D,C){for(var v=0;v<C.length;v++){var y=C[v][0],F=C[v][1];if(!(y[0]>=A[1]||y[1]<=A[0])&&F[0]<D[1]&&F[1]>D[0])return!0}return!1}function n(A){function D(xa,ra,la){var ka=xa._lw/2;return"x"===xa._id.charAt(0)?ra?"top"===la?ra._offset-I-ka:ra._offset+ra._length+I+ka:O.t+O.h*(1-(xa.position||0))+ka%1:ra?"right"===la?ra._offset+ra._length+I+ka:ra._offset-I-ka:O.l+O.w*(xa.position||0)+ka%1}function C(xa){return"M"+
ja+","+xa+"H"+ma}function v(xa){return"M"+Y._offset+","+xa+"h"+Y._length}function y(xa){return"M"+xa+","+oa+"V"+ia}function F(xa){return"M"+xa+","+ba._offset+"v"+ba._length}function J(xa,ra,la){if(!xa.showline||M!==xa._mainSubplot)return"";if(!xa._anchorAxis)return la(xa._mainLinePosition);la=ra(xa._mainLinePosition);xa.mirror&&(la+=ra(xa._mainMirrorPosition));return la}var K=A._fullLayout,O=K._size,I=O.p,L=t.list(A,"",!0),H,M;K._paperdiv.style({width:A._context.responsive&&K.autosize&&!A._context._hasZeroWidth&&
!A.layout.width?"100%":K.width+"px",height:A._context.responsive&&K.autosize&&!A._context._hasZeroHeight&&!A.layout.height?"100%":K.height+"px"}).selectAll(".main-svg").call(e.setSize,K.width,K.height);A._context.setBackground(A,K.paper_bgcolor);G.drawMainTitle(A);q.manage(A);if(!K._has("cartesian"))return r.previousPromises(A);for(H=0;H<L.length;H++){var Q=L[H];var Z=Q._anchorAxis;Q._linepositions={};Q._lw=e.crispRound(A,Q.linewidth,1);Q._mainLinePosition=D(Q,Z,Q.side);Q._mainMirrorPosition=Q.mirror&&
Z?D(Q,Z,w.OPPOSITE_SIDE[Q.side]):null}H=[];Z=[];var ca=[],W=1===d.opacity(K.paper_bgcolor)&&1===d.opacity(K.plot_bgcolor)&&K.paper_bgcolor===K.plot_bgcolor;for(M in K._plots)if(Q=K._plots[M],Q.mainplot)Q.bg&&Q.bg.remove(),Q.bg=void 0;else{var T=Q.xaxis.domain,U=Q.yaxis.domain,ha=Q.plotgroup;p(T,U,ca)?(T=ha.node(),Q=Q.bg=l.ensureSingle(ha,"rect","bg"),T.insertBefore(Q.node(),T.childNodes[0]),Z.push(M)):(ha.select("rect.bg").remove(),ca.push([T,U]),W||(H.push(M),Z.push(M)))}Q=K._bgLayer.selectAll(".bg").data(H);
Q.enter().append("rect").classed("bg",!0);Q.exit().remove();Q.each(function(xa){K._plots[xa].bg=g.select(this)});for(H=0;H<Z.length;H++){Q=K._plots[Z[H]];var Y=Q.xaxis;var ba=Q.yaxis;Q.bg&&void 0!==Y._offset&&void 0!==ba._offset&&Q.bg.call(e.setRect,Y._offset-I,ba._offset-I,Y._length+2*I,ba._length+2*I).call(d.fill,K.plot_bgcolor).style("stroke-width",0)}if(!K._hasOnlyLargeSploms)for(M in K._plots)Q=K._plots[M],Y=Q.xaxis,ba=Q.yaxis,Z=Q.clipId="clip"+K._uid+M+"plot",H=l.ensureSingleById(K._clips,"clipPath",
Z,function(xa){xa.classed("plotclip",!0).append("rect")}),Q.clipRect=H.select("rect").attr({width:Y._length,height:ba._length}),e.setTranslate(Q.plot,Y._offset,ba._offset),Q._hasClipOnAxisFalse?H=null:(H=Z,Z=null),e.setClipUrl(Q.plot,H,A),Q.layerClipId=Z;for(M in K._plots){Q=K._plots[M];Y=Q.xaxis;ba=Q.yaxis;W="M0,0";if(k(Y,M)){Z=a(Y,"left",ba,L);var ja=Y._offset-(Z?I+Z:0);Z=a(Y,"right",ba,L);var ma=Y._offset+Y._length+(Z?I+Z:0);H=D(Y,ba,"bottom");ca=D(Y,ba,"top");Z=!Y._anchorAxis||M!==Y._mainSubplot;
!Z||"allticks"!==Y.mirror&&"all"!==Y.mirror||(Y._linepositions[M]=[H,ca]);W=J(Y,C,v);Z&&Y.showline&&("all"===Y.mirror||"allticks"===Y.mirror)&&(W+=C(H)+C(ca));Q.xlines.style("stroke-width",Y._lw+"px").call(d.stroke,Y.showline?Y.linecolor:"rgba(0,0,0,0)")}Q.xlines.attr("d",W);W="M0,0";if(k(ba,M)){Z=a(ba,"bottom",Y,L);var ia=ba._offset+ba._length+(Z?I:0);Z=a(ba,"top",Y,L);var oa=ba._offset-(Z?I:0);H=D(ba,Y,"left");ca=D(ba,Y,"right");Z=!ba._anchorAxis||M!==ba._mainSubplot;!Z||"allticks"!==ba.mirror&&
"all"!==ba.mirror||(ba._linepositions[M]=[H,ca]);W=J(ba,y,F);Z&&ba.showline&&("all"===ba.mirror||"allticks"===ba.mirror)&&(W+=y(H)+y(ca));Q.ylines.style("stroke-width",ba._lw+"px").call(d.stroke,ba.showline?ba.linecolor:"rgba(0,0,0,0)")}Q.ylines.attr("d",W)}t.makeClipPaths(A);return r.previousPromises(A)}function k(A,D){return(A.ticks||A.showline)&&(D===A._mainSubplot||"all"===A.mirror||"allticks"===A.mirror)}function m(A,D,C){if(!C.showline||!C._lw)return!1;if("all"===C.mirror||"allticks"===C.mirror)return!0;
var v=C._anchorAxis;if(!v)return!1;var y=w.FROM_BL[D];return C.side===D?v.domain[y]===A.domain[y]:C.mirror&&v.domain[1-y]===A.domain[1-y]}function a(A,D,C,v){if(m(A,D,C))return C._lw;for(var y=0;y<v.length;y++){var F=v[y];if(F._mainAxis===C._mainAxis&&m(A,D,F))return F._lw}return 0}var g=b("@plotly/d3"),h=b("../registry"),r=b("../plots/plots"),l=b("../lib"),c=b("../lib/clear_gl_canvases"),d=b("../components/color"),e=b("../components/drawing"),f=b("../components/titles"),q=b("../components/modebar"),
t=b("../plots/cartesian/axes"),w=b("../constants/alignment");N=b("../plots/cartesian/constraints");var x=N.enforce,z=N.clean,B=b("../plots/cartesian/autorange").doAutoRange;G.layoutStyles=function(A){return l.syncOrAsync([r.doAutoMargin,n],A)};G.drawMainTitle=function(A){var D=A._fullLayout;var C=D.title;var v="middle";l.isRightAnchor(C)?v="end":l.isLeftAnchor(C)&&(v="start");C=v;v=D.title;var y="0em";l.isTopAnchor(v)?y=w.CAP_SHIFT+"em":l.isMiddleAnchor(v)&&(y=w.MID_SHIFT+"em");v=y;y=f.draw;var F=
D._dfltTitle.plot;a:{var J=D.title;var K=D._size,O=0;"start"===C?O=J.pad.l:"end"===C&&(O=-J.pad.r);switch(J.xref){case "paper":J=K.l+K.w*J.x+O;break a;default:J=D.width*J.x+O}}a:{K=D.title;O=D._size;var I=0;"0em"!==v&&v?v===w.CAP_SHIFT+"em"&&(I=K.pad.t):I=-K.pad.b;if("auto"===K.y)K=O.t/2;else switch(K.yref){case "paper":K=O.t+O.h-O.h*K.y+I;break a;default:K=D.height-D.height*K.y+I}}y.call(f,A,"gtitle",{propContainer:D,propName:"title.text",placeholder:F,attributes:{x:J,y:K,"text-anchor":C,dy:v}})};
G.doTraceStyle=function(A){var D=A.calcdata,C=[],v;for(v=0;v<D.length;v++){var y=D[v],F=y[0]||{},J=F.trace||{},K=J._module||{},O=K.arraysToCalcdata;O&&O(y,J);(y=K.editStyle)&&C.push({fn:y,cd0:F})}if(C.length){for(v=0;v<C.length;v++)D=C[v],D.fn(A,D.cd0);c(A);G.redrawReglTraces(A)}r.style(A);h.getComponentMethod("legend","draw")(A);return r.previousPromises(A)};G.doColorBars=function(A){h.getComponentMethod("colorbar","draw")(A);return r.previousPromises(A)};G.layoutReplot=function(A){var D=A.layout;
A.layout=void 0;return h.call("_doPlot",A,"",D)};G.doLegend=function(A){h.getComponentMethod("legend","draw")(A);return r.previousPromises(A)};G.doTicksRelayout=function(A){t.draw(A,"redraw");A._fullLayout._hasOnlyLargeSploms&&(h.subplotsRegistry.splom.updateGrid(A),c(A),G.redrawReglTraces(A));G.drawMainTitle(A);return r.previousPromises(A)};G.doModeBar=function(A){var D=A._fullLayout;q.manage(A);for(var C=0;C<D._basePlotModules.length;C++){var v=D._basePlotModules[C].updateFx;v&&v(A)}return r.previousPromises(A)};
G.doCamera=function(A){A=A._fullLayout;for(var D=A._subplots.gl3d,C=0;C<D.length;C++){var v=A[D[C]];v._scene.setViewport(v)}};G.drawData=function(A){var D=A._fullLayout;c(A);for(var C=D._basePlotModules,v=0;v<C.length;v++)C[v].plot(A);G.redrawReglTraces(A);r.style(A);h.getComponentMethod("shapes","draw")(A);h.getComponentMethod("annotations","draw")(A);h.getComponentMethod("images","draw")(A);D._replotting=!1;return r.previousPromises(A)};G.redrawReglTraces=function(A){var D=A._fullLayout;if(D._has("regl")){var C=
A._fullData;A=[];var v=[],y;D._hasOnlyLargeSploms&&D._splomGrid.draw();for(y=0;y<C.length;y++){var F=C[y];!0===F.visible&&0!==F._length&&("splom"===F.type?D._splomScenes[F.uid].draw():"scattergl"===F.type?l.pushUnique(A,F.xaxis+F.yaxis):"scatterpolargl"===F.type&&l.pushUnique(v,F.subplot))}for(y=0;y<A.length;y++)C=D._plots[A[y]],C._scene&&C._scene.draw();for(y=0;y<v.length;y++)C=D[v[y]]._subplot,C._scene&&C._scene.draw()}};G.doAutoRangeAndConstraints=function(A){for(var D=t.list(A,"",!0),C,v={},y=
0;y<D.length;y++)if(C=D[y],!v[C._id]){v[C._id]=1;z(A,C);B(A,C);var F=C._matchGroup;if(F)for(var J in F)F=t.getFromId(A,J),B(A,F,C.range),v[J]=1}x(A)};G.finalDraw=function(A){h.getComponentMethod("rangeslider","draw")(A);h.getComponentMethod("rangeselector","draw")(A)};G.drawMarginPushers=function(A){h.getComponentMethod("legend","draw")(A);h.getComponentMethod("rangeselector","draw")(A);h.getComponentMethod("sliders","draw")(A);h.getComponentMethod("updatemenus","draw")(A);h.getComponentMethod("colorbar",
"draw")(A)}},{"../components/color":666,"../components/drawing":688,"../components/modebar":729,"../components/titles":764,"../constants/alignment":771,"../lib":803,"../lib/clear_gl_canvases":787,"../plots/cartesian/autorange":853,"../plots/cartesian/axes":854,"../plots/cartesian/constraints":862,"../plots/plots":917,"../registry":931,"@plotly/d3":58}],845:[function(b,N,G){function p(t,w){function x(F,J,K){if(l(J)&&l(F))p(F,J);else if(Array.isArray(J)&&Array.isArray(F)){F=f.arrayTemplater({_template:t},
K);for(A=0;A<J.length;A++){K=J[A];var O=F.newItem(K)._template;O&&p(O,K)}F=F.defaultItems();for(A=0;A<F.length;A++)J.push(F[A]._template);for(A=0;A<J.length;A++)delete J[A].templateitemname}}t=r.extendDeep({},t);var z=Object.keys(t).sort(),B,A;for(B=0;B<z.length;B++){var D=z[B],C=t[D];D in w?x(C,w[D],D):w[D]=C;if(n(D)===D)for(var v in w){var y=n(v);v===y||y!==D||v in t||x(C,w[v],D)}}}function n(t){return t.replace(/[0-9]+$/,"")}function k(t,w,x,z,B){var A=B&&x(B),D;for(D in t){var C=t[D],v=g(t,D,
z),y=g(t,D,B),F=x(y);if(!F){var J=n(D);J!==D&&(y=g(t,J,B),F=x(y))}if(!(A&&A===F||!F||F._noTemplating||"data_array"===F.valType||F.arrayOk&&Array.isArray(C)))if(!F.valType&&l(C))k(C,w,x,v,y);else if(F._isLinkedToArray&&Array.isArray(C)){var K=!1;F=0;J={};for(var O=0;O<C.length;O++){var I=C[O];if(l(I)){var L=I.name;L?J[L]||(k(I,w,x,g(C,F,v),g(C,F,y)),F++,J[L]=1):K||(K=f.arrayDefaultKey(D),K=g(t,K,z),L=g(C,F,v),k(I,w,x,L,g(C,F,y)),I=r.nestedProperty(w,L),r.nestedProperty(w,K).set(I.get()),I.set(null),
K=!0)}}}else r.nestedProperty(w,v).set(C)}}function m(t,w){return c.getLayoutValObject(t,r.nestedProperty({},w).parts)}function a(t,w){return c.getTraceValObject(t,r.nestedProperty({},w).parts)}function g(t,w,x){return x?Array.isArray(t)?x+"["+w+"]":x+"."+w:w}function h(t){switch(t.code){case "data":var w="The template has no key data.";break;case "layout":w="The template has no key layout.";break;case "missing":w=t.path?"There are no templates for item "+t.path+" with name "+t.templateitemname:"There are no templates for trace "+
t.index+", of type "+t.traceType+".";break;case "unused":w=t.path?"The template item at "+t.path+" was not used in constructing the plot.":t.dataCount?"Some of the templates of type "+t.traceType+" were not used. The template has "+t.templateCount+" traces, the data only has "+t.dataCount+" of this type.":"The template has "+t.templateCount+" traces of type "+t.traceType+" but there are none in the data.";break;case "reused":w="Some of the templates of type "+t.traceType+" were used more than once. The template has "+
t.templateCount+" traces, the data has "+t.dataCount+" of this type."}t.msg=w;return t}var r=b("../lib"),l=r.isPlainObject,c=b("./plot_schema"),d=b("../plots/plots"),e=b("../plots/attributes"),f=b("./plot_template"),q=b("./plot_config").dfltConfig;G.makeTemplate=function(t){t=r.isPlainObject(t)?t:r.getGraphDiv(t);t=r.extendDeep({_context:q},{data:t.data,layout:t.layout});d.supplyDefaults(t);var w=t.data||[],x=t.layout||{};x._basePlotModules=t._fullLayout._basePlotModules;x._modules=t._fullLayout._modules;
var z={data:{},layout:{}};w.forEach(function(v){var y={};k(v,y,a.bind(null,v));v=r.coerce(v,{},e,"type");var F=z.data[v];F||(F=z.data[v]=[]);F.push(y)});k(x,z.layout,m.bind(null,x));delete z.layout.template;t=x.template;if(l(t)){w=t.layout;var B;l(w)&&p(w,z.layout);var A=t.data;if(l(A)){for(B in z.data)if(w=A[B],Array.isArray(w)){var D=z.data[B];var C=D.length;x=w.length;for(t=0;t<C;t++)p(w[t%x],D[t]);for(t=C;t<x;t++)D.push(r.extendDeep({},w[t]))}for(B in A)B in z.data||(z.data[B]=r.extendDeep([],
A[B]))}}return z};G.validateTemplate=function(t,w){function x(K,O){for(var I in K)if("_"!==I.charAt(0)&&l(K[I])){var L=n(I),H=[],M;for(M=0;M<O.length;M++)H.push(g(K,I,O[M])),L!==I&&H.push(g(K,L,O[M]));for(M=0;M<H.length;M++)y[H[M]]=1;x(K[I],H)}}function z(K,O){for(var I in K)if(-1===I.indexOf("defaults")&&l(K[I])){var L=g(K,I,O);y[L]?z(K[I],L):v.push({code:"unused",path:L})}}function B(K,O){for(var I in K)if("_"!==I.charAt(0)){var L=K[I],H=g(K,I,O);if(l(L))Array.isArray(K)&&!1===L._template&&L.templateitemname&&
v.push({code:"missing",path:H,templateitemname:L.templateitemname}),B(L,H);else{var M;if(M=Array.isArray(L))a:{M=L;for(var Q=0;Q<M.length;Q++)if(l(M[Q])){M=!0;break a}M=void 0}M&&B(L,H)}}}var A=r.extendDeep({},{_context:q,data:t.data,layout:t.layout}),D=A.layout||{};l(w)||(w=D.template||{});var C=w.layout;t=w.data;var v=[];A.layout=D;A.layout.template=w;d.supplyDefaults(A);w=A._fullLayout;A=A._fullData;var y={};l(C)?(x(w,["layout"]),z(C,"layout")):v.push({code:"layout"});if(l(t)){C={};for(D=0;D<A.length;D++){var F=
A[D];var J=F.type;C[J]=(C[J]||0)+1;F._fullInput._template||v.push({code:"missing",index:F._fullInput.index,traceType:J})}for(J in t)D=t[J].length,F=C[J]||0,D>F?v.push({code:"unused",traceType:J,templateCount:D,dataCount:F}):F>D&&v.push({code:"reused",traceType:J,templateCount:D,dataCount:F})}else v.push({code:"data"});B({data:A,layout:w},"");if(v.length)return v.map(h)}},{"../lib":803,"../plots/attributes":850,"../plots/plots":917,"./plot_config":841,"./plot_schema":842,"./plot_template":843}],846:[function(b,
N,G){var p=b("fast-isnumeric"),n=b("./plot_api"),k=b("../plots/plots"),m=b("../lib"),a=b("../snapshot/helpers"),g=b("../snapshot/tosvg"),h=b("../snapshot/svgtoimg"),r=b("../version").version,l={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};N.exports=function(c,d){function e(L){return!(L in
d)||m.validate(d[L],l[L])}function f(L,H){return m.coerce(d,B,l,L,H)}function q(){return new Promise(function(L){setTimeout(L,a.getDelay(J._fullLayout))})}function t(){return new Promise(function(L,H){var M=g(J,A,v),Q=J._fullLayout.width,Z=J._fullLayout.height;if("full-json"===A)return H=k.graphJson(J,!1,"keepdata","object",!0,!0),H.version=r,H=JSON.stringify(H),n.purge(J),document.body.removeChild(J),F?L(H):L(a.encodeJSON(H));n.purge(J);document.body.removeChild(J);if("svg"===A)return F?L(M):L(a.encodeSVG(M));
var ca=document.createElement("canvas");ca.id=m.randstr();h({format:A,width:Q,height:Z,scale:v,canvas:ca,svg:M,promise:!0}).then(L).catch(H)})}d=d||{};if(m.isPlainObject(c)){var w=c.data||[];var x=c.layout||{};var z=c.config||{};c={}}else c=m.getGraphDiv(c),w=m.extendDeep([],c.data),x=m.extendDeep({},c.layout),z=c._context,c=c._fullLayout||{};if(!e("width")&&null!==d.width||!e("height")&&null!==d.height)throw Error("Height and width should be pixel values.");if(!e("format"))throw Error("Export format is not "+
m.join2(l.format.values,", "," or ")+".");var B={},A=f("format"),D=f("width"),C=f("height"),v=f("scale"),y=f("setBackground"),F=f("imageDataOnly"),J=document.createElement("div");J.style.position="absolute";J.style.left="-5000px";document.body.appendChild(J);var K=m.extendFlat({},x);D?K.width=D:null===d.width&&p(c.width)&&(K.width=c.width);C?K.height=C:null===d.height&&p(c.height)&&(K.height=c.height);var O=m.extendFlat({},z,{_exportedPlot:!0,staticPlot:!0,setBackground:y}),I=a.getRedrawFunc(J);return new Promise(function(L,
H){n.newPlot(J,w,K,O).then(I).then(q).then(t).then(function(M){M=F?M.replace(a.IMAGE_URL_PREFIX,""):M;L(M)}).catch(function(M){H(M)})})}},{"../lib":803,"../plots/plots":917,"../snapshot/helpers":935,"../snapshot/svgtoimg":937,"../snapshot/tosvg":939,"../version":1404,"./plot_api":840,"fast-isnumeric":249}],847:[function(b,N,G){function p(q,t,w,x,z,B){B=B||[];for(var A=Object.keys(q),D=0;D<A.length;D++){var C=A[D];if("transforms"!==C){var v=B.slice();v.push(C);var y=q[C],F=t[C];var J=w;if(C in J)var K=
J[C];else K=m(C),K=J[K.keyMinusId];var O=(K||{}).valType,I="info_array"===O,L="colorscale"===O;J=(K||{}).items;var H=w;var M=C,Q=m(M),Z=Q.keyMinusId;Q=Q.id;H=Z in H&&H[Z]._isSubplotObj&&Q?!0:M in H;if(H)if(l(y)&&l(F)&&"any"!==O)p(y,F,K,x,z,v);else if(I&&c(y))if(y.length>F.length&&x.push(k("unused",z,v.concat(F.length))),C=F.length,(O=Array.isArray(J))&&(C=Math.min(C,J.length)),2===K.dimensions)for(I=0;I<C;I++)if(c(y[I]))for(y[I].length>F[I].length&&x.push(k("unused",z,v.concat(I,F[I].length))),Z=
F[I].length,K=0;K<(O?Math.min(Z,J[I].length):Z);K++)L=O?J[I][K]:J,H=y[I][K],M=F[I][K],a.validate(H,L)?M!==H&&M!==+H&&x.push(k("dynamic",z,v.concat(I,K),H,M)):x.push(k("value",z,v.concat(I,K),H));else x.push(k("array",z,v.concat(I),y[I]));else for(I=0;I<C;I++)L=O?J[I]:J,H=y[I],M=F[I],a.validate(H,L)?M!==H&&M!==+H&&x.push(k("dynamic",z,v.concat(I),H,M)):x.push(k("value",z,v.concat(I),H));else if(K.items&&!I&&c(y)){J=J[Object.keys(J)[0]];C=[];for(K=0;K<F.length;K++)I=F[K]._index||K,O=v.slice(),O.push(I),
l(y[I])&&l(F[K])&&(C.push(I),I=y[I],L=F[K],l(I)&&!1!==I.visible&&!1===L.visible?x.push(k("invisible",z,O)):p(I,L,J,x,z,O));for(K=0;K<y.length;K++)O=v.slice(),O.push(K),l(y[K])?-1===C.indexOf(K)&&x.push(k("unused",z,O)):x.push(k("object",z,O,y[K]))}else!l(y)&&l(F)?x.push(k("object",z,v,y)):d(y)||!d(F)||I||L?C in t?a.validate(y,K)?"enumerated"===K.valType&&(K.coerceNumber&&y!==+F||y!==F)&&x.push(k("dynamic",z,v,y,F)):x.push(k("value",z,v,y)):x.push(k("unused",z,v,y)):x.push(k("array",z,v,y));else x.push(k("schema",
z,v))}}return x}function n(q){return c(q)?"In data trace "+q[1]+", ":"In "+q+", "}function k(q,t,w,x,z){w=w||"";if(c(t)){var B=t[0];var A=t[1]}else B=t,A=null;var D=w;if(c(D)){for(var C="",v=0;v<D.length;v++){var y=D[v];C="number"===typeof y?C.substr(0,C.length-1)+"["+y+"]":C+y;v<D.length-1&&(C+=".")}D=C}else D=String(D);t=e[q](t,D,x,z);a.log(t);return{code:q,container:B,trace:A,path:w,astr:D,msg:t}}function m(q){q=q.match(f);return{keyMinusId:q&&q[1],id:q&&q[2]}}var a=b("../lib"),g=b("../plots/plots"),
h=b("./plot_schema"),r=b("./plot_config").dfltConfig,l=a.isPlainObject,c=Array.isArray,d=a.isArrayOrTypedArray;N.exports=function(q,t){void 0===q&&(q=[]);void 0===t&&(t={});var w=h.get(),x=[],z={_context:a.extendFlat({},r)};if(c(q)){z.data=a.extendDeep([],q);var B=q}else z.data=[],B=[],x.push(k("array","data"));if(l(t)){z.layout=a.extendDeep({},t);var A=t}else z.layout={},A={},1<arguments.length&&x.push(k("object","layout"));g.supplyDefaults(z);for(var D=z._fullData,C=B.length,v=0;v<C;v++){var y=
B[v],F=["data",v];if(l(y)){var J=D[v],K=J.type,O=w.traces[K].attributes;O.type={valType:"enumerated",values:[K]};!1===J.visible&&!1!==y.visible&&x.push(k("invisible",F));p(y,J,O,x,F);y=y.transforms;J=J.transforms;if(y)for(c(y)||x.push(k("array",F,["transforms"])),F.push("transforms"),K=0;K<y.length;K++){O=["transforms",K];var I=y[K].type;l(y[K])?(I=w.transforms[I]?w.transforms[I].attributes:{},I.type={valType:"enumerated",values:Object.keys(w.transforms)},p(y[K],J[K],I,x,F,O)):x.push(k("object",F,
O))}}else x.push(k("object",F))}z=z._fullLayout;B=w.layout.layoutAttributes;for(C=0;C<D.length;C++)v=D[C],F=w.traces[v.type],(y=F.layoutAttributes)&&(v.subplot?a.extendFlat(B[F.attributes.subplot.dflt],y):a.extendFlat(B,y));p(A,z,B,x,"layout");return 0===x.length?void 0:x};var e={object:function(q,t){return("layout"===q&&""===t?"The layout argument":"data"===q[0]&&""===t?"Trace "+q[1]+" in the data argument":n(q)+"key "+t)+" must be linked to an object container"},array:function(q,t){return("data"===
q?"The data argument":n(q)+"key "+t)+" must be linked to an array container"},schema:function(q,t){return n(q)+"key "+t+" is not part of the schema"},unused:function(q,t,w){w=l(w)?"container":"key";return n(q)+w+" "+t+" did not get coerced"},dynamic:function(q,t,w,x){return[n(q)+"key",t,"(set to '"+w+"')","got reset to","'"+x+"'","during defaults."].join(" ")},invisible:function(q,t){return(t?n(q)+"item "+t:"Trace "+q[1])+" got defaulted to be not visible"},value:function(q,t,w){return[n(q)+"key "+
t,"is set to an invalid value ("+w+")"].join(" ")}},f=a.counterRegex("([a-z]+)")},{"../lib":803,"../plots/plots":917,"./plot_config":841,"./plot_schema":842}],848:[function(b,N,G){N.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",
min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:"linear quad cubic sin exp circle elastic back bounce linear-in quad-in cubic-in sin-in exp-in circle-in elastic-in back-in bounce-in linear-out quad-out cubic-out sin-out exp-out circle-out elastic-out back-out bounce-out linear-in-out quad-in-out cubic-in-out sin-in-out exp-in-out circle-in-out elastic-in-out back-in-out bounce-in-out".split(" "),editType:"none"},ordering:{valType:"enumerated",values:["layout first",
"traces first"],dflt:"layout first",editType:"none"}}}},{}],849:[function(b,N,G){var p=b("../lib"),n=b("../plot_api/plot_template");N.exports=function(k,m,a){var g=a.name,h=a.inclusionAttr||"visible",r=m[g],l=p.isArrayOrTypedArray(k[g])?k[g]:[];k=m[g]=[];var c=n.arrayTemplater(m,g,h);for(g=0;g<l.length;g++){var d=l[g];if(p.isPlainObject(d))var e=c.newItem(d);else e=c.newItem({}),e[h]=!1;e._index=g;!1!==e[h]&&a.handleItemDefaults(d,e,m,a);k.push(e)}h=c.defaultItems();for(g=0;g<h.length;g++)e=h[g],
e._index=k.length,a.handleItemDefaults({},e,m,a,{}),k.push(e);if(p.isArrayOrTypedArray(r))for(m=Math.min(r.length,k.length),g=0;g<m;g++)p.relinkPrivateKeys(k[g],r[g]);return k}},{"../lib":803,"../plot_api/plot_template":843}],850:[function(b,N,G){G=b("./font_attributes");b=b("../components/fx/attributes");N.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},
showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:G({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1E3,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",
editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:b.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1E4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",
editType:"none"}}},{"../components/fx/attributes":697,"./font_attributes":883}],851:[function(b,N,G){var p=b("fast-isnumeric");G=b("../../lib");var n=G.dateTime2ms,k=G.incrementMonth,m=b("../../constants/numerical").ONEAVGMONTH;N.exports=function(a,g,h,r){if("date"!==g.type)return{vals:r};var l=a[h+"periodalignment"];if(!l)return{vals:r};var c=a[h+"period"];if(p(c)){if(c=+c,0>=c)return{vals:r}}else if("string"===typeof c&&"M"===c.charAt(0)){var d=+c.substring(1);if(!(0<d&&Math.round(d)===d))return{vals:r}}g=
g.calendar;var e="start"===l;l="end"===l;a=n(a[h+"period0"],g)||0;h=[];for(var f=[],q=[],t=r.length,w=0;w<t;w++){var x=r[w];if(d){var z=Math.round((x-a)/(d*m));for(z=k(a,d*z,g);z>x;)z=k(z,-d,g);for(;z<=x;)z=k(z,d,g);x=k(z,-d,g)}else{z=Math.round((x-a)/c);for(z=a+z*c;z>x;)z-=c;for(;z<=x;)z+=c;x=z-c}h[w]=e?x:l?z:(x+z)/2;f[w]=x;q[w]=z}return{vals:h,starts:f,ends:q}}},{"../../constants/numerical":779,"../../lib":803,"fast-isnumeric":249}],852:[function(b,N,G){N.exports={xaxis:{valType:"subplotid",dflt:"x",
editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],853:[function(b,N,G){function p(D,C){function v(ma,ia){return Math.max(ma,O(ia))}var y,F,J=[],K=D._fullLayout;J=k(K,C,0);var O=k(K,C,1);D=a(D,C);var I=D.min,L=D.max;if(0===I.length||0===L.length)return q.simpleMap(C.range,C.r2l);D=I[0].val;var H=L[0].val;for(y=1;y<I.length&&D===H;y++)D=Math.min(D,I[y].val);for(y=1;y<L.length&&D===H;y++)H=Math.max(H,L[y].val);K=!1;C.range&&(K=q.simpleMap(C.range,
C.r2l),K=K[1]<K[0]);"reversed"===C.autorange&&(K=!0,C.autorange=!0);var M=C.rangemode,Q="tozero"===M,Z="nonnegative"===M;M=C._length;var ca=M/10,W=0;for(y=0;y<I.length;y++){var T=I[y];for(F=0;F<L.length;F++){var U=L[F];var ha=U.val-T.val-n(C,T.val,U.val);if(0<ha){var Y=M-J(T)-O(U);if(Y>ca){if(ha/Y>W){var ba=T;var ja=U;W=ha/Y}}else ha/M>W&&(ba={val:T.val,nopad:1},ja={val:U.val,nopad:1},W=ha/M)}}}D===H?(T=D-1,U=D+1,Q?0===D?J=[0,1]:(T=(0<D?L:I).reduce(v,0),T=D/(1-Math.min(.5,T/M)),J=0<D?[0,T]:[T,0]):
J=Z?[Math.max(0,T),Math.max(1,U)]:[T,U]):(Q?(0<=ba.val&&(ba={val:0,nopad:1}),0>=ja.val&&(ja={val:0,nopad:1})):Z&&(0>ba.val-W*J(ba)&&(ba={val:0,nopad:1}),0>=ja.val&&(ja={val:1,nopad:1})),W=(ja.val-ba.val-n(C,T.val,U.val))/(M-J(ba)-O(ja)),J=[ba.val-W*J(ba),ja.val+W*O(ja)]);K&&J.reverse();return q.simpleMap(J,C.l2r||Number)}function n(D,C,v){var y=0;if(D.rangebreaks)for(D=D.locateBreaks(C,v),C=0;C<D.length;C++)v=D[C],y+=v.max-v.min;return y}function k(D,C,v){var y=.05*C._length,F=C._anchorAxis||{};if(-1!==
(C.ticklabelposition||"").indexOf("inside")||-1!==(F.ticklabelposition||"").indexOf("inside"))F="reversed"===C.autorange,F||(F=q.simpleMap(C.range,C.r2l),F=F[1]<F[0]),F&&(v=!v);var J=0;B(D,C._id)||(J=m(D,C,v));y=Math.max(J,y);"domain"===C.constrain&&C._inputDomain&&(y*=(C._inputDomain[1]-C._inputDomain[0])/(C.domain[1]-C.domain[0]));return function(K){return K.nopad?0:K.pad+(K.extrapad?y:J)}}function m(D,C,v){var y=0,F="x"===C._id.charAt(0),J;for(J in D._plots){var K=D._plots[J];if(C._id===K.xaxis._id||
C._id===K.yaxis._id)if(K=(F?K.yaxis:K.xaxis)||{},-1!==(K.ticklabelposition||"").indexOf("inside")&&(!v&&("left"===K.side||"bottom"===K.side)||v&&("top"===K.side||"right"===K.side))){if(K._vals){var O=q.deg2rad(K._tickAngles[K._id+"tick"]||0),I=Math.abs(Math.cos(O));O=Math.abs(Math.sin(O));K._vals[0].bb||K._selections[K._id+"tick"].each(function(Q){var Z=e.select(this);Z.select(".text-math-group").empty()&&(Q.bb=x.bBox(Z.node()))});for(var L=0;L<K._vals.length;L++){var H=K._vals[L].bb;if(H){var M=
2*A+H.width;H=2*A+H.height;y=Math.max(y,F?Math.max(M*I,H*O):Math.max(H*I,M*O))}}}"inside"===K.ticks&&"inside"===K.ticklabelposition&&(y+=K.ticklen||0)}}return y}function a(D,C,v){function y(Q,Z){for(I=0;I<Z.length;I++){var ca=Q[Z[I]],W=(ca._extremes||{})[F];if(!0===ca.visible&&W){for(L=0;L<W.min.length;L++)M=W.min[L],g(K,M.val,M.pad,{extrapad:M.extrapad});for(L=0;L<W.max.length;L++)M=W.max[L],h(O,M.val,M.pad,{extrapad:M.extrapad})}}}var F=C._id,J=D._fullLayout,K=[],O=[],I,L;y(D._fullData,C._traceIndices);
y(J.annotations||[],C._annIndices||[]);y(J.shapes||[],C._shapeIndices||[]);if(C._matchGroup&&!v)for(var H in C._matchGroup)if(H!==C._id){J=z(D,H);v=a(D,J,!0);J=C._length/J._length;for(L=0;L<v.min.length;L++){var M=v.min[L];g(K,M.val,M.pad*J,{extrapad:M.extrapad})}for(L=0;L<v.max.length;L++)M=v.max[L],h(O,M.val,M.pad*J,{extrapad:M.extrapad})}return{min:K,max:O}}function g(D,C,v,y){r(D,C,v,y,c)}function h(D,C,v,y){r(D,C,v,y,d)}function r(D,C,v,y,F){var J=y.tozero;y=y.extrapad;for(var K=!0,O=0;O<D.length&&
K;O++){var I=D[O];if(F(I.val,C)&&I.pad>=v&&(I.extrapad||!y)){K=!1;break}else F(C,I.val)&&I.pad<=v&&(y||!I.extrapad)&&(D.splice(O,1),O--)}K&&(F=J&&0===C,D.push({val:C,pad:F?0:v,extrapad:F?!1:y}))}function l(D){return f(D)&&Math.abs(D)<t}function c(D,C){return D<=C}function d(D,C){return D>=C}var e=b("@plotly/d3"),f=b("fast-isnumeric"),q=b("../../lib"),t=b("../../constants/numerical").FP_SAFE,w=b("../../registry"),x=b("../../components/drawing");b=b("./axis_ids");var z=b.getFromId,B=b.isLinked;N.exports=
{getAutoRange:p,makePadFn:k,doAutoRange:function(D,C,v){C.setScale();if(C.autorange){C.range=v?v.slice():p(D,C);C._r=C.range.slice();C._rl=q.simpleMap(C._r,C.r2l);v=C._input;var y={};y[C._attr+".range"]=C.range;y[C._attr+".autorange"]=C.autorange;w.call("_storeDirectGUIEdit",D.layout,D._fullLayout._preGUI,y);v.range=C.range.slice();v.autorange=C.autorange}(v=C._anchorAxis)&&v.rangeslider&&((y=v.rangeslider[C._name])&&"auto"===y.rangemode&&(y.range=p(D,C)),v._input.rangeslider[C._name]=q.extendFlat({},
y))},findExtremes:function(D,C,v){function y(la){if(Array.isArray(la))return M=!0,function(na){return Math.max(Number(la[na]||0),0)};var ka=Math.max(Number(la||0),0);return function(){return ka}}function F(la){ca=C[la];f(ca)&&(U=Y(la),ha=ba(la),Q?(W=D.c2l(ca)-ma(la),T=D.c2l(ca)+ja(la)):(ia=ca-ma(la),oa=ca+ja(la),H&&ia<oa/10&&(ia=oa/10),W=D.c2l(ia),T=D.c2l(oa)),L&&(W=Math.min(0,W),T=Math.max(0,T)),l(W)&&g(J,W,ha,ra),l(T)&&h(K,T,U,ra))}v||(v={});D._m||D.setScale();var J=[],K=[],O=C.length,I=v.padded||
!1,L=v.tozero&&("linear"===D.type||"-"===D.type),H="log"===D.type,M=!1,Q=v.vpadLinearized||!1,Z,ca,W,T,U,ha,Y=y((0<D._m?v.ppadplus:v.ppadminus)||v.ppad||0),ba=y((0<D._m?v.ppadminus:v.ppadplus)||v.ppad||0),ja=y(v.vpadplus||v.vpad),ma=y(v.vpadminus||v.vpad);if(!M){var ia=Infinity;var oa=-Infinity;if(H)for(Z=0;Z<O;Z++){var xa=C[Z];xa<ia&&0<xa&&(ia=xa);xa>oa&&xa<t&&(oa=xa)}else for(Z=0;Z<O;Z++)xa=C[Z],xa<ia&&xa>-t&&(ia=xa),xa>oa&&xa<t&&(oa=xa);C=[ia,oa];O=2}var ra={tozero:L,extrapad:I};I=Math.min(6,O);
for(Z=0;Z<I;Z++)F(Z);for(Z=O-1;Z>=I;Z--)F(Z);return{min:J,max:K,opts:v}},concatExtremes:a};var A=3},{"../../components/drawing":688,"../../constants/numerical":779,"../../lib":803,"../../registry":931,"./axis_ids":858,"@plotly/d3":58,"fast-isnumeric":249}],854:[function(b,N,G){function p(Ja){var Pa=1E-4*(Ja[1]-Ja[0]);return[Ja[0]-Pa,Ja[1]+Pa]}function n(Ja){return+Ja}function k(Ja){return String(Ja)}function m(Ja,Pa,db,Jb,Gb){function cc(Ec){return 2>(1+100*(Ec-Ja)/db.dtick)%100}for(var uc=0,fd=0,
kb=0,Qb=0,dc=0;dc<Pa.length;dc++)0===Pa[dc]%1?kb++:Z(Pa[dc])||Qb++,cc(Pa[dc])&&uc++,cc(Pa[dc]+db.dtick/2)&&fd++;Pa=Pa.length-Qb;kb===Pa&&"date"!==db.type?1>db.dtick?Ja=Jb-.5*db.dtick:(Ja-=.5,Ja+db.dtick<Jb&&(Ja+=db.dtick)):fd<.1*Pa&&(uc>.3*Pa||cc(Jb)||cc(Gb))&&(Gb=db.dtick/2,Ja+=Ja+Gb<Jb?Gb:-Gb);return Ja}function a(Ja){var Pa=Ja.tickvals,db=Ja.ticktext,Jb=Array(Pa.length),Gb=T.simpleMap(Ja.range,Ja.r2l),cc=p(Gb);Gb=Math.min(cc[0],cc[1]);cc=Math.max(cc[0],cc[1]);var uc=0;Array.isArray(db)||(db=[]);
var fd="category"===Ja.type?Ja.d2l_noadd:Ja.d2l;"log"===Ja.type&&"L"!==String(Ja.dtick).charAt(0)&&(Ja.dtick="L"+Math.pow(10,Math.floor(Math.min(Ja.range[0],Ja.range[1]))-1));for(var kb=0;kb<Pa.length;kb++){var Qb=fd(Pa[kb]);Qb>Gb&&Qb<cc&&(Jb[uc]=void 0===db[kb]?Aa.tickText(Ja,Qb):r(Ja,Qb,String(db[kb])),uc++)}uc<Pa.length&&Jb.splice(uc,Pa.length-uc);Ja.rangebreaks&&(Jb=Jb.filter(function(dc){return Ja.maskBreaks(dc.x)!==qb}));return Jb}function g(Ja,Pa,db){return Pa*T.roundUp(Ja/Pa,db)}function h(Ja){var Pa=
Ja.dtick;Ja._tickexponent=0;Z(Pa)||"string"===typeof Pa||(Pa=1);if("category"===Ja.type||"multicategory"===Ja.type)Ja._tickround=null;if("date"===Ja.type){var db=Ja.r2l(Ja.tick0),Jb=Ja.l2r(db).replace(/(^-|i)/g,""),Gb=Jb.length;"M"===String(Pa).charAt(0)?10<Gb||"01-01"!==Jb.substr(5)?Ja._tickround="d":Ja._tickround=0===+Pa.substr(1)%12?"y":"m":Pa>=Xa&&10>=Gb||Pa>=15*Xa?Ja._tickround="d":Pa>=sb&&16>=Gb||Pa>=gb?Ja._tickround="M":Pa>=jb&&19>=Gb||Pa>=sb?Ja._tickround="S":(Pa=Ja.l2r(db+Pa).replace(/^-/,
"").length,Ja._tickround=Math.max(Gb,Pa)-20,0>Ja._tickround&&(Ja._tickround=4))}else Z(Pa)||"L"===Pa.charAt(0)?(Gb=Ja.range.map(Ja.r2d||Number),Z(Pa)||(Pa=Number(Pa.substr(1))),Ja._tickround=2-Math.floor(Math.log(Pa)/Math.LN10+.01),Pa=Math.floor(Math.log(Math.max(Math.abs(Gb[0]),Math.abs(Gb[1])))/Math.LN10+.01),Math.abs(Pa)>(void 0===Ja.minexponent?3:Ja.minexponent)&&(!w(Ja.exponentformat)||14<Pa||-15>Pa?Ja._tickexponent=Pa:Ja._tickexponent=3*Math.round((Pa-1)/3))):Ja._tickround=null}function r(Ja,
Pa,db){Ja=Ja.tickfont||{};return{x:Pa,dx:0,dy:0,text:db||"",fontSize:Ja.size,font:Ja.family,fontColor:Ja.color}}function l(Ja,Pa,db,Jb){var Gb=Ja._tickround,cc=db&&Ja.hoverformat||Aa.getTickFormat(Ja);Jb&&(Gb=Z(Gb)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[Gb]);cc=T.formatDate(Pa.x,cc,Gb,Ja._dateFormat,Ja.calendar,Ja._extraFormat);var uc=cc.indexOf("\n");if(-1!==uc){var fd=cc.substr(uc+1);cc=cc.substr(0,uc)}Jb&&("00:00:00"===cc||"00:00"===cc?(cc=fd,fd=""):8===cc.length&&(cc=cc.replace(/:00$/,"")));if(fd)if(db)cc=
"d"===Gb?cc+(", "+fd):fd+(cc?", "+cc:"");else if(Ja._inCalcTicks&&Ja._prevDateHead===fd){if(db=H(Ja),Ja=Ja._realSide||Ja.side,!db&&"top"===Ja||db&&"bottom"===Ja)cc+="\x3cbr\x3e "}else Ja._prevDateHead=fd,cc+="\x3cbr\x3e"+fd;Pa.text=cc}function c(Ja,Pa,db,Jb,Gb){var cc=Ja.dtick;db=Pa.x;var uc=Ja.tickformat,fd="string"===typeof cc&&cc.charAt(0);"never"===Gb&&(Gb="");Jb&&"L"!==fd&&(cc="L3",fd="L");if(uc||"L"===fd)Pa.text=x(Math.pow(10,db),Ja,Gb,Jb);else if(Z(cc)||"D"===fd&&.1>T.mod(db+.01,1))Jb=Math.round(db),
Gb=Math.abs(Jb),uc=Ja.exponentformat,"power"===uc||w(uc)&&(14<Jb||-15>Jb)?(Pa.text=0===Jb?1:1===Jb?"10":"10\x3csup\x3e"+(1<Jb?"":vb)+Gb+"\x3c/sup\x3e",Pa.fontSize*=1.25):("e"===uc||"E"===uc)&&2<Gb?Pa.text="1"+uc+(0<Jb?"+":vb)+Gb:(Pa.text=x(Math.pow(10,db),Ja,"","fakehover"),"D1"===cc&&"y"===Ja._id.charAt(0)&&(Pa.dy-=Pa.fontSize/6));else if("D"===fd)Pa.text=String(Math.round(Math.pow(10,T.mod(db,1)))),Pa.fontSize*=.75;else throw"unrecognized dtick "+String(cc);"D1"===Ja.dtick&&(cc=String(Pa.text).charAt(0),
"0"===cc||"1"===cc)&&("y"===Ja._id.charAt(0)?Pa.dx-=Pa.fontSize/4:(Pa.dy+=Pa.fontSize/2,Pa.dx+=(Ja.range[1]>Ja.range[0]?1:-1)*Pa.fontSize*(0>db?.5:.25)))}function d(Ja,Pa){Ja=Ja._categories[Math.round(Pa.x)];void 0===Ja&&(Ja="");Pa.text=String(Ja)}function e(Ja,Pa,db){var Jb=Ja._categories[Math.round(Pa.x)]||[];Ja=void 0===Jb[1]?"":String(Jb[1]);Jb=void 0===Jb[0]?"":String(Jb[0]);db?Pa.text=Jb+" - "+Ja:(Pa.text=Ja,Pa.text2=Jb)}function f(Ja,Pa,db,Jb,Gb){"never"===Gb?Gb="":"all"===Ja.showexponent&&
1E-6>Math.abs(Pa.x/Ja.dtick)&&(Gb="hide");Pa.text=x(Pa.x,Ja,Gb,Jb)}function q(Ja,Pa,db,Jb,Gb){"radians"!==Ja.thetaunit||db?Pa.text=x(Pa.x,Ja,Gb,Jb):(db=Pa.x/180,0===db?Pa.text="0":(db=t(db),100<=db[1]?Pa.text=x(T.deg2rad(Pa.x),Ja,Gb,Jb):(Ja=0>Pa.x,Pa.text=1===db[1]?1===db[0]?"":db[0]+"":["\x3csup\x3e",db[0],"\x3c/sup\x3e\x3csub\x3e",db[1],"\x3c/sub\x3e"].join(""),Ja&&(Pa.text=vb+Pa.text))))}function t(Ja){function Pa(Gb,cc){return 1E-6>=Math.abs(cc-0)?Gb:Pa(cc,Gb%cc)}var db=function(Gb){for(var cc=
1;!(1E-6>=Math.abs(Math.round(Gb*cc)/cc-Gb));)cc*=10;return cc}(Ja);Ja*=db;var Jb=Math.abs(Pa(Ja,db));return[Math.round(Ja/Jb),Math.round(db/Jb)]}function w(Ja){return"SI"===Ja||"B"===Ja}function x(Ja,Pa,db,Jb){var Gb=0>Ja,cc=Pa._tickround;db=db||Pa.exponentformat||"B";var uc=Pa._tickexponent,fd=Aa.getTickFormat(Pa),kb=Pa.separatethousands;Jb&&(uc={exponentformat:db,minexponent:Pa.minexponent,dtick:"none"===Pa.showexponent?Pa.dtick:Z(Ja)?Math.abs(Ja)||1:1,range:"none"===Pa.showexponent?Pa.range.map(Pa.r2d):
[0,Ja||1]},h(uc),cc=(Number(uc._tickround)||0)+4,uc=uc._tickexponent,Pa.hoverformat&&(fd=Pa.hoverformat));if(fd)return Pa._numFormat(fd)(Ja).replace(/-/g,vb);Jb=Math.pow(10,-cc)/2;"none"===db&&(uc=0);Ja=Math.abs(Ja);if(Ja<Jb)Ja="0",Gb=!1;else{Ja+=Jb;uc&&(Ja*=Math.pow(10,-uc),cc+=uc);if(0===cc)Ja=String(Math.floor(Ja));else if(0>cc)for(Ja=String(Math.round(Ja)),Ja=Ja.substr(0,Ja.length+cc);0>cc;cc++)Ja+="0";else Ja=String(Ja),(Jb=Ja.indexOf(".")+1)&&(Ja=Ja.substr(0,Jb+cc).replace(/\.?0+$/,""));Ja=
T.numSeparate(Ja,Pa._separators,kb)}uc&&"hide"!==db&&(w(db)&&(14<uc||-15>uc)&&(db="power"),Pa=0>uc?vb+-uc:"power"!==db?"+"+uc:String(uc),"e"===db||"E"===db?Ja+=db+Pa:"power"===db?Ja+="10\x3csup\x3e"+Pa+"\x3c/sup\x3e":"B"===db&&9===uc?Ja+="B":w(db)&&(Ja+=Ic[uc/3+5]));return Gb?vb+Ja:Ja}function z(Ja,Pa){var db=[],Jb=function(Gb,cc){cc=Gb.xbnd[cc];null!==cc&&db.push(T.extendFlat({},Gb,{x:cc}))};if(Pa.length){for(Ja=0;Ja<Pa.length;Ja++)Jb(Pa[Ja],0);Jb(Pa[Ja-1],1)}return db}function B(Ja,Pa){var db=
[],Jb=Pa.length&&Pa[Pa.length-1].x<Pa[0].x,Gb=function(fd,kb){kb=fd.xbnd[kb];null!==kb&&db.push(T.extendFlat({},fd,{x:kb}))};if(Ja.showdividers&&Pa.length){for(Ja=0;Ja<Pa.length;Ja++){var cc=Pa[Ja];cc.text2!==uc&&Gb(cc,Jb?1:0);var uc=cc.text2}Gb(Pa[Ja-1],Jb?0:1)}return db}function A(Ja,Pa){if(Ja._selections[Pa].size()){var db=Infinity;var Jb=-Infinity;var Gb=Infinity;var cc=-Infinity;Ja._selections[Pa].each(function(){var uc=K(this);uc=ja.bBox(uc.node().parentNode);db=Math.min(db,uc.top);Jb=Math.max(Jb,
uc.bottom);Gb=Math.min(Gb,uc.left);cc=Math.max(cc,uc.right)})}else cc=Gb=Jb=db=0;return{top:db,bottom:Jb,left:Gb,right:cc,height:Jb-db,width:cc-Gb}}function D(Ja){return void 0!==Ja.periodX?Ja.periodX:Ja.x}function C(Ja){var Pa=Ja.ticklabelposition||"",db=function(Qc){return-1!==Pa.indexOf(Qc)},Jb=db("top"),Gb=db("left"),cc=db("right"),uc=db("bottom");db=db("inside");var fd=uc||Gb||Jb||cc;if(!fd&&!db)return[0,0];var kb=Ja.side,Qb=fd?(Ja.tickwidth||0)/2:0,dc=3,Ec=Ja.tickfont?Ja.tickfont.size:12;if(uc||
Jb)Qb+=Ec*Ma,dc+=(Ja.linewidth||0)/2;if(Gb||cc)Qb+=(Ja.linewidth||0)/2,dc+=3;db&&"top"===kb&&(dc-=Ec*(1-Ma));if(Gb||Jb)Qb=-Qb;if("bottom"===kb||"right"===kb)dc=-dc;return[fd?Qb:0,db?dc:0]}function v(Ja){return[Ja.text,Ja.x,Ja.axInfo,Ja.font,Ja.fontSize,Ja.fontColor].join("_")}function y(Ja){var Pa=Ja.title.font.size,db=(Ja.title.text.match(ha.BR_TAG_ALL)||[]).length;return Ja.title.hasOwnProperty("standoff")?db?Pa*(Ma+db*La):Pa*Ma:db?Pa*(db+1)*La:Pa}function F(Ja,Pa){Pa=Ja.l2p(Pa);return 1<Pa&&Pa<
Ja._length-1}function J(Ja,Pa,db,Jb){function Gb(dc){function Ec(tb){return"number"===typeof tb&&Math.abs(tb-Qb)<Qc}if(!dc.showline||!dc.linewidth)return!1;var Qc=Math.max((dc.linewidth+Pa.zerolinewidth)/2,1);if(Ec(dc._mainLinePosition)||Ec(dc._mainMirrorPosition))return!0;dc=dc._linepositions||{};for(var Tc in dc)if(Ec(dc[Tc][0])||Ec(dc[Tc][1]))return!0}var cc=db._mainAxis;if(cc){var uc=Ja._fullLayout,fd=Pa._id.charAt(0),kb=Aa.counterLetter(Pa._id),Qb=Pa._offset+(Math.abs(Jb[0])<Math.abs(Jb[1])===
("x"===fd)?0:Pa._length);Jb=uc._plots[db._mainSubplot];if(!(Jb.mainplotinfo||Jb).overlays.length)return Gb(db,Qb);Ja=Aa.list(Ja,kb);for(db=0;db<Ja.length;db++)if(kb=Ja[db],kb._mainAxis===cc&&Gb(kb,Qb))return!0}}function K(Ja){Ja=Q.select(Ja);var Pa=Ja.select(".text-math-group");return Pa.empty()?Ja.select("text"):Pa}function O(Ja){return Ja._id+".automargin"}function I(Ja,Pa){for(var db=0;db<Pa.length;db++)-1===Ja.indexOf(Pa[db])&&Ja.push(Pa[db])}function L(Ja,Pa){for(var db=Pa._rangebreaks.length,
Jb=0;Jb<db;Jb++){var Gb=Pa._rangebreaks[Jb];if(Ja>=Gb.min&&Ja<Gb.max)return Gb.max}return Ja}function H(Ja){return-1!==(Ja.ticklabelposition||"").indexOf("inside")}function M(Ja,Pa){H(Ja._anchorAxis||{})&&Ja._hideCounterAxisInsideTickLabels&&Ja._hideCounterAxisInsideTickLabels(Pa)}var Q=b("@plotly/d3"),Z=b("fast-isnumeric"),ca=b("../../plots/plots"),W=b("../../registry"),T=b("../../lib"),U=T.strTranslate,ha=b("../../lib/svg_text_utils"),Y=b("../../components/titles"),ba=b("../../components/color"),
ja=b("../../components/drawing"),ma=b("./layout_attributes"),ia=b("./clean_ticks");G=b("../../constants/numerical");var oa=G.ONEMAXYEAR,xa=G.ONEAVGYEAR,ra=G.ONEMINYEAR,la=G.ONEMAXQUARTER,ka=G.ONEAVGQUARTER,na=G.ONEMINQUARTER,qa=G.ONEMAXMONTH,ta=G.ONEAVGMONTH,za=G.ONEMINMONTH,Ia=G.ONEWEEK,Xa=G.ONEDAY,$a=Xa/2,gb=G.ONEHOUR,sb=G.ONEMIN,jb=G.ONESEC,vb=G.MINUS_SIGN,qb=G.BADNUM,Bb={K:"zeroline"},ub={K:"gridline",L:"path"},wb={K:"tick",L:"path"},rb={K:"tick",L:"text"};G=b("../../constants/alignment");var Ab=
G.MID_SHIFT,Ma=G.CAP_SHIFT,La=G.LINE_SPACING,ya=G.OPPOSITE_SIDE,Aa=N.exports={};Aa.setConvert=b("./set_convert");var Ka=b("./axis_autotype");N=b("./axis_ids");var Ta=N.idSort,bb=N.isLinked;Aa.id2name=N.id2name;Aa.name2id=N.name2id;Aa.cleanId=N.cleanId;Aa.list=N.list;Aa.listIds=N.listIds;Aa.getFromId=N.getFromId;Aa.getFromTrace=N.getFromTrace;b=b("./autorange");Aa.getAutoRange=b.getAutoRange;Aa.findExtremes=b.findExtremes;Aa.coerceRef=function(Ja,Pa,db,Jb,Gb,cc){var uc=Jb.charAt(Jb.length-1);db=db._fullLayout._subplots[uc+
"axis"];Jb+="ref";uc={};Gb||(Gb=db[0]||("string"===typeof cc?cc:cc[0]));cc||(cc=Gb);db=db.concat(db.map(function(fd){return fd+" domain"}));uc[Jb]={valType:"enumerated",values:db.concat(cc?"string"===typeof cc?[cc]:cc:[]),dflt:Gb};return T.coerce(Ja,Pa,uc,Jb)};Aa.getRefType=function(Ja){return void 0===Ja?Ja:"paper"===Ja?"paper":"pixel"===Ja?"pixel":/( domain)$/.test(Ja)?"domain":"range"};Aa.coercePosition=function(Ja,Pa,db,Jb,Gb,cc){"range"!==Aa.getRefType(Jb)?(Pa=T.ensureNumber,db=db(Gb,cc)):(Pa=
Aa.getFromId(Pa,Jb),cc=Pa.fraction2r(cc),db=db(Gb,cc),Pa=Pa.cleanPos);Ja[Gb]=Pa(db)};Aa.cleanPosition=function(Ja,Pa,db){return("paper"===db||"pixel"===db?T.ensureNumber:Aa.getFromId(Pa,db).cleanPos)(Ja)};Aa.redrawComponents=function(Ja,Pa){function db(Gb,cc,uc,fd){Gb=W.getComponentMethod(Gb,cc);cc={};for(var kb=0;kb<Pa.length;kb++)for(var Qb=Jb[Aa.id2name(Pa[kb])][uc],dc=0;dc<Qb.length;dc++){var Ec=Qb[dc];if(!cc[Ec]&&(Gb(Ja,Ec),cc[Ec]=1,fd))return}}Pa=Pa?Pa:Aa.listIds(Ja);var Jb=Ja._fullLayout;db("annotations",
"drawOne","_annIndices");db("shapes","drawOne","_shapeIndices");db("images","draw","_imgIndices",!0)};var cb=Aa.getDataConversions=function(Ja,Pa,db,Jb){db="x"===db||"y"===db||"z"===db?db:Jb;if(Array.isArray(db)){if(Ja={type:Ka(Jb,void 0,{autotypenumbers:Ja._fullLayout.autotypenumbers}),_categories:[]},Aa.setConvert(Ja),"category"===Ja.type)for(Pa=0;Pa<Jb.length;Pa++)Ja.d2c(Jb[Pa])}else Ja=Aa.getFromTrace(Ja,Pa,db);return Ja?{d2c:Ja.d2c,c2d:Ja.c2d}:"ids"===db?{d2c:k,c2d:k}:{d2c:n,c2d:n}};Aa.getDataToCoordFunc=
function(Ja,Pa,db,Jb){return cb(Ja,Pa,db,Jb).d2c};Aa.counterLetter=function(Ja){Ja=Ja.charAt(0);if("x"===Ja)return"y";if("y"===Ja)return"x"};Aa.minDtick=function(Ja,Pa,db,Jb){if(-1!==["log","category","multicategory"].indexOf(Ja.type)||!Jb)Ja._minDtick=0;else if(void 0===Ja._minDtick)Ja._minDtick=Pa,Ja._forceTick0=db;else if(Ja._minDtick)if(2E-6>(Ja._minDtick/Pa+1E-6)%1&&2E-6>((db-Ja._forceTick0)/Pa%1+1.000001)%1)Ja._minDtick=Pa,Ja._forceTick0=db;else if(2E-6<(Pa/Ja._minDtick+1E-6)%1||2E-6<((db-Ja._forceTick0)/
Ja._minDtick%1+1.000001)%1)Ja._minDtick=0};Aa.saveRangeInitial=function(Ja,Pa){Ja=Aa.list(Ja,"",!0);for(var db=!1,Jb=0;Jb<Ja.length;Jb++){var Gb=Ja[Jb],cc=void 0===Gb._rangeInitial,uc=cc||!(Gb.range[0]===Gb._rangeInitial[0]&&Gb.range[1]===Gb._rangeInitial[1]);if(cc&&!1===Gb.autorange||Pa&&uc)Gb._rangeInitial=Gb.range.slice(),db=!0}return db};Aa.saveShowSpikeInitial=function(Ja,Pa){for(var db=Aa.list(Ja,"",!0),Jb=!1,Gb="on",cc=0;cc<db.length;cc++){var uc=db[cc],fd=void 0===uc._showSpikeInitial,kb=
fd||uc.showspikes!==uc._showspikes;if(fd||Pa&&kb)uc._showSpikeInitial=uc.showspikes,Jb=!0;"on"!==Gb||uc.showspikes||(Gb="off")}Ja._fullLayout._cartesianSpikesEnabled=Gb;return Jb};Aa.autoBin=function(Ja,Pa,db,Jb,Gb,cc){var uc=T.aggNums(Math.min,null,Ja),fd=T.aggNums(Math.max,null,Ja);if("category"===Pa.type||"multicategory"===Pa.type)return{start:uc-.5,end:fd+.5,size:Math.max(1,Math.round(cc)||1),_dataSpan:fd-uc};Gb||(Gb=Pa.calendar);var kb="log"===Pa.type?{type:"linear",range:[uc,fd]}:{type:Pa.type,
range:T.simpleMap([uc,fd],Pa.c2r,0,Gb),calendar:Gb};Aa.setConvert(kb);(cc=cc&&ia.dtick(cc,kb.type))?(kb.dtick=cc,kb.tick0=ia.tick0(void 0,kb.type,Gb)):(db?Jb=(fd-uc)/db:(db=T.distinctVals(Ja),cc=Math.pow(10,Math.floor(Math.log(db.minDiff)/Math.LN10)),db=cc*T.roundUp(db.minDiff/cc,[.9,1.9,4.9,9.9],!0),Jb=Math.max(db,2*T.stdev(Ja)/Math.pow(Ja.length,Jb?.25:.4)),Z(Jb)||(Jb=1)),Aa.autoTicks(kb,Jb));Jb=kb.dtick;db=Aa.tickIncrement(Aa.tickFirst(kb),Jb,"reverse",Gb);if("number"===typeof Jb)db=m(db,Ja,kb,
uc,fd),kb=1+Math.floor((fd-db)/Jb),Ja=db+kb*Jb;else{if("M"===kb.dtick.charAt(0))a:{kb=db;Ja=T.findExactDates(Ja,Gb);if(.8<Ja.exactDays&&(db=Number(Jb.substr(1)),kb=.8<Ja.exactYears&&0===db%12?Aa.tickIncrement(kb,"M6","reverse")+1.5*Xa:.8<Ja.exactMonths?Aa.tickIncrement(kb,"M1","reverse")+15.5*Xa:kb-$a,Ja=Aa.tickIncrement(kb,Jb),Ja<=uc)){db=Ja;break a}db=kb}Ja=db;for(kb=0;Ja<=fd;)Ja=Aa.tickIncrement(Ja,Jb,!1,Gb),kb++}return{start:Pa.c2r(db,0,Gb),end:Pa.c2r(Ja,0,Gb),size:Jb,_dataSpan:fd-uc}};Aa.prepTicks=
function(Ja,Pa){Pa=T.simpleMap(Ja.range,Ja.r2l,void 0,void 0,Pa);Ja._dtickInit=Ja.dtick;Ja._tick0Init=Ja.tick0;if("auto"===Ja.tickmode||!Ja.dtick){var db=Ja.nticks;db||("category"===Ja.type||"multicategory"===Ja.type?(db=Ja.tickfont?T.bigFont(Ja.tickfont.size||12):15,db=Ja._length/db):(db="y"===Ja._id.charAt(0)?40:80,db=T.constrain(Ja._length/db,4,9)+1),"radialaxis"===Ja._name&&(db*=2));"array"===Ja.tickmode&&(db*=100);Ja._roughDTick=Math.abs(Pa[1]-Pa[0])/db;Aa.autoTicks(Ja,Ja._roughDTick);0<Ja._minDtick&&
Ja.dtick<2*Ja._minDtick&&(Ja.dtick=Ja._minDtick,Ja.tick0=Ja.l2r(Ja._forceTick0))}if("period"===Ja.ticklabelmode){Pa=!(Z(Ja.dtick)||"M"!==Ja.dtick.charAt(0));if(db=Aa.getTickFormat(Ja)){var Jb=Ja._dtickInit!==Ja.dtick;if(!/%[fLQsSMX]/.test(db))if(/%[HI]/.test(db)){var Gb=gb;Jb&&!Pa&&Ja.dtick<gb&&(Ja.dtick=gb)}else/%p/.test(db)?(Gb=$a,Jb&&!Pa&&Ja.dtick<$a&&(Ja.dtick=$a)):/%[Aadejuwx]/.test(db)?(Gb=Xa,Jb&&!Pa&&Ja.dtick<Xa&&(Ja.dtick=Xa)):/%[UVW]/.test(db)?(Gb=Ia,Jb&&!Pa&&Ja.dtick<Ia&&(Ja.dtick=Ia)):
/%[Bbm]/.test(db)?(Gb=ta,Jb&&(Pa?1>+Ja.dtick.substring(1):Ja.dtick<za)&&(Ja.dtick="M1")):/%[q]/.test(db)?(Gb=ka,Jb&&(Pa?3>+Ja.dtick.substring(1):Ja.dtick<na)&&(Ja.dtick="M3")):/%[Yy]/.test(db)&&(Gb=xa,Jb&&(Pa?12>+Ja.dtick.substring(1):Ja.dtick<ra)&&(Ja.dtick="M12"))}(Pa=!(Z(Ja.dtick)||"M"!==Ja.dtick.charAt(0)))&&Ja.tick0===Ja._dowTick0&&(Ja.tick0=Ja._rawTick0);Ja._definedDelta=Gb}Ja.tick0||(Ja.tick0="date"===Ja.type?"2000-01-01":0);"date"===Ja.type&&.1>Ja.dtick&&(Ja.dtick=.1);h(Ja)};Aa.calcTicks=
function(Ja,Pa){Aa.prepTicks(Ja,Pa);var db=T.simpleMap(Ja.range,Ja.r2l,void 0,void 0,Pa);if("array"===Ja.tickmode)return a(Ja);var Jb=p(db),Gb=Jb[0],cc=Jb[1],uc=db[1]<db[0];Jb=Math.min(db[0],db[1]);var fd=Math.max(db[0],db[1]),kb="log"===Ja.type&&!(Z(Ja.dtick)||"L"===Ja.dtick.charAt(0)),Qb="period"===Ja.ticklabelmode;Ja._tmin=Aa.tickFirst(Ja,Pa);if(Ja._tmin<Gb!==uc)return[];if("category"===Ja.type||"multicategory"===Ja.type)cc=uc?Math.max(-.5,cc):Math.min(Ja._categories.length-.5,cc);var dc=Ja._tmin;
Ja.rangebreaks&&Ja._tick0Init!==Ja.tick0&&(dc=L(dc,Ja),uc||(dc=Aa.tickIncrement(dc,Ja.dtick,!uc,Ja.calendar)));Qb&&(dc=Aa.tickIncrement(dc,Ja.dtick,!uc,Ja.calendar));var Ec=Math.max(1E3,Ja._length||0);Pa=[];for(var Qc=null;uc?dc>=cc:dc<=cc;dc=Aa.tickIncrement(dc,Ja.dtick,uc,Ja.calendar)){if(Ja.rangebreaks&&!uc){if(dc<Gb)continue;if(Ja.maskBreaks(dc)===qb&&L(dc,Ja)>=fd)break}if(Pa.length>Ec||dc===Qc)break;Qc=dc;var Tc=!1;kb&&dc!==(dc|0)&&(Tc=!0);Pa.push({minor:Tc,value:dc})}if(Qb)for(Gb=Ja._definedDelta,
cc=0;cc<Pa.length;cc++){kb=Pa[cc].value;cc<Pa.length-1?(Qb=cc,dc=cc+1):(Qb=0<cc?cc-1:cc,dc=cc);Qb=Math.abs(Pa[dc].value-Pa[Qb].value);Ec=Gb||Qb;dc=0;Ec>=ra?dc=Qb>=ra&&Qb<=oa?Qb:xa:Gb===ka&&Ec>=na?dc=Qb>=na&&Qb<=la?Qb:ka:Ec>=za?dc=Qb>=za&&Qb<=qa?Qb:ta:Gb===Ia&&Ec>=Ia?dc=Ia:Ec>=Xa?dc=Xa:Gb===$a&&Ec>=$a?dc=$a:Gb===gb&&Ec>=gb&&(dc=gb);if(dc>=Qb){dc=Qb;var tb=!0}Ec=kb+dc;if(Ja.rangebreaks&&0<dc){for(Tc=Qc=0;84>Tc;Tc++){var Ib=(Tc+.5)/84;Ja.maskBreaks(kb*(1-Ib)+Ib*Ec)!==qb&&Qc++}dc*=Qc/84;dc||(Pa[cc].drop=
!0);tb&&Qb>Ia&&(dc=Qb)}if(0<dc||0===cc)Pa[cc].periodX=kb+dc/2}if(Ja.rangebreaks)for(Gb="y"===Ja._id.charAt(0),cc=1,"auto"===Ja.tickmode&&(cc=Ja.tickfont?Ja.tickfont.size:12),kb=NaN,tb=Pa.length-1;-1<tb;tb--)Pa[tb].drop?Pa.splice(tb,1):(Pa[tb].value=L(Pa[tb].value,Ja),Qb=Ja.c2p(Pa[tb].value),(Gb?kb>Qb-cc:kb<Qb+cc)?Pa.splice(uc?tb+1:tb,1):kb=Qb);"angularaxis"===Ja._id&&360===Math.abs(db[1]-db[0])&&Pa.pop();Ja._tmax=(Pa[Pa.length-1]||{}).value;Ja._prevDateHead="";Ja._inCalcTicks=!0;db=[];for(tb=0;tb<
Pa.length;tb++)uc=Aa.tickText(Ja,Pa[tb].value,!1,Pa[tb].minor),Gb=Pa[tb].periodX,void 0!==Gb&&(uc.periodX=Gb,Gb>fd||Gb<Jb)&&(Gb>fd&&(uc.periodX=fd),Gb<Jb&&(uc.periodX=Jb),uc.text=" ",Ja._prevDateHead=""),db.push(uc);Ja._inCalcTicks=!1;return db};var Eb=[2,5,10],Pb=[1,2,3,6,12],fc=[1,2,5,10,15,30],pb=[1,2,3,7,14],Db=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Rb=[-.301,0,.301,.699,1],xc=[15,30,45,90,180];Aa.autoTicks=function(Ja,Pa){function db(cc){return Math.pow(cc,Math.floor(Math.log(Pa)/
Math.LN10))}if("date"===Ja.type){Ja.tick0=T.dateTick0(Ja.calendar,0);var Jb=2*Pa;if(Jb>xa)Pa/=xa,Jb=db(10),Ja.dtick="M"+12*g(Pa,Jb,Eb);else if(Jb>ta)Pa/=ta,Ja.dtick="M"+g(Pa,1,Pb);else if(Jb>Xa){Ja.dtick=g(Pa,Xa,Ja._hasDayOfWeekBreaks?[1,2,7,14]:pb);Jb=Aa.getTickFormat(Ja);var Gb="period"===Ja.ticklabelmode;Gb&&(Ja._rawTick0=Ja.tick0);/%[uVW]/.test(Jb)?Ja.tick0=T.dateTick0(Ja.calendar,2):Ja.tick0=T.dateTick0(Ja.calendar,1);Gb&&(Ja._dowTick0=Ja.tick0)}else Jb>gb?Ja.dtick=g(Pa,gb,Pb):Jb>sb?Ja.dtick=
g(Pa,sb,fc):Jb>jb?Ja.dtick=g(Pa,jb,fc):(Jb=db(10),Ja.dtick=g(Pa,Jb,Eb))}else"log"===Ja.type?(Ja.tick0=0,Jb=T.simpleMap(Ja.range,Ja.r2l),.7<Pa?Ja.dtick=Math.ceil(Pa):1>Math.abs(Jb[1]-Jb[0])?(Pa=Math.abs(Math.pow(10,Jb[1])-Math.pow(10,Jb[0]))/(1.5*Math.abs((Jb[1]-Jb[0])/Pa)),Jb=db(10),Ja.dtick="L"+g(Pa,Jb,Eb)):Ja.dtick=.3<Pa?"D2":"D1"):"category"===Ja.type||"multicategory"===Ja.type?(Ja.tick0=0,Ja.dtick=Math.ceil(Math.max(Pa,1))):"angularaxis"===Ja._id?(Ja.tick0=0,Ja.dtick=g(Pa,1,xc)):(Ja.tick0=0,Jb=
db(10),Ja.dtick=g(Pa,Jb,Eb));0===Ja.dtick&&(Ja.dtick=1);if(!Z(Ja.dtick)&&"string"!==typeof Ja.dtick)throw Jb=Ja.dtick,Ja.dtick=1,"ax.dtick error: "+String(Jb);};Aa.tickIncrement=function(Ja,Pa,db,Jb){var Gb=db?-1:1;if(Z(Pa))return T.increment(Ja,Gb*Pa);var cc=Pa.charAt(0),uc=Gb*Number(Pa.substr(1));if("M"===cc)return T.incrementMonth(Ja,uc,Jb);if("L"===cc)return Math.log(Math.pow(10,Ja)+uc)/Math.LN10;if("D"===cc)return Pa="D2"===Pa?Rb:Db,Ja+=.01*Gb,db=T.roundUp(T.mod(Ja,1),Pa,db),Math.floor(Ja)+Math.log(Q.round(Math.pow(10,
db),1))/Math.LN10;throw"unrecognized dtick "+String(Pa);};Aa.tickFirst=function(Ja,Pa){var db=Ja.r2l||Number,Jb=T.simpleMap(Ja.range,db,void 0,void 0,Pa),Gb=(Pa=Jb[1]<Jb[0])?Math.floor:Math.ceil;Jb=p(Jb)[0];var cc=Ja.dtick,uc=db(Ja.tick0);if(Z(cc)){Pa=Gb((Jb-uc)/cc)*cc+uc;if("category"===Ja.type||"multicategory"===Ja.type)Pa=T.constrain(Pa,0,Ja._categories.length-1);return Pa}db=cc.charAt(0);var fd=Number(cc.substr(1));if("M"===db){Gb=0;for(var kb,Qb;10>Gb;){kb=Aa.tickIncrement(uc,cc,Pa,Ja.calendar);
if(0>=(kb-Jb)*(uc-Jb))return Pa?Math.min(uc,kb):Math.max(uc,kb);kb=(Jb-(uc+kb)/2)/(kb-uc);Qb=db+(Math.abs(Math.round(kb))||1)*fd;uc=Aa.tickIncrement(uc,Qb,0>kb?!Pa:Pa,Ja.calendar);Gb++}T.error("tickFirst did not converge",Ja);return uc}if("L"===db)return Math.log(Gb((Math.pow(10,Jb)-uc)/fd)*fd+uc)/Math.LN10;if("D"===db)return Ja="D2"===cc?Rb:Db,Ja=T.roundUp(T.mod(Jb,1),Ja,Pa),Math.floor(Jb)+Math.log(Q.round(Math.pow(10,Ja),1))/Math.LN10;throw"unrecognized dtick "+String(cc);};Aa.tickText=function(Ja,
Pa,db,Jb){function Gb(Ec){if(void 0===Ec)return!0;if(db)return"none"===Ec;var Qc={first:Ja._tmin,last:Ja._tmax}[Ec];return"all"!==Ec&&Pa!==Qc}var cc=r(Ja,Pa),uc="array"===Ja.tickmode,fd=db||uc,kb=Ja.type,Qb="category"===kb?Ja.d2l_noadd:Ja.d2l;if(uc&&Array.isArray(Ja.ticktext)){uc=T.simpleMap(Ja.range,Ja.r2l);var dc=(Math.abs(uc[1]-uc[0])-(Ja._lBreaks||0))/1E4;for(uc=0;uc<Ja.ticktext.length&&!(Math.abs(Pa-Qb(Ja.tickvals[uc]))<dc);uc++);if(uc<Ja.ticktext.length)return cc.text=String(Ja.ticktext[uc]),
cc}Qb=db?"never":"none"!==Ja.exponentformat&&Gb(Ja.showexponent)?"hide":"";"date"===kb?l(Ja,cc,db,fd):"log"===kb?c(Ja,cc,db,fd,Qb):"category"===kb?d(Ja,cc):"multicategory"===kb?e(Ja,cc,db):"angularaxis"===Ja._id?q(Ja,cc,db,fd,Qb):f(Ja,cc,db,fd,Qb);Jb||(Ja.tickprefix&&!Gb(Ja.showtickprefix)&&(cc.text=Ja.tickprefix+cc.text),Ja.ticksuffix&&!Gb(Ja.showticksuffix)&&(cc.text+=Ja.ticksuffix));if("boundaries"===Ja.tickson||Ja.showdividers)Jb=function(Ec){var Qc=Ja.l2p(Ec);return 0<=Qc&&Qc<=Ja._length?Ec:
null},cc.xbnd=[Jb(cc.x-.5),Jb(cc.x+Ja.dtick-.5)];return cc};Aa.hoverLabelText=function(Ja,Pa,db){db&&(Ja=T.extendFlat({},Ja,{hoverformat:db}));var Jb=Array.isArray(Pa)?Pa[0]:Pa;Pa=Array.isArray(Pa)?Pa[1]:void 0;if(void 0!==Pa&&Pa!==Jb)return Aa.hoverLabelText(Ja,Jb,db)+" - "+Aa.hoverLabelText(Ja,Pa,db);db="log"===Ja.type&&0>=Jb;Ja=Aa.tickText(Ja,Ja.c2l(db?-Jb:Jb),"hover").text;return db?0===Jb?"0":vb+Ja:Ja};var Ic="f p n  m  k M G T".split(" ");Aa.getTickFormat=function(Ja){function Pa(kb){return"string"!==
typeof kb?kb:Number(kb.replace("M",""))*ta}function db(kb,Qb){var dc=["L","D"];if(typeof kb===typeof Qb){if("number"===typeof kb)return kb-Qb;var Ec=dc.indexOf(kb.charAt(0));dc=dc.indexOf(Qb.charAt(0));return Ec===dc?Number(kb.replace(/(L|D)/g,""))-Number(Qb.replace(/(L|D)/g,"")):Ec-dc}return"number"===typeof kb?1:-1}function Jb(kb,Qb,dc){dc=dc||function(Qc){return Qc};var Ec=Qb[0];Qb=Qb[1];return(!Ec&&"number"!==typeof Ec||dc(Ec)<=dc(kb))&&(!Qb&&"number"!==typeof Qb||dc(Qb)>=dc(kb))}function Gb(kb,
Qb){var dc=null===Qb[0],Ec=null===Qb[1],Qc=0<=db(kb,Qb[0]);kb=0>=db(kb,Qb[1]);return(dc||Qc)&&(Ec||kb)}var cc;if(Ja.tickformatstops&&0<Ja.tickformatstops.length)switch(Ja.type){case "date":case "linear":for(cc=0;cc<Ja.tickformatstops.length;cc++){var uc=Ja.tickformatstops[cc];if(uc.enabled&&Jb(Ja.dtick,uc.dtickrange,Pa)){var fd=uc;break}}break;case "log":for(cc=0;cc<Ja.tickformatstops.length;cc++)if(uc=Ja.tickformatstops[cc],uc.enabled&&Gb(Ja.dtick,uc.dtickrange)){fd=uc;break}}return fd?fd.value:
Ja.tickformat};Aa.getSubplots=function(Ja,Pa){Ja=Ja._fullLayout._subplots;Ja=Ja.cartesian.concat(Ja.gl2d||[]);Pa=Pa?Aa.findSubplotsWithAxis(Ja,Pa):Ja;Pa.sort(function(db,Jb){db=db.substr(1).split("y");Jb=Jb.substr(1).split("y");return db[0]===Jb[0]?+db[1]-+Jb[1]:+db[0]-+Jb[0]});return Pa};Aa.findSubplotsWithAxis=function(Ja,Pa){Pa=new RegExp("x"===Pa._id.charAt(0)?"^"+Pa._id+"y":Pa._id+"$");for(var db=[],Jb=0;Jb<Ja.length;Jb++){var Gb=Ja[Jb];Pa.test(Gb)&&db.push(Gb)}return db};Aa.makeClipPaths=function(Ja){var Pa=
Ja._fullLayout;if(!Pa._hasOnlyLargeSploms){var db={_offset:0,_length:Pa.width,_id:""},Jb={_offset:0,_length:Pa.height,_id:""},Gb=Aa.list(Ja,"x",!0);Ja=Aa.list(Ja,"y",!0);var cc=[],uc,fd;for(uc=0;uc<Gb.length;uc++)for(cc.push({x:Gb[uc],y:Jb}),fd=0;fd<Ja.length;fd++)0===uc&&cc.push({x:db,y:Ja[fd]}),cc.push({x:Gb[uc],y:Ja[fd]});db=Pa._clips.selectAll(".axesclip").data(cc,function(kb){return kb.x._id+kb.y._id});db.enter().append("clipPath").classed("axesclip",!0).attr("id",function(kb){return"clip"+Pa._uid+
kb.x._id+kb.y._id}).append("rect");db.exit().remove();db.each(function(kb){Q.select(this).select("rect").attr({x:kb.x._offset||0,y:kb.y._offset||0,width:kb.x._length||1,height:kb.y._length||1})})}};Aa.draw=function(Ja,Pa,db){var Jb=Ja._fullLayout;"redraw"===Pa&&Jb._paper.selectAll("g.subplot").each(function(Gb){if(Gb=Jb._plots[Gb[0]]){var cc=Gb.xaxis,uc=Gb.yaxis;Gb.xaxislayer.selectAll("."+cc._id+"tick").remove();Gb.yaxislayer.selectAll("."+uc._id+"tick").remove();Gb.xaxislayer.selectAll("."+cc._id+
"tick2").remove();Gb.yaxislayer.selectAll("."+uc._id+"tick2").remove();Gb.xaxislayer.selectAll("."+cc._id+"divider").remove();Gb.yaxislayer.selectAll("."+uc._id+"divider").remove();Gb.gridlayer&&Gb.gridlayer.selectAll("path").remove();Gb.zerolinelayer&&Gb.zerolinelayer.selectAll("path").remove();Jb._infolayer.select(".g-"+cc._id+"title").remove();Jb._infolayer.select(".g-"+uc._id+"title").remove()}});Pa=Pa&&"redraw"!==Pa?Pa:Aa.listIds(Ja);return T.syncOrAsync(Pa.map(function(Gb){return function(){if(Gb){var cc=
Aa.getFromId(Ja,Gb),uc=Aa.drawOne(Ja,cc,db);cc._r=cc.range.slice();cc._rl=T.simpleMap(cc._r,cc.r2l);return uc}}}))};Aa.drawOne=function(Ja,Pa,db){function Jb(Lc){Lc=uc+(Lc||"tick");tb[Lc]||(tb[Lc]=A(Pa,Lc));return tb[Lc]}db=db||{};var Gb;Pa.setScale();var cc=Ja._fullLayout,uc=Pa._id,fd=uc.charAt(0),kb=Aa.counterLetter(uc),Qb=cc._plots[Pa._mainSubplot];if(Qb){var dc=Qb[fd+"axislayer"],Ec=Pa._mainLinePosition;Qb=Pa._mainMirrorPosition;var Qc=Pa._vals=Aa.calcTicks(Pa),Tc=[Pa.mirror,Ec,Qb].join("_");
for(Gb=0;Gb<Qc.length;Gb++)Qc[Gb].axInfo=Tc;Pa._selections={};Pa._tickAngles&&(Pa._prevTickAngles=Pa._tickAngles);Pa._tickAngles={};Pa._depth=null;var tb={};if(Pa.visible){var Ib=Aa.makeTransTickFn(Pa),sc=Aa.makeTransTickLabelFn(Pa);Tc="inside"===Pa.ticks;var pc="outside"===Pa.ticks;if("boundaries"===Pa.tickson){var zc=z(Pa,Qc);Gb=Aa.clipEnds(Pa,zc);Tc=Tc?Gb:zc}else Gb=Aa.clipEnds(Pa,Qc),Tc=Tc&&"period"!==Pa.ticklabelmode?Gb:Qc;zc=Pa._gridVals=Gb;var Wb=B(Pa,Qc);if(!cc._hasOnlyLargeSploms){var Ub=
Pa._subplotsWith,yb={};for(Gb=0;Gb<Ub.length;Gb++){var ac=Ub[Gb];var Vb=cc._plots[ac];ac=Vb[kb+"axis"];var mc=ac._mainAxis._id;yb[mc]||(yb[mc]=1,mc="x"===fd?"M0,"+ac._offset+"v"+ac._length:"M"+ac._offset+",0h"+ac._length,Aa.drawGrid(Ja,Pa,{vals:zc,counterAxis:ac,layer:Vb.gridlayer.select("."+uc),path:mc,transFn:Ib}),Aa.drawZeroLine(Ja,Pa,{counterAxis:ac,layer:Vb.zerolinelayer,path:mc,transFn:Ib}))}}var tc=Aa.getTickSigns(Pa);zc=[];if(Pa.ticks){Gb=Aa.makeTickPath(Pa,Ec,tc[2]);if(Pa._anchorAxis&&Pa.mirror&&
!0!==Pa.mirror){var Uc=Aa.makeTickPath(Pa,Qb,tc[3]);var kd=Gb+Uc}else Uc="",kd=Gb;if(Pa.showdividers&&pc&&"boundaries"===Pa.tickson){var Bd={};for(Gb=0;Gb<Wb.length;Gb++)Bd[Wb[Gb].x]=1;Qb=function(Lc){return Bd[Lc.x]?Uc:kd}}else Qb=kd;Aa.drawTicks(Ja,Pa,{vals:Tc,layer:dc,path:Qb,transFn:Ib});"allticks"===Pa.mirror&&(zc=Object.keys(Pa._linepositions||{}))}for(Gb=0;Gb<zc.length;Gb++)ac=zc[Gb],Vb=cc._plots[ac],Qb=Pa._linepositions[ac]||[],Qb=Aa.makeTickPath(Pa,Qb[0],tc[0])+Aa.makeTickPath(Pa,Qb[1],tc[1]),
Aa.drawTicks(Ja,Pa,{vals:Tc,layer:Vb[fd+"axislayer"],path:Qb,transFn:Ib});Qb=[];Qb.push(function(){return Aa.drawLabels(Ja,Pa,{vals:Qc,layer:dc,plotinfo:Vb,transFn:sc,labelFns:Aa.makeLabelFns(Pa,Ec)})});if("multicategory"===Pa.type){var Fd={x:2,y:10}[fd];Qb.push(function(){var Lc={x:"height",y:"width"}[fd];Lc=Jb()[Lc]+Fd+(Pa._tickAngles[uc+"tick"]?Pa.tickfont.size*La:0);for(var cd=Aa,Nc=cd.drawLabels,Xc=[],Zc={},Sc=0;Sc<Qc.length;Sc++){var id=Qc[Sc];Zc[id.text2]?Zc[id.text2].push(id.x):Zc[id.text2]=
[id.x]}for(var Nd in Zc)Xc.push(r(Pa,T.interp(Zc[Nd],.5),Nd));return Nc.call(cd,Ja,Pa,{vals:Xc,layer:dc,cls:uc+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:Ib,labelFns:Aa.makeLabelFns(Pa,Ec+Lc*tc[4])})});Qb.push(function(){Pa._depth=tc[4]*(Jb("tick2")[Pa.side]-Ec);var Lc=Aa.makeTickPath(Pa,Ec,tc[4],Pa._depth),cd=Pa._id+"divider",Nc=dc.selectAll("path."+cd).data(Wb,v);Nc.exit().remove();Nc.enter().insert("path",":first-child").classed(cd,1).classed("crisp",1).call(ba.stroke,Pa.dividercolor).style("stroke-width",
ja.crispRound(Ja,Pa.dividerwidth,1)+"px");Nc.attr("transform",Ib).attr("d",Lc)})}else Pa.title.hasOwnProperty("standoff")&&Qb.push(function(){Pa._depth=tc[4]*(Jb()[Pa.side]-Ec)});var yd=W.getComponentMethod("rangeslider","isVisible")(Pa);Qb.push(function(){var Lc=Pa.side.charAt(0),cd=ya[Pa.side].charAt(0),Nc=Aa.getPxPosition(Ja,Pa),Xc=pc?Pa.ticklen:0,Zc;if(Pa.automargin||yd)if("multicategory"===Pa.type)var Sc=Jb("tick2");else Sc=Jb(),"x"===fd&&"b"===Lc&&(Pa._depth=Math.max(0<Sc.width?Sc.bottom-Nc:
0,Xc));if(Pa.automargin){var id={x:0,y:0,r:0,l:0,t:0,b:0};var Nd=[0,1];"x"===fd?("b"===Lc?id[Lc]=Pa._depth:(id[Lc]=Pa._depth=Math.max(0<Sc.width?Nc-Sc.top:0,Xc),Nd.reverse()),0<Sc.width&&(Nc=Sc.right-(Pa._offset+Pa._length),0<Nc&&(id.xr=1,id.r=Nc),Sc=Pa._offset-Sc.left,0<Sc&&(id.xl=0,id.l=Sc))):("l"===Lc?id[Lc]=Pa._depth=Math.max(0<Sc.height?Nc-Sc.left:0,Xc):(id[Lc]=Pa._depth=Math.max(0<Sc.height?Sc.right-Nc:0,Xc),Nd.reverse()),0<Sc.height&&(Nc=Sc.bottom-(Pa._offset+Pa._length),0<Nc&&(id.yb=0,id.b=
Nc),Sc=Pa._offset-Sc.top,0<Sc&&(id.yt=1,id.t=Sc)));id[kb]="free"===Pa.anchor?Pa.position:Pa._anchorAxis.domain[Nd[0]];Pa.title.text!==cc._dfltTitle[fd]&&(id[Lc]+=y(Pa)+(Pa.title.standoff||0));if(Pa.mirror&&"free"!==Pa.anchor){var Rd={x:0,y:0,r:0,l:0,t:0,b:0};Rd[cd]=Pa.linewidth;Pa.mirror&&!0!==Pa.mirror&&(Rd[cd]+=Xc);if(!0===Pa.mirror||"ticks"===Pa.mirror)Rd[kb]=Pa._anchorAxis.domain[Nd[1]];else if("all"===Pa.mirror||"allticks"===Pa.mirror)Rd[kb]=[Pa._counterDomainMin,Pa._counterDomainMax][Nd[1]]}}yd&&
(Zc=W.getComponentMethod("rangeslider","autoMarginOpts")(Ja,Pa));ca.autoMargin(Ja,O(Pa),id);ca.autoMargin(Ja,O(Pa)+".mirror",Rd);ca.autoMargin(Ja,Pa._id+".rangeslider",Zc)});db.skipTitle||yd&&"bottom"===Pa.side||Qb.push(function(){var Lc=Ja._fullLayout,cd=Pa._id,Nc=cd.charAt(0),Xc=Pa.title.font.size;if(Pa.title.hasOwnProperty("standoff"))var Zc=Pa._depth+Pa.title.standoff+y(Pa);else{var Sc=H(Pa);"multicategory"===Pa.type?Zc=Pa._depth:(Zc=1.5*Xc,Sc&&(Zc=.5*Xc,"outside"===Pa.ticks&&(Zc+=Pa.ticklen)),
Zc=10+Zc+(Pa.linewidth?Pa.linewidth-1:0));Sc||(Zc="x"===Nc?Zc+("top"===Pa.side?Xc*(Pa.showticklabels?1:0):Xc*(Pa.showticklabels?1.5:.5)):Zc+("right"===Pa.side?Xc*(Pa.showticklabels?1:.5):Xc*(Pa.showticklabels?.5:0)))}var id=Aa.getPxPosition(Ja,Pa);if("x"===Nc)Xc=Pa._offset+Pa._length/2,Sc="top"===Pa.side?id-Zc:id+Zc;else{Sc=Pa._offset+Pa._length/2;Xc="right"===Pa.side?id+Zc:id-Zc;var Nd={rotate:"-90",offset:0}}if("multicategory"!==Pa.type){Zc=Pa._selections[Pa._id+"tick"];var Rd={selection:Zc,side:Pa.side};
Zc&&Zc.node()&&Zc.node().parentNode&&(Zc=ja.getTranslate(Zc.node().parentNode),Rd.offsetLeft=Zc.x,Rd.offsetTop=Zc.y);Pa.title.hasOwnProperty("standoff")&&(Rd.pad=0)}return Y.draw(Ja,cd+"title",{propContainer:Pa,propName:Pa._name+".title.text",placeholder:Lc._dfltTitle[Nc],avoid:Rd,transform:Nd,attributes:{x:Xc,y:Sc,"text-anchor":"middle"}})});return T.syncOrAsync(Qb)}}};Aa.getTickSigns=function(Ja){var Pa=Ja._id.charAt(0),db=Ja.side==={x:"top",y:"right"}[Pa]?1:-1;db=[-1,1,db,-db];"inside"!==Ja.ticks===
("x"===Pa)&&(db=db.map(function(Jb){return-Jb}));Ja.side&&db.push({l:-1,t:-1,r:1,b:1}[Ja.side.charAt(0)]);return db};Aa.makeTransTickFn=function(Ja){return"x"===Ja._id.charAt(0)?function(Pa){return U(Ja._offset+Ja.l2p(Pa.x),0)}:function(Pa){return U(0,Ja._offset+Ja.l2p(Pa.x))}};Aa.makeTransTickLabelFn=function(Ja){var Pa=C(Ja),db=Pa[0],Jb=Pa[1];return"x"===Ja._id.charAt(0)?function(Gb){return U(db+Ja._offset+Ja.l2p(D(Gb)),Jb)}:function(Gb){return U(Jb,db+Ja._offset+Ja.l2p(D(Gb)))}};Aa.makeTickPath=
function(Ja,Pa,db,Jb){Jb=void 0!==Jb?Jb:Ja.ticklen;var Gb=Ja._id.charAt(0);Ja=(Ja.linewidth||1)/2;return"x"===Gb?"M0,"+(Pa+Ja*db)+"v"+Jb*db:"M"+(Pa+Ja*db)+",0h"+Jb*db};Aa.makeLabelFns=function(Ja,Pa,db){var Jb=Ja.ticklabelposition||"",Gb=function(Wb){return-1!==Jb.indexOf(Wb)},cc=Gb("top"),uc=Gb("left"),fd=Gb("right"),kb=Gb("bottom")||uc||cc||fd,Qb=Gb("inside"),dc="inside"===Jb&&"inside"===Ja.ticks||!Qb&&"outside"===Ja.ticks&&"boundaries"!==Ja.tickson;cc=Gb=0;var Ec=dc?Ja.ticklen:0;Qb?Ec*=-1:kb&&
(Ec=0);dc&&(Gb+=Ec,db&&(cc=T.deg2rad(db),Gb=Ec*Math.cos(cc)+1,cc=Ec*Math.sin(cc)));Ja.showticklabels&&(dc||Ja.showline)&&(Gb+=.2*Ja.tickfont.size);Gb+=(Ja.linewidth||1)/2*(Qb?-1:1);db={labelStandoff:Gb,labelShift:cc};var Qc=0;dc=Ja.side;Ec=Ja._id.charAt(0);var Tc=Ja.tickangle,tb;if("x"===Ec){var Ib=(tb=!Qb&&"bottom"===dc||Qb&&"top"===dc)?1:-1;Qb&&(Ib*=-1);var sc=cc*Ib;var pc=Pa+Gb*Ib;var zc=tb?1:-.2;90===Math.abs(Tc)&&(zc=Qb?zc+Ab:-90===Tc&&"bottom"===dc?Ma:90===Tc&&"top"===dc?Ab:.5,Qc=Ab/2*(Tc/90));
db.xFn=function(Wb){return Wb.dx+sc+Qc*Wb.fontSize};db.yFn=function(Wb){return Wb.dy+pc+Wb.fontSize*zc};db.anchorFn=function(Wb,Ub){if(kb){if(uc)return"end";if(fd)return"start"}return Z(Ub)&&0!==Ub&&180!==Ub?0>Ub*Ib!==Qb?"end":"start":"middle"};db.heightFn=function(Wb,Ub,yb){return-60>Ub||60<Ub?-.5*yb:"top"===Ja.side!==Qb?-yb:0}}else"y"===Ec&&(Ib=(tb=!Qb&&"left"===dc||Qb&&"right"===dc)?1:-1,Qb&&(Ib*=-1),sc=Gb,pc=cc*Ib,zc=0,Qb||90!==Math.abs(Tc)||(zc=-90===Tc&&"left"===dc||90===Tc&&"right"===dc?Ma:
.5),Qb&&(Gb=Z(Tc)?+Tc:0,0!==Gb&&(Gb=T.deg2rad(Gb),Qc=Math.abs(Math.sin(Gb))*Ma*Ib,zc=0)),db.xFn=function(Wb){return Wb.dx+Pa-(sc+Wb.fontSize*zc)*Ib+Qc*Wb.fontSize},db.yFn=function(Wb){return Wb.dy+pc+Wb.fontSize*Ab},db.anchorFn=function(Wb,Ub){return Z(Ub)&&90===Math.abs(Ub)?"middle":tb?"end":"start"},db.heightFn=function(Wb,Ub,yb){"right"===Ja.side&&(Ub*=-1);return-30>Ub?-yb:30>Ub?-.5*yb:0});return db};Aa.drawTicks=function(Ja,Pa,db){db=db||{};var Jb=Pa._id+"tick",Gb=db.vals;"period"===Pa.ticklabelmode&&
(Gb=Gb.slice(),Gb.shift());Gb=db.layer.selectAll("path."+Jb).data(Pa.ticks?Gb:[],v);Gb.exit().remove();Gb.enter().append("path").classed(Jb,1).classed("ticks",1).classed("crisp",!1!==db.crisp).call(ba.stroke,Pa.tickcolor).style("stroke-width",ja.crispRound(Ja,Pa.tickwidth,1)+"px").attr("d",db.path).style("display",null);M(Pa,[wb]);Gb.attr("transform",db.transFn)};Aa.drawGrid=function(Ja,Pa,db){db=db||{};var Jb=Pa._id+"grid",Gb=db.vals,cc=db.counterAxis;if(!1===Pa.showgrid)Gb=[];else if(cc&&Aa.shouldShowZeroLine(Ja,
Pa,cc)){cc="array"===Pa.tickmode;for(var uc=0;uc<Gb.length;uc++){var fd=Gb[uc].x;if(cc?!fd:Math.abs(fd)<Pa.dtick/100)if(Gb=Gb.slice(0,uc).concat(Gb.slice(uc+1)),cc)uc--;else break}}Gb=db.layer.selectAll("path."+Jb).data(Gb,v);Gb.exit().remove();Gb.enter().append("path").classed(Jb,1).classed("crisp",!1!==db.crisp);Pa._gw=ja.crispRound(Ja,Pa.gridwidth,1);Gb.attr("transform",db.transFn).attr("d",db.path).call(ba.stroke,Pa.gridcolor||"#ddd").style("stroke-width",Pa._gw+"px").style("display",null);M(Pa,
[ub]);"function"===typeof db.path&&Gb.attr("d",db.path)};Aa.drawZeroLine=function(Ja,Pa,db){db=db||db;var Jb=Pa._id+"zl",Gb=Aa.shouldShowZeroLine(Ja,Pa,db.counterAxis);Gb=db.layer.selectAll("path."+Jb).data(Gb?[{x:0,id:Pa._id}]:[]);Gb.exit().remove();Gb.enter().append("path").classed(Jb,1).classed("zl",1).classed("crisp",!1!==db.crisp).each(function(){db.layer.selectAll("path").sort(function(cc,uc){return Ta(cc.id,uc.id)})});Gb.attr("transform",db.transFn).attr("d",db.path).call(ba.stroke,Pa.zerolinecolor||
ba.defaultLine).style("stroke-width",ja.crispRound(Ja,Pa.zerolinewidth,Pa._gw||1)+"px").style("display",null);M(Pa,[Bb])};Aa.drawLabels=function(Ja,Pa,db){function Jb(pc,zc){pc.each(function(Wb){var Ub=Q.select(this),yb=Ub.select(".text-math-group"),ac=dc.anchorFn(Wb,zc),Vb=db.transFn.call(Ub.node(),Wb)+(Z(zc)&&0!==+zc?" rotate("+zc+","+dc.xFn(Wb)+","+(dc.yFn(Wb)-Wb.fontSize/2)+")":""),mc=ha.lineCount(Ub),tc=La*Wb.fontSize;(Wb=dc.heightFn(Wb,Z(zc)?+zc:0,(mc-1)*tc))&&(Vb+=U(0,Wb));yb.empty()?(yb=Ub.select("text"),
yb.attr({transform:Vb,"text-anchor":ac}),yb.style("opacity",1),Pa._adjustTickLabelsOverflow&&Pa._adjustTickLabelsOverflow()):(ac=ja.bBox(yb.node()).width*{end:-.5,start:.5}[ac],yb.attr("transform",Vb+U(ac,0)))})}function Gb(){Jb(Tc,Ec);if(Qb.length&&"x"===fd&&!Z(Ec)&&("log"!==Pa.type||"D"!==String(Pa.dtick).charAt(0))){var pc=Ib=0,zc=[];Tc.each(function(mc){pc=Math.max(pc,mc.fontSize);mc=Pa.l2p(mc.x);var tc=K(this);tc=ja.bBox(tc.node());zc.push({top:0,bottom:10,height:10,left:mc-tc.width/2,right:mc+
tc.width/2+2,width:tc.width+2})});if("boundaries"!==Pa.tickson&&!Pa.showdividers||db.secondary){var Wb=Qb.length;Wb=Math.abs((Qb[Wb-1].x-Qb[0].x)*Pa._m)/(Wb-1);var Ub=Pa.ticklabelposition||"",yb=-1!==Ub.indexOf("top"),ac=-1!==Ub.indexOf("left"),Vb=-1!==Ub.indexOf("right");Ub=-1!==Ub.indexOf("bottom")||ac||yb||Vb?(Pa.tickwidth||0)+6:0;yb=Wb<2.5*pc||"multicategory"===Pa.type;for(Wb=0;Wb<zc.length-1;Wb++)if(T.bBoxIntersect(zc[Wb],zc[Wb+1],Ub)){Ib=yb?90:30;break}}else for(Ub=2,Pa.ticks&&(Ub+=Pa.tickwidth/
2),Wb=0;Wb<zc.length;Wb++)if(yb=Qb[Wb].xbnd,ac=zc[Wb],null!==yb[0]&&ac.left-Pa.l2p(yb[0])<Ub||null!==yb[1]&&Pa.l2p(yb[1])-ac.right<Ub){Ib=90;break}Ib&&Jb(Tc,Ib)}}db=db||{};var cc=Ja._fullLayout,uc=Pa._id,fd=uc.charAt(0),kb=db.cls||uc+"tick",Qb=db.vals,dc=db.labelFns,Ec=db.secondary?0:Pa.tickangle,Qc=(Pa._prevTickAngles||{})[kb],Tc=db.layer.selectAll("g."+kb).data(Pa.showticklabels?Qb:[],v),tb=[];Tc.enter().append("g").classed(kb,1).append("text").attr("text-anchor","middle").each(function(pc){var zc=
Q.select(this),Wb=Ja._promises.length;zc.call(ha.positionText,dc.xFn(pc),dc.yFn(pc)).call(ja.font,pc.font,pc.fontSize,pc.fontColor).text(pc.text).call(ha.convertToTspans,Ja);Ja._promises[Wb]?tb.push(Ja._promises.pop().then(function(){Jb(zc,Ec)})):Jb(zc,Ec)});M(Pa,[rb]);Tc.exit().remove();db.repositionOnUpdate&&Tc.each(function(pc){Q.select(this).select("text").call(ha.positionText,dc.xFn(pc),dc.yFn(pc))});Pa._adjustTickLabelsOverflow=function(){var pc=Pa.ticklabeloverflow;if(pc&&"allow"!==pc){var zc=
-1!==pc.indexOf("hide"),Wb="x"===Pa._id.charAt(0),Ub=0,yb=Wb?Ja._fullLayout.width:Ja._fullLayout.height;-1!==pc.indexOf("domain")&&(pc=T.simpleMap(Pa.range,Pa.r2l),Ub=Pa.l2p(pc[0])+Pa._offset,yb=Pa.l2p(pc[1])+Pa._offset);var ac=Math.min(Ub,yb),Vb=Math.max(Ub,yb),mc=Pa.side,tc=Infinity,Uc=-Infinity;Tc.each(function(Bd){var Fd=Q.select(this);if(Fd.select(".text-math-group").empty()){var yd=ja.bBox(Fd.node()),Lc=0;Wb?yd.right>Vb?Lc=1:yd.left<ac&&(Lc=1):yd.bottom>Vb?Lc=1:yd.top+(Pa.tickangle?0:Bd.fontSize/
4)<ac&&(Lc=1);Bd=Fd.select("text");Lc?zc&&Bd.style("opacity",0):(Bd.style("opacity",1),tc="bottom"===mc||"right"===mc?Math.min(tc,Wb?yd.top:yd.left):-Infinity,Uc="top"===mc||"left"===mc?Math.max(Uc,Wb?yd.bottom:yd.right):Infinity)}});for(var kd in cc._plots)if(Ub=cc._plots[kd],Pa._id===Ub.xaxis._id||Pa._id===Ub.yaxis._id)if(Ub=Wb?Ub.yaxis:Ub.xaxis)Ub["_visibleLabelMin_"+Pa._id]=tc,Ub["_visibleLabelMax_"+Pa._id]=Uc}};Pa._hideCounterAxisInsideTickLabels=function(pc){var zc="x"===Pa._id.charAt(0),Wb=
[],Ub;for(Ub in cc._plots){var yb=cc._plots[Ub];Pa._id!==yb.xaxis._id&&Pa._id!==yb.yaxis._id||Wb.push(zc?yb.yaxis:yb.xaxis)}Wb.forEach(function(ac,Vb){ac&&H(ac)&&(pc||[Bb,ub,wb,rb]).forEach(function(mc){var tc="tick"===mc.K&&"text"===mc.L&&"period"===Pa.ticklabelmode,Uc=cc._plots[Pa._mainSubplot];(mc.K===Bb.K?Uc.zerolinelayer.selectAll("."+Pa._id+"zl"):mc.K===ub.K?Uc.gridlayer.selectAll("."+Pa._id):Uc[Pa._id.charAt(0)+"axislayer"]).each(function(){var kd=Q.select(this);mc.L&&(kd=kd.selectAll(mc.L));
kd.each(function(Bd){Bd=Pa.l2p(tc?D(Bd):Bd.x)+Pa._offset;var Fd=Q.select(this);Bd<Pa["_visibleLabelMax_"+ac._id]&&Bd>Pa["_visibleLabelMin_"+ac._id]?Fd.style("display","none"):"tick"!==mc.K||Vb||Fd.style("display",null)})})})})};Jb(Tc,Qc+1?Qc:Ec);var Ib=null;Pa._selections&&(Pa._selections[kb]=Tc);uc=[function(){return tb.length&&Promise.all(tb)}];Pa.automargin&&cc._redrawFromAutoMarginCount&&90===Qc?(Ib=90,uc.push(function(){Jb(Tc,Qc)})):uc.push(Gb);Pa._tickAngles&&uc.push(function(){Pa._tickAngles[kb]=
null===Ib?Z(Ec)?Ec:0:Ib});var sc=Pa._anchorAxis;sc&&sc.autorange&&H(Pa)&&!bb(cc,Pa._id)&&(cc._insideTickLabelsAutorange||(cc._insideTickLabelsAutorange={}),cc._insideTickLabelsAutorange[sc._name+".autorange"]=sc.autorange,uc.push(function(){Tc.each(function(pc,zc){pc=K(this);pc.select(".text-math-group").empty()&&(Pa._vals[zc].bb=ja.bBox(pc.node()))})}));(uc=T.syncOrAsync(uc))&&uc.then&&Ja._promises.push(uc);return uc};Aa.getPxPosition=function(Ja,Pa){Ja=Ja._fullLayout._size;var db=Pa._id.charAt(0),
Jb=Pa.side,Gb;"free"!==Pa.anchor?Gb=Pa._anchorAxis:"x"===db?Gb={_offset:Ja.t+(1-(Pa.position||0))*Ja.h,_length:0}:"y"===db&&(Gb={_offset:Ja.l+(Pa.position||0)*Ja.w,_length:0});if("top"===Jb||"left"===Jb)return Gb._offset;if("bottom"===Jb||"right"===Jb)return Gb._offset+Gb._length};Aa.shouldShowZeroLine=function(Ja,Pa,db){var Jb=T.simpleMap(Pa.range,Pa.r2l),Gb;if(Gb=0>=Jb[0]*Jb[1]&&Pa.zeroline&&("linear"===Pa.type||"-"===Pa.type)&&!(Pa.rangebreaks&&Pa.maskBreaks(0)===qb)){if(!(db=F(Pa,0)||!J(Ja,Pa,
db,Jb)))a:{Ja=Ja._fullData;db=Pa._mainSubplot;Pa=Pa._id.charAt(0);for(Jb=0;Jb<Ja.length;Jb++)if(Gb=Ja[Jb],!0===Gb.visible&&Gb.xaxis+Gb.yaxis===db){if(W.traceIs(Gb,"bar-like")&&Gb.orientation==={x:"h",y:"v"}[Pa]){db=!0;break a}if(Gb.fill&&Gb.fill.charAt(Gb.fill.length-1)===Pa){db=!0;break a}}db=!1}Gb=db}return Gb};Aa.clipEnds=function(Ja,Pa){return Pa.filter(function(db){return F(Ja,db.x)})};Aa.allowAutoMargin=function(Ja){for(var Pa=Aa.list(Ja,"",!0),db=0;db<Pa.length;db++){var Jb=Pa[db];Jb.automargin&&
(ca.allowAutoMargin(Ja,O(Jb)),Jb.mirror&&ca.allowAutoMargin(Ja,O(Jb)+".mirror"));W.getComponentMethod("rangeslider","isVisible")(Jb)&&ca.allowAutoMargin(Ja,Jb._id+".rangeslider")}};Aa.swap=function(Ja,Pa){var db=[],Jb,Gb;for(Jb=0;Jb<Pa.length;Jb++){var cc=[],uc=Ja._fullData[Pa[Jb]].xaxis,fd=Ja._fullData[Pa[Jb]].yaxis;if(uc&&fd){for(Gb=0;Gb<db.length;Gb++)-1===db[Gb].x.indexOf(uc)&&-1===db[Gb].y.indexOf(fd)||cc.push(Gb);if(cc.length){var kb=db[cc[0]];if(1<cc.length)for(Gb=1;Gb<cc.length;Gb++){var Qb=
db[cc[Gb]];I(kb.x,Qb.x);I(kb.y,Qb.y)}I(kb.x,[uc]);I(kb.y,[fd])}else db.push({x:[uc],y:[fd]})}}for(Pa=0;Pa<db.length;Pa++){var dc;Gb=Ja;cc=db[Pa].x;uc=db[Pa].y;kb=[];Qb=[];fd=Gb.layout;for(Jb=0;Jb<cc.length;Jb++)kb.push(Aa.getFromId(Gb,cc[Jb]));for(Jb=0;Jb<uc.length;Jb++)Qb.push(Aa.getFromId(Gb,uc[Jb]));var Ec=Object.keys(ma),Qc="anchor domain overlaying position side tickangle editType".split(" "),Tc=["linear","log"];for(Jb=0;Jb<Ec.length;Jb++){var tb=Ec[Jb],Ib=kb[0][tb],sc=Qb[0][tb],pc=!0,zc=!1,
Wb=!1;if("_"!==tb.charAt(0)&&"function"!==typeof Ib&&-1===Qc.indexOf(tb)){for(dc=1;dc<kb.length&&pc;dc++){var Ub=kb[dc][tb];"type"===tb&&-1!==Tc.indexOf(Ib)&&-1!==Tc.indexOf(Ub)&&Ib!==Ub?zc=!0:Ub!==Ib&&(pc=!1)}for(dc=1;dc<Qb.length&&pc;dc++)Ib=Qb[dc][tb],"type"===tb&&-1!==Tc.indexOf(sc)&&-1!==Tc.indexOf(Ib)&&sc!==Ib?Wb=!0:Qb[dc][tb]!==sc&&(pc=!1);if(pc){zc&&(fd[kb[0]._name].type="linear");Wb&&(fd[Qb[0]._name].type="linear");dc=fd;sc=kb;pc=Qb;Ub=Gb._fullLayout._dfltTitle;zc=T.nestedProperty;Wb=zc(dc[sc[0]._name],
tb).get();Ib=zc(dc[pc[0]._name],tb).get();"title"===tb&&(Wb&&Wb.text===Ub.x&&(Wb.text=Ub.y),Ib&&Ib.text===Ub.y&&(Ib.text=Ub.x));for(Ub=0;Ub<sc.length;Ub++)zc(dc,sc[Ub]._name+"."+tb).set(Ib);for(Ub=0;Ub<pc.length;Ub++)zc(dc,pc[Ub]._name+"."+tb).set(Wb)}}}for(Jb=0;Jb<Gb._fullLayout.annotations.length;Jb++)kb=Gb._fullLayout.annotations[Jb],-1!==cc.indexOf(kb.xref)&&-1!==uc.indexOf(kb.yref)&&T.swapAttrs(fd.annotations[Jb],["?"])}}},{"../../components/color":666,"../../components/drawing":688,"../../components/titles":764,
"../../constants/alignment":771,"../../constants/numerical":779,"../../lib":803,"../../lib/svg_text_utils":829,"../../plots/plots":917,"../../registry":931,"./autorange":853,"./axis_autotype":855,"./axis_ids":858,"./clean_ticks":860,"./layout_attributes":869,"./set_convert":875,"@plotly/d3":58,"fast-isnumeric":249}],855:[function(b,N,G){var p=b("fast-isnumeric");G=b("../../lib");var n=b("../../constants/numerical").BADNUM,k=G.isArrayOrTypedArray,m=G.isDateTime,a=G.cleanNumber,g=Math.round;N.exports=
function(h,r,l){var c=l.noMultiCategory;if(k(h)&&!h.length)return"-";var d;if(d=!c)d=h,d=k(d[0])&&k(d[1]);if(d)return"multicategory";if(c&&Array.isArray(h[0])){c=[];for(d=0;d<h.length;d++)if(k(h[d]))for(var e=0;e<h[d].length;e++)c.push(h[d][e]);h=c}c=h;d=c.length;e=Math.max(1,(d-1)/1E3);for(var f=0,q=0,t={},w=0;w<d;w+=e){var x=g(w);x=c[x];var z=String(x);t[z]||(t[z]=1,m(x,r)&&f++,p(x)&&q++)}if(f>2*q)return"date";r="strict"!==l.autotypenumbers;l=h;c=l.length;d=Math.max(1,(c-1)/1E3);f=e=0;q={};for(t=
0;t<c;t+=d)w=g(t),w=l[w],x=String(w),q[x]||(q[x]=1,x=typeof w,"boolean"===x?f++:(r?a(w)!==n:"number"===x)?e++:"string"===x&&f++);if(f>2*e)return"category";a:{l=h.length;for(c=0;c<l;c++)if(d=h[c],r?p(d):"number"===typeof d){h=!0;break a}h=!1}return h?"linear":"-"}},{"../../constants/numerical":779,"../../lib":803,"fast-isnumeric":249}],856:[function(b,N,G){function p(x,z,B){function A(F,J){return a.coerce(x,z,h.rangebreaks,F,J)}if(A("enabled")){var D=A("bounds");if(D&&2<=D.length){var C="",v,y;if(2===
D.length)for(v=0;2>v;v++)if(y=n(D[v])){C=q;break}C=A("pattern",C);if(C===q)for(v=0;2>v;v++)(y=n(D[v]))&&(z.bounds[v]=D[v]=y-1);if(C)for(v=0;2>v;v++)switch(y=D[v],C){case q:if(!k(y)){z.enabled=!1;return}y=+y;if(y!==Math.floor(y)||0>y||7<=y){z.enabled=!1;return}z.bounds[v]=D[v]=y;break;case t:if(!k(y)){z.enabled=!1;return}y=+y;if(0>y||24<y){z.enabled=!1;return}z.bounds[v]=D[v]=y}!1===B.autorange&&(B=B.range,B[0]<B[1]?D[0]<B[0]&&D[1]>B[1]&&(z.enabled=!1):D[0]>B[0]&&D[1]<B[1]&&(z.enabled=!1))}else(D=
A("values"))&&D.length?A("dvalue"):z.enabled=!1}}function n(x){if("string"===typeof x)return w[x.substr(0,3).toLowerCase()]}var k=b("fast-isnumeric"),m=b("../../registry"),a=b("../../lib"),g=b("../array_container_defaults"),h=b("./layout_attributes"),r=b("./tick_value_defaults"),l=b("./tick_mark_defaults"),c=b("./tick_label_defaults"),d=b("./category_order_defaults"),e=b("./line_grid_defaults"),f=b("./set_convert"),q=b("./constants").WEEKDAY_PATTERN,t=b("./constants").HOUR_PATTERN;N.exports=function(x,
z,B,A,D){var C=A.letter,v=A.font||{},y=A.splomStash||{},F=B("visible",!A.visibleDflt),J=z._template||{};J=z.type||J.type||"-";var K;"date"===J&&(m.getComponentMethod("calendars","handleDefaults")(x,z,"calendar",A.calendar),A.noTicklabelmode||(K=B("ticklabelmode")));var O="";A.noTicklabelposition&&"multicategory"!==J||(O=a.coerce(x,z,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:"period"===K?["outside","inside"]:"x"===C?"outside;inside;outside left;inside left;outside right;inside right".split(";"):
"outside;inside;outside top;inside top;outside bottom;inside bottom".split(";")}},"ticklabelposition"));A.noTicklabeloverflow||B("ticklabeloverflow",-1!==O.indexOf("inside")?"hide past domain":"category"===J||"multicategory"===J?"allow":"hide past div");f(z,D);(K=!z.isValidRange(x.range))&&A.reverseDflt&&(K="reversed");!B("autorange",K)||"linear"!==J&&"-"!==J||B("rangemode");B("range");z.cleanRange();d(x,z,B,A);"category"===J||A.noHover||B("hoverformat");K=B("color");O=K!==h.color.dflt?K:v.color;
C=y.label||D._dfltTitle[C];c(x,z,B,J,A,{pass:1});if(!F)return z;B("title.text",C);a.coerceFont(B,"title.font",{family:v.family,size:a.bigFont(v.size),color:O});r(x,z,B,J);c(x,z,B,J,A,{pass:2});l(x,z,B,A);e(x,z,B,{dfltColor:K,bgColor:A.bgColor,showGrid:A.showGrid,attributes:h});(z.showline||z.ticks)&&B("mirror");A.automargin&&B("automargin");v="multicategory"===J;if(!A.noTickson&&("category"===J||v)&&(z.ticks||z.showgrid)){var I;v&&(I="boundaries");"boundaries"===B("tickson",I)&&delete z.ticklabelposition}v&&
B("showdividers")&&(B("dividercolor"),B("dividerwidth"));if("date"===J)if(g(x,z,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:p}),z.rangebreaks.length){for(x=0;x<z.rangebreaks.length;x++)if(z.rangebreaks[x].pattern===q){z._hasDayOfWeekBreaks=!0;break}f(z,D);if(D._has("scattergl")||D._has("splom"))for(D=0;D<A.data.length;D++)if(x=A.data[D],"scattergl"===x.type||"splom"===x.type)x.visible=!1,a.warn(x.type+" traces do not work on axes with rangebreaks. Setting trace "+x.index+" to `visible: false`.")}else delete z.rangebreaks;
return z};var w={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7}},{"../../lib":803,"../../registry":931,"../array_container_defaults":849,"./category_order_defaults":859,"./constants":861,"./layout_attributes":869,"./line_grid_defaults":871,"./set_convert":875,"./tick_label_defaults":876,"./tick_mark_defaults":877,"./tick_value_defaults":878,"fast-isnumeric":249}],857:[function(b,N,G){function p(a,g){return["Sets the "+a+" formatting rule"+(g?"for `"+g+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+
k+"."].join(" ")}function n(a,g){return p(a,g)+[" And for dates see: "+m+".","We add two items to d3's date formatter: *%h* for half of the year as a decimal number as well as *%{n}f* for fractional seconds with n digits. For example, *2016-10-13 09:15:23.456* with tickformat *%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}b=b("../../constants/docs");var k=b.FORMAT_LINK,m=b.DATE_FORMAT_LINK;N.exports={axisHoverFormat:function(a,g){return{valType:"string",dflt:"",editType:"none",description:(g?
p:n)("hover text",a)+["By default the values are formatted using "+(g?"generic number format":"`"+a+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:p,descriptionWithDates:n}},{"../../constants/docs":774}],858:[function(b,N,G){function p(m,a){if(a&&a.length)for(var g=0;g<a.length;g++)if(a[g][m])return!0;return!1}var n=b("../../registry"),k=b("./constants");G.id2name=function(m){if("string"===typeof m&&m.match(k.AX_ID_PATTERN)){var a=m.split(" ")[0].substr(1);"1"===a&&(a="");return m.charAt(0)+
"axis"+a}};G.name2id=function(m){if(m.match(k.AX_NAME_PATTERN)){var a=m.substr(5);"1"===a&&(a="");return m.charAt(0)+a}};G.cleanId=function(m,a,g){var h=/( domain)$/.test(m);if(!("string"!==typeof m||!m.match(k.AX_ID_PATTERN)||a&&m.charAt(0)!==a||h&&!g))return a=m.split(" ")[0].substr(1).replace(/^0+/,""),"1"===a&&(a=""),m.charAt(0)+a+(h&&g?" domain":"")};G.list=function(m,a,g){var h=m._fullLayout;if(!h)return[];var r=G.listIds(m,a);m=Array(r.length);var l;for(l=0;l<r.length;l++){var c=r[l];m[l]=
h[c.charAt(0)+"axis"+c.substr(1)]}if(!g)for(g=h._subplots.gl3d||[],l=0;l<g.length;l++)r=h[g[l]],a?m.push(r[a+"axis"]):m.push(r.xaxis,r.yaxis,r.zaxis);return m};G.listIds=function(m,a){m=m._fullLayout;if(!m)return[];m=m._subplots;return a?m[a+"axis"]:m.xaxis.concat(m.yaxis)};G.getFromId=function(m,a,g){m=m._fullLayout;a=void 0===a||"string"!==typeof a?a:a.replace(" domain","");"x"===g?a=a.replace(/y[0-9]*/,""):"y"===g&&(a=a.replace(/x[0-9]*/,""));return m[G.id2name(a)]};G.getFromTrace=function(m,a,
g){var h=m._fullLayout,r=null;n.traceIs(a,"gl3d")?(m=a.scene,"scene"===m.substr(0,5)&&(r=h[m][g+"axis"])):r=G.getFromId(m,a[g+"axis"]||g);return r};G.idSort=function(m,a){var g=m.charAt(0),h=a.charAt(0);return g!==h?g>h?1:-1:+(m.substr(1)||1)-+(a.substr(1)||1)};G.ref2id=function(m){return/^[xyz]/.test(m)?m.split(" ")[0]:!1};G.isLinked=function(m,a){return p(a,m._axisMatchGroups)||p(a,m._axisConstraintGroups)}},{"../../registry":931,"./constants":861}],859:[function(b,N,G){N.exports=function(p,n,k,
m){if("category"===n.type){p=p.categoryarray;p=Array.isArray(p)&&0<p.length;var a;p&&(a="array");a=k("categoryorder",a);var g;"array"===a&&(g=k("categoryarray"));p||"array"!==a||(a=n.categoryorder="trace");if("trace"===a)n._initialCategories=[];else if("array"===a)n._initialCategories=g.slice();else{k=m.dataAttr||n._id.charAt(0);g={};var h;if(m.axData)p=m.axData;else for(p=[],h=0;h<m.data.length;h++){var r=m.data[h];r[k+"axis"]===n._id&&p.push(r)}for(h=0;h<p.length;h++)for(r=p[h][k],m=0;m<r.length;m++){var l=
r[m];null!==l&&void 0!==l&&(g[l]=1)}g=Object.keys(g).sort();"category ascending"===a?n._initialCategories=g:"category descending"===a&&(n._initialCategories=g.reverse())}}}},{}],860:[function(b,N,G){var p=b("fast-isnumeric"),n=b("../../lib");b=b("../../constants/numerical");var k=b.ONEDAY,m=b.ONEWEEK;G.dtick=function(a,g){var h="log"===g,r="date"===g,l="category"===g;g=r?k:1;if(!a)return g;if(p(a))return a=Number(a),0>=a?g:l?Math.max(1,Math.round(a)):r?Math.max(.1,a):a;if("string"!==typeof a||!r&&
!h)return g;l=a.charAt(0);var c=a.substr(1);c=p(c)?Number(c):0;return 0>=c||!(r&&"M"===l&&c===Math.round(c)||h&&"L"===l||h&&"D"===l&&(1===c||2===c))?g:a};G.tick0=function(a,g,h,r){if("date"===g)return n.cleanDate(a,n.dateTick0(h,0===r%m?1:0));if("D1"!==r&&"D2"!==r)return p(a)?Number(a):0}},{"../../constants/numerical":779,"../../lib":803,"fast-isnumeric":249}],861:[function(b,N,G){b=b("../../lib/regex").counter;N.exports={idRegex:{x:b("x","( domain)?"),y:b("y","( domain)?")},attrRegex:b("[xy]axis"),
xAxisMatch:b("xaxis"),yAxisMatch:b("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:"imagelayer heatmaplayer contourcarpetlayer contourlayer funnellayer waterfalllayer barlayer carpetlayer violinlayer boxlayer ohlclayer scattercarpetlayer scatterlayer".split(" "),
clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":820}],862:[function(b,N,G){function p(t,w,x){var z=x.axIds,B=x.layoutOut,A=x.hasImage;x=B._axisConstraintGroups;var D=B._axisMatchGroups,C=w._id,v=C.charAt(0),y=((B._splomAxes||{})[v]||{})[C]||{};C=w._id;v="x"===C.charAt(0);w._matchGroup=null;w._constraintGroup=null;h.coerce(t,w,c,"constrain",A?"domain":"range");h.coerce(t,w,
{constraintoward:{valType:"enumerated",values:v?["left","center","right"]:["bottom","middle","top"],dflt:v?"center":"middle"}},"constraintoward");var F=w.type,J,K=[];for(J=0;J<z.length;J++){var O=z[J];O!==C&&B[l(O)].type===F&&K.push(O)}if(F=k(x,C)){var I=[];for(J=0;J<K.length;J++)O=K[J],F[O]||I.push(O);K=I}J=K.length;var L,H;J&&(t.matches||y.matches)&&(L=h.coerce(t,w,{matches:{valType:"enumerated",values:K,dflt:-1!==K.indexOf(y.matches)?y.matches:void 0}},"matches"));A=A&&!v?w.anchor:void 0;J&&!L&&
(t.scaleanchor||A)&&(H=h.coerce(t,w,{scaleanchor:{valType:"enumerated",values:K}},"scaleanchor",A));L?(w._matchGroup=m(D,C,L,1),D=B[l(L)],B=n(B,w)/n(B,D),v!==("x"===L.charAt(0))&&(B=(v?"x":"y")+B),m(x,C,L,B)):t.matches&&-1!==z.indexOf(t.matches)&&h.warn("ignored "+w._name+'.matches: "'+t.matches+'" to avoid an infinite loop');H?(t=h.coerce(t,w,c,"scaleratio",void 0),t||(t=w.scaleratio=1),m(x,C,H,t)):t.scaleanchor&&-1!==z.indexOf(t.scaleanchor)&&h.warn("ignored "+w._name+'.scaleanchor: "'+t.scaleanchor+
'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function n(t,w){var x=w.domain;x||(x=t[l(w.overlaying)].domain);return x[1]-x[0]}function k(t,w){for(var x=0;x<t.length;x++)if(t[x][w])return t[x];return null}function m(t,w,x,z){var B,A=k(t,w);if(null===A){A={};A[w]=1;var D=t.length;t.push(A)}else D=t.indexOf(A);w=Object.keys(A);for(B=0;B<t.length;B++){var C=t[B];if(B!==D&&C[x]){var v=C[x];for(B=0;B<w.length;B++)x=w[B],
C[x]=a(v,a(z,A[x]));t.splice(D,1);return}}if(1!==z)for(B=0;B<w.length;B++)t=w[B],A[t]=a(z,A[t]);A[x]=1}function a(t,w){var x="",z="";if("string"===typeof t){x=t.match(/^[xy]*/)[0];var B=x.length;t=+t.substr(B)}if("string"===typeof w){z=w.match(/^[xy]*/)[0];var A=z.length;w=+w.substr(A)}var D=t*w;return B||A?B&&A&&x.charAt(0)!==z.charAt(0)?B===A?D:(B>A?x.substr(A):z.substr(B))+D:x+z+t*w:D}function g(t,w){var x=t._inputDomain,z=x[0]+(x[1]-x[0])*q[t.constraintoward];t.domain=t._input.domain=[z+(x[0]-
z)/w,z+(x[1]-z)/w];t.setScale()}var h=b("../../lib"),r=b("./autorange"),l=b("./axis_ids").id2name,c=b("./layout_attributes"),d=b("./scale_zoom"),e=b("./set_convert"),f=b("../../constants/numerical").ALMOST_EQUAL,q=b("../../constants/alignment").FROM_BL;G.handleDefaults=function(t,w,x){function z(Z,ca){for(v=0;v<Z.length;v++)for(y in O=Z[v],O)w[l(y)][ca]=O}function B(){M=K[H];"rangebreaks"===H&&(L=K._hasDayOfWeekBreaks)}var A=x.axIds,D=x.axHasImage,C=w._axisConstraintGroups=[];x=w._axisMatchGroups=
[];var v,y;for(v=0;v<A.length;v++){var F=l(A[v]);var J=t[F];var K=w[F];p(J,K,{axIds:A,layoutOut:w,hasImage:D[F]})}z(x,"_matchGroup");for(v=0;v<C.length;v++){var O=C[v];for(y in O)if(K=w[l(y)],K.fixedrange){for(var I in O)F=l(I),!1===(t[F]||{}).fixedrange&&h.warn("fixedrange was specified as false for axis "+F+" but was overridden because another axis in its constraint group has fixedrange true"),w[F].fixedrange=!0;break}}for(v=0;v<C.length;){O=C[v];for(y in O){K=w[l(y)];K._matchGroup&&Object.keys(K._matchGroup).length===
Object.keys(O).length&&(C.splice(v,1),v--);break}v++}z(C,"_constraintGroup");I="constrain range autorange rangemode rangebreaks categoryorder categoryarray".split(" ");var L=A=!1;for(v=0;v<x.length;v++)for(O=x[v],C=0;C<I.length;C++){var H=I[C];var M=null;for(y in O)if(F=l(y),J=t[F],K=w[F],H in K){if(!K.matches){var Q=K;if(H in J){B();break}}null===M&&H in J&&B()}"range"===H&&M&&(A=!0);"autorange"===H&&null===M&&A&&(M=!1);null===M&&H in Q&&(M=Q[H]);if(null!==M)for(y in O)K=w[l(y)],K[H]="range"===H?
M.slice():M,"rangebreaks"===H&&(K._hasDayOfWeekBreaks=L,e(K,w))}};G.enforce=function(t){var w=t._fullLayout,x=w._axisConstraintGroups||[],z;for(z=0;z<x.length;z++){var B=x[z];var A=w._size;A=A.h/A.w;for(var D={},C=Object.keys(B),v=0;v<C.length;v++){var y=C[v];var F=B[y];if("string"===typeof F){var J=F.match(/^[xy]*/)[0];var K=J.length;F=+F.substr(K);J="y"===J.charAt(0)?A:1/A;for(var O=0;O<K;O++)F*=J}D[y]=F}K=D;D=Object.keys(K);O=Infinity;var I=0;C=Infinity;v={};y={};var L=!1;for(B=0;B<D.length;B++)J=
D[B],y[J]=A=w[l(J)],A._inputDomain?A.domain=A._inputDomain.slice():A._inputDomain=A.domain.slice(),A._inputRange||(A._inputRange=A.range.slice()),A.setScale(),v[J]=F=Math.abs(A._m)/K[J],O=Math.min(O,F),"domain"!==A.constrain&&A._constraintShrinkable||(C=Math.min(C,F)),delete A._constraintShrinkable,I=Math.max(I,F),"domain"===A.constrain&&(L=!0);if(!(O>f*I)||L)for(B=0;B<D.length;B++)if(J=D[B],F=v[J],A=y[J],K=A.constrain,F!==C||"domain"===K)if(F/=C,"range"===K)d(A,F);else if(K=A._inputDomain,J=(A.domain[1]-
A.domain[0])/(K[1]-K[0]),O=(A.r2l(A.range[1])-A.r2l(A.range[0]))/(A.r2l(A._inputRange[1])-A.r2l(A._inputRange[0])),F/=J,1>F*O)A.domain=A._input.domain=K.slice(),d(A,F);else{1>O&&(A.range=A._input.range=A._inputRange.slice(),F*=O);if(A.autorange){K=A.r2l(A.range[0]);J=A.r2l(A.range[1]);var H=(K+J)/2;I=O=H;L=Math.abs(J-H);var M=H-L*F*1.0001;H+=L*F*1.0001;var Q=r.makePadFn(w,A,0),Z=r.makePadFn(w,A,1);g(A,F);var ca=Math.abs(A._m),W=r.concatExtremes(t,A),T=W.min;W=W.max;var U;for(U=0;U<T.length;U++){var ha=
T[U].val-Q(T[U])/ca;ha>M&&ha<O&&(O=ha)}for(U=0;U<W.length;U++)ha=W[U].val+Z(W[U])/ca,ha<H&&ha>I&&(I=ha);F/=(I-O)/(2*L);O=A.l2r(O);I=A.l2r(I);A.range=A._input.range=K<J?[O,I]:[I,O]}g(A,F)}}};G.getAxisGroup=function(t,w){t=t._axisMatchGroups;for(var x=0;x<t.length;x++)if(t[x][w])return"g"+x;return w};G.clean=function(t,w){if(w._inputDomain){var x=!1,z=w._id;t=t._fullLayout._axisConstraintGroups;for(var B=0;B<t.length;B++)if(t[B][z]){x=!0;break}x&&"domain"===w.constrain||(w._input.domain=w.domain=w._inputDomain,
delete w._inputDomain)}}},{"../../constants/alignment":771,"../../constants/numerical":779,"../../lib":803,"./autorange":853,"./axis_ids":858,"./layout_attributes":869,"./scale_zoom":873,"./set_convert":875}],863:[function(b,N,G){function p(ra,la,ka,na){la=B.ensureSingle(ra.draglayer,la,ka,function(qa){qa.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",ra.id)});la.call(L,na);return la.node()}function n(ra,la,ka,na,qa,ta,za){ra=p(ra,"rect",la,ka);z.select(ra).call(K.setRect,
na,qa,ta,za);return ra}function k(ra,la){for(var ka=0;ka<ra.length;ka++)if(!ra[ka].fixedrange)return la;return""}function m(ra,la){var ka=ra.range[la];la=Math.abs(ka-ra.range[1-la]);if("date"===ra.type)return ka;if("log"===ra.type)return ra=Math.ceil(Math.max(0,-Math.log(la)/Math.LN10))+3,A("."+ra+"g")(Math.pow(10,ka));ra=Math.floor(Math.log(Math.abs(ka))/Math.LN10)-Math.floor(Math.log(la)/Math.LN10)+4;return A("."+String(ra)+"g")(ka)}function a(ra,la,ka,na,qa){for(var ta=0;ta<ra.length;ta++){var za=
ra[ta];if(!za.fixedrange)if(za.rangebreaks){var Ia="y"===za._id.charAt(0),Xa=Ia?1-ka:ka;na[za._name+".range[0]"]=za.l2r(za.p2l((Ia?1-la:la)*za._length));na[za._name+".range[1]"]=za.l2r(za.p2l(Xa*za._length))}else Ia=za._rl[0],Xa=za._rl[1]-Ia,na[za._name+".range[0]"]=za.l2r(Ia+Xa*la),na[za._name+".range[1]"]=za.l2r(Ia+Xa*ka)}qa&&qa.length&&(ra=(la+(1-ka))/2,a(qa,ra,1-ra,na,[]))}function g(ra,la){for(var ka=0;ka<ra.length;ka++){var na=ra[ka];if(!na.fixedrange)if(na.rangebreaks){var qa=na._length,ta=
na.p2l(0+la)-na.p2l(0);qa=na.p2l(qa+la)-na.p2l(qa);ta=(ta+qa)/2;na.range=[na.l2r(na._rl[0]-ta),na.l2r(na._rl[1]-ta)]}else na.range=[na.l2r(na._rl[0]-la/na._m),na.l2r(na._rl[1]-la/na._m)]}}function h(ra,la,ka){return ra?"nsew"===ra?ka?"":"pan"===la?"move":"crosshair":ra.toLowerCase()+"-resize":"pointer"}function r(ra,la,ka,na,qa){return ra.append("path").attr("class","zoombox").style({fill:.2<la?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",y(ka,na)).attr("d",qa+"Z")}function l(ra,
la,ka){return ra.append("path").attr("class","zoombox-corners").style({fill:J.background,stroke:J.defaultLine,"stroke-width":1,opacity:0}).attr("transform",y(la,ka)).attr("d","M0,0Z")}function c(ra,la,ka,na,qa,ta){ra.attr("d",na+"M"+ka.l+","+ka.t+"v"+ka.h+"h"+ka.w+"v-"+ka.h+"h-"+ka.w+"Z");d(ra,la,qa,ta)}function d(ra,la,ka,na){ka||(ra.transition().style("fill",.2<na?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),la.transition().style("opacity",1).duration(200))}function e(ra){z.select(ra).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}
function f(ra){xa&&ra.data&&ra._context.showTips&&(B.notifier(B._(ra,"Double-click to zoom back out"),"long"),xa=!1)}function q(ra){var la=Math.floor(Math.min(ra.b-ra.t,ra.r-ra.l,oa)/2);return"M"+(ra.l-3.5)+","+(ra.t-.5+la)+"h3v"+-la+"h"+la+"v-3h-"+(la+3)+"ZM"+(ra.r+3.5)+","+(ra.t-.5+la)+"h-3v"+-la+"h"+-la+"v-3h"+(la+3)+"ZM"+(ra.r+3.5)+","+(ra.b+.5-la)+"h-3v"+la+"h"+-la+"v3h"+(la+3)+"ZM"+(ra.l-3.5)+","+(ra.b+.5-la)+"h3v"+la+"h"+la+"v3h-"+(la+3)+"Z"}function t(ra,la,ka,na,qa){for(var ta=!1,za={},Ia=
{},Xa,$a,gb,sb,jb=(qa||{}).xaHash,vb=(qa||{}).yaHash,qb=0;qb<la.length;qb++){var Bb=la[qb];for(Xa in ka)if(Bb[Xa]){for(gb in Bb)qa&&(jb[gb]||vb[gb])||("x"===gb.charAt(0)?ka:na)[gb]||(za[gb]=Xa);for($a in na)qa&&(jb[$a]||vb[$a])||!Bb[$a]||(ta=!0)}for($a in na)if(Bb[$a])for(sb in Bb)qa&&(jb[sb]||vb[sb])||("x"===sb.charAt(0)?ka:na)[sb]||(Ia[sb]=$a)}ta&&(B.extendFlat(za,Ia),Ia={});la={};ka=[];for(gb in za)na=U(ra,gb),ka.push(na),la[na._id]=na;gb={};na=[];for(sb in Ia)qa=U(ra,sb),na.push(qa),gb[qa._id]=
qa;return{xaHash:la,yaHash:gb,xaxes:ka,yaxes:na,xLinks:za,yLinks:Ia,isSubplotConstrained:ta}}function w(ra,la){if(C){var ka=void 0!==ra.onwheel?"wheel":"mousewheel";ra._onwheel&&ra.removeEventListener(ka,ra._onwheel);ra._onwheel=la;ra.addEventListener(ka,la,{passive:!1})}else void 0!==ra.onwheel?ra.onwheel=la:void 0!==ra.onmousewheel?ra.onmousewheel=la:ra.isAddedWheelEvent||(ra.isAddedWheelEvent=!0,ra.addEventListener("wheel",la,{passive:!1}))}function x(ra){var la=[],ka;for(ka in ra)la.push(ra[ka]);
return la}var z=b("@plotly/d3"),B=b("../../lib"),A=B.numberFormat,D=b("tinycolor2"),C=b("has-passive-events"),v=b("../../registry"),y=B.strTranslate,F=b("../../lib/svg_text_utils"),J=b("../../components/color"),K=b("../../components/drawing"),O=b("../../components/fx"),I=b("./axes"),L=b("../../lib/setcursor"),H=b("../../components/dragelement");G=b("../../components/dragelement/helpers");var M=G.selectingOrDrawing,Q=G.freeMode,Z=b("../../constants/alignment").FROM_TL,ca=b("../../lib/clear_gl_canvases"),
W=b("../../plot_api/subroutines").redrawReglTraces,T=b("../plots"),U=b("./axis_ids").getFromId,ha=b("./select").prepSelect,Y=b("./select").clearSelect,ba=b("./select").selectOnClick,ja=b("./scale_zoom"),ma=b("./constants"),ia=ma.MINDRAG,oa=ma.MINZOOM,xa=!0;N.exports={makeDragBox:function(ra,la,ka,na,qa,ta,za,Ia){function Xa(){cb=la.xaxis;Eb=la.yaxis;Ic=cb._length;Ja=Eb._length;Rb=cb._offset;xc=Eb._offset;Pb={};Pb[cb._id]=cb;fc={};fc[Eb._id]=Eb;if(za&&Ia)for(var Lc=la.overlays,cd=0;cd<Lc.length;cd++){var Nc=
Lc[cd].xaxis;Pb[Nc._id]=Nc;Nc=Lc[cd].yaxis;fc[Nc._id]=Nc}pb=x(Pb);Db=x(fc);Jb=k(pb,Ia);Gb=k(Db,za);cc=!Gb&&!Jb;db=t(ra,ra._fullLayout._axisMatchGroups,Pb,fc);Pa=t(ra,ra._fullLayout._axisConstraintGroups,Pb,fc,db);Lc=Pa.isSubplotConstrained||db.isSubplotConstrained;uc=Ia||Lc;fd=za||Lc;Lc=ra._fullLayout;kb=Lc._has("scattergl");Qb=Lc._has("splom");dc=Lc._has("svg")}function $a(Lc,cd){var Nc=sc.gd;if(0<=Nc._fullLayout._activeShapeIndex)Nc._fullLayout._deactivateShape(Nc);else{var Xc=Nc._fullLayout.clickmode;
e(Nc);2!==Lc||bb||rb();if(Ta)-1<Xc.indexOf("select")&&ba(cd,Nc,pb,Db,la.id,sc),-1<Xc.indexOf("event")&&O.click(Nc,cd,la.id);else if(1===Lc&&bb){var Zc=za?Eb:cb;Lc="s"===za||"w"===Ia?0:1;var Sc=Zc._name+".range["+Lc+"]";Lc=m(Zc,Lc);cd="left";Xc="middle";if(!Zc.fixedrange&&(za?(Xc="n"===za?"top":"bottom","right"===Zc.side&&(cd="right")):"e"===Ia&&(cd="right"),Nc._context.showAxisRangeEntryBoxes))z.select(Ib).call(F.makeEditable,{gd:Nc,immediate:!0,background:Nc._fullLayout.paper_bgcolor,text:String(Lc),
fill:Zc.tickfont?Zc.tickfont.color:"#444",horizontalAlign:cd,verticalAlign:Xc}).on("edit",function(id){id=Zc.d2r(id);void 0!==id&&v.call("_guiRelayout",Nc,Sc,id)})}}}function gb(Lc,cd,Nc){Lc=Ib.getBoundingClientRect();pc=cd-Lc.left;zc=Nc-Lc.top;ra._fullLayout._calcInverseTransform(ra);cd=B.apply3DTransform(ra._fullLayout._invTransform)(pc,zc);pc=cd[0];zc=cd[1];Wb={l:pc,r:pc,w:0,t:zc,b:zc,h:0};Ub=ra._hmpixcount?ra._hmlumcount/ra._hmpixcount:D(ra._fullLayout.plot_bgcolor).getLuminance();yb="M0,0H"+
Ic+"V"+Ja+"H0V0";ac=!1;Vb="xy";Uc=!1;mc=r(Ka,Ub,Rb,xc,yb);tc=l(Ka,Rb,xc)}function sb(Lc,cd){function Nc(){Vb="";Wb.r=Wb.l;Wb.t=Wb.b;tc.attr("d","M0,0Z")}if(ra._transitioningWithDuration)return!1;Lc=Math.max(0,Math.min(Ic,Qc*Lc+pc));cd=Math.max(0,Math.min(Ja,Tc*cd+zc));var Xc=Math.abs(Lc-pc),Zc=Math.abs(cd-zc);Wb.l=Math.min(pc,Lc);Wb.r=Math.max(pc,Lc);Wb.t=Math.min(zc,cd);Wb.b=Math.max(zc,cd);Pa.isSubplotConstrained?Xc>oa||Zc>oa?(Vb="xy",Xc/Ic>Zc/Ja?(Zc=Xc*Ja/Ic,zc>cd?Wb.t=zc-Zc:Wb.b=zc+Zc):(Xc=Zc*
Ic/Ja,pc>Lc?Wb.l=pc-Xc:Wb.r=pc+Xc),tc.attr("d",q(Wb))):Nc():db.isSubplotConstrained?Xc>oa||Zc>oa?(Vb="xy",Lc=Math.min(Wb.l/Ic,(Ja-Wb.b)/Ja),cd=Math.max(Wb.r/Ic,(Ja-Wb.t)/Ja),Wb.l=Lc*Ic,Wb.r=cd*Ic,Wb.b=(1-Lc)*Ja,Wb.t=(1-cd)*Ja,tc.attr("d",q(Wb))):Nc():!Gb||Zc<Math.min(Math.max(.6*Xc,ia),oa)?Xc<ia||!Jb?Nc():(Wb.t=0,Wb.b=Ja,Vb="x",tc.attr("d","M"+(Wb.l-.5)+","+(zc-oa-.5)+"h-3v"+(2*oa+1)+"h3ZM"+(Wb.r+.5)+","+(zc-oa-.5)+"h3v"+(2*oa+1)+"h-3Z")):!Jb||Xc<Math.min(.6*Zc,oa)?(Wb.l=0,Wb.r=Ic,Vb="y",tc.attr("d",
"M"+(pc-oa-.5)+","+(Wb.t-.5)+"v-3h"+(2*oa+1)+"v3ZM"+(pc-oa-.5)+","+(Wb.b+.5)+"v3h"+(2*oa+1)+"v-3Z")):(Vb="xy",tc.attr("d",q(Wb)));Wb.w=Wb.r-Wb.l;Wb.h=Wb.b-Wb.t;Vb&&(Uc=!0);ra._dragged=Uc;c(mc,tc,Wb,yb,ac,Ub);jb();ra.emit("plotly_relayouting",Ec);ac=!0}function jb(){Ec={};if("xy"===Vb||"x"===Vb)a(pb,Wb.l/Ic,Wb.r/Ic,Ec,Pa.xaxes),ub("x",Ec);if("xy"===Vb||"y"===Vb)a(Db,(Ja-Wb.b)/Ja,(Ja-Wb.t)/Ja,Ec,Pa.yaxes),ub("y",Ec)}function vb(){jb();e(ra);Ab();f(ra)}function qb(Lc){function cd(id,Nd,Rd){if(!id.fixedrange){var Wd=
B.simpleMap(id.range,id.r2l),Se=Wd[0]+(Wd[1]-Wd[0])*Nd;id.range=Wd.map(function(Ne){return id.l2r(Se+(Ne-Se)*Rd)})}}if(ra._context._scrollZoom.cartesian||ra._fullLayout._enablescrollzoom)if(sc.plotinfo.selection=!1,Y(ra),ra._transitioningWithDuration)Lc.preventDefault(),Lc.stopPropagation();else{Xa();clearTimeout(Bd);var Nc=-Lc.deltaY;isFinite(Nc)||(Nc=Lc.wheelDelta/10);if(isFinite(Nc)){Nc=Math.exp(-Math.min(Math.max(Nc,-20),20)/200);var Xc=yd.draglayer.select(".nsewdrag").node().getBoundingClientRect(),
Zc=(Lc.clientX-Xc.left)/Xc.width;Xc=(Xc.bottom-Lc.clientY)/Xc.height;var Sc;if(uc){Ia||(Zc=.5);for(Sc=0;Sc<pb.length;Sc++)cd(pb[Sc],Zc,Nc);ub("x");kd[2]*=Nc;kd[0]+=kd[2]*Zc*(1/Nc-1)}if(fd){za||(Xc=.5);for(Sc=0;Sc<Db.length;Sc++)cd(Db[Sc],Xc,Nc);ub("y");kd[3]*=Nc;kd[1]+=kd[3]*(1-Xc)*(1/Nc-1)}Ma(kd);wb();ra.emit("plotly_relayouting",Ec);Bd=setTimeout(function(){ra._fullLayout&&(kd=[0,0,Ic,Ja],Ab())},Fd);Lc.preventDefault()}else B.log("Did not find wheel motion attributes: ",Lc)}}function Bb(Lc,cd){function Nc(Nd,
Rd,Wd){for(var Se=1-Rd,Ne,te,qf=0;qf<Nd.length;qf++){var sf=Nd[qf];if(!sf.fixedrange){Ne=sf;te=Wd/sf._length;te=sf._rl[Se]+(sf._rl[Rd]-sf._rl[Se])/(1-(0<=te?Math.min(te,.9):1/(1/Math.max(te,-.3)+3.222)));var of=sf.l2r(te);!1!==of&&void 0!==of&&(sf.range[Rd]=of)}}return Ne._length*(Ne._rl[Rd]-te)/(Ne._rl[Rd]-Ne._rl[Se])}Lc*=Qc;cd*=Tc;if(!ra._transitioningWithDuration){ra._fullLayout._replotting=!0;if("ew"===Jb||"ns"===Gb){var Xc=Jb?-Lc:0,Zc=Gb?-cd:0;db.isSubplotConstrained&&(Jb&&Gb&&(cd=(Lc/Ic-cd/
Ja)/2,Lc=cd*Ic,cd=-cd*Ja,Xc=-Lc,Zc=-cd),Gb?Xc=-Zc*Ic/Ja:Zc=-Xc*Ja/Ic);Jb&&(g(pb,Lc),ub("x"));Gb&&(g(Db,cd),ub("y"));Ma([Xc,Zc,Ic,Ja])}else{var Sc="w"===Jb===("n"===Gb)?1:-1;Jb&&Gb&&(Pa.isSubplotConstrained||db.isSubplotConstrained)&&(cd=(Lc/Ic+Sc*cd/Ja)/2,Lc=cd*Ic,cd=Sc*cd*Ja);"w"===Jb?Lc=Nc(pb,0,Lc):"e"===Jb?Lc=Nc(pb,1,-Lc):Jb||(Lc=0);"n"===Gb?cd=Nc(Db,1,cd):"s"===Gb?cd=Nc(Db,0,-cd):Gb||(cd=0);Xc="w"===Jb?Lc:0;Zc="n"===Gb?cd:0;if(Pa.isSubplotConstrained&&!db.isSubplotConstrained||db.isSubplotConstrained&&
Jb&&Gb&&0<Sc){if(db.isSubplotConstrained||!Jb&&1===Gb.length){for(Sc=0;Sc<pb.length;Sc++)pb[Sc].range=pb[Sc]._r.slice(),ja(pb[Sc],1-cd/Ja);Lc=cd*Ic/Ja;Xc=Lc/2}if(db.isSubplotConstrained||!Gb&&1===Jb.length){for(Sc=0;Sc<Db.length;Sc++)Db[Sc].range=Db[Sc]._r.slice(),ja(Db[Sc],1-Lc/Ic);cd=Lc*Ja/Ic;Zc=cd/2}}db.isSubplotConstrained&&Gb||ub("x");db.isSubplotConstrained&&Jb||ub("y");Sc=Ic-Lc;var id=Ja-cd;!db.isSubplotConstrained||Jb&&Gb||(Jb?(Zc=Xc?0:Lc*Ja/Ic,id=Sc*Ja/Ic):(Xc=Zc?0:cd*Ic/Ja,Sc=id*Ic/Ja));
Ma([Xc,Zc,Sc,id])}wb();ra.emit("plotly_relayouting",Ec)}}function ub(Lc,cd){var Nc=db.isSubplotConstrained?{x:Db,y:pb}[Lc]:db[Lc+"axes"];Lc=db.isSubplotConstrained?{x:pb,y:Db}[Lc]:[];for(var Xc=0;Xc<Nc.length;Xc++){var Zc=Nc[Xc],Sc=Zc._id;Sc=db.xLinks[Sc]||db.yLinks[Sc];if(Sc=Lc[0]||Pb[Sc]||fc[Sc])cd?(cd[Zc._name+".range[0]"]=cd[Sc._name+".range[0]"],cd[Zc._name+".range[1]"]=cd[Sc._name+".range[1]"]):Zc.range=Sc.range.slice()}}function wb(){function Lc(Zc){for(Nc=0;Nc<Zc.length;Nc++)Zc[Nc].fixedrange||
cd.push(Zc[Nc]._id)}var cd=[],Nc;uc&&(Lc(pb),Lc(Pa.xaxes),Lc(db.xaxes));fd&&(Lc(Db),Lc(Pa.yaxes),Lc(db.yaxes));Ec={};for(Nc=0;Nc<cd.length;Nc++){var Xc=U(ra,cd[Nc]);I.drawOne(ra,Xc,{skipTitle:!0});Ec[Xc._name+".range[0]"]=Xc.range[0];Ec[Xc._name+".range[1]"]=Xc.range[1]}I.redrawComponents(ra,cd)}function rb(){if(!ra._transitioningWithDuration){var Lc=ra._context.doubleClick,cd=[];Jb&&(cd=cd.concat(pb));Gb&&(cd=cd.concat(Db));db.xaxes&&(cd=cd.concat(db.xaxes));db.yaxes&&(cd=cd.concat(db.yaxes));var Nc=
{},Xc;if("reset+autosize"===Lc)for(Lc="autosize",Xc=0;Xc<cd.length;Xc++){var Zc=cd[Xc];if(Zc._rangeInitial&&(Zc.range[0]!==Zc._rangeInitial[0]||Zc.range[1]!==Zc._rangeInitial[1])||!Zc._rangeInitial&&!Zc.autorange){Lc="reset";break}}if("autosize"===Lc)for(Xc=0;Xc<cd.length;Xc++)Zc=cd[Xc],Zc.fixedrange||(Nc[Zc._name+".autorange"]=!0);else if("reset"===Lc){if(Jb||Pa.isSubplotConstrained)cd=cd.concat(Pa.xaxes);Gb&&!Pa.isSubplotConstrained&&(cd=cd.concat(Pa.yaxes));Pa.isSubplotConstrained&&(Jb?Gb||(cd=
cd.concat(Db)):cd=cd.concat(pb));for(Xc=0;Xc<cd.length;Xc++)Zc=cd[Xc],Zc.fixedrange||(Zc._rangeInitial?(Lc=Zc._rangeInitial,Nc[Zc._name+".range[0]"]=Lc[0],Nc[Zc._name+".range[1]"]=Lc[1]):Nc[Zc._name+".autorange"]=!0)}ra.emit("plotly_doubleclick",null);v.call("_guiRelayout",ra,Nc)}}function Ab(){Ma([0,0,Ic,Ja]);B.syncOrAsync([T.previousPromises,function(){ra._fullLayout._replotting=!1;v.call("_guiRelayout",ra,Ec)}],ra)}function Ma(Lc){var cd=ra._fullLayout,Nc=cd._plots;cd=cd._subplots.cartesian;var Xc;
Qb&&v.subplotsRegistry.splom.drag(ra);if(kb)for(Xc=0;Xc<cd.length;Xc++){var Zc=Nc[cd[Xc]];var Sc=Zc.xaxis;var id=Zc.yaxis;if(Zc._scene){var Nd=B.simpleMap(Sc.range,Sc.r2l);id=B.simpleMap(id.range,id.r2l);Zc._scene.update({range:[Nd[0],id[0],Nd[1],id[1]]})}}if(Qb||kb)ca(ra),W(ra);if(dc){Nd=Lc[2]/cb._length;var Rd=Lc[3]/Eb._length;for(Xc=0;Xc<cd.length;Xc++){Zc=Nc[cd[Xc]];Sc=Zc.xaxis;id=Zc.yaxis;var Wd=(fd||db.isSubplotConstrained)&&!id.fixedrange&&fc[id._id];if((uc||db.isSubplotConstrained)&&!Sc.fixedrange&&
Pb[Sc._id]){var Se=Nd;var Ne=Ia||db.isSubplotConstrained?Lc[0]:Aa(Sc,Se)}else db.xaHash[Sc._id]?(Se=Nd,Ne=Lc[0]*Sc._length/cb._length):db.yaHash[Sc._id]?(Se=Rd,Ne="ns"===Gb?-Lc[1]*Sc._length/Eb._length:Aa(Sc,Se,{n:"top",s:"bottom"}[Gb])):(Se=La(Sc,Nd,Rd),Ne=ya(Sc,Se));if(Wd){Wd=Rd;var te=za||db.isSubplotConstrained?Lc[1]:Aa(id,Wd)}else db.yaHash[id._id]?(Wd=Rd,te=Lc[1]*id._length/Eb._length):db.xaHash[id._id]?(Wd=Nd,te="ew"===Jb?-Lc[0]*id._length/cb._length:Aa(id,Wd,{e:"right",w:"left"}[Jb])):(Wd=
La(id,Nd,Rd),te=ya(id,Wd));if(Se||Wd){Se||(Se=1);Wd||(Wd=1);Sc=Sc._offset-Ne/Se;id=id._offset-te/Wd;Zc.clipRect.call(K.setTranslate,Ne,te).call(K.setScale,Se,Wd);Zc.plot.call(K.setTranslate,Sc,id).call(K.setScale,1/Se,1/Wd);if(Se!==Zc.xScaleFactor||Wd!==Zc.yScaleFactor)K.setPointGroupScale(Zc.zoomScalePts,Se,Wd),K.setTextPointsScale(Zc.zoomScaleTxt,Se,Wd);K.hideOutsideRangePoints(Zc.clipOnAxisFalseTraces,Zc);Zc.xScaleFactor=Se;Zc.yScaleFactor=Wd}}}}function La(Lc,cd,Nc){return Lc.fixedrange?0:uc&&
Pa.xaHash[Lc._id]?cd:fd&&(Pa.isSubplotConstrained?Pa.xaHash:Pa.yaHash)[Lc._id]?Nc:0}function ya(Lc,cd){return cd?(Lc.range=Lc._r.slice(),ja(Lc,cd),Aa(Lc,cd)):0}function Aa(Lc,cd,Nc){return Lc._length*(1-cd)*Z[Nc||Lc.constraintoward||"middle"]}var Ka=ra._fullLayout._zoomlayer,Ta="nsew"===za+Ia,bb=1===(za+Ia).length,cb,Eb,Pb,fc,pb,Db,Rb,xc,Ic,Ja,Pa,db,Jb,Gb,cc,uc,fd,kb,Qb,dc,Ec,Qc,Tc;Xa();var tb=h(Gb+Jb,ra._fullLayout.dragmode,Ta),Ib=n(la,za+Ia+"drag",tb,ka,na,qa,ta);if(cc&&!Ta)return Ib.onmousedown=
null,Ib.style.pointerEvents="none",Ib;var sc={element:Ib,gd:ra,plotinfo:la,prepFn:function(Lc,cd,Nc){var Xc=sc.dragmode,Zc=ra._fullLayout.dragmode;Zc!==Xc&&(sc.dragmode=Zc);Xa();Qc=ra._fullLayout._invScaleX;Tc=ra._fullLayout._invScaleY;cc||(Ta?Lc.shiftKey?"pan"===Zc?Zc="zoom":M(Zc)||(Zc="pan"):Lc.ctrlKey&&(Zc="pan"):Zc="pan");Q(Zc)?sc.minDrag=1:sc.minDrag=void 0;M(Zc)?(sc.xaxes=pb,sc.yaxes=Db,ha(Lc,cd,Nc,sc,Zc)):(sc.clickFn=$a,M(Xc)&&(sc.plotinfo.selection=!1,Y(ra)),cc||("zoom"===Zc?(sc.moveFn=sb,
sc.doneFn=vb,sc.minDrag=1,gb(Lc,cd,Nc)):"pan"===Zc&&(sc.moveFn=Bb,sc.doneFn=Ab)));ra._fullLayout._redrag=function(){var Sc=ra._dragdata;Sc&&Sc.element===Ib&&!M(ra._fullLayout.dragmode)&&(Xa(),Ma([0,0,Ic,Ja]),sc.moveFn(Sc.dx,Sc.dy))}}};H.init(sc);var pc,zc,Wb,Ub,yb,ac,Vb,mc,tc,Uc,kd=[0,0,Ic,Ja],Bd=null,Fd=ma.REDRAWDELAY,yd=la.mainplot?ra._fullLayout._plots[la.mainplot]:la;1!==za.length*Ia.length&&w(Ib,qb);return Ib},makeDragger:p,makeRectDragger:n,makeZoombox:r,makeCorners:l,updateZoombox:c,xyCorners:q,
transitionZoombox:d,removeZoombox:e,showDoubleClickNotifier:f,attachWheelEventHandler:w}},{"../../components/color":666,"../../components/dragelement":685,"../../components/dragelement/helpers":684,"../../components/drawing":688,"../../components/fx":706,"../../constants/alignment":771,"../../lib":803,"../../lib/clear_gl_canvases":787,"../../lib/setcursor":824,"../../lib/svg_text_utils":829,"../../plot_api/subroutines":844,"../../registry":931,"../plots":917,"./axes":854,"./axis_ids":858,"./constants":861,
"./scale_zoom":873,"./select":874,"@plotly/d3":58,"has-passive-events":444,tinycolor2:598}],864:[function(b,N,G){var p=b("@plotly/d3"),n=b("../../components/fx"),k=b("../../components/dragelement"),m=b("../../lib/setcursor"),a=b("./dragbox").makeDragBox,g=b("./constants").DRAGGERSIZE;G.initInteractions=function(h){var r=h._fullLayout;if(h._context.staticPlot)p.select(h).selectAll(".drag").remove();else if(r._has("cartesian")||r._has("splom")){Object.keys(r._plots||{}).sort(function(c,d){return(r._plots[c].mainplot&&
!0)===(r._plots[d].mainplot&&!0)?(c=c.split("y"),d=d.split("y"),c[0]===d[0]?Number(c[1]||1)-Number(d[1]||1):Number(c[0]||1)-Number(d[0]||1)):r._plots[c].mainplot?1:-1}).forEach(function(c){var d=r._plots[c],e=d.xaxis,f=d.yaxis;if(!d.mainplot){var q=a(h,d,e._offset,f._offset,e._length,f._length,"ns","ew");q.onmousemove=function(w){h._fullLayout._rehover=function(){h._fullLayout._hoversubplot===c&&h._fullLayout._plots[c]&&n.hover(h,w,c)};n.hover(h,w,c);h._fullLayout._lasthover=q;h._fullLayout._hoversubplot=
c};q.onmouseout=function(w){h._dragging||(h._fullLayout._hoversubplot=null,k.unhover(h,w))};h._context.showAxisDragHandles&&(a(h,d,e._offset-g,f._offset-g,g,g,"n","w"),a(h,d,e._offset+e._length,f._offset-g,g,g,"n","e"),a(h,d,e._offset-g,f._offset+f._length,g,g,"s","w"),a(h,d,e._offset+e._length,f._offset+f._length,g,g,"s","e"))}if(h._context.showAxisDragHandles){if(c===e._mainSubplot){var t=e._mainLinePosition;"top"===e.side&&(t-=g);a(h,d,e._offset+.1*e._length,t,.8*e._length,g,"","ew");a(h,d,e._offset,
t,.1*e._length,g,"","w");a(h,d,e._offset+.9*e._length,t,.1*e._length,g,"","e")}c===f._mainSubplot&&(e=f._mainLinePosition,"right"!==f.side&&(e-=g),a(h,d,e,f._offset+.1*f._length,g,.8*f._length,"ns",""),a(h,d,e,f._offset+.9*f._length,g,.1*f._length,"s",""),a(h,d,e,f._offset,g,.1*f._length,"n",""))}});var l=r._hoverlayer.node();l.onmousemove=function(c){c.target=h._fullLayout._lasthover;n.hover(h,c,r._hoversubplot)};l.onclick=function(c){c.target=h._fullLayout._lasthover;n.click(h,c)};l.onmousedown=
function(c){h._fullLayout._lasthover.onmousedown(c)};G.updateFx(h)}};G.updateFx=function(h){h=h._fullLayout;m(h._draggers,"pan"===h.dragmode?"move":"crosshair")}},{"../../components/dragelement":685,"../../components/fx":706,"../../lib/setcursor":824,"./constants":861,"./dragbox":863,"@plotly/d3":58}],865:[function(b,N,G){N.exports={clearOutlineControllers:function(p){(p=p._fullLayout._zoomlayer)&&p.selectAll(".outline-controllers").remove()},clearSelect:function(p){var n=p._fullLayout._zoomlayer;
n&&n.selectAll(".select-outline").remove();p._fullLayout._drawing=!1}}},{}],866:[function(b,N,G){function p(k,m){switch(k.type){case "log":return k.p2d(m);case "date":return k.p2r(m,0,k.calendar);default:return k.p2r(m)}}var n=b("../../lib").strTranslate;N.exports={p2r:p,r2p:function(k,m){switch(k.type){case "log":return k.d2p(m);case "date":return k.r2p(m,0,k.calendar);default:return k.r2p(m)}},axValue:function(k){var m="y"===k._id.charAt(0)?1:0;return function(a){return p(k,a[m])}},getTransform:function(k){return n(k.xaxis._offset,
k.yaxis._offset)}}},{"../../lib":803}],867:[function(b,N,G){var p=b("../../registry"),n=b("../../lib"),k=b("./axis_ids");N.exports=function(m){return function(a,g){a=a[m];if(Array.isArray(a)){var h=p.subplotsRegistry.cartesian,r=h.idRegex,l=g._subplots,c=l.xaxis,d=l.yaxis;l=l.cartesian;for(var e=g._has("cartesian")||g._has("gl2d"),f=0;f<a.length;f++){var q=a[f];if(n.isPlainObject(q)){var t=k.cleanId(q.xref,"x",!1);q=k.cleanId(q.yref,"y",!1);var w=r.x.test(t),x=r.y.test(q);if(w||x){e||n.pushUnique(g._basePlotModules,
h);var z=!1;w&&-1===c.indexOf(t)&&(c.push(t),z=!0);x&&-1===d.indexOf(q)&&(d.push(q),z=!0);z&&w&&x&&l.push(t+q)}}}}}}},{"../../lib":803,"../../registry":931,"./axis_ids":858}],868:[function(b,N,G){function p(x,z,B){return l.ensureSingle(x,z,B,function(A){A.datum(B)})}function n(x,z,B,A,D){for(var C=q.traceLayerClasses,v=x._fullLayout,y=v._modules,F,J,K=[],O=[],I=0;I<y.length;I++){F=y[I];J=F.name;var L=r.modules[J].categories;if(L.svg){var H=F.layerName||J+"layer";F=F.plot;B=e(B,F);J=B[0];B=B[1];J.length&&
K.push({i:C.indexOf(H),className:H,plotMethod:F,cdModule:J});L.zoomScale&&O.push("."+H)}}K.sort(function(M,Q){return M.i-Q.i});C=z.plot.selectAll("g.mlayer").data(K,function(M){return M.className});C.enter().append("g").attr("class",function(M){return M.className}).classed("mlayer",!0).classed("rangeplot",z.isRangePlot);C.exit().remove();C.order();C.each(function(M){var Q=h.select(this),Z=M.className;M.plotMethod(x,z,M.cdModule,Q,A,D);-1===q.clipOnAxisFalseQuery.indexOf("."+Z)&&d.setClipUrl(Q,z.layerClipId,
x)});v._has("scattergl")&&(F=r.getModule("scattergl"),J=e(B,F)[0],F.plot(x,z,J));x._context.staticPlot||(z._hasClipOnAxisFalse&&(z.clipOnAxisFalseTraces=z.plot.selectAll(q.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),O.length&&(v=z.plot.selectAll(O.join(",")).selectAll(".trace"),z.zoomScalePts=v.selectAll("path.point"),z.zoomScaleTxt=v.selectAll(".textpoint")))}function k(x){x=x._fullLayout;var z=x._subplots.cartesian,B=z.length,A,D=[],C=[];for(A=0;A<B;A++){var v=z[A];var y=x._plots[v];var F=
y.xaxis;var J=y.yaxis;F=F._mainAxis._id+J._mainAxis._id;J=x._plots[F];y.overlays=[];F!==v&&J?(y.mainplot=F,y.mainplotinfo=J,C.push(v)):(y.mainplot=void 0,y.mainplotinfo=void 0,D.push(v))}for(A=0;A<C.length;A++)v=C[A],y=x._plots[v],y.mainplotinfo.overlays.push(y);z=D.concat(C);D=Array(B);for(A=0;A<B;A++){v=z[A];y=x._plots[v];F=y.xaxis;J=y.yaxis;F=[v,F.layer,J.layer,F.overlaying||"",J.overlaying||""];for(v=0;v<y.overlays.length;v++)F.push(y.overlays[v].id);D[A]=F}return D}function m(x,z){var B=z.plotgroup,
A=z.id,D=q.layerValue2layerClass[z.xaxis.layer],C=q.layerValue2layerClass[z.yaxis.layer];x=x._fullLayout._hasOnlyLargeSploms;if(z.mainplot){B=z.mainplotinfo;var v=B.plotgroup,y=A+"-x",F=A+"-y";z.gridlayer=B.gridlayer;z.zerolinelayer=B.zerolinelayer;w(B.overlinesBelow,"path",y);w(B.overlinesBelow,"path",F);w(B.overaxesBelow,"g",y);w(B.overaxesBelow,"g",F);z.plot=w(B.overplot,"g",A);w(B.overlinesAbove,"path",y);w(B.overlinesAbove,"path",F);w(B.overaxesAbove,"g",y);w(B.overaxesAbove,"g",F);z.xlines=
v.select(".overlines-"+D).select("."+y);z.ylines=v.select(".overlines-"+C).select("."+F);z.xaxislayer=v.select(".overaxes-"+D).select("."+y);z.yaxislayer=v.select(".overaxes-"+C).select("."+F)}else x?(z.xlines=w(B,"path","xlines-above"),z.ylines=w(B,"path","ylines-above"),z.xaxislayer=w(B,"g","xaxislayer-above"),z.yaxislayer=w(B,"g","yaxislayer-above")):(A=w(B,"g","layer-subplot"),z.shapelayer=w(A,"g","shapelayer"),z.imagelayer=w(A,"g","imagelayer"),z.gridlayer=w(B,"g","gridlayer"),z.zerolinelayer=
w(B,"g","zerolinelayer"),w(B,"path","xlines-below"),w(B,"path","ylines-below"),z.overlinesBelow=w(B,"g","overlines-below"),w(B,"g","xaxislayer-below"),w(B,"g","yaxislayer-below"),z.overaxesBelow=w(B,"g","overaxes-below"),z.plot=w(B,"g","plot"),z.overplot=w(B,"g","overplot"),z.xlines=w(B,"path","xlines-above"),z.ylines=w(B,"path","ylines-above"),z.overlinesAbove=w(B,"g","overlines-above"),w(B,"g","xaxislayer-above"),w(B,"g","yaxislayer-above"),z.overaxesAbove=w(B,"g","overaxes-above"),z.xlines=B.select(".xlines-"+
D),z.ylines=B.select(".ylines-"+C),z.xaxislayer=B.select(".xaxislayer-"+D),z.yaxislayer=B.select(".yaxislayer-"+C));x||(p(z.gridlayer,"g",z.xaxis._id),p(z.gridlayer,"g",z.yaxis._id),z.gridlayer.selectAll("g").map(function(J){return J[0]}).sort(f.idSort));z.xlines.style("fill","none").classed("crisp",!0);z.ylines.style("fill","none").classed("crisp",!0)}function a(x,z){if(x){var B={};x.each(function(v){v=v[0];h.select(this).remove();g(v,z);B[v]=!0});for(var A in z._plots){x=z._plots[A].overlays||[];
for(var D=0;D<x.length;D++){var C=x[D];B[C.id]&&C.plot.selectAll(".trace").remove()}}}}function g(x,z){z._draggers.selectAll("g."+x).remove();z._defs.select("#clip"+z._uid+x+"plot").remove()}var h=b("@plotly/d3"),r=b("../../registry"),l=b("../../lib"),c=b("../plots"),d=b("../../components/drawing"),e=b("../get_data").getModuleCalcData,f=b("./axis_ids"),q=b("./constants"),t=b("../../constants/xmlns_namespaces"),w=l.ensureSingle;G.name="cartesian";G.attr=["xaxis","yaxis"];G.idRoot=["x","y"];G.idRegex=
q.idRegex;G.attrRegex=q.attrRegex;G.attributes=b("./attributes");G.layoutAttributes=b("./layout_attributes");G.supplyLayoutDefaults=b("./layout_defaults");G.transitionAxes=b("./transition_axes");G.finalizeSubplots=function(x,z){var B=z._subplots;z=B.xaxis;var A=B.yaxis,D=B.cartesian;B=D.concat(B.gl2d||[]);var C={},v={},y;for(y=0;y<B.length;y++){var F=B[y].split("y");C[F[0]]=1;v["y"+F[1]]=1}for(y=0;y<z.length;y++)if(F=z[y],!C[F]){var J=(x[f.id2name(F)]||{}).anchor;q.idRegex.y.test(J)||(J="y");D.push(F+
J);B.push(F+J);v[J]||(v[J]=1,l.pushUnique(A,J))}for(y=0;y<A.length;y++)J=A[y],v[J]||(F=(x[f.id2name(J)]||{}).anchor,q.idRegex.x.test(F)||(F="x"),D.push(F+J),B.push(F+J),C[F]||(C[F]=1,l.pushUnique(z,F)));if(!B.length){J=F="";for(var K in x)if(q.attrRegex.test(K))if("x"===K.charAt(0)){if(!F||+K.substr(5)<+F.substr(5))F=K}else if(!J||+K.substr(5)<+J.substr(5))J=K;F=F?f.name2id(F):"x";J=J?f.name2id(J):"y";z.push(F);A.push(J);D.push(F+J)}};G.plot=function(x,z,B,A){var D=x._fullLayout,C=D._subplots.cartesian,
v=x.calcdata,y;if(!Array.isArray(z))for(z=[],y=0;y<v.length;y++)z.push(y);for(y=0;y<C.length;y++){for(var F=C[y],J=D._plots[F],K=[],O,I=0;I<v.length;I++){var L=v[I],H=L[0].trace;if(H.xaxis+H.yaxis===F){if(-1!==z.indexOf(H.index)||H.carpet)O&&O[0].trace.xaxis+O[0].trace.yaxis===F&&-1!==["tonextx","tonexty","tonext"].indexOf(H.fill)&&-1===K.indexOf(O)&&K.push(O),K.push(L);O=L}}n(x,J,K,B,A)}};G.clean=function(x,z,B,A){var D=A._plots||{};x=z._plots||{};B=A._subplots||{};var C;if(A._hasOnlyLargeSploms&&
!z._hasOnlyLargeSploms)for(C in D){var v=D[C];v.plotgroup&&v.plotgroup.remove()}v=A._has&&A._has("gl");var y=z._has&&z._has("gl");if(v&&!y)for(C in D)v=D[C],v._scene&&v._scene.destroy();if(B.xaxis&&B.yaxis)for(D=f.listIds({_fullLayout:A}),C=0;C<D.length;C++)v=D[C],z[f.id2name(v)]||A._infolayer.selectAll(".g-"+v+"title").remove();C=A._has&&A._has("cartesian");z=z._has&&z._has("cartesian");if(C&&!z)a(A._cartesianlayer.selectAll(".subplot"),A),A._defs.selectAll(".axesclip").remove(),delete A._axisConstraintGroups,
delete A._axisMatchGroups;else if(B.cartesian)for(C=0;C<B.cartesian.length;C++)z=B.cartesian[C],x[z]||(A._cartesianlayer.selectAll("."+z+",."+z+"-x,."+z+"-y").remove(),g(z,A))};G.drawFramework=function(x){var z=x._fullLayout,B=k(x);B=z._cartesianlayer.selectAll(".subplot").data(B,String);B.enter().append("g").attr("class",function(A){return"subplot "+A[0]});B.order();B.exit().call(a,z);B.each(function(A){A=A[0];var D=z._plots[A];D.plotgroup=h.select(this);m(x,D);D.draglayer=w(z._draggers,"g",A)})};
G.rangePlot=function(x,z,B){m(x,z);n(x,z,B);c.style(x)};G.toSVG=function(x){var z=x._fullLayout._glimages,B=h.select(x).selectAll(".svg-container");B.filter(function(A,D){return D===B.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var A=this.toDataURL("image/png");z.append("svg:image").attr({xmlns:t.svg,"xlink:href":A,preserveAspectRatio:"none",x:0,y:0,width:this.style.width,height:this.style.height})})};G.updateFx=b("./graph_interact").updateFx},{"../../components/drawing":688,
"../../constants/xmlns_namespaces":780,"../../lib":803,"../../registry":931,"../get_data":891,"../plots":917,"./attributes":852,"./axis_ids":858,"./constants":861,"./graph_interact":864,"./layout_attributes":869,"./layout_defaults":870,"./transition_axes":879,"@plotly/d3":58}],869:[function(b,N,G){G=b("../font_attributes");var p=b("../../components/color/attributes"),n=b("../../components/drawing/attributes").dash,k=b("../../lib/extend").extendFlat,m=b("../../plot_api/plot_template").templatedArray,
a=b("../../plots/cartesian/axis_format_attributes").descriptionWithDates,g=b("../../constants/numerical").ONEDAY;b=b("./constants");var h=b.HOUR_PATTERN,r=b.WEEKDAY_PATTERN;N.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:p.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:G({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:"- linear log date category multicategory".split(" "),
dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},
{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[b.idRegex.x.toString(),b.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:"left center right top middle bottom".split(" "),
editType:"plot"},matches:{valType:"enumerated",values:[b.idRegex.x.toString(),b.idRegex.y.toString()],editType:"calc"},rangebreaks:m("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[r,h,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",
editType:"calc",min:0,dflt:g},editType:"calc"}),tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks"},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside",
"inside",""],editType:"ticks"},tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:"outside;inside;outside top;inside top;outside left;inside left;outside right;inside right;outside bottom;inside bottom".split(";"),dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div",
"hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:p.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"boolean",dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",
dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:k({},n,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:G({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",
values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:"none e E power SI B".split(" "),dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",
dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:a("tick label")},tickformatstops:m("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:a("hover text")},showline:{valType:"boolean",
dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:p.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:p.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:p.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},
showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:p.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",b.idRegex.x.toString(),b.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",b.idRegex.x.toString(),b.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",
values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:"trace;category ascending;category descending;array;total ascending;total descending;min ascending;min descending;max ascending;max descending;sum ascending;sum descending;mean ascending;mean descending;median ascending;median descending".split(";"),
dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:G({editType:"ticks"})}}},{"../../components/color/attributes":665,"../../components/drawing/attributes":687,"../../constants/numerical":779,"../../lib/extend":793,"../../plot_api/plot_template":843,"../../plots/cartesian/axis_format_attributes":857,
"../font_attributes":883,"./constants":861}],870:[function(b,N,G){function p(B,A,D){Array.isArray(B[A])?B[A].push(D):B[A]=[D]}var n=b("../../lib"),k=b("../../components/color"),m=b("../../components/fx/helpers").isUnifiedHover,a=b("../../components/fx/hovermode_defaults"),g=b("../../plot_api/plot_template"),h=b("../layout_attributes"),r=b("./layout_attributes"),l=b("./type_defaults"),c=b("./axis_defaults"),d=b("./constraints"),e=b("./position_defaults"),f=b("./axis_ids"),q=f.id2name,t=f.name2id,w=
b("./constants").AX_ID_PATTERN;b=b("../../registry");var x=b.traceIs,z=b.getComponentMethod;N.exports=function(B,A,D){function C(){ta._traceIndices=(O[ka]||[]).map(function(jb){return jb._expandedIndex});ta._annIndices=[];ta._shapeIndices=[];ta._imgIndices=[];ta._subplotsWith=[];ta._counterAxes=[];ta._name=ta._attr=ka;ta._id=na}function v(jb,vb){return n.coerce(qa,ta,r,jb,vb)}function y(jb,vb){return n.coerce2(qa,ta,r,jb,vb)}function F(jb,vb){jb="x"===jb?ma:ia;for(var qb=[],Bb=0;Bb<jb.length;Bb++){var ub=
jb[Bb];ub===vb||(B[ub]||{}).overlaying||qb.push(t(ub))}return qb}function J(){var jb=qa.matches;w.test(jb)&&-1===oa.indexOf(jb)&&(xa[jb]=qa.type,ra=Object.keys(xa))}var K=A.autotypenumbers,O={},I={},L={},H={},M={},Q={},Z={},ca={},W={},T={},U,ha;for(U=0;U<D.length;U++){var Y=D[U];if(x(Y,"cartesian")||x(Y,"gl2d")){if(Y.xaxis){var ba=q(Y.xaxis);p(O,ba,Y)}else if(Y.xaxes)for(ha=0;ha<Y.xaxes.length;ha++)p(O,q(Y.xaxes[ha]),Y);if(Y.yaxis){var ja=q(Y.yaxis);p(O,ja,Y)}else if(Y.yaxes)for(ha=0;ha<Y.yaxes.length;ha++)p(O,
q(Y.yaxes[ha]),Y);"funnel"===Y.type?"h"===Y.orientation?(ba&&(I[ba]=!0),ja&&(Z[ja]=!0)):ja&&(L[ja]=!0):"image"===Y.type?(ja&&(ca[ja]=!0),ba&&(ca[ba]=!0)):(ja&&(M[ja]=!0,Q[ja]=!0),(!x(Y,"carpet")||"carpet"===Y.type&&!Y._cheater)&&ba&&(H[ba]=!0));"carpet"===Y.type&&Y._cheater&&ba&&(I[ba]=!0);x(Y,"2dMap")&&(W[ba]=!0,W[ja]=!0);x(Y,"oriented")&&(T["h"===Y.orientation?ja:ba]=!0)}}D=A._subplots;U=D.xaxis;Y=D.yaxis;var ma=n.simpleMap(U,q),ia=n.simpleMap(Y,q);D=ma.concat(ia);ha=k.background;U.length&&Y.length&&
(ha=n.coerce(B,A,h,"plot_bgcolor"));ha=k.combine(ha,A.paper_bgcolor);ba={x:Y,y:U};var oa=ba.x.concat(ba.y),xa={},ra=[];ja=a(B,A);var la=m(ja);for(U=0;U<D.length;U++){var ka=D[U];var na=t(ka);Y=ka.charAt(0);n.isPlainObject(B[ka])||(B[ka]={});var qa=B[ka];var ta=g.newContainer(A,ka,Y+"axis");C();var za={letter:Y,font:A.font,outerTicks:W[ka],showGrid:!T[ka],data:O[ka]||[],bgColor:ha,calendar:A.calendar,automargin:!0,visibleDflt:"x"===Y&&!H[ka]&&I[ka]||"y"===Y&&!M[ka]&&L[ka],reverseDflt:"y"===Y&&(!Q[ka]&&
Z[ka]||ca[ka]),autotypenumbersDflt:K,splomStash:((A._splomAxes||{})[Y]||{})[na]};v("uirevision",A.uirevision);l(qa,ta,v,za);c(qa,ta,v,za,A);za=la&&Y===ja.charAt(0);var Ia=y("spikecolor",la?ta.color:void 0),Xa=y("spikethickness",la?1.5:void 0),$a=y("spikedash",la?"dot":void 0),gb=y("spikemode",la?"across":void 0),sb=y("spikesnap");v("showspikes",!!za||!!Ia||!!Xa||!!$a||!!gb||!!sb)||(delete ta.spikecolor,delete ta.spikethickness,delete ta.spikedash,delete ta.spikemode,delete ta.spikesnap);e(qa,ta,v,
{letter:Y,counterAxes:ba[Y],overlayableAxes:F(Y,ka),grid:A.grid});v("title.standoff");J();ta._input=qa}for(U=0;U<ra.length;)na=ra[U++],ka=q(na),Y=ka.charAt(0),n.isPlainObject(B[ka])||(B[ka]={}),qa=B[ka],ta=g.newContainer(A,ka,Y+"axis"),C(),I={letter:Y,font:A.font,outerTicks:W[ka],showGrid:!T[ka],data:[],bgColor:ha,calendar:A.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:K,splomStash:((A._splomAxes||{})[Y]||{})[na]},v("uirevision",A.uirevision),ta.type=xa[na]||"linear",c(qa,
ta,v,I,A),e(qa,ta,v,{letter:Y,counterAxes:ba[Y],overlayableAxes:F(Y,ka),grid:A.grid}),v("fixedrange"),J(),ta._input=qa;K=z("rangeslider","handleDefaults");W=z("rangeselector","handleDefaults");for(U=0;U<ma.length;U++)ka=ma[U],qa=B[ka],ta=A[ka],K(B,A,ka),"date"===ta.type&&W(qa,ta,A,ia,ta.calendar),v("fixedrange");for(U=0;U<ia.length;U++)ka=ia[U],qa=B[ka],ta=A[ka],K=A[q(ta.anchor)],K=z("rangeslider","isVisible")(K),v("fixedrange",K);d.handleDefaults(B,A,{axIds:oa.concat(ra).sort(f.idSort),axHasImage:ca})}},
{"../../components/color":666,"../../components/fx/helpers":702,"../../components/fx/hovermode_defaults":705,"../../lib":803,"../../plot_api/plot_template":843,"../../registry":931,"../layout_attributes":908,"./axis_defaults":856,"./axis_ids":858,"./constants":861,"./constraints":862,"./layout_attributes":869,"./position_defaults":872,"./type_defaults":880}],871:[function(b,N,G){var p=b("tinycolor2").mix,n=b("../../components/color/attributes").lightFraction,k=b("../../lib");N.exports=function(m,
a,g,h){function r(e,f){return k.coerce2(m,a,h.attributes,e,f)}h=h||{};var l=h.dfltColor,c=r("linecolor",l),d=r("linewidth");g("showline",h.showLine||!!c||!!d)||(delete a.linecolor,delete a.linewidth);c=p(l,h.bgColor,h.blend||n).toRgbString();c=r("gridcolor",c);d=r("gridwidth");g("showgrid",h.showGrid||!!c||!!d)||(delete a.gridcolor,delete a.gridwidth);h.noZeroLine||(l=r("zerolinecolor",l),c=r("zerolinewidth"),g("zeroline",h.showGrid||!!l||!!c)||(delete a.zerolinecolor,delete a.zerolinewidth))}},{"../../components/color/attributes":665,
"../../lib":803,tinycolor2:598}],872:[function(b,N,G){var p=b("fast-isnumeric"),n=b("../../lib");N.exports=function(k,m,a,g){var h=g.counterAxes||[],r=g.overlayableAxes||[],l=g.letter;g=g.grid;if(g){var c=g._domains[l][g._axisMap[m._id]];var d=g._anchors[m._id];if(c){var e=g[l+"side"].split(" ")[0];var f=g.domain[l]["right"===e||"top"===e?1:0]}}c=c||[0,1];d=d||(p(k.position)?"free":h[0]||"free");e=e||("x"===l?"bottom":"left");f=f||0;"free"===n.coerce(k,m,{anchor:{valType:"enumerated",values:["free"].concat(h),
dflt:d}},"anchor")&&a("position",f);n.coerce(k,m,{side:{valType:"enumerated",values:"x"===l?["bottom","top"]:["left","right"],dflt:e}},"side");h=!1;r.length&&(h=n.coerce(k,m,{overlaying:{valType:"enumerated",values:[!1].concat(r),dflt:!1}},"overlaying"));h||(r=a("domain",c),r[0]>r[1]-1/4096&&(m.domain=c),n.noneOrAll(k.domain,m.domain,c));a("layer");return m}},{"../../lib":803,"fast-isnumeric":249}],873:[function(b,N,G){var p=b("../../constants/alignment").FROM_BL;N.exports=function(n,k,m){void 0===
m&&(m=p[n.constraintoward||"center"]);var a=[n.r2l(n.range[0]),n.r2l(n.range[1])];m=a[0]+(a[1]-a[0])*m;n.range=n._input.range=[n.l2r(m+(a[0]-m)*k),n.l2r(m+(a[1]-m)*k)];n.setScale()}},{"../../constants/alignment":771}],874:[function(b,N,G){function p(ba,ja,ma,ia,oa,xa,ra){var la=ja._hoverdata,ka=-1<ja._fullLayout.clickmode.indexOf("event"),na=[],qa;if(la&&Array.isArray(la)&&!0!==la[0].hoverOnBox){a(ba,ja,xa);ma=h(ja,ma,ia,oa);la=la[0];ia=-1;oa=[];var ta;for(ta=0;ta<ma.length;ta++){var za=ma[ta];if(la.fullData._expandedIndex===
za.cd[0].trace._expandedIndex){if(!0===la.hoverOnBox)break;void 0!==la.pointNumber?ia=la.pointNumber:void 0!==la.binNumber&&(ia=la.binNumber,oa=la.pointNumbers);break}}za={pointNumber:ia,pointNumbers:oa,searchInfo:za};if(0<za.pointNumbers.length)a:{ia=[];for(la=0;la<ma.length;la++)oa=ma[la],oa.cd[0].trace.selectedpoints&&0<oa.cd[0].trace.selectedpoints.length&&ia.push(oa);if(1===ia.length&&(la=ia[0]===za.searchInfo)&&(ia=za.searchInfo.cd[0].trace,ia.selectedpoints.length===za.pointNumbers.length)){for(la=
0;la<za.pointNumbers.length;la++)if(0>ia.selectedpoints.indexOf(za.pointNumbers[la])){la=!1;break a}la=!0;break a}la=!1}else{a:{for(ia=la=0;ia<ma.length;ia++)if(oa=ma[ia],oa=oa.cd[0].trace,oa.selectedpoints){if(1<oa.selectedpoints.length){la=!1;break a}la+=oa.selectedpoints.length;if(1<la){la=!1;break a}}la=1===la}la=la&&(qa=r(za))}if(la){ra&&ra.remove();for(qa=0;qa<ma.length;qa++)ra=ma[qa],ra._module.selectPoints(ra,!1);l(ja,ma);g(xa);ka&&ja.emit("plotly_deselect",null)}else{ba=ba.shiftKey&&(void 0!==
qa?qa:r(za));ba={pointNumber:za.pointNumber,searchInfo:za.searchInfo,subtract:ba};qa=xa.selectionDefs.concat([ba]);za=m(qa);for(qa=0;qa<ma.length;qa++)if(la=ma[qa]._module.selectPoints(ma[qa],za),la=d(la,ma[qa]),na.length)for(ia=0;ia<la.length;ia++)na.push(la[ia]);else na=la;na={points:na};l(ja,ma,na);ba&&xa&&xa.selectionDefs.push(ba);ra&&(ma=xa.mergedPolygons,ba=C(xa.dragmode),y(e(ma,ba),ra,xa));ka&&ja.emit("plotly_selected",na)}}}function n(ba){return"pointNumber"in ba&&"searchInfo"in ba}function k(ba){return{xmin:0,
xmax:0,ymin:0,ymax:0,pts:[],contains:function(ja,ma,ia,oa){return oa.cd[0].trace._expandedIndex===ba.searchInfo.cd[0].trace._expandedIndex&&ia===ba.pointNumber},isRect:!1,degenerate:!1,subtract:ba.subtract}}function m(ba){for(var ja=[],ma=n(ba[0])?0:ba[0][0][0],ia=ma,oa=n(ba[0])?0:ba[0][0][1],xa=oa,ra=0;ra<ba.length;ra++)if(n(ba[ra]))ja.push(k(ba[ra]));else{var la=O.tester(ba[ra]);la.subtract=ba[ra].subtract;ja.push(la);ma=Math.min(ma,la.xmin);ia=Math.max(ia,la.xmax);oa=Math.min(oa,la.ymin);xa=Math.max(xa,
la.ymax)}return{xmin:ma,xmax:ia,ymin:oa,ymax:xa,pts:[],contains:function(ka,na,qa,ta){for(var za=!1,Ia=0;Ia<ja.length;Ia++)ja[Ia].contains(ka,na,qa,ta)&&(za=!1===ja[Ia].subtract);return za},isRect:!1,degenerate:!1}}function a(ba,ja,ma){ja._fullLayout._drawing=!1;var ia=ja._fullLayout,oa=ma.plotinfo,xa=ma.dragmode,ra=ia._lastSelectedSubplot&&ia._lastSelectedSubplot===oa.id;ba=(ba.shiftKey||ba.altKey)&&!(D(xa)&&C(xa));ra&&ba&&oa.selection&&oa.selection.selectionDefs&&!ma.selectionDefs?(ma.selectionDefs=
oa.selection.selectionDefs,ma.mergedPolygons=oa.selection.mergedPolygons):ba&&oa.selection||g(ma);ra||(T(ja),ia._lastSelectedSubplot=oa.id)}function g(ba){var ja=ba.dragmode,ma=ba.plotinfo,ia=ba.gd;0<=ia._fullLayout._activeShapeIndex&&ia._fullLayout._deactivateShape(ia);D(ja)&&(ja=ia._fullLayout._zoomlayer.selectAll(".select-outline-"+ma.id))&&ia._fullLayout._drawing&&((ja=J(ja,ba))&&q.call("_guiRelayout",ia,{shapes:ja}),ia._fullLayout._drawing=!1);ma.selection={};ma.selection.selectionDefs=ba.selectionDefs=
[];ma.selection.mergedPolygons=ba.mergedPolygons=[]}function h(ba,ja,ma,ia){function oa(ta,za,Ia,Xa){return{_module:ta,cd:za,xaxis:Ia,yaxis:Xa}}var xa=[],ra=ja.map(function(ta){return ta._id}),la=ma.map(function(ta){return ta._id}),ka;for(ka=0;ka<ba.calcdata.length;ka++){var na=ba.calcdata[ka];var qa=na[0].trace;!0===qa.visible&&qa._module&&qa._module.selectPoints&&(!ia||qa.subplot!==ia&&qa.geo!==ia?"splom"===qa.type&&qa._xaxes[ra[0]]&&qa._yaxes[la[0]]?(na=oa(qa._module,na,ja[0],ma[0]),na.scene=ba._fullLayout._splomScenes[qa.uid],
xa.push(na)):"sankey"===qa.type?(qa=oa(qa._module,na,ja[0],ma[0]),xa.push(qa)):-1!==ra.indexOf(qa.xaxis)&&-1!==la.indexOf(qa.yaxis)&&xa.push(oa(qa._module,na,L(ba,qa.xaxis),L(ba,qa.yaxis))):xa.push(oa(qa._module,na,ja[0],ma[0])))}return xa}function r(ba){var ja=ba.searchInfo.cd[0].trace,ma=ba.pointNumber;ba=ba.pointNumbers;ma=0<ba.length?ba[0]:ma;return ja.selectedpoints?-1<ja.selectedpoints.indexOf(ma):!1}function l(ba,ja,ma){var ia;for(ia=0;ia<ja.length;ia++){var oa=ja[ia].cd[0].trace._fullInput;
var xa=ba._fullLayout._tracePreGUI[oa.uid]||{};void 0===xa.selectedpoints&&(xa.selectedpoints=oa._input.selectedpoints||null)}if(ma){ma=ma.points||[];for(ia=0;ia<ja.length;ia++){var ra=ja[ia].cd[0].trace;ra._input.selectedpoints=ra._fullInput.selectedpoints=[];ra._fullInput!==ra&&(ra.selectedpoints=[])}for(ia=0;ia<ma.length;ia++){oa=ma[ia];xa=oa.data;var la=oa.fullData;oa.pointIndices?([].push.apply(xa.selectedpoints,oa.pointIndices),ra._fullInput!==ra&&[].push.apply(la.selectedpoints,oa.pointIndices)):
(xa.selectedpoints.push(oa.pointIndex),ra._fullInput!==ra&&la.selectedpoints.push(oa.pointIndex))}}else for(ia=0;ia<ja.length;ia++)ra=ja[ia].cd[0].trace,delete ra.selectedpoints,delete ra._input.selectedpoints,ra._fullInput!==ra&&delete ra._fullInput.selectedpoints;oa=!1;for(ia=0;ia<ja.length;ia++)if(xa=ja[ia],ma=xa.cd,ra=ma[0].trace,q.traceIs(ra,"regl")&&(oa=!0),ra=xa._module,ra=ra.styleOnSelect||ra.style)ra(ba,ma,ma[0].node3),ma[0].nodeRangePlot3&&ra(ba,ma,ma[0].nodeRangePlot3);oa&&(H(ba),M(ba))}
function c(ba,ja,ma){if(ma)return ba=f.difference({regions:ba,inverted:!1},{regions:[ja],inverted:!1}),ba.regions;ba=f.union({regions:ba,inverted:!1},{regions:[ja],inverted:!1});return ba.regions}function d(ba,ja){if(Array.isArray(ba)){var ma=ja.cd;ja=ja.cd[0].trace;for(var ia=0;ia<ba.length;ia++)ba[ia]=z(ba[ia],ja,ma)}return ba}function e(ba,ja){for(var ma=[],ia=0;ia<ba.length;ia++){ma[ia]=[];for(var oa=0;oa<ba[ia].length;oa++){ma[ia][oa]=[];ma[ia][oa][0]=oa?"L":"M";for(var xa=0;xa<ba[ia][oa].length;xa++)ma[ia][oa].push(ba[ia][oa][xa])}ja||
ma[ia].push(["Z",ma[ia][0][1],ma[ia][0][2]])}return ma}var f=b("polybooljs"),q=b("../../registry"),t=b("../../components/drawing").dashStyle,w=b("../../components/color"),x=b("../../components/fx"),z=b("../../components/fx/helpers").makeEventData;G=b("../../components/dragelement/helpers");var B=G.freeMode,A=G.rectMode,D=G.drawMode,C=G.openMode,v=G.selectMode,y=b("../../components/shapes/draw_newshape/display_outlines"),F=b("../../components/shapes/draw_newshape/helpers").handleEllipse,J=b("../../components/shapes/draw_newshape/newshapes"),
K=b("../../lib"),O=b("../../lib/polygon"),I=b("../../lib/throttle"),L=b("./axis_ids").getFromId,H=b("../../lib/clear_gl_canvases"),M=b("../../plot_api/subroutines").redrawReglTraces,Q=b("./constants"),Z=Q.MINSELECT,ca=O.filter,W=O.tester,T=b("./handle_outline").clearSelect;b=b("./helpers");var U=b.p2r,ha=b.axValue,Y=b.getTransform;N.exports={prepSelect:function(ba,ja,ma,ia,oa){function xa(Ja,Pa){return Ja-Pa}var ra=B(oa),la=A(oa),ka=C(oa),na=D(oa),qa=v(oa),ta="drawcircle"===oa,za="drawline"===oa||
ta,Ia=ia.gd,Xa=Ia._fullLayout,$a=Xa._zoomlayer,gb=ia.element.getBoundingClientRect(),sb=ia.plotinfo,jb=Y(sb),vb=ja-gb.left,qb=ma-gb.top;Xa._calcInverseTransform(Ia);ja=K.apply3DTransform(Xa._invTransform)(vb,qb);vb=ja[0];qb=ja[1];var Bb=Xa._invScaleX,ub=Xa._invScaleY,wb=vb,rb=qb;ja="M"+vb+","+qb;var Ab=ia.xaxes[0]._length,Ma=ia.yaxes[0]._length,La=ia.xaxes.concat(ia.yaxes),ya=ba.altKey&&!(D(oa)&&ka),Aa,Ka,Ta,bb,cb,Eb,Pb;a(ba,Ia,ia);ra&&(Aa=ca([[vb,qb]],Q.BENDPX));var fc=$a.selectAll("path.select-outline-"+
sb.id).data(na?[0]:[1,2]);ba=Xa.newshape;fc.enter().append("path").attr("class",function(Ja){return"select-outline select-outline-"+Ja+" select-outline-"+sb.id}).style(na?{opacity:ba.opacity/2,fill:ka?void 0:ba.fillcolor,stroke:ba.line.color,"stroke-dasharray":t(ba.line.dash,ba.line.width),"stroke-width":ba.line.width+"px"}:{}).attr("fill-rule",ba.fillrule).classed("cursor-move",na?!0:!1).attr("transform",jb).attr("d",ja+"Z");var pb=$a.append("path").attr("class","zoombox-corners").style({fill:w.background,
stroke:w.defaultLine,"stroke-width":1}).attr("transform",jb).attr("d","M0,0Z"),Db=Xa._uid+Q.SELECTID,Rb=[],xc=h(Ia,ia.xaxes,ia.yaxes,ia.subplot);var Ic=sb.fillRangeItems?sb.fillRangeItems:la?function(Ja,Pa){Ja=Ja.range={};for(cb=0;cb<La.length;cb++){var db=La[cb],Jb=db._id.charAt(0);Ja[db._id]=[U(db,Pa[Jb+"min"]),U(db,Pa[Jb+"max"])].sort(xa)}}:function(Ja,Pa,db){Ja=Ja.lassoPoints={};for(cb=0;cb<La.length;cb++)Pa=La[cb],Ja[Pa._id]=db.filtered.map(ha(Pa))};ia.moveFn=function(Ja,Pa){wb=Math.max(0,Math.min(Ab,
Bb*Ja+vb));rb=Math.max(0,Math.min(Ma,ub*Pa+qb));Ja=Math.abs(wb-vb);Pa=Math.abs(rb-qb);if(la){if(qa){var db=Xa.selectdirection;db="any"===db?Pa<Math.min(.6*Ja,Z)?"h":Ja<Math.min(.6*Pa,Z)?"v":"d":db;switch(db){case "h":var Jb=ta?Ma/2:0;var Gb=Ma;break;case "v":Jb=ta?Ab/2:0,Gb=Ab}}if(na)switch(Xa.newshape.drawdirection){case "vertical":db="h";Jb=ta?Ma/2:0;Gb=Ma;break;case "horizontal":db="v";Jb=ta?Ab/2:0;Gb=Ab;break;case "ortho":Ja<Pa?(db="h",Jb=qb,Gb=rb):(db="v",Jb=vb,Gb=wb);break;default:db="d"}"h"===
db?(bb=za?F(ta,[wb,Jb],[wb,Gb]):[[vb,Jb],[vb,Gb],[wb,Gb],[wb,Jb]],bb.xmin=za?wb:Math.min(vb,wb),bb.xmax=za?wb:Math.max(vb,wb),bb.ymin=Math.min(Jb,Gb),bb.ymax=Math.max(Jb,Gb),pb.attr("d","M"+bb.xmin+","+(qb-Z)+"h-4v"+2*Z+"h4ZM"+(bb.xmax-1)+","+(qb-Z)+"h4v"+2*Z+"h-4Z")):"v"===db?(bb=za?F(ta,[Jb,rb],[Gb,rb]):[[Jb,qb],[Jb,rb],[Gb,rb],[Gb,qb]],bb.xmin=Math.min(Jb,Gb),bb.xmax=Math.max(Jb,Gb),bb.ymin=za?rb:Math.min(qb,rb),bb.ymax=za?rb:Math.max(qb,rb),pb.attr("d","M"+(vb-Z)+","+bb.ymin+"v-4h"+2*Z+"v4ZM"+
(vb-Z)+","+(bb.ymax-1)+"v4h"+2*Z+"v-4Z")):"d"===db&&(bb=za?F(ta,[vb,qb],[wb,rb]):[[vb,qb],[vb,rb],[wb,rb],[wb,qb]],bb.xmin=Math.min(vb,wb),bb.xmax=Math.max(vb,wb),bb.ymin=Math.min(qb,rb),bb.ymax=Math.max(qb,rb),pb.attr("d","M0,0Z"))}else ra&&(Aa.addPt([wb,rb]),bb=Aa.filtered);ia.selectionDefs&&ia.selectionDefs.length?(Ta=c(ia.mergedPolygons,bb,ya),bb.subtract=ya,Ka=m(ia.selectionDefs.concat([bb]))):(Ta=[bb],Ka=W(bb));y(e(Ta,ka),fc,ia);qa&&I.throttle(Db,Q.SELECTDELAY,function(){Rb=[];var cc=[];for(cb=
0;cb<xc.length;cb++){Eb=xc[cb];var uc=Eb._module.selectPoints(Eb,Ka);cc.push(uc);uc=d(uc,Eb);if(Rb.length)for(var fd=0;fd<uc.length;fd++)Rb.push(uc[fd]);else Rb=uc}Pb={points:Rb};l(Ia,xc,Pb);Ic(Pb,bb,Aa);ia.gd.emit("plotly_selecting",Pb)})};ia.clickFn=function(Ja,Pa){pb.remove();if(0<=Ia._fullLayout._activeShapeIndex)Ia._fullLayout._deactivateShape(Ia);else if(!na){var db=Xa.clickmode;I.done(Db).then(function(){I.clear(Db);if(2===Ja){fc.remove();for(cb=0;cb<xc.length;cb++)Eb=xc[cb],Eb._module.selectPoints(Eb,
!1);l(Ia,xc);g(ia);Ia.emit("plotly_deselect",null)}else-1<db.indexOf("select")&&p(Pa,Ia,ia.xaxes,ia.yaxes,ia.subplot,ia,fc),"event"===db&&Ia.emit("plotly_selected",void 0);x.click(Ia,Pa)}).catch(K.error)}};ia.doneFn=function(){pb.remove();I.done(Db).then(function(){I.clear(Db);ia.gd.emit("plotly_selected",Pb);bb&&ia.selectionDefs&&(bb.subtract=ya,ia.selectionDefs.push(bb),ia.mergedPolygons.length=0,[].push.apply(ia.mergedPolygons,Ta));ia.doneFnCompleted&&ia.doneFnCompleted(Rb)}).catch(K.error);na&&
g(ia)}},clearSelect:T,clearSelectionsCache:g,selectOnClick:p}},{"../../components/color":666,"../../components/dragelement/helpers":684,"../../components/drawing":688,"../../components/fx":706,"../../components/fx/helpers":702,"../../components/shapes/draw_newshape/display_outlines":754,"../../components/shapes/draw_newshape/helpers":755,"../../components/shapes/draw_newshape/newshapes":756,"../../lib":803,"../../lib/clear_gl_canvases":787,"../../lib/polygon":815,"../../lib/throttle":830,"../../plot_api/subroutines":844,
"../../registry":931,"./axis_ids":858,"./constants":861,"./handle_outline":865,"./helpers":866,polybooljs:504}],875:[function(b,N,G){function p(y){return Math.pow(10,y)}var n=b("@plotly/d3"),k=b("d3-time-format").utcFormat,m=b("../../lib"),a=m.numberFormat,g=b("fast-isnumeric"),h=m.cleanNumber,r=m.ms2DateTime,l=m.dateTime2ms,c=m.ensureNumber,d=m.isArrayOrTypedArray;G=b("../../constants/numerical");var e=G.FP_SAFE,f=G.BADNUM,q=G.LOG_CLIP,t=G.ONEWEEK,w=G.ONEDAY,x=G.ONEHOUR,z=G.ONEMIN,B=G.ONESEC,A=b("./axis_ids"),
D=b("./constants"),C=D.HOUR_PATTERN,v=D.WEEKDAY_PATTERN;N.exports=function(y,F){function J(Y,ba){return 0<Y?Math.log(Y)/Math.LN10:0>=Y&&ba&&y.range&&2===y.range.length?(Y=y.range[0],ba=y.range[1],.5*(Y+ba-2*q*Math.abs(Y-ba))):f}function K(Y,ba,ja,ma){if((ma||{}).msUTC&&g(Y))return+Y;ba=l(Y,ja||y.calendar);if(ba===f)if(g(Y))Y=+Y,ba=Math.floor(10*m.mod(Y+.05,1)),ba=l(new Date(Math.round(Y-ba/10)))+ba/10;else return f;return ba}function O(Y,ba,ja){return r(Y,ba,ja||y.calendar)}function I(Y){return y._categories[Math.round(Y)]}
function L(Y){if(null!==Y&&void 0!==Y){void 0===y._categoriesMap&&(y._categoriesMap={});if(void 0!==y._categoriesMap[Y])return y._categoriesMap[Y];y._categories.push("number"===typeof Y?String(Y):Y);var ba=y._categories.length-1;return y._categoriesMap[Y]=ba}return f}function H(Y){if(y._categoriesMap)return y._categoriesMap[Y]}function M(Y){var ba=H(Y);if(void 0!==ba)return ba;if(g(Y))return+Y}function Q(Y){return g(Y)?+Y:H(Y)}F=F||{};var Z=y._id||"x",ca=Z.charAt(0),W=function(Y){return g(Y)?n.round(y._b+
y._m*Y,2):f},T=function(Y){return(Y-y._b)/y._m};if(y.rangebreaks){var U="y"===ca;W=function(Y){if(!g(Y))return f;var ba=y._rangebreaks.length;if(!ba)return n.round(y._b+y._m*Y,2);var ja=U;y.range[0]>y.range[1]&&(ja=!ja);ja=ja?-1:1;for(var ma=ja*Y,ia=0,oa=0;oa<ba;oa++){var xa=ja*y._rangebreaks[oa].min,ra=ja*y._rangebreaks[oa].max;if(ma<xa)break;if(ma>ra)ia=oa+1;else{ia=ma<(xa+ra)/2?oa:oa+1;break}}ba=y._B[ia]||0;return isFinite(ba)?n.round(ba+y._m2*Y,2):0};T=function(Y){var ba=y._rangebreaks.length;
if(!ba)return(Y-y._b)/y._m;for(var ja=0,ma=0;ma<ba&&!(Y<y._rangebreaks[ma].pmin);ma++)Y>y._rangebreaks[ma].pmax&&(ja=ma+1);return(Y-y._B[ja])/y._m2}}y.c2l="log"===y.type?J:c;y.l2c="log"===y.type?p:c;y.l2p=W;y.p2l=T;y.c2p="log"===y.type?function(Y,ba){return W(J(Y,ba))}:W;y.p2c="log"===y.type?function(Y){return p(T(Y))}:T;-1!==["linear","-"].indexOf(y.type)?(y.d2r=y.r2d=y.d2c=y.r2c=y.d2l=y.r2l=h,y.c2d=y.c2r=y.l2d=y.l2r=c,y.d2p=y.r2p=function(Y){return y.l2p(h(Y))},y.p2d=y.p2r=T,y.cleanPos=c):"log"===
y.type?(y.d2r=y.d2l=function(Y,ba){return J(h(Y),ba)},y.r2d=y.r2c=function(Y){return p(h(Y))},y.d2c=y.r2l=h,y.c2d=y.l2r=c,y.c2r=J,y.l2d=p,y.d2p=function(Y,ba){return y.l2p(y.d2r(Y,ba))},y.p2d=function(Y){return p(T(Y))},y.r2p=function(Y){return y.l2p(h(Y))},y.p2r=T,y.cleanPos=c):"date"===y.type?(y.d2r=y.r2d=m.identity,y.d2c=y.r2c=y.d2l=y.r2l=K,y.c2d=y.c2r=y.l2d=y.l2r=O,y.d2p=y.r2p=function(Y,ba,ja){return y.l2p(K(Y,0,ja))},y.p2d=y.p2r=function(Y,ba,ja){return O(T(Y),ba,ja)},y.cleanPos=function(Y){return m.cleanDate(Y,
f,y.calendar)}):"category"===y.type?(y.d2c=y.d2l=L,y.r2d=y.c2d=y.l2d=I,y.d2r=y.d2l_noadd=M,y.r2c=function(Y){Y=Q(Y);return void 0!==Y?Y:y.fraction2r(.5)},y.l2r=y.c2r=c,y.r2l=Q,y.d2p=function(Y){return y.l2p(y.r2c(Y))},y.p2d=function(Y){return I(T(Y))},y.r2p=y.d2p,y.p2r=T,y.cleanPos=function(Y){return"string"===typeof Y&&""!==Y?Y:c(Y)}):"multicategory"===y.type&&(y.r2d=y.c2d=y.l2d=I,y.d2r=y.d2l_noadd=M,y.r2c=function(Y){Y=M(Y);return void 0!==Y?Y:y.fraction2r(.5)},y.r2c_just_indices=H,y.l2r=y.c2r=
c,y.r2l=M,y.d2p=function(Y){return y.l2p(y.r2c(Y))},y.p2d=function(Y){return I(T(Y))},y.r2p=y.d2p,y.p2r=T,y.cleanPos=function(Y){return Array.isArray(Y)||"string"===typeof Y&&""!==Y?Y:c(Y)},y.setupMultiCategory=function(Y){var ba=y._traceIndices,ja,ma=y._matchGroup;if(ma&&0===y._categories.length)for(ja in ma)ja!==Z&&(ma=F[A.id2name(ja)],ba=ba.concat(ma._traceIndices));var ia=[[0,{}],[0,{}]];ma=[];for(ja=0;ja<ba.length;ja++){var oa=Y[ba[ja]];if(ca in oa){var xa=oa[ca],ra=oa._length||m.minRowLength(xa);
if(d(xa[0])&&d(xa[1]))for(oa=0;oa<ra;oa++){var la=xa[0][oa],ka=xa[1][oa];null!==la&&void 0!==la&&null!==ka&&void 0!==ka&&(ma.push([la,ka]),la in ia[0][1]||(ia[0][1][la]=ia[0][0]++),ka in ia[1][1]||(ia[1][1][ka]=ia[1][0]++))}}}ma.sort(function(na,qa){var ta=ia[0][1];if(ta=ta[na[0]]-ta[qa[0]])return ta;ta=ia[1][1];return ta[na[1]]-ta[qa[1]]});for(ja=0;ja<ma.length;ja++)L(ma[ja])});y.fraction2r=function(Y){var ba=y.r2l(y.range[0]),ja=y.r2l(y.range[1]);return y.l2r(ba+Y*(ja-ba))};y.r2fraction=function(Y){var ba=
y.r2l(y.range[0]),ja=y.r2l(y.range[1]);return(y.r2l(Y)-ba)/(ja-ba)};y.cleanRange=function(Y,ba){ba||(ba={});Y||(Y="range");var ja=m.nestedProperty(y,Y).get();var ma="date"===y.type?m.dfltRange(y.calendar):"y"===ca?D.DFLTRANGEY:ba.dfltRange||D.DFLTRANGEX;ma=ma.slice();if("tozero"===y.rangemode||"nonnegative"===y.rangemode)ma[0]=0;if(ja&&2===ja.length)for("date"!==y.type||y.autorange||(ja[0]=m.cleanDate(ja[0],f,y.calendar),ja[1]=m.cleanDate(ja[1],f,y.calendar)),ba=0;2>ba;ba++)if("date"===y.type){if(!m.isDateTime(ja[ba],
y.calendar)){y[Y]=ma;break}if(y.r2l(ja[0])===y.r2l(ja[1])){Y=m.constrain(y.r2l(ja[0]),m.MIN_MS+1E3,m.MAX_MS-1E3);ja[0]=y.l2r(Y-1E3);ja[1]=y.l2r(Y+1E3);break}}else{if(!g(ja[ba]))if(g(ja[1-ba]))ja[ba]=ja[1-ba]*(ba?10:.1);else{y[Y]=ma;break}ja[ba]<-e?ja[ba]=-e:ja[ba]>e&&(ja[ba]=e);if(ja[0]===ja[1]){var ia=Math.max(1,Math.abs(1E-6*ja[0]));ja[0]-=ia;ja[1]+=ia}}else m.nestedProperty(y,Y).set(ma)};y.setScale=function(Y){var ba=F._size;if(y.overlaying){var ja=A.getFromId({_fullLayout:F},y.overlaying);y.domain=
ja.domain}ja=Y&&y._r?"_r":"range";var ma=y.calendar;y.cleanRange(ja);Y=y.r2l(y[ja][0],ma);ja=y.r2l(y[ja][1],ma);(ma="y"===ca)?(y._offset=ba.t+(1-y.domain[1])*ba.h,y._length=ba.h*(y.domain[1]-y.domain[0]),y._m=y._length/(Y-ja),y._b=-y._m*ja):(y._offset=ba.l+y.domain[0]*ba.w,y._length=ba.w*(y.domain[1]-y.domain[0]),y._m=y._length/(ja-Y),y._b=-y._m*Y);y._rangebreaks=[];y._lBreaks=0;y._m2=0;y._B=[];if(y.rangebreaks&&(y._rangebreaks=y.locateBreaks(Math.min(Y,ja),Math.max(Y,ja)),y._rangebreaks.length)){for(ba=
0;ba<y._rangebreaks.length;ba++){var ia=y._rangebreaks[ba];y._lBreaks+=Math.abs(ia.max-ia.min)}ba=ma;Y>ja&&(ba=!ba);ba&&y._rangebreaks.reverse();var oa=ba?-1:1;y._m2=oa*y._length/(Math.abs(ja-Y)-y._lBreaks);y._B.push(-y._m2*(ma?ja:Y));for(ba=0;ba<y._rangebreaks.length;ba++)ia=y._rangebreaks[ba],y._B.push(y._B[y._B.length-1]-oa*y._m2*(ia.max-ia.min));for(ba=0;ba<y._rangebreaks.length;ba++)ia=y._rangebreaks[ba],ia.pmin=W(ia.min),ia.pmax=W(ia.max)}if(!isFinite(y._m)||!isFinite(y._b)||0>y._length)throw F._replotting=
!1,Error("Something went wrong with axis scaling");};y.maskBreaks=function(Y){var ba=y.rangebreaks||[];ba._cachedPatterns||(ba._cachedPatterns=ba.map(function(ka){return ka.enabled&&ka.bounds?m.simpleMap(ka.bounds,ka.pattern?h:y.d2c):null}));ba._cachedValues||(ba._cachedValues=ba.map(function(ka){return ka.enabled&&ka.values?m.simpleMap(ka.values,y.d2c).sort(m.sorterAsc):null}));for(var ja=0;ja<ba.length;ja++){var ma=ba[ja];if(ma.enabled)if(ma.bounds){ma=ma.pattern;var ia=ba._cachedPatterns[ja];var oa=
ia[0];ia=ia[1];switch(ma){case v:var xa=new Date(Y);var ra=xa.getUTCDay();oa>ia&&(ia+=7,ra<oa&&(ra+=7));break;case C:xa=new Date(Y);ra=xa.getUTCHours();ma=xa.getUTCMinutes();var la=xa.getUTCSeconds();xa=xa.getUTCMilliseconds();ra+=ma/60+la/3600+xa/36E5;oa>ia&&(ia+=24,ra<oa&&(ra+=24));break;case "":ra=Y}if(ra>=oa&&ra<ia)return f}else for(la=ba._cachedValues[ja],xa=0;xa<la.length;xa++)if(oa=la[xa],ia=oa+ma.dvalue,Y>=oa&&Y<ia)return f}return Y};y.locateBreaks=function(Y,ba){var ja,ma=[];if(!y.rangebreaks)return ma;
var ia=y.rangebreaks.slice().sort(function(za,Ia){return za.pattern===v&&Ia.pattern===C?-1:Ia.pattern===v&&za.pattern===C?1:0}),oa=function(za,Ia){za=m.constrain(za,Y,ba);Ia=m.constrain(Ia,Y,ba);if(za!==Ia){for(var Xa=!0,$a=0;$a<ma.length;$a++){var gb=ma[$a];za<gb.max&&Ia>=gb.min&&(za<gb.min&&(gb.min=za),Ia>gb.max&&(gb.max=Ia),Xa=!1)}Xa&&ma.push({min:za,max:Ia})}};for(ja=0;ja<ia.length;ja++){var xa=ia[ja];if(xa.enabled)if(xa.bounds){var ra=Y,la=ba;xa.pattern&&(ra=Math.floor(ra));var ka=m.simpleMap(xa.bounds,
xa.pattern?h:y.r2l);var na=ka[0];var qa=ka[1];var ta=new Date(ra);switch(xa.pattern){case v:xa=t;qa=((qa<na?7:0)+(qa-na))*w;ra+=na*w-(ta.getUTCDay()*w+ta.getUTCHours()*x+ta.getUTCMinutes()*z+ta.getUTCSeconds()*B+ta.getUTCMilliseconds());break;case C:xa=w;qa=((qa<na?24:0)+(qa-na))*x;ra+=na*x-(ta.getUTCHours()*x+ta.getUTCMinutes()*z+ta.getUTCSeconds()*B+ta.getUTCMilliseconds());break;default:ra=Math.min(ka[0],ka[1]),la=Math.max(ka[0],ka[1]),qa=xa=la-ra}for(na=ra;na<la;na+=xa)oa(na,na+qa)}else for(la=
m.simpleMap(xa.values,y.d2c),ra=0;ra<la.length;ra++)na=la[ra],qa=na+xa.dvalue,oa(na,qa)}ma.sort(function(za,Ia){return za.min-Ia.min});return ma};y.makeCalcdata=function(Y,ba,ja){var ma;var ia=y.type;var oa="date"===ia&&Y[ba+"calendar"];if(ba in Y){ba=Y[ba];Y=Y._length||m.minRowLength(ba);if(m.isTypedArray(ba)&&("linear"===ia||"log"===ia)){if(Y===ba.length)return ba;if(ba.subarray)return ba.subarray(0,Y)}if("multicategory"===ia){ja=Array(Y);for(oa=0;oa<Y;oa++)ja[oa]=H([(ba[0]||[])[oa],(ba[1]||[])[oa]]);
return ja}ia=Array(Y);for(ma=0;ma<Y;ma++)ia[ma]=y.d2c(ba[ma],0,oa,ja)}else for(ja=(ba+"0"in Y)?y.d2c(Y[ba+"0"],0,oa):0,oa=Y["d"+ba]?Number(Y["d"+ba]):1,ba=Y[{x:"y",y:"x"}[ba]],Y=Y._length||ba.length,ia=Array(Y),ma=0;ma<Y;ma++)ia[ma]=ja+ma*oa;if(y.rangebreaks)for(ma=0;ma<Y;ma++)ia[ma]=y.maskBreaks(ia[ma]);return ia};y.isValidRange=function(Y){return Array.isArray(Y)&&2===Y.length&&g(y.r2l(Y[0]))&&g(y.r2l(Y[1]))};y.isPtWithinRange=function(Y,ba){Y=y.c2l(Y[ca],null,ba);ba=y.r2l(y.range[0]);var ja=y.r2l(y.range[1]);
return ba<ja?ba<=Y&&Y<=ja:ja<=Y&&Y<=ba};y._emptyCategories=function(){y._categories=[];y._categoriesMap={}};y.clearCalc=function(){var Y=y._matchGroup;if(Y){var ba=null,ja=null,ma;for(ma in Y)if(Y=F[A.id2name(ma)],Y._categories){ba=Y._categories;ja=Y._categoriesMap;break}ba&&ja?(y._categories=ba,y._categoriesMap=ja):y._emptyCategories()}else y._emptyCategories();if(y._initialCategories)for(ba=0;ba<y._initialCategories.length;ba++)L(y._initialCategories[ba])};y.sortByInitialCategories=function(){var Y=
[];y._emptyCategories();if(y._initialCategories)for(var ba=0;ba<y._initialCategories.length;ba++)L(y._initialCategories[ba]);Y=Y.concat(y._traceIndices);ba=y._matchGroup;for(var ja in ba)Z!==ja&&(ba=F[A.id2name(ja)],ba._categories=y._categories,ba._categoriesMap=y._categoriesMap,Y=Y.concat(ba._traceIndices));return Y};var ha=F._d3locale;"date"===y.type&&(y._dateFormat=ha?ha.timeFormat:k,y._extraFormat=F._extraFormat);y._separators=F.separators;y._numFormat=ha?ha.numberFormat:a;delete y._minDtick;
delete y._forceTick0}},{"../../constants/numerical":779,"../../lib":803,"./axis_ids":858,"./constants":861,"@plotly/d3":58,"d3-time-format":175,"fast-isnumeric":249}],876:[function(b,N,G){function p(h){var r=["showexponent","showtickprefix","showticksuffix"].filter(function(l){return void 0!==h[l]});if(r.every(function(l){return h[l]===h[r[0]]})||1===r.length)return h[r[0]]}function n(h,r){k.coerce(h,r,a.tickformatstops,"enabled",void 0)&&(k.coerce(h,r,a.tickformatstops,"dtickrange",void 0),k.coerce(h,
r,a.tickformatstops,"value",void 0))}var k=b("../../lib"),m=b("../../components/color").contrast,a=b("./layout_attributes"),g=b("../array_container_defaults");N.exports=function(h,r,l,c,d,e){if(!e||1===e.pass){var f=p(h);l("tickprefix")&&l("showtickprefix",f);l("ticksuffix",d.tickSuffixDflt)&&l("showticksuffix",f)}if(!e||2===e.pass)if(e=p(h),l("tickprefix")&&l("showtickprefix",e),l("ticksuffix",d.tickSuffixDflt)&&l("showticksuffix",e),l("showticklabels")){f=d.font||{};var q=r.color;d=-1!==(r.ticklabelposition||
"").indexOf("inside")?m(d.bgColor):q&&q!==a.color.dflt?q:f.color;k.coerceFont(l,"tickfont",{family:f.family,size:f.size,color:d});l("tickangle");"category"!==c&&(d=l("tickformat"),g(h,r,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:n}),r.tickformatstops.length||delete r.tickformatstops,d||"date"===c||(l("showexponent",e),l("exponentformat"),l("minexponent"),l("separatethousands")))}}},{"../../components/color":666,"../../lib":803,"../array_container_defaults":849,"./layout_attributes":869}],
877:[function(b,N,G){var p=b("../../lib"),n=b("./layout_attributes");N.exports=function(k,m,a,g){var h=p.coerce2(k,m,n,"ticklen"),r=p.coerce2(k,m,n,"tickwidth");k=p.coerce2(k,m,n,"tickcolor",m.color);a("ticks",g.outerTicks||h||r||k?"outside":"")||(delete m.ticklen,delete m.tickwidth,delete m.tickcolor)}},{"../../lib":803,"./layout_attributes":869}],878:[function(b,N,G){var p=b("./clean_ticks"),n=b("../../lib").isArrayOrTypedArray;N.exports=function(k,m,a,g){function h(d){var e=k[d];return void 0!==
e?e:(m._template||{})[d]}var r=h("tick0"),l=h("dtick"),c=h("tickvals");c=n(c)?"array":l?"linear":"auto";c=a("tickmode",c);"auto"===c?a("nticks"):"linear"===c?(a=m.dtick=p.dtick(l,g),m.tick0=p.tick0(r,g,m.calendar,a)):"multicategory"!==g&&(void 0===a("tickvals")?m.tickmode="auto":a("ticktext"))}},{"../../lib":803,"./clean_ticks":860}],879:[function(b,N,G){var p=b("@plotly/d3"),n=b("../../registry"),k=b("../../lib"),m=b("../../components/drawing"),a=b("./axes");N.exports=function(g,h,r,l){function c(A){var D=
A.xaxis,C=A.yaxis;q._defs.select("#"+A.clipId+"\x3e rect").call(m.setTranslate,0,0).call(m.setScale,1,1);A.plot.call(m.setTranslate,D._offset,C._offset).call(m.setScale,1,1);D=A.plot.selectAll(".scatterlayer .trace");D.selectAll(".point").call(m.setPointGroupScale,1,1);D.selectAll(".textpoint").call(m.setTextPointsScale,1,1);D.call(m.hideOutsideRangePoints,A)}function d(){for(var A={},D=0;D<h.length;D++){var C=h[D],v=C.plotinfo.xaxis,y=C.plotinfo.yaxis;C.xr1&&(A[v._name+".range"]=C.xr1.slice());C.yr1&&
(A[y._name+".range"]=C.yr1.slice())}t&&t();return n.call("relayout",g,A).then(function(){for(var F=0;F<h.length;F++)c(h[F].plotinfo)})}function e(){for(var A={},D=0;D<h.length;D++){var C=h[D],v=C.plotinfo.xaxis,y=C.plotinfo.yaxis;C.xr0&&(A[v._name+".range"]=C.xr0.slice());C.yr0&&(A[y._name+".range"]=C.yr0.slice())}return n.call("relayout",g,A).then(function(){for(var F=0;F<h.length;F++)c(h[F].plotinfo)})}function f(){w=Date.now();for(var A=x(Math.min(1,(w-z)/r.duration)),D=0;D<h.length;D++){var C=
h[D],v=A,y=C.plotinfo,F=y.xaxis,J=y.yaxis,K=F._length,O=J._length,I=!!C.xr1,L=!!C.yr1,H=[];if(I){var M=k.simpleMap(C.xr0,F.r2l),Q=k.simpleMap(C.xr1,F.r2l),Z=M[1]-M[0],ca=Q[1]-Q[0];H[0]=(M[0]*(1-v)+v*Q[0]-M[0])/(M[1]-M[0])*K;H[2]=K*(1-v+v*ca/Z);F.range[0]=F.l2r(M[0]*(1-v)+v*Q[0]);F.range[1]=F.l2r(M[1]*(1-v)+v*Q[1])}else H[0]=0,H[2]=K;L?(M=k.simpleMap(C.yr0,J.r2l),C=k.simpleMap(C.yr1,J.r2l),Q=M[1]-M[0],Z=C[1]-C[0],H[1]=(M[1]*(1-v)+v*C[1]-M[1])/(M[0]-M[1])*O,H[3]=O*(1-v+v*Z/Q),J.range[0]=F.l2r(M[0]*
(1-v)+v*C[0]),J.range[1]=J.l2r(M[1]*(1-v)+v*C[1])):(H[1]=0,H[3]=O);a.drawOne(g,F,{skipTitle:!0});a.drawOne(g,J,{skipTitle:!0});a.redrawComponents(g,[F._id,J._id]);v=I?K/H[2]:1;C=L?O/H[3]:1;F=F._offset-(I?H[0]/H[2]*K:0);J=J._offset-(L?H[1]/H[3]*O:0);y.clipRect.call(m.setTranslate,I?H[0]:0,L?H[1]:0).call(m.setScale,1/v,1/C);y.plot.call(m.setTranslate,F,J).call(m.setScale,v,C);m.setPointGroupScale(y.zoomScalePts,1/v,1/C);m.setTextPointsScale(y.zoomScaleTxt,1/v,1/C)}w-z>r.duration?(d(),B=window.cancelAnimationFrame(f)):
B=window.requestAnimationFrame(f)}var q=g._fullLayout;if(0===h.length)a.redrawComponents(g);else{var t;l&&(t=l());var w,x=p.ease(r.easing);g._transitionData._interruptCallbacks.push(function(){window.cancelAnimationFrame(B);B=null;return e()});var z=Date.now();var B=window.requestAnimationFrame(f);return Promise.resolve()}}},{"../../components/drawing":688,"../../lib":803,"../../registry":931,"./axes":854,"@plotly/d3":58}],880:[function(b,N,G){function p(m,a){var g={v:"x",h:"y"}[m.orientation||"v"],
h=n(m,"box-violin"),r=n(m._fullInput||{},"candlestick");return h&&!r&&a===g&&void 0===m[g]&&void 0===m[g+"0"]}var n=b("../../registry").traceIs,k=b("./axis_autotype");N.exports=function(m,a,g,h){g("autotypenumbers",h.autotypenumbersDflt);if("-"===g("type",(h.splomStash||{}).type)){g=h.data;if("-"===a.type){h=a._id;var r=h.charAt(0);-1!==h.indexOf("scene")&&(h=r);b:{for(var l=h,c=0;c<g.length;c++){var d=g[c];if("splom"===d.type&&0<d._length&&(d["_"+r+"axes"]||{})[l]||(d[r+"axis"]||r)===l&&(p(d,r)||
(d[r]||[]).length||d[r+"0"])){var e=d;break b}}e=void 0}if(e)if("histogram"===e.type&&r==={v:"y",h:"x"}[e.orientation||"v"])a.type="linear";else if(d=r+"calendar",l=e[d],c={noMultiCategory:!n(e,"cartesian")||n(e,"noMultiCategory")},"box"===e.type&&e._hasPreCompStats&&r==={h:"x",v:"y"}[e.orientation||"v"]&&(c.noMultiCategory=!0),c.autotypenumbers=a.autotypenumbers,p(e,r)){var f={v:"x",h:"y"}[e.orientation||"v"],q=[];for(e=0;e<g.length;e++){var t=g[e];n(t,"box-violin")&&(t[r+"axis"]||r)===h&&(void 0!==
t[f]?q.push(t[f][0]):void 0!==t.name?q.push(t.name):q.push("text"),t[d]!==l&&(l=void 0))}a.type=k(q,l,c)}else"splom"===e.type?(g=e.dimensions[e._axesDim[h]],g.visible&&(a.type=k(g.values,l,c))):a.type=k(e[r]||[e[r+"0"]],l,c)}"-"===a.type?a.type="linear":m.type=a.type}}},{"../../registry":931,"./axis_autotype":855}],881:[function(b,N,G){function p(h,r,l){var c=!1;if("data"===r.type)h=h._fullData[null!==r.traces?r.traces[0]:0];else if("layout"===r.type)h=h._fullLayout;else return!1;h=g.nestedProperty(h,
r.prop).get();l=l[r.type]=l[r.type]||{};l.hasOwnProperty(r.prop)&&l[r.prop]!==h&&(c=!0);l[r.prop]=h;return{changed:c,value:h}}function n(h,r){var l=[];h=r[0];var c={};if("string"===typeof h)c[h]=r[1];else if(g.isPlainObject(h))c=h;else return l;m(c,function(d,e,f){l.push({type:"layout",prop:d,value:f})},"",0);return l}function k(h,r){var l=[];var c=r[0];var d=r[1];var e=r[2];r={};if("string"===typeof c)r[c]=d;else if(g.isPlainObject(c))r=c,void 0===e&&(e=d);else return l;void 0===e&&(e=null);m(r,
function(f,q,t){if(Array.isArray(t)){t=t.slice();var w=Math.min(t.length,h.data.length);e&&(w=Math.min(w,e.length));q=[];for(var x=0;x<w;x++)q[x]=e?e[x]:x}else q=e?e.slice():null;if(null===q)Array.isArray(t)&&(t=t[0]);else if(Array.isArray(q)){if(!Array.isArray(t))for(w=t,t=[],x=0;x<q.length;x++)t[x]=w;t.length=Math.min(q.length,t.length)}l.push({type:"data",prop:f,traces:q,value:t})},"",0);return l}function m(h,r,l,c){Object.keys(h).forEach(function(d){var e=h[d];if("_"!==d[0]){var f=l+(0<c?".":
"")+d;g.isPlainObject(e)?m(e,r,f,c+1):r(f,d,e)}})}var a=b("../registry"),g=b("../lib");G.manageCommandObserver=function(h,r,l,c){var d={},e=!0;r&&r._commandObserver&&(d=r._commandObserver);d.cache||(d.cache={});d.lookupTable={};var f=G.hasSimpleAPICommandBindings(h,l,d.lookupTable);if(r&&r._commandObserver){if(f)return d;if(r._commandObserver.remove)return r._commandObserver.remove(),r._commandObserver=null,d}if(f){p(h,f,d.cache);d.check=function(){if(e){var t=p(h,f,d.cache);t.changed&&c&&void 0!==
d.lookupTable[t.value]&&(d.disable(),Promise.resolve(c({value:t.value,type:f.type,prop:f.prop,traces:f.traces,index:d.lookupTable[t.value]})).then(d.enable,d.enable));return t.changed}};var q="plotly_relayout plotly_redraw plotly_restyle plotly_update plotly_animatingframe plotly_afterplot".split(" ");for(l=0;l<q.length;l++)h._internalOn(q[l],d.check);d.remove=function(){for(var t=0;t<q.length;t++)h._removeInternalListener(q[t],d.check)}}else g.log("Unable to automatically bind plot updates to API command"),
d.lookupTable={},d.remove=function(){};d.disable=function(){e=!1};d.enable=function(){e=!0};r&&(r._commandObserver=d);return d};G.hasSimpleAPICommandBindings=function(h,r,l){var c,d=r.length;for(c=0;c<d;c++){var e=r[c];var f=e.method;e=e.args;Array.isArray(e)||(e=[]);if(!f)return!1;e=G.computeAPICommandBindings(h,f,e);if(1!==e.length)return!1;if(t){f=e[0];if(f.type!==t.type||f.prop!==t.prop)return!1;if(Array.isArray(t.traces))if(Array.isArray(f.traces)){f.traces.sort();for(var q=0;q<t.traces.length;q++)if(t.traces[q]!==
f.traces[q])return!1}else return!1;else if(f.prop!==t.prop)return!1}else{var t=e[0];Array.isArray(t.traces)&&t.traces.sort()}f=e[0];f=f.value;if(Array.isArray(f))if(1===f.length)f=f[0];else return!1;l&&(l[f]=c)}return t};G.executeAPICommand=function(h,r,l){if("skip"===r)return Promise.resolve();var c=a.apiMethodRegistry[r];h=[h];Array.isArray(l)||(l=[]);for(var d=0;d<l.length;d++)h.push(l[d]);return c.apply(null,h).catch(function(e){g.warn("API call to Plotly."+r+" rejected.",e);return Promise.reject(e)})};
G.computeAPICommandBindings=function(h,r,l){Array.isArray(l)||(l=[]);switch(r){case "restyle":h=k(h,l);break;case "relayout":h=n(h,l);break;case "update":h=k(h,[l[0],l[2]]).concat(n(h,[l[1]]));break;case "animate":h=l;h=Array.isArray(h[0])&&1===h[0].length&&-1!==["string","number"].indexOf(typeof h[0][0])?[{type:"layout",prop:"_currentFrame",value:h[0][0].toString()}]:[];break;default:h=[]}return h}},{"../lib":803,"../registry":931}],882:[function(b,N,G){var p=b("../lib/extend").extendFlat;G.attributes=
function(n,k){n=n||{};k={valType:"info_array",editType:n.editType,items:[{valType:"number",min:0,max:1,editType:n.editType},{valType:"number",min:0,max:1,editType:n.editType}],dflt:[0,1]};k={x:p({},k,{}),y:p({},k,{}),editType:n.editType};n.noGridCell||(k.row={valType:"integer",min:0,dflt:0,editType:n.editType},k.column={valType:"integer",min:0,dflt:0,editType:n.editType});return k};G.defaults=function(n,k,m,a){var g=a&&a.x||[0,1];a=a&&a.y||[0,1];if(k=k.grid){var h=m("domain.column");void 0!==h&&(h<
k.columns?g=k._domains.x[h]:delete n.domain.column);h=m("domain.row");void 0!==h&&(h<k.rows?a=k._domains.y[h]:delete n.domain.row)}k=m("domain.x",g);m=m("domain.y",a);k[0]<k[1]||(n.domain.x=g.slice());m[0]<m[1]||(n.domain.y=a.slice())}},{"../lib/extend":793}],883:[function(b,N,G){N.exports=function(p){var n=p.editType,k=p.colorEditType;void 0===k&&(k=n);n={family:{valType:"string",noBlank:!0,strict:!0,editType:n},size:{valType:"number",min:1,editType:n},color:{valType:"color",editType:k},editType:n};
p.arrayOk&&(n.family.arrayOk=!0,n.size.arrayOk=!0,n.color.arrayOk=!0);return n}},{}],884:[function(b,N,G){N.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],885:[function(b,N,G){G.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",
baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr",
equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",
loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",
robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"};G.axesNames=["lonaxis","lataxis"];G.lonaxisSpan={orthographic:180,"azimuthal equal area":360,
"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360};G.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180};G.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,
160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}};G.clipPad=.001;G.precision=.1;G.landColor="#F0DC82";G.waterColor="#3399FF";G.locationmodeToLayer={"ISO-3":"countries",
"USA-states":"subunits","country names":"countries"};G.sphereSVG={type:"Sphere"};G.fillLayers={ocean:1,land:1,lakes:1};G.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1};G.layers="bg ocean land lakes subunits countries coastlines rivers lataxis lonaxis frame backplot frontplot".split(" ");G.layersForChoropleth="bg ocean land subunits countries coastlines lataxis lonaxis frame backplot rivers lakes frontplot".split(" ");G.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",
subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},{}],886:[function(b,N,G){function p(O){this.id=O.id;this.graphDiv=O.graphDiv;this.container=O.container;this.topojsonURL=O.topojsonURL;this.isStatic=O.staticPlot;this.midPt=this.bounds=this.fitScale=this.viewInitial=this.scope=this.projection=this.topojson=this.topojsonName=null;this.hasChoropleth=!1;this.traceHash={};this.layers={};this.basePaths={};this.dataPaths={};this.dataPoints={};this.bgRect=this.clipRect=
this.clipDef=null;this.makeFramework()}function n(O){var I=O.projection,L=I.type,H=y.projNames[L];H="geo"+d.titleCase(H);var M=(g[H]||l[H])(),Q=O._isSatellite?180*Math.acos(1/I.distance)/Math.PI:O._isClipped?y.lonaxisSpan[L]/2:null;L=["center","rotate","parallels","clipExtent"];H=function(W){return W?M:[]};for(var Z=0;Z<L.length;Z++){var ca=L[Z];"function"!==typeof M[ca]&&(M[ca]=H)}M.isLonLatOverEdges=function(W){if(null===M(W))return!0;if(Q){var T=M.rotate();return r(W,[-T[0],-T[1]])>Q*Math.PI/180}return!1};
M.getPath=function(){return h().projection(M)};M.getBounds=function(W){return M.getPath().bounds(W)};M.precision(y.precision);O._isSatellite&&M.tilt(I.tilt).distance(I.distance);Q&&M.clipAngle(Q-y.clipPad);return M}function k(O,I,L){var H=I[O],M=y.scopeDefaults[I.scope];if("lonaxis"===O){var Q=M.lonaxisRange;var Z=M.lataxisRange;var ca=function(T,U){return[T,U]}}else"lataxis"===O&&(Q=M.lataxisRange,Z=M.lonaxisRange,ca=function(T,U){return[U,T]});H={type:"linear",range:[Q[0],Q[1]-1E-6],tick0:H.tick0,
dtick:H.dtick};x.setConvert(H,L);L=x.calcTicks(H);I.isScoped||"lonaxis"!==O||L.pop();O=L.length;I=Array(O);for(H=0;H<O;H++){M=L[H].x;Q=I[H]=[];for(var W=Z[0];W<Z[1]+2.5;W+=2.5)Q.push(ca(M,W))}return{type:"MultiLineString",coordinates:I}}function m(O,I){var L=y.clipPad,H=O[0]+L;O=O[1]-L;var M=I[0]+L;I=I[1]-L;0<H&&0>O&&(O+=360);L=(O-H)/4;return{type:"Polygon",coordinates:[[[H,M],[H,I],[H+L,I],[H+2*L,I],[H+3*L,I],[O,I],[O,M],[O-L,M],[O-2*L,M],[O-3*L,M],[H,M]]]}}var a=b("@plotly/d3"),g=b("d3-geo"),h=
g.geoPath,r=g.geoDistance,l=b("d3-geo-projection"),c=b("../../registry"),d=b("../../lib"),e=d.strTranslate,f=b("../../components/color"),q=b("../../components/drawing"),t=b("../../components/fx"),w=b("../plots"),x=b("../cartesian/axes"),z=b("../cartesian/autorange").getAutoRange,B=b("../../components/dragelement"),A=b("../cartesian/select").prepSelect,D=b("../cartesian/select").clearSelect,C=b("../cartesian/select").selectOnClick,v=b("./zoom"),y=b("./constants"),F=b("../../lib/geo_location_utils"),
J=b("../../lib/topojson_utils"),K=b("topojson-client").feature;b=p.prototype;N.exports=function(O){return new p(O)};b.plot=function(O,I,L){var H=this,M=I[this.id],Q=[],Z=!1,ca;for(ca in y.layerNameToAdjective)if("frame"!==ca&&M["show"+ca]){Z=!0;break}for(ca=0;ca<O.length;ca++)if(O[0][0].trace.locationmode){Z=!0;break}Z&&(M=J.getTopojsonName(M),null===H.topojson||M!==H.topojsonName)&&(H.topojsonName=M,void 0===PlotlyGeoAssets.topojson[H.topojsonName]&&Q.push(H.fetchTopojson()));Q=Q.concat(F.fetchTraceGeoData(O));
L.push(new Promise(function(W,T){Promise.all(Q).then(function(){H.topojson=PlotlyGeoAssets.topojson[H.topojsonName];H.update(O,I);W()}).catch(T)}))};b.fetchTopojson=function(){var O=this,I=J.getTopojsonPath(O.topojsonURL,O.topojsonName);return new Promise(function(L,H){a.json(I,function(M,Q){if(M)return 404===M.status?H(Error(["plotly.js could not find topojson file at",I,". Make sure the *topojsonURL* plot config option is set properly."].join(" "))):H(Error(["unexpected error while fetching topojson file at",
I].join(" ")));PlotlyGeoAssets.topojson[O.topojsonName]=Q;L()})})};b.update=function(O,I){var L=I[this.id];this.hasChoropleth=!1;for(var H=0;H<O.length;H++){var M=O[H],Q=M[0].trace;"choropleth"===Q.type&&(this.hasChoropleth=!0);!0===Q.visible&&0<Q._length&&Q._module.calcGeoJSON(M,I)}this.updateProjection(O,I)||(this.viewInitial&&this.scope===L.scope||this.saveViewInitial(L),this.scope=L.scope,this.updateBaseLayers(I,L),this.updateDims(I,L),this.updateFx(I,L),w.generalUpdatePerTraceModule(this.graphDiv,
this,O,L),O=this.layers.frontplot.select(".scatterlayer"),this.dataPoints.point=O.selectAll(".point"),this.dataPoints.text=O.selectAll("text"),this.dataPaths.line=O.selectAll(".js-line"),O=this.layers.backplot.select(".choroplethlayer"),this.dataPaths.choropleth=O.selectAll("path"),this.render())};b.updateProjection=function(O,I){var L=this.graphDiv;O=I[this.id];var H=I._size,M=O.domain,Q=O.projection,Z=O.lonaxis,ca=O.lataxis,W=Z._ax,T=ca._ax;I=this.projection=n(O);M=[[H.l+H.w*M.x[0],H.t+H.h*(1-M.y[1])],
[H.l+H.w*M.x[1],H.t+H.h*(1-M.y[0])]];H=O.center||{};var U=Q.rotation||{};Z=Z.range||[];var ha=ca.range||[];O.fitbounds&&(W._length=M[1][0]-M[0][0],T._length=M[1][1]-M[0][1],W.range=z(L,W),T.range=z(L,T),L=(W.range[0]+W.range[1])/2,ca=(T.range[0]+T.range[1])/2,O._isScoped?H={lon:L,lat:ca}:O._isClipped?(H={lon:L,lat:ca},U={lon:L,lat:ca,roll:U.roll},ha=Q.type,Z=y.lonaxisSpan[ha]/2||180,ha=y.lataxisSpan[ha]/2||90,Z=[L-Z,L+Z],ha=[ca-ha,ca+ha]):(H={lon:L,lat:ca},U={lon:L,lat:U.lat,roll:U.roll}));I.center([H.lon-
U.lon,H.lat-U.lat]).rotate([-U.lon,-U.lat,U.roll]).parallels(Q.parallels);U=m(Z,ha);I.fitExtent(M,U);M=this.bounds=I.getBounds(U);L=this.fitScale=I.scale();U=I.translate();O.fitbounds?(Q=I.getBounds(m(W.range,T.range)),Q=Math.min((M[1][0]-M[0][0])/(Q[1][0]-Q[0][0]),(M[1][1]-M[0][1])/(Q[1][1]-Q[0][1])),isFinite(Q)?I.scale(Q*L):d.warn("Something went wrong during"+this.id+"fitbounds computations.")):I.scale(Q.scale*L);Q=this.midPt=[(M[0][0]+M[1][0])/2,(M[0][1]+M[1][1])/2];I.translate([U[0]+(Q[0]-U[0]),
U[1]+(Q[1]-U[1])]).clipExtent(M);O._isAlbersUsa&&(O=I([H.lon,H.lat]),H=I.translate(),I.translate([H[0]-(O[0]-H[0]),H[1]-(O[1]-H[1])]))};b.updateBaseLayers=function(O,I){function L(W){return"lonaxis"===W||"lataxis"===W}var H=this,M=H.topojson,Q=H.layers,Z=H.basePaths,ca=(this.hasChoropleth?y.layersForChoropleth:y.layers).filter(function(W){return y.lineLayers[W]||y.fillLayers[W]?I["show"+W]:L(W)?I[W].showgrid:!0});ca=H.framework.selectAll(".layer").data(ca,String);ca.exit().each(function(W){delete Q[W];
delete Z[W];a.select(this).remove()});ca.enter().append("g").attr("class",function(W){return"layer "+W}).each(function(W){var T=Q[W]=a.select(this);"bg"===W?H.bgRect=T.append("rect").style("pointer-events","all"):L(W)?Z[W]=T.append("path").style("fill","none"):"backplot"===W?T.append("g").classed("choroplethlayer",!0):"frontplot"===W?T.append("g").classed("scatterlayer",!0):y.lineLayers[W]?Z[W]=T.append("path").style("fill","none").style("stroke-miterlimit",2):y.fillLayers[W]&&(Z[W]=T.append("path").style("stroke",
"none"))});ca.order();ca.each(function(W){var T=Z[W],U=y.layerNameToAdjective[W];"frame"===W?T.datum(y.sphereSVG):y.lineLayers[W]||y.fillLayers[W]?T.datum(K(M,M.objects[W])):L(W)&&T.datum(k(W,I,O)).call(f.stroke,I[W].gridcolor).call(q.dashLine,"",I[W].gridwidth);y.lineLayers[W]?T.call(f.stroke,I[U+"color"]).call(q.dashLine,"",I[U+"width"]):y.fillLayers[W]&&T.call(f.fill,I[U+"color"])})};b.updateDims=function(O,I){var L=this.bounds,H=(I.framewidth||0)/2;O=L[0][0]-H;var M=L[0][1]-H,Q=L[1][0]-O+H;L=
L[1][1]-M+H;q.setRect(this.clipRect,O,M,Q,L);this.bgRect.call(q.setRect,O,M,Q,L).call(f.fill,I.bgcolor);this.xaxis._offset=O;this.xaxis._length=Q;this.yaxis._offset=M;this.yaxis._length=L};b.updateFx=function(O,I){function L(){var ha=M.viewInitial,Y={},ba;for(ba in ha)Y[M.id+"."+ba]=ha[ba];c.call("_guiRelayout",Q,Y);Q.emit("plotly_doubleclick",null)}function H(ha){return M.projection.invert([ha[0]+M.xaxis._offset,ha[1]+M.yaxis._offset])}var M=this,Q=M.graphDiv,Z=M.bgRect,ca=O.dragmode,W=O.clickmode;
if(!M.isStatic){var T;"select"===ca?T=function(ha,Y){(ha.range={})[M.id]=[H([Y.xmin,Y.ymin]),H([Y.xmax,Y.ymax])]}:"lasso"===ca&&(T=function(ha,Y,ba){(ha.lassoPoints={})[M.id]=ba.filtered.map(H)});var U={element:M.bgRect.node(),gd:Q,plotinfo:{id:M.id,xaxis:M.xaxis,yaxis:M.yaxis,fillRangeItems:T},xaxes:[M.xaxis],yaxes:[M.yaxis],subplot:M.id,clickFn:function(ha){2===ha&&D(Q)}};if("pan"===ca){if(Z.node().onmousedown=null,Z.call(v(M,I)),Z.on("dblclick.zoom",L),!Q._context._scrollZoom.geo)Z.on("wheel.zoom",
null)}else if("select"===ca||"lasso"===ca)Z.on(".zoom",null),U.prepFn=function(ha,Y,ba){A(ha,Y,ba,U,ca)},B.init(U);Z.on("mousemove",function(){var ha=M.projection.invert(d.getPositionFromD3Event());if(!ha)return B.unhover(Q,a.event);M.xaxis.p2c=function(){return ha[0]};M.yaxis.p2c=function(){return ha[1]};t.hover(Q,a.event,M.id)});Z.on("mouseout",function(){Q._dragging||B.unhover(Q,a.event)});Z.on("click",function(){"select"!==ca&&"lasso"!==ca&&(-1<W.indexOf("select")&&C(a.event,Q,[M.xaxis],[M.yaxis],
M.id,U),-1<W.indexOf("event")&&t.click(Q,a.event))})}};b.makeFramework=function(){var O=this,I=O.graphDiv,L=I._fullLayout,H="clip"+L._uid+O.id;O.clipDef=L._clips.append("clipPath").attr("id",H);O.clipRect=O.clipDef.append("rect");O.framework=a.select(O.container).append("g").attr("class","geo "+O.id).call(q.setClipUrl,H,I);O.project=function(M){return(M=O.projection(M))?[M[0]-O.xaxis._offset,M[1]-O.yaxis._offset]:[null,null]};O.xaxis={_id:"x",c2p:function(M){return O.project(M)[0]}};O.yaxis={_id:"y",
c2p:function(M){return O.project(M)[1]}};O.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"};x.setConvert(O.mockAxis,L)};b.saveViewInitial=function(O){var I=O.center||{},L=O.projection,H=L.rotation||{};this.viewInitial={fitbounds:O.fitbounds,"projection.scale":L.scale};d.extendFlat(this.viewInitial,O._isScoped?{"center.lon":I.lon,"center.lat":I.lat}:O._isClipped?{"projection.rotation.lon":H.lon,"projection.rotation.lat":H.lat}:{"center.lon":I.lon,"center.lat":I.lat,"projection.rotation.lon":H.lon})};
b.render=function(){function O(Q){return(Q=L(Q.lonlat))?e(Q[0],Q[1]):null}function I(Q){return L.isLonLatOverEdges(Q.lonlat)?"none":null}var L=this.projection,H=L.getPath(),M;for(M in this.basePaths)this.basePaths[M].attr("d",H);for(M in this.dataPaths)this.dataPaths[M].attr("d",function(Q){return H(Q.geojson)});for(M in this.dataPoints)this.dataPoints[M].attr("display",I).attr("transform",O)}},{"../../components/color":666,"../../components/dragelement":685,"../../components/drawing":688,"../../components/fx":706,
"../../lib":803,"../../lib/geo_location_utils":796,"../../lib/topojson_utils":832,"../../registry":931,"../cartesian/autorange":853,"../cartesian/axes":854,"../cartesian/select":874,"../plots":917,"./constants":885,"./zoom":890,"@plotly/d3":58,"d3-geo":169,"d3-geo-projection":168,"topojson-client":601}],887:[function(b,N,G){var p=b("../../plots/get_data").getSubplotCalcData;G=b("../../lib").counterRegex;var n=b("./geo");G=G("geo");N.exports={attr:"geo",name:"geo",idRoot:"geo",idRegex:G,attrRegex:G,
attributes:{geo:{valType:"subplotid",dflt:"geo",editType:"calc"}},layoutAttributes:b("./layout_attributes"),supplyLayoutDefaults:b("./layout_defaults"),plot:function(k){for(var m=k._fullLayout,a=k.calcdata,g=m._subplots.geo,h=0;h<g.length;h++){var r=g[h],l=p(a,"geo",r),c=m[r]._subplot;c||(c=n({id:r,graphDiv:k,container:m._geolayer.node(),topojsonURL:k._context.topojsonURL,staticPlot:k._context.staticPlot}),m[r]._subplot=c);c.plot(l,m,k._promises)}},updateFx:function(k){k=k._fullLayout;for(var m=k._subplots.geo,
a=0;a<m.length;a++){var g=k[m[a]];g._subplot.updateFx(k,g)}},clean:function(k,m,a,g){k=g._subplots.geo||[];for(a=0;a<k.length;a++){var h=k[a],r=g[h]._subplot;!m[h]&&r&&(r.framework.remove(),r.clipDef.remove())}}}},{"../../lib":803,"../../plots/get_data":891,"./geo":886,"./layout_attributes":888,"./layout_defaults":889}],888:[function(b,N,G){G=b("../../components/color/attributes");var p=b("../domain").attributes,n=b("./constants"),k=b("../../plot_api/edit_types").overrideAll;b=b("../../lib/sort_object_keys");
var m={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:G.lightLine},gridwidth:{valType:"number",min:0,dflt:1}};(N.exports=k({domain:p({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:b(n.scopeDefaults),
dflt:"world"},projection:{type:{valType:"enumerated",values:b(n.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",
dflt:G.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:n.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:n.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:n.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:n.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",
dflt:G.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:G.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:G.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:G.background},lonaxis:m,lataxis:m},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":665,"../../lib/sort_object_keys":826,
"../../plot_api/edit_types":836,"../domain":882,"./constants":885}],889:[function(b,N,G){function p(r,l,c,d){var e=m(d.fullData,"geo",d.id).map(function(K){return K._expandedIndex});d=c("resolution");var f=c("scope"),q=a.scopeDefaults[f],t=c("projection.type",q.projType),w=l._isAlbersUsa="albers usa"===t;w&&(f=l.scope="usa");var x=l._isScoped="world"!==f,z=l._isSatellite="satellite"===t,B=l._isConic=-1!==t.indexOf("conic")||"albers"===t,A=l._isClipped=!!a.lonaxisSpan[t];!1===r.visible&&(r=n.extendDeep({},
l._template),r.showcoastlines=!1,r.showcountries=!1,r.showframe=!1,r.showlakes=!1,r.showland=!1,r.showocean=!1,r.showrivers=!1,r.showsubunits=!1,r.lonaxis&&(r.lonaxis.showgrid=!1),r.lataxis&&(r.lataxis.showgrid=!1),l._template=r);r=c("visible");for(var D,C=0;C<h.length;C++){var v=h[C];D=[30,10][C];if(x)var y=q[v+"Range"];else{y=a[v+"Span"];y=(y[t]||y["*"])/2;var F=c("projection.rotation."+v.substr(0,3),q.projRotate[C]);y=[F-y,F+y]}y=c(v+".range",y);c(v+".tick0");c(v+".dtick",D);if(D=c(v+".showgrid",
r?void 0:!1))c(v+".gridcolor"),c(v+".gridwidth");l[v]._ax={type:"linear",_id:v.slice(0,3),_traceIndices:e,setScale:n.identity,c2l:n.identity,r2l:n.identity,autorange:!0,range:y.slice(),_m:1,_input:{}}}C=l.lonaxis.range;e=l.lataxis.range;t=C[0];C=C[1];0<t&&0>C&&(C+=360);t=(t+C)/2;if(!w){C=x?q.projRotate:[t,0,0];var J=c("projection.rotation.lon",C[0]);c("projection.rotation.lat",C[1]);c("projection.rotation.roll",C[2]);if(D=c("showcoastlines",!x&&r))c("coastlinecolor"),c("coastlinewidth");(D=c("showocean",
r?void 0:!1))&&c("oceancolor")}w?(J=-96.6,w=38.7):(J=x?t:J,w=(e[0]+e[1])/2);c("center.lon",J);c("center.lat",w);z&&(c("projection.tilt"),c("projection.distance"));B&&c("projection.parallels",q.projParallels||[0,60]);c("projection.scale");(D=c("showland",r?void 0:!1))&&c("landcolor");(D=c("showlakes",r?void 0:!1))&&c("lakecolor");if(D=c("showrivers",r?void 0:!1))c("rivercolor"),c("riverwidth");if(D=c("showcountries",x&&"usa"!==f&&r))c("countrycolor"),c("countrywidth");if("usa"===f||"north america"===
f&&50===d)c("showsubunits",r),c("subunitcolor"),c("subunitwidth");!x&&(D=c("showframe",r))&&(c("framecolor"),c("framewidth"));c("bgcolor");c("fitbounds")&&(delete l.projection.scale,x?(delete l.center.lon,delete l.center.lat):A?(delete l.center.lon,delete l.center.lat,delete l.projection.rotation.lon,delete l.projection.rotation.lat,delete l.lonaxis.range,delete l.lataxis.range):(delete l.center.lon,delete l.center.lat,delete l.projection.rotation.lon))}var n=b("../../lib"),k=b("../subplot_defaults"),
m=b("../get_data").getSubplotData,a=b("./constants"),g=b("./layout_attributes"),h=a.axesNames;N.exports=function(r,l,c){k(r,l,c,{type:"geo",attributes:g,handleDefaults:p,fullData:c,partition:"y"})}},{"../../lib":803,"../get_data":891,"../subplot_defaults":925,"./constants":885,"./layout_attributes":888}],890:[function(b,N,G){function p(B,A){return e.behavior.zoom().translate(A.translate()).scale(A.scale())}function n(B,A,D){function C(H,M){I[v+"."+H]=f.nestedProperty(J,H).get();q.call("_storeDirectGUIEdit",
F,K._preGUI,I);var Q=f.nestedProperty(O,H);Q.get()!==M&&(Q.set(M),f.nestedProperty(J,H).set(M),L[v+"."+H]=M)}var v=B.id,y=B.graphDiv,F=y.layout,J=F[v],K=y._fullLayout,O=K[v],I={},L={};D(C);C("projection.scale",A.scale()/B.fitScale);C("fitbounds",!1);y.emit("plotly_relayout",L)}function k(B,A){function D(v){var y=A.invert(B.midPt);v("center.lon",y[0]);v("center.lat",y[1])}var C=p(B,A);C.on("zoomstart",function(){e.select(this).style(x)}).on("zoom",function(){A.scale(e.event.scale).translate(e.event.translate);
B.render();var v=A.invert(B.midPt);B.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":A.scale()/B.fitScale,"geo.center.lon":v[0],"geo.center.lat":v[1]})}).on("zoomend",function(){e.select(this).style(z);n(B,A,D)});return C}function m(B,A){function D(M){var Q=A.rotate(),Z=A.invert(B.midPt);M("projection.rotation.lon",-Q[0]);M("center.lon",Z[0]);M("center.lat",Z[1])}var C=p(B,A),v,y,F,J,K,O,I,L,H;C.on("zoomstart",function(){e.select(this).style(x);v=e.mouse(this);y=A.rotate();F=A.translate();
J=y;K=A.invert(v)}).on("zoom",function(){O=e.mouse(this);var M=v;var Q=A.invert(M);Q?(Q=A(Q),M=2<Math.abs(Q[0]-M[0])||2<Math.abs(Q[1]-M[1])):M=!0;M?(C.scale(A.scale()),C.translate(A.translate())):(A.scale(e.event.scale),A.translate([F[0],e.event.translate[1]]),K?A.invert(O)&&(L=A.invert(O),I=[J[0]+(L[0]-K[0]),y[1],y[2]],A.rotate(I),J=I):(v=O,K=A.invert(v)),H=!0,B.render(),M=A.rotate(),Q=A.invert(B.midPt),B.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":A.scale()/B.fitScale,"geo.center.lon":Q[0],
"geo.center.lat":Q[1],"geo.projection.rotation.lon":-M[0]}))}).on("zoomend",function(){e.select(this).style(z);H&&n(B,A,D)});return C}function a(B,A){function D(O){F++||O({type:"zoomstart"})}function C(O){var I=A.rotate();O("projection.rotation.lon",-I[0]);O("projection.rotation.lat",-I[1])}A.rotate();A.scale();var v=p(B,A),y=d(v,"zoomstart","zoom","zoomend"),F=0,J=v.on,K;v.on("zoomstart",function(){e.select(this).style(x);var O=e.mouse(this),I=A.rotate(),L=I,H=A.translate(),M=h(I);K=g(A,O);J.call(v,
"zoom",function(){var Q=e.mouse(this);A.scale(e.event.scale);if(!K)O=Q,K=g(A,O);else if(g(A,Q)){A.rotate(I).translate(H);var Z=g(A,Q);var ca=K;if(ca&&Z){Q=[ca[1]*Z[2]-ca[2]*Z[1],ca[2]*Z[0]-ca[0]*Z[2],ca[0]*Z[1]-ca[1]*Z[0]];var W=Math.sqrt(c(Q,Q));Z=.5*Math.acos(Math.max(-1,Math.min(1,c(ca,Z))));ca=Math.sin(Z)/W;var T=W&&[Math.cos(Z),Q[2]*ca,-Q[1]*ca,Q[0]*ca]}else T=void 0;Q=M[0];W=M[1];Z=M[2];ca=M[3];var U=T[0],ha=T[1],Y=T[2];T=T[3];Q=[Q*U-W*ha-Z*Y-ca*T,Q*ha+W*U+Z*T-ca*Y,Q*Y-W*T+Z*U+ca*ha,Q*T+W*Y-
Z*ha+ca*U];Z=[Math.atan2(2*(Q[0]*Q[1]+Q[2]*Q[3]),1-2*(Q[1]*Q[1]+Q[2]*Q[2]))*w,Math.asin(Math.max(-1,Math.min(1,2*(Q[0]*Q[2]-Q[3]*Q[1]))))*w,Math.atan2(2*(Q[0]*Q[3]+Q[1]*Q[2]),1-2*(Q[2]*Q[2]+Q[3]*Q[3]))*w];W=K;Q=L;U=l(W,2,Z[0]);U=l(U,1,Z[1]);U=l(U,0,Z[2]-Q[2]);ca=W[0];T=W[1];W=W[2];Z=U[0];ha=U[1];U=U[2];Y=Math.atan2(T,ca)*w;T=Math.sqrt(ca*ca+T*T);Math.abs(ha)>T?(ca=(0<ha?90:-90)-Y,T=0):(ca=Math.asin(ha/T)*w-Y,T=Math.sqrt(T*T-ha*ha));ha=180-ca-2*Y;Y=(Math.atan2(U,Z)-Math.atan2(W,T))*w;W=(Math.atan2(U,
Z)-Math.atan2(W,-T))*w;Z=r(Q[0],Q[1],ca,Y);U=r(Q[0],Q[1],ha,W);Q=Z<=U?[ca,Y,Q[2]]:[ha,W,Q[2]];isFinite(Q[0])&&isFinite(Q[1])&&isFinite(Q[2])||(Q=L);A.rotate(Q);L=Q}y.of(this,arguments)({type:"zoom"})});D(y.of(this,arguments))}).on("zoomend",function(){e.select(this).style(z);J.call(v,"zoom",null);var O=y.of(this,arguments);--F||O({type:"zoomend"});n(B,A,C)}).on("zoom.redraw",function(){B.render();var O=A.rotate();B.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":A.scale()/B.fitScale,"geo.projection.rotation.lon":-O[0],
"geo.projection.rotation.lat":-O[1]})});return e.rebind(v,y,"on")}function g(B,A){if(B=(A=B.invert(A))&&isFinite(A[0])&&isFinite(A[1])){B=A[0]*t;A=A[1]*t;var D=Math.cos(A);B=[D*Math.cos(B),D*Math.sin(B),Math.sin(A)]}return B}function h(B){var A=.5*B[0]*t,D=.5*B[1]*t,C=.5*B[2]*t;B=Math.sin(A);A=Math.cos(A);var v=Math.sin(D);D=Math.cos(D);var y=Math.sin(C);C=Math.cos(C);return[A*D*C+B*v*y,B*D*C-A*v*y,A*v*C+B*D*y,A*D*y-B*v*C]}function r(B,A,D,C){B=((D-B)%360+540)%360-180;A=((C-A)%360+540)%360-180;return Math.sqrt(B*
B+A*A)}function l(B,A,D){var C=D*t;D=B.slice();var v=0===A?1:0;A=2===A?1:2;var y=Math.cos(C);C=Math.sin(C);D[v]=B[v]*y-B[A]*C;D[A]=B[A]*y+B[v]*C;return D}function c(B,A){for(var D=0,C=0,v=B.length;C<v;++C)D+=B[C]*A[C];return D}function d(B){for(var A=0,D=arguments.length,C=[];++A<D;)C.push(arguments[A]);var v=e.dispatch.apply(null,C);v.of=function(y,F){return function(J){try{var K=J.sourceEvent=e.event;J.target=B;e.event=J;v[J.type].apply(y,F)}finally{e.event=K}}};return v}var e=b("@plotly/d3"),f=
b("../../lib"),q=b("../../registry"),t=Math.PI/180,w=180/Math.PI,x={cursor:"pointer"},z={cursor:"auto"};N.exports=function(B,A){return(A._isScoped?k:A._isClipped?a:m)(B,B.projection)}},{"../../lib":803,"../../registry":931,"@plotly/d3":58}],891:[function(b,N,G){var p=b("../registry"),n=b("./cartesian/constants").SUBPLOT_PATTERN;G.getSubplotCalcData=function(k,m,a){m=p.subplotsRegistry[m];if(!m)return[];m=m.attr;for(var g=[],h=0;h<k.length;h++){var r=k[h];r[0].trace[m]===a&&g.push(r)}return g};G.getModuleCalcData=
function(k,m){var a=[],g=[];m="string"===typeof m?p.getModule(m).plot:"function"===typeof m?m:m.plot;if(!m)return[a,k];for(var h=0;h<k.length;h++){var r=k[h],l=r[0].trace;!0===l.visible&&0!==l._length&&(l._module.plot===m?a.push(r):g.push(r))}return[a,g]};G.getSubplotData=function(k,m,a){if(!p.subplotsRegistry[m])return[];var g=p.subplotsRegistry[m].attr,h=[];if("gl2d"===m){var r=a.match(n);var l="x"+r[1];var c="y"+r[2]}for(var d=0;d<k.length;d++)r=k[d],"gl2d"===m&&p.traceIs(r,"gl2d")?r[g[0]]===l&&
r[g[1]]===c&&h.push(r):r[g]===a&&h.push(r);return h}},{"../registry":931,"./cartesian/constants":861}],892:[function(b,N,G){function p(h,r){this.element=h;this.plot=r;this.wheelListener=this.mouseListener=null;this.lastInputTime=Date.now();this.lastPos=[0,0];this.boxInited=this.boxEnabled=!1;this.boxStart=[0,0];this.boxEnd=[0,0];this.dragStart=[0,0]}var n=b("mouse-change"),k=b("mouse-wheel"),m=b("mouse-event-offset"),a=b("../cartesian/constants"),g=b("has-passive-events");N.exports=function(h){function r(){for(var f=
h.graphDiv._fullLayout._axisConstraintGroups,q=h.xaxis._id,t=h.yaxis._id,w=0;w<f.length;w++)if(-1!==f[w][q]){if(-1!==f[w][t])return!0;break}return!1}function l(f,q,t){function w(v,y,F){var J=Math.min(y,F);y=Math.max(y,F);J!==y?(x[v]=J,x[v+2]=y,e.dataBox=x,h.setRanges(x)):(h.selectBox.selectBox=[0,0,1,1],h.glplot.setDirty())}var x=h.calcDataBox(),z=d.viewBox,B=e.lastPos[0],A=e.lastPos[1],D=a.MINDRAG*d.pixelRatio,C=a.MINZOOM*d.pixelRatio;q*=d.pixelRatio;t*=d.pixelRatio;t=z[3]-z[1]-t;switch(h.fullLayout.dragmode){case "zoom":f?
(A=q/(z[2]-z[0])*(x[2]-x[0])+x[0],z=t/(z[3]-z[1])*(x[3]-x[1])+x[1],e.boxInited||(e.boxStart[0]=A,e.boxStart[1]=z,e.dragStart[0]=q,e.dragStart[1]=t),e.boxEnd[0]=A,e.boxEnd[1]=z,e.boxInited=!0,e.boxEnabled||e.boxStart[0]===e.boxEnd[0]&&e.boxStart[1]===e.boxEnd[1]||(e.boxEnabled=!0),z=Math.abs(e.dragStart[0]-q)<C,C=Math.abs(e.dragStart[1]-t)<C,!r()||z&&C?(z&&(e.boxEnd[0]=e.boxStart[0]),C&&(e.boxEnd[1]=e.boxStart[1])):(C=e.boxEnd[0]-e.boxStart[0],z=e.boxEnd[1]-e.boxStart[1],A=(x[3]-x[1])/(x[2]-x[0]),
Math.abs(C*A)>Math.abs(z)?(e.boxEnd[1]=e.boxStart[1]+Math.abs(C)*A*(0<=z?1:-1),e.boxEnd[1]<x[1]?(e.boxEnd[1]=x[1],e.boxEnd[0]=e.boxStart[0]+(x[1]-e.boxStart[1])/Math.abs(A)):e.boxEnd[1]>x[3]&&(e.boxEnd[1]=x[3],e.boxEnd[0]=e.boxStart[0]+(x[3]-e.boxStart[1])/Math.abs(A))):(e.boxEnd[0]=e.boxStart[0]+Math.abs(z)/A*(0<=C?1:-1),e.boxEnd[0]<x[0]?(e.boxEnd[0]=x[0],e.boxEnd[1]=e.boxStart[1]+(x[0]-e.boxStart[0])*Math.abs(A)):e.boxEnd[0]>x[2]&&(e.boxEnd[0]=x[2],e.boxEnd[1]=e.boxStart[1]+(x[2]-e.boxStart[0])*
Math.abs(A))))):e.boxEnabled?(C=e.boxStart[0]!==e.boxEnd[0],z=e.boxStart[1]!==e.boxEnd[1],C||z?(C&&(w(0,e.boxStart[0],e.boxEnd[0]),h.xaxis.autorange=!1),z&&(w(1,e.boxStart[1],e.boxEnd[1]),h.yaxis.autorange=!1),h.relayoutCallback()):h.glplot.setDirty(),e.boxEnabled=!1,e.boxInited=!1):e.boxInited&&(e.boxInited=!1);break;case "pan":e.boxEnabled=!1,e.boxInited=!1,f?(e.panning||(e.dragStart[0]=q,e.dragStart[1]=t),Math.abs(e.dragStart[0]-q)<D&&(q=e.dragStart[0]),Math.abs(e.dragStart[1]-t)<D&&(t=e.dragStart[1]),
C=(B-q)*(x[2]-x[0])/(d.viewBox[2]-d.viewBox[0]),z=(A-t)*(x[3]-x[1])/(d.viewBox[3]-d.viewBox[1]),x[0]+=C,x[2]+=C,x[1]+=z,x[3]+=z,h.setRanges(x),e.panning=!0,e.lastInputTime=Date.now(),h.xaxis.autorange=!1,h.yaxis.autorange=!1,h.cameraChanged(),h.handleAnnotations()):e.panning&&(e.panning=!1,h.relayoutCallback())}e.lastPos[0]=q;e.lastPos[1]=t}var c=h.mouseContainer,d=h.glplot,e=new p(c,d);e.mouseListener=n(c,l);c.addEventListener("touchstart",function(f){var q=m(f.changedTouches[0],c);l(0,q[0],q[1]);
l(1,q[0],q[1]);f.preventDefault()},g?{passive:!1}:!1);c.addEventListener("touchmove",function(f){f.preventDefault();var q=m(f.changedTouches[0],c);l(1,q[0],q[1]);f.preventDefault()},g?{passive:!1}:!1);c.addEventListener("touchend",function(f){l(0,e.lastPos[0],e.lastPos[1]);f.preventDefault()},g?{passive:!1}:!1);e.wheelListener=k(c,function(f,q){if(!h.scrollZoom)return!1;f=h.calcDataBox();var t=d.viewBox;q=Math.exp(5*q/(t[3]-t[1]));var w=e.lastPos[0]/(t[2]-t[0])*(f[2]-f[0])+f[0];t=e.lastPos[1]/(t[3]-
t[1])*(f[3]-f[1])+f[1];f[0]=(f[0]-w)*q+w;f[2]=(f[2]-w)*q+w;f[1]=(f[1]-t)*q+t;f[3]=(f[3]-t)*q+t;h.setRanges(f);e.lastInputTime=Date.now();h.xaxis.autorange=!1;h.yaxis.autorange=!1;h.cameraChanged();h.handleAnnotations();h.relayoutCallback();return!0},!0);return e}},{"../cartesian/constants":861,"has-passive-events":444,"mouse-change":470,"mouse-event-offset":471,"mouse-wheel":473}],893:[function(b,N,G){function p(a){this.scene=a;this.gl=a.gl;this.pixelRatio=a.pixelRatio;this.screenBox=[0,0,1,1];this.viewBox=
[0,0,1,1];this.dataBox=[-1,-1,1,1];this.borderLineEnable=[!1,!1,!1,!1];this.borderLineWidth=[1,1,1,1];this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.ticks=[[],[]];this.tickEnable=[!0,!0,!1,!1];this.tickPad=[15,15,15,15];this.tickAngle=[0,0,0,0];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickMarkLength=[0,0,0,0];this.tickMarkWidth=[0,0,0,0];this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labels=["x","y"];this.labelEnable=[!0,!0,!1,!1];this.labelAngle=
[0,Math.PI/2,0,3*Math.PI/2];this.labelPad=[15,15,15,15];this.labelSize=[12,12];this.labelFont=["sans-serif","sans-serif"];this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.title="";this.titleEnable=!0;this.titleCenter=[0,0,0,0];this.titleAngle=0;this.titleColor=[0,0,0,1];this.titleFont="sans-serif";this.titleSize=18;this.gridLineEnable=[!0,!0];this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]];this.gridLineWidth=[1,1];this.zeroLineEnable=[!0,!0];this.zeroLineWidth=[1,1];this.zeroLineColor=[[0,
0,0,1],[0,0,0,1]];this.borderColor=[0,0,0,0];this.backgroundColor=[0,0,0,0];this.static=this.scene.staticPlot}var n=b("../cartesian/axes"),k=b("../../lib/str2rgbarray");b=p.prototype;var m=["xaxis","yaxis"];b.merge=function(a){this.titleEnable=!1;this.backgroundColor=k(a.plot_bgcolor);var g,h;for(h=0;2>h;++h){var r=m[h];var l=r.charAt(0);var c=a[this.scene[r]._name];l=c.title.text===this.scene.fullLayout._dfltTitle[l]?"":c.title.text;for(g=0;2>=g;g+=2)this.labelEnable[h+g]=!1,this.labels[h+g]=l,this.labelColor[h+
g]=k(c.title.font.color),this.labelFont[h+g]=c.title.font.family,this.labelSize[h+g]=c.title.font.size,this.labelPad[h+g]=this.getLabelPad(r,c),this.tickEnable[h+g]=!1,this.tickColor[h+g]=k((c.tickfont||{}).color),this.tickAngle[h+g]="auto"===c.tickangle?0:Math.PI*-c.tickangle/180,this.tickPad[h+g]=this.getTickPad(c),this.tickMarkLength[h+g]=0,this.tickMarkWidth[h+g]=c.tickwidth||0,this.tickMarkColor[h+g]=k(c.tickcolor),this.borderLineEnable[h+g]=!1,this.borderLineColor[h+g]=k(c.linecolor),this.borderLineWidth[h+
g]=c.linewidth||0;g=this.hasSharedAxis(c);l=this.hasAxisInDfltPos(r,c)&&!g;r=this.hasAxisInAltrPos(r,c)&&!g;var d=c.mirror||!1;var e=g?-1!==String(d).indexOf("all"):!!d;g=g?"allticks"===d:-1!==String(d).indexOf("ticks");l?this.labelEnable[h]=!0:r&&(this.labelEnable[h+2]=!0);l?this.tickEnable[h]=c.showticklabels:r&&(this.tickEnable[h+2]=c.showticklabels);if(l||e)this.borderLineEnable[h]=c.showline;if(r||e)this.borderLineEnable[h+2]=c.showline;if(l||g)this.tickMarkLength[h]=this.getTickMarkLength(c);
if(r||g)this.tickMarkLength[h+2]=this.getTickMarkLength(c);this.gridLineEnable[h]=c.showgrid;this.gridLineColor[h]=k(c.gridcolor);this.gridLineWidth[h]=c.gridwidth;this.zeroLineEnable[h]=c.zeroline;this.zeroLineColor[h]=k(c.zerolinecolor);this.zeroLineWidth[h]=c.zerolinewidth}};b.hasSharedAxis=function(a){var g=this.scene;return 0!==n.findSubplotsWithAxis(g.fullLayout._subplots.gl2d,a).indexOf(g.id)};b.hasAxisInDfltPos=function(a,g){g=g.side;if("xaxis"===a)return"bottom"===g;if("yaxis"===a)return"left"===
g};b.hasAxisInAltrPos=function(a,g){g=g.side;if("xaxis"===a)return"top"===g;if("yaxis"===a)return"right"===g};b.getLabelPad=function(a,g){var h=g.title.font.size,r=g.showticklabels;if("xaxis"===a)return"top"===g.side?-10+h*(1.5+(r?1:0)):-10+h*(1.5+(r?.5:0));if("yaxis"===a)return"right"===g.side?10+h*(1.5+(r?1:.5)):10+h*(1.5+(r?.5:0))};b.getTickPad=function(a){return"outside"===a.ticks?10+a.ticklen:15};b.getTickMarkLength=function(a){if(!a.ticks)return 0;var g=a.ticklen;return"inside"===a.ticks?-g:
g};N.exports=function(a){return new p(a)}},{"../../lib/str2rgbarray":828,"../cartesian/axes":854}],894:[function(b,N,G){N=b("../../plot_api/edit_types").overrideAll;var p=b("./scene2d"),n=b("../layout_attributes"),k=b("../../constants/xmlns_namespaces"),m=b("../cartesian/constants"),a=b("../cartesian"),g=b("../../components/fx/layout_attributes"),h=b("../get_data").getSubplotData;G.name="gl2d";G.attr=["xaxis","yaxis"];G.idRoot=["x","y"];G.idRegex=m.idRegex;G.attrRegex=m.attrRegex;G.attributes=b("../cartesian/attributes");
G.supplyLayoutDefaults=function(r,l,c){l._has("cartesian")||a.supplyLayoutDefaults(r,l,c)};G.layoutAttrOverrides=N(a.layoutAttributes,"plot","from-root");G.baseLayoutAttrOverrides=N({plot_bgcolor:n.plot_bgcolor,hoverlabel:g.hoverlabel},"plot","nested");G.plot=function(r){for(var l=r._fullLayout,c=r._fullData,d=l._subplots.gl2d,e=0;e<d.length;e++){var f=d[e],q=l._plots[f],t=h(c,"gl2d",f),w=q._scene2d;void 0===w&&(w=new p({id:f,graphDiv:r,container:r.querySelector(".gl-container"),staticPlot:r._context.staticPlot,
plotGlPixelRatio:r._context.plotGlPixelRatio},l),q._scene2d=w);w.plot(t,r.calcdata,l,r.layout)}};G.clean=function(r,l,c,d){for(var e=d._subplots.gl2d||[],f=0;f<e.length;f++){var q=e[f],t=d._plots[q];t._scene2d&&0===h(r,"gl2d",q).length&&(t._scene2d.destroy(),delete d._plots[q])}a.clean.apply(this,arguments)};G.drawFramework=function(r){r._context.staticPlot||a.drawFramework(r)};G.toSVG=function(r){r=r._fullLayout;for(var l=r._subplots.gl2d,c=0;c<l.length;c++){var d=r._plots[l[c]]._scene2d,e=d.toImage("png");
r._glimages.append("svg:image").attr({xmlns:k.svg,"xlink:href":e,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"});d.destroy()}};G.updateFx=function(r){r=r._fullLayout;for(var l=r._subplots.gl2d,c=0;c<l.length;c++)r._plots[l[c]]._scene2d.updateFx(r.dragmode)}},{"../../components/fx/layout_attributes":707,"../../constants/xmlns_namespaces":780,"../../plot_api/edit_types":836,"../cartesian":868,"../cartesian/attributes":852,"../cartesian/constants":861,"../get_data":891,"../layout_attributes":908,
"./scene2d":895}],895:[function(b,N,G){function p(D,C){this.container=D.container;this.graphDiv=D.graphDiv;this.pixelRatio=D.plotGlPixelRatio||window.devicePixelRatio;this.id=D.id;this.staticPlot=!!D.staticPlot;this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian;this.fullData=null;this.updateRefs(C);this.makeFramework();this.stopped||(this.glplotOptions=l(this),this.glplotOptions.merge(C),this.glplot=a(this.glplotOptions),this.camera=c(this),this.traces={},this.spikes=g(this.glplot),this.selectBox=
h(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}var n=b("../../registry"),k=b("../../plots/cartesian/axes"),m=b("../../components/fx"),a=b("gl-plot2d"),g=b("gl-spikes2d"),h=b("gl-select-box"),r=b("webgl-context"),l=b("./convert"),c=b("./camera"),d=b("../../lib/show_no_webgl_msg");G=b("../cartesian/constraints");var e=G.enforce,f=G.clean,q=b("../cartesian/autorange").doAutoRange;
G=b("../../components/dragelement/helpers");var t=G.drawMode,w=G.selectMode,x=["xaxis","yaxis"],z,B,A=b("../cartesian/constants").SUBPLOT_PATTERN;N.exports=p;b=p.prototype;b.makeFramework=function(){if(this.staticPlot){if(!B&&(z=document.createElement("canvas"),B=r({canvas:z,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}),!B))throw Error("Error creating static canvas/context for image server");this.canvas=z;this.gl=B}else{var D=this.container.querySelector(".gl-canvas-focus"),C=r({canvas:D,
preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!C){d(this);this.stopped=!0;return}this.canvas=D;this.gl=C}D=this.canvas;D.style.width="100%";D.style.height="100%";D.style.position="absolute";D.style.top="0px";D.style.left="0px";D.style["pointer-events"]="none";this.updateSize(D);D=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");D.style.position="absolute";D.style.top=D.style.left="0px";D.style.width=D.style.height="100%";D.style["z-index"]=20;D.style["pointer-events"]=
"none";C=this.mouseContainer=document.createElement("div");C.style.position="absolute";C.style["pointer-events"]="auto";this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var v=this.container;v.appendChild(D);v.appendChild(C);var y=this;C.addEventListener("mouseout",function(){y.isMouseOver=!1;y.unhover()});C.addEventListener("mouseover",function(){y.isMouseOver=!0})};b.toImage=function(D){D||(D="png");this.stopped=!0;this.staticPlot&&this.container.appendChild(z);this.updateSize(this.canvas);
var C=this.glplot.gl,v=C.drawingBufferWidth,y=C.drawingBufferHeight;C.clearColor(1,1,1,0);C.clear(C.COLOR_BUFFER_BIT|C.DEPTH_BUFFER_BIT);this.glplot.setDirty();this.glplot.draw();C.bindFramebuffer(C.FRAMEBUFFER,null);var F=new Uint8Array(v*y*4);C.readPixels(0,0,v,y,C.RGBA,C.UNSIGNED_BYTE,F);C=0;for(var J=y-1;C<J;++C,--J)for(var K=0;K<v;++K)for(var O=0;4>O;++O){var I=F[4*(v*C+K)+O];F[4*(v*C+K)+O]=F[4*(v*J+K)+O];F[4*(v*J+K)+O]=I}C=document.createElement("canvas");C.width=v;C.height=y;J=C.getContext("2d");
v=J.createImageData(v,y);v.data.set(F);J.putImageData(v,0,0);switch(D){case "jpeg":D=C.toDataURL("image/jpeg");break;case "webp":D=C.toDataURL("image/webp");break;default:D=C.toDataURL("image/png")}this.staticPlot&&this.container.removeChild(z);return D};b.updateSize=function(D){D||(D=this.canvas);var C=this.pixelRatio,v=this.fullLayout,y=Math.ceil(C*v.width)|0;C=Math.ceil(C*v.height)|0;if(D.width!==y||D.height!==C)D.width=y,D.height=C;return D};b.computeTickMarks=function(){this.xaxis.setScale();
this.yaxis.setScale();for(var D=[k.calcTicks(this.xaxis),k.calcTicks(this.yaxis)],C=0;2>C;++C)for(var v=0;v<D[C].length;++v)D[C][v].text+="";return D};b.updateRefs=function(D){this.fullLayout=D;D=this.id.match(A);var C="yaxis"+D[2];this.xaxis=this.fullLayout["xaxis"+D[1]];this.yaxis=this.fullLayout[C]};b.relayoutCallback=function(){var D=this.graphDiv,C=this.xaxis,v=this.yaxis,y=D.layout,F={},J=F[C._name+".range"]=C.range.slice(),K=F[v._name+".range"]=v.range.slice();F[C._name+".autorange"]=C.autorange;
F[v._name+".autorange"]=v.autorange;n.call("_storeDirectGUIEdit",D.layout,D._fullLayout._preGUI,F);var O=y[C._name];O.range=J;O.autorange=C.autorange;C=y[v._name];C.range=K;C.autorange=v.autorange;F.lastInputTime=this.camera.lastInputTime;D.emit("plotly_relayout",F)};b.cameraChanged=function(){var D=this.camera;this.glplot.setDataBox(this.calcDataBox());var C=this.computeTickMarks(),v=this.glplotOptions.ticks;a:{for(var y=0;2>y;++y){var F=C[y],J=v[y];if(F.length!==J.length){v=!0;break a}for(var K=
0;K<F.length;++K)if(F[K].x!==J[K].x){v=!0;break a}}v=!1}v&&(this.glplotOptions.ticks=C,this.glplotOptions.dataBox=D.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())};b.handleAnnotations=function(){for(var D=this.graphDiv,C=this.fullLayout.annotations,v=0;v<C.length;v++){var y=C[v];y.xref===this.xaxis._id&&y.yref===this.yaxis._id&&n.getComponentMethod("annotations","drawOne")(D,v)}};b.destroy=function(){if(this.glplot){var D=this.traces;D&&Object.keys(D).map(function(C){D[C].dispose();
delete D[C]});this.glplot.dispose();this.container.removeChild(this.svgContainer);this.container.removeChild(this.mouseContainer);this.glplot=this.fullData=null;this.stopped=!0;this.camera.mouseListener.enabled=!1;this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener);this.camera=null}};b.plot=function(D,C,v){var y=this.glplot;this.updateRefs(v);this.xaxis.clearCalc();this.yaxis.clearCalc();this.updateTraces(D,C);this.updateFx(v.dragmode);var F=v.width,J=v.height;this.updateSize(this.canvas);
D=this.glplotOptions;D.merge(v);D.screenBox=[0,0,F,J];C={_fullLayout:{_axisConstraintGroups:v._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:v._size}};f(C,this.xaxis);f(C,this.yaxis);var K=v._size,O=this.xaxis.domain,I=this.yaxis.domain;D.viewBox=[K.l+O[0]*K.w,K.b+I[0]*K.h,F-K.r-(1-O[1])*K.w,J-K.t-(1-I[1])*K.h];this.mouseContainer.style.width=K.w*(O[1]-O[0])+"px";this.mouseContainer.style.height=K.h*(I[1]-I[0])+"px";this.mouseContainer.height=K.h*(I[1]-I[0]);this.mouseContainer.style.left=
K.l+O[0]*K.w+"px";this.mouseContainer.style.top=K.t+(1-I[1])*K.h+"px";for(J=0;2>J;++J)F=this[x[J]],F._length=D.viewBox[J+2]-D.viewBox[J],q(this.graphDiv,F),F.setScale();e(C);D.ticks=this.computeTickMarks();D.dataBox=this.calcDataBox();D.merge(v);y.update(D);this.glplot.draw()};b.calcDataBox=function(){var D=this.xaxis,C=this.yaxis,v=D.range,y=C.range;D=D.r2l;C=C.r2l;return[D(v[0]),C(y[0]),D(v[1]),C(y[1])]};b.setRanges=function(D){var C=this.xaxis,v=this.yaxis,y=C.l2r,F=v.l2r;C.range=[y(D[0]),y(D[2])];
v.range=[F(D[1]),F(D[3])]};b.updateTraces=function(D,C){var v=Object.keys(this.traces),y;this.fullData=D;var F=0;a:for(;F<v.length;F++){var J=v[F],K=this.traces[J];for(y=0;y<D.length;y++){var O=D[y];if(O.uid===J&&O.type===K.type)continue a}K.dispose();delete this.traces[J]}for(F=0;F<D.length;F++)O=D[F],v=C[F],(y=this.traces[O.uid])?y.update(O,v):(y=O._module.plot(this,O,v),this.traces[O.uid]=y);this.glplot.objects.sort(function(I,L){return I._trace.index-L._trace.index})};b.updateFx=function(D){w(D)||
t(D)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto");this.mouseContainer.style.cursor="pan"===D?"move":"zoom"===D?"crosshair":null};b.emitPointAction=function(D,C){for(var v=D.trace.uid,y=D.pointIndex,F,J=0;J<this.fullData.length;J++)this.fullData[J].uid===v&&(F=this.fullData[J]);D={x:D.traceCoord[0],y:D.traceCoord[1],curveNumber:F.index,pointNumber:y,
data:F._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};m.appendArrayPointValue(D,F,y);this.graphDiv.emit(C,{points:[D]})};b.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var D=this.glplot,C=this.camera,v=C.mouseListener,y=1===this.lastButtonState&&0===v.buttons,F=this.fullLayout;this.lastButtonState=v.buttons;this.cameraChanged();var J=v.x*D.pixelRatio;v=this.canvas.height-D.pixelRatio*v.y;if(C.boxEnabled&&"zoom"===F.dragmode){this.selectBox.enabled=!0;F=this.selectBox.selectBox=
[Math.min(C.boxStart[0],C.boxEnd[0]),Math.min(C.boxStart[1],C.boxEnd[1]),Math.max(C.boxStart[0],C.boxEnd[0]),Math.max(C.boxStart[1],C.boxEnd[1])];for(y=0;2>y;y++)C.boxStart[y]===C.boxEnd[y]&&(F[y]=D.dataBox[y],F[y+2]=D.dataBox[y+2]);D.setDirty()}else if(!C.panning&&this.isMouseOver){this.selectBox.enabled=!1;var K=F._size;(C=(K=D.pick(J/D.pixelRatio+K.l+this.xaxis.domain[0]*K.w,v/D.pixelRatio-(K.t+(1-this.yaxis.domain[1])*K.h)))&&K.object._trace.handlePick(K))&&y&&this.emitPointAction(C,"plotly_click");
K&&"skip"!==K.object._trace.hoverinfo&&F.hovermode&&C&&(!this.lastPickResult||this.lastPickResult.traceUid!==C.trace.uid||this.lastPickResult.dataCoord[0]!==C.dataCoord[0]||this.lastPickResult.dataCoord[1]!==C.dataCoord[1])&&(this.lastPickResult={traceUid:C.trace?C.trace.uid:null,dataCoord:C.dataCoord.slice()},this.spikes.update({center:K.dataCoord}),C.screenCoord=[((D.viewBox[2]-D.viewBox[0])*(K.dataCoord[0]-D.dataBox[0])/(D.dataBox[2]-D.dataBox[0])+D.viewBox[0])/D.pixelRatio,(this.canvas.height-
(D.viewBox[3]-D.viewBox[1])*(K.dataCoord[1]-D.dataBox[1])/(D.dataBox[3]-D.dataBox[1])-D.viewBox[1])/D.pixelRatio],this.emitPointAction(C,"plotly_hover"),y=this.fullData[C.trace.index]||{},J=C.pointIndex,(F=m.castHoverinfo(y,F,J))&&"all"!==F&&(F=F.split("+"),-1===F.indexOf("x")&&(C.traceCoord[0]=void 0),-1===F.indexOf("y")&&(C.traceCoord[1]=void 0),-1===F.indexOf("z")&&(C.traceCoord[2]=void 0),-1===F.indexOf("text")&&(C.textLabel=void 0),-1===F.indexOf("name")&&(C.name=void 0)),m.loneHover({x:C.screenCoord[0],
y:C.screenCoord[1],xLabel:this.hoverFormatter("xaxis",C.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",C.traceCoord[1]),zLabel:C.traceCoord[2],text:C.textLabel,name:C.name,color:m.castHoverOption(y,J,"bgcolor")||C.color,borderColor:m.castHoverOption(y,J,"bordercolor"),fontFamily:m.castHoverOption(y,J,"font.family"),fontSize:m.castHoverOption(y,J,"font.size"),fontColor:m.castHoverOption(y,J,"font.color"),nameLength:m.castHoverOption(y,J,"namelength"),textAlign:m.castHoverOption(y,J,"align")},{container:this.svgContainer,
gd:this.graphDiv}))}K||this.unhover();D.draw()}};b.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),m.loneUnhover(this.svgContainer))};b.hoverFormatter=function(D,C){if(void 0!==C)return D=this[D],k.tickText(D,D.c2l(C),"hover").text}},{"../../components/dragelement/helpers":684,"../../components/fx":706,"../../lib/show_no_webgl_msg":825,"../../plots/cartesian/axes":854,"../../registry":931,"../cartesian/autorange":853,"../cartesian/constants":861,
"../cartesian/constraints":862,"./camera":892,"./convert":893,"gl-plot2d":322,"gl-select-box":337,"gl-spikes2d":346,"webgl-context":629}],896:[function(b,N,G){N=b("../../plot_api/edit_types").overrideAll;var p=b("../../components/fx/layout_attributes"),n=b("./scene"),k=b("../get_data").getSubplotData,m=b("../../lib"),a=b("../../constants/xmlns_namespaces");G.name="gl3d";G.attr="scene";G.idRoot="scene";G.idRegex=G.attrRegex=m.counterRegex("scene");G.attributes=b("./layout/attributes");G.layoutAttributes=
b("./layout/layout_attributes");G.baseLayoutAttrOverrides=N({hoverlabel:p.hoverlabel},"plot","nested");G.supplyLayoutDefaults=b("./layout/defaults");G.plot=function(g){for(var h=g._fullLayout,r=g._fullData,l=h._subplots.gl3d,c=0;c<l.length;c++){var d=l[c],e=k(r,"gl3d",d),f=h[d],q=f.camera,t=f._scene;t||(t=new n({id:d,graphDiv:g,container:g.querySelector(".gl-container"),staticPlot:g._context.staticPlot,plotGlPixelRatio:g._context.plotGlPixelRatio,camera:q},h),f._scene=t);t.viewInitial||(t.viewInitial=
{up:{x:q.up.x,y:q.up.y,z:q.up.z},eye:{x:q.eye.x,y:q.eye.y,z:q.eye.z},center:{x:q.center.x,y:q.center.y,z:q.center.z}});t.plot(e,h,g.layout)}};G.clean=function(g,h,r,l){g=l._subplots.gl3d||[];for(r=0;r<g.length;r++){var c=g[r];!h[c]&&l[c]._scene&&(l[c]._scene.destroy(),l._infolayer&&l._infolayer.selectAll(".annotation-"+c).remove())}};G.toSVG=function(g){g=g._fullLayout;for(var h=g._subplots.gl3d,r=g._size,l=0;l<h.length;l++){var c=g[h[l]],d=c.domain;c=c._scene;var e=c.toImage("png");g._glimages.append("svg:image").attr({xmlns:a.svg,
"xlink:href":e,x:r.l+r.w*d.x[0],y:r.t+r.h*(1-d.y[1]),width:r.w*(d.x[1]-d.x[0]),height:r.h*(d.y[1]-d.y[0]),preserveAspectRatio:"none"});c.destroy()}};G.cleanId=function(g){if(g.match(/^scene[0-9]*$/))return g=g.substr(5),"1"===g&&(g=""),"scene"+g};G.updateFx=function(g){g=g._fullLayout;for(var h=g._subplots.gl3d,r=0;r<h.length;r++)g[h[r]]._scene.updateFx(g.dragmode,g.hovermode)}},{"../../components/fx/layout_attributes":707,"../../constants/xmlns_namespaces":780,"../../lib":803,"../../plot_api/edit_types":836,
"../get_data":891,"./layout/attributes":897,"./layout/defaults":901,"./layout/layout_attributes":902,"./scene":906}],897:[function(b,N,G){N.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],898:[function(b,N,G){G=b("../../../components/color");var p=b("../../cartesian/layout_attributes"),n=b("../../../lib/extend").extendFlat;b=b("../../../plot_api/edit_types").overrideAll;N.exports=b({visible:p.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",
dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:G.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:p.color,categoryorder:p.categoryorder,categoryarray:p.categoryarray,title:{text:p.title.text,font:p.title.font},type:n({},p.type,{values:["-","linear","log","date","category"]}),autotypenumbers:p.autotypenumbers,autorange:p.autorange,rangemode:p.rangemode,
range:n({},p.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:p.tickmode,nticks:p.nticks,tick0:p.tick0,dtick:p.dtick,tickvals:p.tickvals,ticktext:p.ticktext,ticks:p.ticks,mirror:p.mirror,ticklen:p.ticklen,tickwidth:p.tickwidth,tickcolor:p.tickcolor,showticklabels:p.showticklabels,tickfont:p.tickfont,tickangle:p.tickangle,tickprefix:p.tickprefix,showtickprefix:p.showtickprefix,ticksuffix:p.ticksuffix,
showticksuffix:p.showticksuffix,showexponent:p.showexponent,exponentformat:p.exponentformat,minexponent:p.minexponent,separatethousands:p.separatethousands,tickformat:p.tickformat,tickformatstops:p.tickformatstops,hoverformat:p.hoverformat,showline:p.showline,linecolor:p.linecolor,linewidth:p.linewidth,showgrid:p.showgrid,gridcolor:n({},p.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:p.gridwidth,zeroline:p.zeroline,zerolinecolor:p.zerolinecolor,zerolinewidth:p.zerolinewidth,_deprecated:{title:p._deprecated.title,
titlefont:p._deprecated.titlefont}},"plot","from-root")},{"../../../components/color":666,"../../../lib/extend":793,"../../../plot_api/edit_types":836,"../../cartesian/layout_attributes":869}],899:[function(b,N,G){var p=b("tinycolor2").mix,n=b("../../../lib"),k=b("../../../plot_api/plot_template"),m=b("./axis_attributes"),a=b("../../cartesian/type_defaults"),g=b("../../cartesian/axis_defaults"),h=["xaxis","yaxis","zaxis"],r=13600/187;N.exports=function(l,c,d){function e(x,z){return n.coerce(f,q,m,
x,z)}for(var f,q,t=0;t<h.length;t++){var w=h[t];f=l[w]||{};q=k.newContainer(c,w);q._id=w[0]+d.scene;q._name=w;a(f,q,e,d);g(f,q,e,{font:d.font,letter:w[0],data:d.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:d.bgColor,calendar:d.calendar},d.fullLayout);e("gridcolor",p(q.color,d.bgColor,r).toRgbString());e("title.text",w[0]);q.setScale=n.noop;e("showspikes")&&(e("spikesides"),e("spikethickness"),e("spikecolor",q.color));e("showaxeslabels");e("showbackground")&&
e("backgroundcolor")}}},{"../../../lib":803,"../../../plot_api/plot_template":843,"../../cartesian/axis_defaults":856,"../../cartesian/type_defaults":880,"./axis_attributes":898,tinycolor2:598}],900:[function(b,N,G){function p(){this.bounds=[[-10,-10,-10],[10,10,10]];this.ticks=[[],[],[]];this.tickEnable=[!0,!0,!0];this.tickFont=["sans-serif","sans-serif","sans-serif"];this.tickSize=[12,12,12];this.tickAngle=[0,0,0];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickPad=[18,18,18];this.labels=
["x","y","z"];this.labelEnable=[!0,!0,!0];this.labelFont=["Open Sans","Open Sans","Open Sans"];this.labelSize=[20,20,20];this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labelPad=[30,30,30];this.lineEnable=[!0,!0,!0];this.lineMirror=[!1,!1,!1];this.lineWidth=[1,1,1];this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.lineTickEnable=[!0,!0,!0];this.lineTickMirror=[!1,!1,!1];this.lineTickLength=[10,10,10];this.lineTickWidth=[1,1,1];this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.gridEnable=
[!0,!0,!0];this.gridWidth=[1,1,1];this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.zeroEnable=[!0,!0,!0];this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.zeroLineWidth=[2,2,2];this.backgroundEnable=[!0,!0,!0];this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]];this._defaultTickPad=this.tickPad.slice();this._defaultLabelPad=this.labelPad.slice();this._defaultLineTickLength=this.lineTickLength.slice()}var n=b("../../../lib/str2rgbarray"),k=b("../../../lib"),m=["xaxis","yaxis",
"zaxis"];p.prototype.merge=function(a,g){for(var h=0;3>h;++h){var r=g[m[h]];r.visible?(this.labels[h]=a._meta?k.templateString(r.title.text,a._meta):r.title.text,"font"in r.title&&(r.title.font.color&&(this.labelColor[h]=n(r.title.font.color)),r.title.font.family&&(this.labelFont[h]=r.title.font.family),r.title.font.size&&(this.labelSize[h]=r.title.font.size)),"showline"in r&&(this.lineEnable[h]=r.showline),"linecolor"in r&&(this.lineColor[h]=n(r.linecolor)),"linewidth"in r&&(this.lineWidth[h]=r.linewidth),
"showgrid"in r&&(this.gridEnable[h]=r.showgrid),"gridcolor"in r&&(this.gridColor[h]=n(r.gridcolor)),"gridwidth"in r&&(this.gridWidth[h]=r.gridwidth),"log"===r.type?this.zeroEnable[h]=!1:"zeroline"in r&&(this.zeroEnable[h]=r.zeroline),"zerolinecolor"in r&&(this.zeroLineColor[h]=n(r.zerolinecolor)),"zerolinewidth"in r&&(this.zeroLineWidth[h]=r.zerolinewidth),this.lineTickEnable[h]="ticks"in r&&r.ticks?!0:!1,"ticklen"in r&&(this.lineTickLength[h]=this._defaultLineTickLength[h]=r.ticklen),"tickcolor"in
r&&(this.lineTickColor[h]=n(r.tickcolor)),"tickwidth"in r&&(this.lineTickWidth[h]=r.tickwidth),"tickangle"in r&&(this.tickAngle[h]="auto"===r.tickangle?-3600:Math.PI*-r.tickangle/180),"showticklabels"in r&&(this.tickEnable[h]=r.showticklabels),"tickfont"in r&&(r.tickfont.color&&(this.tickColor[h]=n(r.tickfont.color)),r.tickfont.family&&(this.tickFont[h]=r.tickfont.family),r.tickfont.size&&(this.tickSize[h]=r.tickfont.size)),"mirror"in r?-1!==["ticks","all","allticks"].indexOf(r.mirror)?(this.lineTickMirror[h]=
!0,this.lineMirror[h]=!0):!0===r.mirror?(this.lineTickMirror[h]=!1,this.lineMirror[h]=!0):(this.lineTickMirror[h]=!1,this.lineMirror[h]=!1):this.lineMirror[h]=!1,"showbackground"in r&&!1!==r.showbackground?(this.backgroundEnable[h]=!0,this.backgroundColor[h]=n(r.backgroundcolor)):this.backgroundEnable[h]=!1):(this.tickEnable[h]=!1,this.labelEnable[h]=!1,this.lineEnable[h]=!1,this.lineTickEnable[h]=!1,this.gridEnable[h]=!1,this.zeroEnable[h]=!1,this.backgroundEnable[h]=!1)}};N.exports=function(a,g){var h=
new p;h.merge(a,g);return h}},{"../../../lib":803,"../../../lib/str2rgbarray":828}],901:[function(b,N,G){function p(l,c,d,e){var f=d("bgcolor");f=k.combine(f,e.paper_bgcolor);for(var q=["up","center","eye"],t=0;t<q.length;t++)d("camera."+q[t]+".x"),d("camera."+q[t]+".y"),d("camera."+q[t]+".z");d("camera.projection.type");q=!!d("aspectratio.x")&&!!d("aspectratio.y")&&!!d("aspectratio.z");t=d("aspectmode",q?"manual":"auto");q||(l.aspectratio=c.aspectratio={x:1,y:1,z:1},"manual"===t&&(c.aspectmode="auto"),
l.aspectmode=c.aspectmode);q=r(e.fullData,"gl3d",e.id);g(l,c,{font:e.font,scene:e.id,data:q,bgColor:f,calendar:e.calendar,autotypenumbersDflt:e.autotypenumbersDflt,fullLayout:e.fullLayout});m.getComponentMethod("annotations3d","handleDefaults")(l,c,e);c=e.getDfltFromLayout("dragmode");!1===c||c||(c="orbit",l.camera&&l.camera.up?(f=l.camera.up.x,q=l.camera.up.y,l=l.camera.up.z,0!==l&&(f&&q&&l?.999<l/Math.sqrt(f*f+q*q+l*l)&&(c="turntable"):c="turntable")):c="turntable");d("dragmode",c);d("hovermode",
e.getDfltFromLayout("hovermode"))}var n=b("../../../lib"),k=b("../../../components/color"),m=b("../../../registry"),a=b("../../subplot_defaults"),g=b("./axis_defaults"),h=b("./layout_attributes"),r=b("../../get_data").getSubplotData;N.exports=function(l,c,d){var e=1<c._basePlotModules.length;a(l,c,d,{type:"gl3d",attributes:h,handleDefaults:p,fullLayout:c,font:c.font,fullData:d,getDfltFromLayout:function(f){if(!e&&n.validate(l[f],h[f]))return l[f]},autotypenumbersDflt:c.autotypenumbers,paper_bgcolor:c.paper_bgcolor,
calendar:c.calendar})}},{"../../../components/color":666,"../../../lib":803,"../../../registry":931,"../../get_data":891,"../../subplot_defaults":925,"./axis_defaults":899,"./layout_attributes":902}],902:[function(b,N,G){function p(m,a,g){return{x:{valType:"number",dflt:m,editType:"camera"},y:{valType:"number",dflt:a,editType:"camera"},z:{valType:"number",dflt:g,editType:"camera"},editType:"camera"}}G=b("./axis_attributes");var n=b("../../domain").attributes,k=b("../../../lib/extend").extendFlat;
b=b("../../../lib").counterRegex;N.exports={_arrayAttrRegexps:[b("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:k(p(0,0,1),{}),center:k(p(0,0,0),{}),eye:k(p(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:n({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",
editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:G,yaxis:G,zaxis:G,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",
!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":803,"../../../lib/extend":793,"../../domain":882,"./axis_attributes":898}],903:[function(b,N,G){function p(){this.enabled=[!0,!0,!0];this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.drawSides=[!0,!0,!0];this.lineWidth=[1,1,1]}var n=b("../../../lib/str2rgbarray"),
k=["xaxis","yaxis","zaxis"];p.prototype.merge=function(m){for(var a=0;3>a;++a){var g=m[k[a]];g.visible?(this.enabled[a]=g.showspikes,this.colors[a]=n(g.spikecolor),this.drawSides[a]=g.spikesides,this.lineWidth[a]=g.spikethickness):(this.enabled[a]=!1,this.drawSides[a]=!1)}};N.exports=function(m){var a=new p;a.merge(m);return a}},{"../../../lib/str2rgbarray":828}],904:[function(b,N,G){N.exports=function(m){for(var a=m.axesOptions,g=m.glplot.axesPixels,h=m.fullSceneLayout,r=[[],[],[]],l=0;3>l;++l){var c=
h[k[l]];c._length=(g[l].hi-g[l].lo)*g[l].pixelsPerDataUnit/m.dataScale[l];if(Infinity===Math.abs(c._length)||isNaN(c._length))r[l]=[];else{c._input_range=c.range.slice();c.range[0]=g[l].lo/m.dataScale[l];c.range[1]=g[l].hi/m.dataScale[l];c._m=1/(m.dataScale[l]*g[l].pixelsPerDataUnit);c.range[0]===c.range[1]&&(--c.range[0],c.range[1]+=1);var d=c.tickmode;if("auto"===c.tickmode){c.tickmode="linear";var e=c.nticks||n.constrain(c._length/40,4,9);p.autoTicks(c,Math.abs(c.range[1]-c.range[0])/e)}e=p.calcTicks(c,
{msUTC:!0});for(var f=0;f<e.length;++f)e[f].x*=m.dataScale[l],"date"===c.type&&(e[f].text=e[f].text.replace(/<br>/g," "));r[l]=e;c.tickmode=d}}a.ticks=r;for(l=0;3>l;++l)for(f=0;2>f;++f)a.bounds[f][l]=m.glplot.bounds[f][l];a=Array(3);for(g=0;3>g;++g){h=r[g];l=Array(h.length);for(c=0;c<h.length;++c)l[c]=h[c].x;a[g]=l}m.contourLevels=a};var p=b("../../cartesian/axes"),n=b("../../../lib"),k=["xaxis","yaxis","zaxis"]},{"../../../lib":803,"../../cartesian/axes":854}],905:[function(b,N,G){function p(n,k){var m=
[0,0,0,0],a,g;for(a=0;4>a;++a)for(g=0;4>g;++g)m[g]+=n[4*a+g]*k[a];return m}N.exports=function(n,k){return p(n.projection,p(n.view,p(n.model,[k[0],k[1],k[2],1])))}},{}],906:[function(b,N,G){function p(v,y){var F=document.createElement("div"),J=v.container;this.graphDiv=v.graphDiv;var K=document.createElementNS("http://www.w3.org/2000/svg","svg");K.style.position="absolute";K.style.top=K.style.left="0px";K.style.width=K.style.height="100%";K.style["z-index"]=20;K.style["pointer-events"]="none";F.appendChild(K);
this.svgContainer=K;F.id=v.id;F.style.position="absolute";F.style.top=F.style.left="0px";F.style.width=F.style.height="100%";J.appendChild(F);this.fullLayout=y;this.id=v.id||"scene";this.fullSceneLayout=y[this.id];this.plotArgs=[[],{},{}];this.axesOptions=w(y,y[this.id]);this.spikeOptions=x(y[this.id]);this.container=F;this.staticMode=!!v.staticPlot;this.pixelRatio=this.pixelRatio||v.plotGlPixelRatio||2;this.dataScale=[1,1,1];this.contourLevels=[[],[],[]];this.convertAnnotations=r.getComponentMethod("annotations3d",
"convert");this.drawAnnotations=r.getComponentMethod("annotations3d","draw");this.initializeGLPlot()}function n(v,y,F){v=v.fullSceneLayout;for(var J=0;3>J;J++){var K=C[J],O=K.charAt(0);K=v[K];var I=y[O],L=y[O+"calendar"];O=y["_"+O+"length"];if(l.isArrayOrTypedArray(I))for(var H,M=0;M<(O||I.length);M++)if(l.isArrayOrTypedArray(I[M]))for(var Q=0;Q<I[M].length;++Q)H=K.d2l(I[M][Q],0,L),!isNaN(H)&&isFinite(H)&&(F[0][J]=Math.min(F[0][J],H),F[1][J]=Math.max(F[1][J],H));else H=K.d2l(I[M],0,L),!isNaN(H)&&
isFinite(H)&&(F[0][J]=Math.min(F[0][J],H),F[1][J]=Math.max(F[1][J],H));else F[0][J]=Math.min(F[0][J],0),F[1][J]=Math.max(F[1][J],O-1)}}function k(v,y){v=v.fullSceneLayout;for(var F=v.annotations||[],J=0;3>J;J++){var K=C[J],O=K.charAt(0);K=v[K];for(var I=0;I<F.length;I++){var L=F[I];L.visible&&(L=K.r2l(L[O]),!isNaN(L)&&isFinite(L)&&(y[0][J]=Math.min(y[0][J],L),y[1][J]=Math.max(y[1][J],L)))}}}G=b("gl-plot3d");var m=G.createCamera,a=G.createScene,g=b("webgl-context"),h=b("has-passive-events"),r=b("../../registry"),
l=b("../../lib"),c=l.preserveDrawingBuffer(),d=b("../../plots/cartesian/axes"),e=b("../../components/fx"),f=b("../../lib/str2rgbarray"),q=b("../../lib/show_no_webgl_msg"),t=b("./project"),w=b("./layout/convert"),x=b("./layout/spikes"),z=b("./layout/tick_marks"),B,A;b=p.prototype;b.prepareOptions=function(){var v={canvas:this.canvas,gl:this.gl,glOptions:{preserveDrawingBuffer:c,premultipliedAlpha:!0,antialias:!0},container:this.container,axes:this.axesOptions,spikes:this.spikeOptions,pickRadius:10,
snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:this.camera,pixelRatio:this.pixelRatio};if(this.staticMode){if(!A&&(B=document.createElement("canvas"),A=g({canvas:B,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}),!A))throw Error("error creating static canvas/context for image server");v.gl=A;v.canvas=B}return v};var D=!0;b.tryCreatePlot=function(){var v=this.prepareOptions(),y=!0;try{this.glplot=a(v)}catch(F){if(this.staticMode||!D||c)y=!1;else{l.warn("webgl setup failed possibly due to false preserveDrawingBuffer config. The mobile/tablet device may not be detected by is-mobile module. Enabling preserveDrawingBuffer in second attempt to create webgl scene...");
try{c=v.glOptions.preserveDrawingBuffer=!0,this.glplot=a(v)}catch(J){y=c=v.glOptions.preserveDrawingBuffer=!1}}}D=!1;return y};b.initializeGLCamera=function(){var v=this.fullSceneLayout.camera;this.camera=m(this.container,{center:[v.center.x,v.center.y,v.center.z],eye:[v.eye.x,v.eye.y,v.eye.z],up:[v.up.x,v.up.y,v.up.z],_ortho:"orthographic"===v.projection.type,zoomMin:.01,zoomMax:100,mode:"orbit"})};b.initializeGLPlot=function(){var v=this;v.initializeGLCamera();if(!v.tryCreatePlot())return q(v);
v.traces={};v.make4thDimension();var y=v.graphDiv,F=y.layout,J=function(){var O={};v.isCameraChanged(F)&&(O[v.id+".camera"]=v.getCamera());v.isAspectChanged(F)&&(O[v.id+".aspectratio"]=v.glplot.getAspectratio(),"manual"!==F[v.id].aspectmode&&(v.fullSceneLayout.aspectmode=F[v.id].aspectmode=O[v.id+".aspectmode"]="manual"));return O},K=function(O){if(!1!==O.fullSceneLayout.dragmode){var I=J();O.saveLayout(F);O.graphDiv.emit("plotly_relayout",I)}};v.glplot.canvas&&(v.glplot.canvas.addEventListener("mouseup",
function(){K(v)}),v.glplot.canvas.addEventListener("wheel",function(O){if(y._context._scrollZoom.gl3d){if(v.camera._ortho){O=O.deltaX>O.deltaY?1.1:1/1.1;var I=v.glplot.getAspectratio();v.glplot.setAspectratio({x:O*I.x,y:O*I.y,z:O*I.z})}K(v)}},h?{passive:!1}:!1),v.glplot.canvas.addEventListener("mousemove",function(){if(!1!==v.fullSceneLayout.dragmode&&0!==v.camera.mouseListener.buttons){var O=J();v.graphDiv.emit("plotly_relayouting",O)}}),v.staticMode||v.glplot.canvas.addEventListener("webglcontextlost",
function(O){y&&y.emit&&y.emit("plotly_webglcontextlost",{event:O,layer:v.id})},!1));v.glplot.oncontextloss=function(){v.recoverContext()};v.glplot.onrender=function(){v.render()};return!0};b.render=function(){function v(ha,Y,ba){ha=y.fullSceneLayout[ha+"axis"];"log"!==ha.type&&(Y=ha.d2l(Y));return d.hoverLabelText(ha,Y,ba)}var y=this,F=y.graphDiv,J=y.svgContainer,K=y.container.getBoundingClientRect();F._fullLayout._calcInverseTransform(F);var O=K.width*F._fullLayout._invScaleX;K=K.height*F._fullLayout._invScaleY;
J.setAttributeNS(null,"viewBox","0 0 "+O+" "+K);J.setAttributeNS(null,"width",O);J.setAttributeNS(null,"height",K);z(y);y.glplot.axes.update(y.axesOptions);for(var I=Object.keys(y.traces),L=null,H=y.glplot.selection,M=0;M<I.length;++M){var Q=y.traces[I[M]];"skip"!==Q.data.hoverinfo&&Q.handlePick(H)&&(L=Q);Q.setContourLevels&&Q.setContourLevels()}if(null!==L){var Z=t(y.glplot.cameraParams,H.dataCoordinate);Q=L.data;I=F._fullData[Q.index];M=H.index;var ca={xLabel:v("x",H.traceCoordinate[0],Q.xhoverformat),
yLabel:v("y",H.traceCoordinate[1],Q.yhoverformat),zLabel:v("z",H.traceCoordinate[2],Q.zhoverformat)},W=e.castHoverinfo(I,y.fullLayout,M),T=(W||"").split("+");W=W&&"all"===W;I.hovertemplate||W||(-1===T.indexOf("x")&&(ca.xLabel=void 0),-1===T.indexOf("y")&&(ca.yLabel=void 0),-1===T.indexOf("z")&&(ca.zLabel=void 0),-1===T.indexOf("text")&&(H.textLabel=void 0),-1===T.indexOf("name")&&(L.name=void 0));var U=[];"cone"===Q.type||"streamtube"===Q.type?(ca.uLabel=v("x",H.traceCoordinate[3],Q.uhoverformat),
(W||-1!==T.indexOf("u"))&&U.push("u: "+ca.uLabel),ca.vLabel=v("y",H.traceCoordinate[4],Q.vhoverformat),(W||-1!==T.indexOf("v"))&&U.push("v: "+ca.vLabel),ca.wLabel=v("z",H.traceCoordinate[5],Q.whoverformat),(W||-1!==T.indexOf("w"))&&U.push("w: "+ca.wLabel),ca.normLabel=H.traceCoordinate[6].toPrecision(3),(W||-1!==T.indexOf("norm"))&&U.push("norm: "+ca.normLabel),"streamtube"===Q.type&&(ca.divergenceLabel=H.traceCoordinate[7].toPrecision(3),(W||-1!==T.indexOf("divergence"))&&U.push("divergence: "+ca.divergenceLabel)),
H.textLabel&&U.push(H.textLabel),T=U.join("\x3cbr\x3e")):"isosurface"===Q.type||"volume"===Q.type?(ca.valueLabel=d.hoverLabelText(y._mockAxis,y._mockAxis.d2l(H.traceCoordinate[3]),Q.valuehoverformat),U.push("value: "+ca.valueLabel),H.textLabel&&U.push(H.textLabel),T=U.join("\x3cbr\x3e")):T=H.textLabel;W={x:H.traceCoordinate[0],y:H.traceCoordinate[1],z:H.traceCoordinate[2],data:I._input,fullData:I,curveNumber:I.index,pointNumber:M};e.appendArrayPointValue(W,I,M);Q._module.eventData&&(W=I._module.eventData(W,
H,I,{},M));Q={points:[W]};y.fullSceneLayout.hovermode&&e.loneHover({trace:I,x:(.5+.5*Z[0]/Z[3])*O,y:(.5-.5*Z[1]/Z[3])*K,xLabel:ca.xLabel,yLabel:ca.yLabel,zLabel:ca.zLabel,text:T,name:L.name,color:e.castHoverOption(I,M,"bgcolor")||L.color,borderColor:e.castHoverOption(I,M,"bordercolor"),fontFamily:e.castHoverOption(I,M,"font.family"),fontSize:e.castHoverOption(I,M,"font.size"),fontColor:e.castHoverOption(I,M,"font.color"),nameLength:e.castHoverOption(I,M,"namelength"),textAlign:e.castHoverOption(I,
M,"align"),hovertemplate:l.castOption(I,M,"hovertemplate"),hovertemplateLabels:l.extendFlat({},W,ca),eventData:[W]},{container:J,gd:F});H.buttons&&5>H.distance?F.emit("plotly_click",Q):F.emit("plotly_hover",Q);Z=Q}else e.loneUnhover(J),F.emit("plotly_unhover",Z);y.drawAnnotations(y)};b.recoverContext=function(){var v=this;v.glplot.dispose();var y=function(){v.glplot.gl.isContextLost()?requestAnimationFrame(y):v.initializeGLPlot()?v.plot.apply(v,v.plotArgs):l.error("Catastrophic and unrecoverable WebGL error. Context lost.")};
requestAnimationFrame(y)};var C=["xaxis","yaxis","zaxis"];b.plot=function(v,y,F){this.plotArgs=[v,y,F];if(!this.glplot.contextLost){var J,K,O=y[this.id];F=F[this.id];this.fullLayout=y;this.fullSceneLayout=O;this.axesOptions.merge(y,O);this.spikeOptions.merge(O);this.setViewport(O);this.updateFx(O.dragmode,O.hovermode);this.camera.enableWheel=this.graphDiv._context._scrollZoom.gl3d;this.glplot.setClearColor(f(O.bgcolor));this.setConvert(L);v?Array.isArray(v)||(v=[v]):v=[];var I=[[Infinity,Infinity,
Infinity],[-Infinity,-Infinity,-Infinity]];for(J=0;J<v.length;++J){var L=v[J];!0===L.visible&&0!==L._length&&n(this,L,I)}k(this,I);var H=[1,1,1];for(K=0;3>K;++K)H[K]=I[1][K]===I[0][K]?1:1/(I[1][K]-I[0][K]);this.dataScale=H;this.convertAnnotations(this);for(J=0;J<v.length;++J)L=v[J],!0===L.visible&&0!==L._length&&((I=this.traces[L.uid])?I.data.type===L.type?I.update(L):(I.dispose(),I=L._module.plot(this,L),this.traces[L.uid]=I):(I=L._module.plot(this,L),this.traces[L.uid]=I),I.name=L.name);L=Object.keys(this.traces);
J=0;a:for(;J<L.length;++J){for(K=0;K<v.length;++K)if(v[K].uid===L[J]&&!0===v[K].visible&&0!==v[K]._length)continue a;I=this.traces[L[J]];I.dispose();delete this.traces[L[J]]}this.glplot.objects.sort(function(U,ha){return U._trace.data.index-ha._trace.data.index});I=[[0,0,0],[0,0,0]];v={};for(J=0;3>J;++J){L=O[C[J]];K=L.type;K in v?(v[K].acc*=H[J],v[K].count+=1):v[K]={acc:H[J],count:1};if(L.autorange){I[0][J]=Infinity;I[1][J]=-Infinity;var M=this.glplot.objects,Q=this.fullSceneLayout.annotations||[],
Z=L._name.charAt(0);for(K=0;K<M.length;K++){var ca=M[K],W=ca.bounds,T=ca._trace.data._pad||0;I[0][J]="ErrorBars"===ca.constructor.name&&L._lowerLogErrorBound?Math.min(I[0][J],L._lowerLogErrorBound):Math.min(I[0][J],W[0][J]/H[J]-T);I[1][J]=Math.max(I[1][J],W[1][J]/H[J]+T)}for(K=0;K<Q.length;K++)M=Q[K],M.visible&&(M=L.r2l(M[Z]),I[0][J]=Math.min(I[0][J],M),I[1][J]=Math.max(I[1][J],M));"rangemode"in L&&"tozero"===L.rangemode&&(I[0][J]=Math.min(I[0][J],0),I[1][J]=Math.max(I[1][J],0));I[0][J]>I[1][J]?(I[0][J]=
-1,I[1][J]=1):(K=I[1][J]-I[0][J],I[0][J]-=K/32,I[1][J]+=K/32);"reversed"===L.autorange&&(L=I[0][J],I[0][J]=I[1][J],I[1][J]=L)}else K=L.range,I[0][J]=L.r2l(K[0]),I[1][J]=L.r2l(K[1]);I[0][J]===I[1][J]&&(--I[0][J],I[1][J]+=1);this.glplot.setBounds(J,{min:I[0][J]*H[J],max:I[1][J]*H[J]})}I=O.aspectmode;if("cube"===I)J=[1,1,1];else if("manual"===I)J=O.aspectratio,J=[J.x,J.y,J.z];else if("auto"===I||"data"===I){Q=[1,1,1];for(J=0;3>J;++J)L=O[C[J]],K=L.type,L=v[K],Q[J]=Math.pow(L.acc,1/L.count)/H[J];J="data"===
I?Q:4>=Math.max.apply(null,Q)/Math.min.apply(null,Q)?Q:[1,1,1]}else throw Error("scene.js aspectRatio was not one of the enumerated types");O.aspectratio.x=F.aspectratio.x=J[0];O.aspectratio.y=F.aspectratio.y=J[1];O.aspectratio.z=F.aspectratio.z=J[2];this.glplot.setAspectratio(O.aspectratio);this.viewInitial.aspectratio||(this.viewInitial.aspectratio={x:O.aspectratio.x,y:O.aspectratio.y,z:O.aspectratio.z});this.viewInitial.aspectmode||(this.viewInitial.aspectmode=O.aspectmode);O=O.domain||null;y=
y._size||null;O&&y&&(F=this.container.style,F.position="absolute",F.left=y.l+O.x[0]*y.w+"px",F.top=y.t+(1-O.y[1])*y.h+"px",F.width=y.w*(O.x[1]-O.x[0])+"px",F.height=y.h*(O.y[1]-O.y[0])+"px");this.glplot.redraw()}};b.destroy=function(){this.glplot&&(this.camera.mouseListener.enabled=!1,this.container.removeEventListener("wheel",this.camera.wheelListener),this.camera=null,this.glplot.dispose(),this.container.parentNode.removeChild(this.container),this.glplot=null)};b.getCamera=function(){this.camera.view.recalcMatrix(this.camera.view.lastT());
var v=this.camera;return{up:{x:v.up[0],y:v.up[1],z:v.up[2]},center:{x:v.center[0],y:v.center[1],z:v.center[2]},eye:{x:v.eye[0],y:v.eye[1],z:v.eye[2]},projection:{type:!0===v._ortho?"orthographic":"perspective"}}};b.setViewport=function(v){var y=v.camera;this.camera.lookAt.apply(this,[[y.eye.x,y.eye.y,y.eye.z],[y.center.x,y.center.y,y.center.z],[y.up.x,y.up.y,y.up.z]]);this.glplot.setAspectratio(v.aspectratio);"orthographic"===y.projection.type!==this.camera._ortho&&(this.glplot.redraw(),this.glplot.clearRGBA(),
this.glplot.dispose(),this.initializeGLPlot())};b.isCameraChanged=function(v){var y=this.getCamera();v=l.nestedProperty(v,this.id+".camera").get();var F=!1;if(void 0===v)F=!0;else{for(var J=0;3>J;J++)for(var K=0;3>K;K++){var O=["up","center","eye"],I=["x","y","z"];if(!v[O[J]]||y[O[J]][I[K]]!==v[O[J]][I[K]]){F=!0;break}}if(!v.projection||y.projection&&y.projection.type!==v.projection.type)F=!0}return F};b.isAspectChanged=function(v){var y=this.glplot.getAspectratio();v=l.nestedProperty(v,this.id+".aspectratio").get();
return void 0===v||v.x!==y.x||v.y!==y.y||v.z!==y.z};b.saveLayout=function(v){var y=this.fullLayout,F=this.isCameraChanged(v),J=this.isAspectChanged(v),K=F||J;if(K){var O={};if(F){var I=this.getCamera();var L=l.nestedProperty(v,this.id+".camera");var H=L.get();O[this.id+".camera"]=H}if(J){var M=this.glplot.getAspectratio();var Q=l.nestedProperty(v,this.id+".aspectratio");H=Q.get();O[this.id+".aspectratio"]=H}r.call("_storeDirectGUIEdit",v,y._preGUI,O);F&&(L.set(I),l.nestedProperty(y,this.id+".camera").set(I));
J&&(Q.set(M),l.nestedProperty(y,this.id+".aspectratio").set(M),this.glplot.redraw())}return K};b.updateFx=function(v,y){var F=this.camera;if(F)if("orbit"===v)F.mode="orbit",F.keyBindingMode="rotate";else if("turntable"===v){F.up=[0,0,1];F.mode="turntable";F.keyBindingMode="rotate";var J=this.graphDiv;v=J._fullLayout;F=this.fullSceneLayout.camera;var K=F.up.x,O=F.up.y,I=F.up.z;.999>I/Math.sqrt(K*K+O*O+I*I)&&(K=this.id+".camera.up",O={x:0,y:0,z:1},I={},I[K]=O,J=J.layout,r.call("_storeDirectGUIEdit",
J,v._preGUI,I),F.up=O,l.nestedProperty(J,K).set(O))}else F.keyBindingMode=v;this.fullSceneLayout.hovermode=y};b.toImage=function(v){v||(v="png");this.staticMode&&this.container.appendChild(B);this.glplot.redraw();var y=this.glplot.gl,F=y.drawingBufferWidth,J=y.drawingBufferHeight;y.bindFramebuffer(y.FRAMEBUFFER,null);var K=new Uint8Array(F*J*4);y.readPixels(0,0,F,J,y.RGBA,y.UNSIGNED_BYTE,K);y=0;for(var O=J-1;y<O;++y,--O)for(var I=0;I<F;++I)for(var L=0;4>L;++L){var H=4*(F*y+I)+L,M=4*(F*O+I)+L,Q=K[H];
K[H]=K[M];K[M]=Q}for(y=0;y<J;++y)for(O=0;O<F;++O)if(I=4*(F*y+O),L=K[I+3],0<L)for(L=255/L,H=0;3>H;++H)K[I+H]=Math.min(L*K[I+H],255);y=document.createElement("canvas");y.width=F;y.height=J;O=y.getContext("2d");F=O.createImageData(F,J);F.data.set(K);O.putImageData(F,0,0);switch(v){case "jpeg":v=y.toDataURL("image/jpeg");break;case "webp":v=y.toDataURL("image/webp");break;default:v=y.toDataURL("image/png")}this.staticMode&&this.container.removeChild(B);return v};b.setConvert=function(){for(var v=0;3>
v;v++){var y=this.fullSceneLayout[C[v]];d.setConvert(y,this.fullLayout);y.setScale=l.noop}};b.make4thDimension=function(){var v=this.graphDiv._fullLayout;this._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"};d.setConvert(this._mockAxis,v)};N.exports=p},{"../../components/fx":706,"../../lib":803,"../../lib/show_no_webgl_msg":825,"../../lib/str2rgbarray":828,"../../plots/cartesian/axes":854,"../../registry":931,"./layout/convert":900,"./layout/spikes":903,"./layout/tick_marks":904,"./project":905,
"gl-plot3d":326,"has-passive-events":444,"webgl-context":629}],907:[function(b,N,G){N.exports=function(p,n,k,m){m=m||p.length;for(var a=Array(m),g=0;g<m;g++)a[g]=[p[g],n[g],k[g]];return a}},{}],908:[function(b,N,G){G=b("./font_attributes");var p=b("./animation_attributes"),n=b("../components/color/attributes"),k=b("../components/shapes/draw_newshape/attributes"),m=b("./pad_attributes");b=b("../lib/extend").extendFlat;var a=G({editType:"calc"});a.family.dflt='"Open Sans", verdana, arial, sans-serif';
a.size.dflt=12;a.color.dflt=n.defaultLine;N.exports={font:a,title:{text:{valType:"string",editType:"layoutstyle"},font:G({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",
dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:b(m({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,
editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:n.background,
editType:"plot"},plot_bgcolor:{valType:"color",dflt:n.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:n.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},
editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:k.newshape,activeshape:k.activeshape,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:b({},p.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:G({editType:"layoutstyle"})}}},{"../components/color/attributes":665,"../components/shapes/draw_newshape/attributes":751,"../lib/extend":793,"./animation_attributes":848,
"./font_attributes":883,"./pad_attributes":916}],909:[function(b,N,G){G={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:' \x3ca target\x3d"_blank" href\x3d"https://www.openstreetmap.org/copyright"\x3eOpenStreetMap\x3c/a\x3e contributors',tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},
"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:' \x3ca target\x3d"_blank" href\x3d"https://carto.com/"\x3eCarto\x3c/a\x3e  \x3ca target\x3d"_blank" href\x3d"https://www.openstreetmap.org/copyright"\x3eOpenStreetMap\x3c/a\x3e contributors',tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],
tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:' \x3ca target\x3d"_blank" href\x3d"https://carto.com/"\x3eCarto\x3c/a\x3e  \x3ca target\x3d"_blank" href\x3d"https://www.openstreetmap.org/copyright"\x3eOpenStreetMap\x3c/a\x3e contributors',tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],
tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:'Map tiles by \x3ca target\x3d"_blank" href\x3d"https://stamen.com"\x3eStamen Design\x3c/a\x3e under \x3ca target\x3d"_blank" href\x3d"https://creativecommons.org/licenses/by/3.0"\x3eCC BY 3.0\x3c/a\x3e | Data by \x3ca target\x3d"_blank" href\x3d"https://openstreetmap.org"\x3eOpenStreetMap\x3c/a\x3e contributors under \x3ca target\x3d"_blank" href\x3d"https://www.openstreetmap.org/copyright"\x3eODbL\x3c/a\x3e',
tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:'Map tiles by \x3ca target\x3d"_blank" href\x3d"https://stamen.com"\x3eStamen Design\x3c/a\x3e under \x3ca target\x3d"_blank" href\x3d"https://creativecommons.org/licenses/by/3.0"\x3eCC BY 3.0\x3c/a\x3e | Data by \x3ca target\x3d"_blank" href\x3d"https://openstreetmap.org"\x3eOpenStreetMap\x3c/a\x3e contributors under \x3ca target\x3d"_blank" href\x3d"https://www.openstreetmap.org/copyright"\x3eODbL\x3c/a\x3e',
tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:'Map tiles by \x3ca target\x3d"_blank" href\x3d"https://stamen.com"\x3eStamen Design\x3c/a\x3e under \x3ca target\x3d"_blank" href\x3d"https://creativecommons.org/licenses/by/3.0"\x3eCC BY 3.0\x3c/a\x3e | Data by \x3ca target\x3d"_blank" href\x3d"https://openstreetmap.org"\x3eOpenStreetMap\x3c/a\x3e contributors under \x3ca target\x3d"_blank" href\x3d"https://creativecommons.org/licenses/by-sa/3.0"\x3eCC BY SA\x3c/a\x3e',
tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}};b=b("../../lib/sort_object_keys")(G);N.exports={requiredVersion:"1.10.1",styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:"basic streets outdoors light dark satellite satellite-streets".split(" "),styleValueDflt:"basic",stylesNonMapbox:G,styleValuesNonMapbox:b,traceLayerPrefix:"plotly-trace-layer-",
layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:"Your custom plotly.js bundle is not using the correct mapbox-gl version\nPlease install mapbox-gl@1.10.1.",noAccessTokenErrorMsg:"Missing Mapbox access token.\nMapbox trace type require a Mapbox access token to be registered.\nFor example:\n  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });\nMore info here: https://www.mapbox.com/help/define-access-token/",missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",
b.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join("\n"),multipleTokensErrorMsg:"Set multiple mapbox access token across different mapbox subplot,\nusing first token found as mapbox-gl does not allow multipleaccess tokens on the same page.",mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",
path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",
polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;",
"ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":'content: ""; cursor: pointer; position: absolute; background-image: url(\'data:image/svg+xml;charset\x3dutf-8,%3Csvg viewBox\x3d"0 0 20 20" xmlns\x3d"http://www.w3.org/2000/svg"%3E %3Cpath fill\x3d"%23333333" fill-rule\x3d"evenodd" d\x3d"M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E\'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;',
"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right \x3e .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left \x3e .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px",
"ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":'display:block; width: 21px; height: 21px; background-image: url(\'data:image/svg+xml;charset\x3dutf-8,%3C?xml version\x3d"1.0" encoding\x3d"utf-8"?%3E %3Csvg version\x3d"1.1" id\x3d"Layer_1" xmlns\x3d"http://www.w3.org/2000/svg" xmlns:xlink\x3d"http://www.w3.org/1999/xlink" x\x3d"0px" y\x3d"0px" viewBox\x3d"0 0 21 21" style\x3d"enable-background:new 0 0 21 21;" xml:space\x3d"preserve"%3E%3Cg transform\x3d"translate(0,0.01)"%3E%3Cpath d\x3d"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style\x3d"opacity:0.9;fill:%23ffffff;enable-background:new" class\x3d"st0"/%3E%3Cpath d\x3d"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style\x3d"opacity:0.35;enable-background:new" class\x3d"st1"/%3E%3Cpath d\x3d"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style\x3d"opacity:0.35;enable-background:new" class\x3d"st1"/%3E%3Cpolygon points\x3d"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style\x3d"opacity:0.9;fill:%23ffffff;enable-background:new" class\x3d"st0"/%3E%3C/g%3E%3C/svg%3E\')'}}},
{"../../lib/sort_object_keys":826}],910:[function(b,N,G){var p=b("../../lib");N.exports=function(n,k){var m=n.split(" ");n=m[0];m=m[1];var a=p.isArrayOrTypedArray(k)?p.mean(k):k;k=.5+a/100;a=1.5+a/100;var g=["",""],h=[0,0];switch(n){case "top":g[0]="top";h[1]=-a;break;case "bottom":g[0]="bottom",h[1]=a}switch(m){case "left":g[1]="right";h[0]=-k;break;case "right":g[1]="left",h[0]=k}return{anchor:g[0]&&g[1]?g.join("-"):g[0]?g[0]:g[1]?g[1]:"center",offset:h}}},{"../../lib":803}],911:[function(b,N,G){function p(f){return"string"===
typeof f&&(-1!==e.styleValuesMapbox.indexOf(f)||0===f.indexOf("mapbox://"))}var n=b("mapbox-gl/dist/mapbox-gl-unminified"),k=b("../../lib"),m=k.strTranslate,a=k.strScale,g=b("../../plots/get_data").getSubplotCalcData,h=b("../../constants/xmlns_namespaces"),r=b("@plotly/d3"),l=b("../../components/drawing"),c=b("../../lib/svg_text_utils"),d=b("./mapbox"),e=G.constants=b("./constants");G.name="mapbox";G.attr="subplot";G.idRoot="mapbox";G.idRegex=G.attrRegex=k.counterRegex("mapbox");G.attributes={subplot:{valType:"subplotid",
dflt:"mapbox",editType:"calc"}};G.layoutAttributes=b("./layout_attributes");G.supplyLayoutDefaults=b("./layout_defaults");G.plot=function(f){var q=f._fullLayout,t=f.calcdata,w=q._subplots.mapbox;if(n.version!==e.requiredVersion)throw Error(e.wrongVersionErrorMsg);var x=f._fullLayout;if(""===f._context.mapboxAccessToken)x="";else{for(var z=[],B=[],A=!1,D=!1,C=0;C<w.length;C++){var v=x[w[C]],y=v.accesstoken;p(v.style)&&(y?k.pushUnique(z,y):(p(v._input.style)&&(k.error("Uses Mapbox map style, but did not set an access token."),
A=!0),D=!0));y&&k.pushUnique(B,y)}if(D)throw f=A?e.noAccessTokenErrorMsg:e.missingStyleErrorMsg,k.error(f),Error(f);z.length?(1<z.length&&k.warn(e.multipleTokensErrorMsg),x=z[0]):(B.length&&k.log(["Listed mapbox access token(s)",B.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),x="")}n.accessToken=x;for(x=0;x<w.length;x++)z=w[x],B=g(t,"mapbox",z),A=q[z],D=A._subplot,D||(D=new d(f,z),q[z]._subplot=D),D.viewInitial||(D.viewInitial={center:k.extendFlat({},A.center),zoom:A.zoom,
bearing:A.bearing,pitch:A.pitch}),D.plot(B,q,f._promises)};G.clean=function(f,q,t,w){f=w._subplots.mapbox||[];for(t=0;t<f.length;t++){var x=f[t];!q[x]&&w[x]._subplot&&w[x]._subplot.destroy()}};G.toSVG=function(f){for(var q=f._fullLayout,t=q._subplots.mapbox,w=q._size,x=0;x<t.length;x++){var z=q[t[x]],B=z.domain,A=z._subplot.toImage("png");q._glimages.append("svg:image").attr({xmlns:h.svg,"xlink:href":A,x:w.l+w.w*B.x[0],y:w.t+w.h*(1-B.y[1]),width:w.w*(B.x[1]-B.x[0]),height:w.h*(B.y[1]-B.y[0]),preserveAspectRatio:"none"});
z=r.select(z._subplot.div);null!==z.select(".mapboxgl-ctrl-logo").node().offsetParent&&(A=q._glimages.append("g"),A.attr("transform",m(w.l+w.w*B.x[0]+10,w.t+w.h*(1-B.y[0])-31)),A.append("path").attr("d",e.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),A.append("path").attr("d",e.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),A.append("path").attr("d",e.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),A.append("polygon").attr("points",
e.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"}));var D=z.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map","");z=q._glimages.append("g");var C=z.append("text");C.text(D).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":D});var v=l.bBox(C.node());A=w.w*(B.x[1]-B.x[0]);v.width>A/2&&(v=D.split("|").join("\x3cbr\x3e"),C.text(v).attr("data-unformatted",v).call(c.convertToTspans,
f),v=l.bBox(C.node()));C.attr("transform",m(-3,-v.height+8));z.insert("rect",".static-attribution").attr({x:-v.width-6,y:-v.height-3,width:v.width+6,height:v.height+3,fill:"rgba(255, 255, 255, 0.75)"});C=1;v.width+6>A&&(C=A/(v.width+6));B=[w.l+w.w*B.x[1],w.t+w.h*(1-B.y[0])];z.attr("transform",m(B[0],B[1])+a(C))}};G.updateFx=function(f){f=f._fullLayout;for(var q=f._subplots.mapbox,t=0;t<q.length;t++)f[q[t]]._subplot.updateFx(f)}},{"../../components/drawing":688,"../../constants/xmlns_namespaces":780,
"../../lib":803,"../../lib/svg_text_utils":829,"../../plots/get_data":891,"./constants":909,"./layout_attributes":913,"./layout_defaults":914,"./mapbox":915,"@plotly/d3":58,"mapbox-gl/dist/mapbox-gl-unminified":461}],912:[function(b,N,G){function p(r,l){this.subplot=r;this.uid=r.uid+"-"+l;this.index=l;this.idSource="source-"+this.uid;this.idLayer=h.layoutLayerPrefix+this.uid;this.below=this.layerType=this.source=this.sourceType=null;this.visible=!1}function n(r){if(!r.visible)return!1;r=r.source;
if(Array.isArray(r)&&0<r.length){for(var l=0;l<r.length;l++)if("string"!==typeof r[l]||0===r[l].length)return!1;return!0}return m.isPlainObject(r)||"string"===typeof r&&0<r.length}function k(r){var l={},c={};switch(r.type){case "circle":m.extendFlat(c,{"circle-radius":r.circle.radius,"circle-color":r.color,"circle-opacity":r.opacity});break;case "line":m.extendFlat(c,{"line-width":r.line.width,"line-color":r.color,"line-opacity":r.opacity,"line-dasharray":r.line.dash});break;case "fill":m.extendFlat(c,
{"fill-color":r.color,"fill-outline-color":r.fill.outlinecolor,"fill-opacity":r.opacity});break;case "symbol":var d=r.symbol,e=g(d.textposition,d.iconsize);m.extendFlat(l,{"icon-image":d.icon+"-15","icon-size":d.iconsize/10,"text-field":d.text,"text-size":d.textfont.size,"text-anchor":e.anchor,"text-offset":e.offset,"symbol-placement":d.placement});m.extendFlat(c,{"icon-color":r.color,"text-color":d.textfont.color,"text-opacity":r.opacity});break;case "raster":m.extendFlat(c,{"raster-fade-duration":0,
"raster-opacity":r.opacity})}return{layout:l,paint:c}}var m=b("../../lib"),a=b("../../lib/svg_text_utils").sanitizeHTML,g=b("./convert_text_opts"),h=b("./constants");b=p.prototype;b.update=function(r){this.visible?this.needsNewImage(r)?this.updateImage(r):this.needsNewSource(r)?(this.removeLayer(),this.updateSource(r),this.updateLayer(r)):this.needsNewLayer(r)?this.updateLayer(r):this.updateStyle(r):(this.updateSource(r),this.updateLayer(r));this.visible=n(r)};b.needsNewImage=function(r){return this.subplot.map.getSource(this.idSource)&&
"image"===this.sourceType&&"image"===r.sourcetype&&(this.source!==r.source||JSON.stringify(this.coordinates)!==JSON.stringify(r.coordinates))};b.needsNewSource=function(r){return this.sourceType!==r.sourcetype||JSON.stringify(this.source)!==JSON.stringify(r.source)||this.layerType!==r.type};b.needsNewLayer=function(r){return this.layerType!==r.type||this.below!==this.subplot.belowLookup["layout-"+this.index]};b.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]};b.updateImage=
function(r){this.subplot.map.getSource(this.idSource).updateImage({url:r.source,coordinates:r.coordinates});r=this.findFollowingMapboxLayerId(this.lookupBelow());null!==r&&this.subplot.map.moveLayer(this.idLayer,r)};b.updateSource=function(r){var l=this.subplot.map;l.getSource(this.idSource)&&l.removeSource(this.idSource);this.sourceType=r.sourcetype;this.source=r.source;if(n(r)){var c=r.sourcetype,d=r.source,e={type:c};if("geojson"===c)var f="data";else"vector"===c?f="string"===typeof d?"url":"tiles":
"raster"===c?(f="tiles",e.tileSize=256):"image"===c&&(f="url",e.coordinates=r.coordinates);e[f]=d;r.sourceattribution&&(e.attribution=a(r.sourceattribution));l.addSource(this.idSource,e)}};b.findFollowingMapboxLayerId=function(r){if("traces"===r)for(var l=this.subplot.getMapLayers(),c=0;c<l.length;c++){var d=l[c].id;if("string"===typeof d&&0===d.indexOf(h.traceLayerPrefix)){r=d;break}}return r};b.updateLayer=function(r){var l=this.subplot,c=k(r),d=this.lookupBelow(),e=this.findFollowingMapboxLayerId(d);
this.removeLayer();n(r)&&l.addLayer({id:this.idLayer,source:this.idSource,"source-layer":r.sourcelayer||"",type:r.type,minzoom:r.minzoom,maxzoom:r.maxzoom,layout:c.layout,paint:c.paint},e);this.layerType=r.type;this.below=d};b.updateStyle=function(r){n(r)&&(r=k(r),this.subplot.setOptions(this.idLayer,"setLayoutProperty",r.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",r.paint))};b.removeLayer=function(){var r=this.subplot.map;r.getLayer(this.idLayer)&&r.removeLayer(this.idLayer)};
b.dispose=function(){var r=this.subplot.map;r.getLayer(this.idLayer)&&r.removeLayer(this.idLayer);r.getSource(this.idSource)&&r.removeSource(this.idSource)};N.exports=function(r,l,c){r=new p(r,l);r.update(c);return r}},{"../../lib":803,"../../lib/svg_text_utils":829,"./constants":909,"./convert_text_opts":910}],913:[function(b,N,G){G=b("../../lib");var p=b("../../components/color").defaultLine,n=b("../domain").attributes,k=b("../font_attributes"),m=b("../../traces/scatter/attributes").textposition,
a=b("../../plot_api/edit_types").overrideAll,g=b("../../plot_api/plot_template").templatedArray;b=b("./constants");k=k({});k.family.dflt="Open Sans Regular, Arial Unicode MS Regular";(N.exports=a({_arrayAttrRegexps:[G.counterRegex("mapbox",".layers",!0)],domain:n({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:b.styleValuesMapbox.concat(b.styleValuesNonMapbox),dflt:b.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},
zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},layers:g("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",
dflt:p},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:p}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},
textfont:k,textposition:G.extendFlat({},m,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color":666,"../../lib":803,"../../plot_api/edit_types":836,"../../plot_api/plot_template":843,"../../traces/scatter/attributes":1218,"../domain":882,"../font_attributes":883,"./constants":909}],914:[function(b,N,G){function p(h,r,l,c){l("accesstoken",c.accessToken);l("style");l("center.lon");l("center.lat");l("zoom");l("bearing");l("pitch");a(h,r,{name:"layers",
handleItemDefaults:n});r._input=h}function n(h,r){function l(f,q){return k.coerce(h,r,g.layers,f,q)}if(l("visible")){var c=l("sourcetype"),d="raster"===c||"image"===c;l("source");l("sourceattribution");"vector"===c&&l("sourcelayer");"image"===c&&l("coordinates");var e;d&&(e="raster");c=l("type",e);d&&"raster"!==c&&(c=r.type="raster",k.log("Source types *raster* and *image* must drawn *raster* layer type."));l("below");l("color");l("opacity");l("minzoom");l("maxzoom");"circle"===c&&l("circle.radius");
"line"===c&&(l("line.width"),l("line.dash"));"fill"===c&&l("fill.outlinecolor");"symbol"===c&&(l("symbol.icon"),l("symbol.iconsize"),l("symbol.text"),k.coerceFont(l,"symbol.textfont"),l("symbol.textposition"),l("symbol.placement"))}}var k=b("../../lib"),m=b("../subplot_defaults"),a=b("../array_container_defaults"),g=b("./layout_attributes");N.exports=function(h,r,l){m(h,r,l,{type:"mapbox",attributes:g,handleDefaults:p,partition:"y",accessToken:r._mapboxAccessToken})}},{"../../lib":803,"../array_container_defaults":849,
"../subplot_defaults":925,"./layout_attributes":913}],915:[function(b,N,G){function p(D,C){this.id=C;this.gd=D;C=D._fullLayout;D=D._context;this.container=C._glcontainer.node();this.isStatic=D.staticPlot;this.uid=C._uid+"-"+this.id;this.yaxis=this.xaxis=this.div=null;this.createFramework(C);this.styleObj=this.accessToken=this.map=null;this.traceHash={};this.layerList=[];this.belowLookup={};this.wheeling=this.dragging=!1}function n(D){var C={};a.isPlainObject(D)?(C.id=D.id,C.style=D):"string"===typeof D?
(C.id=D,-1!==z.styleValuesMapbox.indexOf(D)?C.style=z.styleUrlPrefix+D+"-"+z.styleUrlSuffix:C.style=z.stylesNonMapbox[D]?z.stylesNonMapbox[D]:D):(C.id=z.styleValueDflt,C.style=z.styleUrlPrefix+z.styleValueDflt+"-"+z.styleUrlSuffix);C.transition={duration:0,delay:0};return C}function k(D){return[D.lon,D.lat]}var m=b("mapbox-gl/dist/mapbox-gl-unminified"),a=b("../../lib"),g=b("../../lib/geo_location_utils"),h=b("../../registry"),r=b("../cartesian/axes"),l=b("../../components/dragelement"),c=b("../../components/fx");
G=b("../../components/dragelement/helpers");var d=G.rectMode,e=G.drawMode,f=G.selectMode,q=b("../cartesian/select").prepSelect,t=b("../cartesian/select").clearSelect,w=b("../cartesian/select").clearSelectionsCache,x=b("../cartesian/select").selectOnClick,z=b("./constants"),B=b("./layers");b=p.prototype;b.plot=function(D,C,v){var y=this,F=C[y.id];y.map&&F.accesstoken!==y.accessToken&&(y.map.remove(),y.map=null,y.styleObj=null,y.traceHash={},y.layerList=[]);F=y.map?new Promise(function(J,K){y.updateMap(D,
C,J,K)}):new Promise(function(J,K){y.createMap(D,C,J,K)});v.push(F)};b.createMap=function(D,C,v,y){var F=this,J=C[F.id],K=F.styleObj=n(J.style);F.accessToken=J.accesstoken;var O=F.map=(new m.Map({container:F.div,style:K.style,center:k(J.center),zoom:J.zoom,bearing:J.bearing,pitch:J.pitch,interactive:!F.isStatic,preserveDrawingBuffer:F.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1})).addControl(new m.AttributionControl({compact:!0}));O._canvas.style.left="0px";O._canvas.style.top="0px";
F.rejectOnError(y);F.isStatic||F.initFx(D,C);J=[];J.push(new Promise(function(I){O.once("load",I)}));J=J.concat(g.fetchTraceGeoData(D));Promise.all(J).then(function(){F.fillBelowLookup(D,C);F.updateData(D);F.updateLayout(C);F.resolveOnRender(v)}).catch(y)};b.updateMap=function(D,C,v,y){var F=this,J=F.map,K=C[this.id];F.rejectOnError(y);var O=[];K=n(K.style);JSON.stringify(F.styleObj)!==JSON.stringify(K)&&(F.styleObj=K,J.setStyle(K.style),F.traceHash={},O.push(new Promise(function(I){J.once("styledata",
I)})));O=O.concat(g.fetchTraceGeoData(D));Promise.all(O).then(function(){F.fillBelowLookup(D,C);F.updateData(D);F.updateLayout(C);F.resolveOnRender(v)}).catch(y)};b.fillBelowLookup=function(D,C){var v=C[this.id].layers,y,F=this.belowLookup={},J=!1;for(C=0;C<D.length;C++){var K=D[C][0].trace,O=K._module;"string"===typeof K.below?y=K.below:O.getBelow&&(y=O.getBelow(K,this));""===y&&(J=!0);F["trace-"+K.uid]=y||""}for(C=0;C<v.length;C++)y=v[C],y="string"===typeof y.below?y.below:J?"traces":"",F["layout-"+
C]=y;D={};for(var I in F)y=F[I],D[y]?D[y].push(I):D[y]=[I];for(y in D)if(F=D[y],1<F.length)for(C=0;C<F.length;C++)I=F[C],0===I.indexOf("trace-")?(I=I.split("trace-")[1],this.traceHash[I]&&(this.traceHash[I].below=null)):0===I.indexOf("layout-")&&(I=I.split("layout-")[1],this.layerList[I]&&(this.layerList[I].below=null))};var A={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};b.updateData=function(D){var C=this.traceHash,v,y=D.slice().sort(function(I,L){return A[I[0].trace.type]-A[L[0].trace.type]});
for(v=0;v<y.length;v++){var F=y[v];var J=F[0].trace;var K=C[J.uid];var O=!1;K&&(K.type===J.type?(K.update(F),O=!0):K.dispose());!O&&J._module&&(C[J.uid]=J._module.plot(this,F))}y=Object.keys(C);v=0;a:for(;v<y.length;v++){F=y[v];for(K=0;K<D.length;K++)if(J=D[K][0].trace,F===J.uid)continue a;K=C[F];K.dispose();delete C[F]}};b.updateLayout=function(D){var C=this.map,v=D[this.id];this.dragging||this.wheeling||(C.setCenter(k(v.center)),C.setZoom(v.zoom),C.setBearing(v.bearing),C.setPitch(v.pitch));this.updateLayers(D);
this.updateFramework(D);this.updateFx(D);this.map.resize();this.gd._context._scrollZoom.mapbox?C.scrollZoom.enable():C.scrollZoom.disable()};b.resolveOnRender=function(D){var C=this.map;C.on("render",function y(){C.loaded()&&(C.off("render",y),setTimeout(D,10))})};b.rejectOnError=function(D){function C(){D(Error(z.mapOnErrorMsg))}var v=this.map;v.once("error",C);v.once("style.error",C);v.once("source.error",C);v.once("tile.error",C);v.once("layer.error",C)};b.createFramework=function(D){var C=this,
v=C.div=document.createElement("div");v.id=C.uid;v.style.position="absolute";C.container.appendChild(v);C.xaxis={_id:"x",c2p:function(y){return C.project(y).x}};C.yaxis={_id:"y",c2p:function(y){return C.project(y).y}};C.updateFramework(D);C.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"};r.setConvert(C.mockAxis,D)};b.initFx=function(D,C){function v(){c.loneUnhover(C._hoverlayer)}function y(){var O=F.getView();J.emit("plotly_relayouting",F.getViewEditsWithDerived(O))}var F=this,J=F.gd,
K=F.map;K.on("moveend",function(O){if(F.map){var I=J._fullLayout;if(O.originalEvent||F.wheeling){var L=I[F.id];h.call("_storeDirectGUIEdit",J.layout,I._preGUI,F.getViewEdits(L));var H=F.getView();L._input.center=L.center=H.center;L._input.zoom=L.zoom=H.zoom;L._input.bearing=L.bearing=H.bearing;L._input.pitch=L.pitch=H.pitch;J.emit("plotly_relayout",F.getViewEditsWithDerived(H))}O.originalEvent&&"mouseup"===O.originalEvent.type?F.dragging=!1:F.wheeling&&(F.wheeling=!1);I._rehover&&I._rehover()}});
K.on("wheel",function(){F.wheeling=!0});K.on("mousemove",function(O){var I=F.div.getBoundingClientRect(),L=[O.originalEvent.offsetX,O.originalEvent.offsetY];O.target.getBoundingClientRect=function(){return I};F.xaxis.p2c=function(){return K.unproject(L).lng};F.yaxis.p2c=function(){return K.unproject(L).lat};J._fullLayout._rehover=function(){J._fullLayout._hoversubplot===F.id&&J._fullLayout[F.id]&&c.hover(J,O,F.id)};c.hover(J,O,F.id);J._fullLayout._hoversubplot=F.id});K.on("dragstart",function(){F.dragging=
!0;v()});K.on("zoomstart",v);K.on("mouseout",function(){J._fullLayout._hoversubplot=null});K.on("drag",y);K.on("zoom",y);K.on("dblclick",function(){var O=J._fullLayout[F.id];h.call("_storeDirectGUIEdit",J.layout,J._fullLayout._preGUI,F.getViewEdits(O));var I=F.viewInitial;K.setCenter(k(I.center));K.setZoom(I.zoom);K.setBearing(I.bearing);K.setPitch(I.pitch);I=F.getView();O._input.center=O.center=I.center;O._input.zoom=O.zoom=I.zoom;O._input.bearing=O.bearing=I.bearing;O._input.pitch=O.pitch=I.pitch;
J.emit("plotly_doubleclick",null);J.emit("plotly_relayout",F.getViewEditsWithDerived(I))});F.clearSelect=function(){w(F.dragOptions);t(F.dragOptions.gd)};F.onClickInPanFn=function(O){return function(I){var L=J._fullLayout.clickmode;-1<L.indexOf("select")&&x(I.originalEvent,J,[F.xaxis],[F.yaxis],F.id,O);-1<L.indexOf("event")&&c.click(J,I.originalEvent)}}};b.updateFx=function(D){function C(O){O=v.map.unproject(O);return[O.lng,O.lat]}var v=this,y=v.map,F=v.gd;if(!v.isStatic){var J=D.dragmode;var K=d(J)?
function(O,I){(O.range={})[v.id]=[C([I.xmin,I.ymin]),C([I.xmax,I.ymax])]}:function(O,I,L){(O.lassoPoints={})[v.id]=L.filtered.map(C)};v.dragOptions=a.extendDeep(v.dragOptions||{},{dragmode:D.dragmode,element:v.div,gd:F,plotinfo:{id:v.id,domain:D[v.id].domain,xaxis:v.xaxis,yaxis:v.yaxis,fillRangeItems:K},xaxes:[v.xaxis],yaxes:[v.yaxis],subplot:v.id});y.off("click",v.onClickInPanHandler);f(J)||e(J)?(y.dragPan.disable(),y.on("zoomstart",v.clearSelect),v.dragOptions.prepFn=function(O,I,L){q(O,I,L,v.dragOptions,
J)},l.init(v.dragOptions)):(y.dragPan.enable(),y.off("zoomstart",v.clearSelect),v.div.onmousedown=null,v.onClickInPanHandler=v.onClickInPanFn(v.dragOptions),y.on("click",v.onClickInPanHandler))}};b.updateFramework=function(D){var C=D[this.id].domain;D=D._size;var v=this.div.style;v.width=D.w*(C.x[1]-C.x[0])+"px";v.height=D.h*(C.y[1]-C.y[0])+"px";v.left=D.l+C.x[0]*D.w+"px";v.top=D.t+(1-C.y[1])*D.h+"px";this.xaxis._offset=D.l+C.x[0]*D.w;this.xaxis._length=D.w*(C.x[1]-C.x[0]);this.yaxis._offset=D.t+
(1-C.y[1])*D.h;this.yaxis._length=D.h*(C.y[1]-C.y[0])};b.updateLayers=function(D){D=D[this.id].layers;var C=this.layerList,v;if(D.length!==C.length){for(v=0;v<C.length;v++)C[v].dispose();C=this.layerList=[];for(v=0;v<D.length;v++)C.push(B(this,v,D[v]))}else for(v=0;v<D.length;v++)C[v].update(D[v])};b.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))};b.toImage=function(){this.map.stop();return this.map.getCanvas().toDataURL()};b.setOptions=function(D,
C,v){for(var y in v)this.map[C](D,y,v[y])};b.getMapLayers=function(){return this.map.getStyle().layers};b.addLayer=function(D,C){var v=this.map;if("string"===typeof C){if(""===C){v.addLayer(D,C);return}for(var y=this.getMapLayers(),F=0;F<y.length;F++)if(C===y[F].id){v.addLayer(D,C);return}a.warn(["Trying to add layer with *below* value",C,"referencing a layer that does not exist or that does not yet exist."].join(" "))}v.addLayer(D)};b.project=function(D){return this.map.project(new m.LngLat(D[0],
D[1]))};b.getView=function(){var D=this.map,C=D.getCenter();C={lon:C.lng,lat:C.lat};var v=D.getCanvas(),y=v.width;v=v.height;return{center:C,zoom:D.getZoom(),bearing:D.getBearing(),pitch:D.getPitch(),_derived:{coordinates:[D.unproject([0,0]).toArray(),D.unproject([y,0]).toArray(),D.unproject([y,v]).toArray(),D.unproject([0,v]).toArray()]}}};b.getViewEdits=function(D){for(var C=this.id,v=["center","zoom","bearing","pitch"],y={},F=0;F<v.length;F++){var J=v[F];y[C+"."+J]=D[J]}return y};b.getViewEditsWithDerived=
function(D){var C=this.id,v=this.getViewEdits(D);v[C+"._derived"]=D._derived;return v};N.exports=p},{"../../components/dragelement":685,"../../components/dragelement/helpers":684,"../../components/fx":706,"../../lib":803,"../../lib/geo_location_utils":796,"../../registry":931,"../cartesian/axes":854,"../cartesian/select":874,"./constants":909,"./layers":912,"mapbox-gl/dist/mapbox-gl-unminified":461}],916:[function(b,N,G){N.exports=function(p){p=p.editType;return{t:{valType:"number",dflt:0,editType:p},
r:{valType:"number",dflt:0,editType:p},b:{valType:"number",dflt:0,editType:p},l:{valType:"number",dflt:0,editType:p},editType:p}}},{}],917:[function(b,N,G){function p(T,U){U.text("");U=U.append("a").attr({"xlink:xlink:href":"#","class":"link--impt link--embedview","font-weight":"bold"}).text(T._context.linkText+" "+String.fromCharCode(187));if(T._context.sendData)U.on("click",function(){H.sendDataToCloud(T)});else{var ha=window.location.pathname.split("/"),Y=window.location.search;U.attr({"xlink:xlink:show":"new",
"xlink:xlink:href":"/"+ha[2].split(".")[0]+"/"+ha[1]+Y})}}function n(T,U){function ha(la,ka){xa[ka]=la;ra[la]=1}function Y(la,ka){if(la&&"string"===typeof la&&!ra[la])return ha(la,ka),!0}var ba=U.length,ja=[],ma;for(ma=0;ma<T.length;ma++){var ia=T[ma]._fullInput;ia!==oa&&ja.push(ia);var oa=ia}T=ja.length;var xa=Array(ba),ra={};for(ma=0;ma<ba;ma++)oa=U[ma].uid,"number"===typeof oa&&(oa=String(oa)),Y(oa,ma)||ma<T&&Y(ja[ma].uid,ma)||ha(D.randstr(ra),ma);return xa}function k(T,U){function ha(xa){for(var ra=
!0,la=0;la<U.length;la++){var ka=U[la];ja[ka]||(xa[ka]?ja[ka]=xa[ka]:ra=!1)}ra&&(ba=!0)}var Y=T._context.locale;Y||(Y="en-US");for(var ba=!1,ja={},ma=0;2>ma;ma++){for(var ia=T._context.locales,oa=0;2>oa;oa++){if(ia=(ia[Y]||{}).format)if(ha(ia),ba)break;ia=z.localeRegistry}oa=Y.split("-")[0];if(ba||oa===Y)break;Y=oa}ba||ha(z.localeRegistry.en.format);return ja}function m(T,U){T.decimal=U.charAt(0);T.thousands=U.charAt(1);return{numberFormat:function(ha){try{ha=w(T).format(D.adjustFormat(ha))}catch(Y){return D.warnBadFormat(ha),
D.noFormat}return ha},timeFormat:t(T).utcFormat}}function a(T){T=T.transforms;if(Array.isArray(T)&&T.length)for(var U=0;U<T.length;U++){var ha=T[U];if((ha=ha._module||M[ha.type])&&ha.makesData)return!0}return!1}function g(T,U,ha,Y){for(var ba=T.transforms,ja=[T],ma=0;ma<ba.length;ma++){var ia=ba[ma],oa=M[ia.type];oa&&oa.transform&&(ja=oa.transform(ja,{transform:ia,fullTrace:T,fullData:U,layout:ha,fullLayout:Y,transformIndex:ma}))}return ja}function h(T){return"string"===typeof T&&"px"===T.substr(T.length-
2)&&parseFloat(T)}function r(T){var U=T.margin;T._size||(U=T._size={l:Math.round(U.l),r:Math.round(U.r),t:Math.round(U.t),b:Math.round(U.b),p:Math.round(U.pad)},U.w=Math.round(T.width)-U.l-U.r,U.h=Math.round(T.height)-U.t-U.b);T._pushmargin||(T._pushmargin={});T._pushmarginIds||(T._pushmarginIds={})}function l(T){var U=y.list(T,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(ha){for(var Y=0;Y<U.length;Y++){var ba=U[Y][ha];ba&&ba()}})}function c(T,U,ha){function Y(ia){if(ia)for(;ia.length;)ia.shift()}
function ba(ia){if(T._transitionData)return Y(T._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(ha.redraw)return z.call("redraw",T)}).then(function(){T._transitioning=!1;T._transitioningWithDuration=!1;T.emit("plotly_transitioned",[])}).then(ia)}var ja=!1,ma=D.syncOrAsync([H.previousPromises,function(){if(T._transitionData){T._transitioning=!1;var ia=T._transitionData._interruptCallbacks,oa=Promise.resolve();if(ia)for(;ia.length;)oa=oa.then(ia.shift());return oa}},ha.prepareFn,
H.rehover,function(){T.emit("plotly_transitioning",[]);return new Promise(function(ia){function oa(){xa++;return function(){ra++;ja||ra!==xa||ba(ia)}}T._transitioning=!0;0<U.duration&&(T._transitioningWithDuration=!0);T._transitionData._interruptCallbacks.push(function(){ja=!0});ha.redraw&&T._transitionData._interruptCallbacks.push(function(){return z.call("redraw",T)});T._transitionData._interruptCallbacks.push(function(){T.emit("plotly_transitioninterrupted",[])});var xa=0,ra=0;ha.runFn(oa);setTimeout(oa())})}],
T);ma&&ma.then||(ma=Promise.resolve());return ma.then(function(){return T})}function d(T,U){function ha(qb,Bb,ub){var wb=Bb._id.charAt(0);if("histogram2dcontour"===qb){qb=Bb._counterAxes[0];Bb=y.getFromId(U,qb);var rb="x"===wb||"x"===qb&&"category"===Bb.type,Ab="y"===wb||"y"===qb&&"category"===Bb.type;return function(Ma,La){return 0===Ma||0===La||rb&&Ma===ub[La].length-1||Ab&&La===ub.length-1?-1:("y"===wb?La:Ma)-1}}return function(Ma,La){return"y"===wb?La:Ma}}var Y=[],ba,ja,ma,ia,oa={min:function(qb){return D.aggNums(Math.min,
null,qb)},max:function(qb){return D.aggNums(Math.max,null,qb)},sum:function(qb){return D.aggNums(function(Bb,ub){return Bb+ub},null,qb)},total:function(qb){return D.aggNums(function(Bb,ub){return Bb+ub},null,qb)},mean:function(qb){return D.mean(qb)},median:function(qb){return D.median(qb)}};for(ba=0;ba<T.length;ba++){var xa=T[ba];if("category"===xa.type&&(ja=xa.categoryorder.match(W))){var ra=ja[1],la=ja[2],ka=xa._id.charAt(0),na="x"===ka,qa=[];for(ja=0;ja<xa._categories.length;ja++)qa.push([xa._categories[ja],
[]]);for(ja=0;ja<xa._traceIndices.length;ja++){var ta=xa._traceIndices[ja];var za=U._fullData[ta];if(!0===za.visible){var Ia=za.type;z.traceIs(za,"histogram")&&(delete za._xautoBinFinished,delete za._yautoBinFinished);var Xa="splom"===Ia;Ia="scattergl"===Ia;var $a=U.calcdata[ta];for(ta=0;ta<$a.length;ta++){var gb=$a[ta];if(Xa){var sb=za._axesDim[xa._id];na||(ma=za._diag[sb][0])&&(xa=U._fullLayout[y.id2name(ma)]);var jb=gb.trace.dimensions[sb].values;for(ma=0;ma<jb.length;ma++){var vb=xa._categoriesMap[jb[ma]];
for(ia=0;ia<gb.trace.dimensions.length;ia++)ia!==sb&&qa[vb][1].push(gb.trace.dimensions[ia].values[ma])}}else if(Ia){for(ma=0;ma<gb.t.x.length;ma++)na?(vb=gb.t.x[ma],sb=gb.t.y[ma]):(vb=gb.t.y[ma],sb=gb.t.x[ma]),qa[vb][1].push(sb);gb.t&&gb.t._scene&&delete gb.t._scene.dirty}else if(gb.hasOwnProperty("z"))for(sb=gb.z,gb=ha(za.type,xa,sb),ma=0;ma<sb.length;ma++)for(ia=0;ia<sb[ma].length;ia++)vb=gb(ia,ma),vb+1&&qa[vb][1].push(sb[ma][ia]);else for(vb=gb.p,void 0===vb&&(vb=gb[ka]),sb=gb.s,void 0===sb&&
(sb=gb.v),void 0===sb&&(sb=na?gb.y:gb.x),Array.isArray(sb)||(sb=void 0===sb?[]:[sb]),ma=0;ma<sb.length;ma++)qa[vb][1].push(sb[ma])}}}xa._categoriesValue=qa;ka=[];for(ja=0;ja<qa.length;ja++)ka.push([qa[ja][0],oa[ra](qa[ja][1])]);ka.sort(function(qb,Bb){return qb[1]-Bb[1]});xa._categoriesAggregatedValue=ka;xa._initialCategories=ka.map(function(qb){return qb[0]});"descending"===la&&xa._initialCategories.reverse();Y=Y.concat(xa.sortByInitialCategories())}}return Y}function e(T,U,ha){function Y(ia){ia.clearCalc();
"multicategory"===ia.type&&ia.setupMultiCategory(U);ba[ia._id]=1}var ba={};D.simpleMap(T,Y);T=ha._axisMatchGroups||[];for(var ja=0;ja<T.length;ja++)for(var ma in T[ja])ba[ma]||Y(ha[y.id2name(ma)])}function f(T){var U=T._fullLayout,ha=U._visibleModules,Y={},ba,ja;for(ba=0;ba<ha.length;ba++){var ma=ha[ba],ia=ma.crossTraceCalc;ia&&(ma=ma.basePlotModule.name,Y[ma]?D.pushUnique(Y[ma],ia):Y[ma]=[ia])}for(ja in Y)if(ia=Y[ja],ma=U._subplots[ja],Array.isArray(ma))for(ha=0;ha<ma.length;ha++){var oa=ma[ha],
xa="cartesian"===ja?U._plots[oa]:U[oa];for(ba=0;ba<ia.length;ba++)ia[ba](T,xa,oa)}else for(ba=0;ba<ia.length;ba++)ia[ba](T)}var q=b("@plotly/d3"),t=b("d3-time-format").timeFormatLocale,w=b("d3-format").formatLocale,x=b("fast-isnumeric"),z=b("../registry"),B=b("../plot_api/plot_schema"),A=b("../plot_api/plot_template"),D=b("../lib"),C=b("../components/color"),v=b("../constants/numerical").BADNUM,y=b("./cartesian/axis_ids"),F=b("./cartesian/handle_outline").clearSelect,J=b("./animation_attributes"),
K=b("./frame_attributes"),O=b("../plots/get_data").getModuleCalcData,I=D.relinkPrivateKeys,L=D._,H=N.exports={};D.extendFlat(H,z);H.attributes=b("./attributes");H.attributes.type.values=H.allTypes;H.fontAttrs=b("./font_attributes");H.layoutAttributes=b("./layout_attributes");H.fontWeight="normal";var M=H.transformsRegistry;b=b("./command");H.executeAPICommand=b.executeAPICommand;H.computeAPICommandBindings=b.computeAPICommandBindings;H.manageCommandObserver=b.manageCommandObserver;H.hasSimpleAPICommandBindings=
b.hasSimpleAPICommandBindings;H.redrawText=function(T){T=D.getGraphDiv(T);return new Promise(function(U){setTimeout(function(){T._fullLayout&&(z.getComponentMethod("annotations","draw")(T),z.getComponentMethod("legend","draw")(T),z.getComponentMethod("colorbar","draw")(T),U(H.previousPromises(T)))},300)})};H.resize=function(T){T=D.getGraphDiv(T);var U,ha=new Promise(function(Y,ba){T&&!D.isHidden(T)||ba(Error("Resize must be passed a displayed plot div element."));T._redrawTimer&&clearTimeout(T._redrawTimer);
T._resolveResize&&(U=T._resolveResize);T._resolveResize=Y;T._redrawTimer=setTimeout(function(){if(!T.layout||T.layout.width&&T.layout.height||D.isHidden(T))Y(T);else{delete T.layout.width;delete T.layout.height;var ja=T.changed;T.autoplay=!0;z.call("relayout",T,{autosize:!0}).then(function(){T.changed=ja;T._resolveResize===Y&&(delete T._resolveResize,Y(T))})}},100)});U&&U(ha);return ha};H.previousPromises=function(T){if((T._promises||[]).length)return Promise.all(T._promises).then(function(){T._promises=
[]})};H.addLinks=function(T){if(T._context.showLink||T._context.showSources){var U=T._fullLayout,ha=D.ensureSingle(U._paper,"text","js-plot-link-container",function(ja){ja.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:C.defaultLine,"pointer-events":"all"}).each(function(){var ma=q.select(this);ma.append("tspan").classed("js-link-to-tool",!0);ma.append("tspan").classed("js-link-spacer",!0);ma.append("tspan").classed("js-sourcelinks",!0)})}),Y=ha.node(),ba={y:U._paper.attr("height")-
9};document.body.contains(Y)&&Y.getComputedTextLength()>=U.width-20?(ba["text-anchor"]="start",ba.x=5):(ba["text-anchor"]="end",ba.x=U._paper.attr("width")-7);ha.attr(ba);U=ha.select(".js-link-to-tool");Y=ha.select(".js-link-spacer");ha=ha.select(".js-sourcelinks");T._context.showSources&&T._context.showSources(T);T._context.showLink&&p(T,U);Y.text(U.text()&&ha.text()?" - ":"")}};H.sendDataToCloud=function(T){var U=(window.PLOTLYENV||{}).BASE_URL||T._context.plotlyServerURL;if(U){T.emit("plotly_beforeexport");
var ha=q.select(T).append("div").attr("id","hiddenform").style("display","none");U=ha.append("form").attr({action:U+"/external",method:"post",target:"_blank"});U.append("input").attr({type:"text",name:"data"}).node().value=H.graphJson(T,!1,"keepdata");U.node().submit();ha.remove();T.emit("plotly_afterexport");return!1}};var Q="days shortDays months shortMonths periods dateTime date time decimal thousands grouping currency".split(" "),Z=["year","month","dayMonth","dayMonthYear"];H.supplyDefaults=function(T,
U){U=U&&U.skipUpdateCalc;var ha=T._fullLayout||{};if(ha._skipDefaults)delete ha._skipDefaults;else{var Y=T._fullLayout={},ba=T.layout||{},ja=T._fullData||[],ma=T._fullData=[],ia=T.data||[],oa=T.calcdata||[],xa=T._context||{};T._transitionData||H.createTransitionData(T);Y._dfltTitle={plot:L(T,"Click to enter Plot title"),x:L(T,"Click to enter X axis title"),y:L(T,"Click to enter Y axis title"),colorbar:L(T,"Click to enter Colorscale title"),annotation:L(T,"new text")};Y._traceWord=L(T,"trace");var ra=
k(T,Q);Y._mapboxAccessToken=xa.mapboxAccessToken;if(ha._initialAutoSizeIsDone){var la=ha.width,ka=ha.height;H.supplyLayoutGlobalDefaults(ba,Y,ra);ba.width||(Y.width=la);ba.height||(Y.height=ka);H.sanitizeMargins(Y)}else H.supplyLayoutGlobalDefaults(ba,Y,ra),la=!ba.width||!ba.height,ka=Y.autosize,xa=xa.autosizable,la&&(ka||xa)?H.plotAutoSize(T,ba,Y):la&&H.sanitizeMargins(Y),!ka&&la&&(ba.width=Y.width,ba.height=Y.height);Y._d3locale=m(ra,Y.separators);Y._extraFormat=k(T,Z);Y._initialAutoSizeIsDone=
!0;Y._dataLength=ia.length;Y._modules=[];Y._visibleModules=[];Y._basePlotModules=[];ra=z.collectableSubplotTypes;la={};var na;if(!ra)for(na in ra=[],xa=z.subplotsRegistry,xa){var qa=xa[na].attr;if(qa&&(ra.push(na),Array.isArray(qa)))for(ka=0;ka<qa.length;ka++)D.pushUnique(ra,qa[ka])}for(na=0;na<ra.length;na++)la[ra[na]]=[];la=Y._subplots=la;ra=Y._splomAxes={x:{},y:{}};ka=Y._splomSubplots={};Y._splomGridDflt={};Y._scatterStackOpts={};Y._firstScatter={};Y._alignmentOpts={};Y._colorAxes={};Y._requestRangeslider=
{};Y._traceUids=n(ja,ia);Y._globalTransforms=(T._context||{}).globalTransforms;H.supplyDataDefaults(ia,ma,ba,Y);na=Object.keys(ra.x);ra=Object.keys(ra.y);if(1<na.length&&1<ra.length){z.getComponentMethod("grid","sizeDefaults")(ba,Y);for(ia=0;ia<na.length;ia++)D.pushUnique(la.xaxis,na[ia]);for(ia=0;ia<ra.length;ia++)D.pushUnique(la.yaxis,ra[ia]);for(var ta in ka)D.pushUnique(la.cartesian,ta)}Y._has=H._hasPlotType.bind(Y);if(ja.length===ma.length)for(ia=0;ia<ma.length;ia++)I(ma[ia],ja[ia]);H.supplyLayoutModuleDefaults(ba,
Y,ma,T._transitionData);ta=Y._visibleModules;ba=[];for(ia=0;ia<ta.length;ia++)(la=ta[ia].crossTraceDefaults)&&D.pushUnique(ba,la);for(ia=0;ia<ba.length;ia++)ba[ia](ma,Y);Y._hasOnlyLargeSploms=1===Y._basePlotModules.length&&"splom"===Y._basePlotModules[0].name&&15<na.length&&15<ra.length&&0===Y.shapes.length&&0===Y.images.length;H.linkSubplots(ma,Y,ja,ha);H.cleanPlot(ma,Y,ja,ha);ba=!(!ha._has||!ha._has("gl2d"));ja=!(!Y._has||!Y._has("gl2d"));ia=!(!ha._has||!ha._has("cartesian"));ta=!(!Y._has||!Y._has("cartesian"));
ba=ia||ba;ja=ta||ja;ba&&!ja?ha._bgLayer.remove():ja&&!ba&&(Y._shouldCreateBgLayer=!0);ha._zoomlayer&&!T._dragging&&F({_fullLayout:ha});T=[];if(Y.meta)var za=Y._meta={meta:Y.meta,layout:{meta:Y.meta}};for(ja=0;ja<ma.length;ja++)ta=ma[ja],ta.meta?T[ta.index]=ta._meta={meta:ta.meta}:Y.meta&&(ta._meta={meta:Y.meta}),Y.meta&&(ta._meta.layout={meta:Y.meta});T.length&&(za||(za=Y._meta={}),za.data=T);I(Y,ha);z.getComponentMethod("colorscale","crossTraceDefaults")(ma,Y);Y._preGUI||(Y._preGUI={});Y._tracePreGUI||
(Y._tracePreGUI={});za=Y._tracePreGUI;ha={};for(var Ia in za)ha[Ia]="old";for(ia=0;ia<ma.length;ia++)Ia=ma[ia]._fullInput.uid,ha[Ia]||(za[Ia]={}),ha[Ia]="new";for(Ia in ha)"old"===ha[Ia]&&delete za[Ia];r(Y);z.getComponentMethod("rangeslider","makeData")(Y);U||oa.length!==ma.length||H.supplyDefaultsUpdateCalc(oa,ma)}};H.supplyDefaultsUpdateCalc=function(T,U){for(var ha=0;ha<U.length;ha++){var Y=U[ha],ba=(T[ha]||[])[0];if(ba&&ba.trace){var ja=ba.trace;if(ja._hasCalcTransform){var ma=ja._arrayAttrs,
ia;for(ia=0;ia<ma.length;ia++){var oa=ma[ia];var xa=D.nestedProperty(ja,oa).get().slice();D.nestedProperty(Y,oa).set(xa)}}ba.trace=Y}}};H.createTransitionData=function(T){T._transitionData||(T._transitionData={});T._transitionData._frames||(T._transitionData._frames=[]);T._transitionData._frameHash||(T._transitionData._frameHash={});T._transitionData._counter||(T._transitionData._counter=0);T._transitionData._interruptCallbacks||(T._transitionData._interruptCallbacks=[])};H._hasPlotType=function(T){var U,
ha=this._basePlotModules||[];for(U=0;U<ha.length;U++)if(ha[U].name===T)return!0;ha=this._modules||[];for(U=0;U<ha.length;U++){var Y=ha[U].name;if(Y===T||(Y=z.modules[Y])&&Y.categories[T])return!0}return!1};H.cleanPlot=function(T,U,ha,Y){var ba,ja=Y._basePlotModules||[];for(ba=0;ba<ja.length;ba++){var ma=ja[ba];ma.clean&&ma.clean(T,U,ha,Y)}ba=Y._has&&Y._has("gl");U=U._has&&U._has("gl");ba&&!U&&void 0!==Y._glcontainer&&(Y._glcontainer.selectAll(".gl-canvas").remove(),Y._glcontainer.selectAll(".no-webgl").remove(),
Y._glcanvas=null);ja=!!Y._infolayer;ba=0;a:for(;ba<ha.length;ba++){ma=ha[ba].uid;for(U=0;U<T.length;U++)if(ma===T[U].uid)continue a;ja&&Y._infolayer.select(".cb"+ma).remove()}};H.linkSubplots=function(T,U,ha,Y){var ba=Y._plots||{},ja=U._plots={};Y=U._subplots;ha={_fullData:T,_fullLayout:U};var ma=Y.cartesian.concat(Y.gl2d||[]);for(Y=0;Y<ma.length;Y++){var ia=ma[Y];var oa=ba[ia],xa=y.getFromId(ha,ia,"x"),ra=y.getFromId(ha,ia,"y");oa?oa=ja[ia]=oa:(oa=ja[ia]={},oa.id=ia);xa._counterAxes.push(ra._id);
ra._counterAxes.push(xa._id);xa._subplotsWith.push(ia);ra._subplotsWith.push(ia);oa.xaxis=xa;oa.yaxis=ra;oa._hasClipOnAxisFalse=!1;for(ia=0;ia<T.length;ia++)if(xa=T[ia],xa.xaxis===oa.xaxis._id&&xa.yaxis===oa.yaxis._id&&!1===xa.cliponaxis){oa._hasClipOnAxisFalse=!0;break}}T=y.list(ha,null,!0);for(Y=0;Y<T.length;Y++)ba=T[Y],ia=null,ba.overlaying&&(ia=y.getFromId(ha,ba.overlaying))&&ia.overlaying&&(ba.overlaying=!1,ia=null),ba._mainAxis=ia||ba,ia&&(ba.domain=ia.domain.slice()),ba._anchorAxis="free"===
ba.anchor?null:y.getFromId(ha,ba.anchor);for(Y=0;Y<T.length;Y++){ba=T[Y];ba._counterAxes.sort(y.idSort);ba._subplotsWith.sort(D.subplotSort);ja=ia=ba;var la=U;ma={_fullLayout:la};oa="x"===ja._id.charAt(0);var ka=ja._mainAxis._anchorAxis,na=ra=xa="";ka&&(na=ka._mainAxis._id,xa=oa?ja._id+na:na+ja._id);if(!xa||!la._plots[xa])for(xa="",la=ja._counterAxes,ka=0;ka<la.length;ka++){var qa=la[ka],ta=oa?ja._id+qa:qa+ja._id;ra||(ra=ta);qa=y.getFromId(ma,qa);if(na&&qa.overlaying===na){xa=ta;break}}ia._mainSubplot=
xa||ra;if(ba._counterAxes.length&&(ba.spikemode&&-1!==ba.spikemode.indexOf("across")||ba.automargin&&ba.mirror&&"free"!==ba.anchor||z.getComponentMethod("rangeslider","isVisible")(ba))){ja=1;for(ia=ma=0;ia<ba._counterAxes.length;ia++)oa=y.getFromId(ha,ba._counterAxes[ia]),ja=Math.min(ja,oa.domain[0]),ma=Math.max(ma,oa.domain[1]);ja<ma&&(ba._counterDomainMin=ja,ba._counterDomainMax=ma)}}};H.clearExpandedTraceDefaultColors=function(T){function U(ja,ma,ia,oa){Y[oa]=ma;Y.length=oa+1;"color"===ja.valType&&
void 0===ja.dflt&&ba.push(Y.join("."))}var ha;var Y=[];var ba=T._module._colorAttrs;ba||(T._module._colorAttrs=ba=[],B.crawl(T._module.attributes,U));for(ha=0;ha<ba.length;ha++)D.nestedProperty(T,"_input."+ba[ha]).get()||D.nestedProperty(T,ba[ha]).set(null)};H.supplyDataDefaults=function(T,U,ha,Y){function ba(sb){U.push(sb);var jb=sb._module;jb&&(D.pushUnique(ja,jb),!0===sb.visible&&D.pushUnique(ma,jb),D.pushUnique(ia,sb._module.basePlotModule),oa++,!1!==sb._input.visible&&xa++)}var ja=Y._modules,
ma=Y._visibleModules,ia=Y._basePlotModules,oa=0,xa=0,ra;Y._transformModules=[];var la={},ka=[],na=A.traceTemplater((ha.template||{}).data||{});for(ra=0;ra<T.length;ra++){var qa=T[ra];var ta=na.newTrace(qa);ta.uid=Y._traceUids[ra];H.supplyTraceDefaults(qa,ta,xa,Y,ra);ta.index=ra;ta._input=qa;ta._expandedIndex=oa;if(ta.transforms&&ta.transforms.length)for(var za=!1!==qa.visible&&!1===ta.visible,Ia=g(ta,U,ha,Y),Xa=0;Xa<Ia.length;Xa++){var $a=Ia[Xa],gb={_template:ta._template,type:ta.type,uid:ta.uid+
Xa};za&&!1===$a.visible&&delete $a.visible;H.supplyTraceDefaults($a,gb,oa,Y,ra);I(gb,$a);gb.index=ra;gb._input=qa;gb._fullInput=ta;gb._expandedIndex=oa;gb._expandedInput=$a;ba(gb)}else ta._fullInput=ta,ta._expandedInput=ta,ba(ta);z.traceIs(ta,"carpetAxis")&&(la[ta.carpet]=ta);z.traceIs(ta,"carpetDependent")&&ka.push(ra)}for(ra=0;ra<ka.length;ra++)ta=U[ka[ra]],ta.visible&&(T=la[ta.carpet],(ta._carpet=T)&&T.visible?(ta.xaxis=T.xaxis,ta.yaxis=T.yaxis):ta.visible=!1)};H.supplyAnimationDefaults=function(T){T=
T||{};var U,ha={};D.coerce(T||{},ha,J,"mode",void 0);D.coerce(T||{},ha,J,"direction",void 0);D.coerce(T||{},ha,J,"fromcurrent",void 0);if(Array.isArray(T.frame))for(ha.frame=[],U=0;U<T.frame.length;U++)ha.frame[U]=H.supplyAnimationFrameDefaults(T.frame[U]||{});else ha.frame=H.supplyAnimationFrameDefaults(T.frame||{});if(Array.isArray(T.transition))for(ha.transition=[],U=0;U<T.transition.length;U++)ha.transition[U]=H.supplyAnimationTransitionDefaults(T.transition[U]||{});else ha.transition=H.supplyAnimationTransitionDefaults(T.transition||
{});return ha};H.supplyAnimationFrameDefaults=function(T){var U={};D.coerce(T||{},U,J.frame,"duration",void 0);D.coerce(T||{},U,J.frame,"redraw",void 0);return U};H.supplyAnimationTransitionDefaults=function(T){var U={};D.coerce(T||{},U,J.transition,"duration",void 0);D.coerce(T||{},U,J.transition,"easing",void 0);return U};H.supplyFrameDefaults=function(T){function U(Y,ba){return D.coerce(T,ha,K,Y,ba)}var ha={};U("group");U("name");U("traces");U("baseframe");U("data");U("layout");return ha};H.supplyTraceDefaults=
function(T,U,ha,Y,ba){function ja(ta,za){return D.coerce(T,U,H.attributes,ta,za)}var ma=Y.colorway||C.defaults;ha=ma[ha%ma.length];ma=ja("visible");ja("type");ja("name",Y._traceWord+" "+ba);ja("uirevision",Y.uirevision);var ia=H.getModule(U);if(U._module=ia){var oa=ia.basePlotModule,xa=oa.attr,ra=oa.attributes;if(xa&&ra){var la=Y._subplots,ka="";if(ma||"gl2d"!==oa.name){if(Array.isArray(xa))for(ba=0;ba<xa.length;ba++){var na=xa[ba],qa=D.coerce(T,U,ra,na);la[na]&&D.pushUnique(la[na],qa);ka+=qa}else ka=
D.coerce(T,U,ra,xa);la[oa.name]&&D.pushUnique(la[oa.name],ka)}}}ma&&(ja("customdata"),ja("ids"),ja("meta"),z.traceIs(U,"showLegend")?(D.coerce(T,U,ia.attributes.showlegend?ia.attributes:H.attributes,"showlegend"),ja("legendgroup"),ja("legendgrouptitle.text")&&D.coerceFont(ja,"legendgrouptitle.font",D.extendFlat({},Y.font,{size:Math.round(1.1*Y.font.size)})),ja("legendrank"),U._dfltShowLegend=!0):U._dfltShowLegend=!1,ia&&ia.supplyDefaults(T,U,ha,Y),z.traceIs(U,"noOpacity")||ja("opacity"),z.traceIs(U,
"notLegendIsolatable")&&(U.visible=!!U.visible),z.traceIs(U,"noHover")||(U.hovertemplate||D.coerceHoverinfo(T,U,Y),"parcats"!==U.type&&z.getComponentMethod("fx","supplyDefaults")(T,U,ha,Y)),ia&&ia.selectPoints&&ja("selectedpoints"),H.supplyTransformDefaults(T,U,Y));return U};H.hasMakesDataTransform=a;H.supplyTransformDefaults=function(T,U,ha){if(U._length||a(T)){var Y=ha._globalTransforms||[],ba=ha._transformModules||[];if(Array.isArray(T.transforms)||0!==Y.length){Y=Y.concat(T.transforms||[]);for(var ja=
U.transforms=[],ma=0;ma<Y.length;ma++){var ia=Y[ma],oa=ia.type,xa=M[oa],ra=!(ia._module&&ia._module===xa),la=xa&&"function"===typeof xa.transform;xa||D.warn("Unrecognized transform type "+oa+".");xa&&xa.supplyDefaults&&(ra||la)?(ia=xa.supplyDefaults(ia,U,ha,T),ia.type=oa,ia._module=xa,D.pushUnique(ba,xa)):ia=D.extendFlat({},ia);ja.push(ia)}}}};H.supplyLayoutGlobalDefaults=function(T,U,ha){function Y(ja,ma){return D.coerce(T,U,H.layoutAttributes,ja,ma)}var ba=T.template;D.isPlainObject(ba)&&(U.template=
ba,U._template=ba.layout,U._dataTemplate=ba.data);Y("autotypenumbers");ba=D.coerceFont(Y,"font");Y("title.text",U._dfltTitle.plot);D.coerceFont(Y,"title.font",{family:ba.family,size:Math.round(1.4*ba.size),color:ba.color});Y("title.xref");Y("title.yref");Y("title.x");Y("title.y");Y("title.xanchor");Y("title.yanchor");Y("title.pad.t");Y("title.pad.r");Y("title.pad.b");Y("title.pad.l");Y("uniformtext.mode")&&Y("uniformtext.minsize");Y("autosize",!(T.width&&T.height));Y("width");Y("height");Y("margin.l");
Y("margin.r");Y("margin.t");Y("margin.b");Y("margin.pad");Y("margin.autoexpand");T.width&&T.height&&H.sanitizeMargins(U);z.getComponentMethod("grid","sizeDefaults")(T,U);Y("paper_bgcolor");Y("separators",ha.decimal+ha.thousands);Y("hidesources");Y("colorway");Y("datarevision");ha=Y("uirevision");Y("editrevision",ha);Y("selectionrevision",ha);z.getComponentMethod("modebar","supplyLayoutDefaults")(T,U);z.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(T,U,Y);Y("meta");D.isPlainObject(T.transition)&&
(Y("transition.duration"),Y("transition.easing"),Y("transition.ordering"));z.getComponentMethod("calendars","handleDefaults")(T,U,"calendar");z.getComponentMethod("fx","supplyLayoutGlobalDefaults")(T,U,Y)};H.plotAutoSize=function(T,U,ha){var Y=T._context||{},ba=Y.frameMargins,ja;(ja=D.isPlotDiv(T))&&T.emit("plotly_autosize");Y.fillFrame?(Y=window.innerWidth,ja=window.innerHeight,document.body.style.overflow="hidden"):(ja=ja?window.getComputedStyle(T):{},Y=h(ja.width)||h(ja.maxWidth)||ha.width,ja=
h(ja.height)||h(ja.maxHeight)||ha.height,x(ba)&&0<ba&&(ba=1-2*ba,Y=Math.round(ba*Y),ja=Math.round(ba*ja)));ba=H.layoutAttributes.width.min;var ma=H.layoutAttributes.height.min;Y<ba&&(Y=ba);ja<ma&&(ja=ma);ba=!U.width&&1<Math.abs(ha.width-Y);if((U=!U.height&&1<Math.abs(ha.height-ja))||ba)ba&&(ha.width=Y),U&&(ha.height=ja);T._initialAutoSize||(T._initialAutoSize={width:Y,height:ja});H.sanitizeMargins(ha)};H.supplyLayoutModuleDefaults=function(T,U,ha,Y){var ba=z.componentsRegistry,ja=U._basePlotModules,
ma;var ia=z.subplotsRegistry.cartesian;for(ma in ba){var oa=ba[ma];oa.includeBasePlot&&oa.includeBasePlot(T,U)}ja.length||ja.push(ia);U._has("cartesian")&&(z.getComponentMethod("grid","contentDefaults")(T,U),ia.finalizeSubplots(T,U));for(var xa in U._subplots)U._subplots[xa].sort(D.subplotSort);for(ia=0;ia<ja.length;ia++)oa=ja[ia],oa.supplyLayoutDefaults&&oa.supplyLayoutDefaults(T,U,ha);ja=U._modules;for(ia=0;ia<ja.length;ia++)oa=ja[ia],oa.supplyLayoutDefaults&&oa.supplyLayoutDefaults(T,U,ha);ja=
U._transformModules;for(ia=0;ia<ja.length;ia++)oa=ja[ia],oa.supplyLayoutDefaults&&oa.supplyLayoutDefaults(T,U,ha,Y);for(ma in ba)oa=ba[ma],oa.supplyLayoutDefaults&&oa.supplyLayoutDefaults(T,U,ha)};H.purge=function(T){var U=T._fullLayout||{};void 0!==U._glcontainer&&(U._glcontainer.selectAll(".gl-canvas").remove(),U._glcontainer.remove(),U._glcanvas=null);U._modeBar&&U._modeBar.destroy();T._transitionData&&(T._transitionData._interruptCallbacks&&(T._transitionData._interruptCallbacks.length=0),T._transitionData._animationRaf&&
window.cancelAnimationFrame(T._transitionData._animationRaf));D.clearThrottle();D.clearResponsive(T);delete T.data;delete T.layout;delete T._fullData;delete T._fullLayout;delete T.calcdata;delete T.empty;delete T.fid;delete T.undoqueue;delete T.undonum;delete T.autoplay;delete T.changed;delete T._promises;delete T._redrawTimer;delete T._hmlumcount;delete T._hmpixcount;delete T._transitionData;delete T._transitioning;delete T._initialAutoSize;delete T._transitioningWithDuration;delete T._dragging;
delete T._dragged;delete T._dragdata;delete T._hoverdata;delete T._snapshotInProgress;delete T._editing;delete T._mouseDownTime;delete T._legendMouseDownTime;T.removeAllListeners&&T.removeAllListeners()};H.style=function(T){var U=T._fullLayout._visibleModules,ha=[],Y;for(Y=0;Y<U.length;Y++){var ba=U[Y];ba.style&&D.pushUnique(ha,ba.style)}for(Y=0;Y<ha.length;Y++)ha[Y](T)};H.sanitizeMargins=function(T){if(T&&T.margin){var U=T.width,ha=T.height;T=T.margin;var Y=ha-(T.t+T.b);0>U-(T.l+T.r)&&(U=(U-1)/(T.l+
T.r),T.l=Math.floor(U*T.l),T.r=Math.floor(U*T.r));0>Y&&(U=(ha-1)/(T.t+T.b),T.t=Math.floor(U*T.t),T.b=Math.floor(U*T.b))}};H.clearAutoMarginIds=function(T){T._fullLayout._pushmarginIds={}};H.allowAutoMargin=function(T,U){T._fullLayout._pushmarginIds[U]=1};H.autoMargin=function(T,U,ha){var Y=T._fullLayout,ba=Y.width,ja=Y.height,ma=Y.margin,ia=D.constrain(ba-ma.l-ma.r,2,64),oa=D.constrain(ja-ma.t-ma.b,2,64);ba=Math.max(0,ba-ia);var xa=Math.max(0,ja-oa);ja=Y._pushmargin;oa=Y._pushmarginIds;if(!1!==ma.autoexpand&&
(ha?(ia=ha.pad,void 0===ia&&(ia=Math.min(12,ma.l,ma.r,ma.t,ma.b)),ba&&(ma=(ha.l+ha.r)/ba,1<ma&&(ha.l/=ma,ha.r/=ma)),xa&&(ma=(ha.t+ha.b)/xa,1<ma&&(ha.t/=ma,ha.b/=ma)),ja[U]={l:{val:void 0!==ha.xl?ha.xl:ha.x,size:ha.l+ia},r:{val:void 0!==ha.xr?ha.xr:ha.x,size:ha.r+ia},b:{val:void 0!==ha.yb?ha.yb:ha.y,size:ha.b+ia},t:{val:void 0!==ha.yt?ha.yt:ha.y,size:ha.t+ia}},oa[U]=1):(delete ja[U],delete oa[U]),!Y._replotting))return H.doAutoMargin(T)};H.doAutoMargin=function(T){var U=T._fullLayout,ha=U.width,Y=
U.height;U._size||(U._size={});r(U);var ba=U._size,ja=U.margin,ma=D.extendFlat({},ba),ia=ja.l,oa=ja.r,xa=ja.t,ra=ja.b,la=U._pushmargin,ka=U._pushmarginIds;if(!1!==U.margin.autoexpand){for(var na in la)ka[na]||delete la[na];la.base={l:{val:0,size:ia},r:{val:1,size:oa},t:{val:1,size:xa},b:{val:0,size:ra}};for(var qa in la){var ta=la[qa].l||{},za=la[qa].b||{};na=ta.val;ta=ta.size;var Ia=za.val;za=za.size;for(var Xa in la){if(x(ta)&&la[Xa].r){var $a=la[Xa].r.val,gb=la[Xa].r.size;if($a>na){var sb=(ta*
$a+(gb-ha)*na)/($a-na);$a=(gb*(1-na)+(ta-ha)*(1-$a))/($a-na);sb+$a>ia+oa&&(ia=sb,oa=$a)}}x(za)&&la[Xa].t&&($a=la[Xa].t.val,gb=la[Xa].t.size,$a>Ia&&(sb=(za*$a+(gb-Y)*Ia)/($a-Ia),$a=(gb*(1-Ia)+(za-Y)*(1-$a))/($a-Ia),sb+$a>ra+xa&&(ra=sb,xa=$a)))}}}qa=D.constrain(ha-ja.l-ja.r,2,64);la=D.constrain(Y-ja.t-ja.b,2,64);qa=Math.max(0,ha-qa);la=Math.max(0,Y-la);qa&&(qa=(ia+oa)/qa,1<qa&&(ia/=qa,oa/=qa));la&&(la=(ra+xa)/la,1<la&&(ra/=la,xa/=la));ba.l=Math.round(ia);ba.r=Math.round(oa);ba.t=Math.round(xa);ba.b=
Math.round(ra);ba.p=Math.round(ja.pad);ba.w=Math.round(ha)-ba.l-ba.r;ba.h=Math.round(Y)-ba.t-ba.b;if(!U._replotting&&H.didMarginChange(ma,ba)){"_redrawFromAutoMarginCount"in U?U._redrawFromAutoMarginCount++:U._redrawFromAutoMarginCount=1;ha=3*(1+Object.keys(ka).length);if(U._redrawFromAutoMarginCount<ha)return z.call("_doPlot",T);U._size=ma;D.warn("Too many auto-margin redraws.")}l(T)};var ca="lrtbpwh".split("");H.didMarginChange=function(T,U){for(var ha=0;ha<ca.length;ha++){var Y=ca[ha],ba=T[Y];
Y=U[Y];if(!x(ba)||1<Math.abs(Y-ba))return!0}return!1};H.graphJson=function(T,U,ha,Y,ba,ja){function ma(ra,la){if("function"===typeof ra)return la?"_function_":null;if(D.isPlainObject(ra)){var ka={},na;Object.keys(ra).sort().forEach(function(qa){if(-1===["_","["].indexOf(qa.charAt(0)))if("function"===typeof ra[qa])la&&(ka[qa]="_function");else{if("keepdata"===ha){if("src"===qa.substr(qa.length-3))return}else if("keepstream"===ha){if(na=ra[qa+"src"],"string"===typeof na&&0<na.indexOf(":")&&!D.isPlainObject(ra.stream))return}else if("keepall"!==
ha&&(na=ra[qa+"src"],"string"===typeof na&&0<na.indexOf(":")))return;ka[qa]=ma(ra[qa],la)}});return ka}return Array.isArray(ra)?ra.map(function(qa){return ma(qa,la)}):D.isTypedArray(ra)?D.simpleMap(ra,D.identity):D.isJSDate(ra)?D.ms2DateTimeLocal(+ra):ra}(ba&&U&&!T._fullData||ba&&!U&&!T._fullLayout)&&H.supplyDefaults(T);var ia=ba?T._fullLayout:T.layout,oa=(T._transitionData||{})._frames,xa={data:((ba?T._fullData:T.data)||[]).map(function(ra){ra=ma(ra);U&&delete ra.fit;return ra})};U||(xa.layout=ma(ia),
ba&&(ba=ia._size,xa.layout.computed={margin:{b:ba.b,l:ba.l,r:ba.r,t:ba.t}}));oa&&(xa.frames=ma(oa));ja&&(xa.config=ma(T._context,!0));return"object"===Y?xa:JSON.stringify(xa)};H.modifyFrames=function(T,U){var ha=T._transitionData._frames,Y=T._transitionData._frameHash;for(T=0;T<U.length;T++){var ba=U[T];switch(ba.type){case "replace":var ja=ba.value;var ma=(ha[ba.index]||{}).name,ia=ja.name;ha[ba.index]=Y[ia]=ja;ia!==ma&&(delete Y[ma],Y[ia]=ja);break;case "insert":ja=ba.value;Y[ja.name]=ja;ha.splice(ba.index,
0,ja);break;case "delete":ja=ha[ba.index],delete Y[ja.name],ha.splice(ba.index,1)}}return Promise.resolve()};H.computeFrame=function(T,U){var ha=T._transitionData._frameHash,Y;if(!U)throw Error("computeFrame must be given a string frame name");U=ha[U.toString()];if(!U)return!1;T=[U];for(Y=[U.name];U.baseframe&&(U=ha[U.baseframe.toString()])&&-1===Y.indexOf(U.name);)T.push(U),Y.push(U.name);for(var ba={};U=T.pop();)if(U.layout&&(ba.layout=H.extendLayout(ba.layout,U.layout)),U.data){ba.data||(ba.data=
[]);Y=U.traces;if(!Y)for(Y=[],ha=0;ha<U.data.length;ha++)Y[ha]=ha;ba.traces||(ba.traces=[]);for(ha=0;ha<U.data.length;ha++){var ja=Y[ha];if(void 0!==ja&&null!==ja){var ma=ba.traces.indexOf(ja);-1===ma&&(ma=ba.data.length,ba.traces[ma]=ja);ba.data[ma]=H.extendTrace(ba.data[ma],U.data[ha])}}}return ba};H.recomputeFrameHash=function(T){var U=T._transitionData._frameHash={};T=T._transitionData._frames;for(var ha=0;ha<T.length;ha++){var Y=T[ha];Y&&Y.name&&(U[Y.name]=Y)}};H.extendObjectWithContainers=function(T,
U,ha){U=D.extendDeepNoArrays({},U||{});var Y=D.expandObjectPaths(U);var ba={};if(ha&&ha.length)for(U=0;U<ha.length;U++){var ja=D.nestedProperty(Y,ha[U]);var ma=ja.get();void 0===ma?D.nestedProperty(ba,ha[U]).set(null):(ja.set(null),D.nestedProperty(ba,ha[U]).set(ma))}T=D.extendDeepNoArrays(T||{},Y);if(ha&&ha.length)for(U=0;U<ha.length;U++)if(ja=D.nestedProperty(ba,ha[U]),Y=ja.get()){ma=D.nestedProperty(T,ha[U]);var ia=ma.get();Array.isArray(ia)||(ia=[],ma.set(ia));for(ja=0;ja<Y.length;ja++){var oa=
Y[ja];ia[ja]=null===oa?null:H.extendObjectWithContainers(ia[ja],oa)}ma.set(ia)}return T};H.dataArrayContainers=["transforms","dimensions"];H.layoutArrayContainers=z.layoutArrayContainers;H.extendTrace=function(T,U){return H.extendObjectWithContainers(T,U,H.dataArrayContainers)};H.extendLayout=function(T,U){return H.extendObjectWithContainers(T,U,H.layoutArrayContainers)};H.transition=function(T,U,ha,Y,ba,ja){ba={redraw:ba.redraw};var ma={},ia=[];ba.prepareFn=function(){var oa=Array.isArray(U)?U.length:
0;oa=Y.slice(0,oa);for(var xa=0;xa<oa.length;xa++){var ra=oa[xa],la=T._fullData[ra]._module;la&&(la.animatable&&(la=la.basePlotModule.name,ma[la]||(ma[la]=[]),ma[la].push(ra)),T.data[oa[xa]]=H.extendTrace(T.data[oa[xa]],U[xa]))}oa=D.expandObjectPaths(D.extendDeepNoArrays({},ha));xa=/^[xy]axis[0-9]*$/;for(var ka in oa)xa.test(ka)&&delete oa[ka].range;H.extendLayout(T.layout,oa);delete T.calcdata;H.supplyDefaults(T);H.doCalcdata(T);if(ka=D.expandObjectPaths(ha)){oa=T._fullLayout._plots;for(var na in oa){xa=
oa[na];ra=xa.xaxis;la=xa.yaxis;var qa=ra.range.slice(),ta=la.range.slice(),za=null,Ia=null,Xa=null,$a=null;Array.isArray(ka[ra._name+".range"])?za=ka[ra._name+".range"].slice():Array.isArray((ka[ra._name]||{}).range)&&(za=ka[ra._name].range.slice());Array.isArray(ka[la._name+".range"])?Ia=ka[la._name+".range"].slice():Array.isArray((ka[la._name]||{}).range)&&(Ia=ka[la._name].range.slice());qa&&za&&(ra.r2l(qa[0])!==ra.r2l(za[0])||ra.r2l(qa[1])!==ra.r2l(za[1]))&&(Xa={xr0:qa,xr1:za});ta&&Ia&&(la.r2l(ta[0])!==
la.r2l(Ia[0])||la.r2l(ta[1])!==la.r2l(Ia[1]))&&($a={yr0:ta,yr1:Ia});(Xa||$a)&&ia.push(D.extendFlat({plotinfo:xa},Xa,$a))}}return Promise.resolve()};ba.runFn=function(oa){var xa=T._fullLayout._basePlotModules;var ra=ia.length,la;if(ha)for(la=0;la<xa.length;la++)xa[la].transitionAxes&&xa[la].transitionAxes(T,ia,ja,oa);ra?(xa=D.extendFlat({},ja),xa.duration=0,delete ma.cartesian):xa=ja;for(var ka in ma)ra=ma[ka],T._fullData[ra[0]]._module.basePlotModule.plot(T,ra,xa,oa)};return c(T,ja,ba)};H.transitionFromReact=
function(T,U,ha,Y){var ba=T._fullLayout,ja=ba.transition,ma={},ia=[];ma.prepareFn=function(){var oa=ba._plots;ma.redraw=!1;"some"===U.anim&&(ma.redraw=!0);"some"===ha.anim&&(ma.redraw=!0);for(var xa in oa){var ra=oa[xa],la=ra.xaxis,ka=ra.yaxis,na=Y[la._name].range.slice(),qa=Y[ka._name].range.slice(),ta=la.range.slice(),za=ka.range.slice();la.setScale();ka.setScale();var Ia=null,Xa=null;if(la.r2l(na[0])!==la.r2l(ta[0])||la.r2l(na[1])!==la.r2l(ta[1]))Ia={xr0:na,xr1:ta};if(ka.r2l(qa[0])!==ka.r2l(za[0])||
ka.r2l(qa[1])!==ka.r2l(za[1]))Xa={yr0:qa,yr1:za};(Ia||Xa)&&ia.push(D.extendFlat({plotinfo:ra},Ia,Xa))}return Promise.resolve()};ma.runFn=function(oa){function xa(){if(T._fullLayout)for(var Xa=0;Xa<ka.length;Xa++)ka[Xa].transitionAxes&&ka[Xa].transitionAxes(T,ia,na,oa)}function ra(){if(T._fullLayout)for(var Xa=0;Xa<ka.length;Xa++)ka[Xa].plot(T,ta,qa,oa)}for(var la=T._fullData,ka=T._fullLayout._basePlotModules,na,qa,ta,za=[],Ia=0;Ia<la.length;Ia++)za.push(Ia);ia.length&&U.anim?"traces first"===ja.ordering?
(na=D.extendFlat({},ja,{duration:0}),ta=za,qa=ja,setTimeout(xa,ja.duration),ra()):(na=ja,ta=null,qa=D.extendFlat({},ja,{duration:0}),setTimeout(ra,na.duration),xa()):ia.length?(na=ja,xa()):U.anim&&(ta=za,qa=ja,ra())};return c(T,ja,ma)};H.doCalcdata=function(T,U){function ha(ta){ka=ja[ta];ia=ka._module;if(!0===ka.visible&&ka.transforms)for(ia&&ia.calc&&(ta=ia.calc(T,ka),ta[0]&&ta[0].t&&ta[0].t._scene&&delete ta[0].t._scene.dirty),xa=0;xa<ka.transforms.length;xa++)ta=ka.transforms[xa],(ia=M[ta.type])&&
ia.calcTransform&&(qa=ka._hasCalcTransform=!0,ia.calcTransform(T,ka,ta))}function Y(ta,za){ka=ja[ta];ia=ka._module;if(!!ia.isContainer===za){za=[];if(!0===ka.visible&&0!==ka._length){delete ka._indexToPoints;var Ia=ka.transforms||[];for(xa=Ia.length-1;0<=xa;xa--)if(Ia[xa].enabled){ka._indexToPoints=Ia[xa]._indexToPoints;break}ia&&ia.calc&&(za=ia.calc(T,ka))}Array.isArray(za)&&za[0]||(za=[{x:v,y:v}]);za[0].t||(za[0].t={});za[0].trace=ka;ra[ta]=za}}var ba=y.list(T),ja=T._fullData,ma=T._fullLayout,ia,
oa,xa,ra=Array(ja.length),la=(T.calcdata||[]).slice();T.calcdata=ra;ma._numBoxes=0;ma._numViolins=0;ma._violinScaleGroupStats={};T._hmpixcount=0;T._hmlumcount=0;ma._piecolormap={};ma._sunburstcolormap={};ma._treemapcolormap={};ma._iciclecolormap={};ma._funnelareacolormap={};for(oa=0;oa<ja.length;oa++)Array.isArray(U)&&-1===U.indexOf(oa)&&(ra[oa]=la[oa]);for(oa=0;oa<ja.length;oa++){var ka=ja[oa];ka._arrayAttrs=B.findArrayAttributes(ka);ka._extremes={}}U=ma._subplots.polar||[];for(oa=0;oa<U.length;oa++)ba.push(ma[U[oa]].radialaxis,
ma[U[oa]].angularaxis);for(var na in ma._colorAxes)oa=ma[na],!1!==oa.cauto&&(delete oa.cmin,delete oa.cmax);var qa=!1;e(ba,ja,ma);for(oa=0;oa<ja.length;oa++)Y(oa,!0);for(oa=0;oa<ja.length;oa++)ha(oa);qa&&e(ba,ja,ma);for(oa=0;oa<ja.length;oa++)Y(oa,!0);for(oa=0;oa<ja.length;oa++)Y(oa,!1);f(T);ba=d(ba,T);if(ba.length){ma._numBoxes=0;for(oa=ma._numViolins=0;oa<ba.length;oa++)Y(ba[oa],!0);for(oa=0;oa<ba.length;oa++)Y(ba[oa],!1);f(T)}z.getComponentMethod("fx","calc")(T);z.getComponentMethod("errorbars",
"calc")(T)};var W=/(total|sum|min|max|mean|median) (ascending|descending)/;H.rehover=function(T){T._fullLayout._rehover&&T._fullLayout._rehover()};H.redrag=function(T){T._fullLayout._redrag&&T._fullLayout._redrag()};H.generalUpdatePerTraceModule=function(T,U,ha,Y){var ba=U.traceHash,ja={},ma;for(ma=0;ma<ha.length;ma++){var ia=ha[ma],oa=ia[0].trace;oa.visible&&(ja[oa.type]=ja[oa.type]||[],ja[oa.type].push(ia))}for(var xa in ba)ja[xa]||(ha=ba[xa][0],ha[0].trace.visible=!1,ja[xa]=[ha]);for(var ra in ja)ba=
ja[ra],ba[0][0].trace._module.plot(T,U,D.filterVisible(ba),Y);U.traceHash=ja};H.plotBasePlot=function(T,U,ha,Y,ba){T=z.getModule(T);ha=O(U.calcdata,T)[0];T.plot(U,ha,Y,ba)};H.cleanBasePlot=function(T,U,ha,Y,ba){U=ba._has&&ba._has(T);ha=ha._has&&ha._has(T);U&&!ha&&ba["_"+T+"layer"].selectAll("g.trace").remove()}},{"../components/color":666,"../constants/numerical":779,"../lib":803,"../plot_api/plot_schema":842,"../plot_api/plot_template":843,"../plots/get_data":891,"../registry":931,"./animation_attributes":848,
"./attributes":850,"./cartesian/axis_ids":858,"./cartesian/handle_outline":865,"./command":881,"./font_attributes":883,"./frame_attributes":884,"./layout_attributes":908,"@plotly/d3":58,"d3-format":167,"d3-time-format":175,"fast-isnumeric":249}],918:[function(b,N,G){N.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:"draglayer plotbg backplot angular-grid radial-grid frontplot angular-line radial-line angular-axis radial-axis".split(" "),
radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},{}],919:[function(b,N,G){function p(e,f,q,t){var w=t[0];t=t[1];var x=m(Math.sin(f)-Math.sin(e));e=m(Math.cos(f)-Math.cos(e));q=Math.tan(q);var z=m(1/q),B=x/e;f=t-B*w;z?x&&e?(x=f/(q-B),w=q*x):e?(x=t*z,w=t):(x=w,w*=q):x&&e?(x=0,w=f):e?(x=0,w=t):x=w=NaN;return[x,w]}function n(e,f,q,t){function w(C,v,y){return p(C,v,y,[e*Math.cos(C),e*Math.sin(C)])}var x=t.length,z=[];var B=r(t,function(C){return l(C,
[f,q])?d(C,f):Infinity});var A=w(t[B],t[g.mod(B-1,x)],f);z.push(A);for(A=0;A<x;B++,A++){var D=t[g.mod(B,x)];if(!l(D,[f,q]))break;z.push([e*Math.cos(D),e*Math.sin(D)])}B=r(t,function(C){return l(C,[f,q])?d(C,q):Infinity});t=w(t[B],t[g.mod(B+1,x)],q);z.push(t);z.push([0,0]);z.push(z[0].slice());return z}function k(e,f,q,t){if(g.isFullCircle([f,q])){f=t.length;q=Array(f+1);var w;for(w=0;w<f;w++){var x=t[w];q[w]=[e*Math.cos(x),e*Math.sin(x)]}q[w]=q[0].slice();e=q}else e=n(e,f,q,t);return e}function m(e){return 1E-10<
Math.abs(e)?e:0}function a(e,f,q){f=f||0;q=q||0;for(var t=e.length,w=Array(t),x=0;x<t;x++){var z=e[x];w[x]=[f+z[0],q-z[1]]}return w}var g=b("../../lib"),h=b("../../lib/polygon").tester,r=g.findIndexOfMin,l=g.isAngleInsideSector,c=g.angleDelta,d=g.angleDist;N.exports={isPtInsidePolygon:function(e,f,q,t,w){if(!l(f,t))return!1;if(q[0]<q[1]){var x=q[0];q=q[1]}else x=q[1],q=q[0];x=h(k(x,t[0],t[1],w));t=h(k(q,t[0],t[1],w));e=[e*Math.cos(f),e*Math.sin(f)];return t.contains(e)&&!x.contains(e)},findPolygonOffset:function(e,
f,q,t){var w=Infinity,x=Infinity;e=k(e,f,q,t);for(f=0;f<e.length;f++)q=e[f],w=Math.min(w,q[0]),x=Math.min(x,-q[1]);return[w,x]},findEnclosingVertexAngles:function(e,f){var q=r(f,function(w){w=c(w,e);return 0<w?w:Infinity}),t=g.mod(q+1,f.length);return[f[q],f[t]]},findIntersectionXY:p,findXYatLength:function(e,f,q,t){var w=-f*q,x=f*f+1,z=2*(f*w-q);q=Math.sqrt(z*z-4*x*(w*w+q*q-e*e));e=(-z+q)/(2*x);x=(-z-q)/(2*x);return[[e,f*e+w+t],[x,f*x+w+t]]},clampTiny:m,pathPolygon:function(e,f,q,t,w,x){e=k(e,f,
q,t);return"M"+a(e,w,x).join("L")},pathPolygonAnnulus:function(e,f,q,t,w,x,z){if(e<f){var B=e;e=f}else B=f;B=a(k(B,q,t,w),x,z);return"M"+a(k(e,q,t,w),x,z).reverse().join("L")+"M"+B.join("L")}}},{"../../lib":803,"../../lib/polygon":815}],920:[function(b,N,G){var p=b("../get_data").getSubplotCalcData,n=b("../../lib").counterRegex,k=b("./polar"),m=b("./constants");G=m.attr;var a=m.name;n=n(a);m={};m[G]={valType:"subplotid",dflt:a,editType:"calc"};N.exports={attr:G,name:a,idRoot:a,idRegex:n,attrRegex:n,
attributes:m,layoutAttributes:b("./layout_attributes"),supplyLayoutDefaults:b("./layout_defaults"),plot:function(g){for(var h=g._fullLayout,r=g.calcdata,l=h._subplots[a],c=0;c<l.length;c++){var d=l[c],e=p(r,a,d),f=h[d]._subplot;f||(f=k(g,d),h[d]._subplot=f);f.plot(e,h,g._promises)}},clean:function(g,h,r,l){g=l._subplots[a]||[];r=l._has&&l._has("gl");var c=h._has&&h._has("gl");r=r&&!c;for(c=0;c<g.length;c++){var d=g[c],e=l[d]._subplot;if(!h[d]&&e){e.framework.remove();e.layers["radial-axis-title"].remove();
for(var f in e.clipPaths)e.clipPaths[f].remove()}r&&e._scene&&(e._scene.destroy(),e._scene=null)}},toSVG:b("../cartesian").toSVG}},{"../../lib":803,"../cartesian":868,"../get_data":891,"./constants":918,"./layout_attributes":921,"./layout_defaults":922,"./polar":923}],921:[function(b,N,G){G=b("../../components/color/attributes");var p=b("../cartesian/layout_attributes"),n=b("../domain").attributes,k=b("../../lib").extendFlat,m=b("../../plot_api/edit_types").overrideAll;b=m({color:p.color,showline:k({},
p.showline,{dflt:!0}),linecolor:p.linecolor,linewidth:p.linewidth,showgrid:k({},p.showgrid,{dflt:!0}),gridcolor:p.gridcolor,gridwidth:p.gridwidth},"plot","from-root");m=m({tickmode:p.tickmode,nticks:p.nticks,tick0:p.tick0,dtick:p.dtick,tickvals:p.tickvals,ticktext:p.ticktext,ticks:p.ticks,ticklen:p.ticklen,tickwidth:p.tickwidth,tickcolor:p.tickcolor,showticklabels:p.showticklabels,showtickprefix:p.showtickprefix,tickprefix:p.tickprefix,showticksuffix:p.showticksuffix,ticksuffix:p.ticksuffix,showexponent:p.showexponent,
exponentformat:p.exponentformat,minexponent:p.minexponent,separatethousands:p.separatethousands,tickfont:p.tickfont,tickangle:p.tickangle,tickformat:p.tickformat,tickformatstops:p.tickformatstops,layer:p.layer},"plot","from-root");var a={visible:k({},p.visible,{dflt:!0}),type:k({},p.type,{values:["-","linear","log","date","category"]}),autotypenumbers:p.autotypenumbers,autorange:k({},p.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",
editType:"calc"},range:k({},p.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:p.categoryorder,categoryarray:p.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:k({},p.title.text,{editType:"plot",dflt:""}),font:k({},p.title.font,{editType:"plot"}),editType:"plot"},
hoverformat:p.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:p._deprecated.title,titlefont:p._deprecated.titlefont}};k(a,b,m);p={visible:k({},p.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:p.autotypenumbers,categoryorder:p.categoryorder,categoryarray:p.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",
editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:p.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};k(p,b,m);N.exports={domain:n({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,
editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:G.background},radialaxis:a,angularaxis:p,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},{"../../components/color/attributes":665,"../../lib":803,"../../plot_api/edit_types":836,"../cartesian/layout_attributes":869,"../domain":882}],922:[function(b,N,G){function p(z,B,A,D){function C(ca,W){return A(J+"."+ca,W)}var v=A("bgcolor");
D.bgColor=m.combine(v,D.paper_bgcolor);v=A("sector");A("hole");for(var y=h(D.fullData,w.name,D.id),F=D.layoutOut,J,K=0;K<x.length;K++){J=x[K];k.isPlainObject(z[J])||(z[J]={});var O=z[J],I=a.newContainer(B,J);I._id=I._name=J;I._attr=D.id+"."+J;I._traceIndices=y.map(function(ca){return ca._expandedIndex});var L=w.axisName2dataArray[J],H=n(O,I,C,y,L,D);d(O,I,C,{axData:y,dataAttr:L});L=C("visible");t(I,B,F);C("uirevision",B.uirevision);if(L){var M=C("color");var Q=M===O.color?M:D.font.color}I._m=1;switch(J){case "radialaxis":var Z=
C("autorange",!I.isValidRange(O.range));O.autorange=Z;!Z||"linear"!==H&&"-"!==H||C("rangemode");"reversed"===Z&&(I._m=-1);C("range");I.cleanRange("range",{dfltRange:[0,1]});L&&(C("side"),C("angle",v[0]),C("title.text"),k.coerceFont(C,"title.font",{family:D.font.family,size:k.bigFont(D.font.size),color:Q}));break;case "angularaxis":if("date"===H){k.log("Polar plots do not support date angular axes yet.");for(H=0;H<y.length;H++)y[H].visible=!1;H=O.type=I.type="linear"}"linear"===H?C("thetaunit"):C("period");
Z=C("direction");C("rotation",{counterclockwise:0,clockwise:90}[Z])}L&&(r(O,I,C,I.type),c(O,I,C,I.type,{tickSuffixDflt:"degrees"===I.thetaunit?"":void 0}),l(O,I,C,{outerTicks:!0}),C("showticklabels")&&(k.coerceFont(C,"tickfont",{family:D.font.family,size:D.font.size,color:Q}),C("tickangle"),C("tickformat")),e(O,I,C,{dfltColor:M,bgColor:D.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:q[J]}),C("layer"));"category"!==H&&C("hoverformat");I._input=O}"category"===B.angularaxis.type&&
A("gridshape")}function n(z,B,A,D,C,v){v=A("autotypenumbers",v.autotypenumbersDflt);if("-"===A("type")){for(A=0;A<D.length;A++)if(D[A].visible){var y=D[A];break}y&&y[C]&&(B.type=f(y[C],"gregorian",{noMultiCategory:!0,autotypenumbers:v}));"-"===B.type?B.type="linear":z.type=B.type}return B.type}var k=b("../../lib"),m=b("../../components/color"),a=b("../../plot_api/plot_template"),g=b("../subplot_defaults"),h=b("../get_data").getSubplotData,r=b("../cartesian/tick_value_defaults"),l=b("../cartesian/tick_mark_defaults"),
c=b("../cartesian/tick_label_defaults"),d=b("../cartesian/category_order_defaults"),e=b("../cartesian/line_grid_defaults"),f=b("../cartesian/axis_autotype"),q=b("./layout_attributes"),t=b("./set_convert"),w=b("./constants"),x=w.axisNames;N.exports=function(z,B,A){g(z,B,A,{type:w.name,attributes:q,handleDefaults:p,font:B.font,autotypenumbersDflt:B.autotypenumbers,paper_bgcolor:B.paper_bgcolor,fullData:A,layoutOut:B})}},{"../../components/color":666,"../../lib":803,"../../plot_api/plot_template":843,
"../cartesian/axis_autotype":855,"../cartesian/category_order_defaults":859,"../cartesian/line_grid_defaults":871,"../cartesian/tick_label_defaults":876,"../cartesian/tick_mark_defaults":877,"../cartesian/tick_value_defaults":878,"../get_data":891,"../subplot_defaults":925,"./constants":918,"./layout_attributes":921,"./set_convert":924}],923:[function(b,N,G){function p(ca,W){this.id=W;this.gd=ca;this.radialAxisAngle=this.vangles=this._hasClipOnAxisFalse=null;this.traceHash={};this.layers={};this.clipPaths=
{};this.clipIds={};this.viewInitial={};ca=ca._fullLayout;this.clipIds.forTraces="clip"+ca._uid+W+"-for-traces";this.clipPaths.forTraces=ca._clips.append("clipPath").attr("id",this.clipIds.forTraces);this.clipPaths.forTraces.append("path");this.framework=ca._polarlayer.append("g").attr("class",W);this.angularTickLayout=this.radialTickLayout=null}function n(ca){var W=ca.ticks+String(ca.ticklen)+String(ca.showticklabels);"side"in ca&&(W+=ca.side);return W}function k(ca,W){var T=r.findIndexOfMin(W,function(U){return r.angleDist(ca,
U)});return W[T]}function m(ca,W,T){W?(ca.attr("display",null),ca.attr(T)):ca&&ca.attr("display","none");return ca}var a=b("@plotly/d3"),g=b("tinycolor2"),h=b("../../registry"),r=b("../../lib"),l=r.strRotate,c=r.strTranslate,d=b("../../components/color"),e=b("../../components/drawing"),f=b("../plots"),q=b("../../plots/cartesian/axes"),t=b("../cartesian/set_convert"),w=b("./set_convert"),x=b("../cartesian/autorange").doAutoRange,z=b("../cartesian/dragbox"),B=b("../../components/dragelement"),A=b("../../components/fx"),
D=b("../../components/titles"),C=b("../cartesian/select").prepSelect,v=b("../cartesian/select").selectOnClick,y=b("../cartesian/select").clearSelect,F=b("../../lib/setcursor"),J=b("../../lib/clear_gl_canvases"),K=b("../../plot_api/subroutines").redrawReglTraces,O=b("../../constants/alignment").MID_SHIFT,I=b("./constants"),L=b("./helpers"),H=r._,M=r.mod,Q=r.deg2rad,Z=r.rad2deg;b=p.prototype;N.exports=function(ca,W){return new p(ca,W)};b.plot=function(ca,W){var T=W[this.id];this._hasClipOnAxisFalse=
!1;for(var U=0;U<ca.length;U++)if(!1===ca[U][0].trace.cliponaxis){this._hasClipOnAxisFalse=!0;break}this.updateLayers(W,T);this.updateLayout(W,T);f.generalUpdatePerTraceModule(this.gd,this,ca,T);this.updateFx(W,T)};b.updateLayers=function(ca,W){var T=this.layers;ca=W.radialaxis;W=W.angularaxis;var U=I.layerNames,ha=U.indexOf("frontplot");U=U.slice(0,ha);W="below traces"===W.layer;ca="below traces"===ca.layer;W&&U.push("angular-line");ca&&U.push("radial-line");W&&U.push("angular-axis");ca&&U.push("radial-axis");
U.push("frontplot");W||U.push("angular-line");ca||U.push("radial-line");W||U.push("angular-axis");ca||U.push("radial-axis");ca=this.framework.selectAll(".polarsublayer").data(U,String);ca.enter().append("g").attr("class",function(Y){return"polarsublayer "+Y}).each(function(Y){var ba=T[Y]=a.select(this);switch(Y){case "frontplot":ba.append("g").classed("barlayer",!0);ba.append("g").classed("scatterlayer",!0);break;case "backplot":ba.append("g").classed("maplayer",!0);break;case "plotbg":T.bg=ba.append("path");
break;case "radial-grid":ba.style("fill","none");break;case "angular-grid":ba.style("fill","none");break;case "radial-line":ba.append("line").style("fill","none");break;case "angular-line":ba.append("path").style("fill","none")}});ca.order()};b.updateLayout=function(ca,W){var T=this.layers,U=ca._size,ha=W.radialaxis,Y=W.angularaxis,ba=W.domain.x,ja=W.domain.y;this.xOffset=U.l+U.w*ba[0];this.yOffset=U.t+U.h*(1-ja[1]);var ma=this.xLength=U.w*(ba[1]-ba[0]),ia=this.yLength=U.h*(ja[1]-ja[0]),oa=W.sector;
this.sectorInRad=oa.map(Q);var xa=oa[0];oa=oa[1]-xa;xa=M(xa,360);oa=xa+oa;var ra=Math.cos(Q(xa)),la=Math.sin(Q(xa)),ka=Math.cos(Q(oa)),na=Math.sin(Q(oa));xa=this.sectorBBox=[180>=xa&&180<=oa||180<xa&&540<=oa?-1:0<=ra&&0<=ka?0:Math.min(ra,ka),270>=xa&&270<=oa||270<xa&&630<=oa?-1:0<=la&&0<=na?0:Math.min(la,na),360<=oa?1:0>=ra&&0>=ka?0:Math.max(ra,ka),90>=xa&&90<=oa||90<xa&&450<=oa?1:0>=la&&0>=na?0:Math.max(la,na)];oa=xa[2]-xa[0];la=Math.abs((xa[3]-xa[1])/oa);ia/ma>la?(ra=ma,la*=ma,ma=(ia-la)/U.h/2,
ba=[ba[0],ba[1]],ja=[ja[0]+ma,ja[1]-ma]):(ra=ia/la,la=ia,ma=(ma-ra)/U.w/2,ba=[ba[0]+ma,ba[1]-ma],ja=[ja[0],ja[1]]);this.xLength2=ra;this.yLength2=la;this.xDomain2=ba;this.yDomain2=ja;ma=this.xOffset2=U.l+U.w*ba[0];ia=this.yOffset2=U.t+U.h*(1-ja[1]);ra=this.radius=ra/oa;la=this.innerRadius=W.hole*ra;oa=this.cx=ma-ra*xa[0];xa=this.cy=ia+ra*xa[3];ka=this.cxx=oa-ma;na=this.cyy=xa-ia;this.radialAxis=this.mockAxis(ca,W,ha,{_id:"x",side:{counterclockwise:"top",clockwise:"bottom"}[ha.side],_realSide:ha.side,
domain:[la/U.w,ra/U.w]});this.angularAxis=this.mockAxis(ca,W,Y,{side:"right",domain:[0,Math.PI],autorange:!1});this.doAutoRange(ca,W);this.updateAngularAxis(ca,W);this.updateRadialAxis(ca,W);this.updateRadialAxisTitle(ca,W);this.xaxis=this.mockCartesianAxis(ca,W,{_id:"x",domain:ba});this.yaxis=this.mockCartesianAxis(ca,W,{_id:"y",domain:ja});ca=this.pathSubplot();this.clipPaths.forTraces.select("path").attr("d",ca).attr("transform",c(ka,na));T.frontplot.attr("transform",c(ma,ia)).call(e.setClipUrl,
this._hasClipOnAxisFalse?null:this.clipIds.forTraces,this.gd);T.bg.attr("d",ca).attr("transform",c(oa,xa)).call(d.fill,W.bgcolor)};b.mockAxis=function(ca,W,T,U){T=r.extendFlat({},T,U);w(T,W,ca);return T};b.mockCartesianAxis=function(ca,W,T){var U=this,ha=T._id,Y=r.extendFlat({type:"linear"},T);t(Y,ca);var ba={x:[0,2],y:[1,3]};Y.setRange=function(){var ja=U.sectorBBox,ma=ba[ha],ia=U.radialAxis._rl;ia=(ia[1]-ia[0])/(1-W.hole);Y.range=[ja[ma[0]]*ia,ja[ma[1]]*ia]};Y.isPtWithinRange="x"===ha?function(ja){return U.isPtInside(ja)}:
function(){return!0};Y.setRange();Y.setScale();return Y};b.doAutoRange=function(ca,W){var T=this.gd;ca=this.radialAxis;W=W.radialaxis;ca.setScale();x(T,ca);T=ca.range;W.range=T.slice();W._input.range=T.slice();ca._rl=[ca.r2l(T[0],null,"gregorian"),ca.r2l(T[1],null,"gregorian")]};b.updateRadialAxis=function(ca,W){var T=this,U=T.gd;ca=T.layers;var ha=T.radius,Y=T.innerRadius,ba=T.cx,ja=T.cy,ma=W.radialaxis,ia=M(W.sector[0],360),oa=T.radialAxis;W=Y<ha;T.fillViewInitialKey("radialaxis.angle",ma.angle);
T.fillViewInitialKey("radialaxis.range",oa.range.slice());oa.setGeometry();"auto"===oa.tickangle&&90<ia&&270>=ia&&(oa.tickangle=180);ia=function(na){return c(oa.l2p(na.x)+Y,0)};var xa=function(na){return T.pathArc(oa.r2p(na.x)+Y)},ra=n(ma);T.radialTickLayout!==ra&&(ca["radial-axis"].selectAll(".xtick").remove(),T.radialTickLayout=ra);if(W){oa.setScale();ra=q.calcTicks(oa);var la=q.clipEnds(oa,ra),ka=q.getTickSigns(oa)[2];q.drawTicks(U,oa,{vals:ra,layer:ca["radial-axis"],path:q.makeTickPath(oa,0,ka),
transFn:ia,crisp:!1});q.drawGrid(U,oa,{vals:la,layer:ca["radial-grid"],path:xa,transFn:r.noop,crisp:!1});q.drawLabels(U,oa,{vals:ra,layer:ca["radial-axis"],transFn:ia,labelFns:q.makeLabelFns(oa,0)})}U=T.radialAxisAngle=T.vangles?Z(k(Q(ma.angle),T.vangles)):ma.angle;ba=c(ba,ja);ja=ba+l(-U);m(ca["radial-axis"],W&&(ma.showticklabels||ma.ticks),{transform:ja});m(ca["radial-grid"],W&&ma.showgrid,{transform:ba});m(ca["radial-line"].select("line"),W&&ma.showline,{x1:Y,y1:0,x2:ha,y2:0,transform:ja}).attr("stroke-width",
ma.linewidth).call(d.stroke,ma.linecolor)};b.updateRadialAxisTitle=function(ca,W,T){ca=this.gd;var U=this.radius,ha=this.cx,Y=this.cy;W=W.radialaxis;var ba=this.id+"title";T=void 0!==T?T:this.radialAxisAngle;var ja=Q(T),ma=Math.cos(ja);ja=Math.sin(ja);var ia=0;if(W.title){ia=e.bBox(this.layers["radial-axis"].node()).height;var oa=W.title.font.size;ia="counterclockwise"===W.side?-ia-.4*oa:ia+.8*oa}this.layers["radial-axis-title"]=D.draw(ca,ba,{propContainer:W,propName:this.id+".radialaxis.title",placeholder:H(ca,
"Click to enter radial axis title"),attributes:{x:ha+U/2*ma+ia*ja,y:Y-U/2*ja+ia*ma,"text-anchor":"middle"},transform:{rotate:-T}})};b.updateAngularAxis=function(ca,W){var T=this;ca=T.gd;var U=T.layers,ha=T.radius,Y=T.innerRadius,ba=T.cx,ja=T.cy,ma=W.angularaxis,ia=T.angularAxis;T.fillViewInitialKey("angularaxis.rotation",ma.rotation);ia.setGeometry();ia.setScale();var oa=function(za){return ia.t2g(za.x)};"linear"===ia.type&&"radians"===ia.thetaunit&&(ia.tick0=Z(ia.tick0),ia.dtick=Z(ia.dtick));var xa=
function(za){return c(ba+ha*Math.cos(za),ja-ha*Math.sin(za))},ra=function(za){return xa(oa(za))},la=function(za){za=oa(za);return xa(za)+l(-Z(za))},ka=function(za){var Ia=oa(za);za=Math.cos(Ia);Ia=Math.sin(Ia);return"M"+[ba+Y*za,ja-Y*Ia]+"L"+[ba+ha*za,ja-ha*Ia]},na=q.makeLabelFns(ia,0).labelStandoff,qa={xFn:function(za){za=oa(za);return Math.cos(za)*na},yFn:function(za){var Ia=oa(za);return-Math.sin(Ia)*(na+za.fontSize*(0<Math.sin(Ia)?.2:1))+Math.abs(Math.cos(Ia))*za.fontSize*O},anchorFn:function(za){za=
oa(za);za=Math.cos(za);return.1>Math.abs(za)?"middle":0<za?"start":"end"},heightFn:function(za,Ia,Xa){za=oa(za);return-.5*(1+Math.sin(za))*Xa}},ta=n(ma);T.angularTickLayout!==ta&&(U["angular-axis"].selectAll("."+ia._id+"tick").remove(),T.angularTickLayout=ta);ta=q.calcTicks(ia);"linear"===W.gridshape?(W=ta.map(oa),0>r.angleDelta(W[0],W[1])&&(W=W.slice().reverse())):W=null;T.vangles=W;"category"===ia.type&&(ta=ta.filter(function(za){return r.isAngleInsideSector(oa(za),T.sectorInRad)}));ia.visible&&
(W="inside"===ia.ticks?-1:1,q.drawTicks(ca,ia,{vals:ta,layer:U["angular-axis"],path:"M"+(ia.linewidth||1)/2*W+",0h"+W*ia.ticklen,transFn:la,crisp:!1}),q.drawGrid(ca,ia,{vals:ta,layer:U["angular-grid"],path:ka,transFn:r.noop,crisp:!1}),q.drawLabels(ca,ia,{vals:ta,layer:U["angular-axis"],repositionOnUpdate:!0,transFn:ra,labelFns:qa}));m(U["angular-line"].select("path"),ma.showline,{d:T.pathSubplot(),transform:c(ba,ja)}).attr("stroke-width",ma.linewidth).call(d.stroke,ma.linecolor)};b.updateFx=function(ca,
W){this.gd._context.staticPlot||(this.updateAngularDrag(ca),this.updateRadialDrag(ca,W,0),this.updateRadialDrag(ca,W,1),this.updateMainDrag(ca))};b.updateMainDrag=function(ca){function W(Rb,xc){return Math.sqrt(Rb*Rb+xc*xc)}function T(Rb,xc){return[Rb*Math.cos(xc),Rb*Math.sin(-xc)]}function U(Rb,xc){if(0===Rb)return la.pathSector(2*rb);var Ic=Ab/Rb,Ja=xc-Ic;xc+=Ic;Ic=Math.max(0,Math.min(Rb,za));Rb=Ic-rb;Ic+=rb;return"M"+T(Rb,Ja)+"A"+[Rb,Rb]+" 0,0,0 "+T(Rb,xc)+"L"+T(Ic,xc)+"A"+[Ic,Ic]+" 0,0,1 "+T(Ic,
Ja)+"Z"}function ha(Rb,xc,Ic){if(0===Rb)return la.pathSector(2*rb);xc=T(Rb,xc);Ic=T(Rb,Ic);Rb=Bb((xc[0]+Ic[0])/2);Ic=Bb((xc[1]+Ic[1])/2);if(Rb&&Ic){xc=Ic/Rb;var Ja=-1/xc;Rb=ub(rb,xc,Rb,Ic);xc=ub(Ab,Ja,Rb[0][0],Rb[0][1]);Rb=ub(Ab,Ja,Rb[1][0],Rb[1][1])}else{if(Ic){Ja=Ab;var Pa=rb}else Ja=rb,Pa=Ab;xc=[[Rb-Ja,Ic-Pa],[Rb+Ja,Ic-Pa]];Rb=[[Rb-Ja,Ic+Pa],[Rb+Ja,Ic+Pa]]}return"M"+xc.join("L")+"L"+Rb.reverse().join("L")+"Z"}function Y(Rb,xc){xc=Math.max(Math.min(xc,za),Ia);Rb<ta?Rb=0:za-Rb<ta?Rb=za:xc<ta?xc=
0:za-xc<ta&&(xc=za);if(Math.abs(xc-Rb)>qa)return Rb<xc?(bb=Rb,cb=xc):(bb=xc,cb=Rb),!0;cb=bb=null;return!1}function ba(Rb,xc){Rb=Rb||Eb;xc=xc||"M0,0Z";pb.attr("d",Rb);Db.attr("d",xc);z.transitionZoombox(pb,Db,Pb,fc);Pb=!0;Rb={};xa(Rb);ka.emit("plotly_relayouting",Rb)}function ja(Rb,xc){Rb*=Ma;xc*=La;Rb=Ka+Rb;var Ic=Ta+xc;xc=W(Ka-gb,Ta-sb);Rb=Math.min(W(Rb-gb,Ic-sb),za);Ic=Math.atan2(sb-Ta,Ka-gb);if(Y(xc,Rb)){var Ja=Eb+la.pathSector(cb);bb&&(Ja+=la.pathSector(bb));var Pa=U(bb,Ic)+U(cb,Ic)}ba(Ja,Pa)}
function ma(Rb,xc,Ic,Ja){Rb=L.findIntersectionXY(Ic,Ja,Ic,[Rb-gb,sb-xc]);return W(Rb[0],Rb[1])}function ia(Rb,xc){Rb=Ka+Rb;var Ic=Ta+xc,Ja=Math.atan2(sb-Ic,Rb-gb);xc=wb(Math.atan2(sb-Ta,Ka-gb),vb);var Pa=wb(Ja,vb);Ja=ma(Ka,Ta,xc[0],xc[1]);Rb=Math.min(ma(Rb,Ic,Pa[0],Pa[1]),za);if(Y(Ja,Rb)){var db=Eb+la.pathSector(cb);bb&&(db+=la.pathSector(bb));var Jb=[ha(bb,xc[0],xc[1]),ha(cb,xc[0],xc[1])].join(" ")}ba(db,Jb)}function oa(){z.removeZoombox(ka);if(null!==bb&&null!==cb){var Rb={};xa(Rb);z.showDoubleClickNotifier(ka);
h.call("_guiRelayout",ka,Rb)}}function xa(Rb){var xc=qb._rl,Ic=(xc[1]-xc[0])/(1-Ia/za)/za;Rb[la.id+".radialaxis.range"]=[xc[0]+(bb-Ia)*Ic,xc[0]+(cb-Ia)*Ic]}function ra(Rb,xc){var Ic=ka._fullLayout.clickmode;z.removeZoombox(ka);if(2===Rb){var Ja={},Pa;for(Pa in la.viewInitial)Ja[la.id+"."+Pa]=la.viewInitial[Pa];ka.emit("plotly_doubleclick",null);h.call("_guiRelayout",ka,Ja)}-1<Ic.indexOf("select")&&1===Rb&&v(xc,ka,[la.xaxis],[la.yaxis],la.id,Aa);-1<Ic.indexOf("event")&&A.click(ka,xc,la.id)}var la=
this,ka=la.gd,na=ca._zoomlayer,qa=I.MINZOOM,ta=I.OFFEDGE,za=la.radius,Ia=la.innerRadius,Xa=la.cx,$a=la.cy,gb=la.cxx,sb=la.cyy,jb=la.sectorInRad,vb=la.vangles,qb=la.radialAxis,Bb=L.clampTiny,ub=L.findXYatLength,wb=L.findEnclosingVertexAngles,rb=I.cornerHalfWidth,Ab=I.cornerLen/2,Ma,La,ya=z.makeDragger(la.layers,"path","maindrag","crosshair");a.select(ya).attr("d",la.pathSubplot()).attr("transform",c(Xa,$a));var Aa={element:ya,gd:ka,subplot:la.id,plotinfo:{id:la.id,xaxis:la.xaxis,yaxis:la.yaxis},xaxes:[la.xaxis],
yaxes:[la.yaxis]},Ka,Ta,bb,cb,Eb,Pb,fc,pb,Db;Aa.prepFn=function(Rb,xc,Ic){var Ja=ka._fullLayout.dragmode,Pa=ya.getBoundingClientRect();ka._fullLayout._calcInverseTransform(ka);var db=ka._fullLayout._invTransform;Ma=ka._fullLayout._invScaleX;La=ka._fullLayout._invScaleY;Pa=r.apply3DTransform(db)(xc-Pa.left,Ic-Pa.top);Ka=Pa[0];Ta=Pa[1];vb&&(Pa=L.findPolygonOffset(za,jb[0],jb[1],vb),Ka+=gb+Pa[0],Ta+=sb+Pa[1]);switch(Ja){case "zoom":Aa.moveFn=vb?ia:ja;Aa.clickFn=ra;Aa.doneFn=oa;cb=bb=null;Eb=la.pathSubplot();
Pb=!1;fc=g(ka._fullLayout[la.id].bgcolor).getLuminance();pb=z.makeZoombox(na,fc,Xa,$a,Eb);pb.attr("fill-rule","evenodd");Db=z.makeCorners(na,Xa,$a);y(ka);break;case "select":case "lasso":C(Rb,xc,Ic,Aa,Ja)}};ya.onmousemove=function(Rb){A.hover(ka,Rb,la.id);ka._fullLayout._lasthover=ya;ka._fullLayout._hoversubplot=la.id};ya.onmouseout=function(Rb){ka._dragging||B.unhover(ka,Rb)};B.init(Aa)};b.updateRadialDrag=function(ca,W,T){function U(ub,wb){vb?vb(ub,wb):(ub=[ub,-wb],ub=Math.abs(r.dot(ub,[Math.cos(qa),
Math.sin(qa)])/Math.sqrt(r.dot(ub,ub))),isNaN(ub)||(vb=.5>ub?Y:ba));ub={};null!==qb?ub[ja.id+".radialaxis.angle"]=qb:null!==Bb&&(ub[ja.id+".radialaxis.range["+T+"]"]=Bb);ma.emit("plotly_relayouting",ub)}function ha(){null!==qb?h.call("_guiRelayout",ma,ja.id+".radialaxis.angle",qb):null!==Bb&&h.call("_guiRelayout",ma,ja.id+".radialaxis.range["+T+"]",Bb)}function Y(ub,wb){0!==T&&(qb=Math.atan2(ra-(sb+wb),gb+ub-xa),ja.vangles&&(qb=k(qb,ja.vangles)),qb=Z(qb),ub=c(xa,ra)+l(-qb),ia["radial-axis"].attr("transform",
ub),ia["radial-line"].select("line").attr("transform",ub),ub=ja.gd._fullLayout,ja.updateRadialAxisTitle(ub,ub[ja.id],qb))}function ba(ub,wb){ub=r.dot([ub,-wb],[Math.cos(qa),Math.sin(qa)]);Bb=Xa-$a*ub;if(0<$a!==(T?Bb>za:Bb<Ia))Bb=null;else{wb=ma._fullLayout;ub=wb[ja.id];la.range[T]=Bb;la._rl[T]=Bb;ja.updateRadialAxis(wb,ub);ja.xaxis.setRange();ja.xaxis.setScale();ja.yaxis.setRange();ja.yaxis.setScale();wb=!1;for(var rb in ja.traceHash){var Ab=ja.traceHash[rb],Ma=r.filterVisible(Ab);Ab[0][0].trace._module.plot(ma,
ja,Ma,ub);h.traceIs(rb,"gl")&&Ma.length&&(wb=!0)}wb&&(J(ma),K(ma))}}var ja=this,ma=ja.gd,ia=ja.layers;ca=ja.radius;var oa=ja.innerRadius,xa=ja.cx,ra=ja.cy,la=ja.radialAxis,ka=I.radialDragBoxSize,na=ka/2;if(la.visible){var qa=Q(ja.radialAxisAngle),ta=la._rl,za=ta[0],Ia=ta[1],Xa=ta[T],$a=.75*(ta[1]-ta[0])/(1-W.hole)/ca;if(T){var gb=xa+(ca+na)*Math.cos(qa);var sb=ra-(ca+na)*Math.sin(qa);W="radialdrag"}else gb=xa+(oa-na)*Math.cos(qa),sb=ra-(oa-na)*Math.sin(qa),W="radialdrag-inner";W=z.makeRectDragger(ia,
W,"crosshair",-na,-na,ka,ka);var jb={element:W,gd:ma};m(a.select(W),la.visible&&oa<ca,{transform:c(gb,sb)});var vb,qb,Bb;jb.prepFn=function(){Bb=qb=vb=null;jb.moveFn=U;jb.doneFn=ha;y(ma)};jb.clampFn=function(ub,wb){Math.sqrt(ub*ub+wb*wb)<I.MINDRAG&&(wb=ub=0);return[ub,wb]};B.init(jb)}};b.updateAngularDrag=function(ca){function W(vb,qb){var Bb=ha.gd._fullLayout,ub=Bb[ha.id],wb=Z(Math.atan2(ra+la-(Xa+qb*ca._invScaleY),Ia+vb*ca._invScaleX-xa-la)-jb);gb=$a+wb;ba.frontplot.attr("transform",c(ha.xOffset2,
ha.yOffset2)+l([-wb,xa,ra]));ha.vangles?(sb=ha.radialAxisAngle+wb,vb=c(ia,oa)+l(-wb),qb=c(ia,oa)+l(-sb),ba.bg.attr("transform",vb),ba["radial-grid"].attr("transform",vb),ba["radial-axis"].attr("transform",qb),ba["radial-line"].select("line").attr("transform",qb),ha.updateRadialAxisTitle(Bb,ub,sb)):ha.clipPaths.forTraces.select("path").attr("transform",c(xa,ra)+l(wb));ta.each(function(){var Ab=a.select(this),Ma=e.getTranslate(Ab);Ab.attr("transform",c(Ma.x,Ma.y)+l([wb]))});za.each(function(){var Ab=
a.select(this),Ma=Ab.select("text"),La=e.getTranslate(Ab);Ab.attr("transform",l([wb,Ma.attr("x"),Ma.attr("y")])+c(La.x,La.y))});ma.rotation=r.modHalf(gb,360);ha.updateAngularAxis(Bb,ub);ha._hasClipOnAxisFalse&&!r.isFullCircle(ha.sectorInRad)&&qa.call(e.hideOutsideRangePoints,ha);Bb=!1;for(var rb in ha.traceHash)h.traceIs(rb,"gl")&&(vb=ha.traceHash[rb],qb=r.filterVisible(vb),vb[0][0].trace._module.plot(Y,ha,qb,ub),qb.length&&(Bb=!0));Bb&&(J(Y),K(Y));ub={};T(ub);Y.emit("plotly_relayouting",ub)}function T(vb){vb[ha.id+
".angularaxis.rotation"]=gb;ha.vangles&&(vb[ha.id+".radialaxis.angle"]=sb)}function U(){za.select("text").attr("transform",null);var vb={};T(vb);h.call("_guiRelayout",Y,vb)}var ha=this,Y=ha.gd,ba=ha.layers,ja=ha.radius,ma=ha.angularAxis,ia=ha.cx,oa=ha.cy,xa=ha.cxx,ra=ha.cyy,la=I.angularDragBoxSize,ka=z.makeDragger(ba,"path","angulardrag","move"),na={element:ka,gd:Y};a.select(ka).attr("d",ha.pathAnnulus(ja,ja+la)).attr("transform",c(ia,oa)).call(F,"move");var qa=ba.frontplot.select(".scatterlayer").selectAll(".trace"),
ta=qa.selectAll(".point"),za=qa.selectAll(".textpoint"),Ia,Xa,$a,gb,sb,jb;na.prepFn=function(vb,qb,Bb){$a=ca[ha.id].angularaxis.rotation;vb=ka.getBoundingClientRect();Ia=qb-vb.left;Xa=Bb-vb.top;Y._fullLayout._calcInverseTransform(Y);qb=r.apply3DTransform(ca._invTransform)(Ia,Xa);Ia=qb[0];Xa=qb[1];jb=Math.atan2(ra+la-Xa,Ia-xa-la);na.moveFn=W;na.doneFn=U;y(Y)};ha.vangles&&!r.isFullCircle(ha.sectorInRad)&&(na.prepFn=r.noop,F(a.select(ka),null));B.init(na)};b.isPtInside=function(ca){var W=this.sectorInRad,
T=this.vangles,U=this.angularAxis.c2g(ca.theta),ha=this.radialAxis;ca=ha.c2l(ca.r);return(T?L.isPtInsidePolygon:r.isPtInsideSector)(ca,U,ha._rl,W,T)};b.pathArc=function(ca){var W=this.sectorInRad,T=this.vangles;return(T?L.pathPolygon:r.pathArc)(ca,W[0],W[1],T)};b.pathSector=function(ca){var W=this.sectorInRad,T=this.vangles;return(T?L.pathPolygon:r.pathSector)(ca,W[0],W[1],T)};b.pathAnnulus=function(ca,W){var T=this.sectorInRad,U=this.vangles;return(U?L.pathPolygonAnnulus:r.pathAnnulus)(ca,W,T[0],
T[1],U)};b.pathSubplot=function(){var ca=this.innerRadius,W=this.radius;return ca?this.pathAnnulus(ca,W):this.pathSector(W)};b.fillViewInitialKey=function(ca,W){ca in this.viewInitial||(this.viewInitial[ca]=W)}},{"../../components/color":666,"../../components/dragelement":685,"../../components/drawing":688,"../../components/fx":706,"../../components/titles":764,"../../constants/alignment":771,"../../lib":803,"../../lib/clear_gl_canvases":787,"../../lib/setcursor":824,"../../plot_api/subroutines":844,
"../../plots/cartesian/axes":854,"../../registry":931,"../cartesian/autorange":853,"../cartesian/dragbox":863,"../cartesian/select":874,"../cartesian/set_convert":875,"../plots":917,"./constants":918,"./helpers":919,"./set_convert":924,"@plotly/d3":58,tinycolor2:598}],924:[function(b,N,G){function p(h,r){var l=r._subplot;h.setGeometry=function(){var c=h._rl[0],d=h._rl[1],e=l.innerRadius,f=(l.radius-e)/(d-c),q=e/f,t=c>d?function(w){return 0>=w}:function(w){return 0<=w};h.c2g=function(w){w=h.c2l(w)-
c;return(t(w)?w:0)+q};h.g2c=function(w){return h.l2c(w+c-q)};h.g2p=function(w){return w*f};h.c2p=function(w){return h.g2p(h.c2g(w))}}}function n(h,r){var l=h.type;if("linear"===l){var c=h.d2c,d=h.c2d;h.d2c=function(e,f){e=c(e);return"degrees"===f?a(e):e};h.c2d=function(e,f){e="degrees"===f?g(e):e;return d(e)}}h.makeCalcdata=function(e,f){var q=e[f],t=e._length,w;if(q){if(k.isTypedArray(q)&&"linear"===l){if(t===q.length)return q;if(q.subarray)return q.subarray(0,t)}f=Array(t);for(w=0;w<t;w++)f[w]=
h.d2c(q[w],e.thetaunit)}else for(w=f+"0",f="d"+f,q=(w in e)?h.d2c(e[w],e.thetaunit):0,e=e[f]?h.d2c(e[f],e.thetaunit):(h.period||2*Math.PI)/t,f=Array(t),w=0;w<t;w++)f[w]=q+w*e;return f};h.setGeometry=function(){var e=r.sector,f=e.map(a),q={clockwise:-1,counterclockwise:1}[h.direction],t=a(h.rotation),w=function(C){return(C-t)/q},x;switch(l){case "linear":var z=x=k.identity;var B=a;var A=g;h.range=k.isFullCircle(f)?[e[0],e[0]+360]:f.map(w).map(g);break;case "category":e=h._categories.length;var D=h.period?
Math.max(h.period,e):e;0===D&&(D=1);z=B=function(C){return 2*C*Math.PI/D};x=A=function(C){return C*D/Math.PI/2};h.range=[0,D]}h.c2g=function(C){return q*z(C)+t};h.g2c=function(C){return x(w(C))};h.t2g=function(C){return q*B(C)+t};h.g2t=function(C){return A(w(C))}}}var k=b("../../lib"),m=b("../cartesian/set_convert"),a=k.deg2rad,g=k.rad2deg;N.exports=function(h,r,l){m(h,l);switch(h._id){case "x":case "radialaxis":p(h,r);break;case "angularaxis":n(h,r)}}},{"../../lib":803,"../cartesian/set_convert":875}],
925:[function(b,N,G){var p=b("../lib"),n=b("../plot_api/plot_template"),k=b("./domain").defaults;N.exports=function(m,a,g,h){function r(B,A){return p.coerce(q,t,l,B,A)}var l=h.attributes;g=h.handleDefaults;for(var c=h.partition||"x",d=a._subplots[h.type],e=d.length,f=e&&d[0].replace(/\d+$/,""),q,t,w=0;w<e;w++){var x=d[w];q=m[x]?m[x]:m[x]={};t=n.newContainer(a,x,f);r("uirevision",a.uirevision);var z={};z[c]=[w/e,(w+1)/e];k(t,a,r,z);h.id=x;g(q,t,r,h)}}},{"../lib":803,"../plot_api/plot_template":843,
"./domain":882}],926:[function(b,N,G){function p(n){var k=n.description?" "+n.description:"";n=n.keys||[];if(0<n.length){k=[];for(var m=0;m<n.length;m++)k[m]="`"+n[m]+"`";k=1===n.length?"variable "+k[0]:"variables "+k.slice(0,-1).join(", ")+" and "+k.slice(-1)+"."}return k}b("../constants/docs");G.hovertemplateAttrs=function(n,k){n=n||{};k=k||{};p(k);k={valType:"string",dflt:"",editType:n.editType||"none"};!1!==n.arrayOk&&(k.arrayOk=!0);return k};G.texttemplateAttrs=function(n,k){n=n||{};k=k||{};
p(k);k={valType:"string",dflt:"",editType:n.editType||"calc"};!1!==n.arrayOk&&(k.arrayOk=!0);return k}},{"../constants/docs":774}],927:[function(b,N,G){var p=b("./ternary"),n=b("../../plots/get_data").getSubplotCalcData;N=b("../../lib").counterRegex;G.name="ternary";var k=G.attr="subplot";G.idRoot="ternary";G.idRegex=G.attrRegex=N("ternary");(G.attributes={})[k]={valType:"subplotid",dflt:"ternary",editType:"calc"};G.layoutAttributes=b("./layout_attributes");G.supplyLayoutDefaults=b("./layout_defaults");
G.plot=function(m){for(var a=m._fullLayout,g=m.calcdata,h=a._subplots.ternary,r=0;r<h.length;r++){var l=h[r],c=n(g,"ternary",l),d=a[l]._subplot;d||(d=new p({id:l,graphDiv:m,container:a._ternarylayer.node()},a),a[l]._subplot=d);d.plot(c,a,m._promises)}};G.clean=function(m,a,g,h){m=h._subplots.ternary||[];for(g=0;g<m.length;g++){var r=m[g],l=h[r]._subplot;!a[r]&&l&&(l.plotContainer.remove(),l.clipDef.remove(),l.clipDefRelative.remove(),l.layers["a-title"].remove(),l.layers["b-title"].remove(),l.layers["c-title"].remove())}}},
{"../../lib":803,"../../plots/get_data":891,"./layout_attributes":928,"./layout_defaults":929,"./ternary":930}],928:[function(b,N,G){G=b("../../components/color/attributes");var p=b("../domain").attributes,n=b("../cartesian/layout_attributes"),k=b("../../plot_api/edit_types").overrideAll;b=b("../../lib/extend").extendFlat;b={title:{text:n.title.text,font:n.title.font},color:n.color,tickmode:n.tickmode,nticks:b({},n.nticks,{dflt:6,min:1}),tick0:n.tick0,dtick:n.dtick,tickvals:n.tickvals,ticktext:n.ticktext,
ticks:n.ticks,ticklen:n.ticklen,tickwidth:n.tickwidth,tickcolor:n.tickcolor,showticklabels:n.showticklabels,showtickprefix:n.showtickprefix,tickprefix:n.tickprefix,showticksuffix:n.showticksuffix,ticksuffix:n.ticksuffix,showexponent:n.showexponent,exponentformat:n.exponentformat,minexponent:n.minexponent,separatethousands:n.separatethousands,tickfont:n.tickfont,tickangle:n.tickangle,tickformat:n.tickformat,tickformatstops:n.tickformatstops,hoverformat:n.hoverformat,showline:b({},n.showline,{dflt:!0}),
linecolor:n.linecolor,linewidth:n.linewidth,showgrid:b({},n.showgrid,{dflt:!0}),gridcolor:n.gridcolor,gridwidth:n.gridwidth,layer:n.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:n._deprecated.title,titlefont:n._deprecated.titlefont}};N=N.exports=k({domain:p({name:"ternary"}),bgcolor:{valType:"color",dflt:G.background},sum:{valType:"number",dflt:1,min:0},aaxis:b,baxis:b,caxis:b},"plot","from-root");N.uirevision={valType:"any",editType:"none"};N.aaxis.uirevision=N.baxis.uirevision=N.caxis.uirevision=
{valType:"any",editType:"none"}},{"../../components/color/attributes":665,"../../lib/extend":793,"../../plot_api/edit_types":836,"../cartesian/layout_attributes":869,"../domain":882}],929:[function(b,N,G){function p(f,q,t,w){var x=t("bgcolor");t=t("sum");w.bgColor=k.combine(x,w.paper_bgcolor);for(var z,B,A=0;A<e.length;A++)x=e[A],z=f[x]||{},B=m.newContainer(q,x),B._name=x,n(z,B,w,q);w=q.aaxis;x=q.baxis;q=q.caxis;w.min+x.min+q.min>=t&&(w.min=0,x.min=0,q.min=0,f.aaxis&&delete f.aaxis.min,f.baxis&&delete f.baxis.min,
f.caxis&&delete f.caxis.min)}function n(f,q,t,w){function x(v,y){return a.coerce(f,q,z,v,y)}var z=d[q._name];x("uirevision",w.uirevision);q.type="linear";w=x("color");var B=w!==z.color.dflt?w:t.font.color,A=q._name.charAt(0).toUpperCase(),D="Component "+A,C=x("title.text",D);q._hovertitle=C===D?C:A;a.coerceFont(x,"title.font",{family:t.font.family,size:a.bigFont(t.font.size),color:B});x("min");l(f,q,x,"linear");h(f,q,x,"linear",{});r(f,q,x,{outerTicks:!0});x("showticklabels")&&(a.coerceFont(x,"tickfont",
{family:t.font.family,size:t.font.size,color:B}),x("tickangle"),x("tickformat"));c(f,q,x,{dfltColor:w,bgColor:t.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:z});x("hoverformat");x("layer")}var k=b("../../components/color"),m=b("../../plot_api/plot_template"),a=b("../../lib"),g=b("../subplot_defaults"),h=b("../cartesian/tick_label_defaults"),r=b("../cartesian/tick_mark_defaults"),l=b("../cartesian/tick_value_defaults"),c=b("../cartesian/line_grid_defaults"),d=b("./layout_attributes"),
e=["aaxis","baxis","caxis"];N.exports=function(f,q,t){g(f,q,t,{type:"ternary",attributes:d,handleDefaults:p,font:q.font,paper_bgcolor:q.paper_bgcolor})}},{"../../components/color":666,"../../lib":803,"../../plot_api/plot_template":843,"../cartesian/line_grid_defaults":871,"../cartesian/tick_label_defaults":876,"../cartesian/tick_mark_defaults":877,"../cartesian/tick_value_defaults":878,"../subplot_defaults":925,"./layout_attributes":928}],930:[function(b,N,G){function p(L,H){this.id=L.id;this.graphDiv=
L.graphDiv;this.init(H);this.makeFramework(H);this.cTickLayout=this.bTickLayout=this.aTickLayout=null}function n(L){k.select(L).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}var k=b("@plotly/d3"),m=b("tinycolor2"),a=b("../../registry"),g=b("../../lib"),h=g.strTranslate,r=g._,l=b("../../components/color"),c=b("../../components/drawing"),d=b("../cartesian/set_convert"),e=b("../../lib/extend").extendFlat,f=b("../plots"),q=b("../cartesian/axes"),t=b("../../components/dragelement"),
w=b("../../components/fx");G=b("../../components/dragelement/helpers");var x=G.freeMode,z=G.rectMode,B=b("../../components/titles"),A=b("../cartesian/select").prepSelect,D=b("../cartesian/select").selectOnClick,C=b("../cartesian/select").clearSelect,v=b("../cartesian/select").clearSelectionsCache,y=b("../cartesian/constants");N.exports=p;b=p.prototype;b.init=function(L){this.container=L._ternarylayer;this.defs=L._defs;this.layoutId=L._uid;this.traceHash={};this.layers={}};b.plot=function(L,H){var M=
H[this.id];H=H._size;this._hasClipOnAxisFalse=!1;for(var Q=0;Q<L.length;Q++)if(!1===L[Q][0].trace.cliponaxis){this._hasClipOnAxisFalse=!0;break}this.updateLayers(M);this.adjustLayout(M,H);f.generalUpdatePerTraceModule(this.graphDiv,this,L,M);this.layers.plotbg.select("path").call(l.fill,M.bgcolor)};b.makeFramework=function(L){var H=this.graphDiv,M=L[this.id],Q=this.clipId="clip"+this.layoutId+this.id,Z=this.clipIdRelative="clip-relative"+this.layoutId+this.id;this.clipDef=g.ensureSingleById(L._clips,
"clipPath",Q,function(ca){ca.append("path").attr("d","M0,0Z")});this.clipDefRelative=g.ensureSingleById(L._clips,"clipPath",Z,function(ca){ca.append("path").attr("d","M0,0Z")});this.plotContainer=g.ensureSingle(this.container,"g",this.id);this.updateLayers(M);c.setClipUrl(this.layers.backplot,Q,H);c.setClipUrl(this.layers.grids,Q,H)};b.updateLayers=function(L){var H=this.layers,M=["draglayer","plotbg","backplot","grids"];"below traces"===L.aaxis.layer&&M.push("aaxis","aline");"below traces"===L.baxis.layer&&
M.push("baxis","bline");"below traces"===L.caxis.layer&&M.push("caxis","cline");M.push("frontplot");"above traces"===L.aaxis.layer&&M.push("aaxis","aline");"above traces"===L.baxis.layer&&M.push("baxis","bline");"above traces"===L.caxis.layer&&M.push("caxis","cline");L=this.plotContainer.selectAll("g.toplevel").data(M,String);var Q=["agrid","bgrid","cgrid"];L.enter().append("g").attr("class",function(Z){return"toplevel "+Z}).each(function(Z){var ca=k.select(this);H[Z]=ca;"frontplot"===Z?ca.append("g").classed("scatterlayer",
!0):"backplot"===Z?ca.append("g").classed("maplayer",!0):"plotbg"===Z?ca.append("path").attr("d","M0,0Z"):"aline"===Z||"bline"===Z||"cline"===Z?ca.append("path"):"grids"===Z&&Q.forEach(function(W){H[W]=ca.append("g").classed("grid "+W,!0)})});L.order()};var F=Math.sqrt(4/3);b.adjustLayout=function(L,H){var M=this,Q=L.domain,Z=(Q.x[0]+Q.x[1])/2,ca=(Q.y[0]+Q.y[1])/2,W=Q.x[1]-Q.x[0],T=Q.y[1]-Q.y[0],U=W*H.w,ha=T*H.h,Y=L.sum,ba=L.aaxis.min,ja=L.baxis.min,ma=L.caxis.min;if(U>F*ha){var ia=ha;Q=ia*F}else Q=
U,ia=Q/F;U=W*Q/U;T=T*ia/ha;W=H.l+H.w*Z-Q/2;H=H.t+H.h*(1-ca)-ia/2;M.x0=W;M.y0=H;M.w=Q;M.h=ia;M.sum=Y;M.xaxis={type:"linear",range:[ba+2*ma-Y,Y-ba-2*ja],domain:[Z-U/2,Z+U/2],_id:"x"};d(M.xaxis,M.graphDiv._fullLayout);M.xaxis.setScale();M.xaxis.isPtWithinRange=function(oa){return oa.a>=M.aaxis.range[0]&&oa.a<=M.aaxis.range[1]&&oa.b>=M.baxis.range[1]&&oa.b<=M.baxis.range[0]&&oa.c>=M.caxis.range[1]&&oa.c<=M.caxis.range[0]};M.yaxis={type:"linear",range:[ba,Y-ja-ma],domain:[ca-T/2,ca+T/2],_id:"y"};d(M.yaxis,
M.graphDiv._fullLayout);M.yaxis.setScale();M.yaxis.isPtWithinRange=function(){return!0};U=M.yaxis.domain[0];Z=M.aaxis=e({},L.aaxis,{range:[ba,Y-ja-ma],side:"left",tickangle:(+L.aaxis.tickangle||0)-30,domain:[U,U+T*F],anchor:"free",position:0,_id:"y",_length:Q});d(Z,M.graphDiv._fullLayout);Z.setScale();ca=M.baxis=e({},L.baxis,{range:[Y-ba-ma,ja],side:"bottom",domain:M.xaxis.domain,anchor:"free",position:0,_id:"x",_length:Q});d(ca,M.graphDiv._fullLayout);ca.setScale();L=M.caxis=e({},L.caxis,{range:[Y-
ba-ja,ma],side:"right",tickangle:(+L.caxis.tickangle||0)+30,domain:[U,U+T*F],anchor:"free",position:0,_id:"y",_length:Q});d(L,M.graphDiv._fullLayout);L.setScale();Y="M"+W+","+(H+ia)+"h"+Q+"l-"+Q/2+",-"+ia+"Z";M.clipDef.select("path").attr("d",Y);M.layers.plotbg.select("path").attr("d",Y);Y="M0,"+ia+"h"+Q+"l-"+Q/2+",-"+ia+"Z";M.clipDefRelative.select("path").attr("d",Y);Y=h(W,H);M.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Y);M.clipDefRelative.select("path").attr("transform",
null);Y=h(W-ca._offset,H+ia);M.layers.baxis.attr("transform",Y);M.layers.bgrid.attr("transform",Y);Y=h(W+Q/2,H)+"rotate(30)"+h(0,-Z._offset);M.layers.aaxis.attr("transform",Y);M.layers.agrid.attr("transform",Y);Y=h(W+Q/2,H)+"rotate(-30)"+h(0,-L._offset);M.layers.caxis.attr("transform",Y);M.layers.cgrid.attr("transform",Y);M.drawAxes(!0);M.layers.aline.select("path").attr("d",Z.showline?"M"+W+","+(H+ia)+"l"+Q/2+",-"+ia:"M0,0").call(l.stroke,Z.linecolor||"#000").style("stroke-width",(Z.linewidth||0)+
"px");M.layers.bline.select("path").attr("d",ca.showline?"M"+W+","+(H+ia)+"h"+Q:"M0,0").call(l.stroke,ca.linecolor||"#000").style("stroke-width",(ca.linewidth||0)+"px");M.layers.cline.select("path").attr("d",L.showline?"M"+(W+Q/2)+","+H+"l"+Q/2+","+ia:"M0,0").call(l.stroke,L.linecolor||"#000").style("stroke-width",(L.linewidth||0)+"px");M.graphDiv._context.staticPlot||M.initInteractions();c.setClipUrl(M.layers.frontplot,M._hasClipOnAxisFalse?null:M.clipId,M.graphDiv)};b.drawAxes=function(L){var H=
this.graphDiv,M=this.id.substr(7)+"title",Q=this.layers,Z=this.aaxis,ca=this.baxis,W=this.caxis;this.drawAx(Z);this.drawAx(ca);this.drawAx(W);if(L){L=Math.max(Z.showticklabels?Z.tickfont.size/2:0,(W.showticklabels?.75*W.tickfont.size:0)+("outside"===W.ticks?.87*W.ticklen:0));var T=(ca.showticklabels?ca.tickfont.size:0)+("outside"===ca.ticks?ca.ticklen:0)+3;Q["a-title"]=B.draw(H,"a"+M,{propContainer:Z,propName:this.id+".aaxis.title",placeholder:r(H,"Click to enter Component A title"),attributes:{x:this.x0+
this.w/2,y:this.y0-Z.title.font.size/3-L,"text-anchor":"middle"}});Q["b-title"]=B.draw(H,"b"+M,{propContainer:ca,propName:this.id+".baxis.title",placeholder:r(H,"Click to enter Component B title"),attributes:{x:this.x0-T,y:this.y0+this.h+.83*ca.title.font.size+T,"text-anchor":"middle"}});Q["c-title"]=B.draw(H,"c"+M,{propContainer:W,propName:this.id+".caxis.title",placeholder:r(H,"Click to enter Component C title"),attributes:{x:this.x0+this.w+T,y:this.y0+this.h+.83*W.title.font.size+T,"text-anchor":"middle"}})}};
b.drawAx=function(L){var H=this.graphDiv,M=L._name,Q=M.charAt(0),Z=L._id;M=this.layers[M];var ca=Q+"tickLayout",W=L.ticks+String(L.ticklen)+String(L.showticklabels);this[ca]!==W&&(M.selectAll("."+Z+"tick").remove(),this[ca]=W);L.setScale();Z=q.calcTicks(L);ca=q.clipEnds(L,Z);W=q.makeTransTickFn(L);var T=q.getTickSigns(L)[2],U=g.deg2rad(30),ha=T*(L.linewidth||1)/2;T*=L.ticklen;var Y=this.w,ba=this.h;Y={a:"M0,0l"+ba+",-"+Y/2,b:"M0,0l-"+Y/2+",-"+ba,c:"M0,0l-"+ba+","+Y/2}[Q];q.drawTicks(H,L,{vals:"inside"===
L.ticks?ca:Z,layer:M,path:"b"===Q?"M0,"+ha+"l"+Math.sin(U)*T+","+Math.cos(U)*T:"M"+ha+",0l"+Math.cos(U)*T+","+-Math.sin(U)*T,transFn:W,crisp:!1});q.drawGrid(H,L,{vals:ca,layer:this.layers[Q+"grid"],path:Y,transFn:W,crisp:!1});q.drawLabels(H,L,{vals:Z,layer:M,transFn:W,labelFns:q.makeLabelFns(L,0,30)})};N=y.MINZOOM/2+.87;var J="m-0.87,.5h"+N+"v3h-"+(N+5.2)+"l"+(N/2+2.6)+",-"+(.87*N+4.5)+"l2.6,1.5l-"+N/2+","+.87*N+"Z",K="m0.87,.5h-"+N+"v3h"+(N+5.2)+"l-"+(N/2+2.6)+",-"+(.87*N+4.5)+"l-2.6,1.5l"+N/2+","+
.87*N+"Z",O="m0,1l"+N/2+","+.87*N+"l2.6,-1.5l-"+(N/2+2.6)+",-"+(.87*N+4.5)+"l-"+(N/2+2.6)+","+(.87*N+4.5)+"l2.6,1.5l"+N/2+",-"+.87*N+"Z",I=!0;b.clearSelect=function(){v(this.dragOptions);C(this.dragOptions.gd)};b.initInteractions=function(){function L(ta){var za={};za[W.id+".aaxis.min"]=ta.a;za[W.id+".baxis.min"]=ta.b;za[W.id+".caxis.min"]=ta.c;return za}function H(ta,za){var Ia=U._fullLayout.clickmode;n(U);2===ta&&(U.emit("plotly_doubleclick",null),a.call("_guiRelayout",U,L({a:0,b:0,c:0})));-1<Ia.indexOf("select")&&
1===ta&&D(za,U,[W.xaxis],[W.yaxis],W.id,W.dragOptions);-1<Ia.indexOf("event")&&w.click(U,za,W.id)}function M(ta,za){var Ia=ja+ta*Y,Xa=ma+za*ba;za=Math.max(0,Math.min(1,1-ma/W.h,1-Xa/W.h));ta=Math.max(0,Math.min(1,1-(ja+(W.h-ma)/Math.sqrt(3))/W.w,1-(Ia+(W.h-Xa)/Math.sqrt(3))/W.w));Ia=Math.max(0,Math.min(1,(ja-(W.h-ma)/Math.sqrt(3))/W.w,(Ia-(W.h-Xa)/Math.sqrt(3))/W.w));Xa=(za/2+Ia)*W.w;var $a=(1-za/2-ta)*W.w,gb=(Xa+$a)/2,sb=$a-Xa,jb=(1-za)*W.h,vb=jb-sb/F;sb<y.MINZOOM?(xa=ia,na.attr("d",la),qa.attr("d",
"M0,0Z")):(xa={a:ia.a+za*oa,b:ia.b+ta*oa,c:ia.c+Ia*oa},na.attr("d",la+"M"+Xa+","+jb+"H"+$a+"L"+gb+","+vb+"L"+Xa+","+jb+"Z"),qa.attr("d","M"+ja+","+ma+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+Xa+","+jb+J+"M"+$a+","+jb+K+"M"+gb+","+vb+O));ka||(na.transition().style("fill",.2<ra?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),qa.transition().style("opacity",1).duration(200),ka=!0);U.emit("plotly_relayouting",L(xa))}function Q(){n(U);xa!==ia&&(a.call("_guiRelayout",U,L(xa)),I&&U.data&&U._context.showTips&&
(g.notifier(r(U,"Double-click to zoom back out"),"long"),I=!1))}function Z(ta,za){var Ia=ta/W.xaxis._m,Xa=za/W.yaxis._m;xa={a:ia.a-Xa,b:ia.b+(Ia+Xa)/2,c:ia.c-(Ia-Xa)/2};Ia=[xa.a,xa.b,xa.c].sort(g.sorterAsc);Xa=Ia.indexOf(xa.a);var $a=Ia.indexOf(xa.b),gb=Ia.indexOf(xa.c);0>Ia[0]&&(0>Ia[1]+Ia[0]/2?(Ia[2]+=Ia[0]+Ia[1],Ia[0]=Ia[1]=0):(Ia[2]+=Ia[0]/2,Ia[1]+=Ia[0]/2,Ia[0]=0),xa={a:Ia[Xa],b:Ia[$a],c:Ia[gb]},za=(ia.a-xa.a)*W.yaxis._m,ta=(ia.c-xa.c-ia.b+xa.b)*W.xaxis._m);Ia=h(W.x0+ta,W.y0+za);W.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",
Ia);ta=h(-ta,-za);W.clipDefRelative.select("path").attr("transform",ta);W.aaxis.range=[xa.a,W.sum-xa.b-xa.c];W.baxis.range=[W.sum-xa.a-xa.c,xa.b];W.caxis.range=[W.sum-xa.a-xa.b,xa.c];W.drawAxes(!1);W._hasClipOnAxisFalse&&W.plotContainer.select(".scatterlayer").selectAll(".trace").call(c.hideOutsideRangePoints,W);U.emit("plotly_relayouting",L(xa))}function ca(){a.call("_guiRelayout",U,L(xa))}var W=this,T=W.layers.plotbg.select("path").node(),U=W.graphDiv,ha=U._fullLayout._zoomlayer,Y,ba;this.dragOptions=
{element:T,gd:U,plotinfo:{id:W.id,domain:U._fullLayout[W.id].domain,xaxis:W.xaxis,yaxis:W.yaxis},subplot:W.id,prepFn:function(ta,za,Ia){W.dragOptions.xaxes=[W.xaxis];W.dragOptions.yaxes=[W.yaxis];Y=U._fullLayout._invScaleX;ba=U._fullLayout._invScaleY;var Xa=W.dragOptions.dragmode=U._fullLayout.dragmode;x(Xa)?W.dragOptions.minDrag=1:W.dragOptions.minDrag=void 0;"zoom"===Xa?(W.dragOptions.moveFn=M,W.dragOptions.clickFn=H,W.dragOptions.doneFn=Q,ta=T.getBoundingClientRect(),ja=za-ta.left,ma=Ia-ta.top,
U._fullLayout._calcInverseTransform(U),za=g.apply3DTransform(U._fullLayout._invTransform)(ja,ma),ja=za[0],ma=za[1],xa=ia={a:W.aaxis.range[0],b:W.baxis.range[1],c:W.caxis.range[1]},oa=W.aaxis.range[1]-ia.a,ra=m(W.graphDiv._fullLayout[W.id].bgcolor).getLuminance(),la="M0,"+W.h+"L"+W.w/2+", 0L"+W.w+","+W.h+"Z",ka=!1,na=ha.append("path").attr("class","zoombox").attr("transform",h(W.x0,W.y0)).style({fill:.2<ra?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",la),qa=ha.append("path").attr("class",
"zoombox-corners").attr("transform",h(W.x0,W.y0)).style({fill:l.background,stroke:l.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),W.clearSelect(U)):"pan"===Xa?(W.dragOptions.moveFn=Z,W.dragOptions.clickFn=H,W.dragOptions.doneFn=ca,xa=ia={a:W.aaxis.range[0],b:W.baxis.range[1],c:W.caxis.range[1]},W.clearSelect(U)):(z(Xa)||x(Xa))&&A(ta,za,Ia,W.dragOptions,Xa)}};var ja,ma,ia,oa,xa,ra,la,ka,na,qa;T.onmousemove=function(ta){w.hover(U,ta,W.id);U._fullLayout._lasthover=T;U._fullLayout._hoversubplot=
W.id};T.onmouseout=function(ta){U._dragging||t.unhover(U,ta)};t.init(this.dragOptions)}},{"../../components/color":666,"../../components/dragelement":685,"../../components/dragelement/helpers":684,"../../components/drawing":688,"../../components/fx":706,"../../components/titles":764,"../../lib":803,"../../lib/extend":793,"../../registry":931,"../cartesian/axes":854,"../cartesian/constants":861,"../cartesian/select":874,"../cartesian/set_convert":875,"../plots":917,"@plotly/d3":58,tinycolor2:598}],
931:[function(b,N,G){function p(t){if(t.layoutAttributes&&(t=t.layoutAttributes._arrayAttrRegexps))for(var w=0;w<t.length;w++)r(G.layoutArrayRegexes,t[w])}function n(t,w){(t=G.componentsRegistry[t].schema)&&t.traces&&(t=t.traces[w])&&q(G.modules[w]._module.attributes,t)}function k(t,w){(t=G.componentsRegistry[t].schema)&&t.transforms&&(t=t.transforms[w])&&q(G.transformsRegistry[w].attributes,t)}function m(t,w){if((t=G.componentsRegistry[t].schema)&&t.subplots){var x=G.subplotsRegistry[w];w=x.layoutAttributes;
x="subplot"===x.attr?x.name:x.attr;Array.isArray(x)&&(x=x[0]);t=t.subplots[x];w&&t&&q(w,t)}}function a(t){"object"===typeof t&&(t=t.type);return t}var g=b("./lib/loggers"),h=b("./lib/noop"),r=b("./lib/push_unique"),l=b("./lib/is_plain_object"),c=b("./lib/dom").addStyleRule;N=b("./lib/extend");var d=b("./plots/attributes"),e=b("./plots/layout_attributes"),f=N.extendFlat,q=N.extendDeepAll;G.modules={};G.allCategories={};G.allTypes=[];G.subplotsRegistry={};G.transformsRegistry={};G.componentsRegistry=
{};G.layoutArrayContainers=[];G.layoutArrayRegexes=[];G.traceLayoutAttributes={};G.localeRegistry={};G.apiMethodRegistry={};G.collectableSubplotTypes=null;G.register=function(t){G.collectableSubplotTypes=null;if(t)t&&!Array.isArray(t)&&(t=[t]);else throw Error("No argument passed to Plotly.register.");for(var w=0;w<t.length;w++){var x=t[w];if(!x)throw Error("Invalid module was attempted to be registered!");switch(x.moduleType){case "trace":var z=void 0,B=void 0,A=x.name,D=x.categories,C=x.meta;if(G.modules[A])g.log("Type "+
A+" already registered");else{if(!G.subplotsRegistry[x.basePlotModule.name]){var v=void 0,y=x.basePlotModule,F=y.name;if(G.subplotsRegistry[F])g.log("Plot type "+F+" already registered.");else for(v in p(y),G.subplotsRegistry[F]=y,G.componentsRegistry)m(v,y.name)}v={};for(y=0;y<D.length;y++)v[D[y]]=!0,G.allCategories[D[y]]=!0;G.modules[A]={_module:x,categories:v};C&&Object.keys(C).length&&(G.modules[A].meta=C);G.allTypes.push(A);for(B in G.componentsRegistry)n(B,A);x.layoutAttributes&&f(G.traceLayoutAttributes,
x.layoutAttributes);x=x.basePlotModule;B=x.name;if("mapbox"===B)for(z in x=x.constants.styleRules,x)c(".js-plotly-plot .plotly .mapboxgl-"+z,x[z]);"geo"!==B&&"mapbox"!==B||void 0!==window.PlotlyGeoAssets||(window.PlotlyGeoAssets={topojson:{}})}break;case "transform":z=void 0;B=x;if("string"!==typeof B.name)throw Error("Transform module *name* must be a string.");x="Transform module "+B.name;A="function"===typeof B.transform;D="function"===typeof B.calcTransform;if(!A&&!D)throw Error(x+" is missing a *transform* or *calcTransform* method.");
A&&D&&g.log([x+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed before all *calcTransform* methods."].join(" "));l(B.attributes)||g.log(x+" registered without an *attributes* object.");"function"!==typeof B.supplyDefaults&&g.log(x+" registered without a *supplyDefaults* method.");G.transformsRegistry[B.name]=B;for(z in G.componentsRegistry)k(z,B.name);break;case "component":A=B=z=void 0;if("string"!==typeof x.name)throw Error("Component module *name* must be a string.");
D=x.name;G.componentsRegistry[D]=x;x.layoutAttributes&&(x.layoutAttributes._isLinkedToArray&&r(G.layoutArrayContainers,D),p(x));for(A in G.modules)n(D,A);for(B in G.subplotsRegistry)m(D,B);for(z in G.transformsRegistry)k(D,z);x.schema&&x.schema.layout&&q(e,x.schema.layout);break;case "locale":A=x;x=A.name;z=x.split("-")[0];B=A.dictionary;A=A.format;D=B&&Object.keys(B).length;C=A&&Object.keys(A).length;v=G.localeRegistry;(y=v[x])||(v[x]=y={});z!==x&&((x=v[z])||(v[z]=x={}),D&&x.dictionary===y.dictionary&&
(x.dictionary=B),C&&x.format===y.format&&(x.format=A));D&&(y.dictionary=B);C&&(y.format=A);break;case "apiMethod":G.apiMethodRegistry[x.name]=x.fn;break;default:throw Error("Invalid module was attempted to be registered!");}}};G.getModule=function(t){return(t=G.modules[a(t)])?t._module:!1};G.traceIs=function(t,w){t=a(t);if("various"===t)return!1;var x=G.modules[t];x||(t&&g.log("Unrecognized trace type "+t+"."),x=G.modules[d.type.dflt]);return!!x.categories[w]};G.getTransformIndices=function(t,w){var x=
[];t=t.transforms||[];for(var z=0;z<t.length;z++)t[z].type===w&&x.push(z);return x};G.hasTransform=function(t,w){t=t.transforms||[];for(var x=0;x<t.length;x++)if(t[x].type===w)return!0;return!1};G.getComponentMethod=function(t,w){return(t=G.componentsRegistry[t])?t[w]||h:h};G.call=function(){var t=arguments[0],w=[].slice.call(arguments,1);return G.apiMethodRegistry[t].apply(null,w)}},{"./lib/dom":791,"./lib/extend":793,"./lib/is_plain_object":804,"./lib/loggers":807,"./lib/noop":812,"./lib/push_unique":818,
"./plots/attributes":850,"./plots/layout_attributes":908}],932:[function(b,N,G){function p(a){switch(a){case "themes__thumb":a={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case "thumbnail":a={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:a={}}return a}var n=b("../registry");b=b("../lib");var k=b.extendFlat,m=b.extendDeep;N.exports=function(a,
g){var h,r=a.layout,l=m([],a.data);r=m({},r,p(g.tileClass));a=a._context||{};g.width&&(r.width=g.width);g.height&&(r.height=g.height);if("thumbnail"===g.tileClass||"themes__thumb"===g.tileClass){r.annotations=[];var c=Object.keys(r);for(h=0;h<c.length;h++)-1<["xaxis","yaxis","zaxis"].indexOf(c[h].slice(0,5))&&(r[c[h]].title={text:""});for(h=0;h<l.length;h++)c=l[h],c.showscale=!1,c.marker&&(c.marker.showscale=!1),n.traceIs(c,"pie-like")&&(c.textposition="none")}if(Array.isArray(g.annotations))for(h=
0;h<g.annotations.length;h++)r.annotations.push(g.annotations[h]);c=Object.keys(r).filter(function(f){return f.match(/^scene\d*$/)});if(c.length){var d={};"thumbnail"===g.tileClass&&(d={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1});for(h=0;h<c.length;h++){var e=r[c[h]];e.xaxis||(e.xaxis={});e.yaxis||(e.yaxis={});e.zaxis||(e.zaxis={});k(e.xaxis,d);k(e.yaxis,d);k(e.zaxis,d);e._scene=null}}h=document.createElement("div");g.tileClass&&(h.className=g.tileClass);l={gd:h,td:h,layout:r,
data:l,config:{staticPlot:void 0===g.staticPlot?!0:g.staticPlot,plotGlPixelRatio:void 0===g.plotGlPixelRatio?2:g.plotGlPixelRatio,displaylogo:g.displaylogo||!1,showLink:g.showLink||!1,showTips:g.showTips||!1,mapboxAccessToken:a.mapboxAccessToken}};"transparent"!==g.setBackground&&(l.config.setBackground=g.setBackground||"opaque");l.gd.defaultLayout=p(g.tileClass);return l}},{"../lib":803,"../registry":931}],933:[function(b,N,G){var p=b("../lib"),n=b("../plot_api/to_image"),k=b("./filesaver"),m=b("./helpers");
N.exports=function(a,g){var h;p.isPlainObject(a)||(h=p.getGraphDiv(a));g=g||{};g.format=g.format||"png";g.width=g.width||null;g.height=g.height||null;g.imageDataOnly=!0;return new Promise(function(r,l){h&&h._snapshotInProgress&&l(Error("Snapshotting already in progress."));p.isIE()&&"svg"!==g.format&&l(Error(m.MSG_IE_BAD_FORMAT));h&&(h._snapshotInProgress=!0);var c=n(a,g),d=g.filename||a.fn||"newplot";d+="."+g.format.replace("-",".");c.then(function(e){h&&(h._snapshotInProgress=!1);return k(e,d,g.format)}).then(function(e){r(e)}).catch(function(e){h&&
(h._snapshotInProgress=!1);l(e)})})}},{"../lib":803,"../plot_api/to_image":846,"./filesaver":934,"./helpers":935}],934:[function(b,N,G){var p=b("../lib"),n=b("./helpers");N.exports=function(k,m,a){var g=document.createElement("a"),h="download"in g;return new Promise(function(r,l){if(p.isIE())return l=n.createBlob(k,"svg"),window.navigator.msSaveBlob(l,m),r(m);if(h)return l=n.createBlob(k,a),l=n.createObjectURL(l),g.href=l,g.download=m,document.body.appendChild(g),g.click(),document.body.removeChild(g),
n.revokeObjectURL(l),r(m);if(p.isSafari())return n.octetStream(("svg"===a?",":";base64,")+encodeURIComponent(k)),r(m);l(Error("download error"))})}},{"../lib":803,"./helpers":935}],935:[function(b,N,G){var p=b("../registry");G.getDelay=function(k){return k._has?k._has("gl3d")||k._has("gl2d")||k._has("mapbox")?500:0:0};G.getRedrawFunc=function(k){return function(){p.getComponentMethod("colorbar","draw")(k)}};G.encodeSVG=function(k){return"data:image/svg+xml,"+encodeURIComponent(k)};G.encodeJSON=function(k){return"data:application/json,"+
encodeURIComponent(k)};var n=window.URL||window.webkitURL;G.createObjectURL=function(k){return n.createObjectURL(k)};G.revokeObjectURL=function(k){return n.revokeObjectURL(k)};G.createBlob=function(k,m){if("svg"===m)return new window.Blob([k],{type:"image/svg+xml;charset\x3dutf-8"});if("full-json"===m)return new window.Blob([k],{type:"application/json;charset\x3dutf-8"});k=window.atob(k);for(var a=k.length,g=new ArrayBuffer(a),h=new Uint8Array(g),r=0;r<a;r++)h[r]=k.charCodeAt(r);return new window.Blob([g],
{type:"image/"+m})};G.octetStream=function(k){document.location.href="data:application/octet-stream"+k};G.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/;G.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":931}],936:[function(b,N,G){G=b("./helpers");b={getDelay:G.getDelay,getRedrawFunc:G.getRedrawFunc,clone:b("./cloneplot"),toSVG:b("./tosvg"),svgToImg:b("./svgtoimg"),toImage:b("./toimage"),downloadImage:b("./download")};N.exports=b},{"./cloneplot":932,
"./download":933,"./helpers":935,"./svgtoimg":937,"./toimage":938,"./tosvg":939}],937:[function(b,N,G){var p=b("../lib"),n=b("events").EventEmitter,k=b("./helpers");N.exports=function(m){var a=m.emitter||new n,g=new Promise(function(h,r){var l=window.Image,c=m.svg,d=m.format||"png";if(p.isIE()&&"svg"!==d)return l=Error(k.MSG_IE_BAD_FORMAT),r(l),m.promise?g:a.emit("error",l);var e=m.canvas,f=m.scale||1,q=f*(m.width||300),t=f*(m.height||150),w=e.getContext("2d"),x=new l;if("svg"===d||p.isSafari())var z=
k.encodeSVG(c);else{var B=k.createBlob(c,"svg");z=k.createObjectURL(B)}e.width=q;e.height=t;x.onload=function(){B=null;k.revokeObjectURL(z);"svg"!==d&&w.drawImage(x,0,0,q,t);switch(d){case "jpeg":var A=e.toDataURL("image/jpeg");break;case "png":A=e.toDataURL("image/png");break;case "webp":A=e.toDataURL("image/webp");break;case "svg":A=z;break;default:if(r(Error("Image format is not jpeg, png, svg or webp.")),!m.promise)return a.emit("error","Image format is not jpeg, png, svg or webp.")}h(A);m.promise||
a.emit("success",A)};x.onerror=function(A){B=null;k.revokeObjectURL(z);r(A);if(!m.promise)return a.emit("error",A)};x.src=z});return m.promise?g:a}},{"../lib":803,"./helpers":935,events:116}],938:[function(b,N,G){var p=b("events").EventEmitter,n=b("../registry"),k=b("../lib"),m=b("./helpers"),a=b("./cloneplot"),g=b("./tosvg"),h=b("./svgtoimg");N.exports=function(r,l){var c=new p;r=a(r,{format:"png"});var d=r.gd;d.style.position="absolute";d.style.left="-5000px";document.body.appendChild(d);var e=
m.getRedrawFunc(d);n.call("_doPlot",d,r.data,r.layout,r.config).then(e).then(function(){var f=m.getDelay(d._fullLayout);setTimeout(function(){var q=g(d),t=document.createElement("canvas");t.id=k.randstr();c=h({format:l.format,width:d._fullLayout.width,height:d._fullLayout.height,canvas:t,emitter:c,svg:q});c.clean=function(){d&&document.body.removeChild(d)}},f)}).catch(function(f){c.emit("error",f)});return c}},{"../lib":803,"../registry":931,"./cloneplot":932,"./helpers":935,"./svgtoimg":937,"./tosvg":939,
events:116}],939:[function(b,N,G){function p(l){var c=n.select("body").append("div").style({display:"none"}).html("");l=l.replace(/(&[^;]*;)/gi,function(d){return"\x26lt;"===d?"\x26#60;":"\x26rt;"===d?"\x26#62;":-1!==d.indexOf("\x3c")||-1!==d.indexOf("\x3e")?"":c.html(d).text()});c.remove();return l}var n=b("@plotly/d3"),k=b("../lib"),m=b("../components/drawing"),a=b("../components/color"),g=b("../constants/xmlns_namespaces"),h=/"/g,r=RegExp('("TOBESTRIPPED)|(TOBESTRIPPED")',"g");N.exports=function(l,
c,d){var e=l._fullLayout,f=e._paper,q=e._toppaper,t=e.width,w=e.height,x,z;f.insert("rect",":first-child").call(m.setRect,0,0,t,w).call(a.fill,e.paper_bgcolor);var B=e._basePlotModules||[];for(x=0;x<B.length;x++){var A=B[x];A.toSVG&&A.toSVG(l)}if(q)for(x=q.node().childNodes,l=Array.prototype.slice.call(x),x=0;x<l.length;x++)q=l[x],q.childNodes.length&&f.node().appendChild(q);e._draggers&&e._draggers.remove();f.node().style.background="";f.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var D=
n.select(this);if("hidden"===this.style.visibility||"none"===this.style.display)D.remove();else{D.style({visibility:null,display:null});var C=this.style.fontFamily;C&&-1!==C.indexOf('"')&&D.style("font-family",C.replace(h,"TOBESTRIPPED"))}});x=[];if(e._gradientUrlQueryParts)for(z in e._gradientUrlQueryParts)x.push(z);if(e._patternUrlQueryParts)for(z in e._patternUrlQueryParts)x.push(z);x.length&&f.selectAll(x.join(",")).each(function(){var D=n.select(this),C=this.style.fill;C&&-1!==C.indexOf("url(")&&
D.style("fill",C.replace(h,"TOBESTRIPPED"));(C=this.style.stroke)&&-1!==C.indexOf("url(")&&D.style("stroke",C.replace(h,"TOBESTRIPPED"))});"pdf"!==c&&"eps"!==c||f.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0);f.node().setAttributeNS(g.xmlns,"xmlns",g.svg);f.node().setAttributeNS(g.xmlns,"xmlns:xlink",g.xlink);"svg"===c&&d&&(f.attr("width",d*t),f.attr("height",d*w),f.attr("viewBox","0 0 "+t+" "+w));c=(new window.XMLSerializer).serializeToString(f.node());c=p(c);c=c.replace(/&(?!\w+;|#[0-9]+;| #x[0-9A-F]+;)/g,
"\x26amp;");c=c.replace(r,"'");k.isIE()&&(c=c.replace(/"/gi,"'"),c=c.replace(/(\('#)([^']*)('\))/gi,'("#$2")'),c=c.replace(/(\\')/gi,'"'));return c}},{"../components/color":666,"../components/drawing":688,"../constants/xmlns_namespaces":780,"../lib":803,"@plotly/d3":58}],940:[function(b,N,G){var p=b("../../lib");N.exports=function(n,k){for(var m=0;m<n.length;m++)n[m].i=m;p.mergeArray(k.text,n,"tx");p.mergeArray(k.hovertext,n,"htx");if(k=k.marker)if(p.mergeArray(k.opacity,n,"mo",!0),p.mergeArray(k.color,
n,"mc"),k=k.line)p.mergeArray(k.color,n,"mlc"),p.mergeArrayCastPositive(k.width,n,"mlw")}},{"../../lib":803}],941:[function(b,N,G){G=b("../scatter/attributes");var p=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat,n=b("../../plots/template_attributes").hovertemplateAttrs,k=b("../../plots/template_attributes").texttemplateAttrs,m=b("../../components/colorscale/attributes"),a=b("../../plots/font_attributes"),g=b("./constants"),h=b("../../components/drawing/attributes").pattern;b=b("../../lib/extend").extendFlat;
a=a({editType:"calc",arrayOk:!0,colorEditType:"style"});var r=b({},G.marker.line.width,{dflt:0});r=b({width:r,editType:"calc"},m("marker.line"));m=b({line:r,editType:"calc"},m("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:h});N.exports={x:G.x,x0:G.x0,dx:G.dx,y:G.y,y0:G.y0,dy:G.dy,xperiod:G.xperiod,yperiod:G.yperiod,xperiod0:G.xperiod0,yperiod0:G.yperiod0,xperiodalignment:G.xperiodalignment,yperiodalignment:G.yperiodalignment,xhoverformat:p("x"),yhoverformat:p("y"),
text:G.text,texttemplate:k({editType:"plot"},{keys:g.eventDataKeys}),hovertext:G.hovertext,hovertemplate:n({},{keys:g.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:b({},a,{}),insidetextfont:b({},a,{}),outsidetextfont:b({},a,{}),constraintext:{valType:"enumerated",
values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:b({},G.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:m,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:G.selected.marker.opacity,
color:G.selected.marker.color,editType:"style"},textfont:G.selected.textfont,editType:"style"},unselected:{marker:{opacity:G.unselected.marker.opacity,color:G.unselected.marker.color,editType:"style"},textfont:G.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":673,"../../components/drawing/attributes":687,"../../lib/extend":793,"../../plots/cartesian/axis_format_attributes":857,"../../plots/font_attributes":883,
"../../plots/template_attributes":926,"../scatter/attributes":1218,"./constants":943}],942:[function(b,N,G){var p=b("../../plots/cartesian/axes"),n=b("../../plots/cartesian/align_period"),k=b("../../components/colorscale/helpers").hasColorscale,m=b("../../components/colorscale/calc"),a=b("./arrays_to_calcdata"),g=b("../scatter/calc_selection");N.exports=function(h,r){var l=p.getFromId(h,r.xaxis||"x"),c=p.getFromId(h,r.yaxis||"y");var d={msUTC:!(!r.base&&0!==r.base)};if("h"===r.orientation){d=l.makeCalcdata(r,
"x",d);var e=c.makeCalcdata(r,"y");c=n(r,c,"y",e);var f=!!r.yperiodalignment}else d=c.makeCalcdata(r,"y",d),e=l.makeCalcdata(r,"x"),c=n(r,l,"x",e),f=!!r.xperiodalignment;l=c.vals;for(var q=Math.min(l.length,d.length),t=Array(q),w=0;w<q;w++)t[w]={p:l[w],s:d[w]},f&&(t[w].orig_p=e[w],t[w].pEnd=c.ends[w],t[w].pStart=c.starts[w]),r.ids&&(t[w].id=String(r.ids[w]));k(r,"marker")&&m(h,r,{vals:r.marker.color,containerStr:"marker",cLetter:"c"});k(r,"marker.line")&&m(h,r,{vals:r.marker.line.color,containerStr:"marker.line",
cLetter:"c"});a(t,r);g(t,r);return t}},{"../../components/colorscale/calc":674,"../../components/colorscale/helpers":677,"../../plots/cartesian/align_period":851,"../../plots/cartesian/axes":854,"../scatter/calc_selection":1220,"./arrays_to_calcdata":940}],943:[function(b,N,G){N.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],944:[function(b,N,G){function p(B,A,D,C,v){if(C.length){var y;n(D,C);switch(v.mode){case "overlay":k(A,D,C,v);break;case "group":var F=[];var J=[];for(y=0;y<C.length;y++){var K=
C[y];var O=K[0].trace;void 0===O.offset?J.push(K):F.push(K)}if(J.length){J=new z(J,{posAxis:A,sepNegVal:!1,overlapNoMerge:!v.norm});var I=B._fullLayout;B=J.minDiff;y=J.traces;K=y.length;O=J.positions.length!==J.distinctPositions.length;var L=B*(1-v.gap),H=x(I,A._id)+y[0][0].trace.orientation;I=I._alignmentOpts[H]||{};for(H=0;H<K;H++){var M=y[H],Q=M[0].trace,Z=Object.keys((I[Q.alignmentgroup]||{}).offsetGroups||{}).length;var ca=Z?L/Z:O?L/K:L;var W=ca*(1-(v.groupgap||0));Q=Z?((2*Q._offsetIndex+1-Z)*
ca-W)/2:O?((2*H+1-K)*ca-W)/2:-W/2;M=M[0].t;M.barwidth=W;M.poffset=Q;M.bargroupwidth=L;M.bardelta=B}J.binWidth=y[0][0].t.barwidth/100;a(J);g(A,J);h(A,J,O);B=J.traces;for(y=0;y<B.length;y++)if(K=B[y],void 0===K[0].trace.base)for(O=new z([K],{posAxis:A,sepNegVal:!0,overlapNoMerge:!0}),L=0;L<K.length;L++)if(I=K[L],I.p!==q&&(H=O.put(I.p,I.b+I.s)))I.b=H;v.norm?(l(J),c(D,J,v)):r(D,J)}F.length&&k(A,D,F,v);break;case "stack":case "relative":F=[];J=[];for(y=0;y<C.length;y++)K=C[y],O=K[0].trace,void 0===O.base?
J.push(K):F.push(K);if(J.length){B=new z(J,{posAxis:A,sepNegVal:"relative"===v.mode,overlapNoMerge:!(v.norm||"stack"===v.mode||"relative"===v.mode)});m(A,B,v);y=D._id.charAt(0);K=B.traces;for(H=0;H<K.length;H++)if(O=K[H],L=O[0].trace,"funnel"===L.type)for(W=0;W<O.length;W++)M=O[W],M.s!==q&&B.put(M.p,-.5*M.s);for(H=0;H<K.length;H++){O=K[H];L=O[0].trace;I="funnel"===L.type;Q=[];for(W=0;W<O.length;W++)M=O[W],M.s!==q&&(ca=I?M.s:M.s+M.b,Z=B.put(M.p,ca),ca=Z+ca,M.b=Z,M[y]=ca,v.norm||(Q.push(ca),M.hasB&&
Q.push(Z)));v.norm||(L._extremes[D._id]=w.findExtremes(D,Q,{tozero:!0,padded:!0}))}for(y=0;y<J.length;y++)for(K=J[y],O=0;O<K.length;O++)L=K[O],L.s!==q&&L.b+L.s===B.get(L.p,L.s)&&(L._outmost=!0);v.norm&&c(D,B,v)}F.length&&k(A,D,F,v)}d(C,A)}}function n(B,A){var D;for(D=0;D<A.length;D++){var C=A[D];var v=C[0].trace;var y="funnel"===v.type?v._base:v.base,F="h"===v.orientation?v.xcalendar:v.ycalendar,J="category"===B.type||"multicategory"===B.type?function(){return null}:B.d2c;if(f(y)){for(v=0;v<Math.min(y.length,
C.length);v++){var K=J(y[v],0,F);e(K)?(C[v].b=+K,C[v].hasB=1):C[v].b=0}for(;v<C.length;v++)C[v].b=0}else for(K=J(y,0,F),K=(y=e(K))?K:0,v=0;v<C.length;v++)C[v].b=K,y&&(C[v].hasB=1)}}function k(B,A,D,C){for(var v=0;v<D.length;v++){var y=new z([D[v]],{posAxis:B,sepNegVal:!1,overlapNoMerge:!C.norm});m(B,y,C);C.norm?(l(y),c(A,y,C)):r(A,y)}}function m(B,A,D){var C=A.minDiff,v=A.traces,y=C*(1-D.gap);D=y*(1-(D.groupgap||0));for(var F=-D/2,J=0;J<v.length;J++){var K=v[J][0].t;K.barwidth=D;K.poffset=F;K.bargroupwidth=
y;K.bardelta=C}A.binWidth=v[0][0].t.barwidth/100;a(A);g(B,A);h(B,A)}function a(B){B=B.traces;var A,D;for(A=0;A<B.length;A++){var C=B[A],v=C[0],y=v.trace;v=v.t;var F=y._offset||y.offset,J=v.poffset;if(f(F)){var K=Array.prototype.slice.call(F,0,C.length);for(D=0;D<K.length;D++)e(K[D])||(K[D]=J);for(D=K.length;D<C.length;D++)K.push(J);v.poffset=K}else void 0!==F&&(v.poffset=F);D=y._width||y.width;y=v.barwidth;if(f(D)){var O=Array.prototype.slice.call(D,0,C.length);for(D=0;D<O.length;D++)e(O[D])||(O[D]=
y);for(D=O.length;D<C.length;D++)O.push(y);v.barwidth=O;if(void 0===F){K=[];for(D=0;D<C.length;D++)K.push(J+(y-O[D])/2);v.poffset=K}}else void 0!==D&&(v.barwidth=D,void 0===F&&(v.poffset=J+(y-D)/2))}}function g(B,A){A=A.traces;B=B._id.charAt(0);for(var D=0;D<A.length;D++){var C=A[D],v=C[0].t,y=v.poffset,F=Array.isArray(y);v=v.barwidth;for(var J=Array.isArray(v),K=!!C[0].trace[B+"periodalignment"],O=0;O<C.length;O++){var I=C[O],L=I.w=J?v[O]:v;I[B]=I.p+(F?y[O]:y)+L/2;K&&(I.wPeriod=I.pEnd-I.pStart)}}}
function h(B,A,D){var C=A.traces,v=A.minDiff/2;w.minDtick(B,A.minDiff,A.distinctPositions[0],D);for(A=0;A<C.length;A++){D=C[A];var y=D[0],F=y.trace,J=[],K;for(K=0;K<D.length;K++){var O=D[K];var I=O.p-v;O=O.p+v;J.push(I,O)}if(F.width||F.offset){I=y.t;y=I.poffset;var L=I.barwidth,H=Array.isArray(y),M=Array.isArray(L);for(K=0;K<D.length;K++){O=D[K];var Q=M?L[K]:L;I=O.p+(H?y[K]:y);O=I+Q;J.push(I,O)}}F._extremes[B._id]=w.findExtremes(B,J,{padded:!1})}}function r(B,A){A=A.traces;for(var D=B._id.charAt(0),
C=0;C<A.length;C++){for(var v=A[C],y=v[0].trace,F=[],J=!1,K=0;K<v.length;K++){var O=v[K],I=O.b,L=I+O.s;O[D]=L;F.push(L);O.hasB&&F.push(I);O.hasB&&O.b||(J=!0)}y._extremes[B._id]=w.findExtremes(B,F,{tozero:J,padded:!0})}}function l(B){for(var A=B.traces,D=0;D<A.length;D++)for(var C=A[D],v=0;v<C.length;v++){var y=C[v];y.s!==q&&B.put(y.p,y.b+y.s)}}function c(B,A,D){function C(U){return e(B.c2l(U))&&(U<K-J||U>O+J||!e(K))}var v=A.traces,y=B._id.charAt(0),F="fraction"===D.norm?1:100,J=F/1E9,K=B.l2c(B.c2l(0)),
O="stack"===D.mode?F:K;for(D=0;D<v.length;D++){for(var I=v[D],L=I[0].trace,H=[],M=!1,Q=!1,Z=0;Z<I.length;Z++){var ca=I[Z];if(ca.s!==q){var W=Math.abs(F/A.get(ca.p,ca.s));ca.b*=W;ca.s*=W;W=ca.b;var T=W+ca.s;ca[y]=T;H.push(T);Q=Q||C(T);ca.hasB&&(H.push(W),Q=Q||C(W));ca.hasB&&ca.b||(M=!0)}}L._extremes[B._id]=w.findExtremes(B,H,{tozero:M,padded:Q})}}function d(B,A){A=A._id.charAt(0);var D={},C,v,y=Infinity,F=-Infinity;for(C=0;C<B.length;C++){var J=B[C];for(v=0;v<J.length;v++){var K=J[v].p;e(K)&&(y=Math.min(y,
K),F=Math.max(F,K))}}var O=1E4/(F-y);F=D.round=function(Z){return String(Math.round(O*(Z-y)))};for(C=0;C<B.length;C++){J=B[C];J[0].t.extents=D;K=J[0].t.poffset;var I=Array.isArray(K);for(v=0;v<J.length;v++){var L=J[v],H=L[A]-L.w/2;if(e(H)){var M=L[A]+L.w/2,Q=F(L.p);D[Q]=D[Q]?[Math.min(H,D[Q][0]),Math.max(M,D[Q][1])]:[H,M]}L.p0=L.p+(I?K[v]:K);L.p1=L.p0+L.w;L.s0=L.b;L.s1=L.s0+L.s}}}var e=b("fast-isnumeric"),f=b("../../lib").isArrayOrTypedArray,q=b("../../constants/numerical").BADNUM,t=b("../../registry"),
w=b("../../plots/cartesian/axes"),x=b("../../plots/cartesian/constraints").getAxisGroup,z=b("./sieve.js");N.exports={crossTraceCalc:function(B,A){var D=A.xaxis;A=A.yaxis;for(var C=B._fullLayout,v=B._fullData,y=B.calcdata,F=[],J=[],K=0;K<v.length;K++){var O=v[K];if(!0===O.visible&&t.traceIs(O,"bar")&&O.xaxis===D._id&&O.yaxis===A._id&&("h"===O.orientation?F.push(y[K]):J.push(y[K]),O._computePh)){O=B.calcdata[K];for(var I=0;I<O.length;I++)"function"===typeof O[I].ph0&&(O[I].ph0=O[I].ph0()),"function"===
typeof O[I].ph1&&(O[I].ph1=O[I].ph1())}}C={xCat:"category"===D.type||"multicategory"===D.type,yCat:"category"===A.type||"multicategory"===A.type,mode:C.barmode,norm:C.barnorm,gap:C.bargap,groupgap:C.bargroupgap};p(B,D,A,J,C);p(B,A,D,F,C)},setGroupPositions:p}},{"../../constants/numerical":779,"../../lib":803,"../../plots/cartesian/axes":854,"../../plots/cartesian/constraints":862,"../../registry":931,"./sieve.js":954,"fast-isnumeric":249}],945:[function(b,N,G){function p(e,f,q,t){e=f.orientation;
e=l(q,f[{v:"x",h:"y"}[e]+"axis"])+e;var w=q._alignmentOpts||{};q=t("alignmentgroup");var x=w[e];x||(x=w[e]={});(e=x[q])?e.traces.push(f):e=x[q]={traces:[f],alignmentIndex:Object.keys(x).length,offsetGroups:{}};t=t("offsetgroup");e=e.offsetGroups;q=e[t];t&&(q||(q=e[t]={offsetIndex:Object.keys(e).length}),f._offsetIndex=q.offsetIndex)}function n(e,f,q,t,w,x){x=x||{};f=!1!==x.moduleHasSelected;var z=!1!==x.moduleHasUnselected,B=!1!==x.moduleHasConstrain,A=!1!==x.moduleHasCliponaxis,D=!1!==x.moduleHasTextangle,
C=!1!==x.moduleHasInsideanchor,v=!!x.hasPathbar,y=Array.isArray(w)||"auto"===w;x=y||"inside"===w;w=y||"outside"===w;if(x||w)q=d(t,"textfont",q.font),y=k.extendFlat({},q),(e=!(e.textfont&&e.textfont.color))&&delete y.color,d(t,"insidetextfont",y),v&&(v=k.extendFlat({},q),e&&delete v.color,d(t,"pathbar.textfont",v)),w&&d(t,"outsidetextfont",q),f&&t("selected.textfont.color"),z&&t("unselected.textfont.color"),B&&t("constraintext"),A&&t("cliponaxis"),D&&t("textangle"),t("texttemplate");x&&C&&t("insidetextanchor")}
var k=b("../../lib"),m=b("../../components/color"),a=b("../../registry"),g=b("../scatter/xy_defaults"),h=b("../scatter/period_defaults"),r=b("./style_defaults"),l=b("../../plots/cartesian/constraints").getAxisGroup,c=b("./attributes"),d=k.coerceFont;N.exports={supplyDefaults:function(e,f,q,t){function w(z,B){return k.coerce(e,f,c,z,B)}if(g(e,f,t,w)){h(e,f,t,w);w("xhoverformat");w("yhoverformat");w("orientation",f.x&&!f.y?"h":"v");w("base");w("offset");w("width");w("text");w("hovertext");w("hovertemplate");
var x=w("textposition");n(e,f,t,w,x,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0});r(e,f,w,q,t);q=(f.marker.line||{}).color;t=a.getComponentMethod("errorbars","supplyDefaults");t(e,f,q||m.defaultLine,{axis:"y"});t(e,f,q||m.defaultLine,{axis:"x",inherit:"y"});k.coerceSelectionMarkerOpacity(f,w)}else f.visible=!1},crossTraceDefaults:function(e,f){function q(z){return k.coerce(w._input,w,c,z)}if("group"===f.barmode)for(var t=
0;t<e.length;t++){var w=e[t];if("bar"===w.type){var x=w._input;p(x,w,f,q)}}},handleGroupingDefaults:p,handleText:n}},{"../../components/color":666,"../../lib":803,"../../plots/cartesian/constraints":862,"../../registry":931,"../scatter/period_defaults":1238,"../scatter/xy_defaults":1245,"./attributes":941,"./style_defaults":956}],946:[function(b,N,G){N.exports=function(p,n,k){p.x="xVal"in n?n.xVal:n.x;p.y="yVal"in n?n.yVal:n.y;n.xa&&(p.xaxis=n.xa);n.ya&&(p.yaxis=n.ya);"h"===k.orientation?(p.label=
p.y,p.value=p.x):(p.label=p.x,p.value=p.y);return p}},{}],947:[function(b,N,G){var p=b("fast-isnumeric"),n=b("tinycolor2"),k=b("../../lib").isArrayOrTypedArray;G.coerceString=function(m,a,g){if("string"===typeof a){if(a||!m.noBlank)return a}else if(("number"===typeof a||!0===a)&&!m.strict)return String(a);return void 0!==g?g:m.dflt};G.coerceNumber=function(m,a,g){if(p(a)){a=+a;var h=m.min,r=m.max;if(!(void 0!==h&&a<h||void 0!==r&&a>r))return a}return void 0!==g?g:m.dflt};G.coerceColor=function(m,
a,g){return n(a).isValid()?a:void 0!==g?g:m.dflt};G.coerceEnumerated=function(m,a,g){m.coerceNumber&&(a=+a);return-1!==m.values.indexOf(a)?a:void 0!==g?g:m.dflt};G.getValue=function(m,a){var g;Array.isArray(m)?a<m.length&&(g=m[a]):g=m;return g};G.getLineWidth=function(m,a){return 0<a.mlw?a.mlw:k(m.marker.line.width)?0:m.marker.line.width}},{"../../lib":803,"fast-isnumeric":249,tinycolor2:598}],948:[function(b,N,G){function p(c,d,e,f,q){function t(U){return U[L]+-1*(Z?U.wPeriod:U.w)/2}function w(U){return U[L]+
1*(Z?U.wPeriod:U.w)/2}function x(U,ha,Y){q.finiteRange&&(Y=0);return k.inbox(U-O,ha-O,Y+Math.min(1,Math.abs(ha-U)/T)-1)}function z(U){return x(ca(U),W(U),J)}function B(U){var ha=U[H];F&&(U=Math.abs(U.rawS)||0,0<I?ha+=U:0>I&&(ha-=U));return ha}function A(U){var ha=I,Y=U.b;U=B(U);return k.inbox(Y-ha,U-ha,J+(U-ha)/(U-Y)-1)}var D=c.cd,C=D[0].trace,v=D[0].t,y="closest"===f,F="waterfall"===C.type,J=c.maxHoverDistance,K=c.maxSpikeDistance;if("h"===C.orientation){var O=e;var I=d;var L="y";var H="x";var M=
A;var Q=z}else O=d,I=e,L="x",H="y",Q=A,M=z;var Z=C[L+"period"],ca=y||Z?t:function(U){return Math.min(t(U),U.p-v.bardelta/2)},W=y||Z?w:function(U){return Math.max(w(U),U.p+v.bardelta/2)};d=c[L+"a"];e=c[H+"a"];var T=Math.abs(d.r2c(d.range[1])-d.r2c(d.range[0]));f=k.getDistanceFunction(f,M,Q,function(U){return(M(U)+Q(U))/2});k.getClosest(D,f,c);if(!1!==c.index&&D[c.index].p!==l)return y||(ca=function(U){return Math.min(t(U),U.p-v.bargroupwidth/2)},W=function(U){return Math.max(w(U),U.p+v.bargroupwidth/
2)}),D=D[c.index],f=C.base?D.b+D.s:D.s,c[H+"0"]=c[H+"1"]=e.c2p(D[H],!0),c[H+"LabelVal"]=f,f=v.extents[v.extents.round(D.p)],c[L+"0"]=d.c2p(y?ca(D):f[0],!0),c[L+"1"]=d.c2p(y?W(D):f[1],!0),y=void 0!==D.orig_p,c[L+"LabelVal"]=y?D.orig_p:D.p,y&&(c[L+"Period"]=D.p),c.labelLabel=r(d,c[L+"LabelVal"],C[L+"hoverformat"]),c.valueLabel=r(e,c[H+"LabelVal"],C[H+"hoverformat"]),c.baseLabel=r(e,D.b,C[H+"hoverformat"]),c.spikeDistance=(function(U){var ha=I,Y=U.b;U=B(U);return k.inbox(Y-ha,U-ha,K+(U-ha)/(U-Y)-1)}(D)+
function(U){return x(t(U),w(U),K)}(D))/2,c[L+"Spike"]=d.c2p(D.p,!0),g(D,C,c),c.hovertemplate=C.hovertemplate,c}function n(c,d){var e=d.mcc||c.marker.color,f=d.mlcc||c.marker.line.color;c=h(c,d);if(a.opacity(e))return e;if(a.opacity(f)&&c)return f}var k=b("../../components/fx"),m=b("../../registry"),a=b("../../components/color"),g=b("../../lib").fillText,h=b("./helpers").getLineWidth,r=b("../../plots/cartesian/axes").hoverLabelText,l=b("../../constants/numerical").BADNUM;N.exports={hoverPoints:function(c,
d,e,f,q){if(c=p(c,d,e,f,q))return e=c.cd,d=e[0].trace,e=e[c.index],c.color=n(d,e),m.getComponentMethod("errorbars","hoverInfo")(e,d,c),[c]},hoverOnBars:p,getTraceColor:n}},{"../../components/color":666,"../../components/fx":706,"../../constants/numerical":779,"../../lib":803,"../../plots/cartesian/axes":854,"../../registry":931,"./helpers":947}],949:[function(b,N,G){N.exports={attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults").supplyDefaults,crossTraceDefaults:b("./defaults").crossTraceDefaults,
supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc"),crossTraceCalc:b("./cross_trace_calc").crossTraceCalc,colorbar:b("../scatter/marker_colorbar"),arraysToCalcdata:b("./arrays_to_calcdata"),plot:b("./plot").plot,style:b("./style").style,styleOnSelect:b("./style").styleOnSelect,hoverPoints:b("./hover").hoverPoints,eventData:b("./event_data"),selectPoints:b("./select"),moduleType:"trace",name:"bar",basePlotModule:b("../../plots/cartesian"),categories:"bar-like cartesian svg bar oriented errorBarsOK showLegend zoomScale".split(" "),
animatable:!0,meta:{}}},{"../../plots/cartesian":868,"../scatter/marker_colorbar":1236,"./arrays_to_calcdata":940,"./attributes":941,"./calc":942,"./cross_trace_calc":944,"./defaults":945,"./event_data":946,"./hover":948,"./layout_attributes":950,"./layout_defaults":951,"./plot":952,"./select":953,"./style":955}],950:[function(b,N,G){N.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction",
"percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],951:[function(b,N,G){var p=b("../../registry"),n=b("../../plots/cartesian/axes"),k=b("../../lib"),m=b("./layout_attributes");N.exports=function(a,g,h){for(var r=!1,l=!1,c=!1,d={},e=k.coerce(a,g,m,"barmode",void 0),f=0;f<h.length;f++){var q=h[f];if(p.traceIs(q,"bar")&&q.visible){r=!0;if("group"===e){var t=q.xaxis+q.yaxis;d[t]&&(c=!0);d[t]=
!0}q.visible&&"histogram"===q.type&&"category"!==n.getFromId({_fullLayout:g},q["v"===q.orientation?"xaxis":"yaxis"]).type&&(l=!0)}}r?("overlay"!==e&&k.coerce(a,g,m,"barnorm",void 0),k.coerce(a,g,m,"bargap",l&&!c?0:.2),k.coerce(a,g,m,"bargroupgap",void 0)):delete g.barmode}},{"../../lib":803,"../../plots/cartesian/axes":854,"../../registry":931,"./layout_attributes":950}],952:[function(b,N,G){function p(I){return I.id}function n(I,L,H,M){var Q=[],Z=[],ca=M?L:H;L=M?H:L;Q[0]=ca.c2p(I.s0,!0);Z[0]=L.c2p(I.p0,
!0);Q[1]=ca.c2p(I.s1,!0);Z[1]=L.c2p(I.p1,!0);return M?[Q,Z]:[Z,Q]}function k(I,L,H,M){if(!L.uniformtext.mode&&H&&0<H.duration){var Q;M&&(Q=M());return I.transition().duration(H.duration).ease(H.easing).each("end",function(){Q&&Q()}).each("interrupt",function(){Q&&Q()})}return I}function m(I,L,H,M,Q,Z,ca,W,T,U,ha){function Y(za,Ia,Xa){return q.ensureSingle(za,"text").text(Ia).attr({"class":"bartext bartext-"+xa,"text-anchor":"middle","data-notex":1}).call(x.font,Xa).call(t.convertToTspans,I)}var ba=
L.xaxis,ja=L.yaxis;L=I._fullLayout;var ma=M[0].trace,ia="h"===ma.orientation,oa=r(L,M,Q,ba,ja);var xa=l(ma,Q);var ra=M[Q],la=!("stack"===U.mode||"relative"===U.mode)||ra._outmost;if(oa&&"none"!==xa&&(!ra.isBlank&&Z!==ca&&W!==T||"auto"!==xa&&"inside"!==xa)){var ka=L.font;M=C.getBarColor(M[Q],ma);M=C.getInsideTextFont(ma,Q,ka,M);Q=C.getOutsideTextFont(ma,Q,ka);ka=H.datum();ia?"log"===ba.type&&0>=ka.s0&&(Z=ba.range[0]<ba.range[1]?0:ba._length):"log"===ja.type&&0>=ka.s0&&(W=ja.range[0]<ja.range[1]?ja._length:
0);ba=Math.abs(ca-Z)-2*O;ja=Math.abs(T-W)-2*O;"outside"===xa&&(la||ra.hasB||(xa="inside"));if("auto"===xa)if(la){xa="inside";var na=q.ensureUniformFontSize(I,M);var qa=Y(H,oa,na);var ta=x.bBox(qa.node());la=ta.width;ka=ta.height;0<la&&0<ka&&(la<=ba&&ka<=ja||la<=ja&&ka<=ba||(ia?ba>=ja/ka*la:ja>=ba/la*ka))?xa="inside":(xa="outside",qa.remove(),qa=null)}else xa="inside";if(!qa&&(na=q.ensureUniformFontSize(I,"outside"===xa?Q:M),qa=Y(H,oa,na),H=qa.attr("transform"),qa.attr("transform",""),ta=x.bBox(qa.node()),
la=ta.width,ka=ta.height,qa.attr("transform",H),0>=la||0>=ka)){qa.remove();return}H=ma.textangle;"outside"===xa?(oa="both"===ma.constraintext||"outside"===ma.constraintext,Z=h(Z,ca,W,T,ta,{isHorizontal:ia,constrained:oa,angle:H})):(oa="both"===ma.constraintext||"inside"===ma.constraintext,Z=g(Z,ca,W,T,ta,{isHorizontal:ia,constrained:oa,angle:H,anchor:ma.insidetextanchor}));Z.fontSize=na.size;A(ma.type,Z,L);ra.transform=Z;k(qa,L,U,ha).attr("transform",q.getTextTransform(Z))}else H.select("text").remove()}
function a(I,L){var H=Math.PI/180*L;L=Math.abs(Math.sin(H));H=Math.abs(Math.cos(H));return{x:I.width*H+I.height*L,y:I.width*L+I.height*H}}function g(I,L,H,M,Q,Z){var ca=!!Z.isHorizontal,W=!!Z.constrained,T=Z.angle||0,U=Z.anchor||"end",ha="end"===U;U="start"===U;var Y=((Z.leftToRight||0)+1)/2,ba=1-Y,ja=Q.width,ma=Q.height,ia=Math.abs(L-I),oa=Math.abs(M-H);Z=ia>2*O&&oa>2*O?O:0;ia-=2*Z;oa-=2*Z;var xa="auto"===T?0:T;"auto"!==T||ja<=ia&&ma<=oa||!(ja>ia||ma>oa)||(ja>oa||ma>ia)&&ja<ma===ia<oa||(xa+=90);
ja=a(Q,xa);T=1;W&&(T=Math.min(1,ia/ja.x,oa/ja.y));W=Q.left*ba+Q.right*Y;Q=(Q.top+Q.bottom)/2;Y=(I+O)*ba+(L-O)*Y;ba=(H+M)/2;oa=ia=0;if(U||ha)ha=(ca?ja.x:ja.y)/2,ja=ca?I<L?1:-1:H<M?1:-1,ca?U?(Y=I+ja*Z,ia=-ja*ha):(Y=L-ja*Z,ia=ja*ha):U?(ba=H+ja*Z,oa=-ja*ha):(ba=M-ja*Z,oa=ja*ha);return{textX:W,textY:Q,targetX:Y,targetY:ba,anchorX:ia,anchorY:oa,scale:T,rotate:xa}}function h(I,L,H,M,Q,Z){var ca=!!Z.isHorizontal,W=!!Z.constrained,T=Z.angle||0,U=Q.width,ha=Q.height,Y=Math.abs(L-I),ba=Math.abs(M-H);Z=ca?ba>
2*O?O:0:Y>2*O?O:0;var ja=1;W&&(ja=ca?Math.min(1,ba/ha):Math.min(1,Y/U));W="auto"===T?0:T;T=a(Q,W);T=(ca?T.x:T.y)/2;U=(Q.left+Q.right)/2;Q=(Q.top+Q.bottom)/2;ha=(I+L)/2;Y=(H+M)/2;var ma=ba=0;I=ca?L<I?1:-1:H<M?1:-1;ca?(ha=L-I*Z,ba=I*T):(Y=M+I*Z,ma=-I*T);return{textX:U,textY:Q,targetX:ha,targetY:Y,anchorX:ba,anchorY:ma,scale:ja,rotate:W}}function r(I,L,H,M,Q){var Z=L[0].trace;I=Z.texttemplate?c(I,L,H,M,Q):Z.textinfo?d(L,H,M,Q):v.getValue(Z.text,H);return v.coerceString(F,I)}function l(I,L){I=v.getValue(I.textposition,
L);return v.coerceEnumerated(J,I)}function c(I,L,H,M,Q){function Z(ma){return B(ja,ja.c2l(ma),!0).text}var ca=L[0].trace,W=q.castOption(ca,H,"texttemplate");if(!W)return"";var T="waterfall"===ca.type,U="funnel"===ca.type;if("h"===ca.orientation){var ha="y";var Y=Q;var ba="x";var ja=M}else ha="x",Y=M,ba="y",ja=Q;H=L[H];L={};L.label=H.p;L.labelLabel=L[ha+"Label"]=B(Y,Y.c2l(H.p),!0).text;ha=q.castOption(ca,H.i,"text");if(0===ha||ha)L.text=ha;L.value=H.s;L.valueLabel=L[ba+"Label"]=Z(H.s);ba={};K(ba,ca,
H.i);T&&(L.delta=+H.rawS||H.s,L.deltaLabel=Z(L.delta),L.final=H.v,L.finalLabel=Z(L.final),L.initial=L.final-L.delta,L.initialLabel=Z(L.initial));U&&(L.value=H.s,L.valueLabel=Z(L.value),L.percentInitial=H.begR,L.percentInitialLabel=q.formatPercent(H.begR),L.percentPrevious=H.difR,L.percentPreviousLabel=q.formatPercent(H.difR),L.percentTotal=H.sumR,L.percenTotalLabel=q.formatPercent(H.sumR));if(T=q.castOption(ca,H.i,"customdata"))L.customdata=T;return q.texttemplateString(W,L,I._d3locale,ba,L,ca._meta||
{})}function d(I,L,H,M){function Q(ja){return B(ca?H:M,+ja,!0).text}var Z=I[0].trace,ca="h"===Z.orientation,W="waterfall"===Z.type,T="funnel"===Z.type,U=I[L],ha=Z.textinfo.split("+"),Y=[],ba=function(ja){return-1!==ha.indexOf(ja)};ba("label")&&Y.push(B(ca?M:H,I[L].p,!0).text);ba("text")&&(I=q.castOption(Z,U.i,"text"),(0===I||I)&&Y.push(I));W&&(W=+U.rawS||U.s,I=U.v,L=I-W,ba("initial")&&Y.push(Q(L)),ba("delta")&&Y.push(Q(W)),ba("final")&&Y.push(Q(I)));T&&(ba("value")&&Y.push(Q(U.s)),T=0,ba("percent initial")&&
T++,ba("percent previous")&&T++,ba("percent total")&&T++,T=1<T,ba("percent initial")&&(I=q.formatPercent(U.begR),T&&(I+=" of initial"),Y.push(I)),ba("percent previous")&&(I=q.formatPercent(U.difR),T&&(I+=" of previous"),Y.push(I)),ba("percent total")&&(I=q.formatPercent(U.sumR),T&&(I+=" of total"),Y.push(I)));return Y.join("\x3cbr\x3e")}var e=b("@plotly/d3"),f=b("fast-isnumeric"),q=b("../../lib"),t=b("../../lib/svg_text_utils"),w=b("../../components/color"),x=b("../../components/drawing"),z=b("../../registry"),
B=b("../../plots/cartesian/axes").tickText;G=b("./uniform_text");var A=G.recordMinTextSize,D=G.clearMinTextSize,C=b("./style"),v=b("./helpers");G=b("./constants");var y=b("./attributes"),F=y.text,J=y.textposition,K=b("../../components/fx/helpers").appendArrayPointValue,O=G.TEXTPAD;N.exports={plot:function(I,L,H,M,Q,Z){var ca=L.xaxis,W=L.yaxis,T=I._fullLayout;Q||(Q={mode:T.barmode,norm:T.barmode,gap:T.bargap,groupgap:T.bargroupgap},D("bar",T));H=q.makeTraceGroups(M,H,"trace bars").each(function(U){var ha=
e.select(this),Y=U[0].trace,ba="funnel"===Y.type,ja="bar"===Y.type||ba,ma=0;"waterfall"===Y.type&&Y.connector.visible&&"between"===Y.connector.mode&&(ma=Y.connector.line.width/2);var ia="h"===Y.orientation,oa=Q&&0<Q.duration;ba=q.ensureSingle(ha,"g","points");var xa=Y.ids?p:void 0;ba=ba.selectAll("g.point").data(q.identity,xa);ba.enter().append("g").classed("point",!0);ba.exit().remove();ba.each(function(ra,la){function ka(jb){var vb=e.round(sb/2%1,2);return 0===Q.gap&&0===Q.groupgap?e.round(Math.round(jb)-
vb,2):jb}function na(jb,vb,qb){return qb&&jb===vb?jb:2<=Math.abs(jb-vb)?ka(jb):jb>vb?Math.ceil(jb):Math.floor(jb)}var qa=e.select(this),ta=n(ra,ca,W,ia),za=ta[0][0],Ia=ta[0][1],Xa=ta[1][0];ta=ta[1][1];var $a=0===(ia?Ia-za:ta-Xa);$a&&ja&&v.getLineWidth(Y,ra)&&($a=!1);$a||($a=!f(za)||!f(Ia)||!f(Xa)||!f(ta));(ra.isBlank=$a)&&(ia?Ia=za:ta=Xa);ma&&!$a&&(ia?(za-=(za<Ia?1:-1)*ma,Ia+=(za<Ia?1:-1)*ma):(Xa-=(Xa<ta?1:-1)*ma,ta+=(Xa<ta?1:-1)*ma));if("waterfall"===Y.type){if(!$a){var gb=Y[ra.dir].marker;var sb=
gb.line.width;gb=gb.color}}else sb=v.getLineWidth(Y,ra),gb=ra.mc||Y.marker.color;I._context.staticPlot||(gb=1>w.opacity(gb)||.01<sb?ka:na,za=gb(za,Ia,ia),Ia=gb(Ia,za,ia),Xa=gb(Xa,ta,!ia),ta=gb(ta,Xa,!ia));gb=k(q.ensureSingle(qa,"path"),T,Q,Z);gb.style("vector-effect","non-scaling-stroke").attr("d",isNaN((Ia-za)*(ta-Xa))||$a&&I._context.staticPlot?"M0,0Z":"M"+za+","+Xa+"V"+ta+"H"+Ia+"V"+Xa+"Z").call(x.setClipUrl,L.layerClipId,I);!T.uniformtext.mode&&oa&&($a=x.makePointStyleFns(Y),x.singlePointStyle(ra,
gb,Y,$a,I));m(I,L,qa,U,la,za,Ia,Xa,ta,Q,Z);L.layerClipId&&x.hideOutsideRangePoint(ra,qa.select("text"),ca,W,Y.xcalendar,Y.ycalendar)});x.setClipUrl(ha,!1===Y.cliponaxis?null:L.layerClipId,I)});z.getComponentMethod("errorbars","plot")(I,H,L,Q)},toMoveInsideBar:g}},{"../../components/color":666,"../../components/drawing":688,"../../components/fx/helpers":702,"../../lib":803,"../../lib/svg_text_utils":829,"../../plots/cartesian/axes":854,"../../registry":931,"./attributes":941,"./constants":943,"./helpers":947,
"./style":955,"./uniform_text":957,"@plotly/d3":58,"fast-isnumeric":249}],953:[function(b,N,G){N.exports=function(p,n){var k=p.cd,m=p.xaxis,a=p.yaxis,g=k[0].trace,h="funnel"===g.type;g="h"===g.orientation;var r=[],l;if(!1===n)for(l=0;l<k.length;l++)k[l].selected=0;else for(l=0;l<k.length;l++){var c=k[l];if("ct"in c)var d=c.ct;else{var e=c,f=m,q=a;d=g;var t=h,w=f.c2p(d?e.s0:e.p0,!0);f=f.c2p(d?e.s1:e.p1,!0);var x=q.c2p(d?e.p0:e.s0,!0);e=q.c2p(d?e.p1:e.s1,!0);d=t?[(w+f)/2,(x+e)/2]:d?[f,(x+e)/2]:[(w+
f)/2,e]}n.contains(d,!1,l,p)?(r.push({pointNumber:l,x:m.c2d(c.x),y:a.c2d(c.y)}),c.selected=1):c.selected=0}return r}},{}],954:[function(b,N,G){function p(m,a){this.traces=m;this.sepNegVal=a.sepNegVal;this.overlapNoMerge=a.overlapNoMerge;for(var g=Infinity,h=[],r=0;r<m.length;r++){for(var l=m[r],c=0;c<l.length;c++){var d=l[c];d.p!==k&&h.push(d.p)}l[0]&&l[0].width1&&(g=Math.min(l[0].width1,g))}this.positions=h;m=n(h);this.distinctPositions=m.vals;this.minDiff=1===m.vals.length&&Infinity!==g?g:Math.min(m.minDiff,
g);a=(a.posAxis||{}).type;if("category"===a||"multicategory"===a)this.minDiff=1;this.binWidth=this.minDiff;this.bins={}}N.exports=p;var n=b("../../lib").distinctVals,k=b("../../constants/numerical").BADNUM;p.prototype.put=function(m,a){m=this.getLabel(m,a);var g=this.bins[m]||0;this.bins[m]=g+a;return g};p.prototype.get=function(m,a){m=this.getLabel(m,a);return this.bins[m]||0};p.prototype.getLabel=function(m,a){return(0>a&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?m:Math.round(m/this.binWidth))}},
{"../../constants/numerical":779,"../../lib":803}],955:[function(b,N,G){function p(z,B,A){z.selectAll("text").each(function(D){var C=r.select(this);D=d.ensureUniformFontSize(A,k(C,D,B,A));c.font(C,D)})}function n(z,B,A){z.each(function(D){var C=r.select(this);if(D.selected){D=d.ensureUniformFontSize(A,k(C,D,B,A));var v=B.selected.textfont&&B.selected.textfont.color;v&&(D.color=v);c.font(C,D)}else c.selectedTextStyle(C,B)})}function k(z,B,A,D){D=D._fullLayout.font;var C=A.textfont;z.classed("bartext-inside")?
(z=h(B,A),C=m(A,B.i,D,z)):z.classed("bartext-outside")&&(C=a(A,B.i,D));return C}function m(z,B,A,D){A=g(q,z.textfont,B,A);if(void 0===z._input.textfont||void 0===z._input.textfont.color||Array.isArray(z.textfont.color)&&void 0===z.textfont.color[B])A={color:l.contrast(D),family:A.family,size:A.size};return g(t,z.insidetextfont,B,A)}function a(z,B,A){A=g(q,z.textfont,B,A);return g(w,z.outsidetextfont,B,A)}function g(z,B,A,D){B=B||{};var C=x.getValue(B.family,A),v=x.getValue(B.size,A);B=x.getValue(B.color,
A);return{family:x.coerceString(z.family,C,D.family),size:x.coerceNumber(z.size,v,D.size),color:x.coerceColor(z.color,B,D.color)}}function h(z,B){return"waterfall"===B.type?B[z.dir].marker.color:z.mcc||z.mc||B.marker.color}var r=b("@plotly/d3"),l=b("../../components/color"),c=b("../../components/drawing"),d=b("../../lib"),e=b("../../registry"),f=b("./uniform_text").resizeText;G=b("./attributes");var q=G.textfont,t=G.insidetextfont,w=G.outsidetextfont,x=b("./helpers");N.exports={style:function(z){var B=
r.select(z).selectAll("g.barlayer").selectAll("g.trace");f(z,B,"bar");var A=B.size(),D=z._fullLayout;B.style("opacity",function(C){return C[0].trace.opacity}).each(function(C){("stack"===D.barmode&&1<A||0===D.bargap&&0===D.bargroupgap&&!C[0].trace.marker.line.width)&&r.select(this).attr("shape-rendering","crispEdges")});B.selectAll("g.points").each(function(C){var v=r.select(this);C=C[0].trace;c.pointStyle(v.selectAll("path"),C,z);p(v,C,z)});e.getComponentMethod("errorbars","style")(B)},styleTextPoints:p,
styleOnSelect:function(z,B,A){B=B[0].trace;B.selectedpoints?(c.selectedPointStyle(A.selectAll("path"),B),n(A.selectAll("text"),B,z)):(c.pointStyle(A.selectAll("path"),B,z),p(A,B,z),e.getComponentMethod("errorbars","style")(A))},getInsideTextFont:m,getOutsideTextFont:a,getBarColor:h,resizeText:f}},{"../../components/color":666,"../../components/drawing":688,"../../lib":803,"../../registry":931,"./attributes":941,"./helpers":947,"./uniform_text":957,"@plotly/d3":58}],956:[function(b,N,G){var p=b("../../components/color"),
n=b("../../components/colorscale/helpers").hasColorscale,k=b("../../components/colorscale/defaults"),m=b("../../lib").coercePattern;N.exports=function(a,g,h,r,l){r=h("marker.color",r);var c=n(a,"marker");c&&k(a,g,l,h,{prefix:"marker.",cLetter:"c"});h("marker.line.color",p.defaultLine);n(a,"marker.line")&&k(a,g,l,h,{prefix:"marker.line.",cLetter:"c"});h("marker.line.width");h("marker.opacity");m(h,"marker.pattern",r,c);h("selected.marker.color");h("unselected.marker.color")}},{"../../components/color":666,
"../../components/colorscale/defaults":676,"../../components/colorscale/helpers":677,"../../lib":803}],957:[function(b,N,G){var p=b("@plotly/d3"),n=b("../../lib");N.exports={recordMinTextSize:function(k,m,a){if(a.uniformtext.mode){k="_"+k+"Text_minsize";var g=a.uniformtext.minsize,h=m.scale*m.fontSize;m.hide=h<g;a[k]=a[k]||Infinity;m.hide||(a[k]=Math.min(a[k],Math.max(h,g)))}},clearMinTextSize:function(k,m){m["_"+k+"Text_minsize"]=void 0},resizeText:function(k,m,a){k=k._fullLayout;var g=k["_"+a+"Text_minsize"];
if(g){var h="hide"===k.uniformtext.mode;switch(a){case "funnelarea":case "pie":case "sunburst":a="g.slice";break;case "treemap":case "icicle":a="g.slice, g.pathbar";break;default:a="g.points \x3e g.point"}m.selectAll(a).each(function(r){if(r=r.transform)r.scale=h&&r.hide?0:g/r.fontSize,p.select(this).select("text").attr("transform",n.getTextTransform(r))})}}}},{"../../lib":803,"@plotly/d3":58}],958:[function(b,N,G){G=b("../../plots/template_attributes").hovertemplateAttrs;var p=b("../../lib/extend").extendFlat,
n=b("../scatterpolar/attributes");b=b("../bar/attributes");N.exports={r:n.r,theta:n.theta,r0:n.r0,dr:n.dr,theta0:n.theta0,dtheta:n.dtheta,thetaunit:n.thetaunit,base:p({},b.base,{}),offset:p({},b.offset,{}),width:p({},b.width,{}),text:p({},b.text,{}),hovertext:p({},b.hovertext,{}),marker:b.marker,hoverinfo:n.hoverinfo,hovertemplate:G(),selected:b.selected,unselected:b.unselected}},{"../../lib/extend":793,"../../plots/template_attributes":926,"../bar/attributes":941,"../scatterpolar/attributes":1292}],
959:[function(b,N,G){var p=b("../../components/colorscale/helpers").hasColorscale,n=b("../../components/colorscale/calc"),k=b("../bar/arrays_to_calcdata"),m=b("../bar/cross_trace_calc").setGroupPositions,a=b("../scatter/calc_selection"),g=b("../../registry").traceIs,h=b("../../lib").extendFlat;N.exports={calc:function(r,l){function c(x){var z=l[x];void 0!==z&&(l["_"+x]=Array.isArray(z)?f.makeCalcdata(l,x):f.d2c(z,l.thetaunit))}var d=r._fullLayout,e=l.subplot,f=d[e].angularaxis;d=d[e].radialaxis.makeCalcdata(l,
"r");e=f.makeCalcdata(l,"theta");for(var q=l._length,t=Array(q),w=0;w<q;w++)t[w]={p:e[w],s:d[w]};"linear"===f.type&&(c("width"),c("offset"));p(l,"marker")&&n(r,l,{vals:l.marker.color,containerStr:"marker",cLetter:"c"});p(l,"marker.line")&&n(r,l,{vals:l.marker.line.color,containerStr:"marker.line",cLetter:"c"});k(t,l);a(t,l);return t},crossTraceCalc:function(r,l,c){for(var d=r.calcdata,e=[],f=0;f<d.length;f++){var q=d[f],t=q[0].trace;!0===t.visible&&g(t,"bar")&&t.subplot===c&&e.push(q)}c=h({},l.radialaxis,
{_id:"x"});m(r,l.angularaxis,c,e,{mode:l.barmode,norm:l.barnorm,gap:l.bargap,groupgap:l.bargroupgap})}}},{"../../components/colorscale/calc":674,"../../components/colorscale/helpers":677,"../../lib":803,"../../registry":931,"../bar/arrays_to_calcdata":940,"../bar/cross_trace_calc":944,"../scatter/calc_selection":1220}],960:[function(b,N,G){var p=b("../../lib"),n=b("../scatterpolar/defaults").handleRThetaDefaults,k=b("../bar/style_defaults"),m=b("./attributes");N.exports=function(a,g,h,r){function l(c,
d){return p.coerce(a,g,m,c,d)}n(a,g,r,l)?(l("thetaunit"),l("base"),l("offset"),l("width"),l("text"),l("hovertext"),l("hovertemplate"),k(a,g,l,h,r),p.coerceSelectionMarkerOpacity(g,l)):g.visible=!1}},{"../../lib":803,"../bar/style_defaults":956,"../scatterpolar/defaults":1294,"./attributes":958}],961:[function(b,N,G){var p=b("../../components/fx"),n=b("../../lib"),k=b("../bar/hover").getTraceColor,m=n.fillText,a=b("../scatterpolar/hover").makeHoverPointText,g=b("../../plots/polar/helpers").isPtInsidePolygon;
N.exports=function(h,r,l){var c=h.cd,d=c[0].trace,e=h.subplot,f=e.radialAxis,q=e.vangles,t=q?g:n.isPtInsideSector,w=h.maxHoverDistance,x=e.angularAxis._period||2*Math.PI,z=Math.abs(f.g2p(Math.sqrt(r*r+l*l))),B=Math.atan2(l,r);f.range[0]>f.range[1]&&(B+=Math.PI);p.getClosest(c,function(A){return t(z,B,[A.rp0,A.rp1],[A.thetag0,A.thetag1],q)?w+Math.min(1,Math.abs(A.thetag1-A.thetag0)/x)-1+(A.rp1-z)/(A.rp1-A.rp0)-1:Infinity},h);if(!1!==h.index)return r=c[h.index],h.x0=h.x1=r.ct[0],h.y0=h.y1=r.ct[1],l=
n.extendFlat({},r,{r:r.s,theta:r.p}),m(r,d,h),a(l,d,e,h),h.hovertemplate=d.hovertemplate,h.color=k(d,r),h.xLabelVal=h.yLabelVal=void 0,0>r.s&&(h.idealAlign="left"),[h]}},{"../../components/fx":706,"../../lib":803,"../../plots/polar/helpers":919,"../bar/hover":948,"../scatterpolar/hover":1296}],962:[function(b,N,G){N.exports={moduleType:"trace",name:"barpolar",basePlotModule:b("../../plots/polar"),categories:["polar","bar","showLegend"],attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),
supplyDefaults:b("./defaults"),supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc").calc,crossTraceCalc:b("./calc").crossTraceCalc,plot:b("./plot"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("../scatterpolar/format_labels"),style:b("../bar/style").style,styleOnSelect:b("../bar/style").styleOnSelect,hoverPoints:b("./hover"),selectPoints:b("../bar/select"),meta:{}}},{"../../plots/polar":920,"../bar/select":953,"../bar/style":955,"../scatter/marker_colorbar":1236,"../scatterpolar/format_labels":1295,
"./attributes":958,"./calc":959,"./defaults":960,"./hover":961,"./layout_attributes":963,"./layout_defaults":964,"./plot":965}],963:[function(b,N,G){N.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},{}],964:[function(b,N,G){var p=b("../../lib"),n=b("./layout_attributes");N.exports=function(k,m,a){for(var g={},h,r=0;r<a.length;r++)h=a[r],"barpolar"===h.type&&!0===h.visible&&(h=h.subplot,
g[h]||(p.coerce(k[h]||{},m[h],n,"barmode",void 0),p.coerce(k[h]||{},m[h],n,"bargap",void 0),g[h]=1))}},{"../../lib":803,"./layout_attributes":963}],965:[function(b,N,G){function p(h){var r=h.cxx,l=h.cyy;return h.vangles?function(c,d,e,f){if(0<m.angleDelta(e,f)){var q=e;e=f}else q=f;f=g.findEnclosingVertexAngles(q,h.vangles)[0];var t=g.findEnclosingVertexAngles(e,h.vangles)[1];return g.pathPolygonAnnulus(c,d,q,e,[f,(q+e)/2,t],r,l)}:function(c,d,e,f){return m.pathAnnulus(c,d,e,f,r,l)}}var n=b("@plotly/d3"),
k=b("fast-isnumeric"),m=b("../../lib"),a=b("../../components/drawing"),g=b("../../plots/polar/helpers");N.exports=function(h,r,l){var c=r.xaxis,d=r.yaxis,e=r.radialAxis,f=r.angularAxis,q=p(r),t=r.layers.frontplot.select("g.barlayer");m.makeTraceGroups(t,l,"trace bars").each(function(){var w=n.select(this),x=m.ensureSingle(w,"g","points").selectAll("g.point").data(m.identity);x.enter().append("g").style("vector-effect","non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0);x.exit().remove();
x.each(function(z){var B=n.select(this),A=z.rp0=e.c2p(z.s0),D=z.rp1=e.c2p(z.s1),C=z.thetag0=f.c2g(z.p0),v=z.thetag1=f.c2g(z.p1);if(k(A)&&k(D)&&k(C)&&k(v)&&A!==D&&C!==v){var y=e.c2g(z.s1),F=(C+v)/2;z.ct=[c.c2p(y*Math.cos(F)),d.c2p(y*Math.sin(F))];z=q(A,D,C,v)}else z="M0,0Z";m.ensureSingle(B,"path").attr("d",z)});a.setClipUrl(w,r._hasClipOnAxisFalse?r.clipIds.forTraces:null,h)})}},{"../../components/drawing":688,"../../lib":803,"../../plots/polar/helpers":919,"@plotly/d3":58,"fast-isnumeric":249}],
966:[function(b,N,G){G=b("../scatter/attributes");var p=b("../bar/attributes"),n=b("../../components/color/attributes"),k=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat,m=b("../../plots/template_attributes").hovertemplateAttrs;b=b("../../lib/extend").extendFlat;var a=G.marker,g=a.line;N.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},
dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:G.xperiod,yperiod:G.yperiod,xperiod0:G.xperiod0,yperiod0:G.yperiod0,xperiodalignment:G.xperiodalignment,yperiodalignment:G.yperiodalignment,xhoverformat:k("x"),yhoverformat:k("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",
editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},
mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:b({},a.symbol,{arrayOk:!1,editType:"plot"}),opacity:b({},a.opacity,{arrayOk:!1,dflt:1,
editType:"style"}),size:b({},a.size,{arrayOk:!1,editType:"calc"}),color:b({},a.color,{arrayOk:!1,editType:"style"}),line:{color:b({},g.color,{arrayOk:!1,dflt:n.defaultLine,editType:"style"}),width:b({},g.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},
fillcolor:G.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:p.offsetgroup,alignmentgroup:p.alignmentgroup,selected:{marker:G.selected.marker,editType:"style"},unselected:{marker:G.unselected.marker,editType:"style"},text:b({},G.text,{}),hovertext:b({},G.hovertext,{}),hovertemplate:m({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":665,"../../lib/extend":793,"../../plots/cartesian/axis_format_attributes":857,
"../../plots/template_attributes":926,"../bar/attributes":941,"../scatter/attributes":1218}],967:[function(b,N,G){function p(x,z,B,A){var D=z+"0"in x;if(z in x||D&&"d"+z in x)return A=B.makeCalcdata(x,z),[e(x,B,z,A).vals,A];A=D?x[z+"0"]:"name"in x&&("category"===B.type||c(x.name)&&-1!==["linear","log"].indexOf(B.type)||f.isDateTime(x.name)&&"date"===B.type)?x.name:A;z="multicategory"===B.type?B.r2c_just_indices(A):B.d2c(A,0,x[z+"calendar"]);x=x._length;B=Array(x);for(A=0;A<x;A++)B[A]=z;return[B]}
function n(x,z){for(var B=x.length,A=Array(B+1),D=0;D<B;D++)A[D]=x[D]-z;A[B]=x[B-1]+z;return A}function k(x){for(var z=Array(x),B=0;B<x;B++)z[B]=[];return z}function m(x,z,B){for(var A in w)f.isArrayOrTypedArray(z[A])&&(Array.isArray(B)?f.isArrayOrTypedArray(z[A][B[0]])&&(x[w[A]]=z[A][B[0]][B[1]]):x[w[A]]=z[A][B])}function a(x,z){if(f.isArrayOrTypedArray(z.selectedpoints))for(var B=0;B<x.length;B++){for(var A=x[B].pts||[],D={},C=0;C<A.length;C++)D[A[C].i]=C;f.tagSelected(A,z,D)}}function g(x,z){return x.v-
z.v}function h(x){return x.v}function r(x,z,B){return 0===B?x.q1:Math.min(x.q1,z[Math.min(f.findBin(2.5*x.q1-1.5*x.q3,z,!0)+1,B-1)])}function l(x,z,B){return 0===B?x.q3:Math.max(x.q3,z[Math.max(f.findBin(2.5*x.q3-1.5*x.q1,z),0)])}var c=b("fast-isnumeric"),d=b("../../plots/cartesian/axes"),e=b("../../plots/cartesian/align_period"),f=b("../../lib"),q=b("../../constants/numerical").BADNUM,t=f._;N.exports=function(x,z){var B=x._fullLayout,A=d.getFromId(x,z.xaxis||"x"),D=d.getFromId(x,z.yaxis||"y"),C=
[],v="violin"===z.type?"_numViolins":"_numBoxes",y,F;if("h"===z.orientation){var J=A;var K="x";A="y";var O=!!z.yperiodalignment}else J=D,K="y",D=A,A="x",O=!!z.xperiodalignment;var I=p(z,A,D,B[v]),L=I[0],H=I[1];D=f.distinctVals(L,D);var M=D.vals;D=D.minDiff/2;I="all"===(z.boxpoints||z.points)?f.identity:function(ja){return ja.v<T.lf||ja.v>T.uf};if(z._hasPreCompStats){var Q=z[K],Z=function(ja){return J.d2c((z[ja]||[])[y])};M=Infinity;var ca=-Infinity;for(y=0;y<z._length;y++){var W=L[y];if(c(W)){var T=
{};T.pos=T[A]=W;O&&H&&(T.orig_p=H[y]);T.q1=Z("q1");T.med=Z("median");T.q3=Z("q3");W=[];if(Q&&f.isArrayOrTypedArray(Q[y]))for(F=0;F<Q[y].length;F++){var U=J.d2c(Q[y][F]);U!==q&&(U={v:U,i:[y,F]},m(U,z,[y,F]),W.push(U))}T.pts=W.sort(g);U=T[K]=W.map(h);F=U.length;if(T.med!==q&&T.q1!==q&&T.q3!==q&&T.med>=T.q1&&T.q3>=T.med){var ha=Z("lowerfence");T.lf=ha!==q&&ha<=T.q1?ha:r(T,U,F);ha=Z("upperfence");T.uf=ha!==q&&ha>=T.q3?ha:l(T,U,F);ha=Z("mean");T.mean=ha!==q?ha:F?f.mean(U,F):(T.q1+T.q3)/2;var Y=Z("sd");
T.sd=ha!==q&&0<=Y?Y:F?f.stdev(U,F,T.mean):T.q3-T.q1;T.lo=4*T.q1-3*T.q3;T.uo=4*T.q3-3*T.q1;ha=Z("notchspan");ha=ha!==q&&0<ha?ha:0===F?0:1.57*(T.q3-T.q1)/Math.sqrt(F);T.ln=T.med-ha;T.un=T.med+ha;ha=T.lf;Y=T.uf;z.boxpoints&&U.length&&(ha=Math.min(ha,U[0]),Y=Math.max(Y,U[F-1]));z.notched&&(ha=Math.min(ha,T.ln),Y=Math.max(Y,T.un));T.min=ha;T.max=Y}else f.warn(["Invalid input - make sure that q1 \x3c\x3d median \x3c\x3d q3","q1 \x3d "+T.q1,"median \x3d "+T.med,"q3 \x3d "+T.q3].join("\n")),U=T.med!==q?T.med:
T.q1!==q?T.q3!==q?(T.q1+T.q3)/2:T.q1:T.q3!==q?T.q3:0,T.med=U,T.q1=T.q3=U,T.lf=T.uf=U,T.mean=T.sd=U,T.ln=T.un=U,T.min=T.max=U;M=Math.min(M,T.min);ca=Math.max(ca,T.max);T.pts2=W.filter(I);C.push(T)}}z._extremes[J._id]=d.findExtremes(J,[M,ca],{padded:!0})}else{O=J.makeCalcdata(z,K);W=n(M,D);H=M.length;ca=k(H);for(y=0;y<z._length;y++)U=O[y],c(U)&&(F=f.findBin(L[y],W),0<=F&&F<H&&(U={v:U,i:y},m(U,z,y),ca[F].push(U)));L=Infinity;ha=-Infinity;W=z.quartilemethod;Y="exclusive"===W;var ba="inclusive"===W;for(y=
0;y<H;y++)0<ca[y].length&&(T={},T.pos=T[A]=M[y],W=T.pts=ca[y].sort(g),U=T[K]=W.map(h),F=U.length,T.min=U[0],T.max=U[F-1],T.mean=f.mean(U,F),T.sd=f.stdev(U,F,T.mean),T.med=f.interp(U,.5),F%2&&(Y||ba)?(Y?(Q=U.slice(0,F/2),Z=U.slice(F/2+1)):ba&&(Q=U.slice(0,F/2+1),Z=U.slice(F/2)),T.q1=f.interp(Q,.5),T.q3=f.interp(Z,.5)):(T.q1=f.interp(U,.25),T.q3=f.interp(U,.75)),T.lf=r(T,U,F),T.uf=l(T,U,F),T.lo=4*T.q1-3*T.q3,T.uo=4*T.q3-3*T.q1,U=0===F?0:1.57*(T.q3-T.q1)/Math.sqrt(F),T.ln=T.med-U,T.un=T.med+U,L=Math.min(L,
T.ln),ha=Math.max(ha,T.un),T.pts2=W.filter(I),C.push(T));z._extremes[J._id]=d.findExtremes(J,z.notched?O.concat([L,ha]):O,{padded:!0})}a(C,z);return 0<C.length?(C[0].t={num:B[v],dPos:D,posLetter:A,valLetter:K,labels:{med:t(x,"median:"),min:t(x,"min:"),q1:t(x,"q1:"),q3:t(x,"q3:"),max:t(x,"max:"),mean:"sd"===z.boxmean?t(x,"mean  :"):t(x,"mean:"),lf:t(x,"lower fence:"),uf:t(x,"upper fence:")}},B[v]++,C):[{t:{empty:!0}}]};var w={text:"tx",hovertext:"htx"}},{"../../constants/numerical":779,"../../lib":803,
"../../plots/cartesian/align_period":851,"../../plots/cartesian/axes":854,"fast-isnumeric":249}],968:[function(b,N,G){function p(g,h,r,l){var c=h.calcdata;h=h._fullLayout;var d=l._id,e=d.charAt(0),f,q,t=[],w=0;for(f=0;f<r.length;f++){var x=c[r[f]];for(q=0;q<x.length;q++)t.push(l.c2l(x[q].pos,!0)),w+=(x[q].pts2||[]).length}if(t.length){f=k.distinctVals(t);if("category"===l.type||"multicategory"===l.type)f.minDiff=1;t=f.minDiff/2;n.minDtick(l,f.minDiff,f.vals[0],!0);var z=h["violin"===g?"_numViolins":
"_numBoxes"],B="group"===h[g+"mode"]&&1<z,A=1-h[g+"gap"];g=1-h[g+"groupgap"];for(f=0;f<r.length;f++){x=c[r[f]];var D=x[0].trace,C=x[0].t;q=D.width;var v=D.side,y,F;if(q){var J=y=F=q/2;var K=0}else J=t,B?(y=m(h,l._id)+D.orientation,F=(y=Object.keys(((h._alignmentOpts[y]||{})[D.alignmentgroup]||{}).offsetGroups||{}).length)||z,K=y?D._offsetIndex:C.num,y=J*A*g/F,K=2*J*(-.5+(K+.5)/F)*A,F=J*A/F):(y=J*A*g,K=0,F=J);C.dPos=J;C.bPos=K;C.bdPos=y;C.wHover=F;y=K+y;C=!!q;F=(D.boxpoints||D.points)&&0<w;if("positive"===
v)v=J*(q?1:.5),q=K;else if("negative"===v){v=K;q=J*(q?1:.5);var O=y}else v=q=J,K=O=y;if(F){J=D.pointpos;F=D.jitter;var I=D.marker.size/2,L=0;if(0<=J+F)if(L=y*(J+F),L>v){C=!0;var H=I;var M=L}else L>K&&(H=I,M=v);L<=v&&(M=v);v=0;if(0>=J-F)if(v=-y*(J-F),v>q){C=!0;var Q=I;var Z=v}else v>O&&(Q=I,Z=q);v<=q&&(Z=q)}else M=v,Z=q;J=Array(x.length);for(q=0;q<x.length;q++)J[q]=x[q].pos;D._extremes[d]=n.findExtremes(l,J,{padded:C,vpadminus:Z,vpadplus:M,vpadLinearized:!0,ppadminus:{x:Q,y:H}[e],ppadplus:{x:H,y:Q}[e]})}}}
var n=b("../../plots/cartesian/axes"),k=b("../../lib"),m=b("../../plots/cartesian/constraints").getAxisGroup,a=["v","h"];N.exports={crossTraceCalc:function(g,h){var r=g.calcdata,l=h.xaxis;h=h.yaxis;for(var c=0;c<a.length;c++){for(var d=a[c],e="h"===d?h:l,f=[],q=0;q<r.length;q++){var t=r[q],w=t[0].t;t=t[0].trace;!0!==t.visible||"box"!==t.type&&"candlestick"!==t.type||w.empty||(t.orientation||"v")!==d||t.xaxis!==l._id||t.yaxis!==h._id||f.push(q)}p("box",g,f,e)}},setPositionOffset:p}},{"../../lib":803,
"../../plots/cartesian/axes":854,"../../plots/cartesian/constraints":862}],969:[function(b,N,G){function p(c,d,e,f){function q(K){var O=0;K&&K.length&&(O+=1,k.isArrayOrTypedArray(K[0])&&K[0].length&&(O+=1));return O}function t(K){return k.validate(c[K],l[K])}var w=e("y"),x=e("x");if("box"===d.type){var z=e("q1"),B=e("median");var A=e("q3");d._hasPreCompStats=z&&z.length&&B&&B.length&&A&&A.length;A=Math.min(k.minRowLength(z),k.minRowLength(B),k.minRowLength(A))}z=q(w);B=q(x);var D=z&&k.minRowLength(w),
C=B&&k.minRowLength(x),v=f.calendar,y={autotypenumbers:f.autotypenumbers};if(d._hasPreCompStats)switch(String(B)+String(z)){case "00":w=t("x0")||t("dx");var F=!t("y0")&&!t("dy")||w?"v":"h";var J=A;break;case "10":F="v";J=Math.min(A,C);break;case "20":F="h";J=Math.min(A,x.length);break;case "01":F="h";J=Math.min(A,D);break;case "02":F="v";J=Math.min(A,w.length);break;case "12":F="v";J=Math.min(A,C,w.length);break;case "21":F="h";J=Math.min(A,x.length,D);break;case "11":J=0;break;case "22":F=!1;for(J=
0;J<x.length;J++)if("category"===r(x[J],v,y)){F=!0;break}if(F)F="v",J=Math.min(A,C,w.length);else{for(J=0;J<w.length;J++)if("category"===r(w[J],v,y)){F=!0;break}F?(F="h",J=Math.min(A,x.length,D)):(F="v",J=Math.min(A,C,w.length))}}else 0<z?(F="v",J=0<B?Math.min(C,D):Math.min(D)):0<B?(F="h",J=Math.min(C)):J=0;J?(d._length=J,w=e("orientation",F),d._hasPreCompStats?"v"===w&&0===B?(e("x0",0),e("dx",1)):"h"===w&&0===z&&(e("y0",0),e("dy",1)):"v"===w&&0===B?e("x0"):"h"===w&&0===z&&e("y0"),m.getComponentMethod("calendars",
"handleTraceDefaults")(c,d,["x","y"],f)):d.visible=!1}function n(c,d,e,f){f=f.prefix;c=k.coerce2(c,d,l,"marker.outliercolor");var q=e("marker.line.outliercolor"),t="outliers";if(d._hasPreCompStats)t="all";else if(c||q)t="suspectedoutliers";(f=e(f+"points",t))?(e("jitter","all"===f?.3:0),e("pointpos","all"===f?-1.5:0),e("marker.symbol"),e("marker.opacity"),e("marker.size"),e("marker.color",d.line.color),e("marker.line.color"),e("marker.line.width"),"suspectedoutliers"===f&&(e("marker.line.outliercolor",
d.marker.color),e("marker.line.outlierwidth")),e("selected.marker.color"),e("unselected.marker.color"),e("selected.marker.size"),e("unselected.marker.size"),e("text"),e("hovertext")):delete d.marker;f=e("hoveron");"all"!==f&&-1===f.indexOf("points")||e("hovertemplate");k.coerceSelectionMarkerOpacity(d,e)}var k=b("../../lib"),m=b("../../registry"),a=b("../../components/color"),g=b("../scatter/period_defaults"),h=b("../bar/defaults").handleGroupingDefaults,r=b("../../plots/cartesian/axis_autotype"),
l=b("./attributes");N.exports={supplyDefaults:function(c,d,e,f){function q(x,z){return k.coerce(c,d,l,x,z)}p(c,d,q,f);if(!1!==d.visible){g(c,d,f,q);q("xhoverformat");q("yhoverformat");if(f=d._hasPreCompStats)q("lowerfence"),q("upperfence");q("line.color",(c.marker||{}).color||e);q("line.width");q("fillcolor",a.addOpacity(d.line.color,.5));e=!1;if(f){var t=q("mean"),w=q("sd");t&&t.length&&(e=!0,w&&w.length&&(e="sd"))}q("boxmean",e);q("whiskerwidth");q("width");q("quartilemethod");e=!1;f?(f=q("notchspan"))&&
f.length&&(e=!0):k.validate(c.notchwidth,l.notchwidth)&&(e=!0);q("notched",e)&&q("notchwidth");n(c,d,q,{prefix:"box"})}},crossTraceDefaults:function(c,d){function e(x){return k.coerce(q._input,q,l,x)}for(var f,q,t=0;t<c.length;t++){q=c[t];var w=q.type;if("box"===w||"violin"===w)f=q._input,"group"===d[w+"mode"]&&h(f,q,d,e)}},handleSampleDefaults:p,handlePointsDefaults:n}},{"../../components/color":666,"../../lib":803,"../../plots/cartesian/axis_autotype":855,"../../registry":931,"../bar/defaults":945,
"../scatter/period_defaults":1238,"./attributes":966}],970:[function(b,N,G){N.exports=function(p,n){n.hoverOnBox&&(p.hoverOnBox=n.hoverOnBox);"xVal"in n&&(p.x=n.xVal);"yVal"in n&&(p.y=n.yVal);n.xa&&(p.xaxis=n.xa);n.ya&&(p.yaxis=n.ya);return p}},{}],971:[function(b,N,G){function p(r,l,c,d){function e(M){return(O(M)+I(M))/2}var f=r.cd,q=r.xa,t=r.ya,w=f[0].trace,x=f[0].t,z="violin"===w.type,B=[];var A=x.bdPos;var D=x.wHover,C=function(M){return L.c2l(M.pos)+x.bPos-L.c2l(K)};if(z&&"both"!==w.side){if("positive"===
w.side){var v=function(M){M=C(M);return a.inbox(M,M+D,H)};var y=A;var F=0}"negative"===w.side&&(v=function(M){M=C(M);return a.inbox(M-D,M,H)},y=0,F=A)}else v=function(M){M=C(M);return a.inbox(M-D,M+D,H)},y=F=A;z=z?function(M){return a.inbox(M.span[0]-J,M.span[1]-J,H)}:function(M){return a.inbox(M.min-J,M.max-J,H)};if("h"===w.orientation){var J=l;var K=c;var O=z;var I=v;c="y";var L=t;l="x"}else J=c,K=l,O=v,I=z,c="x",L=q,l="y",q=t;A=Math.min(1,A/Math.abs(L.r2c(L.range[1])-L.r2c(L.range[0])));var H=
r.maxHoverDistance-A;A=r.maxSpikeDistance-A;d=a.getDistanceFunction(d,O,I,e);a.getClosest(f,d,r);if(!1===r.index)return[];f=f[r.index];d=w.line.color;t=(w.marker||{}).color;g.opacity(d)&&w.line.width?r.color=d:g.opacity(t)&&w.boxpoints?r.color=t:r.color=w.fillcolor;r[c+"0"]=L.c2p(f.pos+x.bPos-F,!0);r[c+"1"]=L.c2p(f.pos+x.bPos+y,!0);r[c+"LabelVal"]=void 0!==f.orig_p?f.orig_p:f.pos;y=c+"Spike";r.spikeDistance=e(f)*A/H;r[y]=L.c2p(f.pos,!0);F={};d=["med","q1","q3","min","max"];(w.boxmean||(w.meanline||
{}).visible)&&d.push("mean");(w.boxpoints||w.points)&&d.push("lf","uf");for(c=0;c<d.length;c++)A=d[c],A in f&&!(f[A]in F)&&(F[f[A]]=!0,t=f[A],v=q.c2p(t,!0),z=m.extendFlat({},r),z.attr=A,z[l+"0"]=z[l+"1"]=v,z[l+"LabelVal"]=t,z[l+"Label"]=(x.labels?x.labels[A]+" ":"")+k.hoverLabelText(q,t,w[l+"hoverformat"]),z.hoverOnBox=!0,"mean"===A&&"sd"in f&&"sd"===w.boxmean&&(z[l+"err"]=f.sd),r.name="",r.spikeDistance=void 0,r[y]=void 0,z.hovertemplate=!1,B.push(z));return B}function n(r,l,c){for(var d=r.cd,e=
r.xa,f=r.ya,q=d[0].trace,t=e.c2p(l),w=f.c2p(c),x=a.quadrature(function(D){var C=Math.max(3,D.mrc||0);return Math.max(Math.abs(e.c2p(D.x)-t)-C,1-3/C)},function(D){var C=Math.max(3,D.mrc||0);return Math.max(Math.abs(f.c2p(D.y)-w)-C,1-3/C)}),z=!1,B=0;B<d.length;B++){l=d[B];for(var A=0;A<(l.pts||[]).length;A++)c=l.pts[A],c=x(c),c<=r.distance&&(r.distance=c,z=[B,A])}if(!z)return!1;l=d[z[0]];c=l.pts[z[1]];d=e.c2p(c.x,!0);x=f.c2p(c.y,!0);z=c.mrc||1;r=m.extendFlat({},r,{index:c.i,color:(q.marker||{}).color,
name:q.name,x0:d-z,x1:d+z,y0:x-z,y1:x+z,spikeDistance:r.distance,hovertemplate:q.hovertemplate});d=l.orig_p;x=void 0!==d?d:l.pos;"h"===q.orientation?(d=f,r.xLabelVal=c.x,r.yLabelVal=x):(d=e,r.xLabelVal=x,r.yLabelVal=c.y);x=d._id.charAt(0);r[x+"Spike"]=d.c2p(l.pos,!0);h(c,q,r);return r}var k=b("../../plots/cartesian/axes"),m=b("../../lib"),a=b("../../components/fx"),g=b("../../components/color"),h=m.fillText;N.exports={hoverPoints:function(r,l,c,d){var e=r.cd[0].trace.hoveron,f=[],q;-1!==e.indexOf("boxes")&&
(f=f.concat(p(r,l,c,d)));-1!==e.indexOf("points")&&(q=n(r,l,c));if("closest"===d)return q?[q]:f;q&&f.push(q);return f},hoverOnBoxes:p,hoverOnPoints:n}},{"../../components/color":666,"../../components/fx":706,"../../lib":803,"../../plots/cartesian/axes":854}],972:[function(b,N,G){N.exports={attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults").supplyDefaults,crossTraceDefaults:b("./defaults").crossTraceDefaults,supplyLayoutDefaults:b("./layout_defaults").supplyLayoutDefaults,
calc:b("./calc"),crossTraceCalc:b("./cross_trace_calc").crossTraceCalc,plot:b("./plot").plot,style:b("./style").style,styleOnSelect:b("./style").styleOnSelect,hoverPoints:b("./hover").hoverPoints,eventData:b("./event_data"),selectPoints:b("./select"),moduleType:"trace",name:"box",basePlotModule:b("../../plots/cartesian"),categories:"cartesian svg symbols oriented box-violin showLegend boxLayout zoomScale".split(" "),meta:{}}},{"../../plots/cartesian":868,"./attributes":966,"./calc":967,"./cross_trace_calc":968,
"./defaults":969,"./event_data":970,"./hover":971,"./layout_attributes":973,"./layout_defaults":974,"./plot":975,"./select":976,"./style":977}],973:[function(b,N,G){N.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],974:[function(b,N,G){function p(a,g,h,r,l){a=l+"Layout";g=!1;for(var c=0;c<h.length;c++)if(n.traceIs(h[c],
a)){g=!0;break}g&&(r(l+"mode"),r(l+"gap"),r(l+"groupgap"))}var n=b("../../registry"),k=b("../../lib"),m=b("./layout_attributes");N.exports={supplyLayoutDefaults:function(a,g,h){p(a,g,h,function(r,l){return k.coerce(a,g,m,r,l)},"box")},_supply:p}},{"../../lib":803,"../../registry":931,"./layout_attributes":973}],975:[function(b,N,G){function p(h,r,l,c){var d="h"===l.orientation,e=r.val,f=r.pos,q=!!f.rangebreaks,t=c.bPos,w=c.wdPos||0,x=c.bPosPxOffset||0,z=l.whiskerwidth||0,B=l.notched||!1,A=B?1-2*l.notchwidth:
1;if(Array.isArray(c.bdPos)){var D=c.bdPos[0];var C=c.bdPos[1]}else C=D=c.bdPos;h=h.selectAll("path.box").data("violin"!==l.type||l.box.visible?a.identity:[]);h.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box");h.exit().remove();h.each(function(v){if(v.empty)return"M0,0Z";var y=f.c2l(v.pos+t,!0),F=f.l2p(y-D)+x,J=f.l2p(y+C)+x,K=q?(F+J)/2:f.l2p(y)+x,O=l.whiskerwidth,I=q?F*O+(1-O)*K:f.l2p(y-w)+x;O=q?J*O+(1-O)*K:f.l2p(y+w)+x;var L=f.l2p(y-D*A)+x;y=f.l2p(y+C*A)+x;var H=
e.c2p(v.q1,!0),M=e.c2p(v.q3,!0),Q=a.constrain(e.c2p(v.med,!0),Math.min(H,M)+1,Math.max(H,M)-1),Z=void 0===v.lf||!1===l.boxpoints,ca=e.c2p(Z?v.min:v.lf,!0);Z=e.c2p(Z?v.max:v.uf,!0);var W=e.c2p(v.ln,!0);v=e.c2p(v.un,!0);d?m.select(this).attr("d","M"+Q+","+L+"V"+y+"M"+H+","+F+"V"+J+(B?"H"+W+"L"+Q+","+y+"L"+v+","+J:"")+"H"+M+"V"+F+(B?"H"+v+"L"+Q+","+L+"L"+W+","+F:"")+"ZM"+H+","+K+"H"+ca+"M"+M+","+K+"H"+Z+(0===z?"":"M"+ca+","+I+"V"+O+"M"+Z+","+I+"V"+O)):m.select(this).attr("d","M"+L+","+Q+"H"+y+"M"+F+
","+H+"H"+J+(B?"V"+W+"L"+y+","+Q+"L"+J+","+v:"")+"V"+M+"H"+F+(B?"V"+v+"L"+L+","+Q+"L"+F+","+W:"")+"ZM"+K+","+H+"V"+ca+"M"+K+","+M+"V"+Z+(0===z?"":"M"+I+","+ca+"H"+O+"M"+I+","+Z+"H"+O))})}function n(h,r,l,c){var d=r.x;r=r.y;var e=c.bdPos,f=c.bPos,q=l.boxpoints||l.points;a.seedPseudoRandom();var t=function(w){w.forEach(function(x){x.t=c;x.trace=l});return w};h=h.selectAll("g.points").data(q?t:[]);h.enter().append("g").attr("class","points");h.exit().remove();h=h.selectAll("path").data(function(w){var x=
w.pts2;var z=Math.max((w.max-w.min)/10,w.q3-w.q1);var B=1E-9*z,A=.01*z,D=[],C=0;if(l.jitter){if(0===z)for(C=1,D=Array(x.length),z=0;z<x.length;z++)D[z]=1;else for(z=0;z<x.length;z++){var v=Math.max(0,z-5);var y=x[v].v,F=Math.min(x.length-1,z+5),J=x[F].v;"all"!==q&&(x[z].v<w.lf?J=Math.min(J,w.lf):y=Math.max(y,w.uf));v=Math.sqrt(A*(F-v)/(J-y+B))||0;v=a.constrain(Math.abs(v),0,1);D.push(v);C=Math.max(v,C)}v=2*l.jitter/(C||1)}for(z=0;z<x.length;z++)B=x[z],A=B.v,C=l.jitter?v*D[z]*(a.pseudoRandom()-.5):
0,C=w.pos+f+e*(l.pointpos+C),"h"===l.orientation?(B.y=C,B.x=A):(B.x=C,B.y=A),"suspectedoutliers"===q&&A<w.uo&&A>w.lo&&(B.so=!0);return x});h.enter().append("path").classed("point",!0);h.exit().remove();h.call(g.translatePoints,d,r)}function k(h,r,l,c){var d=r.val,e=r.pos,f=!!e.rangebreaks,q=c.bPos,t=c.bPosPxOffset||0,w=l.boxmean||(l.meanline||{}).visible;if(Array.isArray(c.bdPos)){var x=c.bdPos[0];var z=c.bdPos[1]}else z=x=c.bdPos;h=h.selectAll("path.mean").data("box"===l.type&&l.boxmean||"violin"===
l.type&&l.box.visible&&l.meanline.visible?a.identity:[]);h.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"});h.exit().remove();h.each(function(B){var A=e.c2l(B.pos+q,!0),D=e.l2p(A-x)+t,C=e.l2p(A+z)+t;A=f?(D+C)/2:e.l2p(A)+t;var v=d.c2p(B.mean,!0),y=d.c2p(B.mean-B.sd,!0);B=d.c2p(B.mean+B.sd,!0);"h"===l.orientation?m.select(this).attr("d","M"+v+","+D+"V"+C+("sd"===w?"m0,0L"+y+","+A+"L"+v+","+D+"L"+B+","+A+"Z":"")):m.select(this).attr("d","M"+D+","+
v+"H"+C+("sd"===w?"m0,0L"+A+","+y+"L"+D+","+v+"L"+A+","+B+"Z":""))})}var m=b("@plotly/d3"),a=b("../../lib"),g=b("../../components/drawing");N.exports={plot:function(h,r,l,c){var d=r.xaxis,e=r.yaxis;a.makeTraceGroups(c,l,"trace boxes").each(function(f){var q=m.select(this),t=f[0];f=t.t;t=t.trace;f.wdPos=f.bdPos*t.whiskerwidth;if(!0!==t.visible||f.empty)q.remove();else{if("h"===t.orientation){var w=e;var x=d}else w=d,x=e;p(q,{pos:w,val:x},t,f);n(q,{x:d,y:e},t,f);k(q,{pos:w,val:x},t,f)}})},plotBoxAndWhiskers:p,
plotPoints:n,plotBoxMean:k}},{"../../components/drawing":688,"../../lib":803,"@plotly/d3":58}],976:[function(b,N,G){N.exports=function(p,n){var k=p.cd,m=p.xaxis,a=p.yaxis,g=[],h,r;if(!1===n)for(h=0;h<k.length;h++)for(r=0;r<(k[h].pts||[]).length;r++)k[h].pts[r].selected=0;else for(h=0;h<k.length;h++)for(r=0;r<(k[h].pts||[]).length;r++){var l=k[h].pts[r],c=m.c2p(l.x),d=a.c2p(l.y);n.contains([c,d],null,l.i,p)?(g.push({pointNumber:l.i,x:m.c2d(l.x),y:a.c2d(l.y)}),l.selected=1):l.selected=0}return g}},
{}],977:[function(b,N,G){var p=b("@plotly/d3"),n=b("../../components/color"),k=b("../../components/drawing");N.exports={style:function(m,a,g){a=g?g:p.select(m).selectAll("g.trace.boxes");a.style("opacity",function(h){return h[0].trace.opacity});a.each(function(h){function r(e,f,q,t){e.style("stroke-width",f+"px").call(n.stroke,q).call(n.fill,t)}var l=p.select(this),c=h[0].trace;h=c.line.width;var d=l.selectAll("path.box");"candlestick"===c.type?d.each(function(e){if(!e.empty){var f=p.select(this),
q=c[e.dir];r(f,q.line.width,q.line.color,q.fillcolor);f.style("opacity",c.selectedpoints&&!e.selected?.3:1)}}):(r(d,h,c.line.color,c.fillcolor),l.selectAll("path.mean").style({"stroke-width":h,"stroke-dasharray":2*h+"px,"+h+"px"}).call(n.stroke,c.line.color),l=l.selectAll("path.point"),k.pointStyle(l,c,m))})},styleOnSelect:function(m,a,g){a=a[0].trace;g=g.selectAll("path.point");a.selectedpoints?k.selectedPointStyle(g,a):k.pointStyle(g,a,m)}}},{"../../components/color":666,"../../components/drawing":688,
"@plotly/d3":58}],978:[function(b,N,G){function p(a){return{line:{color:n({},m.line.color,{dflt:a}),width:m.line.width,editType:"style"},fillcolor:m.fillcolor,editType:"style"}}var n=b("../../lib").extendFlat;G=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat;var k=b("../ohlc/attributes"),m=b("../box/attributes");N.exports={xperiod:k.xperiod,xperiod0:k.xperiod0,xperiodalignment:k.xperiodalignment,xhoverformat:G("x"),yhoverformat:G("y"),x:k.x,open:k.open,high:k.high,low:k.low,close:k.close,
line:{width:n({},m.line.width,{}),editType:"style"},increasing:p(k.increasing.line.color.dflt),decreasing:p(k.decreasing.line.color.dflt),text:k.text,hovertext:k.hovertext,whiskerwidth:n({},m.whiskerwidth,{dflt:0}),hoverlabel:k.hoverlabel}},{"../../lib":803,"../../plots/cartesian/axis_format_attributes":857,"../box/attributes":966,"../ohlc/attributes":1164}],979:[function(b,N,G){function p(g,h,r,l){return{min:r,q1:Math.min(g,l),med:l,q3:Math.max(g,l),max:h}}var n=b("../../lib"),k=b("../../plots/cartesian/axes"),
m=b("../../plots/cartesian/align_period"),a=b("../ohlc/calc").calcCommon;N.exports=function(g,h){var r=g._fullLayout,l=k.getFromId(g,h.xaxis),c=k.getFromId(g,h.yaxis),d=l.makeCalcdata(h,"x");l=m(h,l,"x",d).vals;g=a(g,h,d,l,c,p);return g.length?(n.extendFlat(g[0].t,{num:r._numBoxes,dPos:n.distinctVals(l).minDiff/2,posLetter:"x",valLetter:"y"}),r._numBoxes++,g):[{t:{empty:!0}}]}},{"../../lib":803,"../../plots/cartesian/align_period":851,"../../plots/cartesian/axes":854,"../ohlc/calc":1165}],980:[function(b,
N,G){function p(h,r,l,c){h=l(c+".line.color");l(c+".line.width",r.line.width);l(c+".fillcolor",k.addOpacity(h,.5))}var n=b("../../lib"),k=b("../../components/color"),m=b("../ohlc/ohlc_defaults"),a=b("../scatter/period_defaults"),g=b("./attributes");N.exports=function(h,r,l,c){function d(e,f){return n.coerce(h,r,g,e,f)}m(h,r,d,c)?(a(h,r,c,d,{x:!0}),d("xhoverformat"),d("yhoverformat"),d("line.width"),p(h,r,d,"increasing"),p(h,r,d,"decreasing"),d("text"),d("hovertext"),d("whiskerwidth"),c._requestRangeslider[r.xaxis]=
!0):r.visible=!1}},{"../../components/color":666,"../../lib":803,"../ohlc/ohlc_defaults":1169,"../scatter/period_defaults":1238,"./attributes":978}],981:[function(b,N,G){N.exports={moduleType:"trace",name:"candlestick",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:b("./attributes"),layoutAttributes:b("../box/layout_attributes"),supplyLayoutDefaults:b("../box/layout_defaults").supplyLayoutDefaults,crossTraceCalc:b("../box/cross_trace_calc").crossTraceCalc,
supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("../box/plot").plot,layerName:"boxlayer",style:b("../box/style").style,hoverPoints:b("../ohlc/hover").hoverPoints,selectPoints:b("../ohlc/select")}},{"../../plots/cartesian":868,"../box/cross_trace_calc":968,"../box/layout_attributes":973,"../box/layout_defaults":974,"../box/plot":975,"../box/style":977,"../ohlc/hover":1167,"../ohlc/select":1171,"./attributes":978,"./calc":979,"./defaults":980}],982:[function(b,N,G){function p(m,a,g,h){["aaxis",
"baxis"].forEach(function(r){var l=r.charAt(0),c=m[r]||{},d=k.newContainer(a,r);n(c,d,{tickfont:"x",id:l+"axis",letter:l,font:a.font,name:r,data:m[l],calendar:a.calendar,dfltColor:h,bgColor:g.paper_bgcolor,autotypenumbersDflt:g.autotypenumbers,fullLayout:g});d._categories=d._categories||[];m[r]||"-"===c.type||(m[r]={type:c.type})})}var n=b("./axis_defaults"),k=b("../../plot_api/plot_template");N.exports=function(m,a,g,h,r){h("a")||(h("da"),h("a0"));h("b")||(h("db"),h("b0"));p(m,a,g,r)}},{"../../plot_api/plot_template":843,
"./axis_defaults":987}],983:[function(b,N,G){function p(k,m){if(!n(k)||10<=m)return null;for(var a=Infinity,g=-Infinity,h=k.length,r=0;r<h;r++){var l=k[r];if(n(l)){if(l=p(l,m+1))a=Math.min(l[0],a),g=Math.max(l[1],g)}else a=Math.min(l,a),g=Math.max(l,g)}return[a,g]}var n=b("../../lib").isArrayOrTypedArray;N.exports=function(k){return p(k,0)}},{"../../lib":803}],984:[function(b,N,G){var p=b("../../plots/font_attributes");G=b("./axis_attributes");b=b("../../components/color/attributes");p=p({editType:"calc"});
p.family.dflt='"Open Sans", verdana, arial, sans-serif';p.size.dflt=12;p.color.dflt=b.defaultLine;N.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",
dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:G,baxis:G,font:p,color:{valType:"color",dflt:b.defaultLine,editType:"plot"},transforms:void 0}},{"../../components/color/attributes":665,"../../plots/font_attributes":883,"./axis_attributes":986}],985:[function(b,N,G){var p=b("../../lib").isArrayOrTypedArray;N.exports=function(n,k,m,a){var g=p(m)?"a":"b",h=("a"===g?n.aaxis:n.baxis).smoothing,r="a"===g?n.a2i:n.b2j,l="a"===g?m:a;a="a"===g?a:m;m="a"===g?k.a.length:k.b.length;
var c="a"===g?k.b.length:k.a.length,d=Math.floor("a"===g?n.b2j(a):n.a2i(a));k="a"===g?function(F){return n.evalxy([],F,d)}:function(F){return n.evalxy([],d,F)};if(h){var e=Math.max(0,Math.min(c-2,d));var f=d-e;var q="a"===g?function(F,J){return n.dxydi([],F,e,J,f)}:function(F,J){return n.dxydj([],e,F,f,J)}}g=r(l[0]);r=r(l[1]);l=g<r?1:-1;var t=1E-8*(r-g);var w=0<l?Math.ceil:Math.floor;a=0<l?Math.min:Math.max;c=0<l?Math.max:Math.min;var x=(0<l?Math.floor:Math.ceil)(g+t);w=w(r-t);t=k(g);for(var z=[[t]];x*
l<w*l;x+=l){var B=[];var A=c(g,x);var D=a(r,x+l);var C=D-A;var v=Math.max(0,Math.min(m-2,Math.floor(.5*(A+D))));var y=k(D);h&&(A=q(v,A-v),v=q(v,D-v),B.push([t[0]+A[0]/3*C,t[1]+A[1]/3*C]),B.push([y[0]-v[0]/3*C,y[1]-v[1]/3*C]));B.push(y);z.push(B);t=y}return z}},{"../../lib":803}],986:[function(b,N,G){G=b("../../plots/font_attributes");var p=b("../../components/color/attributes"),n=b("../../plots/cartesian/layout_attributes"),k=b("../../plots/cartesian/axis_format_attributes").descriptionWithDates;
b=b("../../plot_api/edit_types").overrideAll;N.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:G({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:n.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,
editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,
dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:G({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",
editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:"none e E power SI B".split(" "),dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:k("tick label")},
tickformatstops:b(n.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:p.defaultLine,
editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgridcolor:{valType:"color",dflt:p.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",
editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},
titlefont:G({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},{"../../components/color/attributes":665,"../../plot_api/edit_types":836,"../../plots/cartesian/axis_format_attributes":857,"../../plots/cartesian/layout_attributes":869,"../../plots/font_attributes":883}],987:[function(b,N,G){function p(d,e){if("-"===d.type){var f=d._id.charAt(0);d.type=c(e,d[f+"calendar"],{autotypenumbers:d.autotypenumbers})}}var n=b("./attributes"),k=b("../../components/color").addOpacity,
m=b("../../registry"),a=b("../../lib"),g=b("../../plots/cartesian/tick_value_defaults"),h=b("../../plots/cartesian/tick_label_defaults"),r=b("../../plots/cartesian/category_order_defaults"),l=b("../../plots/cartesian/set_convert"),c=b("../../plots/cartesian/axis_autotype");N.exports=function(d,e,f){function q(C,v){return a.coerce(d,e,z,C,v)}function t(C,v){return a.coerce2(d,e,z,C,v)}var w=f.letter,x=f.font||{},z=n[w+"axis"];f.name&&(e._name=f.name,e._id=f.name);q("autotypenumbers",f.autotypenumbersDflt);
var B=q("type");"-"===B&&(f.data&&p(e,f.data),"-"===e.type?e.type="linear":B=d.type=e.type);q("smoothing");q("cheatertype");q("showticklabels");q("labelprefix",w+" \x3d ");q("labelsuffix");q("showtickprefix");q("showticksuffix");q("separatethousands");q("tickformat");q("exponentformat");q("minexponent");q("showexponent");q("categoryorder");q("tickmode");q("tickvals");q("ticktext");q("tick0");q("dtick");"array"===e.tickmode&&(q("arraytick0"),q("arraydtick"));q("labelpadding");e._hovertitle=w;"date"===
B&&m.getComponentMethod("calendars","handleDefaults")(d,e,"calendar",f.calendar);l(e,f.fullLayout);e.c2p=a.identity;var A=q("color",f.dfltColor),D=A===d.color?A:x.color;q("title.text")&&(a.coerceFont(q,"title.font",{family:x.family,size:a.bigFont(x.size),color:D}),q("title.offset"));q("tickangle");q("autorange",!e.isValidRange(d.range))&&q("rangemode");q("range");e.cleanRange();q("fixedrange");g(d,e,q,B);h(d,e,q,B,f);r(d,e,q,{data:f.data,dataAttr:w});f=t("gridcolor",k(A,.3));w=t("gridwidth");x=q("showgrid");
x||(delete e.gridcolor,delete e.gridwidth);B=t("startlinecolor",A);D=t("startlinewidth",w);q("startline",e.showgrid||!!B||!!D)||(delete e.startlinecolor,delete e.startlinewidth);A=t("endlinecolor",A);B=t("endlinewidth",w);q("endline",e.showgrid||!!A||!!B)||(delete e.endlinecolor,delete e.endlinewidth);x?(q("minorgridcount"),q("minorgridwidth",w),q("minorgridcolor",k(f,.06)),e.minorgridcount||(delete e.minorgridwidth,delete e.minorgridcolor)):(delete e.gridcolor,delete e.gridWidth);"none"===e.showticklabels&&
(delete e.tickfont,delete e.tickangle,delete e.showexponent,delete e.exponentformat,delete e.minexponent,delete e.tickformat,delete e.showticksuffix,delete e.showtickprefix);e.showticksuffix||delete e.ticksuffix;e.showtickprefix||delete e.tickprefix;q("tickmode");return e}},{"../../components/color":666,"../../lib":803,"../../plots/cartesian/axis_autotype":855,"../../plots/cartesian/category_order_defaults":859,"../../plots/cartesian/set_convert":875,"../../plots/cartesian/tick_label_defaults":876,
"../../plots/cartesian/tick_value_defaults":878,"../../registry":931,"./attributes":984}],988:[function(b,N,G){var p=b("../../plots/cartesian/axes"),n=b("../../lib").isArray1D,k=b("./cheater_basis"),m=b("./array_minmax"),a=b("./calc_gridlines"),g=b("./calc_labels"),h=b("./calc_clippath"),r=b("../heatmap/clean_2d_array"),l=b("./smooth_fill_2d_array"),c=b("../heatmap/convert_column_xyz"),d=b("./set_convert");N.exports=function(e,f){var q=p.getFromId(e,f.xaxis);e=p.getFromId(e,f.yaxis);var t=f.aaxis,
w=f.baxis,x=f.x,z=f.y,B=[];x&&n(x)&&B.push("x");z&&n(z)&&B.push("y");B.length&&c(f,t,w,"a","b",B);B=f._a=f._a||f.a;var A=f._b=f._b||f.b;x=f._x||f.x;z=f._y||f.y;var D={};f._cheater&&(x=k("index"===t.cheatertype?B.length:B,"index"===w.cheatertype?A.length:A,f.cheaterslope));f._x=x=r(x);f._y=z=r(z);l(x,B,A);l(z,B,A);d(f);f.setScale();var C=m(x),v=m(z),y=.5*(C[1]-C[0]);C=.5*(C[1]+C[0]);var F=.5*(v[1]-v[0]);v=.5*(v[1]+v[0]);C=[C-1.3*y,C+1.3*y];v=[v-1.3*F,v+1.3*F];f._extremes[q._id]=p.findExtremes(q,C,
{padded:!0});f._extremes[e._id]=p.findExtremes(e,v,{padded:!0});a(f,"a","b");a(f,"b","a");g(f,t);g(f,w);D.clipsegments=h(f._xctrl,f._yctrl,t,w);D.x=x;D.y=z;D.a=B;D.b=A;return[D]}},{"../../lib":803,"../../plots/cartesian/axes":854,"../heatmap/clean_2d_array":1087,"../heatmap/convert_column_xyz":1089,"./array_minmax":983,"./calc_clippath":989,"./calc_gridlines":990,"./calc_labels":991,"./cheater_basis":993,"./set_convert":1006,"./smooth_fill_2d_array":1007}],989:[function(b,N,G){N.exports=function(p,
n,k,m){var a,g=[];k=!!k.smoothing;var h=!!m.smoothing,r=p[0].length-1,l=p.length-1;m=0;var c=[];for(a=[];m<=r;m++)c[m]=p[0][m],a[m]=n[0][m];g.push({x:c,y:a,bicubic:k});m=0;c=[];for(a=[];m<=l;m++)c[m]=p[m][r],a[m]=n[m][r];g.push({x:c,y:a,bicubic:h});m=r;c=[];for(a=[];0<=m;m--)c[r-m]=p[l][m],a[r-m]=n[l][m];g.push({x:c,y:a,bicubic:k});m=l;c=[];for(a=[];0<=m;m--)c[l-m]=p[m][0],a[l-m]=n[m][0];g.push({x:c,y:a,bicubic:h});return g}},{}],990:[function(b,N,G){var p=b("../../plots/cartesian/axes"),n=b("../../lib/extend").extendFlat;
N.exports=function(k,m,a){function g(I){var L,H=[],M=[],Q={};if("b"===m){var Z=k.b2j(I);var ca=Math.floor(Math.max(0,Math.min(D-2,Z)));var W=Z-ca;Q.length=D;Q.crossLength=A;Q.xy=function(ja){return k.evalxy([],ja,Z)};Q.dxy=function(ja,ma){return k.dxydi([],ja,ca,ma,W)};for(L=0;L<A;L++){var T=Math.min(A-2,L);var U=L-T;var ha=k.evalxy([],L,Z);if(t.smoothing&&0<L){var Y=k.dxydi([],L-1,ca,0,W);H.push(ba[0]+Y[0]/3);M.push(ba[1]+Y[1]/3);var ba=k.dxydi([],L-1,ca,1,W);H.push(ha[0]-ba[0]/3);M.push(ha[1]-ba[1]/
3)}H.push(ha[0]);M.push(ha[1]);ba=ha}}else for(L=k.a2i(I),T=Math.floor(Math.max(0,Math.min(A-2,L))),U=L-T,Q.length=A,Q.crossLength=D,Q.xy=function(ja){return k.evalxy([],L,ja)},Q.dxy=function(ja,ma){return k.dxydj([],T,ja,U,ma)},Z=0;Z<D;Z++)ca=Math.min(D-2,Z),W=Z-ca,ha=k.evalxy([],L,Z),t.smoothing&&0<Z&&(Y=k.dxydj([],T,Z-1,U,0),H.push(ba[0]+Y[0]/3),M.push(ba[1]+Y[1]/3),ba=k.dxydj([],T,Z-1,U,1),H.push(ha[0]-ba[0]/3),M.push(ha[1]-ba[1]/3)),H.push(ha[0]),M.push(ha[1]),ba=ha;Q.axisLetter=m;Q.axis=c;Q.crossAxis=
t;Q.value=I;Q.constvar=a;Q.index=r;Q.x=H;Q.y=M;Q.smoothing=t.smoothing;return Q}function h(I){var L,H=[],M=[],Q={};Q.length=l.length;Q.crossLength=q.length;if("b"===m){var Z=Math.max(0,Math.min(D-2,I));var ca=Math.min(1,Math.max(0,I-Z));Q.xy=function(U){return k.evalxy([],U,I)};Q.dxy=function(U,ha){return k.dxydi([],U,Z,ha,ca)};for(L=0;L<z;L++)H[L]=w[I*C][L],M[L]=x[I*C][L]}else{var W=Math.max(0,Math.min(A-2,I));var T=Math.min(1,Math.max(0,I-W));Q.xy=function(U){return k.evalxy([],I,U)};Q.dxy=function(U,
ha){return k.dxydj([],W,U,T,ha)};for(L=0;L<B;L++)H[L]=w[L][I*C],M[L]=x[L][I*C]}Q.axisLetter=m;Q.axis=c;Q.crossAxis=t;Q.value=l[I];Q.constvar=a;Q.index=I;Q.x=H;Q.y=M;Q.smoothing=t.smoothing;return Q}var r,l=k["_"+m],c=k[m+"axis"];var d=c._gridlines=[];var e=c._minorgridlines=[],f=c._boundarylines=[],q=k["_"+a],t=k[a+"axis"];"array"===c.tickmode&&(c.tickvals=l.slice());var w=k._xctrl,x=k._yctrl,z=w[0].length,B=w.length,A=k._a.length,D=k._b.length;p.prepTicks(c);"array"===c.tickmode&&delete c.tickvals;
var C=c.smoothing?3:1;if("array"===c.tickmode){var v=5E-15;v=[Math.floor((l.length-1-c.arraytick0)/c.arraydtick*(1+v)),Math.ceil(-c.arraytick0/c.arraydtick/(1+v))].sort(function(I,L){return I-L});var y=v[0]-1;v=v[1]+1;for(r=y;r<v;r++){var F=c.arraytick0+c.arraydtick*r;0>F||F>l.length-1||d.push(n(h(F),{color:c.gridcolor,width:c.gridwidth}))}for(r=y;r<v;r++){y=c.arraytick0+c.arraydtick*r;var J=Math.min(y+c.arraydtick,l.length-1);if(!(0>y||y>l.length-1||0>J||J>l.length-1)){var K=l[y];var O=l[J];for(d=
0;d<c.minorgridcount;d++)F=J-y,0>=F||(F=K+(O-K)*(d+1)/(c.minorgridcount+1)*(c.arraydtick/F),F<l[0]||F>l[l.length-1]||e.push(n(g(F),{color:c.minorgridcolor,width:c.minorgridwidth})))}}c.startline&&f.push(n(h(0),{color:c.startlinecolor,width:c.startlinewidth}));c.endline&&f.push(n(h(l.length-1),{color:c.endlinecolor,width:c.endlinewidth}))}else{v=5E-15;v=[Math.floor((l[l.length-1]-c.tick0)/c.dtick*(1+v)),Math.ceil((l[0]-c.tick0)/c.dtick/(1+v))].sort(function(I,L){return I-L});y=v[0];v=v[1];for(r=y;r<=
v;r++)J=c.tick0+c.dtick*r,d.push(n(g(J),{color:c.gridcolor,width:c.gridwidth}));for(r=y-1;r<v+1;r++)for(J=c.tick0+c.dtick*r,d=0;d<c.minorgridcount;d++)F=J+c.dtick*(d+1)/(c.minorgridcount+1),F<l[0]||F>l[l.length-1]||e.push(n(g(F),{color:c.minorgridcolor,width:c.minorgridwidth}));c.startline&&f.push(n(g(l[0]),{color:c.startlinecolor,width:c.startlinewidth}));c.endline&&f.push(n(g(l[l.length-1]),{color:c.endlinecolor,width:c.endlinewidth}))}}},{"../../lib/extend":793,"../../plots/cartesian/axes":854}],
991:[function(b,N,G){var p=b("../../plots/cartesian/axes"),n=b("../../lib/extend").extendFlat;N.exports=function(k,m){var a=m._labels=[],g=m._gridlines;for(k=0;k<g.length;k++){var h=g[k];if(-1!==["start","both"].indexOf(m.showticklabels)){var r=p.tickText(m,h.value);n(r,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:h.xy(0),dxy:h.dxy(0,0),axis:h.axis,length:h.crossAxis.length,font:h.axis.tickfont,isFirst:0===k,isLast:k===g.length-1});a.push(r)}-1!==["end","both"].indexOf(m.showticklabels)&&(r=p.tickText(m,
h.value),n(r,{endAnchor:!1,xy:h.xy(h.crossLength-1),dxy:h.dxy(h.crossLength-2,1),axis:h.axis,length:h.crossAxis.length,font:h.axis.tickfont,isFirst:0===k,isLast:k===g.length-1}),a.push(r))}}},{"../../lib/extend":793,"../../plots/cartesian/axes":854}],992:[function(b,N,G){N.exports=function(p,n,k,m){var a=p[0]-n[0],g=p[1]-n[1],h=k[0]-n[0],r=k[1]-n[1];k=Math.pow(a*a+g*g,.25);p=Math.pow(h*h+r*r,.25);a=(p*p*a-k*k*h)*m;m*=p*p*g-k*k*r;g=p*(k+p)*3;k=k*(k+p)*3;return[[n[0]+(g&&a/g),n[1]+(g&&m/g)],[n[0]-(k&&
a/k),n[1]-(k&&m/k)]]}},{}],993:[function(b,N,G){var p=b("../../lib").isArrayOrTypedArray;N.exports=function(n,k,m){var a,g,h=[],r=p(n)?n.length:n,l=p(k)?k.length:k,c=p(n)?n:null,d=p(k)?k:null;c&&(a=(c.length-1)/(c[c.length-1]-c[0])/(r-1));d&&(g=(d.length-1)/(d[d.length-1]-d[0])/(l-1));var e=Infinity,f=-Infinity;for(n=0;n<l;n++){h[n]=[];var q=d?(d[n]-d[0])*g:n/(l-1);for(k=0;k<r;k++){var t=c?(c[k]-c[0])*a:k/(r-1);t-=q*m;e=Math.min(t,e);f=Math.max(t,f);h[n][k]=t}}m=1/(f-e);a=-e*m;for(n=0;n<l;n++)for(k=
0;k<r;k++)h[n][k]=m*h[n][k]+a;return h}},{"../../lib":803}],994:[function(b,N,G){function p(m,a,g){return[(2*(-.5*g[0]+1.5*a[0])+m[0])/3,(2*(-.5*g[1]+1.5*a[1])+m[1])/3]}var n=b("./catmull_rom"),k=b("../../lib").ensureArray;N.exports=function(m,a,g,h,r,l){var c,d,e,f,q=g[0].length,t=g.length,w=r?3*q-2:q,x=l?3*t-2:t;m=k(m,x);a=k(a,x);for(e=0;e<x;e++)m[e]=k(m[e],w),a[e]=k(a[e],w);for(f=d=0;d<t;d++,f+=l?3:1){var z=m[f];var B=a[f];var A=g[d];var D=h[d];for(e=c=0;c<q;c++,e+=r?3:1)z[e]=A[c],B[e]=D[c]}if(r)for(f=
d=0;d<t;d++,f+=l?3:1){c=1;for(e=3;c<q-1;c++,e+=3)z=n([g[d][c-1],h[d][c-1]],[g[d][c],h[d][c]],[g[d][c+1],h[d][c+1]],r),m[f][e-1]=z[0][0],a[f][e-1]=z[0][1],m[f][e+1]=z[1][0],a[f][e+1]=z[1][1];c=p([m[f][0],a[f][0]],[m[f][2],a[f][2]],[m[f][3],a[f][3]]);m[f][1]=c[0];a[f][1]=c[1];c=p([m[f][w-1],a[f][w-1]],[m[f][w-3],a[f][w-3]],[m[f][w-4],a[f][w-4]]);m[f][w-2]=c[0];a[f][w-2]=c[1]}if(l)for(e=0;e<w;e++){for(f=3;f<x-3;f+=3)z=n([m[f-3][e],a[f-3][e]],[m[f][e],a[f][e]],[m[f+3][e],a[f+3][e]],l),m[f-1][e]=z[0][0],
a[f-1][e]=z[0][1],m[f+1][e]=z[1][0],a[f+1][e]=z[1][1];c=p([m[0][e],a[0][e]],[m[2][e],a[2][e]],[m[3][e],a[3][e]]);m[1][e]=c[0];a[1][e]=c[1];c=p([m[x-1][e],a[x-1][e]],[m[x-3][e],a[x-3][e]],[m[x-4][e],a[x-4][e]]);m[x-2][e]=c[0];a[x-2][e]=c[1]}if(r&&l)for(f=1;f<x;f+=0===(f+1)%3?2:1){for(e=3;e<w-3;e+=3)z=n([m[f][e-3],a[f][e-3]],[m[f][e],a[f][e]],[m[f][e+3],a[f][e+3]],r),m[f][e-1]=.5*(m[f][e-1]+z[0][0]),a[f][e-1]=.5*(a[f][e-1]+z[0][1]),m[f][e+1]=.5*(m[f][e+1]+z[1][0]),a[f][e+1]=.5*(a[f][e+1]+z[1][1]);c=
p([m[f][0],a[f][0]],[m[f][2],a[f][2]],[m[f][3],a[f][3]]);m[f][1]=.5*(m[f][1]+c[0]);a[f][1]=.5*(a[f][1]+c[1]);c=p([m[f][w-1],a[f][w-1]],[m[f][w-3],a[f][w-3]],[m[f][w-4],a[f][w-4]]);m[f][w-2]=.5*(m[f][w-2]+c[0]);a[f][w-2]=.5*(a[f][w-2]+c[1])}return[m,a]}},{"../../lib":803,"./catmull_rom":992}],995:[function(b,N,G){N.exports={RELATIVE_CULL_TOLERANCE:1E-6}},{}],996:[function(b,N,G){N.exports=function(p,n,k){return n&&k?function(m,a,g,h,r){m||(m=[]);var l;a*=3;g*=3;var c=h*h;var d=1-h,e=d*d;d=d*h*2;h=
-3*e;e=3*(e-d);d=3*(d-c);var f=3*c,q=r*r,t=q*r,w=1-r,x=w*w,z=x*w;for(l=0;l<p.length;l++){var B=p[l];c=h*B[g][a]+e*B[g][a+1]+d*B[g][a+2]+f*B[g][a+3];var A=h*B[g+1][a]+e*B[g+1][a+1]+d*B[g+1][a+2]+f*B[g+1][a+3];var D=h*B[g+2][a]+e*B[g+2][a+1]+d*B[g+2][a+2]+f*B[g+2][a+3];B=h*B[g+3][a]+e*B[g+3][a+1]+d*B[g+3][a+2]+f*B[g+3][a+3];m[l]=z*c+3*(x*r*A+w*q*D)+t*B}return m}:n?function(m,a,g,h,r){m||(m=[]);var l;a*=3;var c=h*h;var d=1-h,e=d*d;d=d*h*2;h=-3*e;e=3*(e-d);d=3*(d-c);var f=3*c,q=1-r;for(l=0;l<p.length;l++){var t=
p[l];c=h*t[g][a]+e*t[g][a+1]+d*t[g][a+2]+f*t[g][a+3];t=h*t[g+1][a]+e*t[g+1][a+1]+d*t[g+1][a+2]+f*t[g+1][a+3];m[l]=q*c+r*t}return m}:k?function(m,a,g,h,r){m||(m=[]);var l;g*=3;var c=r*r,d=c*r,e=1-r,f=e*e,q=f*e;for(l=0;l<p.length;l++){var t=p[l];h=t[g][a+1]-t[g][a];var w=t[g+1][a+1]-t[g+1][a];var x=t[g+2][a+1]-t[g+2][a];t=t[g+3][a+1]-t[g+3][a];m[l]=q*h+3*(f*r*w+e*c*x)+d*t}return m}:function(m,a,g,h,r){m||(m=[]);var l,c=1-r;for(l=0;l<p.length;l++){var d=p[l];h=d[g][a+1]-d[g][a];d=d[g+1][a+1]-d[g+1][a];
m[l]=c*h+r*d}return m}}},{}],997:[function(b,N,G){N.exports=function(p,n,k){return n&&k?function(m,a,g,h,r){m||(m=[]);var l;a*=3;g*=3;var c=h*h,d=c*h,e=1-h,f=e*e,q=f*e;var t=r*r;var w=1-r,x=w*w;w=w*r*2;r=-3*x;x=3*(x-w);w=3*(w-t);var z=3*t;for(l=0;l<p.length;l++){var B=p[l];t=r*B[g][a]+x*B[g+1][a]+w*B[g+2][a]+z*B[g+3][a];var A=r*B[g][a+1]+x*B[g+1][a+1]+w*B[g+2][a+1]+z*B[g+3][a+1];var D=r*B[g][a+2]+x*B[g+1][a+2]+w*B[g+2][a+2]+z*B[g+3][a+2];B=r*B[g][a+3]+x*B[g+1][a+3]+w*B[g+2][a+3]+z*B[g+3][a+3];m[l]=
q*t+3*(f*h*A+e*c*D)+d*B}return m}:n?function(m,a,g,h,r){m||(m=[]);var l;a*=3;var c=r*r,d=c*r,e=1-r,f=e*e,q=f*e;for(l=0;l<p.length;l++){var t=p[l];h=t[g+1][a]-t[g][a];var w=t[g+1][a+1]-t[g][a+1];var x=t[g+1][a+2]-t[g][a+2];t=t[g+1][a+3]-t[g][a+3];m[l]=q*h+3*(f*r*w+e*c*x)+d*t}return m}:k?function(m,a,g,h,r){m||(m=[]);var l;g*=3;var c=1-h;var d=r*r;var e=1-r,f=e*e;e=e*r*2;r=-3*f;f=3*(f-e);e=3*(e-d);var q=3*d;for(l=0;l<p.length;l++){var t=p[l];d=r*t[g][a]+f*t[g+1][a]+e*t[g+2][a]+q*t[g+3][a];t=r*t[g][a+
1]+f*t[g+1][a+1]+e*t[g+2][a+1]+q*t[g+3][a+1];m[l]=c*d+h*t}return m}:function(m,a,g,h,r){m||(m=[]);var l,c=1-h;for(l=0;l<p.length;l++){var d=p[l];r=d[g+1][a]-d[g][a];d=d[g+1][a+1]-d[g][a+1];m[l]=c*r+h*d}return m}}},{}],998:[function(b,N,G){N.exports=function(p,n,k,m,a){var g=n-2,h=k-2;return m&&a?function(r,l,c){r||(r=[]);var d,e=Math.max(0,Math.min(Math.floor(l),g)),f=Math.max(0,Math.min(Math.floor(c),h));l=Math.max(0,Math.min(1,l-e));var q=Math.max(0,Math.min(1,c-f));e*=3;f*=3;var t=l*l,w=t*l,x=
1-l,z=x*x,B=z*x,A=q*q,D=A*q,C=1-q,v=C*C,y=v*C;for(d=0;d<p.length;d++){var F=p[d];c=B*F[f][e]+3*(z*l*F[f][e+1]+x*t*F[f][e+2])+w*F[f][e+3];var J=B*F[f+1][e]+3*(z*l*F[f+1][e+1]+x*t*F[f+1][e+2])+w*F[f+1][e+3];var K=B*F[f+2][e]+3*(z*l*F[f+2][e+1]+x*t*F[f+2][e+2])+w*F[f+2][e+3];F=B*F[f+3][e]+3*(z*l*F[f+3][e+1]+x*t*F[f+3][e+2])+w*F[f+3][e+3];r[d]=y*c+3*(v*q*J+C*A*K)+D*F}return r}:m?function(r,l,c){r||(r=[]);var d=Math.max(0,Math.min(Math.floor(l),g)),e=Math.max(0,Math.min(Math.floor(c),h));l=Math.max(0,
Math.min(1,l-d));c=Math.max(0,Math.min(1,c-e));var f;d*=3;var q=l*l,t=q*l,w=1-l,x=w*w,z=x*w,B=1-c;for(f=0;f<p.length;f++){var A=p[f];var D=B*A[e][d]+c*A[e+1][d];var C=B*A[e][d+1]+c*A[e+1][d+1];var v=B*A[e][d+2]+c*A[e+1][d+1];A=B*A[e][d+3]+c*A[e+1][d+1];r[f]=z*D+3*(x*l*C+w*q*v)+t*A}return r}:a?function(r,l,c){r||(r=[]);var d=Math.max(0,Math.min(Math.floor(l),g)),e=Math.max(0,Math.min(Math.floor(c),h));l=Math.max(0,Math.min(1,l-d));c=Math.max(0,Math.min(1,c-e));var f;e*=3;var q=c*c,t=q*c,w=1-c,x=w*
w,z=x*w,B=1-l;for(f=0;f<p.length;f++){var A=p[f];var D=B*A[e][d]+l*A[e][d+1];var C=B*A[e+1][d]+l*A[e+1][d+1];var v=B*A[e+2][d]+l*A[e+2][d+1];A=B*A[e+3][d]+l*A[e+3][d+1];r[f]=z*D+3*(x*c*C+w*q*v)+t*A}return r}:function(r,l,c){r||(r=[]);var d=Math.max(0,Math.min(Math.floor(l),g)),e=Math.max(0,Math.min(Math.floor(c),h));l=Math.max(0,Math.min(1,l-d));c=Math.max(0,Math.min(1,c-e));var f,q=1-c,t=1-l;for(f=0;f<p.length;f++){var w=p[f];var x=t*w[e][d]+l*w[e][d+1];w=t*w[e+1][d]+l*w[e+1][d+1];r[f]=q*x+c*w}return r}}},
{}],999:[function(b,N,G){var p=b("../../lib"),n=b("./xy_defaults"),k=b("./ab_defaults"),m=b("./attributes"),a=b("../../components/color/attributes");N.exports=function(g,h,r,l){function c(d,e){return p.coerce(g,h,m,d,e)}h._clipPathId="clip"+h.uid+"carpet";r=c("color",a.defaultLine);p.coerceFont(c,"font");c("carpet");k(g,h,l,c,r);h.a&&h.b?(3>h.a.length&&(h.aaxis.smoothing=0),3>h.b.length&&(h.baxis.smoothing=0),n(g,h,c)||(h.visible=!1),h._cheater&&c("cheaterslope")):h.visible=!1}},{"../../components/color/attributes":665,
"../../lib":803,"./ab_defaults":982,"./attributes":984,"./xy_defaults":1008}],1E3:[function(b,N,G){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),plot:b("./plot"),calc:b("./calc"),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:b("../../plots/cartesian"),categories:"cartesian svg carpet carpetAxis notLegendIsolatable noMultiCategory noHover noSortingByValue".split(" "),meta:{}}},{"../../plots/cartesian":868,"./attributes":984,"./calc":988,"./defaults":999,
"./plot":1005}],1001:[function(b,N,G){N.exports=function(p,n){for(var k=p._fullData.length,m,a=0;a<k;a++){var g=p._fullData[a];if(g.index!==n.index&&"carpet"===g.type&&(m||(m=g),g.carpet===n.carpet))return g}return m}},{}],1002:[function(b,N,G){N.exports=function(p,n,k){if(0===p.length)return"";var m,a=[],g=k?3:1;for(m=0;m<p.length;m+=g)a.push(p[m]+","+n[m]),k&&m<p.length-g&&(a.push("C"),a.push([p[m+1]+","+n[m+1],p[m+2]+","+n[m+2]+" "].join(" ")));return a.join(k?"":"L")}},{}],1003:[function(b,N,
G){var p=b("../../lib").isArrayOrTypedArray;N.exports=function(n,k,m){var a;p(n)?n.length>k.length&&(n=n.slice(0,k.length)):n=[];for(a=0;a<k.length;a++)n[a]=m(k[a]);return n}},{"../../lib":803}],1004:[function(b,N,G){N.exports=function(p,n,k,m,a,g){var h=a[0]*p.dpdx(n),r=a[1]*p.dpdy(k),l=1,c=1;g&&(c=Math.max(0,(a[0]*g[0]+a[1]*g[1])/Math.sqrt(a[0]*a[0]+a[1]*a[1])/Math.sqrt(g[0]*g[0]+g[1]*g[1])));a=180*Math.atan2(r,h)/Math.PI;-90>a?(a+=180,l=-l):90<a&&(a-=180,l=-l);return{angle:a,flip:l,p:p.c2p(m,n,
k),offsetMultplier:c}}},{}],1005:[function(b,N,G){function p(t,w,x,z,B,A){z="const-"+B+"-lines";x=x.selectAll("."+z).data(A);x.enter().append("path").classed(z,!0).style("vector-effect","non-scaling-stroke");x.each(function(D){var C=D.y,v=g([],D.x,t.c2p);C=g([],C,w.c2p);v="M"+h(v,C,D.smoothing);m.select(this).attr("d",v).style("stroke-width",D.width).style("stroke",D.color).style("fill","none")});x.exit().remove()}function n(t,w,x,z,B,A,D,C){B=A.selectAll("text."+C).data(D);B.enter().append("text").classed(C,
!0);var v=0,y={};B.each(function(F,J){if("auto"===F.axis.tickangle)var K=r(z,w,x,F.xy,F.dxy);else K=(F.axis.tickangle+180)*Math.PI/180,K=r(z,w,x,F.xy,[Math.cos(K),Math.sin(K)]);J||(y={angle:K.angle,flip:K.flip});J=(F.endAnchor?-1:1)*K.flip;var O=m.select(this).attr({"text-anchor":0<J?"start":"end","data-notex":1}).call(a.font,F.font).text(F.text).call(l.convertToTspans,t),I=a.bBox(this);O.attr("transform",e(K.p[0],K.p[1])+d(K.angle)+e(F.axis.labelpadding*J,.3*I.height));v=Math.max(v,I.width+F.axis.labelpadding)});
B.exit().remove();y.maxExtent=v;return y}function k(t,w,x,z,B,A,D,C,v,y,F){z=[];D.title.text&&z.push(D.title.text);w=w.selectAll("text."+F).data(z);var J=y.maxExtent;w.enter().append("text").classed(F,!0);w.each(function(){var K=r(x,C,v,B,A);-1===["start","both"].indexOf(D.showticklabels)&&(J=0);var O=D.title.font.size;J+=O+D.title.offset;var I=(y.angle+(0>y.flip?180:0)-K.angle+450)%360;I=90<I&&270>I;var L=m.select(this);L.text(D.title.text).call(l.convertToTspans,t);I&&(J=(-l.lineCount(L)+q)*f*O-
J);L.attr("transform",e(K.p[0],K.p[1])+d(K.angle)+e(0,J)).attr("text-anchor","middle").call(a.font,D.title.font)});w.exit().remove()}var m=b("@plotly/d3"),a=b("../../components/drawing"),g=b("./map_1d_array"),h=b("./makepath"),r=b("./orient_text"),l=b("../../lib/svg_text_utils"),c=b("../../lib"),d=c.strRotate,e=c.strTranslate;b=b("../../constants/alignment");N.exports=function(t,w,x,z){var B=w.xaxis,A=w.yaxis,D=t._fullLayout._clips;c.makeTraceGroups(z,x,"trace").each(function(C){var v=m.select(this),
y=C[0];C=y.trace;var F=C.aaxis,J=C.baxis,K=c.ensureSingle(v,"g","minorlayer"),O=c.ensureSingle(v,"g","majorlayer"),I=c.ensureSingle(v,"g","boundarylayer"),L=c.ensureSingle(v,"g","labellayer");v.style("opacity",C.opacity);p(B,A,O,F,"a",F._gridlines,!0);p(B,A,O,J,"b",J._gridlines,!0);p(B,A,K,F,"a",F._minorgridlines,!0);p(B,A,K,J,"b",J._minorgridlines,!0);p(B,A,I,F,"a-boundary",F._boundarylines);p(B,A,I,J,"b-boundary",J._boundarylines);v=n(t,B,A,C,y,L,F._labels,"a-label");J=n(t,B,A,C,y,L,J._labels,"b-label");
F=c.aggNums(Math.min,null,C.a);I=c.aggNums(Math.max,null,C.a);K=c.aggNums(Math.min,null,C.b);O=c.aggNums(Math.max,null,C.b);I=.5*(F+I);var H=K;var M=C.ab2xy(I,H,!0);var Q=C.dxyda_rough(I,H);void 0===v.angle&&c.extendFlat(v,r(C,B,A,M,C.dxydb_rough(I,H)));k(t,L,C,y,M,Q,C.aaxis,B,A,v,"a-title");I=F;H=.5*(K+O);M=C.ab2xy(I,H,!0);Q=C.dxydb_rough(I,H);void 0===J.angle&&c.extendFlat(J,r(C,B,A,M,C.dxyda_rough(I,H)));k(t,L,C,y,M,Q,C.baxis,B,A,J,"b-title");L=D.select("#"+C._clipPathId);L.size()||(L=D.append("clipPath").classed("carpetclip",
!0));v=c.ensureSingle(L,"path","carpetboundary");O=y.clipsegments;I=[];for(K=0;K<O.length;K++)y=O[K],J=g([],y.x,B.c2p),F=g([],y.y,A.c2p),I.push(h(J,F,y.bicubic));y="M"+I.join("L")+"Z";L.attr("id",C._clipPathId);v.attr("d",y)})};var f=b.LINE_SPACING,q=(1-b.MID_SHIFT)/f+1},{"../../components/drawing":688,"../../constants/alignment":771,"../../lib":803,"../../lib/svg_text_utils":829,"./makepath":1002,"./map_1d_array":1003,"./orient_text":1004,"@plotly/d3":58}],1006:[function(b,N,G){var p=b("./constants"),
n=b("../../lib/search").findBin,k=b("./compute_control_points"),m=b("./create_spline_evaluator"),a=b("./create_i_derivative_evaluator"),g=b("./create_j_derivative_evaluator");N.exports=function(h){var r=h._a,l=h._b,c=r.length,d=l.length,e=h.aaxis,f=h.baxis,q=r[0],t=r[c-1],w=l[0],x=l[d-1],z=r[r.length-1]-r[0],B=l[l.length-1]-l[0],A=z*p.RELATIVE_CULL_TOLERANCE,D=B*p.RELATIVE_CULL_TOLERANCE;q-=A;t+=A;w-=D;x+=D;h.isVisible=function(C,v){return C>q&&C<t&&v>w&&v<x};h.isOccluded=function(C,v){return C<q||
C>t||v<w||v>x};h.setScale=function(){var C=k(h._xctrl,h._yctrl,h._x,h._y,e.smoothing,f.smoothing);h._xctrl=C[0];h._yctrl=C[1];h.evalxy=m([h._xctrl,h._yctrl],c,d,e.smoothing,f.smoothing);h.dxydi=a([h._xctrl,h._yctrl],e.smoothing,f.smoothing);h.dxydj=g([h._xctrl,h._yctrl],e.smoothing,f.smoothing)};h.i2a=function(C){var v=Math.max(0,Math.floor(C[0]),c-2);C=C[0]-v;return(1-C)*r[v]+C*r[v+1]};h.j2b=function(C){var v=Math.max(0,Math.floor(C[1]),c-2);C=C[1]-v;return(1-C)*l[v]+C*l[v+1]};h.ij2ab=function(C){return[h.i2a(C[0]),
h.j2b(C[1])]};h.a2i=function(C){var v=Math.max(0,Math.min(n(C,r),c-2)),y=r[v];return Math.max(0,Math.min(c-1,v+(C-y)/(r[v+1]-y)))};h.b2j=function(C){var v=Math.max(0,Math.min(n(C,l),d-2)),y=l[v];return Math.max(0,Math.min(d-1,v+(C-y)/(l[v+1]-y)))};h.ab2ij=function(C){return[h.a2i(C[0]),h.b2j(C[1])]};h.i2c=function(C,v){return h.evalxy([],C,v)};h.ab2xy=function(C,v,y){if(!y&&(C<r[0]||C>r[c-1]|v<l[0]||v>l[d-1]))return[!1,!1];var F=h.a2i(C),J=h.b2j(v),K=h.evalxy([],F,J);if(y){var O=y=0,I=[],L;C<r[0]?
(F=L=0,y=(C-r[0])/(r[1]-r[0])):C>r[c-1]?(L=c-2,F=1,y=(C-r[c-1])/(r[c-1]-r[c-2])):(L=Math.max(0,Math.min(c-2,Math.floor(F))),F-=L);v<l[0]?(J=C=0,O=(v-l[0])/(l[1]-l[0])):v>l[d-1]?(C=d-2,J=1,O=(v-l[d-1])/(l[d-1]-l[d-2])):(C=Math.max(0,Math.min(d-2,Math.floor(J))),J-=C);y&&(h.dxydi(I,L,C,F,J),K[0]+=I[0]*y,K[1]+=I[1]*y);O&&(h.dxydj(I,L,C,F,J),K[0]+=I[0]*O,K[1]+=I[1]*O)}return K};h.c2p=function(C,v,y){return[v.c2p(C[0]),y.c2p(C[1])]};h.p2x=function(C,v,y){return[v.p2c(C[0]),y.p2c(C[1])]};h.dadi=function(C){C=
Math.max(0,Math.min(r.length-2,C));return r[C+1]-r[C]};h.dbdj=function(C){C=Math.max(0,Math.min(l.length-2,C));return l[C+1]-l[C]};h.dxyda=function(C,v,y,F){v=h.dxydi(null,C,v,y,F);C=h.dadi(C,y);return[v[0]/C,v[1]/C]};h.dxydb=function(C,v,y,F){C=h.dxydj(null,C,v,y,F);v=h.dbdj(v,F);return[C[0]/v,C[1]/v]};h.dxyda_rough=function(C,v,y){y=z*(y||.1);var F=h.ab2xy(C+y,v,!0);C=h.ab2xy(C-y,v,!0);return[.5*(F[0]-C[0])/y,.5*(F[1]-C[1])/y]};h.dxydb_rough=function(C,v,y){y=B*(y||.1);var F=h.ab2xy(C,v+y,!0);C=
h.ab2xy(C,v-y,!0);return[.5*(F[0]-C[0])/y,.5*(F[1]-C[1])/y]};h.dpdx=function(C){return C._m};h.dpdy=function(C){return C._m}}},{"../../lib/search":823,"./compute_control_points":994,"./constants":995,"./create_i_derivative_evaluator":996,"./create_j_derivative_evaluator":997,"./create_spline_evaluator":998}],1007:[function(b,N,G){var p=b("../../lib");N.exports=function(n,k,m){var a,g,h=[],r=[],l=n[0].length,c=n.length,d=0;for(a=0;a<l;a++)for(g=0;g<c;g++){if(void 0===n[g][a]){h.push(a);r.push(g);var e=
n[g];var f=a,q=void 0,t=0,w=0;0<a&&void 0!==(q=n[g][a-1])&&(w++,t+=q);a<l-1&&void 0!==(q=n[g][a+1])&&(w++,t+=q);0<g&&void 0!==(q=n[g-1][a])&&(w++,t+=q);g<c-1&&void 0!==(q=n[g+1][a])&&(w++,t+=q);e[f]=t/Math.max(1,w)}d=Math.max(d,Math.abs(n[g][a]))}if(!h.length)return n;q=0;t=h.length;do{for(e=f=0;e<t;e++){a=h[e];g=r[e];var x=w=0;if(0===a){var z=Math.min(l-1,2);var B=k[z];var A=k[1];z=n[g][z];var D=n[g][1];x+=D+(D-z)*(k[0]-A)/(A-B);w++}else a===l-1&&(z=Math.max(0,l-3),B=k[z],A=k[l-2],z=n[g][z],D=n[g][l-
2],x+=D+(D-z)*(k[l-1]-A)/(A-B),w++);(0===a||a===l-1)&&0<g&&g<c-1&&(B=m[g+1]-m[g],A=m[g]-m[g-1],x+=(A*n[g+1][a]+B*n[g-1][a])/(A+B),w++);0===g?(z=Math.min(c-1,2),B=m[z],A=m[1],z=n[z][a],D=n[1][a],x+=D+(D-z)*(m[0]-A)/(A-B),w++):g===c-1&&(z=Math.max(0,c-3),B=m[z],A=m[c-2],z=n[z][a],D=n[c-2][a],x+=D+(D-z)*(m[c-1]-A)/(A-B),w++);(0===g||g===c-1)&&0<a&&a<l-1&&(B=k[a+1]-k[a],A=k[a]-k[a-1],x+=(A*n[g][a+1]+B*n[g][a-1])/(A+B),w++);if(w)x/=w;else{x=k[a+1]-k[a];B=k[a]-k[a-1];A=m[g+1]-m[g];z=m[g]-m[g-1];D=x*B*(x+
B);var C=A*z*(A+z);x=(D*(z*n[g+1][a]+A*n[g-1][a])+C*(B*n[g][a+1]+x*n[g][a-1]))/(C*(B+x)+D*(z+A))}x-=n[g][a];B=x/d;f+=B*B;w=w?0:.85;n[g][a]+=x*(1+w)}f=Math.sqrt(f)}while(100>q++&&1E-5<f);p.log("Smoother converged to",f,"after",q,"iterations");return n}},{"../../lib":803}],1008:[function(b,N,G){var p=b("../../lib").isArray1D;N.exports=function(n,k,m){var a=(n=m("x"))&&n.length,g=(m=m("y"))&&m.length;if(!a&&!g)return!1;k._cheater=!n;a&&!p(n)||g&&!p(m)?k._length=null:(n=a?n.length:Infinity,g&&(n=Math.min(n,
m.length)),k.a&&k.a.length&&(n=Math.min(n,k.a.length)),k.b&&k.b.length&&(n=Math.min(n,k.b.length)),k._length=n);return!0}},{"../../lib":803}],1009:[function(b,N,G){G=b("../../plots/template_attributes").hovertemplateAttrs;var p=b("../scattergeo/attributes"),n=b("../../components/colorscale/attributes"),k=b("../../plots/attributes"),m=b("../../components/color/attributes").defaultLine;b=b("../../lib/extend").extendFlat;var a=p.marker.line;N.exports=b({locations:{valType:"data_array",editType:"calc"},
locationmode:p.locationmode,z:{valType:"data_array",editType:"calc"},geojson:b({},p.geojson,{}),featureidkey:p.featureidkey,text:b({},p.text,{}),hovertext:b({},p.hovertext,{}),marker:{line:{color:b({},a.color,{dflt:m}),width:b({},a.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:p.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:p.unselected.marker.opacity,editType:"plot"},
editType:"plot"},hoverinfo:b({},k.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:G(),showlegend:b({},k.showlegend,{dflt:!1})},n("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/color/attributes":665,"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plots/attributes":850,"../../plots/template_attributes":926,"../scattergeo/attributes":1260}],1010:[function(b,N,G){function p(h){return h&&"string"===typeof h}var n=b("fast-isnumeric"),
k=b("../../constants/numerical").BADNUM,m=b("../../components/colorscale/calc"),a=b("../scatter/arrays_to_calcdata"),g=b("../scatter/calc_selection");N.exports=function(h,r){var l=r._length,c=Array(l);var d=r.geojson?function(w){return p(w)||n(w)}:p;for(var e=0;e<l;e++){var f=c[e]={},q=r.locations[e],t=r.z[e];d(q)&&n(t)?(f.loc=q,f.z=t):(f.loc=null,f.z=k);f.index=e}a(c,r);m(h,r,{vals:r.z,containerStr:"",cLetter:"z"});g(c,r);return c}},{"../../components/colorscale/calc":674,"../../constants/numerical":779,
"../scatter/arrays_to_calcdata":1217,"../scatter/calc_selection":1220,"fast-isnumeric":249}],1011:[function(b,N,G){var p=b("../../lib"),n=b("../../components/colorscale/defaults"),k=b("./attributes");N.exports=function(m,a,g,h){function r(d,e){return p.coerce(m,a,k,d,e)}g=r("locations");var l=r("z");if(g&&g.length&&p.isArrayOrTypedArray(l)&&l.length){a._length=Math.min(g.length,l.length);g=r("geojson");if("string"===typeof g&&""!==g||p.isPlainObject(g))var c="geojson-id";"geojson-id"===r("locationmode",
c)&&r("featureidkey");r("text");r("hovertext");r("hovertemplate");r("marker.line.width")&&r("marker.line.color");r("marker.opacity");n(m,a,h,r,{prefix:"",cLetter:"z"});p.coerceSelectionMarkerOpacity(a,r)}else a.visible=!1}},{"../../components/colorscale/defaults":676,"../../lib":803,"./attributes":1009}],1012:[function(b,N,G){N.exports=function(p,n,k,m,a){p.location=n.location;p.z=n.z;n=m[a];n.fIn&&n.fIn.properties&&(p.properties=n.fIn.properties);p.ct=n.ct;return p}},{}],1013:[function(b,N,G){var p=
b("../../plots/cartesian/axes"),n=b("./attributes"),k=b("../../lib").fillText;N.exports=function(m,a,g){var h=m.cd,r=h[0].trace,l=m.subplot,c=[a,g],d=[a+360,g];for(a=0;a<h.length;a++){var e=h[a];var f=!1;if(e._polygons){for(g=0;g<e._polygons.length;g++)e._polygons[g].contains(c)&&(f=!f),e._polygons[g].contains(d)&&(f=!f);if(f)break}}if(f&&e)return m.x0=m.x1=m.xa.c2p(e.ct),m.y0=m.y1=m.ya.c2p(e.ct),m.index=e.index,m.location=e.loc,m.z=e.z,m.zLabel=p.tickText(l.mockAxis,l.mockAxis.c2l(e.z),"hover").text,
m.hovertemplate=e.hovertemplate,h=e,r.hovertemplate||(e=h.hi||r.hoverinfo,l=String(h.loc),a="all"===e?n.hoverinfo.flags:e.split("+"),e=-1!==a.indexOf("name"),f=-1!==a.indexOf("location"),c=-1!==a.indexOf("z"),a=-1!==a.indexOf("text"),g=[],!e&&f?m.nameOverride=l:(e&&(m.nameOverride=r.name),f&&g.push(l)),c&&g.push(m.zLabel),a&&k(h,r,g),m.extraText=g.join("\x3cbr\x3e")),[m]}},{"../../lib":803,"../../plots/cartesian/axes":854,"./attributes":1009}],1014:[function(b,N,G){N.exports={attributes:b("./attributes"),
supplyDefaults:b("./defaults"),colorbar:b("../heatmap/colorbar"),calc:b("./calc"),calcGeoJSON:b("./plot").calcGeoJSON,plot:b("./plot").plot,style:b("./style").style,styleOnSelect:b("./style").styleOnSelect,hoverPoints:b("./hover"),eventData:b("./event_data"),selectPoints:b("./select"),moduleType:"trace",name:"choropleth",basePlotModule:b("../../plots/geo"),categories:["geo","noOpacity","showLegend"],meta:{}}},{"../../plots/geo":887,"../heatmap/colorbar":1088,"./attributes":1009,"./calc":1010,"./defaults":1011,
"./event_data":1012,"./hover":1013,"./plot":1015,"./select":1016,"./style":1017}],1015:[function(b,N,G){var p=b("@plotly/d3"),n=b("../../lib"),k=b("../../lib/geo_location_utils"),m=b("../../lib/topojson_utils").getTopojsonFeatures,a=b("../../plots/cartesian/autorange").findExtremes,g=b("./style").style;N.exports={calcGeoJSON:function(h,r){var l=h[0].trace;r=r[l.geo];var c=r._subplot,d=l.locationmode,e=l._length,f="geojson-id"===d?k.extractTraceFeature(h):m(l,c.topojson);c=[];for(var q=[],t=0;t<e;t++){var w=
h[t],x="geojson-id"===d?w.fOut:k.locationToFeature(d,w.loc,f);x?(w.geojson=x,w.ct=x.properties.ct,w._polygons=k.feature2polygons(x),w=k.computeBbox(x),c.push(w[0],w[2]),q.push(w[1],w[3])):w.geojson=null}"geojson"===r.fitbounds&&"geojson-id"===d&&(h=k.computeBbox(k.getTraceGeojson(l)),c=[h[0],h[2]],q=[h[1],h[3]]);h={padded:!0};l._extremes.lon=a(r.lonaxis._ax,c,h);l._extremes.lat=a(r.lataxis._ax,q,h)},plot:function(h,r,l){r=r.layers.backplot.select(".choroplethlayer");n.makeTraceGroups(r,l,"trace choropleth").each(function(c){var d=
p.select(this).selectAll("path.choroplethlocation").data(n.identity);d.enter().append("path").classed("choroplethlocation",!0);d.exit().remove();g(h,c)})}}},{"../../lib":803,"../../lib/geo_location_utils":796,"../../lib/topojson_utils":832,"../../plots/cartesian/autorange":853,"./style":1017,"@plotly/d3":58}],1016:[function(b,N,G){N.exports=function(p,n){var k=p.cd,m=p.xaxis,a=p.yaxis,g=[],h,r;if(!1===n)for(h=0;h<k.length;h++)k[h].selected=0;else for(h=0;h<k.length;h++){var l=k[h];if(r=l.ct){var c=
m.c2p(r);var d=a.c2p(r);n.contains([c,d],null,h,p)?(g.push({pointNumber:h,lon:r[0],lat:r[1]}),l.selected=1):l.selected=0}}return g}},{}],1017:[function(b,N,G){function p(g,h){var r=h[0].trace;h=h[0].node3.selectAll(".choroplethlocation");var l=r.marker||{},c=l.line||{},d=a.makeColorScaleFuncFromTrace(r);h.each(function(e){n.select(this).attr("fill",d(e.z)).call(k.stroke,e.mlc||c.color).call(m.dashLine,"",e.mlw||c.width||0).style("opacity",l.opacity)});m.selectedPointStyle(h,r,g)}var n=b("@plotly/d3"),
k=b("../../components/color"),m=b("../../components/drawing"),a=b("../../components/colorscale");N.exports={style:function(g,h){h&&p(g,h)},styleOnSelect:function(g,h){var r=h[0].node3,l=h[0].trace;l.selectedpoints?m.selectedPointStyle(r.selectAll(".choroplethlocation"),l,g):p(g,h)}}},{"../../components/color":666,"../../components/colorscale":678,"../../components/drawing":688,"@plotly/d3":58}],1018:[function(b,N,G){G=b("../choropleth/attributes");var p=b("../../components/colorscale/attributes"),
n=b("../../plots/template_attributes").hovertemplateAttrs,k=b("../../plots/attributes");b=b("../../lib/extend").extendFlat;N.exports=b({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:b({},G.featureidkey,{}),below:{valType:"string",editType:"plot"},text:G.text,hovertext:G.hovertext,marker:{line:{color:b({},G.marker.line.color,{editType:"plot"}),width:b({},G.marker.line.width,{editType:"plot"}),editType:"calc"},
opacity:b({},G.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:b({},G.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:b({},G.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:G.hoverinfo,hovertemplate:n({},{keys:["properties"]}),showlegend:b({},k.showlegend,{dflt:!1})},p("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":673,"../../lib/extend":793,
"../../plots/attributes":850,"../../plots/template_attributes":926,"../choropleth/attributes":1009}],1019:[function(b,N,G){function p(r){var l=r[0].trace,c=l._opts;if(l.selectedpoints){l=a.makeSelectedPointStyleFns(l);for(var d=0;d<r.length;d++){var e=r[d];e.fOut&&(e.fOut.properties.mo2=l.selectedOpacityFn(e))}r={type:"identity",property:"mo2"}}else r=k.isArrayOrTypedArray(l.marker.opacity)?{type:"identity",property:"mo"}:l.marker.opacity;k.extendFlat(c.fill.paint,{"fill-opacity":r});k.extendFlat(c.line.paint,
{"line-opacity":r});return c}var n=b("fast-isnumeric"),k=b("../../lib"),m=b("../../components/colorscale"),a=b("../../components/drawing"),g=b("../../lib/geojson_utils").makeBlank,h=b("../../lib/geo_location_utils");N.exports={convert:function(r){var l=r[0].trace,c=!0===l.visible&&0!==l._length,d={layout:{visibility:"none"},paint:{}},e={layout:{visibility:"none"},paint:{}},f=l._opts={fill:d,line:e,geojson:g()};if(!c)return f;c=h.extractTraceFeature(r);if(!c)return f;var q=m.makeColorScaleFuncFromTrace(l),
t=l.marker;l=t.line||{};var w;k.isArrayOrTypedArray(t.opacity)&&(w=function(v){v=v.mo;return n(v)?+k.constrain(v,0,1):0});var x;k.isArrayOrTypedArray(l.color)&&(x=function(v){return v.mlc});var z;k.isArrayOrTypedArray(l.width)&&(z=function(v){return v.mlw});for(var B=0;B<r.length;B++){var A=r[B],D=A.fOut;if(D){var C=D.properties;C.fc=q(A.z);w&&(C.mo=w(A));x&&(C.mlc=x(A));z&&(C.mlw=z(A));A.ct=C.ct;A._polygons=h.feature2polygons(D)}}w=w?{type:"identity",property:"mo"}:t.opacity;k.extendFlat(d.paint,
{"fill-color":{type:"identity",property:"fc"},"fill-opacity":w});k.extendFlat(e.paint,{"line-color":x?{type:"identity",property:"mlc"}:l.color,"line-width":z?{type:"identity",property:"mlw"}:l.width,"line-opacity":w});d.layout.visibility="visible";e.layout.visibility="visible";f.geojson={type:"FeatureCollection",features:c};p(r);return f},convertOnSelect:p}},{"../../components/colorscale":678,"../../components/drawing":688,"../../lib":803,"../../lib/geo_location_utils":796,"../../lib/geojson_utils":797,
"fast-isnumeric":249}],1020:[function(b,N,G){var p=b("../../lib"),n=b("../../components/colorscale/defaults"),k=b("./attributes");N.exports=function(m,a,g,h){function r(d,e){return p.coerce(m,a,k,d,e)}g=r("locations");var l=r("z"),c=r("geojson");p.isArrayOrTypedArray(g)&&g.length&&p.isArrayOrTypedArray(l)&&l.length&&("string"===typeof c&&""!==c||p.isPlainObject(c))?(r("featureidkey"),a._length=Math.min(g.length,l.length),r("below"),r("text"),r("hovertext"),r("hovertemplate"),r("marker.line.width")&&
r("marker.line.color"),r("marker.opacity"),n(m,a,h,r,{prefix:"",cLetter:"z"}),p.coerceSelectionMarkerOpacity(a,r)):a.visible=!1}},{"../../components/colorscale/defaults":676,"../../lib":803,"./attributes":1018}],1021:[function(b,N,G){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../heatmap/colorbar"),calc:b("../choropleth/calc"),plot:b("./plot"),hoverPoints:b("../choropleth/hover"),eventData:b("../choropleth/event_data"),selectPoints:b("../choropleth/select"),
styleOnSelect:function(p,n){n&&n[0].trace._glTrace.updateOnSelect(n)},getBelow:function(p,n){p=n.getMapLayers();for(n=p.length-2;0<=n;n--){var k=p[n].id;if("string"===typeof k&&0===k.indexOf("water"))for(var m=n+1;m<p.length;m++)if(k=p[m].id,"string"===typeof k&&-1===k.indexOf("plotly-"))return k}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:b("../../plots/mapbox"),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},{"../../plots/mapbox":911,"../choropleth/calc":1010,
"../choropleth/event_data":1012,"../choropleth/hover":1013,"../choropleth/select":1016,"../heatmap/colorbar":1088,"./attributes":1018,"./defaults":1020,"./plot":1022}],1022:[function(b,N,G){function p(a,g){this.type="choroplethmapbox";this.subplot=a;this.uid=g;this.sourceId="source-"+g;this.layerList=[["fill",m+g+"-fill"],["line",m+g+"-line"]];this.below=null}var n=b("./convert").convert,k=b("./convert").convertOnSelect,m=b("../../plots/mapbox/constants").traceLayerPrefix;b=p.prototype;b.update=function(a){this._update(n(a))};
b.updateOnSelect=function(a){this._update(k(a))};b._update=function(a){var g=this.subplot,h=this.layerList,r=g.belowLookup["trace-"+this.uid];g.map.getSource(this.sourceId).setData(a.geojson);r!==this.below&&(this._removeLayers(),this._addLayers(a,r),this.below=r);for(r=0;r<h.length;r++){var l=h[r],c=l[1];l=a[l[0]];g.setOptions(c,"setLayoutProperty",l.layout);"visible"===l.layout.visibility&&g.setOptions(c,"setPaintProperty",l.paint)}};b._addLayers=function(a,g){for(var h=this.subplot,r=this.layerList,
l=this.sourceId,c=0;c<r.length;c++){var d=r[c],e=d[0],f=a[e];h.addLayer({type:e,id:d[1],source:l,layout:f.layout,paint:f.paint},g)}};b._removeLayers=function(){for(var a=this.subplot.map,g=this.layerList,h=g.length-1;0<=h;h--)a.removeLayer(g[h][1])};b.dispose=function(){var a=this.subplot.map;this._removeLayers();a.removeSource(this.sourceId)};N.exports=function(a,g){var h=g[0].trace,r=new p(a,h.uid),l=r.sourceId,c=n(g);h=r.below=a.belowLookup["trace-"+h.uid];a.map.addSource(l,{type:"geojson",data:c.geojson});
r._addLayers(c,h);return g[0].trace._glTrace=r}},{"../../plots/mapbox/constants":909,"./convert":1019}],1023:[function(b,N,G){G=b("../../components/colorscale/attributes");var p=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat,n=b("../../plots/template_attributes").hovertemplateAttrs,k=b("../mesh3d/attributes"),m=b("../../plots/attributes");b=b("../../lib/extend").extendFlat;var a={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},
z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",
arrayOk:!0,editType:"calc"},hovertemplate:n({editType:"calc"},{keys:["norm"]}),uhoverformat:p("u",1),vhoverformat:p("v",1),whoverformat:p("w",1),xhoverformat:p("x"),yhoverformat:p("y"),zhoverformat:p("z"),showlegend:b({},m.showlegend,{dflt:!1})};b(a,G("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));["opacity","lightposition","lighting"].forEach(function(g){a[g]=k[g]});a.hoverinfo=b({},m.hoverinfo,{editType:"calc",flags:"x y z u v w norm text name".split(" "),dflt:"x+y+z+norm+text+name"});
a.transforms=void 0;N.exports=a},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plots/attributes":850,"../../plots/cartesian/axis_format_attributes":857,"../../plots/template_attributes":926,"../mesh3d/attributes":1159}],1024:[function(b,N,G){var p=b("../../components/colorscale/calc");N.exports=function(n,k){for(var m=k.u,a=k.v,g=k.w,h=Math.min(k.x.length,k.y.length,k.z.length,m.length,a.length,g.length),r=-Infinity,l=Infinity,c=0;c<h;c++){var d=m[c],e=a[c],f=g[c];d=
Math.sqrt(d*d+e*e+f*f);r=Math.max(r,d);l=Math.min(l,d)}k._len=h;k._normMax=r;p(n,k,{vals:[l,r],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":674}],1025:[function(b,N,G){function p(e,f){this.scene=e;this.uid=f;this.data=this.mesh=null}function n(e,f){function q(z,B){var A=t[B],D=w[l[B]];return a(z,function(C){return A.d2l(C)*D})}var t=e.fullSceneLayout,w=e.dataScale;e={};e.vectors=r(q(f.u,"xaxis"),q(f.v,"yaxis"),q(f.w,"zaxis"),f._len);e.positions=r(q(f.x,"xaxis"),q(f.y,"yaxis"),
q(f.z,"zaxis"),f._len);var x=h(f);e.colormap=g(f);e.vertexIntensityBounds=[x.min/f._normMax,x.max/f._normMax];e.coneOffset=c[f.anchor];e.coneSize="scaled"===f.sizemode?f.sizeref||.5:f.sizeref&&f._normMax?f.sizeref/f._normMax:.5;e=k(e);x=f.lightposition;e.lightPosition=[x.x,x.y,x.z];e.ambient=f.lighting.ambient;e.diffuse=f.lighting.diffuse;e.specular=f.lighting.specular;e.roughness=f.lighting.roughness;e.fresnel=f.lighting.fresnel;e.opacity=f.opacity;f._pad=d[f.anchor]*e.vectorScale*e.coneScale*f._normMax;
return e}var k=b("gl-cone3d"),m=b("gl-cone3d").createConeMesh,a=b("../../lib").simpleMap,g=b("../../lib/gl_format_color").parseColorScale,h=b("../../components/colorscale").extractOpts,r=b("../../plots/gl3d/zip3");b=p.prototype;b.handlePick=function(e){if(e.object===this.mesh){var f=e.index=e.data.index,q=this.data.u[f],t=this.data.v[f],w=this.data.w[f];e.traceCoordinate=[this.data.x[f],this.data.y[f],this.data.z[f],q,t,w,Math.sqrt(q*q+t*t+w*w)];q=this.data.hovertext||this.data.text;Array.isArray(q)&&
void 0!==q[f]?e.textLabel=q[f]:q&&(e.textLabel=q);return!0}};var l={xaxis:0,yaxis:1,zaxis:2},c={tip:1,tail:0,cm:.25,center:.5},d={tip:1,tail:1,cm:.75,center:.5};b.update=function(e){this.data=e;e=n(this.scene,e);this.mesh.update(e)};b.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};N.exports=function(e,f){var q=e.glplot.gl,t=n(e,f);q=m(q,t);t=new p(e,f.uid);t.mesh=q;t.data=f;q._trace=t;e.glplot.add(q);return t}},{"../../components/colorscale":678,"../../lib":803,"../../lib/gl_format_color":799,
"../../plots/gl3d/zip3":907,"gl-cone3d":268}],1026:[function(b,N,G){var p=b("../../lib"),n=b("../../components/colorscale/defaults"),k=b("./attributes");N.exports=function(m,a,g,h){function r(q,t){return p.coerce(m,a,k,q,t)}g=r("u");var l=r("v"),c=r("w"),d=r("x"),e=r("y"),f=r("z");g&&g.length&&l&&l.length&&c&&c.length&&d&&d.length&&e&&e.length&&f&&f.length?(r("sizeref"),r("sizemode"),r("anchor"),r("lighting.ambient"),r("lighting.diffuse"),r("lighting.specular"),r("lighting.roughness"),r("lighting.fresnel"),
r("lightposition.x"),r("lightposition.y"),r("lightposition.z"),n(m,a,h,r,{prefix:"",cLetter:"c"}),r("text"),r("hovertext"),r("hovertemplate"),r("uhoverformat"),r("vhoverformat"),r("whoverformat"),r("xhoverformat"),r("yhoverformat"),r("zhoverformat"),a._length=null):a.visible=!1}},{"../../components/colorscale/defaults":676,"../../lib":803,"./attributes":1023}],1027:[function(b,N,G){N.exports={moduleType:"trace",name:"cone",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:b("./attributes"),
supplyDefaults:b("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:b("./calc"),plot:b("./convert"),eventData:function(p,n){p.norm=n.traceCoordinate[6];return p},meta:{}}},{"../../plots/gl3d":896,"./attributes":1023,"./calc":1024,"./convert":1025,"./defaults":1026}],1028:[function(b,N,G){G=b("../heatmap/attributes");var p=b("../scatter/attributes"),n=b("../../plots/cartesian/axis_format_attributes"),k=n.axisHoverFormat;n=n.descriptionOnlyNumbers;var m=b("../../components/colorscale/attributes"),
a=b("../../components/drawing/attributes").dash,g=b("../../plots/font_attributes"),h=b("../../lib/extend").extendFlat,r=b("../../constants/filter_ops");b=r.COMPARISON_OPS2;r=r.INTERVAL_OPS;var l=p.line;N.exports=h({z:G.z,x:G.x,x0:G.x0,dx:G.dx,y:G.y,y0:G.y0,dy:G.dy,xperiod:G.xperiod,yperiod:G.yperiod,xperiod0:p.xperiod0,yperiod0:p.yperiod0,xperiodalignment:G.xperiodalignment,yperiodalignment:G.yperiodalignment,text:G.text,hovertext:G.hovertext,transpose:G.transpose,xtype:G.xtype,ytype:G.ytype,xhoverformat:k("x"),
yhoverformat:k("y"),zhoverformat:k("z",1),hovertemplate:G.hovertemplate,hoverongaps:G.hoverongaps,connectgaps:h({},G.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,
editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:g({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",
dflt:"",editType:"plot",description:n("contour label")},operation:{valType:"enumerated",values:[].concat(b).concat(r),dflt:"\x3d",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:h({},l.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:a,smoothing:h({},l.smoothing,{}),editType:"plot"}},m("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":673,
"../../components/drawing/attributes":687,"../../constants/filter_ops":775,"../../lib/extend":793,"../../plots/cartesian/axis_format_attributes":857,"../../plots/font_attributes":883,"../heatmap/attributes":1085,"../scatter/attributes":1218}],1029:[function(b,N,G){var p=b("../../components/colorscale"),n=b("../heatmap/calc"),k=b("./set_contours"),m=b("./end_plus");N.exports=function(a,g){var h=n(a,g),r=h[0].z;k(g,r);var l=g.contours,c=p.extractOpts(g);"heatmap"===l.coloring&&c.auto&&!1===g.autocontour?
(r=l.start,c=m(l),l=l.size||1,c=Math.floor((c-r)/l)+1,isFinite(l)||(c=l=1),r-=l/2,l=[r,r+c*l]):l=r;p.calc(a,g,{vals:l,cLetter:"z"});return h}},{"../../components/colorscale":678,"../heatmap/calc":1086,"./end_plus":1039,"./set_contours":1047}],1030:[function(b,N,G){N.exports=function(p,n){var k=p[0],m=k.z,a;switch(n.type){case "levels":k=Math.min(m[0][0],m[0][1]);for(a=0;a<p.length;a++){var g=p[a];g.prefixBoundary=!g.edgepaths.length&&(k>g.level||g.starts.length&&k===g.level)}break;case "constraint":if(k.prefixBoundary=
!1,!k.edgepaths.length){var h=k.x.length,r=k.y.length;p=-Infinity;g=Infinity;for(a=0;a<r;a++)g=Math.min(g,m[a][0]),g=Math.min(g,m[a][h-1]),p=Math.max(p,m[a][0]),p=Math.max(p,m[a][h-1]);for(a=1;a<h-1;a++)g=Math.min(g,m[0][a]),g=Math.min(g,m[r-1][a]),p=Math.max(p,m[0][a]),p=Math.max(p,m[r-1][a]);a=n.value;switch(n._operation){case "\x3e":a>p&&(k.prefixBoundary=!0);break;case "\x3c":if(a<g||k.starts.length&&a===g)k.prefixBoundary=!0;break;case "[]":n=Math.min(a[0],a[1]);a=Math.max(a[0],a[1]);if(a<g||
n>p||k.starts.length&&a===g)k.prefixBoundary=!0;break;case "][":n=Math.min(a[0],a[1]),a=Math.max(a[0],a[1]),n<g&&a>p&&(k.prefixBoundary=!0)}}}}},{}],1031:[function(b,N,G){var p=b("../../components/colorscale"),n=b("./make_color_map"),k=b("./end_plus");N.exports={min:"zmin",max:"zmax",calc:function(m,a,g){m=a.contours;var h=a.line,r=m.size||1,l=m.coloring,c=n(a,{isColorbar:!0});"heatmap"===l?(a=p.extractOpts(a),g._fillgradient=a.reversescale?p.flipScale(a.colorscale):a.colorscale,g._zrange=[a.min,
a.max]):"fill"===l&&(g._fillcolor=c);g._line={color:"lines"===l?c:h.color,width:!1!==m.showlines?h.width:0,dash:h.dash};g._levels={start:m.start,end:k(m),size:r}}}},{"../../components/colorscale":678,"./end_plus":1039,"./make_color_map":1044}],1032:[function(b,N,G){N.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,
1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],1033:[function(b,N,G){var p=b("fast-isnumeric"),n=b("./label_defaults");G=b("../../components/color");var k=G.addOpacity,m=G.opacity;b=b("../../constants/filter_ops");var a=b.CONSTRAINT_REDUCTION,g=b.COMPARISON_OPS2;
N.exports=function(h,r,l,c,d,e){var f=r.contours,q=l("contours.operation");f._operation=a[q];if(-1===g.indexOf(f.operation))if(l("contours.value",[0,1]),Array.isArray(f.value))if(2<f.value.length)f.value=f.value.slice(2);else if(0===f.length)f.value=[0,1];else if(2>f.length){var t=parseFloat(f.value[0]);f.value=[t,t+1]}else f.value=[parseFloat(f.value[0]),parseFloat(f.value[1])];else p(f.value)&&(t=parseFloat(f.value),f.value=[t,t+1]);else l("contours.value",0),p(f.value)||(Array.isArray(f.value)?
f.value=parseFloat(f.value[0]):f.value=0);if("\x3d"===q)f=f.showlines=!0;else{f=l("contours.showlines");var w=l("fillcolor",k((h.line||{}).color||d,.5))}if(f){h=w&&m(w)?k(r.fillcolor,1):d;var x=l("line.color",h);l("line.width",2);l("line.dash")}l("line.smoothing");n(l,c,x,e)}},{"../../components/color":666,"../../constants/filter_ops":775,"./label_defaults":1043,"fast-isnumeric":249}],1034:[function(b,N,G){function p(g,h){function r(d){return a(d)?+d:null}var l=Array.isArray(h),c;-1!==m.COMPARISON_OPS2.indexOf(g)?
c=l?r(h[0]):r(h):-1!==m.INTERVAL_OPS.indexOf(g)?c=l?[r(h[0]),r(h[1])]:[r(h),r(h)]:-1!==m.SET_OPS.indexOf(g)&&(c=l?h.map(r):[r(h)]);return c}function n(g){return function(h){h=p(g,h);var r=Math.min(h[0],h[1]);h=Math.max(h[0],h[1]);return{start:r,end:h,size:h-r}}}function k(g){return function(h){h=p(g,h);return{start:h,end:Infinity,size:Infinity}}}var m=b("../../constants/filter_ops"),a=b("fast-isnumeric");N.exports={"[]":n("[]"),"][":n("]["),"\x3e":k("\x3e"),"\x3c":k("\x3c"),"\x3d":k("\x3d")}},{"../../constants/filter_ops":775,
"fast-isnumeric":249}],1035:[function(b,N,G){N.exports=function(p,n,k,m){p=m("contours.start");m=m("contours.end");m=!1===p||!1===m;p=k("contours.size");(m?!(n.autocontour=!0):!k("autocontour",!1))&&p||k("ncontours")}},{}],1036:[function(b,N,G){function p(k){return n.extendFlat({},k,{edgepaths:n.extendDeep([],k.edgepaths),paths:n.extendDeep([],k.paths),starts:n.extendDeep([],k.starts)})}var n=b("../../lib");N.exports=function(k,m){var a=function(r){return r.reverse()},g=function(r){return r};switch(m){case "\x3d":case "\x3c":return k;
case "\x3e":1!==k.length&&n.warn("Contour data invalid for the specified inequality operation.");var h=k[0];for(m=0;m<h.edgepaths.length;m++)h.edgepaths[m]=a(h.edgepaths[m]);for(m=0;m<h.paths.length;m++)h.paths[m]=a(h.paths[m]);for(m=0;m<h.starts.length;m++)h.starts[m]=a(h.starts[m]);return k;case "][":m=a,a=g,g=m;case "[]":2!==k.length&&n.warn("Contour data invalid for the specified inequality range operation.");h=p(k[0]);k=p(k[1]);for(m=0;m<h.edgepaths.length;m++)h.edgepaths[m]=a(h.edgepaths[m]);
for(m=0;m<h.paths.length;m++)h.paths[m]=a(h.paths[m]);for(m=0;m<h.starts.length;m++)h.starts[m]=a(h.starts[m]);for(;k.edgepaths.length;)h.edgepaths.push(g(k.edgepaths.shift()));for(;k.paths.length;)h.paths.push(g(k.paths.shift()));for(;k.starts.length;)h.starts.push(g(k.starts.shift()));return[h]}}},{"../../lib":803}],1037:[function(b,N,G){var p=b("../../lib"),n=b("../heatmap/xyz_defaults"),k=b("../scatter/period_defaults"),m=b("./constraint_defaults"),a=b("./contours_defaults"),g=b("./style_defaults"),
h=b("./attributes");N.exports=function(r,l,c,d){function e(t,w){return p.coerce(r,l,h,t,w)}function f(t){return p.coerce2(r,l,h,t)}if(n(r,l,e,d)){k(r,l,d,e);e("xhoverformat");e("yhoverformat");e("text");e("hovertext");e("hovertemplate");e("hoverongaps");var q="constraint"===e("contours.type");e("connectgaps",p.isArray1D(l.z));q?m(r,l,e,d,c):(a(r,l,e,f),g(r,l,e,d))}else l.visible=!1}},{"../../lib":803,"../heatmap/xyz_defaults":1099,"../scatter/period_defaults":1238,"./attributes":1028,"./constraint_defaults":1033,
"./contours_defaults":1035,"./style_defaults":1049}],1038:[function(b,N,G){var p=b("../../lib"),n=b("./constraint_mapping"),k=b("./end_plus");N.exports=function(m,a,g){var h="constraint"===m.type?n[m._operation](m.value):m,r=h.size,l=[],c=k(h),d=g.trace._carpetTrace;a=d?{xaxis:d.aaxis,yaxis:d.baxis,x:g.a,y:g.b}:{xaxis:a.xaxis,yaxis:a.yaxis,x:g.x,y:g.y};for(h=h.start;h<c;h+=r)if(l.push(p.extendFlat({level:h,crossings:{},starts:[],edgepaths:[],paths:[],z:g.z,smoothing:g.trace.line.smoothing},a)),1E3<
l.length){p.warn("Too many contours, clipping at 1000",m);break}return l}},{"../../lib":803,"./constraint_mapping":1034,"./end_plus":1039}],1039:[function(b,N,G){N.exports=function(p){return p.end+p.size/1E6}},{}],1040:[function(b,N,G){function p(g,h,r,l){return Math.abs(g[0]-h[0])<r&&Math.abs(g[1]-h[1])<l}function n(g,h,r,l,c){var d=h.join(","),e=g.crossings[d],f=e,q=0,t=0;20<f&&r?208===f||1114===f?q=0===h[0]?1:-1:t=0===h[1]?1:-1:-1!==a.BOTTOMSTART.indexOf(f)?t=1:-1!==a.LEFTSTART.indexOf(f)?q=1:
-1!==a.TOPSTART.indexOf(f)?t=-1:q=-1;var w=[q,t];f=[k(g,h,[-w[0],-w[1]])];var x=g.z.length,z=g.z[0].length;q=h.slice();var B=w.slice();for(t=0;1E4>t;t++){20<e?(e=a.CHOOSESADDLE[e][0>(w[0]||w[1])?0:1],g.crossings[d]=a.SADDLEREMAINDER[e]):delete g.crossings[d];w=a.NEWDELTA[e];if(!w){m.log("Found bad marching index:",e,h,g.level);break}f.push(k(g,h,w));h[0]+=w[0];h[1]+=w[1];d=h.join(",");p(f[f.length-1],f[f.length-2],l,c)&&f.pop();e=w[0]&&(0>h[0]||h[0]>z-2)||w[1]&&(0>h[1]||h[1]>x-2);if(h[0]===q[0]&&
h[1]===q[1]&&w[0]===B[0]&&w[1]===B[1]||r&&e)break;e=g.crossings[d]}1E4===t&&m.log("Infinite loop in contour?");h=p(f[0],f[f.length-1],l,c);w=0;x=.2*g.smoothing;d=[];e=0;for(t=1;t<f.length;t++){B=f[t];var A=f[t-1];z=B[2]-A[2];B=B[3]-A[3];z=Math.sqrt(z*z+B*B);w+=z;d.push(z)}z=w/d.length*x;for(t=f.length-2;t>=e;t--)if(B=d[t],B<z){x=0;for(w=t-1;w>=e;w--)if(B+d[w]<z)B+=d[w];else break;if(h&&t===f.length-2)for(x=0;x<w;x++)if(B+d[x]<z)B+=d[x];else break;B=t-w+x+1;A=Math.floor((t+w+x+2)/2);B=h||t!==f.length-
2?h||-1!==w?B%2?f[A%f.length]:[(f[A%f.length][0]+f[(A+1)%f.length][0])/2,(f[A%f.length][1]+f[(A+1)%f.length][1])/2]:f[0]:f[f.length-1];f.splice(w+1,t-w+1,B);t=w+1;x&&(e=x);h&&(t===f.length-2?f[x]=f[f.length-1]:0===t&&(f[f.length-1]=f[0]))}f.splice(0,e);for(t=0;t<f.length;t++)f[t].length=2;if(!(2>f.length))if(h)f.pop(),g.paths.push(f);else{r||m.log("Unclosed interior contour?",g.level,q.join(","),f.join("L"));d=!1;for(r=0;r<g.edgepaths.length;r++)if(t=g.edgepaths[r],!d&&p(t[0],f[f.length-1],l,c)){f.pop();
d=!0;e=!1;for(q=0;q<g.edgepaths.length;q++)if(h=g.edgepaths[q],p(h[h.length-1],f[0],l,c)){e=!0;f.shift();g.edgepaths.splice(r,1);q===r?g.paths.push(f.concat(h)):(q>r&&q--,g.edgepaths[q]=h.concat(f,t));break}e||(g.edgepaths[r]=f.concat(t))}for(r=0;r<g.edgepaths.length&&!d;r++)t=g.edgepaths[r],p(t[t.length-1],f[0],l,c)&&(f.shift(),g.edgepaths[r]=t.concat(f),d=!0);d||g.edgepaths.push(f)}}function k(g,h,r){var l=h[0]+Math.max(r[0],0);h=h[1]+Math.max(r[1],0);var c=g.z[h][l],d=g.xaxis,e=g.yaxis;if(r[1])return r=
(g.level-c)/(g.z[h][l+1]-c),[d.c2p((1-r)*g.x[l]+r*g.x[l+1],!0),e.c2p(g.y[h],!0),l+r,h];r=(g.level-c)/(g.z[h+1][l]-c);return[d.c2p(g.x[l],!0),e.c2p((1-r)*g.y[h]+r*g.y[h+1],!0),l,h+r]}var m=b("../../lib"),a=b("./constants");N.exports=function(g,h,r){var l,c;h=h||.01;r=r||.01;for(c=0;c<g.length;c++){var d=g[c];for(l=0;l<d.starts.length;l++){var e=d.starts[l];n(d,e,"edge",h,r)}for(l=0;Object.keys(d.crossings).length&&1E4>l;)l++,e=Object.keys(d.crossings)[0].split(",").map(Number),n(d,e,void 0,h,r);1E4===
l&&m.log("Infinite loop in contour?")}}},{"../../lib":803,"./constants":1032}],1041:[function(b,N,G){var p=b("../../components/color"),n=b("../heatmap/hover");N.exports=function(k,m,a,g,h){h||(h={});h.isContour=!0;(k=n(k,m,a,g,h))&&k.forEach(function(r){var l=r.trace;"constraint"===l.contours.type&&(l.fillcolor&&p.opacity(l.fillcolor)?r.color=p.addOpacity(l.fillcolor,1):l.contours.showlines&&p.opacity(l.line.color)&&(r.color=p.addOpacity(l.line.color,1)))});return k}},{"../../components/color":666,
"../heatmap/hover":1092}],1042:[function(b,N,G){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot").plot,style:b("./style"),colorbar:b("./colorbar"),hoverPoints:b("./hover"),moduleType:"trace",name:"contour",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},{"../../plots/cartesian":868,"./attributes":1028,"./calc":1029,"./colorbar":1031,"./defaults":1037,"./hover":1041,"./plot":1046,
"./style":1048}],1043:[function(b,N,G){var p=b("../../lib");N.exports=function(n,k,m,a){a||(a={});n("contours.showlabels")&&(k=k.font,p.coerceFont(n,"contours.labelfont",{family:k.family,size:k.size,color:m}),n("contours.labelformat"));!1!==a.hasHover&&n("zhoverformat")}},{"../../lib":803}],1044:[function(b,N,G){var p=b("@plotly/d3"),n=b("../../components/colorscale"),k=b("./end_plus");N.exports=function(m){var a=m.contours,g=a.start,h=k(a),r=a.size||1,l=Math.floor((h-g)/r)+1,c="lines"===a.coloring?
0:1,d=n.extractOpts(m);isFinite(r)||(l=r=1);var e=d.reversescale?n.flipScale(d.colorscale):d.colorscale,f=e.length;m=Array(f);h=Array(f);var q;if("heatmap"===a.coloring){g=d.min;c=d.max;for(q=0;q<f;q++)d=e[q],m[q]=d[0]*(c-g)+g,h[q]=d[1];r=p.extent([g,c,a.start,a.start+r*(l-1)]);a=r[g<c?0:1];r=r[g<c?1:0];a!==g&&(m.splice(0,0,a),h.splice(0,0,h[0]));r!==c&&(m.push(r),h.push(h[h.length-1]))}else for(q=0;q<f;q++)d=e[q],m[q]=(d[0]*(l+c-1)-c/2)*r+g,h[q]=d[1];return n.makeColorScaleFunc({domain:m,range:h},
{noNumericCheck:!0})}},{"../../components/colorscale":678,"./end_plus":1039,"@plotly/d3":58}],1045:[function(b,N,G){var p=b("./constants");N.exports=function(n){var k=n[0].z,m=k.length,a=k[0].length,g=2===m||2===a,h,r,l;for(r=0;r<m-1;r++){var c=[];0===r&&(c=c.concat(p.BOTTOMSTART));r===m-2&&(c=c.concat(p.TOPSTART));for(h=0;h<a-1;h++){var d=c.slice();0===h&&(d=d.concat(p.LEFTSTART));h===a-2&&(d=d.concat(p.RIGHTSTART));var e=h+","+r;var f=[[k[r][h],k[r][h+1]],[k[r+1][h],k[r+1][h+1]]];for(l=0;l<n.length;l++){var q=
n[l];var t=q.level;var w=(f[0][0]>t?0:1)+(f[0][1]>t?0:2)+(f[1][1]>t?0:4)+(f[1][0]>t?0:8);t=5===w||10===w?t>(f[0][0]+f[0][1]+f[1][0]+f[1][1])/4?5===w?713:1114:5===w?104:208:15===w?0:w;t&&(q.crossings[e]=t,-1!==d.indexOf(t)&&(q.starts.push([h,r]),g&&-1!==d.indexOf(t,d.indexOf(t)+1)&&q.starts.push([h,r])))}}}}},{"./constants":1032}],1046:[function(b,N,G){function p(B,A,D,C){var v="fill"===C.coloring||"constraint"===C.type&&"\x3d"!==C._operation,y="M"+D.join("L")+"Z";v&&w(A,C);B=a.ensureSingle(B,"g",
"contourfill").selectAll("path").data(v?A:[]);B.enter().append("path");B.exit().remove();B.each(function(F){(F=(F.prefixBoundary?y:"")+n(F,D))?m.select(this).attr("d",F).style("stroke","none"):m.select(this).remove()})}function n(B,A){for(var D="",C=0,v=B.edgepaths.map(function(L,H){return H}),y=!0,F,J,K,O;v.length;){J=g.smoothopen(B.edgepaths[C],B.smoothing);D+=y?J:J.replace(/^M/,"L");v.splice(v.indexOf(C),1);y=B.edgepaths[C][B.edgepaths[C].length-1];K=-1;for(J=0;4>J;J++){if(!y){a.log("Missing end?",
C,B);break}.01>Math.abs(y[1]-A[0][1])&&!(.01>Math.abs(y[0]-A[2][0]))?F=A[1]:.01>Math.abs(y[0]-A[0][0])?F=A[0]:.01>Math.abs(y[1]-A[2][1])?F=A[3]:.01>Math.abs(y[0]-A[2][0])&&(F=A[2]);for(O=0;O<B.edgepaths.length;O++){var I=B.edgepaths[O][0];.01>Math.abs(y[0]-F[0])?.01>Math.abs(y[0]-I[0])&&0<=(I[1]-y[1])*(F[1]-I[1])&&(F=I,K=O):.01>Math.abs(y[1]-F[1])?.01>Math.abs(y[1]-I[1])&&0<=(I[0]-y[0])*(F[0]-I[0])&&(F=I,K=O):a.log("endpt to newendpt is not vert. or horz.",y,F,I)}y=F;if(0<=K)break;D+="L"+F}if(K===
B.edgepaths.length){a.log("unclosed perimeter path");break}C=K;if(y=-1===v.indexOf(C))C=v[0],D+="Z"}for(C=0;C<B.paths.length;C++)D+=g.smoothclosed(B.paths[C],B.smoothing);return D}function k(B,A,D,C,v){var y=a.ensureSingle(B,"g","contourlines"),F=!1!==v.showlines,J=v.showlabels,K=F&&J,O=G.createLines(y,F||J,A);y=G.createLineClip(y,K,D,C.trace.uid);B=B.selectAll("g.contourlabels").data(J?[0]:[]);B.exit().remove();B.enter().append("g").classed("contourlabels",!0);if(J){var I=[],L=[];a.clearLocationCache();
var H=G.labelFormatter(D,C),M=g.tester.append("text").attr("data-notex",1).call(g.font,v.labelfont),Q=A[0].xaxis,Z=A[0].yaxis;v=Q._length;var ca=Z._length,W=Q.range,T=Z.range,U=a.aggNums(Math.min,null,C.x),ha=a.aggNums(Math.max,null,C.x),Y=a.aggNums(Math.min,null,C.y),ba=a.aggNums(Math.max,null,C.y);C=Math.max(Q.c2p(U,!0),0);Q=Math.min(Q.c2p(ha,!0),v);ha=Math.max(Z.c2p(ba,!0),0);Z=Math.min(Z.c2p(Y,!0),ca);var ja={};W[0]<W[1]?(ja.left=C,ja.right=Q):(ja.left=Q,ja.right=C);T[0]<T[1]?(ja.top=ha,ja.bottom=
Z):(ja.top=Z,ja.bottom=ha);ja.middle=(ja.top+ja.bottom)/2;ja.center=(ja.left+ja.right)/2;I.push([[ja.left,ja.top],[ja.right,ja.top],[ja.right,ja.bottom],[ja.left,ja.bottom]]);var ma=x.LABELDISTANCE*Math.sqrt(v*v+ca*ca)/Math.max(1,A.length/x.LABELINCREASE);O.each(function(ia){var oa=G.calcTextOpts(ia.level,H,M,D);m.select(this).selectAll("path").each(function(){var xa=a.getVisibleSegment(this,ja,oa.height/2);if(xa&&!(xa.len<(oa.width+oa.height)*x.LABELMIN))for(var ra=Math.min(Math.ceil(xa.len/ma),
x.LABELMAX),la=0;la<ra;la++){var ka=G.findBestTextLocation(this,xa,oa,L,ja);if(!ka)break;G.addLabelData(ka,oa,L,I)}})});M.remove();G.drawLabels(B,L,D,y,K?I:null)}J&&!F&&O.remove()}var m=b("@plotly/d3"),a=b("../../lib"),g=b("../../components/drawing"),h=b("../../components/colorscale"),r=b("../../lib/svg_text_utils"),l=b("../../plots/cartesian/axes"),c=b("../../plots/cartesian/set_convert"),d=b("../heatmap/plot"),e=b("./make_crossings"),f=b("./find_all_paths"),q=b("./empty_pathinfo"),t=b("./convert_to_constraints"),
w=b("./close_boundaries"),x=b("./constants"),z=x.LABELOPTIMIZER;G.plot=function(B,A,D,C){var v=A.xaxis,y=A.yaxis;a.makeTraceGroups(C,D,"contour").each(function(F){var J=m.select(this),K=F[0],O=K.x,I=K.y,L=K.trace.contours,H=q(L,A,K),M=a.ensureSingle(J,"g","heatmapcoloring"),Q=[];"heatmap"===L.coloring&&(Q=[F]);d(B,A,Q,M);e(H);f(H);F=v.c2p(O[0],!0);O=v.c2p(O[O.length-1],!0);M=y.c2p(I[0],!0);I=y.c2p(I[I.length-1],!0);I=[[F,I],[O,I],[O,M],[F,M]];O=H;"constraint"===L.type&&(O=t(H,L._operation));F=a.ensureSingle(J,
"g","contourbg").selectAll("path").data("fill"===L.coloring?[0]:[]);F.enter().append("path");F.exit().remove();F.attr("d","M"+I.join("L")+"Z").style("stroke","none");p(J,O,I,L);k(J,H,B,K,L);O=K.trace;L="clip"+O.uid;H=B._fullLayout._clips.selectAll("#"+L).data(O.connectgaps?[]:[0]);H.enter().append("clipPath").classed("contourclip",!0).attr("id",L);H.exit().remove();if(!1===O.connectgaps){O=A.xaxis;F=A.yaxis;M=K.x;Q=K.y;var Z=K.trace._emptypoints,ca=[],W=K.z.length,T=K.z[0].length,U,ha=[];for(U=0;U<
T;U++)ha.push(1);for(U=0;U<W;U++)ca.push(ha.slice());for(U=0;U<Z.length;U++)W=Z[U],ca[W[0]][W[1]]=0;K.zmask=ca;K={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:O,yaxis:F,x:M,y:Q,z:ca,smoothing:0};e([K]);f([K]);w([K],{type:"levels"});a.ensureSingle(H,"path","").attr("d",(K.prefixBoundary?"M"+I.join("L")+"Z":"")+n(K,I))}else L=null;g.setClipUrl(J,L,B)})};G.createLines=function(B,A,D){var C=D[0].smoothing;B=B.selectAll("g.contourlevel").data(A?D:[]);B.exit().remove();B.enter().append("g").classed("contourlevel",
!0);A&&(A=B.selectAll("path.openline").data(function(v){return v.pedgepaths||v.edgepaths}),A.exit().remove(),A.enter().append("path").classed("openline",!0),A.attr("d",function(v){return g.smoothopen(v,C)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke"),A=B.selectAll("path.closedline").data(function(v){return v.ppaths||v.paths}),A.exit().remove(),A.enter().append("path").classed("closedline",!0),A.attr("d",function(v){return g.smoothclosed(v,C)}).style("stroke-miterlimit",
1).style("vector-effect","non-scaling-stroke"));return B};G.createLineClip=function(B,A,D,C){C=A?"clipline"+C:null;A=D._fullLayout._clips.selectAll("#"+C).data(A?[0]:[]);A.exit().remove();A.enter().append("clipPath").classed("contourlineclip",!0).attr("id",C);g.setClipUrl(B,C,D);return A};G.labelFormatter=function(B,A){B=B._fullLayout;var D=A.trace;A=D.contours;var C={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};A.labelformat?(C.tickformat=A.labelformat,c(C,B)):(D=h.extractOpts(D))&&
D.colorbar&&D.colorbar._axis?C=D.colorbar._axis:("constraint"===A.type?(A=A.value,Array.isArray(A)?C.range=[A[0],A[A.length-1]]:C.range=[A,A]):(C.range=[A.start,A.end],C.nticks=(A.end-A.start)/A.size),C.range[0]===C.range[1]&&(C.range[1]+=C.range[0]||1),C.nticks||(C.nticks=1E3),c(C,B),l.prepTicks(C),C._tmin=null,C._tmax=null);return function(v){return l.tickText(C,v).text}};G.calcTextOpts=function(B,A,D,C){A=A(B);D.text(A).call(r.convertToTspans,C);D=D.node();C=g.bBox(D,!0);return{text:A,width:C.width,
height:C.height,fontSize:+D.style["font-size"].replace("px",""),level:B,dy:(C.top+C.bottom)/2}};G.findBestTextLocation=function(B,A,D,C,v){var y=D.width;if(A.isClosed){var F=A.len/z.INITIALSEARCHPOINTS;var J=A.min+F/2;var K=A.max}else F=(A.len-y)/(z.INITIALSEARCHPOINTS+1),J=A.min+F+y/2,K=A.max-(F+y)/2;for(var O=Infinity,I=0;I<z.ITERATIONS;I++){for(;J<K;J+=F){var L=a.getTextLocation(B,A.total,J,y);a:{var H=D;var M=C,Q=H.width/2,Z=H.height/2,ca=L.x,W=L.y,T=L.theta,U=Math.cos(T)*Q,ha=Math.sin(T)*Q;Q=
(ca>v.center?v.right-ca:ca-v.left)/(U+Math.abs(Math.sin(T)*Z));Z=(W>v.middle?v.bottom-W:W-v.top)/(Math.abs(ha)+Math.cos(T)*Z);if(1>Q||1>Z)H=Infinity;else{Z=z.EDGECOST*(1/(Q-1)+1/(Z-1));Z+=z.ANGLECOST*T*T;T=ca-U;Q=W-ha;ca+=U;W+=ha;for(U=0;U<M.length;U++){ha=M[U];var Y=Math.cos(ha.theta)*ha.width/2,ba=Math.sin(ha.theta)*ha.width/2;Y=2*a.segmentDistance(T,Q,ca,W,ha.x-Y,ha.y-ba,ha.x+Y,ha.y+ba)/(H.height+ha.height);ba=(ha=ha.level===H.level)?z.SAMELEVELDISTANCE:1;if(Y<=ba){H=Infinity;break a}Z+=z.NEIGHBORCOST*
(ha?z.SAMELEVELFACTOR:1)/(Y-ba)}H=Z}}if(H<O){O=H;var ja=L;var ma=J}}if(O>2*z.MAXCOST)break;I&&(F/=2);J=ma-F/2;K=J+1.5*F}if(O<=z.MAXCOST)return ja};G.addLabelData=function(B,A,D,C){var v=A.fontSize,y=A.width+v/3;v=Math.max(0,A.height-v/3);var F=B.x,J=B.y;B=B.theta;var K=Math.sin(B),O=Math.cos(B),I=function(L,H){return[F+L*O-H*K,J+L*K+H*O]};I=[I(-y/2,-v/2),I(-y/2,v/2),I(y/2,v/2),I(y/2,-v/2)];D.push({text:A.text,x:F,y:J,dy:A.dy,theta:B,level:A.level,width:y,height:v});C.push(I)};G.drawLabels=function(B,
A,D,C,v){B=B.selectAll("text").data(A,function(y){return y.text+","+y.x+","+y.y+","+y.theta});B.exit().remove();B.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(y){var F=y.x+Math.sin(y.theta)*y.dy,J=y.y-Math.cos(y.theta)*y.dy;m.select(this).text(y.text).attr({x:F,y:J,transform:"rotate("+180*y.theta/Math.PI+" "+F+" "+J+")"}).call(r.convertToTspans,D)});if(v){B="";for(A=0;A<v.length;A++)B+="M"+v[A].join("L")+"Z";a.ensureSingle(C,"path","").attr("d",B)}}},{"../../components/colorscale":678,
"../../components/drawing":688,"../../lib":803,"../../lib/svg_text_utils":829,"../../plots/cartesian/axes":854,"../../plots/cartesian/set_convert":875,"../heatmap/plot":1096,"./close_boundaries":1030,"./constants":1032,"./convert_to_constraints":1036,"./empty_pathinfo":1038,"./find_all_paths":1040,"./make_crossings":1045,"@plotly/d3":58}],1047:[function(b,N,G){function p(m,a,g){var h={type:"linear",range:[m,a]};n.autoTicks(h,(a-m)/(g||15));return h}var n=b("../../plots/cartesian/axes"),k=b("../../lib");
N.exports=function(m,a){var g=m.contours;if(m.autocontour){var h=m.zmin,r=m.zmax;if(m.zauto||void 0===h)h=k.aggNums(Math.min,null,a);if(m.zauto||void 0===r)r=k.aggNums(Math.max,null,a);a=p(h,r,m.ncontours);g.size=a.dtick;g.start=n.tickFirst(a);a.range.reverse();g.end=n.tickFirst(a);g.start===h&&(g.start+=g.size);g.end===r&&(g.end-=g.size);g.start>g.end&&(g.start=g.end=(g.start+g.end)/2);m._input.contours||(m._input.contours={});k.extendFlat(m._input.contours,{start:g.start,end:g.end,size:g.size});
m._input.autocontour=!0}else"constraint"!==g.type&&(r=g.start,a=g.end,h=m._input.contours,r>a&&(g.start=h.start=a,a=g.end=h.end=r,r=g.start),0<g.size||(m=r===a?1:p(r,a,m.ncontours).dtick,h.size=g.size=m))}},{"../../lib":803,"../../plots/cartesian/axes":854}],1048:[function(b,N,G){var p=b("@plotly/d3"),n=b("../../components/drawing"),k=b("../heatmap/style"),m=b("./make_color_map");N.exports=function(a){var g=p.select(a).selectAll("g.contour");g.style("opacity",function(h){return h[0].trace.opacity});
g.each(function(h){var r=p.select(this);h=h[0].trace;var l=h.contours,c=h.line,d=l.size||1,e=l.start,f="constraint"===l.type,q=!f&&"lines"===l.coloring,t=!f&&"fill"===l.coloring,w=q||t?m(h):null;r.selectAll("g.contourlevel").each(function(B){p.select(this).selectAll("path").call(n.lineGroupStyle,c.width,q?w(B.level):c.color,c.dash)});var x=l.labelfont;r.selectAll("g.contourlabels text").each(function(B){n.font(p.select(this),{family:x.family,size:x.size,color:x.color||(q?w(B.level):c.color)})});if(f)r.selectAll("g.contourfill path").style("fill",
h.fillcolor);else if(t){var z;r.selectAll("g.contourfill path").style("fill",function(B){void 0===z&&(z=B.level);return w(B.level+.5*d)});void 0===z&&(z=e);r.selectAll("g.contourbg path").style("fill",w(z-.5*d))}});k(a)}},{"../../components/drawing":688,"../heatmap/style":1097,"./make_color_map":1044,"@plotly/d3":58}],1049:[function(b,N,G){var p=b("../../components/colorscale/defaults"),n=b("./label_defaults");N.exports=function(k,m,a,g,h){var r=a("contours.coloring"),l,c="";"fill"===r&&(l=a("contours.showlines"));
!1!==l&&("lines"!==r&&(c=a("line.color","#000")),a("line.width",.5),a("line.dash"));"none"!==r&&(!0!==k.showlegend&&(m.showlegend=!1),m._dfltShowLegend=!1,p(k,m,g,a,{prefix:"",cLetter:"z"}));a("line.smoothing");n(a,g,c,h)}},{"../../components/colorscale/defaults":676,"./label_defaults":1043}],1050:[function(b,N,G){G=b("../heatmap/attributes");var p=b("../contour/attributes"),n=b("../../components/colorscale/attributes");b=b("../../lib/extend").extendFlat;var k=p.contours;N.exports=b({carpet:{valType:"string",
editType:"calc"},z:G.z,a:G.x,a0:G.x0,da:G.dx,b:G.y,b0:G.y0,db:G.dy,text:G.text,hovertext:G.hovertext,transpose:G.transpose,atype:G.xtype,btype:G.ytype,fillcolor:p.fillcolor,autocontour:p.autocontour,ncontours:p.ncontours,contours:{type:k.type,start:k.start,end:k.end,size:k.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:k.showlines,showlabels:k.showlabels,labelfont:k.labelfont,labelformat:k.labelformat,operation:k.operation,value:k.value,editType:"calc",
impliedEdits:{autocontour:!1}},line:{color:p.line.color,width:p.line.width,dash:p.line.dash,smoothing:p.line.smoothing,editType:"plot"},transforms:void 0},n("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../contour/attributes":1028,"../heatmap/attributes":1085}],1051:[function(b,N,G){var p=b("../../components/colorscale/calc"),n=b("../../lib"),k=b("../heatmap/convert_column_xyz"),m=b("../heatmap/clean_2d_array"),a=b("../heatmap/interp2d"),
g=b("../heatmap/find_empties"),h=b("../heatmap/make_bound_array"),r=b("./defaults"),l=b("../carpet/lookup_carpetid"),c=b("../contour/set_contours");N.exports=function(d,e){var f=e._carpetTrace=l(d,e);if(f&&f.visible&&"legendonly"!==f.visible){if(!e.a||!e.b){f=d.data[f.index];var q=d.data[e.index];q.a||(q.a=f.a);q.b||(q.b=f.b);r(q,e,e._defaultColor,d._fullLayout)}f=e._carpetTrace;q=f.aaxis;var t=f.baxis;q._minDtick=0;t._minDtick=0;n.isArray1D(e.z)&&k(e,q,t,"a","b",["z"]);var w=e._a=e._a||e.a;var x=
e._b=e._b||e.b;w=w?q.makeCalcdata(e,"_a"):[];x=x?t.makeCalcdata(e,"_b"):[];var z=e.a0||0;var B=e.da||1;var A=e.b0||0;var D=e.db||1;f=e._z=m(e._z||e.z,e.transpose);e._emptypoints=g(f);a(f,e._emptypoints);var C=n.maxRowLength(f);q=h(e,"scaled"===e.xtype?"":w,z,B,C,q);t=h(e,"scaled"===e.ytype?"":x,A,D,f.length,t);q={a:q,b:t,z:f};"levels"===e.contours.type&&"none"!==e.contours.coloring&&p(d,e,{vals:f,containerStr:"",cLetter:"z"});d=[q];c(e,e._z);return d}}},{"../../components/colorscale/calc":674,"../../lib":803,
"../carpet/lookup_carpetid":1001,"../contour/set_contours":1047,"../heatmap/clean_2d_array":1087,"../heatmap/convert_column_xyz":1089,"../heatmap/find_empties":1091,"../heatmap/interp2d":1094,"../heatmap/make_bound_array":1095,"./defaults":1052}],1052:[function(b,N,G){var p=b("../../lib"),n=b("../heatmap/xyz_defaults"),k=b("./attributes"),m=b("../contour/constraint_defaults"),a=b("../contour/contours_defaults"),g=b("../contour/style_defaults");N.exports=function(h,r,l,c){function d(f,q){return p.coerce(h,
r,k,f,q)}function e(f){return p.coerce2(h,r,k,f)}d("carpet");h.a&&h.b?n(h,r,d,c,"a","b")?(d("text"),"constraint"===d("contours.type")?m(h,r,d,c,l,{hasHover:!1}):(a(h,r,d,e),g(h,r,d,c,{hasHover:!1}))):r.visible=!1:(r._defaultColor=l,r._length=null)}},{"../../lib":803,"../contour/constraint_defaults":1033,"../contour/contours_defaults":1035,"../contour/style_defaults":1049,"../heatmap/xyz_defaults":1099,"./attributes":1050}],1053:[function(b,N,G){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),
colorbar:b("../contour/colorbar"),calc:b("./calc"),plot:b("./plot"),style:b("../contour/style"),moduleType:"trace",name:"contourcarpet",basePlotModule:b("../../plots/cartesian"),categories:"cartesian svg carpet contour symbols showLegend hasLines carpetDependent noHover noSortingByValue".split(" "),meta:{}}},{"../../plots/cartesian":868,"../contour/colorbar":1031,"../contour/style":1048,"./attributes":1050,"./calc":1051,"./defaults":1052,"./plot":1054}],1054:[function(b,N,G){function p(y,F){var J,
K,O;for(J=0;J<y.length;J++){var I=y[J];var L=I.pedgepaths=[];var H=I.ppaths=[];for(K=0;K<I.edgepaths.length;K++){var M=I.edgepaths[K];var Q=[];for(O=0;O<M.length;O++)Q[O]=F(M[O]);L.push(Q)}for(K=0;K<I.paths.length;K++){M=I.paths[K];L=[];for(O=0;O<M.length;O++)L[O]=F(M[O]);H.push(L)}}}function n(y,F,J,K,O,I,L){var H=q.ensureSingle(y,"g","contourlines"),M=!1!==O.showlines,Q=O.showlabels,Z=M&&Q,ca=x.createLines(H,M||Q,F);H=x.createLineClip(H,Z,J,K.trace.uid);y=y.selectAll("g.contourlabels").data(Q?[0]:
[]);y.exit().remove();y.enter().append("g").classed("contourlabels",!0);if(Q){var W=I.xaxis._length;I=I.yaxis._length;var T=[[[0,0],[W,0],[W,I],[0,I]]],U=[];q.clearLocationCache();var ha=x.labelFormatter(J,K),Y=f.tester.append("text").attr("data-notex",1).call(f.font,O.labelfont),ba={left:0,right:W,center:W/2,top:0,bottom:I,middle:I/2},ja=z.LABELDISTANCE*Math.sqrt(W*W+I*I)/Math.max(1,F.length/z.LABELINCREASE);ca.each(function(ma){var ia=x.calcTextOpts(ma.level,ha,Y,J);c.select(this).selectAll("path").each(function(oa){var xa=
q.getVisibleSegment(this,ba,ia.height/2);if(xa&&(k(this,oa,ma,xa,L,ia.height),!(xa.len<(ia.width+ia.height)*z.LABELMIN))){oa=Math.min(Math.ceil(xa.len/ja),z.LABELMAX);for(var ra=0;ra<oa;ra++){var la=x.findBestTextLocation(this,xa,ia,U,ba);if(!la)break;x.addLabelData(la,ia,U,T)}}})});Y.remove();x.drawLabels(y,U,J,H,Z?T:null)}Q&&!M&&ca.remove()}function k(y,F,J,K,O,I){function L(T,U){var ha=0;if(.1>Math.abs(T[0]-Q)||.1>Math.abs(T[0]-Z)){var Y=a(O.dxydb_rough(T[0],T[1],.1));ha=Math.max(ha,I*g(U,Y)/2)}if(.1>
Math.abs(T[1]-ca)||.1>Math.abs(T[1]-W))Y=a(O.dxyda_rough(T[0],T[1],.1)),ha=Math.max(ha,I*g(U,Y)/2);return ha}for(var H,M=0;M<J.pedgepaths.length;M++)F===J.pedgepaths[M]&&(H=J.edgepaths[M]);if(H){var Q=O.a[0],Z=O.a[O.a.length-1],ca=O.b[0],W=O.b[O.b.length-1];F=m(y,0,1);y=m(y,K.total,K.total-1);F=L(H[0],F);H=K.total-L(H[H.length-1],y);K.min<F&&(K.min=F);K.max>H&&(K.max=H);K.len=K.max-K.min}}function m(y,F,J){F=y.getPointAtLength(F);J=y.getPointAtLength(J);y=J.x-F.x;F=J.y-F.y;J=Math.sqrt(y*y+F*F);return[y/
J,F/J]}function a(y){var F=Math.sqrt(y[0]*y[0]+y[1]*y[1]);return[y[0]/F,y[1]/F]}function g(y,F){y=Math.abs(y[0]*F[0]+y[1]*F[1]);return Math.sqrt(1-y*y)/y}function h(y,F,J,K,O,I){var L,H=q.ensureSingle(y,"g","contourbg").selectAll("path").data("fill"!==I||O?[]:[0]);H.enter().append("path");H.exit().remove();var M=[];for(L=0;L<F.length;L++)y=F[L],O=d([],y.x,J.c2p),I=d([],y.y,K.c2p),M.push(e(O,I,y.bicubic));H.attr("d","M"+M.join("L")+"Z").style("stroke","none")}function r(y,F,J,K,O,I,L,H,M,Q,Z){(Q="fill"===
Q)&&D(O,y.contours);F=q.ensureSingle(F,"g","contourfill").selectAll("path").data(Q?O:[]);F.enter().append("path");F.exit().remove();F.each(function(ca){(ca=(ca.prefixBoundary?Z:"")+l(y,ca,I,L,H,M,J,K))?c.select(this).attr("d",ca).style("stroke","none"):c.select(this).remove()})}function l(y,F,J,K,O,I,L,H){function M(ia){return Math.abs(ia[0]-J[2][0])<Y}function Q(ia,oa){var xa="";if(Math.abs(ia[1]-J[0][1])<ba&&!M(ia)||Math.abs(ia[1]-J[2][1])<ba&&!(Math.abs(ia[0]-J[0][0])<Y)){var ra=O.aaxis;var la=
v(O,I,[ia[0],oa[0]],.5*(ia[1]+oa[1]))}else ra=O.baxis,la=v(O,I,.5*(ia[0]+oa[0]),[ia[1],oa[1]]);for(ia=1;ia<la.length;ia++)for(xa+=ra.smoothing?"C":"L",oa=0;oa<la[ia].length;oa++){var ka=la[ia][oa];xa+=[L.c2p(ka[0]),H.c2p(ka[1])]+" "}return xa}var Z="",ca=F.edgepaths.map(function(ia,oa){return oa}),W=!0,T,U,ha,Y=1E-4*Math.abs(J[0][0]-J[2][0]),ba=1E-4*Math.abs(J[0][1]-J[2][1]);y=0;for(T=null;ca.length;){var ja=F.edgepaths[y][0];T&&(Z+=Q(T,ja));T=f.smoothopen(F.edgepaths[y].map(K),F.smoothing);Z+=W?
T:T.replace(/^M/,"L");ca.splice(ca.indexOf(y),1);T=F.edgepaths[y][F.edgepaths[y].length-1];ja=-1;for(W=0;4>W;W++){if(!T){q.log("Missing end?",y,F);break}Math.abs(T[1]-J[0][1])<ba&&!M(T)?U=J[1]:Math.abs(T[0]-J[0][0])<Y?U=J[0]:Math.abs(T[1]-J[2][1])<ba?U=J[3]:M(T)&&(U=J[2]);for(ha=0;ha<F.edgepaths.length;ha++){var ma=F.edgepaths[ha][0];Math.abs(T[0]-U[0])<Y?Math.abs(T[0]-ma[0])<Y&&0<=(ma[1]-T[1])*(U[1]-ma[1])&&(U=ma,ja=ha):Math.abs(T[1]-U[1])<ba?Math.abs(T[1]-ma[1])<ba&&0<=(ma[0]-T[0])*(U[0]-ma[0])&&
(U=ma,ja=ha):q.log("endpt to newendpt is not vert. or horz.",T,U,ma)}if(0<=ja)break;Z+=Q(T,U);T=U}if(ja===F.edgepaths.length){q.log("unclosed perimeter path");break}y=ja;if(W=-1===ca.indexOf(y))y=ca[0],Z+=Q(T,U)+"Z",T=null}for(y=0;y<F.paths.length;y++)Z+=f.smoothclosed(F.paths[y].map(K),F.smoothing);return Z}var c=b("@plotly/d3"),d=b("../carpet/map_1d_array"),e=b("../carpet/makepath"),f=b("../../components/drawing"),q=b("../../lib"),t=b("../contour/make_crossings"),w=b("../contour/find_all_paths"),
x=b("../contour/plot"),z=b("../contour/constants"),B=b("../contour/convert_to_constraints"),A=b("../contour/empty_pathinfo"),D=b("../contour/close_boundaries"),C=b("../carpet/lookup_carpetid"),v=b("../carpet/axis_aligned_line");N.exports=function(y,F,J,K){var O=F.xaxis,I=F.yaxis;q.makeTraceGroups(K,J,"contour").each(function(L){function H(ra){ra=Z.ab2xy(ra[0],ra[1],!0);return[O.c2p(ra[0]),I.c2p(ra[1])]}var M=c.select(this);L=L[0];var Q=L.trace,Z=Q._carpetTrace=C(y,Q),ca=y.calcdata[Z.index][0];if(Z.visible&&
"legendonly"!==Z.visible){var W=L.a,T=L.b,U=Q.contours,ha=A(U,F,L),Y="constraint"===U.type,ba=U._operation,ja=Y?"\x3d"===ba?"lines":"fill":U.coloring,ma=[[W[0],T[T.length-1]],[W[W.length-1],T[T.length-1]],[W[W.length-1],T[0]],[W[0],T[0]]];t(ha);w(ha,1E-8*(W[W.length-1]-W[0]),1E-8*(T[T.length-1]-T[0]));W=ha;"constraint"===U.type&&(W=B(ha,ba));p(ha,H);var ia,oa=[];for(ia=ca.clipsegments.length-1;0<=ia;ia--){ba=ca.clipsegments[ia];T=d([],ba.x,O.c2p);var xa=d([],ba.y,I.c2p);T.reverse();xa.reverse();oa.push(e(T,
xa,ba.bicubic))}ba="M"+oa.join("L")+"Z";h(M,ca.clipsegments,O,I,Y,ja);r(Q,M,O,I,W,ma,H,Z,ca,ja,ba);n(M,ha,y,L,U,F,Z);f.setClipUrl(M,Z._clipPathId,y)}})}},{"../../components/drawing":688,"../../lib":803,"../carpet/axis_aligned_line":985,"../carpet/lookup_carpetid":1001,"../carpet/makepath":1002,"../carpet/map_1d_array":1003,"../contour/close_boundaries":1030,"../contour/constants":1032,"../contour/convert_to_constraints":1036,"../contour/empty_pathinfo":1038,"../contour/find_all_paths":1040,"../contour/make_crossings":1045,
"../contour/plot":1046,"@plotly/d3":58}],1055:[function(b,N,G){G=b("../../components/colorscale/attributes");var p=b("../../plots/template_attributes").hovertemplateAttrs,n=b("../../plots/attributes"),k=b("../scattermapbox/attributes");b=b("../../lib/extend").extendFlat;N.exports=b({lon:k.lon,lat:k.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:k.text,hovertext:k.hovertext,hoverinfo:b({},
n.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:p(),showlegend:b({},n.showlegend,{dflt:!1})},G("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plots/attributes":850,"../../plots/template_attributes":926,"../scattermapbox/attributes":1283}],1056:[function(b,N,G){var p=b("fast-isnumeric"),n=b("../../lib").isArrayOrTypedArray,k=b("../../constants/numerical").BADNUM,m=b("../../components/colorscale/calc"),a=b("../../lib")._;
N.exports=function(g,h){for(var r=h._length,l=Array(r),c=h.z,d=n(c)&&c.length,e=0;e<r;e++){var f=l[e]={},q=h.lon[e],t=h.lat[e];f.lonlat=p(q)&&p(t)?[+q,+t]:[k,k];d&&(q=c[e],f.z=p(q)?q:k)}m(g,h,{vals:d?c:[0,1],containerStr:"",cLetter:"z"});r&&(l[0].t={labels:{lat:a(g,"lat:")+" ",lon:a(g,"lon:")+" "}});return l}},{"../../components/colorscale/calc":674,"../../constants/numerical":779,"../../lib":803,"fast-isnumeric":249}],1057:[function(b,N,G){var p=b("fast-isnumeric"),n=b("../../lib"),k=b("../../components/color"),
m=b("../../components/colorscale"),a=b("../../constants/numerical").BADNUM,g=b("../../lib/geojson_utils").makeBlank;N.exports=function(h){var r=h[0].trace,l=!0===r.visible&&0!==r._length,c=r._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:g()};if(!l)return c;l=[];var d,e=r.z,f=r.radius;e=n.isArrayOrTypedArray(e)&&e.length;var q=n.isArrayOrTypedArray(f);for(d=0;d<h.length;d++){var t=h[d],w=t.lonlat;if(w[0]!==a){var x={};e&&(t=t.z,x.z=t!==a?t:0);q&&(x.r=p(f[d])&&0<f[d]?+f[d]:0);l.push({type:"Feature",
geometry:{type:"Point",coordinates:w},properties:x})}}h=m.extractOpts(r);f=h.reversescale?m.flipScale(h.colorscale):h.colorscale;d=f[0][1];w=["interpolate",["linear"],["heatmap-density"],0,1>k.opacity(d)?d:k.addOpacity(d,0)];for(d=1;d<f.length;d++)w.push(f[d][0],f[d][1]);d=["interpolate",["linear"],["get","z"],h.min,0,h.max,1];n.extendFlat(c.heatmap.paint,{"heatmap-weight":e?d:1/(h.max-h.min),"heatmap-color":w,"heatmap-radius":q?{type:"identity",property:"r"}:r.radius,"heatmap-opacity":r.opacity});
c.geojson={type:"FeatureCollection",features:l};c.heatmap.layout.visibility="visible";return c}},{"../../components/color":666,"../../components/colorscale":678,"../../constants/numerical":779,"../../lib":803,"../../lib/geojson_utils":797,"fast-isnumeric":249}],1058:[function(b,N,G){var p=b("../../lib"),n=b("../../components/colorscale/defaults"),k=b("./attributes");N.exports=function(m,a,g,h){function r(c,d){return p.coerce(m,a,k,c,d)}g=r("lon")||[];var l=r("lat")||[];(g=Math.min(g.length,l.length))?
(a._length=g,r("z"),r("radius"),r("below"),r("text"),r("hovertext"),r("hovertemplate"),n(m,a,h,r,{prefix:"",cLetter:"z"})):a.visible=!1}},{"../../components/colorscale/defaults":676,"../../lib":803,"./attributes":1055}],1059:[function(b,N,G){N.exports=function(p,n){p.lon=n.lon;p.lat=n.lat;p.z=n.z;return p}},{}],1060:[function(b,N,G){var p=b("../../plots/cartesian/axes"),n=b("../scattermapbox/hover").hoverPoints,k=b("../scattermapbox/hover").getExtraText;N.exports=function(m,a,g){if(m=n(m,a,g)){m=
m[0];a=m.cd;g=a[0].trace;var h=a[m.index];delete m.color;if("z"in h){var r=m.subplot.mockAxis;m.z=h.z;m.zLabel=p.tickText(r,r.c2l(h.z),"hover").text}m.extraText=k(g,h,a[0].t.labels);return[m]}}},{"../../plots/cartesian/axes":854,"../scattermapbox/hover":1288}],1061:[function(b,N,G){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../heatmap/colorbar"),formatLabels:b("../scattermapbox/format_labels"),calc:b("./calc"),plot:b("./plot"),hoverPoints:b("./hover"),eventData:b("./event_data"),
getBelow:function(p,n){p=n.getMapLayers();for(n=0;n<p.length;n++){var k=p[n],m=k.id;if("symbol"===k.type&&"string"===typeof m&&-1===m.indexOf("plotly-"))return m}},moduleType:"trace",name:"densitymapbox",basePlotModule:b("../../plots/mapbox"),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},{"../../plots/mapbox":911,"../heatmap/colorbar":1088,"../scattermapbox/format_labels":1287,"./attributes":1055,"./calc":1056,"./defaults":1058,"./event_data":1059,"./hover":1060,"./plot":1062}],
1062:[function(b,N,G){function p(m,a){this.type="densitymapbox";this.subplot=m;this.uid=a;this.sourceId="source-"+a;this.layerList=[["heatmap",k+a+"-heatmap"]];this.below=null}var n=b("./convert"),k=b("../../plots/mapbox/constants").traceLayerPrefix;b=p.prototype;b.update=function(m){var a=this.subplot,g=this.layerList;m=n(m);var h=a.belowLookup["trace-"+this.uid];a.map.getSource(this.sourceId).setData(m.geojson);h!==this.below&&(this._removeLayers(),this._addLayers(m,h),this.below=h);for(h=0;h<g.length;h++){var r=
g[h],l=r[1];r=m[r[0]];a.setOptions(l,"setLayoutProperty",r.layout);"visible"===r.layout.visibility&&a.setOptions(l,"setPaintProperty",r.paint)}};b._addLayers=function(m,a){for(var g=this.subplot,h=this.layerList,r=this.sourceId,l=0;l<h.length;l++){var c=h[l],d=c[0],e=m[d];g.addLayer({type:d,id:c[1],source:r,layout:e.layout,paint:e.paint},a)}};b._removeLayers=function(){for(var m=this.subplot.map,a=this.layerList,g=a.length-1;0<=g;g--)m.removeLayer(a[g][1])};b.dispose=function(){var m=this.subplot.map;
this._removeLayers();m.removeSource(this.sourceId)};N.exports=function(m,a){var g=a[0].trace,h=new p(m,g.uid),r=h.sourceId;a=n(a);g=h.below=m.belowLookup["trace-"+g.uid];m.map.addSource(r,{type:"geojson",data:a.geojson});h._addLayers(a,g);return h}},{"../../plots/mapbox/constants":909,"./convert":1057}],1063:[function(b,N,G){var p=b("../../lib");N.exports=function(n,k){for(var m=0;m<n.length;m++)n[m].i=m;p.mergeArray(k.text,n,"tx");p.mergeArray(k.hovertext,n,"htx");if(k=k.marker)if(p.mergeArray(k.opacity,
n,"mo"),p.mergeArray(k.color,n,"mc"),k=k.line)p.mergeArray(k.color,n,"mlc"),p.mergeArrayCastPositive(k.width,n,"mlw")}},{"../../lib":803}],1064:[function(b,N,G){G=b("../bar/attributes");var p=b("../scatter/attributes").line,n=b("../../plots/attributes"),k=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat,m=b("../../plots/template_attributes").hovertemplateAttrs,a=b("../../plots/template_attributes").texttemplateAttrs,g=b("./constants"),h=b("../../lib/extend").extendFlat;b=b("../../components/color");
var r=G.x,l=G.x0,c=G.dx,d=G.y,e=G.y0,f=G.dy,q=G.xperiod,t=G.yperiod,w=G.xperiod0,x=G.yperiod0,z=G.xperiodalignment,B=G.yperiodalignment,A=k("x");k=k("y");var D=G.hovertext;m=m({},{keys:g.eventDataKeys});n=h({},n.hoverinfo,{flags:"name;x;y;text;percent initial;percent previous;percent total".split(";")});a=a({editType:"plot"},{keys:g.eventDataKeys.concat(["label","value"])});g=G.text;var C=G.textposition,v=h({},G.insidetextanchor,{dflt:"middle"}),y=h({},G.textangle,{dflt:0}),F=G.textfont,J=G.insidetextfont,
K=G.outsidetextfont,O=G.constraintext,I=G.cliponaxis,L=h({},G.orientation,{}),H=h({},G.offset,{arrayOk:!1}),M=h({},G.width,{arrayOk:!1}),Q=h({},G.marker);delete Q.pattern;N.exports={x:r,x0:l,dx:c,y:d,y0:e,dy:f,xperiod:q,yperiod:t,xperiod0:w,yperiod0:x,xperiodalignment:z,yperiodalignment:B,xhoverformat:A,yhoverformat:k,hovertext:D,hovertemplate:m,hoverinfo:n,textinfo:{valType:"flaglist",flags:"label;text;percent initial;percent previous;percent total;value".split(";"),extras:["none"],editType:"plot",
arrayOk:!1},texttemplate:a,text:g,textposition:C,insidetextanchor:v,textangle:y,textfont:F,insidetextfont:J,outsidetextfont:K,constraintext:O,cliponaxis:I,orientation:L,offset:H,width:M,marker:Q,connector:{fillcolor:{valType:"color",editType:"style"},line:{color:h({},p.color,{dflt:b.defaultLine}),width:h({},p.width,{dflt:0,editType:"plot"}),dash:p.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:G.offsetgroup,alignmentgroup:G.alignmentgroup}},
{"../../components/color":666,"../../lib/extend":793,"../../plots/attributes":850,"../../plots/cartesian/axis_format_attributes":857,"../../plots/template_attributes":926,"../bar/attributes":941,"../scatter/attributes":1218,"./constants":1066}],1065:[function(b,N,G){function p(h){return h===g?0:h}var n=b("../../plots/cartesian/axes"),k=b("../../plots/cartesian/align_period"),m=b("./arrays_to_calcdata"),a=b("../scatter/calc_selection"),g=b("../../constants/numerical").BADNUM;N.exports=function(h,r){var l=
n.getFromId(h,r.xaxis||"x"),c=n.getFromId(h,r.yaxis||"y"),d;if("h"===r.orientation){h=l.makeCalcdata(r,"x");var e=c.makeCalcdata(r,"y");c=k(r,c,"y",e);var f=!!r.yperiodalignment}else h=c.makeCalcdata(r,"y"),e=l.makeCalcdata(r,"x"),c=k(r,l,"x",e),f=!!r.xperiodalignment;l=c.vals;var q=Math.min(l.length,h.length),t=Array(q);r._base=[];for(d=0;d<q;d++){0>h[d]&&(h[d]=g);var w=!1;h[d]!==g&&d+1<q&&h[d+1]!==g&&(w=!0);w=t[d]={p:l[d],s:h[d],cNext:w};r._base[d]=-.5*w.s;f&&(t[d].orig_p=e[d],t[d].pEnd=c.ends[d],
t[d].pStart=c.starts[d]);r.ids&&(w.id=String(r.ids[d]));0===d&&(t[0].vTotal=0);t[0].vTotal+=p(w.s);w.begR=p(w.s)/p(t[0].s)}for(d=0;d<q;d++)if(w=t[d],w.s!==g){w.sumR=w.s/t[0].vTotal;w.difR=void 0!==x?w.s/x:1;var x=w.s}m(t,r);a(t,r);return t}},{"../../constants/numerical":779,"../../plots/cartesian/align_period":851,"../../plots/cartesian/axes":854,"../scatter/calc_selection":1220,"./arrays_to_calcdata":1063}],1066:[function(b,N,G){N.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},
{}],1067:[function(b,N,G){var p=b("../bar/cross_trace_calc").setGroupPositions;N.exports=function(n,k){var m=n._fullLayout,a=n._fullData,g=n.calcdata,h=k.xaxis,r=k.yaxis;k=[];var l=[],c=[],d;for(d=0;d<a.length;d++){var e=a[d];var f="h"===e.orientation;!0===e.visible&&e.xaxis===h._id&&e.yaxis===r._id&&"funnel"===e.type&&(e=g[d],f?c.push(e):l.push(e),k.push(e))}m={mode:m.funnelmode,norm:m.funnelnorm,gap:m.funnelgap,groupgap:m.funnelgroupgap};p(n,h,r,l,m);p(n,r,h,c,m);for(d=0;d<k.length;d++)for(e=k[d],
n=0;n<e.length;n++)n+1<e.length&&(e[n].nextP0=e[n+1].p0,e[n].nextS0=e[n+1].s0,e[n].nextP1=e[n+1].p1,e[n].nextS1=e[n+1].s1)}},{"../bar/cross_trace_calc":944}],1068:[function(b,N,G){function p(l){l=n.isArrayOrTypedArray(l)?"#000":l;return r.addOpacity(l,.5*r.opacity(l))}var n=b("../../lib"),k=b("../bar/defaults").handleGroupingDefaults,m=b("../bar/defaults").handleText,a=b("../scatter/xy_defaults"),g=b("../scatter/period_defaults"),h=b("./attributes"),r=b("../../components/color");N.exports={supplyDefaults:function(l,
c,d,e){function f(w,x){return n.coerce(l,c,h,w,x)}if(a(l,c,e,f)){g(l,c,e,f);f("xhoverformat");f("yhoverformat");f("orientation",c.y&&!c.x?"v":"h");f("offset");f("width");var q=f("text");f("hovertext");f("hovertemplate");var t=f("textposition");m(l,c,e,f,t,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0});"none"===c.textposition||c.texttemplate||f("textinfo",Array.isArray(q)?"text+value":"value");d=f("marker.color",
d);f("marker.line.color",r.defaultLine);f("marker.line.width");f("connector.visible")&&(f("connector.fillcolor",p(d)),f("connector.line.width")&&(f("connector.line.color"),f("connector.line.dash")))}else c.visible=!1},crossTraceDefaults:function(l,c){function d(t){return n.coerce(f._input,f,h,t)}if("group"===c.funnelmode)for(var e=0;e<l.length;e++){var f=l[e];var q=f._input;k(q,f,c,d)}}}},{"../../components/color":666,"../../lib":803,"../bar/defaults":945,"../scatter/period_defaults":1238,"../scatter/xy_defaults":1245,
"./attributes":1064}],1069:[function(b,N,G){N.exports=function(p,n){p.x="xVal"in n?n.xVal:n.x;p.y="yVal"in n?n.yVal:n.y;"percentInitial"in n&&(p.percentInitial=n.percentInitial);"percentPrevious"in n&&(p.percentPrevious=n.percentPrevious);"percentTotal"in n&&(p.percentTotal=n.percentTotal);n.xa&&(p.xaxis=n.xa);n.ya&&(p.yaxis=n.ya);return p}},{}],1070:[function(b,N,G){var p=b("../../components/color").opacity,n=b("../bar/hover").hoverOnBars,k=b("../../lib").formatPercent;N.exports=function(m,a,g,h,
r){if(m=n(m,a,g,h,r)){a=m.cd;g=a[0].trace;a=a[m.index];m[("h"===g.orientation?"x":"y")+"LabelVal"]=a.s;m.percentInitial=a.begR;m.percentInitialLabel=k(a.begR,1);m.percentPrevious=a.difR;m.percentPreviousLabel=k(a.difR,1);m.percentTotal=a.sumR;m.percentTotalLabel=k(a.sumR,1);var l=a.hi||g.hoverinfo;h=[];l&&"none"!==l&&"skip"!==l&&(r="all"===l,l=l.split("+"),(r||-1!==l.indexOf("percent initial"))&&h.push(m.percentInitialLabel+" of initial"),(r||-1!==l.indexOf("percent previous"))&&h.push(m.percentPreviousLabel+
" of previous"),(r||-1!==l.indexOf("percent total"))&&h.push(m.percentTotalLabel+" of total"));m.extraText=h.join("\x3cbr\x3e");r=g.marker;g=a.mc||r.color;h=a.mlc||r.line.color;a=a.mlw||r.line.width;a=p(g)?g:p(h)&&a?h:void 0;m.color=a;return[m]}}},{"../../components/color":666,"../../lib":803,"../bar/hover":948}],1071:[function(b,N,G){N.exports={attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults").supplyDefaults,crossTraceDefaults:b("./defaults").crossTraceDefaults,
supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc"),crossTraceCalc:b("./cross_trace_calc"),plot:b("./plot"),style:b("./style").style,hoverPoints:b("./hover"),eventData:b("./event_data"),selectPoints:b("../bar/select"),moduleType:"trace",name:"funnel",basePlotModule:b("../../plots/cartesian"),categories:"bar-like cartesian svg oriented showLegend zoomScale".split(" "),meta:{}}},{"../../plots/cartesian":868,"../bar/select":953,"./attributes":1064,"./calc":1065,"./cross_trace_calc":1067,"./defaults":1068,
"./event_data":1069,"./hover":1070,"./layout_attributes":1072,"./layout_defaults":1073,"./plot":1074,"./style":1075}],1072:[function(b,N,G){N.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1073:[function(b,N,G){var p=b("../../lib"),n=b("./layout_attributes");N.exports=function(k,m,a){for(var g=!1,h=0;h<a.length;h++){var r=
a[h];if(r.visible&&"funnel"===r.type){g=!0;break}}g&&(p.coerce(k,m,n,"funnelmode",void 0),p.coerce(k,m,n,"funnelgap",.2),p.coerce(k,m,n,"funnelgroupgap",void 0))}},{"../../lib":803,"./layout_attributes":1072}],1074:[function(b,N,G){function p(c,d,e,f){var q=d.xaxis,t=d.yaxis;a.makeTraceGroups(f,e,"trace bars").each(function(w){var x=m.select(this);w=w[0].trace;x=a.ensureSingle(x,"g","regions");if(w.connector&&w.connector.visible){var z="h"===w.orientation;x=x.selectAll("g.region").data(a.identity);
x.enter().append("g").classed("region",!0);x.exit().remove();var B=x.size();x.each(function(A,D){if(D===B-1||A.cNext){D=k(A,q,t,z);A=D[0];D=D[1];var C="";A[0]!==h&&D[0]!==h&&A[1]!==h&&D[1]!==h&&A[2]!==h&&D[2]!==h&&A[3]!==h&&D[3]!==h&&(C=z?C+("M"+A[0]+","+D[1]+"L"+A[2]+","+D[2]+"H"+A[3]+"L"+A[1]+","+D[1]+"Z"):C+("M"+A[1]+","+D[1]+"L"+A[2]+","+D[3]+"V"+D[2]+"L"+A[1]+","+D[0]+"Z"));""===C&&(C="M0,0Z");a.ensureSingle(m.select(this),"path").attr("d",C).call(g.setClipUrl,d.layerClipId,c)}})}else x.remove()})}
function n(c,d,e,f){var q=d.xaxis,t=d.yaxis;a.makeTraceGroups(f,e,"trace bars").each(function(w){var x=m.select(this);w=w[0].trace;x=a.ensureSingle(x,"g","lines");if(w.connector&&w.connector.visible&&w.connector.line.width){var z="h"===w.orientation;x=x.selectAll("g.line").data(a.identity);x.enter().append("g").classed("line",!0);x.exit().remove();var B=x.size();x.each(function(A,D){if(D===B-1||A.cNext){D=k(A,q,t,z);A=D[0];D=D[1];var C="";void 0!==A[3]&&void 0!==D[3]&&(z?(C+="M"+A[0]+","+D[1]+"L"+
A[2]+","+D[2],C+="M"+A[1]+","+D[1]+"L"+A[3]+","+D[2]):(C+="M"+A[1]+","+D[1]+"L"+A[2]+","+D[3],C+="M"+A[1]+","+D[0]+"L"+A[2]+","+D[2]));""===C&&(C="M0,0Z");a.ensureSingle(m.select(this),"path").attr("d",C).call(g.setClipUrl,d.layerClipId,c)}})}else x.remove()})}function k(c,d,e,f){var q=[],t=[],w=f?d:e;d=f?e:d;q[0]=w.c2p(c.s0,!0);t[0]=d.c2p(c.p0,!0);q[1]=w.c2p(c.s1,!0);t[1]=d.c2p(c.p1,!0);q[2]=w.c2p(c.nextS0,!0);t[2]=d.c2p(c.nextP0,!0);q[3]=w.c2p(c.nextS1,!0);t[3]=d.c2p(c.nextP1,!0);return f?[q,t]:
[t,q]}var m=b("@plotly/d3"),a=b("../../lib"),g=b("../../components/drawing"),h=b("../../constants/numerical").BADNUM,r=b("../bar/plot"),l=b("../bar/uniform_text").clearMinTextSize;N.exports=function(c,d,e,f){var q=c._fullLayout;l("funnel",q);p(c,d,e,f);n(c,d,e,f);r.plot(c,d,e,f,{mode:q.funnelmode,norm:q.funnelmode,gap:q.funnelgap,groupgap:q.funnelgroupgap})}},{"../../components/drawing":688,"../../constants/numerical":779,"../../lib":803,"../bar/plot":952,"../bar/uniform_text":957,"@plotly/d3":58}],
1075:[function(b,N,G){var p=b("@plotly/d3"),n=b("../../components/drawing"),k=b("../../components/color"),m=b("../../constants/interactions").DESELECTDIM;G=b("../bar/style");var a=b("../bar/uniform_text").resizeText,g=G.styleTextPoints;N.exports={style:function(h,r,l){r=l?l:p.select(h).selectAll("g.funnellayer").selectAll("g.trace");a(h,r,"funnel");r.style("opacity",function(c){return c[0].trace.opacity});r.each(function(c){var d=p.select(this),e=c[0].trace;d.selectAll(".point \x3e path").each(function(f){if(!f.isBlank){var q=
e.marker;p.select(this).call(k.fill,f.mc||q.color).call(k.stroke,f.mlc||q.line.color).call(n.dashLine,q.line.dash,f.mlw||q.line.width).style("opacity",e.selectedpoints&&!f.selected?m:1)}});g(d,e,h);d.selectAll(".regions").each(function(){p.select(this).selectAll("path").style("stroke-width",0).call(k.fill,e.connector.fillcolor)});d.selectAll(".lines").each(function(){var f=e.connector.line;n.lineGroupStyle(p.select(this).selectAll("path"),f.width,f.color,f.dash)})})}}},{"../../components/color":666,
"../../components/drawing":688,"../../constants/interactions":778,"../bar/style":955,"../bar/uniform_text":957,"@plotly/d3":58}],1076:[function(b,N,G){G=b("../pie/attributes");var p=b("../../plots/attributes"),n=b("../../plots/domain").attributes,k=b("../../plots/template_attributes").hovertemplateAttrs,m=b("../../plots/template_attributes").texttemplateAttrs;b=b("../../lib/extend").extendFlat;N.exports={labels:G.labels,label0:G.label0,dlabel:G.dlabel,values:G.values,marker:{colors:G.marker.colors,
line:{color:b({},G.marker.line.color,{dflt:null}),width:b({},G.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:G.text,hovertext:G.hovertext,scalegroup:b({},G.scalegroup,{}),textinfo:b({},G.textinfo,{flags:["label","text","value","percent"]}),texttemplate:m({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:b({},p.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:k({},{keys:["label","color","value","text","percent"]}),textposition:b({},
G.textposition,{values:["inside","none"],dflt:"inside"}),textfont:G.textfont,insidetextfont:G.insidetextfont,title:{text:G.title.text,font:G.title.font,position:b({},G.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:n({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},{"../../lib/extend":793,"../../plots/attributes":850,
"../../plots/domain":882,"../../plots/template_attributes":926,"../pie/attributes":1192}],1077:[function(b,N,G){var p=b("../../plots/plots");G.name="funnelarea";G.plot=function(n,k,m,a){p.plotBasePlot(G.name,n,k,m,a)};G.clean=function(n,k,m,a){p.cleanBasePlot(G.name,n,k,m,a)}},{"../../plots/plots":917}],1078:[function(b,N,G){var p=b("../pie/calc");N.exports={calc:function(n,k){return p.calc(n,k)},crossTraceCalc:function(n){p.crossTraceCalc(n,{type:"funnelarea"})}}},{"../pie/calc":1194}],1079:[function(b,
N,G){var p=b("../../lib"),n=b("./attributes"),k=b("../../plots/domain").defaults,m=b("../bar/defaults").handleText,a=b("../pie/defaults").handleLabelsAndValues;N.exports=function(g,h,r,l){function c(f,q){return p.coerce(g,h,n,f,q)}r=c("labels");var d=c("values");r=a(r,d);d=r.len;h._hasLabels=r.hasLabels;h._hasValues=r.hasValues;!h._hasLabels&&h._hasValues&&(c("label0"),c("dlabel"));if(d){h._length=d;c("marker.line.width")&&c("marker.line.color",l.paper_bgcolor);c("marker.colors");c("scalegroup");
r=c("text");d=c("texttemplate");var e;d||(e=c("textinfo",Array.isArray(r)?"text+percent":"percent"));c("hovertext");c("hovertemplate");if(d||e&&"none"!==e)e=c("textposition"),m(g,h,l,c,e,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});k(h,l,c);c("title.text")&&(c("title.position"),p.coerceFont(c,"title.font",l.font));c("aspectratio");c("baseratio")}else h.visible=!1}},{"../../lib":803,"../../plots/domain":882,
"../bar/defaults":945,"../pie/defaults":1195,"./attributes":1076}],1080:[function(b,N,G){N.exports={moduleType:"trace",name:"funnelarea",basePlotModule:b("./base_plot"),categories:["pie-like","funnelarea","showLegend"],attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults"),supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc").calc,crossTraceCalc:b("./calc").crossTraceCalc,plot:b("./plot"),style:b("./style"),styleOne:b("../pie/style_one"),meta:{}}},
{"../pie/style_one":1203,"./attributes":1076,"./base_plot":1077,"./calc":1078,"./defaults":1079,"./layout_attributes":1081,"./layout_defaults":1082,"./plot":1083,"./style":1084}],1081:[function(b,N,G){b=b("../pie/layout_attributes").hiddenlabels;N.exports={hiddenlabels:b,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{"../pie/layout_attributes":1199}],1082:[function(b,N,G){var p=b("../../lib"),n=b("./layout_attributes");
N.exports=function(k,m){p.coerce(k,m,n,"hiddenlabels",void 0);p.coerce(k,m,n,"funnelareacolorway",m.colorway);p.coerce(k,m,n,"extendfunnelareacolors",void 0)}},{"../../lib":803,"./layout_attributes":1081}],1083:[function(b,N,G){function p(A,D){return"l"+(D[0]-A[0])+","+(D[1]-A[1])}function n(A,D){return[.5*(A[0]+D[0]),.5*(A[1]+D[1])]}function k(A){function D(){var H=Math.sqrt(J);return[H,-H]}if(A.length){var C=A[0],v=C.trace,y=v.aspectratio;v=v.baseratio;.999<v&&(v=.999);v=Math.pow(v,2);var F=C.vTotal,
J=F*v/(1-v)/F;v=[];v.push(D());var K;for(K=A.length-1;-1<K;K--){var O=A[K];O.hidden||(J+=O.v/F,v.push(D()))}F=Infinity;var I=-Infinity;for(K=0;K<v.length;K++)O=v[K],F=Math.min(F,O[1]),I=Math.max(I,O[1]);for(K=0;K<v.length;K++)v[K][1]-=(I+F)/2;K=C.r;F=(I-F)/2;O=K/v[v.length-1][0];y*=K/F;C.r=y*F;for(K=0;K<v.length;K++)v[K][0]*=O,v[K][1]*=y;O=v[0];C=[-O[0],O[1]];y=[O[0],O[1]];F=0;for(K=A.length-1;-1<K;K--)if(O=A[K],!O.hidden){F+=1;I=v[F][0];var L=v[F][1];O.TL=[-I,L];O.TR=[I,L];O.BL=C;O.BR=y;O.pxmid=
n(O.TR,O.BR);C=O.TL;y=O.TR}}}var m=b("@plotly/d3"),a=b("../../components/drawing"),g=b("../../lib"),h=g.strScale,r=g.strTranslate,l=b("../../lib/svg_text_utils"),c=b("../bar/plot").toMoveInsideBar;G=b("../bar/uniform_text");var d=G.recordMinTextSize,e=G.clearMinTextSize,f=b("../pie/helpers");b=b("../pie/plot");var q=b.attachFxHandlers,t=b.determineInsideTextFont,w=b.layoutAreas,x=b.prerenderTitles,z=b.positionTitleOutside,B=b.formatSliceLabel;N.exports=function(A,D){var C=A._fullLayout;e("funnelarea",
C);x(D,A);w(D,C._size);g.makeTraceGroups(C._funnelarealayer,D,"trace").each(function(v){var y=m.select(this),F=v[0],J=F.trace;k(v);y.each(function(){var K=m.select(this).selectAll("g.slice").data(v);K.enter().append("g").classed("slice",!0);K.exit().remove();K.each(function(O,I){if(O.hidden)m.select(this).selectAll("path,g").remove();else{O.pointNumber=O.i;O.curveNumber=J.index;var L=F.cx,H=F.cy,M=m.select(this),Q=M.selectAll("path.surface").data([O]);Q.enter().append("path").classed("surface",!0).style({"pointer-events":"all"});
M.call(q,A,v);var Z="M"+(L+O.TR[0])+","+(H+O.TR[1])+p(O.TR,O.BR)+p(O.BR,O.BL)+p(O.BL,O.TL)+"Z";Q.attr("d",Z);B(A,O,F);Q=f.castOption(J.textposition,O.pts);M=M.selectAll("g.slicetext").data(O.text&&"none"!==Q?[0]:[]);M.enter().append("g").classed("slicetext",!0);M.exit().remove();M.each(function(){var ca=g.ensureSingle(m.select(this),"text","",function(U){U.attr("data-notex",1)}),W=g.ensureUniformFontSize(A,t(J,O,C.font));ca.text(O.text).attr({"class":"slicetext",transform:"","text-anchor":"middle"}).call(a.font,
W).call(l.convertToTspans,A);var T=a.bBox(ca.node());T=c(Math.max(O.TL[0],O.BL[0])+L,Math.min(O.TR[0],O.BR[0])+L,Math.min(O.BL[1],O.BR[1])+H,Math.max(O.TL[1],O.TR[1])+H,T,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"});T.fontSize=W.size;d(J.type,T,C);v[I].transform=T;ca.attr("transform",g.getTextTransform(T))})}});K=m.select(this).selectAll("g.titletext").data(J.title.text?[0]:[]);K.enter().append("g").classed("titletext",!0);K.exit().remove();K.each(function(){var O=g.ensureSingle(m.select(this),
"text","",function(L){L.attr("data-notex",1)}),I=J.title.text;J._meta&&(I=g.templateString(I,J._meta));O.text(I).attr({"class":"titletext",transform:"","text-anchor":"middle"}).call(a.font,J.title.font).call(l.convertToTspans,A);I=z(F,C._size);O.attr("transform",r(I.x,I.y)+h(Math.min(1,I.scale))+r(I.tx,I.ty))})})})}},{"../../components/drawing":688,"../../lib":803,"../../lib/svg_text_utils":829,"../bar/plot":952,"../bar/uniform_text":957,"../pie/helpers":1197,"../pie/plot":1201,"@plotly/d3":58}],
1084:[function(b,N,G){var p=b("@plotly/d3"),n=b("../pie/style_one"),k=b("../bar/uniform_text").resizeText;N.exports=function(m){var a=m._fullLayout._funnelarealayer.selectAll(".trace");k(m,a,"funnelarea");a.each(function(g){var h=g[0].trace;g=p.select(this);g.style({opacity:h.opacity});g.selectAll("path.surface").each(function(r){p.select(this).call(n,r,h)})})}},{"../bar/uniform_text":957,"../pie/style_one":1203,"@plotly/d3":58}],1085:[function(b,N,G){G=b("../scatter/attributes");var p=b("../../plots/attributes"),
n=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat,k=b("../../plots/template_attributes").hovertemplateAttrs,m=b("../../components/colorscale/attributes");b=b("../../lib/extend").extendFlat;N.exports=b({z:{valType:"data_array",editType:"calc"},x:b({},G.x,{impliedEdits:{xtype:"array"}}),x0:b({},G.x0,{impliedEdits:{xtype:"scaled"}}),dx:b({},G.dx,{impliedEdits:{xtype:"scaled"}}),y:b({},G.y,{impliedEdits:{ytype:"array"}}),y0:b({},G.y0,{impliedEdits:{ytype:"scaled"}}),dy:b({},G.dy,{impliedEdits:{ytype:"scaled"}}),
xperiod:b({},G.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:b({},G.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:b({},G.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:b({},G.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:b({},G.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:b({},G.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,
editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:n("x"),yhoverformat:n("y"),
zhoverformat:n("z",1),hovertemplate:k(),showlegend:b({},p.showlegend,{dflt:!1})},{transforms:void 0},m("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plots/attributes":850,"../../plots/cartesian/axis_format_attributes":857,"../../plots/template_attributes":926,"../scatter/attributes":1218}],1086:[function(b,N,G){function p(t){for(var w=[],x=t.length,z=0;z<x;z++){var B=t[z];B!==q&&w.push(B)}return w}function n(t,w,x){for(var z=[],B=
-1,A=0;A<x.length;A++)if(w[A]!==q){B++;z[B]=[];for(var D=0;D<x[A].length;D++)t[D]!==q&&z[B].push(x[A][D])}return z}var k=b("../../registry"),m=b("../../lib"),a=b("../../plots/cartesian/axes"),g=b("../../plots/cartesian/align_period"),h=b("../histogram2d/calc"),r=b("../../components/colorscale/calc"),l=b("./convert_column_xyz"),c=b("./clean_2d_array"),d=b("./interp2d"),e=b("./find_empties"),f=b("./make_bound_array"),q=b("../../constants/numerical").BADNUM;N.exports=function(t,w){function x(T){v=w._input.zsmooth=
w.zsmooth=!1;m.warn('cannot use zsmooth: "fast": '+T)}var z=a.getFromId(t,w.xaxis||"x"),B=a.getFromId(t,w.yaxis||"y"),A=k.traceIs(w,"contour"),D=k.traceIs(w,"histogram"),C=k.traceIs(w,"gl2d"),v=A?"best":w.zsmooth,y;z._minDtick=0;B._minDtick=0;if(D){var F=h(t,w);var J=F.orig_x;var K=F.x;var O=F.x0;var I=F.dx;var L=F.orig_y;var H=F.y;var M=F.y0;var Q=F.dy;var Z=F.z}else Z=w.z,m.isArray1D(Z)?(l(w,z,B,"x","y",["z"]),K=w._x,H=w._y,Z=w._z):(J=w.x?z.makeCalcdata(w,"x"):[],L=w.y?B.makeCalcdata(w,"y"):[],
K=g(w,z,"x",J).vals,H=g(w,B,"y",L).vals,w._x=K,w._y=H),O=w.x0,I=w.dx,M=w.y0,Q=w.dy,Z=c(Z,w,z,B);if(z.rangebreaks||B.rangebreaks)Z=n(K,H,Z),D||(K=p(K),H=p(H),w._x=K,w._y=H);D||!A&&!w.connectgaps||(w._emptypoints=e(Z),d(Z,w._emptypoints));if("fast"===v)if("log"===z.type||"log"===B.type)x("log axis found");else if(!D){if(K.length){var ca=(K[K.length-1]-K[0])/(K.length-1),W=Math.abs(ca/100);for(y=0;y<K.length-1;y++)if(Math.abs(K[y+1]-K[y]-ca)>W){x("x scale is not linear");break}}if(H.length&&"fast"===
v)for(ca=(H[H.length-1]-H[0])/(H.length-1),W=Math.abs(ca/100),y=0;y<H.length-1;y++)if(Math.abs(H[y+1]-H[y]-ca)>W){x("y scale is not linear");break}}y=m.maxRowLength(Z);K="scaled"===w.xtype?"":K;ca=f(w,K,O,I,y,z);H="scaled"===w.ytype?"":H;W=f(w,H,M,Q,Z.length,B);C||(w._extremes[z._id]=a.findExtremes(z,ca),w._extremes[B._id]=a.findExtremes(B,W));C={x:ca,y:W,z:Z,text:w._text||w.text,hovertext:w._hovertext||w.hovertext};w.xperiodalignment&&J&&(C.orig_x=J);w.yperiodalignment&&L&&(C.orig_y=L);K&&K.length===
ca.length-1&&(C.xCenter=K);H&&H.length===W.length-1&&(C.yCenter=H);D&&(C.xRanges=F.xRanges,C.yRanges=F.yRanges,C.pts=F.pts);A||r(t,w,{vals:Z,cLetter:"z"});A&&w.contours&&"heatmap"===w.contours.coloring&&(t={type:"contour"===w.type?"heatmap":"histogram2d",xcalendar:w.xcalendar,ycalendar:w.ycalendar},C.xfill=f(t,K,O,I,y,z),C.yfill=f(t,H,M,Q,Z.length,B));return[C]}},{"../../components/colorscale/calc":674,"../../constants/numerical":779,"../../lib":803,"../../plots/cartesian/align_period":851,"../../plots/cartesian/axes":854,
"../../registry":931,"../histogram2d/calc":1118,"./clean_2d_array":1087,"./convert_column_xyz":1089,"./find_empties":1091,"./interp2d":1094,"./make_bound_array":1095}],1087:[function(b,N,G){var p=b("fast-isnumeric"),n=b("../../lib"),k=b("../../constants/numerical").BADNUM;N.exports=function(m,a,g,h){function r(B){if(p(B))return+B}function l(B){if(a&&"carpet"!==a.type&&"contourcarpet"!==a.type&&B&&"category"===B.type&&a["_"+B._id.charAt(0)].length){var A=B._id.charAt(0),D={};A=a["_"+A+"CategoryMap"]||
a[A];for(d=0;d<A.length;d++)D[A[d]]=d;return function(C){C=D[B._categories[C]];return C+1?C:k}}return n.identity}var c,d,e;if(a&&a.transpose){for(d=c=0;d<m.length;d++)c=Math.max(c,m[d].length);if(0===c)return!1;var f=function(B){return B.length};var q=function(B,A,D){return(B[D]||[])[A]}}else c=m.length,f=function(B,A){return B[A].length},q=function(B,A,D){return(B[A]||[])[D]};var t=function(B,A,D){return A===k||D===k?k:q(B,A,D)},w=l(g),x=l(h);h&&"category"===h.type&&(c=h._categories.length);var z=
Array(c);for(d=0;d<c;d++)for(h=g&&"category"===g.type?g._categories.length:f(m,d),z[d]=Array(h),e=0;e<h;e++)z[d][e]=r(t(m,x(d),w(e)));return z}},{"../../constants/numerical":779,"../../lib":803,"fast-isnumeric":249}],1088:[function(b,N,G){N.exports={min:"zmin",max:"zmax"}},{}],1089:[function(b,N,G){var p=b("../../lib"),n=b("../../constants/numerical").BADNUM,k=b("../../plots/cartesian/align_period");N.exports=function(m,a,g,h,r,l){var c=m._length,d=a.makeCalcdata(m,h),e=g.makeCalcdata(m,r);d=k(m,
a,h,d).vals;e=k(m,g,r,e).vals;var f=m.text,q=void 0!==f&&p.isArray1D(f),t=m.hovertext,w=void 0!==t&&p.isArray1D(t),x,z=p.distinctVals(d),B=z.vals,A=p.distinctVals(e),D=A.vals,C=[],v,y;var F=D.length;var J=B.length;for(x=0;x<l.length;x++)C[x]=p.init2dArray(F,J);q&&(v=p.init2dArray(F,J));w&&(y=p.init2dArray(F,J));J=p.init2dArray(F,J);for(x=0;x<c;x++)if(d[x]!==n&&e[x]!==n){var K=p.findBin(d[x]+z.minDiff/2,B),O=p.findBin(e[x]+A.minDiff/2,D);for(F=0;F<l.length;F++)C[F][O][K]=m[l[F]][x],J[O][K]=x;q&&(v[O][K]=
f[x]);w&&(y[O][K]=t[x])}m["_"+h]=B;m["_"+r]=D;for(F=0;F<l.length;F++)m["_"+l[F]]=C[F];q&&(m._text=v);w&&(m._hovertext=y);a&&"category"===a.type&&(m["_"+h+"CategoryMap"]=B.map(function(I){return a._categories[I]}));g&&"category"===g.type&&(m["_"+r+"CategoryMap"]=D.map(function(I){return g._categories[I]}));m._after2before=J}},{"../../constants/numerical":779,"../../lib":803,"../../plots/cartesian/align_period":851}],1090:[function(b,N,G){var p=b("../../lib"),n=b("./xyz_defaults"),k=b("../scatter/period_defaults"),
m=b("./style_defaults"),a=b("../../components/colorscale/defaults"),g=b("./attributes");N.exports=function(h,r,l,c){function d(e,f){return p.coerce(h,r,g,e,f)}n(h,r,d,c)?(k(h,r,c,d),d("xhoverformat"),d("yhoverformat"),d("text"),d("hovertext"),d("hovertemplate"),m(h,r,d,c),d("hoverongaps"),d("connectgaps",p.isArray1D(r.z)&&!1!==r.zsmooth),a(h,r,c,d,{prefix:"",cLetter:"z"})):r.visible=!1}},{"../../components/colorscale/defaults":676,"../../lib":803,"../scatter/period_defaults":1238,"./attributes":1085,
"./style_defaults":1098,"./xyz_defaults":1099}],1091:[function(b,N,G){var p=b("../../lib").maxRowLength;N.exports=function(n){var k=[],m={},a=[],g=n[0],h=[],r=[0,0,0],l=p(n),c,d,e;for(c=0;c<n.length;c++){var f=h;h=g;g=n[c+1]||[];for(d=0;d<l;d++)void 0===h[d]&&((e=(void 0!==h[d-1]?1:0)+(void 0!==h[d+1]?1:0)+(void 0!==f[d]?1:0)+(void 0!==g[d]?1:0))?(0===c&&e++,0===d&&e++,c===n.length-1&&e++,d===h.length-1&&e++,4>e&&(m[[c,d]]=[c,d,e]),k.push([c,d,e])):a.push([c,d]))}for(;a.length;){g={};h=!1;for(n=a.length-
1;0<=n;n--){var q=a[n];c=q[0];d=q[1];if(e=((m[[c-1,d]]||r)[2]+(m[[c+1,d]]||r)[2]+(m[[c,d-1]]||r)[2]+(m[[c,d+1]]||r)[2])/20)g[q]=[c,d,e],a.splice(n,1),h=!0}if(!h)throw"findEmpties iterated with no new neighbors";for(q in g)m[q]=g[q],k.push(g[q])}return k.sort(function(t,w){return w[2]-t[2]})}},{"../../lib":803}],1092:[function(b,N,G){var p=b("../../components/fx"),n=b("../../lib"),k=b("../../plots/cartesian/axes"),m=b("../../components/colorscale").extractOpts;N.exports=function(a,g,h,r,l){l||(l={});
var c=l.isContour,d=a.cd[0];r=d.trace;l=a.xa;var e=a.ya,f=d.x,q=d.y,t=d.z,w=d.xCenter,x=d.yCenter,z=d.zmask,B=r.zhoverformat,A=f,D=q;if(!1!==a.index){try{var C=Math.round(a.index[1]);var v=Math.round(a.index[0])}catch(J){n.error("Error hovering on heatmap, pointNumber must be [row,col], found:",a.index);return}if(0>C||C>=t[0].length||0>v||v>t.length)return}else{if(0<p.inbox(g-f[0],g-f[f.length-1],0)||0<p.inbox(h-q[0],h-q[q.length-1],0))return;if(c){A=[2*f[0]-f[1]];for(C=1;C<f.length;C++)A.push((f[C]+
f[C-1])/2);A.push([2*f[f.length-1]-f[f.length-2]]);D=[2*q[0]-q[1]];for(C=1;C<q.length;C++)D.push((q[C]+q[C-1])/2);D.push([2*q[q.length-1]-q[q.length-2]])}C=Math.max(0,Math.min(A.length-2,n.findBin(g,A)));v=Math.max(0,Math.min(D.length-2,n.findBin(h,D)))}g=l.c2p(f[C]);h=l.c2p(f[C+1]);A=e.c2p(q[v]);D=e.c2p(q[v+1]);if(c){var y=d.orig_x||f;c=d.orig_y||q;h=g;w=y[C];D=A;x=c[v]}else y=d.orig_x||w||f,c=d.orig_y||x||q,w=w?y[C]:(y[C]+y[C+1])/2,x=x?c[v]:(c[v]+c[v+1])/2,l&&"category"===l.type&&(w=f[C]),e&&"category"===
e.type&&(x=q[v]),r.zsmooth&&(g=h=l.c2p(w),A=D=e.c2p(x));e=t[v][C];z&&!z[v][C]&&(e=void 0);if(void 0!==e||r.hoverongaps){var F;Array.isArray(d.hovertext)&&Array.isArray(d.hovertext[v])?F=d.hovertext[v][C]:Array.isArray(d.text)&&Array.isArray(d.text[v])&&(F=d.text[v][C]);d=m(r);l=k.tickText({type:"linear",range:[d.min,d.max],hoverformat:B,_separators:l._separators,_numFormat:l._numFormat},e,"hover").text;return[n.extendFlat(a,{index:r._after2before?r._after2before[v][C]:[v,C],distance:a.maxHoverDistance,
spikeDistance:a.maxSpikeDistance,x0:g,x1:h,y0:A,y1:D,xLabelVal:w,yLabelVal:x,zLabelVal:e,zLabel:l,text:F})]}}},{"../../components/colorscale":678,"../../components/fx":706,"../../lib":803,"../../plots/cartesian/axes":854}],1093:[function(b,N,G){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot"),colorbar:b("./colorbar"),style:b("./style"),hoverPoints:b("./hover"),moduleType:"trace",name:"heatmap",basePlotModule:b("../../plots/cartesian"),categories:["cartesian",
"svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":868,"./attributes":1085,"./calc":1086,"./colorbar":1088,"./defaults":1090,"./hover":1092,"./plot":1096,"./style":1097}],1094:[function(b,N,G){function p(m,a,g){var h=0,r,l,c,d,e,f;for(r=0;r<a.length;r++){var q=a[r];var t=q[0];q=q[1];var w=m[t][q];for(l=d=e=0;4>l;l++){var x=k[l];if(c=m[t+x[0]])if(x=c[q+x[1]],void 0!==x){if(0===e)var z=f=x;else z=Math.min(z,x),f=Math.max(f,x);d++;e+=x}}if(0===d)throw"iterateInterp2d order is wrong: no defined neighbors";
m[t][q]=e/d;void 0===w?4>d&&(h=1):(m[t][q]=(1+g)*m[t][q]-g*w,f>z&&(h=Math.max(h,Math.abs(m[t][q]-w)/(f-z))))}return h}var n=b("../../lib"),k=[[-1,0],[1,0],[0,-1],[0,1]];N.exports=function(m,a){var g=1,h;p(m,a);for(h=0;h<a.length&&!(4>a[h][2]);h++);a=a.slice(h);for(h=0;100>h&&.01<g;h++)g=p(m,a,.5-.25*Math.min(1,.5*g));.01<g&&n.log("interp2d didn't converge quickly",g);return m}},{"../../lib":803}],1095:[function(b,N,G){var p=b("../../registry"),n=b("../../lib").isArrayOrTypedArray;N.exports=function(k,
m,a,g,h,r){var l=[],c=p.traceIs(k,"contour"),d=p.traceIs(k,"histogram"),e=p.traceIs(k,"gl2d");if(n(m)&&1<m.length&&!d&&"category"!==r.type)if(g=m.length,g<=h){if(c||e)l=m.slice(0,h);else if(1===h)l=[m[0]-.5,m[0]+.5];else{l=[1.5*m[0]-.5*m[1]];for(c=1;c<g;c++)l.push(.5*(m[c-1]+m[c]));l.push(1.5*m[g-1]-.5*m[g-2])}if(g<h)for(e=l[l.length-1],m=e-l[l.length-2],c=g;c<h;c++)e+=m,l.push(e)}else return c?m.slice(0,h):m.slice(0,h+1);else for(k=k[r._id.charAt(0)+"calendar"],m=d?r.r2c(a,0,k):n(m)&&1===m.length?
m[0]:void 0===a?0:("log"===r.type?r.d2c:r.r2c)(a,0,k),g=g||1,c=c||e?0:-.5;c<h;c++)l.push(m+g*c);return l}},{"../../lib":803,"../../registry":931}],1096:[function(b,N,G){function p(c,d){var e=d.length-2,f=h.constrain(h.findBin(c,d),0,e),q=d[f];c=h.constrain(f+(c-q)/(d[f+1]-q)-.5,0,e);d=Math.round(c);f=Math.abs(c-d);return c&&c!==e&&f?{bin0:d,frac:f,bin1:Math.round(d+f/(c-d))}:{bin0:d,bin1:d,frac:0}}function n(c,d){var e=d.length-1;e=h.constrain(h.findBin(c,d),0,e);var f=d[e];c=(c-f)/(d[e+1]-f)||0;
return 0>=c?{bin0:e,bin1:e,frac:0}:.5>c?{bin0:e,bin1:e+1,frac:c}:{bin0:e+1,bin1:e,frac:1-c}}function k(c,d,e){c[d]=e[0];c[d+1]=e[1];c[d+2]=e[2];c[d+3]=Math.round(255*e[3])}var m=b("@plotly/d3"),a=b("tinycolor2"),g=b("../../registry"),h=b("../../lib"),r=b("../../components/colorscale").makeColorScaleFuncFromTrace,l=b("../../constants/xmlns_namespaces");N.exports=function(c,d,e,f){var q=d.xaxis,t=d.yaxis;h.makeTraceGroups(f,e,"hm").each(function(w){function x(na,qa){return void 0!==na?(na=Y(na),na[0]=
Math.round(na[0]),na[1]=Math.round(na[1]),na[2]=Math.round(na[2]),ja+=qa,ma+=na[0]*qa,ia+=na[1]*qa,oa+=na[2]*qa,na):[0,0,0,0]}function z(na,qa,ta,za){var Ia=na[ta.bin0];if(void 0===Ia)return x(void 0,1);na=na[ta.bin1];var Xa=qa[ta.bin0];qa=qa[ta.bin1];return x(Ia+ta.frac*(na-Ia||0)+za.frac*((Xa-Ia||0)+ta.frac*(void 0===na?void 0===qa?0:void 0===Xa?2*(qa-Ia):2*(2*qa-Xa-Ia)/3:void 0===qa?void 0===Xa?0:2*(2*Ia-na-Xa)/3:void 0===Xa?2*(2*qa-na-Ia)/3:qa+Ia-na-Xa)))}var B=m.select(this),A=w[0],D=A.trace,
C=A.z,v=A.x,y=A.y,F=A.xCenter,J=A.yCenter,K=g.traceIs(D,"contour"),O=K?"best":D.zsmooth,I=C.length,L=h.maxRowLength(C),H=!1,M=!1,Q;for(Q=0;void 0===Z&&Q<v.length-1;){var Z=q.c2p(v[Q]);Q++}for(Q=v.length-1;void 0===ca&&0<Q;){var ca=q.c2p(v[Q]);Q--}ca<Z&&(Q=ca,ca=Z,Z=Q,H=!0);for(Q=0;void 0===W&&Q<y.length-1;){var W=t.c2p(y[Q]);Q++}for(Q=y.length-1;void 0===T&&0<Q;){var T=t.c2p(y[Q]);Q--}T<W&&(Q=W,W=T,T=Q,M=!0);K&&(F=v,J=y,v=A.xfill,y=A.yfill);"fast"!==O&&(Q="best"===O?0:.5,Z=Math.max(-Q*q._length,Z),
ca=Math.min((1+Q)*q._length,ca),W=Math.max(-Q*t._length,W),T=Math.min((1+Q)*t._length,T));var U=Math.round(ca-Z),ha=Math.round(T-W);if(0>=U||0>=ha)B.selectAll("image").data([]).exit().remove();else{"fast"===O?(T=L,Q=I):(T=U,Q=ha);ca=document.createElement("canvas");ca.width=T;ca.height=Q;T=ca.getContext("2d");var Y=r(D,{noNumericCheck:!0,returnArray:!0});"fast"===O?(A=H?function(na){return L-1-na}:h.identity,K=M?function(na){return I-1-na}:h.identity):(A=function(na){return h.constrain(Math.round(q.c2p(v[na])-
Z),0,U)},K=function(na){return h.constrain(Math.round(t.c2p(y[na])-W),0,ha)});Q=K(0);var ba=[Q,Q];H=H?0:1;M=M?0:1;var ja=0,ma=0,ia=0,oa=0;if(O){D=0;try{var xa=new Uint8Array(U*ha*4)}catch(na){xa=Array(U*ha*4)}if("best"===O){O=F||v;H=J||y;M=Array(O.length);A=Array(H.length);K=Array(U);F=F?n:p;ba=J?n:p;for(Q=0;Q<O.length;Q++)M[Q]=Math.round(q.c2p(O[Q])-Z);for(Q=0;Q<H.length;Q++)A[Q]=Math.round(t.c2p(H[Q])-W);for(Q=0;Q<U;Q++)K[Q]=F(Q,M);for(J=0;J<ha;J++)for(O=ba(J,A),H=C[O.bin0],M=C[O.bin1],Q=0;Q<U;Q++,
D+=4)F=z(H,M,K[Q],O),k(xa,D,F)}else for(J=0;J<I;J++)for(O=C[J],ba=K(J),Q=0;Q<U;Q++)F=x(O[Q],1),D=4*(ba*U+A(Q)),k(xa,D,F);C=T.createImageData(U,ha);try{C.data.set(xa)}catch(na){for(Q=C.data,F=Q.length,J=0;J<F;J++)Q[J]=xa[J]}T.putImageData(C,0,0)}else{xa=D.xgap;D=D.ygap;var ra=Math.floor(xa/2),la=Math.floor(D/2);for(J=0;J<I;J++)if(O=C[J],ba.reverse(),ba[M]=K(J+1),ba[0]!==ba[1]&&void 0!==ba[0]&&void 0!==ba[1]){Q=A(0);var ka=[Q,Q];for(Q=0;Q<L;Q++)ka.reverse(),ka[H]=A(Q+1),ka[0]!==ka[1]&&void 0!==ka[0]&&
void 0!==ka[1]&&(F=O[Q],F=x(F,(ka[1]-ka[0])*(ba[1]-ba[0])),T.fillStyle="rgba("+F.join(",")+")",T.fillRect(ka[0]+ra,ba[0]+la,ka[1]-ka[0]-xa,ba[1]-ba[0]-D))}}ma=Math.round(ma/ja);ia=Math.round(ia/ja);oa=Math.round(oa/ja);C=a("rgb("+ma+","+ia+","+oa+")");c._hmpixcount=(c._hmpixcount||0)+ja;c._hmlumcount=(c._hmlumcount||0)+ja*C.getLuminance();w=B.selectAll("image").data(w);w.enter().append("svg:image").attr({xmlns:l.svg,preserveAspectRatio:"none"});w.attr({height:ha,width:U,x:Z,y:W,"xlink:href":ca.toDataURL("image/png")})}})}},
{"../../components/colorscale":678,"../../constants/xmlns_namespaces":780,"../../lib":803,"../../registry":931,"@plotly/d3":58,tinycolor2:598}],1097:[function(b,N,G){var p=b("@plotly/d3");N.exports=function(n){p.select(n).selectAll(".hm image").style("opacity",function(k){return k.trace.opacity})}},{"@plotly/d3":58}],1098:[function(b,N,G){N.exports=function(p,n,k){!1===k("zsmooth")&&(k("xgap"),k("ygap"));k("zhoverformat")}},{}],1099:[function(b,N,G){function p(a,g){var h=g(a);"scaled"===(h?g(a+"type",
"array"):"scaled")&&(g(a+"0"),g("d"+a));return h}var n=b("fast-isnumeric"),k=b("../../lib"),m=b("../../registry");N.exports=function(a,g,h,r,l,c){var d=h("z");l=l||"x";c=c||"y";if(void 0===d||!d.length)return 0;if(k.isArray1D(a.z)){var e=h(l);h=h(c);e=k.minRowLength(e);h=k.minRowLength(h);if(0===e||0===h)return 0;g._length=Math.min(e,h,d.length)}else{p(l,h);p(c,h);e=!0;for(var f=!1,q=!1,t,w=0;w<d.length;w++){t=d[w];if(!k.isArrayOrTypedArray(t)){e=!1;break}0<t.length&&(f=!0);for(var x=0;x<t.length;x++)if(n(t[x])){q=
!0;break}}if(!(e&&f&&q))return 0;h("transpose");g._length=null}if("heatmapgl"===a.type)return!0;m.getComponentMethod("calendars","handleTraceDefaults")(a,g,[l,c],r);return!0}},{"../../lib":803,"../../registry":931,"fast-isnumeric":249}],1100:[function(b,N,G){G=b("../heatmap/attributes");var p=b("../../components/colorscale/attributes"),n=b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;for(var k="z x x0 dx y y0 dy text transpose xtype ytype".split(" "),m={},a=0;a<k.length;a++){var g=
k[a];m[g]=G[g]}m.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"};n(m,p("",{cLetter:"z",autoColorDflt:!1}));N.exports=b(m,"calc","nested")},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plot_api/edit_types":836,"../heatmap/attributes":1085}],1101:[function(b,N,G){function p(a,g){this.scene=a;this.uid=g;this.type="heatmapgl";this.name="";this.hoverinfo="all";this.xData=[];this.yData=[];this.zData=[];this.textLabels=[];this.idToIndex=[];this.bounds=
[0,0,0,0];this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]};this.heatmap=n(a.glplot,this.options);this.heatmap._trace=this}var n=b("gl-heatmap2d"),k=b("../../plots/cartesian/axes"),m=b("../../lib/str2rgbarray");b=p.prototype;b.handlePick=function(a){var g=this.options,h=g.shape,r=a.pointId,l=r%h[0];h=Math.floor(r/h[0]);return{trace:this,dataCoord:a.dataCoord,traceCoord:[g.x[l],g.y[h],g.z[r]],textLabel:this.textLabels[r],name:this.name,pointIndex:[h,l],
hoverinfo:this.hoverinfo}};b.update=function(a,g){g=g[0];this.index=a.index;this.name=a.name;this.hoverinfo=a.hoverinfo;var h=g.z;this.options.z=[].concat.apply([],h);this.options.shape=[h[0].length,h.length];this.options.x=g.x;this.options.y=g.y;this.options.zsmooth=a.zsmooth;h=a.colorscale;for(var r=a.zmin,l=a.zmax,c=h.length,d=Array(c),e=Array(4*c),f=0;f<c;f++){var q=h[f],t=m(q[1]);d[f]=r+q[0]*(l-r);for(q=0;4>q;q++)e[4*f+q]=t[q]}this.options.colorLevels=d;this.options.colorValues=e;this.textLabels=
[].concat.apply([],a.text);this.heatmap.update(this.options);h=this.scene.xaxis;r=this.scene.yaxis;if(!1===a.zsmooth){var w={ppad:g.x[1]-g.x[0]};var x={ppad:g.y[1]-g.y[0]}}a._extremes[h._id]=k.findExtremes(h,g.x,w);a._extremes[r._id]=k.findExtremes(r,g.y,x)};b.dispose=function(){this.heatmap.dispose()};N.exports=function(a,g,h){a=new p(a,g.uid);a.update(g,h);return a}},{"../../lib/str2rgbarray":828,"../../plots/cartesian/axes":854,"gl-heatmap2d":278}],1102:[function(b,N,G){var p=b("../../lib"),n=
b("../heatmap/xyz_defaults"),k=b("../../components/colorscale/defaults"),m=b("./attributes");N.exports=function(a,g,h,r){function l(c,d){return p.coerce(a,g,m,c,d)}n(a,g,l,r)?(l("text"),l("zsmooth"),k(a,g,r,l,{prefix:"",cLetter:"z"})):g.visible=!1}},{"../../components/colorscale/defaults":676,"../../lib":803,"../heatmap/xyz_defaults":1099,"./attributes":1100}],1103:[function(b,N,G){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../heatmap/colorbar"),calc:b("../heatmap/calc"),
plot:b("./convert"),moduleType:"trace",name:"heatmapgl",basePlotModule:b("../../plots/gl2d"),categories:["gl","gl2d","2dMap"],meta:{}}},{"../../plots/gl2d":894,"../heatmap/calc":1086,"../heatmap/colorbar":1088,"./attributes":1100,"./convert":1101,"./defaults":1102}],1104:[function(b,N,G){G=b("../bar/attributes");var p=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat,n=b("../../plots/template_attributes").hovertemplateAttrs,k=b("./bin_attributes"),m=b("./constants");b=b("../../lib/extend").extendFlat;
N.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:p("x"),yhoverformat:p("y"),text:b({},G.text,{}),hovertext:b({},G.hovertext,{}),orientation:G.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",
dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:k("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:k("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",
dflt:"",editType:"calc"},hovertemplate:n({},{keys:m.eventDataKeys}),marker:G.marker,offsetgroup:G.offsetgroup,alignmentgroup:G.alignmentgroup,selected:G.selected,unselected:G.unselected,_deprecated:{bardir:G._deprecated.bardir}}},{"../../lib/extend":793,"../../plots/cartesian/axis_format_attributes":857,"../../plots/template_attributes":926,"../bar/attributes":941,"./bin_attributes":1106,"./constants":1110}],1105:[function(b,N,G){N.exports=function(p,n){for(var k=p.length,m=0,a=0;a<k;a++)n[a]?(p[a]/=
n[a],m+=p[a]):p[a]=null;return m}},{}],1106:[function(b,N,G){N.exports=function(p,n){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],1107:[function(b,N,G){var p=b("fast-isnumeric");N.exports={count:function(n,k,m){m[n]++;return 1},sum:function(n,k,m,a){k=a[k];return p(k)?(k=Number(k),m[n]+=k,k):0},avg:function(n,k,m,a,g){k=a[k];p(k)&&(k=Number(k),m[n]+=k,g[n]++);return 0},min:function(n,k,m,a){k=a[k];if(p(k)){k=
Number(k);if(!p(m[n]))return m[n]=k;if(m[n]>k)return a=k-m[n],m[n]=k,a}return 0},max:function(n,k,m,a){k=a[k];if(p(k)){k=Number(k);if(!p(m[n]))return m[n]=k;if(m[n]<k)return a=k-m[n],m[n]=k,a}return 0}}},{"fast-isnumeric":249}],1108:[function(b,N,G){function p(d,e,f,q){if(0>=d*e)return Infinity;for(var t="date"===f.type,w=n(Math.abs(e-d),t),x=0;10>x;x++){var z=n(80*w,t);if(w===z)break;var B=z;var A=d,D=e,C=f,v=q;t&&B>g?(A=k(A,C,v),D=k(D,C,v),B=B===m?0:1,B=A[B]!==D[B]):B=.1<Math.floor(D/B)-Math.floor(A/
B);if(B)w=z;else break}return w}function n(d,e){return e&&d>l?d>g?d>1.1*m?m:d>1.1*a?a:g:d>h?h:d>r?r:l:Math.pow(10,Math.floor(Math.log(d)/Math.LN10))}function k(d,e,f){d=e.c2d(d,m,f).split("-");""===d[0]&&(d.unshift(),d[0]="-"+d[0]);return d}G=b("../../constants/numerical");var m=G.ONEAVGYEAR,a=G.ONEAVGMONTH,g=G.ONEDAY,h=G.ONEHOUR,r=G.ONEMIN,l=G.ONESEC,c=b("../../plots/cartesian/axes").tickIncrement;N.exports=function(d,e,f,q,t){var w=-1.1*e,x=-.1*e,z=d-x;e=f[0];f=f[1];z=Math.min(p(e+x,e+z,q,t),p(f+
x,f+z,q,t));w=Math.min(p(e+w,e+x,q,t),p(f+w,f+x,q,t));if(z>w&&w<Math.abs(f-e)/4E3){var B=z;var A=!1}else B=Math.min(z,w),A=!0;if("date"===q.type&&B>g){var D=B===m?1:6,C=B===m?"M12":"M1";return function(v,y){var F=q.c2d(v,m,t),J=F.indexOf("-",D);0<J&&(F=F.substr(0,J));F=q.d2c(F,0,t);F<v&&(J=c(F,C,!1,t),(F+J)/2<v+d&&(F=J));return y&&A?c(F,C,!0,t):F}}return function(v,y){var F=B*Math.round(v/B);F+B/10<v&&F+.9*B<v+d&&(F+=B);y&&A&&(F-=B);return F}}},{"../../constants/numerical":779,"../../plots/cartesian/axes":854}],
1109:[function(b,N,G){function p(f,q,t,w,x){function z(Q,Z,ca){Z[Q+"Found"]?(Z[Q]=v(Z[Q]),null===Z[Q]&&(Z[Q]=ca[Q])):(M[Q]=Z[Q]=ca[Q],a.nestedProperty(y[0],B+"."+Q).set(ca[Q]))}var B=w+"bins",A=f._fullLayout,D=A._histogramBinOpts[q["_"+w+"bingroup"]];A="overlay"===A.barmode;var C,v="date"===t.type?function(Q){return Q||0===Q?a.cleanDate(Q,null,H):null}:function(Q){return m(Q)?Number(Q):null};if(q["_"+w+"autoBinFinished"])delete q["_"+w+"autoBinFinished"];else{var y=D.traces;var F=[],J=!0,K=!1,O=!1;
for(C=0;C<y.length;C++){var I=y[C];if(I.visible){var L=D.dirs[C];L=I["_"+L+"pos0"]=t.makeCalcdata(I,L);F=a.concat(F,L);delete I["_"+w+"autoBinFinished"];!0===q.visible&&(J?J=!1:(delete I._autoBin,I["_"+w+"autoBinFinished"]=1),g.traceIs(I,"2dMap")&&(K=!0),"histogram2dcontour"===I.type&&(O=!0))}}var H=y[0][w+"calendar"];C=h.autoBin(F,t,D.nbins,K,H,D.sizeFound&&D.size);var M=(y[0]._autoBin={})[D.dirs[0]]={};O&&(D.size||(C.start=t.c2r(h.tickIncrement(t.r2c(C.start,0,H),C.size,!0,H),0,H)),void 0===D.end&&
(C.end=t.c2r(h.tickIncrement(t.r2c(C.end,0,H),C.size,!1,H),0,H)));if(A&&!g.traceIs(q,"2dMap")&&0===C._dataSpan&&"category"!==t.type&&"multicategory"!==t.type){if(x)return[C,L,!0];C=n(f,q,t,w,B)}L=I.cumulative||{};L.enabled&&"include"!==L.currentbin&&("decreasing"===L.direction?C.start=t.c2r(h.tickIncrement(t.r2c(C.start,0,H),C.size,!0,H),0,H):C.end=t.c2r(h.tickIncrement(t.r2c(C.end,0,H),C.size,!1,H),0,H));D.size=C.size;D.sizeFound||(M.size=C.size,a.nestedProperty(y[0],B+".size").set(C.size));z("start",
D,C);z("end",D,C)}L=q["_"+w+"pos0"];delete q["_"+w+"pos0"];x=q._input[B]||{};f=a.extendFlat({},D);O=D.start;A=t.r2l(x.start);I=void 0!==A;(D.startFound||I)&&A!==t.r2l(O)&&(A=I?A:a.aggNums(Math.min,null,L),O={type:"category"===t.type||"multicategory"===t.type?"linear":t.type,r2l:t.r2l,dtick:D.size,tick0:O,calendar:H,range:[A,h.tickIncrement(A,D.size,!1,H)].map(t.l2r)},O=h.tickFirst(O),O>t.r2l(A)&&(O=h.tickIncrement(O,D.size,!0,H)),f.start=t.l2r(O),I||a.nestedProperty(q,B+".start").set(f.start));I=
D.end;A=t.r2l(x.end);x=void 0!==A;(D.endFound||x)&&A!==t.r2l(I)&&(D=x?A:a.aggNums(Math.max,null,L),f.end=t.l2r(D),x||a.nestedProperty(q,B+".start").set(f.end));t="autobin"+w;!1===q._input[t]&&(q._input[B]=a.extendFlat({},q[B]||{}),delete q._input[t],delete q[t]);return[f,L]}function n(f,q,t,w,x){for(var z=f._fullLayout,B=q.xaxis,A=q.yaxis,D=q.orientation,C=[],v=f._fullData,y=0;y<v.length;y++){var F=v[y];"histogram"===F.type&&!0===F.visible&&F.orientation===D&&F.xaxis===B&&F.yaxis===A&&C.push(F)}y=
!1;B=Infinity;A=[q];for(D=0;D<C.length;D++)if(v=C[D],v===q)y=!0;else if(y){F=p(f,v,t,w,!0);var J=F[0],K=F[2];v["_"+w+"autoBinFinished"]=1;v["_"+w+"pos0"]=F[1];K?A.push(v):B=Math.min(B,J.size)}else F=z._histogramBinOpts[v["_"+w+"bingroup"]],B=Math.min(B,F.size||v[x].size);f=Array(A.length);for(D=0;D<A.length;D++)for(C=A[D]["_"+w+"pos0"],v=0;v<C.length;v++)if(void 0!==C[v]){f[D]=C[v];break}isFinite(B)||(B=a.distinctVals(f).minDiff);for(D=0;D<A.length;D++)v=A[D],C=v[w+"calendar"],C={start:t.c2r(f[D]-
B/2,0,C),end:t.c2r(f[D]+B/2,0,C),size:B},v._input[x]=v[x]=C,(F=z._histogramBinOpts[v["_"+w+"bingroup"]])&&a.extendFlat(F,C);return q[x]}function k(f,q,t){function w(A){B=f[A];f[A]/=2}function x(A){z=f[A];f[A]=B+z/2;B+=z}var z,B;if("half"===t)if("increasing"===q)for(w(0),q=1;q<f.length;q++)x(q);else for(w(f.length-1),q=f.length-2;0<=q;q--)x(q);else if("increasing"===q){for(q=1;q<f.length;q++)f[q]+=f[q-1];"exclude"===t&&(f.unshift(0),f.pop())}else{for(q=f.length-2;0<=q;q--)f[q]+=f[q+1];"exclude"===
t&&(f.push(0),f.shift())}}var m=b("fast-isnumeric"),a=b("../../lib"),g=b("../../registry"),h=b("../../plots/cartesian/axes"),r=b("../bar/arrays_to_calcdata"),l=b("./bin_functions"),c=b("./norm_functions"),d=b("./average"),e=b("./bin_label_vals");N.exports={calc:function(f,q){var t=[],w=[],x=h.getFromId(f,"h"===q.orientation?q.yaxis:q.xaxis),z="h"===q.orientation?"y":"x",B={x:"y",y:"x"}[z],A=q[z+"calendar"],D=q.cumulative,C=p(f,q,x,z),v=C[0];C=C[1];var y="string"===typeof v.size,F=[],J=y?F:v,K=[],
O=[],I=[],L=0,H=q.histnorm,M=q.histfunc,Q=-1!==H.indexOf("density"),Z;D.enabled&&Q&&(H=H.replace(/ ?density$/,""),Q=!1);var ca="max"===M||"min"===M?null:0,W=l.count;H=c[H];var T=!1;if(a.isArrayOrTypedArray(q[B])&&"count"!==M){var U=q[B];T="avg"===M;W=l[M]}B=x.r2c(v.start,0,A);for(Z=x.r2c(v.end,0,A)+(B-h.tickIncrement(B,v.size,!1,A))/1E6;B<Z&&1E6>t.length;){M=h.tickIncrement(B,v.size,!1,A);t.push((B+M)/2);w.push(ca);I.push([]);F.push(B);Q&&K.push(1/(M-B));T&&O.push(0);if(M<=B)break;B=M}F.push(B);y||
"date"!==x.type||(J={start:x.r2c(J.start,0,A),end:x.r2c(J.end,0,A),size:J.size});f._fullLayout._roundFnOpts||(f._fullLayout._roundFnOpts={});var ha=q["_"+z+"bingroup"];ca={leftGap:Infinity,rightGap:Infinity};ha&&(f._fullLayout._roundFnOpts[ha]||(f._fullLayout._roundFnOpts[ha]=ca),ca=f._fullLayout._roundFnOpts[ha]);M=w.length;z=!0;Z=ca.leftGap;var Y=ca.rightGap;y={};for(B=0;B<C.length;B++){var ba=C[B];Q=a.findBin(ba,J);0<=Q&&Q<M&&(L+=W(Q,B,w,U,O),z&&I[Q].length&&ba!==C[I[Q][0]]&&(z=!1),I[Q].push(B),
y[B]=Q,Z=Math.min(Z,ba-F[Q]),Y=Math.min(Y,F[Q+1]-ba))}ca.leftGap=Z;ca.rightGap=Y;var ja;z||(ja=function(ma,ia){return function(){var oa=f._fullLayout._roundFnOpts[ha];return e(oa.leftGap,oa.rightGap,F,x,A)(ma,ia)}});T&&(L=d(w,O));H&&H(w,L,K);D.enabled&&k(w,D.direction,D.currentbin);K=Math.min(t.length,w.length);U=[];O=0;J=K-1;for(B=0;B<K;B++)if(w[B]){O=B;break}for(B=K-1;B>=O;B--)if(w[B]){J=B;break}for(B=O;B<=J;B++)m(t[B])&&m(w[B])&&(K={p:t[B],s:w[B],b:0},D.enabled||(K.pts=I[B],z?K.ph0=K.ph1=I[B].length?
C[I[B][0]]:t[B]:(q._computePh=!0,K.ph0=ja(F[B]),K.ph1=ja(F[B+1],!0))),U.push(K));1===U.length&&(U[0].width1=h.tickIncrement(U[0].p,v.size,!1,A)-U[0].p);r(U,q);a.isArrayOrTypedArray(q.selectedpoints)&&a.tagSelected(U,q,y);return U},calcAllAutoBins:p}},{"../../lib":803,"../../plots/cartesian/axes":854,"../../registry":931,"../bar/arrays_to_calcdata":940,"./average":1105,"./bin_functions":1107,"./bin_label_vals":1108,"./norm_functions":1116,"fast-isnumeric":249}],1110:[function(b,N,G){N.exports={eventDataKeys:["binNumber"]}},
{}],1111:[function(b,N,G){var p=b("../../lib"),n=b("../../plots/cartesian/axis_ids"),k=b("../../registry").traceIs,m=b("../bar/defaults").handleGroupingDefaults,a=p.nestedProperty,g=b("../../plots/cartesian/constraints").getAxisGroup,h=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],r=["x","y"];N.exports=function(l,c){function d(F,J){return p.coerce(B._input,
B,B._module.attributes,F,J)}function e(F){return"v"===F.orientation?"x":"y"}function f(F,J,K){var O=F.uid+"__"+K;J||(J=O);var I=n.getFromTrace({_fullLayout:c},F,K).type;var L=F[K+"calendar"]||"",H=q[J],M=!0;H&&(I===H.axType&&L===H.calendar?(M=!1,H.traces.push(F),H.dirs.push(K)):(J=O,I!==H.axType&&p.warn(["Attempted to group the bins of trace",F.index,"set on a","type:"+I,"axis with bins on","type:"+H.axType,"axis."].join(" ")),L!==H.calendar&&p.warn(["Attempted to group the bins of trace",F.index,
"set with a",L,"calendar with bins",H.calendar?"on a "+H.calendar+" calendar":"w/o a set calendar"].join(" "))));M&&(q[J]={traces:[F],dirs:[K],axType:I,calendar:F[K+"calendar"]||""});F["_"+K+"bingroup"]=J}var q=c._histogramBinOpts={},t=[],w={},x=[],z;for(z=0;z<l.length;z++){var B=l[z];k(B,"histogram")&&(t.push(B),delete B._xautoBinFinished,delete B._yautoBinFinished,k(B,"2dMap")||m(B._input,B,c,d))}l=c._alignmentOpts||{};for(z=0;z<t.length;z++){B=t[z];var A="";if(!k(B,"2dMap")){var D=e(B);if("group"===
c.barmode&&B.alignmentgroup){var C=g(c,B[D+"axis"])+B.orientation;(l[C]||{})[B.alignmentgroup]&&(A=C)}A||"overlay"===c.barmode||(A=g(c,B.xaxis)+g(c,B.yaxis)+e(B))}A?(w[A]||(w[A]=[]),w[A].push(B)):x.push(B)}for(A in w)if(t=w[A],1===t.length)x.push(t[0]);else for(z=!1,t.length&&(B=t[0],z=d("bingroup")),A=z||A,z=0;z<t.length;z++)B=t[z],(l=B._input.bingroup)&&l!==A&&p.warn(["Trace",B.index,"must match within bingroup",A+".","Ignoring its bingroup:",l,"setting."].join(" ")),B.bingroup=A,f(B,A,e(B));for(z=
0;z<x.length;z++)if(B=x[z],w=d("bingroup"),k(B,"2dMap"))for(t=0;2>t;t++)D=r[t],l=d(D+"bingroup",w?w+"__"+D:null),f(B,l,D);else f(B,w,e(B));for(A in q)for(w=q[A],t=w.traces,x=0;x<h.length;x++)if(l=h[x],C=l.name,"nbins"!==C||!w.sizeFound){for(z=0;z<t.length;z++){B=t[z];D=w.dirs[z];var v=l.aStr[D];if(void 0!==a(B._input,v).get()){w[C]=d(v);w[C+"Found"]=!0;break}var y=(B._autoBin||{})[D]||{};y[C]&&a(B,v).set(y[C])}if("start"===C||"end"===C)for(;z<t.length;z++)B=t[z],B["_"+D+"bingroup"]&&(y=(B._autoBin||
{})[D]||{},d(v,y[C]));"nbins"!==C||w.sizeFound||w.nbinsFound||(B=t[0],w[C]=d(v))}}},{"../../lib":803,"../../plots/cartesian/axis_ids":858,"../../plots/cartesian/constraints":862,"../../registry":931,"../bar/defaults":945}],1112:[function(b,N,G){var p=b("../../registry"),n=b("../../lib"),k=b("../../components/color"),m=b("../bar/style_defaults"),a=b("./attributes");N.exports=function(g,h,r,l){function c(t,w){return n.coerce(g,h,a,t,w)}var d=c("x"),e=c("y");c("cumulative.enabled")&&(c("cumulative.direction"),
c("cumulative.currentbin"));c("text");c("hovertext");c("hovertemplate");c("xhoverformat");c("yhoverformat");var f=c("orientation",e&&!d?"h":"v"),q="v"===f?"x":"y";f="v"===f?"y":"x";(d=d&&e?Math.min(n.minRowLength(d)&&n.minRowLength(e)):n.minRowLength(h[q]||[]))?(h._length=d,p.getComponentMethod("calendars","handleTraceDefaults")(g,h,["x","y"],l),h[f]&&c("histfunc"),c("histnorm"),c("autobin"+q),m(g,h,c,r,l),n.coerceSelectionMarkerOpacity(h,c),r=(h.marker.line||{}).color,l=p.getComponentMethod("errorbars",
"supplyDefaults"),l(g,h,r||k.defaultLine,{axis:"y"}),l(g,h,r||k.defaultLine,{axis:"x",inherit:"y"})):h.visible=!1}},{"../../components/color":666,"../../lib":803,"../../registry":931,"../bar/style_defaults":956,"./attributes":1104}],1113:[function(b,N,G){N.exports=function(p,n,k,m,a){p.x="xVal"in n?n.xVal:n.x;p.y="yVal"in n?n.yVal:n.y;"zLabelVal"in n&&(p.z=n.zLabelVal);n.xa&&(p.xaxis=n.xa);n.ya&&(p.yaxis=n.ya);if(!(k.cumulative||{}).enabled){n=Array.isArray(a)?m[0].pts[a[0]][a[1]]:m[a].pts;p.pointNumbers=
n;p.binNumber=p.pointNumber;delete p.pointNumber;delete p.pointIndex;if(k._indexToPoints)for(m=[],a=0;a<n.length;a++)m=m.concat(k._indexToPoints[n[a]]);else m=n;p.pointIndices=m}return p}},{}],1114:[function(b,N,G){var p=b("../bar/hover").hoverPoints,n=b("../../plots/cartesian/axes").hoverLabelText;N.exports=function(k,m,a,g,h){if(m=p(k,m,a,g,h))return k=m[0],a=k.cd[k.index],g=k.cd[0].trace,g.cumulative.enabled||(h="h"===g.orientation?"y":"x",k[h+"Label"]=n(k[h+"a"],[a.ph0,a.ph1],g[h+"hoverformat"])),
m}},{"../../plots/cartesian/axes":854,"../bar/hover":948}],1115:[function(b,N,G){N.exports={attributes:b("./attributes"),layoutAttributes:b("../bar/layout_attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("./cross_trace_defaults"),supplyLayoutDefaults:b("../bar/layout_defaults"),calc:b("./calc").calc,crossTraceCalc:b("../bar/cross_trace_calc").crossTraceCalc,plot:b("../bar/plot").plot,layerName:"barlayer",style:b("../bar/style").style,styleOnSelect:b("../bar/style").styleOnSelect,colorbar:b("../scatter/marker_colorbar"),
hoverPoints:b("./hover"),selectPoints:b("../bar/select"),eventData:b("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:b("../../plots/cartesian"),categories:"bar-like cartesian svg bar histogram oriented errorBarsOK showLegend".split(" "),meta:{}}},{"../../plots/cartesian":868,"../bar/cross_trace_calc":944,"../bar/layout_attributes":950,"../bar/layout_defaults":951,"../bar/plot":952,"../bar/select":953,"../bar/style":955,"../scatter/marker_colorbar":1236,"./attributes":1104,"./calc":1109,
"./cross_trace_defaults":1111,"./defaults":1112,"./event_data":1113,"./hover":1114}],1116:[function(b,N,G){N.exports={percent:function(p,n){var k=p.length;n=100/n;for(var m=0;m<k;m++)p[m]*=n},probability:function(p,n){for(var k=p.length,m=0;m<k;m++)p[m]/=n},density:function(p,n,k,m){n=p.length;m=m||1;for(var a=0;a<n;a++)p[a]=p[a]*k[a]*m},"probability density":function(p,n,k,m){var a=p.length;m&&(n/=m);for(m=0;m<a;m++)p[m]*=k[m]/n}}},{}],1117:[function(b,N,G){G=b("../histogram/attributes");var p=b("../histogram/bin_attributes"),
n=b("../heatmap/attributes"),k=b("../../plots/attributes"),m=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat,a=b("../../plots/template_attributes").hovertemplateAttrs,g=b("../../components/colorscale/attributes");b=b("../../lib/extend").extendFlat;N.exports=b({x:G.x,y:G.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:G.histnorm,histfunc:G.histfunc,nbinsx:G.nbinsx,xbins:p("x"),nbinsy:G.nbinsy,ybins:p("y"),autobinx:G.autobinx,
autobiny:G.autobiny,bingroup:b({},G.bingroup,{}),xbingroup:b({},G.bingroup,{}),ybingroup:b({},G.bingroup,{}),xgap:n.xgap,ygap:n.ygap,zsmooth:n.zsmooth,xhoverformat:m("x"),yhoverformat:m("y"),zhoverformat:m("z",1),hovertemplate:a({},{keys:"z"}),showlegend:b({},k.showlegend,{dflt:!1})},g("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plots/attributes":850,"../../plots/cartesian/axis_format_attributes":857,"../../plots/template_attributes":926,
"../heatmap/attributes":1085,"../histogram/attributes":1104,"../histogram/bin_attributes":1106}],1118:[function(b,N,G){function p(d,e,f,q){var t=Array(d);if(q)for(f=0;f<d;f++)t[f]=1/(e[f+1]-e[f]);else for(e=1/f,f=0;f<d;f++)t[f]=e;return t}function n(d,e){return{start:d(e.start),end:d(e.end),size:e.size}}function k(d,e,f,q,t,w){var x=d.length-1,z=Array(x);q=l(f,q,d,t,w);for(f=0;f<x;f++)t=(e||[])[f],z[f]=void 0===t?[q(d[f]),q(d[f+1],!0)]:[t,t];return z}var m=b("../../lib"),a=b("../../plots/cartesian/axes"),
g=b("../histogram/bin_functions"),h=b("../histogram/norm_functions"),r=b("../histogram/average"),l=b("../histogram/bin_label_vals"),c=b("../histogram/calc").calcAllAutoBins;N.exports=function(d,e){var f=a.getFromId(d,e.xaxis),q=a.getFromId(d,e.yaxis),t=e.xcalendar,w=e.ycalendar,x=function(qa){return f.r2c(qa,0,t)},z=function(qa){return q.r2c(qa,0,w)},B=c(d,e,f,"x");var A=B[0];B=B[1];d=c(d,e,q,"y");var D=d[0];d=d[1];var C=e._length;B.length>C&&B.splice(C,B.length-C);d.length>C&&d.splice(C,d.length-
C);var v=[],y=[],F=[],J="string"===typeof A.size,K="string"===typeof D.size,O=[],I=[],L=J?O:A,H=K?I:D,M=0,Q=[],Z=[],ca=e.histnorm,W=e.histfunc,T=-1!==ca.indexOf("density"),U="max"===W||"min"===W?null:0,ha=g.count;ca=h[ca];var Y=!1,ba=[],ja=[];(e="z"in e?e.z:"marker"in e&&Array.isArray(e.marker.color)?e.marker.color:"")&&"count"!==W&&(Y="avg"===W,ha=g[W]);W=A.size;var ma=x(A.start),ia=x(A.end)+(ma-a.tickIncrement(ma,W,!1,t))/1E6;for(A=ma;A<ia;A=a.tickIncrement(A,W,!1,t))y.push(U),O.push(A),Y&&F.push(0);
O.push(A);U=y.length;W=(A-ma)/U;ma=f.c2r(ma+W/2,0,t);var oa=D.size;ia=z(D.start);var xa=z(D.end)+(ia-a.tickIncrement(ia,oa,!1,w))/1E6;for(A=ia;A<xa;A=a.tickIncrement(A,oa,!1,w)){v.push(y.slice());I.push(A);var ra=Array(U);for(D=0;D<U;D++)ra[D]=[];Z.push(ra);Y&&Q.push(F.slice())}I.push(A);F=v.length;D=(A-ia)/F;ia=q.c2r(ia+D/2,0,w);T&&(ba=p(y.length,L,W,J),ja=p(v.length,H,D,K));J||"date"!==f.type||(L=n(x,L));K||"date"!==q.type||(H=n(z,H));J=y=!0;K=Array(U);T=Array(F);var la=ra=xa=oa=Infinity;for(A=
0;A<C;A++){var ka=B[A],na=d[A];x=m.findBin(ka,L);z=m.findBin(na,H);0<=x&&x<U&&0<=z&&z<F&&(M+=ha(x,A,v[z],e,Q[z]),Z[z][x].push(A),y&&(void 0===K[x]?K[x]=ka:K[x]!==ka&&(y=!1)),J&&(void 0===T[z]?T[z]=na:T[z]!==na&&(J=!1)),oa=Math.min(oa,ka-O[x]),xa=Math.min(xa,O[x+1]-ka),ra=Math.min(ra,na-I[z]),la=Math.min(la,I[z+1]-na))}if(Y)for(z=0;z<F;z++)M+=r(v[z],Q[z]);if(ca)for(z=0;z<F;z++)ca(v[z],M,ba,ja[z]);return{x:B,xRanges:k(O,y&&K,oa,xa,f,t),x0:ma,dx:W,y:d,yRanges:k(I,J&&T,ra,la,q,w),y0:ia,dy:D,z:v,pts:Z}}},
{"../../lib":803,"../../plots/cartesian/axes":854,"../histogram/average":1105,"../histogram/bin_functions":1107,"../histogram/bin_label_vals":1108,"../histogram/calc":1109,"../histogram/norm_functions":1116}],1119:[function(b,N,G){var p=b("../../lib"),n=b("./sample_defaults"),k=b("../heatmap/style_defaults"),m=b("../../components/colorscale/defaults"),a=b("./attributes");N.exports=function(g,h,r,l){function c(d,e){return p.coerce(g,h,a,d,e)}n(g,h,c,l);!1!==h.visible&&(k(g,h,c,l),m(g,h,l,c,{prefix:"",
cLetter:"z"}),c("hovertemplate"),c("xhoverformat"),c("yhoverformat"))}},{"../../components/colorscale/defaults":676,"../../lib":803,"../heatmap/style_defaults":1098,"./attributes":1117,"./sample_defaults":1122}],1120:[function(b,N,G){var p=b("../heatmap/hover"),n=b("../../plots/cartesian/axes").hoverLabelText;N.exports=function(k,m,a,g,h){if(m=p(k,m,a,g,h)){k=m[0];h=k.index;var r=k.cd[0];a=r.trace;g=r.xRanges[h[1]];h=r.yRanges[h[0]];k.xLabel=n(k.xa,[g[0],g[1]],a.xhoverformat);k.yLabel=n(k.ya,[h[0],
h[1]],a.yhoverformat);return m}}},{"../../plots/cartesian/axes":854,"../heatmap/hover":1092}],1121:[function(b,N,G){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("../histogram/cross_trace_defaults"),calc:b("../heatmap/calc"),plot:b("../heatmap/plot"),layerName:"heatmaplayer",colorbar:b("../heatmap/colorbar"),style:b("../heatmap/style"),hoverPoints:b("./hover"),eventData:b("../histogram/event_data"),moduleType:"trace",name:"histogram2d",basePlotModule:b("../../plots/cartesian"),
categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":868,"../heatmap/calc":1086,"../heatmap/colorbar":1088,"../heatmap/plot":1096,"../heatmap/style":1097,"../histogram/cross_trace_defaults":1111,"../histogram/event_data":1113,"./attributes":1117,"./defaults":1119,"./hover":1120}],1122:[function(b,N,G){var p=b("../../registry"),n=b("../../lib");N.exports=function(k,m,a,g){var h=a("x"),r=a("y");h=n.minRowLength(h);r=n.minRowLength(r);h&&r?(m._length=Math.min(h,
r),p.getComponentMethod("calendars","handleTraceDefaults")(k,m,["x","y"],g),(a("z")||a("marker.color"))&&a("histfunc"),a("histnorm"),a("autobinx"),a("autobiny")):m.visible=!1}},{"../../lib":803,"../../registry":931}],1123:[function(b,N,G){G=b("../histogram2d/attributes");var p=b("../contour/attributes"),n=b("../../components/colorscale/attributes"),k=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat;b=b("../../lib/extend").extendFlat;N.exports=b({x:G.x,y:G.y,z:G.z,marker:G.marker,
histnorm:G.histnorm,histfunc:G.histfunc,nbinsx:G.nbinsx,xbins:G.xbins,nbinsy:G.nbinsy,ybins:G.ybins,autobinx:G.autobinx,autobiny:G.autobiny,bingroup:G.bingroup,xbingroup:G.xbingroup,ybingroup:G.ybingroup,autocontour:p.autocontour,ncontours:p.ncontours,contours:p.contours,line:{color:p.line.color,width:b({},p.line.width,{dflt:.5}),dash:p.line.dash,smoothing:p.line.smoothing,editType:"plot"},xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z",1),hovertemplate:G.hovertemplate},n("",{cLetter:"z",
editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plots/cartesian/axis_format_attributes":857,"../contour/attributes":1028,"../histogram2d/attributes":1117}],1124:[function(b,N,G){var p=b("../../lib"),n=b("../histogram2d/sample_defaults"),k=b("../contour/contours_defaults"),m=b("../contour/style_defaults"),a=b("./attributes");N.exports=function(g,h,r,l){function c(d,e){return p.coerce(g,h,a,d,e)}n(g,h,c,l);!1!==h.visible&&(k(g,h,c,function(d){return p.coerce2(g,
h,a,d)}),m(g,h,c,l),c("hovertemplate"),c("xhoverformat"),c("yhoverformat"))}},{"../../lib":803,"../contour/contours_defaults":1035,"../contour/style_defaults":1049,"../histogram2d/sample_defaults":1122,"./attributes":1123}],1125:[function(b,N,G){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("../histogram/cross_trace_defaults"),calc:b("../contour/calc"),plot:b("../contour/plot").plot,layerName:"contourlayer",style:b("../contour/style"),colorbar:b("../contour/colorbar"),
hoverPoints:b("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:b("../../plots/cartesian"),categories:"cartesian svg 2dMap contour histogram showLegend".split(" "),meta:{}}},{"../../plots/cartesian":868,"../contour/calc":1029,"../contour/colorbar":1031,"../contour/hover":1041,"../contour/plot":1046,"../contour/style":1048,"../histogram/cross_trace_defaults":1111,"./attributes":1123,"./defaults":1124}],1126:[function(b,N,G){G=b("../../plots/template_attributes").hovertemplateAttrs;
var p=b("../../plots/template_attributes").texttemplateAttrs,n=b("../../components/colorscale/attributes"),k=b("../../plots/domain").attributes,m=b("../pie/attributes"),a=b("../sunburst/attributes"),g=b("../treemap/attributes"),h=b("../treemap/constants");b=b("../../lib/extend").extendFlat;N.exports={labels:a.labels,parents:a.parents,values:a.values,branchvalues:a.branchvalues,count:a.count,level:a.level,maxdepth:a.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},
flip:g.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:b({colors:a.marker.colors,line:a.marker.line,editType:"calc"},n("marker",{colorAttr:"colors",anim:!1})),leaf:a.leaf,pathbar:g.pathbar,text:m.text,textinfo:a.textinfo,texttemplate:p({editType:"plot"},{keys:h.eventDataKeys.concat(["label","value"])}),hovertext:m.hovertext,hoverinfo:a.hoverinfo,hovertemplate:G({},{keys:h.eventDataKeys}),textfont:m.textfont,insidetextfont:m.insidetextfont,outsidetextfont:g.outsidetextfont,
textposition:g.textposition,sort:m.sort,root:a.root,domain:k({name:"icicle",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plots/domain":882,"../../plots/template_attributes":926,"../pie/attributes":1192,"../sunburst/attributes":1330,"../treemap/attributes":1356,"../treemap/constants":1359}],1127:[function(b,N,G){var p=b("../../plots/plots");G.name="icicle";G.plot=function(n,k,m,a){p.plotBasePlot(G.name,n,k,m,a)};G.clean=function(n,k,m,a){p.cleanBasePlot(G.name,
n,k,m,a)}},{"../../plots/plots":917}],1128:[function(b,N,G){var p=b("../sunburst/calc");G.calc=function(n,k){return p.calc(n,k)};G.crossTraceCalc=function(n){return p._runCrossTraceCalc("icicle",n)}},{"../sunburst/calc":1332}],1129:[function(b,N,G){var p=b("../../lib"),n=b("./attributes"),k=b("../../components/color"),m=b("../../plots/domain").defaults,a=b("../bar/defaults").handleText,g=b("../bar/constants").TEXTPAD;b=b("../../components/colorscale");var h=b.hasColorscale,r=b.handleDefaults;N.exports=
function(l,c,d,e){function f(t,w){return p.coerce(l,c,n,t,w)}d=f("labels");var q=f("parents");d&&d.length&&q&&q.length?((d=f("values"))&&d.length?f("branchvalues"):f("count"),f("level"),f("maxdepth"),f("tiling.orientation"),f("tiling.flip"),f("tiling.pad"),d=f("text"),f("texttemplate"),c.texttemplate||f("textinfo",Array.isArray(d)?"text+label":"label"),f("hovertext"),f("hovertemplate"),d=f("pathbar.visible"),a(l,c,e,f,"auto",{hasPathbar:d,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,
moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),f("textposition"),f("marker.line.width")&&f("marker.line.color",e.paper_bgcolor),f("marker.colors"),(q=c._hasColorscale=h(l,"marker","colors")||(l.marker||{}).coloraxis)&&r(l,c,e,f,{prefix:"marker.",cLetter:"c"}),f("leaf.opacity",q?1:.7),c._hovered={marker:{line:{width:2,color:k.contrast(e.paper_bgcolor)}}},d&&(f("pathbar.thickness",c.pathbar.textfont.size+2*g),f("pathbar.side"),f("pathbar.edgeshape")),f("sort"),f("root.color"),
m(c,e,f),c._length=null):c.visible=!1}},{"../../components/color":666,"../../components/colorscale":678,"../../lib":803,"../../plots/domain":882,"../bar/constants":943,"../bar/defaults":945,"./attributes":1126}],1130:[function(b,N,G){var p=b("@plotly/d3"),n=b("../../lib"),k=b("../../components/drawing"),m=b("../../lib/svg_text_utils"),a=b("./partition"),g=b("./style").styleOne,h=b("../treemap/constants"),r=b("../sunburst/helpers"),l=b("../sunburst/fx"),c=b("../sunburst/plot").formatSliceLabel;N.exports=
function(d,e,f,q,t){var w=t.width,x=t.height,z=t.viewX,B=t.viewY,A=t.pathSlice,D=t.toMoveInsideSlice,C=t.strTransform,v=t.hasTransition,y=t.handleSlicesExit,F=t.makeUpdateSliceInterpolator,J=t.makeUpdateTextInterpolator;t=t.prevEntry;var K=d._fullLayout,O=e[0].trace,I=-1!==O.textposition.indexOf("left"),L=-1!==O.textposition.indexOf("right"),H=-1!==O.textposition.indexOf("bottom"),M=a(f,[w,x],{flipX:-1<O.tiling.flip.indexOf("x"),flipY:-1<O.tiling.flip.indexOf("y"),orientation:O.tiling.orientation,
pad:{inner:O.tiling.pad},maxDepth:O._maxDepth}).descendants(),Q=Infinity,Z=-Infinity;M.forEach(function(T){var U=T.depth;U>=O._maxDepth?(T.x0=T.x1=(T.x0+T.x1)/2,T.y0=T.y1=(T.y0+T.y1)/2):(Q=Math.min(Q,U),Z=Math.max(Z,U))});q=q.data(M,r.getPtId);O._maxVisibleLayers=isFinite(Z)?Z-Q+1:0;q.enter().append("g").classed("slice",!0);y(q,!1,{},[w,x],A);q.order();var ca=null;if(v&&t){var W=r.getPtId(t);q.each(function(T){null===ca&&r.getPtId(T)===W&&(ca={x0:T.x0,x1:T.x1,y0:T.y0,y1:T.y1})})}v&&(q=q.transition().each("end",
function(){var T=p.select(this);r.setSliceCursor(T,d,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})}));q.each(function(T){T._hoverX=z(T.x1-O.tiling.pad);T._hoverY=H?B(T.y1-O.tiling.pad/2):B(T.y0+O.tiling.pad/2);var U=p.select(this),ha=n.ensureSingle(U,"path","surface",function(Y){Y.style("pointer-events","all")});v?ha.transition().attrTween("d",function(Y){var ba=F(Y,!1,ca||{x0:0,x1:w,y0:0,y1:x},[w,x],{orientation:O.tiling.orientation,flipX:-1<O.tiling.flip.indexOf("x"),flipY:-1<O.tiling.flip.indexOf("y")});
return function(ja){return A(ba(ja))}}):ha.attr("d",A);U.call(l,f,d,e,{styleOne:g,eventDataKeys:h.eventDataKeys,transitionTime:h.CLICK_TRANSITION_TIME,transitionEasing:h.CLICK_TRANSITION_EASING}).call(r.setSliceCursor,d,{isTransitioning:d._transitioning});ha.call(g,T,O,{hovered:!1});T._text=T.x0===T.x1||T.y0===T.y1?"":c(T,f,O,e,K)||"";U=n.ensureSingle(U,"g","slicetext");U=n.ensureSingle(U,"text","",function(Y){Y.attr("data-notex",1)});ha=n.ensureUniformFontSize(d,r.determineTextFont(O,T,K.font));
U.text(T._text||" ").classed("slicetext",!0).attr("text-anchor",L?"end":I?"start":"middle").call(k.font,ha).call(m.convertToTspans,d);T.textBB=k.bBox(U.node());T.transform=D(T,{fontSize:ha.size});T.transform.fontSize=ha.size;v?U.transition().attrTween("transform",function(Y){var ba=J(Y,!1,ca||{x0:0,x1:w,y0:0,y1:x},[w,x]);return function(ja){return C(ba(ja))}}):U.attr("transform",C(T))});return ca}},{"../../components/drawing":688,"../../lib":803,"../../lib/svg_text_utils":829,"../sunburst/fx":1335,
"../sunburst/helpers":1336,"../sunburst/plot":1340,"../treemap/constants":1359,"./partition":1134,"./style":1136,"@plotly/d3":58}],1131:[function(b,N,G){N.exports={moduleType:"trace",name:"icicle",basePlotModule:b("./base_plot"),categories:[],animatable:!0,attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults"),supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc").calc,crossTraceCalc:b("./calc").crossTraceCalc,plot:b("./plot"),style:b("./style").style,
colorbar:b("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":1236,"./attributes":1126,"./base_plot":1127,"./calc":1128,"./defaults":1129,"./layout_attributes":1132,"./layout_defaults":1133,"./plot":1135,"./style":1136}],1132:[function(b,N,G){N.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1133:[function(b,N,G){var p=b("../../lib"),n=b("./layout_attributes");N.exports=function(k,m){p.coerce(k,m,
n,"iciclecolorway",m.colorway);p.coerce(k,m,n,"extendiciclecolors",void 0)}},{"../../lib":803,"./layout_attributes":1132}],1134:[function(b,N,G){var p=b("d3-hierarchy"),n=b("../treemap/flip_tree");N.exports=function(k,m,a){var g=a.flipX,h=a.flipY,r="h"===a.orientation,l=a.maxDepth,c=m[0],d=m[1];l&&(c=(k.height+1)*m[0]/Math.min(k.height+1,l),d=(k.height+1)*m[1]/Math.min(k.height+1,l));k=p.partition().padding(a.pad.inner).size(r?[m[1],c]:[m[0],d])(k);(r||g||h)&&n(k,m,{swapXY:r,flipX:g,flipY:h});return k}},
{"../treemap/flip_tree":1364,"d3-hierarchy":170}],1135:[function(b,N,G){var p=b("../treemap/draw"),n=b("./draw_descendants");N.exports=function(k,m,a,g){return p(k,m,a,g,{type:"icicle",drawDescendants:n})}},{"../treemap/draw":1361,"./draw_descendants":1130}],1136:[function(b,N,G){function p(g,h,r){var l=h.data.data;h=!h.children;var c=l.i,d=m.castOption(r,c,"marker.line.color")||k.defaultLine;c=m.castOption(r,c,"marker.line.width")||0;g.style("stroke-width",c).call(k.fill,l.color).call(k.stroke,d).style("opacity",
h?r.leaf.opacity:null)}var n=b("@plotly/d3"),k=b("../../components/color"),m=b("../../lib"),a=b("../bar/uniform_text").resizeText;N.exports={style:function(g){var h=g._fullLayout._iciclelayer.selectAll(".trace");a(g,h,"icicle");h.each(function(r){var l=n.select(this),c=r[0].trace;l.style("opacity",c.opacity);l.selectAll("path.surface").each(function(d){n.select(this).call(p,d,c)})})},styleOne:p}},{"../../components/color":666,"../../lib":803,"../bar/uniform_text":957,"@plotly/d3":58}],1137:[function(b,
N,G){G=b("../../plots/attributes");var p=b("../../plots/template_attributes").hovertemplateAttrs,n=b("../../lib/extend").extendFlat;b=b("./constants").colormodel;for(var k=["rgb","rgba","rgba256","hsl","hsla"],m=[],a=[],g=0;g<k.length;g++){var h=b[k[g]];m.push("For the `"+k[g]+"` colormodel, it is ["+(h.zminDflt||h.min).join(", ")+"].");a.push("For the `"+k[g]+"` colormodel, it is ["+(h.zmaxDflt||h.max).join(", ")+"].")}N.exports=n({source:{valType:"string",editType:"calc"},z:{valType:"data_array",
editType:"calc"},colormodel:{valType:"enumerated",values:k,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],
editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:n({},G.hoverinfo,{flags:"x y z color name text".split(" "),dflt:"x+y+z+text+name"}),hovertemplate:p({},{keys:["z","color","colormodel"]}),transforms:void 0})},{"../../lib/extend":793,
"../../plots/attributes":850,"../../plots/template_attributes":926,"./constants":1139}],1138:[function(b,N,G){function p(c,d,e,f){return function(q){return m.constrain((q-c)*d,e,f)}}function n(c,d){return function(e){return m.constrain(e,c,d)}}function k(c){var d=a.colormodel[c.colormodel],e=(d.colormodel||c.colormodel).length;c._sArray=[];for(var f=0;f<e;f++)d.min[f]!==c.zmin[f]||d.max[f]!==c.zmax[f]?c._sArray.push(p(c.zmin[f],(d.max[f]-d.min[f])/(c.zmax[f]-c.zmin[f]),d.min[f],d.max[f])):c._sArray.push(n(d.min[f],
d.max[f]));return function(q){q=q.slice(0,e);for(var t=0;t<e;t++){var w=q[t];if(!g(w))return!1;q[t]=c._sArray[t](w)}return q}}var m=b("../../lib"),a=b("./constants"),g=b("fast-isnumeric"),h=b("../../plots/cartesian/axes"),r=b("../../lib").maxRowLength,l=b("./helpers").getImageSize;N.exports=function(c,d){if(d._hasZ){var e=d.z.length;var f=r(d.z)}else d._hasSource&&(f=l(d.source),e=f.height,f=f.width);var q=h.getFromId(c,d.xaxis||"x");c=h.getFromId(c,d.yaxis||"y");var t=q.d2c(d.x0)-d.dx/2,w=c.d2c(d.y0)-
d.dy/2,x,z=[t,t+f*d.dx],B=[w,w+e*d.dy];if(q&&"log"===q.type)for(x=0;x<f;x++)z.push(t+x*d.dx);if(c&&"log"===c.type)for(x=0;x<e;x++)B.push(w+x*d.dy);d._extremes[q._id]=h.findExtremes(q,z);d._extremes[c._id]=h.findExtremes(c,B);d._scaler=k(d);return[{x0:t,y0:w,z:d.z,w:f,h:e}]}},{"../../lib":803,"../../plots/cartesian/axes":854,"./constants":1139,"./helpers":1142,"fast-isnumeric":249}],1139:[function(b,N,G){N.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(p){return p.slice(0,3)},
suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(p){return p.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(p){return p.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(p){p=p.slice(0,3);p[1]+="%";p[2]+="%";return p},suffix:["","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(p){p=p.slice(0,4);p[1]+="%";p[2]+="%";return p},
suffix:["","%","%",""]}},pixelatedStyle:"image-rendering: optimizeSpeed; image-rendering: -moz-crisp-edges; image-rendering: -o-crisp-edges; image-rendering: -webkit-optimize-contrast; image-rendering: optimize-contrast; image-rendering: crisp-edges; image-rendering: pixelated; "}},{}],1140:[function(b,N,G){var p=b("../../lib"),n=b("./attributes"),k=b("./constants"),m=b("../../snapshot/helpers").IMAGE_URL_PREFIX;N.exports=function(a,g){function h(l,c){return p.coerce(a,g,n,l,c)}h("source");g.source&&
!g.source.match(m)&&delete g.source;g._hasSource=!!g.source;var r=h("z");g._hasZ=!(void 0===r||!r.length||!r[0]||!r[0].length);g._hasZ||g._hasSource?(h("x0"),h("y0"),h("dx"),h("dy"),g._hasZ?(h("colormodel","rgb"),r=k.colormodel[g.colormodel],h("zmin",r.zminDflt||r.min),h("zmax",r.zmaxDflt||r.max)):g._hasSource&&(g.colormodel="rgba256",r=k.colormodel[g.colormodel],g.zmin=r.zminDflt,g.zmax=r.zmaxDflt),h("zsmooth"),h("text"),h("hovertext"),h("hovertemplate"),g._length=null):g.visible=!1}},{"../../lib":803,
"../../snapshot/helpers":935,"./attributes":1137,"./constants":1139}],1141:[function(b,N,G){N.exports=function(p,n){"xVal"in n&&(p.x=n.xVal);"yVal"in n&&(p.y=n.yVal);n.xa&&(p.xaxis=n.xa);n.ya&&(p.yaxis=n.ya);p.color=n.color;p.colormodel=n.trace.colormodel;p.z||(p.z=n.color);return p}},{}],1142:[function(b,N,G){var p=b("probe-image-size/sync"),n=b("../../snapshot/helpers").IMAGE_URL_PREFIX,k=b("buffer/").Buffer;G.getImageSize=function(m){m=m.replace(n,"");m=new k(m,"base64");return p(m)}},{"../../snapshot/helpers":935,
"buffer/":117,"probe-image-size/sync":527}],1143:[function(b,N,G){var p=b("../../components/fx"),n=b("../../lib"),k=b("./constants");N.exports=function(m,a,g){var h=m.cd[0],r=h.trace,l=m.xa,c=m.ya;if(!(0<p.inbox(a-h.x0,a-(h.x0+h.w*r.dx),0)||0<p.inbox(g-h.y0,g-(h.y0+h.h*r.dy),0))){a=Math.floor((a-h.x0)/r.dx);g=Math.floor(Math.abs(g-h.y0)/r.dy);if(r._hasZ)var d=h.z[g][a];else r._hasSource&&(d=r._canvas.el.getContext("2d").getImageData(a,g,1,1).data);if(d){var e=h.hi||r.hoverinfo,f;e&&(e=e.split("+"),
-1!==e.indexOf("all")&&(e=["color"]),-1!==e.indexOf("color")&&(f=!0));var q=k.colormodel[r.colormodel],t=q.colormodel||r.colormodel,w=t.length;e=r._scaler(d);q=q.suffix;var x=[];if(r.hovertemplate||f)x.push("["+[e[0]+q[0],e[1]+q[1],e[2]+q[2]].join(", ")),4===w&&x.push(", "+e[3]+q[3]),x.push("]"),x=x.join(""),m.extraText=t.toUpperCase()+": "+x;var z;Array.isArray(r.hovertext)&&Array.isArray(r.hovertext[g])?z=r.hovertext[g][a]:Array.isArray(r.text)&&Array.isArray(r.text[g])&&(z=r.text[g][a]);c=c.c2p(h.y0+
(g+.5)*r.dy);f=h.x0+(a+.5)*r.dx;t=h.y0+(g+.5)*r.dy;d="["+d.slice(0,r.colormodel.length).join(", ")+"]";return[n.extendFlat(m,{index:[g,a],x0:l.c2p(h.x0+a*r.dx),x1:l.c2p(h.x0+(a+1)*r.dx),y0:c,y1:c,color:e,xVal:f,xLabelVal:f,yVal:t,yLabelVal:t,zLabelVal:d,text:z,hovertemplateLabels:{zLabel:d,colorLabel:x,"color[0]Label":e[0]+q[0],"color[1]Label":e[1]+q[1],"color[2]Label":e[2]+q[2],"color[3]Label":e[3]+q[3]}})]}}}},{"../../components/fx":706,"../../lib":803,"./constants":1139}],1144:[function(b,N,G){N.exports=
{attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot"),style:b("./style"),hoverPoints:b("./hover"),eventData:b("./event_data"),moduleType:"trace",name:"image",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},{"../../plots/cartesian":868,"./attributes":1137,"./calc":1138,"./defaults":1140,"./event_data":1141,"./hover":1143,"./plot":1145,"./style":1146}],1145:[function(b,N,G){var p=b("@plotly/d3"),
n=b("../../lib"),k=n.strTranslate,m=b("../../constants/xmlns_namespaces"),a=b("./constants"),g=n.isIOS()||n.isSafari()||n.isIE();N.exports=function(h,r,l,c){var d=r.xaxis,e=r.yaxis,f=!(g||h._context._exportedPlot);n.makeTraceGroups(c,l,"im").each(function(q){function t(W){var T=document.createElement("canvas");T.width=Q;T.height=Z;var U=T.getContext("2d"),ha=function(ka){return n.constrain(Math.round(d.c2p(D+ka*F)-O),0,Q)},Y=function(ka){return n.constrain(Math.round(e.c2p(C+ka*J)-L),0,Z)},ba=a.colormodel[z.colormodel],
ja=ba.colormodel||z.colormodel;ba=ba.fmt;for(K=0;K<x.w;K++){var ma=ha(K),ia=ha(K+1);if(ia!==ma&&!isNaN(ia)&&!isNaN(ma))for(var oa=0;oa<x.h;oa++){var xa=Y(oa),ra=Y(oa+1);if(ra!==xa&&!isNaN(ra)&&!isNaN(xa)&&W(K,oa)){var la=z._scaler(W(K,oa));U.fillStyle=la?ja+"("+ba(la).join(",")+")":"rgba(0,0,0,0)";U.fillRect(ma,xa,ia-ma,ra-xa)}}}return T}var w=p.select(this),x=q[0],z=x.trace,B=("fast"===z.zsmooth||!1===z.zsmooth&&f)&&!z._hasZ&&z._hasSource&&"linear"===d.type&&"linear"===e.type;z._realImage=B;var A=
x.z,D=x.x0,C=x.y0,v=x.w,y=x.h,F=z.dx,J=z.dy,K;for(K=0;void 0===O&&K<v;){var O=d.c2p(D+K*F);K++}for(K=v;void 0===I&&0<K;){var I=d.c2p(D+K*F);K--}for(K=0;void 0===L&&K<y;){var L=e.c2p(C+K*J);K++}for(K=y;void 0===H&&0<K;){var H=e.c2p(C+K*J);K--}if(I<O){var M=I;I=O;O=M}H<L&&(M=L,L=H,H=M);B||(O=Math.max(-.5*d._length,O),I=Math.min(1.5*d._length,I),L=Math.max(-.5*e._length,L),H=Math.min(1.5*e._length,H));var Q=Math.round(I-O),Z=Math.round(H-L);if(0>=Q||0>=Z)w.selectAll("image").data([]).exit().remove();
else{var ca=w.selectAll("image").data([q]);ca.enter().append("svg:image").attr({xmlns:m.svg,preserveAspectRatio:"none"});ca.exit().remove();q=!1===z.zsmooth?a.pixelatedStyle:"";B&&(w=n.simpleMap(d.range,d.r2l),I=n.simpleMap(e.range,e.r2l),w=w[1]<w[0],I=I[1]>I[0],w||I)&&(M=O+Q/2,H=L+Z/2,q+="transform:"+k(M+"px",H+"px")+"scale("+(w?-1:1)+","+(I?-1:1)+")"+k(-M+"px",-H+"px")+";");ca.attr("style",q);q=(new Promise(function(W){if(z._hasZ)W();else if(z._hasSource)if(z._canvas&&z._canvas.el.width===v&&z._canvas.el.height===
y&&z._canvas.source===z.source)W();else{var T=document.createElement("canvas");T.width=v;T.height=y;var U=T.getContext("2d");z._image=z._image||new Image;var ha=z._image;ha.onload=function(){U.drawImage(ha,0,0);z._canvas={el:T,source:z.source};W()};ha.setAttribute("src",z.source)}})).then(function(){if(z._hasZ){var W=t(function(U,ha){return A[ha][U]});W=W.toDataURL("image/png")}else if(z._hasSource)if(B)W=z.source;else{var T=z._canvas.el.getContext("2d").getImageData(0,0,v,y).data;W=t(function(U,
ha){U=4*(ha*v+U);return[T[U],T[U+1],T[U+2],T[U+3]]});W=W.toDataURL("image/png")}ca.attr({"xlink:href":W,height:Z,width:Q,x:O,y:L})});h._promises.push(q)}})}},{"../../constants/xmlns_namespaces":780,"../../lib":803,"./constants":1139,"@plotly/d3":58}],1146:[function(b,N,G){var p=b("@plotly/d3");N.exports=function(n){p.select(n).selectAll(".im image").style("opacity",function(k){return k[0].trace.opacity})}},{"@plotly/d3":58}],1147:[function(b,N,G){G=b("../../lib/extend").extendFlat;var p=b("../../lib/extend").extendDeep,
n=b("../../plot_api/edit_types").overrideAll,k=b("../../plots/font_attributes"),m=b("../../components/color/attributes"),a=b("../../plots/domain").attributes,g=b("../../plots/cartesian/layout_attributes"),h=b("../../plot_api/plot_template").templatedArray,r=b("../../constants/delta.js");b=b("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers;var l=k({editType:"plot",colorEditType:"plot"}),c={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:m.defaultLine,
editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},d={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"};h=h("step",p({},c,{range:d}));N.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left",
"center","right"],editType:"plot"},domain:a({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:G({},l,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:b("value")},font:G({},l,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",
editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:b("value")},increasing:{symbol:{valType:"string",dflt:r.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:r.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:r.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",
dflt:r.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:G({},l,{}),editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:p({},c,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:m.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:n({range:d,visible:G({},g.visible,{dflt:!0}),tickmode:g.tickmode,nticks:g.nticks,tick0:g.tick0,dtick:g.dtick,
tickvals:g.tickvals,ticktext:g.ticktext,ticks:G({},g.ticks,{dflt:"outside"}),ticklen:g.ticklen,tickwidth:g.tickwidth,tickcolor:g.tickcolor,showticklabels:g.showticklabels,tickfont:k({}),tickangle:g.tickangle,tickformat:g.tickformat,tickformatstops:g.tickformatstops,tickprefix:g.tickprefix,showtickprefix:g.showtickprefix,ticksuffix:g.ticksuffix,showticksuffix:g.showticksuffix,separatethousands:g.separatethousands,exponentformat:g.exponentformat,minexponent:g.minexponent,showexponent:g.showexponent,
editType:"plot"},"plot"),steps:h,threshold:{line:{color:G({},c.line.color,{}),width:G({},c.line.width,{dflt:1}),editType:"plot"},thickness:G({},c.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},{"../../components/color/attributes":665,"../../constants/delta.js":773,"../../lib/extend":793,"../../plot_api/edit_types":836,"../../plot_api/plot_template":843,"../../plots/cartesian/axis_format_attributes":857,"../../plots/cartesian/layout_attributes":869,
"../../plots/domain":882,"../../plots/font_attributes":883}],1148:[function(b,N,G){var p=b("../../plots/plots");G.name="indicator";G.plot=function(n,k,m,a){p.plotBasePlot(G.name,n,k,m,a)};G.clean=function(n,k,m,a){p.cleanBasePlot(G.name,n,k,m,a)}},{"../../plots/plots":917}],1149:[function(b,N,G){N.exports={calc:function(p,n){p=[];var k=n.value;"number"!==typeof n._lastValue&&(n._lastValue=n.value);var m=n._lastValue,a=m;n._hasDelta&&"number"===typeof n.delta.reference&&(a=n.delta.reference);p[0]=
{y:k,lastY:m,delta:k-a,relativeDelta:(k-a)/a};return p}}},{}],1150:[function(b,N,G){N.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},{}],1151:[function(b,N,G){function p(d,e){function f(q,t){return n.coerce(d,e,k.gauge.steps,q,t)}f("color");f("line.color");f("line.width");f("range");f("thickness")}var n=b("../../lib"),k=b("./attributes"),m=b("../../plots/domain").defaults,a=b("../../plot_api/plot_template"),
g=b("../../plots/array_container_defaults"),h=b("./constants.js"),r=b("../../plots/cartesian/tick_value_defaults"),l=b("../../plots/cartesian/tick_mark_defaults"),c=b("../../plots/cartesian/tick_label_defaults");N.exports={supplyDefaults:function(d,e,f,q){function t(y,F){return n.coerce(d,e,k,y,F)}function w(y,F){return n.coerce(A,D,k.gauge,y,F)}function x(y,F){return n.coerce(C,v,k.gauge.axis,y,F)}m(e,q,t);t("mode");e._hasNumber=-1!==e.mode.indexOf("number");e._hasDelta=-1!==e.mode.indexOf("delta");
e._hasGauge=-1!==e.mode.indexOf("gauge");f=t("value");e._range=[0,"number"===typeof f?1.5*f:1];f=Array(2);if(e._hasNumber){t("number.valueformat");t("number.font.color",q.font.color);t("number.font.family",q.font.family);t("number.font.size");void 0===e.number.font.size&&(e.number.font.size=h.defaultNumberFontSize,f[0]=!0);t("number.prefix");t("number.suffix");var z=e.number.font.size}if(e._hasDelta){t("delta.font.color",q.font.color);t("delta.font.family",q.font.family);t("delta.font.size");void 0===
e.delta.font.size&&(e.delta.font.size=(e._hasNumber?.5:1)*(z||h.defaultNumberFontSize),f[1]=!0);t("delta.reference",e.value);t("delta.relative");t("delta.valueformat",e.delta.relative?"2%":"");t("delta.increasing.symbol");t("delta.increasing.color");t("delta.decreasing.symbol");t("delta.decreasing.color");t("delta.position");var B=e.delta.font.size}e._scaleNumbers=(!e._hasNumber||f[0])&&(!e._hasDelta||f[1])||!1;t("title.font.color",q.font.color);t("title.font.family",q.font.family);t("title.font.size",
.25*(z||B||h.defaultNumberFontSize));t("title.text");var A;if(e._hasGauge){(A=d.gauge)||(A={});var D=a.newContainer(e,"gauge");w("shape");(e._isBullet="bullet"===e.gauge.shape)||t("title.align","center");(e._isAngular="angular"===e.gauge.shape)||t("align","center");w("bgcolor",q.paper_bgcolor);w("borderwidth");w("bordercolor");w("bar.color");w("bar.line.color");w("bar.line.width");w("bar.thickness",h.valueThickness*("bullet"===e.gauge.shape?.5:1));g(A,D,{name:"steps",handleItemDefaults:p});w("threshold.value");
w("threshold.thickness");w("threshold.line.width");w("threshold.line.color");var C={};A&&(C=A.axis||{});var v=a.newContainer(D,"axis");x("visible");e._range=x("range",e._range);q={outerTicks:!0};r(C,v,x,"linear");c(C,v,x,"linear",q);l(C,v,x,q)}else t("title.align","center"),t("align","center"),e._isAngular=e._isBullet=!1;e._length=null}}},{"../../lib":803,"../../plot_api/plot_template":843,"../../plots/array_container_defaults":849,"../../plots/cartesian/tick_label_defaults":876,"../../plots/cartesian/tick_mark_defaults":877,
"../../plots/cartesian/tick_value_defaults":878,"../../plots/domain":882,"./attributes":1147,"./constants.js":1150}],1152:[function(b,N,G){N.exports={moduleType:"trace",name:"indicator",basePlotModule:b("./base_plot"),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:b("./attributes"),supplyDefaults:b("./defaults").supplyDefaults,calc:b("./calc").calc,plot:b("./plot"),meta:{}}},{"./attributes":1147,"./base_plot":1148,"./calc":1149,"./defaults":1151,"./plot":1153}],1153:[function(b,
N,G){function p(I,L,H,M){function Q(xa){xa.attr("width",function(ra){return Math.max(0,ia.c2p(ra.range[1])-ia.c2p(ra.range[0]))}).attr("x",function(ra){return ia.c2p(ra.range[0])}).attr("y",function(ra){return.5*(1-ra.thickness)*ja}).attr("height",function(ra){return ra.thickness*ja})}var Z=H[0].trace;L=M.gauge;var ca=M.layer,W=M.gaugeBg,T=M.gaugeOutline,U=M.size,ha=Z.domain,Y=M.transitionOpts,ba=M.onComplete;L.enter().append("g").classed("bullet",!0);L.attr("transform",t(U.l,U.t));ca.enter().append("g").classed("bulletaxis",
!0).classed("crisp",!0);ca.selectAll("g.xbulletaxistick,path,text").remove();var ja=U.h;M=Z.gauge.bar.thickness*ja;var ma=ha.x[0];ha=ha.x[0]+(ha.x[1]-ha.x[0])*(Z._hasNumber||Z._hasDelta?1-B.bulletNumberDomainSize:1);var ia=g(I,Z.gauge.axis);ia._id="xbulletaxis";ia.domain=[ma,ha];ia.setScale();ha=D.calcTicks(ia);ma=D.makeTransTickFn(ia);var oa=D.getTickSigns(ia)[2];U=U.t+U.h;ia.visible&&(D.drawTicks(I,ia,{vals:"inside"===ia.ticks?D.clipEnds(ia,ha):ha,layer:ca,path:D.makeTickPath(ia,U,oa),transFn:ma}),
D.drawLabels(I,ia,{vals:ha,layer:ca,transFn:ma,labelFns:D.makeLabelFns(ia,U)}));I=[W].concat(Z.gauge.steps);I=L.selectAll("g.bg-bullet").data(I);I.enter().append("g").classed("bg-bullet",!0).append("rect");I.select("rect").call(Q).call(m);I.exit().remove();I=L.selectAll("g.value-bullet").data([Z.gauge.bar]);I.enter().append("g").classed("value-bullet",!0).append("rect");I.select("rect").attr("height",M).attr("y",(ja-M)/2).call(m);Y&&0<Y.duration?I.select("rect").transition().duration(Y.duration).ease(Y.easing).each("end",
function(){ba&&ba()}).each("interrupt",function(){ba&&ba()}).attr("width",Math.max(0,ia.c2p(Math.min(Z.gauge.axis.range[1],H[0].y)))):I.select("rect").attr("width","number"===typeof H[0].y?Math.max(0,ia.c2p(Math.min(Z.gauge.axis.range[1],H[0].y))):0);I.exit().remove();H=H.filter(function(){return Z.gauge.threshold.value||0===Z.gauge.threshold.value});H=L.selectAll("g.threshold-bullet").data(H);H.enter().append("g").classed("threshold-bullet",!0).append("line");H.select("line").attr("x1",ia.c2p(Z.gauge.threshold.value)).attr("x2",
ia.c2p(Z.gauge.threshold.value)).attr("y1",(1-Z.gauge.threshold.thickness)/2*ja).attr("y2",(1-(1-Z.gauge.threshold.thickness)/2)*ja).call(F.stroke,Z.gauge.threshold.line.color).style("stroke-width",Z.gauge.threshold.line.width);H.exit().remove();L=L.selectAll("g.gauge-outline").data([T]);L.enter().append("g").classed("gauge-outline",!0).append("rect");L.select("rect").call(Q).call(m);L.exit().remove()}function n(I,L,H,M){function Q(Ia){var Xa=W.gauge.axis.range[0];Ia=(Ia-Xa)/(W.gauge.axis.range[1]-
Xa)*Math.PI-oa;return Ia<-oa?-oa:Ia>oa?oa:Ia}function Z(Ia){return c.svg.arc().innerRadius((ha+U)/2-Ia/2*(U-ha)).outerRadius((ha+U)/2+Ia/2*(U-ha)).startAngle(-oa)}function ca(Ia){Ia.attr("d",function(Xa){return Z(Xa.thickness).startAngle(Q(Xa.range[0])).endAngle(Q(Xa.range[1]))()})}var W=H[0].trace,T=M.size,U=M.radius,ha=M.innerRadius,Y=M.gaugeBg;L=M.gaugeOutline;var ba=[T.l+T.w/2,T.t+T.h/2+U/2];T=M.gauge;var ja=M.layer,ma=M.transitionOpts,ia=M.onComplete,oa=Math.PI/2;T.enter().append("g").classed("angular",
!0);T.attr("transform",t(ba[0],ba[1]));ja.enter().append("g").classed("angularaxis",!0).classed("crisp",!0);ja.selectAll("g.xangularaxistick,path,text").remove();var xa=g(I,W.gauge.axis);xa.type="linear";xa.range=W.gauge.axis.range;xa._id="xangularaxis";xa.ticklabeloverflow="allow";xa.setScale();var ra=function(Ia){return(xa.range[0]-Ia.x)/(xa.range[1]-xa.range[0])*Math.PI+Math.PI},la={},ka=D.makeLabelFns(xa,0).labelStandoff;la.xFn=function(Ia){Ia=ra(Ia);return Math.cos(Ia)*ka};la.yFn=function(Ia){var Xa=
ra(Ia);return-Math.sin(Xa)*(ka+Ia.fontSize*(0<Math.sin(Xa)?.2:1))+Math.abs(Math.cos(Xa))*Ia.fontSize*x};la.anchorFn=function(Ia){Ia=ra(Ia);Ia=Math.cos(Ia);return.1>Math.abs(Ia)?"middle":0<Ia?"start":"end"};la.heightFn=function(Ia,Xa,$a){Ia=ra(Ia);return-.5*(1+Math.sin(Ia))*$a};var na=function(Ia){return t(ba[0]+U*Math.cos(Ia),ba[1]-U*Math.sin(Ia))};var qa=function(Ia){return na(ra(Ia))};var ta=function(Ia){Ia=ra(Ia);return na(Ia)+"rotate("+-w(Ia)+")"};M=D.calcTicks(xa);var za=D.getTickSigns(xa)[2];
xa.visible&&(za="inside"===xa.ticks?-1:1,D.drawTicks(I,xa,{vals:M,layer:ja,path:"M"+(xa.linewidth||1)/2*za+",0h"+za*xa.ticklen,transFn:ta}),D.drawLabels(I,xa,{vals:M,layer:ja,transFn:qa,labelFns:la}));I=[Y].concat(W.gauge.steps);I=T.selectAll("g.bg-arc").data(I);I.enter().append("g").classed("bg-arc",!0).append("path");I.select("path").call(ca).call(m);I.exit().remove();I=Z(W.gauge.bar.thickness);Y=T.selectAll("g.value-arc").data([W.gauge.bar]);Y.enter().append("g").classed("value-arc",!0).append("path");
ja=Y.select("path");ma&&0<ma.duration?(ja.transition().duration(ma.duration).ease(ma.easing).each("end",function(){ia&&ia()}).each("interrupt",function(){ia&&ia()}).attrTween("d",a(I,Q(H[0].lastY),Q(H[0].y))),W._lastValue=H[0].y):ja.attr("d","number"===typeof H[0].y?I.endAngle(Q(H[0].y)):"M0,0Z");ja.call(m);Y.exit().remove();I=[];((H=W.gauge.threshold.value)||0===H)&&I.push({range:[H,H],color:W.gauge.threshold.color,line:{color:W.gauge.threshold.line.color,width:W.gauge.threshold.line.width},thickness:W.gauge.threshold.thickness});
H=T.selectAll("g.threshold-arc").data(I);H.enter().append("g").classed("threshold-arc",!0).append("path");H.select("path").call(ca).call(m);H.exit().remove();L=T.selectAll("g.gauge-outline").data([L]);L.enter().append("g").classed("gauge-outline",!0).append("path");L.select("path").call(ca).call(m);L.exit().remove()}function k(I,L,H,M){function Q(za,Ia,Xa,$a){if(!za.match("s")||0<=Xa===0<=$a||Ia(Xa).slice(-1).match(O)||Ia($a).slice(-1).match(O))return Ia;za=za.slice().replace("s","f").replace(/\d+/,
function(sb){return parseInt(sb)-1});var gb=g(I,{tickformat:za});return function(sb){return 1>Math.abs(sb)?D.tickText(gb,sb).text:Ia(sb)}}function Z(){function za(){var jb="number"===typeof H[0].y?gb+Xa(H[0].y)+$a:"-";sb.text(jb).call(z.font,W.number.font).call(A.convertToTspans,I)}var Ia=g(I,{tickformat:W.number.valueformat},W._range);Ia.setScale();D.prepTicks(Ia);var Xa=function(jb){return D.tickText(Ia,jb).text},$a=W.number.suffix,gb=W.number.prefix,sb=ma.select("text.number");ba&&0<ba.duration?
sb.transition().duration(ba.duration).ease(ba.easing).each("end",function(){za();ja&&ja()}).each("interrupt",function(){za();ja&&ja()}).attrTween("text",function(){var jb=c.select(this),vb=e(H[0].lastY,H[0].y);W._lastValue=H[0].y;var qb=Q(W.number.valueformat,Xa,H[0].lastY,H[0].y);return function(Bb){jb.text(gb+qb(vb(Bb))+$a)}}):za();ia=r(gb+Xa(H[0].y)+$a,W.number.font,Y,I);return sb}function ca(){function za(){jb.text(gb($a(H[0]),Xa)).call(F.fill,sb(H[0])).call(A.convertToTspans,I)}var Ia=g(I,{tickformat:W.delta.valueformat},
W._range);Ia.setScale();D.prepTicks(Ia);var Xa=function(vb){return D.tickText(Ia,vb).text},$a=function(vb){return W.delta.relative?vb.relativeDelta:vb.delta},gb=function(vb,qb){return 0===vb||"number"!==typeof vb||isNaN(vb)?"-":(0<vb?W.delta.increasing.symbol:W.delta.decreasing.symbol)+qb(vb)},sb=function(vb){return 0<=vb.delta?W.delta.increasing.color:W.delta.decreasing.color};void 0===W._deltaLastValue&&(W._deltaLastValue=$a(H[0]));var jb=ma.select("text.delta");jb.call(z.font,W.delta.font).call(F.fill,
sb({delta:W._deltaLastValue}));ba&&0<ba.duration?jb.transition().duration(ba.duration).ease(ba.easing).tween("text",function(){var vb=c.select(this),qb=$a(H[0]),Bb=W._deltaLastValue,ub=Q(W.delta.valueformat,Xa,Bb,qb),wb=e(Bb,qb);W._deltaLastValue=qb;return function(rb){vb.text(gb(wb(rb),ub));vb.call(F.fill,sb({delta:wb(rb)}))}}).each("end",function(){za();ja&&ja()}).each("interrupt",function(){za();ja&&ja()}):za();oa=r(gb($a(H[0]),Xa),W.delta.font,Y,I);return jb}var W=H[0].trace,T=M.numbersX,U=M.numbersY,
ha=W.align||"center",Y=J[ha],ba=M.transitionOpts,ja=M.onComplete,ma=f.ensureSingle(L,"g","numbers"),ia,oa;L=[];W._hasNumber&&L.push("number");W._hasDelta&&(L.push("delta"),"left"===W.delta.position&&L.reverse());L=ma.selectAll("text").data(L);L.enter().append("text");L.attr("text-anchor",function(){return Y}).attr("class",function(za){return za}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null);L.exit().remove();var xa=W.mode+W.align;if(W._hasDelta){var ra=ca();xa+=W.delta.position+W.delta.font.size+
W.delta.font.family+W.delta.valueformat;xa+=W.delta.increasing.symbol+W.delta.decreasing.symbol;var la=oa}W._hasNumber&&(Z(),xa+=W.number.font.size+W.number.font.family+W.number.valueformat+W.number.suffix+W.number.prefix,la=ia);if(W._hasDelta&&W._hasNumber){L=[(ia.left+ia.right)/2,(ia.top+ia.bottom)/2];var ka=[(oa.left+oa.right)/2,(oa.top+oa.bottom)/2],na=.75*W.delta.font.size;if("left"===W.delta.position){var qa=l(W,"deltaPos",0,-1*(ia.width*K[W.align]+oa.width*(1-K[W.align])+na),xa,Math.min);var ta=
L[1]-ka[1];la={width:ia.width+oa.width+na,height:Math.max(ia.height,oa.height),left:oa.left+qa,right:ia.right,top:Math.min(ia.top,oa.top+ta),bottom:Math.max(ia.bottom,oa.bottom+ta)}}"right"===W.delta.position&&(qa=l(W,"deltaPos",0,ia.width*(1-K[W.align])+oa.width*K[W.align]+na,xa,Math.max),ta=L[1]-ka[1],la={width:ia.width+oa.width+na,height:Math.max(ia.height,oa.height),left:ia.left,right:oa.right+qa,top:Math.min(ia.top,oa.top+ta),bottom:Math.max(ia.bottom,oa.bottom+ta)});"bottom"===W.delta.position&&
(qa=null,ta=oa.height,la={width:Math.max(ia.width,oa.width),height:ia.height+oa.height,left:Math.min(ia.left,oa.left),right:Math.max(ia.right,oa.right),top:ia.bottom-ia.height,bottom:ia.bottom+oa.height});"top"===W.delta.position&&(qa=null,ta=ia.top,la={width:Math.max(ia.width,oa.width),height:ia.height+oa.height,left:Math.min(ia.left,oa.left),right:Math.max(ia.right,oa.right),top:ia.bottom-ia.height-oa.height,bottom:ia.bottom});ra.attr({dx:qa,dy:ta})}(W._hasNumber||W._hasDelta)&&ma.attr("transform",
function(){var za=M.numbersScaler(la);xa+=za[2];za=l(W,"numbersScale",1,za[0],xa,Math.min);W._scaleNumbers||(za=1);var Ia=W._isAngular?U-za*la.bottom:U-za*(la.top+la.bottom)/2;W._numbersTop=za*la.top+Ia;var Xa=la[ha];"center"===ha&&(Xa=(la.left+la.right)/2);Xa=T-za*Xa;Xa=l(W,"numbersTranslate",0,Xa,xa,Math.max);return t(Xa,Ia)+q(za)})}function m(I){I.each(function(L){F.stroke(c.select(this),L.line.color)}).each(function(L){F.fill(c.select(this),L.color)}).style("stroke-width",function(L){return L.line.width})}
function a(I,L,H){return function(){var M=d(L,H);return function(Q){return I.endAngle(M(Q))()}}}function g(I,L,H){function M(ca,W){return f.coerce(Q,Z,y,ca,W)}I=I._fullLayout;var Q=f.extendFlat({type:"linear",ticks:"outside",range:H,showline:!0},L),Z={type:"linear",_id:"x"+L._id};L={letter:"x",font:I.font,noHover:!0,noTickson:!0};C(Q,Z,M,L,I);v(Q,Z,M,L);return Z}function h(I,L,H){return[Math.min(L/I.width,H/I.height),I,L+"x"+H]}function r(I,L,H,M){var Q=document.createElementNS("http://www.w3.org/2000/svg",
"text");Q=c.select(Q);Q.text(I).attr("x",0).attr("y",0).attr("text-anchor",H).attr("data-unformatted",I).call(A.convertToTspans,M).call(z.font,L);return z.bBox(Q.node())}function l(I,L,H,M,Q,Z){L="_cache"+L;I[L]&&I[L].key===Q||(I[L]={key:Q,value:H});H=f.aggNums(Z,null,[I[L].value,M],2);return I[L].value=H}var c=b("@plotly/d3"),d=b("d3-interpolate").interpolate,e=b("d3-interpolate").interpolateNumber,f=b("../../lib"),q=f.strScale,t=f.strTranslate,w=f.rad2deg,x=b("../../constants/alignment").MID_SHIFT,
z=b("../../components/drawing"),B=b("./constants"),A=b("../../lib/svg_text_utils"),D=b("../../plots/cartesian/axes"),C=b("../../plots/cartesian/axis_defaults"),v=b("../../plots/cartesian/position_defaults"),y=b("../../plots/cartesian/layout_attributes"),F=b("../../components/color"),J={left:"start",center:"middle",right:"end"},K={left:0,center:.5,right:1},O=/[yzafpnmkMGTPEZY]/;N.exports=function(I,L,H,M){var Q=I._fullLayout,Z;H&&0<H.duration&&M&&(Z=M());f.makeTraceGroups(Q._indicatorlayer,L,"trace").each(function(ca){var W=
ca[0].trace,T=c.select(this),U=W._hasGauge,ha=W._isAngular,Y=W._isBullet,ba=W.domain,ja={w:Q._size.w*(ba.x[1]-ba.x[0]),h:Q._size.h*(ba.y[1]-ba.y[0]),l:Q._size.l+Q._size.w*ba.x[0],r:Q._size.r+Q._size.w*(1-ba.x[1]),t:Q._size.t+Q._size.h*(1-ba.y[1]),b:Q._size.b+Q._size.h*ba.y[0]},ma=ja.l+ja.w/2,ia=ja.t+ja.h/2,oa=Math.min(ja.w/2,ja.h),xa=B.innerRadius*oa;ba=W.align||"center";var ra=ia;if(U){if(ha){var la=ma;ra=ia+oa/2;var ka=function(Xa){var $a=.9*xa;return[$a/Math.sqrt(Xa.width/2*(Xa.width/2)+Xa.height*
Xa.height),Xa,$a]}}if(Y){var na=B.bulletPadding;la=1-B.bulletNumberDomainSize+na;la=ja.l+(la+(1-la)*K[ba])*ja.w;ka=function(Xa){return h(Xa,(B.bulletNumberDomainSize-na)*ja.w,ja.h)}}}else la=ja.l+K[ba]*ja.w,ka=function(Xa){return h(Xa,ja.w,ja.h)};k(I,T,ca,{numbersX:la,numbersY:ra,numbersScaler:ka,transitionOpts:H,onComplete:Z});if(U){var qa={range:W.gauge.axis.range,color:W.gauge.bgcolor,line:{color:W.gauge.bordercolor,width:0},thickness:1};var ta={range:W.gauge.axis.range,color:"rgba(0, 0, 0, 0)",
line:{color:W.gauge.bordercolor,width:W.gauge.borderwidth},thickness:1}}la=T.selectAll("g.angular").data(ha?ca:[]);la.exit().remove();var za=T.selectAll("g.angularaxis").data(ha?ca:[]);za.exit().remove();ha&&n(I,T,ca,{radius:oa,innerRadius:xa,gauge:la,layer:za,size:ja,gaugeBg:qa,gaugeOutline:ta,transitionOpts:H,onComplete:Z});la=T.selectAll("g.bullet").data(Y?ca:[]);la.exit().remove();ka=T.selectAll("g.bulletaxis").data(Y?ca:[]);ka.exit().remove();Y&&p(I,T,ca,{gauge:la,layer:ka,size:ja,gaugeBg:qa,
gaugeOutline:ta,transitionOpts:H,onComplete:Z});var Ia=T.selectAll("text.title").data(ca);Ia.exit().remove();Ia.enter().append("text").classed("title",!0);Ia.attr("text-anchor",function(){return Y?J.right:J[W.title.align]}).text(W.title.text).call(z.font,W.title.font).call(A.convertToTspans,I);Ia.attr("transform",function(){var Xa=ja.l+ja.w*K[W.title.align],$a,gb=B.titlePadding,sb=z.bBox(Ia.node());U?(ha&&($a=W.gauge.axis.visible?z.bBox(za.node()).top-gb-sb.bottom:ja.t+ja.h/2-oa/2-sb.bottom-gb),Y&&
($a=ra-(sb.top+sb.bottom)/2,Xa=ja.l-B.bulletPadding*ja.w)):$a=W._numbersTop-gb-sb.bottom;return t(Xa,$a)})})}},{"../../components/color":666,"../../components/drawing":688,"../../constants/alignment":771,"../../lib":803,"../../lib/svg_text_utils":829,"../../plots/cartesian/axes":854,"../../plots/cartesian/axis_defaults":856,"../../plots/cartesian/layout_attributes":869,"../../plots/cartesian/position_defaults":872,"./constants":1150,"@plotly/d3":58,"d3-interpolate":171}],1154:[function(b,N,G){function p(r){return{show:{valType:"boolean",
dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}}function n(r){return{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}}G=b("../../components/colorscale/attributes");var k=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat,m=b("../../plots/template_attributes").hovertemplateAttrs,a=b("../mesh3d/attributes"),g=b("../../plots/attributes"),h=b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;
N=N.exports=b(h({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:p("x"),
y:p("y"),z:p("z")},caps:{x:n("x"),y:n("y"),z:n("z")},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:m(),xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z"),valuehoverformat:k("value",1),showlegend:h({},g.showlegend,{dflt:!1})},G("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:a.opacity,lightposition:a.lightposition,lighting:a.lighting,flatshading:a.flatshading,contour:a.contour,hoverinfo:h({},g.hoverinfo)}),
"calc","nested");N.flatshading.dflt=!0;N.lighting.facenormalsepsilon.dflt=0;N.x.editType=N.y.editType=N.z.editType=N.value.editType="calc+clearAxisTypes";N.transforms=void 0},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plot_api/edit_types":836,"../../plots/attributes":850,"../../plots/cartesian/axis_format_attributes":857,"../../plots/template_attributes":926,"../mesh3d/attributes":1159}],1155:[function(b,N,G){var p=b("../../components/colorscale/calc"),n=b("../streamtube/calc").processGrid,
k=b("../streamtube/calc").filter;N.exports=function(m,a){a._len=Math.min(a.x.length,a.y.length,a.z.length,a.value.length);a._x=k(a.x,a._len);a._y=k(a.y,a._len);a._z=k(a.z,a._len);a._value=k(a.value,a._len);var g=n(a);a._gridFill=g.fill;a._Xs=g.Xs;a._Ys=g.Ys;a._Zs=g.Zs;a._len=g.len;g=Infinity;for(var h=-Infinity,r=0;r<a._len;r++){var l=a._value[r];g=Math.min(g,l);h=Math.max(h,l)}a._minValues=g;a._maxValues=h;a._vMin=void 0===a.isomin||null===a.isomin?g:a.isomin;a._vMax=void 0===a.isomax||null===a.isomin?
h:a.isomax;p(m,a,{vals:[a._vMin,a._vMax],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":674,"../streamtube/calc":1326}],1156:[function(b,N,G){function p(c,d,e){this.scene=c;this.uid=e;this.mesh=d;this.name="";this.data=null;this.showContour=!1}function n(c){function d(){gb=[];sb=[];jb=[];vb=[];ia=ma=0}function e(Bb,ub,wb,rb){gb.push(Bb);sb.push(ub);jb.push(wb);vb.push(rb);ma++;return ma-1}function f(Bb,ub,wb){for(var rb=[],Ab=0;Ab<Bb.length;Ab++)rb[Ab]=Bb[Ab]*(1-wb)+wb*ub[Ab];
return rb}function q(Bb,ub){return"all"===Bb||null===Bb?!0:-1<Bb.indexOf(ub)}function t(Bb,ub,wb){ia=ma;var rb=[ub];var Ab=[wb];if(1<=qb)rb=[ub],Ab=[wb];else if(0<qb){var Ma=wb;rb=ub[0];Ab=ub[1];ub=ub[2];for(var La=[],ya=0;ya<rb.length;ya++)La[ya]=(rb[ya]+Ab[ya]+ub[ya])/3;var Aa=Math.sqrt(1-qb);ya=f(La,rb,Aa);wb=f(La,Ab,Aa);var Ka=f(La,ub,Aa);La=Ma[0];Aa=Ma[1];Ma=Ma[2];ub=[[rb,Ab,wb],[wb,ya,rb],[Ab,ub,Ka],[Ka,wb,Ab],[ub,rb,ya],[ya,Ka,ub]];Ab=[[La,Aa,-1],[-1,-1,La],[Aa,Ma,-1],[-1,-1,Aa],[Ma,La,-1],
[-1,-1,Ma]];rb=ub}for(Ma=0;Ma<rb.length;Ma++){ub=rb[Ma];wb=Ab[Ma];ya=[];for(La=0;3>La;La++){var Ta=ub[La][0],bb=ub[La][1];Ka=ub[La][2];Aa=ub[La][3];if(-1<wb[La])var cb=wb[La];else a:{cb=vb.length;for(var Eb=ia;Eb<cb;Eb++)if(Ta===gb[Eb]&&bb===sb[Eb]&&Ka===jb[Eb]){cb=Eb;break a}cb=-1}-1<cb?ya[La]=cb:(cb=ya,Eb=La,Aa=null===Bb?Aa:Bb,cb[Eb]=e(Ta,bb,Ka,Aa))}ub=ya[1];wb=ya[2];c._meshI.push(ya[0]);c._meshJ.push(ub);c._meshK.push(wb);ja++}}function w(Bb,ub,wb){var rb=function(Ab,Ma,La){t(Bb,[ub[Ab],ub[Ma],
ub[La]],[wb[Ab],wb[Ma],wb[La]])};rb(0,1,2);rb(2,3,0)}function x(Bb,ub,wb){var rb=function(Ab,Ma,La){t(Bb,[ub[Ab],ub[Ma],ub[La]],[wb[Ab],wb[Ma],wb[La]])};rb(0,1,2);rb(3,0,1);rb(2,3,0);rb(1,2,3)}function z(Bb,ub,wb,rb){var Ab=Bb[3];Ab<wb&&(Ab=wb);Ab>rb&&(Ab=rb);wb=(Bb[3]-Ab)/(Bb[3]-ub[3]+1E-9);rb=[];for(Ab=0;4>Ab;Ab++)rb[Ab]=(1-wb)*Bb[Ab]+wb*ub[Ab];return rb}function B(Bb,ub,wb){return Bb>=ub&&Bb<=wb}function A(Bb){var ub=.001*($a-Xa);return Bb>=Xa-ub&&Bb<=$a+ub}function D(Bb){for(var ub=[],wb=0;4>
wb;wb++){var rb=Bb[wb];ub.push([c._x[rb],c._y[rb],c._z[rb],c._value[rb]])}return ub}function C(Bb,ub,wb,rb,Ab,Ma){Ma||(Ma=1);wb=[-1,-1,-1];var La=!1,ya=[B(ub[0][3],rb,Ab),B(ub[1][3],rb,Ab),B(ub[2][3],rb,Ab)];if(!ya[0]&&!ya[1]&&!ya[2])return!1;var Aa=function(Ta,bb,cb){return A(bb[0][3])&&A(bb[1][3])&&A(bb[2][3])?(t(Ta,bb,cb),!0):3>Ma?C(Ta,bb,cb,Xa,$a,++Ma):!1};if(ya[0]&&ya[1]&&ya[2])return Aa(Bb,ub,wb)||La;var Ka=!1;[[0,1,2],[2,0,1],[1,2,0]].forEach(function(Ta){if(ya[Ta[0]]&&ya[Ta[1]]&&!ya[Ta[2]]){var bb=
ub[Ta[0]],cb=ub[Ta[1]],Eb=ub[Ta[2]],Pb=z(Eb,bb,rb,Ab);Eb=z(Eb,cb,rb,Ab);La=Aa(Bb,[Eb,Pb,bb],[-1,-1,wb[Ta[0]]])||La;La=Aa(Bb,[bb,cb,Eb],[wb[Ta[0]],wb[Ta[1]],-1])||La;Ka=!0}});if(Ka)return La;[[0,1,2],[1,2,0],[2,0,1]].forEach(function(Ta){if(ya[Ta[0]]&&!ya[Ta[1]]&&!ya[Ta[2]]){var bb=ub[Ta[0]],cb=ub[Ta[2]],Eb=z(ub[Ta[1]],bb,rb,Ab);cb=z(cb,bb,rb,Ab);La=Aa(Bb,[cb,Eb,bb],[-1,-1,wb[Ta[0]]])||La;Ka=!0}});return La}function v(Bb,ub,wb,rb){var Ab=!1,Ma=D(ub),La=[B(Ma[0][3],wb,rb),B(Ma[1][3],wb,rb),B(Ma[2][3],
wb,rb),B(Ma[3][3],wb,rb)];if(!(La[0]||La[1]||La[2]||La[3]))return Ab;if(La[0]&&La[1]&&La[2]&&La[3])return ba&&(Ab=x(Bb,Ma,ub)||Ab),Ab;var ya=!1;[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(Aa){if(La[Aa[0]]&&La[Aa[1]]&&La[Aa[2]]&&!La[Aa[3]]){var Ka=Ma[Aa[0]],Ta=Ma[Aa[1]],bb=Ma[Aa[2]],cb=Ma[Aa[3]];ba?Ab=t(Bb,[Ka,Ta,bb],[ub[Aa[0]],ub[Aa[1]],ub[Aa[2]]])||Ab:(Aa=z(cb,Ka,wb,rb),Ta=z(cb,Ta,wb,rb),bb=z(cb,bb,wb,rb),Ab=t(null,[Aa,Ta,bb],[-1,-1,-1])||Ab);ya=!0}});if(ya)return Ab;[[0,1,2,3],[1,
2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(Aa){if(La[Aa[0]]&&La[Aa[1]]&&!La[Aa[2]]&&!La[Aa[3]]){var Ka=Ma[Aa[0]],Ta=Ma[Aa[1]],bb=Ma[Aa[2]],cb=Ma[Aa[3]],Eb=z(bb,Ka,wb,rb);bb=z(bb,Ta,wb,rb);var Pb=z(cb,Ta,wb,rb);cb=z(cb,Ka,wb,rb);ba?(Ab=t(Bb,[Ka,cb,Eb],[ub[Aa[0]],-1,-1])||Ab,Ab=t(Bb,[Ta,bb,Pb],[ub[Aa[1]],-1,-1])||Ab):Ab=w(null,[Eb,bb,Pb,cb],[-1,-1,-1,-1])||Ab;ya=!0}});if(ya)return Ab;[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(Aa){if(La[Aa[0]]&&!La[Aa[1]]&&!La[Aa[2]]&&
!La[Aa[3]]){var Ka=Ma[Aa[0]],Ta=Ma[Aa[2]],bb=Ma[Aa[3]],cb=z(Ma[Aa[1]],Ka,wb,rb);Ta=z(Ta,Ka,wb,rb);bb=z(bb,Ka,wb,rb);ba?(Ab=t(Bb,[Ka,cb,Ta],[ub[Aa[0]],-1,-1])||Ab,Ab=t(Bb,[Ka,Ta,bb],[ub[Aa[0]],-1,-1])||Ab,Ab=t(Bb,[Ka,bb,cb],[ub[Aa[0]],-1,-1])||Ab):Ab=t(null,[cb,Ta,bb],[-1,-1,-1])||Ab;ya=!0}});return Ab}function y(Bb,ub,wb,rb,Ab,Ma,La,ya,Aa,Ka,Ta){var bb=!1;Y&&(q(Bb,"A")&&(bb=v(null,[ub,wb,rb,Ma],Ka,Ta)||bb),q(Bb,"B")&&(bb=v(null,[wb,rb,Ab,Aa],Ka,Ta)||bb),q(Bb,"C")&&(bb=v(null,[wb,Ma,La,Aa],Ka,Ta)||
bb),q(Bb,"D")&&(bb=v(null,[rb,Ma,ya,Aa],Ka,Ta)||bb),q(Bb,"E")&&(bb=v(null,[wb,rb,Ma,Aa],Ka,Ta)||bb));ba&&(bb=v(Bb,[wb,rb,Ma,Aa],Ka,Ta)||bb);return bb}function F(Bb,ub,wb,rb,Ab,Ma,La,ya){return[!0===ya[0]?!0:C(Bb,D([ub,wb,rb]),[ub,wb,rb],Ma,La),!0===ya[1]?!0:C(Bb,D([rb,Ab,ub]),[rb,Ab,ub],Ma,La)]}function J(Bb,ub,wb,rb,Ab,Ma,La,ya,Aa){return ya?F(Bb,ub,wb,Ab,rb,Ma,La,Aa):F(Bb,wb,Ab,rb,ub,Ma,La,Aa)}function K(Bb,ub,wb,rb,Ab,Ma,La){var ya=!1,Aa=function(){ya=C(Bb,[bb,cb,Eb],[-1,-1,-1],Ab,Ma)||ya;ya=C(Bb,
[Eb,Pb,bb],[-1,-1,-1],Ab,Ma)||ya},Ka=La[0],Ta=La[1];La=La[2];if(Ka){var bb=f(D([ta(ub,wb-0,rb-0)])[0],D([ta(ub-1,wb-0,rb-0)])[0],Ka);var cb=f(D([ta(ub,wb-0,rb-1)])[0],D([ta(ub-1,wb-0,rb-1)])[0],Ka);var Eb=f(D([ta(ub,wb-1,rb-1)])[0],D([ta(ub-1,wb-1,rb-1)])[0],Ka);var Pb=f(D([ta(ub,wb-1,rb-0)])[0],D([ta(ub-1,wb-1,rb-0)])[0],Ka);Aa()}Ta&&(bb=f(D([ta(ub-0,wb,rb-0)])[0],D([ta(ub-0,wb-1,rb-0)])[0],Ta),cb=f(D([ta(ub-0,wb,rb-1)])[0],D([ta(ub-0,wb-1,rb-1)])[0],Ta),Eb=f(D([ta(ub-1,wb,rb-1)])[0],D([ta(ub-1,
wb-1,rb-1)])[0],Ta),Pb=f(D([ta(ub-1,wb,rb-0)])[0],D([ta(ub-1,wb-1,rb-0)])[0],Ta),Aa());La&&(bb=f(D([ta(ub-0,wb-0,rb)])[0],D([ta(ub-0,wb-0,rb-1)])[0],La),cb=f(D([ta(ub-0,wb-1,rb)])[0],D([ta(ub-0,wb-1,rb-1)])[0],La),Eb=f(D([ta(ub-1,wb-1,rb)])[0],D([ta(ub-1,wb-1,rb-1)])[0],La),Pb=f(D([ta(ub-1,wb-0,rb)])[0],D([ta(ub-1,wb-0,rb-1)])[0],La),Aa());return ya}function O(Bb,ub,wb,rb,Ab){for(var Ma=[],La=0,ya=0;ya<ub.length;ya++)for(var Aa=ub[ya],Ka=1;Ka<na;Ka++)for(var Ta=1;Ta<ka;Ta++)Ma.push(J(Bb,ta(Aa,Ta-
1,Ka-1),ta(Aa,Ta-1,Ka),ta(Aa,Ta,Ka-1),ta(Aa,Ta,Ka),wb,rb,(Aa+Ta+Ka)%2,Ab&&Ab[La]?Ab[La]:[])),La++;return Ma}function I(Bb,ub,wb,rb,Ab){for(var Ma=[],La=0,ya=0;ya<ub.length;ya++)for(var Aa=ub[ya],Ka=1;Ka<la;Ka++)for(var Ta=1;Ta<na;Ta++)Ma.push(J(Bb,ta(Ka-1,Aa,Ta-1),ta(Ka,Aa,Ta-1),ta(Ka-1,Aa,Ta),ta(Ka,Aa,Ta),wb,rb,(Ka+Aa+Ta)%2,Ab&&Ab[La]?Ab[La]:[])),La++;return Ma}function L(Bb,ub,wb,rb,Ab){for(var Ma=[],La=0,ya=0;ya<ub.length;ya++)for(var Aa=ub[ya],Ka=1;Ka<ka;Ka++)for(var Ta=1;Ta<la;Ta++)Ma.push(J(Bb,
ta(Ta-1,Ka-1,Aa),ta(Ta-1,Ka,Aa),ta(Ta,Ka-1,Aa),ta(Ta,Ka,Aa),wb,rb,(Ta+Ka+Aa)%2,Ab&&Ab[La]?Ab[La]:[])),La++;return Ma}function H(Bb,ub,wb){for(var rb=1;rb<na;rb++)for(var Ab=1;Ab<ka;Ab++)for(var Ma=1;Ma<la;Ma++){var La=Bb,ya=ta(Ma-1,Ab-1,rb-1),Aa=ta(Ma-1,Ab-1,rb),Ka=ta(Ma-1,Ab,rb-1),Ta=ta(Ma-1,Ab,rb),bb=ta(Ma,Ab-1,rb-1),cb=ta(Ma,Ab-1,rb),Eb=ta(Ma,Ab,rb-1),Pb=ta(Ma,Ab,rb),fc=ub,pb=wb,Db=La;(Ma+Ab+rb)%2?(Y&&"even"===La&&(Db=null),y(Db,ya,Aa,Ka,Ta,bb,cb,Eb,Pb,fc,pb)):(Y&&"odd"===La&&(Db=null),y(Db,Pb,
Eb,cb,bb,Ta,Ka,Aa,ya,fc,pb))}}function M(Bb,ub,wb){ba=!0;H(Bb,ub,wb);ba=!1}function Q(Bb,ub,wb){Y=!0;H(Bb,ub,wb);Y=!1}function Z(Bb,ub){for(var wb=[];Bb<ub;Bb++)wb.push(Bb);return wb}function ca(){for(var Bb=0;Bb<la;Bb++)for(var ub=0;ub<ka;ub++)for(var wb=0;wb<na;wb++){var rb=ta(Bb,ub,wb);e(c._x[rb],c._y[rb],c._z[rb],c._value[rb])}}c._meshI=[];c._meshJ=[];c._meshK=[];var W=c.surface.show,T=c.spaceframe.show,U=c.surface.fill,ha=c.spaceframe.fill,Y=!1,ba=!1,ja=0,ma,ia,oa=c._Xs,xa=c._Ys,ra=c._Zs,la=
oa.length,ka=xa.length,na=ra.length,qa=l.indexOf(c._gridFill.replace(/-/g,"").replace(/\+/g,"")),ta=function(Bb,ub,wb){switch(qa){case 5:return wb+na*ub+na*ka*Bb;case 4:return wb+na*Bb+na*la*ub;case 3:return ub+ka*wb+ka*na*Bb;case 2:return ub+ka*Bb+ka*la*wb;case 1:return Bb+la*wb+la*na*ub;default:return Bb+la*ub+la*ka*wb}},za=c._minValues,Ia=c._maxValues,Xa=c._vMin,$a=c._vMax,gb,sb,jb,vb,qb;(function(){d();ca();T&&ha&&(qb=ha,M(null,Xa,$a));if(W&&U){qb=U;for(var Bb=c.surface.pattern,ub=c.surface.count,
wb=0;wb<ub;wb++){var rb=1===ub?.5:wb/(ub-1);rb=(1-rb)*Xa+rb*$a;rb=Math.abs(rb-za)>Math.abs(rb-Ia)?[za,rb]:[rb,Ia];Q(Bb,rb[0],rb[1])}}var Ab=[[Math.min(Xa,Ia),Math.max(Xa,Ia)],[Math.min(za,$a),Math.max(za,$a)]];["x","y","z"].forEach(function(Ma){for(var La=[],ya=0;ya<Ab.length;ya++){var Aa=0,Ka=Ab[ya][0],Ta=Ab[ya][1],bb=c.slices[Ma];if(bb.show&&bb.fill){qb=bb.fill;var cb=[],Eb=[],Pb=[];if(bb.locations.length)for(var fc=0;fc<bb.locations.length;fc++){var pb=r(bb.locations[fc],"x"===Ma?oa:"y"===Ma?xa:
ra);0===pb.distRatio?cb.push(pb.id):0<pb.id&&(Eb.push(pb.id),"x"===Ma?Pb.push([pb.distRatio,0,0]):"y"===Ma?Pb.push([0,pb.distRatio,0]):Pb.push([0,0,pb.distRatio]))}else cb="x"===Ma?Z(1,la-1):"y"===Ma?Z(1,ka-1):Z(1,na-1);if(0<Eb.length){if("x"===Ma){bb=Aa;fc=Ka;pb=Ta;for(var Db=La[Aa],Rb=[],xc=0,Ic=0;Ic<Eb.length;Ic++)for(var Ja=Eb[Ic],Pa=1;Pa<na;Pa++)for(var db=1;db<ka;db++)Rb.push(K(null,Ja,db,Pa,fc,pb,Pb[Ic],Db&&Db[xc]?Db[xc]:[])),xc++;La[bb]=Rb}else if("y"===Ma){bb=Aa;fc=Ka;pb=Ta;Db=La[Aa];Rb=
[];for(Ic=xc=0;Ic<Eb.length;Ic++)for(Ja=Eb[Ic],Pa=1;Pa<la;Pa++)for(db=1;db<na;db++)Rb.push(K(null,Pa,Ja,db,fc,pb,Pb[Ic],Db&&Db[xc]?Db[xc]:[])),xc++;La[bb]=Rb}else{bb=Aa;fc=Ka;pb=Ta;Db=La[Aa];Rb=[];for(Ic=xc=0;Ic<Eb.length;Ic++)for(Ja=Eb[Ic],Pa=1;Pa<ka;Pa++)for(db=1;db<la;db++)Rb.push(K(null,db,Pa,Ja,fc,pb,Pb[Ic],Db&&Db[xc]?Db[xc]:[])),xc++;La[bb]=Rb}Aa++}0<cb.length&&(La[Aa]="x"===Ma?O(null,cb,Ka,Ta,La[Aa]):"y"===Ma?I(null,cb,Ka,Ta,La[Aa]):L(null,cb,Ka,Ta,La[Aa]),Aa++)}cb=c.caps[Ma];cb.show&&cb.fill&&
(qb=cb.fill,La[Aa]="x"===Ma?O(null,[0,la-1],Ka,Ta,La[Aa]):"y"===Ma?I(null,[0,ka-1],Ka,Ta,La[Aa]):L(null,[0,na-1],Ka,Ta,La[Aa]))}});0===ja&&d();c._meshX=gb;c._meshY=sb;c._meshZ=jb;c._meshIntensity=vb;c._Xs=oa;c._Ys=xa;c._Zs=ra})();return c}var k=b("gl-mesh3d"),m=b("../../lib/gl_format_color").parseColorScale,a=b("../../lib/str2rgbarray"),g=b("../../components/colorscale").extractOpts,h=b("../../plots/gl3d/zip3"),r=function(c,d){for(var e=d.length-1;0<e;e--){var f=Math.min(d[e],d[e-1]),q=Math.max(d[e],
d[e-1]);if(q>f&&f<c&&c<=q)return{id:e,distRatio:(q-c)/(q-f)}}return{id:0,distRatio:0}};b=p.prototype;b.handlePick=function(c){if(c.object===this.mesh){var d=c.data.index,e=this.data._meshY[d],f=this.data._meshZ[d],q=this.data._Ys.length,t=this.data._Zs.length;d=r(this.data._meshX[d],this.data._Xs).id;e=r(e,this.data._Ys).id;f=r(f,this.data._Zs).id;q=c.index=f+t*e+t*q*d;c.traceCoordinate=[this.data._meshX[q],this.data._meshY[q],this.data._meshZ[q],this.data._value[q]];t=this.data.hovertext||this.data.text;
Array.isArray(t)&&void 0!==t[q]?c.textLabel=t[q]:t&&(c.textLabel=t);return!0}};b.update=function(c){function d(q,t,w,x){return t.map(function(z){return q.d2l(z,0,x)*w})}var e=this.scene,f=e.fullSceneLayout;this.data=n(c);e=h(d(f.xaxis,c._meshX,e.dataScale[0],c.xcalendar),d(f.yaxis,c._meshY,e.dataScale[1],c.ycalendar),d(f.zaxis,c._meshZ,e.dataScale[2],c.zcalendar));f=h(c._meshI,c._meshJ,c._meshK);e={positions:e,cells:f,lightPosition:[c.lightposition.x,c.lightposition.y,c.lightposition.z],ambient:c.lighting.ambient,
diffuse:c.lighting.diffuse,specular:c.lighting.specular,roughness:c.lighting.roughness,fresnel:c.lighting.fresnel,vertexNormalsEpsilon:c.lighting.vertexnormalsepsilon,faceNormalsEpsilon:c.lighting.facenormalsepsilon,opacity:c.opacity,contourEnable:c.contour.show,contourColor:a(c.contour.color).slice(0,3),contourWidth:c.contour.width,useFacetNormals:c.flatshading};f=g(c);e.vertexIntensity=c._meshIntensity;e.vertexIntensityBounds=[f.min,f.max];e.colormap=m(c);this.mesh.update(e)};b.dispose=function(){this.scene.glplot.remove(this.mesh);
this.mesh.dispose()};var l="xyz xzy yxz yzx zxy zyx".split(" ");N.exports={findNearestOnAxis:r,generateIsoMeshes:n,createIsosurfaceTrace:function(c,d){var e=k({gl:c.glplot.gl}),f=new p(c,e,d.uid);e._trace=f;f.update(d);c.glplot.add(e);return f}}},{"../../components/colorscale":678,"../../lib/gl_format_color":799,"../../lib/str2rgbarray":828,"../../plots/gl3d/zip3":907,"gl-mesh3d":315}],1157:[function(b,N,G){function p(g,h,r,l,c){r=c("isomin");var d=c("isomax");void 0!==d&&null!==d&&void 0!==r&&null!==
r&&r>d&&(h.isomin=null,h.isomax=null);r=c("x");d=c("y");var e=c("z"),f=c("value");r&&r.length&&d&&d.length&&e&&e.length&&f&&f.length?(k.getComponentMethod("calendars","handleTraceDefaults")(g,h,["x","y","z"],l),c("valuehoverformat"),["x","y","z"].forEach(function(q){c(q+"hoverformat");var t="caps."+q;c(t+".show")&&c(t+".fill");q="slices."+q;c(q+".show")&&(c(q+".fill"),c(q+".locations"))}),c("spaceframe.show")&&c("spaceframe.fill"),c("surface.show")&&(c("surface.count"),c("surface.fill"),c("surface.pattern")),
c("contour.show")&&(c("contour.color"),c("contour.width")),"text hovertext hovertemplate lighting.ambient lighting.diffuse lighting.specular lighting.roughness lighting.fresnel lighting.vertexnormalsepsilon lighting.facenormalsepsilon lightposition.x lightposition.y lightposition.z flatshading opacity".split(" ").forEach(function(q){c(q)}),a(g,h,l,c,{prefix:"",cLetter:"c"}),h._length=null):h.visible=!1}var n=b("../../lib"),k=b("../../registry"),m=b("./attributes"),a=b("../../components/colorscale/defaults");
N.exports={supplyDefaults:function(g,h,r,l){p(g,h,r,l,function(c,d){return n.coerce(g,h,m,c,d)})},supplyIsoDefaults:p}},{"../../components/colorscale/defaults":676,"../../lib":803,"../../registry":931,"./attributes":1154}],1158:[function(b,N,G){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults").supplyDefaults,calc:b("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:b("./convert").createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:b("../../plots/gl3d"),categories:["gl3d",
"showLegend"],meta:{}}},{"../../plots/gl3d":896,"./attributes":1154,"./calc":1155,"./convert":1156,"./defaults":1157}],1159:[function(b,N,G){G=b("../../components/colorscale/attributes");var p=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat,n=b("../../plots/template_attributes").hovertemplateAttrs,k=b("../surface/attributes"),m=b("../../plots/attributes");b=b("../../lib/extend").extendFlat;N.exports=b({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",
editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:n({editType:"calc"}),xhoverformat:p("x"),yhoverformat:p("y"),zhoverformat:p("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},
alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},G("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:k.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},
contour:{show:b({},k.contours.x.show,{}),color:k.contours.x.color,width:k.contours.x.width,editType:"calc"},lightposition:{x:b({},k.lightposition.x,{dflt:1E5}),y:b({},k.lightposition.y,{dflt:1E5}),z:b({},k.lightposition.z,{dflt:0}),editType:"calc"},lighting:b({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1E-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1E-6,editType:"calc"},editType:"calc"},k.lighting),hoverinfo:b({},m.hoverinfo,{editType:"calc"}),showlegend:b({},
m.showlegend,{dflt:!1})})},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plots/attributes":850,"../../plots/cartesian/axis_format_attributes":857,"../../plots/template_attributes":926,"../surface/attributes":1342}],1160:[function(b,N,G){var p=b("../../components/colorscale/calc");N.exports=function(n,k){k.intensity&&p(n,k,{vals:k.intensity,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":674}],1161:[function(b,N,G){function p(q,t,w){this.scene=q;this.uid=
w;this.mesh=t;this.name="";this.color="#fff";this.data=null;this.showContour=!1}function n(q){for(var t=[],w=q.length,x=0;x<w;x++)t[x]=d(q[x]);return t}function k(q,t,w,x){for(var z=[],B=t.length,A=0;A<B;A++)z[A]=q.d2l(t[A],0,x)*w;return z}function m(q){for(var t=[],w=q.length,x=0;x<w;x++)t[x]=Math.round(q[x]);return t}function a(q,t){for(var w=q.length,x=0;x<w;x++)if(-.5>=q[x]||q[x]>=t-.5)return!1;return!0}var g=b("gl-mesh3d"),h=b("delaunay-triangulate"),r=b("alpha-shape"),l=b("convex-hull"),c=b("../../lib/gl_format_color").parseColorScale,
d=b("../../lib/str2rgbarray"),e=b("../../components/colorscale").extractOpts,f=b("../../plots/gl3d/zip3");b=p.prototype;b.handlePick=function(q){if(q.object===this.mesh){var t=q.index=q.data.index;q.traceCoordinate=q.data._cellCenter?q.data.dataCoordinate:[this.data.x[t],this.data.y[t],this.data.z[t]];var w=this.data.hovertext||this.data.text;Array.isArray(w)&&void 0!==w[t]?q.textLabel=w[t]:w&&(q.textLabel=w);return!0}};b.update=function(q){var t=this.scene,w=t.fullSceneLayout;this.data=q;var x=q.x.length;
t=f(k(w.xaxis,q.x,t.dataScale[0],q.xcalendar),k(w.yaxis,q.y,t.dataScale[1],q.ycalendar),k(w.zaxis,q.z,t.dataScale[2],q.zcalendar));if(q.i&&q.j&&q.k){if(q.i.length!==q.j.length||q.j.length!==q.k.length||!a(q.i,x)||!a(q.j,x)||!a(q.k,x))return;x=f(m(q.i),m(q.j),m(q.k))}else if(0===q.alphahull)x=l(t);else if(0<q.alphahull)x=r(q.alphahull,t);else{x=["x","y","z"].indexOf(q.delaunayaxis);w=[];for(var z=t.length,B=0;B<z;B++)w[B]=[t[B][(x+1)%3],t[B][(x+2)%3]];x=h(w)}t={positions:t,cells:x,lightPosition:[q.lightposition.x,
q.lightposition.y,q.lightposition.z],ambient:q.lighting.ambient,diffuse:q.lighting.diffuse,specular:q.lighting.specular,roughness:q.lighting.roughness,fresnel:q.lighting.fresnel,vertexNormalsEpsilon:q.lighting.vertexnormalsepsilon,faceNormalsEpsilon:q.lighting.facenormalsepsilon,opacity:q.opacity,contourEnable:q.contour.show,contourColor:d(q.contour.color).slice(0,3),contourWidth:q.contour.width,useFacetNormals:q.flatshading};q.intensity?(x=e(q),this.color="#fff",w=q.intensitymode,t[w+"Intensity"]=
q.intensity,t[w+"IntensityBounds"]=[x.min,x.max],t.colormap=c(q)):q.vertexcolor?(this.color=q.vertexcolor[0],t.vertexColors=n(q.vertexcolor)):q.facecolor?(this.color=q.facecolor[0],t.cellColors=n(q.facecolor)):(this.color=q.color,t.meshColor=d(q.color));this.mesh.update(t)};b.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};N.exports=function(q,t){var w=g({gl:q.glplot.gl}),x=new p(q,w,t.uid);w._trace=x;x.update(t);q.glplot.add(w);return x}},{"../../components/colorscale":678,
"../../lib/gl_format_color":799,"../../lib/str2rgbarray":828,"../../plots/gl3d/zip3":907,"alpha-shape":75,"convex-hull":141,"delaunay-triangulate":180,"gl-mesh3d":315}],1162:[function(b,N,G){var p=b("../../registry"),n=b("../../lib"),k=b("../../components/colorscale/defaults"),m=b("./attributes");N.exports=function(a,g,h,r){function l(d,e){return n.coerce(a,g,m,d,e)}function c(d){var e=d.map(function(f){return(f=l(f))&&n.isArrayOrTypedArray(f)?f:null});return e.every(function(f){return f&&f.length===
e[0].length})&&e}c(["x","y","z"])?(c(["i","j","k"]),(!g.i||g.j&&g.k)&&(!g.j||g.k&&g.i)&&(!g.k||g.i&&g.j)?(p.getComponentMethod("calendars","handleTraceDefaults")(a,g,["x","y","z"],r),"lighting.ambient lighting.diffuse lighting.specular lighting.roughness lighting.fresnel lighting.vertexnormalsepsilon lighting.facenormalsepsilon lightposition.x lightposition.y lightposition.z flatshading alphahull delaunayaxis opacity".split(" ").forEach(function(d){l(d)}),l("contour.show")&&(l("contour.color"),l("contour.width")),
"intensity"in a?(l("intensity"),l("intensitymode"),k(a,g,r,l,{prefix:"",cLetter:"c"})):(g.showscale=!1,"facecolor"in a?l("facecolor"):"vertexcolor"in a?l("vertexcolor"):l("color",h)),l("text"),l("hovertext"),l("hovertemplate"),l("xhoverformat"),l("yhoverformat"),l("zhoverformat"),g._length=null):g.visible=!1):g.visible=!1}},{"../../components/colorscale/defaults":676,"../../lib":803,"../../registry":931,"./attributes":1159}],1163:[function(b,N,G){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),
calc:b("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:b("./convert"),moduleType:"trace",name:"mesh3d",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":896,"./attributes":1159,"./calc":1160,"./convert":1161,"./defaults":1162}],1164:[function(b,N,G){function p(r){return{line:{color:n({},h.color,{dflt:r}),width:h.width,dash:m,editType:"style"},editType:"style"}}var n=b("../../lib").extendFlat;G=b("../scatter/attributes");var k=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat,
m=b("../../components/drawing/attributes").dash,a=b("../../components/fx/attributes"),g=b("../../constants/delta.js");b=g.INCREASING.COLOR;g=g.DECREASING.COLOR;var h=G.line;N.exports={xperiod:G.xperiod,xperiod0:G.xperiod0,xperiodalignment:G.xperiodalignment,xhoverformat:k("x"),yhoverformat:k("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",
editType:"calc"},line:{width:n({},h.width,{}),dash:n({},m,{}),editType:"style"},increasing:p(b),decreasing:p(g),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:n({},a.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},{"../../components/drawing/attributes":687,"../../components/fx/attributes":697,"../../constants/delta.js":773,"../../lib":803,
"../../plots/cartesian/axis_format_attributes":857,"../scatter/attributes":1218}],1165:[function(b,N,G){function p(r,l,c,d){return{o:r,h:l,l:c,c:d}}function n(r,l,c,d,e,f){for(var q=e.makeCalcdata(l,"open"),t=e.makeCalcdata(l,"high"),w=e.makeCalcdata(l,"low"),x=e.makeCalcdata(l,"close"),z=Array.isArray(l.text),B=Array.isArray(l.hovertext),A=!0,D=null,C=!!l.xperiodalignment,v=[],y=0;y<d.length;y++){var F=d[y],J=q[y],K=t[y],O=w[y],I=x[y];if(F!==h&&J!==h&&K!==h&&O!==h&&I!==h){I===J?null!==D&&I!==D&&
(A=I>D):A=I>J;D=I;var L=f(J,K,O,I);L.pos=F;L.yc=(J+I)/2;L.i=y;L.dir=A?"increasing":"decreasing";L.x=L.pos;L.y=[O,K];C&&(L.orig_p=c[y]);z&&(L.tx=l.text[y]);B&&(L.htx=l.hovertext[y]);v.push(L)}else v.push({pos:F,empty:!0})}l._extremes[e._id]=a.findExtremes(e,k.concat(w,t),{padded:!0});v.length&&(v[0].t={labels:{open:m(r,"open:")+" ",high:m(r,"high:")+" ",low:m(r,"low:")+" ",close:m(r,"close:")+" "}});return v}var k=b("../../lib"),m=k._,a=b("../../plots/cartesian/axes"),g=b("../../plots/cartesian/align_period"),
h=b("../../constants/numerical").BADNUM;N.exports={calc:function(r,l){var c=a.getFromId(r,l.xaxis),d=a.getFromId(r,l.yaxis);var e=l._minDiff;if(!e){var f=r._fullData,q=[];e=Infinity;var t;for(t=0;t<f.length;t++){var w=f[t];if("ohlc"===w.type&&!0===w.visible&&w.xaxis===c._id){q.push(w);var x=c.makeCalcdata(w,"x");w._origX=x;x=g(l,c,"x",x).vals;w._xcalc=x;(w=k.distinctVals(x).minDiff)&&isFinite(w)&&(e=Math.min(e,w))}}Infinity===e&&(e=1);for(t=0;t<q.length;t++)q[t]._minDiff=e}e*=l.tickwidth;f=l._minDiff;
l._minDiff=null;t=l._origX;l._origX=null;q=l._xcalc;l._xcalc=null;r=n(r,l,t,q,d,p);l._extremes[c._id]=a.findExtremes(c,q,{vpad:f/2});return r.length?(k.extendFlat(r[0].t,{wHover:f/2,tickLen:e}),r):[{t:{empty:!0}}]},calcCommon:n}},{"../../constants/numerical":779,"../../lib":803,"../../plots/cartesian/align_period":851,"../../plots/cartesian/axes":854}],1166:[function(b,N,G){function p(g,h,r,l){r(l+".line.color");r(l+".line.width",h.line.width);r(l+".line.dash",h.line.dash)}var n=b("../../lib"),k=
b("./ohlc_defaults"),m=b("../scatter/period_defaults"),a=b("./attributes");N.exports=function(g,h,r,l){function c(d,e){return n.coerce(g,h,a,d,e)}k(g,h,c,l)?(m(g,h,l,c,{x:!0}),c("xhoverformat"),c("yhoverformat"),c("line.width"),c("line.dash"),p(g,h,c,"increasing"),p(g,h,c,"decreasing"),c("text"),c("hovertext"),c("tickwidth"),l._requestRangeslider[h.xaxis]=!0):h.visible=!1}},{"../../lib":803,"../scatter/period_defaults":1238,"./attributes":1164,"./ohlc_defaults":1169}],1167:[function(b,N,G){function p(c,
d,e,f){function q(K){K=K.pos+y-d;return g.inbox(K-F,K+F,J)}function t(K){var O=K[C];K=K[v];return O===K||g.inbox(O-e,K-e,J)}function w(K){return(q(K)+t(K))/2}var x=c.cd,z=c.xa,B=x[0].trace,A=x[0].t,D=B.type,C="ohlc"===D?"l":"min",v="ohlc"===D?"h":"max",y=A.bPos||0;D=A.bdPos||A.tickLen;var F=A.wHover;A=Math.min(1,D/Math.abs(z.r2c(z.range[1])-z.r2c(z.range[0])));var J=c.maxHoverDistance-A;A=c.maxSpikeDistance-A;f=g.getDistanceFunction(f,q,t,w);g.getClosest(x,f,c);if(!1===c.index)return null;x=x[c.index];
if(x.empty)return null;B=B[x.dir];f=B.line.color;h.opacity(f)&&B.line.width?c.color=f:c.color=B.fillcolor;c.x0=z.c2p(x.pos+y-D,!0);c.x1=z.c2p(x.pos+y+D,!0);c.xLabelVal=void 0!==x.orig_p?x.orig_p:x.pos;c.spikeDistance=w(x)*A/J;c.xSpike=z.c2p(x.pos,!0);return c}function n(c,d,e,f){var q=c.cd,t=c.ya,w=q[0].trace,x=q[0].t,z=[];c=p(c,d,e,f);if(!c)return[];q=q[c.index].hi||w.hoverinfo;d=q.split("+");if("all"!==q&&-1===d.indexOf("y"))return[];q=["high","open","close","low"];d={};for(e=0;e<q.length;e++){f=
q[e];var B=w[f][c.index],A=t.c2p(B,!0);if(B in d){var D=d[B];D.yLabel+="\x3cbr\x3e"+x.labels[f]+m.hoverLabelText(t,B,w.yhoverformat)}else D=a.extendFlat({},c),D.y0=D.y1=A,D.yLabelVal=B,D.yLabel=x.labels[f]+m.hoverLabelText(t,B,w.yhoverformat),D.name="",z.push(D),d[B]=D}return z}function k(c,d,e,f){function q(D){return z.labels[D]+m.hoverLabelText(w,x[D][B],x.yhoverformat)}var t=c.cd,w=c.ya,x=t[0].trace,z=t[0].t;c=p(c,d,e,f);if(!c)return[];t=t[c.index];var B=c.index=t.i;d=t.dir;f=t.hi||x.hoverinfo;
e=f.split("+");var A="all"===f;f=A||-1!==e.indexOf("y");e=A||-1!==e.indexOf("text");d=f?[q("open"),q("high"),q("low"),q("close")+"  "+l[d]]:[];e&&r(t,x,d);c.extraText=d.join("\x3cbr\x3e");c.y0=c.y1=w.c2p(t.yc,!0);return[c]}var m=b("../../plots/cartesian/axes"),a=b("../../lib"),g=b("../../components/fx"),h=b("../../components/color"),r=b("../../lib").fillText;b=b("../../constants/delta.js");var l={increasing:b.INCREASING.SYMBOL,decreasing:b.DECREASING.SYMBOL};N.exports={hoverPoints:function(c,d,e,
f){return c.cd[0].trace.hoverlabel.split?n(c,d,e,f):k(c,d,e,f)},hoverSplit:n,hoverOnPoints:k}},{"../../components/color":666,"../../components/fx":706,"../../constants/delta.js":773,"../../lib":803,"../../plots/cartesian/axes":854}],1168:[function(b,N,G){N.exports={moduleType:"trace",name:"ohlc",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","showLegend"],meta:{},attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc").calc,plot:b("./plot"),style:b("./style"),
hoverPoints:b("./hover").hoverPoints,selectPoints:b("./select")}},{"../../plots/cartesian":868,"./attributes":1164,"./calc":1165,"./defaults":1166,"./hover":1167,"./plot":1170,"./select":1171,"./style":1172}],1169:[function(b,N,G){var p=b("../../registry"),n=b("../../lib");N.exports=function(k,m,a,g){var h=a("x"),r=a("open"),l=a("high"),c=a("low"),d=a("close");a("hoverlabel.split");p.getComponentMethod("calendars","handleTraceDefaults")(k,m,["x"],g);if(r&&l&&c&&d)return k=Math.min(r.length,l.length,
c.length,d.length),h&&(k=Math.min(k,n.minRowLength(h))),m._length=k}},{"../../lib":803,"../../registry":931}],1170:[function(b,N,G){var p=b("@plotly/d3"),n=b("../../lib");N.exports=function(k,m,a,g){var h=m.yaxis,r=m.xaxis,l=!!r.rangebreaks;n.makeTraceGroups(g,a,"trace ohlc").each(function(c){var d=p.select(this);c=c[0];var e=c.t;if(!0!==c.trace.visible||e.empty)d.remove();else{var f=e.tickLen;d=d.selectAll("path").data(n.identity);d.enter().append("path");d.exit().remove();d.attr("d",function(q){if(q.empty)return"M0,0Z";
var t=r.c2p(q.pos-f,!0),w=r.c2p(q.pos+f,!0),x=l?(t+w)/2:r.c2p(q.pos,!0),z=h.c2p(q.o,!0),B=h.c2p(q.h,!0),A=h.c2p(q.l,!0);q=h.c2p(q.c,!0);return"M"+t+","+z+"H"+x+"M"+x+","+B+"V"+A+"M"+w+","+q+"H"+x})}})}},{"../../lib":803,"@plotly/d3":58}],1171:[function(b,N,G){N.exports=function(p,n){var k=p.cd,m=p.xaxis,a=p.yaxis,g=[],h,r=k[0].t.bPos||0;if(!1===n)for(h=0;h<k.length;h++)k[h].selected=0;else for(h=0;h<k.length;h++){var l=k[h];n.contains([m.c2p(l.pos+r),a.c2p(l.yc)],null,l.i,p)?(g.push({pointNumber:l.i,
x:m.c2d(l.pos),y:a.c2d(l.yc)}),l.selected=1):l.selected=0}return g}},{}],1172:[function(b,N,G){var p=b("@plotly/d3"),n=b("../../components/drawing"),k=b("../../components/color");N.exports=function(m,a,g){m=g?g:p.select(m).selectAll("g.ohlclayer").selectAll("g.trace");m.style("opacity",function(h){return h[0].trace.opacity});m.each(function(h){var r=h[0].trace;p.select(this).selectAll("path").each(function(l){if(!l.empty){var c=r[l.dir].line;p.select(this).style("fill","none").call(k.stroke,c.color).call(n.dashLine,
c.dash,c.width).style("opacity",r.selectedpoints&&!l.selected?.3:1)}})})}},{"../../components/color":666,"../../components/drawing":688,"@plotly/d3":58}],1173:[function(b,N,G){G=b("../../lib/extend").extendFlat;var p=b("../../plots/attributes"),n=b("../../plots/font_attributes"),k=b("../../components/colorscale/attributes"),m=b("../../plots/template_attributes").hovertemplateAttrs;b=b("../../plots/domain").attributes;k=G({editType:"calc"},k("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",
values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:m({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});N.exports={domain:b({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:G({},p.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:m({editType:"plot",arrayOk:!1},{keys:"count probability category categorycount colorcount bandcolorcount".split(" ")}),
arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:n({editType:"calc"}),tickfont:n({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending",
"array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:k,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,
showlegend:void 0}},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plots/attributes":850,"../../plots/domain":882,"../../plots/font_attributes":883,"../../plots/template_attributes":926}],1174:[function(b,N,G){var p=b("../../plots/get_data").getModuleCalcData,n=b("./plot");G.name="parcats";G.plot=function(k,m,a,g){m=p(k.calcdata,"parcats");m.length&&n(k,m[0],a,g)};G.clean=function(k,m,a,g){k=g._has&&g._has("parcats");m=m._has&&m._has("parcats");k&&!m&&g._paperdiv.selectAll(".parcats").remove()}},
{"../../plots/get_data":891,"./plot":1179}],1175:[function(b,N,G){function p(q,t,w){var x=q.map(function(z){return z.categories.length}).reduce(function(z,B){return Math.max(z,B)});return{dimensions:q,paths:t,trace:void 0,maxCats:x,count:w}}function n(q,t,w){q.valueInds.push(t);q.count+=w}function k(q,t,w){q.valueInds.push(t);q.count+=w}function m(q,t){t=void 0===t||null===t?[]:t.map(function(C){return C});var w={},x={},z=[];t.forEach(function(C,v){w[C]=0;x[C]=v});for(var B=0;B<q.length;B++){var A=
q[B];if(void 0===w[A]){w[A]=1;var D=t.push(A)-1;x[A]=D}else w[A]++,D=x[A];z.push(D)}q=t.map(function(C){return w[C]});return{uniqueValues:t,uniqueCounts:q,inds:z}}function a(q){var t=q.map(function(w){return w.displayindex});if(g(t))for(t=0;t<q.length;t++)q[t]._displayindex=q[t].displayindex;else for(t=0;t<q.length;t++)q[t]._displayindex=t}function g(q){for(var t=Array(q.length),w=0;w<q.length;w++){if(0>q[w]||q[w]>=q.length||void 0!==t[q[w]])return!1;t[q[w]]=!0}return!0}var h=b("../../lib/gup").wrap,
r=b("../../components/colorscale/helpers").hasColorscale,l=b("../../components/colorscale/calc"),c=b("../../lib/filter_unique.js"),d=b("../../components/drawing"),e=b("../../lib"),f=b("fast-isnumeric");N.exports=function(q,t){function w(L){if(e.isArrayOrTypedArray(A.color))var H=L=A.color[L%A.color.length];else L=A.color;return{color:D(L),rawColor:H}}var x=e.filterVisible(t.dimensions);if(0===x.length)return[];var z=x.map(function(L){if("trace"===L.categoryorder)var H=null;else if("array"===L.categoryorder)H=
L.categoryarray;else{H=c(L.values);for(var M=!0,Q=0;Q<H.length;Q++)if(!f(H[Q])){M=!1;break}H.sort(M?e.sorterAsc:void 0);"category descending"===L.categoryorder&&(H=H.reverse())}return m(L.values,H)});var B=e.isArrayOrTypedArray(t.counts)?t.counts:[t.counts];a(x);x.forEach(function(L,H){H=z[H];L._categoryarray=H.uniqueValues;L._ticktext=null===L.ticktext||void 0===L.ticktext?[]:L.ticktext.slice();for(var M=L._ticktext.length;M<H.uniqueValues.length;M++)L._ticktext.push(H.uniqueValues[M])});var A=t.line;
if(A){r(t,"line")&&l(q,t,{vals:t.line.color,containerStr:"line",cLetter:"c"});var D=d.tryColorscale(A)}else D=e.identity;var C=x[0].values.length,v={},y=z.map(function(L){return L.inds});var F=0;var J,K;for(J=0;J<C;J++){var O=[];for(K=0;K<y.length;K++)O.push(y[K][J]);q=B[J%B.length];F+=q;K=w(J);var I=O+"-"+K.rawColor;void 0===v[I]&&(v[I]={categoryInds:O,color:K.color,rawColor:K.rawColor,valueInds:[],count:0});k(v[I],J,q)}x=x.map(function(L,H){return{dimensionInd:H,containerInd:L._index,displayInd:L._displayindex,
dimensionLabel:L.label,count:F,categories:[],dragX:null}});for(J=0;J<C;J++)for(q=B[J%B.length],K=0;K<x.length;K++)y=x[K].containerInd,O=z[K].inds[J],I=x[K].categories,void 0===I[O]&&(I[O]={dimensionInd:K,categoryInd:O,categoryValue:t.dimensions[y]._categoryarray[O],displayInd:O,categoryLabel:t.dimensions[y]._ticktext[O],valueInds:[],count:0,dragY:null}),n(I[O],J,q);return h(p(x,v,F))}},{"../../components/colorscale/calc":674,"../../components/colorscale/helpers":677,"../../components/drawing":688,
"../../lib":803,"../../lib/filter_unique.js":794,"../../lib/gup":800,"fast-isnumeric":249}],1176:[function(b,N,G){function p(c,d,e,f,q){q("line.shape");q("line.hovertemplate");var t=q("line.color",f.colorway[0]);if(m(c,"line")&&k.isArrayOrTypedArray(t)){if(t.length)return q("line.colorscale"),a(c,d,f,q,{prefix:"line.",cLetter:"c"}),t.length;d.line.color=e}return Infinity}function n(c,d){function e(w,x){return k.coerce(c,d,r.dimensions,w,x)}var f=e("values"),q=e("visible");f&&f.length||(q=d.visible=
!1);if(q){e("label");e("displayindex",d._index);f=c.categoryarray;f=Array.isArray(f)&&0<f.length;var t;f&&(t="array");t=e("categoryorder",t);"array"===t?(e("categoryarray"),e("ticktext")):(delete c.categoryarray,delete c.ticktext);f||"array"!==t||(d.categoryorder="trace")}}var k=b("../../lib"),m=b("../../components/colorscale/helpers").hasColorscale,a=b("../../components/colorscale/defaults"),g=b("../../plots/domain").defaults,h=b("../../plots/array_container_defaults"),r=b("./attributes"),l=b("../parcoords/merge_length");
N.exports=function(c,d,e,f){function q(w,x){return k.coerce(c,d,r,w,x)}var t=h(c,d,{name:"dimensions",handleItemDefaults:n});e=p(c,d,e,f,q);g(d,f,q);Array.isArray(t)&&t.length||(d.visible=!1);l(d,t,"values",e);q("hoveron");q("hovertemplate");q("arrangement");q("bundlecolors");q("sortpaths");q("counts");k.coerceFont(q,"labelfont",{family:f.font.family,size:Math.round(f.font.size),color:f.font.color});k.coerceFont(q,"tickfont",{family:f.font.family,size:Math.round(f.font.size/1.2),color:f.font.color})}},
{"../../components/colorscale/defaults":676,"../../components/colorscale/helpers":677,"../../lib":803,"../../plots/array_container_defaults":849,"../../plots/domain":882,"../parcoords/merge_length":1189,"./attributes":1173}],1177:[function(b,N,G){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:b("./base_plot"),categories:["noOpacity"],meta:{}}},
{"./attributes":1173,"./base_plot":1174,"./calc":1175,"./defaults":1176,"./plot":1179}],1178:[function(b,N,G){function p(ia,oa,xa,ra){ia=ia.map(L.bind(0,oa,xa));ra=ra.selectAll("g.parcatslayer").data([null]);ra.enter().append("g").attr("class","parcatslayer").style("pointer-events","all");ra=ra.selectAll("g.trace.parcats").data(ia,n);ia=ra.enter().append("g").attr("class","trace parcats");ra.attr("transform",function(qa){return Y(qa.x,qa.y)});ia.append("g").attr("class","paths");xa=ra.select("g.paths").selectAll("path.path").data(function(qa){return qa.paths},
n);xa.attr("fill",function(qa){return qa.model.color});var la=xa.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(qa){return qa.model.color}).attr("fill-opacity",0);c(la);xa.attr("d",function(qa){return qa.svgD});la.empty()||xa.sort(m);xa.exit().remove();xa.on("mouseover",a).on("mouseout",g).on("click",l);ia.append("g").attr("class","dimensions");ia=ra.select("g.dimensions").selectAll("g.dimension").data(function(qa){return qa.dimensions},n);ia.enter().append("g").attr("class",
"dimension");ia.attr("transform",function(qa){return Y(qa.x,0)});ia.exit().remove();xa=ia.selectAll("g.category").data(function(qa){return qa.categories},n);la=xa.enter().append("g").attr("class","category");xa.attr("transform",function(qa){return Y(0,qa.y)});la.append("rect").attr("class","catrect").attr("pointer-events","none");xa.select("rect.catrect").attr("fill","none").attr("width",function(qa){return qa.width}).attr("height",function(qa){return qa.height});e(la);var ka=xa.selectAll("rect.bandrect").data(function(qa){return qa.bands},
n);ka.each(function(){ha.raiseToTop(this)});ka.attr("fill",function(qa){return qa.color});var na=ka.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(qa){return qa.color}).attr("fill-opacity",0);ka.attr("fill",function(qa){return qa.color}).attr("width",function(qa){return qa.width}).attr("height",function(qa){return qa.height}).attr("y",function(qa){return qa.y}).attr("cursor",function(qa){return"fixed"===qa.parcatsViewModel.arrangement?"default":"perpendicular"===
qa.parcatsViewModel.arrangement?"ns-resize":"move"});f(na);ka.exit().remove();la.append("text").attr("class","catlabel").attr("pointer-events","none");ka=oa._fullLayout.paper_bgcolor;xa.select("text.catlabel").attr("text-anchor",function(qa){return k(qa)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",ma.makeTextShadow(ka)).style("fill","rgb(0, 0, 0)").attr("x",function(qa){return k(qa)?qa.width+5:-5}).attr("y",function(qa){return qa.height/2}).text(function(qa){return qa.model.categoryLabel}).each(function(qa){ba.font(ca.select(this),
qa.parcatsViewModel.categorylabelfont);ma.convertToTspans(ca.select(this),oa)});la.append("text").attr("class","dimlabel");xa.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(qa){return"fixed"===qa.parcatsViewModel.arrangement?"default":"ew-resize"}).attr("x",function(qa){return qa.width/2}).attr("y",-5).text(function(qa,ta){return 0===ta?qa.parcatsViewModel.model.dimensions[qa.model.dimensionInd].dimensionLabel:null}).each(function(qa){ba.font(ca.select(this),
qa.parcatsViewModel.labelfont)});xa.selectAll("rect.bandrect").on("mouseover",C).on("mouseout",v);xa.exit().remove();ia.call(ca.behavior.drag().origin(function(qa){return{x:qa.x,y:0}}).on("dragstart",y).on("drag",F).on("dragend",J));ra.each(function(qa){qa.traceSelection=ca.select(this);qa.pathSelection=ca.select(this).selectAll("g.paths").selectAll("path.path");qa.dimensionSelection=ca.select(this).selectAll("g.dimensions").selectAll("g.dimension")});ra.exit().remove()}function n(ia){return ia.key}
function k(ia){return ia.model.dimensionInd===ia.parcatsViewModel.dimensions[ia.parcatsViewModel.dimensions.length-1].model.dimensionInd}function m(ia,oa){return ia.model.rawColor>oa.model.rawColor?1:ia.model.rawColor<oa.model.rawColor?-1:0}function a(ia){if(!ia.parcatsViewModel.dragDimension&&-1===ia.parcatsViewModel.hoverinfoItems.indexOf("skip")){ha.raiseToTop(this);d(ca.select(this));var oa=h(ia),xa=r(ia);ia.parcatsViewModel.graphDiv.emit("plotly_hover",{points:oa,event:ca.event,constraints:xa});
if(-1===ia.parcatsViewModel.hoverinfoItems.indexOf("none")){var ra=ca.mouse(this)[0];oa=ia.parcatsViewModel.graphDiv;xa=ia.parcatsViewModel.trace;var la=oa._fullLayout,ka=la._paperdiv.node().getBoundingClientRect(),na=ia.parcatsViewModel.graphDiv.getBoundingClientRect(),qa;for(qa=0;qa<ia.leftXs.length-1;qa++)if(ia.leftXs[qa]+ia.dimWidths[qa]-2<=ra&&ra<=ia.leftXs[qa+1]+2){var ta=ia.parcatsViewModel.dimensions[qa];ta=(ta.x+ta.width+ia.parcatsViewModel.dimensions[qa+1].x)/2;var za=(ia.topYs[qa]+ia.topYs[qa+
1]+ia.height)/2;break}ta=ia.parcatsViewModel.x+ta;za=ia.parcatsViewModel.y+za;qa=ja.mostReadable(ia.model.color,["black","white"]);ra=ia.model.count;var Ia=ra/ia.parcatsViewModel.model.count,Xa={countLabel:ra,probabilityLabel:Ia.toFixed(3)},$a=[];-1!==ia.parcatsViewModel.hoverinfoItems.indexOf("count")&&$a.push(["Count:",Xa.countLabel].join(" "));-1!==ia.parcatsViewModel.hoverinfoItems.indexOf("probability")&&$a.push(["P:",Xa.probabilityLabel].join(" "));$a=$a.join("\x3cbr\x3e");var gb=ca.mouse(oa)[0];
U.loneHover({trace:xa,x:ta-ka.left+na.left,y:za-ka.top+na.top,text:$a,color:ia.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:qa,idealAlign:gb<ta?"right":"left",hovertemplate:(xa.line||{}).hovertemplate,hovertemplateLabels:Xa,eventData:[{data:xa._input,fullData:xa,count:ra,probability:Ia}]},{container:la._hoverlayer.node(),outerContainer:la._paper.node(),gd:oa})}}}function g(ia){if(!ia.parcatsViewModel.dragDimension&&(c(ca.select(this)),U.loneUnhover(ia.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),
ia.parcatsViewModel.pathSelection.sort(m),-1===ia.parcatsViewModel.hoverinfoItems.indexOf("skip"))){var oa=h(ia),xa=r(ia);ia.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:oa,event:ca.event,constraints:xa})}}function h(ia){for(var oa=[],xa=K(ia.parcatsViewModel),ra=0;ra<ia.model.valueInds.length;ra++)oa.push({curveNumber:xa,pointNumber:ia.model.valueInds[ra]});return oa}function r(ia){for(var oa={},xa=ia.parcatsViewModel.model.dimensions,ra=0;ra<xa.length;ra++){var la=xa[ra];oa[la.containerInd]=
la.categories[ia.model.categoryInds[ra]].categoryValue}void 0!==ia.model.rawColor&&(oa.color=ia.model.rawColor);return oa}function l(ia){if(-1===ia.parcatsViewModel.hoverinfoItems.indexOf("skip")){var oa=h(ia),xa=r(ia);ia.parcatsViewModel.graphDiv.emit("plotly_click",{points:oa,event:ca.event,constraints:xa})}}function c(ia){ia.attr("fill",function(oa){return oa.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function d(ia){ia.attr("fill-opacity",
.8).attr("stroke",function(oa){return ja.mostReadable(oa.model.color,["black","white"])}).attr("stroke-width",.3)}function e(ia){ia.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function f(ia){ia.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function q(ia){var oa=ia.categoryViewModel.model.dimensionInd,xa=ia.categoryViewModel.model.categoryInd;return ia.parcatsViewModel.pathSelection.filter(function(ra){return ra.model.categoryInds[oa]===
xa&&ra.model.color===ia.color})}function t(ia){ca.select(ia.parentNode).selectAll("rect.bandrect").each(function(oa){oa=q(oa);d(oa);oa.each(function(){ha.raiseToTop(this)})});ca.select(ia.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}function w(ia){var oa=ca.select(ia).datum(),xa=q(oa);d(xa);xa.each(function(){ha.raiseToTop(this)});ca.select(ia.parentNode).selectAll("rect.bandrect").filter(function(ra){return ra.color===oa.color}).each(function(){ha.raiseToTop(this);
ca.select(this).attr("stroke","black").attr("stroke-width",1.5)})}function x(ia,oa,xa){var ra=ca.select(ia).datum(),la=ra.categoryViewModel.model;ra=ra.parcatsViewModel.graphDiv;var ka=[];ca.select(ia.parentNode).selectAll("rect.bandrect").each(function(na){q(na).each(function(qa){Array.prototype.push.apply(ka,h(qa))})});ia={};ia[la.dimensionInd]=la.categoryValue;ra.emit(oa,{points:ka,event:xa,constraints:ia})}function z(ia,oa,xa){ia=ca.select(ia).datum();var ra=ia.categoryViewModel.model,la=ia.parcatsViewModel.graphDiv,
ka=[];q(ia).each(function(qa){Array.prototype.push.apply(ka,h(qa))});var na={};na[ra.dimensionInd]=ra.categoryValue;void 0!==ia.rawColor&&(na.color=ia.rawColor);la.emit(oa,{points:ka,event:xa,constraints:na})}function B(ia,oa,xa){ia._fullLayout._calcInverseTransform(ia);var ra=ia._fullLayout._invScaleX;ia=ia._fullLayout._invScaleY;xa=ca.select(xa.parentNode).select("rect.catrect");var la=xa.node().getBoundingClientRect(),ka=xa.datum(),na=ka.parcatsViewModel,qa=na.model.dimensions[ka.model.dimensionInd];
xa=na.trace;var ta=la.top+la.height/2;1<na.dimensions.length&&qa.displayInd===na.dimensions.length-1?(la=la.left,na="left"):(la=la.left+la.width,na="right");qa=ka.model.count;var za=ka.model.categoryLabel,Ia=qa/ka.parcatsViewModel.model.count,Xa={countLabel:qa,categoryLabel:za,probabilityLabel:Ia.toFixed(3)},$a=[];-1!==ka.parcatsViewModel.hoverinfoItems.indexOf("count")&&$a.push(["Count:",Xa.countLabel].join(" "));-1!==ka.parcatsViewModel.hoverinfoItems.indexOf("probability")&&$a.push(["P("+Xa.categoryLabel+
"):",Xa.probabilityLabel].join(" "));ka=$a.join("\x3cbr\x3e");return{trace:xa,x:ra*(la-oa.left),y:ia*(ta-oa.top),text:ka,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:na,hovertemplate:xa.hovertemplate,hovertemplateLabels:Xa,eventData:[{data:xa._input,fullData:xa,count:qa,category:za,probability:Ia}]}}function A(ia,oa,xa){var ra=[];ca.select(xa.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){ra.push(B(ia,
oa,this))});return ra}function D(ia,oa,xa){ia._fullLayout._calcInverseTransform(ia);var ra=ia._fullLayout._invScaleX;ia=ia._fullLayout._invScaleY;var la=xa.getBoundingClientRect(),ka=ca.select(xa).datum(),na=ka.categoryViewModel,qa=na.parcatsViewModel,ta=qa.model.dimensions[na.model.dimensionInd];xa=qa.trace;var za=la.y+la.height/2;1<qa.dimensions.length&&ta.displayInd===qa.dimensions.length-1?(la=la.left,ta="left"):(la=la.left+la.width,ta="right");var Ia=na.model.categoryLabel,Xa=ka.parcatsViewModel.model.count,
$a=0;ka.categoryViewModel.bands.forEach(function(ub){ub.color===ka.color&&($a+=ub.count)});var gb=na.model.count,sb=0;qa.pathSelection.each(function(ub){ub.model.color===ka.color&&(sb+=ub.model.count)});qa=$a/Xa;var jb=$a/sb,vb=$a/gb,qb={countLabel:Xa,categoryLabel:Ia,probabilityLabel:qa.toFixed(3)},Bb=[];-1!==na.parcatsViewModel.hoverinfoItems.indexOf("count")&&Bb.push(["Count:",qb.countLabel].join(" "));-1!==na.parcatsViewModel.hoverinfoItems.indexOf("probability")&&(Bb.push("P(color  "+Ia+"): "+
qb.probabilityLabel),Bb.push("P("+Ia+" | color): "+jb.toFixed(3)),Bb.push("P(color | "+Ia+"): "+vb.toFixed(3)));na=Bb.join("\x3cbr\x3e");jb=ja.mostReadable(ka.color,["black","white"]);return{trace:xa,x:ra*(la-oa.left),y:ia*(za-oa.top),text:na,color:ka.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:jb,fontSize:10,idealAlign:ta,hovertemplate:xa.hovertemplate,hovertemplateLabels:qb,eventData:[{data:xa._input,fullData:xa,category:Ia,count:Xa,probability:qa,categorycount:gb,
colorcount:sb,bandcolorcount:$a}]}}function C(ia){if(!(ia.parcatsViewModel.dragDimension||-1!==ia.parcatsViewModel.hoverinfoItems.indexOf("skip")||-1>ca.mouse(this)[1])){var oa=ia.parcatsViewModel.graphDiv,xa=oa._fullLayout,ra=xa._paperdiv.node().getBoundingClientRect(),la=ia.parcatsViewModel.hoveron;"color"===la?(w(this),z(this,"plotly_hover",ca.event)):(t(this),x(this,"plotly_hover",ca.event));if(-1===ia.parcatsViewModel.hoverinfoItems.indexOf("none")){var ka;"category"===la?ka=B(oa,ra,this):"color"===
la?ka=D(oa,ra,this):"dimension"===la&&(ka=A(oa,ra,this));ka&&U.loneHover(ka,{container:xa._hoverlayer.node(),outerContainer:xa._paper.node(),gd:oa})}}}function v(ia){var oa=ia.parcatsViewModel;oa.dragDimension||(c(oa.pathSelection),e(oa.dimensionSelection.selectAll("g.category")),f(oa.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),U.loneUnhover(oa.graphDiv._fullLayout._hoverlayer.node()),oa.pathSelection.sort(m),-1===oa.hoverinfoItems.indexOf("skip")&&("color"===ia.parcatsViewModel.hoveron?
z(this,"plotly_unhover",ca.event):x(this,"plotly_unhover",ca.event)))}function y(ia){"fixed"!==ia.parcatsViewModel.arrangement&&(ia.dragDimensionDisplayInd=ia.model.displayInd,ia.initialDragDimensionDisplayInds=ia.parcatsViewModel.model.dimensions.map(function(oa){return oa.displayInd}),ia.dragHasMoved=!1,ia.dragCategoryDisplayInd=null,ca.select(this).selectAll("g.category").select("rect.catrect").each(function(oa){var xa=ca.mouse(this)[0],ra=ca.mouse(this)[1];-2<=xa&&xa<=oa.width+2&&-2<=ra&&ra<=
oa.height+2&&(ia.dragCategoryDisplayInd=oa.model.displayInd,ia.initialDragCategoryDisplayInds=ia.model.categories.map(function(la){return la.displayInd}),oa.model.dragY=oa.y,ha.raiseToTop(this.parentNode),ca.select(this.parentNode).selectAll("rect.bandrect").each(function(la){la.y<ra&&ra<=la.y+la.height&&(ia.potentialClickBand=this)}))}),ia.parcatsViewModel.dragDimension=ia,U.loneUnhover(ia.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function F(ia){if("fixed"!==ia.parcatsViewModel.arrangement&&
(ia.dragHasMoved=!0,null!==ia.dragDimensionDisplayInd)){var oa=ia.dragDimensionDisplayInd,xa=oa-1,ra=oa+1,la=ia.parcatsViewModel.dimensions[oa];if(null!==ia.dragCategoryDisplayInd){var ka=la.categories[ia.dragCategoryDisplayInd];ka.model.dragY+=ca.event.dy;var na=ka.model.dragY,qa=ka.model.displayInd,ta=la.categories,za=ta[qa-1];ta=ta[qa+1];void 0!==za&&na<za.y+za.height/2&&(ka.model.displayInd=za.model.displayInd,za.model.displayInd=qa);void 0!==ta&&na+ka.height>ta.y+ta.height/2&&(ka.model.displayInd=
ta.model.displayInd,ta.model.displayInd=qa);ia.dragCategoryDisplayInd=ka.model.displayInd}if(null===ia.dragCategoryDisplayInd||"freeform"===ia.parcatsViewModel.arrangement)la.model.dragX=ca.event.x,xa=ia.parcatsViewModel.dimensions[xa],ra=ia.parcatsViewModel.dimensions[ra],void 0!==xa&&la.model.dragX<xa.x+xa.width&&(la.model.displayInd=xa.model.displayInd,xa.model.displayInd=oa),void 0!==ra&&la.model.dragX+la.width>ra.x&&(la.model.displayInd=ra.model.displayInd,ra.model.displayInd=ia.dragDimensionDisplayInd),
ia.dragDimensionDisplayInd=la.model.displayInd;Q(ia.parcatsViewModel);M(ia.parcatsViewModel);I(ia.parcatsViewModel);O(ia.parcatsViewModel)}}function J(ia){if("fixed"!==ia.parcatsViewModel.arrangement&&null!==ia.dragDimensionDisplayInd){ca.select(this).selectAll("text").attr("font-weight","normal");var oa={},xa=K(ia.parcatsViewModel),ra=ia.parcatsViewModel.model.dimensions.map(function(za){return za.displayInd}),la=ia.initialDragDimensionDisplayInds.some(function(za,Ia){return za!==ra[Ia]});la&&ra.forEach(function(za,
Ia){oa["dimensions["+ia.parcatsViewModel.model.dimensions[Ia].containerInd+"].displayindex"]=za});var ka=!1;if(null!==ia.dragCategoryDisplayInd){var na=ia.model.categories.map(function(za){return za.displayInd});if(ka=ia.initialDragCategoryDisplayInds.some(function(za,Ia){return za!==na[Ia]})){var qa=ia.model.categories.slice().sort(function(za,Ia){return za.displayInd-Ia.displayInd}),ta=qa.map(function(za){return za.categoryValue});qa=qa.map(function(za){return za.categoryLabel});oa["dimensions["+
ia.model.containerInd+"].categoryarray"]=[ta];oa["dimensions["+ia.model.containerInd+"].ticktext"]=[qa];oa["dimensions["+ia.model.containerInd+"].categoryorder"]="array"}}-1===ia.parcatsViewModel.hoverinfoItems.indexOf("skip")&&!ia.dragHasMoved&&ia.potentialClickBand&&("color"===ia.parcatsViewModel.hoveron?z(ia.potentialClickBand,"plotly_click",ca.event.sourceEvent):x(ia.potentialClickBand,"plotly_click",ca.event.sourceEvent));ia.model.dragX=null;null!==ia.dragCategoryDisplayInd&&(ia.parcatsViewModel.dimensions[ia.dragDimensionDisplayInd].categories[ia.dragCategoryDisplayInd].model.dragY=
null,ia.dragCategoryDisplayInd=null);ia.dragDimensionDisplayInd=null;ia.parcatsViewModel.dragDimension=null;ia.dragHasMoved=null;ia.potentialClickBand=null;Q(ia.parcatsViewModel);M(ia.parcatsViewModel);ca.transition().duration(300).ease("cubic-in-out").each(function(){I(ia.parcatsViewModel,!0);O(ia.parcatsViewModel,!0)}).each("end",function(){(la||ka)&&T.restyle(ia.parcatsViewModel.graphDiv,oa,[xa])})}}function K(ia){for(var oa,xa=ia.graphDiv._fullData,ra=0;ra<xa.length;ra++)if(ia.key===xa[ra].uid){oa=
ra;break}return oa}function O(ia,oa){void 0===oa&&(oa=!1);ia.pathSelection.data(function(xa){return xa.paths},n);(function(xa){return oa?xa.transition():xa})(ia.pathSelection).attr("d",function(xa){return xa.svgD})}function I(ia,oa){function xa(la){return oa?la.transition():la}void 0===oa&&(oa=!1);ia.dimensionSelection.data(function(la){return la.dimensions},n);var ra=ia.dimensionSelection.selectAll("g.category").data(function(la){return la.categories},n);xa(ia.dimensionSelection).attr("transform",
function(la){return Y(la.x,0)});xa(ra).attr("transform",function(la){return Y(0,la.y)});ra.select(".dimlabel").text(function(la,ka){return 0===ka?la.parcatsViewModel.model.dimensions[la.model.dimensionInd].dimensionLabel:null});ra.select(".catlabel").attr("text-anchor",function(la){return k(la)?"start":"end"}).attr("x",function(la){return k(la)?la.width+5:-5}).each(function(la){if(k(la)){la=la.width+5;var ka="start"}else la=-5,ka="end";ca.select(this).selectAll("tspan").attr("x",la).attr("text-anchor",
ka)});ia=ra.selectAll("rect.bandrect").data(function(la){return la.bands},n);ra=ia.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(la){return la.color}).attr("fill-opacity",0);ia.attr("fill",function(la){return la.color}).attr("width",function(la){return la.width}).attr("height",function(la){return la.height}).attr("y",function(la){return la.y});f(ra);ia.each(function(){ha.raiseToTop(this)});ia.exit().remove()}function L(ia,oa,xa){xa=
xa[0];var ra=oa.margin||{l:80,r:80,t:100,b:80},la=xa.trace,ka=la.domain,na=oa.width,qa=Math.floor(na*(ka.x[1]-ka.x[0])),ta=Math.floor(oa.height*(ka.y[1]-ka.y[0]));na=ka.x[0]*na+ra.l;oa=oa.height-ka.y[1]*oa.height+ra.t;ka=la.line.shape;var za="all"===la.hoverinfo?["count","probability"]:(la.hoverinfo||"").split("+");ia={trace:la,key:la.uid,model:xa,x:na,y:oa,width:qa,height:ta,hoveron:la.hoveron,hoverinfoItems:za,arrangement:la.arrangement,bundlecolors:la.bundlecolors,sortpaths:la.sortpaths,labelfont:la.labelfont,
categorylabelfont:la.tickfont,pathShape:ka,dragDimension:null,margin:ra,paths:[],dimensions:[],graphDiv:ia,traceSelection:null,pathSelection:null,dimensionSelection:null};xa.dimensions&&(Q(ia),M(ia));return ia}function H(ia,oa,xa,ra,la){var ka=[],na=[],qa;for(qa=0;qa<xa.length-1;qa++){var ta=W(xa[qa]+ia[qa],ia[qa+1]);ka.push(ta(la));na.push(ta(1-la))}la="M "+ia[0]+","+oa[0];la+="l"+xa[0]+",0 ";for(qa=1;qa<xa.length;qa++)la+="C"+ka[qa-1]+","+oa[qa-1]+" "+na[qa-1]+","+oa[qa]+" "+ia[qa]+","+oa[qa],la+=
"l"+xa[qa]+",0 ";la=la+("l0,"+ra+" l -")+(xa[xa.length-1]+",0 ");for(qa=xa.length-2;0<=qa;qa--)la+="C"+na[qa]+","+(oa[qa+1]+ra)+" "+ka[qa]+","+(oa[qa]+ra)+" "+(ia[qa]+xa[qa])+","+(oa[qa]+ra),la+="l-"+xa[qa]+",0 ";return la+"Z"}function M(ia){function oa(wb){var rb=wb.categoryInds.map(function(Ab,Ma){return ka[Ma][Ab]});return qa.map(function(Ab){return rb[Ab]})}var xa=ia.dimensions,ra=ia.model,la=xa.map(function(wb){return wb.categories.map(function(rb){return rb.y})}),ka=ia.model.dimensions.map(function(wb){return wb.categories.map(function(rb){return rb.displayInd})}),
na=ia.model.dimensions.map(function(wb){return wb.displayInd}),qa=ia.dimensions.map(function(wb){return wb.model.dimensionInd}),ta=xa.map(function(wb){return wb.x}),za=xa.map(function(wb){return wb.width}),Ia=[];for(Xa in ra.paths)ra.paths.hasOwnProperty(Xa)&&Ia.push(ra.paths[Xa]);Ia.sort(function(wb,rb){var Ab=oa(wb),Ma=oa(rb);"backward"===ia.sortpaths&&(Ab.reverse(),Ma.reverse());Ab.push(wb.valueInds[0]);Ma.push(rb.valueInds[0]);ia.bundlecolors&&(Ab.unshift(wb.rawColor),Ma.unshift(rb.rawColor));
return Ab<Ma?-1:Ab>Ma?1:0});ra=Array(Ia.length);var Xa=xa[0].model.count;xa=xa[0].categories.map(function(wb){return wb.height}).reduce(function(wb,rb){return wb+rb});for(var $a=0;$a<Ia.length;$a++){var gb=Ia[$a];var sb=0<Xa?gb.count/Xa*xa:0;for(var jb=Array(la.length),vb=0;vb<gb.categoryInds.length;vb++){var qb=ka[vb][gb.categoryInds[vb]],Bb=na[vb];jb[Bb]=la[Bb][qb];la[Bb][qb]+=sb;qb=ia.dimensions[Bb].categories[qb];Bb=qb.bands.length;var ub=qb.bands[Bb-1];void 0===ub||gb.rawColor!==ub.rawColor?
(Bb=void 0===ub?0:ub.y+ub.height,qb.bands.push({key:Bb,color:gb.color,rawColor:gb.rawColor,height:sb,width:qb.width,count:gb.count,y:Bb,categoryViewModel:qb,parcatsViewModel:ia})):(qb=qb.bands[Bb-1],qb.height+=sb,qb.count+=gb.count)}vb="hspline"===ia.pathShape?H(ta,jb,za,sb,.5):H(ta,jb,za,sb,0);ra[$a]={key:gb.valueInds[0],model:gb,height:sb,leftXs:ta,topYs:jb,dimWidths:za,svgD:vb,parcatsViewModel:ia}}ia.paths=ra}function Q(ia){var oa=ia.model.dimensions.map(function(la){return{displayInd:la.displayInd,
dimensionInd:la.dimensionInd}});oa.sort(function(la,ka){return la.displayInd-ka.displayInd});var xa=[],ra;for(ra in oa)xa.push(Z(ia,ia.model.dimensions[oa[ra].dimensionInd]));ia.dimensions=xa}function Z(ia,oa){var xa=ia.model.dimensions.length;xa=40+(1<xa?(ia.width-80-16)/(xa-1):0)*oa.displayInd;var ra=[],la=ia.model.maxCats,ka=oa.categories.length,na=oa.count,qa=ia.height-8*(la-1),ta=8*(la-ka)/2,za=oa.categories.map(function($a){return{displayInd:$a.displayInd,categoryInd:$a.categoryInd}});za.sort(function($a,
gb){return $a.displayInd-gb.displayInd});for(la=0;la<ka;la++){var Ia=za[la].categoryInd;var Xa=oa.categories[Ia];Ia=0<na?Xa.count/na*qa:0;Xa={key:Xa.valueInds[0],model:Xa,width:16,height:Ia,y:null!==Xa.dragY?Xa.dragY:ta,bands:[],parcatsViewModel:ia};ta=ta+Ia+8;ra.push(Xa)}return{key:oa.dimensionInd,x:null!==oa.dragX?oa.dragX:xa,y:0,width:16,model:oa,categories:ra,parcatsViewModel:ia,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,
dragHasMoved:null,potentialClickBand:null}}var ca=b("@plotly/d3"),W=b("d3-interpolate").interpolateNumber,T=b("../../plot_api/plot_api"),U=b("../../components/fx"),ha=b("../../lib"),Y=ha.strTranslate,ba=b("../../components/drawing"),ja=b("tinycolor2"),ma=b("../../lib/svg_text_utils");N.exports=function(ia,oa,xa,ra){p(xa,ia,ra,oa)}},{"../../components/drawing":688,"../../components/fx":706,"../../lib":803,"../../lib/svg_text_utils":829,"../../plot_api/plot_api":840,"@plotly/d3":58,"d3-interpolate":171,
tinycolor2:598}],1179:[function(b,N,G){var p=b("./parcats");N.exports=function(n,k,m,a){var g=n._fullLayout,h=g._size;p(n,g._paper,k,{width:h.w,height:h.h,margin:{t:h.t,r:h.r,b:h.b,l:h.l}},m,a)}},{"./parcats":1178}],1180:[function(b,N,G){G=b("../../components/colorscale/attributes");var p=b("../../plots/cartesian/layout_attributes"),n=b("../../plots/font_attributes"),k=b("../../plots/domain").attributes,m=b("../../lib/extend").extendFlat;b=b("../../plot_api/plot_template").templatedArray;N.exports=
{domain:k({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:n({editType:"plot"}),tickfont:n({editType:"plot"}),rangefont:n({editType:"plot"}),dimensions:b("dimension",{label:{valType:"string",editType:"plot"},tickvals:m({},p.tickvals,{editType:"plot"}),ticktext:m({},p.ticktext,{editType:"plot"}),tickformat:m({},p.tickformat,{editType:"plot"}),visible:{valType:"boolean",
dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:m({editType:"calc"},G("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,
editTypeOverride:"calc"}))}},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plot_api/plot_template":843,"../../plots/cartesian/layout_attributes":869,"../../plots/domain":882,"../../plots/font_attributes":883}],1181:[function(b,N,G){function p(L,H,M,Q){a:{for(var Z=0;Z<Q.length;Z++)if(M>=Q[Z][0]&&M<=Q[Z][1]){Q=!0;break a}Q=!1}if(Q)return M;L=L?-1:1;var ca=0;Q=H.length-1;0>L&&(Z=ca,ca=Q,Q=Z);for(var W=Z=H[ca];L*ca<L*Q;ca+=L){var T=ca+L,U=H[T];if(L*M<L*(Z*(1-I)+U*I))return Z*
(1-O)+W*O;if(L*M<L*U||T===Q)return U*(1-O)+Z*O;W=Z;Z=U}}function n(L){L.attr("x",-C.bar.captureWidth/2).attr("width",C.bar.captureWidth)}function k(L){L.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function m(L){if(!L.brush.filterSpecified)return"0,"+L.height;for(var H=a(L.brush.filter.getConsolidated(),L.height),M=[0],Q,Z,ca=H.length?H[0][0]:null,W=0;W<H.length;W++)Q=H[W],Z=Q[1]-Q[0],M.push(ca),M.push(Z),Z=W+1,Z<H.length&&(ca=H[Z][0]-Q[1]);M.push(L.height);
return M}function a(L,H){return L.map(function(M){return M.map(function(Q){return Math.max(0,Q*H)}).sort(J)})}function g(){v.select(document.body).style("cursor",null)}function h(L){L.attr("stroke-dasharray",m)}function r(L,H){L=v.select(L).selectAll(".highlight, .highlight-shadow");H=H?L.transition().duration(C.bar.snapDuration).each("end",H):L;h(H)}function l(L,H){var M=L.brush,Q={};if(M.filterSpecified){var Z=L.height;M=M.filter.getConsolidated();var ca=a(M,Z),W=NaN,T=NaN,U=NaN;for(Z=0;Z<=ca.length;Z++){var ha=
ca[Z];if(ha&&ha[0]<=H&&H<=ha[1]){W=Z;break}else if(T=Z?Z-1:NaN,ha&&ha[0]>H){U=Z;break}}Z=W;isNaN(Z)&&(Z=isNaN(T)||isNaN(U)?isNaN(T)?U:T:H-ca[T][1]<ca[U][0]-H?T:U);isNaN(Z)||(ca=ca[Z],T=C.bar.handleHeight,T=H>ca[1]+T||H<ca[0]-T?void 0:H>=.9*ca[1]+.1*ca[0]?"n":H<=.9*ca[0]+.1*ca[1]?"s":"ns",T&&(Q.interval=M[Z],Q.intervalPix=ca,Q.region=T))}if(L.ordinal&&!Q.region)for(M=L.unitTickvals,L=L.unitToPaddedPx.invert(H),Z=0;Z<M.length;Z++)if(H=[.25*M[Math.max(Z-1,0)]+.75*M[Z],.25*M[Math.min(Z+1,M.length-1)]+
.75*M[Z]],L>=H[0]&&L<=H[1]){Q.clickableOrdinalRange=H;break}return Q}function c(L,H){v.event.sourceEvent.stopPropagation();L=H.height-v.mouse(L)[1]-2*C.verticalPadding;var M=H.unitToPaddedPx.invert(L),Q=H.brush,Z=l(H,L),ca=Z.interval,W=Q.svgBrush;W.wasDragged=!1;W.grabbingBar="ns"===Z.region;if(W.grabbingBar){var T=ca.map(H.unitToPaddedPx);W.grabPoint=L-T[0]-C.verticalPadding;W.barLength=T[1]-T[0]}W.clickableOrdinalRange=Z.clickableOrdinalRange;W.stayingIntervals=H.multiselect&&Q.filterSpecified?
Q.filter.getConsolidated():[];ca&&(W.stayingIntervals=W.stayingIntervals.filter(function(U){return U[0]!==ca[0]&&U[1]!==ca[1]}));W.startExtent=Z.region?ca["s"===Z.region?1:0]:M;H.parent.inBrushDrag=!0;W.brushStartCallback()}function d(L,H){v.event.sourceEvent.stopPropagation();var M=H.height-v.mouse(L)[1]-2*C.verticalPadding,Q=H.brush.svgBrush;Q.wasDragged=!0;Q._dragging=!0;Q.newExtent=Q.grabbingBar?[M-Q.grabPoint,M+Q.barLength-Q.grabPoint].map(H.unitToPaddedPx.invert):[Q.startExtent,H.unitToPaddedPx.invert(M)].sort(J);
H.brush.filterSpecified=!0;Q.extent=Q.stayingIntervals.concat([Q.newExtent]);Q.brushCallback(H);r(L.parentNode)}function e(L,H){var M=H.brush,Q=M.filter,Z=M.svgBrush;Z._dragging||(f(L,H),d(L,H),H.brush.svgBrush.wasDragged=!1);Z._dragging=!1;v.event.sourceEvent.stopPropagation();var ca=Z.grabbingBar;Z.grabbingBar=!1;Z.grabLocation=void 0;H.parent.inBrushDrag=!1;g();if(Z.wasDragged)if(ca=function(){Q.set(Q.getConsolidated())},H.ordinal){var W=H.unitTickvals;W[W.length-1]<W[0]&&W.reverse();Z.newExtent=
[p(0,W,Z.newExtent[0],Z.stayingIntervals),p(1,W,Z.newExtent[1],Z.stayingIntervals)];W=Z.newExtent[1]>Z.newExtent[0];Z.extent=Z.stayingIntervals.concat(W?[Z.newExtent]:[]);Z.extent.length||z(M);Z.brushCallback(H);W?r(L.parentNode,ca):(ca(),r(L.parentNode))}else ca();else Z.wasDragged=void 0,Z.clickableOrdinalRange?M.filterSpecified&&H.multiselect?Z.extent.push(Z.clickableOrdinalRange):(Z.extent=[Z.clickableOrdinalRange],M.filterSpecified=!0):ca?(Z.extent=Z.stayingIntervals,0===Z.extent.length&&z(M)):
z(M),Z.brushCallback(H),r(L.parentNode);Z.brushEndCallback(M.filterSpecified?Q.getConsolidated():[])}function f(L,H){L=H.height-v.mouse(L)[1]-2*C.verticalPadding;H=l(H,L);L="crosshair";H.clickableOrdinalRange?L="pointer":H.region&&(L=H.region+"-resize");v.select(document.body).style("cursor",L)}function q(L){L.on("mousemove",function(H){v.event.preventDefault();H.parent.inBrushDrag||f(this,H)}).on("mouseleave",function(H){H.parent.inBrushDrag||g()}).call(v.behavior.drag().on("dragstart",function(H){c(this,
H)}).on("drag",function(H){d(this,H)}).on("dragend",function(H){e(this,H)}))}function t(L,H){return L[0]-H[0]}function w(L,H){var M=L.selectAll(".background").data(F);M.enter().append("rect").classed("background",!0).call(n).call(k).style("pointer-events","auto").attr("transform",K(0,C.verticalPadding));M.call(q).attr("height",function(Q){return Q.height-C.verticalPadding});M=L.selectAll(".highlight-shadow").data(F);M.enter().append("line").classed("highlight-shadow",!0).attr("x",-C.bar.width/2).attr("stroke-width",
C.bar.width+C.bar.strokeWidth).attr("stroke",H).attr("opacity",C.bar.strokeOpacity).attr("stroke-linecap","butt");M.attr("y1",function(Q){return Q.height}).call(h);L=L.selectAll(".highlight").data(F);L.enter().append("line").classed("highlight",!0).attr("x",-C.bar.width/2).attr("stroke-width",C.bar.width-C.bar.strokeWidth).attr("stroke",C.bar.fillColor).attr("opacity",C.bar.fillOpacity).attr("stroke-linecap","butt");L.attr("y1",function(Q){return Q.height}).call(h)}function x(L){return L.svgBrush.extent.map(function(H){return H.slice()})}
function z(L){L.filterSpecified=!1;L.svgBrush.extent=[[-Infinity,Infinity]]}function B(L){return function(H){H=H.brush;var M=x(H).slice();H.filter.set(M);L()}}function A(L){L=L.slice();for(var H=[],M,Q=L.shift();Q;){for(M=Q.slice();(Q=L.shift())&&Q[0]<=M[1];)M[1]=Math.max(M[1],Q[1]);H.push(M)}1===H.length&&H[0][0]>H[0][1]&&(H=[]);return H}function D(){var L=[],H,M;return{set:function(Q){L=Q.map(function(Z){return Z.slice().sort(J)}).sort(t);1===L.length&&-Infinity===L[0][0]&&Infinity===L[0][1]&&(L=
[[0,-1]]);H=A(L);M=L.reduce(function(Z,ca){return[Math.min(Z[0],ca[0]),Math.max(Z[1],ca[1])]},[Infinity,-Infinity])},get:function(){return L.slice()},getConsolidated:function(){return H},getBounds:function(){return M}}}var C=b("./constants"),v=b("@plotly/d3"),y=b("../../lib/gup").keyFun,F=b("../../lib/gup").repeat,J=b("../../lib").sorterAsc,K=b("../../lib").strTranslate,O=C.bar.snapRatio,I=C.bar.snapClose;N.exports={makeBrush:function(L,H,M,Q,Z,ca){L=D();L.set(M);return{filter:L,filterSpecified:H,
svgBrush:{extent:[],brushStartCallback:Q,brushCallback:B(Z),brushEndCallback:ca}}},ensureAxisBrush:function(L,H){L=L.selectAll("."+C.cn.axisBrush).data(F,y);L.enter().append("g").classed(C.cn.axisBrush,!0);w(L,H)},cleanRanges:function(L,H){Array.isArray(L[0])?(L=L.map(function(Q){return Q.sort(J)}),L=H.multiselect?A(L.sort(t)):[L[0]]):L=[L.sort(J)];if(H.tickvals){var M=H.tickvals.slice().sort(J);L=L.map(function(Q){Q=[p(0,M,Q[0],[]),p(1,M,Q[1],[])];if(Q[1]>Q[0])return Q}).filter(function(Q){return Q});
if(!L.length)return}return 1<L.length?L:L[0]}}},{"../../lib":803,"../../lib/gup":800,"./constants":1184,"@plotly/d3":58}],1182:[function(b,N,G){var p=b("@plotly/d3"),n=b("../../plots/get_data").getModuleCalcData,k=b("./plot"),m=b("../../constants/xmlns_namespaces");G.name="parcoords";G.plot=function(a){var g=n(a.calcdata,"parcoords")[0];g.length&&k(a,g)};G.clean=function(a,g,h,r){a=r._has&&r._has("parcoords");g=g._has&&g._has("parcoords");a&&!g&&(r._paperdiv.selectAll(".parcoords").remove(),r._glimages.selectAll("*").remove())};
G.toSVG=function(a){var g=a._fullLayout._glimages,h=p.select(a).selectAll(".svg-container");h.filter(function(r,l){return l===h.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var r=this.toDataURL("image/png");g.append("svg:image").attr({xmlns:m.svg,"xlink:href":r,preserveAspectRatio:"none",x:0,y:0,width:this.style.width,height:this.style.height})});window.setTimeout(function(){p.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":780,
"../../plots/get_data":891,"./plot":1191,"@plotly/d3":58}],1183:[function(b,N,G){var p=b("../../lib").isArrayOrTypedArray,n=b("../../components/colorscale"),k=b("../../lib/gup").wrap;N.exports=function(m,a){if(n.hasColorscale(a,"line")&&p(a.line.color)){var g=a.line.color;var h=n.extractOpts(a.line).colorscale;n.calc(m,a,{vals:g,containerStr:"line",cLetter:"c"})}else{m=a._length;g=Array(m);for(h=0;h<m;h++)g[h]=.5;h=[[0,a.line.color],[1,a.line.color]]}return k({lineColor:g,cscale:h})}},{"../../components/colorscale":678,
"../../lib":803,"../../lib/gup":800}],1184:[function(b,N,G){N.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5E3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,deselectedLineColor:"#777",bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",
parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},
{}],1185:[function(b,N,G){function p(f,q,t,w,x){var z=x("line.color",t);if(m(f,"line")&&k.isArrayOrTypedArray(z)){if(z.length)return x("line.colorscale"),a(f,q,w,x,{prefix:"line.",cLetter:"c"}),z.length;q.line.color=t}return Infinity}function n(f,q,t,w){function x(B,A){return k.coerce(f,q,l.dimensions,B,A)}t=x("values");var z=x("visible");t&&t.length||(z=q.visible=!1);z&&(x("label"),x("tickvals"),x("ticktext"),x("tickformat"),t=x("range"),q._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",
range:t},r.setConvert(q._ax,w.layout),x("multiselect"),w=x("constraintrange"))&&(q.constraintrange=c.cleanRanges(w,q))}var k=b("../../lib"),m=b("../../components/colorscale/helpers").hasColorscale,a=b("../../components/colorscale/defaults"),g=b("../../plots/domain").defaults,h=b("../../plots/array_container_defaults"),r=b("../../plots/cartesian/axes"),l=b("./attributes"),c=b("./axisbrush"),d=b("./constants").maxDimensionCount,e=b("./merge_length");N.exports=function(f,q,t,w){function x(B,A){return k.coerce(f,
q,l,B,A)}var z=f.dimensions;Array.isArray(z)&&z.length>d&&(k.log("parcoords traces support up to "+d+" dimensions at the moment"),z.splice(d));z=h(f,q,{name:"dimensions",layout:w,handleItemDefaults:n});t=p(f,q,t,w,x);g(q,w,x);Array.isArray(z)&&z.length||(q.visible=!1);e(q,z,"values",t);w={family:w.font.family,size:Math.round(w.font.size/1.2),color:w.font.color};k.coerceFont(x,"labelfont",w);k.coerceFont(x,"tickfont",w);k.coerceFont(x,"rangefont",w);x("labelangle");x("labelside")}},{"../../components/colorscale/defaults":676,
"../../components/colorscale/helpers":677,"../../lib":803,"../../plots/array_container_defaults":849,"../../plots/cartesian/axes":854,"../../plots/domain":882,"./attributes":1180,"./axisbrush":1181,"./constants":1184,"./merge_length":1189}],1186:[function(b,N,G){var p=b("../../lib").isTypedArray;G.convertTypedArray=function(n){return p(n)?Array.prototype.slice.call(n):n};G.isOrdinal=function(n){return!!n.tickvals};G.isVisible=function(n){return n.visible||!("visible"in n)}},{"../../lib":803}],1187:[function(b,
N,G){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:b("./base_plot"),categories:["gl","regl","noOpacity","noHover"],meta:{}}},{"./attributes":1180,"./base_plot":1182,"./calc":1183,"./defaults":1185,"./plot":1191}],1188:[function(b,N,G){function p(x,z,B,A,D){var C=x._gl;C.enable(C.SCISSOR_TEST);C.scissor(z,B,A,D);x.clear({color:[0,0,0,0],depth:1})}
function n(x,z,B,A,D,C){function v(F){var J=Math.min(A,D-F*A);0===F&&(window.cancelAnimationFrame(B.currentRafs[y]),delete B.currentRafs[y],p(x,C.scissorX,C.scissorY,C.scissorWidth,C.viewBoxSize[1]));B.clearOnly||(C.count=2*J,C.offset=2*F*A,z(C),F*A+J<D&&(B.currentRafs[y]=window.requestAnimationFrame(function(){v(F+1)})),B.drawCompleted=!1)}var y=C.key;B.drawCompleted||(x.read({x:0,y:0,width:1,height:1,data:q}),B.drawCompleted=!0);v(0)}function k(x,z){for(var B=Array(256),A=0;256>A;A++)B[A]=x(A/255).concat(z);
return B}function m(x,z,B){for(var A=Array(x*(e+4)),D=0,C=0;C<x;C++){for(var v=0;v<e;v++)A[D++]=v<z.length?z[v].paddedUnitValues[C]:.5;A[D++]=(C>>>16)%256/255;A[D++]=(C>>>8)%256/255;A[D++]=(C>>>0)%256/255;A[D++]=Math.max(1E-6,Math.min(.999999,B[C]))}return A}function a(x){x="0"+x;return x.substr(x.length-2)}function g(x){return x<e?"p"+a(x+1)+"_"+a(x+4):"colors"}function h(x,z,B){for(var A=0;A<=e;A+=4){for(var D=x,C=D[g(A)],v=A/4,y=z,F=B,J=Array(8*y),K=0,O=0;O<y;O++)for(var I=0;2>I;I++)for(var L=
0;4>L;L++){var H=4*v+L,M=F[64*O+H];63===H&&0===I&&(M*=-1);J[K++]=M}C.call(D,J)}}function r(x){for(var z={},B=0;B<=e;B+=4)z[g(B)]=x.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return z}function l(x){var z=Math.max(0,Math.floor(2047*x[0]),0);x=Math.min(2047,Math.ceil(2047*x[1]),2047);return[Math.min(z,x),Math.max(z,x)]}G=b("glslify");var c=G(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nattribute vec4 p01_04, p05_08, p09_12, p13_16,\n               p17_20, p21_24, p25_28, p29_32,\n               p33_36, p37_40, p41_44, p45_48,\n               p49_52, p53_56, p57_60, colors;\n\nuniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution, viewBoxPos, viewBoxSize;\nuniform sampler2D mask, palette;\nuniform float maskHeight;\nuniform float drwLayer; // 0: context, 1: focus, 2: pick\nuniform vec4 contextColor;\n\nbool isPick    \x3d (drwLayer \x3e 1.5);\nbool isContext \x3d (drwLayer \x3c 0.5);\n\nconst vec4 ZEROS \x3d vec4(0.0, 0.0, 0.0, 0.0);\nconst vec4 UNITS \x3d vec4(1.0, 1.0, 1.0, 1.0);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * UNITS, UNITS);\n}\n\nfloat axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float y1 \x3d val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);\n    float y2 \x3d val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);\n    return y1 * (1.0 - ratio) + y2 * ratio;\n}\n\nint iMod(int a, int b) {\n    return a - b * (a / b);\n}\n\nbool fOutside(float p, float lo, float hi) {\n    return (lo \x3c hi) \x26\x26 (lo \x3e p || p \x3e hi);\n}\n\nbool vOutside(vec4 p, vec4 lo, vec4 hi) {\n    return (\n        fOutside(p[0], lo[0], hi[0]) ||\n        fOutside(p[1], lo[1], hi[1]) ||\n        fOutside(p[2], lo[2], hi[2]) ||\n        fOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool mOutside(mat4 p, mat4 lo, mat4 hi) {\n    return (\n        vOutside(p[0], lo[0], hi[0]) ||\n        vOutside(p[1], lo[1], hi[1]) ||\n        vOutside(p[2], lo[2], hi[2]) ||\n        vOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {\n    return mOutside(A, loA, hiA) ||\n           mOutside(B, loB, hiB) ||\n           mOutside(C, loC, hiC) ||\n           mOutside(D, loD, hiD);\n}\n\nbool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {\n    mat4 pnts[4];\n    pnts[0] \x3d A;\n    pnts[1] \x3d B;\n    pnts[2] \x3d C;\n    pnts[3] \x3d D;\n\n    for(int i \x3d 0; i \x3c 4; ++i) {\n        for(int j \x3d 0; j \x3c 4; ++j) {\n            for(int k \x3d 0; k \x3c 4; ++k) {\n                if(0 \x3d\x3d iMod(\n                    int(255.0 * texture2D(mask,\n                        vec2(\n                            (float(i * 2 + j / 2) + 0.5) / 8.0,\n                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight\n                        ))[3]\n                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),\n                    2\n                )) return true;\n            }\n        }\n    }\n    return false;\n}\n\nvec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float x \x3d 0.5 * sign(v) + 0.5;\n    float y \x3d axisY(x, A, B, C, D);\n    float z \x3d 1.0 - abs(v);\n\n    z +\x3d isContext ? 0.0 : 2.0 * float(\n        outsideBoundingBox(A, B, C, D) ||\n        outsideRasterMask(A, B, C, D)\n    );\n\n    return vec4(\n        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,\n        z,\n        1.0\n    );\n}\n\nvoid main() {\n    mat4 A \x3d mat4(p01_04, p05_08, p09_12, p13_16);\n    mat4 B \x3d mat4(p17_20, p21_24, p25_28, p29_32);\n    mat4 C \x3d mat4(p33_36, p37_40, p41_44, p45_48);\n    mat4 D \x3d mat4(p49_52, p53_56, p57_60, ZEROS);\n\n    float v \x3d colors[3];\n\n    gl_Position \x3d position(isContext, v, A, B, C, D);\n\n    fragColor \x3d\n        isContext ? vec4(contextColor) :\n        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));\n}\n"]),
d=G(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n    gl_FragColor \x3d fragColor;\n}\n"]),e=b("./constants").maxDimensionCount,f=b("../../lib"),q=new Uint8Array(4),t=new Uint8Array(4),w={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};N.exports=function(x,z){function B(Z){F=Z.model;J=Z.viewModel;K=J.dimensions.slice();O=K[0]?K[0].values.length:0;var ca=F.lines;Z=D?ca.color.map(function(W,T){return T/ca.color.length}):ca.color;Z=m(O,
K,Z);h(I,O,Z);A||D||(H=C.texture(f.extendFlat({data:k(F.unitToColor,255)},w)))}var A=z.context,D=z.pick,C=z.regl,v=C._gl;v=v.getParameter(v.ALIASED_LINE_WIDTH_RANGE);v=Math.max(v[0],Math.min(v[1],z.viewModel.plotGlPixelRatio));var y={currentRafs:{},drawCompleted:!0,clearOnly:!1},F,J,K,O,I=r(C),L,H=C.texture(w),M=[];B(z);var Q=C({profile:!1,blend:{enable:A,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!A,
mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:C.prop("scissorX"),y:C.prop("scissorY"),width:C.prop("scissorWidth"),height:C.prop("scissorHeight")}},viewport:{x:C.prop("viewportX"),y:C.prop("viewportY"),width:C.prop("viewportWidth"),height:C.prop("viewportHeight")},dither:!1,vert:c,frag:d,primitive:"lines",lineWidth:v,attributes:I,uniforms:{resolution:C.prop("resolution"),viewBoxPos:C.prop("viewBoxPos"),viewBoxSize:C.prop("viewBoxSize"),dim0A:C.prop("dim0A"),
dim1A:C.prop("dim1A"),dim0B:C.prop("dim0B"),dim1B:C.prop("dim1B"),dim0C:C.prop("dim0C"),dim1C:C.prop("dim1C"),dim0D:C.prop("dim0D"),dim1D:C.prop("dim1D"),loA:C.prop("loA"),hiA:C.prop("hiA"),loB:C.prop("loB"),hiB:C.prop("hiB"),loC:C.prop("loC"),hiC:C.prop("hiC"),loD:C.prop("loD"),hiD:C.prop("hiD"),palette:H,contextColor:C.prop("contextColor"),mask:C.prop("maskTexture"),drwLayer:C.prop("drwLayer"),maskHeight:C.prop("maskHeight")},offset:C.prop("offset"),count:C.prop("count")});return{render:function(Z,
ca,W){var T=Z.length,U,ha=Infinity,Y=-Infinity;for(U=0;U<T;U++){if(Z[U].dim0.canvasX<ha){ha=Z[U].dim0.canvasX;var ba=U}if(Z[U].dim1.canvasX>Y){Y=Z[U].dim1.canvasX;var ja=U}}0===T&&p(C,0,0,F.canvasWidth,F.canvasHeight);var ma=A,ia;U=[[],[]];for(Y=0;64>Y;Y++)ha=!ma&&Y<K.length?K[Y].brush.filter.getBounds():[-Infinity,Infinity],U[0][Y]=ha[0],U[1][Y]=ha[1];var oa=Array(16384);for(ha=0;16384>ha;ha++)oa[ha]=255;if(!ma)for(ha=0;ha<K.length;ha++){Y=ha%8;ma=(ha-Y)/8;var xa=Math.pow(2,Y),ra=K[ha].brush.filter.get();
if(!(2>ra.length)){var la=l(ra[0])[1];for(ia=1;ia<ra.length;ia++){var ka=l(ra[ia]);for(Y=la+1;Y<ka[0];Y++)oa[8*Y+ma]&=~xa;la=Math.max(la,ka[1])}}}ha={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:oa};L?L(ha):L=C.texture(ha);ha={maskTexture:L,maskHeight:2048,loA:U[0].slice(0,16),loB:U[0].slice(16,32),loC:U[0].slice(32,48),loD:U[0].slice(48,64),hiA:U[1].slice(0,16),hiB:U[1].slice(16,32),hiC:U[1].slice(32,48),hiD:U[1].slice(48,64)};for(U=0;U<T;U++){var na=Z[U];xa=na.dim0.crossfilterDimensionIndex;
ra=na.dim1.crossfilterDimensionIndex;la=na.canvasX;ka=na.canvasY;Y=la+na.panelSizeX;var qa=na.plotGlPixelRatio;if(ca||!M[xa]||M[xa][0]!==la||M[xa][1]!==Y){M[xa]=[la,Y];Y=F;oa=ba;ma=ja;ia=U;var ta=na.panelSizeX,za=na.panelSizeY;na=na.dim0.crossfilterDimensionIndex;var Ia=A?0:D?2:1,Xa=ha,$a=qa;qa=[[],[]];for(var gb=0;64>gb;gb++)qa[0][gb]=gb===xa?1:0,qa[1][gb]=gb===ra?1:0;la*=$a;ka*=$a;ta*=$a;za*=$a;gb=Y.lines.canvasOverdrag*$a;var sb=Y.domain,jb=Y.canvasWidth*$a,vb=Y.canvasHeight*$a,qb=Y.pad.l*$a,Bb=
Y.pad.b*$a,ub=Y.layoutHeight*$a;$a*=Y.layoutWidth;var wb=Y.deselectedLines.color;Y=f.extendFlat({key:na,resolution:[jb,vb],viewBoxPos:[la+gb,ka],viewBoxSize:[ta,za],i0:xa,i1:ra,dim0A:qa[0].slice(0,16),dim0B:qa[0].slice(16,32),dim0C:qa[0].slice(32,48),dim0D:qa[0].slice(48,64),dim1A:qa[1].slice(0,16),dim1B:qa[1].slice(16,32),dim1C:qa[1].slice(32,48),dim1D:qa[1].slice(48,64),drwLayer:Ia,contextColor:[wb[0]/255,wb[1]/255,wb[2]/255,1>wb[3]?wb[3]:Math.max(1/255,Math.pow(1/Y.lines.color.length,1/3))],scissorX:(ia===
oa?0:la+gb)+(qb-gb)+$a*sb.x[0],scissorWidth:(ia===ma?jb-la+gb:ta+.5)+(ia===oa?la+gb:0),scissorY:ka+Bb+ub*sb.y[0],scissorHeight:za,viewportX:qb-gb+$a*sb.x[0],viewportY:Bb+ub*sb.y[0],viewportWidth:jb,viewportHeight:vb},Xa);y.clearOnly=W;n(C,Q,y,ca?F.lines.blockLineCount:O,O,Y)}}},readPixel:function(Z,ca){C.read({x:Z,y:ca,width:1,height:1,data:t});return t},readPixels:function(Z,ca,W,T){var U=new Uint8Array(4*W*T);C.read({x:Z,y:ca,width:W,height:T,data:U});return U},destroy:function(){x.style["pointer-events"]=
"none";H.destroy();L&&L.destroy();for(var Z in I)I[Z].destroy()},update:B}}},{"../../lib":803,"./constants":1184,glslify:442}],1189:[function(b,N,G){N.exports=function(p,n,k,m){m||(m=Infinity);var a;for(a=0;a<n.length;a++){var g=n[a];g.visible&&(m=Math.min(m,g[k].length))}Infinity===m&&(m=0);p._length=m;for(a=0;a<n.length;a++)g=n[a],g.visible&&(g._length=m);return m}},{}],1190:[function(b,N,G){function p(W,T){return k(A.aggNums(Math.min,null,W,T),A.aggNums(Math.max,null,W,T))}function n(W){var T=
W.range;return T?k(T[0],T[1]):p(W.values,W._length)}function k(W,T){if(isNaN(W)||!isFinite(W))W=0;if(isNaN(T)||!isFinite(T))T=0;W===T&&(0===W?(--W,T+=1):(W*=.9,T*=1.1));return[W,T]}function m(W,T){return T?function(U,ha){ha=T[ha];return null===ha||void 0===ha?W(U):ha}:W}function a(W,T,U,ha,Y){var ba=n(U);return ha?B.scale.ordinal().domain(ha.map(m(D(U.tickformat),Y))).range(ha.map(function(ja){return W-T+(ja-ba[0])/(ba[1]-ba[0])*(2*T-W)})):B.scale.linear().domain(ba).range([W-T,T])}function g(W,T){return B.scale.linear().range([T,
W-T])}function h(W,T){return B.scale.linear().domain(n(W)).range([T,1-T])}function r(W){if(W.tickvals){var T=n(W);return B.scale.ordinal().domain(W.tickvals).range(W.tickvals.map(function(U){return(U-T[0])/(T[1]-T[0])}))}}function l(W){var T=W.map(function(ba){return ba[0]}),U=W.map(function(ba){ba=C(ba[1]);return B.rgb("rgb("+ba[0]+","+ba[1]+","+ba[2]+")")}),ha=function(ba){return function(ja){return ja[ba]}},Y=["r","g","b"].map(function(ba){return B.scale.linear().clamp(!0).domain(T).range(U.map(ha(ba)))});
return function(ba){return Y.map(function(ja){return ja(ba)})}}function c(W){return W.dimensions.some(function(T){return T.brush.filterSpecified})}function d(W,T,U){var ha=H(T),Y=ha.trace,ba=M.convertTypedArray(ha.lineColor),ja=Y.line;T={color:C(Q.deselectedLineColor)};var ma=O.extractOpts(ja);ha=ma.reversescale?O.flipScale(ha.cscale):ha.cscale;var ia=Y.domain,oa=Y.dimensions,xa=W.width,ra=Y.labelangle,la=Y.labelside,ka=Y.labelfont,na=Y.tickfont,qa=Y.rangefont;Y=A.extendDeepNoArrays({},ja,{color:ba.map(B.scale.linear().domain(n({values:ba,
range:[ma.min,ma.max],_length:Y._length}))),blockLineCount:Q.blockLineCount,canvasOverdrag:Q.overdrag*Q.canvasPixelRatio});ba=W.margin||{l:80,r:80,t:100,b:80};ja=Math.floor(xa*(ia.x[1]-ia.x[0]));ma=Math.floor(W.height*(ia.y[1]-ia.y[0]));return{key:U,colCount:oa.filter(M.isVisible).length,dimensions:oa,tickDistance:Q.tickDistance,unitToColor:l(ha),lines:Y,deselectedLines:T,labelAngle:ra,labelSide:la,labelFont:ka,tickFont:na,rangeFont:qa,layoutWidth:xa,layoutHeight:W.height,domain:ia,translateX:ia.x[0]*
xa,translateY:W.height-ia.y[1]*W.height,pad:ba,canvasWidth:ja*Q.canvasPixelRatio+2*Y.canvasOverdrag,canvasHeight:ma*Q.canvasPixelRatio,width:ja,height:ma,canvasPixelRatio:Q.canvasPixelRatio}}function e(W,T,U){var ha=U.width,Y=U.height,ba=U.dimensions,ja=U.canvasPixelRatio,ma=function(la){return ha*la/Math.max(1,U.colCount-1)},ia=Q.verticalPadding/Y,oa=g(Y,Q.verticalPadding),xa={key:U.key,xScale:ma,model:U,inBrushDrag:!1},ra={};xa.dimensions=ba.filter(M.isVisible).map(function(la,ka){function na(qb,
Bb){return{val:qb,text:sb[Bb]}}function qa(qb,Bb){return qb.val-Bb.val}var ta=h(la,ia),za=ra[la.label];ra[la.label]=(za||0)+1;za=la.label+(za?"__"+za:"");var Ia=la.constraintrange,Xa=Ia&&Ia.length;Xa&&!Array.isArray(Ia[0])&&(Ia=[Ia]);Ia=Xa?Ia.map(function(qb){return qb.map(ta)}):[[-Infinity,Infinity]];var $a=la.values;$a.length>la._length&&($a=$a.slice(0,la._length));var gb=la.tickvals;if(Array.isArray(gb)&&gb.length){var sb=la.ticktext;Array.isArray(sb)&&sb.length?sb.length>gb.length?sb=sb.slice(0,
gb.length):gb.length>sb.length&&(gb=gb.slice(0,sb.length)):sb=gb.map(D(la.tickformat));for(var jb=1;jb<gb.length;jb++)if(gb[jb]<gb[jb-1]){jb=gb.map(na).sort(qa);for(var vb=0;vb<gb.length;vb++)gb[vb]=jb[vb].val,sb[vb]=jb[vb].text;break}}else gb=void 0;$a=M.convertTypedArray($a);return{key:za,label:la.label,tickFormat:la.tickformat,tickvals:gb,ticktext:sb,ordinal:M.isOrdinal(la),multiselect:la.multiselect,xIndex:ka,crossfilterDimensionIndex:ka,visibleIndex:la._index,height:Y,values:$a,paddedUnitValues:$a.map(ta),
unitTickvals:gb&&gb.map(ta),xScale:ma,x:ma(ka),canvasX:ma(ka)*ja,unitToPaddedPx:oa,domainScale:a(Y,Q.verticalPadding,la,gb,sb),ordinalScale:r(la),parent:xa,model:U,brush:Z.makeBrush(W,Xa,Ia,function(){W.linePickActive(!1)},function(){xa.focusLayer&&xa.focusLayer.render(xa.panels,!0);var qb=c(xa);!W.contextShown()&&qb?(xa.contextLayer&&xa.contextLayer.render(xa.panels,!0),W.contextShown(!0)):W.contextShown()&&!qb&&(xa.contextLayer&&xa.contextLayer.render(xa.panels,!0,!0),W.contextShown(!1))},function(qb){xa.focusLayer.render(xa.panels,
!0);xa.pickLayer&&xa.pickLayer.render(xa.panels,!0);W.linePickActive(!0);if(T&&T.filterChanged){var Bb=ta.invert;qb=qb.map(function(ub){return ub.map(Bb).sort(A.sorterAsc)}).sort(function(ub,wb){return ub[0]-wb[0]});T.filterChanged(xa.key,la._index,qb)}})}});return xa}function f(W){W.classed(Q.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function q(){var W=!0,T=!1;return{linePickActive:function(U){return arguments.length?W=!!U:W},contextShown:function(U){return arguments.length?
T=!!U:T}}}function t(W,T){var U=W*Math.PI/180;return{dir:"top"===T?1:-1,dx:Math.sin(U),dy:Math.cos(U),degrees:W}}function w(W,T,U){var ha=T.panels||(T.panels=[]);W=W.data();for(var Y=0;Y<W.length-1;Y++){var ba=ha[Y]||(ha[Y]={}),ja=W[Y],ma=W[Y+1];ba.dim0=ja;ba.dim1=ma;ba.canvasX=ja.canvasX;ba.panelSizeX=ma.canvasX-ja.canvasX;ba.panelSizeY=T.model.canvasHeight;ba.y=0;ba.canvasY=0;ba.plotGlPixelRatio=U}}function x(W){for(var T=0;T<W.length;T++)for(var U=0;U<W[T].length;U++)for(var ha=W[T][U].trace,Y=
ha.dimensions,ba=0;ba<Y.length;ba++){var ja=Y[ba].values,ma=Y[ba]._ax;ma&&(ma.range=ma.range?k(ma.range[0],ma.range[1]):p(ja,ha._length),ma.dtick||(ma.dtick=.01*(Math.abs(ma.range[1]-ma.range[0])||1)),ma.tickformat=Y[ba].tickformat,v.calcTicks(ma),ma.cleanRange())}}function z(W,T){if(W.ordinal)return"";var U=W.domainScale.domain();return v.tickText(W.model.dimensions[W.visibleIndex]._ax,U[T?U.length-1:0],!1).text}var B=b("@plotly/d3"),A=b("../../lib"),D=A.numberFormat,C=b("color-rgba"),v=b("../../plots/cartesian/axes"),
y=A.strRotate,F=A.strTranslate,J=b("../../lib/svg_text_utils"),K=b("../../components/drawing"),O=b("../../components/colorscale");G=b("../../lib/gup");var I=G.keyFun,L=G.repeat,H=G.unwrap,M=b("./helpers"),Q=b("./constants"),Z=b("./axisbrush"),ca=b("./lines");N.exports=function(W,T,U,ha){var Y=W._fullLayout,ba=Y._toppaper;Y=Y._glcontainer;var ja=W._context.plotGlPixelRatio,ma=W._fullLayout.paper_bgcolor;x(T);var ia=q(),oa=T.filter(function(ka){return H(ka).trace.visible}).map(d.bind(0,U)).map(e.bind(0,
ia,ha));Y.each(function(ka,na){return A.extendFlat(ka,oa[na])});T=Y.selectAll(".gl-canvas").each(function(ka){ka.viewModel=oa[0];ka.viewModel.plotGlPixelRatio=ja;ka.viewModel.paperColor=ma;ka.model=ka.viewModel?ka.viewModel.model:null});var xa=null;T.filter(function(ka){return ka.pick}).style("pointer-events","auto").on("mousemove",function(ka){if(ia.linePickActive()&&ka.lineLayer&&ha&&ha.hover){var na=B.event,qa=this.width,ta=this.height,za=B.mouse(this),Ia=za[0];za=za[1];0>Ia||0>za||Ia>=qa||za>=
ta||(ta=ka.lineLayer.readPixel(Ia,ta-1-za),ta=(qa=0!==ta[3])?ta[2]+256*(ta[1]+256*ta[0]):null,ka={x:Ia,y:za,clientX:na.clientX,clientY:na.clientY,dataIndex:ka.model.key,curveNumber:ta},ta!==xa&&(qa?ha.hover(ka):ha.unhover&&ha.unhover(ka),xa=ta))}});T.style("opacity",function(ka){return ka.pick?0:1});ba.style("background","rgba(255, 255, 255, 0)");ba=ba.selectAll("."+Q.cn.parcoords).data(oa,I);ba.exit().remove();ba.enter().append("g").classed(Q.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events",
"none");ba.attr("transform",function(ka){return F(ka.model.translateX,ka.model.translateY)});ba=ba.selectAll("."+Q.cn.parcoordsControlView).data(L,I);ba.enter().append("g").classed(Q.cn.parcoordsControlView,!0);ba.attr("transform",function(ka){return F(ka.model.pad.l,ka.model.pad.t)});var ra=ba.selectAll("."+Q.cn.yAxis).data(function(ka){return ka.dimensions},I);ra.enter().append("g").classed(Q.cn.yAxis,!0);ba.each(function(ka){w(ra,ka,ja)});T.each(function(ka){if(ka.viewModel){!ka.lineLayer||ha?
ka.lineLayer=ca(this,ka):ka.lineLayer.update(ka);if(ka.key||0===ka.key)ka.viewModel[ka.key]=ka.lineLayer;ka.lineLayer.render(ka.viewModel.panels,!ka.context||ha)}});ra.attr("transform",function(ka){return F(ka.xScale(ka.xIndex),0)});ra.call(B.behavior.drag().origin(function(ka){return ka}).on("drag",function(ka){var na=ka.parent;ia.linePickActive(!1);ka.x=Math.max(-Q.overdrag,Math.min(ka.model.width+Q.overdrag,B.event.x));ka.canvasX=ka.x*ka.model.canvasPixelRatio;ra.sort(function(qa,ta){return qa.x-
ta.x}).each(function(qa,ta){qa.xIndex=ta;qa.x=ka===qa?qa.x:qa.xScale(qa.xIndex);qa.canvasX=qa.x*qa.model.canvasPixelRatio});w(ra,na,ja);ra.filter(function(qa){return 0!==Math.abs(ka.xIndex-qa.xIndex)}).attr("transform",function(qa){return F(qa.xScale(qa.xIndex),0)});B.select(this).attr("transform",F(ka.x,0));ra.each(function(qa,ta,za){za===ka.parent.key&&(na.dimensions[ta]=qa)});na.contextLayer&&na.contextLayer.render(na.panels,!1,!c(na));na.focusLayer.render&&na.focusLayer.render(na.panels)}).on("dragend",
function(ka){var na=ka.parent;ka.x=ka.xScale(ka.xIndex);ka.canvasX=ka.x*ka.model.canvasPixelRatio;w(ra,na,ja);B.select(this).attr("transform",function(qa){return F(qa.x,0)});na.contextLayer&&na.contextLayer.render(na.panels,!1,!c(na));na.focusLayer&&na.focusLayer.render(na.panels);na.pickLayer&&na.pickLayer.render(na.panels,!0);ia.linePickActive(!0);ha&&ha.axesMoved&&ha.axesMoved(na.key,na.dimensions.map(function(qa){return qa.crossfilterDimensionIndex}))}));ra.exit().remove();ba=ra.selectAll("."+
Q.cn.axisOverlays).data(L,I);ba.enter().append("g").classed(Q.cn.axisOverlays,!0);ba.selectAll("."+Q.cn.axis).remove();var la=ba.selectAll("."+Q.cn.axis).data(L,I);la.enter().append("g").classed(Q.cn.axis,!0);la.each(function(ka){var na=ka.model.height/ka.model.tickDistance,qa=ka.domainScale,ta=qa.domain();B.select(this).call(B.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(na,ka.tickFormat).tickValues(ka.ordinal?ta:null).tickFormat(function(za){return M.isOrdinal(ka)?za:v.tickText(ka.model.dimensions[ka.visibleIndex]._ax,
za,!1).text}).scale(qa));K.font(la.selectAll("text"),ka.model.tickFont)});la.selectAll(".domain, .tick\x3eline").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px");la.selectAll("text").style("text-shadow",J.makeTextShadow(ma)).style("cursor","default");T=ba.selectAll("."+Q.cn.axisHeading).data(L,I);T.enter().append("g").classed(Q.cn.axisHeading,!0);T=T.selectAll("."+Q.cn.axisTitle).data(L,I);T.enter().append("text").classed(Q.cn.axisTitle,!0).attr("text-anchor",
"middle").style("cursor","ew-resize").style("pointer-events","auto");T.text(function(ka){return ka.label}).each(function(ka){var na=B.select(this);K.font(na,ka.model.labelFont);J.convertToTspans(na,W)}).attr("transform",function(ka){var na=t(ka.model.labelAngle,ka.model.labelSide),qa=Q.axisTitleOffset;return(0<na.dir?"":F(0,2*qa+ka.model.height))+y(na.degrees)+F(-qa*na.dx,-qa*na.dy)}).attr("text-anchor",function(ka){ka=t(ka.model.labelAngle,ka.model.labelSide);return 2*Math.abs(ka.dx)>Math.abs(ka.dy)?
0>ka.dir*ka.dx?"start":"end":"middle"});T=ba.selectAll("."+Q.cn.axisExtent).data(L,I);T.enter().append("g").classed(Q.cn.axisExtent,!0);U=T.selectAll("."+Q.cn.axisExtentTop).data(L,I);U.enter().append("g").classed(Q.cn.axisExtentTop,!0);U.attr("transform",F(0,-Q.axisExtentOffset));U=U.selectAll("."+Q.cn.axisExtentTopText).data(L,I);U.enter().append("text").classed(Q.cn.axisExtentTopText,!0).call(f);U.text(function(ka){return z(ka,!0)}).each(function(ka){K.font(B.select(this),ka.model.rangeFont)});
T=T.selectAll("."+Q.cn.axisExtentBottom).data(L,I);T.enter().append("g").classed(Q.cn.axisExtentBottom,!0);T.attr("transform",function(ka){return F(0,ka.model.height+Q.axisExtentOffset)});T=T.selectAll("."+Q.cn.axisExtentBottomText).data(L,I);T.enter().append("text").classed(Q.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(f);T.text(function(ka){return z(ka,!1)}).each(function(ka){K.font(B.select(this),ka.model.rangeFont)});Z.ensureAxisBrush(ba,ma)}},{"../../components/colorscale":678,"../../components/drawing":688,
"../../lib":803,"../../lib/gup":800,"../../lib/svg_text_utils":829,"../../plots/cartesian/axes":854,"./axisbrush":1181,"./constants":1184,"./helpers":1186,"./lines":1188,"@plotly/d3":58,"color-rgba":133}],1191:[function(b,N,G){function p(g,h,r){r=h.indexOf(r);g=g.indexOf(r);-1===g&&(g+=h.length);return g}function n(g,h){return function(r,l){return p(g,h,r)-p(g,h,l)}}var k=b("./parcoords"),m=b("../../lib/prepare_regl"),a=b("./helpers").isVisible;N.exports=function(g,h){var r=g._fullLayout;if(m(g)){var l=
{},c={},d={},e={},f=r._size;h.forEach(function(q,t){q=q[0].trace;d[t]=q.index;q=e[t]=q._fullInput.index;l[t]=g.data[q].dimensions;c[t]=g.data[q].dimensions.slice()});k(g,h,{width:f.w,height:f.h,margin:{t:f.t,r:f.r,b:f.b,l:f.l}},{filterChanged:function(q,t,w){var x=c[q][t];w=w.map(function(A){return A.slice()});var z="dimensions["+t+"].constraintrange",B=r._tracePreGUI[g._fullData[d[q]]._fullInput.uid];void 0===B[z]&&(B[z]=x.constraintrange||null);t=g._fullData[d[q]].dimensions[t];w.length?(1===w.length&&
(w=w[0]),x.constraintrange=w,t.constraintrange=w.slice(),w=[w]):(delete x.constraintrange,delete t.constraintrange,w=null);x={};x[z]=w;g.emit("plotly_restyle",[x,[e[q]]])},hover:function(q){g.emit("plotly_hover",q)},unhover:function(q){g.emit("plotly_unhover",q)},axesMoved:function(q,t){t=n(t,c[q].filter(a));l[q].sort(t);c[q].filter(function(w){return!a(w)}).sort(function(w){return c[q].indexOf(w)}).forEach(function(w){l[q].splice(l[q].indexOf(w),1);l[q].splice(c[q].indexOf(w),0,w)});g.emit("plotly_restyle",
[{dimensions:[l[q]]},[e[q]]])}})}}},{"../../lib/prepare_regl":816,"./helpers":1186,"./parcoords":1190}],1192:[function(b,N,G){G=b("../../plots/attributes");var p=b("../../plots/domain").attributes,n=b("../../plots/font_attributes"),k=b("../../components/color/attributes"),m=b("../../plots/template_attributes").hovertemplateAttrs,a=b("../../plots/template_attributes").texttemplateAttrs;b=b("../../lib/extend").extendFlat;n=n({editType:"plot",arrayOk:!0,colorEditType:"plot"});N.exports={labels:{valType:"data_array",
editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:k.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},
scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:b({},G.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:m({},{keys:["label","color","value","percent","text"]}),texttemplate:a({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},
textfont:b({},n,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:b({},n,{}),outsidetextfont:b({},n,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:b({},n,{}),position:{valType:"enumerated",values:"top left;top center;top right;middle center;bottom left;bottom center;bottom right".split(";"),editType:"plot"},editType:"plot"},domain:p({name:"pie",
trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:b({},n,{}),titleposition:{valType:"enumerated",
values:"top left;top center;top right;middle center;bottom left;bottom center;bottom right".split(";"),editType:"calc"}}}},{"../../components/color/attributes":665,"../../lib/extend":793,"../../plots/attributes":850,"../../plots/domain":882,"../../plots/font_attributes":883,"../../plots/template_attributes":926}],1193:[function(b,N,G){var p=b("../../plots/plots");G.name="pie";G.plot=function(n,k,m,a){p.plotBasePlot(G.name,n,k,m,a)};G.clean=function(n,k,m,a){p.cleanBasePlot(G.name,n,k,m,a)}},{"../../plots/plots":917}],
1194:[function(b,N,G){function p(h){return function(r,l){if(!r)return!1;r=m(r);if(!r.isValid())return!1;r=a.addOpacity(r,r.getAlpha());h[l]||(h[l]=r);return r}}function n(h,r){var l,c=JSON.stringify(h),d=r[c];if(!d){d=h.slice();for(l=0;l<h.length;l++)d.push(m(h[l]).lighten(20).toHexString());for(l=0;l<h.length;l++)d.push(m(h[l]).darken(20).toHexString());r[c]=d}return d}var k=b("fast-isnumeric"),m=b("tinycolor2"),a=b("../../components/color"),g={};N.exports={calc:function(h,r){var l=[],c=h._fullLayout;
h=c.hiddenlabels||[];var d=r.labels,e=r.marker.colors||[],f=r.values,q=r._length,t=r._hasValues&&q,w;if(r.dlabel)for(d=Array(q),w=0;w<q;w++)d[w]=String(r.label0+w*r.dlabel);var x={};c=p(c["_"+r.type+"colormap"]);var z=0,B=!1;for(w=0;w<q;w++){if(t){var A=f[w];if(!k(A))continue;A=+A;if(0>A)continue}else A=1;var D=d[w];if(void 0===D||""===D)D=w;D=String(D);var C=x[D];void 0===C?(x[D]=l.length,(C=-1!==h.indexOf(D))||(z+=A),l.push({v:A,label:D,color:c(e[w],D),i:w,pts:[w],hidden:C})):(B=!0,C=l[C],C.v+=
A,C.pts.push(w),C.hidden||(z+=A),!1===C.color&&e[w]&&(C.color=c(e[w],D)))}("funnelarea"===r.type?B:r.sort)&&l.sort(function(v,y){return y.v-v.v});l[0]&&(l[0].vTotal=z);return l},crossTraceCalc:function(h,r){(r=(r||{}).type)||(r="pie");var l=h._fullLayout;h=h.calcdata;var c=l[r+"colorway"],d=l["_"+r+"colormap"];l["extend"+r+"colors"]&&(c=n(c,g));for(var e=l=0;e<h.length;e++){var f=h[e];if(f[0].trace.type===r)for(var q=0;q<f.length;q++){var t=f[q];!1===t.color&&(d[t.label]?t.color=d[t.label]:(d[t.label]=
t.color=c[l%c.length],l++))}}},makePullColorFn:p,generateExtendedColors:n}},{"../../components/color":666,"fast-isnumeric":249,tinycolor2:598}],1195:[function(b,N,G){function p(h,r){var l=Array.isArray(h),c=k.isArrayOrTypedArray(r);h=Math.min(l?h.length:Infinity,c?r.length:Infinity);isFinite(h)||(h=0);if(h&&c){for(var d,e=0;e<h;e++){var f=r[e];if(n(f)&&0<f){d=!0;break}}d||(h=0)}return{hasLabels:l,hasValues:c,len:h}}var n=b("fast-isnumeric"),k=b("../../lib"),m=b("./attributes"),a=b("../../plots/domain").defaults,
g=b("../bar/defaults").handleText;N.exports={handleLabelsAndValues:p,supplyDefaults:function(h,r,l,c){function d(q,t){return k.coerce(h,r,m,q,t)}l=d("labels");var e=d("values");l=p(l,e);e=l.len;r._hasLabels=l.hasLabels;r._hasValues=l.hasValues;!r._hasLabels&&r._hasValues&&(d("label0"),d("dlabel"));if(e){r._length=e;d("marker.line.width")&&d("marker.line.color");d("marker.colors");d("scalegroup");l=d("text");e=d("texttemplate");var f;e||(f=d("textinfo",Array.isArray(l)?"text+percent":"percent"));d("hovertext");
d("hovertemplate");if(e||f&&"none"!==f)f=d("textposition"),g(h,r,c,d,f,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(f)||"auto"===f||"outside"===f)&&d("automargin"),("inside"===f||"auto"===f||Array.isArray(f))&&d("insidetextorientation");a(r,c,d);f=d("hole");d("title.text")&&(l=d("title.position",f?"middle center":"top center"),f||"middle center"!==l||(r.title.position="top center"),k.coerceFont(d,
"title.font",c.font));d("sort");d("direction");d("rotation");d("pull")}else r.visible=!1}}},{"../../lib":803,"../../plots/domain":882,"../bar/defaults":945,"./attributes":1192,"fast-isnumeric":249}],1196:[function(b,N,G){var p=b("../../components/fx/helpers").appendArrayMultiPointValues;N.exports=function(n,k){var m={curveNumber:k.index,pointNumbers:n.pts,data:k._input,fullData:k,label:n.label,color:n.color,value:n.v,percent:n.percent,text:n.text,v:n.v};1===n.pts.length&&(m.pointNumber=m.i=n.pts[0]);
p(m,k,n.pts);"funnelarea"===k.type&&(delete m.v,delete m.i);return m}},{"../../components/fx/helpers":702}],1197:[function(b,N,G){function p(k){return-1!==k.indexOf("e")?k.replace(/[.]?0+e/,"e"):-1!==k.indexOf(".")?k.replace(/[.]?0+$/,""):k}var n=b("../../lib");G.formatPiePercent=function(k,m){k=p((100*k).toPrecision(3));return n.numSeparate(k,m)+"%"};G.formatPieValue=function(k,m){k=p(k.toPrecision(10));return n.numSeparate(k,m)};G.getFirstFilled=function(k,m){if(Array.isArray(k))for(var a=0;a<m.length;a++){var g=
k[m[a]];if(g||0===g||""===g)return g}};G.castOption=function(k,m){if(Array.isArray(k))return G.getFirstFilled(k,m);if(k)return k};G.getRotationAngle=function(k){return("auto"===k?0:k)*Math.PI/180}},{"../../lib":803}],1198:[function(b,N,G){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults").supplyDefaults,supplyLayoutDefaults:b("./layout_defaults"),layoutAttributes:b("./layout_attributes"),calc:b("./calc").calc,crossTraceCalc:b("./calc").crossTraceCalc,plot:b("./plot").plot,style:b("./style"),
styleOne:b("./style_one"),moduleType:"trace",name:"pie",basePlotModule:b("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":1192,"./base_plot":1193,"./calc":1194,"./defaults":1195,"./layout_attributes":1199,"./layout_defaults":1200,"./plot":1201,"./style":1202,"./style_one":1203}],1199:[function(b,N,G){N.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},
{}],1200:[function(b,N,G){var p=b("../../lib"),n=b("./layout_attributes");N.exports=function(k,m){p.coerce(k,m,n,"hiddenlabels",void 0);p.coerce(k,m,n,"piecolorway",m.colorway);p.coerce(k,m,n,"extendpiecolors",void 0)}},{"../../lib":803,"./layout_attributes":1199}],1201:[function(b,N,G){function p(ca,W){ca.each(function(T){var U=A.select(this);if(T.labelExtraX||T.labelExtraY){var ha=U.select("g.slicetext text");T.transform.targetX+=T.labelExtraX;T.transform.targetY+=T.labelExtraY;ha.attr("transform",
F.getTextTransform(T.transform));ha=T.cxFinal+T.pxmid[0];var Y="M"+ha+","+(T.cyFinal+T.pxmid[1]),ba=(T.yLabelMax-T.yLabelMin)*(0>T.pxmid[0]?-1:1)/4;if(T.labelExtraX){var ja=T.labelExtraX*T.pxmid[1]/T.pxmid[0],ma=T.yLabelMid+T.labelExtraY-(T.cyFinal+T.pxmid[1]);Y=Math.abs(ja)>Math.abs(ma)?Y+("l"+ma*T.pxmid[0]/T.pxmid[1]+","+ma+"H"+(ha+T.labelExtraX+ba)):Y+("l"+T.labelExtraX+","+ja+"v"+(ma-ja)+"h"+ba)}else Y+="V"+(T.yLabelMid+T.labelExtraY)+"h"+ba;F.ensureSingle(U,"path","textline").call(v.stroke,W.outsidetextfont.color).attr({"stroke-width":Math.min(2,
W.outsidetextfont.size/8),d:Y,fill:"none"})}else U.select("path.textline").remove()})}function n(ca,W,T){var U=T[0],ha=U.trace,Y=U.cx,ba=U.cy;"_hasHoverLabel"in ha||(ha._hasHoverLabel=!1);"_hasHoverEvent"in ha||(ha._hasHoverEvent=!1);ca.on("mouseover",function(ja){var ma=W._fullLayout,ia=W._fullData[ha.index];if(!W._dragging&&!1!==ma.hovermode){var oa=ia.hoverinfo;Array.isArray(oa)&&(oa=C.castHoverinfo({hoverinfo:[M.castOption(oa,ja.pts)],_module:ha._module},ma,0));"all"===oa&&(oa="label+text+value+percent+name");
if(ia.hovertemplate||"none"!==oa&&"skip"!==oa&&oa){var xa=ja.rInscribed||0,ra=Y+ja.pxmid[0]*(1-xa),la=ba+ja.pxmid[1]*(1-xa),ka=ma.separators,na=[];oa&&-1!==oa.indexOf("label")&&na.push(ja.label);ja.text=M.castOption(ia.hovertext||ia.text,ja.pts);if(oa&&-1!==oa.indexOf("text")){var qa=ja.text;F.isValidTextValue(qa)&&na.push(qa)}ja.value=ja.v;ja.valueLabel=M.formatPieValue(ja.v,ka);oa&&-1!==oa.indexOf("value")&&na.push(ja.valueLabel);ja.percent=ja.v/U.vTotal;ja.percentLabel=M.formatPiePercent(ja.percent,
ka);oa&&-1!==oa.indexOf("percent")&&na.push(ja.percentLabel);ka=ia.hoverlabel;qa=ka.font;C.loneHover({trace:ha,x0:ra-xa*U.r,x1:ra+xa*U.r,y:la,text:na.join("\x3cbr\x3e"),name:ia.hovertemplate||-1!==oa.indexOf("name")?ia.name:void 0,idealAlign:0>ja.pxmid[0]?"left":"right",color:M.castOption(ka.bgcolor,ja.pts)||ja.color,borderColor:M.castOption(ka.bordercolor,ja.pts),fontFamily:M.castOption(qa.family,ja.pts),fontSize:M.castOption(qa.size,ja.pts),fontColor:M.castOption(qa.color,ja.pts),nameLength:M.castOption(ka.namelength,
ja.pts),textAlign:M.castOption(ka.align,ja.pts),hovertemplate:M.castOption(ia.hovertemplate,ja.pts),hovertemplateLabels:ja,eventData:[Q(ja,ia)]},{container:ma._hoverlayer.node(),outerContainer:ma._paper.node(),gd:W});ha._hasHoverLabel=!0}ha._hasHoverEvent=!0;W.emit("plotly_hover",{points:[Q(ja,ia)],event:A.event})}});ca.on("mouseout",function(ja){var ma=W._fullLayout,ia=W._fullData[ha.index],oa=A.select(this).datum();ha._hasHoverEvent&&(ja.originalEvent=A.event,W.emit("plotly_unhover",{points:[Q(oa,
ia)],event:A.event}),ha._hasHoverEvent=!1);ha._hasHoverLabel&&(C.loneUnhover(ma._hoverlayer.node()),ha._hasHoverLabel=!1)});ca.on("click",function(ja){var ma=W._fullLayout;W._dragging||!1===ma.hovermode||(W._hoverdata=[Q(ja,W._fullData[ha.index])],C.click(W,A.event))})}function k(ca,W,T){var U=M.castOption(ca.outsidetextfont.color,W.pts)||M.castOption(ca.textfont.color,W.pts)||T.color,ha=M.castOption(ca.outsidetextfont.family,W.pts)||M.castOption(ca.textfont.family,W.pts)||T.family;ca=M.castOption(ca.outsidetextfont.size,
W.pts)||M.castOption(ca.textfont.size,W.pts)||T.size;return{color:U,family:ha,size:ca}}function m(ca,W,T){var U=M.castOption(ca.insidetextfont.color,W.pts);!U&&ca._input.textfont&&(U=M.castOption(ca._input.textfont.color,W.pts));var ha=M.castOption(ca.insidetextfont.family,W.pts)||M.castOption(ca.textfont.family,W.pts)||T.family;ca=M.castOption(ca.insidetextfont.size,W.pts)||M.castOption(ca.textfont.size,W.pts)||T.size;return{color:U||v.contrast(W.color),family:ha,size:ca}}function a(ca,W){for(var T,
U,ha=0;ha<ca.length;ha++)if(T=ca[ha][0],U=T.trace,U.title.text){var Y=U.title.text;U._meta&&(Y=F.templateString(Y,U._meta));U=y.tester.append("text").attr("data-notex",1).text(Y).call(y.font,U.title.font).call(O.convertToTspans,W);Y=y.bBox(U.node(),!0);T.titleBox={width:Y.width,height:Y.height};U.remove()}}function g(ca,W,T){var U=T.r||W.rpx1,ha=W.rInscribed;if(W.startangle===W.stopangle)return{rCenter:1-ha,scale:0,rotate:0,textPosAngle:0};var Y=W.ring,ba=1===Y&&Math.abs(W.startangle-W.stopangle)===
2*Math.PI,ja=W.halfangle,ma=W.midangle;T=T.trace.insidetextorientation;var ia="horizontal"===T,oa="tangential"===T,xa="radial"===T;T="auto"===T;var ra=[];if(!T){var la=function(qa,ta){var za=W.startangle,Ia=W.stopangle;if(za>qa&&qa>Ia||za<qa&&qa<Ia)za=Math.abs(qa-W.startangle),Ia=Math.abs(qa-W.stopangle),za=za<Ia?za:Ia,na="tan"===ta?r(ca,U,Y,za,0):h(ca,U,Y,za,Math.PI/2),na.textPosAngle=qa,ra.push(na)},ka;if(ia||oa){for(ka=4;-4<=ka;ka-=2)la(Math.PI*ka,"tan");for(ka=4;-4<=ka;ka-=2)la(Math.PI*(ka+1),
"tan")}if(ia||xa){for(ka=4;-4<=ka;ka-=2)la(Math.PI*(ka+1.5),"rad");for(ka=4;-4<=ka;ka-=2)la(Math.PI*(ka+.5),"rad")}}if(ba||T||ia){var na={scale:ha*U*2/Math.sqrt(ca.width*ca.width+ca.height*ca.height),rCenter:1-ha,rotate:0};na.textPosAngle=(W.startangle+W.stopangle)/2;if(1<=na.scale)return na;ra.push(na)}if(T||xa)na=h(ca,U,Y,ja,ma),na.textPosAngle=(W.startangle+W.stopangle)/2,ra.push(na);if(T||oa)na=r(ca,U,Y,ja,ma),na.textPosAngle=(W.startangle+W.stopangle)/2,ra.push(na);for(ja=ba=ha=0;ja<ra.length&&
(ma=ra[ja].scale,ba<ma&&(ba=ma,ha=ja),T||!(1<=ba));ja++);return ra[ha]}function h(ca,W,T,U,ha){W=Math.max(0,W-2*H);var Y=ca.width/ca.height;T=l(Y,U,W,T);W=T/W;return{scale:2*T/ca.height,rCenter:Math.cos(W)-Y*W,rotate:(180/Math.PI*ha+720)%180-90}}function r(ca,W,T,U,ha){W=Math.max(0,W-2*H);var Y=ca.height/ca.width;T=l(Y,U,W,T);W=T/W;return{scale:2*T/ca.width,rCenter:Math.cos(W)-Y*W,rotate:(180/Math.PI*(ha+Math.PI/2)+720)%180-90}}function l(ca,W,T,U){W=ca+1/(2*Math.tan(W));return T*Math.min(1/(Math.sqrt(W*
W+.5)+W),U/(Math.sqrt(ca*ca+U/2)+ca))}function c(ca,W){var T=W.pxmid[0];W=W.pxmid[1];var U=ca.width/2;ca=ca.height/2;0>T&&(U*=-1);0>W&&(ca*=-1);return{scale:1,rCenter:1,rotate:0,x:U+Math.abs(ca)*(0<U?1:-1)/2,y:ca/(1+T*T/(W*W)),outside:!0}}function d(ca,W){var T=ca.trace,U=ca.cx,ha=ca.cy,Y=0;var ba=0+T.title.font.size;var ja=f(T);-1!==T.title.position.indexOf("top")?(ha-=(1+ja)*ca.r,ba-=ca.titleBox.height):-1!==T.title.position.indexOf("bottom")&&(ha+=(1+ja)*ca.r);var ma=ca.trace.aspectratio;ma=ca.r/
(void 0===ma?1:ma);var ia=W.w*(T.domain.x[1]-T.domain.x[0])/2;-1!==T.title.position.indexOf("left")?(ia+=ma,U-=(1+ja)*ma,Y+=ca.titleBox.width/2):-1!==T.title.position.indexOf("center")?ia*=2:-1!==T.title.position.indexOf("right")&&(ia+=ma,U+=(1+ja)*ma,Y-=ca.titleBox.width/2);ja=ia/ca.titleBox.width;ca=e(ca,W)/ca.titleBox.height;return{x:U,y:ha,scale:Math.min(ja,ca),tx:Y,ty:ba}}function e(ca,W){var T=ca.trace;return Math.min(ca.titleBox.height,W.h*(T.domain.y[1]-T.domain.y[0])/2)}function f(ca){var W=
ca.pull;if(!W)return 0;var T;if(Array.isArray(W))for(T=W=0;T<ca.pull.length;T++)ca.pull[T]>W&&(W=ca.pull[T]);return W}function q(ca,W){function T(ta,za){return ta.pxmid[1]-za.pxmid[1]}function U(ta,za){return za.pxmid[1]-ta.pxmid[1]}function ha(ta,za){za||(za={});var Ia=za.labelExtraY+(ba?za.yLabelMax:za.yLabelMin);za=ba?ta.yLabelMin:ta.yLabelMax;var Xa=ba?ta.yLabelMax:ta.yLabelMin,$a=ta.cyFinal+ia(ta.px0[1],ta.px1[1]),gb=Ia-za;0<gb*oa&&(ta.labelExtraY=gb);if(Array.isArray(W.pull))for(Ia=0;Ia<na.length;Ia++){var sb=
na[Ia];sb===ta||(M.castOption(W.pull,ta.pts)||0)>=(M.castOption(W.pull,sb.pts)||0)||(0<(ta.pxmid[1]-sb.pxmid[1])*oa?(gb=sb.cyFinal+ia(sb.px0[1],sb.px1[1]),gb=gb-za-ta.labelExtraY,0<gb*oa&&(ta.labelExtraY+=gb)):0<(Xa+ta.labelExtraY-$a)*oa&&(gb=3*ra*Math.abs(Ia-na.indexOf(ta)),sb=sb.cxFinal+xa(sb.px0[0],sb.px1[0]),gb=sb+gb-(ta.cxFinal+ta.pxmid[0])-ta.labelExtraX,0<gb*ra&&(ta.labelExtraX+=gb)))}}var Y,ba,ja;for(ba=0;2>ba;ba++){var ma=ba?T:U;var ia=ba?Math.max:Math.min;var oa=ba?1:-1;for(Y=0;2>Y;Y++){var xa=
Y?Math.max:Math.min;var ra=Y?1:-1;var la=ca[ba][Y];la.sort(ma);var ka=ca[1-ba][Y];var na=ka.concat(la);var qa=[];for(ja=0;ja<la.length;ja++)void 0!==la[ja].yLabelMid&&qa.push(la[ja]);la=!1;for(ja=0;ba&&ja<ka.length;ja++)if(void 0!==ka[ja].yLabelMid){la=ka[ja];break}for(ja=0;ja<qa.length;ja++)ka=ja&&qa[ja-1],la&&!ja&&(ka=la),ha(qa[ja],ka)}}}function t(ca,W){for(var T=[],U=0;U<ca.length;U++){var ha=ca[U][0],Y=ha.trace,ba=Y.domain,ja=W.w*(ba.x[1]-ba.x[0]);ba=W.h*(ba.y[1]-ba.y[0]);Y.title.text&&"middle center"!==
Y.title.position&&(ba-=e(ha,W));ja/=2;var ma=ba/2;"funnelarea"!==Y.type||Y.scalegroup||(ma/=Y.aspectratio);ha.r=Math.min(ja,ma)/(1+f(Y));ha.cx=W.l+W.w*(Y.domain.x[1]+Y.domain.x[0])/2;ha.cy=W.t+W.h*(1-Y.domain.y[0])-ba/2;Y.title.text&&-1!==Y.title.position.indexOf("bottom")&&(ha.cy-=e(ha,W));Y.scalegroup&&-1===T.indexOf(Y.scalegroup)&&T.push(Y.scalegroup)}for(Y=0;Y<T.length;Y++){ba=Infinity;ja=T[Y];for(U=0;U<ca.length;U++)if(W=ca[U][0],ha=W.trace,ha.scalegroup===ja){if("pie"===ha.type)var ia=W.r*W.r;
else"funnelarea"===ha.type&&(1<ha.aspectratio?(ia=W.r,ma=ia/ha.aspectratio):(ma=W.r,ia=ma*ha.aspectratio),ia*=(1+ha.baseratio)/2,ia*=ma);ba=Math.min(ba,ia/W.vTotal)}for(U=0;U<ca.length;U++)W=ca[U][0],ha=W.trace,ha.scalegroup===ja&&(ma=ba*W.vTotal,"funnelarea"===ha.type&&(ma/=(1+ha.baseratio)/2,ma/=ha.aspectratio),W.r=Math.sqrt(ma))}}function w(ca){var W=ca[0],T=W.r,U=W.trace,ha=M.getRotationAngle(U.rotation),Y=2*Math.PI/W.vTotal,ba="px0",ja="px1",ma;if("counterclockwise"===U.direction){for(ma=0;ma<
ca.length&&ca[ma].hidden;ma++);if(ma===ca.length)return;ha+=Y*ca[ma].v;Y*=-1;ba="px1";ja="px0"}var ia=x(T,ha);for(ma=0;ma<ca.length;ma++){var oa=ca[ma];if(!oa.hidden){oa[ba]=ia;oa.startangle=ha;ha+=Y*oa.v/2;oa.pxmid=x(T,ha);oa.midangle=ha;ha+=Y*oa.v/2;ia=x(T,ha);oa.stopangle=ha;oa[ja]=ia;oa.largeArc=oa.v>W.vTotal/2?1:0;oa.halfangle=Math.PI*Math.min(oa.v/W.vTotal,.5);oa.ring=1-U.hole;var xa=oa;oa=oa.v!==W.vTotal||W.trace.hole?Math.min(1/(1+1/Math.sin(oa.halfangle)),oa.ring/2):1;xa.rInscribed=oa}}}
function x(ca,W){return[ca*Math.sin(W),-ca*Math.cos(W)]}function z(ca,W,T){var U=ca._fullLayout,ha=T.trace,Y=ha.texttemplate,ba=ha.textinfo;if(!Y&&ba&&"none"!==ba){var ja=ba.split("+"),ma=-1!==ja.indexOf("label"),ia=-1!==ja.indexOf("text");ba=-1!==ja.indexOf("value");ja=-1!==ja.indexOf("percent");var oa=U.separators;ma=ma?[W.label]:[];ia&&(ia=M.getFirstFilled(ha.text,W.pts),Z(ia)&&ma.push(ia));ba&&ma.push(M.formatPieValue(W.v,oa));ja&&ma.push(M.formatPiePercent(W.v/T.vTotal,oa));W.text=ma.join("\x3cbr\x3e")}if(Y)if(Y=
F.castOption(ha,W.i,"texttemplate")){T={label:W.label,value:W.v,valueLabel:M.formatPieValue(W.v,U.separators),percent:W.v/T.vTotal,percentLabel:M.formatPiePercent(W.v/T.vTotal,U.separators),color:W.color,text:W.text,customdata:F.castOption(ha,W.i,"customdata")};U=M.getFirstFilled(ha.text,W.pts);if(Z(U)||""===U)T.text=U;W.text=F.texttemplateString(Y,T,ca._fullLayout._d3locale,T,ha._meta||{})}else W.text=""}function B(ca,W){var T=ca.rotate*Math.PI/180,U=Math.cos(T);T=Math.sin(T);var ha=(W.left+W.right)/
2;W=(W.top+W.bottom)/2;ca.textX=ha*U-W*T;ca.textY=ha*T+W*U;ca.noCenter=!0}var A=b("@plotly/d3"),D=b("../../plots/plots"),C=b("../../components/fx"),v=b("../../components/color"),y=b("../../components/drawing"),F=b("../../lib"),J=F.strScale,K=F.strTranslate,O=b("../../lib/svg_text_utils");G=b("../bar/uniform_text");var I=G.recordMinTextSize,L=G.clearMinTextSize,H=b("../bar/constants").TEXTPAD,M=b("./helpers"),Q=b("./event_data"),Z=b("../../lib").isValidTextValue;N.exports={plot:function(ca,W){var T=
ca._fullLayout,U=T._size;L("pie",T);a(W,ca);t(W,U);var ha=F.makeTraceGroups(T._pielayer,W,"trace").each(function(Y){var ba=A.select(this),ja=Y[0],ma=ja.trace;w(Y);ba.attr("stroke-linejoin","round");ba.each(function(){var ia=A.select(this).selectAll("g.slice").data(Y);ia.enter().append("g").classed("slice",!0);ia.exit().remove();var oa=[[[],[]],[[],[]]],xa=!1;ia.each(function(na,qa){function ta(qb,Bb,ub,wb){return"a"+wb*ja.r+","+wb*ja.r+" 0 "+na.largeArc+(ub?" 1 ":" 0 ")+wb*(Bb[0]-qb[0])+","+wb*(Bb[1]-
qb[1])}if(na.hidden)A.select(this).selectAll("path,g").remove();else{na.pointNumber=na.i;na.curveNumber=ma.index;oa[0>na.pxmid[1]?0:1][0>na.pxmid[0]?0:1].push(na);var za=ja.cx,Ia=ja.cy,Xa=A.select(this),$a=Xa.selectAll("path.surface").data([na]);$a.enter().append("path").classed("surface",!0).style({"pointer-events":"all"});Xa.call(n,ca,Y);if(ma.pull){var gb=+M.castOption(ma.pull,na.pts)||0;0<gb&&(za+=gb*na.pxmid[0],Ia+=gb*na.pxmid[1])}na.cxFinal=za;na.cyFinal=Ia;gb=ma.hole;if(na.v===ja.vTotal){var sb=
"M"+(za+na.px0[0])+","+(Ia+na.px0[1])+ta(na.px0,na.pxmid,!0,1)+ta(na.pxmid,na.px0,!0,1)+"Z";gb?$a.attr("d","M"+(za+gb*na.px0[0])+","+(Ia+gb*na.px0[1])+ta(na.px0,na.pxmid,!1,gb)+ta(na.pxmid,na.px0,!1,gb)+"Z"+sb):$a.attr("d",sb)}else if(sb=ta(na.px0,na.px1,!0,1),gb){var jb=1-gb;$a.attr("d","M"+(za+gb*na.px1[0])+","+(Ia+gb*na.px1[1])+ta(na.px1,na.px0,!1,gb)+"l"+jb*na.px0[0]+","+jb*na.px0[1]+sb+"Z")}else $a.attr("d","M"+za+","+Ia+"l"+na.px0[0]+","+na.px0[1]+sb+"Z");z(ca,na,ja);var vb=M.castOption(ma.textposition,
na.pts);Xa=Xa.selectAll("g.slicetext").data(na.text&&"none"!==vb?[0]:[]);Xa.enter().append("g").classed("slicetext",!0);Xa.exit().remove();Xa.each(function(){var qb=F.ensureSingle(A.select(this),"text","",function(Ab){Ab.attr("data-notex",1)}),Bb=F.ensureUniformFontSize(ca,"outside"===vb?k(ma,na,T.font):m(ma,na,T.font));qb.text(na.text).attr({"class":"slicetext",transform:"","text-anchor":"middle"}).call(y.font,Bb).call(O.convertToTspans,ca);var ub=y.bBox(qb.node());if("outside"===vb)var wb=c(ub,
na);else wb=g(ub,na,ja),"auto"===vb&&1>wb.scale&&(ub=F.ensureUniformFontSize(ca,ma.outsidetextfont),qb.call(y.font,ub),ub=y.bBox(qb.node()),wb=c(ub,na));var rb=wb.textPosAngle;rb=void 0===rb?na.pxmid:x(ja.r,rb);wb.targetX=za+rb[0]*wb.rCenter+(wb.x||0);wb.targetY=Ia+rb[1]*wb.rCenter+(wb.y||0);B(wb,ub);wb.outside&&(rb=wb.targetY,na.yLabelMin=rb-ub.height/2,na.yLabelMid=rb,na.yLabelMax=rb+ub.height/2,na.labelExtraX=0,na.labelExtraY=0,xa=!0);wb.fontSize=Bb.size;I(ma.type,wb,T);Y[qa].transform=wb;qb.attr("transform",
F.getTextTransform(wb))})}});var ra=A.select(this).selectAll("g.titletext").data(ma.title.text?[0]:[]);ra.enter().append("g").classed("titletext",!0);ra.exit().remove();ra.each(function(){var na=F.ensureSingle(A.select(this),"text","",function(ta){ta.attr("data-notex",1)}),qa=ma.title.text;ma._meta&&(qa=F.templateString(qa,ma._meta));na.text(qa).attr({"class":"titletext",transform:"","text-anchor":"middle"}).call(y.font,ma.title.font).call(O.convertToTspans,ca);qa="middle center"===ma.title.position?
{x:ja.cx,y:ja.cy,scale:ja.trace.hole*ja.r*2/Math.sqrt(ja.titleBox.width*ja.titleBox.width+ja.titleBox.height*ja.titleBox.height),tx:0,ty:-ja.titleBox.height/2+ja.trace.title.font.size}:d(ja,U);na.attr("transform",K(qa.x,qa.y)+J(Math.min(1,qa.scale))+K(qa.tx,qa.ty))});xa&&q(oa,ma);p(ia,ma);if(xa&&ma.automargin){ia=y.bBox(ba.node());ra=ma.domain;var la=(.5*U.w*(ra.x[1]-ra.x[0])-ja.r)/U.w,ka=(.5*U.h*(ra.y[1]-ra.y[0])-ja.r)/U.h;D.autoMargin(ca,"pie."+ma.uid+".automargin",{xl:ra.x[0]-la,xr:ra.x[1]+la,
yb:ra.y[0]-ka,yt:ra.y[1]+ka,l:Math.max(ja.cx-ja.r-ia.left,0),r:Math.max(ia.right-(ja.cx+ja.r),0),b:Math.max(ia.bottom-(ja.cy+ja.r),0),t:Math.max(ja.cy-ja.r-ia.top,0),pad:5})}})});setTimeout(function(){ha.selectAll("tspan").each(function(){var Y=A.select(this);Y.attr("dy")&&Y.attr("dy",Y.attr("dy"))})},0)},formatSliceLabel:z,transformInsideText:g,determineInsideTextFont:m,positionTitleOutside:d,prerenderTitles:a,layoutAreas:t,attachFxHandlers:n,computeTransform:B}},{"../../components/color":666,"../../components/drawing":688,
"../../components/fx":706,"../../lib":803,"../../lib/svg_text_utils":829,"../../plots/plots":917,"../bar/constants":943,"../bar/uniform_text":957,"./event_data":1196,"./helpers":1197,"@plotly/d3":58}],1202:[function(b,N,G){var p=b("@plotly/d3"),n=b("./style_one"),k=b("../bar/uniform_text").resizeText;N.exports=function(m){var a=m._fullLayout._pielayer.selectAll(".trace");k(m,a,"pie");a.each(function(g){var h=g[0].trace;g=p.select(this);g.style({opacity:h.opacity});g.selectAll("path.surface").each(function(r){p.select(this).call(n,
r,h)})})}},{"../bar/uniform_text":957,"./style_one":1203,"@plotly/d3":58}],1203:[function(b,N,G){var p=b("../../components/color"),n=b("./helpers").castOption;N.exports=function(k,m,a){var g=a.marker.line;a=n(g.color,m.pts)||p.defaultLine;g=n(g.width,m.pts)||0;k.style("stroke-width",g).call(p.fill,m.color).call(p.stroke,a)}},{"../../components/color":666,"./helpers":1197}],1204:[function(b,N,G){b=b("../scatter/attributes");N.exports={x:b.x,y:b.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",
editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:b.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",
min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},{"../scatter/attributes":1218}],1205:[function(b,N,G){function p(g,h){this.scene=g;this.uid=h;this.type="pointcloud";this.pickXData=[];this.pickYData=[];this.xData=[];this.yData=[];this.textLabels=[];this.color="rgb(0, 0, 0)";this.name="";this.hoverinfo="all";this.idToIndex=new Int32Array(0);this.bounds=[0,0,0,0];this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,
color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]};this.pointcloud=n(g.glplot,this.pointcloudOptions);this.pointcloud._trace=this}var n=b("gl-pointcloud2d"),k=b("../../lib/str2rgbarray"),m=b("../../plots/cartesian/autorange").findExtremes,a=b("../scatter/get_trace_color");b=p.prototype;b.handlePick=function(g){var h=this.idToIndex[g.pointId];return{trace:this,dataCoord:g.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*h],this.pickXYData[2*h+1]]:[this.pickXData[h],this.pickYData[h]],textLabel:Array.isArray(this.textLabels)?
this.textLabels[h]:this.textLabels,color:this.color,name:this.name,pointIndex:h,hoverinfo:this.hoverinfo}};b.update=function(g){this.index=g.index;this.textLabels=g.text;this.name=g.name;this.hoverinfo=g.hoverinfo;this.bounds=[Infinity,Infinity,-Infinity,-Infinity];this.updateFast(g);this.color=a(g,{})};b.updateFast=function(g){var h=this.xData=this.pickXData=g.x,r=this.yData=this.pickYData=g.y,l=this.pickXYData=g.xy,c=g.xbounds&&g.ybounds,d=g.indices,e=this.bounds,f;if(l){var q=l;l=l.length>>>1;
if(c)e[0]=g.xbounds[0],e[2]=g.xbounds[1],e[1]=g.ybounds[0],e[3]=g.ybounds[1];else for(f=0;f<l;f++){c=q[2*f];var t=q[2*f+1];c<e[0]&&(e[0]=c);c>e[2]&&(e[2]=c);t<e[1]&&(e[1]=t);t>e[3]&&(e[3]=t)}if(!d)for(d=new Int32Array(l),f=0;f<l;f++)d[f]=f}else for(l=h.length,q=new Float32Array(2*l),d=new Int32Array(l),f=0;f<l;f++)c=h[f],t=r[f],d[f]=f,q[2*f]=c,q[2*f+1]=t,c<e[0]&&(e[0]=c),c>e[2]&&(e[2]=c),t<e[1]&&(e[1]=t),t>e[3]&&(e[3]=t);this.idToIndex=d;this.pointcloudOptions.idToIndex=d;this.pointcloudOptions.positions=
q;l=k(g.marker.color);q=k(g.marker.border.color);d=g.opacity*g.marker.opacity;l[3]*=d;this.pointcloudOptions.color=l;l=g.marker.blend;null===l&&(l=100>h.length||100>r.length);this.pointcloudOptions.blend=l;q[3]*=d;this.pointcloudOptions.borderColor=q;q=Math.max(g.marker.sizemax,g.marker.sizemin);this.pointcloudOptions.sizeMin=g.marker.sizemin;this.pointcloudOptions.sizeMax=q;this.pointcloudOptions.areaRatio=g.marker.border.arearatio;this.pointcloud.update(this.pointcloudOptions);h=this.scene.xaxis;
r=this.scene.yaxis;q=q/2||.5;g._extremes[h._id]=m(h,[e[0],e[2]],{ppad:q});g._extremes[r._id]=m(r,[e[1],e[3]],{ppad:q})};b.dispose=function(){this.pointcloud.dispose()};N.exports=function(g,h){g=new p(g,h.uid);g.update(h);return g}},{"../../lib/str2rgbarray":828,"../../plots/cartesian/autorange":853,"../scatter/get_trace_color":1228,"gl-pointcloud2d":328}],1206:[function(b,N,G){var p=b("../../lib"),n=b("./attributes");N.exports=function(k,m,a){function g(h,r){return p.coerce(k,m,n,h,r)}g("x");g("y");
g("xbounds");g("ybounds");k.xy&&k.xy instanceof Float32Array&&(m.xy=k.xy);k.indices&&k.indices instanceof Int32Array&&(m.indices=k.indices);g("text");g("marker.color",a);g("marker.opacity");g("marker.blend");g("marker.sizemin");g("marker.sizemax");g("marker.border.color",a);g("marker.border.arearatio");m._length=null}},{"../../lib":803,"./attributes":1204}],1207:[function(b,N,G){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("../scatter3d/calc"),plot:b("./convert"),
moduleType:"trace",name:"pointcloud",basePlotModule:b("../../plots/gl2d"),categories:["gl","gl2d","showLegend"],meta:{}}},{"../../plots/gl2d":894,"../scatter3d/calc":1247,"./attributes":1204,"./convert":1205,"./defaults":1206}],1208:[function(b,N,G){G=b("../../plots/font_attributes");var p=b("../../plots/attributes"),n=b("../../components/color/attributes"),k=b("../../components/fx/attributes"),m=b("../../plots/domain").attributes,a=b("../../plots/template_attributes").hovertemplateAttrs,g=b("../../components/colorscale/attributes"),
h=b("../../plot_api/plot_template").templatedArray,r=b("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,l=b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;(N.exports=b({hoverinfo:l({},p.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:k.hoverlabel,domain:m({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:r("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",
values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:G({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:n.defaultLine,arrayOk:!0},width:{valType:"number",
min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:k.hoverlabel,hovertemplate:a({},{keys:["value","label"]})},link:{label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:n.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},
source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:k.hoverlabel,hovertemplate:a({},{keys:["value","label"]}),colorscales:h("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:l(g().colorscale,{dflt:[[0,"white"],[1,
"black"]]})})}},"calc","nested")).transforms=void 0},{"../../components/color/attributes":665,"../../components/colorscale/attributes":673,"../../components/fx/attributes":697,"../../lib/extend":793,"../../plot_api/edit_types":836,"../../plot_api/plot_template":843,"../../plots/attributes":850,"../../plots/cartesian/axis_format_attributes":857,"../../plots/domain":882,"../../plots/font_attributes":883,"../../plots/template_attributes":926}],1209:[function(b,N,G){function p(c,d){var e=c._fullData[d],
f=c._fullLayout,q=f.dragmode,t=e._bgRect;if("pan"!==q&&"zoom"!==q){a(t,"pan"===f.dragmode?"move":"crosshair");f={_id:"x",c2p:r.identity,_offset:e._sankey.translateX,_length:e._sankey.width};e={_id:"y",c2p:r.identity,_offset:e._sankey.translateY,_length:e._sankey.height};var w={gd:c,element:t.node(),plotinfo:{id:d,xaxis:f,yaxis:e,fillRangeItems:r.noop},subplot:d,xaxes:[f],yaxes:[e],doneFnCompleted:function(x){for(var z=c._fullData[d],B=z.node.groups.slice(),A=[],D=0;D<x.length;D++){a:{var C=z._sankey.graph.nodes;
for(var v=0;v<C.length;v++)if(C[v].pointNumber===x[D].pointNumber){C=C[v];break a}C=void 0}if(C)if(C.group){for(v=0;v<C.childrenNodes.length;v++)A.push(C.childrenNodes[v].pointNumber);B[C.pointNumber-z.node._count]=!1}else A.push(C.pointNumber)}x=B.filter(Boolean).concat([A]);l.call("_guiRestyle",c,{"node.groups":[x]},d)},prepFn:function(x,z,B){h(x,z,B,w,q)}};g.init(w)}}N=b("../../plot_api/edit_types").overrideAll;var n=b("../../plots/get_data").getModuleCalcData,k=b("./plot"),m=b("../../components/fx/layout_attributes"),
a=b("../../lib/setcursor"),g=b("../../components/dragelement"),h=b("../../plots/cartesian/select").prepSelect,r=b("../../lib"),l=b("../../registry");G.name="sankey";G.baseLayoutAttrOverrides=N({hoverlabel:m.hoverlabel},"plot","nested");G.plot=function(c){var d=n(c.calcdata,"sankey")[0];k(c,d);G.updateFx(c)};G.clean=function(c,d,e,f){c=f._has&&f._has("sankey");d=d._has&&d._has("sankey");c&&!d&&(f._paperdiv.selectAll(".sankey").remove(),f._paperdiv.selectAll(".bgsankey").remove())};G.updateFx=function(c){for(var d=
0;d<c._fullData.length;d++)p(c,d)}},{"../../components/dragelement":685,"../../components/fx/layout_attributes":707,"../../lib":803,"../../lib/setcursor":824,"../../plot_api/edit_types":836,"../../plots/cartesian/select":874,"../../plots/get_data":891,"../../registry":931,"./plot":1214}],1210:[function(b,N,G){function p(r,l,c){for(var d=k.init2dArray(r,0),e=0;e<Math.min(l.length,c.length);e++)if(k.isIndex(l[e],r)&&k.isIndex(c[e],r)){if(l[e]===c[e])return!0;d[l[e]].push(c[e])}return n(d).components.some(function(f){return 1<
f.length})}var n=b("strongly-connected-components"),k=b("../../lib"),m=b("../../lib/gup").wrap,a=k.isArrayOrTypedArray,g=k.isIndex,h=b("../../components/colorscale");N.exports=function(r,l){var c=l.node,d=l.link;r=[];var e=a(d.color),f=a(d.customdata),q={},t={},w=d.colorscales.length,x;for(x=0;x<w;x++){var z=d.colorscales[x],B=h.extractScale(z,{cLetter:"c"});B=h.makeColorScaleFunc(B);t[z.label]=B}for(x=w=0;x<d.value.length;x++)d.source[x]>w&&(w=d.source[x]),d.target[x]>w&&(w=d.target[x]);w+=1;l.node._count=
w;l=l.node.groups;z={};for(x=0;x<l.length;x++){var A=l[x];for(B=0;B<A.length;B++){var D=A[B],C=w+x;z.hasOwnProperty(D)?k.warn("Node "+D+" is already part of a group."):z[D]=C}}B=[];A=[];for(x=0;x<d.value.length;x++){D=d.value[x];C=d.source[x];var v=d.target[x];if(0<D&&g(C,w)&&g(v,w)&&(!z.hasOwnProperty(C)||!z.hasOwnProperty(v)||z[C]!==z[v])){z.hasOwnProperty(v)&&(v=z[v]);z.hasOwnProperty(C)&&(C=z[C]);C=+C;v=+v;q[C]=q[v]=!0;var y="";d.label&&d.label[x]&&(y=d.label[x]);var F=null;y&&t.hasOwnProperty(y)&&
(F=t[y]);r.push({pointNumber:x,label:y,color:e?d.color[x]:d.color,customdata:f?d.customdata[x]:d.customdata,concentrationscale:F,source:C,target:v,value:+D});B.push(C);A.push(v)}}d=w+l.length;f=a(c.color);t=a(c.customdata);e=[];for(x=0;x<d;x++)q[x]&&e.push({group:x>w-1,childrenNodes:[],pointNumber:x,label:c.label[x],color:f?c.color[x]:c.color,customdata:t?c.customdata[x]:c.customdata});c=!1;p(d,B,A)&&(c=!0);return m({circular:c,_nodes:e,_links:r,_groups:l,_groupLookup:z})}},{"../../components/colorscale":678,
"../../lib":803,"../../lib/gup":800,"strongly-connected-components":590}],1211:[function(b,N,G){N.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},{}],1212:[function(b,N,G){function p(c,d){function e(f,q){return n.coerce(c,
d,k.link.colorscales,f,q)}e("label");e("cmin");e("cmax");e("colorscale")}var n=b("../../lib"),k=b("./attributes"),m=b("../../components/color"),a=b("tinycolor2"),g=b("../../plots/domain").defaults,h=b("../../components/fx/hoverlabel_defaults"),r=b("../../plot_api/plot_template"),l=b("../../plots/array_container_defaults");N.exports=function(c,d,e,f){function q(v,y){return n.coerce(c,d,k,v,y)}function t(v,y){return n.coerce(x,z,k.node,v,y)}function w(v,y){return n.coerce(A,D,k.link,v,y)}e=n.extendDeep(f.hoverlabel,
c.hoverlabel);var x=c.node,z=r.newContainer(d,"node");t("label");t("groups");t("x");t("y");t("pad");t("thickness");t("line.color");t("line.width");t("hoverinfo",c.hoverinfo);h(x,z,t,e);t("hovertemplate");var B=f.colorway;t("color",z.label.map(function(v,y){return m.addOpacity(B[y%B.length],.8)}));t("customdata");var A=c.link||{},D=r.newContainer(d,"link");w("label");w("source");w("target");w("value");w("line.color");w("line.width");w("hoverinfo",c.hoverinfo);h(A,D,w,e);w("hovertemplate");e=.333>a(f.paper_bgcolor).getLuminance()?
"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";w("color",n.repeat(e,D.value.length));w("customdata");l(A,D,{name:"colorscales",handleItemDefaults:p});g(d,f,q);q("orientation");q("valueformat");q("valuesuffix");var C;z.x.length&&z.y.length&&(C="freeform");q("arrangement",C);n.coerceFont(q,"textfont",n.extendFlat({},f.font));d._length=null}},{"../../components/color":666,"../../components/fx/hoverlabel_defaults":704,"../../lib":803,"../../plot_api/plot_template":843,"../../plots/array_container_defaults":849,
"../../plots/domain":882,"./attributes":1208,tinycolor2:598}],1213:[function(b,N,G){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot"),moduleType:"trace",name:"sankey",basePlotModule:b("./base_plot"),selectPoints:b("./select.js"),categories:["noOpacity"],meta:{}}},{"./attributes":1208,"./base_plot":1209,"./calc":1210,"./defaults":1212,"./plot":1214,"./select.js":1216}],1214:[function(b,N,G){function p(A){return""!==A}function n(A,D){return A.filter(function(C){return C.key===
D.traceId})}function k(A,D){e.select(A).select("path").style("fill-opacity",D);e.select(A).select("rect").style("fill-opacity",D)}function m(A){e.select(A).select("text.name").style("fill","black")}function a(A){return function(D){return-1!==A.node.sourceLinks.indexOf(D.link)||-1!==A.node.targetLinks.indexOf(D.link)}}function g(A){return function(D){return-1!==D.node.sourceLinks.indexOf(A.link)||-1!==D.node.targetLinks.indexOf(A.link)}}function h(A,D,C){D&&C&&n(C,D).selectAll("."+z.sankeyLink).filter(a(D)).call(l.bind(0,
D,C,!1))}function r(A,D,C){D&&C&&n(C,D).selectAll("."+z.sankeyLink).filter(a(D)).call(c.bind(0,D,C,!1))}function l(A,D,C,v){var y=v.datum().link.label;v.style("fill-opacity",function(F){if(!F.link.concentrationscale)return.4});y&&n(D,A).selectAll("."+z.sankeyLink).filter(function(F){return F.link.label===y}).style("fill-opacity",function(F){if(!F.link.concentrationscale)return.4});C&&n(D,A).selectAll("."+z.sankeyNode).filter(g(A)).call(h)}function c(A,D,C,v){var y=v.datum().link.label;v.style("fill-opacity",
function(F){return F.tinyColorAlpha});y&&n(D,A).selectAll("."+z.sankeyLink).filter(function(F){return F.link.label===y}).style("fill-opacity",function(F){return F.tinyColorAlpha});C&&n(D,A).selectAll(z.sankeyNode).filter(g(A)).call(r)}function d(A,D){A=f.nestedProperty(A.hoverlabel||{},D).get();return Array.isArray(A)?!1:A}var e=b("@plotly/d3"),f=b("../../lib"),q=f.numberFormat,t=b("./render"),w=b("../../components/fx"),x=b("../../components/color"),z=b("./constants").cn,B=f._;N.exports=function(A,
D){for(var C=A._fullLayout,v=C._paper,y=C._size,F=0;F<A._fullData.length;F++)if(A._fullData[F].visible&&A._fullData[F].type===z.sankey&&!A._fullData[F]._viewInitial){var J=A._fullData[F].node;A._fullData[F]._viewInitial={node:{groups:J.groups.slice(),x:J.x.slice(),y:J.y.slice()}}}var K=B(A,"source:")+" ",O=B(A,"target:")+" ",I=B(A,"concentration:")+" ",L=B(A,"incoming flow count:")+" ",H=B(A,"outgoing flow count:")+" ";t(A,v,D,{width:y.w,height:y.h,margin:{t:y.t,r:y.r,b:y.b,l:y.l}},{linkEvents:{hover:function(M,
Q,Z){!1!==A._fullLayout.hovermode&&(e.select(M).call(l.bind(0,Q,Z,!0)),"skip"!==Q.link.trace.link.hoverinfo&&(Q.link.fullData=Q.link.trace,A.emit("plotly_hover",{event:e.event,points:[Q.link]})))},follow:function(M,Q){function Z(ba){if(ba.circular){var ja=(ba.circularPathData.leftInnerExtent+ba.circularPathData.rightInnerExtent)/2;var ma=ba.circularPathData.verticalFullExtent}else ja=(ba.source.x1+ba.target.x0)/2,ma=(ba.y0+ba.y1)/2;ja=[ja,ma];"v"===ba.trace.orientation&&ja.reverse();ja[0]+=Q.parent.translateX;
ja[1]+=Q.parent.translateY;return ja}if(!1!==A._fullLayout.hovermode&&(M=Q.link.trace.link,"none"!==M.hoverinfo&&"skip"!==M.hoverinfo)){for(var ca=[],W=0,T=0;T<Q.flow.links.length;T++){var U=Q.flow.links[T];if("closest"!==A._fullLayout.hovermode||Q.link.pointNumber===U.pointNumber){Q.link.pointNumber===U.pointNumber&&(W=T);U.fullData=U.trace;M=Q.link.trace.link;var ha=Z(U),Y={valueLabel:q(Q.valueFormat)(U.value)+Q.valueSuffix};ca.push({x:ha[0],y:ha[1],name:Y.valueLabel,text:[U.label||"",K+U.source.label,
O+U.target.label,U.concentrationscale?I+q("%0.2f")(U.flow.labelConcentration):""].filter(p).join("\x3cbr\x3e"),color:d(M,"bgcolor")||x.addOpacity(U.color,1),borderColor:d(M,"bordercolor"),fontFamily:d(M,"font.family"),fontSize:d(M,"font.size"),fontColor:d(M,"font.color"),nameLength:d(M,"namelength"),textAlign:d(M,"align"),idealAlign:e.event.x<ha[0]?"right":"left",hovertemplate:M.hovertemplate,hovertemplateLabels:Y,eventData:[U]})}}w.loneHover(ca,{container:C._hoverlayer.node(),outerContainer:C._paper.node(),
gd:A,anchorIndex:W}).each(function(){Q.link.concentrationscale||k(this,.65);m(this)})}},unhover:function(M,Q,Z){!1!==A._fullLayout.hovermode&&(e.select(M).call(c.bind(0,Q,Z,!0)),"skip"!==Q.link.trace.link.hoverinfo&&(Q.link.fullData=Q.link.trace,A.emit("plotly_unhover",{event:e.event,points:[Q.link]})),w.loneUnhover(C._hoverlayer.node()))},select:function(M,Q){M=Q.link;M.originalEvent=e.event;A._hoverdata=[M];w.click(A,{target:!0})}},nodeEvents:{hover:function(M,Q,Z){!1!==A._fullLayout.hovermode&&
(e.select(M).call(h,Q,Z),"skip"!==Q.node.trace.node.hoverinfo&&(Q.node.fullData=Q.node.trace,A.emit("plotly_hover",{event:e.event,points:[Q.node]})))},follow:function(M,Q){if(!1!==A._fullLayout.hovermode){var Z=Q.node.trace.node;if("none"!==Z.hoverinfo&&"skip"!==Z.hoverinfo){M=e.select(M).select("."+z.nodeRect);var ca=A._fullLayout._paperdiv.node().getBoundingClientRect(),W=M.node().getBoundingClientRect();M=W.left-2-ca.left;var T=W.right+2-ca.left;ca=W.top+W.height/4-ca.top;W={valueLabel:q(Q.valueFormat)(Q.node.value)+
Q.valueSuffix};Q.node.fullData=Q.node.trace;A._fullLayout._calcInverseTransform(A);var U=A._fullLayout._invScaleX;Q=w.loneHover({x0:U*M,x1:U*T,y:A._fullLayout._invScaleY*ca,name:q(Q.valueFormat)(Q.node.value)+Q.valueSuffix,text:[Q.node.label,L+Q.node.targetLinks.length,H+Q.node.sourceLinks.length].filter(p).join("\x3cbr\x3e"),color:d(Z,"bgcolor")||Q.tinyColorHue,borderColor:d(Z,"bordercolor"),fontFamily:d(Z,"font.family"),fontSize:d(Z,"font.size"),fontColor:d(Z,"font.color"),nameLength:d(Z,"namelength"),
textAlign:d(Z,"align"),idealAlign:"left",hovertemplate:Z.hovertemplate,hovertemplateLabels:W,eventData:[Q.node]},{container:C._hoverlayer.node(),outerContainer:C._paper.node(),gd:A});k(Q,.85);m(Q)}}},unhover:function(M,Q,Z){!1!==A._fullLayout.hovermode&&(e.select(M).call(r,Q,Z),"skip"!==Q.node.trace.node.hoverinfo&&(Q.node.fullData=Q.node.trace,A.emit("plotly_unhover",{event:e.event,points:[Q.node]})),w.loneUnhover(C._hoverlayer.node()))},select:function(M,Q,Z){var ca=Q.node;ca.originalEvent=e.event;
A._hoverdata=[ca];e.select(M).call(r,Q,Z);w.click(A,{target:!0})}}})}},{"../../components/color":666,"../../components/fx":706,"../../lib":803,"./constants":1211,"./render":1215,"@plotly/d3":58}],1215:[function(b,N,G){function p(U,ha,Y){function ba(vb){vb.forEach(function(qb){var Bb=0;var ub=qb.length,wb;qb.sort(function(Ab,Ma){return Ab.y0-Ma.y0});for(wb=0;wb<ub;++wb){var rb=qb[wb];rb.y0>=Bb||(Bb-=rb.y0,1E-6<Bb&&(rb.y0+=Bb,rb.y1+=Bb));Bb=rb.y1+xa}})}function ja(vb){var qb=vb.map(function(La,ya){return{x0:La.x0,
index:ya}}).sort(function(La,ya){return La.x0-ya.x0}),Bb=[],ub=-1,wb=-Infinity;for(Xa=0;Xa<qb.length;Xa++){var rb=vb[qb[Xa].index];if(rb.x0>wb+ra){ub+=1;var Ab=rb.x0}wb=rb.x0;Bb[ub]||(Bb[ub]=[]);Bb[ub].push(rb);var Ma=Ab-rb.x0;rb.x0+=Ma;rb.x1+=Ma}return Bb}var ma=Q(ha);ha=ma.trace;var ia=ha.domain,oa="h"===ha.orientation,xa=ha.node.pad,ra=ha.node.thickness,la=U.width*(ia.x[1]-ia.x[0]),ka=U.height*(ia.y[1]-ia.y[0]),na=ma._nodes,qa=ma._links,ta=ma.circular;var za=ta?v.sankeyCircular().circularLinkGap(0):
C.sankey();za.iterations(y.sankeyIterations).size(oa?[la,ka]:[ka,la]).nodeWidth(ra).nodePadding(xa).nodeId(function(vb){return vb.pointNumber}).nodes(na).links(qa);var Ia=za();za.nodePadding()<xa&&O.warn("node.pad was reduced to ",za.nodePadding()," to fit within the figure.");var Xa,$a,gb;for(jb in ma._groupLookup){na=parseInt(ma._groupLookup[jb]);for(Xa=0;Xa<Ia.nodes.length;Xa++)if(Ia.nodes[Xa].pointNumber===na){var sb=Ia.nodes[Xa];break}sb&&(na={pointNumber:parseInt(jb),x0:sb.x0,x1:sb.x1,y0:sb.y0,
y1:sb.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]},Ia.nodes.unshift(na),sb.childrenNodes.unshift(na))}(function(){for(Xa=0;Xa<Ia.nodes.length;Xa++){var vb=Ia.nodes[Xa],qb={};for($a=0;$a<vb.targetLinks.length;$a++){var Bb=vb.targetLinks[$a];var ub=Bb.source.pointNumber+":"+Bb.target.pointNumber;qb.hasOwnProperty(ub)||(qb[ub]=[]);qb[ub].push(Bb)}var wb=Object.keys(qb);for($a=0;$a<wb.length;$a++){ub=wb[$a];ub=qb[ub];var rb=0,Ab={};for(gb=0;gb<ub.length;gb++)Bb=ub[gb],Ab[Bb.label]||(Ab[Bb.label]=
0),Ab[Bb.label]+=Bb.value,rb+=Bb.value;for(gb=0;gb<ub.length;gb++)Bb=ub[gb],Bb.flow={value:rb,labelConcentration:Ab[Bb.label]/rb,concentration:Bb.value/rb,links:ub},Bb.concentrationscale&&(Bb.color=F(Bb.concentrationscale(Bb.flow.labelConcentration)))}for($a=qb=0;$a<vb.sourceLinks.length;$a++)qb+=vb.sourceLinks[$a].value;for($a=0;$a<vb.sourceLinks.length;$a++)Bb=vb.sourceLinks[$a],Bb.concentrationOut=Bb.value/qb;for($a=qb=0;$a<vb.targetLinks.length;$a++)qb+=vb.targetLinks[$a].value;for($a=0;$a<vb.targetLinks.length;$a++)Bb=
vb.targetLinks[$a],Bb.concenrationIn=Bb.value/qb}})();if(ha.node.x.length&&ha.node.y.length){for(Xa=0;Xa<Math.min(ha.node.x.length,ha.node.y.length,Ia.nodes.length);Xa++)if(ha.node.x[Xa]&&ha.node.y[Xa]){var jb=[ha.node.x[Xa]*la,ha.node.y[Xa]*ka];Ia.nodes[Xa].x0=jb[0]-ra/2;Ia.nodes[Xa].x1=jb[0]+ra/2;sb=Ia.nodes[Xa].y1-Ia.nodes[Xa].y0;Ia.nodes[Xa].y0=jb[1]-sb/2;Ia.nodes[Xa].y1=jb[1]+sb/2}"snap"===ha.arrangement&&(na=Ia.nodes,jb=ja(na),ba(jb));za.update(Ia)}return{circular:ta,key:Y,trace:ha,guid:O.randstr(),
horizontal:oa,width:la,height:ka,nodePad:ha.node.pad,nodeLineColor:ha.node.line.color,nodeLineWidth:ha.node.line.width,linkLineColor:ha.link.line.color,linkLineWidth:ha.link.line.width,valueFormat:ha.valueformat,valueSuffix:ha.valuesuffix,textFont:ha.textfont,translateX:ia.x[0]*U.width+U.margin.l,translateY:U.height-ia.y[1]*U.height+U.margin.t,dragParallel:oa?ka:la,dragPerpendicular:oa?la:ka,arrangement:ha.arrangement,sankey:za,graph:Ia,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}
function n(U,ha,Y){var ba=F(ha.color),ja=ha.source.label+"|"+ha.target.label;ha.trace=U.trace;ha.curveNumber=U.trace.index;return{circular:U.circular,key:ja+"__"+Y,traceId:U.key,pointNumber:ha.pointNumber,link:ha,tinyColorHue:J.tinyRGB(ba),tinyColorAlpha:ba.getAlpha(),linkPath:k,linkLineColor:U.linkLineColor,linkLineWidth:U.linkLineWidth,valueFormat:U.valueFormat,valueSuffix:U.valueSuffix,sankey:U.sankey,parent:U,interactionState:U.interactionState,flow:ha.flow}}function k(){return function(U){if(U.link.circular){var ha=
U.link,Y=ha.width/2,ba=ha.circularPathData;return"top"===ha.circularLinkType?"M "+ba.targetX+" "+(ba.targetY+Y)+" L"+ba.rightInnerExtent+" "+(ba.targetY+Y)+"A"+(ba.rightLargeArcRadius+Y)+" "+(ba.rightSmallArcRadius+Y)+" 0 0 1 "+(ba.rightFullExtent-Y)+" "+(ba.targetY-ba.rightSmallArcRadius)+"L"+(ba.rightFullExtent-Y)+" "+ba.verticalRightInnerExtent+"A"+(ba.rightLargeArcRadius+Y)+" "+(ba.rightLargeArcRadius+Y)+" 0 0 1 "+ba.rightInnerExtent+" "+(ba.verticalFullExtent-Y)+"L"+ba.leftInnerExtent+" "+(ba.verticalFullExtent-
Y)+"A"+(ba.leftLargeArcRadius+Y)+" "+(ba.leftLargeArcRadius+Y)+" 0 0 1 "+(ba.leftFullExtent+Y)+" "+ba.verticalLeftInnerExtent+"L"+(ba.leftFullExtent+Y)+" "+(ba.sourceY-ba.leftSmallArcRadius)+"A"+(ba.leftLargeArcRadius+Y)+" "+(ba.leftSmallArcRadius+Y)+" 0 0 1 "+ba.leftInnerExtent+" "+(ba.sourceY+Y)+"L"+ba.sourceX+" "+(ba.sourceY+Y)+"L"+ba.sourceX+" "+(ba.sourceY-Y)+"L"+ba.leftInnerExtent+" "+(ba.sourceY-Y)+"A"+(ba.leftLargeArcRadius-Y)+" "+(ba.leftSmallArcRadius-Y)+" 0 0 0 "+(ba.leftFullExtent-Y)+
" "+(ba.sourceY-ba.leftSmallArcRadius)+"L"+(ba.leftFullExtent-Y)+" "+ba.verticalLeftInnerExtent+"A"+(ba.leftLargeArcRadius-Y)+" "+(ba.leftLargeArcRadius-Y)+" 0 0 0 "+ba.leftInnerExtent+" "+(ba.verticalFullExtent+Y)+"L"+ba.rightInnerExtent+" "+(ba.verticalFullExtent+Y)+"A"+(ba.rightLargeArcRadius-Y)+" "+(ba.rightLargeArcRadius-Y)+" 0 0 0 "+(ba.rightFullExtent+Y)+" "+ba.verticalRightInnerExtent+"L"+(ba.rightFullExtent+Y)+" "+(ba.targetY-ba.rightSmallArcRadius)+"A"+(ba.rightLargeArcRadius-Y)+" "+(ba.rightSmallArcRadius-
Y)+" 0 0 0 "+ba.rightInnerExtent+" "+(ba.targetY-Y)+"L"+ba.targetX+" "+(ba.targetY-Y)+"Z":"M "+ba.targetX+" "+(ba.targetY-Y)+" L"+ba.rightInnerExtent+" "+(ba.targetY-Y)+"A"+(ba.rightLargeArcRadius+Y)+" "+(ba.rightSmallArcRadius+Y)+" 0 0 0 "+(ba.rightFullExtent-Y)+" "+(ba.targetY+ba.rightSmallArcRadius)+"L"+(ba.rightFullExtent-Y)+" "+ba.verticalRightInnerExtent+"A"+(ba.rightLargeArcRadius+Y)+" "+(ba.rightLargeArcRadius+Y)+" 0 0 0 "+ba.rightInnerExtent+" "+(ba.verticalFullExtent+Y)+"L"+ba.leftInnerExtent+
" "+(ba.verticalFullExtent+Y)+"A"+(ba.leftLargeArcRadius+Y)+" "+(ba.leftLargeArcRadius+Y)+" 0 0 0 "+(ba.leftFullExtent+Y)+" "+ba.verticalLeftInnerExtent+"L"+(ba.leftFullExtent+Y)+" "+(ba.sourceY+ba.leftSmallArcRadius)+"A"+(ba.leftLargeArcRadius+Y)+" "+(ba.leftSmallArcRadius+Y)+" 0 0 0 "+ba.leftInnerExtent+" "+(ba.sourceY-Y)+"L"+ba.sourceX+" "+(ba.sourceY-Y)+"L"+ba.sourceX+" "+(ba.sourceY+Y)+"L"+ba.leftInnerExtent+" "+(ba.sourceY+Y)+"A"+(ba.leftLargeArcRadius-Y)+" "+(ba.leftSmallArcRadius-Y)+" 0 0 1 "+
(ba.leftFullExtent-Y)+" "+(ba.sourceY+ba.leftSmallArcRadius)+"L"+(ba.leftFullExtent-Y)+" "+ba.verticalLeftInnerExtent+"A"+(ba.leftLargeArcRadius-Y)+" "+(ba.leftLargeArcRadius-Y)+" 0 0 1 "+ba.leftInnerExtent+" "+(ba.verticalFullExtent-Y)+"L"+ba.rightInnerExtent+" "+(ba.verticalFullExtent-Y)+"A"+(ba.rightLargeArcRadius-Y)+" "+(ba.rightLargeArcRadius-Y)+" 0 0 1 "+(ba.rightFullExtent+Y)+" "+ba.verticalRightInnerExtent+"L"+(ba.rightFullExtent+Y)+" "+(ba.targetY+ba.rightSmallArcRadius)+"A"+(ba.rightLargeArcRadius-
Y)+" "+(ba.rightSmallArcRadius-Y)+" 0 0 1 "+ba.rightInnerExtent+" "+(ba.targetY+Y)+"L"+ba.targetX+" "+(ba.targetY+Y)+"Z"}ha=U.link.source.x1;Y=U.link.target.x0;var ja=A(ha,Y);ba=ja(.5);ja=ja(.5);var ma=U.link.y0-U.link.width/2,ia=U.link.y0+U.link.width/2,oa=U.link.y1-U.link.width/2;U=U.link.y1+U.link.width/2;return"M"+ha+","+ma+"C"+ba+","+ma+" "+ja+","+oa+" "+Y+","+oa+"L"+Y+","+U+"C"+ja+","+U+" "+ba+","+ia+" "+ha+","+ia+"Z"}}function m(U,ha){var Y=F(ha.color),ba=y.nodePadAcross,ja=U.nodePad/2;ha.dx=
ha.x1-ha.x0;ha.dy=ha.y1-ha.y0;var ma=ha.dx,ia=Math.max(.5,ha.dy),oa="node_"+ha.pointNumber;ha.group&&(oa=O.randstr());ha.trace=U.trace;ha.curveNumber=U.trace.index;return{index:ha.pointNumber,key:oa,partOfGroup:ha.partOfGroup||!1,group:ha.group,traceId:U.key,trace:U.trace,node:ha,nodePad:U.nodePad,nodeLineColor:U.nodeLineColor,nodeLineWidth:U.nodeLineWidth,textFont:U.textFont,size:U.horizontal?U.height:U.width,visibleWidth:Math.ceil(ma),visibleHeight:ia,zoneX:-ba,zoneY:-ja,zoneWidth:ma+2*ba,zoneHeight:ia+
2*ja,labelY:U.horizontal?ha.dy/2+1:ha.dx/2+1,left:1===ha.originalLayer,sizeAcross:U.width,forceLayouts:U.forceLayouts,horizontal:U.horizontal,darkBackground:128>=Y.getBrightness(),tinyColorHue:J.tinyRGB(Y),tinyColorAlpha:Y.getAlpha(),valueFormat:U.valueFormat,valueSuffix:U.valueSuffix,sankey:U.sankey,graph:U.graph,arrangement:U.arrangement,uniqueNodeLabelPathId:[U.guid,U.key,oa].join("_"),interactionState:U.interactionState,figure:U}}function a(U){U.attr("transform",function(ha){return I(ha.node.x0.toFixed(3),
ha.node.y0.toFixed(3))})}function g(U){U.call(a)}function h(U){U.attr("width",function(ha){return ha.node.x1-ha.node.x0}).attr("height",function(ha){return ha.visibleHeight})}function r(U){return I(U.translateX,U.translateY)+(U.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function l(U,ha,Y){U.on(".basic",null).on("mouseover.basic",function(ba){ba.interactionState.dragInProgress||ba.partOfGroup||(Y.hover(this,ba,ha),ba.interactionState.hovered=[this,ba])}).on("mousemove.basic",function(ba){ba.interactionState.dragInProgress||
ba.partOfGroup||(Y.follow(this,ba),ba.interactionState.hovered=[this,ba])}).on("mouseout.basic",function(ba){ba.interactionState.dragInProgress||ba.partOfGroup||(Y.unhover(this,ba,ha),ba.interactionState.hovered=!1)}).on("click.basic",function(ba){ba.interactionState.hovered&&(Y.unhover(this,ba,ha),ba.interactionState.hovered=!1);ba.interactionState.dragInProgress||ba.partOfGroup||Y.select(this,ba,ha)})}function c(U,ha,Y,ba){var ja=D.behavior.drag().origin(function(ma){return{x:ma.node.x0+ma.visibleWidth/
2,y:ma.node.y0+ma.visibleHeight/2}}).on("dragstart",function(ma){if("fixed"!==ma.arrangement&&(O.ensureSingle(ba._fullLayout._infolayer,"g","dragcover",function(oa){ba._fullLayout._dragCover=oa}),O.raiseToTop(this),ma.interactionState.dragInProgress=ma.node,w(ma.node),ma.interactionState.hovered&&(Y.nodeEvents.unhover.apply(0,ma.interactionState.hovered),ma.interactionState.hovered=!1),"snap"===ma.arrangement)){var ia=ma.traceId+"|"+ma.key;ma.forceLayouts[ia]?ma.forceLayouts[ia].alpha(1):d(U,ia,ma,
ba);e(U,ha,ma,ia,ba)}}).on("drag",function(ma){if("fixed"!==ma.arrangement){var ia=D.event.x,oa=D.event.y;"snap"===ma.arrangement?(ma.node.x0=ia-ma.visibleWidth/2,ma.node.x1=ia+ma.visibleWidth/2):("freeform"===ma.arrangement&&(ma.node.x0=ia-ma.visibleWidth/2,ma.node.x1=ia+ma.visibleWidth/2),oa=Math.max(0,Math.min(ma.size-ma.visibleHeight/2,oa)));ma.node.y0=oa-ma.visibleHeight/2;ma.node.y1=oa+ma.visibleHeight/2;w(ma.node);"snap"!==ma.arrangement&&(ma.sankey.update(ma.graph),U.filter(x(ma)).call(g),
ha.attr("d",k()))}}).on("dragend",function(ma){if("fixed"!==ma.arrangement){ma.interactionState.dragInProgress=!1;for(var ia=0;ia<ma.node.childrenNodes.length;ia++)ma.node.childrenNodes[ia].x=ma.node.x,ma.node.childrenNodes[ia].y=ma.node.y;"snap"!==ma.arrangement&&q(ma,ba)}});U.on(".drag",null).call(ja)}function d(U,ha,Y,ba){z(Y.graph.nodes);var ja=Y.graph.nodes.filter(function(ma){return ma.originalX===Y.node.originalX}).filter(function(ma){return!ma.partOfGroup});Y.forceLayouts[ha]=B.forceSimulation(ja).alphaDecay(0).force("collide",
B.forceCollide().radius(function(ma){return ma.dy/2+Y.nodePad/2}).strength(1).iterations(y.forceIterations)).force("constrain",f(U,ha,ja,Y,ba)).stop()}function e(U,ha,Y,ba,ja){window.requestAnimationFrame(function ia(){var oa;for(oa=0;oa<y.forceTicksPerFrame;oa++)Y.forceLayouts[ba].tick();oa=Y.graph.nodes;for(var xa=0;xa<oa.length;xa++)oa[xa].y0=oa[xa].y-oa[xa].dy/2,oa[xa].y1=oa[xa].y0+oa[xa].dy,oa[xa].x0=oa[xa].x-oa[xa].dx/2,oa[xa].x1=oa[xa].x0+oa[xa].dx;Y.sankey.update(Y.graph);U.filter(x(Y)).call(g);
ha.attr("d",k());0<Y.forceLayouts[ba].alpha()?window.requestAnimationFrame(ia):(oa=Y.node.originalX,Y.node.x0=oa-Y.visibleWidth/2,Y.node.x1=oa+Y.visibleWidth/2,q(Y,ja))})}function f(U,ha,Y,ba){return function(){for(var ja=0,ma=0;ma<Y.length;ma++){var ia=Y[ma];ia===ba.interactionState.dragInProgress?(ia.x=ia.lastDraggedX,ia.y=ia.lastDraggedY):(ia.vx=(ia.originalX-ia.x)/y.forceTicksPerFrame,ia.y=Math.min(ba.size-ia.dy/2,Math.max(ia.dy/2,ia.y)));ja=Math.max(ja,Math.abs(ia.vx),Math.abs(ia.vy))}!ba.interactionState.dragInProgress&&
.1>ja&&0<ba.forceLayouts[ha].alpha()&&ba.forceLayouts[ha].alpha(0)}}function q(U,ha){for(var Y=[],ba=[],ja=0;ja<U.graph.nodes.length;ja++){var ma=(U.graph.nodes[ja].y0+U.graph.nodes[ja].y1)/2;Y.push((U.graph.nodes[ja].x0+U.graph.nodes[ja].x1)/2/U.figure.width);ba.push(ma/U.figure.height)}ca.call("_guiRestyle",ha,{"node.x":[Y],"node.y":[ba]},U.trace.index).then(function(){ha._fullLayout._dragCover&&ha._fullLayout._dragCover.remove()})}function t(U){var ha=[],Y;for(Y=0;Y<U.length;Y++)U[Y].originalX=
(U[Y].x0+U[Y].x1)/2,U[Y].originalY=(U[Y].y0+U[Y].y1)/2,-1===ha.indexOf(U[Y].originalX)&&ha.push(U[Y].originalX);ha.sort(function(ba,ja){return ba-ja});for(Y=0;Y<U.length;Y++)U[Y].originalLayerIndex=ha.indexOf(U[Y].originalX),U[Y].originalLayer=U[Y].originalLayerIndex/(ha.length-1)}function w(U){U.lastDraggedX=U.x0+U.dx/2;U.lastDraggedY=U.y0+U.dy/2}function x(U){return function(ha){return ha.node.originalX===U.node.originalX}}function z(U){for(var ha=0;ha<U.length;ha++)U[ha].y=(U[ha].y0+U[ha].y1)/
2,U[ha].x=(U[ha].x0+U[ha].x1)/2}var B=b("d3-force"),A=b("d3-interpolate").interpolateNumber,D=b("@plotly/d3"),C=b("@plotly/d3-sankey"),v=b("@plotly/d3-sankey-circular"),y=b("./constants"),F=b("tinycolor2"),J=b("../../components/color"),K=b("../../components/drawing"),O=b("../../lib"),I=O.strTranslate,L=O.strRotate;G=b("../../lib/gup");var H=G.keyFun,M=G.repeat,Q=G.unwrap,Z=b("../../lib/svg_text_utils"),ca=b("../../registry");b=b("../../constants/alignment");var W=b.CAP_SHIFT,T=b.LINE_SPACING;N.exports=
function(U,ha,Y,ba,ja){var ma=!1;O.ensureSingle(U._fullLayout._infolayer,"g","first-render",function(){ma=!0});var ia=U._fullLayout._dragCover;Y=Y.filter(function(oa){return Q(oa).trace.visible}).map(p.bind(null,ba));ha=ha.selectAll("."+y.cn.sankey).data(Y,H);ha.exit().remove();ha.enter().append("g").classed(y.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events","auto").attr("transform",r);
ha.each(function(oa,xa){U._fullData[xa]._sankey=oa;var ra="bgsankey-"+oa.trace.uid+"-"+xa;O.ensureSingle(U._fullLayout._draggers,"rect",ra);U._fullData[xa]._bgRect=D.select("."+ra);U._fullData[xa]._bgRect.style("pointer-events","all").attr("width",oa.width).attr("height",oa.height).attr("x",oa.translateX).attr("y",oa.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})});ha.transition().ease(y.ease).duration(y.duration).attr("transform",r);Y=ha.selectAll("."+y.cn.sankeyLinks).data(M,
H);Y.enter().append("g").classed(y.cn.sankeyLinks,!0).style("fill","none");Y=Y.selectAll("."+y.cn.sankeyLink).data(function(oa){return oa.graph.links.filter(function(xa){return xa.value}).map(n.bind(null,oa))},H);Y.enter().append("path").classed(y.cn.sankeyLink,!0).call(l,ha,ja.linkEvents);Y.style("stroke",function(oa){return 1<oa.link.width||0<oa.linkLineWidth?J.tinyRGB(F(oa.linkLineColor)):oa.tinyColorHue}).style("stroke-opacity",function(oa){return 1<oa.link.width||0<oa.linkLineWidth?J.opacity(oa.linkLineColor):
oa.tinyColorAlpha}).style("fill",function(oa){return oa.tinyColorHue}).style("fill-opacity",function(oa){return oa.tinyColorAlpha}).style("stroke-width",function(oa){return 1<oa.link.width||0<oa.linkLineWidth?oa.linkLineWidth:1}).attr("d",k());Y.style("opacity",function(){return U._context.staticPlot||ma||ia?1:0}).transition().ease(y.ease).duration(y.duration).style("opacity",1);Y.exit().transition().ease(y.ease).duration(y.duration).style("opacity",0).remove();ba=ha.selectAll("."+y.cn.sankeyNodeSet).data(M,
H);ba.enter().append("g").classed(y.cn.sankeyNodeSet,!0);ba.style("cursor",function(oa){switch(oa.arrangement){case "fixed":return"default";case "perpendicular":return"ns-resize";default:return"move"}});ba=ba.selectAll("."+y.cn.sankeyNode).data(function(oa){var xa=oa.graph.nodes;t(xa);return xa.map(m.bind(null,oa))},H);ba.enter().append("g").classed(y.cn.sankeyNode,!0).call(a).style("opacity",function(oa){return!U._context.staticPlot&&!ma||oa.partOfGroup?0:1});ba.call(l,ha,ja.nodeEvents).call(c,Y,
ja,U);ba.transition().ease(y.ease).duration(y.duration).call(a).style("opacity",function(oa){return oa.partOfGroup?0:1});ba.exit().transition().ease(y.ease).duration(y.duration).style("opacity",0).remove();ja=ba.selectAll("."+y.cn.nodeRect).data(M);ja.enter().append("rect").classed(y.cn.nodeRect,!0).call(h);ja.style("stroke-width",function(oa){return oa.nodeLineWidth}).style("stroke",function(oa){return J.tinyRGB(F(oa.nodeLineColor))}).style("stroke-opacity",function(oa){return J.opacity(oa.nodeLineColor)}).style("fill",
function(oa){return oa.tinyColorHue}).style("fill-opacity",function(oa){return oa.tinyColorAlpha});ja.transition().ease(y.ease).duration(y.duration).call(h);ja=ba.selectAll("."+y.cn.nodeLabel).data(M);ja.enter().append("text").classed(y.cn.nodeLabel,!0).style("cursor","default");ja.attr("data-notex",1).text(function(oa){return oa.node.label}).each(function(oa){var xa=D.select(this);K.font(xa,oa.textFont);Z.convertToTspans(xa,U)}).style("text-shadow",Z.makeTextShadow(U._fullLayout.paper_bgcolor)).attr("text-anchor",
function(oa){return oa.horizontal&&oa.left?"end":"start"}).attr("transform",function(oa){var xa=D.select(this),ra=Z.lineCount(xa);xa=oa.nodeLineWidth/2+3;ra=((oa.horizontal?oa.visibleHeight:oa.visibleWidth)-oa.textFont.size*((ra-1)*T-W))/2;oa.horizontal&&(xa=oa.left?-xa:xa+oa.visibleWidth);var la=oa.horizontal?"":"scale(-1,1)"+L(90);return I(oa.horizontal?xa:ra,oa.horizontal?ra:xa)+la});ja.transition().ease(y.ease).duration(y.duration)}},{"../../components/color":666,"../../components/drawing":688,
"../../constants/alignment":771,"../../lib":803,"../../lib/gup":800,"../../lib/svg_text_utils":829,"../../registry":931,"./constants":1211,"@plotly/d3":58,"@plotly/d3-sankey":57,"@plotly/d3-sankey-circular":56,"d3-force":166,"d3-interpolate":171,tinycolor2:598}],1216:[function(b,N,G){N.exports=function(p,n){for(var k=[],m=p.cd[0].trace,a=m._sankey.graph.nodes,g=0;g<a.length;g++){var h=a[g];if(!h.partOfGroup){var r=[(h.x0+h.x1)/2,(h.y0+h.y1)/2];"v"===m.orientation&&r.reverse();n&&n.contains(r,!1,g,
p)&&k.push({pointNumber:h.pointNumber})}}return k}},{}],1217:[function(b,N,G){var p=b("../../lib");N.exports=function(n,k){for(var m=0;m<n.length;m++)n[m].i=m;p.mergeArray(k.text,n,"tx");p.mergeArray(k.texttemplate,n,"txt");p.mergeArray(k.hovertext,n,"htx");p.mergeArray(k.customdata,n,"data");p.mergeArray(k.textposition,n,"tp");k.textfont&&(p.mergeArrayCastPositive(k.textfont.size,n,"ts"),p.mergeArray(k.textfont.color,n,"tc"),p.mergeArray(k.textfont.family,n,"tf"));if(k=k.marker){p.mergeArrayCastPositive(k.size,
n,"ms");p.mergeArrayCastPositive(k.opacity,n,"mo");p.mergeArray(k.symbol,n,"mx");p.mergeArray(k.color,n,"mc");if(m=k.line)p.mergeArray(m.color,n,"mlc"),p.mergeArrayCastPositive(m.width,n,"mlw");(k=k.gradient)&&"none"!==k.type&&(p.mergeArray(k.type,n,"mgt"),p.mergeArray(k.color,n,"mgc"))}}},{"../../lib":803}],1218:[function(b,N,G){function p(c){return{valType:"any",dflt:0,editType:"calc"}}function n(c){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}G=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat;
var k=b("../../plots/template_attributes").texttemplateAttrs,m=b("../../plots/template_attributes").hovertemplateAttrs,a=b("../../components/colorscale/attributes"),g=b("../../plots/font_attributes"),h=b("../../components/drawing/attributes").dash,r=b("../../components/drawing"),l=b("./constants");b=b("../../lib/extend").extendFlat;N.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,
editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:p("x"),yperiod:p("y"),xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:n("x"),yperiodalignment:n("y"),xhoverformat:G("x"),yhoverformat:G("y"),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v",
"h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:k({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],
editType:"style"},hovertemplate:m({},{keys:l.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:"linear spline hv vh hvh vhv".split(" "),dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:b({},h,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},
cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:"none tozeroy tozerox tonexty tonextx toself tonext".split(" "),editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},marker:b({symbol:{valType:"enumerated",values:r.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",
min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:b({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},a("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,
editType:"calc"},editType:"calc"},editType:"calc"},a("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},
editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:"top left;top center;top right;middle left;middle center;middle right;bottom left;bottom center;bottom right".split(";"),dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:g({editType:"calc",colorEditType:"style",arrayOk:!0})}},{"../../components/colorscale/attributes":673,"../../components/drawing":688,"../../components/drawing/attributes":687,
"../../lib/extend":793,"../../plots/cartesian/axis_format_attributes":857,"../../plots/font_attributes":883,"../../plots/template_attributes":926,"./constants":1222}],1219:[function(b,N,G){function p(t,w,x,z,B,A,D){var C=w._length,v=t._fullLayout;t=x._id;var y=z._id,F=v._firstScatter[m(w)]===w.uid;v=(a(w,v,x,z)||{}).orientation;var J=w.fill;x._minDtick=0;z._minDtick=0;var K={padded:!0},O={padded:!0};D&&(K.ppad=O.ppad=D);(D=2>C||B[0]!==B[C-1]||A[0]!==A[C-1])&&("tozerox"===J||"tonextx"===J&&(F||"h"===
v))?K.tozero=!0:(w.error_y||{}).visible||"tonexty"!==J&&"tozeroy"!==J&&(d.hasMarkers(w)||d.hasText(w))||(K.padded=!1,K.ppad=0);if(D&&("tozeroy"===J||"tonexty"===J&&(F||"v"===v)))O.tozero=!0;else if("tonextx"===J||"tozerox"===J)O.padded=!1;t&&(w._extremes[t]=r.findExtremes(x,B,K));y&&(w._extremes[y]=r.findExtremes(z,A,O))}function n(t,w){if(d.hasMarkers(t)){var x=t.marker,z=1.6*(t.marker.sizeref||1);var B="area"===t.marker.sizemode?function(D){return Math.max(Math.sqrt((D||0)/z),3)}:function(D){return Math.max((D||
0)/z,3)};if(h.isArrayOrTypedArray(x.size)){x={type:"linear"};r.setConvert(x);t=x.makeCalcdata(t.marker,"size");x=Array(w);for(var A=0;A<w;A++)x[A]=B(t[A]);return x}return B(x.size)}}function k(t,w){var x=m(w);t=t._firstScatter;t[x]||(t[x]=w.uid)}function m(t){var w=t.stackgroup;return t.xaxis+t.yaxis+t.type+(w?"-"+w:"")}function a(t,w,x,z){if(t=t.stackgroup)if(w=w._scatterStackOpts[x._id+z._id][t],x="v"===w.orientation?z:x,"linear"===x.type||"log"===x.type)return w}var g=b("fast-isnumeric"),h=b("../../lib"),
r=b("../../plots/cartesian/axes"),l=b("../../plots/cartesian/align_period"),c=b("../../constants/numerical").BADNUM,d=b("./subtypes"),e=b("./colorscale_calc"),f=b("./arrays_to_calcdata"),q=b("./calc_selection");N.exports={calc:function(t,w){var x=t._fullLayout,z=r.getFromId(t,w.xaxis||"x"),B=r.getFromId(t,w.yaxis||"y"),A=z.makeCalcdata(w,"x"),D=B.makeCalcdata(w,"y"),C=l(w,z,"x",A),v=l(w,B,"y",D),y=C.vals,F=v.vals,J=w._length,K=Array(J),O=w.ids,I=a(w,x,z,B),L=!1,H;k(x,w);x="x";var M="y";if(I){h.pushUnique(I.traceIndices,
w._expandedIndex);if(H="v"===I.orientation){M="s";var Q="x"}else x="s",Q="y";var Z="interpolate"===I.stackgaps}else{var ca=n(w,J);p(t,w,z,B,y,F,ca)}B=!!w.xperiodalignment;ca=!!w.yperiodalignment;for(z=0;z<J;z++){var W=K[z]={},T=g(y[z]),U=g(F[z]);T&&U?(W[x]=y[z],W[M]=F[z],B&&(W.orig_x=A[z],W.xEnd=C.ends[z],W.xStart=C.starts[z]),ca&&(W.orig_y=D[z],W.yEnd=v.ends[z],W.yStart=v.starts[z])):I&&(H?T:U)?(W[Q]=H?y[z]:F[z],W.gap=!0,Z?(W.s=c,L=!0):W.s=0):W[x]=W[M]=c;O&&(W.id=String(O[z]))}f(K,w);e(t,w);q(K,
w);if(I){for(z=0;z<K.length;)K[z][Q]===c?K.splice(z,1):z++;h.sort(K,function(ha,Y){return ha[Q]-Y[Q]||ha.i-Y.i});if(L){for(z=0;z<K.length-1&&K[z].gap;)z++;A=K[z].s;A||(A=K[z].s=0);for(t=0;t<z;t++)K[t].s=A;for(w=K.length-1;w>z&&K[w].gap;)w--;A=K[w].s;for(t=K.length-1;t>w;t--)K[t].s=A;for(;z<w;)if(z++,K[z].gap){for(t=z+1;K[t].gap;)t++;A=K[z-1][Q];D=K[z-1].s;for(C=(K[t].s-D)/(K[t][Q]-A);z<t;)K[z].s=D+(K[z][Q]-A)*C,z++}}}return K},calcMarkerSize:n,calcAxisExpansion:p,setFirstScatter:k,getStackOpts:a}},
{"../../constants/numerical":779,"../../lib":803,"../../plots/cartesian/align_period":851,"../../plots/cartesian/axes":854,"./arrays_to_calcdata":1217,"./calc_selection":1220,"./colorscale_calc":1221,"./subtypes":1243,"fast-isnumeric":249}],1220:[function(b,N,G){var p=b("../../lib");N.exports=function(n,k){p.isArrayOrTypedArray(k.selectedpoints)&&p.tagSelected(n,k)}},{"../../lib":803}],1221:[function(b,N,G){var p=b("../../components/colorscale/helpers").hasColorscale,n=b("../../components/colorscale/calc"),
k=b("./subtypes");N.exports=function(m,a){k.hasLines(a)&&p(a,"line")&&n(m,a,{vals:a.line.color,containerStr:"line",cLetter:"c"});k.hasMarkers(a)&&(p(a,"marker")&&n(m,a,{vals:a.marker.color,containerStr:"marker",cLetter:"c"}),p(a,"marker.line")&&n(m,a,{vals:a.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":674,"../../components/colorscale/helpers":677,"./subtypes":1243}],1222:[function(b,N,G){N.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,
maxScreensAway:20,eventDataKeys:[]}},{}],1223:[function(b,N,G){function p(k,m,a,g,h,r,l){h[g]=!0;g={i:null,gap:!0,s:0};g[l]=a;k.splice(m,0,g);m&&a===k[m-1][l]?(a=k[m-1],g.s=a.s,g.i=a.i,g.gap=a.gap):r&&(r=k[m-1],a=(h=k[m+1])?r?r.s+(h.s-r.s)*(a-r[l])/(h[l]-r[l]):h.s:r.s,g.s=a);m||(k[0].t=k[1].t,k[0].trace=k[1].trace,delete k[1].t,delete k[1].trace)}var n=b("./calc");N.exports=function(k,m){var a=m.xaxis;m=m.yaxis;var g=k._fullLayout._scatterStackOpts[a._id+m._id];if(g){var h=k.calcdata,r,l,c,d,e,f;
for(f in g){var q=g[f];var t=q.traceIndices;if(t.length){var w="interpolate"===q.stackgaps;var x=q.groupnorm;if("v"===q.orientation){var z="x";var B="y"}else z="y",B="x";var A=Array(t.length);for(r=0;r<A.length;r++)A[r]=!1;var D=h[t[0]];var C=Array(D.length);for(r=0;r<D.length;r++)C[r]=D[r][z];for(r=1;r<t.length;r++){var v=h[t[r]];for(l=c=0;l<v.length;l++){for(e=v[l][z];e>C[c]&&c<C.length;c++)p(v,l,C[c],r,A,w,z),l++;if(e!==C[c]){for(d=0;d<r;d++)p(h[t[d]],c,e,d,A,w,z);C.splice(c,0,e)}c++}for(;c<C.length;c++)p(v,
l,C[c],r,A,w,z),l++}c=C.length;for(l=0;l<D.length;l++){d=D[l][B]=D[l].s;for(r=1;r<t.length;r++)v=h[t[r]],v[0].trace._rawLength=v[0].trace._length,v[0].trace._length=c,d+=v[l].s,v[l][B]=d;if(x)for(v=("fraction"===x?d:d/100)||1,r=0;r<t.length;r++)d=h[t[r]][l],d[B]/=v,d.sNorm=d.s/v}for(r=0;r<t.length;r++){v=h[t[r]];D=v[0].trace;x=n.calcMarkerSize(D,D._rawLength);B=Array.isArray(x);if(x&&A[r]||B)for(d=x,x=Array(c),l=0;l<c;l++)x[l]=v[l].gap?0:B?d[v[l].i]:d;B=Array(c);d=Array(c);for(l=0;l<c;l++)B[l]=v[l].x,
d[l]=v[l].y;n.calcAxisExpansion(k,D,a,m,B,d,x);v[0].t.orientation=q.orientation}}}}}},{"./calc":1219}],1224:[function(b,N,G){N.exports=function(p){for(var n=0;n<p.length;n++){var k=p[n];if("scatter"===k.type){var m=k.fill;if("none"!==m&&"toself"!==m&&(k.opacity=void 0,"tonexty"===m||"tonextx"===m))for(m=n-1;0<=m;m--){var a=p[m];if("scatter"===a.type&&a.xaxis===k.xaxis&&a.yaxis===k.yaxis){a.opacity=void 0;break}}}}}},{}],1225:[function(b,N,G){var p=b("../../lib"),n=b("../../registry"),k=b("./attributes"),
m=b("./constants"),a=b("./subtypes"),g=b("./xy_defaults"),h=b("./period_defaults"),r=b("./stack_defaults"),l=b("./marker_defaults"),c=b("./line_defaults"),d=b("./line_shape_defaults"),e=b("./text_defaults"),f=b("./fillcolor_defaults");N.exports=function(q,t,w,x){function z(D,C){return p.coerce(q,t,k,D,C)}var B=g(q,t,x,z);B||(t.visible=!1);if(t.visible){h(q,t,x,z);z("xhoverformat");z("yhoverformat");var A=r(q,t,x,z);B=!A&&B<m.PTS_LINESONLY?"lines+markers":"lines";z("text");z("hovertext");z("mode",
B);a.hasLines(t)&&(c(q,t,w,x,z),d(q,t,z),z("connectgaps"),z("line.simplify"));a.hasMarkers(t)&&l(q,t,w,x,z,{gradient:!0});a.hasText(t)&&(z("texttemplate"),e(q,t,x,z));x=[];if(a.hasMarkers(t)||a.hasText(t))z("cliponaxis"),z("marker.maxdisplayed"),x.push("points");z("fill",A?A.fillDflt:"none");"none"!==t.fill&&(f(q,t,w,z),a.hasLines(t)||d(q,t,z));A=(t.line||{}).color;B=(t.marker||{}).color;"tonext"!==t.fill&&"toself"!==t.fill||x.push("fills");z("hoveron",x.join("+")||"points");"fills"!==t.hoveron&&
z("hovertemplate");x=n.getComponentMethod("errorbars","supplyDefaults");x(q,t,A||B||w,{axis:"y"});x(q,t,A||B||w,{axis:"x",inherit:"y"});p.coerceSelectionMarkerOpacity(t,z)}}},{"../../lib":803,"../../registry":931,"./attributes":1218,"./constants":1222,"./fillcolor_defaults":1226,"./line_defaults":1231,"./line_shape_defaults":1233,"./marker_defaults":1237,"./period_defaults":1238,"./stack_defaults":1241,"./subtypes":1243,"./text_defaults":1244,"./xy_defaults":1245}],1226:[function(b,N,G){var p=b("../../components/color"),
n=b("../../lib").isArrayOrTypedArray;N.exports=function(k,m,a,g){k=!1;if(m.marker){var h=m.marker.color,r=(m.marker.line||{}).color;h&&!n(h)?k=h:r&&!n(r)&&(k=r)}g("fillcolor",p.addOpacity((m.line||{}).color||k||a,.5))}},{"../../components/color":666,"../../lib":803}],1227:[function(b,N,G){var p=b("../../plots/cartesian/axes");N.exports=function(n,k,m){var a={},g={_fullLayout:m};m=p.getFromTrace(g,k,"x");k=p.getFromTrace(g,k,"y");a.xLabel=p.tickText(m,m.c2l(n.x),!0).text;a.yLabel=p.tickText(k,k.c2l(n.y),
!0).text;return a}},{"../../plots/cartesian/axes":854}],1228:[function(b,N,G){var p=b("../../components/color"),n=b("./subtypes");N.exports=function(k,m){if("lines"===k.mode)return(m=k.line.color)&&p.opacity(m)?m:k.fillcolor;if("none"===k.mode)return k.fill?k.fillcolor:"";var a=m.mcc||(k.marker||{}).color,g=m.mlcc||((k.marker||{}).line||{}).color;return(m=a&&p.opacity(a)?a:g&&p.opacity(g)&&(m.mlw||((k.marker||{}).line||{}).width)?g:"")?.3>p.opacity(m)?p.addOpacity(m,.3):m:(m=(k.line||{}).color)&&
p.opacity(m)&&n.hasLines(k)&&k.line.width?m:k.fillcolor}},{"../../components/color":666,"./subtypes":1243}],1229:[function(b,N,G){var p=b("../../lib"),n=b("../../components/fx"),k=b("../../registry"),m=b("./get_trace_color"),a=b("../../components/color"),g=p.fillText;N.exports=function(h,r,l,c){var d=h.cd,e=d[0].trace,f=h.xa,q=h.ya,t=f.c2p(r),w=q.c2p(l),x=[t,w];l=e.hoveron||"";var z=-1!==e.mode.indexOf("markers")?3:.5,B=!!e.xperiodalignment,A=!!e.yperiodalignment;if(-1!==l.indexOf("points")&&(r=function(K){var O=
Math.max(z,K.mrc||0),I=f.c2p(K.x)-t;K=q.c2p(K.y)-w;return Math.max(Math.sqrt(I*I+K*K)-O,1-z/O)},c=n.getDistanceFunction(c,function(K){if(B){var O=f.c2p(K.xStart);K=f.c2p(K.xEnd);return t>=Math.min(O,K)&&t<=Math.max(O,K)?0:Infinity}O=Math.max(3,K.mrc||0);var I=1-1/O;K=Math.abs(f.c2p(K.x)-t);return K<O?I*K/O:K-O+I},function(K){if(A){var O=q.c2p(K.yStart);K=q.c2p(K.yEnd);return w>=Math.min(O,K)&&w<=Math.max(O,K)?0:Infinity}O=Math.max(3,K.mrc||0);var I=1-1/O;K=Math.abs(q.c2p(K.y)-w);return K<O?I*K/O:
K-O+I},r),n.getClosest(d,c,h),!1!==h.index)){c=d[h.index];l=f.c2p(c.x,!0);x=q.c2p(c.y,!0);var D=c.mrc||1;h.index=c.i;var C=d[0].t.orientation,v=C&&(c.sNorm||c.s);d="h"===C?v:void 0!==c.orig_x?c.orig_x:c.x;C="v"===C?v:void 0!==c.orig_y?c.orig_y:c.y;p.extendFlat(h,{color:m(e,c),x0:l-D,x1:l+D,xLabelVal:d,y0:x-D,y1:x+D,yLabelVal:C,spikeDistance:r(c),hovertemplate:e.hovertemplate});"end"===e.xperiodalignment&&(h.xPeriod=c.x);"end"===e.yperiodalignment&&(h.yPeriod=c.y);g(c,e,h);k.getComponentMethod("errorbars",
"hoverInfo")(c,e,h);return[h]}if(-1!==l.indexOf("fills")&&e._polygons){D=e._polygons;c=[];C=!1;r=Infinity;d=-Infinity;v=Infinity;var y=-Infinity;for(l=0;l<D.length;l++){var F=D[l];F.contains(x)&&(C=!C,c.push(F),v=Math.min(v,F.ymin),y=Math.max(y,F.ymax))}if(C){v=Math.max(v,0);y=Math.min(y,q._length);x=(v+y)/2;for(l=0;l<c.length;l++)for(C=c[l].pts,D=1;D<C.length;D++){F=C[D-1][1];var J=C[D][1];F>x!==J>=x&&(v=C[D-1][0],y=C[D][0],J-F&&(v+=(y-v)*(x-F)/(J-F),r=Math.min(r,v),d=Math.max(d,v)))}r=Math.max(r,
0);d=Math.min(d,f._length);c=a.defaultLine;a.opacity(e.fillcolor)?c=e.fillcolor:a.opacity((e.line||{}).color)&&(c=e.line.color);p.extendFlat(h,{distance:h.maxHoverDistance,x0:r,x1:d,y0:x,y1:x,color:c,hovertemplate:!1});delete h.index;e.text&&!Array.isArray(e.text)?h.text=String(e.text):h.text=e.name;return[h]}}}},{"../../components/color":666,"../../components/fx":706,"../../lib":803,"../../registry":931,"./get_trace_color":1228}],1230:[function(b,N,G){G=b("./subtypes");N.exports={hasLines:G.hasLines,
hasMarkers:G.hasMarkers,hasText:G.hasText,isBubble:G.isBubble,attributes:b("./attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("./cross_trace_defaults"),calc:b("./calc").calc,crossTraceCalc:b("./cross_trace_calc"),arraysToCalcdata:b("./arrays_to_calcdata"),plot:b("./plot"),colorbar:b("./marker_colorbar"),formatLabels:b("./format_labels"),style:b("./style").style,styleOnSelect:b("./style").styleOnSelect,hoverPoints:b("./hover"),selectPoints:b("./select"),animatable:!0,moduleType:"trace",
name:"scatter",basePlotModule:b("../../plots/cartesian"),categories:"cartesian svg symbols errorBarsOK showLegend scatter-like zoomScale".split(" "),meta:{}}},{"../../plots/cartesian":868,"./arrays_to_calcdata":1217,"./attributes":1218,"./calc":1219,"./cross_trace_calc":1223,"./cross_trace_defaults":1224,"./defaults":1225,"./format_labels":1227,"./hover":1229,"./marker_colorbar":1236,"./plot":1239,"./select":1240,"./style":1242,"./subtypes":1243}],1231:[function(b,N,G){var p=b("../../lib").isArrayOrTypedArray,
n=b("../../components/colorscale/helpers").hasColorscale,k=b("../../components/colorscale/defaults");N.exports=function(m,a,g,h,r,l){var c=(m.marker||{}).color;r("line.color",g);n(m,"line")?k(m,a,h,r,{prefix:"line.",cLetter:"c"}):(m=(p(c)?!1:c)||g,r("line.color",m));r("line.width");(l||{}).noDash||r("line.dash")}},{"../../components/colorscale/defaults":676,"../../components/colorscale/helpers":677,"../../lib":803}],1232:[function(b,N,G){G=b("../../constants/numerical");var p=G.BADNUM;G=G.LOG_CLIP;
var n=G+.5,k=G-.5,m=b("../../lib"),a=m.segmentsIntersect,g=m.constrain,h=b("./constants");N.exports=function(r,l){function c(Ab){Ab=r[Ab];if(!Ab)return!1;var Ma=l.linearized?C.l2p(Ab.x):C.c2p(Ab.x),La=l.linearized?v.l2p(Ab.y):v.c2p(Ab.y);if(Ma===p){y&&(Ma=C.c2p(Ab.x,!0));if(Ma===p)return!1;F&&La===p&&(Ma*=Math.abs(C._m*K*(0<C._m?n:k)/(v._m*J*(0<v._m?n:k))));Ma*=1E3}if(La===p){F&&(La=v.c2p(Ab.y,!0));if(La===p)return!1;La*=1E3}return[Ma,La]}function d(Ab,Ma,La,ya){La-=Ab;ya-=Ma;Ab=.5-Ab;var Aa=.5-Ma;
Ma=La*La+ya*ya;var Ka=La*Ab+ya*Aa;if(0<Ka&&Ka<Ma&&(La=Ab*ya-Aa*La,La*La<Ma))return!0}function e(Ab,Ma){var La=Ab[0]/J;Ab=Ab[1]/K;var ya=Math.max(0,-La,La-1,-Ab,Ab-1);ya&&void 0!==Y&&d(La,Ab,Y,ba)&&(ya=0);ya&&Ma&&d(La,Ab,Ma[0]/J,Ma[1]/K)&&(ya=0);return(1+h.toleranceGrowth*ya)*I}function f(Ab,Ma){var La=Ab[0]-Ma[0];Ab=Ab[1]-Ma[1];return Math.sqrt(La*La+Ab*Ab)}function q(Ab,Ma){for(var La=[],ya=0,Aa=0;4>Aa;Aa++){var Ka=ra[Aa];(Ka=a(Ab[0],Ab[1],Ma[0],Ma[1],Ka[0],Ka[1],Ka[2],Ka[3]))&&(!ya||1<Math.abs(Ka.x-
La[0][0])||1<Math.abs(Ka.y-La[0][1]))&&(Ka=[Ka.x,Ka.y],ya&&f(Ka,Ab)<f(La[0],Ab)?La.unshift(Ka):La.push(Ka),ya++)}return La}function t(Ab){if(Ab[0]<ma||Ab[0]>ia||Ab[1]<oa||Ab[1]>xa)return[g(Ab[0],ma,ia),g(Ab[1],oa,xa)]}function w(Ab,Ma){if(Ab[0]===Ma[0]&&(Ab[0]===ma||Ab[0]===ia)||Ab[1]===Ma[1]&&(Ab[1]===oa||Ab[1]===xa))return!0}function x(Ab,Ma){var La=[];Ab=t(Ab);Ma=t(Ma);if(Ab&&Ma&&w(Ab,Ma))return La;Ab&&La.push(Ab);Ma&&La.push(Ma);return La}function z(Ab,Ma,La){return function(ya,Aa){var Ka=t(ya),
Ta=t(Aa),bb=[];if(Ka&&Ta&&w(Ka,Ta))return bb;Ka&&bb.push(Ka);Ta&&bb.push(Ta);if(ya=2*m.constrain((ya[Ab]+Aa[Ab])/2,Ma,La)-((Ka||ya)[Ab]+(Ta||Aa)[Ab]))Ka=Ka&&Ta?0<ya===Ka[Ab]>Ta[Ab]?Ka:Ta:Ka||Ta,Ka[Ab]+=ya;return bb}}function B(Ab){var Ma=Ab[0],La=Ab[1],ya=Ma===W[T-1][0],Aa=La===W[T-1][1];if(!ya||!Aa)if(1<T){var Ka=Ma===W[T-2][0],Ta=La===W[T-2][1];ya&&(Ma===ma||Ma===ia)&&Ka?Ta?T--:W[T-1]=Ab:Aa&&(La===oa||La===xa)&&Ta?Ka?T--:W[T-1]=Ab:W[T++]=Ab}else W[T++]=Ab}function A(Ab){W[T-1][0]!==Ab[0]&&W[T-1][1]!==
Ab[1]&&B([na,qa]);B(Ab);Ia=null;na=qa=0}function D(Ab){Y=Ab[0]/J;ba=Ab[1]/K;la=Ab[0]<ma?ma:Ab[0]>ia?ia:0;ka=Ab[1]<oa?oa:Ab[1]>xa?xa:0;if(la||ka){if(T)if(Ia){var Ma=za(Ia,Ab);1<Ma.length&&(A(Ma[0]),W[T++]=Ma[1])}else ta=za(W[T-1],Ab)[0],W[T++]=ta;else W[T++]=[la||Ab[0],ka||Ab[1]];Ma=W[T-1];if(la&&ka&&(Ma[0]!==la||Ma[1]!==ka)){if(Ia)if(na!==la&&qa!==ka)if(na&&qa){Ma=Ab[0]-Ia[0];var La=(Ab[1]-Ia[1])/Ma;Ma=0<(Ia[1]*Ab[0]-Ab[1]*Ia[0])/Ma?[0<La?ma:ia,xa]:[0<La?ia:ma,oa];B(Ma)}else B([na||la,qa||ka]);else na&&
qa&&B([na,qa]);B([la,ka])}else na-la&&qa-ka&&B([la||na,ka||qa]);Ia=Ab;na=la;qa=ka}else Ia&&A(za(Ia,Ab)[0]),W[T++]=Ab}var C=l.xaxis,v=l.yaxis,y="log"===C.type,F="log"===v.type,J=C._length,K=v._length,O=l.connectGaps,I=l.baseTolerance,L=l.shape,H="linear"===L,M=l.fill&&"none"!==l.fill,Q=[],Z=h.minTolerance,ca=r.length,W=Array(ca),T=0,U,ha,Y,ba;var ja=h.maxScreensAway;var ma=-J*ja,ia=J*(1+ja),oa=-K*ja,xa=K*(1+ja),ra=[[ma,oa,ia,oa],[ia,oa,ia,xa],[ia,xa,ma,xa],[ma,xa,ma,oa]],la,ka,na,qa,ta,za;"linear"===
L||"spline"===L?za=q:"hv"===L||"vh"===L?za=x:"hvh"===L?za=z(0,ma,ia):"vhv"===L&&(za=z(1,oa,xa));for(L=0;L<ca;L++)if(ja=c(L)){T=0;var Ia=null;D(ja);for(L++;L<ca;L++){var Xa=c(L);if(!Xa)if(O)continue;else break;if(H&&l.simplify){var $a=c(L+1);var gb=f(Xa,ja);if(M&&(0===T||T===ca-1)||!(gb<e(Xa,$a)*Z)){var sb=[(Xa[0]-ja[0])/gb,(Xa[1]-ja[1])/gb];var jb=ja;var vb=gb;var qb=U=ha=0;var Bb=!1;gb=Xa;for(L++;L<r.length;L++){var ub=$a;$a=c(L+1);if(!ub)if(O)continue;else break;var wb=[ub[0]-ja[0],ub[1]-ja[1]];
var rb=wb[0]*sb[1]-wb[1]*sb[0];U=Math.min(U,rb);ha=Math.max(ha,rb);if(ha-U>e(ub,$a))break;gb=ub;wb=wb[0]*sb[0]+wb[1]*sb[1];wb>vb?(vb=wb,Xa=ub,Bb=!1):wb<qb&&(qb=wb,jb=ub,Bb=!0)}Bb?(D(Xa),gb!==jb&&D(jb)):(jb!==ja&&D(jb),gb!==Xa&&D(Xa));D(gb);if(L>=r.length||!ub)break;D(ub);ja=ub}}else D(Xa)}Ia&&B([na||Ia[0],qa||Ia[1]]);Q.push(W.slice(0,T))}return Q}},{"../../constants/numerical":779,"../../lib":803,"./constants":1222}],1233:[function(b,N,G){N.exports=function(p,n,k){"spline"===k("line.shape")&&k("line.smoothing")}},
{}],1234:[function(b,N,G){var p={tonextx:1,tonexty:1,tonext:1};N.exports=function(n,k,m){var a,g={};var h=!1;var r=-1,l=0,c=-1;for(k=0;k<m.length;k++)n=m[k][0].trace,(a=n.stackgroup||"")?a in g?a=g[a]:(a=g[a]=l,l++):n.fill in p&&0<=c?a=c:(a=c=l,l++),a<r&&(h=!0),n._groupIndex=r=a;m=m.slice();h&&m.sort(function(d,e){d=d[0].trace;e=e[0].trace;return d._groupIndex-e._groupIndex||d.index-e.index});g={};for(k=0;k<m.length;k++)n=m[k][0].trace,a=n.stackgroup||"",!0===n.visible?(n._nexttrace=null,n.fill in
p&&(h=g[a],n._prevtrace=h||null,h&&(h._nexttrace=n)),n._ownfill=n.fill&&("tozero"===n.fill.substr(0,6)||"toself"===n.fill||"to"===n.fill.substr(0,2)&&!n._prevtrace),g[a]=n):n._prevtrace=n._nexttrace=n._ownfill=null;return m}},{}],1235:[function(b,N,G){var p=b("fast-isnumeric");N.exports=function(n,k){k||(k=2);n=n.marker;var m=n.sizeref||1,a=n.sizemin||0,g="area"===n.sizemode?function(h){return Math.sqrt(h/m)}:function(h){return h/m};return function(h){h=g(h/k);return p(h)&&0<h?Math.max(h,a):0}}},
{"fast-isnumeric":249}],1236:[function(b,N,G){N.exports={container:"marker",min:"cmin",max:"cmax"}},{}],1237:[function(b,N,G){var p=b("../../components/color"),n=b("../../components/colorscale/helpers").hasColorscale,k=b("../../components/colorscale/defaults"),m=b("./subtypes");N.exports=function(a,g,h,r,l,c){var d=m.isBubble(a),e=(a.line||{}).color;c=c||{};e&&(h=e);l("marker.symbol");l("marker.opacity",d?.7:1);l("marker.size");l("marker.color",h);n(a,"marker")&&k(a,g,r,l,{prefix:"marker.",cLetter:"c"});
c.noSelect||(l("selected.marker.color"),l("unselected.marker.color"),l("selected.marker.size"),l("unselected.marker.size"));c.noLine||(h=e&&!Array.isArray(e)&&g.marker.color!==e?e:d?p.background:p.defaultLine,l("marker.line.color",h),n(a,"marker.line")&&k(a,g,r,l,{prefix:"marker.line.",cLetter:"c"}),l("marker.line.width",d?1:0));d&&(l("marker.sizeref"),l("marker.sizemin"),l("marker.sizemode"));c.gradient&&"none"!==l("marker.gradient.type")&&l("marker.gradient.color")}},{"../../components/color":666,
"../../components/colorscale/defaults":676,"../../components/colorscale/helpers":677,"./subtypes":1243}],1238:[function(b,N,G){function p(m,a){return 0===m%k?n(a,1):n(a,0)}var n=b("../../lib").dateTick0,k=b("../../constants/numerical").ONEWEEK;N.exports=function(m,a,g,h,r){r||(r={x:!0,y:!0});r.x&&(m=h("xperiod"))&&(h("xperiod0",p(m,a.xcalendar)),h("xperiodalignment"));r.y&&(r=h("yperiod"))&&(h("yperiod0",p(r,a.ycalendar)),h("yperiodalignment"))}},{"../../constants/numerical":779,"../../lib":803}],
1239:[function(b,N,G){function p(q,t,w){t.each(function(x){var z=h(m.select(this),"g","fills");l.setClipUrl(z,w.layerClipId,q);var B=x[0].trace;x=[];B._ownfill&&x.push("_ownFill");B._nexttrace&&x.push("_nextFill");z=z.selectAll("g").data(x,r);z.enter().append("g");z.exit().each(function(A){B[A]=null}).remove();z.order().each(function(A){B[A]=h(m.select(this),"path","js-fill")})})}function n(q,t,w,x,z,B,A){function D(ka){return O?ka.transition():ka}function C(ka){D(ka).attr("d","M0,0Z")}function v(ka){return ka.filter(function(na){return!na.gap&&
na.vis})}function y(ka){return ka.filter(function(na){return na.vis})}function F(ka){return ka.filter(function(na){return!na.gap})}function J(ka){return ka.id}function K(){return!1}k(q,t,w,x,z);var O=!!A&&0<A.duration,I=w.xaxis,L=w.yaxis,H=x[0].trace,M=H.line,Q=m.select(B),Z=h(Q,"g","errorbars");B=h(Q,"g","lines");t=h(Q,"g","points");z=h(Q,"g","text");a.getComponentMethod("errorbars","plot")(q,Z,w,A);if(!0===H.visible){D(Q).style("opacity",H.opacity);var ca=H.fill.charAt(H.fill.length-1);"x"!==ca&&
"y"!==ca&&(ca="");x[0][w.isRangePlot?"nodeRangePlot3":"node3"]=Q;A="";Q=[];if(Z=H._prevtrace){A=Z._prevRevpath||"";var W=Z._nextFill;Q=Z._polygons}var T,U,ha="",Y="",ba=[];var ja=g.noop;Z=H._ownFill;if(c.hasLines(H)||"none"!==H.fill){W&&W.datum(x);if(-1!==["hv","vh","hvh","vhv"].indexOf(M.shape)){var ma=l.steps(M.shape);var ia=l.steps(M.shape.split("").reverse().join(""))}else ma="spline"===M.shape?ia=function(ka){var na=ka[ka.length-1];return 1<ka.length&&ka[0][0]===na[0]&&ka[0][1]===na[1]?l.smoothclosed(ka.slice(1),
M.smoothing):l.smoothopen(ka,M.smoothing)}:ia=function(ka){return"M"+ka.join("L")};var oa=function(ka){return ia(ka.reverse())};ba=d(x,{xaxis:I,yaxis:L,connectGaps:H.connectgaps,baseTolerance:Math.max(M.width||1,3)/4,shape:M.shape,simplify:M.simplify,fill:H.fill});var xa=H._polygons=Array(ba.length);for(ja=0;ja<ba.length;ja++)H._polygons[ja]=f(ba[ja]);if(ba.length){var ra=ba[0][0];var la=ba[ba.length-1];la=la[la.length-1]}ja=function(ka){return function(na){T=ma(na);U=oa(na);ha?ca?(ha+="L"+T.substr(1),
Y=U+("L"+Y.substr(1))):(ha+="Z"+T,Y=U+"Z"+Y):(ha=T,Y=U);c.hasLines(H)&&1<na.length&&(na=m.select(this),na.datum(x),ka?D(na.style("opacity",0).attr("d",T).call(l.lineGroupStyle)).style("opacity",1):(na=D(na),na.attr("d",T),l.singleLineStyle(x,na)))}}}B=B.selectAll(".js-line").data(ba);D(B.exit()).style("opacity",0).remove();B.each(ja(!1));B.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(l.lineGroupStyle).each(ja(!0));l.setClipUrl(B,w.layerClipId,q);ba.length?
(Z?(Z.datum(x),ra&&la&&(ca?("y"===ca?ra[1]=la[1]=L.c2p(0,!0):"x"===ca&&(ra[0]=la[0]=I.c2p(0,!0)),D(Z).attr("d","M"+la+"L"+ra+"L"+ha.substr(1)).call(l.singleFillStyle)):D(Z).attr("d",ha+"Z").call(l.singleFillStyle))):W&&("tonext"===H.fill.substr(0,6)&&ha&&A?("tonext"===H.fill?D(W).attr("d",ha+"Z"+A+"Z").call(l.singleFillStyle):D(W).attr("d",ha+"L"+A.substr(1)+"Z").call(l.singleFillStyle),H._polygons=H._polygons.concat(Q)):(C(W),H._polygons=null)),H._prevRevpath=Y,H._prevPolygons=xa):(Z?C(Z):W&&C(W),
H._polygons=H._prevRevpath=H._prevPolygons=null);t.datum(x);z.datum(x);(function(ka,na,qa){var ta,za=qa[0].trace;qa=c.hasMarkers(za);var Ia=c.hasText(za);var Xa=za.ids?J:void 0;var $a=K,gb=K;if(qa||Ia){var sb=r,jb=za.stackgroup,vb=jb&&"infer zero"===q._fullLayout._scatterStackOpts[I._id+L._id][jb].stackgaps;za.marker.maxdisplayed||za._needsCull?sb=vb?y:v:jb&&!vb&&(sb=F);qa&&($a=sb);Ia&&(gb=sb)}ka=ka.selectAll("path.point");ka=ka.data($a,Xa);$a=ka.enter().append("path").classed("point",!0);O&&$a.call(l.pointStyle,
za,q).call(l.translatePoints,I,L).style("opacity",0).transition().style("opacity",1);ka.order();var qb;qa&&(qb=l.makePointStyleFns(za));ka.each(function(Bb){var ub=m.select(this),wb=D(ub);(ta=l.translatePoint(Bb,wb,I,L))?(l.singlePointStyle(Bb,wb,za,qb,q),w.layerClipId&&l.hideOutsideRangePoint(Bb,wb,I,L,za.xcalendar,za.ycalendar),za.customdata&&ub.classed("plotly-customdata",null!==Bb.data&&void 0!==Bb.data)):wb.remove()});O?ka.exit().transition().style("opacity",0).remove():ka.exit().remove();ka=
na.selectAll("g");ka=ka.data(gb,Xa);ka.enter().append("g").classed("textpoint",!0).append("text");ka.order();ka.each(function(Bb){var ub=m.select(this),wb=D(ub.select("text"));(ta=l.translatePoint(Bb,wb,I,L))?w.layerClipId&&l.hideOutsideRangePoint(Bb,ub,I,L,za.xcalendar,za.ycalendar):ub.remove()});ka.selectAll("text").call(l.textPointStyle,za,q).each(function(Bb){var ub=I.c2p(Bb.x),wb=L.c2p(Bb.y);m.select(this).selectAll("tspan.line").each(function(){D(m.select(this)).attr({x:ub,y:wb})})});ka.exit().remove()})(t,
z,x);W=!1===H.cliponaxis?null:w.layerClipId;l.setClipUrl(t,W,q);l.setClipUrl(z,W,q)}}function k(q,t,w,x,z){q=w.xaxis;w=w.yaxis;var B=m.extent(g.simpleMap(q.range,q.r2c)),A=m.extent(g.simpleMap(w.range,w.r2c));w=x[0].trace;if(c.hasMarkers(w)&&(w=w.marker.maxdisplayed,0!==w)){q=x.filter(function(y){return y.x>=B[0]&&y.x<=B[1]&&y.y>=A[0]&&y.y<=A[1]});var D=Math.ceil(q.length/w),C=0;z.forEach(function(y,F){y=y[0].trace;c.hasMarkers(y)&&0<y.marker.maxdisplayed&&F<t&&C++});var v=Math.round(C*D/3+Math.floor(C/
3)*D/7.1);x.forEach(function(y){delete y.vis});q.forEach(function(y,F){0===Math.round((F+v)%D)&&(y.vis=!0)})}}var m=b("@plotly/d3"),a=b("../../registry"),g=b("../../lib"),h=g.ensureSingle,r=g.identity,l=b("../../components/drawing"),c=b("./subtypes"),d=b("./line_points"),e=b("./link_traces"),f=b("../../lib/polygon").tester;N.exports=function(q,t,w,x,z,B){var A,D=!z,C=!!z&&0<z.duration,v=e(q,t,w);w=x.selectAll("g.trace").data(v,function(y){return y[0].trace.uid});w.enter().append("g").attr("class",
function(y){return"trace scatter trace"+y[0].trace.uid}).style("stroke-miterlimit",2);w.order();p(q,w,t);C?(B&&(A=B()),m.transition().duration(z.duration).ease(z.easing).each("end",function(){A&&A()}).each("interrupt",function(){A&&A()}).each(function(){x.selectAll("g.trace").each(function(y,F){n(q,F,t,y,v,this,z)})})):w.each(function(y,F){n(q,F,t,y,v,this,z)});D&&w.exit().remove();x.selectAll("path:not([d])").remove()}},{"../../components/drawing":688,"../../lib":803,"../../lib/polygon":815,"../../registry":931,
"./line_points":1232,"./link_traces":1234,"./subtypes":1243,"@plotly/d3":58}],1240:[function(b,N,G){var p=b("./subtypes");N.exports=function(n,k){var m=n.cd,a=n.xaxis,g=n.yaxis,h=[],r=m[0].trace;if(!p.hasMarkers(r)&&!p.hasText(r))return[];if(!1===k)for(r=0;r<m.length;r++)m[r].selected=0;else for(r=0;r<m.length;r++){var l=m[r];var c=a.c2p(l.x);var d=g.c2p(l.y);null!==l.i&&k.contains([c,d],!1,r,n)?(h.push({pointNumber:l.i,x:a.c2d(l.x),y:g.c2d(l.y)}),l.selected=1):l.selected=0}return h}},{"./subtypes":1243}],
1241:[function(b,N,G){var p=["orientation","groupnorm","stackgaps"];N.exports=function(n,k,m,a){m=m._scatterStackOpts;var g=a("stackgroup");if(g){var h=k.xaxis+k.yaxis,r=m[h];r||(r=m[h]={});m=r[g];h=!1;m?m.traces.push(k):(m=r[g]={traceIndices:[],traces:[k]},h=!0);k={orientation:k.x&&!k.y?"h":"v"};for(g=0;g<p.length;g++){r=p[g];var l=r+"Found";if(!m[l]){var c=void 0!==n[r],d="orientation"===r;if(c||h)if(m[r]=a(r,k[r]),d&&(m.fillDflt="h"===m[r]?"tonextx":"tonexty"),c&&(m[l]=!0,!h&&(delete m.traces[0][r],
d)))for(r=0;r<m.traces.length-1;r++)l=m.traces[r],l._input.fill!==l.fill&&(l.fill=m.fillDflt)}}return m}}},{}],1242:[function(b,N,G){function p(g,h,r){m.pointStyle(g.selectAll("path.point"),h,r)}function n(g,h,r){m.textPointStyle(g.selectAll("text"),h,r)}var k=b("@plotly/d3"),m=b("../../components/drawing"),a=b("../../registry");N.exports={style:function(g){var h=k.select(g).selectAll("g.trace.scatter");h.style("opacity",function(r){return r[0].trace.opacity});h.selectAll("g.points").each(function(r){var l=
k.select(this);p(l,r.trace||r[0].trace,g)});h.selectAll("g.text").each(function(r){var l=k.select(this);n(l,r.trace||r[0].trace,g)});h.selectAll("g.trace path.js-line").call(m.lineGroupStyle);h.selectAll("g.trace path.js-fill").call(m.fillGroupStyle);a.getComponentMethod("errorbars","style")(h)},stylePoints:p,styleText:n,styleOnSelect:function(g,h,r){h=h[0].trace;h.selectedpoints?(m.selectedPointStyle(r.selectAll("path.point"),h),m.selectedTextStyle(r.selectAll("text"),h)):(p(r,h,g),n(r,h,g))}}},
{"../../components/drawing":688,"../../registry":931,"@plotly/d3":58}],1243:[function(b,N,G){var p=b("../../lib");N.exports={hasLines:function(n){return n.visible&&n.mode&&-1!==n.mode.indexOf("lines")},hasMarkers:function(n){return n.visible&&(n.mode&&-1!==n.mode.indexOf("markers")||"splom"===n.type)},hasText:function(n){return n.visible&&n.mode&&-1!==n.mode.indexOf("text")},isBubble:function(n){return p.isPlainObject(n.marker)&&p.isArrayOrTypedArray(n.marker.size)}}},{"../../lib":803}],1244:[function(b,
N,G){var p=b("../../lib");N.exports=function(n,k,m,a,g){g=g||{};a("textposition");p.coerceFont(a,"textfont",m.font);g.noSelect||(a("selected.textfont.color"),a("unselected.textfont.color"))}},{"../../lib":803}],1245:[function(b,N,G){var p=b("../../lib"),n=b("../../registry");N.exports=function(k,m,a,g){var h=g("x"),r=g("y");n.getComponentMethod("calendars","handleTraceDefaults")(k,m,["x","y"],a);if(h)k=p.minRowLength(h),r?r=Math.min(k,p.minRowLength(r)):(r=k,g("y0"),g("dy"));else{if(!r)return 0;r=
p.minRowLength(r);g("x0");g("dx")}return m._length=r}},{"../../lib":803,"../../registry":931}],1246:[function(b,N,G){function p(f){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}}G=b("../scatter/attributes");var n=b("../../components/colorscale/attributes"),k=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat,m=b("../../plots/template_attributes").hovertemplateAttrs,a=b("../../plots/template_attributes").texttemplateAttrs,
g=b("../../plots/attributes"),h=b("../../constants/gl3d_dashes"),r=b("../../constants/gl3d_markers"),l=b("../../lib/extend").extendFlat,c=b("../../plot_api/edit_types").overrideAll;b=b("../../lib/sort_object_keys");var d=G.marker,e=d.line;h=l({width:G.line.width,dash:{valType:"enumerated",values:b(h),dflt:"solid"}},n("line"));N=N.exports=c({x:G.x,y:G.y,z:{valType:"data_array"},text:l({},G.text,{}),texttemplate:a({},{}),hovertext:l({},G.hovertext,{}),hovertemplate:m(),xhoverformat:k("x"),yhoverformat:k("y"),
zhoverformat:k("z"),mode:l({},G.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:p("x"),y:p("y"),z:p("z")},connectgaps:G.connectgaps,line:h,marker:l({symbol:{valType:"enumerated",values:b(r),dflt:"circle",arrayOk:!0},size:l({},d.size,{dflt:8}),sizeref:d.sizeref,sizemin:d.sizemin,sizemode:d.sizemode,opacity:l({},d.opacity,{arrayOk:!1}),colorbar:d.colorbar,line:l({width:l({},e.width,{arrayOk:!1})},n("marker.line"))},
n("marker")),textposition:l({},G.textposition,{dflt:"top center"}),textfont:{color:G.textfont.color,size:G.textfont.size,family:l({},G.textfont.family,{arrayOk:!1})},hoverinfo:l({},g.hoverinfo)},"calc","nested");N.x.editType=N.y.editType=N.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":673,"../../constants/gl3d_dashes":776,"../../constants/gl3d_markers":777,"../../lib/extend":793,"../../lib/sort_object_keys":826,"../../plot_api/edit_types":836,"../../plots/attributes":850,
"../../plots/cartesian/axis_format_attributes":857,"../../plots/template_attributes":926,"../scatter/attributes":1218}],1247:[function(b,N,G){var p=b("../scatter/arrays_to_calcdata"),n=b("../scatter/colorscale_calc");N.exports=function(k,m){var a=[{x:!1,y:!1,trace:m,t:{}}];p(a,m);n(k,m);return a}},{"../scatter/arrays_to_calcdata":1217,"../scatter/colorscale_calc":1221}],1248:[function(b,N,G){function p(k,m,a,g){if(!m||!m.visible)return null;m=n.getComponentMethod("errorbars","makeComputeError")(m);
for(var h=Array(k.length),r=0;r<k.length;r++){var l=m(+k[r],r);if("log"===g.type){var c=g.c2l(k[r]),d=k[r]-l[0];l=k[r]+l[1];h[r]=[(g.c2l(d,!0)-c)*a,(g.c2l(l,!0)-c)*a];0<d&&(c=g.c2l(d),g._lowerLogErrorBound||(g._lowerLogErrorBound=c),g._lowerErrorBound=Math.min(g._lowerLogErrorBound,c))}else h[r]=[-l[0]*a,l[1]*a]}return h}var n=b("../../registry");N.exports=function(k,m,a){k=[p(k.x,k.error_x,m[0],a.xaxis),p(k.y,k.error_y,m[1],a.yaxis),p(k.z,k.error_z,m[2],a.zaxis)];a:{for(m=0;m<k.length;m++)if(k[m]){m=
k[m].length;break a}m=0}if(0===m)return null;a=Array(m);for(var g=0;g<m;g++){for(var h=[[0,0,0],[0,0,0]],r=0;3>r;r++)if(k[r])for(var l=0;2>l;l++)h[l][r]=k[r][g][l];a[g]=h}return a}},{"../../registry":931}],1249:[function(b,N,G){function p(J,K){this.scene=J;this.uid=K;this.color=this.delaunayMesh=this.textMarkers=this.errorBars=this.scatterPlot=this.linePlot=null;this.mode="";this.dataPoints=[];this.axesBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.data=this.textLabels=
null}function n(J){for(var K=[0,0,0],O=[[0,0,0],[0,0,0],[0,0,0]],I=[1,1,1],L=0;3>L;L++){var H=J[L];H&&!1!==H.copy_zstyle&&!1!==J[2].visible&&(H=J[2]);H&&H.visible&&(K[L]=H.width/2,O[L]=z(H.color),I[L]=H.thickness)}return{capSize:K,color:O,lineWidth:I}}function k(J){return null===J||void 0===J?0:-1<J.indexOf("left")?-1:-1<J.indexOf("right")?1:0}function m(J){return null===J||void 0===J?0:-1<J.indexOf("top")?-1:-1<J.indexOf("bottom")?1:0}function a(J){var K=[0,0];if(Array.isArray(J))for(var O=0;O<J.length;O++)K[O]=
[0,0],J[O]&&(K[O][0]=k(J[O]),K[O][1]=m(J[O]));else K[0]=k(J),K[1]=m(J);return K}function g(J,K){return K(4*J)}function h(J){return C[J]}function r(J,K,O,I,L){if(x.isArrayOrTypedArray(J)){var H=[];for(var M=0;M<K;M++)H[M]=void 0===J[M]?I:O(J[M],L)}else H=O(J,x.identity);return H}function l(J,K){function O(na,qa){na=L[na];return v.tickText(na,na.d2l(qa),!0).text}var I=[],L=J.fullSceneLayout,H=J.dataScale,M=L.xaxis,Q=L.yaxis,Z=L.zaxis,ca=K.marker,W=K.line,T=K.x||[],U=K.y||[],ha=K.z||[],Y=T.length,ba=
K.xcalendar,ja=K.ycalendar,ma=K.zcalendar,ia;for(ia=0;ia<Y;ia++){var oa=M.d2l(T[ia],0,ba)*H[0];var xa=Q.d2l(U[ia],0,ja)*H[1];var ra=Z.d2l(ha[ia],0,ma)*H[2];I[ia]=[oa,xa,ra]}if(Array.isArray(K.text))var la=K.text;else if(void 0!==K.text)for(la=Array(Y),ia=0;ia<Y;ia++)la[ia]=K.text;var ka=K.texttemplate;if(ka)for(J=J.fullLayout._d3locale,M=(ia=Array.isArray(ka))?Math.min(ka.length,Y):Y,Q=ia?function(na){return ka[na]}:function(){return ka},la=Array(M),ia=0;ia<M;ia++)Z={x:T[ia],y:U[ia],z:ha[ia]},ba=
{xLabel:O("xaxis",T[ia]),yLabel:O("yaxis",U[ia]),zLabel:O("zaxis",ha[ia])},ja={},y(ja,K,ia),ma=K._meta||{},la[ia]=x.texttemplateString(Q(ia),ba,J,ja,Z,ma);I={position:I,mode:K.mode,text:la};"line"in K&&(I.lineColor=B(W,1,Y),I.lineWidth=W.width,I.lineDashes=W.dash);"marker"in K&&(ia=A(K),I.scatterColor=B(ca,1,Y),I.scatterSize=r(ca.size,Y,g,20,ia),I.scatterMarker=r(ca.symbol,Y,h,""),I.scatterLineWidth=ca.line.width,I.scatterLineColor=B(ca.line,1,Y),I.scatterAngle=0);"textposition"in K&&(I.textOffset=
a(K.textposition),I.textColor=B(K.textfont,1,Y),I.textSize=r(K.textfont.size,Y,x.identity,12),I.textFont=K.textfont.family,I.textAngle=0);ca=["x","y","z"];I.project=[!1,!1,!1];I.projectScale=[1,1,1];I.projectOpacity=[1,1,1];for(ia=0;3>ia;++ia)if(Y=K.projection[ca[ia]],I.project[ia]=Y.show)I.projectOpacity[ia]=Y.opacity,I.projectScale[ia]=Y.scale;I.errorBounds=F(K,H,L);H=n([K.error_x,K.error_y,K.error_z]);I.errorColor=H.color;I.errorLineWidth=H.lineWidth;I.errorCapSize=H.capSize;I.delaunayAxis=K.surfaceaxis;
I.delaunayColor=z(K.surfacecolor);return I}function c(J){if(x.isArrayOrTypedArray(J)){var K=J[0];x.isArrayOrTypedArray(K)&&(J=K);return"rgb("+J.slice(0,3).map(function(O){return Math.round(255*O)})+")"}return null}function d(J){return x.isArrayOrTypedArray(J)?4===J.length&&"number"===typeof J[0]?c(J):J.map(c):null}var e=b("gl-line3d"),f=b("gl-scatter3d"),q=b("gl-error3d"),t=b("gl-mesh3d"),w=b("delaunay-triangulate"),x=b("../../lib"),z=b("../../lib/str2rgbarray"),B=b("../../lib/gl_format_color").formatColor,
A=b("../scatter/make_bubble_size_func"),D=b("../../constants/gl3d_dashes"),C=b("../../constants/gl3d_markers"),v=b("../../plots/cartesian/axes"),y=b("../../components/fx/helpers").appendArrayPointValue,F=b("./calc_errors");b=p.prototype;b.handlePick=function(J){if(J.object&&(J.object===this.linePlot||J.object===this.delaunayMesh||J.object===this.textMarkers||J.object===this.scatterPlot)){var K=J.index=J.data.index;J.object.highlight&&J.object.highlight(null);this.scatterPlot&&(J.object=this.scatterPlot,
this.scatterPlot.highlight(J.data));J.textLabel="";if(this.textLabels)if(Array.isArray(this.textLabels)){if(this.textLabels[K]||0===this.textLabels[K])J.textLabel=this.textLabels[K]}else J.textLabel=this.textLabels;J.traceCoordinate=[this.data.x[K],this.data.y[K],this.data.z[K]];return!0}};b.update=function(J){var K=this.scene.glplot.gl;var O=D.solid;this.data=J;var I=l(this.scene,J);"mode"in I&&(this.mode=I.mode);"lineDashes"in I&&I.lineDashes in D&&(O=D[I.lineDashes]);this.color=d(I.scatterColor)||
d(I.lineColor);this.dataPoints=I.position;O={gl:this.scene.glplot.gl,position:I.position,color:I.lineColor,lineWidth:I.lineWidth||1,dashes:O[0],dashScale:O[1],opacity:J.opacity,connectGaps:J.connectgaps};-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(O):(this.linePlot=e(O),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);O=J.opacity;J.marker&&J.marker.opacity&&(O*=
J.marker.opacity);O={gl:this.scene.glplot.gl,position:I.position,color:I.scatterColor,size:I.scatterSize,glyph:I.scatterMarker,opacity:O,orthographic:!0,lineWidth:I.scatterLineWidth,lineColor:I.scatterLineColor,project:I.project,projectScale:I.projectScale,projectOpacity:I.projectOpacity};-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(O):(this.scatterPlot=f(O),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&
(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null);O={gl:this.scene.glplot.gl,position:I.position,glyph:I.text,color:I.textColor,size:I.textSize,angle:I.textAngle,alignment:I.textOffset,font:I.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:J.opacity};this.textLabels=J.hovertext||J.text;-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(O):(this.textMarkers=f(O),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):
this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null);O={gl:this.scene.glplot.gl,position:I.position,color:I.errorColor,error:I.errorBounds,lineWidth:I.errorLineWidth,capSize:I.errorCapSize,opacity:J.opacity};this.errorBars?I.errorBounds?this.errorBars.update(O):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):I.errorBounds&&(this.errorBars=q(O),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars));
if(0<=I.delaunayAxis){O=I.position;var L=I.delaunayColor;I=I.delaunayAxis;var H=(I+1)%3,M=(I+2)%3,Q=[];I=[];var Z;for(Z=0;Z<O.length;++Z){var ca=O[Z];!isNaN(ca[H])&&isFinite(ca[H])&&!isNaN(ca[M])&&isFinite(ca[M])&&(Q.push([ca[H],ca[M]]),I.push(Z))}H=w(Q);for(Z=0;Z<H.length;++Z)for(M=H[Z],Q=0;Q<M.length;++Q)M[Q]=I[M[Q]];O={positions:O,cells:H,meshColor:L};O.opacity=J.opacity;this.delaunayMesh?this.delaunayMesh.update(O):(O.gl=K,this.delaunayMesh=t(O),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&
(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)};b.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose());this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose());this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose());this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose());this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),
this.delaunayMesh.dispose())};N.exports=function(J,K){J=new p(J,K.uid);J.update(K);return J}},{"../../components/fx/helpers":702,"../../constants/gl3d_dashes":776,"../../constants/gl3d_markers":777,"../../lib":803,"../../lib/gl_format_color":799,"../../lib/str2rgbarray":828,"../../plots/cartesian/axes":854,"../scatter/make_bubble_size_func":1235,"./calc_errors":1248,"delaunay-triangulate":180,"gl-error3d":273,"gl-line3d":281,"gl-mesh3d":315,"gl-scatter3d":334}],1250:[function(b,N,G){function p(l,
c,d,e){var f=0,q=d("x"),t=d("y");d=d("z");n.getComponentMethod("calendars","handleTraceDefaults")(l,c,["x","y","z"],e);q&&t&&d&&(f=Math.min(q.length,t.length,d.length),c._length=c._xlength=c._ylength=c._zlength=f);return f}var n=b("../../registry"),k=b("../../lib"),m=b("../scatter/subtypes"),a=b("../scatter/marker_defaults"),g=b("../scatter/line_defaults"),h=b("../scatter/text_defaults"),r=b("./attributes");N.exports=function(l,c,d,e){function f(z,B){return k.coerce(l,c,r,z,B)}if(p(l,c,f,e)){f("text");
f("hovertext");f("hovertemplate");f("xhoverformat");f("yhoverformat");f("zhoverformat");f("mode");m.hasLines(c)&&(f("connectgaps"),g(l,c,d,e,f));m.hasMarkers(c)&&a(l,c,d,e,f,{noSelect:!0});m.hasText(c)&&(f("texttemplate"),h(l,c,e,f,{noSelect:!0}));e=(c.line||{}).color;var q=(c.marker||{}).color;0<=f("surfaceaxis")&&f("surfacecolor",e||q);for(var t=["x","y","z"],w=0;3>w;++w){var x="projection."+t[w];f(x+".show")&&(f(x+".opacity"),f(x+".scale"))}t=n.getComponentMethod("errorbars","supplyDefaults");
t(l,c,e||q||d,{axis:"z"});t(l,c,e||q||d,{axis:"y",inherit:"z"});t(l,c,e||q||d,{axis:"x",inherit:"z"})}else c.visible=!1}},{"../../lib":803,"../../registry":931,"../scatter/line_defaults":1231,"../scatter/marker_defaults":1237,"../scatter/subtypes":1243,"../scatter/text_defaults":1244,"./attributes":1246}],1251:[function(b,N,G){N.exports={plot:b("./convert"),attributes:b("./attributes"),markerSymbols:b("../../constants/gl3d_markers"),supplyDefaults:b("./defaults"),colorbar:[{container:"marker",min:"cmin",
max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:b("./calc"),moduleType:"trace",name:"scatter3d",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},{"../../constants/gl3d_markers":777,"../../plots/gl3d":896,"./attributes":1246,"./calc":1247,"./convert":1249,"./defaults":1250}],1252:[function(b,N,G){G=b("../scatter/attributes");var p=b("../../plots/attributes"),n=b("../../plots/template_attributes").hovertemplateAttrs,k=b("../../plots/template_attributes").texttemplateAttrs,
m=b("../../components/colorscale/attributes");b=b("../../lib/extend").extendFlat;var a=G.marker,g=G.line,h=a.line;N.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:b({},G.mode,{dflt:"markers"}),text:b({},G.text,{}),texttemplate:k({editType:"plot"},{keys:["a","b","text"]}),hovertext:b({},G.hovertext,{}),line:{color:g.color,width:g.width,dash:g.dash,shape:b({},g.shape,{values:["linear","spline"]}),smoothing:g.smoothing,
editType:"calc"},connectgaps:G.connectgaps,fill:b({},G.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:G.fillcolor,marker:b({symbol:a.symbol,opacity:a.opacity,maxdisplayed:a.maxdisplayed,size:a.size,sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode,line:b({width:h.width,editType:"calc"},m("marker.line")),gradient:a.gradient,editType:"calc"},m("marker")),textfont:G.textfont,textposition:G.textposition,selected:G.selected,unselected:G.unselected,hoverinfo:b({},p.hoverinfo,{flags:["a",
"b","text","name"]}),hoveron:G.hoveron,hovertemplate:n()}},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plots/attributes":850,"../../plots/template_attributes":926,"../scatter/attributes":1218}],1253:[function(b,N,G){var p=b("fast-isnumeric"),n=b("../scatter/colorscale_calc"),k=b("../scatter/arrays_to_calcdata"),m=b("../scatter/calc_selection"),a=b("../scatter/calc").calcMarkerSize,g=b("../carpet/lookup_carpetid");N.exports=function(h,r){var l=r._carpetTrace=g(h,r);
if(l&&l.visible&&"legendonly"!==l.visible){var c;r.xaxis=l.xaxis;r.yaxis=l.yaxis;var d=r._length,e=Array(d),f=!1;for(c=0;c<d;c++){var q=r.a[c];var t=r.b[c];if(p(q)&&p(t)){var w=l.ab2xy(+q,+t,!0),x=l.isVisible(+q,+t);x||(f=!0);e[c]={x:w[0],y:w[1],a:q,b:t,vis:x}}else e[c]={x:!1,y:!1}}r._needsCull=f;e[0].carpet=l;e[0].trace=r;a(r,d);n(h,r);k(e,r);m(e,r);return e}}},{"../carpet/lookup_carpetid":1001,"../scatter/arrays_to_calcdata":1217,"../scatter/calc":1219,"../scatter/calc_selection":1220,"../scatter/colorscale_calc":1221,
"fast-isnumeric":249}],1254:[function(b,N,G){var p=b("../../lib"),n=b("../scatter/constants"),k=b("../scatter/subtypes"),m=b("../scatter/marker_defaults"),a=b("../scatter/line_defaults"),g=b("../scatter/line_shape_defaults"),h=b("../scatter/text_defaults"),r=b("../scatter/fillcolor_defaults"),l=b("./attributes");N.exports=function(c,d,e,f){function q(x,z){return p.coerce(c,d,l,x,z)}q("carpet");d.xaxis="x";d.yaxis="y";var t=q("a"),w=q("b");if(t=Math.min(t.length,w.length)){d._length=t;q("text");q("texttemplate");
q("hovertext");q("mode",t<n.PTS_LINESONLY?"lines+markers":"lines");k.hasLines(d)&&(a(c,d,e,f,q),g(c,d,q),q("connectgaps"));k.hasMarkers(d)&&m(c,d,e,f,q,{gradient:!0});k.hasText(d)&&h(c,d,f,q);f=[];if(k.hasMarkers(d)||k.hasText(d))q("marker.maxdisplayed"),f.push("points");q("fill");"none"!==d.fill&&(r(c,d,e,q),k.hasLines(d)||g(c,d,q));"tonext"!==d.fill&&"toself"!==d.fill||f.push("fills");"fills"!==q("hoveron",f.join("+")||"points")&&q("hovertemplate");p.coerceSelectionMarkerOpacity(d,q)}else d.visible=
!1}},{"../../lib":803,"../scatter/constants":1222,"../scatter/fillcolor_defaults":1226,"../scatter/line_defaults":1231,"../scatter/line_shape_defaults":1233,"../scatter/marker_defaults":1237,"../scatter/subtypes":1243,"../scatter/text_defaults":1244,"./attributes":1252}],1255:[function(b,N,G){N.exports=function(p,n,k,m,a){n=m[a];p.a=n.a;p.b=n.b;p.y=n.y;return p}},{}],1256:[function(b,N,G){N.exports=function(p,n){var k={};n=n._carpet;p=n.ab2ij([p.a,p.b]);var m=Math.floor(p[0]),a=Math.floor(p[1]);n=
n.evalxy([],m,a,p[0]-m,p[1]-a);k.yLabel=n[1].toFixed(3);return k}},{}],1257:[function(b,N,G){var p=b("../scatter/hover"),n=b("../../lib").fillText;N.exports=function(k,m,a,g){function h(d,e){var f=d.labelprefix&&0<d.labelprefix.length?d.labelprefix.replace(/ = $/,""):d._hovertitle;c.push(f+": "+e.toFixed(3)+d.labelsuffix)}if((m=p(k,m,a,g))&&!1!==m[0].index){a=m[0];if(void 0===a.index)return g=k.xa._length,k=g*(1-a.y0/k.ya._length)/2,g-=k,a.x0=Math.max(Math.min(a.x0,g),k),a.x1=Math.max(Math.min(a.x1,
g),k),m;k=a.cd[a.index];a.a=k.a;a.b=k.b;a.xLabelVal=void 0;a.yLabelVal=void 0;g=a.trace;var r=g._carpet,l=g._module.formatLabels(k,g);a.yLabel=l.yLabel;delete a.text;var c=[];g.hovertemplate||(l=(k.hi||g.hoverinfo).split("+"),-1!==l.indexOf("all")&&(l=["a","b","text"]),-1!==l.indexOf("a")&&h(r.aaxis,k.a),-1!==l.indexOf("b")&&h(r.baxis,k.b),c.push("y: "+a.yLabel),-1!==l.indexOf("text")&&n(k,g,c),a.extraText=c.join("\x3cbr\x3e"));return m}}},{"../../lib":803,"../scatter/hover":1229}],1258:[function(b,
N,G){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("./calc"),plot:b("./plot"),style:b("../scatter/style").style,styleOnSelect:b("../scatter/style").styleOnSelect,hoverPoints:b("./hover"),selectPoints:b("../scatter/select"),eventData:b("./event_data"),moduleType:"trace",name:"scattercarpet",basePlotModule:b("../../plots/cartesian"),categories:"svg carpet symbols showLegend carpetDependent zoomScale".split(" "),
meta:{}}},{"../../plots/cartesian":868,"../scatter/marker_colorbar":1236,"../scatter/select":1240,"../scatter/style":1242,"./attributes":1252,"./calc":1253,"./defaults":1254,"./event_data":1255,"./format_labels":1256,"./hover":1257,"./plot":1259}],1259:[function(b,N,G){var p=b("../scatter/plot"),n=b("../../plots/cartesian/axes"),k=b("../../components/drawing");N.exports=function(m,a,g,h){var r=g[0][0].carpet;a={xaxis:n.getFromId(m,r.xaxis||"x"),yaxis:n.getFromId(m,r.yaxis||"y"),plot:a.plot};p(m,a,
g,h);for(a=0;a<g.length;a++)r=g[a][0].trace,r=h.selectAll("g.trace"+r.uid+" .js-line"),k.setClipUrl(r,g[a][0].carpet._clipPathId,m)}},{"../../components/drawing":688,"../../plots/cartesian/axes":854,"../scatter/plot":1239}],1260:[function(b,N,G){G=b("../../plots/template_attributes").hovertemplateAttrs;var p=b("../../plots/template_attributes").texttemplateAttrs,n=b("../scatter/attributes"),k=b("../../plots/attributes"),m=b("../../components/colorscale/attributes"),a=b("../../components/drawing/attributes").dash,
g=b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;var h=n.marker,r=n.line,l=h.line;N.exports=b({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:g({},n.mode,{dflt:"markers"}),text:g({},n.text,{}),texttemplate:p({editType:"plot"},
{keys:["lat","lon","location","text"]}),hovertext:g({},n.hovertext,{}),textfont:n.textfont,textposition:n.textposition,line:{color:r.color,width:r.width,dash:a},connectgaps:n.connectgaps,marker:g({symbol:h.symbol,opacity:h.opacity,size:h.size,sizeref:h.sizeref,sizemin:h.sizemin,sizemode:h.sizemode,colorbar:h.colorbar,line:g({width:l.width},m("marker.line")),gradient:h.gradient},m("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:n.fillcolor,selected:n.selected,
unselected:n.unselected,hoverinfo:g({},k.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:G()},"calc","nested")},{"../../components/colorscale/attributes":673,"../../components/drawing/attributes":687,"../../lib/extend":793,"../../plot_api/edit_types":836,"../../plots/attributes":850,"../../plots/template_attributes":926,"../scatter/attributes":1218}],1261:[function(b,N,G){function p(r){return r&&"string"===typeof r}var n=b("fast-isnumeric"),k=b("../../constants/numerical").BADNUM,
m=b("../scatter/colorscale_calc"),a=b("../scatter/arrays_to_calcdata"),g=b("../scatter/calc_selection"),h=b("../../lib")._;N.exports=function(r,l){var c=Array.isArray(l.locations),d=c?l.locations.length:l._length,e=Array(d);var f=l.geojson?function(z){return p(z)||n(z)}:p;for(var q=0;q<d;q++){var t=e[q]={};if(c){var w=l.locations[q];t.loc=f(w)?w:null}else{w=l.lon[q];var x=l.lat[q];n(w)&&n(x)?t.lonlat=[+w,+x]:t.lonlat=[k,k]}}a(e,l);m(r,l);g(e,l);d&&(e[0].t={labels:{lat:h(r,"lat:")+" ",lon:h(r,"lon:")+
" "}});return e}},{"../../constants/numerical":779,"../../lib":803,"../scatter/arrays_to_calcdata":1217,"../scatter/calc_selection":1220,"../scatter/colorscale_calc":1221,"fast-isnumeric":249}],1262:[function(b,N,G){var p=b("../../lib"),n=b("../scatter/subtypes"),k=b("../scatter/marker_defaults"),m=b("../scatter/line_defaults"),a=b("../scatter/text_defaults"),g=b("../scatter/fillcolor_defaults"),h=b("./attributes");N.exports=function(r,l,c,d){function e(w,x){return p.coerce(r,l,h,w,x)}var f=e("locations");
if(f&&f.length){var q=e("geojson");if("string"===typeof q&&""!==q||p.isPlainObject(q))var t="geojson-id";"geojson-id"===e("locationmode",t)&&e("featureidkey");f=f.length}else f=e("lon")||[],q=e("lat")||[],f=Math.min(f.length,q.length);f?(l._length=f,e("text"),e("hovertext"),e("hovertemplate"),e("mode"),n.hasLines(l)&&(m(r,l,c,d,e),e("connectgaps")),n.hasMarkers(l)&&k(r,l,c,d,e,{gradient:!0}),n.hasText(l)&&(e("texttemplate"),a(r,l,d,e)),e("fill"),"none"!==l.fill&&g(r,l,c,e),p.coerceSelectionMarkerOpacity(l,
e)):l.visible=!1}},{"../../lib":803,"../scatter/fillcolor_defaults":1226,"../scatter/line_defaults":1231,"../scatter/marker_defaults":1237,"../scatter/subtypes":1243,"../scatter/text_defaults":1244,"./attributes":1260}],1263:[function(b,N,G){N.exports=function(p,n,k,m,a){p.lon=n.lon;p.lat=n.lat;p.location=n.loc?n.loc:null;n=m[a];n.fIn&&n.fIn.properties&&(p.properties=n.fIn.properties);return p}},{}],1264:[function(b,N,G){var p=b("../../plots/cartesian/axes");N.exports=function(n,k,m){var a={};k=m[k.geo]._subplot.mockAxis;
n=n.lonlat;a.lonLabel=p.tickText(k,k.c2l(n[0]),!0).text;a.latLabel=p.tickText(k,k.c2l(n[1]),!0).text;return a}},{"../../plots/cartesian/axes":854}],1265:[function(b,N,G){function p(h,r,l,c){if(!h.hovertemplate){var d=r.hi||h.hoverinfo,e="all"===d?g.hoverinfo.flags:d.split("+");d=-1!==e.indexOf("location")&&Array.isArray(h.locations);var f=-1!==e.indexOf("lon"),q=-1!==e.indexOf("lat");e=-1!==e.indexOf("text");var t=[];d?t.push(r.loc):f&&q?t.push("("+(l.latLabel+", ")+(l.lonLabel+")")):f?t.push(c.lon+
(l.lonLabel+"")):q&&t.push(c.lat+(l.latLabel+""));e&&a(r,h,t);return t.join("\x3cbr\x3e")}}var n=b("../../components/fx"),k=b("../../constants/numerical").BADNUM,m=b("../scatter/get_trace_color"),a=b("../../lib").fillText,g=b("./attributes");N.exports=function(h,r,l){var c=h.cd,d=c[0].trace,e=h.xa,f=h.ya,q=h.subplot,t=q.projection.isLonLatOverEdges,w=q.project;n.getClosest(c,function(B){var A=B.lonlat;if(A[0]===k||t(A))return Infinity;var D=w(A),C=w([r,l]);A=Math.abs(D[0]-C[0]);D=Math.abs(D[1]-
C[1]);B=Math.max(3,B.mrc||0);return Math.max(Math.sqrt(A*A+D*D)-B,1-3/B)},h);if(!1!==h.index){var x=c[h.index],z=x.lonlat;e=[e.c2p(z),f.c2p(z)];f=x.mrc||1;h.x0=e[0]-f;h.x1=e[0]+f;h.y0=e[1]-f;h.y1=e[1]+f;h.loc=x.loc;h.lon=z[0];h.lat=z[1];z={};z[d.geo]={_subplot:q};q=d._module.formatLabels(x,d,z);h.lonLabel=q.lonLabel;h.latLabel=q.latLabel;h.color=m(d,x);h.extraText=p(d,x,h,c[0].t.labels);h.hovertemplate=d.hovertemplate;return[h]}}},{"../../components/fx":706,"../../constants/numerical":779,"../../lib":803,
"../scatter/get_trace_color":1228,"./attributes":1260}],1266:[function(b,N,G){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("./calc"),calcGeoJSON:b("./plot").calcGeoJSON,plot:b("./plot").plot,style:b("./style"),styleOnSelect:b("../scatter/style").styleOnSelect,hoverPoints:b("./hover"),eventData:b("./event_data"),selectPoints:b("./select"),moduleType:"trace",name:"scattergeo",basePlotModule:b("../../plots/geo"),
categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/geo":887,"../scatter/marker_colorbar":1236,"../scatter/style":1242,"./attributes":1260,"./calc":1261,"./defaults":1262,"./event_data":1263,"./format_labels":1264,"./hover":1265,"./plot":1267,"./select":1268,"./style":1269}],1267:[function(b,N,G){var p=b("@plotly/d3"),n=b("../../lib"),k=b("../../lib/topojson_utils").getTopojsonFeatures,m=b("../../lib/geojson_utils"),a=b("../../lib/geo_location_utils"),g=b("../../plots/cartesian/autorange").findExtremes,
h=b("../../constants/numerical").BADNUM,r=b("../scatter/calc").calcMarkerSize,l=b("../scatter/subtypes"),c=b("./style");N.exports={calcGeoJSON:function(d,e){var f=d[0].trace;e=e[f.geo];var q=e._subplot,t=f._length;if(Array.isArray(f.locations)){var w=f.locationmode,x="geojson-id"===w?a.extractTraceFeature(d):k(f,q.topojson);for(q=0;q<t;q++){var z=d[q];var B="geojson-id"===w?z.fOut:a.locationToFeature(w,z.loc,x);z.lonlat=B?B.properties.ct:[h,h]}}w={padded:!0};if("geojson"===e.fitbounds&&"geojson-id"===
f.locationmode)d=a.computeBbox(a.getTraceGeojson(f)),x=[d[0],d[2]],B=[d[1],d[3]];else{x=Array(t);B=Array(t);for(q=0;q<t;q++)z=d[q],x[q]=z.lonlat[0],B[q]=z.lonlat[1];w.ppad=r(f,t)}f._extremes.lon=g(e.lonaxis._ax,x,w);f._extremes.lat=g(e.lataxis._ax,B,w)},plot:function(d,e,f){e=e.layers.frontplot.select(".scatterlayer");f=n.makeTraceGroups(e,f,"trace scattergeo");f.selectAll("*").remove();f.each(function(q){var t=p.select(this),w=q[0].trace;if(l.hasLines(w)||"none"!==w.fill){var x=m.calcTraceToLineCoords(q);
x="none"!==w.fill?m.makePolygon(x):m.makeLine(x);t.selectAll("path.js-line").data([{geojson:x,trace:w}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}l.hasMarkers(w)&&t.selectAll("path.point").data(n.identity).enter().append("path").classed("point",!0).each(function(z){z.lonlat[0]===h&&p.select(this).remove()});l.hasText(w)&&t.selectAll("g").data(n.identity).enter().append("g").append("text").each(function(z){z.lonlat[0]===h&&p.select(this).remove()});c(d,q)})}}},{"../../constants/numerical":779,
"../../lib":803,"../../lib/geo_location_utils":796,"../../lib/geojson_utils":797,"../../lib/topojson_utils":832,"../../plots/cartesian/autorange":853,"../scatter/calc":1219,"../scatter/subtypes":1243,"./style":1269,"@plotly/d3":58}],1268:[function(b,N,G){var p=b("../scatter/subtypes"),n=b("../../constants/numerical").BADNUM;N.exports=function(k,m){var a=k.cd,g=k.xaxis,h=k.yaxis,r=[],l=a[0].trace,c;if(!p.hasMarkers(l)&&!p.hasText(l))return[];if(!1===m)for(c=0;c<a.length;c++)a[c].selected=0;else for(c=
0;c<a.length;c++){l=a[c];var d=l.lonlat;if(d[0]!==n){var e=g.c2p(d);var f=h.c2p(d);m.contains([e,f],null,c,k)?(r.push({pointNumber:c,lon:d[0],lat:d[1]}),l.selected=1):l.selected=0}}return r}},{"../../constants/numerical":779,"../scatter/subtypes":1243}],1269:[function(b,N,G){function p(h,r){var l=r[0].trace,c=r[0].node3;c.style("opacity",r[0].trace.opacity);a(c,l,h);g(c,l,h);c.selectAll("path.js-line").style("fill","none").each(function(d){var e=n.select(this);d=d.trace;var f=d.line||{};e.call(m.stroke,
f.color).call(k.dashLine,f.dash||"",f.width||0);"none"!==d.fill&&e.call(m.fill,d.fillcolor)})}var n=b("@plotly/d3"),k=b("../../components/drawing"),m=b("../../components/color");b=b("../scatter/style");var a=b.stylePoints,g=b.styleText;N.exports=function(h,r){r&&p(h,r)}},{"../../components/color":666,"../../components/drawing":688,"../scatter/style":1242,"@plotly/d3":58}],1270:[function(b,N,G){var p=b("../../plots/attributes");G=b("../scatter/attributes");var n=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat,
k=b("../../components/colorscale/attributes"),m=b("../../lib/sort_object_keys"),a=b("../../lib/extend").extendFlat,g=b("../../plot_api/edit_types").overrideAll;b=b("./constants").DASHES;var h=G.line,r=G.marker,l=r.line;N=N.exports=g({x:G.x,x0:G.x0,dx:G.dx,y:G.y,y0:G.y0,dy:G.dy,xperiod:G.xperiod,yperiod:G.yperiod,xperiod0:G.xperiod0,yperiod0:G.yperiod0,xperiodalignment:G.xperiodalignment,yperiodalignment:G.yperiodalignment,xhoverformat:n("x"),yhoverformat:n("y"),text:G.text,hovertext:G.hovertext,textposition:G.textposition,
textfont:G.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:h.color,width:h.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:m(b),dflt:"solid"}},marker:a({},k("marker"),{symbol:r.symbol,size:r.size,sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,opacity:r.opacity,colorbar:r.colorbar,line:a({},k("marker.line"),{width:l.width})}),connectgaps:G.connectgaps,
fill:a({},G.fill,{dflt:"none"}),fillcolor:G.fillcolor,selected:{marker:G.selected.marker,textfont:G.selected.textfont},unselected:{marker:G.unselected.marker,textfont:G.unselected.textfont},opacity:p.opacity},"calc","nested");N.x.editType=N.y.editType=N.x0.editType=N.y0.editType="calc+clearAxisTypes";N.hovertemplate=G.hovertemplate;N.texttemplate=G.texttemplate},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../lib/sort_object_keys":826,"../../plot_api/edit_types":836,"../../plots/attributes":850,
"../../plots/cartesian/axis_format_attributes":857,"../scatter/attributes":1218,"./constants":1272}],1271:[function(b,N,G){function p(t,w,x){t=t._extremes[w._id];w=a(w,x._bnds,{padded:!0});t.min=t.min.concat(w.min);t.max=t.max.concat(w.max)}var n=b("@plotly/point-cluster"),k=b("../../lib"),m=b("../../plots/cartesian/axis_ids"),a=b("../../plots/cartesian/autorange").findExtremes,g=b("../../plots/cartesian/align_period");G=b("../scatter/calc");var h=G.calcMarkerSize,r=G.calcAxisExpansion,l=G.setFirstScatter,
c=b("../scatter/colorscale_calc"),d=b("./convert"),e=b("./scene_update"),f=b("../../constants/numerical").BADNUM,q=b("./constants").TOO_MANY_POINTS;N.exports=function(t,w){var x=t._fullLayout,z=m.getFromId(t,w.xaxis),B=m.getFromId(t,w.yaxis),A=x._plots[w.xaxis+w.yaxis],D=w._length,C=D>=q,v=2*D,y={},F=z.makeCalcdata(w,"x");var J=B.makeCalcdata(w,"y");var K=g(w,z,"x",F),O=g(w,B,"y",J),I=K.vals,L=O.vals;w._x=I;w._y=L;w.xperiodalignment&&(w._origX=F,w._xStarts=K.starts,w._xEnds=K.ends);w.yperiodalignment&&
(w._origY=J,w._yStarts=O.starts,w._yEnds=O.ends);F=Array(v);K=Array(D);for(J=0;J<D;J++)F[2*J]=I[J]===f?NaN:I[J],F[2*J+1]=L[J]===f?NaN:L[J],K[J]=J;if("log"===z.type)for(J=0;J<v;J+=2)F[J]=z.c2l(F[J]);if("log"===B.type)for(J=1;J<v;J+=2)F[J]=B.c2l(F[J]);C&&"log"!==z.type&&"log"!==B.type?y.tree=n(F):y.ids=K;c(t,w);v=d.style(t,w);v.marker&&(v.marker.positions=F);v.line&&1<F.length&&k.extendFlat(v.line,d.linePositions(t,w,F));if(v.errorX||v.errorY)J=d.errorBarPositions(t,w,F,I,L),v.errorX&&k.extendFlat(v.errorX,
J.x),v.errorY&&k.extendFlat(v.errorY,J.y);v.text&&(k.extendFlat(v.text,{positions:F},d.textPosition(t,w,v.text,v.marker)),k.extendFlat(v.textSel,{positions:F},d.textPosition(t,w,v.text,v.markerSel)),k.extendFlat(v.textUnsel,{positions:F},d.textPosition(t,w,v.text,v.markerUnsel)));A=e(t,A);l(x,w);var H;C?v.marker&&(H=v.marker.sizeAvg||Math.max(v.marker.size,3)):H=h(w,D);r(t,w,z,B,I,L,H);v.errorX&&p(w,z,v.errorX);v.errorY&&p(w,B,v.errorY);v.fill&&!A.fill2d&&(A.fill2d=!0);v.marker&&!A.scatter2d&&(A.scatter2d=
!0);v.line&&!A.line2d&&(A.line2d=!0);!v.errorX&&!v.errorY||A.error2d||(A.error2d=!0);v.text&&!A.glText&&(A.glText=!0);v.marker&&(v.marker.snap=D);A.lineOptions.push(v.line);A.errorXOptions.push(v.errorX);A.errorYOptions.push(v.errorY);A.fillOptions.push(v.fill);A.markerOptions.push(v.marker);A.markerSelectedOptions.push(v.markerSel);A.markerUnselectedOptions.push(v.markerUnsel);A.textOptions.push(v.text);A.textSelectedOptions.push(v.textSel);A.textUnselectedOptions.push(v.textUnsel);A.selectBatch.push([]);
A.unselectBatch.push([]);y._scene=A;y.index=A.count;y.x=I;y.y=L;y.positions=F;A.count++;return[{x:!1,y:!1,t:y,trace:w}]}},{"../../constants/numerical":779,"../../lib":803,"../../plots/cartesian/align_period":851,"../../plots/cartesian/autorange":853,"../../plots/cartesian/axis_ids":858,"../scatter/calc":1219,"../scatter/colorscale_calc":1221,"./constants":1272,"./convert":1273,"./scene_update":1281,"@plotly/point-cluster":59}],1272:[function(b,N,G){N.exports={TOO_MANY_POINTS:1E5,SYMBOL_SDF_SIZE:200,
SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},{}],1273:[function(b,N,G){function p(K,O){var I=K._fullLayout,L=O._length,H=O.textfont,M=O.textposition,Q=Array.isArray(M)?M:[M],Z=H.color;M=H.size;H=H.family;var ca={},W;K=K._context.plotGlPixelRatio;var T=O.texttemplate;if(T){ca.text=[];var U=I._d3locale,ha=(W=Array.isArray(T))?Math.min(T.length,L):L,Y=W?function(oa){return T[oa]}:function(){return T};
for(W=0;W<ha;W++){var ba={i:W},ja=O._module.formatLabels(ba,O,I),ma={};D(ma,O,W);var ia=O._meta||{};ca.text.push(d.texttemplateString(Y(W),ja,U,ma,ba,ia))}}else Array.isArray(O.text)&&O.text.length<L?ca.text=O.text.slice():ca.text=O.text;if(Array.isArray(ca.text))for(W=ca.text.length;W<L;W++)ca.text[W]="";ca.opacity=O.opacity;ca.font={};ca.align=[];ca.baseline=[];for(W=0;W<Q.length;W++){O=Q[W].split(/\s+/);switch(O[1]){case "left":ca.align.push("right");break;case "right":ca.align.push("left");break;
default:ca.align.push(O[1])}switch(O[0]){case "top":ca.baseline.push("bottom");break;case "bottom":ca.baseline.push("top");break;default:ca.baseline.push(O[0])}}if(Array.isArray(Z))for(ca.color=Array(L),W=0;W<L;W++)ca.color[W]=Z[W];else ca.color=Z;if(d.isArrayOrTypedArray(M)||Array.isArray(H))for(ca.font=Array(L),W=0;W<L;W++)O=ca.font[W]={},O.size=(d.isTypedArray(M)?M[W]:Array.isArray(M)?h(M[W])?M[W]:0:M)*K,O.family=Array.isArray(H)?H[W]:H;else ca.font={size:M*K,family:H};return ca}function n(K){var O=
K._length,I=K.marker,L={},H=d.isArrayOrTypedArray(I.symbol);var M=d.isArrayOrTypedArray(I.color);var Q=d.isArrayOrTypedArray(I.line.color),Z=d.isArrayOrTypedArray(I.opacity),ca=d.isArrayOrTypedArray(I.size),W=d.isArrayOrTypedArray(I.line.width),T;H||(T=x.isOpenSymbol(I.symbol));if(H||M||Q||Z){L.colors=Array(O);L.borderColors=Array(O);Q=q(I,I.opacity,O);Z=q(I.line,I.opacity,O);if(!Array.isArray(Z[0])){var U=Z;Z=Array(O);for(M=0;M<O;M++)Z[M]=U}if(!Array.isArray(Q[0]))for(U=Q,Q=Array(O),M=0;M<O;M++)Q[M]=
U;L.colors=Q;L.borderColors=Z;for(M=0;M<O;M++)H&&(T=x.isOpenSymbol(I.symbol[M])),T&&(Z[M]=Q[M].slice(),Q[M]=Q[M].slice(),Q[M][3]=0);L.opacity=K.opacity}else T?(L.color=l(I.color,"uint8"),L.color[3]=0,L.borderColor=l(I.color,"uint8")):(L.color=l(I.color,"uint8"),L.borderColor=l(I.line.color,"uint8")),L.opacity=K.opacity*I.opacity;if(H)for(L.markers=Array(O),M=0;M<O;M++)L.markers[M]=g(I.symbol[M]);else L.marker=g(I.symbol);T=w(K,1);if(ca||W){K=L.sizes=Array(O);H=L.borderSizes=Array(O);Q=0;if(ca){for(M=
0;M<O;M++)K[M]=T(I.size[M]),Q+=K[M];var ha=Q/O}else for(ca=T(I.size),M=0;M<O;M++)K[M]=ca;if(W)for(M=0;M<O;M++)H[M]=I.line.width[M];else for(ca=I.line.width,M=0;M<O;M++)H[M]=ca;L.sizeAvg=ha}else L.size=T(I&&I.size||10),L.borderSizes=T(I.line.width);return L}function k(K,O){K=K.marker;var I={};if(!O)return I;O.marker&&O.marker.symbol?I=n(d.extendFlat({},K,O.marker)):O.marker&&(O.marker.size&&(I.size=O.marker.size),O.marker.color&&(I.colors=O.marker.color),void 0!==O.marker.opacity&&(I.opacity=O.marker.opacity));
return I}function m(K,O,I){var L={};if(!I)return L;I.textfont&&(O={opacity:1,text:O.text,texttemplate:O.texttemplate,textposition:O.textposition,textfont:d.extendFlat({},O.textfont)},I.textfont&&d.extendFlat(O.textfont,I.textfont),L=p(K,O));return L}function a(K,O,I){I={capSize:2*O.width*I,lineWidth:O.thickness*I,color:O.color};O.copy_ystyle&&(I=K.error_y);return I}function g(K){if("circle"===K)return null;var O=e.symbolNumber(K);var I=e.symbolFuncs[O%100];var L=!!e.symbolNoDot[O%100];O=!!e.symbolNoFill[O%
100];var H=x.isDotSymbol(K);if(F[K])return F[K];I=H&&!L?I(1.1*v)+J:I(v);I=r(I,{w:C,h:C,viewBox:[-v,-v,v,v],stroke:O?y:-y});return(F[K]=I)||null}var h=b("fast-isnumeric"),r=b("svg-path-sdf"),l=b("color-normalize"),c=b("../../registry"),d=b("../../lib"),e=b("../../components/drawing"),f=b("../../plots/cartesian/axis_ids"),q=b("../../lib/gl_format_color").formatColor,t=b("../scatter/subtypes"),w=b("../scatter/make_bubble_size_func"),x=b("./helpers"),z=b("./constants"),B=b("../../constants/interactions").DESELECTDIM,
A={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},D=b("../../components/fx/helpers").appendArrayPointValue,C=z.SYMBOL_SDF_SIZE,v=z.SYMBOL_SIZE,y=z.SYMBOL_STROKE,F={},J=e.symbolFuncs[0](.05*v);N.exports={style:function(K,O){var I={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},L=K._context.plotGlPixelRatio;if(!0!==O.visible)return I;t.hasText(O)&&(I.text=p(K,O),I.textSel=m(K,O,O.selected),
I.textUnsel=m(K,O,O.unselected));if(t.hasMarkers(O)&&(I.marker=n(O),I.markerSel=k(O,O.selected),I.markerUnsel=k(O,O.unselected),!O.unselected&&d.isArrayOrTypedArray(O.marker.opacity))){var H=O.marker.opacity;I.markerUnsel.opacity=Array(H.length);for(K=0;K<H.length;K++)I.markerUnsel.opacity[K]=B*H[K]}if(t.hasLines(O)){I.line={overlay:!0,thickness:O.line.width*L,color:O.line.color,opacity:O.opacity};H=(z.DASHES[O.line.dash]||[1]).slice();for(K=0;K<H.length;++K)H[K]=H[K]*O.line.width*L;I.line.dashes=
H}O.error_x&&O.error_x.visible&&(I.errorX=a(O,O.error_x,L));O.error_y&&O.error_y.visible&&(I.errorY=a(O,O.error_y,L));O.fill&&"none"!==O.fill&&(I.fill={closed:!0,fill:O.fillcolor,thickness:0});return I},markerStyle:n,markerSelection:k,linePositions:function(K,O,I){var L=I.length,H=L/2;if(t.hasLines(O)&&H)if("hv"===O.line.shape){var M=[];for(K=0;K<H-1;K++)isNaN(I[2*K])||isNaN(I[2*K+1])?M.push(NaN,NaN,NaN,NaN):(M.push(I[2*K],I[2*K+1]),isNaN(I[2*K+2])||isNaN(I[2*K+3])?M.push(NaN,NaN):M.push(I[2*K+2],
I[2*K+1]));M.push(I[L-2],I[L-1])}else if("hvh"===O.line.shape){M=[];for(K=0;K<H-1;K++)if(isNaN(I[2*K])||isNaN(I[2*K+1])||isNaN(I[2*K+2])||isNaN(I[2*K+3]))isNaN(I[2*K])||isNaN(I[2*K+1])?M.push(NaN,NaN):M.push(I[2*K],I[2*K+1]),M.push(NaN,NaN);else{var Q=(I[2*K]+I[2*K+2])/2;M.push(I[2*K],I[2*K+1],Q,I[2*K+1],Q,I[2*K+3])}M.push(I[L-2],I[L-1])}else if("vhv"===O.line.shape){M=[];for(K=0;K<H-1;K++)isNaN(I[2*K])||isNaN(I[2*K+1])||isNaN(I[2*K+2])||isNaN(I[2*K+3])?(isNaN(I[2*K])||isNaN(I[2*K+1])?M.push(NaN,
NaN):M.push(I[2*K],I[2*K+1]),M.push(NaN,NaN)):(Q=(I[2*K+1]+I[2*K+3])/2,M.push(I[2*K],I[2*K+1],I[2*K],Q,I[2*K+2],Q));M.push(I[L-2],I[L-1])}else if("vh"===O.line.shape){M=[];for(K=0;K<H-1;K++)isNaN(I[2*K])||isNaN(I[2*K+1])?M.push(NaN,NaN,NaN,NaN):(M.push(I[2*K],I[2*K+1]),isNaN(I[2*K+2])||isNaN(I[2*K+3])?M.push(NaN,NaN):M.push(I[2*K],I[2*K+3]));M.push(I[L-2],I[L-1])}else M=I;L=!1;for(K=0;K<M.length;K++)if(isNaN(M[K])){L=!0;break}I=L||M.length>z.TOO_MANY_POINTS?"rect":t.hasMarkers(O)?"rect":"round";if(L&&
O.connectgaps)for(O=M[0],L=M[1],K=0;K<M.length;K+=2)isNaN(M[K])||isNaN(M[K+1])?(M[K]=O,M[K+1]=L):(O=M[K],L=M[K+1]);return{join:I,positions:M}},errorBarPositions:function(K,O,I,L,H){function M(T,U){var ha=U._id.charAt(0),Y=O["error_"+ha];if(Y&&Y.visible&&("linear"===U.type||"log"===U.type)){Y=Q(Y);for(var ba={x:0,y:1}[ha],ja={x:[0,1,2,3],y:[2,3,0,1]}[ha],ma=new Float64Array(4*ca),ia=Infinity,oa=-Infinity,xa=0,ra=0;xa<ca;xa++,ra+=4){var la=T[xa];if(h(la)){var ka=I[2*xa+ba],na=Y(la,xa),qa=na[0];na=na[1];
if(h(qa)&&h(na)){var ta=la+na;ma[ra+ja[0]]=ka-U.c2l(la-qa);ma[ra+ja[1]]=U.c2l(ta)-ka;ma[ra+ja[2]]=0;ma[ra+ja[3]]=0;ia=Math.min(ia,la-qa);oa=Math.max(oa,la+na)}}}W[ha]={positions:I,errors:ma,_bnds:[ia,oa]}}}var Q=c.getComponentMethod("errorbars","makeComputeError"),Z=f.getFromId(K,O.xaxis);K=f.getFromId(K,O.yaxis);var ca=I.length/2,W={};M(L,Z);M(H,K);return W},textPosition:function(K,O,I,L){K=O._length;var H={};if(t.hasMarkers(O)){O=I.font;var M=I.align,Q=I.baseline;H.offset=Array(K);for(I=0;I<K;I++){var Z=
L.sizes?L.sizes[I]:L.size,ca=Array.isArray(O)?O[I].size:O.size,W=Array.isArray(M)?1<M.length?M[I]:M[0]:M,T=Array.isArray(Q)?1<Q.length?Q[I]:Q[0]:Q;T=A[T];Z=Z?Z/.8+1:0;H.offset[I]=[A[W]*Z/ca,(-T*Z-.5*T)/ca]}}return H}}},{"../../components/drawing":688,"../../components/fx/helpers":702,"../../constants/interactions":778,"../../lib":803,"../../lib/gl_format_color":799,"../../plots/cartesian/axis_ids":858,"../../registry":931,"../scatter/make_bubble_size_func":1235,"../scatter/subtypes":1243,"./constants":1272,
"./helpers":1277,"color-normalize":131,"fast-isnumeric":249,"svg-path-sdf":595}],1274:[function(b,N,G){var p=b("../../lib"),n=b("../../registry"),k=b("./helpers"),m=b("./attributes"),a=b("../scatter/constants"),g=b("../scatter/subtypes"),h=b("../scatter/xy_defaults"),r=b("../scatter/period_defaults"),l=b("../scatter/marker_defaults"),c=b("../scatter/line_defaults"),d=b("../scatter/fillcolor_defaults"),e=b("../scatter/text_defaults");N.exports=function(f,q,t,w){function x(D,C){return p.coerce(f,q,
m,D,C)}var z=f.marker?k.isOpenSymbol(f.marker.symbol):!1,B=g.isBubble(f),A=h(f,q,w,x);A?(r(f,q,w,x),x("xhoverformat"),x("yhoverformat"),A=A<a.PTS_LINESONLY?"lines+markers":"lines",x("text"),x("hovertext"),x("hovertemplate"),x("mode",A),g.hasLines(q)&&(x("connectgaps"),c(f,q,t,w,x),x("line.shape")),g.hasMarkers(q)&&(l(f,q,t,w,x),x("marker.line.width",z||B?1:0)),g.hasText(q)&&(x("texttemplate"),e(f,q,w,x)),w=(q.line||{}).color,z=(q.marker||{}).color,x("fill"),"none"!==q.fill&&d(f,q,t,x),B=n.getComponentMethod("errorbars",
"supplyDefaults"),B(f,q,w||z||t,{axis:"y"}),B(f,q,w||z||t,{axis:"x",inherit:"y"}),p.coerceSelectionMarkerOpacity(q,x)):q.visible=!1}},{"../../lib":803,"../../registry":931,"../scatter/constants":1222,"../scatter/fillcolor_defaults":1226,"../scatter/line_defaults":1231,"../scatter/marker_defaults":1237,"../scatter/period_defaults":1238,"../scatter/subtypes":1243,"../scatter/text_defaults":1244,"../scatter/xy_defaults":1245,"./attributes":1270,"./helpers":1277}],1275:[function(b,N,G){var p=b("../../lib"),
n=b("../../components/color"),k=b("../../constants/interactions").DESELECTDIM;N.exports={styleTextSelection:function(m){m=m[0];var a=m.trace,g=m.t;m=g._scene;g=g.index;var h=m.selectBatch[g],r=m.unselectBatch[g],l=m.textOptions[g],c=m.textSelectedOptions[g]||{},d=m.textUnselectedOptions[g]||{},e=p.extendFlat({},l);if(h.length||r.length){c=c.color;d=d.color;l=l.color;var f=Array.isArray(l);e.color=Array(a._length);for(a=0;a<h.length;a++){var q=h[a];e.color[q]=c||(f?l[q]:l)}for(a=0;a<r.length;a++)q=
r[a],h=f?l[q]:l,e.color[q]=d?d:c?h:n.addOpacity(h,k)}m.glText[g].update(e)}}},{"../../components/color":666,"../../constants/interactions":778,"../../lib":803}],1276:[function(b,N,G){var p=b("../scatter/format_labels");N.exports=function(n,k,m){var a=n.i;"x"in n||(n.x=k._x[a]);"y"in n||(n.y=k._y[a]);return p(n,k,m)}},{"../scatter/format_labels":1227}],1277:[function(b,N,G){var p=b("./constants");G.isOpenSymbol=function(n){return"string"===typeof n?p.OPEN_RE.test(n):100<n%200};G.isDotSymbol=function(n){return"string"===
typeof n?p.DOT_RE.test(n):200<n}},{"./constants":1272}],1278:[function(b,N,G){function p(a,g,h,r){var l=a.xa,c=a.ya,d=a.distance,e=a.dxy,f=a.index;g={pointNumber:f,x:g[f],y:h[f]};g.tx=Array.isArray(r.text)?r.text[f]:r.text;g.htx=Array.isArray(r.hovertext)?r.hovertext[f]:r.hovertext;g.data=Array.isArray(r.customdata)?r.customdata[f]:r.customdata;g.tp=Array.isArray(r.textposition)?r.textposition[f]:r.textposition;if(h=r.textfont)g.ts=k.isArrayOrTypedArray(h.size)?h.size[f]:h.size,g.tc=Array.isArray(h.color)?
h.color[f]:h.color,g.tf=Array.isArray(h.family)?h.family[f]:h.family;if(h=r.marker)g.ms=k.isArrayOrTypedArray(h.size)?h.size[f]:h.size,g.mo=k.isArrayOrTypedArray(h.opacity)?h.opacity[f]:h.opacity,g.mx=k.isArrayOrTypedArray(h.symbol)?h.symbol[f]:h.symbol,g.mc=k.isArrayOrTypedArray(h.color)?h.color[f]:h.color;var q=h&&h.line;q&&(g.mlc=Array.isArray(q.color)?q.color[f]:q.color,g.mlw=k.isArrayOrTypedArray(q.width)?q.width[f]:q.width);(h=h&&h.gradient)&&"none"!==h.type&&(g.mgt=Array.isArray(h.type)?h.type[f]:
h.type,g.mgc=Array.isArray(h.color)?h.color[f]:h.color);l=l.c2p(g.x,!0);c=c.c2p(g.y,!0);h=g.mrc||1;if(q=r.hoverlabel)g.hbg=Array.isArray(q.bgcolor)?q.bgcolor[f]:q.bgcolor,g.hbc=Array.isArray(q.bordercolor)?q.bordercolor[f]:q.bordercolor,g.hts=k.isArrayOrTypedArray(q.font.size)?q.font.size[f]:q.font.size,g.htc=Array.isArray(q.font.color)?q.font.color[f]:q.font.color,g.htf=Array.isArray(q.font.family)?q.font.family[f]:q.font.family,g.hnl=k.isArrayOrTypedArray(q.namelength)?q.namelength[f]:q.namelength;
if(q=r.hoverinfo)g.hi=Array.isArray(q)?q[f]:q;if(q=r.hovertemplate)g.ht=Array.isArray(q)?q[f]:q;q={};q[a.index]=g;var t=r._origX,w=r._origY;a=k.extendFlat({},a,{color:m(r,g),x0:l-h,x1:l+h,xLabelVal:t?t[f]:g.x,y0:c-h,y1:c+h,yLabelVal:w?w[f]:g.y,cd:q,distance:d,spikeDistance:e,hovertemplate:g.ht});"end"===r.xperiodalignment&&(a.xPeriod=g.x);"end"===r.yperiodalignment&&(a.yPeriod=g.y);g.htx?a.text=g.htx:g.tx?a.text=g.tx:r.text&&(a.text=r.text);k.fillText(g,r,a);n.getComponentMethod("errorbars","hoverInfo")(g,
r,a);return a}var n=b("../../registry"),k=b("../../lib"),m=b("../scatter/get_trace_color");N.exports={hoverPoints:function(a,g,h,r){var l=a.cd,c=l[0].t;l=l[0].trace;var d=a.xa,e=a.ya,f=c.x,q=c.y;g=d.c2p(g);h=e.c2p(h);var t=a.distance;if(c.tree){var w=d.p2c(g-t),x=d.p2c(g+t),z=e.p2c(h-t),B=e.p2c(h+t);c="x"===r?c.tree.range(Math.min(w,x),Math.min(e._rl[0],e._rl[1]),Math.max(w,x),Math.max(e._rl[0],e._rl[1])):c.tree.range(Math.min(w,x),Math.min(z,B),Math.max(w,x),Math.max(z,B))}else c=c.ids;if("x"===
r)for(x=!!l.xperiodalignment,z=!!l.yperiodalignment,r=0;r<c.length;r++){w=c[r];B=f[w];B=Math.abs(d.c2p(B)-g);if(x){B=d.c2p(l._xStarts[w]);var A=d.c2p(l._xEnds[w]);B=g>=Math.min(B,A)&&g<=Math.max(B,A)?0:Infinity}if(B<t){t=B;A=q[w];A=e.c2p(A)-h;if(z){var D=e.c2p(l._yStarts[w]);var C=e.c2p(l._yEnds[w]);A=h>=Math.min(D,C)&&h<=Math.max(D,C)?0:Infinity}C=Math.sqrt(B*B+A*A);D=c[r]}}else for(r=c.length-1;-1<r;r--)w=c[r],B=f[w],A=q[w],B=d.c2p(B)-g,A=e.c2p(A)-h,x=Math.sqrt(B*B+A*A),x<t&&(t=C=x,D=w);a.index=
D;a.distance=t;a.dxy=C;return void 0===D?[a]:[p(a,f,q,l)]},calcHover:p}},{"../../lib":803,"../../registry":931,"../scatter/get_trace_color":1228}],1279:[function(b,N,G){G=b("./hover");N.exports={moduleType:"trace",name:"scattergl",basePlotModule:b("../../plots/cartesian"),categories:"gl regl cartesian symbols errorBarsOK showLegend scatter-like".split(" "),attributes:b("./attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("../scatter/cross_trace_defaults"),colorbar:b("../scatter/marker_colorbar"),
formatLabels:b("./format_labels"),calc:b("./calc"),plot:b("./plot"),hoverPoints:G.hoverPoints,selectPoints:b("./select"),meta:{}}},{"../../plots/cartesian":868,"../scatter/cross_trace_defaults":1224,"../scatter/marker_colorbar":1236,"./attributes":1270,"./calc":1271,"./defaults":1274,"./format_labels":1276,"./hover":1278,"./plot":1280,"./select":1282}],1280:[function(b,N,G){function p(e,f,q,t){var w=e._size,x=w.w*t,z=w.h*t;return[w.l*t+f.domain[0]*x,w.b*t+q.domain[0]*z,e.width*t-w.r*t-(1-f.domain[1])*
x,e.height*t-w.t*t-(1-q.domain[1])*z]}var n=b("regl-scatter2d"),k=b("regl-line2d"),m=b("regl-error2d"),a=b("gl-text"),g=b("../../lib"),h=b("../../components/dragelement/helpers").selectMode,r=b("../../lib/prepare_regl"),l=b("../scatter/subtypes"),c=b("../scatter/link_traces"),d=b("./edit_style").styleTextSelection;N.exports=function(e,f,q){if(q.length){var t=e._fullLayout,w=f._scene,x=f.xaxis,z=f.yaxis;if(w)if(r(e,["ANGLE_instanced_arrays","OES_element_index_uint"])){var B=w.count,A=t._glcanvas.data()[0].regl;
c(e,f,q);if(w.dirty){!0===w.error2d&&(w.error2d=m(A));!0===w.line2d&&(w.line2d=k(A));!0===w.scatter2d&&(w.scatter2d=n(A));!0===w.fill2d&&(w.fill2d=k(A));if(!0===w.glText)for(w.glText=Array(B),f=0;f<B;f++)w.glText[f]=new a(A);if(w.glText){if(B>w.glText.length){var D=B-w.glText.length;for(f=0;f<D;f++)w.glText.push(new a(A))}else B<w.glText.length&&w.glText.splice(B,w.glText.length-B).forEach(function(H){H.destroy()});for(f=0;f<B;f++)w.glText[f].update(w.textOptions[f])}w.line2d&&(w.line2d.update(w.lineOptions),
w.lineOptions=w.lineOptions.map(function(H){if(H&&H.positions){for(var M=H.positions,Q=0;Q<M.length&&(isNaN(M[Q])||isNaN(M[Q+1]));)Q+=2;for(var Z=M.length-2;Z>Q&&(isNaN(M[Z])||isNaN(M[Z+1]));)Z-=2;H.positions=M.slice(Q,Z+2)}return H}),w.line2d.update(w.lineOptions));w.error2d&&(f=(w.errorXOptions||[]).concat(w.errorYOptions||[]),w.error2d.update(f));w.scatter2d&&w.scatter2d.update(w.markerOptions);w.fillOrder=g.repeat(null,B);w.fill2d&&(w.fillOptions=w.fillOptions.map(function(H,M){var Q=q[M];if(H&&
Q&&Q[0]&&Q[0].trace){var Z=Q[0];Q=Z.trace;var ca=Z.t,W=w.lineOptions[M],T;Z=[];Q._ownfill&&Z.push(M);Q._nexttrace&&Z.push(M+1);Z.length&&(w.fillOrder[M]=Z);Z=[];ca=W&&W.positions||ca.positions;if("tozeroy"===Q.fill){for(W=0;W<ca.length&&isNaN(ca[W+1]);)W+=2;for(T=ca.length-2;T>W&&isNaN(ca[T+1]);)T-=2;0!==ca[W+1]&&(Z=[ca[W],0]);Z=Z.concat(ca.slice(W,T+2));0!==ca[T+1]&&(Z=Z.concat([ca[T],0]))}else if("tozerox"===Q.fill){for(W=0;W<ca.length&&isNaN(ca[W]);)W+=2;for(T=ca.length-2;T>W&&isNaN(ca[T]);)T-=
2;0!==ca[W]&&(Z=[0,ca[W+1]]);Z=Z.concat(ca.slice(W,T+2));0!==ca[T]&&(Z=Z.concat([0,ca[T+1]]))}else if("toself"===Q.fill||"tonext"===Q.fill){Z=[];T=0;H.splitNull=!0;for(W=0;W<ca.length;W+=2)if(isNaN(ca[W])||isNaN(ca[W+1]))Z=Z.concat(ca.slice(T,W)),Z.push(ca[T],ca[T+1]),Z.push(null,null),T=W+2;Z=Z.concat(ca.slice(T));T&&Z.push(ca[T],ca[T+1])}else if(W=Q._nexttrace)if(T=w.lineOptions[M+1])if(T=T.positions,"tonexty"===Q.fill){Z=ca.slice();for(M=Math.floor(T.length/2);M--;){ca=T[2*M];var U=T[2*M+1];isNaN(ca)||
isNaN(U)||Z.push(ca,U)}H.fill=W.fillcolor}if(Q._prevtrace&&"tonext"===Q._prevtrace.fill){M=w.lineOptions[M-1].positions;ca=Z.length/2;T=[ca];for(W=0;W<M.length;W+=2)(isNaN(M[W])||isNaN(M[W+1]))&&T.push(W/2+ca+1);Z=Z.concat(M);H.hole=T}H.fillmode=Q.fill;H.opacity=Q.opacity;H.positions=Z;return H}}),w.fill2d.update(w.fillOptions))}A=h(t.dragmode);D=-1<t.clickmode.indexOf("select");for(f=0;f<B;f++){var C=q[f][0];var v=C.trace;var y=C.t,F=y.index;C=v._length;var J=y.x,K=y.y;if(v.selectedpoints||A||D){A||
(A=!0);if(v.selectedpoints){var O=w.selectBatch[F]=g.selIndices2selPoints(v),I={};for(v=0;v<O.length;v++)I[O[v]]=1;O=[];for(v=0;v<C;v++)I[v]||O.push(v);w.unselectBatch[F]=O}F=y.xpx=Array(C);y=y.ypx=Array(C);for(v=0;v<C;v++)F[v]=x.c2p(J[v]),y[v]=z.c2p(K[v])}else y.xpx=y.ypx=null}if(A){w.select2d||(w.select2d=n(t._glcanvas.data()[1].regl));if(w.scatter2d){A=Array(B);for(f=0;f<B;f++)A[f]=w.selectBatch[f].length||w.unselectBatch[f].length?w.markerUnselectedOptions[f]:{};w.scatter2d.update(A)}w.select2d&&
(w.select2d.update(w.markerOptions),w.select2d.update(w.markerSelectedOptions));w.glText&&q.forEach(function(H){l.hasText(((H||[])[0]||{}).trace||{})&&d(H)})}else w.scatter2d&&w.scatter2d.update(w.markerOptions);var L={viewport:p(t,x,z,e._context.plotGlPixelRatio),range:[(x._rl||x.range)[0],(z._rl||z.range)[0],(x._rl||x.range)[1],(z._rl||z.range)[1]]};e=g.repeat(L,w.count);w.fill2d&&w.fill2d.update(e);w.line2d&&w.line2d.update(e);w.error2d&&w.error2d.update(e.concat(e));w.scatter2d&&w.scatter2d.update(e);
w.select2d&&w.select2d.update(e);w.glText&&w.glText.forEach(function(H){H.update(L)})}else w.init()}}},{"../../components/dragelement/helpers":684,"../../lib":803,"../../lib/prepare_regl":816,"../scatter/link_traces":1234,"../scatter/subtypes":1243,"./edit_style":1275,"gl-text":355,"regl-error2d":536,"regl-line2d":537,"regl-scatter2d":538}],1281:[function(b,N,G){var p=b("../../lib");N.exports=function(n,k){var m=k._scene,a={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],
markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},g={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};k._scene||(m=k._scene={},m.init=function(){p.extendFlat(m,g,a)},m.init(),m.update=function(h){var r=p.repeat(h,m.count);m.fill2d&&m.fill2d.update(r);m.scatter2d&&m.scatter2d.update(r);m.line2d&&m.line2d.update(r);m.error2d&&m.error2d.update(r.concat(r));m.select2d&&m.select2d.update(r);
if(m.glText)for(r=0;r<m.count;r++)m.glText[r].update(h)},m.draw=function(){for(var h=m.count,r=m.fill2d,l=m.error2d,c=m.line2d,d=m.scatter2d,e=m.glText,f=m.select2d,q=m.selectBatch,t=m.unselectBatch,w=0;w<h;w++){r&&m.fillOrder[w]&&r.draw(m.fillOrder[w]);c&&m.lineOptions[w]&&c.draw(w);l&&(m.errorXOptions[w]&&l.draw(w),m.errorYOptions[w]&&l.draw(w+h));if(d&&m.markerOptions[w])if(t[w].length){var x=p.repeat([],m.count);x[w]=t[w];d.draw(x)}else q[w].length||d.draw(w);e[w]&&m.textOptions[w]&&e[w].render()}f&&
f.draw(q);m.dirty=!1},m.destroy=function(){m.fill2d&&m.fill2d.destroy&&m.fill2d.destroy();m.scatter2d&&m.scatter2d.destroy&&m.scatter2d.destroy();m.error2d&&m.error2d.destroy&&m.error2d.destroy();m.line2d&&m.line2d.destroy&&m.line2d.destroy();m.select2d&&m.select2d.destroy&&m.select2d.destroy();m.glText&&m.glText.forEach(function(h){h.destroy&&h.destroy()});m.lineOptions=null;m.fillOptions=null;m.markerOptions=null;m.markerSelectedOptions=null;m.markerUnselectedOptions=null;m.errorXOptions=null;m.errorYOptions=
null;m.textOptions=null;m.textSelectedOptions=null;m.textUnselectedOptions=null;m.selectBatch=null;m.unselectBatch=null;k._scene=null});m.dirty||p.extendFlat(m,a);return m}},{"../../lib":803}],1282:[function(b,N,G){var p=b("../scatter/subtypes"),n=b("./edit_style").styleTextSelection;N.exports=function(k,m){var a=k.cd,g=k.xaxis,h=k.yaxis,r=[],l=a[0].trace,c=a[0].t,d=l._length,e=c.x,f=c.y,q=c._scene,t=c.index;if(!q)return r;var w=p.hasText(l),x=p.hasMarkers(l);if(!0!==l.visible||!x&&!w)return r;l=
[];var z=[];if(!1!==m&&!m.degenerate)for(var B=0;B<d;B++)m.contains([c.xpx[B],c.ypx[B]],!1,B,k)?(l.push(B),r.push({pointNumber:B,x:g.c2d(e[B]),y:h.c2d(f[B])})):z.push(B);x&&((k=q.scatter2d,l.length||z.length)?q.selectBatch[t].length||q.unselectBatch[t].length||(m=Array(q.count),m[t]=q.markerUnselectedOptions[t],k.update.apply(k,m)):(m=Array(q.count),m[t]=q.markerOptions[t],k.update.apply(k,m)));q.selectBatch[t]=l;q.unselectBatch[t]=z;w&&n(a);return r}},{"../scatter/subtypes":1243,"./edit_style":1275}],
1283:[function(b,N,G){G=b("../../plots/template_attributes").hovertemplateAttrs;var p=b("../../plots/template_attributes").texttemplateAttrs,n=b("../scattergeo/attributes"),k=b("../scatter/attributes"),m=b("../../plots/mapbox/layout_attributes"),a=b("../../plots/attributes"),g=b("../../components/colorscale/attributes"),h=b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;var r=n.line,l=n.marker;N.exports=b({lon:n.lon,lat:n.lat,mode:h({},k.mode,{dflt:"markers"}),text:h({},
k.text,{}),texttemplate:p({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:h({},k.hovertext,{}),line:{color:r.color,width:r.width},connectgaps:k.connectgaps,marker:h({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:l.opacity,size:l.size,sizeref:l.sizeref,sizemin:l.sizemin,sizemode:l.sizemode},g("marker")),fill:n.fill,fillcolor:k.fillcolor,textfont:m.layers.symbol.textfont,textposition:m.layers.symbol.textposition,
below:{valType:"string"},selected:{marker:k.selected.marker},unselected:{marker:k.unselected.marker},hoverinfo:h({},a.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:G()},"calc","nested")},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plot_api/edit_types":836,"../../plots/attributes":850,"../../plots/mapbox/layout_attributes":913,"../../plots/template_attributes":926,"../scatter/attributes":1218,"../scattergeo/attributes":1260}],1284:[function(b,N,G){function p(){return{geojson:r.makeBlank(),
layout:{visibility:"none"},paint:{}}}function n(x){var z=x[0].trace,B=z.marker,A=z.selectedpoints,D=g.isArrayOrTypedArray(B.color),C=g.isArrayOrTypedArray(B.size),v=g.isArrayOrTypedArray(B.opacity),y,F;D&&(F=l.hasColorscale(z,"marker")?l.makeColorScaleFuncFromTrace(B):g.identity);var J;C&&(J=d(z));var K;v&&(K=function(Q){Q=a(Q)?+g.constrain(Q,0,1):0;return z.opacity*Q});var O=[];for(y=0;y<x.length;y++){var I=x[y],L=I.lonlat;if(L[0]!==h){var H={};F&&(H.mcc=I.mcc=F(I.mc));J&&(H.mrc=I.mrc=J(I.ms));K&&
(H.mo=K(I.mo));A&&(H.selected=I.selected||0);O.push({type:"Feature",geometry:{type:"Point",coordinates:L},properties:H})}}if(A){var M=c.makeSelectedPointStyleFns(z);for(y=0;y<O.length;y++)x=O[y].properties,M.selectedOpacityFn&&(x.mo=z.opacity*M.selectedOpacityFn(x)),M.selectedColorFn&&(x.mcc=M.selectedColorFn(x)),M.selectedSizeFn&&(x.mrc=M.selectedSizeFn(x))}return{geojson:{type:"FeatureCollection",features:O},mcc:D||M&&M.selectedColorFn?{type:"identity",property:"mcc"}:B.color,mrc:C||M&&M.selectedSizeFn?
{type:"identity",property:"mrc"}:B.size/2,mo:v||M&&M.selectedOpacityFn?{type:"identity",property:"mo"}:z.opacity*B.opacity}}function k(x,z){return g.isArrayOrTypedArray(x)?z?function(B){return a(x[B])?+x[B]:0}:function(B){return x[B]}:x?function(){return x}:m}function m(){return""}var a=b("fast-isnumeric"),g=b("../../lib"),h=b("../../constants/numerical").BADNUM,r=b("../../lib/geojson_utils"),l=b("../../components/colorscale"),c=b("../../components/drawing"),d=b("../scatter/make_bubble_size_func"),
e=b("../scatter/subtypes"),f=b("../../plots/mapbox/convert_text_opts"),q=b("../../components/fx/helpers").appendArrayPointValue,t=b("../../lib/svg_text_utils").NEWLINES,w=b("../../lib/svg_text_utils").BR_TAG_ALL;N.exports=function(x,z){var B=z[0].trace,A=!0===B.visible&&0!==B._length,D="none"!==B.fill,C=e.hasLines(B),v=e.hasMarkers(B),y=e.hasText(B),F=v&&"circle"===B.marker.symbol,J=v&&"circle"!==B.marker.symbol,K=p(),O=p(),I=p();v=p();var L={fill:K,line:O,circle:I,symbol:v};if(!A)return L;if(D||
C)var H=r.calcTraceToLineCoords(z);D&&(K.geojson=r.makePolygon(H),K.layout.visibility="visible",g.extendFlat(K.paint,{"fill-color":B.fillcolor}));C&&(O.geojson=r.makeLine(H),O.layout.visibility="visible",g.extendFlat(O.paint,{"line-width":B.line.width,"line-color":B.line.color,"line-opacity":B.opacity}));F&&(A=n(z),I.geojson=A.geojson,I.layout.visibility="visible",g.extendFlat(I.paint,{"circle-color":A.mcc,"circle-radius":A.mrc,"circle-opacity":A.mo}));if(J||y){x=x._fullLayout;A=z[0].trace;C=A.marker||
{};D=C.symbol;C=C.angle;D="circle"!==D?k(D):m;C="auto"!==C?k(C,!0):m;F=e.hasText(A)?k(A.text):m;I=[];for(H=0;H<z.length;H++)if(K=z[H],K.lonlat[0]!==h){if(O=A.texttemplate){O=Array.isArray(O)?O[H]||"":O;var M=A._module.formatLabels(K,A,x),Q={};q(Q,A,K.i);O=g.texttemplateString(O,M,x._d3locale,Q,K,A._meta||{})}else O=F(H);O&&(O=O.replace(t,"").replace(w,"\n"));I.push({type:"Feature",geometry:{type:"Point",coordinates:K.lonlat},properties:{symbol:D(H),angle:C(H),text:O}})}v.geojson={type:"FeatureCollection",
features:I};g.extendFlat(v.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"});J&&(g.extendFlat(v.layout,{"icon-size":B.marker.size/10}),"angle"in B.marker&&"auto"!==B.marker.angle&&g.extendFlat(v.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),v.layout["icon-allow-overlap"]=B.marker.allowoverlap,g.extendFlat(v.paint,{"icon-opacity":B.opacity*B.marker.opacity,"icon-color":B.marker.color}));y&&(z=f(B.textposition,(B.marker||{}).size),
g.extendFlat(v.layout,{"text-size":B.textfont.size,"text-anchor":z.anchor,"text-offset":z.offset}),g.extendFlat(v.paint,{"text-color":B.textfont.color,"text-opacity":B.opacity}))}return L}},{"../../components/colorscale":678,"../../components/drawing":688,"../../components/fx/helpers":702,"../../constants/numerical":779,"../../lib":803,"../../lib/geojson_utils":797,"../../lib/svg_text_utils":829,"../../plots/mapbox/convert_text_opts":910,"../scatter/make_bubble_size_func":1235,"../scatter/subtypes":1243,
"fast-isnumeric":249}],1285:[function(b,N,G){function p(l,c,d){l=d("lon")||[];d=d("lat")||[];d=Math.min(l.length,d.length);return c._length=d}var n=b("../../lib"),k=b("../scatter/subtypes"),m=b("../scatter/marker_defaults"),a=b("../scatter/line_defaults"),g=b("../scatter/text_defaults"),h=b("../scatter/fillcolor_defaults"),r=b("./attributes");N.exports=function(l,c,d,e){function f(t,w){return n.coerce(l,c,r,t,w)}if(p(l,c,f)){f("text");f("texttemplate");f("hovertext");f("hovertemplate");f("mode");
f("below");k.hasLines(c)&&(a(l,c,d,e,f,{noDash:!0}),f("connectgaps"));if(k.hasMarkers(c)){m(l,c,d,e,f,{noLine:!0});f("marker.allowoverlap");f("marker.angle");var q=c.marker;"circle"!==q.symbol&&(n.isArrayOrTypedArray(q.size)&&(q.size=q.size[0]),n.isArrayOrTypedArray(q.color)&&(q.color=q.color[0]))}k.hasText(c)&&g(l,c,e,f,{noSelect:!0});f("fill");"none"!==c.fill&&h(l,c,d,f);n.coerceSelectionMarkerOpacity(c,f)}else c.visible=!1}},{"../../lib":803,"../scatter/fillcolor_defaults":1226,"../scatter/line_defaults":1231,
"../scatter/marker_defaults":1237,"../scatter/subtypes":1243,"../scatter/text_defaults":1244,"./attributes":1283}],1286:[function(b,N,G){N.exports=function(p,n){p.lon=n.lon;p.lat=n.lat;return p}},{}],1287:[function(b,N,G){var p=b("../../plots/cartesian/axes");N.exports=function(n,k,m){var a={};k=m[k.subplot]._subplot.mockAxis;n=n.lonlat;a.lonLabel=p.tickText(k,k.c2l(n[0]),!0).text;a.latLabel=p.tickText(k,k.c2l(n[1]),!0).text;return a}},{"../../plots/cartesian/axes":854}],1288:[function(b,N,G){function p(h,
r,l){if(!h.hovertemplate){var c=(r.hi||h.hoverinfo).split("+"),d=-1!==c.indexOf("all"),e=-1!==c.indexOf("lon"),f=-1!==c.indexOf("lat"),q=r.lonlat,t=[];d||e&&f?t.push("("+(q[1]+", ")+(q[0]+")")):e?t.push(l.lon+(q[0]+"")):f&&t.push(l.lat+(q[1]+""));(d||-1!==c.indexOf("text"))&&a(r,h,t);return t.join("\x3cbr\x3e")}}var n=b("../../components/fx"),k=b("../../lib"),m=b("../scatter/get_trace_color"),a=k.fillText,g=b("../../constants/numerical").BADNUM;N.exports={hoverPoints:function(h,r,l){var c=h.cd,
d=c[0].trace,e=h.xa,f=h.ya,q=h.subplot,t=360*(0<=r?Math.floor((r+180)/360):Math.ceil((r-180)/360)),w=r-t;n.getClosest(c,function(B){var A=B.lonlat;if(A[0]===g)return Infinity;var D=k.modHalf(A[0],360);A=A[1];var C=q.project([D,A]);A=C.x-e.c2p([w,A]);D=C.y-f.c2p([D,l]);B=Math.max(3,B.mrc||0);return Math.max(Math.sqrt(A*A+D*D)-B,1-3/B)},h);if(!1!==h.index){r=c[h.index];var x=r.lonlat;x=[k.modHalf(x[0],360)+t,x[1]];t=e.c2p(x);x=f.c2p(x);var z=r.mrc||1;h.x0=t-z;h.x1=t+z;h.y0=x-z;h.y1=x+z;t={};t[d.subplot]=
{_subplot:q};t=d._module.formatLabels(r,d,t);h.lonLabel=t.lonLabel;h.latLabel=t.latLabel;h.color=m(d,r);h.extraText=p(d,r,c[0].t.labels);h.hovertemplate=d.hovertemplate;return[h]}},getExtraText:p}},{"../../components/fx":706,"../../constants/numerical":779,"../../lib":803,"../scatter/get_trace_color":1228}],1289:[function(b,N,G){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("../scattergeo/calc"),
plot:b("./plot"),hoverPoints:b("./hover").hoverPoints,eventData:b("./event_data"),selectPoints:b("./select"),styleOnSelect:function(p,n){n&&n[0].trace._glTrace.update(n)},moduleType:"trace",name:"scattermapbox",basePlotModule:b("../../plots/mapbox"),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/mapbox":911,"../scatter/marker_colorbar":1236,"../scattergeo/calc":1261,"./attributes":1283,"./defaults":1285,"./event_data":1286,"./format_labels":1287,"./hover":1288,
"./plot":1290,"./select":1291}],1290:[function(b,N,G){function p(a,g){this.type="scattermapbox";this.subplot=a;this.uid=g;this.sourceIds={fill:"source-"+g+"-fill",line:"source-"+g+"-line",circle:"source-"+g+"-circle",symbol:"source-"+g+"-symbol"};this.layerIds={fill:k+g+"-fill",line:k+g+"-line",circle:k+g+"-circle",symbol:k+g+"-symbol"};this.below=null}var n=b("./convert"),k=b("../../plots/mapbox/constants").traceLayerPrefix,m=["fill","line","circle","symbol"];b=p.prototype;b.addSource=function(a,
g){this.subplot.map.addSource(this.sourceIds[a],{type:"geojson",data:g.geojson})};b.setSourceData=function(a,g){this.subplot.map.getSource(this.sourceIds[a]).setData(g.geojson)};b.addLayer=function(a,g,h){this.subplot.addLayer({type:a,id:this.layerIds[a],source:this.sourceIds[a],layout:g.layout,paint:g.paint},h)};b.update=function(a){var g=this.subplot,h=g.map,r=n(g.gd,a),l=g.belowLookup["trace-"+this.uid],c;if(l!==this.below){for(c=m.length-1;0<=c;c--){var d=m[c];h.removeLayer(this.layerIds[d])}for(c=
0;c<m.length;c++)d=m[c],h=r[d],this.addLayer(d,h,l);this.below=l}for(c=0;c<m.length;c++)d=m[c],h=r[d],g.setOptions(this.layerIds[d],"setLayoutProperty",h.layout),"visible"===h.layout.visibility&&(this.setSourceData(d,h),g.setOptions(this.layerIds[d],"setPaintProperty",h.paint));a[0].trace._glTrace=this};b.dispose=function(){for(var a=this.subplot.map,g=m.length-1;0<=g;g--){var h=m[g];a.removeLayer(this.layerIds[h]);a.removeSource(this.sourceIds[h])}};N.exports=function(a,g){var h=g[0].trace,r=new p(a,
h.uid),l=n(a.gd,g);a=r.below=a.belowLookup["trace-"+h.uid];for(h=0;h<m.length;h++){var c=m[h],d=l[c];r.addSource(c,d);r.addLayer(c,d,a)}return g[0].trace._glTrace=r}},{"../../plots/mapbox/constants":909,"./convert":1284}],1291:[function(b,N,G){var p=b("../../lib"),n=b("../scatter/subtypes"),k=b("../../constants/numerical").BADNUM;N.exports=function(m,a){var g=m.cd,h=m.xaxis,r=m.yaxis,l=[],c;if(!n.hasMarkers(g[0].trace))return[];if(!1===a)for(c=0;c<g.length;c++)g[c].selected=0;else for(c=0;c<g.length;c++){var d=
g[c],e=d.lonlat;if(e[0]!==k){var f=[p.modHalf(e[0],360),e[1]];f=[h.c2p(f),r.c2p(f)];a.contains(f,null,c,m)?(l.push({pointNumber:c,lon:e[0],lat:e[1]}),d.selected=1):d.selected=0}}return l}},{"../../constants/numerical":779,"../../lib":803,"../scatter/subtypes":1243}],1292:[function(b,N,G){G=b("../../plots/template_attributes").hovertemplateAttrs;var p=b("../../plots/template_attributes").texttemplateAttrs,n=b("../../lib/extend").extendFlat,k=b("../scatter/attributes");b=b("../../plots/attributes");
var m=k.line;N.exports={mode:k.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:k.text,texttemplate:p({editType:"plot"},
{keys:["r","theta","text"]}),hovertext:k.hovertext,line:{color:m.color,width:m.width,dash:m.dash,shape:n({},m.shape,{values:["linear","spline"]}),smoothing:m.smoothing,editType:"calc"},connectgaps:k.connectgaps,marker:k.marker,cliponaxis:n({},k.cliponaxis,{dflt:!1}),textposition:k.textposition,textfont:k.textfont,fill:n({},k.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:k.fillcolor,hoverinfo:n({},b.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:k.hoveron,hovertemplate:G(),
selected:k.selected,unselected:k.unselected}},{"../../lib/extend":793,"../../plots/attributes":850,"../../plots/template_attributes":926,"../scatter/attributes":1218}],1293:[function(b,N,G){var p=b("fast-isnumeric"),n=b("../../constants/numerical").BADNUM,k=b("../../plots/cartesian/axes"),m=b("../scatter/colorscale_calc"),a=b("../scatter/arrays_to_calcdata"),g=b("../scatter/calc_selection"),h=b("../scatter/calc").calcMarkerSize;N.exports=function(r,l){var c=r._fullLayout,d=l.subplot,e=c[d].radialaxis;
d=c[d].angularaxis;c=e.makeCalcdata(l,"r");var f=d.makeCalcdata(l,"theta"),q=l._length;d=Array(q);for(var t=0;t<q;t++){var w=c[t],x=f[t],z=d[t]={};p(w)&&p(x)?(z.r=w,z.theta=x):z.r=n}f=h(l,q);l._extremes.x=k.findExtremes(e,c,{ppad:f});m(r,l);a(d,l);g(d,l);return d}},{"../../constants/numerical":779,"../../plots/cartesian/axes":854,"../scatter/arrays_to_calcdata":1217,"../scatter/calc":1219,"../scatter/calc_selection":1220,"../scatter/colorscale_calc":1221,"fast-isnumeric":249}],1294:[function(b,N,
G){function p(d,e,f,q){d=q("r");f=q("theta");if(d)f?d=Math.min(d.length,f.length):(d=d.length,q("theta0"),q("dtheta"));else{if(!f)return 0;d=e.theta.length;q("r0");q("dr")}return e._length=d}var n=b("../../lib"),k=b("../scatter/subtypes"),m=b("../scatter/marker_defaults"),a=b("../scatter/line_defaults"),g=b("../scatter/line_shape_defaults"),h=b("../scatter/text_defaults"),r=b("../scatter/fillcolor_defaults"),l=b("../scatter/constants").PTS_LINESONLY,c=b("./attributes");N.exports={handleRThetaDefaults:p,
supplyDefaults:function(d,e,f,q){function t(x,z){return n.coerce(d,e,c,x,z)}var w=p(d,e,q,t);if(w){t("thetaunit");t("mode",w<l?"lines+markers":"lines");t("text");t("hovertext");"fills"!==e.hoveron&&t("hovertemplate");k.hasLines(e)&&(a(d,e,f,q,t),g(d,e,t),t("connectgaps"));k.hasMarkers(e)&&m(d,e,f,q,t,{gradient:!0});k.hasText(e)&&(t("texttemplate"),h(d,e,q,t));q=[];if(k.hasMarkers(e)||k.hasText(e))t("cliponaxis"),t("marker.maxdisplayed"),q.push("points");t("fill");"none"!==e.fill&&(r(d,e,f,t),k.hasLines(e)||
g(d,e,t));"tonext"!==e.fill&&"toself"!==e.fill||q.push("fills");t("hoveron",q.join("+")||"points");n.coerceSelectionMarkerOpacity(e,t)}else e.visible=!1}}},{"../../lib":803,"../scatter/constants":1222,"../scatter/fillcolor_defaults":1226,"../scatter/line_defaults":1231,"../scatter/line_shape_defaults":1233,"../scatter/marker_defaults":1237,"../scatter/subtypes":1243,"../scatter/text_defaults":1244,"./attributes":1292}],1295:[function(b,N,G){var p=b("../../lib"),n=b("../../plots/cartesian/axes");N.exports=
function(k,m,a){var g={},h=a[m.subplot]._subplot;h?(m=h.radialAxis,h=h.angularAxis):(h=a[m.subplot],m=h.radialaxis,h=h.angularaxis);a=m.c2l(k.r);g.rLabel=n.tickText(m,a,!0).text;k="degrees"===h.thetaunit?p.rad2deg(k.theta):k.theta;g.thetaLabel=n.tickText(h,k,!0).text;return g}},{"../../lib":803,"../../plots/cartesian/axes":854}],1296:[function(b,N,G){function p(k,m,a,g){var h=a.radialAxis,r=a.angularAxis;h._hovertitle="r";r._hovertitle="";var l={};l[m.subplot]={_subplot:a};a=m._module.formatLabels(k,
m,l);g.rLabel=a.rLabel;g.thetaLabel=a.thetaLabel;a=k.hi||m.hoverinfo;k=[];m.hovertemplate||(m=a.split("+"),-1!==m.indexOf("all")&&(m=["r","theta","text"]),-1!==m.indexOf("r")&&k.push(h._hovertitle+": "+g.rLabel),-1!==m.indexOf("theta")&&k.push(r._hovertitle+": "+g.thetaLabel),-1!==m.indexOf("text")&&g.text&&(k.push(g.text),delete g.text),g.extraText=k.join("\x3cbr\x3e"))}var n=b("../scatter/hover");N.exports={hoverPoints:function(k,m,a,g){if((m=n(k,m,a,g))&&!1!==m[0].index){a=m[0];if(void 0===a.index)return m;
k=k.subplot;g=a.cd[a.index];var h=a.trace;if(k.isPtInside(g))return a.xLabelVal=void 0,a.yLabelVal=void 0,p(g,h,k,a),a.hovertemplate=h.hovertemplate,m}},makeHoverPointText:p}},{"../scatter/hover":1229}],1297:[function(b,N,G){N.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:b("../../plots/polar"),categories:["polar","symbols","showLegend","scatter-like"],attributes:b("./attributes"),supplyDefaults:b("./defaults").supplyDefaults,colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),
calc:b("./calc"),plot:b("./plot"),style:b("../scatter/style").style,styleOnSelect:b("../scatter/style").styleOnSelect,hoverPoints:b("./hover").hoverPoints,selectPoints:b("../scatter/select"),meta:{}}},{"../../plots/polar":920,"../scatter/marker_colorbar":1236,"../scatter/select":1240,"../scatter/style":1242,"./attributes":1292,"./calc":1293,"./defaults":1294,"./format_labels":1295,"./hover":1296,"./plot":1298}],1298:[function(b,N,G){var p=b("../scatter/plot"),n=b("../../constants/numerical").BADNUM;
N.exports=function(k,m,a){var g=m.layers.frontplot.select("g.scatterlayer"),h={xaxis:m.xaxis,yaxis:m.yaxis,plot:m.framework,layerClipId:m._hasClipOnAxisFalse?m.clipIds.forTraces:null},r=m.radialAxis;m=m.angularAxis;for(var l=0;l<a.length;l++)for(var c=a[l],d=0;d<c.length;d++){var e=c[d],f=e.r;if(f===n)e.x=e.y=n;else{f=r.c2g(f);var q=m.c2g(e.theta);e.x=f*Math.cos(q);e.y=f*Math.sin(q)}}p(k,h,a,g)}},{"../../constants/numerical":779,"../scatter/plot":1239}],1299:[function(b,N,G){G=b("../scatterpolar/attributes");
var p=b("../scattergl/attributes");b=b("../../plots/template_attributes").texttemplateAttrs;N.exports={mode:G.mode,r:G.r,theta:G.theta,r0:G.r0,dr:G.dr,theta0:G.theta0,dtheta:G.dtheta,thetaunit:G.thetaunit,text:G.text,texttemplate:b({editType:"plot"},{keys:["r","theta","text"]}),hovertext:G.hovertext,hovertemplate:G.hovertemplate,line:p.line,connectgaps:p.connectgaps,marker:p.marker,fill:p.fill,fillcolor:p.fillcolor,textposition:p.textposition,textfont:p.textfont,hoverinfo:G.hoverinfo,selected:G.selected,
unselected:G.unselected}},{"../../plots/template_attributes":926,"../scattergl/attributes":1270,"../scatterpolar/attributes":1292}],1300:[function(b,N,G){var p=b("../scatter/colorscale_calc"),n=b("../scatter/calc").calcMarkerSize,k=b("../scattergl/convert"),m=b("../../plots/cartesian/axes"),a=b("../scattergl/constants").TOO_MANY_POINTS;N.exports=function(g,h){var r=g._fullLayout,l=h.subplot,c=r[l].radialaxis;l=r[l].angularaxis;r=h._r=c.makeCalcdata(h,"r");var d=h._theta=l.makeCalcdata(h,"theta");
l=h._length;var e={};l<r.length&&(r=r.slice(0,l));l<d.length&&(d=d.slice(0,l));e.r=r;e.theta=d;p(g,h);g=e.opts=k.style(g,h);var f;l<a?f=n(h,l):g.marker&&(f=2*(g.marker.sizeAvg||Math.max(g.marker.size,3)));h._extremes.x=m.findExtremes(c,r,{ppad:f});return[{x:!1,y:!1,t:e,trace:h}]}},{"../../plots/cartesian/axes":854,"../scatter/calc":1219,"../scatter/colorscale_calc":1221,"../scattergl/constants":1272,"../scattergl/convert":1273}],1301:[function(b,N,G){var p=b("../../lib"),n=b("../scatter/subtypes"),
k=b("../scatterpolar/defaults").handleRThetaDefaults,m=b("../scatter/marker_defaults"),a=b("../scatter/line_defaults"),g=b("../scatter/text_defaults"),h=b("../scatter/fillcolor_defaults"),r=b("../scatter/constants").PTS_LINESONLY,l=b("./attributes");N.exports=function(c,d,e,f){function q(w,x){return p.coerce(c,d,l,w,x)}var t=k(c,d,f,q);t?(q("thetaunit"),q("mode",t<r?"lines+markers":"lines"),q("text"),q("hovertext"),"fills"!==d.hoveron&&q("hovertemplate"),n.hasLines(d)&&(a(c,d,e,f,q),q("connectgaps")),
n.hasMarkers(d)&&m(c,d,e,f,q),n.hasText(d)&&(q("texttemplate"),g(c,d,f,q)),q("fill"),"none"!==d.fill&&h(c,d,e,q),p.coerceSelectionMarkerOpacity(d,q)):d.visible=!1}},{"../../lib":803,"../scatter/constants":1222,"../scatter/fillcolor_defaults":1226,"../scatter/line_defaults":1231,"../scatter/marker_defaults":1237,"../scatter/subtypes":1243,"../scatter/text_defaults":1244,"../scatterpolar/defaults":1294,"./attributes":1299}],1302:[function(b,N,G){var p=b("../scatterpolar/format_labels");N.exports=function(n,
k,m){var a=n.i;"r"in n||(n.r=k._r[a]);"theta"in n||(n.theta=k._theta[a]);return p(n,k,m)}},{"../scatterpolar/format_labels":1295}],1303:[function(b,N,G){var p=b("../scattergl/hover"),n=b("../scatterpolar/hover").makeHoverPointText;N.exports={hoverPoints:function(k,m,a,g){var h=k.cd[0].t,r=h.r;h=h.theta;if((m=p.hoverPoints(k,m,a,g))&&!1!==m[0].index){a=m[0];if(void 0===a.index)return m;k=k.subplot;g=a.cd[a.index];var l=a.trace;g.r=r[a.index];g.theta=h[a.index];if(k.isPtInside(g))return a.xLabelVal=
void 0,a.yLabelVal=void 0,n(g,l,k,a),m}}}},{"../scattergl/hover":1278,"../scatterpolar/hover":1296}],1304:[function(b,N,G){N.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:b("../../plots/polar"),categories:"gl regl polar symbols showLegend scatter-like".split(" "),attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("./calc"),plot:b("./plot"),hoverPoints:b("./hover").hoverPoints,selectPoints:b("../scattergl/select"),
meta:{}}},{"../../plots/polar":920,"../scatter/marker_colorbar":1236,"../scattergl/select":1282,"./attributes":1299,"./calc":1300,"./defaults":1301,"./format_labels":1302,"./hover":1303,"./plot":1305}],1305:[function(b,N,G){var p=b("@plotly/point-cluster"),n=b("fast-isnumeric"),k=b("../scattergl/plot"),m=b("../scattergl/scene_update"),a=b("../scattergl/convert"),g=b("../../lib"),h=b("../scattergl/constants").TOO_MANY_POINTS;N.exports=function(r,l,c){if(c.length){var d=l.radialAxis,e=l.angularAxis,
f=m(r,l);c.forEach(function(q){if(q&&q[0]&&q[0].trace){var t=q[0];q=t.trace;t=t.t;var w=q._length,x=t.r,z=t.theta,B=t.opts,A,D=x.slice(),C=z.slice();for(A=0;A<x.length;A++)l.isPtInside({r:x[A],theta:z[A]})||(D[A]=NaN,C[A]=NaN);var v=Array(2*w),y=Array(w),F=Array(w);for(A=0;A<w;A++){var J=D[A];if(n(J)){var K=d.c2g(J);var O=e.c2g(C[A],q.thetaunit);J=K*Math.cos(O);K*=Math.sin(O)}else J=K=NaN;y[A]=v[2*A]=J;F[A]=v[2*A+1]=K}t.tree=p(v);B.marker&&w>=h&&(B.marker.cluster=t.tree);B.marker&&(B.markerSel.positions=
B.markerUnsel.positions=B.marker.positions=v);B.line&&1<v.length&&g.extendFlat(B.line,a.linePositions(r,q,v));B.text&&(g.extendFlat(B.text,{positions:v},a.textPosition(r,q,B.text,B.marker)),g.extendFlat(B.textSel,{positions:v},a.textPosition(r,q,B.text,B.markerSel)),g.extendFlat(B.textUnsel,{positions:v},a.textPosition(r,q,B.text,B.markerUnsel)));B.fill&&!f.fill2d&&(f.fill2d=!0);B.marker&&!f.scatter2d&&(f.scatter2d=!0);B.line&&!f.line2d&&(f.line2d=!0);B.text&&!f.glText&&(f.glText=!0);f.lineOptions.push(B.line);
f.fillOptions.push(B.fill);f.markerOptions.push(B.marker);f.markerSelectedOptions.push(B.markerSel);f.markerUnselectedOptions.push(B.markerUnsel);f.textOptions.push(B.text);f.textSelectedOptions.push(B.textSel);f.textUnselectedOptions.push(B.textUnsel);f.selectBatch.push([]);f.unselectBatch.push([]);t.x=y;t.y=F;t.rawx=y;t.rawy=F;t.r=x;t.theta=z;t.positions=v;t._scene=f;t.index=f.count;f.count++}});return k(r,l,c)}}},{"../../lib":803,"../scattergl/constants":1272,"../scattergl/convert":1273,"../scattergl/plot":1280,
"../scattergl/scene_update":1281,"@plotly/point-cluster":59,"fast-isnumeric":249}],1306:[function(b,N,G){G=b("../../plots/template_attributes").hovertemplateAttrs;var p=b("../../plots/template_attributes").texttemplateAttrs,n=b("../scatter/attributes"),k=b("../../plots/attributes"),m=b("../../components/colorscale/attributes"),a=b("../../components/drawing/attributes").dash;b=b("../../lib/extend").extendFlat;var g=n.marker,h=n.line,r=g.line;N.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",
editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:b({},n.mode,{dflt:"markers"}),text:b({},n.text,{}),texttemplate:p({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:b({},n.hovertext,{}),line:{color:h.color,width:h.width,dash:a,shape:b({},h.shape,{values:["linear","spline"]}),smoothing:h.smoothing,editType:"calc"},connectgaps:n.connectgaps,cliponaxis:n.cliponaxis,fill:b({},n.fill,{values:["none","toself","tonext"],dflt:"none"}),
fillcolor:n.fillcolor,marker:b({symbol:g.symbol,opacity:g.opacity,maxdisplayed:g.maxdisplayed,size:g.size,sizeref:g.sizeref,sizemin:g.sizemin,sizemode:g.sizemode,line:b({width:r.width,editType:"calc"},m("marker.line")),gradient:g.gradient,editType:"calc"},m("marker")),textfont:n.textfont,textposition:n.textposition,selected:n.selected,unselected:n.unselected,hoverinfo:b({},k.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:n.hoveron,hovertemplate:G()}},{"../../components/colorscale/attributes":673,
"../../components/drawing/attributes":687,"../../lib/extend":793,"../../plots/attributes":850,"../../plots/template_attributes":926,"../scatter/attributes":1218}],1307:[function(b,N,G){var p=b("fast-isnumeric"),n=b("../scatter/colorscale_calc"),k=b("../scatter/arrays_to_calcdata"),m=b("../scatter/calc_selection"),a=b("../scatter/calc").calcMarkerSize,g=["a","b","c"],h={a:["b","c"],b:["a","c"],c:["a","b"]};N.exports=function(r,l){var c=r._fullLayout[l.subplot].sum,d=l.sum||c,e={a:l.a,b:l.b,c:l.c},
f,q;for(f=0;f<g.length;f++){var t=g[f];if(!e[t]){var w=e[h[t][0]];var x=e[h[t][1]];var z=Array(w.length);for(q=0;q<w.length;q++)z[q]=d-w[q]-x[q];e[t]=z}}d=l._length;q=Array(d);for(f=0;f<d;f++)if(t=e.a[f],z=e.b[f],w=e.c[f],p(t)&&p(z)&&p(w)){t=+t;z=+z;w=+w;x=c/(t+z+w);1!==x&&(t*=x,z*=x,w*=x);var B=t;x=w-z;q[f]={x,y:B,a:t,b:z,c:w}}else q[f]={x:!1,y:!1};a(l,d);n(r,l);k(q,l);m(q,l);return q}},{"../scatter/arrays_to_calcdata":1217,"../scatter/calc":1219,"../scatter/calc_selection":1220,"../scatter/colorscale_calc":1221,
"fast-isnumeric":249}],1308:[function(b,N,G){var p=b("../../lib"),n=b("../scatter/constants"),k=b("../scatter/subtypes"),m=b("../scatter/marker_defaults"),a=b("../scatter/line_defaults"),g=b("../scatter/line_shape_defaults"),h=b("../scatter/text_defaults"),r=b("../scatter/fillcolor_defaults"),l=b("./attributes");N.exports=function(c,d,e,f){function q(B,A){return p.coerce(c,d,l,B,A)}var t=q("a"),w=q("b"),x=q("c");if(t){var z=t.length;w?(z=Math.min(z,w.length),x&&(z=Math.min(z,x.length))):z=x?Math.min(z,
x.length):0}else w&&x&&(z=Math.min(w.length,x.length));if(z){d._length=z;q("sum");q("text");q("hovertext");"fills"!==d.hoveron&&q("hovertemplate");q("mode",z<n.PTS_LINESONLY?"lines+markers":"lines");k.hasLines(d)&&(a(c,d,e,f,q),g(c,d,q),q("connectgaps"));k.hasMarkers(d)&&m(c,d,e,f,q,{gradient:!0});k.hasText(d)&&(q("texttemplate"),h(c,d,f,q));f=[];if(k.hasMarkers(d)||k.hasText(d))q("cliponaxis"),q("marker.maxdisplayed"),f.push("points");q("fill");"none"!==d.fill&&(r(c,d,e,q),k.hasLines(d)||g(c,d,q));
"tonext"!==d.fill&&"toself"!==d.fill||f.push("fills");q("hoveron",f.join("+")||"points");p.coerceSelectionMarkerOpacity(d,q)}else d.visible=!1}},{"../../lib":803,"../scatter/constants":1222,"../scatter/fillcolor_defaults":1226,"../scatter/line_defaults":1231,"../scatter/line_shape_defaults":1233,"../scatter/marker_defaults":1237,"../scatter/subtypes":1243,"../scatter/text_defaults":1244,"./attributes":1306}],1309:[function(b,N,G){N.exports=function(p,n,k,m,a){n.xa&&(p.xaxis=n.xa);n.ya&&(p.yaxis=n.ya);
m[a]?(n=m[a],p.a=n.a,p.b=n.b,p.c=n.c):(p.a=n.a,p.b=n.b,p.c=n.c);return p}},{}],1310:[function(b,N,G){var p=b("../../plots/cartesian/axes");N.exports=function(n,k,m){var a={};k=m[k.subplot]._subplot;a.aLabel=p.tickText(k.aaxis,n.a,!0).text;a.bLabel=p.tickText(k.baxis,n.b,!0).text;a.cLabel=p.tickText(k.caxis,n.c,!0).text;return a}},{"../../plots/cartesian/axes":854}],1311:[function(b,N,G){var p=b("../scatter/hover");N.exports=function(n,k,m,a){if((k=p(n,k,m,a))&&!1!==k[0].index){m=k[0];if(void 0===
m.index)return a=n.xa._length,n=a*(1-m.y0/n.ya._length)/2,a-=n,m.x0=Math.max(Math.min(m.x0,a),n),m.x1=Math.max(Math.min(m.x1,a),n),k;var g=m.cd[m.index];n=m.trace;a=m.subplot;m.a=g.a;m.b=g.b;m.c=g.c;m.xLabelVal=void 0;m.yLabelVal=void 0;var h={};h[n.subplot]={_subplot:a};h=n._module.formatLabels(g,n,h);m.aLabel=h.aLabel;m.bLabel=h.bLabel;m.cLabel=h.cLabel;h=g.hi||n.hoverinfo;g=[];n.hovertemplate||(h=h.split("+"),-1!==h.indexOf("all")&&(h=["a","b","c"]),-1!==h.indexOf("a")&&g.push(a.aaxis._hovertitle+
": "+m.aLabel),-1!==h.indexOf("b")&&g.push(a.baxis._hovertitle+": "+m.bLabel),-1!==h.indexOf("c")&&g.push(a.caxis._hovertitle+": "+m.cLabel));m.extraText=g.join("\x3cbr\x3e");m.hovertemplate=n.hovertemplate;return k}}},{"../scatter/hover":1229}],1312:[function(b,N,G){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("./calc"),plot:b("./plot"),style:b("../scatter/style").style,styleOnSelect:b("../scatter/style").styleOnSelect,
hoverPoints:b("./hover"),selectPoints:b("../scatter/select"),eventData:b("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:b("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":927,"../scatter/marker_colorbar":1236,"../scatter/select":1240,"../scatter/style":1242,"./attributes":1306,"./calc":1307,"./defaults":1308,"./event_data":1309,"./format_labels":1310,"./hover":1311,"./plot":1313}],1313:[function(b,N,G){var p=
b("../scatter/plot");N.exports=function(n,k,m){var a=k.plotContainer;a.select(".scatterlayer").selectAll("*").remove();a={xaxis:k.xaxis,yaxis:k.yaxis,plot:a,layerClipId:k._hasClipOnAxisFalse?k.clipIdRelative:null};k=k.layers.frontplot.select("g.scatterlayer");p(n,a,m,k)}},{"../scatter/plot":1239}],1314:[function(b,N,G){function p(l){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:g[l],editType:"plot"}}}var n=b("../scatter/attributes"),k=b("../../components/colorscale/attributes");
G=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat;var m=b("../../plots/template_attributes").hovertemplateAttrs,a=b("../scattergl/attributes"),g=b("../../plots/cartesian/constants").idRegex,h=b("../../plot_api/plot_template").templatedArray;b=b("../../lib/extend").extendFlat;n=n.marker;var r=n.line;r=b(k("marker.line",{editTypeOverride:"calc"}),{width:b({},r.width,{editType:"calc"}),editType:"calc"});k=b(k("marker"),{symbol:n.symbol,size:b({},n.size,{editType:"markerSize"}),sizeref:n.sizeref,
sizemin:n.sizemin,sizemode:n.sizemode,opacity:n.opacity,colorbar:n.colorbar,line:r,editType:"calc"});k.color.editType=k.cmin.editType=k.cmax.editType="style";N.exports={dimensions:h("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},
editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:b({},a.text,{}),hovertext:b({},a.hovertext,{}),hovertemplate:m(),xhoverformat:G("x"),yhoverformat:G("y"),marker:k,xaxes:p("x"),yaxes:p("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:a.selected.marker,editType:"calc"},unselected:{marker:a.unselected.marker,editType:"calc"},
opacity:a.opacity}},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plot_api/plot_template":843,"../../plots/cartesian/axis_format_attributes":857,"../../plots/cartesian/constants":861,"../../plots/template_attributes":926,"../scatter/attributes":1218,"../scattergl/attributes":1270}],1315:[function(b,N,G){function p(c){var d=c._fullLayout,e=d._glcanvas.data()[0].regl,f=d._splomGrid;f||(f=d._splomGrid=k(e));f.update(n(c))}function n(c){function d(I,L,H,M,Q,Z){H*=e;M*=e;
Q*=e;Z*=e;var ca=L[I+"color"];I=L[I+"width"];L=String(ca+I);L in w?w[L].data.push(NaN,NaN,H,M,Q,Z):w[L]={data:[H,M,Q,Z],join:"rect",thickness:I*e,color:ca,viewport:t,range:t,overlay:!1}}var e=c._context.plotGlPixelRatio,f=c._fullLayout,q=f._size,t=[0,0,f.width*e,f.height*e],w={},x;for(x in f._splomSubplots){var z=f._plots[x],B=z.xaxis;z=z.yaxis;var A=B._gridVals,D=z._gridVals,C=B._offset,v=B._length,y=z._length,F=q.b+z.domain[0]*q.h,J=-z._m,K=-J*z.r2l(z.range[0],z.calendar);if(B.showgrid)for(x=0;x<
A.length;x++){var O=C+B.l2p(A[x].x);d("grid",B,O,F,O,F+y)}if(z.showgrid)for(x=0;x<D.length;x++)A=F+K+J*D[x].x,d("grid",z,C,A,C+v,A);l(c,B,z)&&(O=C+B.l2p(0),d("zeroline",B,O,F,O,F+y));l(c,z,B)&&(A=F+K+0,d("zeroline",z,C,A,C+v,A))}c=[];for(x in w)c.push(w[x]);return c}var k=b("regl-line2d"),m=b("../../registry"),a=b("../../lib/prepare_regl"),g=b("../../plots/get_data").getModuleCalcData,h=b("../../plots/cartesian"),r=b("../../plots/cartesian/axis_ids").getFromId,l=b("../../plots/cartesian/axes").shouldShowZeroLine;
N.exports={name:"splom",attr:h.attr,attrRegex:h.attrRegex,layoutAttributes:h.layoutAttributes,supplyLayoutDefaults:h.supplyLayoutDefaults,drawFramework:h.drawFramework,plot:function(c){var d=c._fullLayout,e=m.getModule("splom"),f=g(c.calcdata,e)[0];a(c,["ANGLE_instanced_arrays","OES_element_index_uint"])&&(d._hasOnlyLargeSploms&&p(c),e.plot(c,{},f))},drag:function(c){var d=c.calcdata,e=c._fullLayout;e._hasOnlyLargeSploms&&p(c);for(var f=0;f<d.length;f++){var q=d[f][0].trace,t=e._splomScenes[q.uid];
if("splom"===q.type&&t&&t.matrix){for(var w=c,x=q._visibleDims,z=t.viewOpts.ranges=Array(t.matrixOptions.data.length),B=0;B<x.length;B++){var A=x[B],D=z[B]=Array(4),C=r(w,q._diag[A][0]);C&&(D[0]=C.r2l(C.range[0]),D[2]=C.r2l(C.range[1]));if(A=r(w,q._diag[A][1]))D[1]=A.r2l(A.range[0]),D[3]=A.r2l(A.range[1])}t.selectBatch.length||t.unselectBatch.length?t.matrix.update({ranges:z},{ranges:z}):t.matrix.update({ranges:z})}}},updateGrid:p,clean:function(c,d,e,f){var q={},t;if(f._splomScenes){for(t=0;t<c.length;t++){var w=
c[t];"splom"===w.type&&(q[w.uid]=1)}for(t=0;t<e.length;t++)if(w=e[t],!q[w.uid]){var x=f._splomScenes[w.uid];x&&x.destroy&&x.destroy();f._splomScenes[w.uid]=null;delete f._splomScenes[w.uid]}}0===Object.keys(f._splomScenes||{}).length&&delete f._splomScenes;f._splomGrid&&!d._hasOnlyLargeSploms&&f._hasOnlyLargeSploms&&(f._splomGrid.destroy(),f._splomGrid=null,delete f._splomGrid);h.clean(c,d,e,f)},updateFx:h.updateFx,toSVG:h.toSVG}},{"../../lib/prepare_regl":816,"../../plots/cartesian":868,"../../plots/cartesian/axes":854,
"../../plots/cartesian/axis_ids":858,"../../plots/get_data":891,"../../registry":931,"regl-line2d":537}],1316:[function(b,N,G){var p=b("../../lib"),n=b("../../plots/cartesian/axis_ids"),k=b("../scatter/calc").calcMarkerSize,m=b("../scatter/calc").calcAxisExpansion,a=b("../scatter/colorscale_calc"),g=b("../scattergl/convert").markerSelection,h=b("../scattergl/convert").markerStyle,r=b("./scene_update"),l=b("../../constants/numerical").BADNUM,c=b("../scattergl/constants").TOO_MANY_POINTS;N.exports=
function(d,e){function f(F,J){J=F.makeCalcdata({v:J.values,vcalendar:e.calendar},"v");for(var K=0;K<J.length;K++)J[K]=J[K]===l?NaN:J[K];x.push(J);z.push("log"===F.type?p.simpleMap(J,F.c2l):J)}var q=e.dimensions,t=e._length,w={},x=w.cdata=[],z=w.data=[],B=e._visibleDims=[],A;for(A=0;A<q.length;A++){var D=q[A];if(D.visible){var C=n.getFromId(d,e._diag[A][0]);var v=n.getFromId(d,e._diag[A][1]);C&&v&&C.type!==v.type?p.log("Skipping splom dimension "+A+" with conflicting axis types"):(C?(f(C,D),v&&"category"===
v.type&&(v._categories=C._categories.slice())):f(v,D),B.push(A))}}a(d,e);p.extendFlat(w,h(e));var y=x.length*t>c?w.sizeAvg||Math.max(w.size,3):k(e,t);for(t=0;t<B.length;t++)A=B[t],D=q[A],C=n.getFromId(d,e._diag[A][0])||{},v=n.getFromId(d,e._diag[A][1])||{},m(d,e,C,v,x[t],x[t],y);d=r(d,e);d.matrix||(d.matrix=!0);d.matrixOptions=w;d.selectedOptions=g(e,e.selected);d.unselectedOptions=g(e,e.unselected);return[{x:!1,y:!1,t:{},trace:e}]}},{"../../constants/numerical":779,"../../lib":803,"../../plots/cartesian/axis_ids":858,
"../scatter/calc":1219,"../scatter/colorscale_calc":1221,"../scattergl/constants":1272,"../scattergl/convert":1273,"./scene_update":1323}],1317:[function(b,N,G){function p(c,d){function e(q,t){return k.coerce(c,d,a.dimensions,q,t)}e("label");var f=e("values");f&&f.length?e("visible"):d.visible=!1;e("axis.type");e("axis.matches")}function n(c,d,e,f){function q(L,H,M,Q){if(L){var Z=L.charAt(0),ca=e._splomAxes[Z];d["_"+Z+"axes"][L]=1;Q.push(L);L in ca||(L=ca[L]={},M&&(L.label=M.label||"",M.visible&&
M.axis&&(M.axis.type&&(L.type=M.axis.type),M.axis.matches&&(L.matches=H))))}}var t=d.dimensions,w=t.length;c=d.showupperhalf;var x=d.showlowerhalf,z=d.diagonal.visible,B,A=Array(w),D=Array(w);for(B=0;B<w;B++){var C=B?B+1:"";A[B]="x"+C;D[B]="y"+C}A=f("xaxes",A);C=f("yaxes",D);var v=d._diag=Array(w);d._xaxes={};d._yaxes={};f=[];D=[];var y=!z&&!x,F=!z&&!c;d._axesDim={};for(B=0;B<w;B++){var J=t[B],K=0===B,O=B===w-1,I=K&&y||O&&F?void 0:A[B];K=K&&F||O&&y?void 0:C[B];q(I,K,J,f);q(K,I,J,D);v[B]=[I,K];d._axesDim[I]=
B;d._axesDim[K]=B}for(B=0;B<f.length;B++)for(t=0;t<D.length;t++)w=f[B]+D[t],B>t&&c?e._splomSubplots[w]=1:B<t&&x?e._splomSubplots[w]=1:B!==t||!z&&x&&c||(e._splomSubplots[w]=1);if(!x||!z&&c&&x)e._splomGridDflt.xside="bottom",e._splomGridDflt.yside="left"}var k=b("../../lib"),m=b("../../plots/array_container_defaults"),a=b("./attributes"),g=b("../scatter/subtypes"),h=b("../scatter/marker_defaults"),r=b("../parcoords/merge_length"),l=b("../scattergl/helpers").isOpenSymbol;N.exports=function(c,d,e,f){function q(B,
A){return k.coerce(c,d,a,B,A)}var t=m(c,d,{name:"dimensions",handleItemDefaults:p}),w=q("diagonal.visible"),x=q("showupperhalf"),z=q("showlowerhalf");r(d,t,"values")&&(w||x||z)?(q("text"),q("hovertext"),q("hovertemplate"),q("xhoverformat"),q("yhoverformat"),h(c,d,e,f,q),e=l(d.marker.symbol),t=g.isBubble(d),q("marker.line.width",e||t?1:0),n(c,d,f,q),k.coerceSelectionMarkerOpacity(d,q)):d.visible=!1}},{"../../lib":803,"../../plots/array_container_defaults":849,"../parcoords/merge_length":1189,"../scatter/marker_defaults":1237,
"../scatter/subtypes":1243,"../scattergl/helpers":1277,"./attributes":1314}],1318:[function(b,N,G){var p=b("../../lib"),n=b("../scatter/colorscale_calc"),k=b("../scattergl/convert").markerStyle;N.exports=function(m,a){var g=a.trace;if(a=m._fullLayout._splomScenes[g.uid])n(m,g),p.extendFlat(a.matrixOptions,k(g)),m=p.extendFlat({},a.matrixOptions,a.viewOpts),a.matrix.update(m,null)}},{"../../lib":803,"../scatter/colorscale_calc":1221,"../scattergl/convert":1273}],1319:[function(b,N,G){G.getDimIndex=
function(p,n){n=n._id;for(var k={x:0,y:1}[n.charAt(0)],m=p._visibleDims,a=0;a<m.length;a++)if(p._diag[m[a]][k]===n)return a;return!1}},{}],1320:[function(b,N,G){var p=b("./helpers"),n=b("../scattergl/hover").calcHover;N.exports={hoverPoints:function(k,m,a){var g=k.cd[0].trace,h=k.scene.matrixOptions.cdata,r=k.xa,l=k.ya;m=r.c2p(m);a=l.c2p(a);var c=k.distance,d=p.getDimIndex(g,r),e=p.getDimIndex(g,l);if(!1===d||!1===e)return[k];d=h[d];h=h[e];var f;for(e=0;e<d.length;e++){var q=h[e],t=r.c2p(d[e])-m;
q=l.c2p(q)-a;t=Math.sqrt(t*t+q*q);if(t<c){c=f=t;var w=e}}k.index=w;k.distance=c;k.dxy=f;return void 0===w?[k]:[n(k,d,h,g)]}}},{"../scattergl/hover":1278,"./helpers":1319}],1321:[function(b,N,G){G=b("../../registry");var p=b("../../components/grid");N.exports={moduleType:"trace",name:"splom",basePlotModule:b("./base_plot"),categories:"gl regl cartesian symbols showLegend scatter-like".split(" "),attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),calc:b("./calc"),
plot:b("./plot"),hoverPoints:b("./hover").hoverPoints,selectPoints:b("./select"),editStyle:b("./edit_style"),meta:{}};G.register(p)},{"../../components/grid":710,"../../registry":931,"../scatter/marker_colorbar":1236,"./attributes":1314,"./base_plot":1315,"./calc":1316,"./defaults":1317,"./edit_style":1318,"./hover":1320,"./plot":1322,"./select":1324}],1322:[function(b,N,G){var p=b("regl-splom"),n=b("../../lib"),k=b("../../plots/cartesian/axis_ids"),m=b("../../components/dragelement/helpers").selectMode;
N.exports=function(a,g,h){if(h.length)for(g=0;g<h.length;g++){var r,l,c=a,d=h[g][0],e=c._fullLayout,f=e._size,q=d.trace;var t=d.t;d=e._splomScenes[q.uid];var w=d.matrixOptions,x=w.cdata,z=e._glcanvas.data()[0].regl,B=e.dragmode;if(0!==x.length){w.lower=q.showupperhalf;w.upper=q.showlowerhalf;w.diagonal=q.diagonal.visible;var A=q._visibleDims,D=x.length,C=d.viewOpts={};C.ranges=Array(D);C.domains=Array(D);for(r=0;r<A.length;r++){var v=A[r];var y=C.ranges[r]=Array(4),F=C.domains[r]=Array(4);if(l=k.getFromId(c,
q._diag[v][0]))y[0]=l._rl[0],y[2]=l._rl[1],F[0]=l.domain[0],F[2]=l.domain[1];if(v=k.getFromId(c,q._diag[v][1]))y[1]=v._rl[0],y[3]=v._rl[1],F[1]=v.domain[0],F[3]=v.domain[1]}v=c._context.plotGlPixelRatio;r=f.l*v;l=f.b*v;C.viewport=[r,l,f.w*v+r,f.h*v+l];!0===d.matrix&&(d.matrix=p(z));v=-1<e.clickmode.indexOf("select");e=!0;if(m(B)||q.selectedpoints||v){B=q._length;if(q.selectedpoints){l=d.selectBatch=q.selectedpoints;r={};for(v=0;v<l.length;v++)r[l[v]]=!0;l=[];for(v=0;v<B;v++)r[v]||l.push(v);d.unselectBatch=
l}f=t.xpx=Array(D);D=t.ypx=Array(D);for(r=0;r<A.length;r++){v=A[r];if(l=k.getFromId(c,q._diag[v][0]))for(f[r]=Array(B),t=0;t<B;t++)f[r][t]=l.c2p(x[r][t]);if(v=k.getFromId(c,q._diag[v][1]))for(D[r]=Array(B),t=0;t<B;t++)D[r][t]=v.c2p(x[r][t])}if(d.selectBatch.length||d.unselectBatch.length)c=n.extendFlat({},w,d.unselectedOptions,C),q=n.extendFlat({},w,d.selectedOptions,C),d.matrix.update(c,q),e=!1}else t.xpx=t.ypx=null;e&&(w=n.extendFlat({},w,C),d.matrix.update(w,null))}}}},{"../../components/dragelement/helpers":684,
"../../lib":803,"../../plots/cartesian/axis_ids":858,"regl-splom":539}],1323:[function(b,N,G){var p=b("../../lib");N.exports=function(n,k){var m=n._fullLayout;n=k.uid;var a=m._splomScenes;a||(a=m._splomScenes={});m={dirty:!0,selectBatch:[],unselectBatch:[]};var g={matrix:!1,selectBatch:[],unselectBatch:[]},h=a[k.uid];h||(h=a[n]=p.extendFlat({},m,g),h.draw=function(){h.matrix&&h.matrix.draw&&(h.selectBatch.length||h.unselectBatch.length?h.matrix.draw(h.unselectBatch,h.selectBatch):h.matrix.draw());
h.dirty=!1},h.destroy=function(){h.matrix&&h.matrix.destroy&&h.matrix.destroy();h.matrixOptions=null;h.selectBatch=null;h=h.unselectBatch=null});h.dirty||p.extendFlat(h,m);return h}},{"../../lib":803}],1324:[function(b,N,G){var p=b("../../lib"),n=b("../scatter/subtypes"),k=b("./helpers");N.exports=function(m,a){var g=m.cd,h=g[0].trace,r=g[0].t;g=m.scene;var l=g.matrixOptions.cdata,c=m.xaxis,d=m.yaxis,e=[];if(!g)return e;var f=!n.hasMarkers(h)&&!n.hasText(h);if(!0!==h.visible||f)return e;c=k.getDimIndex(h,
c);d=k.getDimIndex(h,d);if(!1===c||!1===d)return e;h=r.xpx[c];r=r.ypx[d];c=l[c];f=l[d];l=[];d=[];if(!1!==a&&!a.degenerate)for(var q=0;q<c.length;q++)a.contains([h[q],r[q]],null,q,m)?(l.push(q),e.push({pointNumber:q,x:c[q],y:f[q]})):d.push(q);m=g.matrixOptions;l.length||d.length?g.selectBatch.length||g.unselectBatch.length||g.matrix.update(g.unselectedOptions,p.extendFlat({},m,g.selectedOptions,g.viewOpts)):g.matrix.update(m,null);g.selectBatch=l;g.unselectBatch=d;return e}},{"../../lib":803,"../scatter/subtypes":1243,
"./helpers":1319}],1325:[function(b,N,G){G=b("../../components/colorscale/attributes");var p=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat,n=b("../../plots/template_attributes").hovertemplateAttrs,k=b("../mesh3d/attributes"),m=b("../../plots/attributes");b=b("../../lib/extend").extendFlat;var a={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",
editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1E3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:n({editType:"calc"},
{keys:"tubex tubey tubez tubeu tubev tubew norm divergence".split(" ")}),uhoverformat:p("u",1),vhoverformat:p("v",1),whoverformat:p("w",1),xhoverformat:p("x"),yhoverformat:p("y"),zhoverformat:p("z"),showlegend:b({},m.showlegend,{dflt:!1})};b(a,G("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));["opacity","lightposition","lighting"].forEach(function(g){a[g]=k[g]});a.hoverinfo=b({},m.hoverinfo,{editType:"calc",flags:"x y z u v w norm divergence text name".split(" "),dflt:"x+y+z+norm+text+name"});
a.transforms=void 0;N.exports=a},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plots/attributes":850,"../../plots/cartesian/axis_format_attributes":857,"../../plots/template_attributes":926,"../mesh3d/attributes":1159}],1326:[function(b,N,G){function p(a){var g=a._x,h=a._y,r=a._z,l=a._len,c,d,e=-Infinity,f=Infinity,q=-Infinity,t=Infinity,w=-Infinity,x=Infinity,z="";if(l){var B=g[0];var A=h[0];var D=r[0]}if(1<l){var C=g[l-1];var v=h[l-1];var y=r[l-1]}for(c=0;c<l;c++){e=
Math.max(e,g[c]);f=Math.min(f,g[c]);q=Math.max(q,h[c]);t=Math.min(t,h[c]);w=Math.max(w,r[c]);x=Math.min(x,r[c]);if(!F&&g[c]!==B){var F=!0;z+="x"}if(!J&&h[c]!==A){var J=!0;z+="y"}if(!K&&r[c]!==D){var K=!0;z+="z"}}F||(z+="x");J||(z+="y");K||(z+="z");var O=k.distinctVals(a._x).vals,I=k.distinctVals(a._y).vals,L=k.distinctVals(a._z).vals;z=z.replace("x",(B>C?"-":"+")+"x");z=z.replace("y",(A>v?"-":"+")+"y");z=z.replace("z",(D>y?"-":"+")+"z");if(!l||l<O.length*I.length*L.length)l=0,O=[],I=[],L=[];c=function(ca){return"x"===
ca?g:"y"===ca?h:r};C=function(ca){return"x"===ca?O:"y"===ca?I:L};y=function(ca){return ca[l-1]<ca[0]?-1:1};a=c(z[1]);F=c(z[3]);J=c(z[5]);K=C(z[1]).length;B=C(z[3]).length;C=C(z[5]).length;A=!1;v=y(c(z[1]));D=y(c(z[3]));var H=y(c(z[5]));for(c=0;c<C-1;c++){for(y=0;y<B-1;y++){for(d=0;d<K-1;d++){var M=K*(B*c+y)+d,Q=K*(B*c+(y+1))+d,Z=K*(B*(c+1)+y)+d;a[M]*v<a[K*(B*c+y)+(d+1)]*v&&F[M]*D<F[Q]*D&&J[M]*H<J[Z]*H||(A=!0);if(A)break}if(A)break}if(A)break}A&&(k.warn("Encountered arbitrary coordinates! Unable to input data grid."),
l=0,O=[],I=[],L=[]);return{xMin:f,yMin:t,zMin:x,xMax:e,yMax:q,zMax:w,Xs:O,Ys:I,Zs:L,len:l,fill:z}}function n(a,g){void 0===g&&(g=a.length);if(k.isTypedArray(a))return a.subarray(0,g);for(var h=[],r=0;r<g;r++)h[r]=+a[r];return h}var k=b("../../lib"),m=b("../../components/colorscale/calc");N.exports={calc:function(a,g){g._len=Math.min(g.u.length,g.v.length,g.w.length,g.x.length,g.y.length,g.z.length);g._u=n(g.u,g._len);g._v=n(g.v,g._len);g._w=n(g.w,g._len);g._x=n(g.x,g._len);g._y=n(g.y,g._len);g._z=
n(g.z,g._len);var h=p(g);g._gridFill=h.fill;g._Xs=h.Xs;g._Ys=h.Ys;g._Zs=h.Zs;g._len=h.len;var r=0;if(g.starts){var l=n(g.starts.x||[]);var c=n(g.starts.y||[]);var d=n(g.starts.z||[]);r=Math.min(l.length,c.length,d.length)}g._startsX=l||[];g._startsY=c||[];g._startsZ=d||[];var e=0,f=Infinity,q;for(q=0;q<g._len;q++){var t=g._u[q],w=g._v[q],x=g._w[q];t=Math.sqrt(t*t+w*w+x*x);e=Math.max(e,t);f=Math.min(f,t)}m(a,g,{vals:[f,e],containerStr:"",cLetter:"c"});for(q=0;q<r;q++)a=l[q],h.xMax=Math.max(h.xMax,
a),h.xMin=Math.min(h.xMin,a),a=c[q],h.yMax=Math.max(h.yMax,a),h.yMin=Math.min(h.yMin,a),a=d[q],h.zMax=Math.max(h.zMax,a),h.zMin=Math.min(h.zMin,a);g._slen=r;g._normMax=e;g._xbnds=[h.xMin,h.xMax];g._ybnds=[h.yMin,h.yMax];g._zbnds=[h.zMin,h.zMax]},filter:n,processGrid:p}},{"../../components/colorscale/calc":674,"../../lib":803}],1327:[function(b,N,G){function p(e,f){this.scene=e;this.uid=f;this.data=this.mesh=null}function n(e){var f=e.length;return 2<f?e.slice(1,f-1):2===f?[(e[0]+e[1])/2]:e}function k(e){var f=
e.length;return 1===f?[.5,.5]:[e[1]-e[0],e[f-1]-e[f-2]]}function m(e,f){function q(K,O){var I=t[O],L=w[d[O]];return h.simpleMap(K,function(H){return I.d2l(H)*L})}var t=e.fullSceneLayout,w=e.dataScale,x=f._len;e={};e.vectors=c(q(f._u,"xaxis"),q(f._v,"yaxis"),q(f._w,"zaxis"),x);if(!x)return{positions:[],cells:[]};var z=q(f._Xs,"xaxis"),B=q(f._Ys,"yaxis");x=q(f._Zs,"zaxis");e.meshgrid=[z,B,x];e.gridFill=f._gridFill;if(f._slen)e.startingPositions=c(q(f._startsX,"xaxis"),q(f._startsY,"yaxis"),q(f._startsZ,
"zaxis"));else{for(var A=B[0],D=n(z),C=n(x),v=Array(D.length*C.length),y=0,F=0;F<D.length;F++)for(var J=0;J<C.length;J++)v[y++]=[D[F],A,C[J]];e.startingPositions=v}e.colormap=r(f);e.tubeSize=f.sizeref;e.maxLength=f.maxdisplayed;A=q(f._xbnds,"xaxis");D=q(f._ybnds,"yaxis");C=q(f._zbnds,"zaxis");z=k(z);B=k(B);x=k(x);e=a(e,[[A[0]-z[0],D[0]-B[0],C[0]-x[0]],[A[1]+z[1],D[1]+B[1],C[1]+x[1]]]);x=l(f);e.vertexIntensityBounds=[x.min/f._normMax,x.max/f._normMax];x=f.lightposition;e.lightPosition=[x.x,x.y,x.z];
e.ambient=f.lighting.ambient;e.diffuse=f.lighting.diffuse;e.specular=f.lighting.specular;e.roughness=f.lighting.roughness;e.fresnel=f.lighting.fresnel;e.opacity=f.opacity;f._pad=e.tubeScale*f.sizeref*2;return e}var a=b("gl-streamtube3d"),g=a.createTubeMesh,h=b("../../lib"),r=b("../../lib/gl_format_color").parseColorScale,l=b("../../components/colorscale").extractOpts,c=b("../../plots/gl3d/zip3"),d={xaxis:0,yaxis:1,zaxis:2};b=p.prototype;b.handlePick=function(e){function f(z,B){var A=t[d[B]];return q[B].l2c(z)/
A}var q=this.scene.fullSceneLayout,t=this.scene.dataScale;if(e.object===this.mesh){var w=e.data.position,x=e.data.velocity;e.traceCoordinate=[f(w[0],"xaxis"),f(w[1],"yaxis"),f(w[2],"zaxis"),f(x[0],"xaxis"),f(x[1],"yaxis"),f(x[2],"zaxis"),e.data.intensity*this.data._normMax,e.data.divergence];e.textLabel=this.data.hovertext||this.data.text;return!0}};b.update=function(e){this.data=e;e=m(this.scene,e);this.mesh.update(e)};b.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};
N.exports=function(e,f){var q=e.glplot.gl,t=m(e,f);q=g(q,t);t=new p(e,f.uid);t.mesh=q;t.data=f;q._trace=t;e.glplot.add(q);return t}},{"../../components/colorscale":678,"../../lib":803,"../../lib/gl_format_color":799,"../../plots/gl3d/zip3":907,"gl-streamtube3d":352}],1328:[function(b,N,G){var p=b("../../lib"),n=b("../../components/colorscale/defaults"),k=b("./attributes");N.exports=function(m,a,g,h){function r(q,t){return p.coerce(m,a,k,q,t)}g=r("u");var l=r("v"),c=r("w"),d=r("x"),e=r("y"),f=r("z");
g&&g.length&&l&&l.length&&c&&c.length&&d&&d.length&&e&&e.length&&f&&f.length?(r("starts.x"),r("starts.y"),r("starts.z"),r("maxdisplayed"),r("sizeref"),r("lighting.ambient"),r("lighting.diffuse"),r("lighting.specular"),r("lighting.roughness"),r("lighting.fresnel"),r("lightposition.x"),r("lightposition.y"),r("lightposition.z"),n(m,a,h,r,{prefix:"",cLetter:"c"}),r("text"),r("hovertext"),r("hovertemplate"),r("uhoverformat"),r("vhoverformat"),r("whoverformat"),r("xhoverformat"),r("yhoverformat"),r("zhoverformat"),
a._length=null):a.visible=!1}},{"../../components/colorscale/defaults":676,"../../lib":803,"./attributes":1325}],1329:[function(b,N,G){N.exports={moduleType:"trace",name:"streamtube",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:b("./calc").calc,plot:b("./convert"),eventData:function(p,n){p.tubex=p.x;p.tubey=p.y;p.tubez=p.z;p.tubeu=n.traceCoordinate[3];p.tubev=n.traceCoordinate[4];
p.tubew=n.traceCoordinate[5];p.norm=n.traceCoordinate[6];p.divergence=n.traceCoordinate[7];delete p.x;delete p.y;delete p.z;return p},meta:{}}},{"../../plots/gl3d":896,"./attributes":1325,"./calc":1326,"./convert":1327,"./defaults":1328}],1330:[function(b,N,G){G=b("../../plots/attributes");var p=b("../../plots/template_attributes").hovertemplateAttrs,n=b("../../plots/template_attributes").texttemplateAttrs,k=b("../../components/colorscale/attributes"),m=b("../../plots/domain").attributes,a=b("../pie/attributes"),
g=b("./constants");b=b("../../lib/extend").extendFlat;N.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:b({colors:{valType:"data_array",
editType:"calc"},line:{color:b({},a.marker.line.color,{dflt:null}),width:b({},a.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},k("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:a.text,textinfo:{valType:"flaglist",flags:"label;text;value;current path;percent root;percent entry;percent parent".split(";"),extras:["none"],editType:"plot"},texttemplate:n({editType:"plot"},{keys:g.eventDataKeys.concat(["label","value"])}),
hovertext:a.hovertext,hoverinfo:b({},G.hoverinfo,{flags:"label;text;value;name;current path;percent root;percent entry;percent parent".split(";"),dflt:"label+text+value+name"}),hovertemplate:p({},{keys:g.eventDataKeys}),textfont:a.textfont,insidetextorientation:a.insidetextorientation,insidetextfont:a.insidetextfont,outsidetextfont:b({},a.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:a.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},
domain:m({name:"sunburst",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plots/attributes":850,"../../plots/domain":882,"../../plots/template_attributes":926,"../pie/attributes":1192,"./constants":1333}],1331:[function(b,N,G){var p=b("../../plots/plots");G.name="sunburst";G.plot=function(n,k,m,a){p.plotBasePlot(G.name,n,k,m,a)};G.clean=function(n,k,m,a){p.cleanBasePlot(G.name,n,k,m,a)}},{"../../plots/plots":917}],1332:[function(b,N,G){function p(f,
q,t){var w=0,x=f.children;if(x){for(var z=x.length,B=0;B<z;B++)w+=p(x[B],q,t);t.branches&&w++}else t.leaves&&w++;f.value=f.data.data.value=w;q._values||(q._values=[]);return q._values[f.data.data.i]=w}var n=b("d3-hierarchy"),k=b("fast-isnumeric"),m=b("../../lib"),a=b("../../components/colorscale").makeColorScaleFuncFromTrace,g=b("../pie/calc").makePullColorFn,h=b("../pie/calc").generateExtendedColors,r=b("../../components/colorscale").calc,l=b("../../constants/numerical").ALMOST_EQUAL,c={},d={},e=
{};G.calc=function(f,q){var t=f._fullLayout,w=q.ids,x=m.isArrayOrTypedArray(w),z=q.labels,B=q.parents,A=q.values,D=m.isArrayOrTypedArray(A),C=[],v={},y={},F=function(Y,ba){v[Y]?v[Y].push(ba):v[Y]=[ba];y[ba]=1},J=function(Y){return Y||"number"===typeof Y},K=function(Y){return!D||k(A[Y])&&0<=A[Y]};if(x){x=Math.min(w.length,B.length);var O=function(Y){return J(w[Y])&&K(Y)};var I=function(Y){return String(w[Y])}}else x=Math.min(z.length,B.length),O=function(Y){return J(z[Y])&&K(Y)},I=function(Y){return String(z[Y])};
D&&(x=Math.min(x,A.length));for(var L=0;L<x;L++)if(O(L)){var H=I(L),M=J(B[L])?String(B[L]):"",Q={i:L,id:H,pid:M,label:J(z[L])?String(z[L]):""};D&&(Q.v=+A[L]);C.push(Q);F(M,H)}if(!v[""]){B=[];for(var Z in v)y[Z]||B.push(Z);if(1===B.length)Z=B[0],C.unshift({hasImpliedRoot:!0,id:Z,pid:"",label:Z});else return m.warn(["Multiple implied roots, cannot build",q.type,"hierarchy of",q.name+".","These roots include:",B.join(", ")].join(" "))}else if(1<v[""].length){Z=m.randstr();for(B=0;B<C.length;B++)""===
C[B].pid&&(C[B].pid=Z);C.unshift({hasMultipleRoots:!0,id:Z,pid:"",label:""})}try{var ca=n.stratify().id(function(Y){return Y.id}).parentId(function(Y){return Y.pid})(C)}catch(Y){return m.warn(["Failed to build",q.type,"hierarchy of",q.name+".","Error:",Y.message].join(" "))}ca=n.hierarchy(ca);var W=!1;if(D)switch(q.branchvalues){case "remainder":ca.sum(function(Y){return Y.data.v});break;case "total":ca.each(function(Y){var ba=Y.data.data,ja=ba.v;if(Y.children){var ma=Y.children.reduce(function(ia,
oa){return ia+oa.data.data.v},0);if(ba.hasImpliedRoot||ba.hasMultipleRoots)ja=ma;if(ja<ma*l)return W=!0,m.warn(["Total value for node",Y.data.data.id,"of",q.name,"is smaller than the sum of its children. \nparent value \x3d",ja,"\nchildren sum \x3d",ma].join(" "))}Y.value=ja})}else p(ca,q,{branches:-1!==q.count.indexOf("branches"),leaves:-1!==q.count.indexOf("leaves")});if(!W){q.sort&&ca.sort(function(Y,ba){return ba.value-Y.value});var T=q.marker.colors||[];Z=!!T.length;if(q._hasColorscale){Z||(T=
D?q.values:q._values);r(f,q,{vals:T,containerStr:"marker",cLetter:"c"});var U=a(q.marker)}else var ha=g(t["_"+q.type+"colormap"]);ca.each(function(Y){Y=Y.data.data;Y.color=q._hasColorscale?U(T[Y.i]):ha(T[Y.i],Y.id)});C[0].hierarchy=ca;return C}};G._runCrossTraceCalc=function(f,q){function t(C){var v=C.data.data,y=v.id;!1===v.color&&(z[y]?v.color=z[y]:C.parent?C.parent.parent?v.color=C.parent.data.data.color:(z[y]=v.color=x[B%x.length],B++):v.color=D)}var w=q._fullLayout;q=q.calcdata;var x=w[f+"colorway"],
z=w["_"+f+"colormap"];w["extend"+f+"colors"]&&(x=h(x,"icicle"===f?e:"treemap"===f?d:c));var B=0;for(w=0;w<q.length;w++){var A=q[w][0];if(A.trace.type===f&&A.hierarchy){var D=A.trace.root.color;A.hierarchy.each(t)}}};G.crossTraceCalc=function(f){return G._runCrossTraceCalc("sunburst",f)}},{"../../components/colorscale":678,"../../constants/numerical":779,"../../lib":803,"../pie/calc":1194,"d3-hierarchy":170,"fast-isnumeric":249}],1333:[function(b,N,G){N.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",
eventDataKeys:"currentPath root entry percentRoot percentEntry percentParent".split(" ")}},{}],1334:[function(b,N,G){var p=b("../../lib"),n=b("./attributes"),k=b("../../plots/domain").defaults,m=b("../bar/defaults").handleText;b=b("../../components/colorscale");var a=b.hasColorscale,g=b.handleDefaults;N.exports=function(h,r,l,c){function d(f,q){return p.coerce(h,r,n,f,q)}l=d("labels");var e=d("parents");l&&l.length&&e&&e.length?((l=d("values"))&&l.length?d("branchvalues"):d("count"),d("level"),d("maxdepth"),
d("marker.line.width")&&d("marker.line.color",c.paper_bgcolor),d("marker.colors"),(l=r._hasColorscale=a(h,"marker","colors")||(h.marker||{}).coloraxis)&&g(h,r,c,d,{prefix:"marker.",cLetter:"c"}),d("leaf.opacity",l?1:.7),l=d("text"),d("texttemplate"),r.texttemplate||d("textinfo",Array.isArray(l)?"text+label":"label"),d("hovertext"),d("hovertemplate"),m(h,r,c,d,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),
d("insidetextorientation"),d("sort"),d("rotation"),d("root.color"),k(r,c,d),r._length=null):r.visible=!1}},{"../../components/colorscale":678,"../../lib":803,"../../plots/domain":882,"../bar/defaults":945,"./attributes":1330}],1335:[function(b,N,G){function p(c,d,e){for(var f=c.data.data,q={curveNumber:d.index,pointNumber:f.i,data:d._input,fullData:d},t=0;t<e.length;t++){var w=e[t];w in c&&(q[w]=c[w])}"parentString"in c&&!r.isHierarchyRoot(c)&&(q.parent=c.parentString);m(q,d,f.i);return q}var n=b("@plotly/d3"),
k=b("../../registry"),m=b("../../components/fx/helpers").appendArrayPointValue,a=b("../../components/fx"),g=b("../../lib"),h=b("../../lib/events"),r=b("./helpers"),l=b("../pie/helpers").formatPieValue;N.exports=function(c,d,e,f,q){var t=f[0],w=t.trace,x=t.hierarchy,z="sunburst"===w.type,B="treemap"===w.type||"icicle"===w.type;"_hasHoverLabel"in w||(w._hasHoverLabel=!1);"_hasHoverEvent"in w||(w._hasHoverEvent=!1);c.on("mouseover",function(A){var D=e._fullLayout;if(!e._dragging&&!1!==D.hovermode){var C=
e._fullData[w.index],v=A.data.data,y=v.i,F=r.isHierarchyRoot(A),J=r.getParent(x,A),K=r.getValue(A),O=function(Y){return g.castOption(C,y,Y)},I=O("hovertemplate"),L=a.castHoverinfo(C,D,y),H=D.separators;if(I||L&&"none"!==L&&"skip"!==L){if(z){var M=t.cx+A.pxmid[0]*(1-A.rInscribed);var Q=t.cy+A.pxmid[1]*(1-A.rInscribed)}B&&(M=A._hoverX,Q=A._hoverY);var Z={},ca=[],W=[],T=function(Y){return-1!==ca.indexOf(Y)};L&&(ca="all"===L?C._module.attributes.hoverinfo.flags:L.split("+"));Z.label=v.label;T("label")&&
Z.label&&W.push(Z.label);v.hasOwnProperty("v")&&(Z.value=v.v,Z.valueLabel=l(Z.value,H),T("value")&&W.push(Z.valueLabel));Z.currentPath=A.currentPath=r.getPath(A.data);T("current path")&&!F&&W.push(Z.currentPath);var U=[];L=function(){-1===U.indexOf(ha)&&(W.push(ha),U.push(ha))};Z.percentParent=A.percentParent=K/r.getValue(J);Z.parent=A.parentString=r.getPtLabel(J);if(T("percent parent")){var ha=r.formatPercent(Z.percentParent,H)+" of "+Z.parent;L()}Z.percentEntry=A.percentEntry=K/r.getValue(d);Z.entry=
A.entry=r.getPtLabel(d);!T("percent entry")||F||A.onPathbar||(ha=r.formatPercent(Z.percentEntry,H)+" of "+Z.entry,L());Z.percentRoot=A.percentRoot=K/r.getValue(x);Z.root=A.root=r.getPtLabel(x);T("percent root")&&!F&&(ha=r.formatPercent(Z.percentRoot,H)+" of "+Z.root,L());Z.text=O("hovertext")||O("text");T("text")&&(ha=Z.text,g.isValidTextValue(ha)&&W.push(ha));v={trace:C,y:Q,text:W.join("\x3cbr\x3e"),name:I||T("name")?C.name:void 0,color:O("hoverlabel.bgcolor")||v.color,borderColor:O("hoverlabel.bordercolor"),
fontFamily:O("hoverlabel.font.family"),fontSize:O("hoverlabel.font.size"),fontColor:O("hoverlabel.font.color"),nameLength:O("hoverlabel.namelength"),textAlign:O("hoverlabel.align"),hovertemplate:I,hovertemplateLabels:Z,eventData:[p(A,C,q.eventDataKeys)]};z&&(v.x0=M-A.rInscribed*A.rpx1,v.x1=M+A.rInscribed*A.rpx1,v.idealAlign=0>A.pxmid[0]?"left":"right");B&&(v.x=M,v.idealAlign=0>M?"left":"right");a.loneHover(v,{container:D._hoverlayer.node(),outerContainer:D._paper.node(),gd:e});w._hasHoverLabel=!0}B&&
(D=c.select("path.surface"),q.styleOne(D,A,C,{hovered:!0}));w._hasHoverEvent=!0;e.emit("plotly_hover",{points:[p(A,C,q.eventDataKeys)],event:n.event})}});c.on("mouseout",function(A){var D=e._fullLayout,C=e._fullData[w.index],v=n.select(this).datum();w._hasHoverEvent&&(A.originalEvent=n.event,e.emit("plotly_unhover",{points:[p(v,C,q.eventDataKeys)],event:n.event}),w._hasHoverEvent=!1);w._hasHoverLabel&&(a.loneUnhover(D._hoverlayer.node()),w._hasHoverLabel=!1);B&&(A=c.select("path.surface"),q.styleOne(A,
v,C,{hovered:!1}))});c.on("click",function(A){var D=e._fullLayout,C=e._fullData[w.index],v=z&&(r.isHierarchyRoot(A)||r.isLeaf(A)),y=r.getPtId(A);y=r.isEntry(A)?r.findEntryWithChild(x,y):r.findEntryWithLevel(x,y);y=r.getPtId(y);var F={points:[p(A,C,q.eventDataKeys)],event:n.event};v||(F.nextLevel=y);F=h.triggerHandler(e,"plotly_"+w.type+"click",F);!1!==F&&D.hovermode&&(e._hoverdata=[p(A,C,q.eventDataKeys)],a.click(e,n.event));v||!1===F||e._dragging||e._transitioning||(k.call("_storeDirectGUIEdit",
C,D._tracePreGUI[C.uid],{level:C.level}),A={data:[{level:y}],traces:[w.index]},C={frame:{redraw:!1,duration:q.transitionTime},transition:{duration:q.transitionTime,easing:q.transitionEasing},mode:"immediate",fromcurrent:!0},a.loneUnhover(D._hoverlayer.node()),k.call("animate",e,A,C))})}},{"../../components/fx":706,"../../components/fx/helpers":702,"../../lib":803,"../../lib/events":792,"../../registry":931,"../pie/helpers":1197,"./helpers":1336,"@plotly/d3":58}],1336:[function(b,N,G){var p=b("../../lib"),
n=b("../../components/color"),k=b("../../lib/setcursor"),m=b("../pie/helpers");G.findEntryWithLevel=function(a,g){var h;g&&a.eachAfter(function(r){if(G.getPtId(r)===g)return h=r.copy()});return h||a};G.findEntryWithChild=function(a,g){var h;a.eachAfter(function(r){for(var l=r.children||[],c=0;c<l.length;c++)if(G.getPtId(l[c])===g)return h=r.copy()});return h||a};G.isEntry=function(a){return!a.parent};G.isLeaf=function(a){return!a.children};G.getPtId=function(a){return a.data.data.id};G.getPtLabel=
function(a){return a.data.data.label};G.getValue=function(a){return a.value};G.isHierarchyRoot=function(a){return""===a.data.data.pid};G.setSliceCursor=function(a,g,h){g=h.isTransitioning;g||(g=a.datum(),g=h.hideOnRoot&&G.isHierarchyRoot(g)||h.hideOnLeaves&&G.isLeaf(g));k(a,g?null:"pointer")};G.getInsideTextFontKey=function(a,g,h,r,l){h=h.data.data.i;return p.castOption(g,h,((l||{}).onPathbar?"pathbar.textfont":"insidetextfont")+"."+a)||p.castOption(g,h,"textfont."+a)||r.size};G.getOutsideTextFontKey=
function(a,g,h,r){h=h.data.data.i;return p.castOption(g,h,"outsidetextfont."+a)||p.castOption(g,h,"textfont."+a)||r.size};G.isOutsideText=function(a,g){return!a._hasColorscale&&G.isHierarchyRoot(g)};G.determineTextFont=function(a,g,h,r){if(G.isOutsideText(a,g))a={color:G.getOutsideTextFontKey("color",a,g,h),family:G.getOutsideTextFontKey("family",a,g,h),size:G.getOutsideTextFontKey("size",a,g,h)};else{var l=g.data.data,c=l.i,d=p.castOption(a,c,((r||{}).onPathbar?"pathbar.textfont":"insidetextfont")+
".color");!d&&a._input.textfont&&(d=p.castOption(a._input,c,"textfont.color"));a={color:d||n.contrast(l.color),family:G.getInsideTextFontKey("family",a,g,h,r),size:G.getInsideTextFontKey("size",a,g,h,r)}}return a};G.hasTransition=function(a){return!!(a&&0<a.duration)};G.getMaxDepth=function(a){return 0<=a.maxdepth?a.maxdepth:Infinity};G.isHeader=function(a,g){return!(G.isLeaf(a)||a.depth===g._maxDepth-1)};G.getParent=function(a,g){return G.findEntryWithLevel(a,g.data.data.pid)};G.listPath=function(a,
g){a=a.parent;if(!a)return[];var h=g?[a.data[g]]:[a];return G.listPath(a,g).concat(h)};G.getPath=function(a){return G.listPath(a,"label").join("/")+"/"};G.formatValue=m.formatPieValue;G.formatPercent=function(a,g){var h=p.formatPercent(a,0);"0%"===h&&(h=m.formatPiePercent(a,g));return h}},{"../../components/color":666,"../../lib":803,"../../lib/setcursor":824,"../pie/helpers":1197}],1337:[function(b,N,G){N.exports={moduleType:"trace",name:"sunburst",basePlotModule:b("./base_plot"),categories:[],animatable:!0,
attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults"),supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc").calc,crossTraceCalc:b("./calc").crossTraceCalc,plot:b("./plot").plot,style:b("./style").style,colorbar:b("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":1236,"./attributes":1330,"./base_plot":1331,"./calc":1332,"./defaults":1334,"./layout_attributes":1338,"./layout_defaults":1339,"./plot":1340,"./style":1341}],1338:[function(b,
N,G){N.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1339:[function(b,N,G){var p=b("../../lib"),n=b("./layout_attributes");N.exports=function(k,m){p.coerce(k,m,n,"sunburstcolorway",m.colorway);p.coerce(k,m,n,"extendsunburstcolors",void 0)}},{"../../lib":803,"./layout_attributes":1338}],1340:[function(b,N,G){function p(D,C,v,y){function F(ta){var za=A.getPtId(ta),Ia=ba[za],Xa=ba[A.getPtId(Z)];if(Xa){var $a=(ta.x1>
Xa.x1?2*Math.PI:0)+ia;ta=ta.rpx1<Xa.rpx1?{x0:ta.x0,x1:ta.x1,rpx0:0,rpx1:0}:{x0:$a,x1:$a,rpx0:ta.rpx0,rpx1:ta.rpx1}}else{var gb,sb=A.getPtId(ta.parent);H.each(function(vb){if(A.getPtId(vb)===sb)return gb=vb});ta=gb.children;var jb;ta.forEach(function(vb,qb){if(A.getPtId(vb)===za)return jb=qb});ta=ta.length;Xa=h(gb.x0,gb.x1);ta={rpx0:T,rpx1:T,x0:Xa(jb/ta),x1:Xa((jb+1)/ta)}}return h(Ia,ta)}function J(ta){var za=ba[A.getPtId(ta)],Ia={x0:ta.x0,x1:ta.x1,rpx0:ta.rpx0,rpx1:ta.rpx1};za||(Y?ta.parent?na?(ta=
(ta.x1>na?2*Math.PI:0)+ia,za={x0:ta,x1:ta}):(za={rpx0:T,rpx1:T},l.extendFlat(za,O(ta))):za={rpx0:0,rpx1:0}:za={x0:ia,x1:ia});return h(za,Ia)}function K(ta){var za=ba[A.getPtId(ta)],Ia=ta.transform;za||(za={rpx1:ta.rpx1,transform:{textPosAngle:Ia.textPosAngle,scale:0,rotate:Ia.rotate,rCenter:Ia.rCenter,x:Ia.x,y:Ia.y}},Y?ta.parent?na?za.x0=za.x1=ta.x1>na?2*Math.PI:0:l.extendFlat(za,O(ta)):za.x0=za.x1=ia:za.x0=za.x1=ia);var Xa=h(za.transform.textPosAngle,ta.transform.textPosAngle),$a=h(za.rpx1,ta.rpx1),
gb=h(za.x0,ta.x0),sb=h(za.x1,ta.x1),jb=h(za.transform.scale,Ia.scale),vb=h(za.transform.rotate,Ia.rotate),qb=0===Ia.rCenter?3:0===za.transform.rCenter?1/3:1,Bb=h(za.transform.rCenter,Ia.rCenter);return function(ub){var wb=$a(ub),rb=gb(ub),Ab=sb(ub),Ma=Bb(Math.pow(ub,qb));rb=xa(wb,(rb+Ab)/2);Ab=Xa(ub);wb={pxmid:rb,rpx1:wb,transform:{textPosAngle:Ab,rCenter:Ma,x:Ia.x,y:Ia.y}};d(Q.type,Ia,I);return{transform:{targetX:la(wb),targetY:ka(wb),scale:jb(ub),rotate:vb(ub),rCenter:Ma}}}}function O(ta){var za=
ta.parent,Ia=ba[A.getPtId(za)],Xa={};Ia?(za=za.children,ta=za.indexOf(ta),za=za.length,Ia=h(Ia.x0,Ia.x1),Xa.x0=Ia(ta/za),Xa.x1=Ia(ta/za)):Xa.x0=Xa.x1=0;return Xa}var I=D._fullLayout,L=!I.uniformtext.mode&&A.hasTransition(y),H=a.select(v).selectAll("g.slice"),M=C[0],Q=M.trace,Z=A.findEntryWithLevel(M.hierarchy,Q.level);v=A.getMaxDepth(Q);y=I._size;var ca=Q.domain,W=y.h*(ca.y[1]-ca.y[0]),T=.5*Math.min(y.w*(ca.x[1]-ca.x[0]),W),U=M.cx=y.l+y.w*(ca.x[1]+ca.x[0])/2,ha=M.cy=y.t+y.h*(1-ca.y[0])-W/2;if(!Z)return H.remove();
var Y=null,ba={};L&&H.each(function(ta){ba[A.getPtId(ta)]={rpx0:ta.rpx0,rpx1:ta.rpx1,x0:ta.x0,x1:ta.x1,transform:ta.transform};!Y&&A.isEntry(ta)&&(Y=ta)});y=n(Z).descendants();ca=Z.height+1;var ja=0,ma=v;M.hasMultipleRoots&&A.isHierarchyRoot(Z)&&(y=y.slice(1),--ca,ja=1,ma+=1);y=y.filter(function(ta){return ta.y1<=ma});var ia=f(Q.rotation);ia&&y.forEach(function(ta){ta.x0+=ia;ta.x1+=ia});var oa=Math.min(ca,v),xa=function(ta,za){return[ta*Math.cos(za),-ta*Math.sin(za)]},ra=function(ta){return l.pathAnnulus(ta.rpx0,
ta.rpx1,ta.x0,ta.x1,U,ha)},la=function(ta){return U+m(ta.rpx1,ta.transform.textPosAngle)[0]*(ta.transform.rCenter||0)+(ta.transform.x||0)},ka=function(ta){return ha+m(ta.rpx1,ta.transform.textPosAngle)[1]*(ta.transform.rCenter||0)+(ta.transform.y||0)};H=H.data(y,A.getPtId);H.enter().append("g").classed("slice",!0);L?H.exit().transition().each(function(){var ta=a.select(this);ta.select("path.surface").transition().attrTween("d",function(za){var Ia=F(za);return function(Xa){return ra(Ia(Xa))}});ta.select("g.slicetext").attr("opacity",
0)}).remove():H.exit().remove();H.order();var na=null;if(L&&Y){var qa=A.getPtId(Y);H.each(function(ta){null===na&&A.getPtId(ta)===qa&&(na=ta.x1)})}v=H;L&&(v=v.transition().each("end",function(){var ta=a.select(this);A.setSliceCursor(ta,D,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})}));v.each(function(ta){var za=a.select(this),Ia=l.ensureSingle(za,"path","surface",function(sb){sb.style("pointer-events","all")});ta.rpx0=(ta.y0-ja)/oa*T;ta.rpx1=(ta.y1-ja)/oa*T;ta.xmid=(ta.x0+ta.x1)/2;ta.pxmid=
xa(ta.rpx1,ta.xmid);ta.midangle=-(ta.xmid-Math.PI/2);ta.startangle=-(ta.x0-Math.PI/2);ta.stopangle=-(ta.x1-Math.PI/2);ta.halfangle=.5*Math.min(l.angleDelta(ta.x0,ta.x1)||Math.PI,Math.PI);ta.ring=1-ta.rpx0/ta.rpx1;ta.rInscribed=k(ta,Q);L?Ia.transition().attrTween("d",function(sb){var jb=J(sb);return function(vb){return ra(jb(vb))}}):Ia.attr("d",ra);za.call(z,Z,D,C,{eventDataKeys:B.eventDataKeys,transitionTime:B.CLICK_TRANSITION_TIME,transitionEasing:B.CLICK_TRANSITION_EASING}).call(A.setSliceCursor,
D,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:D._transitioning});Ia.call(w,ta,Q);za=l.ensureSingle(za,"g","slicetext");za=l.ensureSingle(za,"text","",function(sb){sb.attr("data-notex",1)});var Xa=l.ensureUniformFontSize(D,A.determineTextFont(Q,ta,I.font));za.text(G.formatSliceLabel(ta,Z,Q,C,I)).classed("slicetext",!0).attr("text-anchor","middle").call(r.font,Xa).call(c.convertToTspans,D);var $a=r.bBox(za.node());ta.transform=t($a,ta,M);ta.transform.targetX=la(ta);ta.transform.targetY=ka(ta);var gb=
function(sb,jb){sb=sb.transform;q(sb,jb);sb.fontSize=Xa.size;d(Q.type,sb,I);return l.getTextTransform(sb)};L?za.transition().attrTween("transform",function(sb){var jb=K(sb);return function(vb){return gb(jb(vb),$a)}}):za.attr("transform",gb(ta,$a))})}function n(D){return g.partition().size([2*Math.PI,D.height+1])(D)}function k(D){return 0===D.rpx0&&l.isFullCircle([D.x0,D.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(D.halfangle)),D.ring/2))}function m(D,C){return[D*Math.sin(C),-D*Math.cos(C)]}var a=b("@plotly/d3"),
g=b("d3-hierarchy"),h=b("d3-interpolate").interpolate,r=b("../../components/drawing"),l=b("../../lib"),c=b("../../lib/svg_text_utils");N=b("../bar/uniform_text");var d=N.recordMinTextSize,e=N.clearMinTextSize;N=b("../pie/plot");var f=b("../pie/helpers").getRotationAngle,q=N.computeTransform,t=N.transformInsideText,w=b("./style").styleOne,x=b("../bar/style").resizeText,z=b("./fx"),B=b("./constants"),A=b("./helpers");G.plot=function(D,C,v,y){var F=D._fullLayout,J=F._sunburstlayer,K,O=!v,I=!F.uniformtext.mode&&
A.hasTransition(v);e("sunburst",F);C=J.selectAll("g.trace.sunburst").data(C,function(L){return L[0].trace.uid});C.enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round");C.order();I?(y&&(K=y()),a.transition().duration(v.duration).ease(v.easing).each("end",function(){K&&K()}).each("interrupt",function(){K&&K()}).each(function(){J.selectAll("g.trace").each(function(L){p(D,L,this,v)})})):(C.each(function(L){p(D,L,this,v)}),F.uniformtext.mode&&x(D,F._sunburstlayer.selectAll(".trace"),
"sunburst"));O&&C.exit().remove()};G.formatSliceLabel=function(D,C,v,y,F){var J=v.texttemplate,K=v.textinfo;if(!(J||K&&"none"!==K))return"";var O=F.separators,I=D.data.data;y=y[0].hierarchy;var L=A.isHierarchyRoot(D),H=A.getParent(y,D),M=A.getValue(D);if(!J){var Q=K.split("+");F=function(U){return-1!==Q.indexOf(U)};var Z=[];F("label")&&I.label&&Z.push(I.label);I.hasOwnProperty("v")&&F("value")&&Z.push(A.formatValue(I.v,O));if(!L){F("current path")&&Z.push(A.getPath(D.data));D=0;F("percent parent")&&
D++;F("percent entry")&&D++;F("percent root")&&D++;var ca=1<D;if(D){D=function(U){T=A.formatPercent(W,O);ca&&(T+=" of "+U);Z.push(T)};if(F("percent parent")&&!L){var W=M/A.getValue(H);D("parent")}F("percent entry")&&(W=M/A.getValue(C),D("entry"));F("percent root")&&(W=M/A.getValue(y),D("root"))}}if(F("text")){var T=l.castOption(v,I.i,"text");l.isValidTextValue(T)&&Z.push(T)}return Z.join("\x3cbr\x3e")}J=l.castOption(v,I.i,"texttemplate");if(!J)return"";K={};I.label&&(K.label=I.label);I.hasOwnProperty("v")&&
(K.value=I.v,K.valueLabel=A.formatValue(I.v,O));K.currentPath=A.getPath(D.data);L||(K.percentParent=M/A.getValue(H),K.percentParentLabel=A.formatPercent(K.percentParent,O),K.parent=A.getPtLabel(H));K.percentEntry=M/A.getValue(C);K.percentEntryLabel=A.formatPercent(K.percentEntry,O);K.entry=A.getPtLabel(C);K.percentRoot=M/A.getValue(y);K.percentRootLabel=A.formatPercent(K.percentRoot,O);K.root=A.getPtLabel(y);I.hasOwnProperty("color")&&(K.color=I.color);C=l.castOption(v,I.i,"text");if(l.isValidTextValue(C)||
""===C)K.text=C;K.customdata=l.castOption(v,I.i,"customdata");return l.texttemplateString(J,K,F._d3locale,K,v._meta||{})}},{"../../components/drawing":688,"../../lib":803,"../../lib/svg_text_utils":829,"../bar/style":955,"../bar/uniform_text":957,"../pie/helpers":1197,"../pie/plot":1201,"./constants":1333,"./fx":1335,"./helpers":1336,"./style":1341,"@plotly/d3":58,"d3-hierarchy":170,"d3-interpolate":171}],1341:[function(b,N,G){function p(g,h,r){var l=h.data.data;h=!h.children;var c=l.i,d=m.castOption(r,
c,"marker.line.color")||k.defaultLine;c=m.castOption(r,c,"marker.line.width")||0;g.style("stroke-width",c).call(k.fill,l.color).call(k.stroke,d).style("opacity",h?r.leaf.opacity:null)}var n=b("@plotly/d3"),k=b("../../components/color"),m=b("../../lib"),a=b("../bar/uniform_text").resizeText;N.exports={style:function(g){var h=g._fullLayout._sunburstlayer.selectAll(".trace");a(g,h,"sunburst");h.each(function(r){var l=n.select(this),c=r[0].trace;l.style("opacity",c.opacity);l.selectAll("path.surface").each(function(d){n.select(this).call(p,
d,c)})})},styleOne:p}},{"../../components/color":666,"../../lib":803,"../bar/uniform_text":957,"@plotly/d3":58}],1342:[function(b,N,G){function p(r){return{valType:"boolean",dflt:!1}}function n(r){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:p("x"),y:p("y"),z:p("z")},color:{valType:"color",dflt:k.defaultLine},usecolormap:{valType:"boolean",
dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:k.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var k=b("../../components/color");G=b("../../components/colorscale/attributes");var m=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat,a=b("../../plots/template_attributes").hovertemplateAttrs,g=b("../../plots/attributes"),h=b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;
N=N.exports=b(h({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:a(),xhoverformat:m("x"),yhoverformat:m("y"),zhoverformat:m("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},G("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:n("x"),y:n("y"),z:n("z")},hidesurface:{valType:"boolean",
dflt:!1},lightposition:{x:{valType:"number",min:-1E5,max:1E5,dflt:10},y:{valType:"number",min:-1E5,max:1E5,dflt:1E4},z:{valType:"number",min:-1E5,max:1E5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},
_deprecated:{zauto:h({},G.zauto,{}),zmin:h({},G.zmin,{}),zmax:h({},G.zmax,{})},hoverinfo:h({},g.hoverinfo),showlegend:h({},g.showlegend,{dflt:!1})}),"calc","nested");N.x.editType=N.y.editType=N.z.editType="calc+clearAxisTypes";N.transforms=void 0},{"../../components/color":666,"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plot_api/edit_types":836,"../../plots/attributes":850,"../../plots/cartesian/axis_format_attributes":857,"../../plots/template_attributes":926}],1343:[function(b,
N,G){var p=b("../../components/colorscale/calc");N.exports=function(n,k){k.surfacecolor?p(n,k,{vals:k.surfacecolor,containerStr:"",cLetter:"c"}):p(n,k,{vals:k.z,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":674}],1344:[function(b,N,G){function p(w,x,z){this.scene=w;this.uid=z;this.surface=x;this.data=null;this.showContour=[!1,!1,!1];this.contourStart=[null,null,null];this.contourEnd=[null,null,null];this.contourSize=[0,0,0];this.minValues=[Infinity,Infinity,Infinity];this.maxValues=
[-Infinity,-Infinity,-Infinity];this.dataScaleY=this.dataScaleX=1;this.refineData=!0;this.objectOffset=[0,0,0]}function n(w){for(var x=[],z=0;z<f.length;z++){var B=f[z],A=x,D=A.push;var C=w;if(C<B)B=0;else{for(var v=0;0===Math.floor(C%B);)C/=B,v++;B=v}D.call(A,B)}return x}function k(w,x,z){var B=z[8]+z[2]*x[0]+z[5]*x[1];w[0]=(z[6]+z[0]*x[0]+z[3]*x[1])/B;w[1]=(z[7]+z[1]*x[0]+z[4]*x[1])/B;return w}var m=b("gl-surface3d"),a=b("ndarray"),g=b("ndarray-linear-interpolate").d2,h=b("../heatmap/interp2d"),
r=b("../heatmap/find_empties"),l=b("../../lib").isArrayOrTypedArray,c=b("../../lib/gl_format_color").parseColorScale,d=b("../../lib/str2rgbarray"),e=b("../../components/colorscale").extractOpts;b=p.prototype;b.getXat=function(w,x,z,B){w=l(this.data.x)?l(this.data.x[0])?this.data.x[x][w]:this.data.x[w]:w;return void 0===z?w:B.d2l(w,0,z)};b.getYat=function(w,x,z,B){w=l(this.data.y)?l(this.data.y[0])?this.data.y[x][w]:this.data.y[x]:x;return void 0===z?w:B.d2l(w,0,z)};b.getZat=function(w,x,z,B){var A=
this.data.z[x][w];null===A&&this.data.connectgaps&&this.data._interpolatedZ&&(A=this.data._interpolatedZ[x][w]);return void 0===z?A:B.d2l(A,0,z)};b.handlePick=function(w){if(w.object===this.surface){var x=Math.max(Math.min(Math.round((w.data.index[0]-1)/this.dataScaleX-1),this.data.z[0].length-1),0),z=Math.max(Math.min(Math.round((w.data.index[1]-1)/this.dataScaleY-1),this.data._ylength-1),0);w.index=[x,z];w.traceCoordinate=[this.getXat(x,z),this.getYat(x,z),this.getZat(x,z)];w.dataCoordinate=[this.getXat(x,
z,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(x,z,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(x,z,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var B=0;3>B;B++){var A=w.dataCoordinate[B];null!==A&&void 0!==A&&(w.dataCoordinate[B]*=this.scene.dataScale[B])}B=this.data.hovertext||this.data.text;Array.isArray(B)&&B[z]&&void 0!==B[z][x]?w.textLabel=B[z][x]:w.textLabel=B?B:"";w.data.dataCoordinate=w.dataCoordinate.slice();this.surface.highlight(w.data);
this.scene.glplot.spikes.position=w.dataCoordinate;return!0}};var f=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,
643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,
1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,
2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,
2999];b.calcXnums=function(w){var x,z=[];for(x=1;x<w;x++){var B=this.getXat(x-1,0),A=this.getXat(x,0);z[x-1]=A!==B&&void 0!==B&&null!==B&&void 0!==A&&null!==A?Math.abs(A-B):0}B=0;for(x=1;x<w;x++)B+=z[x-1];for(x=1;x<w;x++)z[x-1]=0===z[x-1]?1:Math.round(B/z[x-1]);return z};b.calcYnums=function(w){var x,z=[];for(x=1;x<w;x++){var B=this.getYat(0,x-1),A=this.getYat(0,x);z[x-1]=A!==B&&void 0!==B&&null!==B&&void 0!==A&&null!==A?Math.abs(A-B):0}B=0;for(x=1;x<w;x++)B+=z[x-1];for(x=1;x<w;x++)z[x-1]=0===z[x-
1]?1:Math.round(B/z[x-1]);return z};G=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260];var q=G[9],t=G[13];b.estimateScale=function(w,x){x=0===x?this.calcXnums(w):this.calcYnums(w);if(0===x.length)x=void 0;else{for(var z=1,B=0;B<x.length;B++){var A=x[B];if(1>z||1>A)z=void 0;else{z=n(z);A=n(A);for(var D=1,C=0;C<f.length;C++)D*=Math.pow(f[C],Math.max(z[C],A[C]));z=D}}x=z}for(B=1+x;B<q;)B*=2;for(;B>t;){B--;z=x=B;B=n(z);for(A=0;A<f.length;A++)if(0<B[A]){z=f[A];break}B=x/z;B++;B<q&&(B=t)}w=Math.round(B/
w);return 1<w?w:1};b.refineCoords=function(w){var x=this.dataScaleX,z=this.dataScaleY,B=Math.floor(w[0].shape[0]*x+1)|0,A=Math.floor(w[0].shape[1]*z+1)|0,D=1+w[0].shape[0]+1,C=1+w[0].shape[1]+1;D=a(new Float32Array(D*C),[D,C]);x=[1/x,0,0,0,1/z,0,0,0,1];for(z=0;z<w.length;++z){this.surface.padField(D,w[z]);for(var v=C=a(new Float32Array(B*A),[B,A]),y=D,F=k,J=x,K=[0,0],O=v.shape[0],I=v.shape[1],L=0;L<O;L++)for(var H=0;H<I;H++)F(K,[L,H],J),v.set(L,H,g(y,K[0],K[1]));w[z]=C}};b.setContourLevels=function(){var w=
[[],[],[]],x=[!1,!1,!1],z=!1,B,A;for(B=0;3>B;++B)if(this.showContour[B]&&(z=!0,0<this.contourSize[B]&&null!==this.contourStart[B]&&null!==this.contourEnd[B]&&this.contourEnd[B]>this.contourStart[B]))for(x[B]=!0,A=this.contourStart[B];A<this.contourEnd[B];A+=this.contourSize[B]){var D=A*this.scene.dataScale[B];for(var C=w[B],v=!1,y=0;y<C.length;y++)if(D===C[y]){v=!0;break}!1===v&&C.push(D)}if(z){z=[[],[],[]];for(B=0;3>B;++B)this.showContour[B]&&(z[B]=x[B]?w[B]:this.scene.contourLevels[B]);this.surface.update({levels:z})}};
b.update=function(w){var x=this.scene,z=x.fullSceneLayout,B=this.surface,A=c(w),D=x.dataScale,C=w.z[0].length,v=w._ylength;x=x.contourLevels;this.data=w;var y,F,J,K=[];for(y=0;3>y;y++)for(K[y]=[],F=0;F<C;F++)K[y][F]=[];for(F=0;F<C;F++)for(J=0;J<v;J++)K[0][F][J]=this.getXat(F,J,w.xcalendar,z.xaxis),K[1][F][J]=this.getYat(F,J,w.ycalendar,z.yaxis),K[2][F][J]=this.getZat(F,J,w.zcalendar,z.zaxis);if(w.connectgaps)for(w._emptypoints=r(K[2]),h(K[2],w._emptypoints),w._interpolatedZ=[],F=0;F<C;F++)for(w._interpolatedZ[F]=
[],J=0;J<v;J++)w._interpolatedZ[F][J]=K[2][F][J];for(y=0;3>y;y++)for(F=0;F<C;F++)for(J=0;J<v;J++)z=K[y][F][J],K[y][F][J]=null===z||void 0===z?NaN:K[y][F][J]*D[y];for(y=0;3>y;y++)for(F=0;F<C;F++)for(J=0;J<v;J++)z=K[y][F][J],null!==z&&void 0!==z&&(this.minValues[y]>z&&(this.minValues[y]=z),this.maxValues[y]<z&&(this.maxValues[y]=z));for(y=0;3>y;y++)this.objectOffset[y]=.5*(this.minValues[y]+this.maxValues[y]);for(y=0;3>y;y++)for(F=0;F<C;F++)for(J=0;J<v;J++)z=K[y][F][J],null!==z&&void 0!==z&&(K[y][F][J]-=
this.objectOffset[y]);z=[a(new Float32Array(C*v),[C,v]),a(new Float32Array(C*v),[C,v]),a(new Float32Array(C*v),[C,v])];for(y=0;3>y;y++)for(F=0;F<C;F++)for(J=0;J<v;J++)z[y].set(F,J,K[y][F][J]);K={colormap:A,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!w.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:w.opacityscale,
opacity:w.opacity};y=e(w);K.intensityBounds=[y.min,y.max];if(w.surfacecolor){y=a(new Float32Array(C*v),[C,v]);for(F=0;F<C;F++)for(J=0;J<v;J++)y.set(F,J,w.surfacecolor[J][F]);z.push(y)}else K.intensityBounds[0]*=D[2],K.intensityBounds[1]*=D[2];if(t<z[0].shape[0]||t<z[0].shape[1])this.refineData=!1;!0===this.refineData&&(this.dataScaleX=this.estimateScale(z[0].shape[0],0),this.dataScaleY=this.estimateScale(z[0].shape[1],1),1===this.dataScaleX&&1===this.dataScaleY||this.refineCoords(z));w.surfacecolor&&
(K.intensity=z.pop());C=[!0,!0,!0];v=["x","y","z"];for(y=0;3>y;++y)D=w.contours[v[y]],C[y]=D.highlight,K.showContour[y]=D.show||D.highlight,K.showContour[y]&&(K.contourProject[y]=[D.project.x,D.project.y,D.project.z],D.show?(this.showContour[y]=!0,K.levels[y]=x[y],B.highlightColor[y]=K.contourColor[y]=d(D.color),B.highlightTint[y]=D.usecolormap?K.contourTint[y]=0:K.contourTint[y]=1,K.contourWidth[y]=D.width,this.contourStart[y]=D.start,this.contourEnd[y]=D.end,this.contourSize[y]=D.size):(this.showContour[y]=
!1,this.contourStart[y]=null,this.contourEnd[y]=null,this.contourSize[y]=0),D.highlight&&(K.dynamicColor[y]=d(D.highlightcolor),K.dynamicWidth[y]=D.highlightwidth));x=A[0].rgb;A=A[A.length-1].rgb;x[0]===A[0]&&x[1]===A[1]&&x[2]===A[2]&&x[3]===A[3]&&(K.vertexColor=!0);K.objectOffset=this.objectOffset;K.coords=z;B.update(K);B.visible=w.visible;B.enableDynamic=C;B.enableHighlight=C;B.snapToData=!0;"lighting"in w&&(B.ambientLight=w.lighting.ambient,B.diffuseLight=w.lighting.diffuse,B.specularLight=w.lighting.specular,
B.roughness=w.lighting.roughness,B.fresnel=w.lighting.fresnel);"lightposition"in w&&(B.lightPosition=[w.lightposition.x,w.lightposition.y,w.lightposition.z])};b.dispose=function(){this.scene.glplot.remove(this.surface);this.surface.dispose()};N.exports=function(w,x){var z=m({gl:w.glplot.gl}),B=new p(w,z,x.uid);z._trace=B;B.update(x);w.glplot.add(z);return B}},{"../../components/colorscale":678,"../../lib":803,"../../lib/gl_format_color":799,"../../lib/str2rgbarray":828,"../heatmap/find_empties":1091,
"../heatmap/interp2d":1094,"gl-surface3d":354,ndarray:483,"ndarray-linear-interpolate":477}],1345:[function(b,N,G){function p(h,r,l,c){h=c("opacityscale");if("max"===h)r.opacityscale=[[0,.1],[1,1]];else if("min"===h)r.opacityscale=[[0,1],[1,.1]];else if("extremes"===h){h=[];for(l=0;32>l;l++)c=l/31,h.push([c,Math.max(0,Math.min(1,.1+.9*(1-Math.pow(Math.sin(1*c*Math.PI),2))))]);r.opacityscale=h}else{a:if(l=0,!Array.isArray(h)||2>h.length||!h[0]||!h[h.length-1]||0!==+h[0][0]||1!==+h[h.length-1][0])h=
!1;else{for(c=0;c<h.length;c++){var d=h[c];if(2!==d.length||+d[0]<l){h=!1;break a}l=+d[0]}h=!0}h||(r.opacityscale=void 0)}}function n(h,r,l){r in h&&!(l in h)&&(h[l]=h[r])}var k=b("../../registry"),m=b("../../lib"),a=b("../../components/colorscale/defaults"),g=b("./attributes");N.exports={supplyDefaults:function(h,r,l,c){function d(z,B){return m.coerce(h,r,g,z,B)}l=d("x");var e=d("y");var f=d("z");if(!f||!f.length||l&&1>l.length||e&&1>e.length)r.visible=!1;else{r._xlength=Array.isArray(l)&&m.isArrayOrTypedArray(l[0])?
f.length:f[0].length;r._ylength=f.length;k.getComponentMethod("calendars","handleTraceDefaults")(h,r,["x","y","z"],c);d("text");d("hovertext");d("hovertemplate");d("xhoverformat");d("yhoverformat");d("zhoverformat");"lighting.ambient lighting.diffuse lighting.specular lighting.roughness lighting.fresnel lightposition.x lightposition.y lightposition.z hidesurface connectgaps opacity".split(" ").forEach(function(z){d(z)});f=d("surfacecolor");var q=["x","y","z"];for(l=0;3>l;++l){var t="contours."+q[l],
w=d(t+".show"),x=d(t+".highlight");if(w||x)for(e=0;3>e;++e)d(t+".project."+q[e]);w&&(d(t+".color"),d(t+".width"),d(t+".usecolormap"));x&&(d(t+".highlightcolor"),d(t+".highlightwidth"));d(t+".start");d(t+".end");d(t+".size")}f||(n(h,"zmin","cmin"),n(h,"zmax","cmax"),n(h,"zauto","cauto"));a(h,r,c,d,{prefix:"",cLetter:"c"});p(h,r,c,d);r._length=null}},opacityscaleDefaults:p}},{"../../components/colorscale/defaults":676,"../../lib":803,"../../registry":931,"./attributes":1342}],1346:[function(b,N,G){N.exports=
{attributes:b("./attributes"),supplyDefaults:b("./defaults").supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:b("./calc"),plot:b("./convert"),moduleType:"trace",name:"surface",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","2dMap","showLegend"],meta:{}}},{"../../plots/gl3d":896,"./attributes":1342,"./calc":1343,"./convert":1344,"./defaults":1345}],1347:[function(b,N,G){G=b("../../components/annotations/attributes");var p=b("../../lib/extend").extendFlat,n=b("../../plot_api/edit_types").overrideAll,
k=b("../../plots/font_attributes"),m=b("../../plots/domain").attributes;b=b("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers;(N.exports=n({domain:m({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:b("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",
dflt:28},align:p({},G.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:p({},k({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:b("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:p({},G.align,{arrayOk:!0}),line:{width:{valType:"number",
arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:p({},k({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},{"../../components/annotations/attributes":649,"../../lib/extend":793,"../../plot_api/edit_types":836,"../../plots/cartesian/axis_format_attributes":857,"../../plots/domain":882,"../../plots/font_attributes":883}],1348:[function(b,N,G){var p=b("../../plots/get_data").getModuleCalcData,n=b("./plot");G.name="table";
G.plot=function(k){var m=p(k.calcdata,"table")[0];m.length&&n(k,m)};G.clean=function(k,m,a,g){k=g._has&&g._has("table");m=m._has&&m._has("table");k&&!m&&g._paperdiv.selectAll(".table").remove()}},{"../../plots/get_data":891,"./plot":1355}],1349:[function(b,N,G){var p=b("../../lib/gup").wrap;N.exports=function(){return p({})}},{"../../lib/gup":800}],1350:[function(b,N,G){N.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"\x3cbr\x3e",
maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1E3,scrollbarHideDuration:1E3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",
columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1351:[function(b,N,G){function p(e){if(Array.isArray(e)){for(var f=0,q=0;q<e.length;q++)f=
Math.max(f,p(e[q]));return f}return e}function n(e,f){return e+f}function k(e){e=e.slice();var f=Infinity,q=0,t;for(t=0;t<e.length;t++)Array.isArray(e[t])||(e[t]=[e[t]]),f=Math.min(f,e[t].length),q=Math.max(q,e[t].length);if(f!==q)for(t=0;t<e.length;t++)(f=q-e[t].length)&&(e[t]=e[t].concat(m(f)));return e}function m(e){for(var f=Array(e),q=0;q<e;q++)f[q]="";return f}function a(e){return e.calcdata.columns.reduce(function(f,q){return q.xIndex<e.xIndex?f+q.columnWidth:f},0)}function g(e,f){return Object.keys(e).map(function(q){return c({},
e[q],{auxiliaryBlocks:f})})}function h(e,f){for(var q={},t,w=0,x=0,z=r(),B=0,A=0,D=0;D<e.length;D++)if(t=e[D],z.rows.push({rowIndex:D,rowHeight:t}),x+=t,x>=f||D===e.length-1)q[w]=z,z.key=A++,z.firstRowIndex=B,z.lastRowIndex=D,z=r(),w+=x,B=D+1,x=0;return q}function r(){return{firstRowIndex:null,lastRowIndex:null,rows:[]}}var l=b("./constants"),c=b("../../lib/extend").extendFlat,d=b("fast-isnumeric");N.exports=function(e,f){var q=k(f.cells.values),t=function(I){return I.slice(f.header.values.length,
I.length)},w=k(f.header.values);w.length&&!w[0].length&&(w[0]=[""],w=k(w));var x=w.concat(t(q).map(function(){return m((w[0]||[""]).length)})),z=f.domain,B=Math.floor(e._fullLayout._size.w*(z.x[1]-z.x[0])),A=Math.floor(e._fullLayout._size.h*(z.y[1]-z.y[0])),D=f.header.values.length?x[0].map(function(){return f.header.height}):[l.emptyHeaderHeight],C=q.length?q[0].map(function(){return f.cells.height}):[],v=D.reduce(n,0);C=h(C,A-v+l.uplift);D=h(D,v);D=g(D,[]);C=g(C,D);var y={},F=f._fullInput.columnorder.concat(t(q.map(function(I,
L){return L}))),J=x.map(function(I,L){I=Array.isArray(f.columnwidth)?f.columnwidth[Math.min(L,f.columnwidth.length-1)]:f.columnwidth;return d(I)?Number(I):1}),K=J.reduce(n,0);J=J.map(function(I){return I/K*B});t=Math.max(p(f.header.line.width),p(f.cells.line.width));var O={key:f.uid+e._context.staticPlot,translateX:z.x[0]*e._fullLayout._size.w,translateY:e._fullLayout._size.h*(1-z.y[1]),size:e._fullLayout._size,width:B,maxLineWidth:t,height:A,columnOrder:F,groupHeight:A,rowBlocks:C,headerRowBlocks:D,
scrollY:0,cells:c({},f.cells,{values:q}),headerCells:c({},f.header,{values:x}),gdColumns:x.map(function(I){return I[0]}),gdColumnsOriginalOrder:x.map(function(I){return I[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:x.map(function(I,L){y[I]=(y[I]||0)+1;return{key:I+"__"+y[I],label:I,specIndex:L,xIndex:F[L],xScale:a,x:void 0,calcdata:void 0,columnWidth:J[L]}})};O.columns.forEach(function(I){I.calcdata=O;I.x=a(I)});return O}},{"../../lib/extend":793,"./constants":1350,
"fast-isnumeric":249}],1352:[function(b,N,G){function p(k){var m=(k=k.rowBlocks[k.page])?k.rows[0].rowIndex:0;return[m,k?m+k.rows.length:0]}var n=b("../../lib/extend").extendFlat;G.splitToPanels=function(k){var m=[0,0],a=n({},k,{key:"header",type:"header",page:0,prevPages:m,currentRepaint:[null,null],dragHandle:!0,values:k.calcdata.headerCells.values[k.specIndex],rowBlocks:k.calcdata.headerRowBlocks,calcdata:n({},k.calcdata,{cells:k.calcdata.headerCells})}),g=n({},k,{key:"cells1",type:"cells",page:0,
prevPages:m,currentRepaint:[null,null],dragHandle:!1,values:k.calcdata.cells.values[k.specIndex],rowBlocks:k.calcdata.rowBlocks});k=n({},k,{key:"cells2",type:"cells",page:1,prevPages:m,currentRepaint:[null,null],dragHandle:!1,values:k.calcdata.cells.values[k.specIndex],rowBlocks:k.calcdata.rowBlocks});return[g,k,a]};G.splitToCells=function(k){var m=p(k);return(k.values||[]).slice(m[0],m[1]).map(function(a,g){var h="string"===typeof a&&a.match(/[<$&> ]/)?"_keybuster_"+Math.random():"";return{keyWithinBlock:g+
h,key:m[0]+g,column:k,calcdata:k.calcdata,page:k.page,rowBlocks:k.rowBlocks,value:a}})}},{"../../lib/extend":793}],1353:[function(b,N,G){function p(a,g){var h=a.header.values.length;a=(a.columnorder||[]).slice(0,h);var r=a.slice().sort(function(c,d){return c-d});a=a.map(function(c){return r.indexOf(c)});for(var l=a.length;l<h;l++)a.push(l);g("columnorder",a)}var n=b("../../lib"),k=b("./attributes"),m=b("../../plots/domain").defaults;N.exports=function(a,g,h,r){function l(c,d){return n.coerce(a,g,
k,c,d)}m(g,r,l);l("columnwidth");l("header.values");l("header.format");l("header.align");l("header.prefix");l("header.suffix");l("header.height");l("header.line.width");l("header.line.color");l("header.fill.color");n.coerceFont(l,"header.font",n.extendFlat({},r.font));p(g,l);l("cells.values");l("cells.format");l("cells.align");l("cells.prefix");l("cells.suffix");l("cells.height");l("cells.line.width");l("cells.line.color");l("cells.fill.color");n.coerceFont(l,"cells.font",n.extendFlat({},r.font));
g._length=null}},{"../../lib":803,"../../plots/domain":882,"./attributes":1347}],1354:[function(b,N,G){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot"),moduleType:"trace",name:"table",basePlotModule:b("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1347,"./base_plot":1348,"./calc":1349,"./defaults":1353,"./plot":1355}],1355:[function(b,N,G){function p(ja){return Math.ceil(ja.calcdata.maxLineWidth/2)}function n(ja,ma){return"clip"+
ja._fullLayout._uid+"_columnBoundaryClippath_"+ma.calcdata.key+"_"+ma.specIndex}function k(ja){return[].concat.apply([],ja.map(function(ma){return ma})).map(function(ma){return ma.__data__})}function m(ja,ma,ia){var oa=ja.selectAll("."+L.cn.scrollbarKit).data(Q.repeat,Q.keyFun);oa.enter().append("g").classed(L.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision");oa.each(function(ra){var la=ra.scrollbarState;var ka=ra.rowBlocks;ka=O(ka,ka.length-1)+(ka.length?I(ka[ka.length-1],Infinity):
1);la.totalHeight=ka;la.scrollableAreaHeight=ra.groupHeight-B(ra);la.currentlyVisibleHeight=Math.min(la.totalHeight,la.scrollableAreaHeight);la.ratio=la.currentlyVisibleHeight/la.totalHeight;la.barLength=Math.max(la.ratio*la.currentlyVisibleHeight,L.goldenRatio*L.scrollbarWidth);la.barWiggleRoom=la.currentlyVisibleHeight-la.barLength;la.wiggleRoom=Math.max(0,la.totalHeight-la.scrollableAreaHeight);la.topY=0===la.barWiggleRoom?0:ra.scrollY/la.wiggleRoom*la.barWiggleRoom;la.bottomY=la.topY+la.barLength;
la.dragMultiplier=la.wiggleRoom/la.barWiggleRoom}).attr("transform",function(ra){return T(ra.width+L.scrollbarWidth/2+L.scrollbarOffset,B(ra))});oa=oa.selectAll("."+L.cn.scrollbar).data(Q.repeat,Q.keyFun);oa.enter().append("g").classed(L.cn.scrollbar,!0);var xa=oa.selectAll("."+L.cn.scrollbarSlider).data(Q.repeat,Q.keyFun);xa.enter().append("g").classed(L.cn.scrollbarSlider,!0);xa.attr("transform",function(ra){return T(0,ra.scrollbarState.topY||0)});xa=xa.selectAll("."+L.cn.scrollbarGlyph).data(Q.repeat,
Q.keyFun);xa.enter().append("line").classed(L.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",L.scrollbarWidth).attr("stroke-linecap","round").attr("y1",L.scrollbarWidth/2);xa.attr("y2",function(ra){return ra.scrollbarState.barLength-L.scrollbarWidth/2}).attr("stroke-opacity",function(ra){return ra.columnDragInProgress||!ra.scrollbarState.barWiggleRoom||ia?0:.4});xa.transition().delay(0).duration(0);xa.transition().delay(L.scrollbarHideDelay).duration(L.scrollbarHideDuration).attr("stroke-opacity",
0);oa=oa.selectAll("."+L.cn.scrollbarCaptureZone).data(Q.repeat,Q.keyFun);oa.enter().append("line").classed(L.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",L.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(ra){var la=H.event.y,ka=this.getBoundingClientRect(),na=ra.scrollbarState;la-=ka.top;ka=H.scale.linear().domain([0,na.scrollableAreaHeight]).range([0,na.totalHeight]).clamp(!0);na.topY<=la&&la<=na.bottomY||
C(ma,ja,null,ka(la-na.barLength/2))(ra)}).call(H.behavior.drag().origin(function(ra){H.event.stopPropagation();ra.scrollbarState.scrollbarScrollInProgress=!0;return ra}).on("drag",C(ma,ja)).on("dragend",function(){}));oa.attr("y2",function(ra){return ra.scrollbarState.scrollableAreaHeight});ma._context.staticPlot&&(xa.remove(),oa.remove())}function a(ja,ma,ia,oa){ia=ia.selectAll("."+L.cn.columnCells).data(Q.repeat,Q.keyFun);ia.enter().append("g").classed(L.cn.columnCells,!0);ia.exit().remove();ia=
g(ia);c(ia);var xa=h(ia);e(xa);xa=l(ia);xa=r(xa);d(xa);f(xa,ma,oa,ja);K(ia)}function g(ja){ja=ja.selectAll("."+L.cn.columnCell).data(Y.splitToCells,function(ma){return ma.keyWithinBlock});ja.enter().append("g").classed(L.cn.columnCell,!0);ja.exit().remove();return ja}function h(ja){ja=ja.selectAll("."+L.cn.cellRect).data(Q.repeat,function(ma){return ma.keyWithinBlock});ja.enter().append("rect").classed(L.cn.cellRect,!0);return ja}function r(ja){ja=ja.selectAll("."+L.cn.cellText).data(Q.repeat,function(ma){return ma.keyWithinBlock});
ja.enter().append("text").classed(L.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){H.event.stopPropagation()});return ja}function l(ja){ja=ja.selectAll("."+L.cn.cellTextHolder).data(Q.repeat,function(ma){return ma.keyWithinBlock});ja.enter().append("g").classed(L.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision");return ja}function c(ja){ja.each(function(ma,ia){var oa=ma.calcdata.cells.font,xa=ma.column.specIndex;oa={size:t(oa.size,xa,ia),color:t(oa.color,
xa,ia),family:t(oa.family,xa,ia)};ma.rowNumber=ma.key;ma.align=t(ma.calcdata.cells.align,xa,ia);ma.cellBorderWidth=t(ma.calcdata.cells.line.width,xa,ia);ma.font=oa})}function d(ja){ja.each(function(ma){Z.font(H.select(this),ma.font)})}function e(ja){ja.attr("width",function(ma){return ma.column.columnWidth}).attr("stroke-width",function(ma){return ma.cellBorderWidth}).each(function(ma){var ia=H.select(this);ba.stroke(ia,t(ma.calcdata.cells.line.color,ma.column.specIndex,ma.rowNumber));ba.fill(ia,
t(ma.calcdata.cells.fill.color,ma.column.specIndex,ma.rowNumber))})}function f(ja,ma,ia,oa){ja.text(function(xa){var ra=xa.column.specIndex,la=xa.rowNumber,ka=xa.value,na="string"===typeof ka,qa=na&&ka.match(/<br>/i),ta=!na||qa;xa.mayHaveMarkup=na&&ka.match(/[<&>]/);ka="string"===typeof ka&&ka.match(L.latexCheck);na=(xa.latex=ka)?"":t(xa.calcdata.cells.prefix,ra,la)||"";var za=ka?"":t(xa.calcdata.cells.suffix,ra,la)||"";ra=ka?null:t(xa.calcdata.cells.format,ra,la)||null;ra=na+(ra?M(ra)(xa.value):
xa.value)+za;var Ia;xa.wrappingNeeded=!xa.wrapped&&!ta&&!ka&&(Ia=-1!==ra.indexOf(L.wrapSplitCharacter));xa.cellHeightMayIncrease=qa||ka||xa.mayHaveMarkup||(void 0===Ia?-1!==ra.indexOf(L.wrapSplitCharacter):Ia);xa.needsConvertToTspans=xa.mayHaveMarkup||xa.wrappingNeeded||xa.latex;xa.wrappingNeeded?(qa=(" "===L.wrapSplitCharacter?ra.replace(/<a href=/ig,"\x3ca_href\x3d"):ra).split(L.wrapSplitCharacter),qa=" "===L.wrapSplitCharacter?qa.map(function(Xa){return Xa.replace(/<a_href=/ig,"\x3ca href\x3d")}):
qa,xa.fragments=qa.map(function(Xa){return{text:Xa,width:null}}),xa.fragments.push({fragment:L.wrapSpacer,width:null}),xa=qa.join(L.lineBreaker)+L.lineBreaker+L.wrapSpacer):(delete xa.fragments,xa=ra);return xa}).attr("dy",function(xa){return xa.needsConvertToTspans?0:"0.75em"}).each(function(xa){var ra=H.select(this),la=xa.wrappingNeeded?y:F;xa.needsConvertToTspans?ca.convertToTspans(ra,oa,la(ia,this,ma,oa,xa)):H.select(this.parentNode).attr("transform",function(ka){return T(J(ka),L.cellPad)}).attr("text-anchor",
function(ka){return{left:"start",center:"middle",right:"end"}[ka.align]})})}function q(ja,ma,ia){var oa=ma.gdColumnsOriginalOrder;ma.gdColumns.sort(function(xa,ra){return ia[oa.indexOf(xa)]-ia[oa.indexOf(ra)]});ma.columnorder=ia;ja.emit("plotly_restyle")}function t(ja,ma,ia){return Array.isArray(ja)?(ja=ja[Math.min(ma,ja.length-1)],Array.isArray(ja)?ja[Math.min(ia,ja.length-1)]:ja):ja}function w(ja,ma,ia){ja.transition().ease(L.releaseTransitionEase).duration(L.releaseTransitionDuration).attr("transform",
T(ma.x,ia))}function x(ja){return"cells"===ja.type}function z(ja){return"header"===ja.type}function B(ja){return(ja.rowBlocks.length?ja.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(ma,ia){return ma+I(ia,Infinity)},0)}function A(ja,ma,ia){for(var oa=[],xa=0,ra=0;ra<ja.length;ra++){for(var la=ja[ra],ka=la.rows,na=0,qa=0;qa<ka.length;qa++)na+=ka[qa].rowHeight;la.allRowsHeight=na;la=ma;ka=la+ia;la<xa+na&&ka>xa&&oa.push(ra);xa+=na}return oa}function D(ja,ma,ia){var oa=k(ma)[0];if(void 0!==oa){var xa=
oa.rowBlocks,ra=oa.calcdata,la=O(xa,xa.length),ka=oa.calcdata.groupHeight-B(oa),na=ra.scrollY=Math.max(0,Math.min(la-ka,ra.scrollY)),qa=A(xa,na,ka);1===qa.length&&(qa[0]===xa.length-1?qa.unshift(qa[0]-1):qa.push(qa[0]+1));qa[0]%2&&qa.reverse();ma.each(function(ta,za){ta.page=qa[za];ta.scrollY=na});ma.attr("transform",function(ta){ta=O(ta.rowBlocks,ta.page)-ta.scrollY;return T(0,ta)});ja&&(v(ja,ia,ma,qa,oa.prevPages,oa,0),v(ja,ia,ma,qa,oa.prevPages,oa,1),m(ia,ja))}}function C(ja,ma,ia,oa){return function(xa){var ra=
xa.calcdata?xa.calcdata:xa;xa=ma.filter(function(na){return ra.key===na.key});var la=ia||ra.scrollbarState.dragMultiplier,ka=ra.scrollY;ra.scrollY=void 0===oa?ra.scrollY+la*H.event.dy:oa;la=xa.selectAll("."+L.cn.yColumn).selectAll("."+L.cn.columnBlock).filter(x);D(ja,la,xa);return ra.scrollY===ka}}function v(ja,ma,ia,oa,xa,ra,la){oa[la]!==xa[la]&&(clearTimeout(ra.currentRepaint[la]),ra.currentRepaint[la]=setTimeout(function(){var ka=ia.filter(function(na,qa){return qa===la&&oa[qa]!==xa[qa]});a(ja,
ma,ka,ia);xa[la]=oa[la]}))}function y(ja,ma,ia,oa){return function(){var xa=H.select(ma.parentNode);xa.each(function(ra){var la=ra.fragments;xa.selectAll("tspan.line").each(function($a,gb){la[gb].width=this.getComputedTextLength()});var ka=la[la.length-1].width,na=la.slice(0,-1),qa=[],ta=0,za=ra.column.columnWidth-2*L.cellPad;for(ra.value="";na.length;){var Ia=na.shift();var Xa=Ia.width+ka;ta+Xa>za&&(ra.value+=qa.join(L.wrapSpacer)+L.lineBreaker,qa=[],ta=0);qa.push(Ia.text);ta+=Xa}ta&&(ra.value+=
qa.join(L.wrapSpacer));ra.wrapped=!0});xa.selectAll("tspan.line").remove();f(xa.select("."+L.cn.cellText),ia,ja,oa);H.select(ma.parentNode.parentNode).call(K)}}function F(ja,ma,ia,oa,xa){return function(){if(!xa.settledY){var ra=H.select(ma.parentNode),la=xa.rowBlocks[xa.page],ka=xa.key-la.firstRowIndex,na=la.rows[ka].rowHeight,qa=xa.cellHeightMayIncrease?ma.parentNode.getBoundingClientRect().height+2*L.cellPad:na;na=Math.max(qa,na);na-la.rows[ka].rowHeight&&(la.rows[ka].rowHeight=na,ja.selectAll("."+
L.cn.columnCell).call(K),D(null,ja.filter(x),0),m(ia,oa,!0));ra.attr("transform",function(){var ta=this.parentNode.getBoundingClientRect(),za=H.select(this.parentNode).select("."+L.cn.cellRect).node().getBoundingClientRect(),Ia=this.transform.baseVal.consolidate();ta=za.top-ta.top+(Ia?Ia.matrix.f:L.cellPad);return T(J(xa,H.select(this.parentNode).select("."+L.cn.cellTextHolder).node().getBoundingClientRect().width),ta)});xa.settledY=!0}}}function J(ja,ma){switch(ja.align){case "left":return L.cellPad;
case "right":return ja.column.columnWidth-(ma||0)-L.cellPad;case "center":return(ja.column.columnWidth-(ma||0))/2;default:return L.cellPad}}function K(ja){ja.attr("transform",function(ma){var ia=ma.rowBlocks[0].auxiliaryBlocks.reduce(function(oa,xa){return oa+I(xa,Infinity)},0);ma=I(ma.rowBlocks[ma.page],ma.key);return T(0,ma+ia)}).selectAll("."+L.cn.cellRect).attr("height",function(ma){var ia=ma.rowBlocks[ma.page];return ia.rows[ma.key-ia.firstRowIndex].rowHeight})}function O(ja,ma){var ia=0;for(--ma;0<=
ma;ma--){var oa=ja[ma];var xa=oa.allRowsHeight;if(void 0!==xa)oa=xa;else{for(var ra=xa=0;ra<oa.rows.length;ra++)xa+=oa.rows[ra].rowHeight;oa=oa.allRowsHeight=xa}ia+=oa}return ia}function I(ja,ma){for(var ia=0,oa=0;oa<ja.rows.length&&ja.rows[oa].rowIndex<ma;oa++)ia+=ja.rows[oa].rowHeight;return ia}var L=b("./constants"),H=b("@plotly/d3"),M=b("../../lib").numberFormat,Q=b("../../lib/gup"),Z=b("../../components/drawing"),ca=b("../../lib/svg_text_utils"),W=b("../../lib").raiseToTop,T=b("../../lib").strTranslate,
U=b("../../lib").cancelTransition,ha=b("./data_preparation_helper"),Y=b("./data_split_helpers"),ba=b("../../components/color");N.exports=function(ja,ma){var ia=!ja._context.staticPlot;ma=ja._fullLayout._paper.selectAll("."+L.cn.table).data(ma.map(function(ka){ka=Q.unwrap(ka).trace;return ha(ja,ka)}),Q.keyFun);ma.exit().remove();ma.enter().append("g").classed(L.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering",
"crispEdges").style("pointer-events","all");ma.attr("width",function(ka){return ka.width+ka.size.l+ka.size.r}).attr("height",function(ka){return ka.height+ka.size.t+ka.size.b}).attr("transform",function(ka){return T(ka.translateX,ka.translateY)});var oa=ma.selectAll("."+L.cn.tableControlView).data(Q.repeat,Q.keyFun);ma=oa.enter().append("g").classed(L.cn.tableControlView,!0).style("box-sizing","content-box");if(ia){var xa="onwheel"in document?"wheel":"mousewheel";ma.on("mousemove",function(ka){oa.filter(function(na){return ka===
na}).call(m,ja)}).on(xa,function(ka){ka.scrollbarState.wheeling||(ka.scrollbarState.wheeling=!0,C(ja,oa,null,ka.scrollY+H.event.deltaY)(ka)||(H.event.stopPropagation(),H.event.preventDefault()),ka.scrollbarState.wheeling=!1)}).call(m,ja,!0)}oa.attr("transform",function(ka){return T(ka.size.l,ka.size.t)});ma=oa.selectAll("."+L.cn.scrollBackground).data(Q.repeat,Q.keyFun);ma.enter().append("rect").classed(L.cn.scrollBackground,!0).attr("fill","none");ma.attr("width",function(ka){return ka.width}).attr("height",
function(ka){return ka.height});oa.each(function(ka){Z.setClipUrl(H.select(this),"clip"+ja._fullLayout._uid+"_scrollAreaBottomClip_"+ka.key,ja)});var ra=oa.selectAll("."+L.cn.yColumn).data(function(ka){return ka.columns},Q.keyFun);ra.enter().append("g").classed(L.cn.yColumn,!0);ra.exit().remove();ra.attr("transform",function(ka){return T(ka.x,0)});ia&&ra.call(H.behavior.drag().origin(function(ka){var na=H.select(this);w(na,ka,-L.uplift);W(this);ka.calcdata.columnDragInProgress=!0;m(oa.filter(function(qa){return ka.calcdata.key===
qa.key}),ja);return ka}).on("drag",function(ka){var na=H.select(this);ka.x=Math.max(-L.overdrag,Math.min(ka.calcdata.width+L.overdrag-ka.columnWidth,H.event.x));k(ra).filter(function(qa){return qa.calcdata.key===ka.calcdata.key}).sort(function(qa,ta){return(ka===qa?H.event.x:qa.x)+qa.columnWidth/2-((ka===ta?H.event.x:ta.x)+ta.columnWidth/2)}).forEach(function(qa,ta){qa.xIndex=ta;qa.x=ka===qa?qa.x:qa.xScale(qa)});ra.filter(function(qa){return ka!==qa}).transition().ease(L.transitionEase).duration(L.transitionDuration).attr("transform",
function(qa){return T(qa.x,0)});na.call(U).attr("transform",T(ka.x,-L.uplift))}).on("dragend",function(ka){var na=H.select(this),qa=ka.calcdata;ka.x=ka.xScale(ka);ka.calcdata.columnDragInProgress=!1;w(na,ka,0);q(ja,qa,qa.columns.map(function(ta){return ta.xIndex}))}));ra.each(function(ka){Z.setClipUrl(H.select(this),n(ja,ka),ja)});xa=ra.selectAll("."+L.cn.columnBlock).data(Y.splitToPanels,Q.keyFun);xa.enter().append("g").classed(L.cn.columnBlock,!0).attr("id",function(ka){return ka.key});xa.style("cursor",
function(ka){return ka.dragHandle?"ew-resize":ka.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var la=xa.filter(z);ma=xa.filter(x);ia&&ma.call(H.behavior.drag().origin(function(ka){H.event.stopPropagation();return ka}).on("drag",C(ja,oa,-1)).on("dragend",function(){}));a(ja,oa,la,xa);a(ja,oa,ma,xa);ia=oa.selectAll("."+L.cn.scrollAreaClip).data(Q.repeat,Q.keyFun);ia.enter().append("clipPath").classed(L.cn.scrollAreaClip,!0).attr("id",function(ka){return"clip"+ja._fullLayout._uid+"_scrollAreaBottomClip_"+
ka.key});ia=ia.selectAll("."+L.cn.scrollAreaClipRect).data(Q.repeat,Q.keyFun);ia.enter().append("rect").classed(L.cn.scrollAreaClipRect,!0).attr("x",-L.overdrag).attr("y",-L.uplift).attr("fill","none");ia.attr("width",function(ka){return ka.width+2*L.overdrag}).attr("height",function(ka){return ka.height+L.uplift});ra.selectAll("."+L.cn.columnBoundary).data(Q.repeat,Q.keyFun).enter().append("g").classed(L.cn.columnBoundary,!0);ia=ra.selectAll("."+L.cn.columnBoundaryClippath).data(Q.repeat,Q.keyFun);
ia.enter().append("clipPath").classed(L.cn.columnBoundaryClippath,!0);ia.attr("id",function(ka){return n(ja,ka)});ia=ia.selectAll("."+L.cn.columnBoundaryRect).data(Q.repeat,Q.keyFun);ia.enter().append("rect").classed(L.cn.columnBoundaryRect,!0).attr("fill","none");ia.attr("width",function(ka){return ka.columnWidth+2*p(ka)}).attr("height",function(ka){return ka.calcdata.height+2*p(ka)+L.uplift}).attr("x",function(ka){return-p(ka)}).attr("y",function(ka){return-p(ka)});D(null,ma,oa)}},{"../../components/color":666,
"../../components/drawing":688,"../../lib":803,"../../lib/gup":800,"../../lib/svg_text_utils":829,"./constants":1350,"./data_preparation_helper":1351,"./data_split_helpers":1352,"@plotly/d3":58}],1356:[function(b,N,G){G=b("../../plots/template_attributes").hovertemplateAttrs;var p=b("../../plots/template_attributes").texttemplateAttrs,n=b("../../components/colorscale/attributes"),k=b("../../plots/domain").attributes,m=b("../pie/attributes"),a=b("../sunburst/attributes"),g=b("./constants");b=b("../../lib/extend").extendFlat;
N.exports={labels:a.labels,parents:a.parents,values:a.values,branchvalues:a.branchvalues,count:a.count,level:a.level,maxdepth:a.maxdepth,tiling:{packing:{valType:"enumerated",values:"squarify binary dice slice slice-dice dice-slice".split(" "),dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:b({pad:{t:{valType:"number",
min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:a.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:a.marker.line,editType:"calc"},n("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",
values:["\x3e","\x3c","|","/","\\"],dflt:"\x3e",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:b({},m.textfont,{}),editType:"calc"},text:m.text,textinfo:a.textinfo,texttemplate:p({editType:"plot"},{keys:g.eventDataKeys.concat(["label","value"])}),hovertext:m.hovertext,hoverinfo:a.hoverinfo,hovertemplate:G({},{keys:g.eventDataKeys}),textfont:m.textfont,insidetextfont:m.insidetextfont,outsidetextfont:b({},m.outsidetextfont,{}),textposition:{valType:"enumerated",values:"top left;top center;top right;middle left;middle center;middle right;bottom left;bottom center;bottom right".split(";"),
dflt:"top left",editType:"plot"},sort:m.sort,root:a.root,domain:k({name:"treemap",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plots/domain":882,"../../plots/template_attributes":926,"../pie/attributes":1192,"../sunburst/attributes":1330,"./constants":1359}],1357:[function(b,N,G){var p=b("../../plots/plots");G.name="treemap";G.plot=function(n,k,m,a){p.plotBasePlot(G.name,n,k,m,a)};G.clean=function(n,k,m,a){p.cleanBasePlot(G.name,n,k,m,a)}},
{"../../plots/plots":917}],1358:[function(b,N,G){var p=b("../sunburst/calc");G.calc=function(n,k){return p.calc(n,k)};G.crossTraceCalc=function(n){return p._runCrossTraceCalc("treemap",n)}},{"../sunburst/calc":1332}],1359:[function(b,N,G){N.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:"currentPath root entry percentRoot percentEntry percentParent".split(" "),gapWithPathbar:1}},{}],1360:[function(b,N,G){var p=b("../../lib"),n=b("./attributes"),k=b("../../components/color"),
m=b("../../plots/domain").defaults,a=b("../bar/defaults").handleText,g=b("../bar/constants").TEXTPAD;b=b("../../components/colorscale");var h=b.hasColorscale,r=b.handleDefaults;N.exports=function(l,c,d,e){function f(w,x){return p.coerce(l,c,n,w,x)}d=f("labels");var q=f("parents");if(d&&d.length&&q&&q.length){(d=f("values"))&&d.length?f("branchvalues"):f("count");f("level");f("maxdepth");"squarify"===f("tiling.packing")&&f("tiling.squarifyratio");f("tiling.flip");f("tiling.pad");d=f("text");f("texttemplate");
c.texttemplate||f("textinfo",Array.isArray(d)?"text+label":"label");f("hovertext");f("hovertemplate");d=f("pathbar.visible");a(l,c,e,f,"auto",{hasPathbar:d,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});f("textposition");q=-1!==c.textposition.indexOf("bottom");f("marker.line.width")&&f("marker.line.color",e.paper_bgcolor);var t=f("marker.colors");(c._hasColorscale=h(l,"marker","colors")||(l.marker||{}).coloraxis)?
r(l,c,e,f,{prefix:"marker.",cLetter:"c"}):f("marker.depthfade",!(t||[]).length);t=2*c.textfont.size;f("marker.pad.t",q?t/4:t);f("marker.pad.l",t/4);f("marker.pad.r",t/4);f("marker.pad.b",q?t:t/4);c._hovered={marker:{line:{width:2,color:k.contrast(e.paper_bgcolor)}}};d&&(f("pathbar.thickness",c.pathbar.textfont.size+2*g),f("pathbar.side"),f("pathbar.edgeshape"));f("sort");f("root.color");m(c,e,f);c._length=null}else c.visible=!1}},{"../../components/color":666,"../../components/colorscale":678,"../../lib":803,
"../../plots/domain":882,"../bar/constants":943,"../bar/defaults":945,"./attributes":1356}],1361:[function(b,N,G){var p=b("@plotly/d3"),n=b("../sunburst/helpers"),k=b("../bar/uniform_text").clearMinTextSize,m=b("../bar/style").resizeText,a=b("./plot_one");N.exports=function(g,h,r,l,c){var d=c.type,e=c.drawDescendants;c=g._fullLayout;var f=c["_"+d+"layer"],q,t=!r;k(d,c);h=f.selectAll("g.trace."+d).data(h,function(w){return w[0].trace.uid});h.enter().append("g").classed("trace",!0).classed(d,!0);h.order();
!c.uniformtext.mode&&n.hasTransition(r)?(l&&(q=l()),p.transition().duration(r.duration).ease(r.easing).each("end",function(){q&&q()}).each("interrupt",function(){q&&q()}).each(function(){f.selectAll("g.trace").each(function(w){a(g,w,this,r,e)})})):(h.each(function(w){a(g,w,this,r,e)}),c.uniformtext.mode&&m(g,f.selectAll(".trace"),d));t&&h.exit().remove()}},{"../bar/style":955,"../bar/uniform_text":957,"../sunburst/helpers":1336,"./plot_one":1370,"@plotly/d3":58}],1362:[function(b,N,G){var p=b("@plotly/d3"),
n=b("../../lib"),k=b("../../components/drawing"),m=b("../../lib/svg_text_utils"),a=b("./partition"),g=b("./style").styleOne,h=b("./constants"),r=b("../sunburst/helpers"),l=b("../sunburst/fx");N.exports=function(c,d,e,f,q){var t=q.barDifY,w=q.width,x=q.height,z=q.viewX,B=q.viewY,A=q.pathSlice,D=q.toMoveInsideSlice,C=q.strTransform,v=q.hasTransition,y=q.handleSlicesExit,F=q.makeUpdateSliceInterpolator,J=q.makeUpdateTextInterpolator,K={},O=c._fullLayout;q=d[0];var I=q.trace;q=q.hierarchy;var L=w/I._entryDepth,
H=r.listPath(e.data,"id");q=a(q.copy(),[w,x],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();q=q.filter(function(M){var Q=H.indexOf(M.data.id);if(-1===Q)return!1;M.x0=L*Q;M.x1=L*(Q+1);M.y0=t;M.y1=t+x;return M.onPathbar=!0});q.reverse();f=f.data(q,r.getPtId);f.enter().append("g").classed("pathbar",!0);y(f,!0,K,[w,x],A);f.order();v&&(f=f.transition().each("end",function(){var M=p.select(this);r.setSliceCursor(M,c,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})}));f.each(function(M){M._hoverX=
z(M.x1-Math.min(w,x)/2);M._hoverY=B(M.y1-x/2);var Q=p.select(this),Z=n.ensureSingle(Q,"path","surface",function(ca){ca.style("pointer-events","all")});v?Z.transition().attrTween("d",function(ca){var W=F(ca,!0,K,[w,x]);return function(T){return A(W(T))}}):Z.attr("d",A);Q.call(l,e,c,d,{styleOne:g,eventDataKeys:h.eventDataKeys,transitionTime:h.CLICK_TRANSITION_TIME,transitionEasing:h.CLICK_TRANSITION_EASING}).call(r.setSliceCursor,c,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:c._transitioning});Z.call(g,
M,I,{hovered:!1});M._text=(r.getPtLabel(M)||"").split("\x3cbr\x3e").join(" ")||"";Q=n.ensureSingle(Q,"g","slicetext");Q=n.ensureSingle(Q,"text","",function(ca){ca.attr("data-notex",1)});Z=n.ensureUniformFontSize(c,r.determineTextFont(I,M,O.font,{onPathbar:!0}));Q.text(M._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(k.font,Z).call(m.convertToTspans,c);M.textBB=k.bBox(Q.node());M.transform=D(M,{fontSize:Z.size,onPathbar:!0});M.transform.fontSize=Z.size;v?Q.transition().attrTween("transform",
function(ca){var W=J(ca,!0,K,[w,x]);return function(T){return C(W(T))}}):Q.attr("transform",C(M))})}},{"../../components/drawing":688,"../../lib":803,"../../lib/svg_text_utils":829,"../sunburst/fx":1335,"../sunburst/helpers":1336,"./constants":1359,"./partition":1368,"./style":1371,"@plotly/d3":58}],1363:[function(b,N,G){var p=b("@plotly/d3"),n=b("../../lib"),k=b("../../components/drawing"),m=b("../../lib/svg_text_utils"),a=b("./partition"),g=b("./style").styleOne,h=b("./constants"),r=b("../sunburst/helpers"),
l=b("../sunburst/fx"),c=b("../sunburst/plot").formatSliceLabel;N.exports=function(d,e,f,q,t){var w=t.width,x=t.height,z=t.viewX,B=t.viewY,A=t.pathSlice,D=t.toMoveInsideSlice,C=t.strTransform,v=t.hasTransition,y=t.handleSlicesExit,F=t.makeUpdateSliceInterpolator,J=t.makeUpdateTextInterpolator;t=t.prevEntry;var K=d._fullLayout,O=e[0].trace,I=-1!==O.textposition.indexOf("left"),L=-1!==O.textposition.indexOf("right"),H=-1!==O.textposition.indexOf("bottom"),M=!H&&!O.marker.pad.t||H&&!O.marker.pad.b,Q=
a(f,[w,x],{packing:O.tiling.packing,squarifyratio:O.tiling.squarifyratio,flipX:-1<O.tiling.flip.indexOf("x"),flipY:-1<O.tiling.flip.indexOf("y"),pad:{inner:O.tiling.pad,top:O.marker.pad.t,left:O.marker.pad.l,right:O.marker.pad.r,bottom:O.marker.pad.b}}).descendants(),Z=Infinity,ca=-Infinity;Q.forEach(function(U){var ha=U.depth;ha>=O._maxDepth?(U.x0=U.x1=(U.x0+U.x1)/2,U.y0=U.y1=(U.y0+U.y1)/2):(Z=Math.min(Z,ha),ca=Math.max(ca,ha))});q=q.data(Q,r.getPtId);O._maxVisibleLayers=isFinite(ca)?ca-Z+1:0;q.enter().append("g").classed("slice",
!0);y(q,!1,{},[w,x],A);q.order();var W=null;if(v&&t){var T=r.getPtId(t);q.each(function(U){null===W&&r.getPtId(U)===T&&(W={x0:U.x0,x1:U.x1,y0:U.y0,y1:U.y1})})}v&&(q=q.transition().each("end",function(){var U=p.select(this);r.setSliceCursor(U,d,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})}));q.each(function(U){var ha=r.isHeader(U,O);U._hoverX=z(U.x1-O.marker.pad.r);U._hoverY=H?B(U.y1-O.marker.pad.b/2):B(U.y0+O.marker.pad.t/2);var Y=p.select(this),ba=n.ensureSingle(Y,"path","surface",function(ja){ja.style("pointer-events",
"all")});v?ba.transition().attrTween("d",function(ja){var ma=F(ja,!1,W||{x0:0,x1:w,y0:0,y1:x},[w,x]);return function(ia){return A(ma(ia))}}):ba.attr("d",A);Y.call(l,f,d,e,{styleOne:g,eventDataKeys:h.eventDataKeys,transitionTime:h.CLICK_TRANSITION_TIME,transitionEasing:h.CLICK_TRANSITION_EASING}).call(r.setSliceCursor,d,{isTransitioning:d._transitioning});ba.call(g,U,O,{hovered:!1});U._text=U.x0===U.x1||U.y0===U.y1?"":ha?M?"":r.getPtLabel(U)||"":c(U,f,O,e,K)||"";Y=n.ensureSingle(Y,"g","slicetext");
Y=n.ensureSingle(Y,"text","",function(ja){ja.attr("data-notex",1)});ba=n.ensureUniformFontSize(d,r.determineTextFont(O,U,K.font));Y.text(U._text||" ").classed("slicetext",!0).attr("text-anchor",L?"end":I||ha?"start":"middle").call(k.font,ba).call(m.convertToTspans,d);U.textBB=k.bBox(Y.node());U.transform=D(U,{fontSize:ba.size,isHeader:ha});U.transform.fontSize=ba.size;v?Y.transition().attrTween("transform",function(ja){var ma=J(ja,!1,W||{x0:0,x1:w,y0:0,y1:x},[w,x]);return function(ia){return C(ma(ia))}}):
Y.attr("transform",C(U))});return W}},{"../../components/drawing":688,"../../lib":803,"../../lib/svg_text_utils":829,"../sunburst/fx":1335,"../sunburst/helpers":1336,"../sunburst/plot":1340,"./constants":1359,"./partition":1368,"./style":1371,"@plotly/d3":58}],1364:[function(b,N,G){N.exports=function a(n,k,m){if(m.swapXY){var g=n.x0;n.x0=n.y0;n.y0=g;g=n.x1;n.x1=n.y1;n.y1=g}m.flipX&&(g=n.x0,n.x0=k[0]-n.x1,n.x1=k[0]-g);m.flipY&&(g=n.y0,n.y0=k[1]-n.y1,n.y1=k[1]-g);if(n=n.children)for(g=0;g<n.length;g++)a(n[g],
k,m)}},{}],1365:[function(b,N,G){N.exports={moduleType:"trace",name:"treemap",basePlotModule:b("./base_plot"),categories:[],animatable:!0,attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults"),supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc").calc,crossTraceCalc:b("./calc").crossTraceCalc,plot:b("./plot"),style:b("./style").style,colorbar:b("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":1236,"./attributes":1356,"./base_plot":1357,
"./calc":1358,"./defaults":1360,"./layout_attributes":1366,"./layout_defaults":1367,"./plot":1369,"./style":1371}],1366:[function(b,N,G){N.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1367:[function(b,N,G){var p=b("../../lib"),n=b("./layout_attributes");N.exports=function(k,m){p.coerce(k,m,n,"treemapcolorway",m.colorway);p.coerce(k,m,n,"extendtreemapcolors",void 0)}},{"../../lib":803,"./layout_attributes":1366}],
1368:[function(b,N,G){function p(m,a){switch(m){case "squarify":return n.treemapSquarify.ratio(a);case "binary":return n.treemapBinary;case "dice":return n.treemapDice;case "slice":return n.treemapSlice;default:return n.treemapSliceDice}}var n=b("d3-hierarchy"),k=b("./flip_tree");N.exports=function(m,a,g){var h=g.flipX,r=g.flipY,l="dice-slice"===g.packing,c=g.pad[r?"bottom":"top"],d=g.pad[h?"right":"left"],e=g.pad[h?"left":"right"],f=g.pad[r?"top":"bottom"];if(l){var q=d;d=c;c=q;q=e;e=f;f=q}m=n.treemap().tile(p(g.packing,
g.squarifyratio)).paddingInner(g.pad.inner).paddingLeft(d).paddingRight(e).paddingTop(c).paddingBottom(f).size(l?[a[1],a[0]]:a)(m);(l||h||r)&&k(m,a,{swapXY:l,flipX:h,flipY:r});return m}},{"./flip_tree":1364,"d3-hierarchy":170}],1369:[function(b,N,G){var p=b("./draw"),n=b("./draw_descendants");N.exports=function(k,m,a,g){return p(k,m,a,g,{type:"treemap",drawDescendants:n})}},{"./draw":1361,"./draw_descendants":1363}],1370:[function(b,N,G){function p(d){return m.isHierarchyRoot(d)?"":m.getPtId(d)}var n=
b("@plotly/d3"),k=b("d3-interpolate").interpolate,m=b("../sunburst/helpers"),a=b("../../lib"),g=b("../bar/constants").TEXTPAD,h=b("../bar/plot").toMoveInsideBar,r=b("../bar/uniform_text").recordMinTextSize,l=b("./constants"),c=b("./draw_ancestors");N.exports=function(d,e,f,q,t){var w=d._fullLayout,x=e[0],z=x.trace,B="icicle"===z.type,A=x.hierarchy,D=m.findEntryWithLevel(A,z.level),C=n.select(f);f=C.selectAll("g.pathbar");C=C.selectAll("g.slice");if(D){var v=m.isHierarchyRoot(D),y=!w.uniformtext.mode&&
m.hasTransition(q),F=m.getMaxDepth(z),J=w._size,K=z.domain,O=J.w*(K.x[1]-K.x[0]);q=J.h*(K.y[1]-K.y[0]);var I=z.pathbar.thickness,L=z.marker.line.width+l.gapWithPathbar;L=z.pathbar.visible?-1<z.pathbar.side.indexOf("bottom")?q+L:-(I+L):0;var H={x0:O,x1:O,y0:L,y1:L+I},M=function(qa,ta,za){var Ia=z.tiling.pad;return qa.x0===ta.x0&&qa.x1===ta.x1&&qa.y0===ta.y0&&qa.y1===ta.y1?{x0:qa.x0,x1:qa.x1,y0:qa.y0,y1:qa.y1}:{x0:qa.x0-Ia-Ia<=ta.x0?0:qa.x0-Ia+Ia>=ta.x1?za[0]:qa.x0,x1:qa.x1+Ia-Ia<=ta.x0?0:qa.x1+Ia+
Ia>=ta.x1?za[0]:qa.x1,y0:qa.y0-Ia-Ia<=ta.y0?0:qa.y0-Ia+Ia>=ta.y1?za[1]:qa.y0,y1:qa.y1+Ia-Ia<=ta.y0?0:qa.y1+Ia+Ia>=ta.y1?za[1]:qa.y1}},Q=null,Z={},ca={},W=null,T=function(qa,ta){return ta?Z[p(qa)]:ca[p(qa)]};x.hasMultipleRoots&&v&&F++;z._maxDepth=F;z._backgroundColor=w.paper_bgcolor;z._entryDepth=D.data.depth;z._atRootLevel=v;var U=-O/2+J.l+J.w*(K.x[1]+K.x[0])/2,ha=-q/2+J.t+J.h*(1-(K.y[1]+K.y[0])/2),Y=ha+0,ba=U+0;x=function(qa){return ba+qa};v=function(qa){return Y+qa};var ja=ba+0,ma=function(qa){qa.x=
Math.max(ja,qa.x)},ia=z.pathbar.edgeshape;J=function(qa){var ta=ba+Math.max(Math.min(qa.x0,qa.x0),0),za=ba+Math.min(Math.max(qa.x1,qa.x1),O),Ia=Y+qa.y0,Xa=Y+qa.y1;qa=I/2;var $a={},gb={};$a.x=ta;gb.x=za;$a.y=gb.y=(Ia+Xa)/2;var sb={x:ta,y:Ia};Ia={x:za,y:Ia};za={x:za,y:Xa};ta={x:ta,y:Xa};"\x3e"===ia?(sb.x-=qa,Ia.x-=qa,za.x-=qa,ta.x-=qa):"/"===ia?(za.x-=qa,ta.x-=qa,$a.x-=qa/2,gb.x-=qa/2):"\\"===ia?(sb.x-=qa,Ia.x-=qa,$a.x-=qa/2,gb.x-=qa/2):"\x3c"===ia&&($a.x-=qa,gb.x-=qa);ma(sb);ma(ta);ma($a);ma(Ia);ma(za);
ma(gb);return"M"+(sb.x+","+sb.y)+"L"+(Ia.x+","+Ia.y)+"L"+(gb.x+","+gb.y)+"L"+(za.x+","+za.y)+"L"+(ta.x+","+ta.y)+"L"+($a.x+","+$a.y)+"Z"};var oa=function(qa,ta){var za=qa.x0,Ia=qa.x1,Xa=qa.y0,$a=qa.y1;qa=qa.textBB;var gb=function(Bb){return-1!==z.textposition.indexOf(Bb)},sb=gb("bottom"),jb=gb("top")||ta.isHeader&&!sb?"start":sb?"end":"middle",vb=gb("right");gb=gb("left")||ta.onPathbar;var qb=z[B?"tiling":"marker"].pad;ta.isHeader&&(za+=(B?qb:qb.l)-g,Ia-=(B?qb:qb.r)-g,za>=Ia&&(za=Ia=(za+Ia)/2),sb?
(sb=$a-(B?qb:qb.b),Xa<sb&&sb<$a&&(Xa=sb)):(sb=Xa+(B?qb:qb.t),Xa<sb&&sb<$a&&($a=sb)));qa=h(za,Ia,Xa,$a,qa,{isHorizontal:!1,constrained:!0,angle:0,anchor:jb,leftToRight:gb?-1:vb?1:0});qa.fontSize=ta.fontSize;qa.targetX=U+qa.targetX;qa.targetY=ha+qa.targetY;if(isNaN(qa.targetX)||isNaN(qa.targetY))return{};za!==Ia&&Xa!==$a&&r(z.type,qa,w);return{scale:qa.scale,rotate:qa.rotate,textX:qa.textX,textY:qa.textY,anchorX:qa.anchorX,anchorY:qa.anchorY,targetX:qa.targetX,targetY:qa.targetY}},xa=function(qa,ta){for(var za,
Ia=0;!za&&Ia<F;)Ia++,(qa=qa.parent)?za=T(qa,ta):Ia=F;return za||{}},ra=function(qa,ta,za,Ia){za=T(qa,ta);qa=ta?H:(ta=T(D,ta))?M(qa,ta,Ia):{};return k(za,qa)};K=function(qa,ta,za,Ia,Xa){var $a=T(qa,ta);$a?Ia=$a:ta?Ia=H:Q?qa.parent?(Xa=W||za)&&!ta?Ia=M(qa,Xa,Ia):(Ia={},a.extendFlat(Ia,xa(qa,ta))):(Ia=a.extendFlat({},qa),B&&("h"===Xa.orientation?Xa.flipX?Ia.x0=qa.x1:Ia.x1=0:Xa.flipY?Ia.y0=qa.y1:Ia.y1=0)):Ia={};return k(Ia,{x0:qa.x0,x1:qa.x1,y0:qa.y0,y1:qa.y1})};var la=function(qa,ta,za,Ia){var Xa=T(qa,
ta),$a={};ta?Ia=Z[p(A)]||H:(za=ca[z.level]||za,Ia=qa.data.depth-D.data.depth<F?M(qa,za,Ia):{});a.extendFlat($a,{transform:oa({x0:Ia.x0,x1:Ia.x1,y0:Ia.y0,y1:Ia.y1,textBB:qa.textBB,_text:qa._text},{isHeader:m.isHeader(qa,z)})});Xa?$a=Xa:qa.parent&&a.extendFlat($a,xa(qa,ta));ta=qa.transform;qa.x0!==qa.x1&&qa.y0!==qa.y1&&r(z.type,ta,w);return k($a,{transform:{scale:ta.scale,rotate:ta.rotate,textX:ta.textX,textY:ta.textY,anchorX:ta.anchorX,anchorY:ta.anchorY,targetX:ta.targetX,targetY:ta.targetY}})},ka=
function(qa,ta,za,Ia,Xa){var $a=Ia[0],gb=Ia[1];y?qa.exit().transition().each(function(){var sb=n.select(this);sb.select("path.surface").transition().attrTween("d",function(jb){var vb=ra(jb,ta,za,[$a,gb]);return function(qb){return Xa(vb(qb))}});sb.select("g.slicetext").attr("opacity",0)}).remove():qa.exit().remove()},na=function(qa){var ta=qa.transform;qa.x0!==qa.x1&&qa.y0!==qa.y1&&r(z.type,ta,w);return a.getTextTransform({textX:ta.textX,textY:ta.textY,anchorX:ta.anchorX,anchorY:ta.anchorY,targetX:ta.targetX,
targetY:ta.targetY,scale:ta.scale,rotate:ta.rotate})};y&&(f.each(function(qa){Z[p(qa)]={x0:qa.x0,x1:qa.x1,y0:qa.y0,y1:qa.y1};qa.transform&&(Z[p(qa)].transform={textX:qa.transform.textX,textY:qa.transform.textY,anchorX:qa.transform.anchorX,anchorY:qa.transform.anchorY,targetX:qa.transform.targetX,targetY:qa.transform.targetY,scale:qa.transform.scale,rotate:qa.transform.rotate})}),C.each(function(qa){ca[p(qa)]={x0:qa.x0,x1:qa.x1,y0:qa.y0,y1:qa.y1};qa.transform&&(ca[p(qa)].transform={textX:qa.transform.textX,
textY:qa.transform.textY,anchorX:qa.transform.anchorX,anchorY:qa.transform.anchorY,targetX:qa.transform.targetX,targetY:qa.transform.targetY,scale:qa.transform.scale,rotate:qa.transform.rotate});!Q&&m.isEntry(qa)&&(Q=qa)}));W=t(d,e,D,C,{width:O,height:q,viewX:function(qa){return U+qa},viewY:function(qa){return ha+qa},pathSlice:function(qa){var ta=U+qa.x0,za=U+qa.x1,Ia=ha+qa.y0;qa=ha+qa.y1;return za-ta&&qa-Ia?"M"+(ta+","+(Ia+0))+"L"+(za-0+","+Ia)+"L"+(za+","+(qa-0))+"L"+(ta+0+","+qa)+"Z":""},toMoveInsideSlice:oa,
prevEntry:Q,makeUpdateSliceInterpolator:K,makeUpdateTextInterpolator:la,handleSlicesExit:ka,hasTransition:y,strTransform:na});z.pathbar.visible?c(d,e,D,f,{barDifY:L,width:O,height:I,viewX:x,viewY:v,pathSlice:J,toMoveInsideSlice:oa,makeUpdateSliceInterpolator:K,makeUpdateTextInterpolator:la,handleSlicesExit:ka,hasTransition:y,strTransform:na}):f.remove()}else f.remove(),C.remove()}},{"../../lib":803,"../bar/constants":943,"../bar/plot":952,"../bar/uniform_text":957,"../sunburst/helpers":1336,"./constants":1359,
"./draw_ancestors":1362,"@plotly/d3":58,"d3-interpolate":171}],1371:[function(b,N,G){function p(h,r,l,c){var d=(c||{}).hovered;c=r.data.data;var e=c.i;c=c.color;var f=a.isHierarchyRoot(r),q=1;if(d)d=l._hovered.marker.line.color,e=l._hovered.marker.line.width;else if(f&&c===l.root.color)q=100,d="rgba(0,0,0,0)",e=0;else if(d=m.castOption(l,e,"marker.line.color")||k.defaultLine,e=m.castOption(l,e,"marker.line.width")||0,!l._hasColorscale&&!r.onPathbar){var t=l.marker.depthfade;if(t&&(f=k.combine(k.addOpacity(l._backgroundColor,
.75),c),!0===t?(t=a.getMaxDepth(l),r=isFinite(t)?a.isLeaf(r)?0:l._maxVisibleLayers-(r.data.depth-l._entryDepth):r.data.height+1):(r=r.data.depth-l._entryDepth,l._atRootLevel||r++),0<r))for(l=0;l<r;l++)c=k.combine(k.addOpacity(f,.5*l/r),c)}h.style("stroke-width",e).call(k.fill,c).call(k.stroke,d).style("opacity",q)}var n=b("@plotly/d3"),k=b("../../components/color"),m=b("../../lib"),a=b("../sunburst/helpers"),g=b("../bar/uniform_text").resizeText;N.exports={style:function(h){var r=h._fullLayout._treemaplayer.selectAll(".trace");
g(h,r,"treemap");r.each(function(l){var c=n.select(this),d=l[0].trace;c.style("opacity",d.opacity);c.selectAll("path.surface").each(function(e){n.select(this).call(p,e,d,{hovered:!1})})})},styleOne:p}},{"../../components/color":666,"../../lib":803,"../bar/uniform_text":957,"../sunburst/helpers":1336,"@plotly/d3":58}],1372:[function(b,N,G){G=b("../box/attributes");var p=b("../../lib/extend").extendFlat;b=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat;N.exports={y:G.y,x:G.x,x0:G.x0,
y0:G.y0,xhoverformat:b("x"),yhoverformat:b("y"),name:p({},G.name,{}),orientation:p({},G.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},
line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:G.fillcolor,points:p({},G.boxpoints,{}),jitter:p({},G.jitter,{}),pointpos:p({},G.pointpos,{}),width:p({},G.width,{}),marker:G.marker,text:G.text,hovertext:G.hovertext,hovertemplate:G.hovertemplate,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",
editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:G.offsetgroup,alignmentgroup:G.alignmentgroup,selected:G.selected,unselected:G.unselected,hoveron:{valType:"flaglist",flags:["violins",
"points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":793,"../../plots/cartesian/axis_format_attributes":857,"../box/attributes":966}],1373:[function(b,N,G){function p(h,r,l,c){function d(w){var x=f[w];x="multicategory"===l.type?l.r2c(x):l.d2c(x,0,h[r.valLetter+"calendar"]);return x===g?t[w]:x}var e=h.spanmode,f=h.span||[],q=[r.min,r.max],t=[r.min-2*c,r.max+2*c];c="soft"===e?t:"hard"===e?q:[d(0),d(1)];e={type:"linear",range:c};k.setConvert(e);e.cleanRange();
return c}var n=b("../../lib"),k=b("../../plots/cartesian/axes"),m=b("../box/calc"),a=b("./helpers"),g=b("../../constants/numerical").BADNUM;N.exports=function(h,r){var l=m(h,r);if(l[0].t.empty)return l;for(var c=h._fullLayout,d=k.getFromId(h,r["h"===r.orientation?"xaxis":"yaxis"]),e=Infinity,f=-Infinity,q=0,t=0,w=0;w<l.length;w++){var x=l[w],z=x.pts.map(a.extractVal),B=x;var A=x;var D=A.max-A.min;if(D)if(r.bandwidth)A=Math.max(r.bandwidth,D/1E4);else{var C=z.length,v=n.stdev(z,C-1,A.mean);A=Math.max(1.059*
Math.min(v,(A.q3-A.q1)/1.349)*Math.pow(C,-.2),D/100)}else A=r.bandwidth?r.bandwidth:0;D=B.bandwidth=A;B=x.span=p(r,x,d,D);if(x.min===x.max&&0===D)B=x.span=[x.min,x.max],x.density=[{v:1,t:B[0]}],x.bandwidth=D,q=Math.max(q,1);else{A=B[1]-B[0];C=Math.ceil(A/(D/3));A/=C;if(!isFinite(A)||!isFinite(C))return n.error("Something went wrong with computing the violin span"),l[0].t.empty=!0,l;D=a.makeKDE(x,r,z);x.density=Array(C);C=0;for(v=B[0];v<B[1]+A/2;C++,v+=A){var y=D(v);x.density[C]={v:y,t:v};q=Math.max(q,
y)}}t=Math.max(t,z.length);e=Math.min(e,B[0]);f=Math.max(f,B[1])}e=k.findExtremes(d,[e,f],{padded:!0});r._extremes[d._id]=e;r.width?l[0].t.maxKDE=q:(c=c._violinScaleGroupStats,r=r.scalegroup,(d=c[r])?(d.maxKDE=Math.max(d.maxKDE,q),d.maxCount=Math.max(d.maxCount,t)):c[r]={maxKDE:q,maxCount:t});l[0].t.labels.kde=n._(h,"kde:");return l}},{"../../constants/numerical":779,"../../lib":803,"../../plots/cartesian/axes":854,"../box/calc":967,"./helpers":1376}],1374:[function(b,N,G){var p=b("../box/cross_trace_calc").setPositionOffset,
n=["v","h"];N.exports=function(k,m){var a=k.calcdata,g=m.xaxis;m=m.yaxis;for(var h=0;h<n.length;h++){for(var r=n[h],l="h"===r?m:g,c=[],d=0;d<a.length;d++){var e=a[d],f=e[0].t;e=e[0].trace;!0!==e.visible||"violin"!==e.type||f.empty||e.orientation!==r||e.xaxis!==g._id||e.yaxis!==m._id||c.push(d)}p("violin",k,c,l)}}},{"../box/cross_trace_calc":968}],1375:[function(b,N,G){var p=b("../../lib"),n=b("../../components/color"),k=b("../box/defaults"),m=b("./attributes");N.exports=function(a,g,h,r){function l(t,
w){return p.coerce(a,g,m,t,w)}function c(t,w){return p.coerce2(a,g,m,t,w)}k.handleSampleDefaults(a,g,l,r);if(!1!==g.visible){l("bandwidth");l("side");l("width")||(l("scalegroup",g.name),l("scalemode"));r=l("span");var d;Array.isArray(r)&&(d="manual");l("spanmode",d);d=l("line.color",(a.marker||{}).color||h);h=l("line.width");var e=l("fillcolor",n.addOpacity(g.line.color,.5));k.handlePointsDefaults(a,g,l,{prefix:""});r=c("box.width");e=c("box.fillcolor",e);var f=c("box.line.color",d),q=c("box.line.width",
h);l("box.visible",!!(r||e||f||q))||(g.box={visible:!1});d=c("meanline.color",d);h=c("meanline.width",h);l("meanline.visible",!(!d&&!h))||(g.meanline={visible:!1})}}},{"../../components/color":666,"../../lib":803,"../box/defaults":969,"./attributes":1372}],1376:[function(b,N,G){var p=b("../../lib");G.makeKDE=function(n,k,m){var a=m.length,g=n.bandwidth,h=1/(a*g);return function(r){for(var l=0,c=0;c<a;c++){var d=(r-m[c])/g;l+=1/Math.sqrt(2*Math.PI)*Math.exp(-.5*d*d)}return h*l}};G.getPositionOnKdePath=
function(n,k,m){if("h"===k.orientation){var a="y";var g="x"}else a="x",g="y";m=p.findPointOnPath(n.path,m,g,{pathLength:n.pathLength});n=n.posCenterPx;a=m[a];return[a,"both"===k.side?2*n-a:n]};G.getKdeValue=function(n,k,m){var a=n.pts.map(G.extractVal);return G.makeKDE(n,k,a)(m)/n.posDensityScale};G.extractVal=function(n){return n.v}},{"../../lib":803}],1377:[function(b,N,G){var p=b("../../lib"),n=b("../../plots/cartesian/axes"),k=b("../box/hover"),m=b("./helpers");N.exports=function(a,g,h,r,l){l||
(l={});var c=l.hoverLayer,d=a.cd;l=d[0].trace;var e=l.hoveron,f=-1!==e.indexOf("violins"),q=-1!==e.indexOf("kde"),t=[],w;if(f||q){var x=k.hoverOnBoxes(a,g,h,r);if(q&&0<x.length){var z=a.xa,B=a.ya;if("h"===l.orientation){var A=g;q="y";var D=B;var C="x"}else A=h,q="x",D=z,C="y",z=B;var v=d[a.index];if(A>=v.span[0]&&A<=v.span[1]){var y=p.extendFlat({},a);B=z.c2p(A,!0);var F=m.getKdeValue(v,l,A);v=m.getPositionOnKdePath(v,l,B);var J=D._offset;D=D._length;y[q+"0"]=v[0];y[q+"1"]=v[1];y[C+"0"]=y[C+"1"]=
B;y[C+"Label"]=C+": "+n.hoverLabelText(z,A,l[C+"hoverformat"])+", "+d[0].t.labels.kde+" "+F.toFixed(3);y.spikeDistance=x[0].spikeDistance;d=q+"Spike";y[d]=x[0][d];x[0].spikeDistance=void 0;x[0][d]=void 0;y.hovertemplate=!1;t.push(y);y={stroke:a.color};y[q+"1"]=p.constrain(J+v[0],J,J+D);y[q+"2"]=p.constrain(J+v[1],J,J+D);y[C+"1"]=y[C+"2"]=z._offset+B}}f&&(t=t.concat(x))}-1!==e.indexOf("points")&&(w=k.hoverOnPoints(a,g,h));a=c.selectAll(".violinline-"+l.uid).data(y?[0]:[]);a.enter().append("line").classed("violinline-"+
l.uid,!0).attr("stroke-width",1.5);a.exit().remove();a.attr(y);if("closest"===r)return w?[w]:t;w&&t.push(w);return t}},{"../../lib":803,"../../plots/cartesian/axes":854,"../box/hover":971,"./helpers":1376}],1378:[function(b,N,G){N.exports={attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc"),crossTraceCalc:b("./cross_trace_calc"),
plot:b("./plot"),style:b("./style"),styleOnSelect:b("../scatter/style").styleOnSelect,hoverPoints:b("./hover"),selectPoints:b("../box/select"),moduleType:"trace",name:"violin",basePlotModule:b("../../plots/cartesian"),categories:"cartesian svg symbols oriented box-violin showLegend violinLayout zoomScale".split(" "),meta:{}}},{"../../plots/cartesian":868,"../box/defaults":969,"../box/select":976,"../scatter/style":1242,"./attributes":1372,"./calc":1373,"./cross_trace_calc":1374,"./defaults":1375,
"./hover":1377,"./layout_attributes":1379,"./layout_defaults":1380,"./plot":1381,"./style":1382}],1379:[function(b,N,G){G=b("../box/layout_attributes");b=b("../../lib").extendFlat;N.exports={violinmode:b({},G.boxmode,{}),violingap:b({},G.boxgap,{}),violingroupgap:b({},G.boxgroupgap,{})}},{"../../lib":803,"../box/layout_attributes":973}],1380:[function(b,N,G){var p=b("../../lib"),n=b("./layout_attributes"),k=b("../box/layout_defaults");N.exports=function(m,a,g){k._supply(m,a,g,function(h,r){return p.coerce(m,
a,n,h,r)},"violin")}},{"../../lib":803,"../box/layout_defaults":974,"./layout_attributes":1379}],1381:[function(b,N,G){var p=b("@plotly/d3"),n=b("../../lib"),k=b("../../components/drawing"),m=b("../box/plot"),a=b("../scatter/line_points"),g=b("./helpers");N.exports=function(h,r,l,c){function d(t){t=a(t,{xaxis:f,yaxis:q,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return k.smoothopen(t[0],1)}var e=h._fullLayout,f=r.xaxis,q=r.yaxis;n.makeTraceGroups(c,l,"trace violins").each(function(t){var w=
p.select(this);t=t[0];var x=t.t,z=t.trace;if(!0!==z.visible||x.empty)w.remove();else{var B=x.bPos,A=x.bdPos,D=r[x.valLetter+"axis"],C=r[x.posLetter+"axis"],v="both"===z.side,y=v||"positive"===z.side,F=v||"negative"===z.side;t=w.selectAll("path.violin").data(n.identity);t.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin");t.exit().remove();t.each(function(O){var I=p.select(this),L=O.density,H=L.length,M=C.c2l(O.pos+B,!0),Q=C.l2p(M);if(z.width)var Z=x.maxKDE/A;
else Z=e._violinScaleGroupStats[z.scalegroup],Z="count"===z.scalemode?Z.maxKDE/A*(Z.maxCount/O.pts.length):Z.maxKDE/A;var ca;if(y){var W=Array(H);for(ca=0;ca<H;ca++){var T=W[ca]={};T[x.posLetter]=M+L[ca].v/Z;T[x.valLetter]=D.c2l(L[ca].t,!0)}var U=d(W)}if(F){W=Array(H);var ha=0;for(ca=H-1;ha<H;ha++,ca--)T=W[ha]={},T[x.posLetter]=M-L[ca].v/Z,T[x.valLetter]=D.c2l(L[ca].t,!0);ha=d(W)}v?U=U+"L"+ha.substr(1)+"Z":(M=[Q,D.c2p(L[0].t)],L=[Q,D.c2p(L[H-1].t)],"h"===z.orientation&&(M.reverse(),L.reverse()),U=
y?"M"+M+"L"+U.substr(1)+"L"+L:"M"+L+"L"+ha.substr(1)+"L"+M);I.attr("d",U);O.posCenterPx=Q;O.posDensityScale=Z*A;O.path=I.node();O.pathLength=O.path.getTotalLength()/(v?2:1)});var J=z.box;t=J.width;J=(J.line||{}).width;v?(t*=A,J=0):y?(t=[0,A*t/2],J*={x:1,y:-1}[x.posLetter]):(t=[A*t/2,0],J*={x:-1,y:1}[x.posLetter]);m.plotBoxAndWhiskers(w,{pos:C,val:D},z,{bPos:B,bdPos:t,bPosPxOffset:J});m.plotBoxMean(w,{pos:C,val:D},z,{bPos:B,bdPos:t,bPosPxOffset:J});if(!z.box.visible&&z.meanline.visible)var K=n.identity;
K=w.selectAll("path.meanline").data(K||[]);K.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke");K.exit().remove();K.each(function(O){var I=D.c2p(O.mean,!0);O=g.getPositionOnKdePath(O,z,I);p.select(this).attr("d","h"===z.orientation?"M"+I+","+O[0]+"V"+O[1]:"M"+O[0]+","+I+"H"+O[1])});m.plotPoints(w,{x:f,y:q},z,x)}})}},{"../../components/drawing":688,"../../lib":803,"../box/plot":975,"../scatter/line_points":1232,"./helpers":1376,"@plotly/d3":58}],
1382:[function(b,N,G){var p=b("@plotly/d3"),n=b("../../components/color"),k=b("../scatter/style").stylePoints;N.exports=function(m){var a=p.select(m).selectAll("g.trace.violins");a.style("opacity",function(g){return g[0].trace.opacity});a.each(function(g){g=g[0].trace;var h=p.select(this),r=g.box||{},l=r.line||{},c=g.meanline||{},d=c.width;h.selectAll("path.violin").style("stroke-width",g.line.width+"px").call(n.stroke,g.line.color).call(n.fill,g.fillcolor);h.selectAll("path.box").style("stroke-width",
l.width+"px").call(n.stroke,l.color).call(n.fill,r.fillcolor);r={"stroke-width":d+"px","stroke-dasharray":2*d+"px,"+d+"px"};h.selectAll("path.mean").style(r).call(n.stroke,c.color);h.selectAll("path.meanline").style(r).call(n.stroke,c.color);k(h,g,m)})}},{"../../components/color":666,"../scatter/style":1242,"@plotly/d3":58}],1383:[function(b,N,G){G=b("../../components/colorscale/attributes");var p=b("../isosurface/attributes"),n=b("../surface/attributes"),k=b("../../plots/attributes"),m=b("../../lib/extend").extendFlat;
b=b("../../plot_api/edit_types").overrideAll;N=N.exports=b(m({x:p.x,y:p.y,z:p.z,value:p.value,isomin:p.isomin,isomax:p.isomax,surface:p.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:p.slices,caps:p.caps,text:p.text,hovertext:p.hovertext,xhoverformat:p.xhoverformat,yhoverformat:p.yhoverformat,zhoverformat:p.zhoverformat,valuehoverformat:p.valuehoverformat,hovertemplate:p.hovertemplate},G("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),
{colorbar:p.colorbar,opacity:p.opacity,opacityscale:n.opacityscale,lightposition:p.lightposition,lighting:p.lighting,flatshading:p.flatshading,contour:p.contour,hoverinfo:m({},k.hoverinfo),showlegend:m({},k.showlegend,{dflt:!1})}),"calc","nested");N.x.editType=N.y.editType=N.z.editType=N.value.editType="calc+clearAxisTypes";N.transforms=void 0},{"../../components/colorscale/attributes":673,"../../lib/extend":793,"../../plot_api/edit_types":836,"../../plots/attributes":850,"../isosurface/attributes":1154,
"../surface/attributes":1342}],1384:[function(b,N,G){function p(l,c,d){this.scene=l;this.uid=d;this.mesh=c;this.name="";this.data=null;this.showContour=!1}var n=b("gl-mesh3d"),k=b("../../lib/gl_format_color").parseColorScale,m=b("../../lib/str2rgbarray"),a=b("../../components/colorscale").extractOpts,g=b("../../plots/gl3d/zip3"),h=b("../isosurface/convert").findNearestOnAxis,r=b("../isosurface/convert").generateIsoMeshes;b=p.prototype;b.handlePick=function(l){if(l.object===this.mesh){var c=l.data.index,
d=this.data._meshY[c],e=this.data._meshZ[c],f=this.data._Ys.length,q=this.data._Zs.length;c=h(this.data._meshX[c],this.data._Xs).id;d=h(d,this.data._Ys).id;e=h(e,this.data._Zs).id;f=l.index=e+q*d+q*f*c;l.traceCoordinate=[this.data._meshX[f],this.data._meshY[f],this.data._meshZ[f],this.data._value[f]];q=this.data.hovertext||this.data.text;Array.isArray(q)&&void 0!==q[f]?l.textLabel=q[f]:q&&(l.textLabel=q);return!0}};b.update=function(l){function c(f,q,t,w){return q.map(function(x){return f.d2l(x,0,
w)*t})}var d=this.scene,e=d.fullSceneLayout;this.data=r(l);d=g(c(e.xaxis,l._meshX,d.dataScale[0],l.xcalendar),c(e.yaxis,l._meshY,d.dataScale[1],l.ycalendar),c(e.zaxis,l._meshZ,d.dataScale[2],l.zcalendar));e=g(l._meshI,l._meshJ,l._meshK);d={positions:d,cells:e,lightPosition:[l.lightposition.x,l.lightposition.y,l.lightposition.z],ambient:l.lighting.ambient,diffuse:l.lighting.diffuse,specular:l.lighting.specular,roughness:l.lighting.roughness,fresnel:l.lighting.fresnel,vertexNormalsEpsilon:l.lighting.vertexnormalsepsilon,
faceNormalsEpsilon:l.lighting.facenormalsepsilon,opacity:l.opacity,opacityscale:l.opacityscale,contourEnable:l.contour.show,contourColor:m(l.contour.color).slice(0,3),contourWidth:l.contour.width,useFacetNormals:l.flatshading};e=a(l);d.vertexIntensity=l._meshIntensity;d.vertexIntensityBounds=[e.min,e.max];d.colormap=k(l);this.mesh.update(d)};b.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};N.exports=function(l,c){var d=n({gl:l.glplot.gl}),e=new p(l,d,c.uid);d._trace=e;
e.update(c);l.glplot.add(d);return e}},{"../../components/colorscale":678,"../../lib/gl_format_color":799,"../../lib/str2rgbarray":828,"../../plots/gl3d/zip3":907,"../isosurface/convert":1156,"gl-mesh3d":315}],1385:[function(b,N,G){var p=b("../../lib"),n=b("./attributes"),k=b("../isosurface/defaults").supplyIsoDefaults,m=b("../surface/defaults").opacityscaleDefaults;N.exports=function(a,g,h,r){function l(c,d){return p.coerce(a,g,n,c,d)}k(a,g,h,r,l);m(a,g,r,l)}},{"../../lib":803,"../isosurface/defaults":1157,
"../surface/defaults":1345,"./attributes":1383}],1386:[function(b,N,G){N.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("../isosurface/calc"),colorbar:{min:"cmin",max:"cmax"},plot:b("./convert"),moduleType:"trace",name:"volume",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":896,"../isosurface/calc":1155,"./attributes":1383,"./convert":1384,"./defaults":1385}],1387:[function(b,N,G){function p(l){return{marker:{color:r({},
n.marker.color,{arrayOk:!1,editType:"style"}),line:{color:r({},n.marker.line.color,{arrayOk:!1,editType:"style"}),width:r({},n.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}var n=b("../bar/attributes");G=b("../scatter/attributes").line;var k=b("../../plots/attributes"),m=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat,a=b("../../plots/template_attributes").hovertemplateAttrs,g=b("../../plots/template_attributes").texttemplateAttrs,
h=b("./constants"),r=b("../../lib/extend").extendFlat;b=b("../../components/color");N.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:n.x,x0:n.x0,dx:n.dx,y:n.y,y0:n.y0,dy:n.dy,xperiod:n.xperiod,yperiod:n.yperiod,xperiod0:n.xperiod0,yperiod0:n.yperiod0,xperiodalignment:n.xperiodalignment,yperiodalignment:n.yperiodalignment,xhoverformat:m("x"),yhoverformat:m("y"),hovertext:n.hovertext,hovertemplate:a({},{keys:h.eventDataKeys}),
hoverinfo:r({},k.hoverinfo,{flags:"name x y text initial delta final".split(" ")}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:g({editType:"plot"},{keys:h.eventDataKeys.concat(["label"])}),text:n.text,textposition:n.textposition,insidetextanchor:n.insidetextanchor,textangle:n.textangle,textfont:n.textfont,insidetextfont:n.insidetextfont,outsidetextfont:n.outsidetextfont,constraintext:n.constraintext,cliponaxis:n.cliponaxis,
orientation:n.orientation,offset:n.offset,width:n.width,increasing:p("increasing"),decreasing:p("decreasing"),totals:p("intermediate sums and total"),connector:{line:{color:r({},G.color,{dflt:b.defaultLine}),width:r({},G.width,{editType:"plot"}),dash:G.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:n.offsetgroup,alignmentgroup:n.alignmentgroup}},{"../../components/color":666,
"../../lib/extend":793,"../../plots/attributes":850,"../../plots/cartesian/axis_format_attributes":857,"../../plots/template_attributes":926,"../bar/attributes":941,"../scatter/attributes":1218,"./constants":1389}],1388:[function(b,N,G){function p(r){return"a"===r||"absolute"===r}function n(r){return"t"===r||"total"===r}var k=b("../../plots/cartesian/axes"),m=b("../../plots/cartesian/align_period"),a=b("../../lib").mergeArray,g=b("../scatter/calc_selection"),h=b("../../constants/numerical").BADNUM;
N.exports=function(r,l){var c=k.getFromId(r,l.xaxis||"x"),d=k.getFromId(r,l.yaxis||"y");if("h"===l.orientation){r=c.makeCalcdata(l,"x");var e=d.makeCalcdata(l,"y");d=m(l,d,"y",e);var f=!!l.yperiodalignment}else r=d.makeCalcdata(l,"y"),e=c.makeCalcdata(l,"x"),d=m(l,c,"x",e),f=!!l.xperiodalignment;c=d.vals;for(var q=Math.min(c.length,r.length),t=Array(q),w=0,x,z=!1,B=0;B<q;B++){x=r[B]||0;var A=!1;(r[B]!==h||n(l.measure[B])||p(l.measure[B]))&&B+1<q&&(r[B+1]!==h||n(l.measure[B+1])||p(l.measure[B+1]))&&
(A=!0);A=t[B]={i:B,p:c[B],s:x,rawS:x,cNext:A};p(l.measure[B])?(w=A.s,A.isSum=!0,A.dir="totals",A.s=w):n(l.measure[B])?(A.isSum=!0,A.dir="totals",A.s=w):(A.isSum=!1,A.dir=0>A.rawS?"decreasing":"increasing",x=A.s,A.s=w+x,w+=x);"totals"===A.dir&&(z=!0);f&&(t[B].orig_p=e[B],t[B].pEnd=d.ends[B],t[B].pStart=d.starts[B]);l.ids&&(A.id=String(l.ids[B]));A.v=(l.base||0)+w}t.length&&(t[0].hasTotals=z);a(l.text,t,"tx");a(l.hovertext,t,"htx");g(t,l);return t}},{"../../constants/numerical":779,"../../lib":803,
"../../plots/cartesian/align_period":851,"../../plots/cartesian/axes":854,"../scatter/calc_selection":1220}],1389:[function(b,N,G){N.exports={eventDataKeys:["initial","delta","final"]}},{}],1390:[function(b,N,G){var p=b("../bar/cross_trace_calc").setGroupPositions;N.exports=function(n,k){var m=n._fullLayout,a=n._fullData,g=n.calcdata,h=k.xaxis,r=k.yaxis;k=[];var l=[],c=[],d;for(d=0;d<a.length;d++){var e=a[d];if(!0===e.visible&&e.xaxis===h._id&&e.yaxis===r._id&&"waterfall"===e.type){var f=g[d];"h"===
e.orientation?c.push(f):l.push(f);k.push(f)}}f={mode:m.waterfallmode,norm:m.waterfallnorm,gap:m.waterfallgap,groupgap:m.waterfallgroupgap};p(n,h,r,l,f);p(n,r,h,c,f);for(d=0;d<k.length;d++)for(f=k[d],n=0;n<f.length;n++)h=f[n],!1===h.isSum&&(h.s0+=0===n?0:f[n-1].s),n+1<f.length&&(f[n].nextP0=f[n+1].p0,f[n].nextS0=f[n+1].s0)}},{"../bar/cross_trace_calc":944}],1391:[function(b,N,G){function p(d,e,f){d(e+".marker.color",f);d(e+".marker.line.color",r.defaultLine);d(e+".marker.line.width")}var n=b("../../lib"),
k=b("../bar/defaults").handleGroupingDefaults,m=b("../bar/defaults").handleText,a=b("../scatter/xy_defaults"),g=b("../scatter/period_defaults"),h=b("./attributes"),r=b("../../components/color");b=b("../../constants/delta.js");var l=b.INCREASING.COLOR,c=b.DECREASING.COLOR;N.exports={supplyDefaults:function(d,e,f,q){function t(w,x){return n.coerce(d,e,h,w,x)}a(d,e,q,t)?(g(d,e,q,t),t("xhoverformat"),t("yhoverformat"),t("measure"),t("orientation",e.x&&!e.y?"h":"v"),t("base"),t("offset"),t("width"),t("text"),
t("hovertext"),t("hovertemplate"),f=t("textposition"),m(d,e,q,t,f,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"!==e.textposition&&(t("texttemplate"),e.texttemplate||t("textinfo")),p(t,"increasing",l),p(t,"decreasing",c),p(t,"totals","#4499FF"),t("connector.visible")&&(t("connector.mode"),t("connector.line.width")&&(t("connector.line.color"),t("connector.line.dash")))):e.visible=!1},crossTraceDefaults:function(d,
e){function f(x){return n.coerce(t._input,t,h,x)}if("group"===e.waterfallmode)for(var q=0;q<d.length;q++){var t=d[q];var w=t._input;k(w,t,e,f)}}}},{"../../components/color":666,"../../constants/delta.js":773,"../../lib":803,"../bar/defaults":945,"../scatter/period_defaults":1238,"../scatter/xy_defaults":1245,"./attributes":1387}],1392:[function(b,N,G){N.exports=function(p,n){p.x="xVal"in n?n.xVal:n.x;p.y="yVal"in n?n.yVal:n.y;"initial"in n&&(p.initial=n.initial);"delta"in n&&(p.delta=n.delta);"final"in
n&&(p.final=n.final);n.xa&&(p.xaxis=n.xa);n.ya&&(p.yaxis=n.ya);return p}},{}],1393:[function(b,N,G){function p(h,r){var l=h[r.dir].marker;h=l.color;r=l.line.color;l=l.line.width;if(k(h))return h;if(k(r)&&l)return r}var n=b("../../plots/cartesian/axes").hoverLabelText,k=b("../../components/color").opacity,m=b("../bar/hover").hoverOnBars;b=b("../../constants/delta.js");var a=b.INCREASING.SYMBOL,g=b.DECREASING.SYMBOL;N.exports=function(h,r,l,c,d){function e(B){return n(t,B,f[q+"hoverformat"])}if(r=m(h,
r,l,c,d)){c=r.cd;var f=c[0].trace,q=(l="h"===f.orientation)?"x":"y",t=l?h.xa:h.ya;h=c[r.index];c=h.isSum?h.b+h.s:h.rawS;h.isSum||(r.initial=h.b+h.s-c,r.delta=c,r.final=r.initial+r.delta,d=e(Math.abs(r.delta)),r.deltaLabel=0>c?"("+d+")":d,r.finalLabel=e(r.final),r.initialLabel=e(r.initial));var w=h.hi||f.hoverinfo;d=[];if(w&&"none"!==w&&"skip"!==w){var x="all"===w,z=w.split("+");w=function(B){return x||-1!==z.indexOf(B)};h.isSum||(!w("final")||(l?w("x"):w("y"))||d.push(r.finalLabel),w("delta")&&(0>
c?d.push(r.deltaLabel+" "+g):d.push(r.deltaLabel+" "+a)),w("initial")&&d.push("Initial: "+r.initialLabel))}d.length&&(r.extraText=d.join("\x3cbr\x3e"));r.color=p(f,h);return[r]}}},{"../../components/color":666,"../../constants/delta.js":773,"../../plots/cartesian/axes":854,"../bar/hover":948}],1394:[function(b,N,G){N.exports={attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults").supplyDefaults,crossTraceDefaults:b("./defaults").crossTraceDefaults,supplyLayoutDefaults:b("./layout_defaults"),
calc:b("./calc"),crossTraceCalc:b("./cross_trace_calc"),plot:b("./plot"),style:b("./style").style,hoverPoints:b("./hover"),eventData:b("./event_data"),selectPoints:b("../bar/select"),moduleType:"trace",name:"waterfall",basePlotModule:b("../../plots/cartesian"),categories:"bar-like cartesian svg oriented showLegend zoomScale".split(" "),meta:{}}},{"../../plots/cartesian":868,"../bar/select":953,"./attributes":1387,"./calc":1388,"./cross_trace_calc":1390,"./defaults":1391,"./event_data":1392,"./hover":1393,
"./layout_attributes":1395,"./layout_defaults":1396,"./plot":1397,"./style":1398}],1395:[function(b,N,G){N.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1396:[function(b,N,G){var p=b("../../lib"),n=b("./layout_attributes");N.exports=function(k,m,a){for(var g=!1,h=0;h<a.length;h++){var r=a[h];if(r.visible&&
"waterfall"===r.type){g=!0;break}}g&&(p.coerce(k,m,n,"waterfallmode",void 0),p.coerce(k,m,n,"waterfallgap",.2),p.coerce(k,m,n,"waterfallgroupgap",void 0))}},{"../../lib":803,"./layout_attributes":1395}],1397:[function(b,N,G){function p(r,l,c,d){var e=l.xaxis,f=l.yaxis;k.makeTraceGroups(d,c,"trace bars").each(function(q){var t=n.select(this);q=q[0].trace;t=k.ensureSingle(t,"g","lines");if(q.connector&&q.connector.visible){var w="h"===q.orientation,x=q.connector.mode;t=t.selectAll("g.line").data(k.identity);
t.enter().append("g").classed("line",!0);t.exit().remove();var z=t.size();t.each(function(B,A){if(A===z-1||B.cNext){var D=[];var C=[];var v=w?e:f,y=w?f:e;D[0]=v.c2p(B.s0,!0);C[0]=y.c2p(B.p0,!0);D[1]=v.c2p(B.s1,!0);C[1]=y.c2p(B.p1,!0);D[2]=v.c2p(B.nextS0,!0);C[2]=y.c2p(B.nextP0,!0);C=w?[D,C]:[C,D];D=C[0];C=C[1];v="";D[0]!==a&&C[0]!==a&&D[1]!==a&&C[1]!==a&&("spanning"===x&&!B.isSum&&0<A&&(v=w?v+("M"+D[0]+","+C[1]+"V"+C[0]):v+("M"+D[1]+","+C[0]+"H"+D[0])),"between"!==x&&(B.isSum||A<z-1)&&(v=w?v+("M"+
D[1]+","+C[0]+"V"+C[1]):v+("M"+D[0]+","+C[1]+"H"+D[1])),D[2]!==a&&C[2]!==a&&(v=w?v+("M"+D[1]+","+C[1]+"V"+C[2]):v+("M"+D[1]+","+C[1]+"H"+D[2])));""===v&&(v="M0,0Z");k.ensureSingle(n.select(this),"path").attr("d",v).call(m.setClipUrl,l.layerClipId,r)}})}else t.remove()})}var n=b("@plotly/d3"),k=b("../../lib"),m=b("../../components/drawing"),a=b("../../constants/numerical").BADNUM,g=b("../bar/plot"),h=b("../bar/uniform_text").clearMinTextSize;N.exports=function(r,l,c,d){var e=r._fullLayout;h("waterfall",
e);g.plot(r,l,c,d,{mode:e.waterfallmode,norm:e.waterfallmode,gap:e.waterfallgap,groupgap:e.waterfallgroupgap});p(r,l,c,d)}},{"../../components/drawing":688,"../../constants/numerical":779,"../../lib":803,"../bar/plot":952,"../bar/uniform_text":957,"@plotly/d3":58}],1398:[function(b,N,G){var p=b("@plotly/d3"),n=b("../../components/drawing"),k=b("../../components/color"),m=b("../../constants/interactions").DESELECTDIM;G=b("../bar/style");var a=b("../bar/uniform_text").resizeText,g=G.styleTextPoints;
N.exports={style:function(h,r,l){r=l?l:p.select(h).selectAll("g.waterfalllayer").selectAll("g.trace");a(h,r,"waterfall");r.style("opacity",function(c){return c[0].trace.opacity});r.each(function(c){var d=p.select(this),e=c[0].trace;d.selectAll(".point \x3e path").each(function(f){if(!f.isBlank){var q=e[f.dir].marker;p.select(this).call(k.fill,q.color).call(k.stroke,q.line.color).call(n.dashLine,q.line.dash,q.line.width).style("opacity",e.selectedpoints&&!f.selected?m:1)}});g(d,e,h);d.selectAll(".lines").each(function(){var f=
e.connector.line;n.lineGroupStyle(p.select(this).selectAll("path"),f.width,f.color,f.dash)})})}}},{"../../components/color":666,"../../components/drawing":688,"../../constants/interactions":778,"../bar/style":955,"../bar/uniform_text":957,"@plotly/d3":58}],1399:[function(b,N,G){function p(f,q,t,w){if(w.enabled){var x=w.target,z=h.nestedProperty(q,x),B=z.get();f=g.getDataConversions(f,q,x,B);f=n(w,f);for(var A=Array(t.length),D=0;D<t.length;D++)A[D]=f(B,t[D]);z.set(A);"count"===w.func&&h.pushUnique(q._arrayAttrs,
x)}}function n(f,q){var t=q.d2c,w=q.c2d;switch(f.func){case "count":return k;case "first":return m;case "last":return a;case "sum":return function(x,z){for(var B=0,A=0;A<z.length;A++){var D=t(x[z[A]]);D!==c&&(B+=D)}return w(B)};case "avg":return function(x,z){for(var B=0,A=0,D=0;D<z.length;D++){var C=t(x[z[D]]);C!==c&&(B+=C,A++)}return A?w(B/A):c};case "min":return function(x,z){for(var B=Infinity,A=0;A<z.length;A++){var D=t(x[z[A]]);D!==c&&(B=Math.min(B,D))}return Infinity===B?c:w(B)};case "max":return function(x,
z){for(var B=-Infinity,A=0;A<z.length;A++){var D=t(x[z[A]]);D!==c&&(B=Math.max(B,D))}return-Infinity===B?c:w(B)};case "range":return function(x,z){for(var B=Infinity,A=-Infinity,D=0;D<z.length;D++){var C=t(x[z[D]]);C!==c&&(B=Math.min(B,C),A=Math.max(A,C))}return-Infinity===A||Infinity===B?c:w(A-B)};case "change":return function(x,z){var B=t(x[z[0]]);x=t(x[z[z.length-1]]);return B===c||x===c?c:w(x-B)};case "median":return function(x,z){for(var B=[],A=0;A<z.length;A++){var D=t(x[z[A]]);D!==c&&B.push(D)}if(!B.length)return c;
B.sort(h.sorterAsc);x=(B.length-1)/2;return w((B[Math.floor(x)]+B[Math.ceil(x)])/2)};case "mode":return function(x,z){for(var B={},A=0,D=c,C=0;C<z.length;C++){var v=t(x[z[C]]);if(v!==c){var y=B[v]=(B[v]||0)+1;y>A&&(A=y,D=v)}}return A?w(D):c};case "rms":return function(x,z){for(var B=0,A=0,D=0;D<z.length;D++){var C=t(x[z[D]]);C!==c&&(B+=C*C,A++)}return A?w(Math.sqrt(B/A)):c};case "stddev":return function(x,z){var B=0,A=0,D=1,C=c,v;for(v=0;v<z.length&&C===c;v++)C=t(x[z[v]]);if(C===c)return c;for(;v<
z.length;v++){var y=t(x[z[v]]);y!==c&&(y-=C,B+=y,A+=y*y,D++)}return(x="sample"===f.funcmode?D-1:D)?Math.sqrt((A-B*B/D)/x):0}}}function k(f,q){return q.length}function m(f,q){return f[q[0]]}function a(f,q){return f[q[q.length-1]]}var g=b("../plots/cartesian/axes"),h=b("../lib"),r=b("../plot_api/plot_schema"),l=b("./helpers").pointsAccessorFunction,c=b("../constants/numerical").BADNUM;G.moduleType="transform";G.name="aggregate";var d=G.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},
groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:"count sum avg median mode rms stddev min max first last change range".split(" "),dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},e=d.aggregations;
G.supplyDefaults=function(f,q){function t(v,y){return h.coerce(A[x],D,e,v,y)}var w={},x;if(!h.coerce(f,w,d,"enabled",void 0))return w;q=r.findArrayAttributes(q);var z={};for(x=0;x<q.length;x++)z[q[x]]=1;var B=h.coerce(f,w,d,"groups",void 0);if(!Array.isArray(B)){if(!z[B])return w.enabled=!1,w;z[B]=0}var A=f.aggregations||[];f=w.aggregations=Array(A.length);for(x=0;x<A.length;x++){var D={_index:x};B=t("target");var C=t("func");t("enabled")&&B&&(z[B]||"count"===C&&void 0===z[B])?("stddev"===C&&t("funcmode"),
z[B]=0,f[x]=D):f[x]={enabled:!1,_index:x}}for(x=0;x<q.length;x++)z[q[x]]&&f.push({target:q[x],func:e.func.dflt,enabled:!0,_index:-1});return w};G.calcTransform=function(f,q,t){if(t.enabled){var w=t.groups,x=h.getTargetArray(q,{target:w});if(x){var z,B={},A={},D=[],C=l(q.transforms,t),v=x.length;q._length&&(v=Math.min(v,q._length));for(z=0;z<v;z++){var y=x[z];var F=B[y];void 0===F?(B[y]=D.length,F=[z],D.push(F),A[B[y]]=C(z)):(D[F].push(z),A[B[y]]=(A[B[y]]||[]).concat(C(z)))}t._indexToPoints=A;t=t.aggregations;
for(z=0;z<t.length;z++)p(f,q,D,t[z]);"string"===typeof w&&p(f,q,D,{target:w,func:"first",enabled:!0});q._length=D.length}}}},{"../constants/numerical":779,"../lib":803,"../plot_api/plot_schema":842,"../plots/cartesian/axes":854,"./helpers":1402}],1400:[function(b,N,G){function p(l,c,d){var e=l.operation,f=l.value,q=Array.isArray(f),t=function(z){return c(z,0,l.valuecalendar)},w=function(z){return c(z,0,d)},x;-1!==g.indexOf(e)?x=q?t(f[0]):t(f):-1!==h.indexOf(e)?x=q?[t(f[0]),t(f[1])]:[t(f),t(f)]:-1!==
r.indexOf(e)&&(x=q?f.map(t):[t(f)]);switch(e){case "\x3d":return function(z){return w(z)===x};case "!\x3d":return function(z){return w(z)!==x};case "\x3c":return function(z){return w(z)<x};case "\x3c\x3d":return function(z){return w(z)<=x};case "\x3e":return function(z){return w(z)>x};case "\x3e\x3d":return function(z){return w(z)>=x};case "[]":return function(z){z=w(z);return z>=x[0]&&z<=x[1]};case "()":return function(z){z=w(z);return z>x[0]&&z<x[1]};case "[)":return function(z){z=w(z);return z>=
x[0]&&z<x[1]};case "(]":return function(z){z=w(z);return z>x[0]&&z<=x[1]};case "][":return function(z){z=w(z);return z<=x[0]||z>=x[1]};case ")(":return function(z){z=w(z);return z<x[0]||z>x[1]};case "](":return function(z){z=w(z);return z<=x[0]||z>x[1]};case ")[":return function(z){z=w(z);return z<x[0]||z>=x[1]};case "{}":return function(z){return-1!==x.indexOf(w(z))};case "}{":return function(z){return-1===x.indexOf(w(z))}}}var n=b("../lib"),k=b("../registry"),m=b("../plots/cartesian/axes"),a=b("./helpers").pointsAccessorFunction;
b=b("../constants/filter_ops");var g=b.COMPARISON_OPS,h=b.INTERVAL_OPS,r=b.SET_OPS;G.moduleType="transform";G.name="filter";G.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(g).concat(h).concat(r),dflt:"\x3d",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"};G.supplyDefaults=
function(l){function c(f,q){return n.coerce(l,d,G.attributes,f,q)}var d={};if(c("enabled")){var e=c("target");if(n.isArrayOrTypedArray(e)&&0===e.length)return d.enabled=!1,d;c("preservegaps");c("operation");c("value");e=k.getComponentMethod("calendars","handleDefaults");e(l,d,"valuecalendar",null);e(l,d,"targetcalendar",null)}return d};G.calcTransform=function(l,c,d){function e(v,y){for(var F=0;F<x.length;F++){var J=n.nestedProperty(c,x[F]);v(J,y)}}if(d.enabled){var f=n.getTargetArray(c,d);if(f){var q=
d.target,t=f.length;c._length&&(t=Math.min(t,c._length));var w=d.targetcalendar,x=c._arrayAttrs,z=d.preservegaps;if("string"===typeof q){var B=n.nestedProperty(c,q+"calendar").get();B&&(w=B)}l=m.getDataToCoordFunc(l,c,q,f);w=p(d,l,w);var A={};l={};q=0;if(z){var D=function(v){A[v.astr]=n.extendDeep([],v.get());v.set(Array(t))};B=function(v,y){var F=A[v.astr][y];v.get()[y]=F}}else D=function(v){A[v.astr]=n.extendDeep([],v.get());v.set([])},B=function(v,y){y=A[v.astr][y];v.get().push(y)};e(D);D=a(c.transforms,
d);for(var C=0;C<t;C++)w(f[C])?(e(B,C),l[q++]=D(C)):z&&q++;d._indexToPoints=l;c._length=q}}}},{"../constants/filter_ops":775,"../lib":803,"../plots/cartesian/axes":854,"../registry":931,"./helpers":1402}],1401:[function(b,N,G){var p=b("../lib"),n=b("../plot_api/plot_schema"),k=b("../plots/plots"),m=b("./helpers").pointsAccessorFunction;G.moduleType="transform";G.name="groupby";G.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",
editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"};G.supplyDefaults=function(a,g,h){g={};if(!p.coerce(a,g,G.attributes,"enabled",void 0))return g;p.coerce(a,g,G.attributes,"groups",void 0);p.coerce(a,g,G.attributes,"nameformat",1<h._dataLength?"%{group} (%{trace})":"%{group}");h=a.styles;var r=g.styles=[];if(h)for(a=0;a<h.length;a++){var l=r[a]={};p.coerce(h[a],
r[a],G.attributes.styles,"target");var c=p.coerce(h[a],r[a],G.attributes.styles,"value");p.isPlainObject(c)?l.value=p.extendDeep({},c):c&&delete l.value}return g};G.transform=function(a,g){var h,r=[];for(h=0;h<a.length;h++){var l=void 0,c;var d=a[h];var e=g.transform;var f=g.transformIndex;var q=d.transforms[f].groups,t=m(d.transforms,e);if(p.isArrayOrTypedArray(q)&&0!==q.length){var w=p.filterUnique(q),x=Array(w.length),z=q.length,B=n.findArrayAttributes(d),A=e.styles||[],D={};for(c=0;c<A.length;c++)D[A[c].target]=
A[c].value;e.styles&&(l=p.keyedContainer(e,"styles","target","value.name"));A={};var C={};for(c=0;c<w.length;c++){var v=w[c];A[v]=c;C[v]=0;var y=x[c]=p.extendDeepNoArrays({},d);y._group=v;y.transforms[f]._indexToPoints={};var F=null;l&&(F=l.get(v));y.name=F||""===F?F:p.templateString(e.nameformat,{trace:d.name,group:v});F=y.transforms;y.transforms=[];for(v=0;v<F.length;v++)y.transforms[v]=p.extendDeepNoArrays({},F[v]);for(v=0;v<B.length;v++)p.nestedProperty(y,B[v]).set([])}for(c=0;c<B.length;c++){e=
B[c];v=0;for(l=[];v<w.length;v++)l[v]=p.nestedProperty(x[v],e).get();e=p.nestedProperty(d,e).get();for(v=0;v<z;v++)l[A[q[v]]].push(e[v])}for(v=0;v<z;v++)y=x[A[q[v]]],y.transforms[f]._indexToPoints[C[q[v]]]=t(v),C[q[v]]++;for(c=0;c<w.length;c++)v=w[c],y=x[c],k.clearExpandedTraceDefaultColors(y),p.extendDeepNoArrays(y,D[v]||{});d=x}else d=[d];for(f=0;f<d.length;f++)r.push(d[f])}return r}},{"../lib":803,"../plot_api/plot_schema":842,"../plots/plots":917,"./helpers":1402}],1402:[function(b,N,G){G.pointsAccessorFunction=
function(p,n){for(var k,m,a=0;a<p.length;a++){k=p[a];if(k===n)break;k._indexToPoints&&!1!==k.enabled&&(m=k._indexToPoints)}return m?function(g){return m[g]}:function(g){return[g]}}},{}],1403:[function(b,N,G){function p(g,h){switch(g.order){case "ascending":return function(r,l){r=h(r.v);l=h(l.v);return r===a?1:l===a?-1:r-l};case "descending":return function(r,l){r=h(r.v);l=h(l.v);return r===a?1:l===a?-1:l-r}}}var n=b("../lib"),k=b("../plots/cartesian/axes"),m=b("./helpers").pointsAccessorFunction,
a=b("../constants/numerical").BADNUM;G.moduleType="transform";G.name="sort";G.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"};G.supplyDefaults=function(g){var h={};n.coerce(g,h,G.attributes,"enabled",void 0)&&(n.coerce(g,h,G.attributes,"target",void 0),n.coerce(g,h,G.attributes,"order",void 0));
return h};G.calcTransform=function(g,h,r){if(r.enabled){var l=n.getTargetArray(h,r);if(l){var c=r.target,d=l.length;h._length&&(d=Math.min(d,h._length));var e=h._arrayAttrs;c=k.getDataToCoordFunc(g,h,c,l);var f=d,q=Array(f);g=Array(f);var t;for(t=0;t<f;t++)q[t]={v:l[t],i:t};q.sort(p(r,c));for(t=0;t<f;t++)g[t]=q[t].i;l=m(h.transforms,r);c={};for(f=0;f<e.length;f++){t=n.nestedProperty(h,e[f]);var w=t.get(),x=Array(d);for(q=0;q<d;q++)x[q]=w[g[q]];t.set(x)}for(q=0;q<d;q++)c[q]=l(g[q]);r._indexToPoints=
c;h._length=d}}}},{"../constants/numerical":779,"../lib":803,"../plots/cartesian/axes":854,"./helpers":1402}],1404:[function(b,N,G){G.version="2.3.0"},{}]},{},[27])(27)})};
shadow$provide[15]=function(Re,Df,Xf,Vd){function b(N){return N&&N.__esModule?N:{"default":N}}Object.defineProperty(Vd,"__esModule",{value:!0});Vd["default"]=void 0;Re=b(Df(13));Df=b(Df(14));Df=(0,Re["default"])(Df["default"]);Vd["default"]=Df};
shadow$provide[16]=function(Re,Df,Xf,Vd){function b(L,H){var M=L.length;L.push(H);a:for(;0<M;){var Q=M-1>>>1,Z=L[Q];if(0<p(Z,H))L[Q]=H,L[M]=Z,M=Q;else break a}}function N(L){return 0===L.length?null:L[0]}function G(L){if(0===L.length)return null;var H=L[0],M=L.pop();if(M!==H){L[0]=M;var Q=0,Z=L.length,ca=Z>>>1;a:for(;Q<ca;){var W=2*(Q+1)-1,T=L[W],U=W+1,ha=L[U];if(0>p(T,M))U<Z&&0>p(ha,T)?(L[Q]=ha,L[U]=M,Q=U):(L[Q]=T,L[W]=M,Q=W);else if(U<Z&&0>p(ha,M))L[Q]=ha,L[U]=M,Q=U;else break a}}return H}function p(L,
H){var M=L.sortIndex-H.sortIndex;return 0!==M?M:L.id-H.id}function n(L){for(var H=N(f);null!==H;){if(null===H.callback)G(f);else if(H.startTime<=L)G(f),H.sortIndex=H.expirationTime,b(e,H);else break;H=N(f)}}function k(L){B=!1;n(L);if(!z)if(null!==N(e))z=!0,h(m);else{var H=N(f);null!==H&&r(k,H.startTime-L)}}function m(L,H){z=!1;B&&(B=!1,D(F),F=-1);x=!0;var M=w;try{n(H);for(t=N(e);null!==t&&(!(t.expirationTime>H)||L&&!a());){var Q=t.callback;if("function"===typeof Q){t.callback=null;w=t.priorityLevel;
var Z=Q(t.expirationTime<=H);H=Vd.unstable_now();"function"===typeof Z?t.callback=Z:t===N(e)&&G(e);n(H)}else G(e);t=N(e)}if(null!==t)var ca=!0;else{var W=N(f);null!==W&&r(k,W.startTime-H);ca=!1}return ca}finally{t=null,w=M,x=!1}}function a(){return Vd.unstable_now()-K<J?!1:!0}function g(){if(null!==y){var L=Vd.unstable_now();K=L;var H=!0;try{H=y(!0,L)}finally{H?O():(v=!1,y=null)}}else v=!1}function h(L){y=L;v||(v=!0,O())}function r(L,H){F=A(function(){L(Vd.unstable_now())},H)}if("object"===typeof performance&&
"function"===typeof performance.now){var l=performance;Vd.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();Vd.unstable_now=function(){return c.now()-d}}var e=[],f=[],q=1,t=null,w=3,x=!1,z=!1,B=!1,A="function"===typeof setTimeout?setTimeout:null,D="function"===typeof clearTimeout?clearTimeout:null,C="undefined"!==typeof setImmediate?setImmediate:null;"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);
var v=!1,y=null,F=-1,J=5,K=-1;if("function"===typeof C)var O=function(){C(g)};else if("undefined"!==typeof MessageChannel){Re=new MessageChannel;var I=Re.port2;Re.port1.onmessage=g;O=function(){I.postMessage(null)}}else O=function(){A(g,0)};Vd.unstable_IdlePriority=5;Vd.unstable_ImmediatePriority=1;Vd.unstable_LowPriority=4;Vd.unstable_NormalPriority=3;Vd.unstable_Profiling=null;Vd.unstable_UserBlockingPriority=2;Vd.unstable_cancelCallback=function(L){L.callback=null};Vd.unstable_continueExecution=
function(){z||x||(z=!0,h(m))};Vd.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<L?Math.floor(1E3/L):5};Vd.unstable_getCurrentPriorityLevel=function(){return w};Vd.unstable_getFirstCallbackNode=function(){return N(e)};Vd.unstable_next=function(L){switch(w){case 1:case 2:case 3:var H=3;break;default:H=w}var M=w;w=H;try{return L()}finally{w=M}};Vd.unstable_pauseExecution=
function(){};Vd.unstable_requestPaint=function(){};Vd.unstable_runWithPriority=function(L,H){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var M=w;w=L;try{return H()}finally{w=M}};Vd.unstable_scheduleCallback=function(L,H,M){var Q=Vd.unstable_now();"object"===typeof M&&null!==M?(M=M.delay,M="number"===typeof M&&0<M?Q+M:Q):M=Q;switch(L){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1E4;break;default:Z=5E3}Z=M+Z;L={id:q++,callback:H,priorityLevel:L,startTime:M,
expirationTime:Z,sortIndex:-1};M>Q?(L.sortIndex=M,b(f,L),null===N(e)&&L===N(f)&&(B?(D(F),F=-1):B=!0,r(k,M-Q))):(L.sortIndex=Z,b(e,L),z||x||(z=!0,h(m)));return L};Vd.unstable_shouldYield=a;Vd.unstable_wrapCallback=function(L){var H=w;return function(){var M=w;w=H;try{return L.apply(this,arguments)}finally{w=M}}}};
shadow$provide[18]=function(Re,Df,Xf,Vd){Xf.exports=Df(16)};
shadow$provide[19]=function(Re,Df,Xf,Vd){function b(R){for(var aa="https://reactjs.org/docs/error-decoder.html?invariant\x3d"+R,sa=1;sa<arguments.length;sa++)aa+="\x26args[]\x3d"+encodeURIComponent(arguments[sa]);return"Minified React error #"+R+"; visit "+aa+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function N(R,aa){G(R,aa);G(R+"Capture",aa)}function G(R,aa){ld[R]=aa;for(R=0;R<aa.length;R++)Yc.add(aa[R])}function p(R){if(sd.call(ee,
R))return!0;if(sd.call(zd,R))return!1;if(Md.test(R))return ee[R]=!0;zd[R]=!0;return!1}function n(R,aa,sa,Ca){if(null!==sa&&0===sa.type)return!1;switch(typeof aa){case "function":case "symbol":return!0;case "boolean":if(Ca)return!1;if(null!==sa)return!sa.acceptsBooleans;R=R.toLowerCase().slice(0,5);return"data-"!==R&&"aria-"!==R;default:return!1}}function k(R,aa,sa,Ca){if(null===aa||"undefined"===typeof aa||n(R,aa,sa,Ca))return!0;if(Ca)return!1;if(null!==sa)switch(sa.type){case 3:return!aa;case 4:return!1===
aa;case 5:return isNaN(aa);case 6:return isNaN(aa)||1>aa}return!1}function m(R,aa,sa,Ca,Ua,ab,Kb){this.acceptsBooleans=2===aa||3===aa||4===aa;this.attributeName=Ca;this.attributeNamespace=Ua;this.mustUseProperty=sa;this.propertyName=R;this.type=aa;this.sanitizeURL=ab;this.removeEmptyString=Kb}function a(R){return R[1].toUpperCase()}function g(R,aa,sa,Ca){var Ua=ce.hasOwnProperty(aa)?ce[aa]:null;if(null!==Ua?0!==Ua.type:Ca||!(2<aa.length)||"o"!==aa[0]&&"O"!==aa[0]||"n"!==aa[1]&&"N"!==aa[1])k(aa,sa,
Ua,Ca)&&(sa=null),Ca||null===Ua?p(aa)&&(null===sa?R.removeAttribute(aa):R.setAttribute(aa,""+sa)):Ua.mustUseProperty?R[Ua.propertyName]=null===sa?3===Ua.type?!1:"":sa:(aa=Ua.attributeName,Ca=Ua.attributeNamespace,null===sa?R.removeAttribute(aa):(Ua=Ua.type,sa=3===Ua||4===Ua&&!0===sa?"":""+sa,Ca?R.setAttributeNS(Ca,aa,sa):R.setAttribute(aa,sa)))}function h(R){if(null===R||"object"!==typeof R)return null;R=hj&&R[hj]||R["@@iterator"];return"function"===typeof R?R:null}function r(R){if(void 0===Ki)try{throw Error();
}catch(sa){var aa=sa.stack.trim().match(/\n( *(at )?)/);Ki=aa&&aa[1]||""}return"\n"+Ki+R}function l(R,aa){if(!R||lg)return"";lg=!0;var sa=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(aa)if(aa=function(){throw Error();},Object.defineProperty(aa.prototype,"props",{set:function(){throw Error();}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(aa,[])}catch(od){var Ca=od}Reflect.construct(R,[],aa)}else{try{aa.call()}catch(od){Ca=od}R.call(aa.prototype)}else{try{throw Error();
}catch(od){Ca=od}R()}}catch(od){if(od&&Ca&&"string"===typeof od.stack){for(var Ua=od.stack.split("\n"),ab=Ca.stack.split("\n"),Kb=Ua.length-1,lc=ab.length-1;1<=Kb&&0<=lc&&Ua[Kb]!==ab[lc];)lc--;for(;1<=Kb&&0<=lc;Kb--,lc--)if(Ua[Kb]!==ab[lc]){if(1!==Kb||1!==lc){do if(Kb--,lc--,0>lc||Ua[Kb]!==ab[lc]){var Ac="\n"+Ua[Kb].replace(" at new "," at ");R.displayName&&Ac.includes("\x3canonymous\x3e")&&(Ac=Ac.replace("\x3canonymous\x3e",R.displayName));return Ac}while(1<=Kb&&0<=lc)}break}}}finally{lg=!1,Error.prepareStackTrace=
sa}return(R=R?R.displayName||R.name:"")?r(R):""}function c(R){switch(R.tag){case 5:return r(R.type);case 16:return r("Lazy");case 13:return r("Suspense");case 19:return r("SuspenseList");case 0:case 2:case 15:return R=l(R.type,!1),R;case 11:return R=l(R.type.render,!1),R;case 1:return R=l(R.type,!0),R;default:return""}}function d(R){if(null==R)return null;if("function"===typeof R)return R.displayName||R.name||null;if("string"===typeof R)return R;switch(R){case mf:return"Fragment";case Pd:return"Portal";
case xf:return"Profiler";case Uf:return"StrictMode";case fg:return"Suspense";case pg:return"SuspenseList"}if("object"===typeof R)switch(R.$$typeof){case Gf:return(R.displayName||"Context")+".Consumer";case Jf:return(R._context.displayName||"Context")+".Provider";case Ef:var aa=R.render;(R=R.displayName)||(R=aa.displayName||aa.name||"",R=""!==R?"ForwardRef("+R+")":"ForwardRef");return R;case rg:return aa=R.displayName||null,null!==aa?aa:d(R.type)||"Memo";case bh:aa=R._payload;R=R._init;try{return d(R(aa))}catch(sa){}}return null}
function e(R){var aa=R.type;switch(R.tag){case 24:return"Cache";case 9:return(aa.displayName||"Context")+".Consumer";case 10:return(aa._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return R=aa.render,R=R.displayName||R.name||"",aa.displayName||(""!==R?"ForwardRef("+R+")":"ForwardRef");case 7:return"Fragment";case 5:return aa;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return d(aa);case 8:return aa===Uf?"StrictMode":"Mode";case 22:return"Offscreen";
case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof aa)return aa.displayName||aa.name||null;if("string"===typeof aa)return aa}return null}function f(R){switch(typeof R){case "boolean":case "number":case "string":case "undefined":return R;case "object":return R;default:return""}}function q(R){var aa=R.type;return(R=R.nodeName)&&"input"===R.toLowerCase()&&
("checkbox"===aa||"radio"===aa)}function t(R){var aa=q(R)?"checked":"value",sa=Object.getOwnPropertyDescriptor(R.constructor.prototype,aa),Ca=""+R[aa];if(!R.hasOwnProperty(aa)&&"undefined"!==typeof sa&&"function"===typeof sa.get&&"function"===typeof sa.set){var Ua=sa.get,ab=sa.set;Object.defineProperty(R,aa,{configurable:!0,get:function(){return Ua.call(this)},set:function(Kb){Ca=""+Kb;ab.call(this,Kb)}});Object.defineProperty(R,aa,{enumerable:sa.enumerable});return{getValue:function(){return Ca},
setValue:function(Kb){Ca=""+Kb},stopTracking:function(){R._valueTracker=null;delete R[aa]}}}}function w(R){R._valueTracker||(R._valueTracker=t(R))}function x(R){if(!R)return!1;var aa=R._valueTracker;if(!aa)return!0;var sa=aa.getValue(),Ca="";R&&(Ca=q(R)?R.checked?"true":"false":R.value);R=Ca;return R!==sa?(aa.setValue(R),!0):!1}function z(R){R=R||("undefined"!==typeof document?document:void 0);if("undefined"===typeof R)return null;try{return R.activeElement||R.body}catch(aa){return R.body}}function B(R,
aa){var sa=aa.checked;return xg({},aa,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=sa?sa:R._wrapperState.initialChecked})}function A(R,aa){var sa=null==aa.defaultValue?"":aa.defaultValue,Ca=null!=aa.checked?aa.checked:aa.defaultChecked;sa=f(null!=aa.value?aa.value:sa);R._wrapperState={initialChecked:Ca,initialValue:sa,controlled:"checkbox"===aa.type||"radio"===aa.type?null!=aa.checked:null!=aa.value}}function D(R,aa){aa=aa.checked;null!=aa&&g(R,"checked",aa,!1)}function C(R,
aa){D(R,aa);var sa=f(aa.value),Ca=aa.type;if(null!=sa)if("number"===Ca){if(0===sa&&""===R.value||R.value!=sa)R.value=""+sa}else R.value!==""+sa&&(R.value=""+sa);else if("submit"===Ca||"reset"===Ca){R.removeAttribute("value");return}aa.hasOwnProperty("value")?y(R,aa.type,sa):aa.hasOwnProperty("defaultValue")&&y(R,aa.type,f(aa.defaultValue));null==aa.checked&&null!=aa.defaultChecked&&(R.defaultChecked=!!aa.defaultChecked)}function v(R,aa,sa){if(aa.hasOwnProperty("value")||aa.hasOwnProperty("defaultValue")){var Ca=
aa.type;if(!("submit"!==Ca&&"reset"!==Ca||void 0!==aa.value&&null!==aa.value))return;aa=""+R._wrapperState.initialValue;sa||aa===R.value||(R.value=aa);R.defaultValue=aa}sa=R.name;""!==sa&&(R.name="");R.defaultChecked=!!R._wrapperState.initialChecked;""!==sa&&(R.name=sa)}function y(R,aa,sa){if("number"!==aa||z(R.ownerDocument)!==R)null==sa?R.defaultValue=""+R._wrapperState.initialValue:R.defaultValue!==""+sa&&(R.defaultValue=""+sa)}function F(R,aa,sa,Ca){R=R.options;if(aa){aa={};for(var Ua=0;Ua<sa.length;Ua++)aa["$"+
sa[Ua]]=!0;for(sa=0;sa<R.length;sa++)Ua=aa.hasOwnProperty("$"+R[sa].value),R[sa].selected!==Ua&&(R[sa].selected=Ua),Ua&&Ca&&(R[sa].defaultSelected=!0)}else{sa=""+f(sa);aa=null;for(Ua=0;Ua<R.length;Ua++){if(R[Ua].value===sa){R[Ua].selected=!0;Ca&&(R[Ua].defaultSelected=!0);return}null!==aa||R[Ua].disabled||(aa=R[Ua])}null!==aa&&(aa.selected=!0)}}function J(R,aa){if(null!=aa.dangerouslySetInnerHTML)throw Error(b(91));return xg({},aa,{value:void 0,defaultValue:void 0,children:""+R._wrapperState.initialValue})}
function K(R,aa){var sa=aa.value;if(null==sa){sa=aa.children;aa=aa.defaultValue;if(null!=sa){if(null!=aa)throw Error(b(92));if(bg(sa)){if(1<sa.length)throw Error(b(93));sa=sa[0]}aa=sa}null==aa&&(aa="");sa=aa}R._wrapperState={initialValue:f(sa)}}function O(R,aa){var sa=f(aa.value),Ca=f(aa.defaultValue);null!=sa&&(sa=""+sa,sa!==R.value&&(R.value=sa),null==aa.defaultValue&&R.defaultValue!==sa&&(R.defaultValue=sa));null!=Ca&&(R.defaultValue=""+Ca)}function I(R){var aa=R.textContent;aa===R._wrapperState.initialValue&&
""!==aa&&null!==aa&&(R.value=aa)}function L(R){switch(R){case "svg":return"http://www.w3.org/2000/svg";case "math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function H(R,aa){return null==R||"http://www.w3.org/1999/xhtml"===R?L(aa):"http://www.w3.org/2000/svg"===R&&"foreignObject"===aa?"http://www.w3.org/1999/xhtml":R}function M(R,aa){if(aa){var sa=R.firstChild;if(sa&&sa===R.lastChild&&3===sa.nodeType){sa.nodeValue=aa;return}}R.textContent=aa}function Q(R,
aa,sa){return null==aa||"boolean"===typeof aa||""===aa?"":sa||"number"!==typeof aa||0===aa||xh.hasOwnProperty(R)&&xh[R]?(""+aa).trim():aa+"px"}function Z(R,aa){R=R.style;for(var sa in aa)if(aa.hasOwnProperty(sa)){var Ca=0===sa.indexOf("--"),Ua=Q(sa,aa[sa],Ca);"float"===sa&&(sa="cssFloat");Ca?R.setProperty(sa,Ua):R[sa]=Ua}}function ca(R,aa){if(aa){if(ij[R]&&(null!=aa.children||null!=aa.dangerouslySetInnerHTML))throw Error(b(137,R));if(null!=aa.dangerouslySetInnerHTML){if(null!=aa.children)throw Error(b(60));
if("object"!==typeof aa.dangerouslySetInnerHTML||!("__html"in aa.dangerouslySetInnerHTML))throw Error(b(61));}if(null!=aa.style&&"object"!==typeof aa.style)throw Error(b(62));}}function W(R,aa){if(-1===R.indexOf("-"))return"string"===typeof aa.is;switch(R){case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":return!1;default:return!0}}function T(R){R=R.target||R.srcElement||window;R.correspondingUseElement&&
(R=R.correspondingUseElement);return 3===R.nodeType?R.parentNode:R}function U(R){if(R=bf(R)){if("function"!==typeof yi)throw Error(b(280));var aa=R.stateNode;aa&&(aa=He(aa),yi(R.stateNode,R.type,aa))}}function ha(R){Xh?hi?hi.push(R):hi=[R]:Xh=R}function Y(){if(Xh){var R=Xh,aa=hi;hi=Xh=null;U(R);if(aa)for(R=0;R<aa.length;R++)U(aa[R])}}function ba(R,aa){return R(aa)}function ja(){}function ma(R,aa,sa){if(Zi)return R(aa,sa);Zi=!0;try{return ba(R,aa,sa)}finally{if(Zi=!1,null!==Xh||null!==hi)ja(),Y()}}
function ia(R,aa){var sa=R.stateNode;if(null===sa)return null;var Ca=He(sa);if(null===Ca)return null;sa=Ca[aa];a:switch(aa){case "onClick":case "onClickCapture":case "onDoubleClick":case "onDoubleClickCapture":case "onMouseDown":case "onMouseDownCapture":case "onMouseMove":case "onMouseMoveCapture":case "onMouseUp":case "onMouseUpCapture":case "onMouseEnter":(Ca=!Ca.disabled)||(R=R.type,Ca=!("button"===R||"input"===R||"select"===R||"textarea"===R));R=!Ca;break a;default:R=!1}if(R)return null;if(sa&&
"function"!==typeof sa)throw Error(b(231,aa,typeof sa));return sa}function oa(R,aa,sa,Ca,Ua,ab,Kb,lc,Ac){var od=Array.prototype.slice.call(arguments,3);try{aa.apply(sa,od)}catch(Ud){this.onError(Ud)}}function xa(R,aa,sa,Ca,Ua,ab,Kb,lc,Ac){Di=!1;Ei=null;oa.apply(ol,arguments)}function ra(R,aa,sa,Ca,Ua,ab,Kb,lc,Ac){xa.apply(this,arguments);if(Di){if(Di){var od=Ei;Di=!1;Ei=null}else throw Error(b(198));nk||(nk=!0,Dk=od)}}function la(R){var aa=R,sa=R;if(R.alternate)for(;aa.return;)aa=aa.return;else{R=
aa;do aa=R,0!==(aa.flags&4098)&&(sa=aa.return),R=aa.return;while(R)}return 3===aa.tag?sa:null}function ka(R){if(13===R.tag){var aa=R.memoizedState;null===aa&&(R=R.alternate,null!==R&&(aa=R.memoizedState));if(null!==aa)return aa.dehydrated}return null}function na(R){if(la(R)!==R)throw Error(b(188));}function qa(R){var aa=R.alternate;if(!aa){aa=la(R);if(null===aa)throw Error(b(188));return aa!==R?null:R}for(var sa=R,Ca=aa;;){var Ua=sa.return;if(null===Ua)break;var ab=Ua.alternate;if(null===ab){Ca=Ua.return;
if(null!==Ca){sa=Ca;continue}break}if(Ua.child===ab.child){for(ab=Ua.child;ab;){if(ab===sa)return na(Ua),R;if(ab===Ca)return na(Ua),aa;ab=ab.sibling}throw Error(b(188));}if(sa.return!==Ca.return)sa=Ua,Ca=ab;else{for(var Kb=!1,lc=Ua.child;lc;){if(lc===sa){Kb=!0;sa=Ua;Ca=ab;break}if(lc===Ca){Kb=!0;Ca=Ua;sa=ab;break}lc=lc.sibling}if(!Kb){for(lc=ab.child;lc;){if(lc===sa){Kb=!0;sa=ab;Ca=Ua;break}if(lc===Ca){Kb=!0;Ca=ab;sa=Ua;break}lc=lc.sibling}if(!Kb)throw Error(b(189));}}if(sa.alternate!==Ca)throw Error(b(190));
}if(3!==sa.tag)throw Error(b(188));return sa.stateNode.current===sa?R:aa}function ta(R){R=qa(R);return null!==R?za(R):null}function za(R){if(5===R.tag||6===R.tag)return R;for(R=R.child;null!==R;){var aa=za(R);if(null!==aa)return aa;R=R.sibling}return null}function Ia(R){if(zi&&"function"===typeof zi.onCommitFiberRoot)try{zi.onCommitFiberRoot(Yj,R,void 0,128===(R.current.flags&128))}catch(aa){}}function Xa(R){R>>>=0;return 0===R?32:31-(ql(R)/rl|0)|0}function $a(R){switch(R&-R){case 1:return 1;case 2:return 2;
case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return R&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return R&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return R}}function gb(R,
aa){var sa=R.pendingLanes;if(0===sa)return 0;var Ca=0,Ua=R.suspendedLanes,ab=R.pingedLanes,Kb=sa&268435455;if(0!==Kb){var lc=Kb&~Ua;0!==lc?Ca=$a(lc):(ab&=Kb,0!==ab&&(Ca=$a(ab)))}else Kb=sa&~Ua,0!==Kb?Ca=$a(Kb):0!==ab&&(Ca=$a(ab));if(0===Ca)return 0;if(0!==aa&&aa!==Ca&&0===(aa&Ua)&&(Ua=Ca&-Ca,ab=aa&-aa,Ua>=ab||16===Ua&&0!==(ab&4194240)))return aa;0!==(Ca&4)&&(Ca|=sa&16);aa=R.entangledLanes;if(0!==aa)for(R=R.entanglements,aa&=Ca;0<aa;)sa=31-Fi(aa),Ua=1<<sa,Ca|=R[sa],aa&=~Ua;return Ca}function sb(R,
aa){switch(R){case 1:case 2:case 4:return aa+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return aa+5E3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jb(R,aa){for(var sa=R.suspendedLanes,Ca=R.pingedLanes,Ua=R.expirationTimes,
ab=R.pendingLanes;0<ab;){var Kb=31-Fi(ab),lc=1<<Kb,Ac=Ua[Kb];if(-1===Ac){if(0===(lc&sa)||0!==(lc&Ca))Ua[Kb]=sb(lc,aa)}else Ac<=aa&&(R.expiredLanes|=lc);ab&=~lc}}function vb(R){R=R.pendingLanes&-1073741825;return 0!==R?R:R&1073741824?1073741824:0}function qb(){var R=Ai;Ai<<=1;0===(Ai&4194240)&&(Ai=64);return R}function Bb(R){for(var aa=[],sa=0;31>sa;sa++)aa.push(R);return aa}function ub(R,aa,sa){R.pendingLanes|=aa;536870912!==aa&&(R.suspendedLanes=0,R.pingedLanes=0);R=R.eventTimes;aa=31-Fi(aa);R[aa]=
sa}function wb(R,aa){var sa=R.pendingLanes&~aa;R.pendingLanes=aa;R.suspendedLanes=0;R.pingedLanes=0;R.expiredLanes&=aa;R.mutableReadLanes&=aa;R.entangledLanes&=aa;aa=R.entanglements;var Ca=R.eventTimes;for(R=R.expirationTimes;0<sa;){var Ua=31-Fi(sa),ab=1<<Ua;aa[Ua]=0;Ca[Ua]=-1;R[Ua]=-1;sa&=~ab}}function rb(R,aa){var sa=R.entangledLanes|=aa;for(R=R.entanglements;sa;){var Ca=31-Fi(sa),Ua=1<<Ca;Ua&aa|R[Ca]&aa&&(R[Ca]|=aa);sa&=~Ua}}function Ab(R){R&=-R;return 1<R?4<R?0!==(R&268435455)?16:536870912:4:
1}function Ma(R,aa){switch(R){case "focusin":case "focusout":Ri=null;break;case "dragenter":case "dragleave":Ce=null;break;case "mouseover":case "mouseout":Si=null;break;case "pointerover":case "pointerout":ch.delete(aa.pointerId);break;case "gotpointercapture":case "lostpointercapture":gi.delete(aa.pointerId)}}function La(R,aa,sa,Ca,Ua,ab){if(null===R||R.nativeEvent!==ab)return R={blockedOn:aa,domEventName:sa,eventSystemFlags:Ca,nativeEvent:ab,targetContainers:[Ua]},null!==aa&&(aa=bf(aa),null!==
aa&&ud(aa)),R;R.eventSystemFlags|=Ca;aa=R.targetContainers;null!==Ua&&-1===aa.indexOf(Ua)&&aa.push(Ua);return R}function ya(R,aa,sa,Ca,Ua){switch(aa){case "focusin":return Ri=La(Ri,R,aa,sa,Ca,Ua),!0;case "dragenter":return Ce=La(Ce,R,aa,sa,Ca,Ua),!0;case "mouseover":return Si=La(Si,R,aa,sa,Ca,Ua),!0;case "pointerover":var ab=Ua.pointerId;ch.set(ab,La(ch.get(ab)||null,R,aa,sa,Ca,Ua));return!0;case "gotpointercapture":return ab=Ua.pointerId,gi.set(ab,La(gi.get(ab)||null,R,aa,sa,Ca,Ua)),!0}return!1}
function Aa(R){var aa=hf(R.target);if(null!==aa){var sa=la(aa);if(null!==sa)if(aa=sa.tag,13===aa){if(aa=ka(sa),null!==aa){R.blockedOn=aa;Jd(R.priority,function(){Zd(sa)});return}}else if(3===aa&&sa.stateNode.current.memoizedState.isDehydrated){R.blockedOn=3===sa.tag?sa.stateNode.containerInfo:null;return}}R.blockedOn=null}function Ka(R){if(null!==R.blockedOn)return!1;for(var aa=R.targetContainers;0<aa.length;){var sa=Db(R.domEventName,R.eventSystemFlags,aa[0],R.nativeEvent);if(null===sa){sa=R.nativeEvent;
var Ca=new sa.constructor(sa.type,sa);Ag=Ca;sa.target.dispatchEvent(Ca);Ag=null}else return aa=bf(sa),null!==aa&&ud(aa),R.blockedOn=sa,!1;aa.shift()}return!0}function Ta(R,aa,sa){Ka(R)&&sa.delete(aa)}function bb(){vj=!1;null!==Ri&&Ka(Ri)&&(Ri=null);null!==Ce&&Ka(Ce)&&(Ce=null);null!==Si&&Ka(Si)&&(Si=null);ch.forEach(Ta);gi.forEach(Ta)}function cb(R,aa){R.blockedOn===aa&&(R.blockedOn=null,vj||(vj=!0,Gc.unstable_scheduleCallback(Gc.unstable_NormalPriority,bb)))}function Eb(R){function aa(Ua){return cb(Ua,
R)}if(0<Lj.length){cb(Lj[0],R);for(var sa=1;sa<Lj.length;sa++){var Ca=Lj[sa];Ca.blockedOn===R&&(Ca.blockedOn=null)}}null!==Ri&&cb(Ri,R);null!==Ce&&cb(Ce,R);null!==Si&&cb(Si,R);ch.forEach(aa);gi.forEach(aa);for(sa=0;sa<$i.length;sa++)Ca=$i[sa],Ca.blockedOn===R&&(Ca.blockedOn=null);for(;0<$i.length&&(sa=$i[0],null===sa.blockedOn);)Aa(sa),null===sa.blockedOn&&$i.shift()}function Pb(R,aa,sa,Ca){var Ua=gg,ab=zj.transition;zj.transition=null;try{gg=1,pb(R,aa,sa,Ca)}finally{gg=Ua,zj.transition=ab}}function fc(R,
aa,sa,Ca){var Ua=gg,ab=zj.transition;zj.transition=null;try{gg=4,pb(R,aa,sa,Ca)}finally{gg=Ua,zj.transition=ab}}function pb(R,aa,sa,Ca){if(zh){var Ua=Db(R,aa,sa,Ca);if(null===Ua)Nd(R,aa,Ca,ig,sa),Ma(R,Ca);else if(ya(Ua,R,aa,sa,Ca))Ca.stopPropagation();else if(Ma(R,Ca),aa&4&&-1<zk.indexOf(R)){for(;null!==Ua;){var ab=bf(Ua);null!==ab&&Hc(ab);ab=Db(R,aa,sa,Ca);null===ab&&Nd(R,aa,Ca,ig,sa);if(ab===Ua)break;Ua=ab}null!==Ua&&Ca.stopPropagation()}else Nd(R,aa,Ca,null,sa)}}function Db(R,aa,sa,Ca){ig=null;
R=T(Ca);R=hf(R);if(null!==R)if(aa=la(R),null===aa)R=null;else if(sa=aa.tag,13===sa){R=ka(aa);if(null!==R)return R;R=null}else if(3===sa){if(aa.stateNode.current.memoizedState.isDehydrated)return 3===aa.tag?aa.stateNode.containerInfo:null;R=null}else aa!==R&&(R=null);ig=R;return null}function Rb(R){switch(R){case "cancel":case "click":case "close":case "contextmenu":case "copy":case "cut":case "auxclick":case "dblclick":case "dragend":case "dragstart":case "drop":case "focusin":case "focusout":case "input":case "invalid":case "keydown":case "keypress":case "keyup":case "mousedown":case "mouseup":case "paste":case "pause":case "play":case "pointercancel":case "pointerdown":case "pointerup":case "ratechange":case "reset":case "resize":case "seeked":case "submit":case "touchcancel":case "touchend":case "touchstart":case "volumechange":case "change":case "selectionchange":case "textInput":case "compositionstart":case "compositionend":case "compositionupdate":case "beforeblur":case "afterblur":case "beforeinput":case "blur":case "fullscreenchange":case "focus":case "hashchange":case "popstate":case "select":case "selectstart":return 1;
case "drag":case "dragenter":case "dragexit":case "dragleave":case "dragover":case "mousemove":case "mouseout":case "mouseover":case "pointermove":case "pointerout":case "pointerover":case "scroll":case "toggle":case "touchmove":case "wheel":case "mouseenter":case "mouseleave":case "pointerenter":case "pointerleave":return 4;case "message":switch(Kj()){case tj:return 1;case uj:return 4;case Mi:case Xj:return 16;case el:return 536870912;default:return 16}default:return 16}}function xc(){if(ii)return ii;
var R,aa=Aj,sa=aa.length,Ca,Ua="value"in Yh?Yh.value:Yh.textContent,ab=Ua.length;for(R=0;R<sa&&aa[R]===Ua[R];R++);var Kb=sa-R;for(Ca=1;Ca<=Kb&&aa[sa-Ca]===Ua[ab-Ca];Ca++);return ii=Ua.slice(R,1<Ca?1-Ca:void 0)}function Ic(R){var aa=R.keyCode;"charCode"in R?(R=R.charCode,0===R&&13===aa&&(R=13)):R=aa;10===R&&(R=13);return 32<=R||13===R?R:0}function Ja(){return!0}function Pa(){return!1}function db(R){function aa(sa,Ca,Ua,ab,Kb){this._reactName=sa;this._targetInst=Ua;this.type=Ca;this.nativeEvent=ab;
this.target=Kb;this.currentTarget=null;for(var lc in R)R.hasOwnProperty(lc)&&(sa=R[lc],this[lc]=sa?sa(ab):ab[lc]);this.isDefaultPrevented=(null!=ab.defaultPrevented?ab.defaultPrevented:!1===ab.returnValue)?Ja:Pa;this.isPropagationStopped=Pa;return this}xg(aa.prototype,{preventDefault:function(){this.defaultPrevented=!0;var sa=this.nativeEvent;sa&&(sa.preventDefault?sa.preventDefault():"unknown"!==typeof sa.returnValue&&(sa.returnValue=!1),this.isDefaultPrevented=Ja)},stopPropagation:function(){var sa=
this.nativeEvent;sa&&(sa.stopPropagation?sa.stopPropagation():"unknown"!==typeof sa.cancelBubble&&(sa.cancelBubble=!0),this.isPropagationStopped=Ja)},persist:function(){},isPersistent:Ja});return aa}function Jb(R){var aa=this.nativeEvent;return aa.getModifierState?aa.getModifierState(R):(R=Hk[R])?!!aa[R]:!1}function Gb(){return Jb}function cc(R,aa){switch(R){case "keyup":return-1!==Ok.indexOf(aa.keyCode);case "keydown":return 229!==aa.keyCode;case "keypress":case "mousedown":case "focusout":return!0;
default:return!1}}function uc(R){R=R.detail;return"object"===typeof R&&"data"in R?R.data:null}function fd(R,aa){switch(R){case "compositionend":return uc(aa);case "keypress":if(32!==aa.which)return null;sk=!0;return Pk;case "textInput":return R=aa.data,R===Pk&&sk?null:R;default:return null}}function kb(R,aa){if(Fj)return"compositionend"===R||!Dj&&cc(R,aa)?(R=xc(),ii=Aj=Yh=null,Fj=!1,R):null;switch(R){case "paste":return null;case "keypress":if(!(aa.ctrlKey||aa.altKey||aa.metaKey)||aa.ctrlKey&&aa.altKey){if(aa.char&&
1<aa.char.length)return aa.char;if(aa.which)return String.fromCharCode(aa.which)}return null;case "compositionend":return lk&&"ko"!==aa.locale?null:aa.data;default:return null}}function Qb(R){var aa=R&&R.nodeName&&R.nodeName.toLowerCase();return"input"===aa?!!il[R.type]:"textarea"===aa?!0:!1}function dc(R,aa,sa,Ca){ha(Ca);aa=Wd(aa,"onChange");0<aa.length&&(sa=new Mj("onChange","change",null,sa,Ca),R.push({event:sa,listeners:aa}))}function Ec(R){Nc(R,0)}function Qc(R){var aa=Qe(R);if(x(aa))return R}
function Tc(R,aa){if("change"===R)return aa}function tb(){Nj&&(Nj.detachEvent("onpropertychange",Ib),Oj=Nj=null)}function Ib(R){if("value"===R.propertyName&&Qc(Oj)){var aa=[];dc(aa,Oj,R,T(R));ma(Ec,aa)}}function sc(R,aa,sa){"focusin"===R?(tb(),Nj=aa,Oj=sa,Nj.attachEvent("onpropertychange",Ib)):"focusout"===R&&tb()}function pc(R){if("selectionchange"===R||"keyup"===R||"keydown"===R)return Qc(Oj)}function zc(R,aa){if("click"===R)return Qc(aa)}function Wb(R,aa){if("input"===R||"change"===R)return Qc(aa)}
function Ub(R,aa){return R===aa&&(0!==R||1/R===1/aa)||R!==R&&aa!==aa}function yb(R,aa){if(ji(R,aa))return!0;if("object"!==typeof R||null===R||"object"!==typeof aa||null===aa)return!1;var sa=Object.keys(R),Ca=Object.keys(aa);if(sa.length!==Ca.length)return!1;for(Ca=0;Ca<sa.length;Ca++){var Ua=sa[Ca];if(!sd.call(aa,Ua)||!ji(R[Ua],aa[Ua]))return!1}return!0}function ac(R){for(;R&&R.firstChild;)R=R.firstChild;return R}function Vb(R,aa){var sa=ac(R);R=0;for(var Ca;sa;){if(3===sa.nodeType){Ca=R+sa.textContent.length;
if(R<=aa&&Ca>=aa)return{node:sa,offset:aa-R};R=Ca}a:{for(;sa;){if(sa.nextSibling){sa=sa.nextSibling;break a}sa=sa.parentNode}sa=void 0}sa=ac(sa)}}function mc(R,aa){return R&&aa?R===aa?!0:R&&3===R.nodeType?!1:aa&&3===aa.nodeType?mc(R,aa.parentNode):"contains"in R?R.contains(aa):R.compareDocumentPosition?!!(R.compareDocumentPosition(aa)&16):!1:!1}function tc(){for(var R=window,aa=z();aa instanceof R.HTMLIFrameElement;){try{var sa="string"===typeof aa.contentWindow.location.href}catch(Ca){sa=!1}if(sa)R=
aa.contentWindow;else break;aa=z(R.document)}return aa}function Uc(R){var aa=R&&R.nodeName&&R.nodeName.toLowerCase();return aa&&("input"===aa&&("text"===R.type||"search"===R.type||"tel"===R.type||"url"===R.type||"password"===R.type)||"textarea"===aa||"true"===R.contentEditable)}function kd(R){var aa=tc(),sa=R.focusedElem,Ca=R.selectionRange;if(aa!==sa&&sa&&sa.ownerDocument&&mc(sa.ownerDocument.documentElement,sa)){if(null!==Ca&&Uc(sa))if(aa=Ca.start,R=Ca.end,void 0===R&&(R=aa),"selectionStart"in sa)sa.selectionStart=
aa,sa.selectionEnd=Math.min(R,sa.value.length);else if(R=(aa=sa.ownerDocument||document)&&aa.defaultView||window,R.getSelection){R=R.getSelection();var Ua=sa.textContent.length,ab=Math.min(Ca.start,Ua);Ca=void 0===Ca.end?ab:Math.min(Ca.end,Ua);!R.extend&&ab>Ca&&(Ua=Ca,Ca=ab,ab=Ua);Ua=Vb(sa,ab);var Kb=Vb(sa,Ca);Ua&&Kb&&(1!==R.rangeCount||R.anchorNode!==Ua.node||R.anchorOffset!==Ua.offset||R.focusNode!==Kb.node||R.focusOffset!==Kb.offset)&&(aa=aa.createRange(),aa.setStart(Ua.node,Ua.offset),R.removeAllRanges(),
ab>Ca?(R.addRange(aa),R.extend(Kb.node,Kb.offset)):(aa.setEnd(Kb.node,Kb.offset),R.addRange(aa)))}aa=[];for(R=sa;R=R.parentNode;)1===R.nodeType&&aa.push({element:R,left:R.scrollLeft,top:R.scrollTop});"function"===typeof sa.focus&&sa.focus();for(sa=0;sa<aa.length;sa++)R=aa[sa],R.element.scrollLeft=R.left,R.element.scrollTop=R.top}}function Bd(R,aa,sa){var Ca=sa.window===sa?sa.document:9===sa.nodeType?sa:sa.ownerDocument;wj||null==Gj||Gj!==z(Ca)||(Ca=Gj,"selectionStart"in Ca&&Uc(Ca)?Ca={start:Ca.selectionStart,
end:Ca.selectionEnd}:(Ca=(Ca.ownerDocument&&Ca.ownerDocument.defaultView||window).getSelection(),Ca={anchorNode:Ca.anchorNode,anchorOffset:Ca.anchorOffset,focusNode:Ca.focusNode,focusOffset:Ca.focusOffset}),ck&&yb(ck,Ca)||(ck=Ca,Ca=Wd(uk,"onSelect"),0<Ca.length&&(aa=new Mj("onSelect","select",null,aa,sa),R.push({event:aa,listeners:Ca}),aa.target=Gj)))}function Fd(R,aa){var sa={};sa[R.toLowerCase()]=aa.toLowerCase();sa["Webkit"+R]="webkit"+aa;sa["Moz"+R]="moz"+aa;return sa}function yd(R){if(Bk[R])return Bk[R];
if(!ki[R])return R;var aa=ki[R],sa;for(sa in aa)if(aa.hasOwnProperty(sa)&&sa in oj)return Bk[R]=aa[sa];return R}function Lc(R,aa){Tk.set(R,aa);N(aa,[R])}function cd(R,aa,sa){var Ca=R.type||"unknown-event";R.currentTarget=sa;ra(Ca,aa,void 0,R);R.currentTarget=null}function Nc(R,aa){aa=0!==(aa&4);for(var sa=0;sa<R.length;sa++){var Ca=R[sa],Ua=Ca.event;Ca=Ca.listeners;a:{var ab=void 0;if(aa)for(var Kb=Ca.length-1;0<=Kb;Kb--){var lc=Ca[Kb],Ac=lc.instance,od=lc.currentTarget;lc=lc.listener;if(Ac!==ab&&
Ua.isPropagationStopped())break a;cd(Ua,lc,od);ab=Ac}else for(Kb=0;Kb<Ca.length;Kb++){lc=Ca[Kb];Ac=lc.instance;od=lc.currentTarget;lc=lc.listener;if(Ac!==ab&&Ua.isPropagationStopped())break a;cd(Ua,lc,od);ab=Ac}}}if(nk)throw R=Dk,nk=!1,Dk=null,R;}function Xc(R,aa){var sa=aa[Yk];void 0===sa&&(sa=aa[Yk]=new Set);var Ca=R+"__bubble";sa.has(Ca)||(id(aa,R,2,!1),sa.add(Ca))}function Zc(R,aa,sa){var Ca=0;aa&&(Ca|=4);id(sa,R,Ca,aa)}function Sc(R){if(!R[Jh]){R[Jh]=!0;Yc.forEach(function(sa){"selectionchange"!==
sa&&(Bh.has(sa)||Zc(sa,!1,R),Zc(sa,!0,R))});var aa=9===R.nodeType?R:R.ownerDocument;null===aa||aa[Jh]||(aa[Jh]=!0,Zc("selectionchange",!1,aa))}}function id(R,aa,sa,Ca){switch(Rb(aa)){case 1:var Ua=Pb;break;case 4:Ua=fc;break;default:Ua=pb}sa=Ua.bind(null,aa,sa,R);Ua=void 0;!Qi||"touchstart"!==aa&&"touchmove"!==aa&&"wheel"!==aa||(Ua=!0);Ca?void 0!==Ua?R.addEventListener(aa,sa,{capture:!0,passive:Ua}):R.addEventListener(aa,sa,!0):void 0!==Ua?R.addEventListener(aa,sa,{passive:Ua}):R.addEventListener(aa,
sa,!1)}function Nd(R,aa,sa,Ca,Ua){var ab=Ca;if(0===(aa&1)&&0===(aa&2)&&null!==Ca)a:for(;;){if(null===Ca)return;var Kb=Ca.tag;if(3===Kb||4===Kb){var lc=Ca.stateNode.containerInfo;if(lc===Ua||8===lc.nodeType&&lc.parentNode===Ua)break;if(4===Kb)for(Kb=Ca.return;null!==Kb;){var Ac=Kb.tag;if(3===Ac||4===Ac)if(Ac=Kb.stateNode.containerInfo,Ac===Ua||8===Ac.nodeType&&Ac.parentNode===Ua)return;Kb=Kb.return}for(;null!==lc;){Kb=hf(lc);if(null===Kb)return;Ac=Kb.tag;if(5===Ac||6===Ac){Ca=ab=Kb;continue a}lc=lc.parentNode}}Ca=
Ca.return}ma(function(){var od=ab,Ud=T(sa),Xd=[];a:{var ie=Tk.get(R);if(void 0!==ie){var ze=Mj,Pe=R;switch(R){case "keypress":if(0===Ic(sa))break a;case "keydown":case "keyup":ze=Jk;break;case "focusin":Pe="focus";ze=Ak;break;case "focusout":Pe="blur";ze=Ak;break;case "beforeblur":case "afterblur":ze=Ak;break;case "click":if(2===sa.button)break a;case "auxclick":case "dblclick":case "mousedown":case "mousemove":case "mouseup":case "mouseout":case "mouseover":case "contextmenu":ze=Cj;break;case "drag":case "dragend":case "dragenter":case "dragexit":case "dragleave":case "dragover":case "dragstart":case "drop":ze=
Rh;break;case "touchcancel":case "touchend":case "touchmove":case "touchstart":ze=nj;break;case jl:case dk:case kl:ze=qg;break;case ll:ze=Mk;break;case "scroll":ze=Qh;break;case "wheel":ze=Nk;break;case "copy":case "cut":case "paste":ze=Ek;break;case "gotpointercapture":case "lostpointercapture":case "pointercancel":case "pointerdown":case "pointermove":case "pointerout":case "pointerover":case "pointerup":ze=rk}var cf=0!==(aa&4),Pf=!cf&&"scroll"===R,td=cf?null!==ie?ie+"Capture":null:ie;cf=[];for(var hd=
od,Cd;null!==hd;){Cd=hd;var Fe=Cd.stateNode;5===Cd.tag&&null!==Fe&&(Cd=Fe,null!==td&&(Fe=ia(hd,td),null!=Fe&&cf.push(Rd(hd,Fe,Cd))));if(Pf)break;hd=hd.return}0<cf.length&&(ie=new ze(ie,Pe,null,sa,Ud),Xd.push({event:ie,listeners:cf}))}}if(0===(aa&7)){ie="mouseover"===R||"pointerover"===R;ze="mouseout"===R||"pointerout"===R;if(!ie||sa===Ag||!(Pe=sa.relatedTarget||sa.fromElement)||!hf(Pe)&&!Pe[bj])if(ze||ie){ie=Ud.window===Ud?Ud:(ie=Ud.ownerDocument)?ie.defaultView||ie.parentWindow:window;if(ze){if(Pe=
sa.relatedTarget||sa.toElement,ze=od,Pe=Pe?hf(Pe):null,null!==Pe&&(Pf=la(Pe),Pe!==Pf||5!==Pe.tag&&6!==Pe.tag))Pe=null}else ze=null,Pe=od;if(ze!==Pe){cf=Cj;Fe="onMouseLeave";td="onMouseEnter";hd="mouse";if("pointerout"===R||"pointerover"===R)cf=rk,Fe="onPointerLeave",td="onPointerEnter",hd="pointer";Pf=null==ze?ie:Qe(ze);Cd=null==Pe?ie:Qe(Pe);ie=new cf(Fe,hd+"leave",ze,sa,Ud);ie.target=Pf;ie.relatedTarget=Cd;Fe=null;hf(Ud)===od&&(cf=new cf(td,hd+"enter",Pe,sa,Ud),cf.target=Cd,cf.relatedTarget=Pf,Fe=
cf);Pf=Fe;if(ze&&Pe)b:{cf=ze;td=Pe;hd=0;for(Cd=cf;Cd;Cd=Se(Cd))hd++;Cd=0;for(Fe=td;Fe;Fe=Se(Fe))Cd++;for(;0<hd-Cd;)cf=Se(cf),hd--;for(;0<Cd-hd;)td=Se(td),Cd--;for(;hd--;){if(cf===td||null!==td&&cf===td.alternate)break b;cf=Se(cf);td=Se(td)}cf=null}else cf=null;null!==ze&&Ne(Xd,ie,ze,cf,!1);null!==Pe&&null!==Pf&&Ne(Xd,Pf,Pe,cf,!0)}}ie=od?Qe(od):window;ze=ie.nodeName&&ie.nodeName.toLowerCase();if("select"===ze||"input"===ze&&"file"===ie.type)var kf=Tc;else if(Qb(ie))if(Qk)kf=Wb;else{kf=pc;var yf=sc}else(ze=
ie.nodeName)&&"input"===ze.toLowerCase()&&("checkbox"===ie.type||"radio"===ie.type)&&(kf=zc);kf&&(kf=kf(R,od))?dc(Xd,kf,sa,Ud):(yf&&yf(R,ie,od),"focusout"===R&&(yf=ie._wrapperState)&&yf.controlled&&"number"===ie.type&&y(ie,"number",ie.value));yf=od?Qe(od):window;switch(R){case "focusin":if(Qb(yf)||"true"===yf.contentEditable)Gj=yf,uk=od,ck=null;break;case "focusout":ck=uk=Gj=null;break;case "mousedown":wj=!0;break;case "contextmenu":case "mouseup":case "dragend":wj=!1;Bd(Xd,sa,Ud);break;case "selectionchange":if(eh)break;
case "keydown":case "keyup":Bd(Xd,sa,Ud)}var zf;if(Dj)a:{switch(R){case "compositionstart":var Hf="onCompositionStart";break a;case "compositionend":Hf="onCompositionEnd";break a;case "compositionupdate":Hf="onCompositionUpdate";break a}Hf=void 0}else Fj?cc(R,sa)&&(Hf="onCompositionEnd"):"keydown"===R&&229===sa.keyCode&&(Hf="onCompositionStart");Hf&&(lk&&"ko"!==sa.locale&&(Fj||"onCompositionStart"!==Hf?"onCompositionEnd"===Hf&&Fj&&(zf=xc()):(Yh=Ud,Aj="value"in Yh?Yh.value:Yh.textContent,Fj=!0)),yf=
Wd(od,Hf),0<yf.length&&(Hf=new pk(Hf,R,null,sa,Ud),Xd.push({event:Hf,listeners:yf}),zf?Hf.data=zf:(zf=uc(sa),null!==zf&&(Hf.data=zf))));if(zf=kk?fd(R,sa):kb(R,sa))od=Wd(od,"onBeforeInput"),0<od.length&&(Ud=new pk("onBeforeInput","beforeinput",null,sa,Ud),Xd.push({event:Ud,listeners:od}),Ud.data=zf)}Nc(Xd,aa)})}function Rd(R,aa,sa){return{instance:R,listener:aa,currentTarget:sa}}function Wd(R,aa){for(var sa=aa+"Capture",Ca=[];null!==R;){var Ua=R,ab=Ua.stateNode;5===Ua.tag&&null!==ab&&(Ua=ab,ab=ia(R,
sa),null!=ab&&Ca.unshift(Rd(R,ab,Ua)),ab=ia(R,aa),null!=ab&&Ca.push(Rd(R,ab,Ua)));R=R.return}return Ca}function Se(R){if(null===R)return null;do R=R.return;while(R&&5!==R.tag);return R?R:null}function Ne(R,aa,sa,Ca,Ua){for(var ab=aa._reactName,Kb=[];null!==sa&&sa!==Ca;){var lc=sa,Ac=lc.alternate,od=lc.stateNode;if(null!==Ac&&Ac===Ca)break;5===lc.tag&&null!==od&&(lc=od,Ua?(Ac=ia(sa,ab),null!=Ac&&Kb.unshift(Rd(sa,Ac,lc))):Ua||(Ac=ia(sa,ab),null!=Ac&&Kb.push(Rd(sa,Ac,lc))));sa=sa.return}0!==Kb.length&&
R.push({event:aa,listeners:Kb})}function te(R){return("string"===typeof R?R:""+R).replace(Zh,"\n").replace(li,"")}function qf(R,aa,sa){aa=te(aa);if(te(R)!==aa&&sa)throw Error(b(425));}function sf(){}function of(R,aa){return"textarea"===R||"noscript"===R||"string"===typeof aa.children||"number"===typeof aa.children||"object"===typeof aa.dangerouslySetInnerHTML&&null!==aa.dangerouslySetInnerHTML&&null!=aa.dangerouslySetInnerHTML.__html}function vf(R){setTimeout(function(){throw R;})}function Bf(R,aa){var sa=
aa,Ca=0;do{var Ua=sa.nextSibling;R.removeChild(sa);if(Ua&&8===Ua.nodeType)if(sa=Ua.data,"/$"===sa){if(0===Ca){R.removeChild(Ua);Eb(aa);return}Ca--}else"$"!==sa&&"$?"!==sa&&"$!"!==sa||Ca++;sa=Ua}while(sa);Eb(aa)}function Sd(R){for(;null!=R;R=R.nextSibling){var aa=R.nodeType;if(1===aa||3===aa)break;if(8===aa){aa=R.data;if("$"===aa||"$!"===aa||"$?"===aa)break;if("/$"===aa)return null}}return R}function De(R){R=R.previousSibling;for(var aa=0;R;){if(8===R.nodeType){var sa=R.data;if("$"===sa||"$!"===sa||
"$?"===sa){if(0===aa)return R;aa--}else"/$"===sa&&aa++}R=R.previousSibling}return null}function hf(R){var aa=R[Ah];if(aa)return aa;for(var sa=R.parentNode;sa;){if(aa=sa[bj]||sa[Ah]){sa=aa.alternate;if(null!==aa.child||null!==sa&&null!==sa.child)for(R=De(R);null!==R;){if(sa=R[Ah])return sa;R=De(R)}return aa}R=sa;sa=R.parentNode}return null}function bf(R){R=R[Ah]||R[bj];return!R||5!==R.tag&&6!==R.tag&&13!==R.tag&&3!==R.tag?null:R}function Qe(R){if(5===R.tag||6===R.tag)return R.stateNode;throw Error(b(33));
}function He(R){return R[dh]||null}function $e(R){return{current:R}}function df(R){0>Ch||(R.current=vk[Ch],vk[Ch]=null,Ch--)}function Rc(R,aa){Ch++;vk[Ch]=R.current;R.current=aa}function Gd(R,aa){var sa=R.type.contextTypes;if(!sa)return qj;var Ca=R.stateNode;if(Ca&&Ca.__reactInternalMemoizedUnmaskedChildContext===aa)return Ca.__reactInternalMemoizedMaskedChildContext;var Ua={},ab;for(ab in sa)Ua[ab]=aa[ab];Ca&&(R=R.stateNode,R.__reactInternalMemoizedUnmaskedChildContext=aa,R.__reactInternalMemoizedMaskedChildContext=
Ua);return Ua}function Mb(R){R=R.childContextTypes;return null!==R&&void 0!==R}function $b(){df(Sh);df(Dh)}function Mc(R,aa,sa){if(Dh.current!==qj)throw Error(b(168));Rc(Dh,aa);Rc(Sh,sa)}function Hd(R,aa,sa){var Ca=R.stateNode;aa=aa.childContextTypes;if("function"!==typeof Ca.getChildContext)return sa;Ca=Ca.getChildContext();for(var Ua in Ca)if(!(Ua in aa))throw Error(b(108,e(R)||"Unknown",Ua));return xg({},sa,Ca)}function qd(R){R=(R=R.stateNode)&&R.__reactInternalMemoizedMergedChildContext||qj;rj=
Dh.current;Rc(Dh,R);Rc(Sh,Sh.current);return!0}function qe(R,aa,sa){var Ca=R.stateNode;if(!Ca)throw Error(b(169));sa?(R=Hd(R,aa,rj),Ca.__reactInternalMemoizedMergedChildContext=R,df(Sh),df(Dh),Rc(Dh,R)):df(Sh);Rc(Sh,sa)}function Id(R){null===Oi?Oi=[R]:Oi.push(R)}function ue(R){cj=!0;Id(R)}function Be(){if(!Zk&&null!==Oi){Zk=!0;var R=0,aa=gg;try{var sa=Oi;for(gg=1;R<sa.length;R++){var Ca=sa[R];do Ca=Ca(!0);while(null!==Ca)}Oi=null;cj=!1}catch(Ua){throw null!==Oi&&(Oi=Oi.slice(R+1)),fl(tj,Be),Ua;}finally{gg=
aa,Zk=!1}}return null}function oe(R,aa){lj[Eh++]=xk;lj[Eh++]=wk;wk=R;xk=aa}function zb(R,aa,sa){$h[ni++]=Ui;$h[ni++]=Ig;$h[ni++]=Ij;Ij=R;var Ca=Ui;R=Ig;var Ua=32-Fi(Ca)-1;Ca&=~(1<<Ua);sa+=1;var ab=32-Fi(aa)+Ua;if(30<ab){var Kb=Ua-Ua%5;ab=(Ca&(1<<Kb)-1).toString(32);Ca>>=Kb;Ua-=Kb;Ui=1<<32-Fi(aa)+Ua|sa<<Ua|Ca;Ig=ab+R}else Ui=1<<ab|sa<<Ua|Ca,Ig=R}function qc(R){null!==R.return&&(oe(R,1),zb(R,1,0))}function Yb(R){for(;R===wk;)wk=lj[--Eh],lj[Eh]=null,xk=lj[--Eh],lj[Eh]=null;for(;R===Ij;)Ij=$h[--ni],$h[ni]=
null,Ig=$h[--ni],$h[ni]=null,Ui=$h[--ni],$h[ni]=null}function Bc(R,aa){var sa=Ee(5,null,null,0);sa.elementType="DELETED";sa.stateNode=aa;sa.return=R;aa=R.deletions;null===aa?(R.deletions=[sa],R.flags|=16):aa.push(sa)}function bd(R,aa){switch(R.tag){case 5:var sa=R.type;aa=1!==aa.nodeType||sa.toLowerCase()!==aa.nodeName.toLowerCase()?null:aa;return null!==aa?(R.stateNode=aa,ai=R,Th=Sd(aa.firstChild),!0):!1;case 6:return aa=""===R.pendingProps||3!==aa.nodeType?null:aa,null!==aa?(R.stateNode=aa,ai=R,
Th=null,!0):!1;case 13:return aa=8!==aa.nodeType?null:aa,null!==aa?(sa=null!==Ij?{id:Ui,overflow:Ig}:null,R.memoizedState={dehydrated:aa,treeContext:sa,retryLane:1073741824},sa=Ee(18,null,null,0),sa.stateNode=aa,sa.return=R,R.child=sa,ai=R,Th=null,!0):!1;default:return!1}}function ed(R){return 0!==(R.mode&1)&&0===(R.flags&128)}function Vc(R){if(Fg){var aa=Th;if(aa){var sa=aa;if(!bd(R,aa)){if(ed(R))throw Error(b(418));aa=Sd(sa.nextSibling);var Ca=ai;aa&&bd(R,aa)?Bc(Ca,sa):(R.flags=R.flags&-4097|2,
Fg=!1,ai=R)}}else{if(ed(R))throw Error(b(418));R.flags=R.flags&-4097|2;Fg=!1;ai=R}}}function Pc(R){for(R=R.return;null!==R&&5!==R.tag&&3!==R.tag&&13!==R.tag;)R=R.return;ai=R}function yc(R){if(R!==ai)return!1;if(!Fg)return Pc(R),Fg=!0,!1;var aa;(aa=3!==R.tag)&&!(aa=5!==R.tag)&&(aa=R.type,aa="head"!==aa&&"body"!==aa&&!of(R.type,R.memoizedProps));if(aa&&(aa=Th)){if(ed(R))throw vc(),Error(b(418));for(;aa;)Bc(R,aa),aa=Sd(aa.nextSibling)}Pc(R);if(13===R.tag){R=R.memoizedState;R=null!==R?R.dehydrated:null;
if(!R)throw Error(b(317));a:{R=R.nextSibling;for(aa=0;R;){if(8===R.nodeType){var sa=R.data;if("/$"===sa){if(0===aa){Th=Sd(R.nextSibling);break a}aa--}else"$"!==sa&&"$!"!==sa&&"$?"!==sa||aa++}R=R.nextSibling}Th=null}}else Th=ai?Sd(R.stateNode.nextSibling):null;return!0}function vc(){for(var R=Th;R;)R=Sd(R.nextSibling)}function oc(){Th=ai=null;Fg=!1}function vd(R){null===Gi?Gi=[R]:Gi.push(R)}function Qd(R,aa){if(R&&R.defaultProps){aa=xg({},aa);R=R.defaultProps;for(var sa in R)void 0===aa[sa]&&(aa[sa]=
R[sa])}return aa}function Yd(R){var aa=yk.current;df(yk);R._currentValue=aa}function xe(R,aa,sa){for(;null!==R;){var Ca=R.alternate;(R.childLanes&aa)!==aa?(R.childLanes|=aa,null!==Ca&&(Ca.childLanes|=aa)):null!==Ca&&(Ca.childLanes&aa)!==aa&&(Ca.childLanes|=aa);if(R===sa)break;R=R.return}}function Td(R,aa){Qj=R;ek=dj=null;R=R.dependencies;null!==R&&null!==R.firstContext&&(0!==(R.lanes&aa)&&(Uh=!0),R.firstContext=null)}function Oe(R){var aa=R._currentValue;if(ek!==R)if(R={context:R,memoizedValue:aa,
next:null},null===dj){if(null===Qj)throw Error(b(308));dj=R;Qj.dependencies={lanes:0,firstContext:R}}else dj=dj.next=R;return aa}function Ve(R){null===Hi?Hi=[R]:Hi.push(R)}function wf(R,aa,sa,Ca){var Ua=aa.interleaved;null===Ua?(sa.next=sa,Ve(aa)):(sa.next=Ua.next,Ua.next=sa);aa.interleaved=sa;return Me(R,Ca)}function Me(R,aa){R.lanes|=aa;var sa=R.alternate;null!==sa&&(sa.lanes|=aa);sa=R;for(R=R.return;null!==R;)R.childLanes|=aa,sa=R.alternate,null!==sa&&(sa.childLanes|=aa),sa=R,R=R.return;return 3===
sa.tag?sa.stateNode:null}function Af(R){R.updateQueue={baseState:R.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ug(R,aa){R=R.updateQueue;aa.updateQueue===R&&(aa.updateQueue={baseState:R.baseState,firstBaseUpdate:R.firstBaseUpdate,lastBaseUpdate:R.lastBaseUpdate,shared:R.shared,effects:R.effects})}function vg(R,aa){return{eventTime:R,lane:aa,tag:0,payload:null,callback:null,next:null}}function Gg(R,aa,sa){var Ca=R.updateQueue;
if(null===Ca)return null;Ca=Ca.shared;if(0!==(Qf&2)){var Ua=Ca.pending;null===Ua?aa.next=aa:(aa.next=Ua.next,Ua.next=aa);Ca.pending=aa;return Me(R,sa)}Ua=Ca.interleaved;null===Ua?(aa.next=aa,Ve(Ca)):(aa.next=Ua.next,Ua.next=aa);Ca.interleaved=aa;return Me(R,sa)}function ih(R,aa,sa){aa=aa.updateQueue;if(null!==aa&&(aa=aa.shared,0!==(sa&4194240))){var Ca=aa.lanes;Ca&=R.pendingLanes;sa|=Ca;aa.lanes=sa;rb(R,sa)}}function Nh(R,aa){var sa=R.updateQueue,Ca=R.alternate;if(null!==Ca&&(Ca=Ca.updateQueue,sa===
Ca)){var Ua=null,ab=null;sa=sa.firstBaseUpdate;if(null!==sa){do{var Kb={eventTime:sa.eventTime,lane:sa.lane,tag:sa.tag,payload:sa.payload,callback:sa.callback,next:null};null===ab?Ua=ab=Kb:ab=ab.next=Kb;sa=sa.next}while(null!==sa);null===ab?Ua=ab=aa:ab=ab.next=aa}else Ua=ab=aa;sa={baseState:Ca.baseState,firstBaseUpdate:Ua,lastBaseUpdate:ab,shared:Ca.shared,effects:Ca.effects};R.updateQueue=sa}else R=sa.lastBaseUpdate,null===R?sa.firstBaseUpdate=aa:R.next=aa,sa.lastBaseUpdate=aa}function qh(R,aa,sa,
Ca){var Ua=R.updateQueue;Ii=!1;var ab=Ua.firstBaseUpdate,Kb=Ua.lastBaseUpdate,lc=Ua.shared.pending;if(null!==lc){Ua.shared.pending=null;var Ac=lc,od=Ac.next;Ac.next=null;null===Kb?ab=od:Kb.next=od;var Ud=R.alternate;null!==Ud&&(Ud=Ud.updateQueue,lc=Ud.lastBaseUpdate,lc!==Ac&&(null===lc?Ud.firstBaseUpdate=od:lc.next=od,Ud.lastBaseUpdate=Ac))}if(null!==ab){var Xd=Ua.baseState;Kb=0;Ud=od=Ac=null;lc=ab;do{var ie=lc.lane,ze=lc.eventTime;if((Ca&ie)===ie){null!==Ud&&(Ud=Ud.next={eventTime:ze,lane:0,tag:lc.tag,
payload:lc.payload,callback:lc.callback,next:null});a:{var Pe=R,cf=lc;ie=aa;ze=sa;switch(cf.tag){case 1:Pe=cf.payload;if("function"===typeof Pe){Xd=Pe.call(ze,Xd,ie);break a}Xd=Pe;break a;case 3:Pe.flags=Pe.flags&-65537|128;case 0:Pe=cf.payload;ie="function"===typeof Pe?Pe.call(ze,Xd,ie):Pe;if(null===ie||void 0===ie)break a;Xd=xg({},Xd,ie);break a;case 2:Ii=!0}}null!==lc.callback&&0!==lc.lane&&(R.flags|=64,ie=Ua.effects,null===ie?Ua.effects=[lc]:ie.push(lc))}else ze={eventTime:ze,lane:ie,tag:lc.tag,
payload:lc.payload,callback:lc.callback,next:null},null===Ud?(od=Ud=ze,Ac=Xd):Ud=Ud.next=ze,Kb|=ie;lc=lc.next;if(null===lc)if(lc=Ua.shared.pending,null===lc)break;else ie=lc,lc=ie.next,ie.next=null,Ua.lastBaseUpdate=ie,Ua.shared.pending=null}while(1);null===Ud&&(Ac=Xd);Ua.baseState=Ac;Ua.firstBaseUpdate=od;Ua.lastBaseUpdate=Ud;aa=Ua.shared.interleaved;if(null!==aa){Ua=aa;do Kb|=Ua.lane,Ua=Ua.next;while(Ua!==aa)}else null===ab&&(Ua.shared.lanes=0);oi|=Kb;R.lanes=Kb;R.memoizedState=Xd}}function Yg(R,
aa,sa){R=aa.effects;aa.effects=null;if(null!==R)for(aa=0;aa<R.length;aa++){var Ca=R[aa],Ua=Ca.callback;if(null!==Ua){Ca.callback=null;Ca=sa;if("function"!==typeof Ua)throw Error(b(191,Ua));Ua.call(Ca)}}}function jh(R,aa,sa,Ca){aa=R.memoizedState;sa=sa(Ca,aa);sa=null===sa||void 0===sa?aa:xg({},aa,sa);R.memoizedState=sa;0===R.lanes&&(R.updateQueue.baseState=sa)}function kh(R,aa,sa,Ca,Ua,ab,Kb){R=R.stateNode;return"function"===typeof R.shouldComponentUpdate?R.shouldComponentUpdate(Ca,ab,Kb):aa.prototype&&
aa.prototype.isPureReactComponent?!yb(sa,Ca)||!yb(Ua,ab):!0}function fh(R,aa,sa){var Ca=!1,Ua=qj,ab=aa.contextType;"object"===typeof ab&&null!==ab?ab=Oe(ab):(Ua=Mb(aa)?rj:Dh.current,Ca=aa.contextTypes,ab=(Ca=null!==Ca&&void 0!==Ca)?Gd(R,Ua):qj);aa=new aa(sa,ab);R.memoizedState=null!==aa.state&&void 0!==aa.state?aa.state:null;aa.updater=fk;R.stateNode=aa;aa._reactInternals=R;Ca&&(R=R.stateNode,R.__reactInternalMemoizedUnmaskedChildContext=Ua,R.__reactInternalMemoizedMaskedChildContext=ab);return aa}
function ei(R,aa,sa,Ca){R=aa.state;"function"===typeof aa.componentWillReceiveProps&&aa.componentWillReceiveProps(sa,Ca);"function"===typeof aa.UNSAFE_componentWillReceiveProps&&aa.UNSAFE_componentWillReceiveProps(sa,Ca);aa.state!==R&&fk.enqueueReplaceState(aa,aa.state,null)}function gh(R,aa,sa,Ca){var Ua=R.stateNode;Ua.props=sa;Ua.state=R.memoizedState;Ua.refs=al;Af(R);var ab=aa.contextType;"object"===typeof ab&&null!==ab?Ua.context=Oe(ab):(ab=Mb(aa)?rj:Dh.current,Ua.context=Gd(R,ab));Ua.state=R.memoizedState;
ab=aa.getDerivedStateFromProps;"function"===typeof ab&&(jh(R,aa,ab,sa),Ua.state=R.memoizedState);"function"===typeof aa.getDerivedStateFromProps||"function"===typeof Ua.getSnapshotBeforeUpdate||"function"!==typeof Ua.UNSAFE_componentWillMount&&"function"!==typeof Ua.componentWillMount||(aa=Ua.state,"function"===typeof Ua.componentWillMount&&Ua.componentWillMount(),"function"===typeof Ua.UNSAFE_componentWillMount&&Ua.UNSAFE_componentWillMount(),aa!==Ua.state&&fk.enqueueReplaceState(Ua,Ua.state,null),
qh(R,sa,Ua,Ca),Ua.state=R.memoizedState);"function"===typeof Ua.componentDidMount&&(R.flags|=4194308)}function ng(R,aa,sa){R=sa.ref;if(null!==R&&"function"!==typeof R&&"object"!==typeof R){if(sa._owner){if(sa=sa._owner){if(1!==sa.tag)throw Error(b(309));var Ca=sa.stateNode}if(!Ca)throw Error(b(147,R));var Ua=Ca,ab=""+R;if(null!==aa&&null!==aa.ref&&"function"===typeof aa.ref&&aa.ref._stringRef===ab)return aa.ref;aa=function(Kb){var lc=Ua.refs;lc===al&&(lc=Ua.refs={});null===Kb?delete lc[ab]:lc[ab]=
Kb};aa._stringRef=ab;return aa}if("string"!==typeof R)throw Error(b(284));if(!sa._owner)throw Error(b(290,R));}return R}function Zf(R,aa){R=Object.prototype.toString.call(aa);throw Error(b(31,"[object Object]"===R?"object with keys {"+Object.keys(aa).join(", ")+"}":R));}function og(R){var aa=R._init;return aa(R._payload)}function Hg(R){function aa(td,hd){if(R){var Cd=td.deletions;null===Cd?(td.deletions=[hd],td.flags|=16):Cd.push(hd)}}function sa(td,hd){if(!R)return null;for(;null!==hd;)aa(td,hd),
hd=hd.sibling;return null}function Ca(td,hd){for(td=new Map;null!==hd;)null!==hd.key?td.set(hd.key,hd):td.set(hd.index,hd),hd=hd.sibling;return td}function Ua(td,hd){td=Ke(td,hd);td.index=0;td.sibling=null;return td}function ab(td,hd,Cd){td.index=Cd;if(!R)return td.flags|=1048576,hd;Cd=td.alternate;if(null!==Cd)return Cd=Cd.index,Cd<hd?(td.flags|=2,hd):Cd;td.flags|=2;return hd}function Kb(td){R&&null===td.alternate&&(td.flags|=2);return td}function lc(td,hd,Cd,Fe){if(null===hd||6!==hd.tag)return hd=
uf(Cd,td.mode,Fe),hd.return=td,hd;hd=Ua(hd,Cd);hd.return=td;return hd}function Ac(td,hd,Cd,Fe){var kf=Cd.type;if(kf===mf)return Ud(td,hd,Cd.props.children,Fe,Cd.key);if(null!==hd&&(hd.elementType===kf||"object"===typeof kf&&null!==kf&&kf.$$typeof===bh&&og(kf)===hd.type))return Fe=Ua(hd,Cd.props),Fe.ref=ng(td,hd,Cd),Fe.return=td,Fe;Fe=rf(Cd.type,Cd.key,Cd.props,null,td.mode,Fe);Fe.ref=ng(td,hd,Cd);Fe.return=td;return Fe}function od(td,hd,Cd,Fe){if(null===hd||4!==hd.tag||hd.stateNode.containerInfo!==
Cd.containerInfo||hd.stateNode.implementation!==Cd.implementation)return hd=sg(Cd,td.mode,Fe),hd.return=td,hd;hd=Ua(hd,Cd.children||[]);hd.return=td;return hd}function Ud(td,hd,Cd,Fe,kf){if(null===hd||7!==hd.tag)return hd=pf(Cd,td.mode,Fe,kf),hd.return=td,hd;hd=Ua(hd,Cd);hd.return=td;return hd}function Xd(td,hd,Cd){if("string"===typeof hd&&""!==hd||"number"===typeof hd)return hd=uf(""+hd,td.mode,Cd),hd.return=td,hd;if("object"===typeof hd&&null!==hd){switch(hd.$$typeof){case re:return Cd=rf(hd.type,
hd.key,hd.props,null,td.mode,Cd),Cd.ref=ng(td,null,hd),Cd.return=td,Cd;case Pd:return hd=sg(hd,td.mode,Cd),hd.return=td,hd;case bh:var Fe=hd._init;return Xd(td,Fe(hd._payload),Cd)}if(bg(hd)||h(hd))return hd=pf(hd,td.mode,Cd,null),hd.return=td,hd;Zf(td,hd)}return null}function ie(td,hd,Cd,Fe){var kf=null!==hd?hd.key:null;if("string"===typeof Cd&&""!==Cd||"number"===typeof Cd)return null!==kf?null:lc(td,hd,""+Cd,Fe);if("object"===typeof Cd&&null!==Cd){switch(Cd.$$typeof){case re:return Cd.key===kf?
Ac(td,hd,Cd,Fe):null;case Pd:return Cd.key===kf?od(td,hd,Cd,Fe):null;case bh:return kf=Cd._init,ie(td,hd,kf(Cd._payload),Fe)}if(bg(Cd)||h(Cd))return null!==kf?null:Ud(td,hd,Cd,Fe,null);Zf(td,Cd)}return null}function ze(td,hd,Cd,Fe,kf){if("string"===typeof Fe&&""!==Fe||"number"===typeof Fe)return td=td.get(Cd)||null,lc(hd,td,""+Fe,kf);if("object"===typeof Fe&&null!==Fe){switch(Fe.$$typeof){case re:return td=td.get(null===Fe.key?Cd:Fe.key)||null,Ac(hd,td,Fe,kf);case Pd:return td=td.get(null===Fe.key?
Cd:Fe.key)||null,od(hd,td,Fe,kf);case bh:var yf=Fe._init;return ze(td,hd,Cd,yf(Fe._payload),kf)}if(bg(Fe)||h(Fe))return td=td.get(Cd)||null,Ud(hd,td,Fe,kf,null);Zf(hd,Fe)}return null}function Pe(td,hd,Cd,Fe){for(var kf=null,yf=null,zf=hd,Hf=hd=0,Fh=null;null!==zf&&Hf<Cd.length;Hf++){zf.index>Hf?(Fh=zf,zf=null):Fh=zf.sibling;var mg=ie(td,zf,Cd[Hf],Fe);if(null===mg){null===zf&&(zf=Fh);break}R&&zf&&null===mg.alternate&&aa(td,zf);hd=ab(mg,hd,Hf);null===yf?kf=mg:yf.sibling=mg;yf=mg;zf=Fh}if(Hf===Cd.length)return sa(td,
zf),Fg&&oe(td,Hf),kf;if(null===zf){for(;Hf<Cd.length;Hf++)zf=Xd(td,Cd[Hf],Fe),null!==zf&&(hd=ab(zf,hd,Hf),null===yf?kf=zf:yf.sibling=zf,yf=zf);Fg&&oe(td,Hf);return kf}for(zf=Ca(td,zf);Hf<Cd.length;Hf++)Fh=ze(zf,td,Hf,Cd[Hf],Fe),null!==Fh&&(R&&null!==Fh.alternate&&zf.delete(null===Fh.key?Hf:Fh.key),hd=ab(Fh,hd,Hf),null===yf?kf=Fh:yf.sibling=Fh,yf=Fh);R&&zf.forEach(function(Vj){return aa(td,Vj)});Fg&&oe(td,Hf);return kf}function cf(td,hd,Cd,Fe){var kf=h(Cd);if("function"!==typeof kf)throw Error(b(150));
Cd=kf.call(Cd);if(null==Cd)throw Error(b(151));for(var yf=kf=null,zf=hd,Hf=hd=0,Fh=null,mg=Cd.next();null!==zf&&!mg.done;Hf++,mg=Cd.next()){zf.index>Hf?(Fh=zf,zf=null):Fh=zf.sibling;var Vj=ie(td,zf,mg.value,Fe);if(null===Vj){null===zf&&(zf=Fh);break}R&&zf&&null===Vj.alternate&&aa(td,zf);hd=ab(Vj,hd,Hf);null===yf?kf=Vj:yf.sibling=Vj;yf=Vj;zf=Fh}if(mg.done)return sa(td,zf),Fg&&oe(td,Hf),kf;if(null===zf){for(;!mg.done;Hf++,mg=Cd.next())mg=Xd(td,mg.value,Fe),null!==mg&&(hd=ab(mg,hd,Hf),null===yf?kf=mg:
yf.sibling=mg,yf=mg);Fg&&oe(td,Hf);return kf}for(zf=Ca(td,zf);!mg.done;Hf++,mg=Cd.next())mg=ze(zf,td,Hf,mg.value,Fe),null!==mg&&(R&&null!==mg.alternate&&zf.delete(null===mg.key?Hf:mg.key),hd=ab(mg,hd,Hf),null===yf?kf=mg:yf.sibling=mg,yf=mg);R&&zf.forEach(function(Bl){return aa(td,Bl)});Fg&&oe(td,Hf);return kf}function Pf(td,hd,Cd,Fe){"object"===typeof Cd&&null!==Cd&&Cd.type===mf&&null===Cd.key&&(Cd=Cd.props.children);if("object"===typeof Cd&&null!==Cd){switch(Cd.$$typeof){case re:a:{for(var kf=Cd.key,
yf=hd;null!==yf;){if(yf.key===kf){kf=Cd.type;if(kf===mf){if(7===yf.tag){sa(td,yf.sibling);hd=Ua(yf,Cd.props.children);hd.return=td;td=hd;break a}}else if(yf.elementType===kf||"object"===typeof kf&&null!==kf&&kf.$$typeof===bh&&og(kf)===yf.type){sa(td,yf.sibling);hd=Ua(yf,Cd.props);hd.ref=ng(td,yf,Cd);hd.return=td;td=hd;break a}sa(td,yf);break}else aa(td,yf);yf=yf.sibling}Cd.type===mf?(hd=pf(Cd.props.children,td.mode,Fe,Cd.key),hd.return=td,td=hd):(Fe=rf(Cd.type,Cd.key,Cd.props,null,td.mode,Fe),Fe.ref=
ng(td,hd,Cd),Fe.return=td,td=Fe)}return Kb(td);case Pd:a:{for(yf=Cd.key;null!==hd;){if(hd.key===yf)if(4===hd.tag&&hd.stateNode.containerInfo===Cd.containerInfo&&hd.stateNode.implementation===Cd.implementation){sa(td,hd.sibling);hd=Ua(hd,Cd.children||[]);hd.return=td;td=hd;break a}else{sa(td,hd);break}else aa(td,hd);hd=hd.sibling}hd=sg(Cd,td.mode,Fe);hd.return=td;td=hd}return Kb(td);case bh:return yf=Cd._init,Pf(td,hd,yf(Cd._payload),Fe)}if(bg(Cd))return Pe(td,hd,Cd,Fe);if(h(Cd))return cf(td,hd,Cd,
Fe);Zf(td,Cd)}return"string"===typeof Cd&&""!==Cd||"number"===typeof Cd?(Cd=""+Cd,null!==hd&&6===hd.tag?(sa(td,hd.sibling),hd=Ua(hd,Cd),hd.return=td,td=hd):(sa(td,hd),hd=uf(Cd,td.mode,Fe),hd.return=td,td=hd),Kb(td)):sa(td,hd)}return Pf}function Tg(R){if(R===fj)throw Error(b(174));return R}function rh(R,aa){Rc(Og,aa);Rc(Vi,R);Rc(Lg,fj);R=aa.nodeType;switch(R){case 9:case 11:aa=(aa=aa.documentElement)?aa.namespaceURI:H(null,"");break;default:R=8===R?aa.parentNode:aa,aa=R.namespaceURI||null,R=R.tagName,
aa=H(aa,R)}df(Lg);Rc(Lg,aa)}function hh(){df(Lg);df(Vi);df(Og)}function lh(R){Tg(Og.current);var aa=Tg(Lg.current),sa=H(aa,R.type);aa!==sa&&(Rc(Vi,R),Rc(Lg,sa))}function Kf(R){Vi.current===R&&(df(Lg),df(Vi))}function Zg(R){for(var aa=R;null!==aa;){if(13===aa.tag){var sa=aa.memoizedState;if(null!==sa&&(sa=sa.dehydrated,null===sa||"$?"===sa.data||"$!"===sa.data))return aa}else if(19===aa.tag&&void 0!==aa.memoizedProps.revealOrder){if(0!==(aa.flags&128))return aa}else if(null!==aa.child){aa.child.return=
aa;aa=aa.child;continue}if(aa===R)break;for(;null===aa.sibling;){if(null===aa.return||aa.return===R)return null;aa=aa.return}aa.sibling.return=aa.return;aa=aa.sibling}return null}function $f(){for(var R=0;R<Ck.length;R++)Ck[R]._workInProgressVersionPrimary=null;Ck.length=0}function Nf(){throw Error(b(321));}function vh(R,aa){if(null===aa)return!1;for(var sa=0;sa<aa.length&&sa<R.length;sa++)if(!ji(R[sa],aa[sa]))return!1;return!0}function mh(R,aa,sa,Ca,Ua,ab){Pi=ab;dg=aa;aa.memoizedState=null;aa.updateQueue=
null;aa.lanes=0;Yi.current=null===R||null===R.memoizedState?Yf:wl;R=sa(Ca,Ua);if(gk){ab=0;do{gk=!1;hk=0;if(25<=ab)throw Error(b(301));ab+=1;Pg=Vg=null;aa.updateQueue=null;Yi.current=cl;R=sa(Ca,Ua)}while(gk)}Yi.current=sj;aa=null!==Vg&&null!==Vg.next;Pi=0;Pg=Vg=dg=null;Bi=!1;if(aa)throw Error(b(300));return R}function Gh(){var R=0!==hk;hk=0;return R}function ag(){var R={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};null===Pg?dg.memoizedState=Pg=R:Pg=Pg.next=R;return Pg}function wg(){if(null===
Vg){var R=dg.alternate;R=null!==R?R.memoizedState:null}else R=Vg.next;var aa=null===Pg?dg.memoizedState:Pg.next;if(null!==aa)Pg=aa,Vg=R;else{if(null===R)throw Error(b(310));Vg=R;R={memoizedState:Vg.memoizedState,baseState:Vg.baseState,baseQueue:Vg.baseQueue,queue:Vg.queue,next:null};null===Pg?dg.memoizedState=Pg=R:Pg=Pg.next=R}return Pg}function nh(R,aa){return"function"===typeof aa?aa(R):aa}function wh(R){var aa=wg(),sa=aa.queue;if(null===sa)throw Error(b(311));sa.lastRenderedReducer=R;var Ca=Vg,
Ua=Ca.baseQueue,ab=sa.pending;if(null!==ab){if(null!==Ua){var Kb=Ua.next;Ua.next=ab.next;ab.next=Kb}Ca.baseQueue=Ua=ab;sa.pending=null}if(null!==Ua){ab=Ua.next;Ca=Ca.baseState;var lc=Kb=null,Ac=null,od=ab;do{var Ud=od.lane;if((Pi&Ud)===Ud)null!==Ac&&(Ac=Ac.next={lane:0,action:od.action,hasEagerState:od.hasEagerState,eagerState:od.eagerState,next:null}),Ca=od.hasEagerState?od.eagerState:R(Ca,od.action);else{var Xd={lane:Ud,action:od.action,hasEagerState:od.hasEagerState,eagerState:od.eagerState,next:null};
null===Ac?(lc=Ac=Xd,Kb=Ca):Ac=Ac.next=Xd;dg.lanes|=Ud;oi|=Ud}od=od.next}while(null!==od&&od!==ab);null===Ac?Kb=Ca:Ac.next=lc;ji(Ca,aa.memoizedState)||(Uh=!0);aa.memoizedState=Ca;aa.baseState=Kb;aa.baseQueue=Ac;sa.lastRenderedState=Ca}R=sa.interleaved;if(null!==R){Ua=R;do ab=Ua.lane,dg.lanes|=ab,oi|=ab,Ua=Ua.next;while(Ua!==R)}else null===Ua&&(sa.lanes=0);return[aa.memoizedState,sa.dispatch]}function Ha(R){var aa=wg(),sa=aa.queue;if(null===sa)throw Error(b(311));sa.lastRenderedReducer=R;var Ca=sa.dispatch,
Ua=sa.pending,ab=aa.memoizedState;if(null!==Ua){sa.pending=null;var Kb=Ua=Ua.next;do ab=R(ab,Kb.action),Kb=Kb.next;while(Kb!==Ua);ji(ab,aa.memoizedState)||(Uh=!0);aa.memoizedState=ab;null===aa.baseQueue&&(aa.baseState=ab);sa.lastRenderedState=ab}return[ab,Ca]}function Ga(){}function Oa(R,aa){var sa=dg,Ca=wg(),Ua=aa(),ab=!ji(Ca.memoizedState,Ua);ab&&(Ca.memoizedState=Ua,Uh=!0);Ca=Ca.queue;Dd(lb.bind(null,sa,Ca,R),[R]);if(Ca.getSnapshot!==aa||ab||null!==Pg&&Pg.memoizedState.tag&1){sa.flags|=2048;ec(9,
eb.bind(null,sa,Ca,Ua,aa),void 0,null);if(null===Jg)throw Error(b(349));0!==(Pi&30)||Sa(sa,aa,Ua)}return Ua}function Sa(R,aa,sa){R.flags|=16384;R={getSnapshot:aa,value:sa};aa=dg.updateQueue;null===aa?(aa={lastEffect:null,stores:null},dg.updateQueue=aa,aa.stores=[R]):(sa=aa.stores,null===sa?aa.stores=[R]:sa.push(R))}function eb(R,aa,sa,Ca){aa.value=sa;aa.getSnapshot=Ca;Cb(aa)&&Zb(R)}function lb(R,aa,sa){return sa(function(){Cb(aa)&&Zb(R)})}function Cb(R){var aa=R.getSnapshot;R=R.value;try{var sa=aa();
return!ji(R,sa)}catch(Ca){return!0}}function Zb(R){var aa=Me(R,1);null!==aa&&Dg(aa,R,1,-1)}function Lb(R){var aa=ag();"function"===typeof R&&(R=R());aa.memoizedState=aa.baseState=R;R={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:nh,lastRenderedState:R};aa.queue=R;R=R.dispatch=Ff.bind(null,dg,R);return[aa.memoizedState,R]}function ec(R,aa,sa,Ca){R={tag:R,create:aa,destroy:sa,deps:Ca,next:null};aa=dg.updateQueue;null===aa?(aa={lastEffect:null,stores:null},dg.updateQueue=aa,
aa.lastEffect=R.next=R):(sa=aa.lastEffect,null===sa?aa.lastEffect=R.next=R:(Ca=sa.next,sa.next=R,R.next=Ca,aa.lastEffect=R));return R}function hc(){return wg().memoizedState}function rc(R,aa,sa,Ca){var Ua=ag();dg.flags|=R;Ua.memoizedState=ec(1|aa,sa,void 0,void 0===Ca?null:Ca)}function Fc(R,aa,sa,Ca){var Ua=wg();Ca=void 0===Ca?null:Ca;var ab=void 0;if(null!==Vg){var Kb=Vg.memoizedState;ab=Kb.destroy;if(null!==Ca&&vh(Ca,Kb.deps)){Ua.memoizedState=ec(aa,sa,ab,Ca);return}}dg.flags|=R;Ua.memoizedState=
ec(1|aa,sa,ab,Ca)}function jd(R,aa){return rc(8390656,8,R,aa)}function Dd(R,aa){return Fc(2048,8,R,aa)}function ye(R,aa){return Fc(4,2,R,aa)}function Ae(R,aa){return Fc(4,4,R,aa)}function Xe(R,aa){if("function"===typeof aa)return R=R(),aa(R),function(){aa(null)};if(null!==aa&&void 0!==aa)return R=R(),aa.current=R,function(){aa.current=null}}function Vf(R,aa,sa){sa=null!==sa&&void 0!==sa?sa.concat([R]):null;return Fc(4,4,Xe.bind(null,aa,R),sa)}function Je(){}function Tf(R,aa){var sa=wg();aa=void 0===
aa?null:aa;var Ca=sa.memoizedState;if(null!==Ca&&null!==aa&&vh(aa,Ca[1]))return Ca[0];sa.memoizedState=[R,aa];return R}function Mf(R,aa){var sa=wg();aa=void 0===aa?null:aa;var Ca=sa.memoizedState;if(null!==Ca&&null!==aa&&vh(aa,Ca[1]))return Ca[0];R=R();sa.memoizedState=[R,aa];return R}function tf(R,aa,sa){if(0===(Pi&21))return R.baseState&&(R.baseState=!1,Uh=!0),R.memoizedState=sa;ji(sa,aa)||(sa=qb(),dg.lanes|=sa,oi|=sa,R.baseState=!0);return aa}function $g(R,aa){var sa=gg;gg=0!==sa&&4>sa?sa:4;R(!0);
var Ca=bl.transition;bl.transition={};try{R(!1),aa()}finally{gg=sa,bl.transition=Ca}}function Kg(){return wg().memoizedState}function Ug(R,aa,sa){var Ca=Ue(R);sa={lane:Ca,action:sa,hasEagerState:!1,eagerState:null,next:null};if(Lf(R))oh(aa,sa);else if(sa=wf(R,aa,sa,Ca),null!==sa){var Ua=zg();Dg(sa,R,Ca,Ua);Wh(sa,aa,Ca)}}function Ff(R,aa,sa){var Ca=Ue(R),Ua={lane:Ca,action:sa,hasEagerState:!1,eagerState:null,next:null};if(Lf(R))oh(aa,Ua);else{var ab=R.alternate;if(0===R.lanes&&(null===ab||0===ab.lanes)&&
(ab=aa.lastRenderedReducer,null!==ab))try{var Kb=aa.lastRenderedState,lc=ab(Kb,sa);Ua.hasEagerState=!0;Ua.eagerState=lc;if(ji(lc,Kb)){var Ac=aa.interleaved;null===Ac?(Ua.next=Ua,Ve(aa)):(Ua.next=Ac.next,Ac.next=Ua);aa.interleaved=Ua;return}}catch(od){}finally{}sa=wf(R,aa,Ua,Ca);null!==sa&&(Ua=zg(),Dg(sa,R,Ca,Ua),Wh(sa,aa,Ca))}}function Lf(R){var aa=R.alternate;return R===dg||null!==aa&&aa===dg}function oh(R,aa){gk=Bi=!0;var sa=R.pending;null===sa?aa.next=aa:(aa.next=sa.next,sa.next=aa);R.pending=
aa}function Wh(R,aa,sa){if(0!==(sa&4194240)){var Ca=aa.lanes;Ca&=R.pendingLanes;sa|=Ca;aa.lanes=sa;rb(R,sa)}}function Hh(R,aa){try{var sa="",Ca=aa;do sa+=c(Ca),Ca=Ca.return;while(Ca)}catch(Ua){sa="\nError generating stack: "+Ua.message+"\n"+Ua.stack}return{value:R,source:aa,stack:sa,digest:null}}function vi(R,aa,sa){return{value:R,source:null,stack:null!=sa?sa:null,digest:null!=aa?aa:null}}function wi(R,aa){try{console.error(aa.value)}catch(sa){setTimeout(function(){throw sa;})}}function Oh(R,aa,
sa){sa=vg(-1,sa);sa.tag=3;sa.payload={element:null};var Ca=aa.value;sa.callback=function(){fa||(fa=!0,pa=Ca);wi(R,aa)};return sa}function Ya(R,aa,sa){sa=vg(-1,sa);sa.tag=3;var Ca=R.type.getDerivedStateFromError;if("function"===typeof Ca){var Ua=aa.value;sa.payload=function(){return Ca(Ua)};sa.callback=function(){wi(R,aa)}}var ab=R.stateNode;null!==ab&&"function"===typeof ab.componentDidCatch&&(sa.callback=function(){wi(R,aa);"function"!==typeof Ca&&(null===wa?wa=new Set([this]):wa.add(this));var Kb=
aa.stack;this.componentDidCatch(aa.value,{componentStack:null!==Kb?Kb:""})});return sa}function Qa(R,aa,sa){var Ca=R.pingCache;if(null===Ca){Ca=R.pingCache=new Tj;var Ua=new Set;Ca.set(aa,Ua)}else Ua=Ca.get(aa),void 0===Ua&&(Ua=new Set,Ca.set(aa,Ua));Ua.has(sa)||(Ua.add(sa),R=Ld.bind(null,R,aa,sa),aa.then(R,R))}function Ob(R){do{var aa;if(aa=13===R.tag)aa=R.memoizedState,aa=null!==aa?null!==aa.dehydrated?!0:!1:!0;if(aa)return R;R=R.return}while(null!==R);return null}function bc(R,aa,sa,Ca,Ua){if(0===
(R.mode&1))return R===aa?R.flags|=65536:(R.flags|=128,sa.flags|=131072,sa.flags&=-52805,1===sa.tag&&(null===sa.alternate?sa.tag=17:(aa=vg(-1,1),aa.tag=2,Gg(sa,aa,1))),sa.lanes|=1),R;R.flags|=65536;R.lanes=Ua;return R}function gc(R,aa,sa,Ca){aa.child=null===R?Rj(aa,null,sa,Ca):ej(aa,R.child,sa,Ca)}function dd(R,aa,sa,Ca,Ua){sa=sa.render;var ab=aa.ref;Td(aa,Ua);Ca=mh(R,aa,sa,Ca,ab,Ua);sa=Gh();if(null!==R&&!Uh)return aa.updateQueue=R.updateQueue,aa.flags&=-2053,R.lanes&=~Ua,Cf(R,aa,Ua);Fg&&sa&&qc(aa);
aa.flags|=1;gc(R,aa,Ca,Ua);return aa.child}function md(R,aa,sa,Ca,Ua){if(null===R){var ab=sa.type;if("function"===typeof ab&&!we(ab)&&void 0===ab.defaultProps&&null===sa.compare&&void 0===sa.defaultProps)return aa.tag=15,aa.type=ab,gd(R,aa,ab,Ca,Ua);R=rf(sa.type,null,Ca,aa,aa.mode,Ua);R.ref=aa.ref;R.return=aa;return aa.child=R}ab=R.child;if(0===(R.lanes&Ua)){var Kb=ab.memoizedProps;sa=sa.compare;sa=null!==sa?sa:yb;if(sa(Kb,Ca)&&R.ref===aa.ref)return Cf(R,aa,Ua)}aa.flags|=1;R=Ke(ab,Ca);R.ref=aa.ref;
R.return=aa;return aa.child=R}function gd(R,aa,sa,Ca,Ua){if(null!==R){var ab=R.memoizedProps;if(yb(ab,Ca)&&R.ref===aa.ref)if(Uh=!1,aa.pendingProps=Ca=ab,0!==(R.lanes&Ua))0!==(R.flags&131072)&&(Uh=!0);else return aa.lanes=R.lanes,Cf(R,aa,Ua)}return Od(R,aa,sa,Ca,Ua)}function nd(R,aa,sa){var Ca=aa.pendingProps,Ua=Ca.children,ab=null!==R?R.memoizedState:null;if("hidden"===Ca.mode)if(0===(aa.mode&1))aa.memoizedState={baseLanes:0,cachePool:null,transitions:null},Rc(gj,Xg),Xg|=sa;else{if(0===(sa&1073741824))return R=
null!==ab?ab.baseLanes|sa:sa,aa.lanes=aa.childLanes=1073741824,aa.memoizedState={baseLanes:R,cachePool:null,transitions:null},aa.updateQueue=null,Rc(gj,Xg),Xg|=R,null;aa.memoizedState={baseLanes:0,cachePool:null,transitions:null};Ca=null!==ab?ab.baseLanes:sa;Rc(gj,Xg);Xg|=Ca}else null!==ab?(Ca=ab.baseLanes|sa,aa.memoizedState=null):Ca=sa,Rc(gj,Xg),Xg|=Ca;gc(R,aa,Ua,sa);return aa.child}function rd(R,aa){var sa=aa.ref;if(null===R&&null!==sa||null!==R&&R.ref!==sa)aa.flags|=512,aa.flags|=2097152}function Od(R,
aa,sa,Ca,Ua){var ab=Mb(sa)?rj:Dh.current;ab=Gd(aa,ab);Td(aa,Ua);sa=mh(R,aa,sa,Ca,ab,Ua);Ca=Gh();if(null!==R&&!Uh)return aa.updateQueue=R.updateQueue,aa.flags&=-2053,R.lanes&=~Ua,Cf(R,aa,Ua);Fg&&Ca&&qc(aa);aa.flags|=1;gc(R,aa,sa,Ua);return aa.child}function xd(R,aa,sa,Ca,Ua){if(Mb(sa)){var ab=!0;qd(aa)}else ab=!1;Td(aa,Ua);if(null===aa.stateNode)nf(R,aa),fh(aa,sa,Ca),gh(aa,sa,Ca,Ua),Ca=!0;else if(null===R){var Kb=aa.stateNode,lc=aa.memoizedProps;Kb.props=lc;var Ac=Kb.context,od=sa.contextType;"object"===
typeof od&&null!==od?od=Oe(od):(od=Mb(sa)?rj:Dh.current,od=Gd(aa,od));var Ud=sa.getDerivedStateFromProps,Xd="function"===typeof Ud||"function"===typeof Kb.getSnapshotBeforeUpdate;Xd||"function"!==typeof Kb.UNSAFE_componentWillReceiveProps&&"function"!==typeof Kb.componentWillReceiveProps||(lc!==Ca||Ac!==od)&&ei(aa,Kb,Ca,od);Ii=!1;var ie=aa.memoizedState;Kb.state=ie;qh(aa,Ca,Kb,Ua);Ac=aa.memoizedState;lc!==Ca||ie!==Ac||Sh.current||Ii?("function"===typeof Ud&&(jh(aa,sa,Ud,Ca),Ac=aa.memoizedState),(lc=
Ii||kh(aa,sa,lc,Ca,ie,Ac,od))?(Xd||"function"!==typeof Kb.UNSAFE_componentWillMount&&"function"!==typeof Kb.componentWillMount||("function"===typeof Kb.componentWillMount&&Kb.componentWillMount(),"function"===typeof Kb.UNSAFE_componentWillMount&&Kb.UNSAFE_componentWillMount()),"function"===typeof Kb.componentDidMount&&(aa.flags|=4194308)):("function"===typeof Kb.componentDidMount&&(aa.flags|=4194308),aa.memoizedProps=Ca,aa.memoizedState=Ac),Kb.props=Ca,Kb.state=Ac,Kb.context=od,Ca=lc):("function"===
typeof Kb.componentDidMount&&(aa.flags|=4194308),Ca=!1)}else{Kb=aa.stateNode;ug(R,aa);lc=aa.memoizedProps;od=aa.type===aa.elementType?lc:Qd(aa.type,lc);Kb.props=od;Xd=aa.pendingProps;ie=Kb.context;Ac=sa.contextType;"object"===typeof Ac&&null!==Ac?Ac=Oe(Ac):(Ac=Mb(sa)?rj:Dh.current,Ac=Gd(aa,Ac));var ze=sa.getDerivedStateFromProps;(Ud="function"===typeof ze||"function"===typeof Kb.getSnapshotBeforeUpdate)||"function"!==typeof Kb.UNSAFE_componentWillReceiveProps&&"function"!==typeof Kb.componentWillReceiveProps||
(lc!==Xd||ie!==Ac)&&ei(aa,Kb,Ca,Ac);Ii=!1;ie=aa.memoizedState;Kb.state=ie;qh(aa,Ca,Kb,Ua);var Pe=aa.memoizedState;lc!==Xd||ie!==Pe||Sh.current||Ii?("function"===typeof ze&&(jh(aa,sa,ze,Ca),Pe=aa.memoizedState),(od=Ii||kh(aa,sa,od,Ca,ie,Pe,Ac)||!1)?(Ud||"function"!==typeof Kb.UNSAFE_componentWillUpdate&&"function"!==typeof Kb.componentWillUpdate||("function"===typeof Kb.componentWillUpdate&&Kb.componentWillUpdate(Ca,Pe,Ac),"function"===typeof Kb.UNSAFE_componentWillUpdate&&Kb.UNSAFE_componentWillUpdate(Ca,
Pe,Ac)),"function"===typeof Kb.componentDidUpdate&&(aa.flags|=4),"function"===typeof Kb.getSnapshotBeforeUpdate&&(aa.flags|=1024)):("function"!==typeof Kb.componentDidUpdate||lc===R.memoizedProps&&ie===R.memoizedState||(aa.flags|=4),"function"!==typeof Kb.getSnapshotBeforeUpdate||lc===R.memoizedProps&&ie===R.memoizedState||(aa.flags|=1024),aa.memoizedProps=Ca,aa.memoizedState=Pe),Kb.props=Ca,Kb.state=Pe,Kb.context=Ac,Ca=od):("function"!==typeof Kb.componentDidUpdate||lc===R.memoizedProps&&ie===R.memoizedState||
(aa.flags|=4),"function"!==typeof Kb.getSnapshotBeforeUpdate||lc===R.memoizedProps&&ie===R.memoizedState||(aa.flags|=1024),Ca=!1)}return Kd(R,aa,sa,Ca,ab,Ua)}function Kd(R,aa,sa,Ca,Ua,ab){rd(R,aa);var Kb=0!==(aa.flags&128);if(!Ca&&!Kb)return Ua&&qe(aa,sa,!1),Cf(R,aa,ab);Ca=aa.stateNode;xl.current=aa;var lc=Kb&&"function"!==typeof sa.getDerivedStateFromError?null:Ca.render();aa.flags|=1;null!==R&&Kb?(aa.child=ej(aa,R.child,null,ab),aa.child=ej(aa,null,lc,ab)):gc(R,aa,lc,ab);aa.memoizedState=Ca.state;
Ua&&qe(aa,sa,!0);return aa.child}function $d(R){var aa=R.stateNode;aa.pendingContext?Mc(R,aa.pendingContext,aa.pendingContext!==aa.context):aa.context&&Mc(R,aa.context,!1);rh(R,aa.containerInfo)}function fe(R){return{baseLanes:R,cachePool:null,transitions:null}}function ae(R,aa,sa){var Ca=aa.pendingProps,Ua=Bg.current,ab=!1,Kb=0!==(aa.flags&128),lc;(lc=Kb)||(lc=null!==R&&null===R.memoizedState?!1:0!==(Ua&2));if(lc)ab=!0,aa.flags&=-129;else if(null===R||null!==R.memoizedState)Ua|=1;Rc(Bg,Ua&1);if(null===
R){Vc(aa);R=aa.memoizedState;if(null!==R&&(R=R.dehydrated,null!==R))return 0===(aa.mode&1)?aa.lanes=1:"$!"===R.data?aa.lanes=8:aa.lanes=1073741824,null;Kb=Ca.children;R=Ca.fallback;return ab?(Ca=aa.mode,ab=aa.child,Kb={mode:"hidden",children:Kb},0===(Ca&1)&&null!==ab?(ab.childLanes=0,ab.pendingProps=Kb):ab=cg(Kb,Ca,0,null),R=pf(R,Ca,sa,null),ab.return=aa,R.return=aa,ab.sibling=R,aa.child=ab,aa.child.memoizedState=fe(sa),aa.memoizedState=dl,R):gf(aa,Kb)}Ua=R.memoizedState;if(null!==Ua&&(lc=Ua.dehydrated,
null!==lc))return le(R,aa,Kb,Ca,lc,Ua,sa);if(ab){ab=Ca.fallback;Kb=aa.mode;Ua=R.child;lc=Ua.sibling;var Ac={mode:"hidden",children:Ca.children};0===(Kb&1)&&aa.child!==Ua?(Ca=aa.child,Ca.childLanes=0,Ca.pendingProps=Ac,aa.deletions=null):(Ca=Ke(Ua,Ac),Ca.subtreeFlags=Ua.subtreeFlags&14680064);null!==lc?ab=Ke(lc,ab):(ab=pf(ab,Kb,sa,null),ab.flags|=2);ab.return=aa;Ca.return=aa;Ca.sibling=ab;aa.child=Ca;Ca=ab;ab=aa.child;Kb=R.child.memoizedState;Kb=null===Kb?fe(sa):{baseLanes:Kb.baseLanes|sa,cachePool:null,
transitions:Kb.transitions};ab.memoizedState=Kb;ab.childLanes=R.childLanes&~sa;aa.memoizedState=dl;return Ca}ab=R.child;R=ab.sibling;Ca=Ke(ab,{mode:"visible",children:Ca.children});0===(aa.mode&1)&&(Ca.lanes=sa);Ca.return=aa;Ca.sibling=null;null!==R&&(sa=aa.deletions,null===sa?(aa.deletions=[R],aa.flags|=16):sa.push(R));aa.child=Ca;aa.memoizedState=null;return Ca}function gf(R,aa){aa=cg({mode:"visible",children:aa},R.mode,0,null);aa.return=R;return R.child=aa}function Te(R,aa,sa,Ca){null!==Ca&&vd(Ca);
ej(aa,R.child,null,sa);R=gf(aa,aa.pendingProps.children);R.flags|=2;aa.memoizedState=null;return R}function le(R,aa,sa,Ca,Ua,ab,Kb){if(sa){if(aa.flags&256)return aa.flags&=-257,Ca=vi(Error(b(422))),Te(R,aa,Kb,Ca);if(null!==aa.memoizedState)return aa.child=R.child,aa.flags|=128,null;ab=Ca.fallback;Ua=aa.mode;Ca=cg({mode:"visible",children:Ca.children},Ua,0,null);ab=pf(ab,Ua,Kb,null);ab.flags|=2;Ca.return=aa;ab.return=aa;Ca.sibling=ab;aa.child=Ca;0!==(aa.mode&1)&&ej(aa,R.child,null,Kb);aa.child.memoizedState=
fe(Kb);aa.memoizedState=dl;return ab}if(0===(aa.mode&1))return Te(R,aa,Kb,null);if("$!"===Ua.data){if(Ca=Ua.nextSibling&&Ua.nextSibling.dataset)var lc=Ca.dgst;Ca=lc;ab=Error(b(419));Ca=vi(ab,Ca,void 0);return Te(R,aa,Kb,Ca)}lc=0!==(Kb&R.childLanes);if(Uh||lc){Ca=Jg;if(null!==Ca){switch(Kb&-Kb){case 4:Ua=2;break;case 16:Ua=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Ua=
32;break;case 536870912:Ua=268435456;break;default:Ua=0}Ua=0!==(Ua&(Ca.suspendedLanes|Kb))?0:Ua;0!==Ua&&Ua!==ab.retryLane&&(ab.retryLane=Ua,Me(R,Ua),Dg(Ca,R,Ua,-1))}Xb();Ca=vi(Error(b(421)));return Te(R,aa,Kb,Ca)}if("$?"===Ua.data)return aa.flags|=128,aa.child=R.child,aa=de.bind(null,R),Ua._reactRetry=aa,null;R=ab.treeContext;Th=Sd(Ua.nextSibling);ai=aa;Fg=!0;Gi=null;null!==R&&($h[ni++]=Ui,$h[ni++]=Ig,$h[ni++]=Ij,Ui=R.id,Ig=R.overflow,Ij=aa);aa=gf(aa,Ca.children);aa.flags|=4096;return aa}function pe(R,
aa,sa){R.lanes|=aa;var Ca=R.alternate;null!==Ca&&(Ca.lanes|=aa);xe(R.return,aa,sa)}function ge(R,aa,sa,Ca,Ua){var ab=R.memoizedState;null===ab?R.memoizedState={isBackwards:aa,rendering:null,renderingStartTime:0,last:Ca,tail:sa,tailMode:Ua}:(ab.isBackwards=aa,ab.rendering=null,ab.renderingStartTime=0,ab.last=Ca,ab.tail=sa,ab.tailMode=Ua)}function Ge(R,aa,sa){var Ca=aa.pendingProps,Ua=Ca.revealOrder,ab=Ca.tail;gc(R,aa,Ca.children,sa);Ca=Bg.current;if(0!==(Ca&2))Ca=Ca&1|2,aa.flags|=128;else{if(null!==
R&&0!==(R.flags&128))a:for(R=aa.child;null!==R;){if(13===R.tag)null!==R.memoizedState&&pe(R,sa,aa);else if(19===R.tag)pe(R,sa,aa);else if(null!==R.child){R.child.return=R;R=R.child;continue}if(R===aa)break a;for(;null===R.sibling;){if(null===R.return||R.return===aa)break a;R=R.return}R.sibling.return=R.return;R=R.sibling}Ca&=1}Rc(Bg,Ca);if(0===(aa.mode&1))aa.memoizedState=null;else switch(Ua){case "forwards":sa=aa.child;for(Ua=null;null!==sa;)R=sa.alternate,null!==R&&null===Zg(R)&&(Ua=sa),sa=sa.sibling;
sa=Ua;null===sa?(Ua=aa.child,aa.child=null):(Ua=sa.sibling,sa.sibling=null);ge(aa,!1,Ua,sa,ab);break;case "backwards":sa=null;Ua=aa.child;for(aa.child=null;null!==Ua;){R=Ua.alternate;if(null!==R&&null===Zg(R)){aa.child=Ua;break}R=Ua.sibling;Ua.sibling=sa;sa=Ua;Ua=R}ge(aa,!0,sa,null,ab);break;case "together":ge(aa,!1,null,null,void 0);break;default:aa.memoizedState=null}return aa.child}function nf(R,aa){0===(aa.mode&1)&&null!==R&&(R.alternate=null,aa.alternate=null,aa.flags|=2)}function Cf(R,aa,sa){null!==
R&&(aa.dependencies=R.dependencies);oi|=aa.lanes;if(0===(sa&aa.childLanes))return null;if(null!==R&&aa.child!==R.child)throw Error(b(153));if(null!==aa.child){R=aa.child;sa=Ke(R,R.pendingProps);aa.child=sa;for(sa.return=aa;null!==R.sibling;)R=R.sibling,sa=sa.sibling=Ke(R,R.pendingProps),sa.return=aa;sa.sibling=null}return aa.child}function If(R,aa,sa){switch(aa.tag){case 3:$d(aa);oc();break;case 5:lh(aa);break;case 1:Mb(aa.type)&&qd(aa);break;case 4:rh(aa,aa.stateNode.containerInfo);break;case 10:var Ca=
aa.type._context,Ua=aa.memoizedProps.value;Rc(yk,Ca._currentValue);Ca._currentValue=Ua;break;case 13:Ca=aa.memoizedState;if(null!==Ca){if(null!==Ca.dehydrated)return Rc(Bg,Bg.current&1),aa.flags|=128,null;if(0!==(sa&aa.child.childLanes))return ae(R,aa,sa);Rc(Bg,Bg.current&1);R=Cf(R,aa,sa);return null!==R?R.sibling:null}Rc(Bg,Bg.current&1);break;case 19:Ca=0!==(sa&aa.childLanes);if(0!==(R.flags&128)){if(Ca)return Ge(R,aa,sa);aa.flags|=128}Ua=aa.memoizedState;null!==Ua&&(Ua.rendering=null,Ua.tail=null,
Ua.lastEffect=null);Rc(Bg,Bg.current);if(Ca)break;else return null;case 22:case 23:return aa.lanes=0,nd(R,aa,sa)}return Cf(R,aa,sa)}function af(R,aa){if(!Fg)switch(R.tailMode){case "hidden":aa=R.tail;for(var sa=null;null!==aa;)null!==aa.alternate&&(sa=aa),aa=aa.sibling;null===sa?R.tail=null:sa.sibling=null;break;case "collapsed":sa=R.tail;for(var Ca=null;null!==sa;)null!==sa.alternate&&(Ca=sa),sa=sa.sibling;null===Ca?aa||null===R.tail?R.tail=null:R.tail.sibling=null:Ca.sibling=null}}function Ye(R){var aa=
null!==R.alternate&&R.alternate.child===R.child,sa=0,Ca=0;if(aa)for(var Ua=R.child;null!==Ua;)sa|=Ua.lanes|Ua.childLanes,Ca|=Ua.subtreeFlags&14680064,Ca|=Ua.flags&14680064,Ua.return=R,Ua=Ua.sibling;else for(Ua=R.child;null!==Ua;)sa|=Ua.lanes|Ua.childLanes,Ca|=Ua.subtreeFlags,Ca|=Ua.flags,Ua.return=R,Ua=Ua.sibling;R.subtreeFlags|=Ca;R.childLanes=sa;return aa}function hg(R,aa,sa){var Ca=aa.pendingProps;Yb(aa);switch(aa.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ye(aa),
null;case 1:return Mb(aa.type)&&$b(),Ye(aa),null;case 3:Ca=aa.stateNode;hh();df(Sh);df(Dh);$f();Ca.pendingContext&&(Ca.context=Ca.pendingContext,Ca.pendingContext=null);if(null===R||null===R.child)yc(aa)?aa.flags|=4:null===R||R.memoizedState.isDehydrated&&0===(aa.flags&256)||(aa.flags|=1024,null!==Gi&&(mb(Gi),Gi=null));ml(R,aa);Ye(aa);return null;case 5:Kf(aa);var Ua=Tg(Og.current);sa=aa.type;if(null!==R&&null!=aa.stateNode)zl(R,aa,sa,Ca,Ua),R.ref!==aa.ref&&(aa.flags|=512,aa.flags|=2097152);else{if(!Ca){if(null===
aa.stateNode)throw Error(b(166));Ye(aa);return null}R=Tg(Lg.current);if(yc(aa)){Ca=aa.stateNode;sa=aa.type;var ab=aa.memoizedProps;Ca[Ah]=aa;Ca[dh]=ab;R=0!==(aa.mode&1);switch(sa){case "dialog":Xc("cancel",Ca);Xc("close",Ca);break;case "iframe":case "object":case "embed":Xc("load",Ca);break;case "video":case "audio":for(Ua=0;Ua<sh.length;Ua++)Xc(sh[Ua],Ca);break;case "source":Xc("error",Ca);break;case "img":case "image":case "link":Xc("error",Ca);Xc("load",Ca);break;case "details":Xc("toggle",Ca);
break;case "input":A(Ca,ab);Xc("invalid",Ca);break;case "select":Ca._wrapperState={wasMultiple:!!ab.multiple};Xc("invalid",Ca);break;case "textarea":K(Ca,ab),Xc("invalid",Ca)}ca(sa,ab);Ua=null;for(var Kb in ab)if(ab.hasOwnProperty(Kb)){var lc=ab[Kb];"children"===Kb?"string"===typeof lc?Ca.textContent!==lc&&(!0!==ab.suppressHydrationWarning&&qf(Ca.textContent,lc,R),Ua=["children",lc]):"number"===typeof lc&&Ca.textContent!==""+lc&&(!0!==ab.suppressHydrationWarning&&qf(Ca.textContent,lc,R),Ua=["children",
""+lc]):ld.hasOwnProperty(Kb)&&null!=lc&&"onScroll"===Kb&&Xc("scroll",Ca)}switch(sa){case "input":w(Ca);v(Ca,ab,!0);break;case "textarea":w(Ca);I(Ca);break;case "select":case "option":break;default:"function"===typeof ab.onClick&&(Ca.onclick=sf)}Ca=Ua;aa.updateQueue=Ca;null!==Ca&&(aa.flags|=4)}else{Kb=9===Ua.nodeType?Ua:Ua.ownerDocument;"http://www.w3.org/1999/xhtml"===R&&(R=L(sa));"http://www.w3.org/1999/xhtml"===R?"script"===sa?(R=Kb.createElement("div"),R.innerHTML="\x3cscript\x3e\x3c/script\x3e",
R=R.removeChild(R.firstChild)):"string"===typeof Ca.is?R=Kb.createElement(sa,{is:Ca.is}):(R=Kb.createElement(sa),"select"===sa&&(Kb=R,Ca.multiple?Kb.multiple=!0:Ca.size&&(Kb.size=Ca.size))):R=Kb.createElementNS(R,sa);R[Ah]=aa;R[dh]=Ca;yl(R,aa,!1,!1);aa.stateNode=R;a:{Kb=W(sa,Ca);switch(sa){case "dialog":Xc("cancel",R);Xc("close",R);Ua=Ca;break;case "iframe":case "object":case "embed":Xc("load",R);Ua=Ca;break;case "video":case "audio":for(Ua=0;Ua<sh.length;Ua++)Xc(sh[Ua],R);Ua=Ca;break;case "source":Xc("error",
R);Ua=Ca;break;case "img":case "image":case "link":Xc("error",R);Xc("load",R);Ua=Ca;break;case "details":Xc("toggle",R);Ua=Ca;break;case "input":A(R,Ca);Ua=B(R,Ca);Xc("invalid",R);break;case "option":Ua=Ca;break;case "select":R._wrapperState={wasMultiple:!!Ca.multiple};Ua=xg({},Ca,{value:void 0});Xc("invalid",R);break;case "textarea":K(R,Ca);Ua=J(R,Ca);Xc("invalid",R);break;default:Ua=Ca}ca(sa,Ua);lc=Ua;for(ab in lc)if(lc.hasOwnProperty(ab)){var Ac=lc[ab];"style"===ab?Z(R,Ac):"dangerouslySetInnerHTML"===
ab?(Ac=Ac?Ac.__html:void 0,null!=Ac&&Wj(R,Ac)):"children"===ab?"string"===typeof Ac?("textarea"!==sa||""!==Ac)&&M(R,Ac):"number"===typeof Ac&&M(R,""+Ac):"suppressContentEditableWarning"!==ab&&"suppressHydrationWarning"!==ab&&"autoFocus"!==ab&&(ld.hasOwnProperty(ab)?null!=Ac&&"onScroll"===ab&&Xc("scroll",R):null!=Ac&&g(R,ab,Ac,Kb))}switch(sa){case "input":w(R);v(R,Ca,!1);break;case "textarea":w(R);I(R);break;case "option":null!=Ca.value&&R.setAttribute("value",""+f(Ca.value));break;case "select":R.multiple=
!!Ca.multiple;ab=Ca.value;null!=ab?F(R,!!Ca.multiple,ab,!1):null!=Ca.defaultValue&&F(R,!!Ca.multiple,Ca.defaultValue,!0);break;default:"function"===typeof Ua.onClick&&(R.onclick=sf)}switch(sa){case "button":case "input":case "select":case "textarea":Ca=!!Ca.autoFocus;break a;case "img":Ca=!0;break a;default:Ca=!1}}Ca&&(aa.flags|=4)}null!==aa.ref&&(aa.flags|=512,aa.flags|=2097152)}Ye(aa);return null;case 6:if(R&&null!=aa.stateNode)Al(R,aa,R.memoizedProps,Ca);else{if("string"!==typeof Ca&&null===aa.stateNode)throw Error(b(166));
sa=Tg(Og.current);Tg(Lg.current);if(yc(aa)){Ca=aa.stateNode;sa=aa.memoizedProps;Ca[Ah]=aa;if(ab=Ca.nodeValue!==sa)if(R=ai,null!==R)switch(R.tag){case 3:qf(Ca.nodeValue,sa,0!==(R.mode&1));break;case 5:!0!==R.memoizedProps.suppressHydrationWarning&&qf(Ca.nodeValue,sa,0!==(R.mode&1))}ab&&(aa.flags|=4)}else Ca=(9===sa.nodeType?sa:sa.ownerDocument).createTextNode(Ca),Ca[Ah]=aa,aa.stateNode=Ca}Ye(aa);return null;case 13:df(Bg);Ca=aa.memoizedState;if(null===R||null!==R.memoizedState&&null!==R.memoizedState.dehydrated){if(Fg&&
null!==Th&&0!==(aa.mode&1)&&0===(aa.flags&128))vc(),oc(),aa.flags|=98560,ab=!1;else if(ab=yc(aa),null!==Ca&&null!==Ca.dehydrated){if(null===R){if(!ab)throw Error(b(318));ab=aa.memoizedState;ab=null!==ab?ab.dehydrated:null;if(!ab)throw Error(b(317));ab[Ah]=aa}else oc(),0===(aa.flags&128)&&(aa.memoizedState=null),aa.flags|=4;Ye(aa);ab=!1}else null!==Gi&&(mb(Gi),Gi=null),ab=!0;if(!ab)return aa.flags&65536?aa:null}if(0!==(aa.flags&128))return aa.lanes=sa,aa;Ca=null!==Ca;Ca!==(null!==R&&null!==R.memoizedState)&&
Ca&&(aa.child.flags|=8192,0!==(aa.mode&1)&&(null===R||0!==(Bg.current&1)?0===Qg&&(Qg=3):Xb()));null!==aa.updateQueue&&(aa.flags|=4);Ye(aa);return null;case 4:return hh(),ml(R,aa),null===R&&Sc(aa.stateNode.containerInfo),Ye(aa),null;case 10:return Yd(aa.type._context),Ye(aa),null;case 17:return Mb(aa.type)&&$b(),Ye(aa),null;case 19:df(Bg);ab=aa.memoizedState;if(null===ab)return Ye(aa),null;Ca=0!==(aa.flags&128);Kb=ab.rendering;if(null===Kb)if(Ca)af(ab,!1);else{if(0!==Qg||null!==R&&0!==(R.flags&128))for(R=
aa.child;null!==R;){Kb=Zg(R);if(null!==Kb){aa.flags|=128;af(ab,!1);Ca=Kb.updateQueue;null!==Ca&&(aa.updateQueue=Ca,aa.flags|=4);aa.subtreeFlags=0;Ca=sa;for(sa=aa.child;null!==sa;)ab=sa,R=Ca,ab.flags&=14680066,Kb=ab.alternate,null===Kb?(ab.childLanes=0,ab.lanes=R,ab.child=null,ab.subtreeFlags=0,ab.memoizedProps=null,ab.memoizedState=null,ab.updateQueue=null,ab.dependencies=null,ab.stateNode=null):(ab.childLanes=Kb.childLanes,ab.lanes=Kb.lanes,ab.child=Kb.child,ab.subtreeFlags=0,ab.deletions=null,ab.memoizedProps=
Kb.memoizedProps,ab.memoizedState=Kb.memoizedState,ab.updateQueue=Kb.updateQueue,ab.type=Kb.type,R=Kb.dependencies,ab.dependencies=null===R?null:{lanes:R.lanes,firstContext:R.firstContext}),sa=sa.sibling;Rc(Bg,Bg.current&1|2);return aa.child}R=R.sibling}null!==ab.tail&&yg()>E&&(aa.flags|=128,Ca=!0,af(ab,!1),aa.lanes=4194304)}else{if(!Ca)if(R=Zg(Kb),null!==R){if(aa.flags|=128,Ca=!0,sa=R.updateQueue,null!==sa&&(aa.updateQueue=sa,aa.flags|=4),af(ab,!0),null===ab.tail&&"hidden"===ab.tailMode&&!Kb.alternate&&
!Fg)return Ye(aa),null}else 2*yg()-ab.renderingStartTime>E&&1073741824!==sa&&(aa.flags|=128,Ca=!0,af(ab,!1),aa.lanes=4194304);ab.isBackwards?(Kb.sibling=aa.child,aa.child=Kb):(sa=ab.last,null!==sa?sa.sibling=Kb:aa.child=Kb,ab.last=Kb)}if(null!==ab.tail)return aa=ab.tail,ab.rendering=aa,ab.tail=aa.sibling,ab.renderingStartTime=yg(),aa.sibling=null,sa=Bg.current,Rc(Bg,Ca?sa&1|2:sa&1),aa;Ye(aa);return null;case 22:case 23:return Da(),Ca=null!==aa.memoizedState,null!==R&&null!==R.memoizedState!==Ca&&
(aa.flags|=8192),Ca&&0!==(aa.mode&1)?0!==(Xg&1073741824)&&(Ye(aa),aa.subtreeFlags&6&&(aa.flags|=8192)):Ye(aa),null;case 24:return null;case 25:return null}throw Error(b(156,aa.tag));}function eg(R,aa){Yb(aa);switch(aa.tag){case 1:return Mb(aa.type)&&$b(),R=aa.flags,R&65536?(aa.flags=R&-65537|128,aa):null;case 3:return hh(),df(Sh),df(Dh),$f(),R=aa.flags,0!==(R&65536)&&0===(R&128)?(aa.flags=R&-65537|128,aa):null;case 5:return Kf(aa),null;case 13:df(Bg);R=aa.memoizedState;if(null!==R&&null!==R.dehydrated){if(null===
aa.alternate)throw Error(b(340));oc()}R=aa.flags;return R&65536?(aa.flags=R&-65537|128,aa):null;case 19:return df(Bg),null;case 4:return hh(),null;case 10:return Yd(aa.type._context),null;case 22:case 23:return Da(),null;case 24:return null;default:return null}}function tg(R,aa){var sa=R.ref;if(null!==sa)if("function"===typeof sa)try{sa(null)}catch(Ca){Ed(R,aa,Ca)}else sa.current=null}function Sf(R,aa,sa){try{sa()}catch(Ca){Ed(R,aa,Ca)}}function Ie(R,aa){Ni=zh;R=tc();if(Uc(R)){if("selectionStart"in
R)var sa={start:R.selectionStart,end:R.selectionEnd};else a:{sa=(sa=R.ownerDocument)&&sa.defaultView||window;var Ca=sa.getSelection&&sa.getSelection();if(Ca&&0!==Ca.rangeCount){sa=Ca.anchorNode;var Ua=Ca.anchorOffset,ab=Ca.focusNode;Ca=Ca.focusOffset;try{sa.nodeType,ab.nodeType}catch(Fe){sa=null;break a}var Kb=0,lc=-1,Ac=-1,od=0,Ud=0,Xd=R,ie=null;b:for(;;){for(var ze;;){Xd!==sa||0!==Ua&&3!==Xd.nodeType||(lc=Kb+Ua);Xd!==ab||0!==Ca&&3!==Xd.nodeType||(Ac=Kb+Ca);3===Xd.nodeType&&(Kb+=Xd.nodeValue.length);
if(null===(ze=Xd.firstChild))break;ie=Xd;Xd=ze}for(;;){if(Xd===R)break b;ie===sa&&++od===Ua&&(lc=Kb);ie===ab&&++Ud===Ca&&(Ac=Kb);if(null!==(ze=Xd.nextSibling))break;Xd=ie;ie=Xd.parentNode}Xd=ze}sa=-1===lc||-1===Ac?null:{start:lc,end:Ac}}else sa=null}sa=sa||{start:0,end:0}}else sa=null;mi={focusedElem:R,selectionRange:sa};zh=!1;for(Ze=aa;null!==Ze;)if(aa=Ze,R=aa.child,0!==(aa.subtreeFlags&1028)&&null!==R)R.return=aa,Ze=R;else for(;null!==Ze;){aa=Ze;try{var Pe=aa.alternate;if(0!==(aa.flags&1024))switch(aa.tag){case 0:case 11:case 15:break;
case 1:if(null!==Pe){var cf=Pe.memoizedProps,Pf=Pe.memoizedState,td=aa.stateNode,hd=td.getSnapshotBeforeUpdate(aa.elementType===aa.type?cf:Qd(aa.type,cf),Pf);td.__reactInternalSnapshotBeforeUpdate=hd}break;case 3:var Cd=aa.stateNode.containerInfo;1===Cd.nodeType?Cd.textContent="":9===Cd.nodeType&&Cd.documentElement&&Cd.removeChild(Cd.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(b(163));}}catch(Fe){Ed(aa,aa.return,Fe)}R=aa.sibling;if(null!==R){R.return=aa.return;Ze=
R;break}Ze=aa.return}Pe=jk;jk=!1;return Pe}function Of(R,aa,sa){var Ca=aa.updateQueue;Ca=null!==Ca?Ca.lastEffect:null;if(null!==Ca){var Ua=Ca=Ca.next;do{if((Ua.tag&R)===R){var ab=Ua.destroy;Ua.destroy=void 0;void 0!==ab&&Sf(aa,sa,ab)}Ua=Ua.next}while(Ua!==Ca)}}function Eg(R,aa){aa=aa.updateQueue;aa=null!==aa?aa.lastEffect:null;if(null!==aa){var sa=aa=aa.next;do{if((sa.tag&R)===R){var Ca=sa.create;sa.destroy=Ca()}sa=sa.next}while(sa!==aa)}}function ah(R){var aa=R.ref;if(null!==aa){var sa=R.stateNode;
switch(R.tag){case 5:R=sa;break;default:R=sa}"function"===typeof aa?aa(R):aa.current=R}}function Wi(R){var aa=R.alternate;null!==aa&&(R.alternate=null,Wi(aa));R.child=null;R.deletions=null;R.sibling=null;5===R.tag&&(aa=R.stateNode,null!==aa&&(delete aa[Ah],delete aa[dh],delete aa[Yk],delete aa[ul],delete aa[vl]));R.stateNode=null;R.return=null;R.dependencies=null;R.memoizedProps=null;R.memoizedState=null;R.pendingProps=null;R.stateNode=null;R.updateQueue=null}function Li(R){return 5===R.tag||3===
R.tag||4===R.tag}function Xi(R){a:for(;;){for(;null===R.sibling;){if(null===R.return||Li(R.return))return null;R=R.return}R.sibling.return=R.return;for(R=R.sibling;5!==R.tag&&6!==R.tag&&18!==R.tag;){if(R.flags&2)continue a;if(null===R.child||4===R.tag)continue a;else R.child.return=R,R=R.child}if(!(R.flags&2))return R.stateNode}}function uh(R,aa,sa){var Ca=R.tag;if(5===Ca||6===Ca)R=R.stateNode,aa?8===sa.nodeType?sa.parentNode.insertBefore(R,aa):sa.insertBefore(R,aa):(8===sa.nodeType?(aa=sa.parentNode,
aa.insertBefore(R,sa)):(aa=sa,aa.appendChild(R)),sa=sa._reactRootContainer,null!==sa&&void 0!==sa||null!==aa.onclick||(aa.onclick=sf));else if(4!==Ca&&(R=R.child,null!==R))for(uh(R,aa,sa),R=R.sibling;null!==R;)uh(R,aa,sa),R=R.sibling}function Ji(R,aa,sa){var Ca=R.tag;if(5===Ca||6===Ca)R=R.stateNode,aa?sa.insertBefore(R,aa):sa.appendChild(R);else if(4!==Ca&&(R=R.child,null!==R))for(Ji(R,aa,sa),R=R.sibling;null!==R;)Ji(R,aa,sa),R=R.sibling}function Vh(R,aa,sa){for(sa=sa.child;null!==sa;)jj(R,aa,sa),
sa=sa.sibling}function jj(R,aa,sa){if(zi&&"function"===typeof zi.onCommitFiberUnmount)try{zi.onCommitFiberUnmount(Yj,sa)}catch(lc){}switch(sa.tag){case 5:th||tg(sa,aa);case 6:var Ca=Mg,Ua=bi;Mg=null;Vh(R,aa,sa);Mg=Ca;bi=Ua;null!==Mg&&(bi?(R=Mg,sa=sa.stateNode,8===R.nodeType?R.parentNode.removeChild(sa):R.removeChild(sa)):Mg.removeChild(sa.stateNode));break;case 18:null!==Mg&&(bi?(R=Mg,sa=sa.stateNode,8===R.nodeType?Bf(R.parentNode,sa):1===R.nodeType&&Bf(R,sa),Eb(R)):Bf(Mg,sa.stateNode));break;case 4:Ca=
Mg;Ua=bi;Mg=sa.stateNode.containerInfo;bi=!0;Vh(R,aa,sa);Mg=Ca;bi=Ua;break;case 0:case 11:case 14:case 15:if(!th&&(Ca=sa.updateQueue,null!==Ca&&(Ca=Ca.lastEffect,null!==Ca))){Ua=Ca=Ca.next;do{var ab=Ua,Kb=ab.destroy;ab=ab.tag;void 0!==Kb&&(0!==(ab&2)?Sf(sa,aa,Kb):0!==(ab&4)&&Sf(sa,aa,Kb));Ua=Ua.next}while(Ua!==Ca)}Vh(R,aa,sa);break;case 1:if(!th&&(tg(sa,aa),Ca=sa.stateNode,"function"===typeof Ca.componentWillUnmount))try{Ca.props=sa.memoizedProps,Ca.state=sa.memoizedState,Ca.componentWillUnmount()}catch(lc){Ed(sa,
aa,lc)}Vh(R,aa,sa);break;case 21:Vh(R,aa,sa);break;case 22:sa.mode&1?(th=(Ca=th)||null!==sa.memoizedState,Vh(R,aa,sa),th=Ca):Vh(R,aa,sa);break;default:Vh(R,aa,sa)}}function yh(R){var aa=R.updateQueue;if(null!==aa){R.updateQueue=null;var sa=R.stateNode;null===sa&&(sa=R.stateNode=new nl);aa.forEach(function(Ca){var Ua=me.bind(null,R,Ca);sa.has(Ca)||(sa.add(Ca),Ca.then(Ua,Ua))})}}function kg(R,aa){var sa=aa.deletions;if(null!==sa)for(var Ca=0;Ca<sa.length;Ca++){var Ua=sa[Ca];try{var ab=R,Kb=aa,lc=Kb;
a:for(;null!==lc;){switch(lc.tag){case 5:Mg=lc.stateNode;bi=!1;break a;case 3:Mg=lc.stateNode.containerInfo;bi=!0;break a;case 4:Mg=lc.stateNode.containerInfo;bi=!0;break a}lc=lc.return}if(null===Mg)throw Error(b(160));jj(ab,Kb,Ua);Mg=null;bi=!1;var Ac=Ua.alternate;null!==Ac&&(Ac.return=null);Ua.return=null}catch(od){Ed(Ua,aa,od)}}if(aa.subtreeFlags&12854)for(aa=aa.child;null!==aa;)ci(aa,R),aa=aa.sibling}function ci(R,aa){var sa=R.alternate,Ca=R.flags;switch(R.tag){case 0:case 11:case 14:case 15:kg(aa,
R);Rg(R);if(Ca&4){try{Of(3,R,R.return),Eg(3,R)}catch(cf){Ed(R,R.return,cf)}try{Of(5,R,R.return)}catch(cf){Ed(R,R.return,cf)}}break;case 1:kg(aa,R);Rg(R);Ca&512&&null!==sa&&tg(sa,sa.return);break;case 5:kg(aa,R);Rg(R);Ca&512&&null!==sa&&tg(sa,sa.return);if(R.flags&32){var Ua=R.stateNode;try{M(Ua,"")}catch(cf){Ed(R,R.return,cf)}}if(Ca&4&&(Ua=R.stateNode,null!=Ua)){var ab=R.memoizedProps,Kb=null!==sa?sa.memoizedProps:ab,lc=R.type,Ac=R.updateQueue;R.updateQueue=null;if(null!==Ac)try{"input"===lc&&"radio"===
ab.type&&null!=ab.name&&D(Ua,ab);W(lc,Kb);var od=W(lc,ab);for(Kb=0;Kb<Ac.length;Kb+=2){var Ud=Ac[Kb],Xd=Ac[Kb+1];"style"===Ud?Z(Ua,Xd):"dangerouslySetInnerHTML"===Ud?Wj(Ua,Xd):"children"===Ud?M(Ua,Xd):g(Ua,Ud,Xd,od)}switch(lc){case "input":C(Ua,ab);break;case "textarea":O(Ua,ab);break;case "select":var ie=Ua._wrapperState.wasMultiple;Ua._wrapperState.wasMultiple=!!ab.multiple;var ze=ab.value;null!=ze?F(Ua,!!ab.multiple,ze,!1):ie!==!!ab.multiple&&(null!=ab.defaultValue?F(Ua,!!ab.multiple,ab.defaultValue,
!0):F(Ua,!!ab.multiple,ab.multiple?[]:"",!1))}Ua[dh]=ab}catch(cf){Ed(R,R.return,cf)}}break;case 6:kg(aa,R);Rg(R);if(Ca&4){if(null===R.stateNode)throw Error(b(162));Ua=R.stateNode;ab=R.memoizedProps;try{Ua.nodeValue=ab}catch(cf){Ed(R,R.return,cf)}}break;case 3:kg(aa,R);Rg(R);if(Ca&4&&null!==sa&&sa.memoizedState.isDehydrated)try{Eb(aa.containerInfo)}catch(cf){Ed(R,R.return,cf)}break;case 4:kg(aa,R);Rg(R);break;case 13:kg(aa,R);Rg(R);Ua=R.child;Ua.flags&8192&&(ab=null!==Ua.memoizedState,Ua.stateNode.isHidden=
ab,!ab||null!==Ua.alternate&&null!==Ua.alternate.memoizedState||(u=yg()));Ca&4&&yh(R);break;case 22:Ud=null!==sa&&null!==sa.memoizedState;R.mode&1?(th=(od=th)||Ud,kg(aa,R),th=od):kg(aa,R);Rg(R);if(Ca&8192){od=null!==R.memoizedState;if((R.stateNode.isHidden=od)&&!Ud&&0!==(R.mode&1))for(Ze=R,Ud=R.child;null!==Ud;){for(Xd=Ze=Ud;null!==Ze;){ie=Ze;ze=ie.child;switch(ie.tag){case 0:case 11:case 14:case 15:Of(4,ie,ie.return);break;case 1:tg(ie,ie.return);var Pe=ie.stateNode;if("function"===typeof Pe.componentWillUnmount){Ca=
ie;sa=ie.return;try{aa=Ca,Pe.props=aa.memoizedProps,Pe.state=aa.memoizedState,Pe.componentWillUnmount()}catch(cf){Ed(Ca,sa,cf)}}break;case 5:tg(ie,ie.return);break;case 22:if(null!==ie.memoizedState){Ph(Xd);continue}}null!==ze?(ze.return=ie,Ze=ze):Ph(Xd)}Ud=Ud.sibling}Ud=null;Xd=R;a:for(;;){if(5===Xd.tag){if(null===Ud){Ud=Xd;try{Ua=Xd.stateNode,od?(ab=Ua.style,"function"===typeof ab.setProperty?ab.setProperty("display","none","important"):ab.display="none"):(lc=Xd.stateNode,Ac=Xd.memoizedProps.style,
Kb=void 0!==Ac&&null!==Ac&&Ac.hasOwnProperty("display")?Ac.display:null,lc.style.display=Q("display",Kb))}catch(cf){Ed(R,R.return,cf)}}}else if(6===Xd.tag){if(null===Ud)try{Xd.stateNode.nodeValue=od?"":Xd.memoizedProps}catch(cf){Ed(R,R.return,cf)}}else if((22!==Xd.tag&&23!==Xd.tag||null===Xd.memoizedState||Xd===R)&&null!==Xd.child){Xd.child.return=Xd;Xd=Xd.child;continue}if(Xd===R)break a;for(;null===Xd.sibling;){if(null===Xd.return||Xd.return===R)break a;Ud===Xd&&(Ud=null);Xd=Xd.return}Ud===Xd&&
(Ud=null);Xd.sibling.return=Xd.return;Xd=Xd.sibling}}break;case 19:kg(aa,R);Rg(R);Ca&4&&yh(R);break;case 21:break;default:kg(aa,R),Rg(R)}}function Rg(R){var aa=R.flags;if(aa&2){try{a:{for(var sa=R.return;null!==sa;){if(Li(sa))break a;sa=sa.return}throw Error(b(160));}switch(sa.tag){case 5:var Ca=sa.stateNode;sa.flags&32&&(M(Ca,""),sa.flags&=-33);var Ua=Xi(R);Ji(R,Ua,Ca);break;case 3:case 4:var ab=sa.stateNode.containerInfo,Kb=Xi(R);uh(R,Kb,ab);break;default:throw Error(b(161));}}catch(lc){Ed(R,R.return,
lc)}R.flags&=-3}aa&4096&&(R.flags&=-4097)}function di(R,aa,sa){Ze=R;Mh(R,aa,sa)}function Mh(R,aa,sa){for(var Ca=0!==(R.mode&1);null!==Ze;){var Ua=Ze,ab=Ua.child;if(22===Ua.tag&&Ca){var Kb=null!==Ua.memoizedState||ik;if(!Kb){var lc=Ua.alternate,Ac=null!==lc&&null!==lc.memoizedState||th;lc=ik;var od=th;ik=Kb;if((th=Ac)&&!od)for(Ze=Ua;null!==Ze;)Kb=Ze,Ac=Kb.child,22===Kb.tag&&null!==Kb.memoizedState?ui(Ua):null!==Ac?(Ac.return=Kb,Ze=Ac):ui(Ua);for(;null!==ab;)Ze=ab,Mh(ab,aa,sa),ab=ab.sibling;Ze=Ua;ik=
lc;th=od}ri(R,aa,sa)}else 0!==(Ua.subtreeFlags&8772)&&null!==ab?(ab.return=Ua,Ze=ab):ri(R,aa,sa)}}function ri(R){for(;null!==Ze;){var aa=Ze;if(0!==(aa.flags&8772)){var sa=aa.alternate;try{if(0!==(aa.flags&8772))switch(aa.tag){case 0:case 11:case 15:th||Eg(5,aa);break;case 1:var Ca=aa.stateNode;if(aa.flags&4&&!th)if(null===sa)Ca.componentDidMount();else{var Ua=aa.elementType===aa.type?sa.memoizedProps:Qd(aa.type,sa.memoizedProps);Ca.componentDidUpdate(Ua,sa.memoizedState,Ca.__reactInternalSnapshotBeforeUpdate)}var ab=
aa.updateQueue;null!==ab&&Yg(aa,ab,Ca);break;case 3:var Kb=aa.updateQueue;if(null!==Kb){sa=null;if(null!==aa.child)switch(aa.child.tag){case 5:sa=aa.child.stateNode;break;case 1:sa=aa.child.stateNode}Yg(aa,Kb,sa)}break;case 5:var lc=aa.stateNode;if(null===sa&&aa.flags&4){sa=lc;var Ac=aa.memoizedProps;switch(aa.type){case "button":case "input":case "select":case "textarea":Ac.autoFocus&&sa.focus();break;case "img":Ac.src&&(sa.src=Ac.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(null===
aa.memoizedState){var od=aa.alternate;if(null!==od){var Ud=od.memoizedState;if(null!==Ud){var Xd=Ud.dehydrated;null!==Xd&&Eb(Xd)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(b(163));}th||aa.flags&512&&ah(aa)}catch(ie){Ed(aa,aa.return,ie)}}if(aa===R){Ze=null;break}sa=aa.sibling;if(null!==sa){sa.return=aa.return;Ze=sa;break}Ze=aa.return}}function Ph(R){for(;null!==Ze;){var aa=Ze;if(aa===R){Ze=null;break}var sa=aa.sibling;if(null!==sa){sa.return=aa.return;Ze=sa;break}Ze=
aa.return}}function ui(R){for(;null!==Ze;){var aa=Ze;try{switch(aa.tag){case 0:case 11:case 15:var sa=aa.return;try{Eg(4,aa)}catch(Ac){Ed(aa,sa,Ac)}break;case 1:var Ca=aa.stateNode;if("function"===typeof Ca.componentDidMount){var Ua=aa.return;try{Ca.componentDidMount()}catch(Ac){Ed(aa,Ua,Ac)}}var ab=aa.return;try{ah(aa)}catch(Ac){Ed(aa,ab,Ac)}break;case 5:var Kb=aa.return;try{ah(aa)}catch(Ac){Ed(aa,Kb,Ac)}}}catch(Ac){Ed(aa,aa.return,Ac)}if(aa===R){Ze=null;break}var lc=aa.sibling;if(null!==lc){lc.return=
aa.return;Ze=lc;break}Ze=aa.return}}function zg(){return 0!==(Qf&6)?yg():-1!==Sb?Sb:Sb=yg()}function Ue(R){if(0===(R.mode&1))return 1;if(0!==(Qf&2)&&0!==Rf)return Rf&-Rf;if(null!==$k.transition)return 0===ic&&(ic=qb()),ic;R=gg;if(0!==R)return R;R=window.event;return R=void 0===R?16:Rb(R.type)}function Dg(R,aa,sa,Ca){if(50<ib)throw ib=0,Hb=null,Error(b(185));ub(R,sa,Ca);if(0===(Qf&2)||R!==Jg)R===Jg&&(0===(Qf&2)&&(pi|=sa),4===Qg&&X(R,Rf)),Sg(R,Ca),1===sa&&0===Qf&&0===(aa.mode&1)&&(E=yg()+500,cj&&Be())}
function Sg(R,aa){var sa=R.callbackNode;jb(R,aa);var Ca=gb(R,R===Jg?Rf:0);if(0===Ca)null!==sa&&hl(sa),R.callbackNode=null,R.callbackPriority=0;else if(aa=Ca&-Ca,R.callbackPriority!==aa){null!=sa&&hl(sa);if(1===aa)0===R.tag?ue(V.bind(null,R)):Id(V.bind(null,R)),tl(function(){0===(Qf&6)&&Be()}),sa=null;else{switch(Ab(Ca)){case 1:sa=tj;break;case 4:sa=uj;break;case 16:sa=Mi;break;case 536870912:sa=el;break;default:sa=Mi}sa=ve(sa,ti.bind(null,R))}R.callbackPriority=aa;R.callbackNode=sa}}function ti(R,
aa){Sb=-1;ic=0;if(0!==(Qf&6))throw Error(b(327));var sa=R.callbackNode;if(Wc()&&R.callbackNode!==sa)return null;var Ca=gb(R,R===Jg?Rf:0);if(0===Ca)return null;if(0!==(Ca&30)||0!==(Ca&R.expiredLanes)||aa)aa=jc(R,Ca);else{aa=Ca;var Ua=Qf;Qf|=2;var ab=Nb();if(Jg!==R||Rf!==aa)P=null,E=yg()+500,Ra(R,aa);do try{for(;null!==Wg&&!pl();)Jc(Wg);break}catch(lc){nb(R,lc)}while(1);ek=dj=Qj=null;Cg.current=ab;Qf=Ua;null!==Wg?aa=0:(Jg=null,Rf=0,aa=Qg)}if(0!==aa){2===aa&&(Ua=vb(R),0!==Ua&&(Ca=Ua,aa=si(R,Ua)));if(1===
aa)throw sa=Jj,Ra(R,0),X(R,Ca),Sg(R,yg()),sa;if(6===aa)X(R,Ca);else{Ua=R.current.alternate;if(0===(Ca&30)&&!S(Ua)&&(aa=jc(R,Ca),2===aa&&(ab=vb(R),0!==ab&&(Ca=ab,aa=si(R,ab))),1===aa))throw sa=Jj,Ra(R,0),X(R,Ca),Sg(R,yg()),sa;R.finishedWork=Ua;R.finishedLanes=Ca;switch(aa){case 0:case 1:throw Error(b(345));case 2:$c(R,Lh,P);break;case 3:X(R,Ca);if((Ca&130023424)===Ca&&(aa=u+500-yg(),10<aa)){if(0!==gb(R,0))break;Ua=R.suspendedLanes;if((Ua&Ca)!==Ca){zg();R.pingedLanes|=R.suspendedLanes&Ua;break}R.timeoutHandle=
Xk($c.bind(null,R,Lh,P),aa);break}$c(R,Lh,P);break;case 4:X(R,Ca);if((Ca&4194240)===Ca)break;aa=R.eventTimes;for(Ua=-1;0<Ca;){var Kb=31-Fi(Ca);ab=1<<Kb;Kb=aa[Kb];Kb>Ua&&(Ua=Kb);Ca&=~ab}Ca=Ua;Ca=yg()-Ca;Ca=(120>Ca?120:480>Ca?480:1080>Ca?1080:1920>Ca?1920:3E3>Ca?3E3:4320>Ca?4320:1960*Uj(Ca/1960))-Ca;if(10<Ca){R.timeoutHandle=Xk($c.bind(null,R,Lh,P),Ca);break}$c(R,Lh,P);break;case 5:$c(R,Lh,P);break;default:throw Error(b(329));}}}Sg(R,yg());return R.callbackNode===sa?ti.bind(null,R):null}function si(R,
aa){var sa=qi;R.current.memoizedState.isDehydrated&&(Ra(R,aa).flags|=256);R=jc(R,aa);2!==R&&(aa=Lh,Lh=sa,null!==aa&&mb(aa));return R}function mb(R){null===Lh?Lh=R:Lh.push.apply(Lh,R)}function S(R){for(var aa=R;;){if(aa.flags&16384){var sa=aa.updateQueue;if(null!==sa&&(sa=sa.stores,null!==sa))for(var Ca=0;Ca<sa.length;Ca++){var Ua=sa[Ca],ab=Ua.getSnapshot;Ua=Ua.value;try{if(!ji(ab(),Ua))return!1}catch(Kb){return!1}}}sa=aa.child;if(aa.subtreeFlags&16384&&null!==sa)sa.return=aa,aa=sa;else{if(aa===R)break;
for(;null===aa.sibling;){if(null===aa.return||aa.return===R)return!0;aa=aa.return}aa.sibling.return=aa.return;aa=aa.sibling}}return!0}function X(R,aa){aa&=~Ng;aa&=~pi;R.suspendedLanes|=aa;R.pingedLanes&=~aa;for(R=R.expirationTimes;0<aa;){var sa=31-Fi(aa),Ca=1<<sa;R[sa]=-1;aa&=~Ca}}function V(R){if(0!==(Qf&6))throw Error(b(327));Wc();var aa=gb(R,0);if(0===(aa&1))return Sg(R,yg()),null;var sa=jc(R,aa);if(0!==R.tag&&2===sa){var Ca=vb(R);0!==Ca&&(aa=Ca,sa=si(R,Ca))}if(1===sa)throw sa=Jj,Ra(R,0),X(R,aa),
Sg(R,yg()),sa;if(6===sa)throw Error(b(345));R.finishedWork=R.current.alternate;R.finishedLanes=aa;$c(R,Lh,P);Sg(R,yg());return null}function ea(R,aa){var sa=Qf;Qf|=1;try{return R(aa)}finally{Qf=sa,0===Qf&&(E=yg()+500,cj&&Be())}}function va(R){null!==Va&&0===Va.tag&&0===(Qf&6)&&Wc();var aa=Qf;Qf|=1;var sa=Kh.transition,Ca=gg;try{if(Kh.transition=null,gg=1,R)return R()}finally{gg=Ca,Kh.transition=sa,Qf=aa,0===(Qf&6)&&Be()}}function Da(){Xg=gj.current;df(gj)}function Ra(R,aa){R.finishedWork=null;R.finishedLanes=
0;var sa=R.timeoutHandle;-1!==sa&&(R.timeoutHandle=-1,sl(sa));if(null!==Wg)for(sa=Wg.return;null!==sa;){var Ca=sa;Yb(Ca);switch(Ca.tag){case 1:Ca=Ca.type.childContextTypes;null!==Ca&&void 0!==Ca&&$b();break;case 3:hh();df(Sh);df(Dh);$f();break;case 5:Kf(Ca);break;case 4:hh();break;case 13:df(Bg);break;case 19:df(Bg);break;case 10:Yd(Ca.type._context);break;case 22:case 23:Da()}sa=sa.return}Jg=R;Wg=R=Ke(R.current,null);Rf=Xg=aa;Qg=0;Jj=null;Ng=pi=oi=0;Lh=qi=null;if(null!==Hi){for(aa=0;aa<Hi.length;aa++)if(sa=
Hi[aa],Ca=sa.interleaved,null!==Ca){sa.interleaved=null;var Ua=Ca.next,ab=sa.pending;if(null!==ab){var Kb=ab.next;ab.next=Ua;Ca.next=Kb}sa.pending=Ca}Hi=null}return R}function nb(R,aa){do{var sa=Wg;try{ek=dj=Qj=null;Yi.current=sj;if(Bi){for(var Ca=dg.memoizedState;null!==Ca;){var Ua=Ca.queue;null!==Ua&&(Ua.pending=null);Ca=Ca.next}Bi=!1}Pi=0;Pg=Vg=dg=null;gk=!1;hk=0;jg.current=null;if(null===sa||null===sa.return){Qg=1;Jj=aa;Wg=null;break}a:{var ab=R,Kb=sa.return,lc=sa,Ac=aa;aa=Rf;lc.flags|=32768;
if(null!==Ac&&"object"===typeof Ac&&"function"===typeof Ac.then){var od=Ac,Ud=lc,Xd=Ud.tag;if(0===(Ud.mode&1)&&(0===Xd||11===Xd||15===Xd)){var ie=Ud.alternate;ie?(Ud.updateQueue=ie.updateQueue,Ud.memoizedState=ie.memoizedState,Ud.lanes=ie.lanes):(Ud.updateQueue=null,Ud.memoizedState=null)}var ze=Ob(Kb);if(null!==ze){ze.flags&=-257;bc(ze,Kb,lc,ab,aa);ze.mode&1&&Qa(ab,od,aa);aa=ze;Ac=od;var Pe=aa.updateQueue;if(null===Pe){var cf=new Set;cf.add(Ac);aa.updateQueue=cf}else Pe.add(Ac);break a}else{if(0===
(aa&1)){Qa(ab,od,aa);Xb();break a}Ac=Error(b(426))}}else if(Fg&&lc.mode&1){var Pf=Ob(Kb);if(null!==Pf){0===(Pf.flags&65536)&&(Pf.flags|=256);bc(Pf,Kb,lc,ab,aa);vd(Hh(Ac,lc));break a}}ab=Ac=Hh(Ac,lc);4!==Qg&&(Qg=2);null===qi?qi=[ab]:qi.push(ab);ab=Kb;do{switch(ab.tag){case 3:ab.flags|=65536;aa&=-aa;ab.lanes|=aa;var td=Oh(ab,Ac,aa);Nh(ab,td);break a;case 1:lc=Ac;var hd=ab.type,Cd=ab.stateNode;if(0===(ab.flags&128)&&("function"===typeof hd.getDerivedStateFromError||null!==Cd&&"function"===typeof Cd.componentDidCatch&&
(null===wa||!wa.has(Cd)))){ab.flags|=65536;aa&=-aa;ab.lanes|=aa;var Fe=Ya(ab,lc,aa);Nh(ab,Fe);break a}}ab=ab.return}while(null!==ab)}Kc(sa)}catch(kf){aa=kf;Wg===sa&&null!==sa&&(Wg=sa.return);continue}break}while(1)}function Nb(){var R=Cg.current;Cg.current=sj;return null===R?sj:R}function Xb(){if(0===Qg||3===Qg||2===Qg)Qg=4;null===Jg||0===(oi&268435455)&&0===(pi&268435455)||X(Jg,Rf)}function jc(R,aa){var sa=Qf;Qf|=2;var Ca=Nb();if(Jg!==R||Rf!==aa)P=null,Ra(R,aa);do try{for(;null!==Wg;)Jc(Wg);break}catch(Ua){nb(R,
Ua)}while(1);ek=dj=Qj=null;Qf=sa;Cg.current=Ca;if(null!==Wg)throw Error(b(261));Jg=null;Rf=0;return Qg}function Jc(R){var aa=Dc(R.alternate,R,Xg);R.memoizedProps=R.pendingProps;null===aa?Kc(R):Wg=aa;jg.current=null}function Kc(R){var aa=R;do{var sa=aa.alternate;R=aa.return;if(0===(aa.flags&32768)){if(sa=hg(sa,aa,Xg),null!==sa){Wg=sa;return}}else{sa=eg(sa,aa);if(null!==sa){sa.flags&=32767;Wg=sa;return}if(null!==R)R.flags|=32768,R.subtreeFlags=0,R.deletions=null;else{Qg=6;Wg=null;return}}aa=aa.sibling;
if(null!==aa){Wg=aa;return}Wg=aa=R}while(null!==aa);0===Qg&&(Qg=5)}function $c(R,aa,sa){var Ca=gg,Ua=Kh.transition;try{Kh.transition=null,gg=1,ad(R,aa,sa,Ca)}finally{Kh.transition=Ua,gg=Ca}return null}function ad(R,aa,sa,Ca){do Wc();while(null!==Va);if(0!==(Qf&6))throw Error(b(327));sa=R.finishedWork;var Ua=R.finishedLanes;if(null===sa)return null;R.finishedWork=null;R.finishedLanes=0;if(sa===R.current)throw Error(b(177));R.callbackNode=null;R.callbackPriority=0;var ab=sa.lanes|sa.childLanes;wb(R,
ab);R===Jg&&(Wg=Jg=null,Rf=0);0===(sa.subtreeFlags&2064)&&0===(sa.flags&2064)||Ea||(Ea=!0,ve(Mi,function(){Wc();return null}));ab=0!==(sa.flags&15990);if(0!==(sa.subtreeFlags&15990)||ab){ab=Kh.transition;Kh.transition=null;var Kb=gg;gg=1;var lc=Qf;Qf|=4;jg.current=null;Ie(R,sa);ci(sa,R);kd(mi);zh=!!Ni;mi=Ni=null;R.current=sa;di(sa,R,Ua);yj();Qf=lc;gg=Kb;Kh.transition=ab}else R.current=sa;Ea&&(Ea=!1,Va=R,Za=Ua);ab=R.pendingLanes;0===ab&&(wa=null);Ia(sa.stateNode,Ca);Sg(R,yg());if(null!==aa)for(Ca=
R.onRecoverableError,sa=0;sa<aa.length;sa++)Ua=aa[sa],Ca(Ua.value,{componentStack:Ua.stack,digest:Ua.digest});if(fa)throw fa=!1,R=pa,pa=null,R;0!==(Za&1)&&0!==R.tag&&Wc();ab=R.pendingLanes;0!==(ab&1)?R===Hb?ib++:(ib=0,Hb=R):ib=0;Be();return null}function Wc(){if(null!==Va){var R=Ab(Za),aa=Kh.transition,sa=gg;try{Kh.transition=null;gg=16>R?16:R;if(null===Va)var Ca=!1;else{R=Va;Va=null;Za=0;if(0!==(Qf&6))throw Error(b(331));var Ua=Qf;Qf|=4;for(Ze=R.current;null!==Ze;){var ab=Ze,Kb=ab.child;if(0!==(Ze.flags&
16)){var lc=ab.deletions;if(null!==lc){for(var Ac=0;Ac<lc.length;Ac++){var od=lc[Ac];for(Ze=od;null!==Ze;){var Ud=Ze;switch(Ud.tag){case 0:case 11:case 15:Of(8,Ud,ab)}var Xd=Ud.child;if(null!==Xd)Xd.return=Ud,Ze=Xd;else for(;null!==Ze;){Ud=Ze;var ie=Ud.sibling,ze=Ud.return;Wi(Ud);if(Ud===od){Ze=null;break}if(null!==ie){ie.return=ze;Ze=ie;break}Ze=ze}}}var Pe=ab.alternate;if(null!==Pe){var cf=Pe.child;if(null!==cf){Pe.child=null;do{var Pf=cf.sibling;cf.sibling=null;cf=Pf}while(null!==cf)}}Ze=ab}}if(0!==
(ab.subtreeFlags&2064)&&null!==Kb)Kb.return=ab,Ze=Kb;else a:for(;null!==Ze;){ab=Ze;if(0!==(ab.flags&2048))switch(ab.tag){case 0:case 11:case 15:Of(9,ab,ab.return)}var td=ab.sibling;if(null!==td){td.return=ab.return;Ze=td;break a}Ze=ab.return}}var hd=R.current;for(Ze=hd;null!==Ze;){Kb=Ze;var Cd=Kb.child;if(0!==(Kb.subtreeFlags&2064)&&null!==Cd)Cd.return=Kb,Ze=Cd;else a:for(Kb=hd;null!==Ze;){lc=Ze;if(0!==(lc.flags&2048))try{switch(lc.tag){case 0:case 11:case 15:Eg(9,lc)}}catch(kf){Ed(lc,lc.return,kf)}if(lc===
Kb){Ze=null;break a}var Fe=lc.sibling;if(null!==Fe){Fe.return=lc.return;Ze=Fe;break a}Ze=lc.return}}Qf=Ua;Be();if(zi&&"function"===typeof zi.onPostCommitFiberRoot)try{zi.onPostCommitFiberRoot(Yj,R)}catch(kf){}Ca=!0}return Ca}finally{gg=sa,Kh.transition=aa}}return!1}function wd(R,aa,sa){aa=Hh(sa,aa);aa=Oh(R,aa,1);R=Gg(R,aa,1);aa=zg();null!==R&&(ub(R,1,aa),Sg(R,aa))}function Ed(R,aa,sa){if(3===R.tag)wd(R,R,sa);else for(;null!==aa;){if(3===aa.tag){wd(aa,R,sa);break}else if(1===aa.tag){var Ca=aa.stateNode;
if("function"===typeof aa.type.getDerivedStateFromError||"function"===typeof Ca.componentDidCatch&&(null===wa||!wa.has(Ca))){R=Hh(sa,R);R=Ya(aa,R,1);aa=Gg(aa,R,1);R=zg();null!==aa&&(ub(aa,1,R),Sg(aa,R));break}}aa=aa.return}}function Ld(R,aa,sa){var Ca=R.pingCache;null!==Ca&&Ca.delete(aa);aa=zg();R.pingedLanes|=R.suspendedLanes&sa;Jg===R&&(Rf&sa)===sa&&(4===Qg||3===Qg&&(Rf&130023424)===Rf&&500>yg()-u?Ra(R,0):Ng|=sa);Sg(R,aa)}function he(R,aa){0===aa&&(0===(R.mode&1)?aa=1:(aa=Zj,Zj<<=1,0===(Zj&130023424)&&
(Zj=4194304)));var sa=zg();R=Me(R,aa);null!==R&&(ub(R,aa,sa),Sg(R,sa))}function de(R){var aa=R.memoizedState,sa=0;null!==aa&&(sa=aa.retryLane);he(R,sa)}function me(R,aa){var sa=0;switch(R.tag){case 13:var Ca=R.stateNode,Ua=R.memoizedState;null!==Ua&&(sa=Ua.retryLane);break;case 19:Ca=R.stateNode;break;default:throw Error(b(314));}null!==Ca&&Ca.delete(aa);he(R,sa)}function ve(R,aa){return fl(R,aa)}function se(R,aa,sa,Ca){this.tag=R;this.key=sa;this.sibling=this.child=this.return=this.stateNode=this.type=
this.elementType=null;this.index=0;this.ref=null;this.pendingProps=aa;this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null;this.mode=Ca;this.subtreeFlags=this.flags=0;this.deletions=null;this.childLanes=this.lanes=0;this.alternate=null}function Ee(R,aa,sa,Ca){return new se(R,aa,sa,Ca)}function we(R){R=R.prototype;return!(!R||!R.isReactComponent)}function jf(R){if("function"===typeof R)return we(R)?1:0;if(void 0!==R&&null!==R){R=R.$$typeof;if(R===Ef)return 11;if(R===rg)return 14}return 2}
function Ke(R,aa){var sa=R.alternate;null===sa?(sa=Ee(R.tag,aa,R.key,R.mode),sa.elementType=R.elementType,sa.type=R.type,sa.stateNode=R.stateNode,sa.alternate=R,R.alternate=sa):(sa.pendingProps=aa,sa.type=R.type,sa.flags=0,sa.subtreeFlags=0,sa.deletions=null);sa.flags=R.flags&14680064;sa.childLanes=R.childLanes;sa.lanes=R.lanes;sa.child=R.child;sa.memoizedProps=R.memoizedProps;sa.memoizedState=R.memoizedState;sa.updateQueue=R.updateQueue;aa=R.dependencies;sa.dependencies=null===aa?null:{lanes:aa.lanes,
firstContext:aa.firstContext};sa.sibling=R.sibling;sa.index=R.index;sa.ref=R.ref;return sa}function rf(R,aa,sa,Ca,Ua,ab){var Kb=2;Ca=R;if("function"===typeof R)we(R)&&(Kb=1);else if("string"===typeof R)Kb=5;else a:switch(R){case mf:return pf(sa.children,Ua,ab,aa);case Uf:Kb=8;Ua|=8;break;case xf:return R=Ee(12,sa,aa,Ua|2),R.elementType=xf,R.lanes=ab,R;case fg:return R=Ee(13,sa,aa,Ua),R.elementType=fg,R.lanes=ab,R;case pg:return R=Ee(19,sa,aa,Ua),R.elementType=pg,R.lanes=ab,R;case xi:return cg(sa,
Ua,ab,aa);default:if("object"===typeof R&&null!==R)switch(R.$$typeof){case Jf:Kb=10;break a;case Gf:Kb=9;break a;case Ef:Kb=11;break a;case rg:Kb=14;break a;case bh:Kb=16;Ca=null;break a}throw Error(b(130,null==R?R:typeof R,""));}aa=Ee(Kb,sa,aa,Ua);aa.elementType=R;aa.type=Ca;aa.lanes=ab;return aa}function pf(R,aa,sa,Ca){R=Ee(7,R,Ca,aa);R.lanes=sa;return R}function cg(R,aa,sa,Ca){R=Ee(22,R,Ca,aa);R.elementType=xi;R.lanes=sa;R.stateNode={isHidden:!1};return R}function uf(R,aa,sa){R=Ee(6,R,null,aa);
R.lanes=sa;return R}function sg(R,aa,sa){aa=Ee(4,null!==R.children?R.children:[],R.key,aa);aa.lanes=sa;aa.stateNode={containerInfo:R.containerInfo,pendingChildren:null,implementation:R.implementation};return aa}function ef(R,aa,sa,Ca,Ua){this.tag=aa;this.containerInfo=R;this.finishedWork=this.pingCache=this.current=this.pendingChildren=null;this.timeoutHandle=-1;this.callbackNode=this.pendingContext=this.context=null;this.callbackPriority=0;this.eventTimes=Bb(0);this.expirationTimes=Bb(-1);this.entangledLanes=
this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0;this.entanglements=Bb(0);this.identifierPrefix=Ca;this.onRecoverableError=Ua;this.mutableSourceEagerHydrationData=null}function Wf(R,aa,sa,Ca,Ua,ab,Kb,lc,Ac){R=new ef(R,aa,sa,lc,Ac);1===aa?(aa=1,!0===ab&&(aa|=8)):aa=0;ab=Ee(3,null,null,aa);R.current=ab;ab.stateNode=R;ab.memoizedState={element:Ca,isDehydrated:sa,cache:null,transitions:null,pendingSuspenseBoundaries:null};Af(ab);return R}
function da(R,aa,sa){var Ca=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Pd,key:null==Ca?null:""+Ca,children:R,containerInfo:aa,implementation:sa}}function ua(R){if(!R)return qj;R=R._reactInternals;a:{if(la(R)!==R||1!==R.tag)throw Error(b(170));var aa=R;do{switch(aa.tag){case 3:aa=aa.stateNode.context;break a;case 1:if(Mb(aa.type)){aa=aa.stateNode.__reactInternalMemoizedMergedChildContext;break a}}aa=aa.return}while(null!==aa);throw Error(b(171));}if(1===R.tag){var sa=
R.type;if(Mb(sa))return Hd(R,sa,aa)}return aa}function Ba(R,aa,sa,Ca,Ua,ab,Kb,lc,Ac){R=Wf(sa,Ca,!0,R,Ua,ab,Kb,lc,Ac);R.context=ua(null);sa=R.current;Ca=zg();Ua=Ue(sa);ab=vg(Ca,Ua);ab.callback=void 0!==aa&&null!==aa?aa:null;Gg(sa,ab,Ua);R.current.lanes=Ua;ub(R,Ua,Ca);Sg(R,Ca);return R}function Fa(R,aa,sa,Ca){var Ua=aa.current,ab=zg(),Kb=Ue(Ua);sa=ua(sa);null===aa.context?aa.context=sa:aa.pendingContext=sa;aa=vg(ab,Kb);aa.payload={element:R};Ca=void 0===Ca?null:Ca;null!==Ca&&(aa.callback=Ca);R=Gg(Ua,
aa,Kb);null!==R&&(Dg(R,Ua,Kb,ab),ih(R,Ua,Kb));return Kb}function Na(R){R=R.current;if(!R.child)return null;switch(R.child.tag){case 5:return R.child.stateNode;default:return R.child.stateNode}}function Wa(R,aa){R=R.memoizedState;if(null!==R&&null!==R.dehydrated){var sa=R.retryLane;R.retryLane=0!==sa&&sa<aa?sa:aa}}function ob(R,aa){Wa(R,aa);(R=R.alternate)&&Wa(R,aa)}function hb(){return null}function fb(R){this._internalRoot=R}function xb(R){this._internalRoot=R}function Fb(R){return!(!R||1!==R.nodeType&&
9!==R.nodeType&&11!==R.nodeType)}function Tb(R){return!(!R||1!==R.nodeType&&9!==R.nodeType&&11!==R.nodeType&&(8!==R.nodeType||" react-mount-point-unstable "!==R.nodeValue))}function nc(){}function kc(R,aa,sa,Ca,Ua){if(Ua){if("function"===typeof Ca){var ab=Ca;Ca=function(){var od=Na(Kb);ab.call(od)}}var Kb=Ba(aa,Ca,R,0,null,!1,!1,"",nc);R._reactRootContainer=Kb;R[bj]=Kb.current;Sc(8===R.nodeType?R.parentNode:R);va();return Kb}for(;Ua=R.lastChild;)R.removeChild(Ua);if("function"===typeof Ca){var lc=
Ca;Ca=function(){var od=Na(Ac);lc.call(od)}}var Ac=Wf(R,0,!1,null,null,!1,!1,"",nc);R._reactRootContainer=Ac;R[bj]=Ac.current;Sc(8===R.nodeType?R.parentNode:R);va(function(){Fa(aa,Ac,sa,Ca)});return Ac}function Cc(R,aa,sa,Ca,Ua){var ab=sa._reactRootContainer;if(ab){var Kb=ab;if("function"===typeof Ua){var lc=Ua;Ua=function(){var Ac=Na(Kb);lc.call(Ac)}}Fa(aa,Kb,R,Ua)}else Kb=kc(sa,aa,R,Ua,Ca);return Na(Kb)}var Oc=Df(2),Gc=Df(18),Yc=new Set,ld={},pd=!("undefined"===typeof window||"undefined"===typeof window.document||
"undefined"===typeof window.document.createElement),sd=Object.prototype.hasOwnProperty,Md=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zd={},ee={},ce={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(R){ce[R]=
new m(R,0,!1,R,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(R){var aa=R[0];ce[aa]=new m(aa,1,!1,R[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(R){ce[R]=new m(R,2,!1,R.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(R){ce[R]=new m(R,2,!1,R,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(R){ce[R]=
new m(R,3,!1,R.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(R){ce[R]=new m(R,3,!0,R,null,!1,!1)});["capture","download"].forEach(function(R){ce[R]=new m(R,4,!1,R,null,!1,!1)});["cols","rows","size","span"].forEach(function(R){ce[R]=new m(R,6,!1,R,null,!1,!1)});["rowSpan","start"].forEach(function(R){ce[R]=new m(R,5,!1,R.toLowerCase(),null,!1,!1)});var je=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(R){var aa=
R.replace(je,a);ce[aa]=new m(aa,1,!1,R,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(R){var aa=R.replace(je,a);ce[aa]=new m(aa,1,!1,R,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(R){var aa=R.replace(je,a);ce[aa]=new m(aa,1,!1,R,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(R){ce[R]=new m(R,1,!1,R.toLowerCase(),null,!1,!1)});ce.xlinkHref=
new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(R){ce[R]=new m(R,1,!1,R.toLowerCase(),null,!0,!0)});var lf=Oc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,re=Symbol.for("react.element"),Pd=Symbol.for("react.portal"),mf=Symbol.for("react.fragment"),Uf=Symbol.for("react.strict_mode"),xf=Symbol.for("react.profiler"),Jf=Symbol.for("react.provider"),Gf=Symbol.for("react.context"),Ef=Symbol.for("react.forward_ref"),fg=
Symbol.for("react.suspense"),pg=Symbol.for("react.suspense_list"),rg=Symbol.for("react.memo"),bh=Symbol.for("react.lazy");Symbol.for("react.scope");Symbol.for("react.debug_trace_mode");var xi=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden");Symbol.for("react.cache");Symbol.for("react.tracing_marker");var hj=Symbol.iterator,xg=Object.assign,Ki,lg=!1,bg=Array.isArray,ph,Wj=function(R){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(aa,sa,Ca,Ua){MSApp.execUnsafeLocalFunction(function(){return R(aa,
sa,Ca,Ua)})}:R}(function(R,aa){if("http://www.w3.org/2000/svg"!==R.namespaceURI||"innerHTML"in R)R.innerHTML=aa;else{ph=ph||document.createElement("div");ph.innerHTML="\x3csvg\x3e"+aa.valueOf().toString()+"\x3c/svg\x3e";for(aa=ph.firstChild;R.firstChild;)R.removeChild(R.firstChild);for(;aa.firstChild;)R.appendChild(aa.firstChild)}}),xh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,
columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fi=["Webkit","ms","Moz","O"];
Object.keys(xh).forEach(function(R){fi.forEach(function(aa){aa=aa+R.charAt(0).toUpperCase()+R.substring(1);xh[aa]=xh[R]})});var ij=xg({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),Ag=null,yi=null,Xh=null,hi=null,Zi=!1,Qi=!1;if(pd)try{var Ci={};Object.defineProperty(Ci,"passive",{get:function(){Qi=!0}});window.addEventListener("test",Ci,Ci);window.removeEventListener("test",Ci,Ci)}catch(R){Qi=!1}var Di=!1,Ei=
null,nk=!1,Dk=null,ol={onError:function(R){Di=!0;Ei=R}},fl=Gc.unstable_scheduleCallback,hl=Gc.unstable_cancelCallback,pl=Gc.unstable_shouldYield,yj=Gc.unstable_requestPaint,yg=Gc.unstable_now,Kj=Gc.unstable_getCurrentPriorityLevel,tj=Gc.unstable_ImmediatePriority,uj=Gc.unstable_UserBlockingPriority,Mi=Gc.unstable_NormalPriority,Xj=Gc.unstable_LowPriority,el=Gc.unstable_IdlePriority,Yj=null,zi=null,Fi=Math.clz32?Math.clz32:Xa,ql=Math.log,rl=Math.LN2,Ai=64,Zj=4194304,gg=0,vj=!1,Lj=[],Ri=null,Ce=null,
Si=null,ch=new Map,gi=new Map,$i=[],zk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" "),zj=lf.ReactCurrentBatchConfig,zh=!0,ig=null,Yh=null,Aj=null,ii=null,mj={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(R){return R.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mj=db(mj),
aj=xg({},mj,{view:0,detail:0}),Qh=db(aj),xj,We,ff,Bj=xg({},aj,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gb,button:0,buttons:0,relatedTarget:function(R){return void 0===R.relatedTarget?R.fromElement===R.srcElement?R.toElement:R.fromElement:R.relatedTarget},movementX:function(R){if("movementX"in R)return R.movementX;R!==ff&&(ff&&"mousemove"===R.type?(xj=R.screenX-ff.screenX,We=R.screenY-ff.screenY):We=xj=0,ff=R);return xj},movementY:function(R){return"movementY"in
R?R.movementY:We}}),Cj=db(Bj),ak=xg({},Bj,{dataTransfer:0}),Rh=db(ak),Ti=xg({},aj,{relatedTarget:0}),Ak=db(Ti),ok=xg({},mj,{animationName:0,elapsedTime:0,pseudoElement:0}),qg=db(ok),bk=xg({},mj,{clipboardData:function(R){return"clipboardData"in R?R.clipboardData:window.clipboardData}}),Ek=db(bk),Fk=xg({},mj,{data:0}),pk=db(Fk),kj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",
MozPrintableKey:"Unidentified"},Gk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"},
Ik=xg({},aj,{key:function(R){if(R.key){var aa=kj[R.key]||R.key;if("Unidentified"!==aa)return aa}return"keypress"===R.type?(R=Ic(R),13===R?"Enter":String.fromCharCode(R)):"keydown"===R.type||"keyup"===R.type?Gk[R.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gb,charCode:function(R){return"keypress"===R.type?Ic(R):0},keyCode:function(R){return"keydown"===R.type||"keyup"===R.type?R.keyCode:0},which:function(R){return"keypress"===
R.type?Ic(R):"keydown"===R.type||"keyup"===R.type?R.keyCode:0}}),Jk=db(Ik),qk=xg({},Bj,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rk=db(qk),Kk=xg({},aj,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gb}),nj=db(Kk),Lk=xg({},mj,{propertyName:0,elapsedTime:0,pseudoElement:0}),Mk=db(Lk),mk=xg({},Bj,{deltaX:function(R){return"deltaX"in R?R.deltaX:"wheelDeltaX"in R?-R.wheelDeltaX:
0},deltaY:function(R){return"deltaY"in R?R.deltaY:"wheelDeltaY"in R?-R.wheelDeltaY:"wheelDelta"in R?-R.wheelDelta:0},deltaZ:0,deltaMode:0}),Nk=db(mk),Ok=[9,13,27,32],Dj=pd&&"CompositionEvent"in window,Ej=null;pd&&"documentMode"in document&&(Ej=document.documentMode);var kk=pd&&"TextEvent"in window&&!Ej,lk=pd&&(!Dj||Ej&&8<Ej&&11>=Ej),Pk=String.fromCharCode(32),sk=!1,Fj=!1,il={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,
time:!0,url:!0,week:!0},Nj=null,Oj=null,Qk=!1;if(pd){if(pd){var tk="oninput"in document;if(!tk){var Rk=document.createElement("div");Rk.setAttribute("oninput","return;");tk="function"===typeof Rk.oninput}var Sk=tk}else Sk=!1;Qk=Sk&&(!document.documentMode||9<document.documentMode)}var ji="function"===typeof Object.is?Object.is:Ub,eh=pd&&"documentMode"in document&&11>=document.documentMode,Gj=null,uk=null,ck=null,wj=!1,ki={animationend:Fd("Animation","AnimationEnd"),animationiteration:Fd("Animation",
"AnimationIteration"),animationstart:Fd("Animation","AnimationStart"),transitionend:Fd("Transition","TransitionEnd")},Bk={},oj={};pd&&(oj=document.createElement("div").style,"AnimationEvent"in window||(delete ki.animationend.animation,delete ki.animationiteration.animation,delete ki.animationstart.animation),"TransitionEvent"in window||delete ki.transitionend.transition);for(var jl=yd("animationend"),dk=yd("animationiteration"),kl=yd("animationstart"),ll=yd("transitionend"),Tk=new Map,Uk="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" "),
Vk=0;Vk<Uk.length;Vk++){var Wk=Uk[Vk],Pj=Wk.toLowerCase(),pj=Wk[0].toUpperCase()+Wk.slice(1);Lc(Pj,"on"+pj)}Lc(jl,"onAnimationEnd");Lc(dk,"onAnimationIteration");Lc(kl,"onAnimationStart");Lc("dblclick","onDoubleClick");Lc("focusin","onFocus");Lc("focusout","onBlur");Lc(ll,"onTransitionEnd");G("onMouseEnter",["mouseout","mouseover"]);G("onMouseLeave",["mouseout","mouseover"]);G("onPointerEnter",["pointerout","pointerover"]);G("onPointerLeave",["pointerout","pointerover"]);N("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));
N("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));N("onBeforeInput",["compositionend","keypress","textInput","paste"]);N("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));N("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));N("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),
Bh=new Set("cancel close invalid load scroll toggle".split(" ").concat(sh)),Jh="_reactListening"+Math.random().toString(36).slice(2),Zh=/\r\n?/g,li=/\u0000|\uFFFD/g,Ni=null,mi=null,Xk="function"===typeof setTimeout?setTimeout:void 0,sl="function"===typeof clearTimeout?clearTimeout:void 0,Ih="function"===typeof Promise?Promise:void 0,tl="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof Ih?function(R){return Ih.resolve(null).then(R).catch(vf)}:Xk,Hj=Math.random().toString(36).slice(2),
Ah="__reactFiber$"+Hj,dh="__reactProps$"+Hj,bj="__reactContainer$"+Hj,Yk="__reactEvents$"+Hj,ul="__reactListeners$"+Hj,vl="__reactHandles$"+Hj,vk=[],Ch=-1,qj={},Dh=$e(qj),Sh=$e(!1),rj=qj,Oi=null,cj=!1,Zk=!1,lj=[],Eh=0,wk=null,xk=0,$h=[],ni=0,Ij=null,Ui=1,Ig="",ai=null,Th=null,Fg=!1,Gi=null,$k=lf.ReactCurrentBatchConfig,yk=$e(null),Qj=null,dj=null,ek=null,Hi=null,Ii=!1,al=(new Oc.Component).refs,fk={isMounted:function(R){return(R=R._reactInternals)?la(R)===R:!1},enqueueSetState:function(R,aa,sa){R=
R._reactInternals;var Ca=zg(),Ua=Ue(R),ab=vg(Ca,Ua);ab.payload=aa;void 0!==sa&&null!==sa&&(ab.callback=sa);aa=Gg(R,ab,Ua);null!==aa&&(Dg(aa,R,Ua,Ca),ih(aa,R,Ua))},enqueueReplaceState:function(R,aa,sa){R=R._reactInternals;var Ca=zg(),Ua=Ue(R),ab=vg(Ca,Ua);ab.tag=1;ab.payload=aa;void 0!==sa&&null!==sa&&(ab.callback=sa);aa=Gg(R,ab,Ua);null!==aa&&(Dg(aa,R,Ua,Ca),ih(aa,R,Ua))},enqueueForceUpdate:function(R,aa){R=R._reactInternals;var sa=zg(),Ca=Ue(R),Ua=vg(sa,Ca);Ua.tag=2;void 0!==aa&&null!==aa&&(Ua.callback=
aa);aa=Gg(R,Ua,Ca);null!==aa&&(Dg(aa,R,Ca,sa),ih(aa,R,Ca))}},ej=Hg(!0),Rj=Hg(!1),fj={},Lg=$e(fj),Vi=$e(fj),Og=$e(fj),Bg=$e(0),Ck=[],Yi=lf.ReactCurrentDispatcher,bl=lf.ReactCurrentBatchConfig,Pi=0,dg=null,Vg=null,Pg=null,Bi=!1,gk=!1,hk=0,Sj=0,sj={readContext:Oe,useCallback:Nf,useContext:Nf,useEffect:Nf,useImperativeHandle:Nf,useInsertionEffect:Nf,useLayoutEffect:Nf,useMemo:Nf,useReducer:Nf,useRef:Nf,useState:Nf,useDebugValue:Nf,useDeferredValue:Nf,useTransition:Nf,useMutableSource:Nf,useSyncExternalStore:Nf,
useId:Nf,unstable_isNewReconciler:!1},Yf={readContext:Oe,useCallback:function(R,aa){ag().memoizedState=[R,void 0===aa?null:aa];return R},useContext:Oe,useEffect:jd,useImperativeHandle:function(R,aa,sa){sa=null!==sa&&void 0!==sa?sa.concat([R]):null;return rc(4194308,4,Xe.bind(null,aa,R),sa)},useLayoutEffect:function(R,aa){return rc(4194308,4,R,aa)},useInsertionEffect:function(R,aa){return rc(4,2,R,aa)},useMemo:function(R,aa){var sa=ag();aa=void 0===aa?null:aa;R=R();sa.memoizedState=[R,aa];return R},
useReducer:function(R,aa,sa){var Ca=ag();aa=void 0!==sa?sa(aa):aa;Ca.memoizedState=Ca.baseState=aa;R={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:R,lastRenderedState:aa};Ca.queue=R;R=R.dispatch=Ug.bind(null,dg,R);return[Ca.memoizedState,R]},useRef:function(R){var aa=ag();R={current:R};return aa.memoizedState=R},useState:Lb,useDebugValue:Je,useDeferredValue:function(R){return ag().memoizedState=R},useTransition:function(){var R=Lb(!1),aa=R[0];R=$g.bind(null,R[1]);ag().memoizedState=
R;return[aa,R]},useMutableSource:function(){},useSyncExternalStore:function(R,aa,sa){var Ca=dg,Ua=ag();if(Fg){if(void 0===sa)throw Error(b(407));sa=sa()}else{sa=aa();if(null===Jg)throw Error(b(349));0!==(Pi&30)||Sa(Ca,aa,sa)}Ua.memoizedState=sa;var ab={value:sa,getSnapshot:aa};Ua.queue=ab;jd(lb.bind(null,Ca,ab,R),[R]);Ca.flags|=2048;ec(9,eb.bind(null,Ca,ab,sa,aa),void 0,null);return sa},useId:function(){var R=ag(),aa=Jg.identifierPrefix;if(Fg){var sa=Ig,Ca=Ui;sa=(Ca&~(1<<32-Fi(Ca)-1)).toString(32)+
sa;aa=":"+aa+"R"+sa;sa=hk++;0<sa&&(aa+="H"+sa.toString(32));aa+=":"}else sa=Sj++,aa=":"+aa+"r"+sa.toString(32)+":";return R.memoizedState=aa},unstable_isNewReconciler:!1},wl={readContext:Oe,useCallback:Tf,useContext:Oe,useEffect:Dd,useImperativeHandle:Vf,useInsertionEffect:ye,useLayoutEffect:Ae,useMemo:Mf,useReducer:wh,useRef:hc,useState:function(){return wh(nh)},useDebugValue:Je,useDeferredValue:function(R){var aa=wg();return tf(aa,Vg.memoizedState,R)},useTransition:function(){var R=wh(nh)[0],aa=
wg().memoizedState;return[R,aa]},useMutableSource:Ga,useSyncExternalStore:Oa,useId:Kg,unstable_isNewReconciler:!1},cl={readContext:Oe,useCallback:Tf,useContext:Oe,useEffect:Dd,useImperativeHandle:Vf,useInsertionEffect:ye,useLayoutEffect:Ae,useMemo:Mf,useReducer:Ha,useRef:hc,useState:function(){return Ha(nh)},useDebugValue:Je,useDeferredValue:function(R){var aa=wg();return null===Vg?aa.memoizedState=R:tf(aa,Vg.memoizedState,R)},useTransition:function(){var R=Ha(nh)[0],aa=wg().memoizedState;return[R,
aa]},useMutableSource:Ga,useSyncExternalStore:Oa,useId:Kg,unstable_isNewReconciler:!1},Tj="function"===typeof WeakMap?WeakMap:Map,xl=lf.ReactCurrentOwner,Uh=!1,dl={dehydrated:null,treeContext:null,retryLane:0};var yl=function(R,aa){for(var sa=aa.child;null!==sa;){if(5===sa.tag||6===sa.tag)R.appendChild(sa.stateNode);else if(4!==sa.tag&&null!==sa.child){sa.child.return=sa;sa=sa.child;continue}if(sa===aa)break;for(;null===sa.sibling;){if(null===sa.return||sa.return===aa)return;sa=sa.return}sa.sibling.return=
sa.return;sa=sa.sibling}};var ml=function(){};var zl=function(R,aa,sa,Ca){var Ua=R.memoizedProps;if(Ua!==Ca){R=aa.stateNode;Tg(Lg.current);var ab=null;switch(sa){case "input":Ua=B(R,Ua);Ca=B(R,Ca);ab=[];break;case "select":Ua=xg({},Ua,{value:void 0});Ca=xg({},Ca,{value:void 0});ab=[];break;case "textarea":Ua=J(R,Ua);Ca=J(R,Ca);ab=[];break;default:"function"!==typeof Ua.onClick&&"function"===typeof Ca.onClick&&(R.onclick=sf)}ca(sa,Ca);var Kb;sa=null;for(od in Ua)if(!Ca.hasOwnProperty(od)&&Ua.hasOwnProperty(od)&&
null!=Ua[od])if("style"===od){var lc=Ua[od];for(Kb in lc)lc.hasOwnProperty(Kb)&&(sa||(sa={}),sa[Kb]="")}else"dangerouslySetInnerHTML"!==od&&"children"!==od&&"suppressContentEditableWarning"!==od&&"suppressHydrationWarning"!==od&&"autoFocus"!==od&&(ld.hasOwnProperty(od)?ab||(ab=[]):(ab=ab||[]).push(od,null));for(od in Ca){var Ac=Ca[od];lc=null!=Ua?Ua[od]:void 0;if(Ca.hasOwnProperty(od)&&Ac!==lc&&(null!=Ac||null!=lc))if("style"===od)if(lc){for(Kb in lc)!lc.hasOwnProperty(Kb)||Ac&&Ac.hasOwnProperty(Kb)||
(sa||(sa={}),sa[Kb]="");for(Kb in Ac)Ac.hasOwnProperty(Kb)&&lc[Kb]!==Ac[Kb]&&(sa||(sa={}),sa[Kb]=Ac[Kb])}else sa||(ab||(ab=[]),ab.push(od,sa)),sa=Ac;else"dangerouslySetInnerHTML"===od?(Ac=Ac?Ac.__html:void 0,lc=lc?lc.__html:void 0,null!=Ac&&lc!==Ac&&(ab=ab||[]).push(od,Ac)):"children"===od?"string"!==typeof Ac&&"number"!==typeof Ac||(ab=ab||[]).push(od,""+Ac):"suppressContentEditableWarning"!==od&&"suppressHydrationWarning"!==od&&(ld.hasOwnProperty(od)?(null!=Ac&&"onScroll"===od&&Xc("scroll",R),ab||
lc===Ac||(ab=[])):(ab=ab||[]).push(od,Ac))}sa&&(ab=ab||[]).push("style",sa);var od;if(aa.updateQueue=ab)aa.flags|=4}};var Al=function(R,aa,sa,Ca){sa!==Ca&&(aa.flags|=4)};var ik=!1,th=!1,nl="function"===typeof WeakSet?WeakSet:Set,Ze=null,jk=!1,Mg=null,bi=!1,Uj=Math.ceil,Cg=lf.ReactCurrentDispatcher,jg=lf.ReactCurrentOwner,Kh=lf.ReactCurrentBatchConfig,Qf=0,Jg=null,Wg=null,Rf=0,Xg=0,gj=$e(0),Qg=0,Jj=null,oi=0,pi=0,Ng=0,qi=null,Lh=null,u=0,E=Infinity,P=null,fa=!1,pa=null,wa=null,Ea=!1,Va=null,Za=0,ib=
0,Hb=null,Sb=-1,ic=0;var Dc=function(R,aa,sa){if(null!==R)if(R.memoizedProps!==aa.pendingProps||Sh.current)Uh=!0;else{if(0===(R.lanes&sa)&&0===(aa.flags&128))return Uh=!1,If(R,aa,sa);Uh=0!==(R.flags&131072)?!0:!1}else Uh=!1,Fg&&0!==(aa.flags&1048576)&&zb(aa,xk,aa.index);aa.lanes=0;switch(aa.tag){case 2:var Ca=aa.type;nf(R,aa);R=aa.pendingProps;var Ua=Gd(aa,Dh.current);Td(aa,sa);Ua=mh(null,aa,Ca,R,Ua,sa);var ab=Gh();aa.flags|=1;"object"===typeof Ua&&null!==Ua&&"function"===typeof Ua.render&&void 0===
Ua.$$typeof?(aa.tag=1,aa.memoizedState=null,aa.updateQueue=null,Mb(Ca)?(ab=!0,qd(aa)):ab=!1,aa.memoizedState=null!==Ua.state&&void 0!==Ua.state?Ua.state:null,Af(aa),Ua.updater=fk,aa.stateNode=Ua,Ua._reactInternals=aa,gh(aa,Ca,R,sa),aa=Kd(null,aa,Ca,!0,ab,sa)):(aa.tag=0,Fg&&ab&&qc(aa),gc(null,aa,Ua,sa),aa=aa.child);return aa;case 16:Ca=aa.elementType;a:{nf(R,aa);R=aa.pendingProps;Ua=Ca._init;Ca=Ua(Ca._payload);aa.type=Ca;Ua=aa.tag=jf(Ca);R=Qd(Ca,R);switch(Ua){case 0:aa=Od(null,aa,Ca,R,sa);break a;
case 1:aa=xd(null,aa,Ca,R,sa);break a;case 11:aa=dd(null,aa,Ca,R,sa);break a;case 14:aa=md(null,aa,Ca,Qd(Ca.type,R),sa);break a}throw Error(b(306,Ca,""));}return aa;case 0:return Ca=aa.type,Ua=aa.pendingProps,Ua=aa.elementType===Ca?Ua:Qd(Ca,Ua),Od(R,aa,Ca,Ua,sa);case 1:return Ca=aa.type,Ua=aa.pendingProps,Ua=aa.elementType===Ca?Ua:Qd(Ca,Ua),xd(R,aa,Ca,Ua,sa);case 3:a:{$d(aa);if(null===R)throw Error(b(387));Ca=aa.pendingProps;ab=aa.memoizedState;Ua=ab.element;ug(R,aa);qh(aa,Ca,null,sa);var Kb=aa.memoizedState;
Ca=Kb.element;if(ab.isDehydrated)if(ab={element:Ca,isDehydrated:!1,cache:Kb.cache,pendingSuspenseBoundaries:Kb.pendingSuspenseBoundaries,transitions:Kb.transitions},aa.updateQueue.baseState=ab,aa.memoizedState=ab,aa.flags&256){Ua=Hh(Error(b(423)),aa);oc();vd(Ua);aa.flags|=256;gc(R,aa,Ca,sa);aa=aa.child;break a}else if(Ca!==Ua){Ua=Hh(Error(b(424)),aa);oc();vd(Ua);aa.flags|=256;gc(R,aa,Ca,sa);aa=aa.child;break a}else for(Th=Sd(aa.stateNode.containerInfo.firstChild),ai=aa,Fg=!0,Gi=null,sa=Rj(aa,null,
Ca,sa),aa.child=sa;sa;)sa.flags=sa.flags&-3|4096,sa=sa.sibling;else{oc();if(Ca===Ua){aa=Cf(R,aa,sa);break a}gc(R,aa,Ca,sa)}aa=aa.child}return aa;case 5:return lh(aa),null===R&&Vc(aa),Ca=aa.type,Ua=aa.pendingProps,ab=null!==R?R.memoizedProps:null,Kb=Ua.children,of(Ca,Ua)?Kb=null:null!==ab&&of(Ca,ab)&&(aa.flags|=32),rd(R,aa),gc(R,aa,Kb,sa),aa.child;case 6:return null===R&&Vc(aa),null;case 13:return ae(R,aa,sa);case 4:return rh(aa,aa.stateNode.containerInfo),Ca=aa.pendingProps,null===R?aa.child=ej(aa,
null,Ca,sa):gc(R,aa,Ca,sa),aa.child;case 11:return Ca=aa.type,Ua=aa.pendingProps,Ua=aa.elementType===Ca?Ua:Qd(Ca,Ua),dd(R,aa,Ca,Ua,sa);case 7:return gc(R,aa,aa.pendingProps,sa),aa.child;case 8:return gc(R,aa,aa.pendingProps.children,sa),aa.child;case 12:return gc(R,aa,aa.pendingProps.children,sa),aa.child;case 10:a:{Ca=aa.type._context;Ua=aa.pendingProps;ab=aa.memoizedProps;Kb=Ua.value;Rc(yk,Ca._currentValue);Ca._currentValue=Kb;if(null!==ab)if(ji(ab.value,Kb)){if(ab.children===Ua.children&&!Sh.current){aa=
Cf(R,aa,sa);break a}}else for(ab=aa.child,null!==ab&&(ab.return=aa);null!==ab;){var lc=ab.dependencies;if(null!==lc){Kb=ab.child;for(var Ac=lc.firstContext;null!==Ac;){if(Ac.context===Ca){if(1===ab.tag){Ac=vg(-1,sa&-sa);Ac.tag=2;var od=ab.updateQueue;if(null!==od){od=od.shared;var Ud=od.pending;null===Ud?Ac.next=Ac:(Ac.next=Ud.next,Ud.next=Ac);od.pending=Ac}}ab.lanes|=sa;Ac=ab.alternate;null!==Ac&&(Ac.lanes|=sa);xe(ab.return,sa,aa);lc.lanes|=sa;break}Ac=Ac.next}}else if(10===ab.tag)Kb=ab.type===aa.type?
null:ab.child;else if(18===ab.tag){Kb=ab.return;if(null===Kb)throw Error(b(341));Kb.lanes|=sa;lc=Kb.alternate;null!==lc&&(lc.lanes|=sa);xe(Kb,sa,aa);Kb=ab.sibling}else Kb=ab.child;if(null!==Kb)Kb.return=ab;else for(Kb=ab;null!==Kb;){if(Kb===aa){Kb=null;break}ab=Kb.sibling;if(null!==ab){ab.return=Kb.return;Kb=ab;break}Kb=Kb.return}ab=Kb}gc(R,aa,Ua.children,sa);aa=aa.child}return aa;case 9:return Ua=aa.type,Ca=aa.pendingProps.children,Td(aa,sa),Ua=Oe(Ua),Ca=Ca(Ua),aa.flags|=1,gc(R,aa,Ca,sa),aa.child;
case 14:return Ca=aa.type,Ua=Qd(Ca,aa.pendingProps),Ua=Qd(Ca.type,Ua),md(R,aa,Ca,Ua,sa);case 15:return gd(R,aa,aa.type,aa.pendingProps,sa);case 17:return Ca=aa.type,Ua=aa.pendingProps,Ua=aa.elementType===Ca?Ua:Qd(Ca,Ua),nf(R,aa),aa.tag=1,Mb(Ca)?(R=!0,qd(aa)):R=!1,Td(aa,sa),fh(aa,Ca,Ua),gh(aa,Ca,Ua,sa),Kd(null,aa,Ca,!0,R,sa);case 19:return Ge(R,aa,sa);case 22:return nd(R,aa,sa)}throw Error(b(156,aa.tag));};var wc="function"===typeof reportError?reportError:function(R){console.error(R)};xb.prototype.render=
fb.prototype.render=function(R){var aa=this._internalRoot;if(null===aa)throw Error(b(409));Fa(R,aa,null,null)};xb.prototype.unmount=fb.prototype.unmount=function(){var R=this._internalRoot;if(null!==R){this._internalRoot=null;var aa=R.containerInfo;va(function(){Fa(null,R,null,null)});aa[bj]=null}};xb.prototype.unstable_scheduleHydration=function(R){if(R){var aa=Ad();R={blockedOn:null,target:R,priority:aa};for(var sa=0;sa<$i.length&&0!==aa&&aa<$i[sa].priority;sa++);$i.splice(sa,0,R);0===sa&&Aa(R)}};
var Hc=function(R){switch(R.tag){case 3:var aa=R.stateNode;if(aa.current.memoizedState.isDehydrated){var sa=$a(aa.pendingLanes);0!==sa&&(rb(aa,sa|1),Sg(aa,yg()),0===(Qf&6)&&(E=yg()+500,Be()))}break;case 13:va(function(){var Ca=Me(R,1);if(null!==Ca){var Ua=zg();Dg(Ca,R,1,Ua)}}),ob(R,1)}};var ud=function(R){if(13===R.tag){var aa=Me(R,134217728);if(null!==aa){var sa=zg();Dg(aa,R,134217728,sa)}ob(R,134217728)}};var Zd=function(R){if(13===R.tag){var aa=Ue(R),sa=Me(R,aa);if(null!==sa){var Ca=zg();Dg(sa,
R,aa,Ca)}ob(R,aa)}};var Ad=function(){return gg};var Jd=function(R,aa){var sa=gg;try{return gg=R,aa()}finally{gg=sa}};yi=function(R,aa,sa){switch(aa){case "input":C(R,sa);aa=sa.name;if("radio"===sa.type&&null!=aa){for(sa=R;sa.parentNode;)sa=sa.parentNode;sa=sa.querySelectorAll("input[name\x3d"+JSON.stringify(""+aa)+'][type\x3d"radio"]');for(aa=0;aa<sa.length;aa++){var Ca=sa[aa];if(Ca!==R&&Ca.form===R.form){var Ua=He(Ca);if(!Ua)throw Error(b(90));x(Ca);C(Ca,Ua)}}}break;case "textarea":O(R,sa);break;
case "select":aa=sa.value,null!=aa&&F(R,!!sa.multiple,aa,!1)}};ba=ea;ja=va;var be={usingClientEntryPoint:!1,Events:[bf,Qe,He,ha,Y,ea]},ke={findFiberByHostInstance:hf,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Le={bundleType:ke.bundleType,version:ke.version,rendererPackageName:ke.rendererPackageName,rendererConfig:ke.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,
setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:lf.ReactCurrentDispatcher,findHostInstanceByFiber:function(R){R=ta(R);return null===R?null:R.stateNode},findFiberByHostInstance:ke.findFiberByHostInstance||hb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ne=__REACT_DEVTOOLS_GLOBAL_HOOK__;
if(!ne.isDisabled&&ne.supportsFiber)try{Yj=ne.inject(Le),zi=ne}catch(R){}}Vd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=be;Vd.createPortal=function(R,aa){var sa=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Fb(aa))throw Error(b(200));return da(R,aa,null,sa)};Vd.createRoot=function(R,aa){if(!Fb(R))throw Error(b(299));var sa=!1,Ca="",Ua=wc;null!==aa&&void 0!==aa&&(!0===aa.unstable_strictMode&&(sa=!0),void 0!==aa.identifierPrefix&&(Ca=aa.identifierPrefix),void 0!==aa.onRecoverableError&&
(Ua=aa.onRecoverableError));aa=Wf(R,1,!1,null,null,sa,!1,Ca,Ua);R[bj]=aa.current;Sc(8===R.nodeType?R.parentNode:R);return new fb(aa)};Vd.findDOMNode=function(R){if(null==R)return null;if(1===R.nodeType)return R;var aa=R._reactInternals;if(void 0===aa){if("function"===typeof R.render)throw Error(b(188));R=Object.keys(R).join(",");throw Error(b(268,R));}R=ta(aa);return R=null===R?null:R.stateNode};Vd.flushSync=function(R){return va(R)};Vd.hydrate=function(R,aa,sa){if(!Tb(aa))throw Error(b(200));return Cc(null,
R,aa,!0,sa)};Vd.hydrateRoot=function(R,aa,sa){if(!Fb(R))throw Error(b(405));var Ca=null!=sa&&sa.hydratedSources||null,Ua=!1,ab="",Kb=wc;null!==sa&&void 0!==sa&&(!0===sa.unstable_strictMode&&(Ua=!0),void 0!==sa.identifierPrefix&&(ab=sa.identifierPrefix),void 0!==sa.onRecoverableError&&(Kb=sa.onRecoverableError));aa=Ba(aa,null,R,1,null!=sa?sa:null,Ua,!1,ab,Kb);R[bj]=aa.current;Sc(R);if(Ca)for(R=0;R<Ca.length;R++)sa=Ca[R],Ua=sa._getVersion,Ua=Ua(sa._source),null==aa.mutableSourceEagerHydrationData?aa.mutableSourceEagerHydrationData=
[sa,Ua]:aa.mutableSourceEagerHydrationData.push(sa,Ua);return new xb(aa)};Vd.render=function(R,aa,sa){if(!Tb(aa))throw Error(b(200));return Cc(null,R,aa,!1,sa)};Vd.unmountComponentAtNode=function(R){if(!Tb(R))throw Error(b(40));return R._reactRootContainer?(va(function(){Cc(null,null,R,!1,function(){R._reactRootContainer=null;R[bj]=null})}),!0):!1};Vd.unstable_batchedUpdates=ea;Vd.unstable_renderSubtreeIntoContainer=function(R,aa,sa,Ca){if(!Tb(sa))throw Error(b(200));if(null==R||void 0===R._reactInternals)throw Error(b(38));
return Cc(R,aa,sa,!1,Ca)};Vd.version="18.2.0-next-9e3b772b8-20220608"};
shadow$provide[21]=function(Re,Df,Xf,Vd){function b(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(b)}catch(N){console.error(N)}}b();Xf.exports=Df(19)};
'use strict';var g;/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
var aa=this||self;function t(a){var b=typeof a;return"object"!=b?b:a?Array.isArray(a)?"array":b:"null"}function ba(a){return Object.prototype.hasOwnProperty.call(a,ca)&&a[ca]||(a[ca]=++da)}var ca="closure_uid_"+(1E9*Math.random()>>>0),da=0;function ea(a,b){return new fa(a,b)}function ha(a){return 0<a?0x7fffffffffffffff<=a?ia:new fa(a,a/4294967296):0>a?-0x7fffffffffffffff>=a?ka:(new fa(-a,-a/4294967296)).negate():la}
function ma(a,b){if("-"==a.charAt(0))return ma(a.substring(1),b).negate();var c=parseInt(a,b||10);if(9007199254740991>=c)return new fa(c%4294967296|0,c/4294967296|0);if(0==a.length)throw Error("number format error: empty string");if(0<=a.indexOf("-"))throw Error('number format error: interior "-" character: '+a);b=b||10;if(2>b||36<b)throw Error("radix out of range: "+b);c=ha(Math.pow(b,8));for(var d=la,e=0;e<a.length;e+=8){var f=Math.min(8,a.length-e),h=parseInt(a.substring(e,e+f),b);8>f?(f=ha(Math.pow(b,
f)),d=d.multiply(f).add(ha(h))):(d=d.multiply(c),d=d.add(ha(h)))}return d}function na(a,b){b&=63;if(0==b)return a;var c=a.S;return 32>b?ea(a.Z>>>b|c<<32-b,c>>>b):32==b?ea(c,0):ea(c>>>b-32,0)}
class fa{constructor(a,b){this.Z=a|0;this.S=b|0}toNumber(){return 4294967296*this.S+(this.Z>>>0)}isSafeInteger(){var a=this.S>>21;return 0==a||-1==a&&!(0==this.Z&&-2097152==this.S)}toString(a){a=a||10;if(2>a||36<a)throw Error("radix out of range: "+a);if(this.isSafeInteger()){var b=this.toNumber();return 10==a?""+b:b.toString(a)}b=14-(a>>2);var c=Math.pow(a,b),d=ea(c,c/4294967296);c=this.div(d);d=Math.abs(this.subtract(c.multiply(d)).toNumber());var e=10==a?""+d:d.toString(a);e.length<b&&(e="0000000000000".slice(e.length-
b)+e);d=c.toNumber();return(10==a?d:d.toString(a))+e}isZero(){return 0==this.Z&&0==this.S}isOdd(){return 1==(this.Z&1)}ca(){return this.Z^this.S}equals(a){return this.Z==a.Z&&this.S==a.S}compare(a){return this.S==a.S?this.Z==a.Z?0:this.Z>>>0>a.Z>>>0?1:-1:this.S>a.S?1:-1}negate(){var a=~this.Z+1|0;return ea(a,~this.S+!a|0)}add(a){var b=this.S>>>16,c=this.S&65535,d=this.Z>>>16,e=a.S>>>16,f=a.S&65535,h=a.Z>>>16;a=(this.Z&65535)+(a.Z&65535);h=(a>>>16)+(d+h);d=h>>>16;d+=c+f;b=(d>>>16)+(b+e)&65535;return ea((h&
65535)<<16|a&65535,b<<16|d&65535)}subtract(a){return this.add(a.negate())}multiply(a){if(this.isZero())return this;if(a.isZero())return a;var b=this.S>>>16,c=this.S&65535,d=this.Z>>>16,e=this.Z&65535,f=a.S>>>16,h=a.S&65535,k=a.Z>>>16;a=a.Z&65535;var l=e*a;var m=(l>>>16)+d*a;var n=m>>>16;m=(m&65535)+e*k;n+=m>>>16;n+=c*a;var p=n>>>16;n=(n&65535)+d*k;p+=n>>>16;n=(n&65535)+e*h;p=p+(n>>>16)+(b*a+c*k+d*h+e*f)&65535;return ea((m&65535)<<16|l&65535,p<<16|n&65535)}div(a){if(a.isZero())throw Error("division by zero");
if(0>this.S){if(this.equals(ka)){if(a.equals(oa)||a.equals(pa))return ka;if(a.equals(ka))return oa;var b=1;if(0==b)b=this;else{var c=this.S;b=32>b?ea(this.Z>>>b|c<<32-b,c>>b):ea(c>>b-32,0<=c?0:-1)}b=b.div(a).shiftLeft(1);if(b.equals(la))return 0>a.S?oa:pa;c=this.subtract(a.multiply(b));return b.add(c.div(a))}return 0>a.S?this.negate().div(a.negate()):this.negate().div(a).negate()}if(this.isZero())return la;if(0>a.S)return a.equals(ka)?la:this.div(a.negate()).negate();var d=la;for(c=this;0<=c.compare(a);){b=
Math.max(1,Math.floor(c.toNumber()/a.toNumber()));var e=Math.ceil(Math.log(b)/Math.LN2);e=48>=e?1:Math.pow(2,e-48);for(var f=ha(b),h=f.multiply(a);0>h.S||0<h.compare(c);)b-=e,f=ha(b),h=f.multiply(a);f.isZero()&&(f=oa);d=d.add(f);c=c.subtract(h)}return d}modulo(a){return this.subtract(this.div(a).multiply(a))}not(){return ea(~this.Z,~this.S)}and(a){return ea(this.Z&a.Z,this.S&a.S)}or(a){return ea(this.Z|a.Z,this.S|a.S)}xor(a){return ea(this.Z^a.Z,this.S^a.S)}shiftLeft(a){a&=63;if(0==a)return this;
var b=this.Z;return 32>a?ea(b<<a,this.S<<a|b>>>32-a):ea(0,b<<a-32)}}const la=ea(0,0),oa=ea(1,0),pa=ea(-1,-1),ia=ea(4294967295,2147483647),ka=ea(0,2147483648);var qa={};function ra(a,b){for(const c in a)b.call(void 0,a[c],c,a)}function sa(a){const b=[];let c=0;for(const d in a)b[c++]=d;return b}function ta(a,b,c){return null!==a&&b in a?a[b]:c}function ua(a){const b={};for(const c in a)b[c]=a[c];return b}const va="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function wa(a,b){let c,d;for(let e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(let f=0;f<va.length;f++)c=va[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function xa(a,b){null!=a&&this.append.apply(this,arguments)}g=xa.prototype;g.qb="";g.set=function(a){this.qb=""+a};g.append=function(a,b,c){this.qb+=String(a);if(null!=b)for(let d=1;d<arguments.length;d++)this.qb+=arguments[d];return this};g.clear=function(){this.qb=""};g.toString=function(){return this.qb};var u={},ya=null,za=!0,Aa=null;function Ca(){return new v(null,5,[Da,!0,Ea,!0,Fa,!1,Ga,!1,Ha,null],null)}function Ia(){za=!1;ya=function(){var a=arguments,b=console.log,c=b.apply,d=console;{const e=a.length;if(0<e){const f=Array(e);for(let h=0;h<e;h++)f[h]=a[h];a=f}else a=[]}return c.call(b,d,a)}}function w(a){return null!=a&&!1!==a}function Ja(a){return a instanceof Array}function Ka(a){return null==a?!0:!1===a?!0:!1}function x(a,b){return a[t(null==b?null:b)]?!0:a._?!0:!1}
function A(a,b){var c=null==b?null:b.constructor;c=w(w(c)?c.Gc:c)?c.Zb:t(b);return Error(["No protocol method ",a," defined for type ",c,": ",b].join(""))}function La(a){var b=a.Zb;return w(b)?b:B.g(a)}var Ma="undefined"!==typeof Symbol&&"function"===t(Symbol)?Symbol.iterator:"@@iterator";function Na(a){for(var b=a.length,c=Array(b),d=0;;)if(d<b)c[d]=a[d],d+=1;else break;return c}function Oa(a){function b(d,e){d.push(e);return d}var c=[];return Pa?Pa(b,c,a):Qa.call(null,b,c,a)}
function Ra(a){return"symbol"===t(a)||"undefined"!==typeof Symbol&&a instanceof Symbol}function Sa(){}function Ta(){}function Ua(){}function Va(a){if(null!=a&&null!=a.Y)a=a.Y(a);else{var b=Va[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=Va._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw A("ICounted.-count",a);}return a}function Wa(){}
function Xa(a){if(null!=a&&null!=a.ha)a=a.ha(a);else{var b=Xa[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=Xa._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw A("IEmptyableCollection.-empty",a);}return a}function Ya(){}function Za(a,b){if(null!=a&&null!=a.ia)a=a.ia(a,b);else{var c=Za[t(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=Za._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw A("ICollection.-conj",a);}return a}function $a(){}
var ab=function(){function a(d,e,f){var h=D[t(null==d?null:d)];if(null!=h)return h.l?h.l(d,e,f):h.call(null,d,e,f);h=D._;if(null!=h)return h.l?h.l(d,e,f):h.call(null,d,e,f);throw A("IIndexed.-nth",d);}function b(d,e){var f=D[t(null==d?null:d)];if(null!=f)return f.h?f.h(d,e):f.call(null,d,e);f=D._;if(null!=f)return f.h?f.h(d,e):f.call(null,d,e);throw A("IIndexed.-nth",d);}var c=null;c=function(d,e,f){switch(arguments.length){case 2:return b.call(this,d,e);case 3:return a.call(this,d,e,f)}throw Error("Invalid arity: "+
arguments.length);};c.h=b;c.l=a;return c}(),D=function D(a){switch(arguments.length){case 2:return D.h(arguments[0],arguments[1]);case 3:return D.l(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length)].join(""));}};D.h=function(a,b){return null!=a&&null!=a.N?a.N(a,b):ab(a,b)};D.l=function(a,b,c){return null!=a&&null!=a.ma?a.ma(a,b,c):ab(a,b,c)};D.U=3;function bb(){}
function F(a){if(null!=a&&null!=a.ta)a=a.ta(a);else{var b=F[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=F._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw A("ISeq.-first",a);}return a}function cb(a){if(null!=a&&null!=a.ua)a=a.ua(a);else{var b=cb[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=cb._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw A("ISeq.-rest",a);}return a}function db(){}function eb(){}
var gb=function(){function a(d,e,f){var h=fb[t(null==d?null:d)];if(null!=h)return h.l?h.l(d,e,f):h.call(null,d,e,f);h=fb._;if(null!=h)return h.l?h.l(d,e,f):h.call(null,d,e,f);throw A("ILookup.-lookup",d);}function b(d,e){var f=fb[t(null==d?null:d)];if(null!=f)return f.h?f.h(d,e):f.call(null,d,e);f=fb._;if(null!=f)return f.h?f.h(d,e):f.call(null,d,e);throw A("ILookup.-lookup",d);}var c=null;c=function(d,e,f){switch(arguments.length){case 2:return b.call(this,d,e);case 3:return a.call(this,d,e,f)}throw Error("Invalid arity: "+
arguments.length);};c.h=b;c.l=a;return c}(),fb=function fb(a){switch(arguments.length){case 2:return fb.h(arguments[0],arguments[1]);case 3:return fb.l(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length)].join(""));}};fb.h=function(a,b){return null!=a&&null!=a.na?a.na(a,b):gb(a,b)};fb.l=function(a,b,c){return null!=a&&null!=a.O?a.O(a,b,c):gb(a,b,c)};fb.U=3;function hb(){}
function ib(a,b){if(null!=a&&null!=a.cb)a=a.cb(a,b);else{var c=ib[t(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=ib._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw A("IAssociative.-contains-key?",a);}return a}function jb(a,b,c){if(null!=a&&null!=a.Ra)a=a.Ra(a,b,c);else{var d=jb[t(null==a?null:a)];if(null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else if(d=jb._,null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else throw A("IAssociative.-assoc",a);}return a}
function kb(a,b){if(null!=a&&null!=a.lb)a=a.lb(a,b);else{var c=kb[t(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=kb._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw A("IFind.-find",a);}return a}function lb(){}function mb(a,b){if(null!=a&&null!=a.Tb)a=a.Tb(a,b);else{var c=mb[t(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=mb._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw A("IMap.-dissoc",a);}return a}
function nb(a){if(null!=a&&null!=a.ad)a=a.key;else{var b=nb[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=nb._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw A("IMapEntry.-key",a);}return a}function ob(a){if(null!=a&&null!=a.bd)a=a.val;else{var b=ob[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=ob._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw A("IMapEntry.-val",a);}return a}function pb(){}
function qb(a,b){if(null!=a&&null!=a.Dc)a=a.Dc(a,b);else{var c=qb[t(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=qb._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw A("ISet.-disjoin",a);}return a}function rb(a){if(null!=a&&null!=a.rb)a=a.rb(a);else{var b=rb[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=rb._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw A("IStack.-peek",a);}return a}
function sb(a){if(null!=a&&null!=a.sb)a=a.sb(a);else{var b=sb[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=sb._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw A("IStack.-pop",a);}return a}function tb(){}function ub(a,b,c){if(null!=a&&null!=a.fb)a=a.fb(a,b,c);else{var d=ub[t(null==a?null:a)];if(null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else if(d=ub._,null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else throw A("IVector.-assoc-n",a);}return a}function vb(){}
function G(a){if(null!=a&&null!=a.Ca)a=a.Ca(a);else{var b=G[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=G._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw A("IDeref.-deref",a);}return a}function wb(){}function xb(a){if(null!=a&&null!=a.ea)a=a.ea(a);else{var b=xb[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=xb._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw A("IMeta.-meta",a);}return a}
function yb(a,b){if(null!=a&&null!=a.ga)a=a.ga(a,b);else{var c=yb[t(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=yb._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw A("IWithMeta.-with-meta",a);}return a}function zb(){}
var Bb=function(){function a(d,e,f){var h=Ab[t(null==d?null:d)];if(null!=h)return h.l?h.l(d,e,f):h.call(null,d,e,f);h=Ab._;if(null!=h)return h.l?h.l(d,e,f):h.call(null,d,e,f);throw A("IReduce.-reduce",d);}function b(d,e){var f=Ab[t(null==d?null:d)];if(null!=f)return f.h?f.h(d,e):f.call(null,d,e);f=Ab._;if(null!=f)return f.h?f.h(d,e):f.call(null,d,e);throw A("IReduce.-reduce",d);}var c=null;c=function(d,e,f){switch(arguments.length){case 2:return b.call(this,d,e);case 3:return a.call(this,d,e,f)}throw Error("Invalid arity: "+
arguments.length);};c.h=b;c.l=a;return c}(),Ab=function Ab(a){switch(arguments.length){case 2:return Ab.h(arguments[0],arguments[1]);case 3:return Ab.l(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length)].join(""));}};Ab.h=function(a,b){return null!=a&&null!=a.oa?a.oa(a,b):Bb(a,b)};Ab.l=function(a,b,c){return null!=a&&null!=a.pa?a.pa(a,b,c):Bb(a,b,c)};Ab.U=3;function Cb(){}
function Db(a,b,c){if(null!=a&&null!=a.mb)a=a.mb(a,b,c);else{var d=Db[t(null==a?null:a)];if(null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else if(d=Db._,null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else throw A("IKVReduce.-kv-reduce",a);}return a}function Eb(a,b){if(null!=a&&null!=a.F)a=a.F(a,b);else{var c=Eb[t(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=Eb._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw A("IEquiv.-equiv",a);}return a}
function Fb(a){if(null!=a&&null!=a.T)a=a.T(a);else{var b=Fb[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=Fb._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw A("IHash.-hash",a);}return a}function Gb(){}function Hb(a){if(null!=a&&null!=a.aa)a=a.aa(a);else{var b=Hb[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=Hb._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw A("ISeqable.-seq",a);}return a}function Ib(){}function Jb(){}function Kb(){}
function Lb(a,b){if(null!=a&&null!=a.Ec)a=a.Ec(a,b);else{var c=Lb[t(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=Lb._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw A("IWriter.-write",a);}return a}function Mb(){}function Nb(a,b,c){if(null!=a&&null!=a.W)a=a.W(a,b,c);else{var d=Nb[t(null==a?null:a)];if(null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else if(d=Nb._,null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else throw A("IPrintWithWriter.-pr-writer",a);}return a}
function Ob(a,b){var c=Pb;if(null!=a&&null!=a.Hb)a.Hb(a,b,c);else{var d=Ob[t(null==a?null:a)];if(null!=d)d.l?d.l(a,b,c):d.call(null,a,b,c);else if(d=Ob._,null!=d)d.l?d.l(a,b,c):d.call(null,a,b,c);else throw A("IWatchable.-add-watch",a);}}function Qb(a,b){if(null!=a&&null!=a.Ib)a.Ib(a,b);else{var c=Qb[t(null==a?null:a)];if(null!=c)c.h?c.h(a,b):c.call(null,a,b);else if(c=Qb._,null!=c)c.h?c.h(a,b):c.call(null,a,b);else throw A("IWatchable.-remove-watch",a);}}
function Rb(a){if(null!=a&&null!=a.kb)a=a.kb(a);else{var b=Rb[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=Rb._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw A("IEditableCollection.-as-transient",a);}return a}function Sb(a,b){if(null!=a&&null!=a.eb)a=a.eb(a,b);else{var c=Sb[t(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=Sb._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw A("ITransientCollection.-conj!",a);}return a}
function Tb(a){if(null!=a&&null!=a.tb)a=a.tb(a);else{var b=Tb[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=Tb._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw A("ITransientCollection.-persistent!",a);}return a}function Ub(a,b,c){if(null!=a&&null!=a.bb)a=a.bb(a,b,c);else{var d=Ub[t(null==a?null:a)];if(null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else if(d=Ub._,null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else throw A("ITransientAssociative.-assoc!",a);}return a}
function Vb(a,b,c){if(null!=a&&null!=a.Gb)a=a.Gb(a,b,c);else{var d=Vb[t(null==a?null:a)];if(null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else if(d=Vb._,null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else throw A("ITransientVector.-assoc-n!",a);}return a}function Wb(a){if(null!=a&&null!=a.yc)a=a.yc(a);else{var b=Wb[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=Wb._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw A("IChunk.-drop-first",a);}return a}
function Xb(a){if(null!=a&&null!=a.kc)a=a.kc(a);else{var b=Xb[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=Xb._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw A("IChunkedSeq.-chunked-first",a);}return a}function Yb(a){if(null!=a&&null!=a.Sb)a=a.Sb(a);else{var b=Yb[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=Yb._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw A("IChunkedSeq.-chunked-rest",a);}return a}
function Zb(a){if(null!=a&&null!=a.Db)a=a.Db(a);else{var b=Zb[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=Zb._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw A("INamed.-name",a);}return a}function $b(a){if(null!=a&&null!=a.Eb)a=a.Eb(a);else{var b=$b[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=$b._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw A("INamed.-namespace",a);}return a}
function ac(a,b){if(null!=a&&null!=a.ya)a=a.ya(a,b);else{var c=ac[t(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=ac._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw A("IReset.-reset!",a);}return a}
var cc=function(){function a(f,h,k,l,m){var n=bc[t(null==f?null:f)];if(null!=n)return n.P?n.P(f,h,k,l,m):n.call(null,f,h,k,l,m);n=bc._;if(null!=n)return n.P?n.P(f,h,k,l,m):n.call(null,f,h,k,l,m);throw A("ISwap.-swap!",f);}function b(f,h,k,l){var m=bc[t(null==f?null:f)];if(null!=m)return m.K?m.K(f,h,k,l):m.call(null,f,h,k,l);m=bc._;if(null!=m)return m.K?m.K(f,h,k,l):m.call(null,f,h,k,l);throw A("ISwap.-swap!",f);}function c(f,h,k){var l=bc[t(null==f?null:f)];if(null!=l)return l.l?l.l(f,h,k):l.call(null,
f,h,k);l=bc._;if(null!=l)return l.l?l.l(f,h,k):l.call(null,f,h,k);throw A("ISwap.-swap!",f);}function d(f,h){var k=bc[t(null==f?null:f)];if(null!=k)return k.h?k.h(f,h):k.call(null,f,h);k=bc._;if(null!=k)return k.h?k.h(f,h):k.call(null,f,h);throw A("ISwap.-swap!",f);}var e=null;e=function(f,h,k,l,m){switch(arguments.length){case 2:return d.call(this,f,h);case 3:return c.call(this,f,h,k);case 4:return b.call(this,f,h,k,l);case 5:return a.call(this,f,h,k,l,m)}throw Error("Invalid arity: "+arguments.length);
};e.h=d;e.l=c;e.K=b;e.P=a;return e}(),bc=function bc(a){switch(arguments.length){case 2:return bc.h(arguments[0],arguments[1]);case 3:return bc.l(arguments[0],arguments[1],arguments[2]);case 4:return bc.K(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return bc.P(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:throw Error(["Invalid arity: ",B.g(arguments.length)].join(""));}};bc.h=function(a,b){return null!=a&&null!=a.Ub?a.Ub(a,b):cc(a,b)};
bc.l=function(a,b,c){return null!=a&&null!=a.Vb?a.Vb(a,b,c):cc(a,b,c)};bc.K=function(a,b,c,d){return null!=a&&null!=a.Wb?a.Wb(a,b,c,d):cc(a,b,c,d)};bc.P=function(a,b,c,d,e){return null!=a&&null!=a.Xb?a.Xb(a,b,c,d,e):cc(a,b,c,d,e)};bc.U=5;function dc(){}function ec(a){if(null!=a&&null!=a.Aa)a=a.Aa(a);else{var b=ec[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=ec._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw A("IIterable.-iterator",a);}return a}
function fc(a){this.sd=a;this.o=1073741824;this.J=0}fc.prototype.Ec=function(a,b){return this.sd.append(b)};function gc(a){var b=new xa;a.W(null,new fc(b),Ca());return B.g(b)}var hc="undefined"!==typeof Math&&"undefined"!==typeof Math.imul?function(a,b){return Math.imul(a,b)}:function(a,b){var c=a&65535,d=b&65535;return c*d+((a>>>16&65535)*d+c*(b>>>16&65535)<<16>>>0)|0};function ic(a){a=hc(a|0,-862048943);return hc(a<<15|a>>>-15,461845907)}
function jc(a,b){a=(a|0)^(b|0);return hc(a<<13|a>>>-13,5)+-430675100|0}function kc(a,b){a=(a|0)^b;a=hc(a^a>>>16,-2048144789);a=hc(a^a>>>13,-1028477387);return a^a>>>16}function lc(a){a:{var b=1;for(var c=0;;)if(b<a.length){var d=b+2;c=jc(c,ic(a.charCodeAt(b-1)|a.charCodeAt(b)<<16));b=d}else{b=c;break a}}b=1===(a.length&1)?b^ic(a.charCodeAt(a.length-1)):b;return kc(b,hc(2,a.length))}var mc={},nc=0;
function oc(a){255<nc&&(mc={},nc=0);if(null==a)return 0;var b=mc[a];if("number"===typeof b)a=b;else{a:if(null!=a)if(b=a.length,0<b)for(var c=0,d=0;;)if(c<b){var e=c+1;d=hc(31,d)+a.charCodeAt(c);c=e}else{b=d;break a}else b=0;else b=0;mc[a]=b;nc+=1;a=b}return a}
function pc(a){if(null!=a&&(a.o&4194304||u===a.mc))return a.T(null)^0;if("number"===typeof a){if(isFinite(a))return Math.floor(a)%2147483647;switch(a){case Infinity:return 2146435072;case -Infinity:return-1048576;default:return 2146959360}}else return!0===a?a=1231:!1===a?a=1237:"string"===typeof a?(a=oc(a),0!==a&&(a=ic(a),a=jc(0,a),a=kc(a,4))):a=a instanceof Date?a.valueOf()^0:null==a?0:Fb(a)^0,a}function qc(a,b){return a^b+2654435769+(a<<6)+(a>>2)}
function rc(a,b,c,d,e){this.Bb=a;this.name=b;this.str=c;this._hash=d;this._meta=e;this.o=2154168321;this.J=4096}g=rc.prototype;g.toString=function(){return this.str};g.equiv=function(a){return this.F(null,a)};g.F=function(a,b){return b instanceof rc?this.str===b.str:!1};g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};
g.apply=function(a,b){return this.call.apply(this,[this].concat(Na(b)))};g.g=function(a){return H.h?H.h(a,this):H.call(null,a,this)};g.h=function(a,b){return H.l?H.l(a,this,b):H.call(null,a,this,b)};g.ea=function(){return this._meta};g.ga=function(a,b){return new rc(this.Bb,this.name,this.str,this._hash,b)};g.T=function(){var a=this._hash;return null!=a?a:this._hash=a=qc(lc(this.name),oc(this.Bb))};g.Db=function(){return this.name};g.Eb=function(){return this.Bb};g.W=function(a,b){return Lb(b,this.str)};
var sc=function sc(a){switch(arguments.length){case 1:return sc.g(arguments[0]);case 2:return sc.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",B.g(arguments.length)].join(""));}};sc.g=function(a){for(;;){if(a instanceof rc)return a;if("string"===typeof a){var b=a.indexOf("/");return 1>b?sc.h(null,a):sc.h(a.substring(0,b),a.substring(b+1,a.length))}if(a instanceof I)a=a.Ba;else throw Error("no conversion to symbol");}};
sc.h=function(a,b){var c=null!=a?[B.g(a),"/",B.g(b)].join(""):b;return new rc(a,b,c,null,null)};sc.U=2;function tc(a){return null!=a?a.J&131072||u===a.xd?!0:a.J?!1:x(dc,a):x(dc,a)}function J(a){if(null==a)return null;if(null!=a&&(a.o&8388608||u===a.ed))return a.aa(null);if(Ja(a)||"string"===typeof a)return 0===a.length?null:new K(a,0,null);if(null!=a&&null!=a[Ma])return a=ta(a,Ma).call(a),uc.g?uc.g(a):uc.call(null,a);if(x(Gb,a))return Hb(a);throw Error([B.g(a)," is not ISeqable"].join(""));}
function M(a){if(null==a)return null;if(null!=a&&(a.o&64||u===a.zb))return a.ta(null);a=J(a);return null==a?null:F(a)}function vc(a){return null!=a?null!=a&&(a.o&64||u===a.zb)?a.ua(null):(a=J(a))?a.ua(null):wc:wc}function N(a){return null==a?null:null!=a&&(a.o&128||u===a.Fb)?a.sa():J(vc(a))}
var O=function O(a){switch(arguments.length){case 1:return O.g(arguments[0]);case 2:return O.h(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(2),0,null);return O.G(arguments[0],arguments[1],c)}};O.g=function(){return!0};O.h=function(a,b){return null==a?null==b:a===b||Eb(a,b)};O.G=function(a,b,c){for(;;)if(O.h(a,b))if(N(c))a=b,b=M(c),c=N(c);else return O.h(b,M(c));else return!1};
O.X=function(a){var b=M(a),c=N(a);a=M(c);c=N(c);return this.G(b,a,c)};O.U=2;function xc(a){this.M=a}xc.prototype.next=function(){if(null!=this.M){var a=M(this.M);this.M=N(this.M);return{value:a,done:!1}}return{value:null,done:!0}};function yc(a){return new xc(J(a))}function zc(a,b){this.value=a;this.Ab=b;this.fc=null;this.o=8388672;this.J=0}zc.prototype.aa=function(){return this};zc.prototype.ta=function(){return this.value};
zc.prototype.ua=function(){null==this.fc&&(this.fc=uc.g?uc.g(this.Ab):uc.call(null,this.Ab));return this.fc};function uc(a){var b=a.next();return w(b.done)?null:new zc(b.value,a)}function Ac(a,b){a=ic(a);a=jc(0,a);return kc(a,b)}function Bc(a){var b=0,c=1;for(a=J(a);;)if(null!=a)b+=1,c=hc(31,c)+pc(M(a))|0,a=N(a);else return Ac(c,b)}var Cc=Ac(1,0);function Dc(a){var b=0,c=0;for(a=J(a);;)if(null!=a)b+=1,c=c+pc(M(a))|0,a=N(a);else return Ac(c,b)}var Ec=Ac(0,0);Ua["null"]=!0;Va["null"]=function(){return 0};
Date.prototype.F=function(a,b){return b instanceof Date&&this.valueOf()===b.valueOf()};Eb.number=function(a,b){return a===b};Sa["function"]=!0;wb["function"]=!0;xb["function"]=function(){return null};Fb._=function(a){return ba(a)};function Fc(a){return a+1}function Gc(){this.val=!1;this.o=32768;this.J=0}Gc.prototype.Ca=function(){return this.val};function Hc(a){return a instanceof Gc}function Ic(a){return G(a)}
function Jc(a,b){var c=a.Y(null);if(0===c)return b.I?b.I():b.call(null);for(var d=a.N(null,0),e=1;;)if(e<c){var f=a.N(null,e);d=b.h?b.h(d,f):b.call(null,d,f);if(Hc(d))return G(d);e+=1}else return d}function Kc(a,b,c){var d=a.Y(null),e=c;for(c=0;;)if(c<d){var f=a.N(null,c);e=b.h?b.h(e,f):b.call(null,e,f);if(Hc(e))return G(e);c+=1}else return e}
function Lc(a,b){var c=a.length;if(0===a.length)return b.I?b.I():b.call(null);for(var d=a[0],e=1;;)if(e<c){var f=a[e];d=b.h?b.h(d,f):b.call(null,d,f);if(Hc(d))return G(d);e+=1}else return d}function Mc(a,b,c){var d=a.length,e=c;for(c=0;;)if(c<d){var f=a[c];e=b.h?b.h(e,f):b.call(null,e,f);if(Hc(e))return G(e);c+=1}else return e}function Nc(a,b,c,d){for(var e=a.length;;)if(d<e){var f=a[d];c=b.h?b.h(c,f):b.call(null,c,f);if(Hc(c))return G(c);d+=1}else return c}
function Oc(a){return null!=a?a.o&2||u===a.Tc?!0:a.o?!1:x(Ua,a):x(Ua,a)}function Pc(a){return null!=a?a.o&16||u===a.Ac?!0:a.o?!1:x($a,a):x($a,a)}function Q(a,b,c){var d=R.g?R.g(a):R.call(null,a);if(c>=d)return-1;!(0<c)&&0>c&&(c+=d,c=0>c?0:c);for(;;)if(c<d){if(O.h(Qc?Qc(a,c):Rc.call(null,a,c),b))return c;c+=1}else return-1}
function S(a,b,c){var d=R.g?R.g(a):R.call(null,a);if(0===d)return-1;0<c?(--d,c=d<c?d:c):c=0>c?d+c:c;for(;;)if(0<=c){if(O.h(Qc?Qc(a,c):Rc.call(null,a,c),b))return c;--c}else return-1}function Sc(a,b){this.j=a;this.v=b}Sc.prototype.hasNext=function(){return this.v<this.j.length};Sc.prototype.next=function(){var a=this.j[this.v];this.v+=1;return a};function K(a,b,c){this.j=a;this.v=b;this.meta=c;this.o=166592766;this.J=139264}g=K.prototype;g.toString=function(){return gc(this)};
g.equiv=function(a){return this.F(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Q(this,b,0)};a.h=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R.g?R.g(this):R.call(null,this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();g.N=function(a,b){a=b+this.v;if(0<=a&&a<this.j.length)return this.j[a];throw Error("Index out of bounds");};g.ma=function(a,b,c){a=b+this.v;return 0<=a&&a<this.j.length?this.j[a]:c};
g.Aa=function(){return new Sc(this.j,this.v)};g.ea=function(){return this.meta};g.sa=function(){return this.v+1<this.j.length?new K(this.j,this.v+1,null):null};g.Y=function(){var a=this.j.length-this.v;return 0>a?0:a};g.T=function(){return Bc(this)};g.F=function(a,b){return Tc.h?Tc.h(this,b):Tc.call(null,this,b)};g.ha=function(){return wc};g.oa=function(a,b){return Nc(this.j,b,this.j[this.v],this.v+1)};g.pa=function(a,b,c){return Nc(this.j,b,c,this.v)};g.ta=function(){return this.j[this.v]};
g.ua=function(){return this.v+1<this.j.length?new K(this.j,this.v+1,null):wc};g.aa=function(){return this.v<this.j.length?this:null};g.ga=function(a,b){return b===this.meta?this:new K(this.j,this.v,b)};g.ia=function(a,b){return Uc.h?Uc.h(b,this):Uc.call(null,b,this)};K.prototype[Ma]=function(){return yc(this)};function Vc(a){return 0<a.length?new K(a,0,null):null}Eb._=function(a,b){return a===b};
var Wc=function Wc(a){switch(arguments.length){case 0:return Wc.I();case 1:return Wc.g(arguments[0]);case 2:return Wc.h(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(2),0,null);return Wc.G(arguments[0],arguments[1],c)}};Wc.I=function(){return Xc};Wc.g=function(a){return a};Wc.h=function(a,b){return null!=a?Za(a,b):new Yc(null,b,null,1,null)};
Wc.G=function(a,b,c){for(;;)if(w(c))a=Wc.h(a,b),b=M(c),c=N(c);else return Wc.h(a,b)};Wc.X=function(a){var b=M(a),c=N(a);a=M(c);c=N(c);return this.G(b,a,c)};Wc.U=2;function R(a){if(null!=a)if(null!=a&&(a.o&2||u===a.Tc))a=a.Y(null);else if(Ja(a))a=a.length;else if("string"===typeof a)a=a.length;else if(null!=a&&(a.o&8388608||u===a.ed))a:{a=J(a);for(var b=0;;){if(Oc(a)){a=b+Va(a);break a}a=N(a);b+=1}}else a=Va(a);else a=0;return a}
function Zc(a,b,c){for(;;){if(null==a)return c;if(0===b)return J(a)?M(a):c;if(Pc(a))return D(a,b,c);if(J(a))a=N(a),--b;else return c}}function Rc(a){switch(arguments.length){case 2:return Qc(arguments[0],arguments[1]);case 3:return T(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length)].join(""));}}
function Qc(a,b){if("number"!==typeof b)throw Error("Index argument to nth must be a number");if(null==a)return a;if(null!=a&&(a.o&16||u===a.Ac))return a.N(null,b);if(Ja(a)){if(-1<b&&b<a.length)return a[b|0];throw Error("Index out of bounds");}if("string"===typeof a){if(-1<b&&b<a.length)return a.charAt(b|0);throw Error("Index out of bounds");}if(null!=a&&(a.o&64||u===a.zb)||null!=a&&(a.o&16777216||u===a.Cc)){if(0>b)throw Error("Index out of bounds");a:for(;;){if(null==a)throw Error("Index out of bounds");
if(0===b){if(J(a)){a=M(a);break a}throw Error("Index out of bounds");}if(Pc(a)){a=D(a,b);break a}if(J(a))a=N(a),--b;else throw Error("Index out of bounds");}return a}if(x($a,a))return D(a,b);throw Error(["nth not supported on this type ",B.g(La(null==a?null:a.constructor))].join(""));}
function T(a,b,c){if("number"!==typeof b)throw Error("Index argument to nth must be a number.");if(null==a)return c;if(null!=a&&(a.o&16||u===a.Ac))return a.ma(null,b,c);if(Ja(a))return-1<b&&b<a.length?a[b|0]:c;if("string"===typeof a)return-1<b&&b<a.length?a.charAt(b|0):c;if(null!=a&&(a.o&64||u===a.zb)||null!=a&&(a.o&16777216||u===a.Cc))return 0>b?c:Zc(a,b,c);if(x($a,a))return D(a,b,c);throw Error(["nth not supported on this type ",B.g(La(null==a?null:a.constructor))].join(""));}
var H=function H(a){switch(arguments.length){case 2:return H.h(arguments[0],arguments[1]);case 3:return H.l(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length)].join(""));}};H.h=function(a,b){return null==a?null:null!=a&&(a.o&256||u===a.$c)?a.na(null,b):Ja(a)?null!=b&&b<a.length?a[b|0]:null:"string"===typeof a?null!=b&&-1<b&&b<a.length?a.charAt(b|0):null:x(eb,a)?fb(a,b):null};
H.l=function(a,b,c){return null!=a?null!=a&&(a.o&256||u===a.$c)?a.O(null,b,c):Ja(a)?null!=b&&-1<b&&b<a.length?a[b|0]:c:"string"===typeof a?null!=b&&-1<b&&b<a.length?a.charAt(b|0):c:x(eb,a)?fb(a,b,c):c:c};H.U=3;var U=function U(a){switch(arguments.length){case 3:return U.l(arguments[0],arguments[1],arguments[2]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(3),0,null);return U.G(arguments[0],arguments[1],arguments[2],c)}};
U.l=function(a,b,c){return null!=a&&(a.o&512||u===a.Sc)?a.Ra(null,b,c):null!=a?jb(a,b,c):$c([b,c])};U.G=function(a,b,c,d){for(;;)if(a=U.l(a,b,c),w(d))b=M(d),c=M(N(d)),d=N(N(d));else return a};U.X=function(a){var b=M(a),c=N(a);a=M(c);var d=N(c);c=M(d);d=N(d);return this.G(b,a,c,d)};U.U=3;
var ad=function ad(a){switch(arguments.length){case 1:return ad.g(arguments[0]);case 2:return ad.h(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(2),0,null);return ad.G(arguments[0],arguments[1],c)}};ad.g=function(a){return a};ad.h=function(a,b){return null==a?null:mb(a,b)};ad.G=function(a,b,c){for(;;){if(null==a)return null;a=ad.h(a,b);if(w(c))b=M(c),c=N(c);else return a}};
ad.X=function(a){var b=M(a),c=N(a);a=M(c);c=N(c);return this.G(b,a,c)};ad.U=2;function bd(a){var b="function"===typeof a;return b?b:null!=a?u===a.Rc?!0:a.Fc?!1:x(Sa,a):x(Sa,a)}function cd(a,b){this.B=a;this.meta=b;this.o=393217;this.J=0}g=cd.prototype;g.ea=function(){return this.meta};g.ga=function(a,b){return new cd(this.B,b)};g.Rc=u;
g.call=function(a){switch(arguments.length-1){case 0:return this.I();case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);case 3:return this.l(arguments[1],arguments[2],arguments[3]);case 4:return this.K(arguments[1],arguments[2],arguments[3],arguments[4]);case 5:return this.P(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 6:return this.xa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]);case 7:return this.Pa(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7]);case 8:return this.za(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8]);case 9:return this.Qa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9]);case 10:return this.Ea(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10]);
case 11:return this.Fa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11]);case 12:return this.Ga(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12]);case 13:return this.Ha(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],
arguments[11],arguments[12],arguments[13]);case 14:return this.Ia(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14]);case 15:return this.Ja(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15]);case 16:return this.Ka(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16]);case 17:return this.La(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17]);case 18:return this.Ma(arguments[1],arguments[2],
arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18]);case 19:return this.Na(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19]);case 20:return this.Oa(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19],arguments[20]);case 21:return this.lc(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],
arguments[18],arguments[19],arguments[20],arguments[21]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Na(b)))};g.I=function(){return this.B.I?this.B.I():this.B.call(null)};g.g=function(a){return this.B.g?this.B.g(a):this.B.call(null,a)};g.h=function(a,b){return this.B.h?this.B.h(a,b):this.B.call(null,a,b)};g.l=function(a,b,c){return this.B.l?this.B.l(a,b,c):this.B.call(null,a,b,c)};
g.K=function(a,b,c,d){return this.B.K?this.B.K(a,b,c,d):this.B.call(null,a,b,c,d)};g.P=function(a,b,c,d,e){return this.B.P?this.B.P(a,b,c,d,e):this.B.call(null,a,b,c,d,e)};g.xa=function(a,b,c,d,e,f){return this.B.xa?this.B.xa(a,b,c,d,e,f):this.B.call(null,a,b,c,d,e,f)};g.Pa=function(a,b,c,d,e,f,h){return this.B.Pa?this.B.Pa(a,b,c,d,e,f,h):this.B.call(null,a,b,c,d,e,f,h)};g.za=function(a,b,c,d,e,f,h,k){return this.B.za?this.B.za(a,b,c,d,e,f,h,k):this.B.call(null,a,b,c,d,e,f,h,k)};
g.Qa=function(a,b,c,d,e,f,h,k,l){return this.B.Qa?this.B.Qa(a,b,c,d,e,f,h,k,l):this.B.call(null,a,b,c,d,e,f,h,k,l)};g.Ea=function(a,b,c,d,e,f,h,k,l,m){return this.B.Ea?this.B.Ea(a,b,c,d,e,f,h,k,l,m):this.B.call(null,a,b,c,d,e,f,h,k,l,m)};g.Fa=function(a,b,c,d,e,f,h,k,l,m,n){return this.B.Fa?this.B.Fa(a,b,c,d,e,f,h,k,l,m,n):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n)};g.Ga=function(a,b,c,d,e,f,h,k,l,m,n,p){return this.B.Ga?this.B.Ga(a,b,c,d,e,f,h,k,l,m,n,p):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n,p)};
g.Ha=function(a,b,c,d,e,f,h,k,l,m,n,p,q){return this.B.Ha?this.B.Ha(a,b,c,d,e,f,h,k,l,m,n,p,q):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q)};g.Ia=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r){return this.B.Ia?this.B.Ia(a,b,c,d,e,f,h,k,l,m,n,p,q,r):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r)};g.Ja=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,y){return this.B.Ja?this.B.Ja(a,b,c,d,e,f,h,k,l,m,n,p,q,r,y):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,y)};
g.Ka=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,y,z){return this.B.Ka?this.B.Ka(a,b,c,d,e,f,h,k,l,m,n,p,q,r,y,z):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,y,z)};g.La=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,y,z,C){return this.B.La?this.B.La(a,b,c,d,e,f,h,k,l,m,n,p,q,r,y,z,C):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,y,z,C)};g.Ma=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,y,z,C,E){return this.B.Ma?this.B.Ma(a,b,c,d,e,f,h,k,l,m,n,p,q,r,y,z,C,E):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,y,z,C,E)};
g.Na=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,y,z,C,E,P){return this.B.Na?this.B.Na(a,b,c,d,e,f,h,k,l,m,n,p,q,r,y,z,C,E,P):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,y,z,C,E,P)};g.Oa=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,y,z,C,E,P,W){return this.B.Oa?this.B.Oa(a,b,c,d,e,f,h,k,l,m,n,p,q,r,y,z,C,E,P,W):this.B.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,y,z,C,E,P,W)};
g.lc=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,y,z,C,E,P,W,ja){return dd.Zc?dd.Zc(this.B,a,b,c,d,e,f,h,k,l,m,n,p,q,r,y,z,C,E,P,W,ja):dd.call(null,this.B,a,b,c,d,e,f,h,k,l,m,n,p,q,r,y,z,C,E,P,W,ja)};function ed(a,b){return"function"===typeof a?new cd(a,b):null==a?null:yb(a,b)}function fd(a){var b=null!=a;return(b?null!=a?a.o&131072||u===a.cd||(a.o?0:x(wb,a)):x(wb,a):b)?xb(a):null}
var gd=function gd(a){switch(arguments.length){case 1:return gd.g(arguments[0]);case 2:return gd.h(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(2),0,null);return gd.G(arguments[0],arguments[1],c)}};gd.g=function(a){return a};gd.h=function(a,b){return null==a?null:qb(a,b)};gd.G=function(a,b,c){for(;;){if(null==a)return null;a=gd.h(a,b);if(w(c))b=M(c),c=N(c);else return a}};
gd.X=function(a){var b=M(a),c=N(a);a=M(c);c=N(c);return this.G(b,a,c)};gd.U=2;function hd(a){return null==a||Ka(J(a))}function id(a){return null==a?!1:null!=a?a.o&8||u===a.vd?!0:a.o?!1:x(Ya,a):x(Ya,a)}function jd(a){return null==a?!1:null!=a?a.o&4096||u===a.Dd?!0:a.o?!1:x(pb,a):x(pb,a)}function kd(a){return null!=a?a.o&16777216||u===a.Cc?!0:a.o?!1:x(Ib,a):x(Ib,a)}function ld(a){return null==a?!1:null!=a?a.o&1024||u===a.Ad?!0:a.o?!1:x(lb,a):x(lb,a)}
function md(a){return null!=a?a.o&67108864||u===a.Cd?!0:a.o?!1:x(Kb,a):x(Kb,a)}function nd(a){return null!=a?a.o&16384||u===a.Ed?!0:a.o?!1:x(tb,a):x(tb,a)}function od(a){return null!=a?a.J&512||u===a.ud?!0:!1:!1}function pd(a,b,c,d,e){for(;;){if(0===e)return c;c[d]=a[b];d+=1;--e;b+=1}}var qd={};function rd(a){return null==a?!1:!1===a?!1:!0}function sd(a){var b=bd(a);return b?b:null!=a?a.o&1||u===a.wd?!0:a.o?!1:x(Ta,a):x(Ta,a)}
function td(a){return"number"===typeof a&&!isNaN(a)&&Infinity!==a&&parseFloat(a)===parseInt(a,10)}function ud(a,b){return null!=a&&(a.o&512||u===a.Sc)?a.cb(null,b):x(hb,a)?ib(a,b):H.l(a,b,qd)===qd?!1:!0}function wd(a,b){var c=J(b);return c?(b=M(c),c=N(c),Pa?Pa(a,b,c):Qa.call(null,a,b,c)):a.I?a.I():a.call(null)}function xd(a,b,c){for(c=J(c);;)if(c){var d=M(c);b=a.h?a.h(b,d):a.call(null,b,d);if(Hc(b))return G(b);c=N(c)}else return b}
function yd(a,b){a=ec(a);if(w(a.hasNext()))for(var c=a.next();;)if(a.hasNext()){var d=a.next();c=b.h?b.h(c,d):b.call(null,c,d);if(Hc(c))return G(c)}else return c;else return b.I?b.I():b.call(null)}function zd(a,b,c){for(a=ec(a);;)if(a.hasNext()){var d=a.next();c=b.h?b.h(c,d):b.call(null,c,d);if(Hc(c))return G(c)}else return c}
function Qa(a){switch(arguments.length){case 2:return Ad(arguments[0],arguments[1]);case 3:return Pa(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length)].join(""));}}function Ad(a,b){return null!=b&&(b.o&524288||u===b.dd)?b.oa(null,a):Ja(b)?Lc(b,a):"string"===typeof b?Lc(b,a):x(zb,b)?Ab(b,a):tc(b)?yd(b,a):wd(a,b)}
function Pa(a,b,c){return null!=c&&(c.o&524288||u===c.dd)?c.pa(null,a,b):Ja(c)?Mc(c,a,b):"string"===typeof c?Mc(c,a,b):x(zb,c)?Ab(c,a,b):tc(c)?zd(c,a,b):xd(a,b,c)}function Bd(a,b,c){return null!=c?Db(c,a,b):b}function Cd(a){return a}function Dd(a,b,c,d){a=a.g?a.g(b):a.call(null,b);c=Pa(a,c,d);return a.g?a.g(c):a.call(null,c)}function Ed(a){a=(a-a%2)/2;return 0<=a?Math.floor(a):Math.ceil(a)}
function Fd(a){a-=a>>1&1431655765;a=(a&858993459)+(a>>2&858993459);return 16843009*(a+(a>>4)&252645135)>>24}var B=function B(a){switch(arguments.length){case 0:return B.I();case 1:return B.g(arguments[0]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(1),0,null);return B.G(arguments[0],c)}};B.I=function(){return""};B.g=function(a){return null==a?"":[a].join("")};
B.G=function(a,b){for(a=new xa(B.g(a));;)if(w(b))a=a.append(B.g(M(b))),b=N(b);else return a.toString()};B.X=function(a){var b=M(a);a=N(a);return this.G(b,a)};B.U=1;function Tc(a,b){if(kd(b))if(Oc(a)&&Oc(b)&&R(a)!==R(b))a=!1;else a:for(a=J(a),b=J(b);;){if(null==a){a=null==b;break a}if(null!=b&&O.h(M(a),M(b)))a=N(a),b=N(b);else{a=!1;break a}}else a=null;return rd(a)}function Yc(a,b,c,d,e){this.meta=a;this.first=b;this.ib=c;this.count=d;this.H=e;this.o=65937646;this.J=8192}g=Yc.prototype;
g.toString=function(){return gc(this)};g.equiv=function(a){return this.F(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Q(this,b,0)};a.h=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,this.count)}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();g.ea=function(){return this.meta};g.sa=function(){return 1===this.count?null:this.ib};g.Y=function(){return this.count};g.rb=function(){return this.first};g.sb=function(){return this.ua(null)};
g.T=function(){var a=this.H;return null!=a?a:this.H=a=Bc(this)};g.F=function(a,b){return Tc(this,b)};g.ha=function(){return yb(wc,this.meta)};g.oa=function(a,b){return wd(b,this)};g.pa=function(a,b,c){return xd(b,c,this)};g.ta=function(){return this.first};g.ua=function(){return 1===this.count?wc:this.ib};g.aa=function(){return this};g.ga=function(a,b){return b===this.meta?this:new Yc(b,this.first,this.ib,this.count,this.H)};g.ia=function(a,b){return new Yc(this.meta,b,this,this.count+1,null)};
Yc.prototype[Ma]=function(){return yc(this)};function Gd(a){this.meta=a;this.o=65937614;this.J=8192}g=Gd.prototype;g.toString=function(){return gc(this)};g.equiv=function(a){return this.F(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Q(this,b,0)};a.h=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();g.ea=function(){return this.meta};g.sa=function(){return null};g.Y=function(){return 0};g.rb=function(){return null};g.sb=function(){throw Error("Can't pop empty list");};g.T=function(){return Cc};
g.F=function(a,b){return(null!=b?b.o&33554432||u===b.zd||(b.o?0:x(Jb,b)):x(Jb,b))||kd(b)?null==J(b):!1};g.ha=function(){return this};g.oa=function(a,b){return wd(b,this)};g.pa=function(a,b,c){return xd(b,c,this)};g.ta=function(){return null};g.ua=function(){return wc};g.aa=function(){return null};g.ga=function(a,b){return b===this.meta?this:new Gd(b)};g.ia=function(a,b){return new Yc(this.meta,b,null,1,null)};var wc=new Gd(null);Gd.prototype[Ma]=function(){return yc(this)};
function Hd(a,b,c,d){this.meta=a;this.first=b;this.ib=c;this.H=d;this.o=65929452;this.J=8192}g=Hd.prototype;g.toString=function(){return gc(this)};g.equiv=function(a){return this.F(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Q(this,b,0)};a.h=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();g.ea=function(){return this.meta};g.sa=function(){return null==this.ib?null:J(this.ib)};g.T=function(){var a=this.H;return null!=a?a:this.H=a=Bc(this)};g.F=function(a,b){return Tc(this,b)};g.ha=function(){return wc};
g.oa=function(a,b){return wd(b,this)};g.pa=function(a,b,c){return xd(b,c,this)};g.ta=function(){return this.first};g.ua=function(){return null==this.ib?wc:this.ib};g.aa=function(){return this};g.ga=function(a,b){return b===this.meta?this:new Hd(b,this.first,this.ib,this.H)};g.ia=function(a,b){return new Hd(null,b,this,null)};Hd.prototype[Ma]=function(){return yc(this)};
function Uc(a,b){return null==b?new Yc(null,a,null,1,null):null!=b&&(b.o&64||u===b.zb)?new Hd(null,a,b,null):new Hd(null,a,J(b),null)}function I(a,b,c,d){this.Bb=a;this.name=b;this.Ba=c;this._hash=d;this.o=2153775105;this.J=4096}g=I.prototype;g.toString=function(){return[":",B.g(this.Ba)].join("")};g.equiv=function(a){return this.F(null,a)};g.F=function(a,b){return b instanceof I?this.Ba===b.Ba:!1};
g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Na(b)))};g.g=function(a){return H.h(a,this)};g.h=function(a,b){return H.l(a,this,b)};g.T=function(){var a=this._hash;return null!=a?a:this._hash=a=qc(lc(this.name),oc(this.Bb))+2654435769|0};g.Db=function(){return this.name};g.Eb=function(){return this.Bb};
g.W=function(a,b){return Lb(b,[":",B.g(this.Ba)].join(""))};function Id(a){if(null!=a&&(a.J&4096||u===a.Bc))return a.Eb(null);throw Error(["Doesn't support namespace: ",B.g(a)].join(""));}var Jd=function Jd(a){switch(arguments.length){case 1:return Jd.g(arguments[0]);case 2:return Jd.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",B.g(arguments.length)].join(""));}};
Jd.g=function(a){if(a instanceof I)return a;if(a instanceof rc)return new I(Id(a),Kd.g?Kd.g(a):Kd.call(null,a),a.str,null);if(O.h("/",a))return new I(null,a,a,null);if("string"===typeof a){var b=a.split("/");return 2===b.length?new I(b[0],b[1],a,null):new I(null,b[0],a,null)}return null};
Jd.h=function(a,b){a=a instanceof I?Kd.g?Kd.g(a):Kd.call(null,a):a instanceof rc?Kd.g?Kd.g(a):Kd.call(null,a):a;b=b instanceof I?Kd.g?Kd.g(b):Kd.call(null,b):b instanceof rc?Kd.g?Kd.g(b):Kd.call(null,b):b;return new I(a,b,[w(a)?[B.g(a),"/"].join(""):null,B.g(b)].join(""),null)};Jd.U=2;function Ld(a,b,c){this.meta=a;this.Jb=b;this.M=null;this.H=c;this.o=32374988;this.J=1}g=Ld.prototype;g.toString=function(){return gc(this)};g.equiv=function(a){return this.F(null,a)};
function Md(a){null!=a.Jb&&(a.M=a.Jb.I?a.Jb.I():a.Jb.call(null),a.Jb=null);return a.M}g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Q(this,b,0)};a.h=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();g.ea=function(){return this.meta};g.sa=function(){this.aa(null);return null==this.M?null:N(this.M)};g.T=function(){var a=this.H;return null!=a?a:this.H=a=Bc(this)};g.F=function(a,b){return Tc(this,b)};
g.ha=function(){return yb(wc,this.meta)};g.oa=function(a,b){return wd(b,this)};g.pa=function(a,b,c){return xd(b,c,this)};g.ta=function(){this.aa(null);return null==this.M?null:M(this.M)};g.ua=function(){this.aa(null);return null!=this.M?vc(this.M):wc};g.aa=function(){Md(this);if(null==this.M)return null;for(var a=this.M;;)if(a instanceof Ld)a=Md(a);else return this.M=a,J(this.M)};g.ga=function(a,b){var c=this;return b===this.meta?c:new Ld(b,function(){return c.aa(null)},this.H)};
g.ia=function(a,b){return Uc(b,this)};Ld.prototype[Ma]=function(){return yc(this)};function Nd(a){this.buf=a;this.end=0;this.o=2;this.J=0}Nd.prototype.add=function(a){this.buf[this.end]=a;return this.end+=1};Nd.prototype.chunk=function(){var a=new Od(this.buf,0,this.end);this.buf=null;return a};Nd.prototype.Y=function(){return this.end};function Od(a,b,c){this.j=a;this.off=b;this.end=c;this.o=524306;this.J=0}g=Od.prototype;g.Y=function(){return this.end-this.off};
g.N=function(a,b){return this.j[this.off+b]};g.ma=function(a,b,c){return 0<=b&&b<this.end-this.off?this.j[this.off+b]:c};g.yc=function(){if(this.off===this.end)throw Error("-drop-first of empty chunk");return new Od(this.j,this.off+1,this.end)};g.oa=function(a,b){return Nc(this.j,b,this.j[this.off],this.off+1)};g.pa=function(a,b,c){return Nc(this.j,b,c,this.off)};function Pd(a,b,c,d){this.chunk=a;this.Za=b;this.meta=c;this.H=d;this.o=31850732;this.J=1536}g=Pd.prototype;g.toString=function(){return gc(this)};
g.equiv=function(a){return this.F(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Q(this,b,0)};a.h=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();g.ea=function(){return this.meta};g.sa=function(){return 1<Va(this.chunk)?new Pd(Wb(this.chunk),this.Za,null,null):null==this.Za?null:Hb(this.Za)};g.T=function(){var a=this.H;return null!=a?a:this.H=a=Bc(this)};
g.F=function(a,b){return Tc(this,b)};g.ha=function(){return wc};g.ta=function(){return D(this.chunk,0)};g.ua=function(){return 1<Va(this.chunk)?new Pd(Wb(this.chunk),this.Za,null,null):null==this.Za?wc:this.Za};g.aa=function(){return this};g.kc=function(){return this.chunk};g.Sb=function(){return null==this.Za?wc:this.Za};g.ga=function(a,b){return b===this.meta?this:new Pd(this.chunk,this.Za,b,this.H)};g.ia=function(a,b){return Uc(b,this)};g.zc=function(){return null==this.Za?null:this.Za};
Pd.prototype[Ma]=function(){return yc(this)};function Qd(a,b){return 0===Va(a)?b:new Pd(a,b,null,null)}function Rd(a,b){a.add(b)}function Sd(a,b){if(Oc(b))return R(b);var c=0;for(b=J(b);;)if(null!=b&&c<a)c+=1,b=N(b);else return c}var Td=function Td(a){if(null==a)return null;var c=N(a);return null==c?J(M(a)):Uc(M(a),Td.g?Td.g(c):Td.call(null,c))};
function Ud(a,b,c){var d=J(c);if(0===b)return a.I?a.I():a.call(null);c=F(d);var e=cb(d);if(1===b)return a.g?a.g(c):a.call(null,c);d=F(e);var f=cb(e);if(2===b)return a.h?a.h(c,d):a.call(null,c,d);e=F(f);var h=cb(f);if(3===b)return a.l?a.l(c,d,e):a.call(null,c,d,e);f=F(h);var k=cb(h);if(4===b)return a.K?a.K(c,d,e,f):a.call(null,c,d,e,f);h=F(k);var l=cb(k);if(5===b)return a.P?a.P(c,d,e,f,h):a.call(null,c,d,e,f,h);k=F(l);var m=cb(l);if(6===b)return a.xa?a.xa(c,d,e,f,h,k):a.call(null,c,d,e,f,h,k);l=F(m);
var n=cb(m);if(7===b)return a.Pa?a.Pa(c,d,e,f,h,k,l):a.call(null,c,d,e,f,h,k,l);m=F(n);var p=cb(n);if(8===b)return a.za?a.za(c,d,e,f,h,k,l,m):a.call(null,c,d,e,f,h,k,l,m);n=F(p);var q=cb(p);if(9===b)return a.Qa?a.Qa(c,d,e,f,h,k,l,m,n):a.call(null,c,d,e,f,h,k,l,m,n);p=F(q);var r=cb(q);if(10===b)return a.Ea?a.Ea(c,d,e,f,h,k,l,m,n,p):a.call(null,c,d,e,f,h,k,l,m,n,p);q=F(r);var y=cb(r);if(11===b)return a.Fa?a.Fa(c,d,e,f,h,k,l,m,n,p,q):a.call(null,c,d,e,f,h,k,l,m,n,p,q);r=F(y);var z=cb(y);if(12===b)return a.Ga?
a.Ga(c,d,e,f,h,k,l,m,n,p,q,r):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r);y=F(z);var C=cb(z);if(13===b)return a.Ha?a.Ha(c,d,e,f,h,k,l,m,n,p,q,r,y):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r,y);z=F(C);var E=cb(C);if(14===b)return a.Ia?a.Ia(c,d,e,f,h,k,l,m,n,p,q,r,y,z):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r,y,z);C=F(E);var P=cb(E);if(15===b)return a.Ja?a.Ja(c,d,e,f,h,k,l,m,n,p,q,r,y,z,C):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r,y,z,C);E=F(P);var W=cb(P);if(16===b)return a.Ka?a.Ka(c,d,e,f,h,k,l,m,n,p,q,r,y,z,C,E):a.call(null,
c,d,e,f,h,k,l,m,n,p,q,r,y,z,C,E);P=F(W);var ja=cb(W);if(17===b)return a.La?a.La(c,d,e,f,h,k,l,m,n,p,q,r,y,z,C,E,P):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r,y,z,C,E,P);W=F(ja);var Ba=cb(ja);if(18===b)return a.Ma?a.Ma(c,d,e,f,h,k,l,m,n,p,q,r,y,z,C,E,P,W):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r,y,z,C,E,P,W);ja=F(Ba);Ba=cb(Ba);if(19===b)return a.Na?a.Na(c,d,e,f,h,k,l,m,n,p,q,r,y,z,C,E,P,W,ja):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r,y,z,C,E,P,W,ja);var vd=F(Ba);cb(Ba);if(20===b)return a.Oa?a.Oa(c,d,e,f,h,k,l,m,n,p,
q,r,y,z,C,E,P,W,ja,vd):a.call(null,c,d,e,f,h,k,l,m,n,p,q,r,y,z,C,E,P,W,ja,vd);throw Error("Only up to 20 arguments supported on functions");}function Vd(a){return null!=a&&(a.o&128||u===a.Fb)?a.sa():J(vc(a))}function Wd(a,b,c){return null==c?a.g?a.g(b):a.call(a,b):Xd(a,b,F(c),Vd(c))}function Xd(a,b,c,d){return null==d?a.h?a.h(b,c):a.call(a,b,c):Yd(a,b,c,F(d),Vd(d))}function Yd(a,b,c,d,e){return null==e?a.l?a.l(b,c,d):a.call(a,b,c,d):Zd(a,b,c,d,F(e),Vd(e))}
function Zd(a,b,c,d,e,f){if(null==f)return a.K?a.K(b,c,d,e):a.call(a,b,c,d,e);var h=F(f),k=N(f);if(null==k)return a.P?a.P(b,c,d,e,h):a.call(a,b,c,d,e,h);f=F(k);var l=N(k);if(null==l)return a.xa?a.xa(b,c,d,e,h,f):a.call(a,b,c,d,e,h,f);k=F(l);var m=N(l);if(null==m)return a.Pa?a.Pa(b,c,d,e,h,f,k):a.call(a,b,c,d,e,h,f,k);l=F(m);var n=N(m);if(null==n)return a.za?a.za(b,c,d,e,h,f,k,l):a.call(a,b,c,d,e,h,f,k,l);m=F(n);var p=N(n);if(null==p)return a.Qa?a.Qa(b,c,d,e,h,f,k,l,m):a.call(a,b,c,d,e,h,f,k,l,m);
n=F(p);var q=N(p);if(null==q)return a.Ea?a.Ea(b,c,d,e,h,f,k,l,m,n):a.call(a,b,c,d,e,h,f,k,l,m,n);p=F(q);var r=N(q);if(null==r)return a.Fa?a.Fa(b,c,d,e,h,f,k,l,m,n,p):a.call(a,b,c,d,e,h,f,k,l,m,n,p);q=F(r);var y=N(r);if(null==y)return a.Ga?a.Ga(b,c,d,e,h,f,k,l,m,n,p,q):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q);r=F(y);var z=N(y);if(null==z)return a.Ha?a.Ha(b,c,d,e,h,f,k,l,m,n,p,q,r):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q,r);y=F(z);var C=N(z);if(null==C)return a.Ia?a.Ia(b,c,d,e,h,f,k,l,m,n,p,q,r,y):a.call(a,b,c,d,
e,h,f,k,l,m,n,p,q,r,y);z=F(C);var E=N(C);if(null==E)return a.Ja?a.Ja(b,c,d,e,h,f,k,l,m,n,p,q,r,y,z):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q,r,y,z);C=F(E);var P=N(E);if(null==P)return a.Ka?a.Ka(b,c,d,e,h,f,k,l,m,n,p,q,r,y,z,C):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q,r,y,z,C);E=F(P);var W=N(P);if(null==W)return a.La?a.La(b,c,d,e,h,f,k,l,m,n,p,q,r,y,z,C,E):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q,r,y,z,C,E);P=F(W);var ja=N(W);if(null==ja)return a.Ma?a.Ma(b,c,d,e,h,f,k,l,m,n,p,q,r,y,z,C,E,P):a.call(a,b,c,d,e,h,f,k,l,m,n,p,
q,r,y,z,C,E,P);W=F(ja);var Ba=N(ja);if(null==Ba)return a.Na?a.Na(b,c,d,e,h,f,k,l,m,n,p,q,r,y,z,C,E,P,W):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q,r,y,z,C,E,P,W);ja=F(Ba);Ba=N(Ba);if(null==Ba)return a.Oa?a.Oa(b,c,d,e,h,f,k,l,m,n,p,q,r,y,z,C,E,P,W,ja):a.call(a,b,c,d,e,h,f,k,l,m,n,p,q,r,y,z,C,E,P,W,ja);b=[b,c,d,e,h,f,k,l,m,n,p,q,r,y,z,C,E,P,W,ja];for(c=Ba;;)if(c)b.push(F(c)),c=N(c);else break;return a.apply(a,b)}
function dd(a){switch(arguments.length){case 2:return $d(arguments[0],arguments[1]);case 3:return ae(arguments[0],arguments[1],arguments[2]);case 4:var b=arguments[0];var c=arguments[1],d=arguments[2],e=arguments[3];b.X?(c=Uc(c,Uc(d,e)),d=b.U,e=2+Sd(d-1,e),b=e<=d?Ud(b,e,c):b.X(c)):b=Xd(b,c,d,J(e));return b;case 5:return be(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:b=[];e=arguments.length;for(c=0;;)if(c<e)b.push(arguments[c]),c+=1;else break;b=new K(b.slice(5),0,null);
return ce(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],b)}}function $d(a,b){if(a.X){var c=a.U,d=Sd(c+1,b);return d<=c?Ud(a,d,b):a.X(b)}b=J(b);return null==b?a.I?a.I():a.call(a):Wd(a,F(b),Vd(b))}function ae(a,b,c){if(a.X){b=Uc(b,c);var d=a.U;c=Sd(d,c)+1;return c<=d?Ud(a,c,b):a.X(b)}return Wd(a,b,J(c))}function be(a,b,c,d,e){return a.X?(b=Uc(b,Uc(c,Uc(d,e))),c=a.U,e=3+Sd(c-2,e),e<=c?Ud(a,e,b):a.X(b)):Yd(a,b,c,d,J(e))}
function ce(a,b,c,d,e,f){return a.X?(f=Td(f),b=Uc(b,Uc(c,Uc(d,Uc(e,f)))),c=a.U,f=4+Sd(c-3,f),f<=c?Ud(a,f,b):a.X(b)):Zd(a,b,c,d,e,Td(f))}function de(a){if(null!=a&&(a.o&64||u===a.zb))if(N(a)){a:{var b=[];for(a=J(a);;)if(null!=a)b.push(M(a)),a=N(a);else break a}b=$c(b)}else b=J(a)?M(a):ee;else b=a;return b}function fe(a){this.md=a;this.o=393216;this.J=0}g=fe.prototype;g.ga=function(a,b){return new fe(b)};g.ea=function(){return this.md};g.hasNext=function(){return!1};g.next=function(){return Error("No such element")};
g.remove=function(){return Error("Unsupported operation")};var ge={},he={};function ie(a){this.Cb=ge;this._next=a}ie.prototype.hasNext=function(){this.Cb===ge?(this.Cb=he,this._next=J(this._next)):this.Cb===this._next&&(this._next=N(this.Cb));return null!=this._next};ie.prototype.next=function(){if(this.hasNext())return this.Cb=this._next,M(this._next);throw Error("No such element");};ie.prototype.remove=function(){return Error("Unsupported operation")};
function je(a,b){for(;;){if(null==J(b))return!0;var c=M(b);c=a.g?a.g(c):a.call(null,c);if(w(c))b=N(b);else return!1}}function ke(a){for(var b=Cd;;)if(a=J(a)){var c=M(a);c=b.g?b.g(c):b.call(null,c);if(w(c))return c;a=N(a)}else return null}
function le(a,b){return new Ld(null,function(){var c=J(b);if(c){if(od(c)){for(var d=Xb(c),e=R(d),f=new Nd(Array(e)),h=0;;)if(h<e){var k=function(){var l=D(d,h);return a.g?a.g(l):a.call(null,l)}();null!=k&&f.add(k);h+=1}else break;return Qd(f.chunk(),le(a,Yb(c)))}e=function(){var l=M(c);return a.g?a.g(l):a.call(null,l)}();return null==e?le(a,vc(c)):Uc(e,le(a,vc(c)))}return null},null)}function me(a){this.state=a;this.ra=this.vc=this.meta=null;this.J=16386;this.o=6455296}g=me.prototype;
g.equiv=function(a){return this.F(null,a)};g.F=function(a,b){return this===b};g.Ca=function(){return this.state};g.ea=function(){return this.meta};g.Yb=function(a,b){for(var c=J(this.ra),d=null,e=0,f=0;;)if(f<e){var h=d.N(null,f),k=T(h,0,null);h=T(h,1,null);h.K?h.K(k,this,a,b):h.call(null,k,this,a,b);f+=1}else if(c=J(c))od(c)?(d=Xb(c),c=Yb(c),k=d,e=R(d),d=k):(d=M(c),k=T(d,0,null),h=T(d,1,null),h.K?h.K(k,this,a,b):h.call(null,k,this,a,b),c=N(c),d=null,e=0),f=0;else break};
g.Hb=function(a,b,c){this.ra=U.l(this.ra,b,c);return this};g.Ib=function(a,b){return this.ra=ad.h(this.ra,b)};g.T=function(){return ba(this)};function ne(a){return new me(a)}function oe(a,b){if(a instanceof me){var c=a.vc;if(null!=c&&!w(c.g?c.g(b):c.call(null,b)))throw Error("Validator rejected reference state");c=a.state;a.state=b;null!=a.ra&&a.Yb(c,b);return b}return ac(a,b)}
var pe=function pe(a){switch(arguments.length){case 2:return pe.h(arguments[0],arguments[1]);case 3:return pe.l(arguments[0],arguments[1],arguments[2]);case 4:return pe.K(arguments[0],arguments[1],arguments[2],arguments[3]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(4),0,null);return pe.G(arguments[0],arguments[1],arguments[2],arguments[3],c)}};
pe.h=function(a,b){if(a instanceof me){var c=a.state;b=b.g?b.g(c):b.call(null,c);a=oe(a,b)}else a=bc(a,b);return a};pe.l=function(a,b,c){if(a instanceof me){var d=a.state;b=b.h?b.h(d,c):b.call(null,d,c);a=oe(a,b)}else a=bc(a,b,c);return a};pe.K=function(a,b,c,d){if(a instanceof me){var e=a.state;b=b.l?b.l(e,c,d):b.call(null,e,c,d);a=oe(a,b)}else a=bc(a,b,c,d);return a};pe.G=function(a,b,c,d,e){return a instanceof me?oe(a,be(b,a.state,c,d,e)):bc(a,b,c,d,e)};
pe.X=function(a){var b=M(a),c=N(a);a=M(c);var d=N(c);c=M(d);var e=N(d);d=M(e);e=N(e);return this.G(b,a,c,d,e)};pe.U=4;function qe(a){this.state=a;this.o=32768;this.J=0}qe.prototype.Ca=function(){return this.state};
var re=function re(a){switch(arguments.length){case 1:return re.g(arguments[0]);case 2:return re.h(arguments[0],arguments[1]);case 3:return re.l(arguments[0],arguments[1],arguments[2]);case 4:return re.K(arguments[0],arguments[1],arguments[2],arguments[3]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(4),0,null);return re.G(arguments[0],arguments[1],arguments[2],arguments[3],c)}};
re.g=function(a){return function(b){return function(){function c(k,l){l=a.g?a.g(l):a.call(null,l);return b.h?b.h(k,l):b.call(null,k,l)}function d(k){return b.g?b.g(k):b.call(null,k)}function e(){return b.I?b.I():b.call(null)}var f=null,h=function(){function k(m,n,p){var q=null;if(2<arguments.length){q=0;for(var r=Array(arguments.length-2);q<r.length;)r[q]=arguments[q+2],++q;q=new K(r,0,null)}return l.call(this,m,n,q)}function l(m,n,p){n=ae(a,n,p);return b.h?b.h(m,n):b.call(null,m,n)}k.U=2;k.X=function(m){var n=
M(m);m=N(m);var p=M(m);m=vc(m);return l(n,p,m)};k.G=l;return k}();f=function(k,l,m){switch(arguments.length){case 0:return e.call(this);case 1:return d.call(this,k);case 2:return c.call(this,k,l);default:var n=null;if(2<arguments.length){n=0;for(var p=Array(arguments.length-2);n<p.length;)p[n]=arguments[n+2],++n;n=new K(p,0,null)}return h.G(k,l,n)}throw Error("Invalid arity: "+arguments.length);};f.U=2;f.X=h.X;f.I=e;f.g=d;f.h=c;f.G=h.G;return f}()}};
re.h=function(a,b){return new Ld(null,function(){var c=J(b);if(c){if(od(c)){for(var d=Xb(c),e=R(d),f=new Nd(Array(e)),h=0;;)if(h<e)Rd(f,function(){var k=D(d,h);return a.g?a.g(k):a.call(null,k)}()),h+=1;else break;return Qd(f.chunk(),re.h(a,Yb(c)))}return Uc(function(){var k=M(c);return a.g?a.g(k):a.call(null,k)}(),re.h(a,vc(c)))}return null},null)};
re.l=function(a,b,c){return new Ld(null,function(){var d=J(b),e=J(c);if(d&&e){var f=M(d);var h=M(e);f=a.h?a.h(f,h):a.call(null,f,h);d=Uc(f,re.l(a,vc(d),vc(e)))}else d=null;return d},null)};re.K=function(a,b,c,d){return new Ld(null,function(){var e=J(b),f=J(c),h=J(d);if(e&&f&&h){var k=M(e);var l=M(f),m=M(h);k=a.l?a.l(k,l,m):a.call(null,k,l,m);e=Uc(k,re.K(a,vc(e),vc(f),vc(h)))}else e=null;return e},null)};
re.G=function(a,b,c,d,e){return re.h(function(f){return $d(a,f)},function k(h){return new Ld(null,function(){var l=re.h(J,h);return je(Cd,l)?Uc(re.h(M,l),k(re.h(vc,l))):null},null)}(Wc.G(e,d,Vc([c,b]))))};re.X=function(a){var b=M(a),c=N(a);a=M(c);var d=N(c);c=M(d);var e=N(d);d=M(e);e=N(e);return this.G(b,a,c,d,e)};re.U=4;function se(a,b){return new Ld(null,function(){a:for(var c=a,d=b;;)if(d=J(d),0<c&&d)--c,d=vc(d);else break a;return d},null)}
function te(a){return re.l(function(b){return b},a,se(2,a))}var ue=function ue(a){switch(arguments.length){case 0:return ue.I();case 1:return ue.g(arguments[0]);case 2:return ue.h(arguments[0],arguments[1]);case 3:return ue.l(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length)].join(""));}};ue.I=function(){return Xc};ue.g=function(a){return a};
ue.h=function(a,b){return null!=a?null!=a&&(a.J&4||u===a.Vc)?yb(Tb(Pa(Sb,Rb(a),b)),fd(a)):Pa(Za,a,b):Pa(Wc,a,b)};ue.l=function(a,b,c){if(null!=a&&(a.J&4||u===a.Vc)){var d=fd(a);return Dd(b,function(){function e(h){return yb(Tb(h),d)}var f=null;f=function(h,k){switch(arguments.length){case 1:return e.call(this,h);case 2:return Sb(h,k)}throw Error("Invalid arity: "+arguments.length);};f.g=e;f.h=function(h,k){return Sb(h,k)};return f}(),Rb(a),c)}return Dd(b,Wc,a,c)};ue.U=3;
var ve=function ve(a,b,c){var e=J(b);b=M(e);var f=N(e);if(f){e=U.l;var h=H.h(a,b);c=ve.l?ve.l(h,f,c):ve.call(null,h,f,c);a=e.call(U,a,b,c)}else a=U.l(a,b,c);return a},we=function we(a){switch(arguments.length){case 3:return we.l(arguments[0],arguments[1],arguments[2]);case 4:return we.K(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return we.P(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);case 6:return we.xa(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],
arguments[5]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(6),0,null);return we.G(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],c)}};we.l=function(a,b,c){var d=J(b);b=M(d);if(d=N(d))a=U.l(a,b,we.l(H.h(a,b),d,c));else{d=U.l;var e=H.h(a,b);c=c.g?c.g(e):c.call(null,e);a=d.call(U,a,b,c)}return a};
we.K=function(a,b,c,d){var e=J(b);b=M(e);if(e=N(e))a=U.l(a,b,we.K(H.h(a,b),e,c,d));else{e=U.l;var f=H.h(a,b);c=c.h?c.h(f,d):c.call(null,f,d);a=e.call(U,a,b,c)}return a};we.P=function(a,b,c,d,e){var f=J(b);b=M(f);if(f=N(f))a=U.l(a,b,we.P(H.h(a,b),f,c,d,e));else{f=U.l;var h=H.h(a,b);c=c.l?c.l(h,d,e):c.call(null,h,d,e);a=f.call(U,a,b,c)}return a};
we.xa=function(a,b,c,d,e,f){var h=J(b);b=M(h);if(h=N(h))a=U.l(a,b,we.xa(H.h(a,b),h,c,d,e,f));else{h=U.l;var k=H.h(a,b);c=c.K?c.K(k,d,e,f):c.call(null,k,d,e,f);a=h.call(U,a,b,c)}return a};we.G=function(a,b,c,d,e,f,h){var k=J(b);b=M(k);return(k=N(k))?U.l(a,b,ce(we,H.h(a,b),k,c,d,Vc([e,f,h]))):U.l(a,b,ce(c,H.h(a,b),d,e,f,Vc([h])))};we.X=function(a){var b=M(a),c=N(a);a=M(c);var d=N(c);c=M(d);var e=N(d);d=M(e);var f=N(e);e=M(f);var h=N(f);f=M(h);h=N(h);return this.G(b,a,c,d,e,f,h)};we.U=6;
function xe(a,b){this.ba=a;this.j=b}function ye(a){return new xe(a,[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null])}function ze(a){return new xe(a.ba,Na(a.j))}function Ae(a){a=a.s;return 32>a?0:a-1>>>5<<5}function Be(a,b,c){for(;;){if(0===b)return c;var d=ye(a);d.j[0]=c;c=d;b-=5}}
var Ce=function Ce(a,b,c,d){var f=ze(c),h=a.s-1>>>b&31;5===b?f.j[h]=d:(c=c.j[h],null!=c?(b-=5,a=Ce.K?Ce.K(a,b,c,d):Ce.call(null,a,b,c,d)):a=Be(null,b-5,d),f.j[h]=a);return f};function De(a,b){throw Error(["No item ",B.g(a)," in vector of length ",B.g(b)].join(""));}function Ee(a,b){if(b>=Ae(a))return a.tail;var c=a.root;for(a=a.shift;;)if(0<a){var d=a-5;c=c.j[b>>>a&31];a=d}else return c.j}function Fe(a,b){return 0<=b&&b<a.s?Ee(a,b):De(b,a.s)}
var Ge=function Ge(a,b,c,d,e){var h=ze(c);if(0===b)h.j[d&31]=e;else{var k=d>>>b&31;b-=5;c=c.j[k];a=Ge.P?Ge.P(a,b,c,d,e):Ge.call(null,a,b,c,d,e);h.j[k]=a}return h},He=function He(a,b,c){var e=a.s-2>>>b&31;if(5<b){b-=5;var f=c.j[e];a=He.l?He.l(a,b,f):He.call(null,a,b,f);if(null==a&&0===e)return null;c=ze(c);c.j[e]=a;return c}if(0===e)return null;c=ze(c);c.j[e]=null;return c};function Ie(a,b,c,d,e,f){this.v=a;this.base=b;this.j=c;this.la=d;this.start=e;this.end=f}
Ie.prototype.hasNext=function(){return this.v<this.end};Ie.prototype.next=function(){32===this.v-this.base&&(this.j=Ee(this.la,this.v),this.base+=32);var a=this.j[this.v&31];this.v+=1;return a};function Je(a,b,c){return new Ie(b,b-b%32,b<R(a)?Ee(a,b):null,a,b,c)}function Ke(a,b,c,d){return c<d?Le(a,b,Qc(a,c),c+1,d):b.I?b.I():b.call(null)}
function Le(a,b,c,d,e){var f=c;c=d;for(d=Ee(a,d);;)if(c<e){var h=c&31;d=0===h?Ee(a,c):d;h=d[h];f=b.h?b.h(f,h):b.call(null,f,h);if(Hc(f))return G(f);c+=1}else return f}function V(a,b,c,d,e,f){this.meta=a;this.s=b;this.shift=c;this.root=d;this.tail=e;this.H=f;this.o=167666463;this.J=139268}g=V.prototype;g.lb=function(a,b){return 0<=b&&b<this.s?new Me(b,Ee(this,b)[b&31]):null};g.toString=function(){return gc(this)};g.equiv=function(a){return this.F(null,a)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Q(this,b,0)};a.h=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();g.na=function(a,b){return this.O(null,b,null)};g.O=function(a,b,c){return"number"===typeof b?this.ma(null,b,c):c};
g.mb=function(a,b,c){a=0;for(var d=c;;)if(a<this.s){var e=Ee(this,a);c=e.length;a:for(var f=0;;)if(f<c){var h=f+a,k=e[f];d=b.l?b.l(d,h,k):b.call(null,d,h,k);if(Hc(d)){e=d;break a}f+=1}else{e=d;break a}if(Hc(e))return G(e);a+=c;d=e}else return d};g.jc=u;g.N=function(a,b){return Fe(this,b)[b&31]};g.ma=function(a,b,c){return 0<=b&&b<this.s?Ee(this,b)[b&31]:c};
g.fb=function(a,b,c){if(0<=b&&b<this.s)return Ae(this)<=b?(a=Na(this.tail),a[b&31]=c,new V(this.meta,this.s,this.shift,this.root,a,null)):new V(this.meta,this.s,this.shift,Ge(this,this.shift,this.root,b,c),this.tail,null);if(b===this.s)return this.ia(null,c);throw Error(["Index ",B.g(b)," out of bounds  [0,",B.g(this.s),"]"].join(""));};g.Aa=function(){return Je(this,0,this.s)};g.ea=function(){return this.meta};g.Y=function(){return this.s};g.rb=function(){return 0<this.s?this.N(null,this.s-1):null};
g.sb=function(){if(0===this.s)throw Error("Can't pop empty vector");if(1===this.s)return yb(Xc,this.meta);if(1<this.s-Ae(this))return new V(this.meta,this.s-1,this.shift,this.root,this.tail.slice(0,-1),null);var a=Ee(this,this.s-2),b=He(this,this.shift,this.root);b=null==b?X:b;var c=this.s-1;return 5<this.shift&&null==b.j[1]?new V(this.meta,c,this.shift-5,b.j[0],a,null):new V(this.meta,c,this.shift,b,a,null)};g.T=function(){var a=this.H;return null!=a?a:this.H=a=Bc(this)};
g.F=function(a,b){if(b instanceof V)if(this.s===R(b))for(a=this.Aa(null),b=b.Aa(null);;)if(a.hasNext()){var c=a.next(),d=b.next();if(!O.h(c,d))return!1}else return!0;else return!1;else return Tc(this,b)};g.kb=function(){return new Ne(this.s,this.shift,Oe.g?Oe.g(this.root):Oe.call(null,this.root),Pe.g?Pe.g(this.tail):Pe.call(null,this.tail))};g.ha=function(){return yb(Xc,this.meta)};g.oa=function(a,b){return Ke(this,b,0,this.s)};
g.pa=function(a,b,c){a=0;for(var d=c;;)if(a<this.s){var e=Ee(this,a);c=e.length;a:for(var f=0;;)if(f<c){var h=e[f];d=b.h?b.h(d,h):b.call(null,d,h);if(Hc(d)){e=d;break a}f+=1}else{e=d;break a}if(Hc(e))return G(e);a+=c;d=e}else return d};g.Ra=function(a,b,c){if("number"===typeof b)return this.fb(null,b,c);throw Error("Vector's key for assoc must be a number.");};g.cb=function(a,b){return td(b)?0<=b&&b<this.s:!1};
g.aa=function(){if(0===this.s)return null;if(32>=this.s)return new K(this.tail,0,null);a:{var a=this.root;for(var b=this.shift;;)if(0<b)b-=5,a=a.j[0];else{a=a.j;break a}}return Qe?Qe(this,a,0,0):Re.call(null,this,a,0,0)};g.ga=function(a,b){return b===this.meta?this:new V(b,this.s,this.shift,this.root,this.tail,this.H)};
g.ia=function(a,b){if(32>this.s-Ae(this)){a=this.tail.length;for(var c=Array(a+1),d=0;;)if(d<a)c[d]=this.tail[d],d+=1;else break;c[a]=b;return new V(this.meta,this.s+1,this.shift,this.root,c,null)}a=(c=this.s>>>5>1<<this.shift)?this.shift+5:this.shift;c?(c=ye(null),c.j[0]=this.root,d=Be(null,this.shift,new xe(null,this.tail)),c.j[1]=d):c=Ce(this,this.shift,this.root,new xe(null,this.tail));return new V(this.meta,this.s+1,a,c,[b],null)};
g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Na(b)))};g.g=function(a){if("number"===typeof a)return this.N(null,a);throw Error("Key must be integer");};
var X=new xe(null,[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]),Xc=new V(null,0,5,X,[],Cc);function Se(a,b){var c=a.length;a=b?a:Na(a);if(32>c)return new V(null,c,5,X,a,null);var d=a.slice(0,32);b=32;for(var e=(new V(null,32,5,X,d,null)).kb(null);;)if(b<c)d=b+1,e=Sb(e,a[b]),b=d;else return Tb(e)}V.prototype[Ma]=function(){return yc(this)};
function Te(a){return w(Ue.g?Ue.g(a):Ue.call(null,a))?new V(null,2,5,X,[Ve.g?Ve.g(a):Ve.call(null,a),We.g?We.g(a):We.call(null,a)],null):nd(a)?ed(a,null):Ja(a)?Se(a,!0):Tb(Pa(Sb,Rb(Xc),a))}var Xe=function Xe(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=0<c.length?new K(c.slice(0),0,null):null;return Xe.G(c)};Xe.G=function(a){return a instanceof K&&0===a.v?Se(a.j,!Ja(a.j)):Te(a)};Xe.U=0;Xe.X=function(a){return this.G(J(a))};
function Ye(a,b,c,d,e){this.Da=a;this.node=b;this.v=c;this.off=d;this.meta=e;this.H=null;this.o=32375020;this.J=1536}g=Ye.prototype;g.toString=function(){return gc(this)};g.equiv=function(a){return this.F(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Q(this,b,0)};a.h=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();g.ea=function(){return this.meta};g.sa=function(){if(this.off+1<this.node.length){var a=this.Da;var b=this.node,c=this.v,d=this.off+1;a=Qe?Qe(a,b,c,d):Re.call(null,a,b,c,d);return null==a?null:a}return this.zc()};
g.T=function(){var a=this.H;return null!=a?a:this.H=a=Bc(this)};g.F=function(a,b){return Tc(this,b)};g.ha=function(){return wc};g.oa=function(a,b){return Ke(this.Da,b,this.v+this.off,R(this.Da))};g.pa=function(a,b,c){return Le(this.Da,b,c,this.v+this.off,R(this.Da))};g.ta=function(){return this.node[this.off]};g.ua=function(){if(this.off+1<this.node.length){var a=this.Da;var b=this.node,c=this.v,d=this.off+1;a=Qe?Qe(a,b,c,d):Re.call(null,a,b,c,d);return null==a?wc:a}return this.Sb(null)};g.aa=function(){return this};
g.kc=function(){var a=this.node;return new Od(a,this.off,a.length)};g.Sb=function(){var a=this.v+this.node.length;if(a<Va(this.Da)){var b=this.Da,c=Ee(this.Da,a);return Qe?Qe(b,c,a,0):Re.call(null,b,c,a,0)}return wc};g.ga=function(a,b){return b===this.meta?this:Ze?Ze(this.Da,this.node,this.v,this.off,b):Re.call(null,this.Da,this.node,this.v,this.off,b)};g.ia=function(a,b){return Uc(b,this)};
g.zc=function(){var a=this.v+this.node.length;if(a<Va(this.Da)){var b=this.Da,c=Ee(this.Da,a);return Qe?Qe(b,c,a,0):Re.call(null,b,c,a,0)}return null};Ye.prototype[Ma]=function(){return yc(this)};
function Re(a){switch(arguments.length){case 3:var b=arguments[0],c=arguments[1],d=arguments[2];return new Ye(b,Fe(b,c),c,d,null);case 4:return Qe(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return Ze(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:throw Error(["Invalid arity: ",B.g(arguments.length)].join(""));}}function Qe(a,b,c,d){return new Ye(a,b,c,d,null)}function Ze(a,b,c,d,e){return new Ye(a,b,c,d,e)}
function $e(a,b,c,d,e){this.meta=a;this.la=b;this.start=c;this.end=d;this.H=e;this.o=167666463;this.J=139264}g=$e.prototype;g.lb=function(a,b){if(0>b)return null;a=this.start+b;return a<this.end?new Me(b,fb(this.la,a)):null};g.toString=function(){return gc(this)};g.equiv=function(a){return this.F(null,a)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Q(this,b,0)};a.h=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();g.na=function(a,b){return this.O(null,b,null)};g.O=function(a,b,c){return"number"===typeof b?this.ma(null,b,c):c};
g.mb=function(a,b,c){a=this.start;for(var d=0;;)if(a<this.end){var e=d,f=D(this.la,a);c=b.l?b.l(c,e,f):b.call(null,c,e,f);if(Hc(c))return G(c);d+=1;a+=1}else return c};g.N=function(a,b){return 0>b||this.end<=this.start+b?De(b,this.end-this.start):D(this.la,this.start+b)};g.ma=function(a,b,c){return 0>b||this.end<=this.start+b?c:D(this.la,this.start+b,c)};
g.fb=function(a,b,c){a=this.start+b;if(0>b||this.end+1<=a)throw Error(["Index ",B.g(b)," out of bounds [0,",B.g(this.Y(null)),"]"].join(""));b=this.meta;c=U.l(this.la,a,c);var d=this.start,e=this.end;a+=1;a=e>a?e:a;return af.P?af.P(b,c,d,a,null):af.call(null,b,c,d,a,null)};g.Aa=function(){return null!=this.la&&u===this.la.jc?Je(this.la,this.start,this.end):new ie(this)};g.ea=function(){return this.meta};g.Y=function(){return this.end-this.start};
g.rb=function(){return this.start===this.end?null:D(this.la,this.end-1)};g.sb=function(){if(this.start===this.end)throw Error("Can't pop empty vector");var a=this.meta,b=this.la,c=this.start,d=this.end-1;return af.P?af.P(a,b,c,d,null):af.call(null,a,b,c,d,null)};g.T=function(){var a=this.H;return null!=a?a:this.H=a=Bc(this)};g.F=function(a,b){return Tc(this,b)};g.ha=function(){return yb(Xc,this.meta)};
g.oa=function(a,b){return null!=this.la&&u===this.la.jc?Ke(this.la,b,this.start,this.end):Jc(this,b)};g.pa=function(a,b,c){return null!=this.la&&u===this.la.jc?Le(this.la,b,c,this.start,this.end):Kc(this,b,c)};g.Ra=function(a,b,c){if("number"===typeof b)return this.fb(null,b,c);throw Error("Subvec's key for assoc must be a number.");};g.cb=function(a,b){return td(b)?0<=b&&b<this.end-this.start:!1};
g.aa=function(){var a=this;return function d(c){return c===a.end?null:Uc(D(a.la,c),new Ld(null,function(){return d(c+1)},null))}(a.start)};g.ga=function(a,b){return b===this.meta?this:af.P?af.P(b,this.la,this.start,this.end,this.H):af.call(null,b,this.la,this.start,this.end,this.H)};g.ia=function(a,b){a=this.meta;b=ub(this.la,this.end,b);var c=this.start,d=this.end+1;return af.P?af.P(a,b,c,d,null):af.call(null,a,b,c,d,null)};
g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Na(b)))};g.g=function(a){return this.N(null,a)};g.h=function(a,b){return this.ma(null,a,b)};$e.prototype[Ma]=function(){return yc(this)};
function af(a,b,c,d,e){for(;;)if(b instanceof $e)c=b.start+c,d=b.start+d,b=b.la;else{if(!nd(b))throw Error("v must satisfy IVector");if(0>c||d<c||d>R(b))throw Error("Index out of bounds");return new $e(a,b,c,d,e)}}function bf(a,b){return a===b.ba?b:new xe(a,Na(b.j))}function Oe(a){return new xe({},Na(a.j))}
function Pe(a){var b=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];pd(a,0,b,0,a.length);return b}var cf=function cf(a,b,c,d){c=bf(a.root.ba,c);var f=a.s-1>>>b&31;if(5===b)a=d;else{var h=c.j[f];null!=h?(b-=5,a=cf.K?cf.K(a,b,h,d):cf.call(null,a,b,h,d)):a=Be(a.root.ba,b-5,d)}c.j[f]=a;return c};function Ne(a,b,c,d){this.s=a;this.shift=b;this.root=c;this.tail=d;this.J=88;this.o=275}g=Ne.prototype;
g.eb=function(a,b){if(this.root.ba){if(32>this.s-Ae(this))this.tail[this.s&31]=b;else{a=new xe(this.root.ba,this.tail);var c=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];c[0]=b;this.tail=c;this.s>>>5>1<<this.shift?(b=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],c=this.shift+
5,b[0]=this.root,b[1]=Be(this.root.ba,this.shift,a),this.root=new xe(this.root.ba,b),this.shift=c):this.root=cf(this,this.shift,this.root,a)}this.s+=1;return this}throw Error("conj! after persistent!");};g.tb=function(){if(this.root.ba){this.root.ba=null;var a=this.s-Ae(this),b=Array(a);pd(this.tail,0,b,0,a);return new V(null,this.s,this.shift,this.root,b,null)}throw Error("persistent! called twice");};
g.bb=function(a,b,c){if("number"===typeof b)return this.Gb(null,b,c);throw Error("TransientVector's key for assoc! must be a number.");};
g.Gb=function(a,b,c){var d=this;if(d.root.ba){if(0<=b&&b<d.s)return Ae(this)<=b?d.tail[b&31]=c:(a=function k(f,h){h=bf(d.root.ba,h);if(0===f)h.j[b&31]=c;else{var l=b>>>f&31;f=k(f-5,h.j[l]);h.j[l]=f}return h}(d.shift,d.root),d.root=a),this;if(b===d.s)return this.eb(null,c);throw Error(["Index ",B.g(b)," out of bounds for TransientVector of length",B.g(d.s)].join(""));}throw Error("assoc! after persistent!");};g.Y=function(){if(this.root.ba)return this.s;throw Error("count after persistent!");};
g.N=function(a,b){if(this.root.ba)return Fe(this,b)[b&31];throw Error("nth after persistent!");};g.ma=function(a,b,c){return 0<=b&&b<this.s?this.N(null,b):c};g.na=function(a,b){return this.O(null,b,null)};g.O=function(a,b,c){if(this.root.ba)return"number"===typeof b?this.ma(null,b,c):c;throw Error("lookup after persistent!");};
g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Na(b)))};g.g=function(a){return this.na(null,a)};g.h=function(a,b){return this.O(null,a,b)};function df(){this.o=2097152;this.J=0}df.prototype.equiv=function(a){return this.F(null,a)};df.prototype.F=function(){return!1};var ef=new df;
function ff(a,b){return rd(ld(b)&&!md(b)?R(a)===R(b)?(null!=a?a.o&1048576||u===a.yd||(a.o?0:x(Cb,a)):x(Cb,a))?Bd(function(c,d,e){return O.h(H.l(b,d,ef),e)?!0:new Gc},!0,a):je(function(c){return O.h(H.l(b,M(c),ef),M(N(c)))},a):null:null)}function gf(a){this.M=a}gf.prototype.next=function(){if(null!=this.M){var a=M(this.M),b=T(a,0,null);a=T(a,1,null);this.M=N(this.M);return{value:[b,a],done:!1}}return{value:null,done:!0}};function hf(a){this.M=a}
hf.prototype.next=function(){if(null!=this.M){var a=M(this.M);this.M=N(this.M);return{value:[a,a],done:!1}}return{value:null,done:!0}};
function jf(a,b){if(b instanceof I)a:{var c=a.length;b=b.Ba;for(var d=0;;){if(c<=d){a=-1;break a}if(a[d]instanceof I&&b===a[d].Ba){a=d;break a}d+=2}}else if("string"===typeof b||"number"===typeof b)a:for(c=a.length,d=0;;){if(c<=d){a=-1;break a}if(b===a[d]){a=d;break a}d+=2}else if(b instanceof rc)a:for(c=a.length,b=b.str,d=0;;){if(c<=d){a=-1;break a}if(a[d]instanceof rc&&b===a[d].str){a=d;break a}d+=2}else if(null==b)a:for(b=a.length,c=0;;){if(b<=c){a=-1;break a}if(null==a[c]){a=c;break a}c+=2}else a:for(c=
a.length,d=0;;){if(c<=d){a=-1;break a}if(O.h(b,a[d])){a=d;break a}d+=2}return a}function Me(a,b){this.key=a;this.val=b;this.H=null;this.o=166619935;this.J=0}g=Me.prototype;g.lb=function(a,b){switch(b){case 0:return new Me(0,this.key);case 1:return new Me(1,this.val);default:return null}};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Q(this,b,0)};a.h=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();g.na=function(a,b){return this.ma(null,b,null)};g.O=function(a,b,c){return this.ma(null,b,c)};g.N=function(a,b){if(0===b)return this.key;if(1===b)return this.val;throw Error("Index out of bounds");};
g.ma=function(a,b,c){return 0===b?this.key:1===b?this.val:c};g.fb=function(a,b,c){return(new V(null,2,5,X,[this.key,this.val],null)).fb(null,b,c)};g.ea=function(){return null};g.Y=function(){return 2};g.ad=function(){return this.key};g.bd=function(){return this.val};g.rb=function(){return this.val};g.sb=function(){return new V(null,1,5,X,[this.key],null)};g.T=function(){var a=this.H;return null!=a?a:this.H=a=Bc(this)};g.F=function(a,b){return Tc(this,b)};g.ha=function(){return null};
g.oa=function(a,b){return Jc(this,b)};g.pa=function(a,b,c){return Kc(this,b,c)};g.Ra=function(a,b,c){return U.l(new V(null,2,5,X,[this.key,this.val],null),b,c)};g.cb=function(a,b){return 0===b||1===b};g.aa=function(){return new K([this.key,this.val],0,null)};g.ga=function(a,b){return ed(new V(null,2,5,X,[this.key,this.val],null),b)};g.ia=function(a,b){return new V(null,3,5,X,[this.key,this.val,b],null)};
g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Na(b)))};g.g=function(a){return this.N(null,a)};g.h=function(a,b){return this.ma(null,a,b)};function Ue(a){return null!=a?a.o&2048||u===a.Bd?!0:!1:!1}function kf(a,b,c){this.j=a;this.v=b;this._meta=c;this.o=32374990;this.J=0}g=kf.prototype;
g.toString=function(){return gc(this)};g.equiv=function(a){return this.F(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Q(this,b,0)};a.h=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();g.ea=function(){return this._meta};g.sa=function(){return this.v<this.j.length-2?new kf(this.j,this.v+2,null):null};g.Y=function(){return(this.j.length-this.v)/2};g.T=function(){return Bc(this)};
g.F=function(a,b){return Tc(this,b)};g.ha=function(){return wc};g.oa=function(a,b){return wd(b,this)};g.pa=function(a,b,c){return xd(b,c,this)};g.ta=function(){return new Me(this.j[this.v],this.j[this.v+1])};g.ua=function(){return this.v<this.j.length-2?new kf(this.j,this.v+2,null):wc};g.aa=function(){return this};g.ga=function(a,b){return b===this._meta?this:new kf(this.j,this.v,b)};g.ia=function(a,b){return Uc(b,this)};kf.prototype[Ma]=function(){return yc(this)};
function lf(a,b){this.j=a;this.v=0;this.s=b}lf.prototype.hasNext=function(){return this.v<this.s};lf.prototype.next=function(){var a=new Me(this.j[this.v],this.j[this.v+1]);this.v+=2;return a};function v(a,b,c,d){this.meta=a;this.s=b;this.j=c;this.H=d;this.o=16647951;this.J=139268}g=v.prototype;g.lb=function(a,b){a=jf(this.j,b);return-1===a?null:new Me(this.j[a],this.j[a+1])};g.toString=function(){return gc(this)};g.equiv=function(a){return this.F(null,a)};
g.keys=function(){return yc(mf.g?mf.g(this):mf.call(null,this))};g.entries=function(){return new gf(J(J(this)))};g.values=function(){return yc(nf.g?nf.g(this):nf.call(null,this))};g.has=function(a){return ud(this,a)};g.get=function(a,b){return this.O(null,a,b)};
g.forEach=function(a){for(var b=J(this),c=null,d=0,e=0;;)if(e<d){var f=c.N(null,e),h=T(f,0,null);f=T(f,1,null);a.h?a.h(f,h):a.call(null,f,h);e+=1}else if(b=J(b))od(b)?(c=Xb(b),b=Yb(b),h=c,d=R(c),c=h):(c=M(b),h=T(c,0,null),f=T(c,1,null),a.h?a.h(f,h):a.call(null,f,h),b=N(b),c=null,d=0),e=0;else return null};g.na=function(a,b){return this.O(null,b,null)};g.O=function(a,b,c){a=jf(this.j,b);return-1===a?c:this.j[a+1]};
g.mb=function(a,b,c){a=this.j.length;for(var d=0;;)if(d<a){var e=this.j[d],f=this.j[d+1];c=b.l?b.l(c,e,f):b.call(null,c,e,f);if(Hc(c))return G(c);d+=2}else return c};g.Aa=function(){return new lf(this.j,2*this.s)};g.ea=function(){return this.meta};g.Y=function(){return this.s};g.T=function(){var a=this.H;return null!=a?a:this.H=a=Dc(this)};
g.F=function(a,b){if(ld(b)&&!md(b))if(a=this.j.length,this.s===b.Y(null))for(var c=0;;)if(c<a){var d=b.O(null,this.j[c],qd);if(d!==qd)if(O.h(this.j[c+1],d))c+=2;else return!1;else return!1}else return!0;else return!1;else return!1};g.kb=function(){return new of(this.j.length,Na(this.j))};g.ha=function(){return yb(ee,this.meta)};g.oa=function(a,b){return yd(this,b)};g.pa=function(a,b,c){return zd(this,b,c)};
g.Tb=function(a,b){if(0<=jf(this.j,b)){a=this.j.length;var c=a-2;if(0===c)return this.ha(null);c=Array(c);for(var d=0,e=0;;){if(d>=a)return new v(this.meta,this.s-1,c,null);O.h(b,this.j[d])?d+=2:(c[e]=this.j[d],c[e+1]=this.j[d+1],e+=2,d+=2)}}else return this};
g.Ra=function(a,b,c){a=jf(this.j,b);if(-1===a){if(this.s<pf){a=this.j;for(var d=a.length,e=Array(d+2),f=0;;)if(f<d)e[f]=a[f],f+=1;else break;e[d]=b;e[d+1]=c;return new v(this.meta,this.s+1,e,null)}return yb(jb(ue.h(qf,this),b,c),this.meta)}if(c===this.j[a+1])return this;b=Na(this.j);b[a+1]=c;return new v(this.meta,this.s,b,null)};g.cb=function(a,b){return-1!==jf(this.j,b)};g.aa=function(){var a=this.j;return 0<=a.length-2?new kf(a,0,null):null};
g.ga=function(a,b){return b===this.meta?this:new v(b,this.s,this.j,this.H)};g.ia=function(a,b){if(nd(b))return this.Ra(null,D(b,0),D(b,1));a=this;for(b=J(b);;){if(null==b)return a;var c=M(b);if(nd(c))a=jb(a,D(c,0),D(c,1)),b=N(b);else throw Error("conj on a map takes map entries or seqables of map entries");}};
g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Na(b)))};g.g=function(a){return this.na(null,a)};g.h=function(a,b){return this.O(null,a,b)};var ee=new v(null,0,[],Ec),pf=8;
function rf(a,b,c){a=b?a:Na(a);if(!c){c=[];for(b=0;;)if(b<a.length){var d=a[b],e=a[b+1];-1===jf(c,d)&&(c.push(d),c.push(e));b+=2}else break;a=c}return new v(null,a.length/2,a,null)}function sf(a,b){return a===b?!0:a===b||a instanceof I&&b instanceof I&&a.Ba===b.Ba?!0:O.h(a,b)}function tf(a){for(var b=0,c=0;;)if(b<a.length){var d;a:for(d=0;;)if(d<b){var e=sf(a[b],a[d]);if(e){d=e;break a}d=2+d}else{d=!1;break a}c=d?c:c+2;b=2+b}else return c}
function uf(a,b){var c=a.length-1,d=J(b);b=Array(c+2*R(d));a=pd(a,0,b,0,c);for(b=c;;)if(d){var e=M(d);a[b]=nb(e);a[b+1]=ob(e);b=2+c;d=N(d)}else return a}function $c(a){var b=a.length,c=1===(b&1),d;if(!(d=c))a:for(d=0;;)if(d<a.length){var e;b:for(e=0;;)if(e<d){var f=sf(a[d],a[e]);if(f){e=f;break b}e=2+e}else{e=!1;break b}if(e){d=e;break a}d=2+d}else{d=!1;break a}return d?vf(a,c):new v(null,b/2,a,null)}
function vf(a,b){var c=b?uf(a,ue.h(ee,a[a.length-1])):a;a=tf(c);var d=c.length;if(a<d){a=Array(a);for(var e=0,f=0;;)if(e<d)(function(){for(var h=0;;)if(h<f){var k=sf(c[e],c[h]);if(k)return k;h=2+h}else return!1})()?(b=f,e=2+e,f=b):(b=function(){for(var h=d-2;;)if(h>=e){if(sf(c[e],c[h]))return h;h-=2}else return h}(),a[f]=c[e],a[f+1]=c[b+1],b=2+f,e=2+e,f=b);else break;return new v(null,a.length/2,a,null)}return new v(null,c.length/2,c,null)}v.prototype[Ma]=function(){return yc(this)};
function of(a,b){this.qa={};this.len=a;this.j=b;this.o=259;this.J=56}g=of.prototype;g.Y=function(){if(this.qa)return Ed(this.len);throw Error("count after persistent!");};g.na=function(a,b){return this.O(null,b,null)};g.O=function(a,b,c){if(this.qa)return a=jf(this.j,b),-1===a?c:this.j[a+1];throw Error("lookup after persistent!");};
g.eb=function(a,b){if(this.qa){if(Ue(b))return this.bb(null,Ve.g?Ve.g(b):Ve.call(null,b),We.g?We.g(b):We.call(null,b));if(nd(b))return this.bb(null,b.g?b.g(0):b.call(null,0),b.g?b.g(1):b.call(null,1));a=J(b);for(b=this;;){var c=M(a);if(w(c))a=N(a),b=Ub(b,Ve.g?Ve.g(c):Ve.call(null,c),We.g?We.g(c):We.call(null,c));else return b}}else throw Error("conj! after persistent!");};g.tb=function(){if(this.qa)return this.qa=!1,new v(null,Ed(this.len),this.j,null);throw Error("persistent! called twice");};
g.bb=function(a,b,c){if(this.qa){a=jf(this.j,b);if(-1===a){if(this.len+2<=2*pf)return this.len+=2,this.j.push(b),this.j.push(c),this;a=wf.h?wf.h(this.len,this.j):wf.call(null,this.len,this.j);return Ub(a,b,c)}c!==this.j[a+1]&&(this.j[a+1]=c);return this}throw Error("assoc! after persistent!");};g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};
g.apply=function(a,b){return this.call.apply(this,[this].concat(Na(b)))};g.g=function(a){return this.O(null,a,null)};g.h=function(a,b){return this.O(null,a,b)};function wf(a,b){for(var c=Rb(qf),d=0;;)if(d<a)c=Ub(c,b[d],b[d+1]),d+=2;else return c}function xf(){this.val=!1}function yf(a,b,c){a=Na(a);a[b]=c;return a}function zf(a,b){var c=Array(a.length-2);pd(a,0,c,0,2*b);pd(a,2*(b+1),c,2*b,c.length-2*b);return c}function Af(a,b,c,d){a=a.ub(b);a.j[c]=d;return a}
function Bf(a,b,c){for(var d=a.length,e=0,f=c;;)if(e<d){c=a[e];if(null!=c){var h=a[e+1];c=b.l?b.l(f,c,h):b.call(null,f,c,h)}else c=a[e+1],c=null!=c?c.Nb(b,f):f;if(Hc(c))return c;e+=2;f=c}else return f}function Cf(a){this.j=a;this.v=0;this.$a=this.Ob=null}Cf.prototype.advance=function(){for(var a=this.j.length;;)if(this.v<a){var b=this.j[this.v],c=this.j[this.v+1];null!=b?b=this.Ob=new Me(b,c):null!=c?(b=ec(c),b=b.hasNext()?this.$a=b:!1):b=!1;this.v+=2;if(b)return!0}else return!1};
Cf.prototype.hasNext=function(){var a=null!=this.Ob;return a?a:(a=null!=this.$a)?a:this.advance()};Cf.prototype.next=function(){if(null!=this.Ob){var a=this.Ob;this.Ob=null;return a}if(null!=this.$a)return a=this.$a.next(),this.$a.hasNext()||(this.$a=null),a;if(this.advance())return this.next();throw Error("No such element");};Cf.prototype.remove=function(){return Error("Unsupported operation")};function Df(a,b,c){this.ba=a;this.bitmap=b;this.j=c;this.J=131072;this.o=0}g=Df.prototype;
g.ub=function(a){if(a===this.ba)return this;var b=Fd(this.bitmap),c=Array(0>b?4:2*(b+1));pd(this.j,0,c,0,2*b);return new Df(a,this.bitmap,c)};g.Lb=function(){return Ef?Ef(this.j):Ff.call(null,this.j)};g.Nb=function(a,b){return Bf(this.j,a,b)};g.ob=function(a,b,c,d){var e=1<<(b>>>a&31);if(0===(this.bitmap&e))return d;var f=Fd(this.bitmap&e-1);e=this.j[2*f];f=this.j[2*f+1];return null==e?f.ob(a+5,b,c,d):sf(c,e)?f:d};
g.Ya=function(a,b,c,d,e,f){var h=1<<(c>>>b&31),k=Fd(this.bitmap&h-1);if(0===(this.bitmap&h)){var l=Fd(this.bitmap);if(2*l<this.j.length){a=this.ub(a);b=a.j;f.val=!0;c=2*(l-k);f=2*k+(c-1);for(l=2*(k+1)+(c-1);0!==c;)b[l]=b[f],--l,--c,--f;b[2*k]=d;b[2*k+1]=e;a.bitmap|=h;return a}if(16<=l){k=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];k[c>>>b&31]=Gf.Ya(a,b+5,c,d,e,f);for(e=d=0;;)if(32>
d)0===(this.bitmap>>>d&1)?d+=1:(k[d]=null!=this.j[e]?Gf.Ya(a,b+5,pc(this.j[e]),this.j[e],this.j[e+1],f):this.j[e+1],e+=2,d+=1);else break;return new Hf(a,l+1,k)}b=Array(2*(l+4));pd(this.j,0,b,0,2*k);b[2*k]=d;b[2*k+1]=e;pd(this.j,2*k,b,2*(k+1),2*(l-k));f.val=!0;a=this.ub(a);a.j=b;a.bitmap|=h;return a}l=this.j[2*k];h=this.j[2*k+1];if(null==l)return l=h.Ya(a,b+5,c,d,e,f),l===h?this:Af(this,a,2*k+1,l);if(sf(d,l))return e===h?this:Af(this,a,2*k+1,e);f.val=!0;f=b+5;d=If?If(a,f,l,h,c,d,e):Jf.call(null,a,
f,l,h,c,d,e);e=2*k;k=2*k+1;a=this.ub(a);a.j[e]=null;a.j[k]=d;return a};
g.Xa=function(a,b,c,d,e){var f=1<<(b>>>a&31),h=Fd(this.bitmap&f-1);if(0===(this.bitmap&f)){var k=Fd(this.bitmap);if(16<=k){h=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];h[b>>>a&31]=Gf.Xa(a+5,b,c,d,e);for(d=c=0;;)if(32>c)0===(this.bitmap>>>c&1)?c+=1:(h[c]=null!=this.j[d]?Gf.Xa(a+5,pc(this.j[d]),this.j[d],this.j[d+1],e):this.j[d+1],d+=2,c+=1);else break;return new Hf(null,k+1,h)}a=Array(2*
(k+1));pd(this.j,0,a,0,2*h);a[2*h]=c;a[2*h+1]=d;pd(this.j,2*h,a,2*(h+1),2*(k-h));e.val=!0;return new Df(null,this.bitmap|f,a)}var l=this.j[2*h];f=this.j[2*h+1];if(null==l)return k=f.Xa(a+5,b,c,d,e),k===f?this:new Df(null,this.bitmap,yf(this.j,2*h+1,k));if(sf(c,l))return d===f?this:new Df(null,this.bitmap,yf(this.j,2*h+1,d));e.val=!0;e=this.bitmap;k=this.j;a+=5;a=Kf?Kf(a,l,f,b,c,d):Jf.call(null,a,l,f,b,c,d);c=2*h;h=2*h+1;d=Na(k);d[c]=null;d[h]=a;return new Df(null,e,d)};
g.Kb=function(a,b,c,d){var e=1<<(b>>>a&31);if(0===(this.bitmap&e))return d;var f=Fd(this.bitmap&e-1);e=this.j[2*f];f=this.j[2*f+1];return null==e?f.Kb(a+5,b,c,d):sf(c,e)?new Me(e,f):d};
g.Mb=function(a,b,c){var d=1<<(b>>>a&31);if(0===(this.bitmap&d))return this;var e=Fd(this.bitmap&d-1),f=this.j[2*e],h=this.j[2*e+1];return null==f?(a=h.Mb(a+5,b,c),a===h?this:null!=a?new Df(null,this.bitmap,yf(this.j,2*e+1,a)):this.bitmap===d?null:new Df(null,this.bitmap^d,zf(this.j,e))):sf(c,f)?this.bitmap===d?null:new Df(null,this.bitmap^d,zf(this.j,e)):this};g.Aa=function(){return new Cf(this.j)};var Gf=new Df(null,0,[]);function Lf(a){this.j=a;this.v=0;this.$a=null}
Lf.prototype.hasNext=function(){for(var a=this.j.length;;){if(null!=this.$a&&this.$a.hasNext())return!0;if(this.v<a){var b=this.j[this.v];this.v+=1;null!=b&&(this.$a=ec(b))}else return!1}};Lf.prototype.next=function(){if(this.hasNext())return this.$a.next();throw Error("No such element");};Lf.prototype.remove=function(){return Error("Unsupported operation")};function Hf(a,b,c){this.ba=a;this.s=b;this.j=c;this.J=131072;this.o=0}g=Hf.prototype;
g.ub=function(a){return a===this.ba?this:new Hf(a,this.s,Na(this.j))};g.Lb=function(){return Mf?Mf(this.j):Nf.call(null,this.j)};g.Nb=function(a,b){for(var c=this.j.length,d=0;;)if(d<c){var e=this.j[d];if(null!=e){b=e.Nb(a,b);if(Hc(b))return b;d+=1}else d+=1}else return b};g.ob=function(a,b,c,d){var e=this.j[b>>>a&31];return null!=e?e.ob(a+5,b,c,d):d};
g.Ya=function(a,b,c,d,e,f){var h=c>>>b&31,k=this.j[h];if(null==k)return a=Af(this,a,h,Gf.Ya(a,b+5,c,d,e,f)),a.s+=1,a;b=k.Ya(a,b+5,c,d,e,f);return b===k?this:Af(this,a,h,b)};g.Xa=function(a,b,c,d,e){var f=b>>>a&31,h=this.j[f];if(null==h)return new Hf(null,this.s+1,yf(this.j,f,Gf.Xa(a+5,b,c,d,e)));a=h.Xa(a+5,b,c,d,e);return a===h?this:new Hf(null,this.s,yf(this.j,f,a))};g.Kb=function(a,b,c,d){var e=this.j[b>>>a&31];return null!=e?e.Kb(a+5,b,c,d):d};
g.Mb=function(a,b,c){var d=b>>>a&31,e=this.j[d];if(null!=e){a=e.Mb(a+5,b,c);if(a===e)d=this;else if(null==a)if(8>=this.s)a:{e=this.j;a=e.length;b=Array(2*(this.s-1));c=0;for(var f=1,h=0;;)if(c<a)c!==d&&null!=e[c]?(b[f]=e[c],f+=2,h|=1<<c,c+=1):c+=1;else{d=new Df(null,h,b);break a}}else d=new Hf(null,this.s-1,yf(this.j,d,a));else d=new Hf(null,this.s,yf(this.j,d,a));return d}return this};g.Aa=function(){return new Lf(this.j)};
function Of(a,b,c){b*=2;for(var d=0;;)if(d<b){if(sf(c,a[d]))return d;d+=2}else return-1}function Pf(a,b,c,d){this.ba=a;this.gb=b;this.s=c;this.j=d;this.J=131072;this.o=0}g=Pf.prototype;g.ub=function(a){if(a===this.ba)return this;var b=Array(2*(this.s+1));pd(this.j,0,b,0,2*this.s);return new Pf(a,this.gb,this.s,b)};g.Lb=function(){return Ef?Ef(this.j):Ff.call(null,this.j)};g.Nb=function(a,b){return Bf(this.j,a,b)};
g.ob=function(a,b,c,d){a=Of(this.j,this.s,c);return 0>a?d:sf(c,this.j[a])?this.j[a+1]:d};
g.Ya=function(a,b,c,d,e,f){if(c===this.gb){b=Of(this.j,this.s,d);if(-1===b){if(this.j.length>2*this.s)return b=2*this.s,c=2*this.s+1,a=this.ub(a),a.j[b]=d,a.j[c]=e,f.val=!0,a.s+=1,a;c=this.j.length;b=Array(c+2);pd(this.j,0,b,0,c);b[c]=d;b[c+1]=e;f.val=!0;d=this.s+1;a===this.ba?(this.j=b,this.s=d,a=this):a=new Pf(this.ba,this.gb,d,b);return a}return this.j[b+1]===e?this:Af(this,a,b+1,e)}return(new Df(a,1<<(this.gb>>>b&31),[null,this,null,null])).Ya(a,b,c,d,e,f)};
g.Xa=function(a,b,c,d,e){return b===this.gb?(a=Of(this.j,this.s,c),-1===a?(a=2*this.s,b=Array(a+2),pd(this.j,0,b,0,a),b[a]=c,b[a+1]=d,e.val=!0,new Pf(null,this.gb,this.s+1,b)):O.h(this.j[a+1],d)?this:new Pf(null,this.gb,this.s,yf(this.j,a+1,d))):(new Df(null,1<<(this.gb>>>a&31),[null,this])).Xa(a,b,c,d,e)};g.Kb=function(a,b,c,d){a=Of(this.j,this.s,c);return 0>a?d:sf(c,this.j[a])?new Me(this.j[a],this.j[a+1]):d};
g.Mb=function(a,b,c){a=Of(this.j,this.s,c);return-1===a?this:1===this.s?null:new Pf(null,this.gb,this.s-1,zf(this.j,Ed(a)))};g.Aa=function(){return new Cf(this.j)};function Jf(a){switch(arguments.length){case 6:return Kf(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 7:return If(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]);default:throw Error(["Invalid arity: ",B.g(arguments.length)].join(""));}}
function Kf(a,b,c,d,e,f){var h=pc(b);if(h===d)return new Pf(null,h,2,[b,c,e,f]);var k=new xf;return Gf.Xa(a,h,b,c,k).Xa(a,d,e,f,k)}function If(a,b,c,d,e,f,h){var k=pc(c);if(k===e)return new Pf(null,k,2,[c,d,f,h]);var l=new xf;return Gf.Ya(a,b,k,c,d,l).Ya(a,b,e,f,h,l)}function Qf(a,b,c,d,e){this.meta=a;this.nodes=b;this.v=c;this.M=d;this.H=e;this.o=32374988;this.J=0}g=Qf.prototype;g.toString=function(){return gc(this)};g.equiv=function(a){return this.F(null,a)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Q(this,b,0)};a.h=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();g.ea=function(){return this.meta};g.sa=function(){if(null==this.M){var a=this.nodes,b=this.v+2;return Rf?Rf(a,b,null):Ff.call(null,a,b,null)}a=this.nodes;b=this.v;var c=N(this.M);return Rf?Rf(a,b,c):Ff.call(null,a,b,c)};
g.T=function(){var a=this.H;return null!=a?a:this.H=a=Bc(this)};g.F=function(a,b){return Tc(this,b)};g.ha=function(){return wc};g.oa=function(a,b){return wd(b,this)};g.pa=function(a,b,c){return xd(b,c,this)};g.ta=function(){return null==this.M?new Me(this.nodes[this.v],this.nodes[this.v+1]):M(this.M)};
g.ua=function(){var a=this,b=null==a.M?function(){var c=a.nodes,d=a.v+2;return Rf?Rf(c,d,null):Ff.call(null,c,d,null)}():function(){var c=a.nodes,d=a.v,e=N(a.M);return Rf?Rf(c,d,e):Ff.call(null,c,d,e)}();return null!=b?b:wc};g.aa=function(){return this};g.ga=function(a,b){return b===this.meta?this:new Qf(b,this.nodes,this.v,this.M,this.H)};g.ia=function(a,b){return Uc(b,this)};Qf.prototype[Ma]=function(){return yc(this)};
function Ff(a){switch(arguments.length){case 1:return Ef(arguments[0]);case 3:return Rf(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length)].join(""));}}function Ef(a){return Rf(a,0,null)}function Rf(a,b,c){if(null==c)for(c=a.length;;)if(b<c){if(null!=a[b])return new Qf(null,a,b,null,null);var d=a[b+1];if(w(d)&&(d=d.Lb(),w(d)))return new Qf(null,a,b+2,d,null);b+=2}else return null;else return new Qf(null,a,b,c,null)}
function Sf(a,b,c,d,e){this.meta=a;this.nodes=b;this.v=c;this.M=d;this.H=e;this.o=32374988;this.J=0}g=Sf.prototype;g.toString=function(){return gc(this)};g.equiv=function(a){return this.F(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Q(this,b,0)};a.h=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();g.ea=function(){return this.meta};g.sa=function(){var a=this.nodes,b=this.v,c=N(this.M);return Tf?Tf(a,b,c):Nf.call(null,a,b,c)};g.T=function(){var a=this.H;return null!=a?a:this.H=a=Bc(this)};
g.F=function(a,b){return Tc(this,b)};g.ha=function(){return wc};g.oa=function(a,b){return wd(b,this)};g.pa=function(a,b,c){return xd(b,c,this)};g.ta=function(){return M(this.M)};g.ua=function(){var a=this.nodes;var b=this.v,c=N(this.M);a=Tf?Tf(a,b,c):Nf.call(null,a,b,c);return null!=a?a:wc};g.aa=function(){return this};g.ga=function(a,b){return b===this.meta?this:new Sf(b,this.nodes,this.v,this.M,this.H)};g.ia=function(a,b){return Uc(b,this)};Sf.prototype[Ma]=function(){return yc(this)};
function Nf(a){switch(arguments.length){case 1:return Mf(arguments[0]);case 3:return Tf(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length)].join(""));}}function Mf(a){return Tf(a,0,null)}function Tf(a,b,c){if(null==c)for(c=a.length;;)if(b<c){var d=a[b];if(w(d)&&(d=d.Lb(),w(d)))return new Sf(null,a,b+1,d,null);b+=1}else return null;else return new Sf(null,a,b,c,null)}function Uf(a,b){this.wa=a;this.Qc=b;this.seen=!1}
Uf.prototype.hasNext=function(){return!this.seen||this.Qc.hasNext()};Uf.prototype.next=function(){if(this.seen)return this.Qc.next();this.seen=!0;return new Me(null,this.wa)};Uf.prototype.remove=function(){return Error("Unsupported operation")};function Vf(a,b,c,d,e,f){this.meta=a;this.s=b;this.root=c;this.va=d;this.wa=e;this.H=f;this.o=16123663;this.J=139268}g=Vf.prototype;g.lb=function(a,b){return null==b?this.va?new Me(null,this.wa):null:null==this.root?null:this.root.Kb(0,pc(b),b,null)};
g.toString=function(){return gc(this)};g.equiv=function(a){return this.F(null,a)};g.keys=function(){return yc(mf.g?mf.g(this):mf.call(null,this))};g.entries=function(){return new gf(J(J(this)))};g.values=function(){return yc(nf.g?nf.g(this):nf.call(null,this))};g.has=function(a){return ud(this,a)};g.get=function(a,b){return this.O(null,a,b)};
g.forEach=function(a){for(var b=J(this),c=null,d=0,e=0;;)if(e<d){var f=c.N(null,e),h=T(f,0,null);f=T(f,1,null);a.h?a.h(f,h):a.call(null,f,h);e+=1}else if(b=J(b))od(b)?(c=Xb(b),b=Yb(b),h=c,d=R(c),c=h):(c=M(b),h=T(c,0,null),f=T(c,1,null),a.h?a.h(f,h):a.call(null,f,h),b=N(b),c=null,d=0),e=0;else return null};g.na=function(a,b){return this.O(null,b,null)};g.O=function(a,b,c){return null==b?this.va?this.wa:c:null==this.root?c:this.root.ob(0,pc(b),b,c)};
g.mb=function(a,b,c){a=this.va?b.l?b.l(c,null,this.wa):b.call(null,c,null,this.wa):c;Hc(a)?b=G(a):null!=this.root?(b=this.root.Nb(b,a),b=Hc(b)?Ic.g?Ic.g(b):Ic.call(null,b):b):b=a;return b};g.Aa=function(){var a=this.root?ec(this.root):new fe(ee);return this.va?new Uf(this.wa,a):a};g.ea=function(){return this.meta};g.Y=function(){return this.s};g.T=function(){var a=this.H;return null!=a?a:this.H=a=Dc(this)};g.F=function(a,b){return ff(this,b)};
g.kb=function(){return new Wf(this.root,this.s,this.va,this.wa)};g.ha=function(){return yb(qf,this.meta)};g.Tb=function(a,b){if(null==b)return this.va?new Vf(this.meta,this.s-1,this.root,!1,null,null):this;if(null==this.root)return this;a=this.root.Mb(0,pc(b),b);return a===this.root?this:new Vf(this.meta,this.s-1,a,this.va,this.wa,null)};
g.Ra=function(a,b,c){if(null==b)return this.va&&c===this.wa?this:new Vf(this.meta,this.va?this.s:this.s+1,this.root,!0,c,null);a=new xf;b=(null==this.root?Gf:this.root).Xa(0,pc(b),b,c,a);return b===this.root?this:new Vf(this.meta,a.val?this.s+1:this.s,b,this.va,this.wa,null)};g.cb=function(a,b){return null==b?this.va:null==this.root?!1:this.root.ob(0,pc(b),b,qd)!==qd};g.aa=function(){if(0<this.s){var a=null!=this.root?this.root.Lb():null;return this.va?Uc(new Me(null,this.wa),a):a}return null};
g.ga=function(a,b){return b===this.meta?this:new Vf(b,this.s,this.root,this.va,this.wa,this.H)};g.ia=function(a,b){if(nd(b))return this.Ra(null,D(b,0),D(b,1));a=this;for(b=J(b);;){if(null==b)return a;var c=M(b);if(nd(c))a=jb(a,D(c,0),D(c,1)),b=N(b);else throw Error("conj on a map takes map entries or seqables of map entries");}};
g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Na(b)))};g.g=function(a){return this.na(null,a)};g.h=function(a,b){return this.O(null,a,b)};var qf=new Vf(null,0,null,!1,null,Ec);Vf.prototype[Ma]=function(){return yc(this)};
function Wf(a,b,c,d){this.ba={};this.root=a;this.count=b;this.va=c;this.wa=d;this.o=259;this.J=56}function Xf(a,b,c){if(a.ba){if(null==b)a.wa!==c&&(a.wa=c),a.va||(a.count+=1,a.va=!0);else{var d=new xf;b=(null==a.root?Gf:a.root).Ya(a.ba,0,pc(b),b,c,d);b!==a.root&&(a.root=b);d.val&&(a.count+=1)}return a}throw Error("assoc! after persistent!");}g=Wf.prototype;g.Y=function(){if(this.ba)return this.count;throw Error("count after persistent!");};
g.na=function(a,b){return null==b?this.va?this.wa:null:null==this.root?null:this.root.ob(0,pc(b),b)};g.O=function(a,b,c){return null==b?this.va?this.wa:c:null==this.root?c:this.root.ob(0,pc(b),b,c)};
g.eb=function(a,b){a:if(this.ba)if(Ue(b))a=Xf(this,Ve.g?Ve.g(b):Ve.call(null,b),We.g?We.g(b):We.call(null,b));else if(nd(b))a=Xf(this,b.g?b.g(0):b.call(null,0),b.g?b.g(1):b.call(null,1));else for(a=J(b),b=this;;){var c=M(a);if(w(c))a=N(a),b=Xf(b,Ve.g?Ve.g(c):Ve.call(null,c),We.g?We.g(c):We.call(null,c));else{a=b;break a}}else throw Error("conj! after persistent");return a};
g.tb=function(){if(this.ba){this.ba=null;var a=new Vf(null,this.count,this.root,this.va,this.wa,null)}else throw Error("persistent! called twice");return a};g.bb=function(a,b,c){return Xf(this,b,c)};g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Na(b)))};
g.g=function(a){return this.na(null,a)};g.h=function(a,b){return this.O(null,a,b)};function Yf(a,b){this.R=a;this._meta=b;this.o=32374988;this.J=0}g=Yf.prototype;g.toString=function(){return gc(this)};g.equiv=function(a){return this.F(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Q(this,b,0)};a.h=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();g.ea=function(){return this._meta};g.sa=function(){var a=(null!=this.R?this.R.o&128||u===this.R.Fb||(this.R.o?0:x(db,this.R)):x(db,this.R))?this.R.sa():N(this.R);return null==a?null:new Yf(a,null)};g.T=function(){return Bc(this)};
g.F=function(a,b){return Tc(this,b)};g.ha=function(){return wc};g.oa=function(a,b){return wd(b,this)};g.pa=function(a,b,c){return xd(b,c,this)};g.ta=function(){return this.R.ta(null).key};g.ua=function(){var a=(null!=this.R?this.R.o&128||u===this.R.Fb||(this.R.o?0:x(db,this.R)):x(db,this.R))?this.R.sa():N(this.R);return null!=a?new Yf(a,null):wc};g.aa=function(){return this};g.ga=function(a,b){return b===this._meta?this:new Yf(this.R,b)};g.ia=function(a,b){return Uc(b,this)};Yf.prototype[Ma]=function(){return yc(this)};
function mf(a){return(a=J(a))?new Yf(a,null):null}function Ve(a){return nb(a)}function Zf(a,b){this.R=a;this._meta=b;this.o=32374988;this.J=0}g=Zf.prototype;g.toString=function(){return gc(this)};g.equiv=function(a){return this.F(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Q(this,b,0);case 2:return Q(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Q(this,b,0)};a.h=function(b,c){return Q(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return S(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return S(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return S(this,c,d)};return b}();g.ea=function(){return this._meta};g.sa=function(){var a=(null!=this.R?this.R.o&128||u===this.R.Fb||(this.R.o?0:x(db,this.R)):x(db,this.R))?this.R.sa():N(this.R);return null==a?null:new Zf(a,null)};g.T=function(){return Bc(this)};
g.F=function(a,b){return Tc(this,b)};g.ha=function(){return wc};g.oa=function(a,b){return wd(b,this)};g.pa=function(a,b,c){return xd(b,c,this)};g.ta=function(){return this.R.ta(null).val};g.ua=function(){var a=(null!=this.R?this.R.o&128||u===this.R.Fb||(this.R.o?0:x(db,this.R)):x(db,this.R))?this.R.sa():N(this.R);return null!=a?new Zf(a,null):wc};g.aa=function(){return this};g.ga=function(a,b){return b===this._meta?this:new Zf(this.R,b)};g.ia=function(a,b){return Uc(b,this)};Zf.prototype[Ma]=function(){return yc(this)};
function nf(a){return(a=J(a))?new Zf(a,null):null}function We(a){return ob(a)}var $f=function $f(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=0<c.length?new K(c.slice(0),0,null):null;return $f.G(c)};$f.G=function(a){return w(ke(a))?Ad(function(b,c){return Wc.h(w(b)?b:ee,c)},a):null};$f.U=0;$f.X=function(a){return this.G(J(a))};function ag(a){for(var b=ee,c=J(bg);;)if(c){var d=M(c),e=H.l(a,d,cg);b=O.h(e,cg)?b:U.l(b,d,e);c=N(c)}else return yb(b,fd(a))}
function dg(a){this.Ab=a}dg.prototype.hasNext=function(){return this.Ab.hasNext()};dg.prototype.next=function(){if(this.Ab.hasNext())return this.Ab.next().key;throw Error("No such element");};dg.prototype.remove=function(){return Error("Unsupported operation")};function eg(a,b,c){this.meta=a;this.hb=b;this.H=c;this.o=15077647;this.J=139268}g=eg.prototype;g.toString=function(){return gc(this)};g.equiv=function(a){return this.F(null,a)};g.keys=function(){return yc(J(this))};g.entries=function(){return new hf(J(J(this)))};
g.values=function(){return yc(J(this))};g.has=function(a){return ud(this,a)};g.forEach=function(a){for(var b=J(this),c=null,d=0,e=0;;)if(e<d){var f=c.N(null,e),h=T(f,0,null);f=T(f,1,null);a.h?a.h(f,h):a.call(null,f,h);e+=1}else if(b=J(b))od(b)?(c=Xb(b),b=Yb(b),h=c,d=R(c),c=h):(c=M(b),h=T(c,0,null),f=T(c,1,null),a.h?a.h(f,h):a.call(null,f,h),b=N(b),c=null,d=0),e=0;else return null};g.na=function(a,b){return this.O(null,b,null)};g.O=function(a,b,c){a=kb(this.hb,b);return w(a)?nb(a):c};g.Aa=function(){return new dg(ec(this.hb))};
g.ea=function(){return this.meta};g.Y=function(){return Va(this.hb)};g.T=function(){var a=this.H;return null!=a?a:this.H=a=Dc(this)};g.F=function(a,b){if(a=jd(b))if(a=R(this)===R(b))try{return Bd(function(c,d){return(c=ud(b,d))?c:new Gc},!0,this.hb)}catch(c){if(c instanceof Error)return!1;throw c;}else return a;else return a};g.kb=function(){return new fg(Rb(this.hb))};g.ha=function(){return yb(gg,this.meta)};g.Dc=function(a,b){return new eg(this.meta,mb(this.hb,b),null)};g.aa=function(){return mf(this.hb)};
g.ga=function(a,b){return b===this.meta?this:new eg(b,this.hb,this.H)};g.ia=function(a,b){return new eg(this.meta,U.l(this.hb,b,null),null)};g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Na(b)))};g.g=function(a){return this.na(null,a)};g.h=function(a,b){return this.O(null,a,b)};
var gg=new eg(null,ee,Ec);eg.prototype[Ma]=function(){return yc(this)};function fg(a){this.wb=a;this.J=136;this.o=259}g=fg.prototype;g.eb=function(a,b){this.wb=Ub(this.wb,b,null);return this};g.tb=function(){return new eg(null,Tb(this.wb),null)};g.Y=function(){return R(this.wb)};g.na=function(a,b){return this.O(null,b,null)};g.O=function(a,b,c){return fb(this.wb,b,qd)===qd?c:b};
g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Na(b)))};g.g=function(a){return fb(this.wb,a,qd)===qd?null:a};g.h=function(a,b){return fb(this.wb,a,qd)===qd?b:a};
function hg(a){if(jd(a))return ed(a,null);a=J(a);if(null==a)return gg;if(a instanceof K&&0===a.v){a=a.j;for(var b=a.length,c=Rb(gg),d=0;;)if(d<b)Sb(c,a[d]),d+=1;else break;return Tb(c)}for(c=Rb(gg);;)if(null!=a)b=N(a),c=Sb(c,F(a)),a=b;else return Tb(c)}function Kd(a){if(null!=a&&(a.J&4096||u===a.Bc))return a.Db(null);if("string"===typeof a)return a;throw Error(["Doesn't support name: ",B.g(a)].join(""));}
function ig(a,b){if("string"===typeof b)return a=a.exec(b),null!=a&&O.h(a[0],b)?1===a.length?a[0]:Te(a):null;throw new TypeError("re-matches must match against a string.");}
function jg(a,b,c,d,e,f,h){var k=Aa;Aa=null==Aa?null:Aa-1;try{if(null!=Aa&&0>Aa)return Lb(a,"#");Lb(a,c);if(0===Ha.g(f))J(h)&&Lb(a,function(){var r=kg.g(f);return w(r)?r:"..."}());else{if(J(h)){var l=M(h);b.l?b.l(l,a,f):b.call(null,l,a,f)}for(var m=N(h),n=Ha.g(f)-1;;)if(!m||null!=n&&0===n){J(m)&&0===n&&(Lb(a,d),Lb(a,function(){var r=kg.g(f);return w(r)?r:"..."}()));break}else{Lb(a,d);var p=M(m);c=a;h=f;b.l?b.l(p,c,h):b.call(null,p,c,h);var q=N(m);c=n-1;m=q;n=c}}return Lb(a,e)}finally{Aa=k}}
function lg(a,b){b=J(b);for(var c=null,d=0,e=0;;)if(e<d){var f=c.N(null,e);Lb(a,f);e+=1}else if(b=J(b))c=b,od(c)?(b=Xb(c),d=Yb(c),c=b,f=R(b),b=d,d=f):(f=M(c),Lb(a,f),b=N(c),c=null,d=0),e=0;else return null}function mg(a){if(null==ya)throw Error("No *print-fn* fn set for evaluation environment");ya.call(null,a)}var ng={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"};
function og(a){return['"',B.g(a.replace(RegExp('[\\\\"\b\f\n\r\t]',"g"),function(b){return ng[b]})),'"'].join("")}function pg(a,b){return(a=rd(H.h(a,Fa)))?(a=null!=b?b.o&131072||u===b.cd?!0:!1:!1)?null!=fd(b):a:a}
function qg(a,b,c){if(null==a)return Lb(b,"nil");if(pg(c,a)){Lb(b,"^");var d=fd(a);rg.l?rg.l(d,b,c):rg.call(null,d,b,c);Lb(b," ")}if(a.Gc)return a.fd(b);if(null!=a?a.o&2147483648||u===a.ka||(a.o?0:x(Mb,a)):x(Mb,a))return Nb(a,b,c);if(!0===a||!1===a)return Lb(b,B.g(a));if("number"===typeof a)return Lb(b,isNaN(a)?"##NaN":a===Number.POSITIVE_INFINITY?"##Inf":a===Number.NEGATIVE_INFINITY?"##-Inf":B.g(a));if(null!=a&&a.constructor===Object)return Lb(b,"#js "),d=re.h(function(f){return new Me(null!=ig(/[A-Za-z_\*\+\?!\-'][\w\*\+\?!\-']*/,
f)?Jd.g(f):f,a[f])},sa(a)),sg.K?sg.K(d,rg,b,c):sg.call(null,d,rg,b,c);if(Ja(a))return jg(b,rg,"#js ["," ","]",c,a);if("string"===typeof a)return w(Ea.g(c))?Lb(b,og(a)):Lb(b,a);if("function"===typeof a){var e=a.name;c=w(function(){var f=null==e;return f?f:/^[\s\xa0]*$/.test(e)}())?"Function":e;return lg(b,Vc(["#object[",c,w(!1)?[' "',B.g(a),'"'].join(""):"","]"]))}if(a instanceof Date)return c=function(f,h){for(f=B.g(f);;)if(f.length<h)f=["0",f].join("");else return f},lg(b,Vc(['#inst "',c(a.getUTCFullYear(),
4),"-",c(a.getUTCMonth()+1,2),"-",c(a.getUTCDate(),2),"T",c(a.getUTCHours(),2),":",c(a.getUTCMinutes(),2),":",c(a.getUTCSeconds(),2),".",c(a.getUTCMilliseconds(),3),"-",'00:00"']));if(a instanceof RegExp)return lg(b,Vc(['#"',a.source,'"']));if(Ra(a))return lg(b,Vc(["#object[",a.toString(),"]"]));if(w(function(){var f=null==a?null:a.constructor;return null==f?null:f.Zb}()))return lg(b,Vc(["#object[",a.constructor.Zb.replace(RegExp("/","g"),"."),"]"]));e=function(){var f=null==a?null:a.constructor;
return null==f?null:f.name}();c=w(function(){var f=null==e;return f?f:/^[\s\xa0]*$/.test(e)}())?"Object":e;return null==a.constructor?lg(b,Vc(["#object[",c,"]"])):lg(b,Vc(["#object[",c," ",B.g(a),"]"]))}function rg(a,b,c){var d=tg.g(c);return w(d)?(c=U.l(c,ug,qg),d.l?d.l(a,b,c):d.call(null,a,b,c)):qg(a,b,c)}
function vg(a,b){if(hd(a))b="";else{var c=B,d=c.g,e=new xa,f=new fc(e);rg(M(a),f,b);a=J(N(a));for(var h=null,k=0,l=0;;)if(l<k){var m=h.N(null,l);Lb(f," ");rg(m,f,b);l+=1}else if(a=J(a))h=a,od(h)?(a=Xb(h),k=Yb(h),h=a,m=R(a),a=k,k=m):(m=M(h),Lb(f," "),rg(m,f,b),a=N(h),h=null,k=0),l=0;else break;b=d.call(c,e)}return b}function wg(a){var b=U.l(Ca(),Ea,!1);mg(vg(a,b));w(za)?(a=Ca(),mg("\n"),a=(H.h(a,Da),null)):a=null;return a}function xg(a){return a instanceof rc?sc.h(null,Kd(a)):Jd.h(null,Kd(a))}
function yg(a){if(w(!1)){var b=J(a),c=J(b),d=M(c);N(c);T(d,0,null);T(d,1,null);c=null==a?null:null!=a&&(a.o&4||u===a.Wc)?a.ha(null):(null!=a?a.o&4||u===a.Wc||(a.o?0:x(Wa,a)):x(Wa,a))?Xa(a):null;for(a=null;;){d=a;b=J(b);a=M(b);var e=N(b),f=a;a=T(f,0,null);b=T(f,1,null);if(w(f))if(a instanceof I||a instanceof rc)if(w(d))if(O.h(d,Id(a)))c=U.l(c,xg(a),b),a=d,b=e;else return null;else if(d=Id(a),w(d))c=U.l(c,xg(a),b),a=d,b=e;else return null;else return null;else return new V(null,2,5,X,[d,c],null)}}else return null}
function zg(a,b,c,d,e){return jg(d,function(f,h,k){var l=nb(f);c.l?c.l(l,h,k):c.call(null,l,h,k);Lb(h," ");f=ob(f);return c.l?c.l(f,h,k):c.call(null,f,h,k)},[B.g(a),"{"].join(""),", ","}",e,J(b))}function sg(a,b,c,d){var e=ld(a)?yg(a):null,f=T(e,0,null);e=T(e,1,null);return w(f)?zg(["#:",B.g(f)].join(""),e,b,c,d):zg(null,a,b,c,d)}qe.prototype.ka=u;qe.prototype.W=function(a,b,c){Lb(b,"#object[cljs.core.Volatile ");rg(new v(null,1,[Ag,this.state],null),b,c);return Lb(b,"]")};K.prototype.ka=u;
K.prototype.W=function(a,b,c){return jg(b,rg,"("," ",")",c,this)};Ld.prototype.ka=u;Ld.prototype.W=function(a,b,c){return jg(b,rg,"("," ",")",c,this)};Me.prototype.ka=u;Me.prototype.W=function(a,b,c){return jg(b,rg,"["," ","]",c,this)};Qf.prototype.ka=u;Qf.prototype.W=function(a,b,c){return jg(b,rg,"("," ",")",c,this)};kf.prototype.ka=u;kf.prototype.W=function(a,b,c){return jg(b,rg,"("," ",")",c,this)};zc.prototype.ka=u;zc.prototype.W=function(a,b,c){return jg(b,rg,"("," ",")",c,this)};
Ye.prototype.ka=u;Ye.prototype.W=function(a,b,c){return jg(b,rg,"("," ",")",c,this)};Hd.prototype.ka=u;Hd.prototype.W=function(a,b,c){return jg(b,rg,"("," ",")",c,this)};Vf.prototype.ka=u;Vf.prototype.W=function(a,b,c){return sg(this,rg,b,c)};Sf.prototype.ka=u;Sf.prototype.W=function(a,b,c){return jg(b,rg,"("," ",")",c,this)};$e.prototype.ka=u;$e.prototype.W=function(a,b,c){return jg(b,rg,"["," ","]",c,this)};eg.prototype.ka=u;eg.prototype.W=function(a,b,c){return jg(b,rg,"#{"," ","}",c,this)};
Pd.prototype.ka=u;Pd.prototype.W=function(a,b,c){return jg(b,rg,"("," ",")",c,this)};me.prototype.ka=u;me.prototype.W=function(a,b,c){Lb(b,"#object[cljs.core.Atom ");rg(new v(null,1,[Ag,this.state],null),b,c);return Lb(b,"]")};Zf.prototype.ka=u;Zf.prototype.W=function(a,b,c){return jg(b,rg,"("," ",")",c,this)};V.prototype.ka=u;V.prototype.W=function(a,b,c){return jg(b,rg,"["," ","]",c,this)};Gd.prototype.ka=u;Gd.prototype.W=function(a,b){return Lb(b,"()")};v.prototype.ka=u;
v.prototype.W=function(a,b,c){return sg(this,rg,b,c)};Yf.prototype.ka=u;Yf.prototype.W=function(a,b,c){return jg(b,rg,"("," ",")",c,this)};Yc.prototype.ka=u;Yc.prototype.W=function(a,b,c){return jg(b,rg,"("," ",")",c,this)};var Bg=null;function Cg(a){null==Bg&&(Bg=ne(0));return sc.g([B.g(a),B.g(pe.h(Bg,Fc))].join(""))}function Dg(){}
function Eg(a){if(null!=a&&null!=a.Yc)a=a.Yc(a);else{var b=Eg[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=Eg._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw A("IEncodeJS.-clj-\x3ejs",a);}return a}function Fg(a,b){return(null!=a?u===a.Xc||(a.Fc?0:x(Dg,a)):x(Dg,a))?Eg(a):"string"===typeof a||"number"===typeof a||a instanceof I||a instanceof rc?b.g?b.g(a):b.call(null,a):vg(Vc([a]),Ca())}
var Gg=function Gg(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=1<c.length?new K(c.slice(1),0,null):null;return Gg.G(arguments[0],c)};
Gg.G=function(a,b){b=de(b);var c=H.l(b,Hg,Kd),d=function h(f){if(null==f)return null;if(null!=f?u===f.Xc||(f.Fc?0:x(Dg,f)):x(Dg,f))return Eg(f);if(f instanceof I)return c.g?c.g(f):c.call(null,f);if(f instanceof rc)return B.g(f);if(ld(f)){var k={};f=J(f);for(var l=null,m=0,n=0;;)if(n<m){var p=l.N(null,n),q=T(p,0,null);p=T(p,1,null);q=Fg(q,d);p=h(p);k[q]=p;n+=1}else if(f=J(f))od(f)?(m=Xb(f),f=Yb(f),l=m,m=R(m)):(m=M(f),l=T(m,0,null),m=T(m,1,null),l=Fg(l,d),m=h(m),k[l]=m,f=N(f),l=null,m=0),n=0;else break;
return k}if(id(f)){k=[];f=J(re.h(h,f));l=null;for(n=m=0;;)if(n<m)q=l.N(null,n),k.push(q),n+=1;else if(f=J(f))l=f,od(l)?(f=Xb(l),n=Yb(l),l=f,m=R(f),f=n):(f=M(l),k.push(f),f=N(l),l=null,m=0),n=0;else break;return k}return f};return d(a)};Gg.U=1;Gg.X=function(a){var b=M(a);a=N(a);return this.G(b,a)};var Ig=null;function Jg(){null==Ig&&(Ig=ne(new v(null,3,[Kg,ee,Lg,ee,Mg,ee],null)));return Ig}
function Ng(a,b,c){var d=O.h(b,c);if(d)return d;d=Mg.g(a);d=d.g?d.g(b):d.call(null,b);if(!(d=ud(d,c))&&(d=nd(c)))if(d=nd(b))if(d=R(c)===R(b)){d=!0;for(var e=0;;)if(d&&e!==R(c))d=Ng(a,b.g?b.g(e):b.call(null,e),c.g?c.g(e):c.call(null,e)),e+=1;else return d}else return d;else return d;else return d}function Og(a){var b=G(Jg());a=H.h(Kg.g(b),a);return J(a)?a:null}function Pg(a,b,c,d){pe.h(a,function(){return G(b)});pe.h(c,function(){return G(d)})}
var Qg=function Qg(a,b,c){var e=function(){var f=G(c);return f.g?f.g(a):f.call(null,a)}();e=w(w(e)?e.g?e.g(b):e.call(null,b):e)?!0:null;if(w(e))return e;e=function(){for(var f=Og(b);;)if(0<R(f)){var h=M(f);Qg.l?Qg.l(a,h,c):Qg.call(null,a,h,c);f=vc(f)}else return null}();if(w(e))return e;e=function(){for(var f=Og(a);;)if(0<R(f)){var h=M(f);Qg.l?Qg.l(h,b,c):Qg.call(null,h,b,c);f=vc(f)}else return null}();return w(e)?e:!1};function Rg(a,b,c,d){c=Qg(a,b,c);return w(c)?c:Ng(d,a,b)}
var Sg=function Sg(a,b,c,d,e,f,h,k){var m=Pa(function(p,q){var r=T(q,0,null);T(q,1,null);if(Ng(G(c),b,r)){p=null==p||Rg(r,M(p),e,G(c))?q:p;if(!Rg(M(p),r,e,G(c)))throw Error(["Multiple methods in multimethod '",B.g(a),"' match dispatch value: ",B.g(b)," -\x3e ",B.g(r)," and ",B.g(M(p)),", and neither is preferred"].join(""));return p}return p},null,G(d)),n=function(){var p;if(p=null==m)p=G(d),p=p.g?p.g(k):p.call(null,k);return w(p)?new V(null,2,5,X,[k,p],null):m}();if(w(n)){if(O.h(G(h),G(c)))return pe.K(f,
U,b,M(N(n))),M(N(n));Pg(f,d,h,c);return Sg.za?Sg.za(a,b,c,d,e,f,h,k):Sg.call(null,a,b,c,d,e,f,h,k)}return null};function Tg(a,b){throw Error(["No method in multimethod '",B.g(a),"' for dispatch value: ",B.g(b)].join(""));}function Ug(){var a=sc.h("plotly-pyclj.server","set-default-args"),b=Vg,c=Wg,d=Xg,e=Yg,f=Zg,h=$g,k=ah;this.name=a;this.C=h;this.ld=k;this.hierarchy=b;this.cc=c;this.pd=d;this.bc=e;this.Rb=f;this.o=4194305;this.J=4352}g=Ug.prototype;
g.call=function(a){switch(arguments.length-1){case 0:return this.I();case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);case 3:return this.l(arguments[1],arguments[2],arguments[3]);case 4:return this.K(arguments[1],arguments[2],arguments[3],arguments[4]);case 5:return this.P(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);case 6:return this.xa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]);case 7:return this.Pa(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7]);case 8:return this.za(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8]);case 9:return this.Qa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9]);case 10:return this.Ea(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10]);
case 11:return this.Fa(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11]);case 12:return this.Ga(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12]);case 13:return this.Ha(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],
arguments[11],arguments[12],arguments[13]);case 14:return this.Ia(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14]);case 15:return this.Ja(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15]);case 16:return this.Ka(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16]);case 17:return this.La(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17]);case 18:return this.Ma(arguments[1],arguments[2],
arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18]);case 19:return this.Na(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19]);case 20:return this.Oa(arguments[1],
arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19],arguments[20]);case 21:return this.lc(arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],
arguments[18],arguments[19],arguments[20],arguments[21]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Na(b)))};g.I=function(){var a=this.C.I?this.C.I():this.C.call(null),b=bh(this,a);w(b)||Tg(this.name,a);return b.I?b.I():b.call(null)};g.g=function(a){var b=this.C.g?this.C.g(a):this.C.call(null,a),c=bh(this,b);w(c)||Tg(this.name,b);return c.g?c.g(a):c.call(null,a)};
g.h=function(a,b){var c=this.C.h?this.C.h(a,b):this.C.call(null,a,b),d=bh(this,c);w(d)||Tg(this.name,c);return d.h?d.h(a,b):d.call(null,a,b)};g.l=function(a,b,c){var d=this.C.l?this.C.l(a,b,c):this.C.call(null,a,b,c),e=bh(this,d);w(e)||Tg(this.name,d);return e.l?e.l(a,b,c):e.call(null,a,b,c)};g.K=function(a,b,c,d){var e=this.C.K?this.C.K(a,b,c,d):this.C.call(null,a,b,c,d),f=bh(this,e);w(f)||Tg(this.name,e);return f.K?f.K(a,b,c,d):f.call(null,a,b,c,d)};
g.P=function(a,b,c,d,e){var f=this.C.P?this.C.P(a,b,c,d,e):this.C.call(null,a,b,c,d,e),h=bh(this,f);w(h)||Tg(this.name,f);return h.P?h.P(a,b,c,d,e):h.call(null,a,b,c,d,e)};g.xa=function(a,b,c,d,e,f){var h=this.C.xa?this.C.xa(a,b,c,d,e,f):this.C.call(null,a,b,c,d,e,f),k=bh(this,h);w(k)||Tg(this.name,h);return k.xa?k.xa(a,b,c,d,e,f):k.call(null,a,b,c,d,e,f)};
g.Pa=function(a,b,c,d,e,f,h){var k=this.C.Pa?this.C.Pa(a,b,c,d,e,f,h):this.C.call(null,a,b,c,d,e,f,h),l=bh(this,k);w(l)||Tg(this.name,k);return l.Pa?l.Pa(a,b,c,d,e,f,h):l.call(null,a,b,c,d,e,f,h)};g.za=function(a,b,c,d,e,f,h,k){var l=this.C.za?this.C.za(a,b,c,d,e,f,h,k):this.C.call(null,a,b,c,d,e,f,h,k),m=bh(this,l);w(m)||Tg(this.name,l);return m.za?m.za(a,b,c,d,e,f,h,k):m.call(null,a,b,c,d,e,f,h,k)};
g.Qa=function(a,b,c,d,e,f,h,k,l){var m=this.C.Qa?this.C.Qa(a,b,c,d,e,f,h,k,l):this.C.call(null,a,b,c,d,e,f,h,k,l),n=bh(this,m);w(n)||Tg(this.name,m);return n.Qa?n.Qa(a,b,c,d,e,f,h,k,l):n.call(null,a,b,c,d,e,f,h,k,l)};g.Ea=function(a,b,c,d,e,f,h,k,l,m){var n=this.C.Ea?this.C.Ea(a,b,c,d,e,f,h,k,l,m):this.C.call(null,a,b,c,d,e,f,h,k,l,m),p=bh(this,n);w(p)||Tg(this.name,n);return p.Ea?p.Ea(a,b,c,d,e,f,h,k,l,m):p.call(null,a,b,c,d,e,f,h,k,l,m)};
g.Fa=function(a,b,c,d,e,f,h,k,l,m,n){var p=this.C.Fa?this.C.Fa(a,b,c,d,e,f,h,k,l,m,n):this.C.call(null,a,b,c,d,e,f,h,k,l,m,n),q=bh(this,p);w(q)||Tg(this.name,p);return q.Fa?q.Fa(a,b,c,d,e,f,h,k,l,m,n):q.call(null,a,b,c,d,e,f,h,k,l,m,n)};g.Ga=function(a,b,c,d,e,f,h,k,l,m,n,p){var q=this.C.Ga?this.C.Ga(a,b,c,d,e,f,h,k,l,m,n,p):this.C.call(null,a,b,c,d,e,f,h,k,l,m,n,p),r=bh(this,q);w(r)||Tg(this.name,q);return r.Ga?r.Ga(a,b,c,d,e,f,h,k,l,m,n,p):r.call(null,a,b,c,d,e,f,h,k,l,m,n,p)};
g.Ha=function(a,b,c,d,e,f,h,k,l,m,n,p,q){var r=this.C.Ha?this.C.Ha(a,b,c,d,e,f,h,k,l,m,n,p,q):this.C.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q),y=bh(this,r);w(y)||Tg(this.name,r);return y.Ha?y.Ha(a,b,c,d,e,f,h,k,l,m,n,p,q):y.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q)};
g.Ia=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r){var y=this.C.Ia?this.C.Ia(a,b,c,d,e,f,h,k,l,m,n,p,q,r):this.C.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r),z=bh(this,y);w(z)||Tg(this.name,y);return z.Ia?z.Ia(a,b,c,d,e,f,h,k,l,m,n,p,q,r):z.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r)};
g.Ja=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,y){var z=this.C.Ja?this.C.Ja(a,b,c,d,e,f,h,k,l,m,n,p,q,r,y):this.C.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,y),C=bh(this,z);w(C)||Tg(this.name,z);return C.Ja?C.Ja(a,b,c,d,e,f,h,k,l,m,n,p,q,r,y):C.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,y)};
g.Ka=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,y,z){var C=this.C.Ka?this.C.Ka(a,b,c,d,e,f,h,k,l,m,n,p,q,r,y,z):this.C.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,y,z),E=bh(this,C);w(E)||Tg(this.name,C);return E.Ka?E.Ka(a,b,c,d,e,f,h,k,l,m,n,p,q,r,y,z):E.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,y,z)};
g.La=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,y,z,C){var E=this.C.La?this.C.La(a,b,c,d,e,f,h,k,l,m,n,p,q,r,y,z,C):this.C.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,y,z,C),P=bh(this,E);w(P)||Tg(this.name,E);return P.La?P.La(a,b,c,d,e,f,h,k,l,m,n,p,q,r,y,z,C):P.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,y,z,C)};
g.Ma=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,y,z,C,E){var P=this.C.Ma?this.C.Ma(a,b,c,d,e,f,h,k,l,m,n,p,q,r,y,z,C,E):this.C.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,y,z,C,E),W=bh(this,P);w(W)||Tg(this.name,P);return W.Ma?W.Ma(a,b,c,d,e,f,h,k,l,m,n,p,q,r,y,z,C,E):W.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,y,z,C,E)};
g.Na=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,y,z,C,E,P){var W=this.C.Na?this.C.Na(a,b,c,d,e,f,h,k,l,m,n,p,q,r,y,z,C,E,P):this.C.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,y,z,C,E,P),ja=bh(this,W);w(ja)||Tg(this.name,W);return ja.Na?ja.Na(a,b,c,d,e,f,h,k,l,m,n,p,q,r,y,z,C,E,P):ja.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,y,z,C,E,P)};
g.Oa=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,y,z,C,E,P,W){var ja=this.C.Oa?this.C.Oa(a,b,c,d,e,f,h,k,l,m,n,p,q,r,y,z,C,E,P,W):this.C.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,y,z,C,E,P,W),Ba=bh(this,ja);w(Ba)||Tg(this.name,ja);return Ba.Oa?Ba.Oa(a,b,c,d,e,f,h,k,l,m,n,p,q,r,y,z,C,E,P,W):Ba.call(null,a,b,c,d,e,f,h,k,l,m,n,p,q,r,y,z,C,E,P,W)};
g.lc=function(a,b,c,d,e,f,h,k,l,m,n,p,q,r,y,z,C,E,P,W,ja){var Ba=ce(this.C,a,b,c,d,Vc([e,f,h,k,l,m,n,p,q,r,y,z,C,E,P,W,ja])),vd=bh(this,Ba);w(vd)||Tg(this.name,Ba);return ce(vd,a,b,c,d,Vc([e,f,h,k,l,m,n,p,q,r,y,z,C,E,P,W,ja]))};function ch(a,b){var c=dh;pe.K(c.cc,U,a,b);Pg(c.bc,c.cc,c.Rb,c.hierarchy)}function bh(a,b){O.h(G(a.Rb),G(a.hierarchy))||Pg(a.bc,a.cc,a.Rb,a.hierarchy);var c=G(a.bc);c=c.g?c.g(b):c.call(null,b);return w(c)?c:Sg(a.name,b,a.hierarchy,a.cc,a.pd,a.bc,a.Rb,a.ld)}g.Db=function(){return Zb(this.name)};
g.Eb=function(){return $b(this.name)};g.T=function(){return ba(this)};"undefined"!==typeof console&&Ia();Ia();var Fa=new I(null,"meta","meta",1499536964),eh=new I(null,"flex","flex",-1425124628),Ha=new I(null,"print-length","print-length",1931866356),fh=new I(null,"space-between","space-between",1908176695),gh=new I(null,"toImageButtonOptions","toImageButtonOptions",-347346271),hh=new I(null,"transform","transform",1381301764),ih=new I(null,"on-write","on-write",31519475),Mg=new I(null,"ancestors","ancestors",-776045424),jh=new I(null,"componentWillUnmount","componentWillUnmount",1573788814),kh=new I(null,
"constructor","constructor",-1953928811),Ga=new I(null,"dup","dup",556298533),lh=new I(null,"no-cache","no-cache",1588056370),mh=new I(null,"className","className",-1983287057),nh=new I(null,"style","style",-496642736),oh=new I(null,"msg-format","msg-format",2026575331),ph=new I(null,"auto-run","auto-run",1958400437),qh=new I(null,"margin-left","margin-left",2015598377),rh=new I(null,"getDerivedStateFromProps","getDerivedStateFromProps",-991834739),Ea=new I(null,"readably","readably",1129599760),
sh=new I(null,"parse-tag","parse-tag",1427313738),th=new I(null,"preferBuffers","preferBuffers",1843176451),uh=new I(null,"prefer-strings","prefer-strings",1254507185),vh=new I(null,"width","width",-384071477),wh=new I(null,"getInitialState","getInitialState",1541760916),xh=new I(null,"data","data",-232669377),yh=new I(null,"displayModeBar","displayModeBar",-1187531817),zh=new I(null,"hierarchy","hierarchy",-1053470341),Ah=new I(null,"shouldComponentUpdate","shouldComponentUpdate",1795750960),Bh=
new I(null,"childContextTypes","childContextTypes",578717991),Ch=new I(null,"margin-right","margin-right",809689658),Dh=new I(null,"\x3e","\x3e",-555517146),ug=new I(null,"fallback-impl","fallback-impl",-1501286995),Eh=new I(null,"name","name",1843675177),Fh=new I(null,"arrayBuilder","arrayBuilder",1446317421),Gh=new I(null,"component-will-unmount","component-will-unmount",-2058314698),$g=new I(null,"format","format",-1306924766),Hh=new I(null,"key-\x3eprop","key-\x3eprop",-1028452531),Ih=new I(null,
"class","class",-2030961996),Jh=new I(null,"label","label",1718410804),Kh=new I(null,"port","port",1534937262),Lh=new I(null,"component-did-update","component-did-update",-1468549173),Hg=new I(null,"keyword-fn","keyword-fn",-64566675),ah=new I(null,"default","default",-1987822328),Mh=new I(null,"reagentRender","reagentRender",-358306383),Nh=new I(null,"reagent-render","reagent-render",-985383853),Oh=new I(null,"keywordize-keys","keywordize-keys",1310784252),Ph=new I(null,"transit","transit",359458387),
Qh=new I(null,"mapBuilder","mapBuilder",-278083754),Rh=new I(null,"contextTypes","contextTypes",-2023853910),Sh=new I(null,"green","green",-945526839),Th=new I(null,"preferStrings","preferStrings",-1532249482),Uh=new I(null,"render","render",-1408033454),Vh=new I(null,"display","display",242065432),Wh=new I(null,"title","title",636505583),Xh=new I(null,"on-dispose","on-dispose",2105306360),Yh=new I(null,"displayName","displayName",-809144601),Zh=new I(null,"color","color",1011675173),Lg=new I(null,
"descendants","descendants",1824886031),$h=new I(null,"path","path",-188191168),ai=new I(null,"justify-content","justify-content",-1990475787),bi=new I(null,"prefer-buffers","prefer-buffers",377042081),cg=new I("cljs.core","not-found","cljs.core/not-found",-1572889185),ci=new I(null,"inline","inline",1399884222),di=new I(null,"margin","margin",-995903681),Ag=new I(null,"val","val",128701612),ei=new I(null,"on-change","on-change",-732046149),fi=new I(null,"getDerivedStateFromError","getDerivedStateFromError",
166658477),gi=new I(null,"validator","validator",-1966190681),hi=new I(null,"callback","callback",-705136228),ii=new I(null,"handlers","handlers",79528781),ji=new I(null,"array-builder","array-builder",1275998041),ki=new I(null,"compiler","compiler",-267926731),li=new I(null,"json","json",1279968570),Da=new I(null,"flush-on-newline","flush-on-newline",-151457939),mi=new I(null,"autosize","autosize",-724145344),ni=new I(null,"on-key-press","on-key-press",-399563677),oi=new I(null,"form","form",-1624062471),
pi=new I(null,"height","height",1025178622),qi=new I(null,"on-click","on-click",1632826543),ri=new I(null,"cljsLegacyRender","cljsLegacyRender",-1527295613),si=new I(null,"align-items","align-items",-267946462),ti=new I(null,"display-name","display-name",694513143),ui=new I(null,"function-components","function-components",1492814963),vi=new I(null,"padding","padding",1660304693),wi=new I(null,"prop-\x3ekey","prop-\x3ekey",-1297715246),xi=new I(null,"for","for",-1323786319),yi=new I(null,"config",
"config",994861415),zi=new I(null,"red","red",-969428204),Kg=new I(null,"parents","parents",-2027538891),Ai=new I(null,"div","div",1057191632),Bi=new I(null,"center","center",-748944368),Ci=new I(null,"value","value",305978217),Di=new I(null,"scale","scale",-230427353),Ei=new I(null,"input","input",556931961),Fi=new I(null,"on-blur","on-blur",814300747),Gi=new I(null,"editable","editable",1930280326),Hi=new I(null,"\x3c\x3e","\x3c\x3e",1280186386),Ii=new I(null,"numeric","numeric",-1495594714),kg=
new I(null,"more-marker","more-marker",-14717935),Ji=new I(null,"id","id",-1388402092),Ki=new I(null,"button","button",1456579943),Li=new I(null,"contextType","contextType",1033066077),Mi=new I(null,"key","key",-1516042587),Ni=new I(null,"map-builder","map-builder",-1843343288),Oi=new I(null,"useResizeHandler","useResizeHandler",-1748859262),Pi=new I(null,"type","type",1174270348),Qi=new I(null,"displaylogo","displaylogo",1531477828),tg=new I(null,"alt-impl","alt-impl",670969595),Ri=new I(null,"layout",
"layout",-2120940921),Si=new I(null,"on-set","on-set",-140953470);var Ti={},Ui={},Vi=[];function Wi(a,b){var c=Ui[a];if(void 0!==c)return c;try{Vi.push(a);var d=Ti[a],e=shadow$provide[a];if(void 0===d){if(void 0===e)throw"Module not provided: "+a;d={exports:{}};Ti[a]=d}if(e){delete shadow$provide[a];try{e.call(d,aa,Wi,d,d.exports)}catch(h){throw console.warn("shadow-cljs - failed to load",a),h;}if(b){var f=b.globals;if(f)for(a=0;a<f.length;a++)window[f[a]]=d.exports}}}finally{Vi.pop()}return d.exports}Wi.cache={};Wi.resolve=function(a){return a};
Wi.exportCopy=function(a,b){let c={};a=a.exports;for(let d in b)"default"==d||d in a||d in c||(c[d]={enumerable:!0,get:function(){return b[d]}});Object.defineProperties(a,c)};Wi.esmDefault=function(a){return a&&a.__esModule?a:{"default":a}};var Xi=Wi(2,{});var Yi=Wi(15,{});function Zi(a,b,c){var d=R(a);if(c>=d)return-1;!(0<c)&&0>c&&(c+=d,c=0>c?0:c);for(;;)if(c<d){if(O.h(Qc(a,c),b))return c;c+=1}else return-1}function $i(a,b,c){var d=R(a);if(0===d)return-1;0<c?(--d,c=d<c?d:c):c=0>c?d+c:c;for(;;)if(0<=c){if(O.h(Qc(a,c),b))return c;--c}else return-1}function aj(a,b){if(kd(b))if(Oc(a)&&Oc(b)&&R(a)!==R(b))a=!1;else a:for(a=J(a),b=J(b);;){if(null==a){a=null==b;break a}if(null!=b&&O.h(M(a),M(b)))a=N(a),b=N(b);else{a=!1;break a}}else a=null;return rd(a)}
function bj(a,b){var c=a.Y(null);if(0===c)return b.I?b.I():b.call(null);for(var d=a.N(null,0),e=1;;)if(e<c){var f=a.N(null,e);d=b.h?b.h(d,f):b.call(null,d,f);if(Hc(d))return G(d);e+=1}else return d}function cj(a,b,c){var d=a.Y(null),e=c;for(c=0;;)if(c<d){var f=a.N(null,c);e=b.h?b.h(e,f):b.call(null,e,f);if(Hc(e))return G(e);c+=1}else return e};var dj={};function ej(a){return"number"===typeof a||"string"===typeof a||!0===a||!1===a||null==a}function fj(a,b,c,d){var e=null!=d?d.g?d.g(a):d.call(null,a):null;return null==e?ej(a)?a:null!=a&&a.constructor===Object?new gj(null,a,b,c,d,!0,null,null,null):Ja(a)?new hj(null,b,c,d,a,null):a:e}function ij(a){return ej(a)?a:a instanceof gj?a.obj:a instanceof hj?a.j:a}var jj=ee;
function kj(a,b,c,d,e){var f=new qe(Rb(jj));ra(a,function(h,k){var l=f.Ca(null);k=b.g?b.g(k):b.call(null,k);h=w(e)?fj(h,b,c,d):h;l=Ub(l,k,h);return f.state=l});return Tb(G(f))}function lj(a){a:for(var b=a.length,c=Na(a),d=0;;)if(d<b){var e=d;var f=a[d];f=mj?mj(f):nj.call(null,f);c[e]=f;d+=1}else break a;return Te(c)}function oj(a,b,c,d,e,f,h){h=f[h];f=b.g?b.g(h):b.call(null,h);a=a[h];b=e?fj(a,b,c,d):a;return new Me(f,b)}function pj(a,b){return a instanceof I&&b===Jd||"string"===typeof a&&b===Cd}
function qj(a,b){return ej(a)||!(ld(a)&&!(a instanceof gj)||nd(a)&&!(a instanceof hj))&&Ka(w(b)?(null!=a?a.constructor===Object:!1)||Ja(a):b)}function rj(a,b,c,d,e,f){this.qa=!0;this.obj=a;this.D=b;this.A=c;this.transform=d;this.V=e;this.Va=f;this.o=259;this.J=56}g=rj.prototype;g.na=function(a,b){if(this.qa)return a=this.obj[this.A.g?this.A.g(b):this.A.call(null,b)],this.V?fj(a,this.D,this.A,this.transform):a;throw Error("lookup after persistent!");};
g.O=function(a,b,c){if(this.qa)return a=ta(this.obj,this.A.g?this.A.g(b):this.A.call(null,b),c),this.V&&a!==c?fj(a,this.D,this.A,this.transform):a;throw Error("lookup after persistent!");};g.Y=function(){return null==this.Va?this.Va=R(sa(this.obj)):this.Va};
g.eb=function(a,b){a:if(w(this.qa))if(Ue(b))a=this.bb(null,nb(b),ob(b));else if(nd(b))a=this.bb(null,b.g?b.g(0):b.call(null,0),b.g?b.g(1):b.call(null,1));else for(a=J(b),b=this;;){var c=M(a);if(w(c))a=N(a),b=Ub(b,nb(c),ob(c));else{a=b;break a}}else throw Error("conj! after persistent!");return a};g.tb=function(){if(this.qa)return this.qa=!1,new gj(null,this.obj,this.D,this.A,this.transform,this.V,null,this.Va,null);throw Error("persistent! called twice");};
g.bb=function(a,b,c){if(this.qa){if(!pj(b,this.D)||!qj(c,this.V))return Ub(Rb(kj(this.obj,this.D,this.A,this.transform,this.V)),b,c);this.obj[this.A.g?this.A.g(b):this.A.call(null,b)]=this.V?ij(c):c;this.Va=null;return this}throw Error("assoc! after persistent!");};g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};
g.apply=function(a,b){return this.call.apply(this,[this].concat(Na(b)))};g.g=function(a){if(this.qa)return a=this.obj[this.A.g?this.A.g(a):this.A.call(null,a)],this.V?fj(a,this.D,this.A,this.transform):a;throw Error("lookup after persistent!");};g.h=function(a,b){if(this.qa)return a=ta(this.obj,this.A.g?this.A.g(a):this.A.call(null,a),b),this.V&&a!==b?fj(a,this.D,this.A,this.transform):a;throw Error("lookup after persistent!");};
function sj(a,b,c,d,e,f,h){this.obj=a;this.D=b;this.A=c;this.transform=d;this.V=e;this.j=f;this.v=0;this.s=h}sj.prototype.hasNext=function(){return this.v<this.s};sj.prototype.next=function(){var a=oj(this.obj,this.D,this.A,this.transform,this.V,this.j,this.v);this.v+=1;return a};function tj(a,b,c,d,e,f,h,k){this.obj=a;this.D=b;this.A=c;this.transform=d;this.V=e;this.j=f;this.v=h;this.meta=k;this.o=2179858686;this.J=8192}g=tj.prototype;g.toString=function(){return gc(this)};
g.equiv=function(a){return this.F(null,a)};g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Zi(this,b,0);case 2:return Zi(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Zi(this,b,0)};a.h=function(b,c){return Zi(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return $i(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return $i(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return $i(this,c,d)};return b}();g.N=function(a,b){a=b+this.v;if(0<=a&&a<this.j.length)return oj(this.obj,this.D,this.A,this.transform,this.V,this.j,a);throw Error("Index out of bounds");};
g.ma=function(a,b,c){a=b+this.v;return 0<=a&&a<this.j.length?oj(this.obj,this.D,this.A,this.transform,this.V,this.j,a):c};g.W=function(a,b,c){return jg(b,rg,"("," ",")",c,this)};g.ea=function(){return this.meta};g.sa=function(){return this.v+1<this.j.length?new tj(this.obj,this.D,this.A,this.transform,this.V,this.j,this.v+1,null):null};g.Y=function(){var a=this.j.length-this.v;return 0>a?0:a};g.T=function(){return Bc(this)};g.F=function(a,b){return aj(this,b)};g.ha=function(){return wc};
g.oa=function(a,b){return bj(this,b)};g.pa=function(a,b,c){return cj(this,b,c)};g.ta=function(){return oj(this.obj,this.D,this.A,this.transform,this.V,this.j,this.v)};g.ua=function(){return this.v+1<this.j.length?new tj(this.obj,this.D,this.A,this.transform,this.V,this.j,this.v+1,null):wc};g.aa=function(){return this};g.ga=function(a,b){return b===this.meta?this:new tj(this.obj,this.D,this.A,this.transform,this.V,this.j,this.v,b)};g.ia=function(a,b){return Uc(b,this)};
function gj(a,b,c,d,e,f,h,k,l){this.meta=a;this.obj=b;this.D=c;this.A=d;this.transform=e;this.V=f;this.Ua=h;this.Va=k;this.H=l;this.o=2164131599;this.J=139268}g=gj.prototype;g.lb=function(a,b){a=ta(this.obj,this.A.g?this.A.g(b):this.A.call(null,b),dj);return a===dj?null:new Me(b,this.V?fj(a,this.D,this.A,this.transform):a)};g.toString=function(){return gc(this)};g.equiv=function(a){return this.F(null,a)};g.keys=function(){return yc(mf(this))};g.entries=function(){return new gf(J(J(this)))};
g.values=function(){return yc(nf(this))};g.has=function(a){return ud(this,a)};g.get=function(a,b){return this.O(null,a,b)};g.forEach=function(a){for(var b=J(this),c=null,d=0,e=0;;)if(e<d){var f=c.N(null,e),h=T(f,0,null);f=T(f,1,null);a.h?a.h(f,h):a.call(null,f,h);e+=1}else if(b=J(b))od(b)?(c=Xb(b),b=Yb(b),h=c,d=R(c),c=h):(c=M(b),h=T(c,0,null),f=T(c,1,null),a.h?a.h(f,h):a.call(null,f,h),b=N(b),c=null,d=0),e=0;else return null};
g.na=function(a,b){a=this.obj[this.A.g?this.A.g(b):this.A.call(null,b)];return this.V?fj(a,this.D,this.A,this.transform):a};g.O=function(a,b,c){a=ta(this.obj,this.A.g?this.A.g(b):this.A.call(null,b),c);return this.V&&a!==c?fj(a,this.D,this.A,this.transform):a};
g.mb=function(a,b,c){var d=this;try{var e=new qe(c);ra(d.obj,function(f,h){var k=e.Ca(null);h=d.D.g?d.D.g(h):d.D.call(null,h);f=d.V?fj(f,d.D,d.A,d.transform):f;k=b.l?b.l(k,h,f):b.call(null,k,h,f);k=e.state=k;if(Hc(k))throw k;return null});return G(e)}catch(f){a=f;if(Hc(a))return G(a);throw a;}};g.W=function(a,b,c){return sg(this,rg,b,c)};g.Aa=function(){null==this.Ua&&(this.Ua=sa(this.obj));return new sj(this.obj,this.D,this.A,this.transform,this.V,this.Ua,this.Y(null))};g.ea=function(){return this.meta};
g.Y=function(){return null==this.Va?(null==this.Ua&&(this.Ua=sa(this.obj)),this.Va=this.Ua.length):this.Va};g.T=function(){var a=this.H;return null!=a?a:this.H=a=Dc(this)};g.F=function(a,b){return ff(this,b)};g.kb=function(){return new rj(ua(this.obj),this.D,this.A,this.transform,this.V,this.Va)};g.ha=function(){return new gj(this.meta,{},this.D,this.A,this.transform,this.V,[],0,null)};g.oa=function(a,b){return Ab(this.aa(null),b)};
g.pa=function(a,b,c){return this.mb(null,function(d,e,f){e=new Me(e,f);return b.h?b.h(d,e):b.call(null,d,e)},c)};g.Tb=function(a,b){a=this.meta;var c=ua(this.obj);delete c[this.A.g?this.A.g(b):this.A.call(null,b)];return new gj(a,c,this.D,this.A,this.transform,this.V,null,null,null)};
g.Ra=function(a,b,c){if(pj(b,this.D)&&qj(c,this.V)){a=this.meta;var d=ua(this.obj);d[this.A.g?this.A.g(b):this.A.call(null,b)]=this.V?ij(c):c;b=new gj(a,d,this.D,this.A,this.transform,this.V,null,null,null)}else b=jb(ed(kj(this.obj,this.D,this.A,this.transform,this.V),this.meta),b,c);return b};g.cb=function(a,b){return this.O(null,b,dj)!==dj};g.aa=function(){null==this.Ua&&(this.Ua=sa(this.obj));return 0<this.Ua.length?new tj(this.obj,this.D,this.A,this.transform,this.V,this.Ua,0,null):null};
g.ga=function(a,b){return b===this.meta?this:new gj(b,this.obj,this.D,this.A,this.transform,this.V,this.Ua,this.Va,this.H)};g.ia=function(a,b){a:if(nd(b))a=this.Ra(null,D(b,0),D(b,1));else for(a=this,b=J(b);;){if(null==b)break a;var c=M(b);if(nd(c))a=jb(a,D(c,0),D(c,1)),b=N(b);else throw Error("conj on a map takes map entries or seqables of map entries");}return a};
g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Na(b)))};g.g=function(a){a=this.obj[this.A.g?this.A.g(a):this.A.call(null,a)];return this.V?fj(a,this.D,this.A,this.transform):a};
g.h=function(a,b){a=ta(this.obj,this.A.g?this.A.g(a):this.A.call(null,a),b);return this.V&&a!==b?fj(a,this.D,this.A,this.transform):a};function uj(a,b,c,d){this.qa=!0;this.j=a;this.D=b;this.A=c;this.transform=d;this.J=88;this.o=275}g=uj.prototype;g.eb=function(a,b){if(this.qa)return qj(b,!0)?(this.j.push(ij(b)),this):Sb(Rb(lj(this.j)),b);throw Error("conj! after persistent!");};
g.tb=function(){if(this.qa)return this.qa=!1,new hj(null,this.D,this.A,this.transform,this.j,null);throw Error("persistent! called twice");};g.bb=function(a,b,c){if("number"===typeof b)a=this.Gb(null,b,c);else throw Error([B.g("TransientArrayVector"),"'s key for assoc! must be a number."].join(""));return a};
g.Gb=function(a,b,c){if(this.qa){if(qj(c,!0)){if(0<=b&&b<this.j.length)return this.j[b]=ij(c),this;if(b===this.j.length)return this.eb(null,c);throw Error(["Index ",B.g(b)," out of bounds for TransientArrayVector of length",B.g(this.j.length)].join(""));}return Vb(Rb(lj(this.j)),b,c)}throw Error("assoc! after persistent!");};g.Y=function(){if(this.qa)return this.j.length;throw Error("count after persistent!");};
g.N=function(a,b){if(this.qa)return fj(this.j[b],this.D,this.A,this.transform);throw Error("nth after persistent!");};g.ma=function(a,b,c){return 0<=b&&b<this.j.length?this.N(null,b):c};g.na=function(a,b){return this.O(null,b,null)};g.O=function(a,b,c){return"number"===typeof b?this.ma(null,b,c):c};
g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Na(b)))};g.g=function(a){return this.na(null,a)};g.h=function(a,b){return this.O(null,a,b)};function vj(a,b,c,d,e){this.D=a;this.A=b;this.transform=c;this.j=d;this.v=0;this.s=e}vj.prototype.hasNext=function(){return this.v<this.s};
vj.prototype.next=function(){var a=fj(this.j[this.v],this.D,this.A,this.transform);this.v+=1;return a};function wj(a,b,c,d,e,f){this.D=a;this.A=b;this.transform=c;this.j=d;this.v=e;this.meta=f;this.o=2179858686;this.J=8192}g=wj.prototype;g.toString=function(){return gc(this)};g.equiv=function(a){return this.F(null,a)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Zi(this,b,0);case 2:return Zi(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Zi(this,b,0)};a.h=function(b,c){return Zi(this,b,c)};return a}();
g.lastIndexOf=function(){function a(c){return $i(this,c,R(this))}var b=null;b=function(c,d){switch(arguments.length){case 1:return a.call(this,c);case 2:return $i(this,c,d)}throw Error("Invalid arity: "+arguments.length);};b.g=a;b.h=function(c,d){return $i(this,c,d)};return b}();g.N=function(a,b){a=b+this.v;if(0<=a&&a<this.j.length)return fj(this.j[a],this.D,this.A,this.transform);throw Error("Index out of bounds");};
g.ma=function(a,b,c){a=b+this.v;return 0<=a&&a<this.j.length?fj(this.j[a],this.D,this.A,this.transform):c};g.W=function(a,b,c){return jg(b,rg,"("," ",")",c,this)};g.ea=function(){return this.meta};g.sa=function(){return this.v+1<this.j.length?new wj(this.D,this.A,this.transform,this.j,this.v+1,null):null};g.Y=function(){var a=this.j.length-this.v;return 0>a?0:a};g.T=function(){return Bc(this)};g.F=function(a,b){return aj(this,b)};g.ha=function(){return wc};g.oa=function(a,b){return bj(this,b)};
g.pa=function(a,b,c){return cj(this,b,c)};g.ta=function(){return fj(this.j[this.v],this.D,this.A,this.transform)};g.ua=function(){return this.v+1<this.j.length?new wj(this.D,this.A,this.transform,this.j,this.v+1,null):wc};g.aa=function(){return this};g.ga=function(a,b){return b===this.meta?this:new wj(this.D,this.A,this.transform,this.j,this.v,b)};g.ia=function(a,b){return Uc(b,this)};
function hj(a,b,c,d,e,f){this.meta=a;this.D=b;this.A=c;this.transform=d;this.j=e;this.H=f;this.o=2315150111;this.J=141316}g=hj.prototype;g.lb=function(a,b){return 0<=b&&b<this.j.length?new Me(b,fj(this.j[b],this.D,this.A,this.transform)):null};g.toString=function(){return gc(this)};g.equiv=function(a){return this.F(null,a)};
g.indexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return Zi(this,b,0);case 2:return Zi(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return Zi(this,b,0)};a.h=function(b,c){return Zi(this,b,c)};return a}();
g.lastIndexOf=function(){var a=null;a=function(b,c){switch(arguments.length){case 1:return $i(this,b,R(this));case 2:return $i(this,b,c)}throw Error("Invalid arity: "+arguments.length);};a.g=function(b){return $i(this,b,R(this))};a.h=function(b,c){return $i(this,b,c)};return a}();g.na=function(a,b){return this.O(null,b,null)};g.O=function(a,b,c){return"number"===typeof b?this.ma(null,b,c):c};
g.mb=function(a,b,c){a=0;for(var d=c;;)if(a<this.j.length){c=this.j.length;var e;a:for(e=0;;)if(e<c){var f=e+a,h=fj(this.j[e],this.D,this.A,this.transform);d=b.l?b.l(d,f,h):b.call(null,d,f,h);if(Hc(d)){e=d;break a}e+=1}else{e=d;break a}if(Hc(e))return G(e);a+=c;d=e}else return d};g.N=function(a,b){if(0<=b&&b<this.j.length)return fj(this.j[b],this.D,this.A,this.transform);throw Error(["No item ",B.g(b)," in vector of length ",B.g(this.j.length)].join(""));};
g.ma=function(a,b,c){return 0<=b&&b<this.j.length?fj(this.j[b],this.D,this.A,this.transform):c};g.W=function(a,b,c){return jg(b,rg,"["," ","]",c,this)};g.fb=function(a,b,c){if(0<=b&&b<this.j.length)return qj(c,!0)?(a=Na(this.j),a[b]=ij(c),new hj(this.meta,this.D,this.A,this.transform,a,null)):ub(lj(this.j),b,c);if(b===this.j.length)return this.ia(null,c);throw Error(["Index ",B.g(b)," out of bounds  [0,",B.g(this.j.length),"]"].join(""));};
g.Aa=function(){return new vj(this.D,this.A,this.transform,this.j,this.j.length)};g.ea=function(){return this.meta};g.Y=function(){return this.j.length};g.rb=function(){return 0<this.j.length?this.N(null,this.j.length-1):null};g.sb=function(){if(0===this.j.length)throw Error("Can't pop empty vector");if(1===this.j.length)return this.ha(null);var a=Na(this.j);return new hj(this.meta,this.D,this.A,this.transform,a.slice(0,a.length-1),null)};g.T=function(){var a=this.H;return null!=a?a:this.H=a=Bc(this)};
g.F=function(a,b){a:if(b instanceof hj)if(this.j.length===R(b))for(a=this.Aa(null),b=ec(b);;)if(a.hasNext()){var c=a.next(),d=b.next();if(!O.h(c,d)){a=!1;break a}}else{a=!0;break a}else a=!1;else a=aj(this,b);return a};g.kb=function(){return new uj(Na(this.j),this.D,this.A,this.transform)};g.ha=function(){return new hj(this.meta,this.D,this.A,this.transform,[],null)};g.oa=function(a,b){return bj(this,b)};g.pa=function(a,b,c){return cj(this,b,c)};
g.Ra=function(a,b,c){if("number"===typeof b)a=this.fb(null,b,c);else throw Error("Vector's key for assoc must be a number.");return a};g.cb=function(a,b){return td(b)?0<=b&&b<this.j.length:!1};g.aa=function(){return 0<this.j.length?new wj(this.D,this.A,this.transform,this.j,0,null):null};g.ga=function(a,b){return b===this.meta?this:new hj(b,this.D,this.A,this.transform,this.j,this.H)};
g.ia=function(a,b){return qj(b,!0)?(a=Na(this.j),a[a.length]=ij(b),new hj(this.meta,this.D,this.A,this.transform,a,null)):Za(lj(this.j),b)};g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",B.g(arguments.length-1)].join(""));}};g.apply=function(a,b){return this.call.apply(this,[this].concat(Na(b)))};g.g=function(a){return this.N(null,a)};g.h=function(a,b){return this.ma(null,a,b)};
function xj(a){return a instanceof I?a.Ba:null}function nj(a){switch(arguments.length){case 1:return mj(arguments[0]);default:for(var b=[],c=arguments.length,d=0;;)if(d<c)b.push(arguments[d]),d+=1;else break;c=new K(b.slice(1),0,null);b=arguments[0];var e=de(c);c=H.h(e,Oh);d=H.h(e,wi);var f=H.h(e,Hh);e=H.h(e,hh);return!1===c?fj(b,Cd,Cd,e):null!=d&&null!=f?fj(b,d,f,e):fj(b,Jd,xj,e)}}function mj(a){return fj(a,Jd,xj,null)}
function yj(a){return a instanceof gj?a.obj:a instanceof hj?a.j:Gg.G(a,Vc([Hg,xj]))};var zj=function zj(a){switch(arguments.length){case 1:return zj.g(arguments[0]);case 2:return zj.h(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(2),0,null);return zj.G(arguments[0],arguments[1],c)}};zj.g=function(a){return a};zj.h=function(a,b){return R(a)<R(b)?Pa(function(c,d){return ud(b,d)?gd.h(c,d):c},a,a):Pa(gd,a,b)};zj.G=function(a,b,c){return Pa(zj,a,Wc.h(c,b))};
zj.X=function(a){var b=M(a),c=N(a);a=M(c);c=N(c);return this.G(b,a,c)};zj.U=2;function Aj(){var a=ad.h(null,ii),b=new v(null,4,[ji,Fh,Ni,Qh,uh,Th,bi,th],null);return Pa(function(c,d){var e=T(d,0,null);d=T(d,1,null);return ud(a,e)?U.l(c,d,H.h(a,e)):c},ae(ad,a,mf(b)),b)};var Bj="undefined"!=typeof Object.keys?function(a){return Object.keys(a)}:function(a){return sa(a)},Cj="undefined"!=typeof Array.isArray?function(a){return Array.isArray(a)}:function(a){return"array"===t(a)};function Dj(){Math.round(15*Math.random()).toString(16)};function Ej(){this.idx=0;this.cache=[]}Ej.prototype.write=function(a){1936==this.idx&&(this.idx=0);this.cache[this.idx]=a;this.idx++;return a};Ej.prototype.read=function(a){return this.cache[2===a.length?a.charCodeAt(1)-48:44*(a.charCodeAt(1)-48)+(a.charCodeAt(2)-48)]};Ej.prototype.clear=function(){this.idx=0};var Fj=1;function Gj(a,b){if(null==a)return null==b;if(a===b)return!0;if("object"===typeof a){if(Cj(a)){if(Cj(b)&&a.length===b.length){for(var c=0;c<a.length;c++)if(!Gj(a[c],b[c]))return!1;return!0}return!1}if(a.Sa)return a.Sa(b);if(null!=b&&"object"===typeof b){if(b.Sa)return b.Sa(a);c=0;var d=Bj(b).length,e;for(e in a)if(a.hasOwnProperty(e)&&(c++,!b.hasOwnProperty(e)||!Gj(a[e],b[e])))return!1;return c===d}}return!1}function Hj(a,b){return a^b+2654435769+(a<<6)+(a>>2)}var Ij={},Jj=0;
function Kj(a){var b=0;if(null!=a.forEach)a.forEach(function(h,k){b=(b+(Lj(k)^Lj(h)))%4503599627370496});else for(var c=Bj(a),d=0;d<c.length;d++){var e=c[d],f=a[e];b=(b+(Lj(e)^Lj(f)))%4503599627370496}return b}function Mj(a){var b=0;if(Cj(a))for(var c=0;c<a.length;c++)b=Hj(b,Lj(a[c]));else a.forEach&&a.forEach(function(d){b=Hj(b,Lj(d))});return b}
function Lj(a){if(null==a)return 0;switch(typeof a){case "number":return a;case "boolean":return!0===a?1:0;case "string":var b=Ij[a];if(null!=b)a=b;else{for(var c=b=0;c<a.length;++c)b=31*b+a.charCodeAt(c),b%=4294967296;Jj++;256<=Jj&&(Ij={},Jj=1);a=Ij[a]=b}return a;case "function":return b=a.transit$hashCode$,b||(b=Fj,"undefined"!=typeof Object.defineProperty?Object.defineProperty(a,"transit$hashCode$",{value:b,enumerable:!1}):a.transit$hashCode$=b,Fj++),b;default:return a instanceof Date?a.valueOf():
Cj(a)?Mj(a):a.Wa?a.Wa():Kj(a)}};var Nj="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function Oj(a,b){this.tag=a;this.rep=b;this.ca=-1}Oj.prototype.toString=function(){return"[TaggedValue: "+this.tag+", "+this.rep+"]"};Oj.prototype.equiv=function(a){return Gj(this,a)};Oj.prototype.equiv=Oj.prototype.equiv;Oj.prototype.Sa=function(a){return a instanceof Oj?this.tag===a.tag&&Gj(this.rep,a.rep):!1};Oj.prototype.Wa=function(){-1===this.ca&&(this.ca=Hj(Lj(this.tag),Lj(this.rep)));return this.ca};
function Pj(a,b){return new Oj(a,b)}var Qj=ma("9007199254740991"),Rj=ma("-9007199254740991");fa.prototype.equiv=function(a){return Gj(this,a)};fa.prototype.equiv=fa.prototype.equiv;fa.prototype.Sa=function(a){return a instanceof fa&&this.equals(a)};fa.prototype.Wa=function(){return this.Z};function Sj(a){this._name=a;this.ca=-1}Sj.prototype.toString=function(){return":"+this._name};Sj.prototype.namespace=function(){var a=this._name.indexOf("/");return-1!=a?this._name.substring(0,a):null};
Sj.prototype.name=function(){var a=this._name.indexOf("/");return-1!=a?this._name.substring(a+1,this._name.length):this._name};Sj.prototype.equiv=function(a){return Gj(this,a)};Sj.prototype.equiv=Sj.prototype.equiv;Sj.prototype.Sa=function(a){return a instanceof Sj&&this._name==a._name};Sj.prototype.Wa=function(){-1===this.ca&&(this.ca=Lj(this._name));return this.ca};function Tj(a){this._name=a;this.ca=-1}
Tj.prototype.namespace=function(){var a=this._name.indexOf("/");return-1!=a?this._name.substring(0,a):null};Tj.prototype.name=function(){var a=this._name.indexOf("/");return-1!=a?this._name.substring(a+1,this._name.length):this._name};Tj.prototype.toString=function(){return this._name};Tj.prototype.equiv=function(a){return Gj(this,a)};Tj.prototype.equiv=Tj.prototype.equiv;Tj.prototype.Sa=function(a){return a instanceof Tj&&this._name==a._name};
Tj.prototype.Wa=function(){-1===this.ca&&(this.ca=Lj(this._name));return this.ca};function Uj(a,b,c){var d="";c=c||b+1;for(var e=8*(7-b),f=(new fa(255,0)).shiftLeft(e);b<c;b++,e-=8,f=na(f,8)){var h=na(a.and(f),e).toString(16);1==h.length&&(h="0"+h);d+=h}return d}function Vj(a,b){this.high=a;this.low=b;this.ca=-1}Vj.prototype.toString=function(){var a=this.high,b=this.low;var c=Uj(a,0,4)+"-";c+=Uj(a,4,6)+"-";c+=Uj(a,6,8)+"-";c+=Uj(b,0,2)+"-";return c+=Uj(b,2,8)};
Vj.prototype.equiv=function(a){return Gj(this,a)};Vj.prototype.equiv=Vj.prototype.equiv;Vj.prototype.Sa=function(a){return a instanceof Vj&&this.high.equals(a.high)&&this.low.equals(a.low)};Vj.prototype.Wa=function(){-1===this.ca&&(this.ca=Lj(this.toString()));return this.ca};Date.prototype.Sa=function(a){return a instanceof Date?this.valueOf()===a.valueOf():!1};Date.prototype.Wa=function(){return this.valueOf()};function Wj(a,b){this.entries=a;this.type=b||0;this.idx=0}
Wj.prototype.next=function(){if(this.idx<this.entries.length){var a={value:0===this.type?this.entries[this.idx]:1===this.type?this.entries[this.idx+1]:[this.entries[this.idx],this.entries[this.idx+1]],done:!1};this.idx+=2;return a}return{value:null,done:!0}};Wj.prototype.next=Wj.prototype.next;Wj.prototype[Nj]=function(){return this};function Xj(a,b){this.map=a;this.type=b||0;this.keys=Yj(this.map);this.idx=0;this.bucket=null;this.jb=0}
Xj.prototype.next=function(){if(this.idx<this.map.size){null!=this.bucket&&this.jb<this.bucket.length||(this.bucket=this.map.map[this.keys[this.idx]],this.jb=0);var a={value:0===this.type?this.bucket[this.jb]:1===this.type?this.bucket[this.jb+1]:[this.bucket[this.jb],this.bucket[this.jb+1]],done:!1};this.idx++;this.jb+=2;return a}return{value:null,done:!0}};Xj.prototype.next=Xj.prototype.next;Xj.prototype[Nj]=function(){return this};
function Zj(a,b){if(a instanceof Y&&(b instanceof Z||b instanceof Y)){if(a.size!==b.size)return!1;for(var c in a.map)for(var d=a.map[c],e=0;e<d.length;e+=2)if(!Gj(d[e+1],b.get(d[e])))return!1;return!0}if(a instanceof Z&&(b instanceof Z||b instanceof Y)){if(a.size!==b.size)return!1;a=a.fa;for(e=0;e<a.length;e+=2)if(!Gj(a[e+1],b.get(a[e])))return!1;return!0}if(null!=b&&"object"===typeof b&&(e=Bj(b),c=e.length,a.size===c)){for(d=0;d<c;d++){var f=e[d];if(!a.has(f)||!Gj(b[f],a.get(f)))return!1}return!0}return!1}
function ak(a){return null==a?"null":"array"===t(a)?"["+a.toString()+"]":"string"===t(a)?'"'+a+'"':a.toString()}function bk(a){var b=0,c="TransitMap {";a.forEach(function(d,e){c+=ak(e)+" \x3d\x3e "+ak(d);b<a.size-1&&(c+=", ");b++});return c+"}"}function ck(a){var b=0,c="TransitSet {";a.forEach(function(d){c+=ak(d);b<a.size-1&&(c+=", ");b++});return c+"}"}function Z(a){this.fa=a;this.da=null;this.ca=-1;this.size=a.length/2;this.xc=0}Z.prototype.toString=function(){return bk(this)};
Z.prototype.inspect=function(){return this.toString()};Z.prototype.convert=function(){if(this.da)throw Error("Invalid operation, already converted");if(8>this.size)return!1;this.xc++;return 32<this.xc?(this.da=dk(this.fa,!1,!0),this.fa=[],!0):!1};Z.prototype.clear=function(){this.ca=-1;this.da?this.da.clear():this.fa=[];this.size=0};Z.prototype.clear=Z.prototype.clear;Z.prototype.keys=function(){return this.da?this.da.keys():new Wj(this.fa,0)};Z.prototype.keys=Z.prototype.keys;
Z.prototype.vb=function(){if(this.da)return this.da.vb();for(var a=[],b=0,c=0;c<this.fa.length;b++,c+=2)a[b]=this.fa[c];return a};Z.prototype.keySet=Z.prototype.vb;Z.prototype.entries=function(){return this.da?this.da.entries():new Wj(this.fa,2)};Z.prototype.entries=Z.prototype.entries;Z.prototype.values=function(){return this.da?this.da.values():new Wj(this.fa,1)};Z.prototype.values=Z.prototype.values;
Z.prototype.forEach=function(a){if(this.da)this.da.forEach(a);else for(var b=0;b<this.fa.length;b+=2)a(this.fa[b+1],this.fa[b])};Z.prototype.forEach=Z.prototype.forEach;Z.prototype.get=function(a,b){if(this.da)return this.da.get(a);if(this.convert())return this.get(a);for(var c=0;c<this.fa.length;c+=2)if(Gj(this.fa[c],a))return this.fa[c+1];return b};Z.prototype.get=Z.prototype.get;
Z.prototype.has=function(a){if(this.da)return this.da.has(a);if(this.convert())return this.has(a);for(var b=0;b<this.fa.length;b+=2)if(Gj(this.fa[b],a))return!0;return!1};Z.prototype.has=Z.prototype.has;Z.prototype.set=function(a,b){this.ca=-1;if(this.da)this.da.set(a,b),this.size=this.da.size;else{for(var c=0;c<this.fa.length;c+=2)if(Gj(this.fa[c],a)){this.fa[c+1]=b;return}this.fa.push(a);this.fa.push(b);this.size++;32<this.size&&(this.da=dk(this.fa,!1,!0),this.fa=null)}};Z.prototype.set=Z.prototype.set;
Z.prototype["delete"]=function(a){this.ca=-1;if(this.da)return a=this.da.delete(a),this.size=this.da.size,a;for(var b=0;b<this.fa.length;b+=2)if(Gj(this.fa[b],a))return a=this.fa[b+1],this.fa.splice(b,2),this.size--,a};Z.prototype.clone=function(){var a=dk();this.forEach(function(b,c){a.set(c,b)});return a};Z.prototype.clone=Z.prototype.clone;Z.prototype[Nj]=function(){return this.entries()};Z.prototype.Wa=function(){if(this.da)return this.da.Wa();-1===this.ca&&(this.ca=Kj(this));return this.ca};
Z.prototype.Sa=function(a){return this.da?Zj(this.da,a):Zj(this,a)};function Y(a,b,c){this.map=b||{};this._keys=a||[];this.size=c||0;this.ca=-1}Y.prototype.toString=function(){return bk(this)};Y.prototype.inspect=function(){return this.toString()};Y.prototype.clear=function(){this.ca=-1;this.map={};this._keys=[];this.size=0};Y.prototype.clear=Y.prototype.clear;function Yj(a){return null!=a._keys?a._keys:Bj(a.map)}
Y.prototype["delete"]=function(a){this.ca=-1;this._keys=null;for(var b=Lj(a),c=this.map[b],d=0;d<c.length;d+=2)if(Gj(a,c[d]))return a=c[d+1],c.splice(d,2),0===c.length&&delete this.map[b],this.size--,a};Y.prototype.entries=function(){return new Xj(this,2)};Y.prototype.entries=Y.prototype.entries;Y.prototype.forEach=function(a){for(var b=Yj(this),c=0;c<b.length;c++)for(var d=this.map[b[c]],e=0;e<d.length;e+=2)a(d[e+1],d[e],this)};Y.prototype.forEach=Y.prototype.forEach;
Y.prototype.get=function(a,b){var c=Lj(a);c=this.map[c];if(null!=c)for(b=0;b<c.length;b+=2){if(Gj(a,c[b]))return c[b+1]}else return b};Y.prototype.get=Y.prototype.get;Y.prototype.has=function(a){var b=Lj(a);b=this.map[b];if(null!=b)for(var c=0;c<b.length;c+=2)if(Gj(a,b[c]))return!0;return!1};Y.prototype.has=Y.prototype.has;Y.prototype.keys=function(){return new Xj(this,0)};Y.prototype.keys=Y.prototype.keys;
Y.prototype.vb=function(){for(var a=Yj(this),b=[],c=0;c<a.length;c++)for(var d=this.map[a[c]],e=0;e<d.length;e+=2)b.push(d[e]);return b};Y.prototype.keySet=Y.prototype.vb;Y.prototype.set=function(a,b){this.ca=-1;var c=Lj(a),d=this.map[c];if(null==d)this._keys&&this._keys.push(c),this.map[c]=[a,b],this.size++;else{c=!0;for(var e=0;e<d.length;e+=2)if(Gj(b,d[e])){c=!1;d[e]=b;break}c&&(d.push(a),d.push(b),this.size++)}};Y.prototype.set=Y.prototype.set;
Y.prototype.values=function(){return new Xj(this,1)};Y.prototype.values=Y.prototype.values;Y.prototype.clone=function(){var a=dk();this.forEach(function(b,c){a.set(c,b)});return a};Y.prototype.clone=Y.prototype.clone;Y.prototype[Nj]=function(){return this.entries()};Y.prototype.Wa=function(){-1===this.ca&&(this.ca=Kj(this));return this.ca};Y.prototype.Sa=function(a){return Zj(this,a)};
function dk(a,b,c){a=a||[];b=!1===b?b:!0;if((!0!==c||!c)&&64>=a.length){if(b){var d=a;a=[];for(b=0;b<d.length;b+=2){var e=!1;for(c=0;c<a.length;c+=2)if(Gj(a[c],d[b])){a[c+1]=d[b+1];e=!0;break}e||(a.push(d[b]),a.push(d[b+1]))}}return new Z(a)}d={};e=[];var f=0;for(b=0;b<a.length;b+=2){c=Lj(a[b]);var h=d[c];if(null==h)e.push(c),d[c]=[a[b],a[b+1]],f++;else{var k=!0;for(c=0;c<h.length;c+=2)if(Gj(h[c],a[b])){h[c+1]=a[b+1];k=!1;break}k&&(h.push(a[b]),h.push(a[b+1]),f++)}}return new Y(e,d,f)}
function ek(a){this.map=a;this.size=a.size}ek.prototype.toString=function(){return ck(this)};ek.prototype.inspect=function(){return this.toString()};ek.prototype.add=function(a){this.map.set(a,a);this.size=this.map.size};ek.prototype.add=ek.prototype.add;ek.prototype.clear=function(){this.map=new Y;this.size=0};ek.prototype.clear=ek.prototype.clear;ek.prototype["delete"]=function(a){a=this.map.delete(a);this.size=this.map.size;return a};ek.prototype.entries=function(){return this.map.entries()};
ek.prototype.entries=ek.prototype.entries;ek.prototype.forEach=function(a){var b=this;this.map.forEach(function(c,d){a(d,b)})};ek.prototype.forEach=ek.prototype.forEach;ek.prototype.has=function(a){return this.map.has(a)};ek.prototype.has=ek.prototype.has;ek.prototype.keys=function(){return this.map.keys()};ek.prototype.keys=ek.prototype.keys;ek.prototype.vb=function(){return this.map.vb()};ek.prototype.keySet=ek.prototype.vb;ek.prototype.values=function(){return this.map.values()};
ek.prototype.values=ek.prototype.values;ek.prototype.clone=function(){var a=fk();this.forEach(function(b){a.add(b)});return a};ek.prototype.clone=ek.prototype.clone;ek.prototype[Nj]=function(){return this.values()};ek.prototype.Sa=function(a){if(a instanceof ek){if(this.size===a.size)return Gj(this.map,a.map)}else return!1};ek.prototype.Wa=function(){return Lj(this.map)};
function fk(a){a=a||[];for(var b={},c=[],d=0,e=0;e<a.length;e++){var f=Lj(a[e]),h=b[f];if(null==h)c.push(f),b[f]=[a[e],a[e]],d++;else{f=!0;for(var k=0;k<h.length;k+=2)if(Gj(h[k],a[e])){f=!1;break}f&&(h.push(a[e]),h.push(a[e]),d++)}}return new ek(new Y(c,b,d))};function gk(a){this.str=a}
function hk(a){this.options=a||{};this.handlers={};for(var b in this.defaults.handlers)this.handlers[b]=this.defaults.handlers[b];for(b in this.options.handlers){a:{switch(b){case "_":case "s":case "?":case "i":case "d":case "b":case "'":case "array":case "map":a=!0;break a}a=!1}if(a)throw Error('Cannot override handler for ground type "'+b+'"');this.handlers[b]=this.options.handlers[b]}this.Lc=null!=this.options.preferStrings?this.options.preferStrings:this.defaults.Lc;this.rc=null!=this.options.preferBuffers?
this.options.preferBuffers:this.defaults.rc;this.pc=this.options.defaultHandler||this.defaults.pc;this.Ta=this.options.mapBuilder;this.yb=this.options.arrayBuilder}
hk.prototype.defaults={handlers:{_:function(){return null},"?":function(a){return"t"===a},b:function(a,b){if(b&&!1===b.rc||"undefined"==typeof aa.Buffer)if("undefined"!=typeof Uint8Array){if("undefined"!=typeof atob)var c=atob(a);else{a=String(a).replace(/=+$/,"");if(1==a.length%4)throw Error("'atob' failed: The string to be decoded is not correctly encoded.");b=0;for(var d,e=0,f="";d=a.charAt(e++);~d&&(c=b%4?64*c+d:d,b++%4)?f+=String.fromCharCode(255&c>>(-2*b&6)):0)d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".indexOf(d);
c=f}a=c.length;b=new Uint8Array(a);for(d=0;d<a;d++)b[d]=c.charCodeAt(d);c=b}else c=Pj("b",a);else c=new aa.Buffer(a,"base64");return c},i:function(a){"number"===typeof a||a instanceof fa||(a=ma(a,10),a=0<a.compare(Qj)||0>a.compare(Rj)?a:a.toNumber());return a},n:function(a){return Pj("n",a)},d:function(a){return parseFloat(a)},f:function(a){return Pj("f",a)},c:function(a){return a},":":function(a){return new Sj(a)},$:function(a){return new Tj(a)},r:function(a){return Pj("r",a)},z:function(a){a:switch(a){case "-INF":a=
-Infinity;break a;case "INF":a=Infinity;break a;case "NaN":a=NaN;break a;default:throw Error("Invalid special double value "+a);}return a},"'":function(a){return a},m:function(a){a="number"===typeof a?a:parseInt(a,10);return new Date(a)},t:function(a){return new Date(a)},u:function(a){a=a.replace(/-/g,"");var b,c;var d=b=0;for(c=24;8>d;d+=2,c-=8)b|=parseInt(a.substring(d,d+2),16)<<c;var e=0;d=8;for(c=24;16>d;d+=2,c-=8)e|=parseInt(a.substring(d,d+2),16)<<c;var f=ea(e,b);b=0;d=16;for(c=24;24>d;d+=2,
c-=8)b|=parseInt(a.substring(d,d+2),16)<<c;e=0;for(c=d=24;32>d;d+=2,c-=8)e|=parseInt(a.substring(d,d+2),16)<<c;return new Vj(f,ea(e,b))},set:function(a){return fk(a)},list:function(a){return Pj("list",a)},link:function(a){return Pj("link",a)},cmap:function(a){return dk(a,!1)}},pc:function(a,b){return Pj(a,b)},Lc:!0,rc:!0};
hk.prototype.decode=function(a,b,c,d){if(null==a)return null;switch(typeof a){case "string":return 3<a.length?c?d=!0:(d=a.charAt(1),d="~"===a.charAt(0)?":"===d||"$"===d||"#"===d:!1):d=!1,d?(a=ik(this,a),b&&b.write(a,c),b=a):b="^"===a.charAt(0)&&" "!==a.charAt(1)?b.read(a,c):ik(this,a),b;case "object":if(Cj(a))if("^ "===a[0])if(this.Ta)if(17>a.length&&this.Ta.fromArray){d=[];for(c=1;c<a.length;c+=2)d.push(this.decode(a[c],b,!0,!1)),d.push(this.decode(a[c+1],b,!1,!1));b=this.Ta.fromArray(d,a)}else{d=
this.Ta.init(a);for(c=1;c<a.length;c+=2)d=this.Ta.add(d,this.decode(a[c],b,!0,!1),this.decode(a[c+1],b,!1,!1),a);b=this.Ta.finalize(d,a)}else{d=[];for(c=1;c<a.length;c+=2)d.push(this.decode(a[c],b,!0,!1)),d.push(this.decode(a[c+1],b,!1,!1));b=dk(d,!1)}else b=jk(this,a,b,c,d);else{c=Bj(a);var e=c[0];if((d=1==c.length?this.decode(e,b,!1,!1):null)&&d instanceof gk)a=a[e],c=this.handlers[d.str],b=null!=c?c(this.decode(a,b,!1,!0),this):Pj(d.str,this.decode(a,b,!1,!1));else if(this.Ta)if(16>c.length&&this.Ta.fromArray){var f=
[];for(d=0;d<c.length;d++)e=c[d],f.push(this.decode(e,b,!0,!1)),f.push(this.decode(a[e],b,!1,!1));b=this.Ta.fromArray(f,a)}else{f=this.Ta.init(a);for(d=0;d<c.length;d++)e=c[d],f=this.Ta.add(f,this.decode(e,b,!0,!1),this.decode(a[e],b,!1,!1),a);b=this.Ta.finalize(f,a)}else{f=[];for(d=0;d<c.length;d++)e=c[d],f.push(this.decode(e,b,!0,!1)),f.push(this.decode(a[e],b,!1,!1));b=dk(f,!1)}}return b}return a};hk.prototype.decode=hk.prototype.decode;
function jk(a,b,c,d,e){if(e){var f=[];for(e=0;e<b.length;e++)f.push(a.decode(b[e],c,d,!1));return f}f=c&&c.idx;if(2===b.length&&"string"===typeof b[0]&&(e=a.decode(b[0],c,!1,!1))&&e instanceof gk)return b=b[1],f=a.handlers[e.str],null!=f?f=f(a.decode(b,c,d,!0),a):Pj(e.str,a.decode(b,c,d,!1));c&&f!=c.idx&&(c.idx=f);if(a.yb){if(32>=b.length&&a.yb.fromArray){f=[];for(e=0;e<b.length;e++)f.push(a.decode(b[e],c,d,!1));return a.yb.fromArray(f,b)}f=a.yb.init(b);for(e=0;e<b.length;e++)f=a.yb.add(f,a.decode(b[e],
c,d,!1),b);return a.yb.finalize(f,b)}f=[];for(e=0;e<b.length;e++)f.push(a.decode(b[e],c,d,!1));return f}function ik(a,b){if("~"===b.charAt(0)){var c=b.charAt(1);if("~"===c||"^"===c||"`"===c)return b.substring(1);if("#"===c)return new gk(b.substring(2));var d=a.handlers[c];return null==d?a.pc(c,b.substring(2)):d(b.substring(2),a)}return b};function kk(a){this.decoder=new hk(a)}function lk(a,b){this.td=a;this.options=b||{};this.cache=this.options.cache?this.options.cache:new Ej}lk.prototype.read=function(a){var b=this.cache;a=this.td.decoder.decode(JSON.parse(a),b);this.cache.clear();return a};lk.prototype.read=lk.prototype.read;(8|3&Math.round(14*Math.random())).toString(16);Dj();Dj();Dj();Dj();Dj();Dj();Dj();Dj();Dj();Dj();Dj();Dj();Dj();Dj();Dj();Dj();Dj();Dj();Dj();Dj();Dj();Dj();Dj();Dj();Dj();Dj();Dj();Dj();Dj();Dj();function mk(a,b){if("json"===a||"json-verbose"===a||null==a)return a=new kk(b),new lk(a,b);throw Error("Cannot create reader of type "+a);};fa.prototype.F=function(a,b){return this.equiv(b)};Vj.prototype.F=function(a,b){return this.equiv(b)};Oj.prototype.F=function(a,b){return this.equiv(b)};fa.prototype.mc=u;fa.prototype.T=function(){return Lj(this)};Vj.prototype.mc=u;Vj.prototype.T=function(){return pc(this.toString())};Oj.prototype.mc=u;Oj.prototype.T=function(){return Lj(this)};Vj.prototype.ka=u;Vj.prototype.W=function(a,b){return Lb(b,['#uuid "',B.g(this.toString()),'"'].join(""))};
function nk(a){for(var b=Gg(Aj()),c=J(sa(b)),d=null,e=0,f=0;;)if(f<e){var h=d.N(null,f);a[h]=ta(b,h);f+=1}else if(c=J(c))d=c,od(d)?(c=Xb(d),f=Yb(d),d=c,e=R(c),c=f):(c=M(d),a[c]=ta(b,c),c=N(d),d=null,e=0),f=0;else break;return a}function ok(){}ok.prototype.init=function(){return Rb(ee)};ok.prototype.add=function(a,b,c){return Ub(a,b,c)};ok.prototype.finalize=function(a){return Tb(a)};ok.prototype.fromArray=function(a){return rf.l?rf.l(a,!0,!0):rf.call(null,a,!0,!0)};function pk(){}
pk.prototype.init=function(){return Rb(Xc)};pk.prototype.add=function(a,b){return Sb(a,b)};pk.prototype.finalize=function(a){return Tb(a)};pk.prototype.fromArray=function(a){return Se.h?Se.h(a,!0):Se.call(null,a,!0)};
function qk(){return mk(Kd(li),nk({handlers:Gg($f.G(Vc([new v(null,6,["$",function(a){return sc.g(a)},":",function(a){return Jd.g(a)},"set",function(a){return ue.h(gg,a)},"list",function(a){return ue.h(wc,a.reverse())},"cmap",function(a){for(var b=0,c=Rb(ee);;)if(b<a.length){var d=b+2;c=Ub(c,a[b],a[b+1]);b=d}else return Tb(c)},"with-meta",function(a){return ed(a[0],a[1])}],null),ad.h(ii.g(null),ah)]))),defaultHandler:ah.g(ii.g(null)),mapBuilder:new ok,arrayBuilder:new pk,preferStrings:!1,preferBuffers:!1}))}
;function rk(a,b,c){var d=RegExp,e=b.source,f=w(b.ignoreCase)?"gi":"g";f=w(b.multiline)?[f,"m"].join(""):f;b=w(b.unicode)?[f,"u"].join(""):f;return a.replace(new d(e,b),c)}
function sk(a){return function(){function b(d){var e=null;if(0<arguments.length){e=0;for(var f=Array(arguments.length-0);e<f.length;)f[e]=arguments[e+0],++e;e=new K(f,0,null)}return c.call(this,e)}function c(d){d=te(d);if(O.h(R(d),1))return d=M(d),a.g?a.g(d):a.call(null,d);d=Te(d);return a.g?a.g(d):a.call(null,d)}b.U=0;b.X=function(d){d=J(d);return c(d)};b.G=c;return b}()}
function tk(a,b,c){if("string"===typeof b)return a.replace(new RegExp(String(b).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"),"g"),c);if(b instanceof RegExp)return"string"===typeof c?rk(a,b,c):rk(a,b,sk(c));throw["Invalid match arg: ",B.g(b)].join("");}function uk(a){var b=new xa;for(a=J(a);;)if(null!=a)b.append(B.g(M(a))),a=N(a),null!=a&&b.append(" ");else return b.toString()}
function vk(a){var b=/-/;a="/(?:)/"===B.g(b)?Wc.h(Te(Uc("",re.h(B,J(a)))),""):Te(B.g(a).split(b));if(1<R(a))a:for(;;)if(""===(null==a?null:rb(a)))a=null==a?null:sb(a);else break a;return a};var wk="undefined"!==typeof window&&null!=window.document,xk=new eg(null,new v(null,2,["aria",null,"data",null],null),null);function yk(a){return 2>R(a)?a.toUpperCase():[a.substring(0,1).toUpperCase(),a.substring(1)].join("")}function zk(a){if("string"===typeof a)return a;a=Kd(a);var b=vk(a),c=J(b);b=M(c);c=N(c);return w(xk.g?xk.g(b):xk.call(null,b))?a:ae(B,b,re.h(yk,c))}
function Ak(a){var b=function(){var c=function(){var d=bd(a);if(d){d=a.displayName;if(w(d))return d;d=a.name;return"string"===typeof d&&J(d)?d:null}return d}();if(w(c))return c;c=function(){var d=null!=a?a.J&4096||u===a.Bc?!0:!1:!1;return d?Kd(a):d}();if(w(c))return c;c=fd(a);return ld(c)?Eh.g(c):null}();return w(b)?tk(B.g(b),"$","."):null}function Bk(a){return a instanceof I||a instanceof rc}
var Ck=function Ck(a){switch(arguments.length){case 0:return Ck.I();case 1:return Ck.g(arguments[0]);case 2:return Ck.h(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(2),0,null);return Ck.G(arguments[0],arguments[1],c)}};Ck.I=function(){return null};Ck.g=function(a){return id(a)?(a=le(function(b){return w(b)?Bk(b)?Kd(b):b:null},a),J(a)?uk(a):null):Bk(a)?Kd(a):a};
Ck.h=function(a,b){return w(a)?w(b)?[B.g(Ck.g(a))," ",B.g(Ck.g(b))].join(""):Ck.g(a):Ck.g(b)};Ck.G=function(a,b,c){return Pa(Ck,Ck.h(a,b),c)};Ck.X=function(a){var b=M(a),c=N(a);a=M(c);c=N(c);return this.G(b,a,c)};Ck.U=2;var Dk=!1;function Ek(a){if(ld(a))try{var b=H.h(a,Mi)}catch(c){b=null}else b=null;return b}
function Fk(a){var b=Mi.g(fd(a));if(null!=b)return b;b=T(a,0,null);switch(b instanceof I?b.Ba:null){case "\x3e":case "f\x3e":return Ek(T(a,2,null));case "r\x3e":return a=T(a,2,null),null==a?null:a.key;default:return Ek(T(a,1,null))}};var Gk=0;function Hk(a){return setTimeout(a,16)}var Ik=wk?function(){var a=window;return function(){var b=a.requestAnimationFrame;if(w(b))return b;b=a.webkitRequestAnimationFrame;if(w(b))return b;b=a.mozRequestAnimationFrame;if(w(b))return b;b=a.msRequestAnimationFrame;return w(b)?b:Hk}().bind(a)}():Hk;function Jk(a,b){return a.oc-b.oc}function Kk(){return null}function Lk(a){for(var b=a.length,c=0;;)if(c<b){var d=a[c];d.I?d.I():d.call(null);c+=1}else return null}
function Mk(a,b,c){b.push(c);return a.schedule()}function Nk(){this.ec=!1}g=Nk.prototype;g.flush_after_render=function(){var a=this.Pb;if(null==a)return null;this.Pb=null;return Lk(a)};g.queue_render=function(a){null==this.ac&&(this.ac=[]);return Mk(this,this.ac,a)};g.schedule=function(){function a(){return b.run_queues()}var b=this;if(this.ec)return null;this.ec=!0;return Ik.g?Ik.g(a):Ik.call(null,a)};g.flush_before_flush=function(){var a=this.Qb;if(null==a)return null;this.Qb=null;return Lk(a)};
g.flush_queues=function(){this.flush_before_flush();Kk();this.flush_render();return this.flush_after_render()};g.run_queues=function(){this.ec=!1;return this.flush_queues()};g.add_before_flush=function(a){null==this.Qb&&(this.Qb=[]);return Mk(this,this.Qb,a)};g.add_after_render=function(a){null==this.Pb&&(this.Pb=[]);return Mk(this,this.Pb,a)};
g.flush_render=function(){var a=this.ac;if(null==a)return null;this.ac=null;a:{a.sort(Jk);for(var b=a.length,c=0;;)if(c<b){var d=a[c];!0===d.cljsIsDirty&&d.forceUpdate();c+=1}else break a}return null};var Ok=new Nk;function Pk(a){if(w(a.cljsIsDirty))return null;a.cljsIsDirty=!0;return Ok.queue_render(a)};function Qk(a){if(null!=a&&null!=a.qd)a=a.id;else{var b=Qk[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=Qk._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw A("Compiler.get-id",a);}return a}function Rk(a,b,c){if(null!=a&&null!=a.Oc)a=a.Oc(a,b,c);else{var d=Rk[t(null==a?null:a)];if(null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else if(d=Rk._,null!=d)a=d.l?d.l(a,b,c):d.call(null,a,b,c);else throw A("Compiler.parse-tag",a);}return a}
function Sk(a,b){if(null!=a&&null!=a.Mc)a=a.Mc(a,b);else{var c=Sk[t(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=Sk._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw A("Compiler.as-element",a);}return a}function Tk(a,b,c,d,e){if(null!=a&&null!=a.Nc)a=a.Nc(a,b,c,d,e);else{var f=Tk[t(null==a?null:a)];if(null!=f)a=f.P?f.P(a,b,c,d,e):f.call(null,a,b,c,d,e);else if(f=Tk._,null!=f)a=f.P?f.P(a,b,c,d,e):f.call(null,a,b,c,d,e);else throw A("Compiler.make-element",a);}return a};var Uk;function Vk(a,b){b.hc=null;a:{var c=Uk;Uk=b;try{var d=a.I?a.I():a.call(null);break a}finally{Uk=c}d=void 0}a=b.hc;b.nb=!1;a:{c=b.xb;var e=null==a?0:a.length,f=e===(null==c?0:c.length);if(f)for(f=0;;){var h=f===e;if(h){c=h;break a}if(a[f]===c[f])f+=1;else{c=!1;break a}}else c=f}c||b._update_watching(a);return d}function Wk(a){var b=Uk;if(null!=b){var c=b.hc;null==c?b.hc=[a]:c.push(a)}}function Xk(a,b,c){a.ra=U.l(a.ra,b,c);return a.wc=null}
function Yk(a,b){a.ra=ad.h(a.ra,b);return a.wc=null}function Zk(a,b,c){var d=a.wc;d=null==d?a.wc=Bd(function(l,m,n){l.push(m);l.push(n);return l},[],a.ra):d;for(var e=d.length,f=0;;)if(f<e){var h=d[f],k=d[f+1];k.K?k.K(h,a,b,c):k.call(null,h,a,b,c);f=2+f}else return null}function $k(a,b,c,d){Lb(a,["#object[reagent.ratom.",B.g(c)," "].join(""));a:{c=Uk;Uk=null;try{var e=d;break a}finally{Uk=c}e=void 0}rg(e,a,b);return Lb(a,"]")}var al=null;
function bl(a,b,c,d){this.state=a;this.meta=b;this.vc=c;this.ra=d;this.o=2154201088;this.J=114690}g=bl.prototype;g.W=function(a,b,c){return $k(b,c,"RAtom",new v(null,1,[Ag,this.Ca(null)],null))};g.ea=function(){return this.meta};g.T=function(){return ba(this)};g.F=function(a,b){return this===b};g.ya=function(a,b){a=this.state;this.state=b;null!=this.ra&&Zk(this,a,b);return b};g.Ub=function(a,b){return this.ya(null,b.g?b.g(this.state):b.call(null,this.state))};
g.Vb=function(a,b,c){return this.ya(null,b.h?b.h(this.state,c):b.call(null,this.state,c))};g.Wb=function(a,b,c,d){return this.ya(null,b.l?b.l(this.state,c,d):b.call(null,this.state,c,d))};g.Xb=function(a,b,c,d,e){return this.ya(null,be(b,this.state,c,d,e))};g.Yb=function(a,b){Zk(this,a,b)};g.Hb=function(a,b,c){return Xk(this,b,c)};g.Ib=function(a,b){return Yk(this,b)};g.ga=function(a,b){return new bl(this.state,b,this.vc,this.ra)};g.Ca=function(){Wk(this);return this.state};
var cl=function cl(a){switch(arguments.length){case 1:return cl.g(arguments[0]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=new K(c.slice(1),0,null);return cl.G(arguments[0],c)}};cl.g=function(a){return new bl(a,null,null,null)};cl.G=function(a,b){var c=de(b);b=H.h(c,Fa);c=H.h(c,gi);return new bl(a,b,c,null)};cl.X=function(a){var b=M(a);a=N(a);return this.G(b,a)};cl.U=1;
function dl(a,b,c,d){var e=b.tc;e=null==e?ee:e;var f=e.h?e.h(c,null):e.call(null,c,null);if(null!=f)return G(f);if(null==Uk)return a.I?a.I():a.call(null);f=function(){function k(){var l=ad.h(b.tc,c);b.tc=l;null!=d&&(d.sc=null);return null}return el.l?el.l(a,Xh,k):el.call(null,a,Xh,k)}();var h=G(f);b.tc=U.l(e,c,f);null!=d&&(d.sc=f);return h}function fl(a){this.ja=gl;this.path=a;this.ra=this.state=this.sc=null;this.o=2153807872;this.J=114690}g=fl.prototype;
g._peek=function(){var a=Uk;Uk=null;try{return this.Ca(null)}finally{Uk=a}};g._set_state=function(a,b){if(a===b)return null;this.state=b;return null!=this.ra?Zk(this,a,b):null};g.W=function(a,b,c){return $k(b,c,"RCursor",new v(null,2,[Ag,this.Ca(null),$h,this.path],null))};g.T=function(){return pc(new V(null,2,5,X,[this.ja,this.path],null))};g.F=function(a,b){return b instanceof fl&&O.h(this.path,b.path)&&O.h(this.ja,b.ja)};
g.ya=function(a,b){this._set_state(this.state,b);(null!=this.ja?this.ja.o&32768||u===this.ja.Uc||(this.ja.o?0:x(vb,this.ja)):x(vb,this.ja))?O.h(this.path,Xc)?oe(this.ja,b):pe.K(this.ja,ve,this.path,b):this.ja.h?this.ja.h(this.path,b):this.ja.call(null,this.path,b);return b};g.Ub=function(a,b){a=this.ya;var c=this._peek();b=b.g?b.g(c):b.call(null,c);return a.call(this,null,b)};g.Vb=function(a,b,c){a=this.ya;var d=this._peek();b=b.h?b.h(d,c):b.call(null,d,c);return a.call(this,null,b)};
g.Wb=function(a,b,c,d){a=this.ya;var e=this._peek();b=b.l?b.l(e,c,d):b.call(null,e,c,d);return a.call(this,null,b)};g.Xb=function(a,b,c,d,e){return this.ya(null,be(b,this._peek(),c,d,e))};g.Yb=function(a,b){Zk(this,a,b)};g.Hb=function(a,b,c){return Xk(this,b,c)};g.Ib=function(a,b){return Yk(this,b)};
g.Ca=function(){var a=this,b=this,c=a.state,d=function(){var e=a.sc;return null==e?(e=(null!=a.ja?a.ja.o&32768||u===a.ja.Uc||(a.ja.o?0:x(vb,a.ja)):x(vb,a.ja))?function(){var f=G(a.ja);return Pa(H,f,a.path)}:function(){return a.ja.g?a.ja.g(a.path):a.ja.call(null,a.path)},dl(e,a.ja,a.path,b)):G(e)}();b._set_state(c,d);return d};
function hl(a){if(null!=a&&null!=a.uc)a=a.uc(a);else{var b=hl[t(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=hl._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw A("IDisposable.dispose!",a);}return a}function Pb(a,b,c,d){return a._handle_change(b,c,d)}function il(a){this.f=a;this.state=null;this.nb=!0;this.Jc=!1;this.ic=this.ab=this.ra=this.xb=null;this.o=2153807872;this.J=114690}g=il.prototype;g._peek_at=function(){var a=Uk;Uk=null;try{return this.Ca(null)}finally{Uk=a}};
g._handle_change=function(a,b,c){return b===c||this.nb?null:null==this.ab?(this.nb=!0,null==al&&(al=[],!1===Ok.ec&&Ok.schedule()),al.push(this)):!0===this.ab?this._run(!1):this.ab.g?this.ab.g(this):this.ab.call(null,this)};
g._update_watching=function(a){var b=hg(a),c=hg(this.xb);this.xb=a;a=J(zj.h(b,c));for(var d=null,e=0,f=0;;)if(f<e){var h=d.N(null,f);Ob(h,this);f+=1}else if(a=J(a))d=a,od(d)?(a=Xb(d),f=Yb(d),d=a,e=R(a),a=f):(a=M(d),Ob(a,this),a=N(d),d=null,e=0),f=0;else break;b=J(zj.h(c,b));c=null;for(e=d=0;;)if(e<d)a=c.N(null,e),Qb(a,this),e+=1;else if(b=J(b))c=b,od(c)?(b=Xb(c),d=Yb(c),c=b,a=R(b),b=d,d=a):(a=M(c),Qb(a,this),b=N(c),c=null,d=0),e=0;else return null};
g._queued_run=function(){return this.nb&&null!=this.xb?this._run(!0):null};g._try_capture=function(a){try{return this.ic=null,Vk(a,this)}catch(b){return this.ic=this.state=a=b,this.nb=!1}};g._run=function(a){var b=this.state;a=w(a)?this._try_capture(this.f):Vk(this.f,this);this.Jc||(this.state=a,null==this.ra||O.h(b,a)||Zk(this,b,a));return a};
g._set_opts=function(a){var b=de(a);a=H.h(b,ph);var c=H.h(b,Si),d=H.h(b,Xh);b=H.h(b,lh);null!=a&&(this.ab=a);null!=c&&(this.od=c);null!=d&&(this.Kc=d);return null!=b?this.Jc=b:null};g.W=function(a,b,c){return $k(b,c,"Reaction",new v(null,1,[Ag,this.Ca(null)],null))};g.T=function(){return ba(this)};g.F=function(a,b){return this===b};
g.uc=function(){var a=this.state,b=this.xb;this.ab=this.state=this.xb=null;this.nb=!0;b=J(hg(b));for(var c=null,d=0,e=0;;)if(e<d){var f=c.N(null,e);Qb(f,this);e+=1}else if(b=J(b))c=b,od(c)?(b=Xb(c),e=Yb(c),c=b,d=R(b),b=e):(b=M(c),Qb(b,this),b=N(c),c=null,d=0),e=0;else break;null!=this.Kc&&this.Kc(a);a=this.Fd;if(null==a)return null;b=a.length;for(c=0;;)if(c<b)d=a[c],d.g?d.g(this):d.call(null,this),c+=1;else return null};g.ya=function(a,b){a=this.state;this.state=b;this.od(a,b);Zk(this,a,b);return b};
g.Ub=function(a,b){a=this.ya;var c=this._peek_at();b=b.g?b.g(c):b.call(null,c);return a.call(this,null,b)};g.Vb=function(a,b,c){a=this.ya;var d=this._peek_at();b=b.h?b.h(d,c):b.call(null,d,c);return a.call(this,null,b)};g.Wb=function(a,b,c,d){a=this.ya;var e=this._peek_at();b=b.l?b.l(e,c,d):b.call(null,e,c,d);return a.call(this,null,b)};g.Xb=function(a,b,c,d,e){return this.ya(null,be(b,this._peek_at(),c,d,e))};g.Yb=function(a,b){Zk(this,a,b)};g.Hb=function(a,b,c){return Xk(this,b,c)};
g.Ib=function(a,b){a=hd(this.ra);Yk(this,b);return!a&&hd(this.ra)&&null==this.ab?this.uc(null):null};g.Ca=function(){var a=this.ic;if(null!=a)throw a;(a=null==Uk)&&(jl.I?jl.I():jl.call(null));a&&null==this.ab?this.nb&&(a=this.state,this.state=this.f.I?this.f.I():this.f.call(null),null==this.ra||O.h(a,this.state)||Zk(this,a,this.state)):(Wk(this),this.nb&&this._run(!1));return this.state};
function jl(){for(;;){var a=al;if(null==a)return null;al=null;for(var b=a.length,c=0;;)if(c<b)a[c]._queued_run(),c+=1;else break}}Kk=jl;function el(a){for(var b=[],c=arguments.length,d=0;;)if(d<c)b.push(arguments[d]),d+=1;else break;c=1<b.length?new K(b.slice(1),0,null):null;b=arguments[0];var e=de(c);c=H.h(e,ph);d=H.h(e,Si);e=H.h(e,Xh);b=new il(b);b._set_opts(new v(null,3,[ph,c,Si,d,Xh,e],null));return b}var kl=el(null);
function ll(a,b){var c=ml,d=kl,e=Vk(a,d);null!=d.xb&&(kl=el(null),d._set_opts(c),d.f=a,d.ab=function(){return Pk.g?Pk.g(b):Pk.call(null,b)},b.cljsRatom=d);return e};var nl;function ol(a,b){var c=b.argv;if(null==c){c=X;a=a.constructor;a:for(var d=sa(b),e=d.length,f=ee,h=0;;)if(h<e){var k=d[h];f=U.l(f,Jd.g(k),ta(b,k));h+=1}else break a;b=new V(null,2,5,c,[a,f],null)}else b=c;return b}function pl(a){var b;if(b=bd(a))a=null==a?null:a.prototype,b=null!=(null==a?null:a.pb);return b}
function ql(a,b){for(;;){var c=a.pb,d=!0===a.hd?c.call(a,a):function(){var e=ol(a,a.props);switch(R(e)){case 1:return c.call(a);case 2:return c.call(a,Qc(e,1));case 3:return c.call(a,Qc(e,1),Qc(e,2));case 4:return c.call(a,Qc(e,1),Qc(e,2),Qc(e,3));case 5:return c.call(a,Qc(e,1),Qc(e,2),Qc(e,3),Qc(e,4));default:return c.apply(a,Oa(e).slice(1))}}();if(nd(d))return Sk(b,d);if(sd(d))d=pl(d)?function(e,f,h,k,l){return function(){function m(p){var q=null;if(0<arguments.length){q=0;for(var r=Array(arguments.length-
0);q<r.length;)r[q]=arguments[q+0],++q;q=new K(r,0,null)}return n.call(this,q)}function n(p){return Sk(f,ae(Xe,l,p))}m.U=0;m.X=function(p){p=J(p);return n(p)};m.G=n;return m}()}(a,b,c,null,d):d,a.pb=d;else return d}}var ml=new v(null,1,[lh,!0],null);
function rl(a,b){switch(a instanceof I?a.Ba:null){case "getDefaultProps":throw Error("getDefaultProps not supported");case "getDerivedStateFromProps":return function(c,d){var e=b.call,f=c.argv;null!=f&&(c=T(f,1,null),c=ld(c)?c:null);return e.call(b,null,c,d)};case "getInitialState":return function(c){var d=c.kd;d=null!=d?d:c.kd=cl.g(null);return oe(d,b.call(c,c))};case "getSnapshotBeforeUpdate":return function(c,d){return b.call(this,this,ol(this,c),d)};case "componentWillReceiveProps":return function(c){return b.call(this,
this,ol(this,c))};case "UNSAFE_componentWillReceiveProps":return function(c){return b.call(this,this,ol(this,c))};case "shouldComponentUpdate":return function(c){var d=Dk;if(w(d))return d;d=this.props.argv;var e=c.argv,f=null==d||null==e;if(null==b){if(f)return f;try{return!O.h(d,e)}catch(h){return!1}}else return f?b.call(this,this,ol(this,this.props),ol(this,c)):b.call(this,this,d,e)};case "componentWillUpdate":return function(c,d){return b.call(this,this,ol(this,c),d)};case "UNSAFE_componentWillUpdate":return function(c,
d){return b.call(this,this,ol(this,c),d)};case "componentDidUpdate":return function(c,d,e){return b.call(this,this,ol(this,c),d,e)};case "componentWillMount":return function(){return b.call(this,this)};case "UNSAFE_componentWillMount":return function(){return b.call(this,this)};case "componentDidMount":return function(){return b.call(this,this)};case "componentWillUnmount":return function(){var c=ta(this,"cljsRatom");null!=c&&hl(c);this.cljsIsDirty=!1;return null==b?null:b.call(this,this)};case "componentDidCatch":return function(c,
d){return b.call(this,this,c,d)};default:return null}}var sl=new v(null,2,[Ah,null,jh,null],null),tl=function(a){var b=ne(ee);return function(c){var d=H.h(G(b),c);if(null!=d)return d;d=a.g?a.g(c):a.call(null,c);pe.K(b,U,c,d);return d}}(function(a){if("string"===typeof a)return a;a=Kd(a);a=tk(a,/(unsafe|UNSAFE)[-_]/,"UNSAFE_");a=vk(a);var b=J(a);a=M(b);b=N(b);return ae(B,a,re.h(yk,b))});function ul(a){return Bd(function(b,c,d){return U.l(b,Jd.g(tl(c)),d)},ee,a)}
function vl(a,b){var c=function(){var h=Mh.g(a);return w(h)?h:Uh.g(a)}(),d=null==Mh.g(a),e=function(){var h=Yh.g(a);if(w(h))return h;h=Ak(c);return w(h)?h:B.g(Cg("reagent"))}(),f=Bd(function(h,k,l){var m=U.l,n=rl(k,l);return m.call(U,h,k,w(n)?n:l)},ee,a);return U.G(f,Yh,e,Vc([ri,d,Mh,c,Uh,function(){var h=this,k=ta(h,"cljsRatom");h.cljsIsDirty=!1;return null==k?ll(function(){a:{var l=nl;nl=h;try{var m=ql(h,b);break a}finally{nl=l}m=void 0}return m},h):k._run(!1)}]))}
function wl(a){return Bd(function(b,c,d){c=Kd(c);b[c]=d;return b},{},a)}function xl(a,b){return vl($f.G(Vc([sl,ul(a)])),b)}var bg=new V(null,5,5,X,[Bh,Rh,Li,rh,fi],null);
function yl(a,b){function c(k,l,m){Xi.Component.call(this,k,l,m);w(h)&&(h.h?h.h(this,k):h.call(null,this,k));w(f)&&(this.state=f.g?f.g(this):f.call(null,this));this.oc=Gk+=1;return this}a=xl(a,b);b=wl(ce(ad,a,Yh,wh,kh,Vc([Uh,Mh,bg])));var d=wl(ag(a)),e=Yh.g(a),f=wh.g(a),h=kh.g(a);wa(c.prototype,Xi.Component.prototype,b);w(Uh.g(a))&&(c.prototype.render=Uh.g(a));w(Mh.g(a))&&(c.prototype.pb=Mh.g(a));w(ri.g(a))&&(c.prototype.hd=ri.g(a));wa(c,Xi.Component,d);w(e)&&(c.displayName=e,c.Zb=e,c.fd=function(k){return Lb(k,
e)},Object.defineProperty(c,"name",{value:e,writable:!1}));c.Gc=!0;return c.prototype.constructor=c}function zl(a,b,c){a=Qk(a);return b[a]=c}
function Al(a,b){for(;;){var c=b.pb,d=b.argv,e=$d(c,d);if(nd(e))return Sk(a,e);if(sd(e))c=pl(e)?function(f,h,k,l,m,n){return function(){function p(r){var y=null;if(0<arguments.length){y=0;for(var z=Array(arguments.length-0);y<z.length;)z[y]=arguments[y+0],++y;y=new K(z,0,null)}return q.call(this,y)}function q(r){return Sk(f,ae(Xe,n,r))}p.U=0;p.X=function(r){r=J(r);return q(r)};p.G=q;return p}()}(a,b,c,null,d,e):e,b.pb=c;else return e}}
function Bl(a,b){var c=b.argv,d=b.pb;b=Xi.useState(0);T(b,0,null);var e=T(b,1,null),f=Xi.useRef();w(f.current)||function(){var k={forceUpdate:function(){return e.g?e.g(Fc):e.call(null,Fc)}};k.oc=Gk+=1;k.constructor=d;k.pb=d;return f.current=k}();var h=f.current;b=ta(h,"cljsRatom");Xi.useEffect(function(){return function(){var k=ta(h,"cljsRatom");return null==k?null:hl(k)}},[]);h.argv=c;h.cljsIsDirty=!1;return null==b?ll(function(){a:{var k=nl;nl=h;try{var l=Al(a,h);break a}finally{nl=k}l=void 0}return l},
h):b._run(!1)}function Cl(a,b){a=a.argv;b=b.argv;var c=!1===Dk;if(c)try{return O.h(a,b)}catch(d){return!1}else return c}function Dl(a,b){function c(e){return Bl(a,e)}var d=ta(b,Qk(a));if(w(d))return d;d=Ak(b);c.displayName=d;Object.defineProperty(c,"name",{value:d,writable:!1});d=Xi.memo(c,Cl);zl(a,b,d);return d};var El=new eg(null,new v(null,6,["url",null,"tel",null,"text",null,"textarea",null,"password",null,"search",null],null),null),Fl=!1;
function Gl(a,b,c,d){var e=de(ee);e=H.h(e,ih);if(w(function(){var h=!(a===document.activeElement&&ud(El,a.type)&&"string"===typeof b&&"string"===typeof c);return h?h:Fl}()))return d.$b=b,a.value=b,bd(e)?e.g?e.g(b):e.call(null,b):null;var f=a.value;if(!O.h(f,c))return Ok.add_after_render(function(){var h=Fl;Fl=!0;try{return Hl.g?Hl.g(d):Hl.call(null,d)}finally{Fl=h}});f=R(f)-a.selectionStart;f=R(b)-f;d.$b=b;a.value=b;bd(e)&&(e.g?e.g(b):e.call(null,b));a.selectionStart=f;return a.selectionEnd=f}
function Hl(a){if(w(a.nc)){a.Hc=!1;var b=a.jd,c=a.$b,d=a.qc;return O.h(b,c)?null:Gl(d,b,c,a)}return null}function Il(a,b,c){a.$b=c.target.value;w(a.Hc)||(a.Hc=!0,Ok.add_after_render(function(){return Hl(a)}));return b.g?b.g(c):b.call(null,c)}
function Jl(a){var b=nl;if(w(function(){var f=null!=a;return f?(f=a.hasOwnProperty("onChange"),w(f)?a.hasOwnProperty("value"):f):f}())){var c=a.value;c=null==c?"":c;var d=a.onChange,e=a.ref;w(b.nc)||(b.nc=!0,b.$b=c);w(b.Pc)||(b.Pc=bd(e)?function(f){b.qc=f;return e.g?e.g(f):e.call(null,f)}:w(w(e)?e.hasOwnProperty("current"):e)?function(f){b.qc=f;return e.current=f}:function(f){return b.qc=f});b.jd=c;delete a.value;a.defaultValue=c;a.onChange=function(f){return Il(b,d,f)};a.ref=b.Pc}}
var Kl=new v(null,4,[ti,"ReagentInput",Lh,Hl,Gh,function(a){return a.nc=null},Nh,function(a,b,c,d,e){Jl(c);return Tk(e,a,b,c,d)}],null);var Ll=/([^\s\.#]+)(?:#([^\s\.#]+))?(?:\.([^\s#]+))?/,Ml={"class":"className","for":"htmlFor",charset:"charSet"};function Nl(a,b){return a.hasOwnProperty(b)?ta(a,b):null}function Ol(a,b,c){if(Bk(b)){var d=Nl(Ml,Kd(b));null==d?(d=zk(b),b=Kd(b),b=Ml[b]=d):b=d}c=Pl.g?Pl.g(c):Pl.call(null,c);a[b]=c;return a}
function Pl(a){return"object"!==t(a)?a:Bk(a)?Kd(a):ld(a)?Bd(Ol,{},a):id(a)?Gg(a):sd(a)?function(){function b(d){var e=null;if(0<arguments.length){e=0;for(var f=Array(arguments.length-0);e<f.length;)f[e]=arguments[e+0],++e;e=new K(f,0,null)}return c.call(this,e)}function c(d){return $d(a,d)}b.U=0;b.X=function(d){d=J(d);return c(d)};b.G=c;return b}():Gg(a)}var Ql={};function Rl(a,b,c){if(Bk(b)){var d=Nl(Ql,Kd(b));null==d?(d=zk(b),b=Kd(b),b=Ql[b]=d):b=d}c=Pl(c);a[b]=c;return a}
function Sl(a){return"object"!==t(a)?a:Bk(a)?Kd(a):ld(a)?Bd(Rl,{},a):id(a)?Gg(a):sd(a)?function(){function b(d){var e=null;if(0<arguments.length){e=0;for(var f=Array(arguments.length-0);e<f.length;)f[e]=arguments[e+0],++e;e=new K(f,0,null)}return c.call(this,e)}function c(d){return $d(a,d)}b.U=0;b.X=function(d){d=J(d);return c(d)};b.G=c;return b}():Gg(a)}
function Tl(a,b,c,d,e){switch(R(b)-e){case 0:return Xi.createElement(c,d);case 1:return Xi.createElement(c,d,Sk(a,T(b,e,null)));default:return Xi.createElement.apply(null,Bd(function(f,h,k){h>=e&&f.push(Sk(a,k));return f},[c,d],b))}}function Ul(a,b,c,d){this.tag=a;this.id=b;this.className=c;this.custom=d}function Vl(a,b,c){var d=ta(a,Qk(c));null==d?pl(a)?a=zl(c,a,a):(d=fd(a),d=U.l(d,Nh,a),d=yl(d,c),a=zl(c,a,d)):a=d;c={};c.argv=b;b=Fk(b);null!=b&&(c.key=b);return Xi.createElement(a,c)}
function Wl(a,b,c,d){var e={};e.pb=a;var f=R(b);c=af(null,b,c|0,f|0,null);e.argv=c;b=Fk(b);null!=b&&(e.key=b);return Xi.createElement(Dl(d,a),e)}function Xl(a,b,c){var d;if(d=bd(a))d=null==a?null:a.prototype,d=null!=(null==d?null:d.render);return d?Vl(a,b,c):Wl(a,b,1,c)}var Yl={};
function Zl(a,b,c,d){var e=a.tag,f=T(b,c,null),h=null==f||ld(f),k=function(){var n=h?f:null;var p=Ih.g(n);p=w(p)?U.l(n,Ih,Ck.g(p)):n;var q=a.id;n=a.className;q=null!=q&&null==Ji.g(p)?U.l(p,Ji,q):p;if(w(n)){var r=U.l,y=Ck.h,z=Ih.g(p);p=w(z)?z:mh.g(p);n=r.call(U,q,Ih,y.call(Ck,n,p))}else n=q;n=w(a.custom)?Sl(n):Pl(n);return w(n)?n:{}}();c+=h?1:0;a:switch(e){case "input":case "textarea":var l=!0;break a;default:l=!1}if(l){l=Ek(f);var m=function(){var n=d.rd;if(w(n))return n;n=yl(Kl,d);return d.rd=n}();
return Sk(d,ed(new V(null,6,5,X,[m,b,e,k,c,d],null),$f.G(Vc([w(l)?new v(null,1,[Mi,l],null):null,fd(b)]))))}l=Ek(fd(b));null!=l&&(k.key=l);return Tk(d,b,e,k,c)}function $l(a,b){return Oa(re.h(function(c){return Sk(b,c)},a))}
function am(a,b,c){null==b&&console.error("vec-to-elem",vg(Vc([a]),Ca()));var d=T(a,0,null);switch(d instanceof I?d.Ba:null){case "\x3e":return c=T(a,1,null),Zl(new Ul(c,null,null,null),a,2,b);case "r\x3e":c=T(a,1,null);d=T(a,2,null);d=w(d)?d:{};var e=Ek(fd(a));null!=e&&(d.key=e);return Tk(b,a,c,d,3);case "f\x3e":return Wl(T(a,1,null),a,2,b);case "\x3c\x3e":return d=T(a,1,null),c=null==d||ld(d),d=Pl(c?d:null),d=w(d)?d:{},c=1+(c?1:0),e=Fk(a),null!=e&&(d.key=e),Tk(b,a,Xi.Fragment,d,c);default:if(Bk(d)||
"string"===typeof d)a:for(;;)switch(c=T(a,0,null),d=Kd(c),e=d.indexOf("\x3e"),e){case -1:b=Zl(Rk(b,d,c),a,1,b);break a;case 0:b=null;break a;default:a=ed(new V(null,2,5,X,[d.substring(0,e),U.l(ed(a,null),0,d.substring(e+1))],null),fd(a))}else b=c.l?c.l(d,a,b):c.call(null,d,a,b);return b}}function bm(a,b,c,d,e){this.opts=a;this.id=b;this.Ic=c;this.dc=d;this.nd=e;this.o=393216;this.J=0}g=bm.prototype;g.ga=function(a,b){return new bm(this.opts,this.id,this.Ic,this.dc,b)};g.ea=function(){return this.nd};
g.qd=function(){return this.id};g.Oc=function(a,b,c){return this.dc.l?this.dc.l(this,b,c):this.dc.call(null,this,b,c)};g.Mc=function(a,b){a=this.Ic;return"object"!==t(b)?b:nd(b)?am(b,this,a):(null==b?0:null!=b?b.o&64||u===b.zb||(b.o?0:x(bb,b)):x(bb,b))?$l(b,this):Bk(b)?Kd(b):(null!=b?b.o&2147483648||u===b.ka||(b.o?0:x(Mb,b)):x(Mb,b))?vg(Vc([b]),Ca()):b};g.Nc=function(a,b,c,d,e){return Tl(this,b,c,d,e)};
var cm,dm=ee,em=Cg("reagent-compiler"),fm=w(ui.g(dm))?Xl:Vl,gm=H.l(dm,sh,function(a,b){a=Nl(Yl,b);if(null==a){var c=N(ig(Ll,Kd(b)));a=T(c,0,null);var d=T(c,1,null);c=T(c,2,null);c=null==c?null:tk(c,/\./," ");var e=a.indexOf("-");e=!O.h(-1,e);a=new Ul(a,d,c,e);return Yl[b]=a}return a});cm=new bm(dm,em,fm,gm,ee);var hm=ne(null),im=cl.g(null);function jm(a){return function(b){b=b.data;return a.g?a.g(b):a.call(null,b)}}function km(a,b){wg(Vc(["attempting to connect websocket"]));var c=new WebSocket(a);c.onerror=function(d){console.error(d);O.h(c.readyState,WebSocket.CLOSED)?(oe(im,!1),d=oe(hm,null)):d=null;return d};if(w(c))return c.onmessage=jm(b),oe(hm,c),oe(im,!0),wg(Vc(["Websocket connection established with: ",a]));throw Error("Websocket connection failed!");};var lm=Wi(21,{});var mm=ne(ee);function nm(a,b,c){var d=Dk;Dk=!0;try{return lm.render(a.I?a.I():a.call(null),b,function(){var e=Dk;Dk=!1;try{return pe.K(mm,U,b,a),Ok.flush_after_render(),null!=c?c.I?c.I():c.call(null):null}finally{Dk=e}})}finally{Dk=d}};var om=function om(a,b){return ld(a)?ue.h(a,function(){return function f(e){return new Ld(null,function(){for(;;){var h=J(e);if(h){if(od(h)){var k=Xb(h),l=R(k),m=new Nd(Array(l));return function(){for(var r=0;;)if(r<l){var y=D(k,r),z=T(y,0,null),C=T(y,1,null);y=m;var E=X,P=z;z=a.g?a.g(z):a.call(null,z);z=om.h?om.h(z,C):om.call(null,z,C);y.add(new V(null,2,5,E,[P,z],null));r+=1}else return!0}()?Qd(m.chunk(),f(Yb(h))):Qd(m.chunk(),null)}var n=M(h),p=T(n,0,null),q=T(n,1,null);return Uc(new V(null,2,
5,X,[p,function(){var r=a.g?a.g(p):a.call(null,p),y=q;return om.h?om.h(r,y):om.call(null,r,y)}()],null),f(vc(h)))}return null}},null)}(b)}()):b},pm=cl.g(Xc),qm=cl.g(1);
function rm(a,b){w(G(hm))&&O.h(G(hm).readyState,WebSocket.OPEN)&&(wg(Vc(["Stopping chan"])),w(G(hm))&&G(hm).close(1E3,"Disconnected"),oe(im,null));return km(["ws://localhost:",B.g(a),"/ws"].join(""),function(c){var d=w(b)?b:Ph,e=function(){switch(d instanceof I?d.Ba:null){case "json":return function(f){return JSON.parse(f)};default:return function(f){return qk().read(f)}}}();console.log("Message:",e.g?e.g(c):e.call(null,c));return pe.l(pm,Wc,e.g?e.g(c):e.call(null,c))})}
var gl=cl.g(new v(null,1,[oh,Ph],null)),sm=new fl(new V(null,1,5,X,[oh],null));function tm(a){return new V(null,3,5,X,[Jh,new v(null,2,[xi,"port",nh,new v(null,1,[Zh,w(a)?Sh:zi],null)],null),"Backend port: "],null)}
function um(){var a=cl.g(!1),b=cl.g(G(new fl(new V(null,1,5,X,[Kh],null)))),c=cl.g(G(sm));return function(){return new V(null,2,5,X,[Ei,new v(null,7,[Ji,Kh,Ci,G(b),Eh,Kh,Pi,Ii,ei,function(d){oe(b,d.target.value);return oe(a,!1)},Fi,function(d){d=d.target.value;return J(d)&&Ka(G(a))?(oe(a,!0),rm(d,G(c))):null},ni,function(d){var e=d.target.value;pe.K(gl,U,Kh,e);return O.h(d.key,"Enter")?(d.preventDefault(),rm(e,G(c)),oe(a,!0)):null}],null)],null)}}
var vm=new v(null,4,[gh,new v(null,4,[$g,"png",pi,560,vh,960,Di,2],null),yh,"hover",Gi,!0,Qi,!1],null),dh,Wg=ne(ee),Xg=ne(ee),Yg=ne(ee),Zg=ne(ee),Vg=H.l(ee,zh,Jg.I?Jg.I():Jg.call(null));dh=new Ug;ch(ah,function(a){return dh.g(U.l(a,$g,Ph))});ch(Ph,function(a){a=de(a);a=H.h(a,xh);return U.l(ve(we.l(ve(a,new V(null,1,5,X,[nh],null),new v(null,2,[vh,"100%",pi,"100%"],null)),new V(null,1,5,X,[yi],null),function(b){return om(vm,b)}),new V(null,2,5,X,[Ri,mi],null),!0),Oi,!0)});
ch(li,function(a){a=de(a);a=H.h(a,xh);qa.Gd(a,"style",{width:"100%",height:"100%"});var b=yj(om(vm,mj(a.config)));a.config=b;a.layout.autosize=!0;a.useResizeHandler=!0;return a});
function wm(a,b){var c=function(){var e=new v(null,1,[Ri,new v(null,1,[Wh,"Loading Test"],null)],null);return O.h(b,li)?yj(e):e}(),d=dh.g(new v(null,2,[xh,w(a)?a:c,oh,b],null));return new V(null,2,5,X,[Hi,new V(null,3,5,X,[Ai,new v(null,1,[nh,new v(null,2,[pi,"90vh",vh,"100%"],null)],null),function(){switch(b instanceof I?b.Ba:null){case "json":return Xi.createElement(Yi.default,d);case "transit":return new V(null,3,5,X,[Dh,Yi.default,d],null);default:return new V(null,2,5,X,[Ai,"Invalid message format"],
null)}}()],null)],null)};rm(8987,Ph);
var xm=new V(null,4,5,X,[Ai,new v(null,1,[nh,new v(null,1,[vi,20],null)],null),new V(null,5,5,X,[Ai,new v(null,1,[nh,new v(null,4,[Vh,eh,vh,"100%",ai,fh,si,Bi],null)],null),new V(null,1,5,X,[function(){return new V(null,4,5,X,[oi,new v(null,1,[nh,new v(null,2,[di,10,Vh,ci],null)],null),new V(null,2,5,X,[tm,G(im)],null),new V(null,1,5,X,[um],null)],null)}],null),new V(null,1,5,X,[function(){return new V(null,3,5,X,[Ai,new v(null,1,[nh,new v(null,1,[Vh,ci],null)],null),G(new fl(new V(null,1,5,X,[oh],
null)))],null)}],null),new V(null,3,5,X,[Ai,new v(null,1,[nh,new v(null,2,[Vh,eh,Ch,20],null)],null),new V(null,1,5,X,[function(){return new V(null,4,5,X,[Hi,new V(null,3,5,X,[Ki,new v(null,2,[nh,new v(null,1,[Ch,10],null),qi,function(){return pe.h(qm,function(a){var b=R(G(pm));a+=1;return b<a?b:a})}],null),""],null),new V(null,3,5,X,[Ki,new v(null,1,[qi,function(){return pe.h(qm,function(a){--a;return 1>a?1:a})}],null),""],null),new V(null,3,5,X,[Ki,new v(null,2,[nh,new v(null,1,[qh,10],null),
qi,function(){return oe(pm,Xc)}],null),"\ud83d\uddd1"],null)],null)}],null)],null)],null),new V(null,1,5,X,[function(){var a=X;a:{var b=G(qm),c=G(pm),d=J(c);for(b=J(se(b,c));;)if(b)d=N(d),b=N(b);else break a}return new V(null,3,5,a,[wm,M(d),G(sm)],null)}],null)],null),ym=document.getElementById("app");
(function(a,b){jl();var c=ld(cm)?new V(null,2,5,X,[ki.g(cm),hi.g(cm)],null):bd(cm)?new V(null,2,5,X,[cm,cm],null):new V(null,2,5,X,[cm,null],null),d=T(c,0,null);c=T(c,1,null);return nm(function(){return Sk(d,bd(a)?a.I?a.I():a.call(null):a)},b,c)})(xm,ym);
}).call(this);